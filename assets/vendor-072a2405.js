function EP(e,t){for(var r=0;r<t.length;r++){const a=t[r];if(typeof a!="string"&&!Array.isArray(a)){for(const c in a)if(c!=="default"&&!(c in e)){const f=Object.getOwnPropertyDescriptor(a,c);f&&Object.defineProperty(e,c,f.get?f:{enumerable:!0,get:()=>a[c]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}var vp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function _c(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var CP={exports:{}},Ny={},TP={exports:{}},lr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pm=Symbol.for("react.element"),r$=Symbol.for("react.portal"),i$=Symbol.for("react.fragment"),o$=Symbol.for("react.strict_mode"),a$=Symbol.for("react.profiler"),s$=Symbol.for("react.provider"),l$=Symbol.for("react.context"),c$=Symbol.for("react.forward_ref"),u$=Symbol.for("react.suspense"),d$=Symbol.for("react.memo"),h$=Symbol.for("react.lazy"),G2=Symbol.iterator;function f$(e){return e===null||typeof e!="object"?null:(e=G2&&e[G2]||e["@@iterator"],typeof e=="function"?e:null)}var IP={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},MP=Object.assign,PP={};function Ch(e,t,r){this.props=e,this.context=t,this.refs=PP,this.updater=r||IP}Ch.prototype.isReactComponent={};Ch.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ch.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function AP(){}AP.prototype=Ch.prototype;function Iw(e,t,r){this.props=e,this.context=t,this.refs=PP,this.updater=r||IP}var Mw=Iw.prototype=new AP;Mw.constructor=Iw;MP(Mw,Ch.prototype);Mw.isPureReactComponent=!0;var W2=Array.isArray,RP=Object.prototype.hasOwnProperty,Pw={current:null},OP={key:!0,ref:!0,__self:!0,__source:!0};function zP(e,t,r){var a,c={},f=null,y=null;if(t!=null)for(a in t.ref!==void 0&&(y=t.ref),t.key!==void 0&&(f=""+t.key),t)RP.call(t,a)&&!OP.hasOwnProperty(a)&&(c[a]=t[a]);var l=arguments.length-2;if(l===1)c.children=r;else if(1<l){for(var w=Array(l),C=0;C<l;C++)w[C]=arguments[C+2];c.children=w}if(e&&e.defaultProps)for(a in l=e.defaultProps,l)c[a]===void 0&&(c[a]=l[a]);return{$$typeof:pm,type:e,key:f,ref:y,props:c,_owner:Pw.current}}function p$(e,t){return{$$typeof:pm,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Aw(e){return typeof e=="object"&&e!==null&&e.$$typeof===pm}function m$(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var q2=/\/+/g;function wx(e,t){return typeof e=="object"&&e!==null&&e.key!=null?m$(""+e.key):t.toString(36)}function Mv(e,t,r,a,c){var f=typeof e;(f==="undefined"||f==="boolean")&&(e=null);var y=!1;if(e===null)y=!0;else switch(f){case"string":case"number":y=!0;break;case"object":switch(e.$$typeof){case pm:case r$:y=!0}}if(y)return y=e,c=c(y),e=a===""?"."+wx(y,0):a,W2(c)?(r="",e!=null&&(r=e.replace(q2,"$&/")+"/"),Mv(c,t,r,"",function(C){return C})):c!=null&&(Aw(c)&&(c=p$(c,r+(!c.key||y&&y.key===c.key?"":(""+c.key).replace(q2,"$&/")+"/")+e)),t.push(c)),1;if(y=0,a=a===""?".":a+":",W2(e))for(var l=0;l<e.length;l++){f=e[l];var w=a+wx(f,l);y+=Mv(f,t,r,w,c)}else if(w=f$(e),typeof w=="function")for(e=w.call(e),l=0;!(f=e.next()).done;)f=f.value,w=a+wx(f,l++),y+=Mv(f,t,r,w,c);else if(f==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return y}function Yg(e,t,r){if(e==null)return e;var a=[],c=0;return Mv(e,a,"","",function(f){return t.call(r,f,c++)}),a}function g$(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Io={current:null},Pv={transition:null},v$={ReactCurrentDispatcher:Io,ReactCurrentBatchConfig:Pv,ReactCurrentOwner:Pw};lr.Children={map:Yg,forEach:function(e,t,r){Yg(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Yg(e,function(){t++}),t},toArray:function(e){return Yg(e,function(t){return t})||[]},only:function(e){if(!Aw(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};lr.Component=Ch;lr.Fragment=i$;lr.Profiler=a$;lr.PureComponent=Iw;lr.StrictMode=o$;lr.Suspense=u$;lr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=v$;lr.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=MP({},e.props),c=e.key,f=e.ref,y=e._owner;if(t!=null){if(t.ref!==void 0&&(f=t.ref,y=Pw.current),t.key!==void 0&&(c=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(w in t)RP.call(t,w)&&!OP.hasOwnProperty(w)&&(a[w]=t[w]===void 0&&l!==void 0?l[w]:t[w])}var w=arguments.length-2;if(w===1)a.children=r;else if(1<w){l=Array(w);for(var C=0;C<w;C++)l[C]=arguments[C+2];a.children=l}return{$$typeof:pm,type:e.type,key:c,ref:f,props:a,_owner:y}};lr.createContext=function(e){return e={$$typeof:l$,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:s$,_context:e},e.Consumer=e};lr.createElement=zP;lr.createFactory=function(e){var t=zP.bind(null,e);return t.type=e,t};lr.createRef=function(){return{current:null}};lr.forwardRef=function(e){return{$$typeof:c$,render:e}};lr.isValidElement=Aw;lr.lazy=function(e){return{$$typeof:h$,_payload:{_status:-1,_result:e},_init:g$}};lr.memo=function(e,t){return{$$typeof:d$,type:e,compare:t===void 0?null:t}};lr.startTransition=function(e){var t=Pv.transition;Pv.transition={};try{e()}finally{Pv.transition=t}};lr.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};lr.useCallback=function(e,t){return Io.current.useCallback(e,t)};lr.useContext=function(e){return Io.current.useContext(e)};lr.useDebugValue=function(){};lr.useDeferredValue=function(e){return Io.current.useDeferredValue(e)};lr.useEffect=function(e,t){return Io.current.useEffect(e,t)};lr.useId=function(){return Io.current.useId()};lr.useImperativeHandle=function(e,t,r){return Io.current.useImperativeHandle(e,t,r)};lr.useInsertionEffect=function(e,t){return Io.current.useInsertionEffect(e,t)};lr.useLayoutEffect=function(e,t){return Io.current.useLayoutEffect(e,t)};lr.useMemo=function(e,t){return Io.current.useMemo(e,t)};lr.useReducer=function(e,t,r){return Io.current.useReducer(e,t,r)};lr.useRef=function(e){return Io.current.useRef(e)};lr.useState=function(e){return Io.current.useState(e)};lr.useSyncExternalStore=function(e,t,r){return Io.current.useSyncExternalStore(e,t,r)};lr.useTransition=function(){return Io.current.useTransition()};lr.version="18.2.0";TP.exports=lr;var T=TP.exports;const st=_c(T),jy=EP({__proto__:null,default:st},[T]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y$=T,_$=Symbol.for("react.element"),x$=Symbol.for("react.fragment"),b$=Object.prototype.hasOwnProperty,w$=y$.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,S$={key:!0,ref:!0,__self:!0,__source:!0};function kP(e,t,r){var a,c={},f=null,y=null;r!==void 0&&(f=""+r),t.key!==void 0&&(f=""+t.key),t.ref!==void 0&&(y=t.ref);for(a in t)b$.call(t,a)&&!S$.hasOwnProperty(a)&&(c[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps,t)c[a]===void 0&&(c[a]=t[a]);return{$$typeof:_$,type:e,key:f,ref:y,props:c,_owner:w$.current}}Ny.Fragment=x$;Ny.jsx=kP;Ny.jsxs=kP;CP.exports=Ny;var SY=CP.exports,LP={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function r(){for(var a=[],c=0;c<arguments.length;c++){var f=arguments[c];if(f){var y=typeof f;if(y==="string"||y==="number")a.push(f);else if(Array.isArray(f)){if(f.length){var l=r.apply(null,f);l&&a.push(l)}}else if(y==="object"){if(f.toString!==Object.prototype.toString&&!f.toString.toString().includes("[native code]")){a.push(f.toString());continue}for(var w in f)t.call(f,w)&&f[w]&&a.push(w)}}}return a.join(" ")}e.exports?(r.default=r,e.exports=r):window.classNames=r})()})(LP);var E$=LP.exports;const $t=_c(E$);function Cn(){return Cn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Cn.apply(this,arguments)}var DP={exports:{}},Fr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rw=Symbol.for("react.element"),Ow=Symbol.for("react.portal"),Uy=Symbol.for("react.fragment"),Vy=Symbol.for("react.strict_mode"),Hy=Symbol.for("react.profiler"),Gy=Symbol.for("react.provider"),Wy=Symbol.for("react.context"),C$=Symbol.for("react.server_context"),qy=Symbol.for("react.forward_ref"),Zy=Symbol.for("react.suspense"),Xy=Symbol.for("react.suspense_list"),Ky=Symbol.for("react.memo"),Yy=Symbol.for("react.lazy"),T$=Symbol.for("react.offscreen"),$P;$P=Symbol.for("react.module.reference");function Ba(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Rw:switch(e=e.type,e){case Uy:case Hy:case Vy:case Zy:case Xy:return e;default:switch(e=e&&e.$$typeof,e){case C$:case Wy:case qy:case Yy:case Ky:case Gy:return e;default:return t}}case Ow:return t}}}Fr.ContextConsumer=Wy;Fr.ContextProvider=Gy;Fr.Element=Rw;Fr.ForwardRef=qy;Fr.Fragment=Uy;Fr.Lazy=Yy;Fr.Memo=Ky;Fr.Portal=Ow;Fr.Profiler=Hy;Fr.StrictMode=Vy;Fr.Suspense=Zy;Fr.SuspenseList=Xy;Fr.isAsyncMode=function(){return!1};Fr.isConcurrentMode=function(){return!1};Fr.isContextConsumer=function(e){return Ba(e)===Wy};Fr.isContextProvider=function(e){return Ba(e)===Gy};Fr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Rw};Fr.isForwardRef=function(e){return Ba(e)===qy};Fr.isFragment=function(e){return Ba(e)===Uy};Fr.isLazy=function(e){return Ba(e)===Yy};Fr.isMemo=function(e){return Ba(e)===Ky};Fr.isPortal=function(e){return Ba(e)===Ow};Fr.isProfiler=function(e){return Ba(e)===Hy};Fr.isStrictMode=function(e){return Ba(e)===Vy};Fr.isSuspense=function(e){return Ba(e)===Zy};Fr.isSuspenseList=function(e){return Ba(e)===Xy};Fr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Uy||e===Hy||e===Vy||e===Zy||e===Xy||e===T$||typeof e=="object"&&e!==null&&(e.$$typeof===Yy||e.$$typeof===Ky||e.$$typeof===Gy||e.$$typeof===Wy||e.$$typeof===qy||e.$$typeof===$P||e.getModuleId!==void 0)};Fr.typeOf=Ba;DP.exports=Fr;var FP=DP.exports;function hl(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=[];return st.Children.forEach(e,function(a){a==null&&!t.keepEmpty||(Array.isArray(a)?r=r.concat(hl(a)):FP.isFragment(a)&&a.props?r=r.concat(hl(a.props.children,t)):r.push(a))}),r}var L1={},I$=function(t){};function M$(e,t){}function P$(e,t){}function A$(){L1={}}function BP(e,t,r){!t&&!L1[r]&&(e(!1,r),L1[r]=!0)}function Vo(e,t){BP(M$,e,t)}function R$(e,t){BP(P$,e,t)}Vo.preMessage=I$;Vo.resetWarned=A$;Vo.noteOnce=R$;function Kn(e){"@babel/helpers - typeof";return Kn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kn(e)}function O$(e,t){if(Kn(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(Kn(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function NP(e){var t=O$(e,"string");return Kn(t)==="symbol"?t:String(t)}function De(e,t,r){return t=NP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Z2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),r.push.apply(r,a)}return r}function lt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Z2(Object(r),!0).forEach(function(a){De(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Z2(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}var jP={exports:{}},ha={},UP={exports:{}},VP={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(pe,He){var Be=pe.length;pe.push(He);e:for(;0<Be;){var Ge=Be-1>>>1,Qe=pe[Ge];if(0<c(Qe,He))pe[Ge]=He,pe[Be]=Qe,Be=Ge;else break e}}function r(pe){return pe.length===0?null:pe[0]}function a(pe){if(pe.length===0)return null;var He=pe[0],Be=pe.pop();if(Be!==He){pe[0]=Be;e:for(var Ge=0,Qe=pe.length,gt=Qe>>>1;Ge<gt;){var St=2*(Ge+1)-1,xt=pe[St],Nt=St+1,jt=pe[Nt];if(0>c(xt,Be))Nt<Qe&&0>c(jt,xt)?(pe[Ge]=jt,pe[Nt]=Be,Ge=Nt):(pe[Ge]=xt,pe[St]=Be,Ge=St);else if(Nt<Qe&&0>c(jt,Be))pe[Ge]=jt,pe[Nt]=Be,Ge=Nt;else break e}}return He}function c(pe,He){var Be=pe.sortIndex-He.sortIndex;return Be!==0?Be:pe.id-He.id}if(typeof performance=="object"&&typeof performance.now=="function"){var f=performance;e.unstable_now=function(){return f.now()}}else{var y=Date,l=y.now();e.unstable_now=function(){return y.now()-l}}var w=[],C=[],A=1,M=null,k=3,N=!1,D=!1,U=!1,q=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function V(pe){for(var He=r(C);He!==null;){if(He.callback===null)a(C);else if(He.startTime<=pe)a(C),He.sortIndex=He.expirationTime,t(w,He);else break;He=r(C)}}function X(pe){if(U=!1,V(pe),!D)if(r(w)!==null)D=!0,Fe(te);else{var He=r(C);He!==null&&Ne(X,He.startTime-pe)}}function te(pe,He){D=!1,U&&(U=!1,F(ne),ne=-1),N=!0;var Be=k;try{for(V(He),M=r(w);M!==null&&(!(M.expirationTime>He)||pe&&!ce());){var Ge=M.callback;if(typeof Ge=="function"){M.callback=null,k=M.priorityLevel;var Qe=Ge(M.expirationTime<=He);He=e.unstable_now(),typeof Qe=="function"?M.callback=Qe:M===r(w)&&a(w),V(He)}else a(w);M=r(w)}if(M!==null)var gt=!0;else{var St=r(C);St!==null&&Ne(X,St.startTime-He),gt=!1}return gt}finally{M=null,k=Be,N=!1}}var re=!1,Q=null,ne=-1,ee=5,me=-1;function ce(){return!(e.unstable_now()-me<ee)}function ie(){if(Q!==null){var pe=e.unstable_now();me=pe;var He=!0;try{He=Q(!0,pe)}finally{He?fe():(re=!1,Q=null)}}else re=!1}var fe;if(typeof j=="function")fe=function(){j(ie)};else if(typeof MessageChannel<"u"){var Te=new MessageChannel,$e=Te.port2;Te.port1.onmessage=ie,fe=function(){$e.postMessage(null)}}else fe=function(){q(ie,0)};function Fe(pe){Q=pe,re||(re=!0,fe())}function Ne(pe,He){ne=q(function(){pe(e.unstable_now())},He)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(pe){pe.callback=null},e.unstable_continueExecution=function(){D||N||(D=!0,Fe(te))},e.unstable_forceFrameRate=function(pe){0>pe||125<pe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ee=0<pe?Math.floor(1e3/pe):5},e.unstable_getCurrentPriorityLevel=function(){return k},e.unstable_getFirstCallbackNode=function(){return r(w)},e.unstable_next=function(pe){switch(k){case 1:case 2:case 3:var He=3;break;default:He=k}var Be=k;k=He;try{return pe()}finally{k=Be}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(pe,He){switch(pe){case 1:case 2:case 3:case 4:case 5:break;default:pe=3}var Be=k;k=pe;try{return He()}finally{k=Be}},e.unstable_scheduleCallback=function(pe,He,Be){var Ge=e.unstable_now();switch(typeof Be=="object"&&Be!==null?(Be=Be.delay,Be=typeof Be=="number"&&0<Be?Ge+Be:Ge):Be=Ge,pe){case 1:var Qe=-1;break;case 2:Qe=250;break;case 5:Qe=1073741823;break;case 4:Qe=1e4;break;default:Qe=5e3}return Qe=Be+Qe,pe={id:A++,callback:He,priorityLevel:pe,startTime:Be,expirationTime:Qe,sortIndex:-1},Be>Ge?(pe.sortIndex=Be,t(C,pe),r(w)===null&&pe===r(C)&&(U?(F(ne),ne=-1):U=!0,Ne(X,Be-Ge))):(pe.sortIndex=Qe,t(w,pe),D||N||(D=!0,Fe(te))),pe},e.unstable_shouldYield=ce,e.unstable_wrapCallback=function(pe){var He=k;return function(){var Be=k;k=He;try{return pe.apply(this,arguments)}finally{k=Be}}}})(VP);UP.exports=VP;var z$=UP.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HP=T,ua=z$;function Gt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var GP=new Set,Np={};function Iu(e,t){uh(e,t),uh(e+"Capture",t)}function uh(e,t){for(Np[e]=t,e=0;e<t.length;e++)GP.add(t[e])}var fl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),D1=Object.prototype.hasOwnProperty,k$=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,X2={},K2={};function L$(e){return D1.call(K2,e)?!0:D1.call(X2,e)?!1:k$.test(e)?K2[e]=!0:(X2[e]=!0,!1)}function D$(e,t,r,a){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return a?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function $$(e,t,r,a){if(t===null||typeof t>"u"||D$(e,t,r,a))return!0;if(a)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Mo(e,t,r,a,c,f,y){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=a,this.attributeNamespace=c,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=f,this.removeEmptyString=y}var to={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){to[e]=new Mo(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];to[t]=new Mo(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){to[e]=new Mo(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){to[e]=new Mo(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){to[e]=new Mo(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){to[e]=new Mo(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){to[e]=new Mo(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){to[e]=new Mo(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){to[e]=new Mo(e,5,!1,e.toLowerCase(),null,!1,!1)});var zw=/[\-:]([a-z])/g;function kw(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(zw,kw);to[t]=new Mo(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(zw,kw);to[t]=new Mo(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(zw,kw);to[t]=new Mo(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){to[e]=new Mo(e,1,!1,e.toLowerCase(),null,!1,!1)});to.xlinkHref=new Mo("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){to[e]=new Mo(e,1,!1,e.toLowerCase(),null,!0,!0)});function Lw(e,t,r,a){var c=to.hasOwnProperty(t)?to[t]:null;(c!==null?c.type!==0:a||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&($$(t,r,c,a)&&(r=null),a||c===null?L$(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):c.mustUseProperty?e[c.propertyName]=r===null?c.type===3?!1:"":r:(t=c.attributeName,a=c.attributeNamespace,r===null?e.removeAttribute(t):(c=c.type,r=c===3||c===4&&r===!0?"":""+r,a?e.setAttributeNS(a,t,r):e.setAttribute(t,r))))}var _l=HP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Jg=Symbol.for("react.element"),Bd=Symbol.for("react.portal"),Nd=Symbol.for("react.fragment"),Dw=Symbol.for("react.strict_mode"),$1=Symbol.for("react.profiler"),WP=Symbol.for("react.provider"),qP=Symbol.for("react.context"),$w=Symbol.for("react.forward_ref"),F1=Symbol.for("react.suspense"),B1=Symbol.for("react.suspense_list"),Fw=Symbol.for("react.memo"),Ql=Symbol.for("react.lazy"),ZP=Symbol.for("react.offscreen"),Y2=Symbol.iterator;function np(e){return e===null||typeof e!="object"?null:(e=Y2&&e[Y2]||e["@@iterator"],typeof e=="function"?e:null)}var mi=Object.assign,Sx;function yp(e){if(Sx===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Sx=t&&t[1]||""}return`
`+Sx+e}var Ex=!1;function Cx(e,t){if(!e||Ex)return"";Ex=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(C){var a=C}Reflect.construct(e,[],t)}else{try{t.call()}catch(C){a=C}e.call(t.prototype)}else{try{throw Error()}catch(C){a=C}e()}}catch(C){if(C&&a&&typeof C.stack=="string"){for(var c=C.stack.split(`
`),f=a.stack.split(`
`),y=c.length-1,l=f.length-1;1<=y&&0<=l&&c[y]!==f[l];)l--;for(;1<=y&&0<=l;y--,l--)if(c[y]!==f[l]){if(y!==1||l!==1)do if(y--,l--,0>l||c[y]!==f[l]){var w=`
`+c[y].replace(" at new "," at ");return e.displayName&&w.includes("<anonymous>")&&(w=w.replace("<anonymous>",e.displayName)),w}while(1<=y&&0<=l);break}}}finally{Ex=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?yp(e):""}function F$(e){switch(e.tag){case 5:return yp(e.type);case 16:return yp("Lazy");case 13:return yp("Suspense");case 19:return yp("SuspenseList");case 0:case 2:case 15:return e=Cx(e.type,!1),e;case 11:return e=Cx(e.type.render,!1),e;case 1:return e=Cx(e.type,!0),e;default:return""}}function N1(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Nd:return"Fragment";case Bd:return"Portal";case $1:return"Profiler";case Dw:return"StrictMode";case F1:return"Suspense";case B1:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case qP:return(e.displayName||"Context")+".Consumer";case WP:return(e._context.displayName||"Context")+".Provider";case $w:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Fw:return t=e.displayName||null,t!==null?t:N1(e.type)||"Memo";case Ql:t=e._payload,e=e._init;try{return N1(e(t))}catch{}}return null}function B$(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return N1(t);case 8:return t===Dw?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function mc(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function XP(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function N$(e){var t=XP(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var c=r.get,f=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(y){a=""+y,f.call(this,y)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return a},setValue:function(y){a=""+y},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Qg(e){e._valueTracker||(e._valueTracker=N$(e))}function KP(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),a="";return e&&(a=XP(e)?e.checked?"true":"false":e.value),e=a,e!==r?(t.setValue(e),!0):!1}function Jv(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function j1(e,t){var r=t.checked;return mi({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function J2(e,t){var r=t.defaultValue==null?"":t.defaultValue,a=t.checked!=null?t.checked:t.defaultChecked;r=mc(t.value!=null?t.value:r),e._wrapperState={initialChecked:a,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function YP(e,t){t=t.checked,t!=null&&Lw(e,"checked",t,!1)}function U1(e,t){YP(e,t);var r=mc(t.value),a=t.type;if(r!=null)a==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?V1(e,t.type,r):t.hasOwnProperty("defaultValue")&&V1(e,t.type,mc(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Q2(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!(a!=="submit"&&a!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function V1(e,t,r){(t!=="number"||Jv(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var _p=Array.isArray;function th(e,t,r,a){if(e=e.options,t){t={};for(var c=0;c<r.length;c++)t["$"+r[c]]=!0;for(r=0;r<e.length;r++)c=t.hasOwnProperty("$"+e[r].value),e[r].selected!==c&&(e[r].selected=c),c&&a&&(e[r].defaultSelected=!0)}else{for(r=""+mc(r),t=null,c=0;c<e.length;c++){if(e[c].value===r){e[c].selected=!0,a&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function H1(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Gt(91));return mi({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function eT(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(Gt(92));if(_p(r)){if(1<r.length)throw Error(Gt(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:mc(r)}}function JP(e,t){var r=mc(t.value),a=mc(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),a!=null&&(e.defaultValue=""+a)}function tT(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function QP(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function G1(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?QP(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ev,eA=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,a,c){MSApp.execUnsafeLocalFunction(function(){return e(t,r,a,c)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ev=ev||document.createElement("div"),ev.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ev.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function jp(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Sp={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},j$=["Webkit","ms","Moz","O"];Object.keys(Sp).forEach(function(e){j$.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Sp[t]=Sp[e]})});function tA(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Sp.hasOwnProperty(e)&&Sp[e]?(""+t).trim():t+"px"}function nA(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var a=r.indexOf("--")===0,c=tA(r,t[r],a);r==="float"&&(r="cssFloat"),a?e.setProperty(r,c):e[r]=c}}var U$=mi({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function W1(e,t){if(t){if(U$[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Gt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Gt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Gt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Gt(62))}}function q1(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Z1=null;function Bw(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var X1=null,nh=null,rh=null;function nT(e){if(e=vm(e)){if(typeof X1!="function")throw Error(Gt(280));var t=e.stateNode;t&&(t=n0(t),X1(e.stateNode,e.type,t))}}function rA(e){nh?rh?rh.push(e):rh=[e]:nh=e}function iA(){if(nh){var e=nh,t=rh;if(rh=nh=null,nT(e),t)for(e=0;e<t.length;e++)nT(t[e])}}function oA(e,t){return e(t)}function aA(){}var Tx=!1;function sA(e,t,r){if(Tx)return e(t,r);Tx=!0;try{return oA(e,t,r)}finally{Tx=!1,(nh!==null||rh!==null)&&(aA(),iA())}}function Up(e,t){var r=e.stateNode;if(r===null)return null;var a=n0(r);if(a===null)return null;r=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(Gt(231,t,typeof r));return r}var K1=!1;if(fl)try{var rp={};Object.defineProperty(rp,"passive",{get:function(){K1=!0}}),window.addEventListener("test",rp,rp),window.removeEventListener("test",rp,rp)}catch{K1=!1}function V$(e,t,r,a,c,f,y,l,w){var C=Array.prototype.slice.call(arguments,3);try{t.apply(r,C)}catch(A){this.onError(A)}}var Ep=!1,Qv=null,ey=!1,Y1=null,H$={onError:function(e){Ep=!0,Qv=e}};function G$(e,t,r,a,c,f,y,l,w){Ep=!1,Qv=null,V$.apply(H$,arguments)}function W$(e,t,r,a,c,f,y,l,w){if(G$.apply(this,arguments),Ep){if(Ep){var C=Qv;Ep=!1,Qv=null}else throw Error(Gt(198));ey||(ey=!0,Y1=C)}}function Mu(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function lA(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function rT(e){if(Mu(e)!==e)throw Error(Gt(188))}function q$(e){var t=e.alternate;if(!t){if(t=Mu(e),t===null)throw Error(Gt(188));return t!==e?null:e}for(var r=e,a=t;;){var c=r.return;if(c===null)break;var f=c.alternate;if(f===null){if(a=c.return,a!==null){r=a;continue}break}if(c.child===f.child){for(f=c.child;f;){if(f===r)return rT(c),e;if(f===a)return rT(c),t;f=f.sibling}throw Error(Gt(188))}if(r.return!==a.return)r=c,a=f;else{for(var y=!1,l=c.child;l;){if(l===r){y=!0,r=c,a=f;break}if(l===a){y=!0,a=c,r=f;break}l=l.sibling}if(!y){for(l=f.child;l;){if(l===r){y=!0,r=f,a=c;break}if(l===a){y=!0,a=f,r=c;break}l=l.sibling}if(!y)throw Error(Gt(189))}}if(r.alternate!==a)throw Error(Gt(190))}if(r.tag!==3)throw Error(Gt(188));return r.stateNode.current===r?e:t}function cA(e){return e=q$(e),e!==null?uA(e):null}function uA(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=uA(e);if(t!==null)return t;e=e.sibling}return null}var dA=ua.unstable_scheduleCallback,iT=ua.unstable_cancelCallback,Z$=ua.unstable_shouldYield,X$=ua.unstable_requestPaint,wi=ua.unstable_now,K$=ua.unstable_getCurrentPriorityLevel,Nw=ua.unstable_ImmediatePriority,hA=ua.unstable_UserBlockingPriority,ty=ua.unstable_NormalPriority,Y$=ua.unstable_LowPriority,fA=ua.unstable_IdlePriority,Jy=null,$s=null;function J$(e){if($s&&typeof $s.onCommitFiberRoot=="function")try{$s.onCommitFiberRoot(Jy,e,void 0,(e.current.flags&128)===128)}catch{}}var ds=Math.clz32?Math.clz32:tF,Q$=Math.log,eF=Math.LN2;function tF(e){return e>>>=0,e===0?32:31-(Q$(e)/eF|0)|0}var tv=64,nv=4194304;function xp(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ny(e,t){var r=e.pendingLanes;if(r===0)return 0;var a=0,c=e.suspendedLanes,f=e.pingedLanes,y=r&268435455;if(y!==0){var l=y&~c;l!==0?a=xp(l):(f&=y,f!==0&&(a=xp(f)))}else y=r&~c,y!==0?a=xp(y):f!==0&&(a=xp(f));if(a===0)return 0;if(t!==0&&t!==a&&!(t&c)&&(c=a&-a,f=t&-t,c>=f||c===16&&(f&4194240)!==0))return t;if(a&4&&(a|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=a;0<t;)r=31-ds(t),c=1<<r,a|=e[r],t&=~c;return a}function nF(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function rF(e,t){for(var r=e.suspendedLanes,a=e.pingedLanes,c=e.expirationTimes,f=e.pendingLanes;0<f;){var y=31-ds(f),l=1<<y,w=c[y];w===-1?(!(l&r)||l&a)&&(c[y]=nF(l,t)):w<=t&&(e.expiredLanes|=l),f&=~l}}function J1(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function pA(){var e=tv;return tv<<=1,!(tv&4194240)&&(tv=64),e}function Ix(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function mm(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ds(t),e[t]=r}function iF(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<r;){var c=31-ds(r),f=1<<c;t[c]=0,a[c]=-1,e[c]=-1,r&=~f}}function jw(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var a=31-ds(r),c=1<<a;c&t|e[a]&t&&(e[a]|=t),r&=~c}}var Dr=0;function mA(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var gA,Uw,vA,yA,_A,Q1=!1,rv=[],sc=null,lc=null,cc=null,Vp=new Map,Hp=new Map,tc=[],oF="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function oT(e,t){switch(e){case"focusin":case"focusout":sc=null;break;case"dragenter":case"dragleave":lc=null;break;case"mouseover":case"mouseout":cc=null;break;case"pointerover":case"pointerout":Vp.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hp.delete(t.pointerId)}}function ip(e,t,r,a,c,f){return e===null||e.nativeEvent!==f?(e={blockedOn:t,domEventName:r,eventSystemFlags:a,nativeEvent:f,targetContainers:[c]},t!==null&&(t=vm(t),t!==null&&Uw(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function aF(e,t,r,a,c){switch(t){case"focusin":return sc=ip(sc,e,t,r,a,c),!0;case"dragenter":return lc=ip(lc,e,t,r,a,c),!0;case"mouseover":return cc=ip(cc,e,t,r,a,c),!0;case"pointerover":var f=c.pointerId;return Vp.set(f,ip(Vp.get(f)||null,e,t,r,a,c)),!0;case"gotpointercapture":return f=c.pointerId,Hp.set(f,ip(Hp.get(f)||null,e,t,r,a,c)),!0}return!1}function xA(e){var t=lu(e.target);if(t!==null){var r=Mu(t);if(r!==null){if(t=r.tag,t===13){if(t=lA(r),t!==null){e.blockedOn=t,_A(e.priority,function(){vA(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Av(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=eb(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var a=new r.constructor(r.type,r);Z1=a,r.target.dispatchEvent(a),Z1=null}else return t=vm(r),t!==null&&Uw(t),e.blockedOn=r,!1;t.shift()}return!0}function aT(e,t,r){Av(e)&&r.delete(t)}function sF(){Q1=!1,sc!==null&&Av(sc)&&(sc=null),lc!==null&&Av(lc)&&(lc=null),cc!==null&&Av(cc)&&(cc=null),Vp.forEach(aT),Hp.forEach(aT)}function op(e,t){e.blockedOn===t&&(e.blockedOn=null,Q1||(Q1=!0,ua.unstable_scheduleCallback(ua.unstable_NormalPriority,sF)))}function Gp(e){function t(c){return op(c,e)}if(0<rv.length){op(rv[0],e);for(var r=1;r<rv.length;r++){var a=rv[r];a.blockedOn===e&&(a.blockedOn=null)}}for(sc!==null&&op(sc,e),lc!==null&&op(lc,e),cc!==null&&op(cc,e),Vp.forEach(t),Hp.forEach(t),r=0;r<tc.length;r++)a=tc[r],a.blockedOn===e&&(a.blockedOn=null);for(;0<tc.length&&(r=tc[0],r.blockedOn===null);)xA(r),r.blockedOn===null&&tc.shift()}var ih=_l.ReactCurrentBatchConfig,ry=!0;function lF(e,t,r,a){var c=Dr,f=ih.transition;ih.transition=null;try{Dr=1,Vw(e,t,r,a)}finally{Dr=c,ih.transition=f}}function cF(e,t,r,a){var c=Dr,f=ih.transition;ih.transition=null;try{Dr=4,Vw(e,t,r,a)}finally{Dr=c,ih.transition=f}}function Vw(e,t,r,a){if(ry){var c=eb(e,t,r,a);if(c===null)$x(e,t,a,iy,r),oT(e,a);else if(aF(c,e,t,r,a))a.stopPropagation();else if(oT(e,a),t&4&&-1<oF.indexOf(e)){for(;c!==null;){var f=vm(c);if(f!==null&&gA(f),f=eb(e,t,r,a),f===null&&$x(e,t,a,iy,r),f===c)break;c=f}c!==null&&a.stopPropagation()}else $x(e,t,a,null,r)}}var iy=null;function eb(e,t,r,a){if(iy=null,e=Bw(a),e=lu(e),e!==null)if(t=Mu(e),t===null)e=null;else if(r=t.tag,r===13){if(e=lA(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return iy=e,null}function bA(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(K$()){case Nw:return 1;case hA:return 4;case ty:case Y$:return 16;case fA:return 536870912;default:return 16}default:return 16}}var rc=null,Hw=null,Rv=null;function wA(){if(Rv)return Rv;var e,t=Hw,r=t.length,a,c="value"in rc?rc.value:rc.textContent,f=c.length;for(e=0;e<r&&t[e]===c[e];e++);var y=r-e;for(a=1;a<=y&&t[r-a]===c[f-a];a++);return Rv=c.slice(e,1<a?1-a:void 0)}function Ov(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function iv(){return!0}function sT(){return!1}function fa(e){function t(r,a,c,f,y){this._reactName=r,this._targetInst=c,this.type=a,this.nativeEvent=f,this.target=y,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(f):f[l]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?iv:sT,this.isPropagationStopped=sT,this}return mi(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=iv)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=iv)},persist:function(){},isPersistent:iv}),t}var Th={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Gw=fa(Th),gm=mi({},Th,{view:0,detail:0}),uF=fa(gm),Mx,Px,ap,Qy=mi({},gm,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ww,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ap&&(ap&&e.type==="mousemove"?(Mx=e.screenX-ap.screenX,Px=e.screenY-ap.screenY):Px=Mx=0,ap=e),Mx)},movementY:function(e){return"movementY"in e?e.movementY:Px}}),lT=fa(Qy),dF=mi({},Qy,{dataTransfer:0}),hF=fa(dF),fF=mi({},gm,{relatedTarget:0}),Ax=fa(fF),pF=mi({},Th,{animationName:0,elapsedTime:0,pseudoElement:0}),mF=fa(pF),gF=mi({},Th,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),vF=fa(gF),yF=mi({},Th,{data:0}),cT=fa(yF),_F={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xF={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bF={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wF(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=bF[e])?!!t[e]:!1}function Ww(){return wF}var SF=mi({},gm,{key:function(e){if(e.key){var t=_F[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ov(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?xF[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ww,charCode:function(e){return e.type==="keypress"?Ov(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ov(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),EF=fa(SF),CF=mi({},Qy,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),uT=fa(CF),TF=mi({},gm,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ww}),IF=fa(TF),MF=mi({},Th,{propertyName:0,elapsedTime:0,pseudoElement:0}),PF=fa(MF),AF=mi({},Qy,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),RF=fa(AF),OF=[9,13,27,32],qw=fl&&"CompositionEvent"in window,Cp=null;fl&&"documentMode"in document&&(Cp=document.documentMode);var zF=fl&&"TextEvent"in window&&!Cp,SA=fl&&(!qw||Cp&&8<Cp&&11>=Cp),dT=String.fromCharCode(32),hT=!1;function EA(e,t){switch(e){case"keyup":return OF.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function CA(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var jd=!1;function kF(e,t){switch(e){case"compositionend":return CA(t);case"keypress":return t.which!==32?null:(hT=!0,dT);case"textInput":return e=t.data,e===dT&&hT?null:e;default:return null}}function LF(e,t){if(jd)return e==="compositionend"||!qw&&EA(e,t)?(e=wA(),Rv=Hw=rc=null,jd=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return SA&&t.locale!=="ko"?null:t.data;default:return null}}var DF={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fT(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!DF[e.type]:t==="textarea"}function TA(e,t,r,a){rA(a),t=oy(t,"onChange"),0<t.length&&(r=new Gw("onChange","change",null,r,a),e.push({event:r,listeners:t}))}var Tp=null,Wp=null;function $F(e){$A(e,0)}function e0(e){var t=Hd(e);if(KP(t))return e}function FF(e,t){if(e==="change")return t}var IA=!1;if(fl){var Rx;if(fl){var Ox="oninput"in document;if(!Ox){var pT=document.createElement("div");pT.setAttribute("oninput","return;"),Ox=typeof pT.oninput=="function"}Rx=Ox}else Rx=!1;IA=Rx&&(!document.documentMode||9<document.documentMode)}function mT(){Tp&&(Tp.detachEvent("onpropertychange",MA),Wp=Tp=null)}function MA(e){if(e.propertyName==="value"&&e0(Wp)){var t=[];TA(t,Wp,e,Bw(e)),sA($F,t)}}function BF(e,t,r){e==="focusin"?(mT(),Tp=t,Wp=r,Tp.attachEvent("onpropertychange",MA)):e==="focusout"&&mT()}function NF(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return e0(Wp)}function jF(e,t){if(e==="click")return e0(t)}function UF(e,t){if(e==="input"||e==="change")return e0(t)}function VF(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ps=typeof Object.is=="function"?Object.is:VF;function qp(e,t){if(ps(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),a=Object.keys(t);if(r.length!==a.length)return!1;for(a=0;a<r.length;a++){var c=r[a];if(!D1.call(t,c)||!ps(e[c],t[c]))return!1}return!0}function gT(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function vT(e,t){var r=gT(e);e=0;for(var a;r;){if(r.nodeType===3){if(a=e+r.textContent.length,e<=t&&a>=t)return{node:r,offset:t-e};e=a}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=gT(r)}}function PA(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?PA(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function AA(){for(var e=window,t=Jv();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Jv(e.document)}return t}function Zw(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function HF(e){var t=AA(),r=e.focusedElem,a=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&PA(r.ownerDocument.documentElement,r)){if(a!==null&&Zw(r)){if(t=a.start,e=a.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var c=r.textContent.length,f=Math.min(a.start,c);a=a.end===void 0?f:Math.min(a.end,c),!e.extend&&f>a&&(c=a,a=f,f=c),c=vT(r,f);var y=vT(r,a);c&&y&&(e.rangeCount!==1||e.anchorNode!==c.node||e.anchorOffset!==c.offset||e.focusNode!==y.node||e.focusOffset!==y.offset)&&(t=t.createRange(),t.setStart(c.node,c.offset),e.removeAllRanges(),f>a?(e.addRange(t),e.extend(y.node,y.offset)):(t.setEnd(y.node,y.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var GF=fl&&"documentMode"in document&&11>=document.documentMode,Ud=null,tb=null,Ip=null,nb=!1;function yT(e,t,r){var a=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;nb||Ud==null||Ud!==Jv(a)||(a=Ud,"selectionStart"in a&&Zw(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Ip&&qp(Ip,a)||(Ip=a,a=oy(tb,"onSelect"),0<a.length&&(t=new Gw("onSelect","select",null,t,r),e.push({event:t,listeners:a}),t.target=Ud)))}function ov(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Vd={animationend:ov("Animation","AnimationEnd"),animationiteration:ov("Animation","AnimationIteration"),animationstart:ov("Animation","AnimationStart"),transitionend:ov("Transition","TransitionEnd")},zx={},RA={};fl&&(RA=document.createElement("div").style,"AnimationEvent"in window||(delete Vd.animationend.animation,delete Vd.animationiteration.animation,delete Vd.animationstart.animation),"TransitionEvent"in window||delete Vd.transitionend.transition);function t0(e){if(zx[e])return zx[e];if(!Vd[e])return e;var t=Vd[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in RA)return zx[e]=t[r];return e}var OA=t0("animationend"),zA=t0("animationiteration"),kA=t0("animationstart"),LA=t0("transitionend"),DA=new Map,_T="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function xc(e,t){DA.set(e,t),Iu(t,[e])}for(var kx=0;kx<_T.length;kx++){var Lx=_T[kx],WF=Lx.toLowerCase(),qF=Lx[0].toUpperCase()+Lx.slice(1);xc(WF,"on"+qF)}xc(OA,"onAnimationEnd");xc(zA,"onAnimationIteration");xc(kA,"onAnimationStart");xc("dblclick","onDoubleClick");xc("focusin","onFocus");xc("focusout","onBlur");xc(LA,"onTransitionEnd");uh("onMouseEnter",["mouseout","mouseover"]);uh("onMouseLeave",["mouseout","mouseover"]);uh("onPointerEnter",["pointerout","pointerover"]);uh("onPointerLeave",["pointerout","pointerover"]);Iu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Iu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Iu("onBeforeInput",["compositionend","keypress","textInput","paste"]);Iu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Iu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Iu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var bp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ZF=new Set("cancel close invalid load scroll toggle".split(" ").concat(bp));function xT(e,t,r){var a=e.type||"unknown-event";e.currentTarget=r,W$(a,t,void 0,e),e.currentTarget=null}function $A(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var a=e[r],c=a.event;a=a.listeners;e:{var f=void 0;if(t)for(var y=a.length-1;0<=y;y--){var l=a[y],w=l.instance,C=l.currentTarget;if(l=l.listener,w!==f&&c.isPropagationStopped())break e;xT(c,l,C),f=w}else for(y=0;y<a.length;y++){if(l=a[y],w=l.instance,C=l.currentTarget,l=l.listener,w!==f&&c.isPropagationStopped())break e;xT(c,l,C),f=w}}}if(ey)throw e=Y1,ey=!1,Y1=null,e}function ti(e,t){var r=t[sb];r===void 0&&(r=t[sb]=new Set);var a=e+"__bubble";r.has(a)||(FA(t,e,2,!1),r.add(a))}function Dx(e,t,r){var a=0;t&&(a|=4),FA(r,e,a,t)}var av="_reactListening"+Math.random().toString(36).slice(2);function Zp(e){if(!e[av]){e[av]=!0,GP.forEach(function(r){r!=="selectionchange"&&(ZF.has(r)||Dx(r,!1,e),Dx(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[av]||(t[av]=!0,Dx("selectionchange",!1,t))}}function FA(e,t,r,a){switch(bA(t)){case 1:var c=lF;break;case 4:c=cF;break;default:c=Vw}r=c.bind(null,t,r,e),c=void 0,!K1||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),a?c!==void 0?e.addEventListener(t,r,{capture:!0,passive:c}):e.addEventListener(t,r,!0):c!==void 0?e.addEventListener(t,r,{passive:c}):e.addEventListener(t,r,!1)}function $x(e,t,r,a,c){var f=a;if(!(t&1)&&!(t&2)&&a!==null)e:for(;;){if(a===null)return;var y=a.tag;if(y===3||y===4){var l=a.stateNode.containerInfo;if(l===c||l.nodeType===8&&l.parentNode===c)break;if(y===4)for(y=a.return;y!==null;){var w=y.tag;if((w===3||w===4)&&(w=y.stateNode.containerInfo,w===c||w.nodeType===8&&w.parentNode===c))return;y=y.return}for(;l!==null;){if(y=lu(l),y===null)return;if(w=y.tag,w===5||w===6){a=f=y;continue e}l=l.parentNode}}a=a.return}sA(function(){var C=f,A=Bw(r),M=[];e:{var k=DA.get(e);if(k!==void 0){var N=Gw,D=e;switch(e){case"keypress":if(Ov(r)===0)break e;case"keydown":case"keyup":N=EF;break;case"focusin":D="focus",N=Ax;break;case"focusout":D="blur",N=Ax;break;case"beforeblur":case"afterblur":N=Ax;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":N=lT;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":N=hF;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":N=IF;break;case OA:case zA:case kA:N=mF;break;case LA:N=PF;break;case"scroll":N=uF;break;case"wheel":N=RF;break;case"copy":case"cut":case"paste":N=vF;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":N=uT}var U=(t&4)!==0,q=!U&&e==="scroll",F=U?k!==null?k+"Capture":null:k;U=[];for(var j=C,V;j!==null;){V=j;var X=V.stateNode;if(V.tag===5&&X!==null&&(V=X,F!==null&&(X=Up(j,F),X!=null&&U.push(Xp(j,X,V)))),q)break;j=j.return}0<U.length&&(k=new N(k,D,null,r,A),M.push({event:k,listeners:U}))}}if(!(t&7)){e:{if(k=e==="mouseover"||e==="pointerover",N=e==="mouseout"||e==="pointerout",k&&r!==Z1&&(D=r.relatedTarget||r.fromElement)&&(lu(D)||D[pl]))break e;if((N||k)&&(k=A.window===A?A:(k=A.ownerDocument)?k.defaultView||k.parentWindow:window,N?(D=r.relatedTarget||r.toElement,N=C,D=D?lu(D):null,D!==null&&(q=Mu(D),D!==q||D.tag!==5&&D.tag!==6)&&(D=null)):(N=null,D=C),N!==D)){if(U=lT,X="onMouseLeave",F="onMouseEnter",j="mouse",(e==="pointerout"||e==="pointerover")&&(U=uT,X="onPointerLeave",F="onPointerEnter",j="pointer"),q=N==null?k:Hd(N),V=D==null?k:Hd(D),k=new U(X,j+"leave",N,r,A),k.target=q,k.relatedTarget=V,X=null,lu(A)===C&&(U=new U(F,j+"enter",D,r,A),U.target=V,U.relatedTarget=q,X=U),q=X,N&&D)t:{for(U=N,F=D,j=0,V=U;V;V=Id(V))j++;for(V=0,X=F;X;X=Id(X))V++;for(;0<j-V;)U=Id(U),j--;for(;0<V-j;)F=Id(F),V--;for(;j--;){if(U===F||F!==null&&U===F.alternate)break t;U=Id(U),F=Id(F)}U=null}else U=null;N!==null&&bT(M,k,N,U,!1),D!==null&&q!==null&&bT(M,q,D,U,!0)}}e:{if(k=C?Hd(C):window,N=k.nodeName&&k.nodeName.toLowerCase(),N==="select"||N==="input"&&k.type==="file")var te=FF;else if(fT(k))if(IA)te=UF;else{te=NF;var re=BF}else(N=k.nodeName)&&N.toLowerCase()==="input"&&(k.type==="checkbox"||k.type==="radio")&&(te=jF);if(te&&(te=te(e,C))){TA(M,te,r,A);break e}re&&re(e,k,C),e==="focusout"&&(re=k._wrapperState)&&re.controlled&&k.type==="number"&&V1(k,"number",k.value)}switch(re=C?Hd(C):window,e){case"focusin":(fT(re)||re.contentEditable==="true")&&(Ud=re,tb=C,Ip=null);break;case"focusout":Ip=tb=Ud=null;break;case"mousedown":nb=!0;break;case"contextmenu":case"mouseup":case"dragend":nb=!1,yT(M,r,A);break;case"selectionchange":if(GF)break;case"keydown":case"keyup":yT(M,r,A)}var Q;if(qw)e:{switch(e){case"compositionstart":var ne="onCompositionStart";break e;case"compositionend":ne="onCompositionEnd";break e;case"compositionupdate":ne="onCompositionUpdate";break e}ne=void 0}else jd?EA(e,r)&&(ne="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(ne="onCompositionStart");ne&&(SA&&r.locale!=="ko"&&(jd||ne!=="onCompositionStart"?ne==="onCompositionEnd"&&jd&&(Q=wA()):(rc=A,Hw="value"in rc?rc.value:rc.textContent,jd=!0)),re=oy(C,ne),0<re.length&&(ne=new cT(ne,e,null,r,A),M.push({event:ne,listeners:re}),Q?ne.data=Q:(Q=CA(r),Q!==null&&(ne.data=Q)))),(Q=zF?kF(e,r):LF(e,r))&&(C=oy(C,"onBeforeInput"),0<C.length&&(A=new cT("onBeforeInput","beforeinput",null,r,A),M.push({event:A,listeners:C}),A.data=Q))}$A(M,t)})}function Xp(e,t,r){return{instance:e,listener:t,currentTarget:r}}function oy(e,t){for(var r=t+"Capture",a=[];e!==null;){var c=e,f=c.stateNode;c.tag===5&&f!==null&&(c=f,f=Up(e,r),f!=null&&a.unshift(Xp(e,f,c)),f=Up(e,t),f!=null&&a.push(Xp(e,f,c))),e=e.return}return a}function Id(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function bT(e,t,r,a,c){for(var f=t._reactName,y=[];r!==null&&r!==a;){var l=r,w=l.alternate,C=l.stateNode;if(w!==null&&w===a)break;l.tag===5&&C!==null&&(l=C,c?(w=Up(r,f),w!=null&&y.unshift(Xp(r,w,l))):c||(w=Up(r,f),w!=null&&y.push(Xp(r,w,l)))),r=r.return}y.length!==0&&e.push({event:t,listeners:y})}var XF=/\r\n?/g,KF=/\u0000|\uFFFD/g;function wT(e){return(typeof e=="string"?e:""+e).replace(XF,`
`).replace(KF,"")}function sv(e,t,r){if(t=wT(t),wT(e)!==t&&r)throw Error(Gt(425))}function ay(){}var rb=null,ib=null;function ob(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ab=typeof setTimeout=="function"?setTimeout:void 0,YF=typeof clearTimeout=="function"?clearTimeout:void 0,ST=typeof Promise=="function"?Promise:void 0,JF=typeof queueMicrotask=="function"?queueMicrotask:typeof ST<"u"?function(e){return ST.resolve(null).then(e).catch(QF)}:ab;function QF(e){setTimeout(function(){throw e})}function Fx(e,t){var r=t,a=0;do{var c=r.nextSibling;if(e.removeChild(r),c&&c.nodeType===8)if(r=c.data,r==="/$"){if(a===0){e.removeChild(c),Gp(t);return}a--}else r!=="$"&&r!=="$?"&&r!=="$!"||a++;r=c}while(r);Gp(t)}function uc(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function ET(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Ih=Math.random().toString(36).slice(2),Ls="__reactFiber$"+Ih,Kp="__reactProps$"+Ih,pl="__reactContainer$"+Ih,sb="__reactEvents$"+Ih,eB="__reactListeners$"+Ih,tB="__reactHandles$"+Ih;function lu(e){var t=e[Ls];if(t)return t;for(var r=e.parentNode;r;){if(t=r[pl]||r[Ls]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=ET(e);e!==null;){if(r=e[Ls])return r;e=ET(e)}return t}e=r,r=e.parentNode}return null}function vm(e){return e=e[Ls]||e[pl],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Hd(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Gt(33))}function n0(e){return e[Kp]||null}var lb=[],Gd=-1;function bc(e){return{current:e}}function ni(e){0>Gd||(e.current=lb[Gd],lb[Gd]=null,Gd--)}function Jr(e,t){Gd++,lb[Gd]=e.current,e.current=t}var gc={},yo=bc(gc),Ho=bc(!1),xu=gc;function dh(e,t){var r=e.type.contextTypes;if(!r)return gc;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var c={},f;for(f in r)c[f]=t[f];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=c),c}function Go(e){return e=e.childContextTypes,e!=null}function sy(){ni(Ho),ni(yo)}function CT(e,t,r){if(yo.current!==gc)throw Error(Gt(168));Jr(yo,t),Jr(Ho,r)}function BA(e,t,r){var a=e.stateNode;if(t=t.childContextTypes,typeof a.getChildContext!="function")return r;a=a.getChildContext();for(var c in a)if(!(c in t))throw Error(Gt(108,B$(e)||"Unknown",c));return mi({},r,a)}function ly(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||gc,xu=yo.current,Jr(yo,e),Jr(Ho,Ho.current),!0}function TT(e,t,r){var a=e.stateNode;if(!a)throw Error(Gt(169));r?(e=BA(e,t,xu),a.__reactInternalMemoizedMergedChildContext=e,ni(Ho),ni(yo),Jr(yo,e)):ni(Ho),Jr(Ho,r)}var al=null,r0=!1,Bx=!1;function NA(e){al===null?al=[e]:al.push(e)}function nB(e){r0=!0,NA(e)}function wc(){if(!Bx&&al!==null){Bx=!0;var e=0,t=Dr;try{var r=al;for(Dr=1;e<r.length;e++){var a=r[e];do a=a(!0);while(a!==null)}al=null,r0=!1}catch(c){throw al!==null&&(al=al.slice(e+1)),dA(Nw,wc),c}finally{Dr=t,Bx=!1}}return null}var Wd=[],qd=0,cy=null,uy=0,Ra=[],Oa=0,bu=null,ll=1,cl="";function nu(e,t){Wd[qd++]=uy,Wd[qd++]=cy,cy=e,uy=t}function jA(e,t,r){Ra[Oa++]=ll,Ra[Oa++]=cl,Ra[Oa++]=bu,bu=e;var a=ll;e=cl;var c=32-ds(a)-1;a&=~(1<<c),r+=1;var f=32-ds(t)+c;if(30<f){var y=c-c%5;f=(a&(1<<y)-1).toString(32),a>>=y,c-=y,ll=1<<32-ds(t)+c|r<<c|a,cl=f+e}else ll=1<<f|r<<c|a,cl=e}function Xw(e){e.return!==null&&(nu(e,1),jA(e,1,0))}function Kw(e){for(;e===cy;)cy=Wd[--qd],Wd[qd]=null,uy=Wd[--qd],Wd[qd]=null;for(;e===bu;)bu=Ra[--Oa],Ra[Oa]=null,cl=Ra[--Oa],Ra[Oa]=null,ll=Ra[--Oa],Ra[Oa]=null}var ca=null,sa=null,oi=!1,ls=null;function UA(e,t){var r=za(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function IT(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ca=e,sa=uc(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ca=e,sa=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=bu!==null?{id:ll,overflow:cl}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=za(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,ca=e,sa=null,!0):!1;default:return!1}}function cb(e){return(e.mode&1)!==0&&(e.flags&128)===0}function ub(e){if(oi){var t=sa;if(t){var r=t;if(!IT(e,t)){if(cb(e))throw Error(Gt(418));t=uc(r.nextSibling);var a=ca;t&&IT(e,t)?UA(a,r):(e.flags=e.flags&-4097|2,oi=!1,ca=e)}}else{if(cb(e))throw Error(Gt(418));e.flags=e.flags&-4097|2,oi=!1,ca=e}}}function MT(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ca=e}function lv(e){if(e!==ca)return!1;if(!oi)return MT(e),oi=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!ob(e.type,e.memoizedProps)),t&&(t=sa)){if(cb(e))throw VA(),Error(Gt(418));for(;t;)UA(e,t),t=uc(t.nextSibling)}if(MT(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Gt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){sa=uc(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}sa=null}}else sa=ca?uc(e.stateNode.nextSibling):null;return!0}function VA(){for(var e=sa;e;)e=uc(e.nextSibling)}function hh(){sa=ca=null,oi=!1}function Yw(e){ls===null?ls=[e]:ls.push(e)}var rB=_l.ReactCurrentBatchConfig;function is(e,t){if(e&&e.defaultProps){t=mi({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}var dy=bc(null),hy=null,Zd=null,Jw=null;function Qw(){Jw=Zd=hy=null}function eS(e){var t=dy.current;ni(dy),e._currentValue=t}function db(e,t,r){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===r)break;e=e.return}}function oh(e,t){hy=e,Jw=Zd=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Uo=!0),e.firstContext=null)}function Da(e){var t=e._currentValue;if(Jw!==e)if(e={context:e,memoizedValue:t,next:null},Zd===null){if(hy===null)throw Error(Gt(308));Zd=e,hy.dependencies={lanes:0,firstContext:e}}else Zd=Zd.next=e;return t}var cu=null;function tS(e){cu===null?cu=[e]:cu.push(e)}function HA(e,t,r,a){var c=t.interleaved;return c===null?(r.next=r,tS(t)):(r.next=c.next,c.next=r),t.interleaved=r,ml(e,a)}function ml(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var ec=!1;function nS(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function GA(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ul(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function dc(e,t,r){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,mr&2){var c=a.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),a.pending=t,ml(e,r)}return c=a.interleaved,c===null?(t.next=t,tS(a)):(t.next=c.next,c.next=t),a.interleaved=t,ml(e,r)}function zv(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var a=t.lanes;a&=e.pendingLanes,r|=a,t.lanes=r,jw(e,r)}}function PT(e,t){var r=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,r===a)){var c=null,f=null;if(r=r.firstBaseUpdate,r!==null){do{var y={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};f===null?c=f=y:f=f.next=y,r=r.next}while(r!==null);f===null?c=f=t:f=f.next=t}else c=f=t;r={baseState:a.baseState,firstBaseUpdate:c,lastBaseUpdate:f,shared:a.shared,effects:a.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function fy(e,t,r,a){var c=e.updateQueue;ec=!1;var f=c.firstBaseUpdate,y=c.lastBaseUpdate,l=c.shared.pending;if(l!==null){c.shared.pending=null;var w=l,C=w.next;w.next=null,y===null?f=C:y.next=C,y=w;var A=e.alternate;A!==null&&(A=A.updateQueue,l=A.lastBaseUpdate,l!==y&&(l===null?A.firstBaseUpdate=C:l.next=C,A.lastBaseUpdate=w))}if(f!==null){var M=c.baseState;y=0,A=C=w=null,l=f;do{var k=l.lane,N=l.eventTime;if((a&k)===k){A!==null&&(A=A.next={eventTime:N,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var D=e,U=l;switch(k=t,N=r,U.tag){case 1:if(D=U.payload,typeof D=="function"){M=D.call(N,M,k);break e}M=D;break e;case 3:D.flags=D.flags&-65537|128;case 0:if(D=U.payload,k=typeof D=="function"?D.call(N,M,k):D,k==null)break e;M=mi({},M,k);break e;case 2:ec=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,k=c.effects,k===null?c.effects=[l]:k.push(l))}else N={eventTime:N,lane:k,tag:l.tag,payload:l.payload,callback:l.callback,next:null},A===null?(C=A=N,w=M):A=A.next=N,y|=k;if(l=l.next,l===null){if(l=c.shared.pending,l===null)break;k=l,l=k.next,k.next=null,c.lastBaseUpdate=k,c.shared.pending=null}}while(1);if(A===null&&(w=M),c.baseState=w,c.firstBaseUpdate=C,c.lastBaseUpdate=A,t=c.shared.interleaved,t!==null){c=t;do y|=c.lane,c=c.next;while(c!==t)}else f===null&&(c.shared.lanes=0);Su|=y,e.lanes=y,e.memoizedState=M}}function AT(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var a=e[t],c=a.callback;if(c!==null){if(a.callback=null,a=r,typeof c!="function")throw Error(Gt(191,c));c.call(a)}}}var WA=new HP.Component().refs;function hb(e,t,r,a){t=e.memoizedState,r=r(a,t),r=r==null?t:mi({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var i0={isMounted:function(e){return(e=e._reactInternals)?Mu(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var a=Co(),c=fc(e),f=ul(a,c);f.payload=t,r!=null&&(f.callback=r),t=dc(e,f,c),t!==null&&(hs(t,e,c,a),zv(t,e,c))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var a=Co(),c=fc(e),f=ul(a,c);f.tag=1,f.payload=t,r!=null&&(f.callback=r),t=dc(e,f,c),t!==null&&(hs(t,e,c,a),zv(t,e,c))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Co(),a=fc(e),c=ul(r,a);c.tag=2,t!=null&&(c.callback=t),t=dc(e,c,a),t!==null&&(hs(t,e,a,r),zv(t,e,a))}};function RT(e,t,r,a,c,f,y){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,f,y):t.prototype&&t.prototype.isPureReactComponent?!qp(r,a)||!qp(c,f):!0}function qA(e,t,r){var a=!1,c=gc,f=t.contextType;return typeof f=="object"&&f!==null?f=Da(f):(c=Go(t)?xu:yo.current,a=t.contextTypes,f=(a=a!=null)?dh(e,c):gc),t=new t(r,f),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=i0,e.stateNode=t,t._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=c,e.__reactInternalMemoizedMaskedChildContext=f),t}function OT(e,t,r,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,a),t.state!==e&&i0.enqueueReplaceState(t,t.state,null)}function fb(e,t,r,a){var c=e.stateNode;c.props=r,c.state=e.memoizedState,c.refs=WA,nS(e);var f=t.contextType;typeof f=="object"&&f!==null?c.context=Da(f):(f=Go(t)?xu:yo.current,c.context=dh(e,f)),c.state=e.memoizedState,f=t.getDerivedStateFromProps,typeof f=="function"&&(hb(e,t,f,r),c.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(t=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),t!==c.state&&i0.enqueueReplaceState(c,c.state,null),fy(e,r,c,a),c.state=e.memoizedState),typeof c.componentDidMount=="function"&&(e.flags|=4194308)}function sp(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Gt(309));var a=r.stateNode}if(!a)throw Error(Gt(147,e));var c=a,f=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===f?t.ref:(t=function(y){var l=c.refs;l===WA&&(l=c.refs={}),y===null?delete l[f]:l[f]=y},t._stringRef=f,t)}if(typeof e!="string")throw Error(Gt(284));if(!r._owner)throw Error(Gt(290,e))}return e}function cv(e,t){throw e=Object.prototype.toString.call(t),Error(Gt(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function zT(e){var t=e._init;return t(e._payload)}function ZA(e){function t(F,j){if(e){var V=F.deletions;V===null?(F.deletions=[j],F.flags|=16):V.push(j)}}function r(F,j){if(!e)return null;for(;j!==null;)t(F,j),j=j.sibling;return null}function a(F,j){for(F=new Map;j!==null;)j.key!==null?F.set(j.key,j):F.set(j.index,j),j=j.sibling;return F}function c(F,j){return F=pc(F,j),F.index=0,F.sibling=null,F}function f(F,j,V){return F.index=V,e?(V=F.alternate,V!==null?(V=V.index,V<j?(F.flags|=2,j):V):(F.flags|=2,j)):(F.flags|=1048576,j)}function y(F){return e&&F.alternate===null&&(F.flags|=2),F}function l(F,j,V,X){return j===null||j.tag!==6?(j=Wx(V,F.mode,X),j.return=F,j):(j=c(j,V),j.return=F,j)}function w(F,j,V,X){var te=V.type;return te===Nd?A(F,j,V.props.children,X,V.key):j!==null&&(j.elementType===te||typeof te=="object"&&te!==null&&te.$$typeof===Ql&&zT(te)===j.type)?(X=c(j,V.props),X.ref=sp(F,j,V),X.return=F,X):(X=Bv(V.type,V.key,V.props,null,F.mode,X),X.ref=sp(F,j,V),X.return=F,X)}function C(F,j,V,X){return j===null||j.tag!==4||j.stateNode.containerInfo!==V.containerInfo||j.stateNode.implementation!==V.implementation?(j=qx(V,F.mode,X),j.return=F,j):(j=c(j,V.children||[]),j.return=F,j)}function A(F,j,V,X,te){return j===null||j.tag!==7?(j=gu(V,F.mode,X,te),j.return=F,j):(j=c(j,V),j.return=F,j)}function M(F,j,V){if(typeof j=="string"&&j!==""||typeof j=="number")return j=Wx(""+j,F.mode,V),j.return=F,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Jg:return V=Bv(j.type,j.key,j.props,null,F.mode,V),V.ref=sp(F,null,j),V.return=F,V;case Bd:return j=qx(j,F.mode,V),j.return=F,j;case Ql:var X=j._init;return M(F,X(j._payload),V)}if(_p(j)||np(j))return j=gu(j,F.mode,V,null),j.return=F,j;cv(F,j)}return null}function k(F,j,V,X){var te=j!==null?j.key:null;if(typeof V=="string"&&V!==""||typeof V=="number")return te!==null?null:l(F,j,""+V,X);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case Jg:return V.key===te?w(F,j,V,X):null;case Bd:return V.key===te?C(F,j,V,X):null;case Ql:return te=V._init,k(F,j,te(V._payload),X)}if(_p(V)||np(V))return te!==null?null:A(F,j,V,X,null);cv(F,V)}return null}function N(F,j,V,X,te){if(typeof X=="string"&&X!==""||typeof X=="number")return F=F.get(V)||null,l(j,F,""+X,te);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case Jg:return F=F.get(X.key===null?V:X.key)||null,w(j,F,X,te);case Bd:return F=F.get(X.key===null?V:X.key)||null,C(j,F,X,te);case Ql:var re=X._init;return N(F,j,V,re(X._payload),te)}if(_p(X)||np(X))return F=F.get(V)||null,A(j,F,X,te,null);cv(j,X)}return null}function D(F,j,V,X){for(var te=null,re=null,Q=j,ne=j=0,ee=null;Q!==null&&ne<V.length;ne++){Q.index>ne?(ee=Q,Q=null):ee=Q.sibling;var me=k(F,Q,V[ne],X);if(me===null){Q===null&&(Q=ee);break}e&&Q&&me.alternate===null&&t(F,Q),j=f(me,j,ne),re===null?te=me:re.sibling=me,re=me,Q=ee}if(ne===V.length)return r(F,Q),oi&&nu(F,ne),te;if(Q===null){for(;ne<V.length;ne++)Q=M(F,V[ne],X),Q!==null&&(j=f(Q,j,ne),re===null?te=Q:re.sibling=Q,re=Q);return oi&&nu(F,ne),te}for(Q=a(F,Q);ne<V.length;ne++)ee=N(Q,F,ne,V[ne],X),ee!==null&&(e&&ee.alternate!==null&&Q.delete(ee.key===null?ne:ee.key),j=f(ee,j,ne),re===null?te=ee:re.sibling=ee,re=ee);return e&&Q.forEach(function(ce){return t(F,ce)}),oi&&nu(F,ne),te}function U(F,j,V,X){var te=np(V);if(typeof te!="function")throw Error(Gt(150));if(V=te.call(V),V==null)throw Error(Gt(151));for(var re=te=null,Q=j,ne=j=0,ee=null,me=V.next();Q!==null&&!me.done;ne++,me=V.next()){Q.index>ne?(ee=Q,Q=null):ee=Q.sibling;var ce=k(F,Q,me.value,X);if(ce===null){Q===null&&(Q=ee);break}e&&Q&&ce.alternate===null&&t(F,Q),j=f(ce,j,ne),re===null?te=ce:re.sibling=ce,re=ce,Q=ee}if(me.done)return r(F,Q),oi&&nu(F,ne),te;if(Q===null){for(;!me.done;ne++,me=V.next())me=M(F,me.value,X),me!==null&&(j=f(me,j,ne),re===null?te=me:re.sibling=me,re=me);return oi&&nu(F,ne),te}for(Q=a(F,Q);!me.done;ne++,me=V.next())me=N(Q,F,ne,me.value,X),me!==null&&(e&&me.alternate!==null&&Q.delete(me.key===null?ne:me.key),j=f(me,j,ne),re===null?te=me:re.sibling=me,re=me);return e&&Q.forEach(function(ie){return t(F,ie)}),oi&&nu(F,ne),te}function q(F,j,V,X){if(typeof V=="object"&&V!==null&&V.type===Nd&&V.key===null&&(V=V.props.children),typeof V=="object"&&V!==null){switch(V.$$typeof){case Jg:e:{for(var te=V.key,re=j;re!==null;){if(re.key===te){if(te=V.type,te===Nd){if(re.tag===7){r(F,re.sibling),j=c(re,V.props.children),j.return=F,F=j;break e}}else if(re.elementType===te||typeof te=="object"&&te!==null&&te.$$typeof===Ql&&zT(te)===re.type){r(F,re.sibling),j=c(re,V.props),j.ref=sp(F,re,V),j.return=F,F=j;break e}r(F,re);break}else t(F,re);re=re.sibling}V.type===Nd?(j=gu(V.props.children,F.mode,X,V.key),j.return=F,F=j):(X=Bv(V.type,V.key,V.props,null,F.mode,X),X.ref=sp(F,j,V),X.return=F,F=X)}return y(F);case Bd:e:{for(re=V.key;j!==null;){if(j.key===re)if(j.tag===4&&j.stateNode.containerInfo===V.containerInfo&&j.stateNode.implementation===V.implementation){r(F,j.sibling),j=c(j,V.children||[]),j.return=F,F=j;break e}else{r(F,j);break}else t(F,j);j=j.sibling}j=qx(V,F.mode,X),j.return=F,F=j}return y(F);case Ql:return re=V._init,q(F,j,re(V._payload),X)}if(_p(V))return D(F,j,V,X);if(np(V))return U(F,j,V,X);cv(F,V)}return typeof V=="string"&&V!==""||typeof V=="number"?(V=""+V,j!==null&&j.tag===6?(r(F,j.sibling),j=c(j,V),j.return=F,F=j):(r(F,j),j=Wx(V,F.mode,X),j.return=F,F=j),y(F)):r(F,j)}return q}var fh=ZA(!0),XA=ZA(!1),ym={},Fs=bc(ym),Yp=bc(ym),Jp=bc(ym);function uu(e){if(e===ym)throw Error(Gt(174));return e}function rS(e,t){switch(Jr(Jp,t),Jr(Yp,e),Jr(Fs,ym),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:G1(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=G1(t,e)}ni(Fs),Jr(Fs,t)}function ph(){ni(Fs),ni(Yp),ni(Jp)}function KA(e){uu(Jp.current);var t=uu(Fs.current),r=G1(t,e.type);t!==r&&(Jr(Yp,e),Jr(Fs,r))}function iS(e){Yp.current===e&&(ni(Fs),ni(Yp))}var fi=bc(0);function py(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Nx=[];function oS(){for(var e=0;e<Nx.length;e++)Nx[e]._workInProgressVersionPrimary=null;Nx.length=0}var kv=_l.ReactCurrentDispatcher,jx=_l.ReactCurrentBatchConfig,wu=0,pi=null,$i=null,qi=null,my=!1,Mp=!1,Qp=0,iB=0;function fo(){throw Error(Gt(321))}function aS(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!ps(e[r],t[r]))return!1;return!0}function sS(e,t,r,a,c,f){if(wu=f,pi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,kv.current=e===null||e.memoizedState===null?lB:cB,e=r(a,c),Mp){f=0;do{if(Mp=!1,Qp=0,25<=f)throw Error(Gt(301));f+=1,qi=$i=null,t.updateQueue=null,kv.current=uB,e=r(a,c)}while(Mp)}if(kv.current=gy,t=$i!==null&&$i.next!==null,wu=0,qi=$i=pi=null,my=!1,t)throw Error(Gt(300));return e}function lS(){var e=Qp!==0;return Qp=0,e}function ks(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qi===null?pi.memoizedState=qi=e:qi=qi.next=e,qi}function $a(){if($i===null){var e=pi.alternate;e=e!==null?e.memoizedState:null}else e=$i.next;var t=qi===null?pi.memoizedState:qi.next;if(t!==null)qi=t,$i=e;else{if(e===null)throw Error(Gt(310));$i=e,e={memoizedState:$i.memoizedState,baseState:$i.baseState,baseQueue:$i.baseQueue,queue:$i.queue,next:null},qi===null?pi.memoizedState=qi=e:qi=qi.next=e}return qi}function em(e,t){return typeof t=="function"?t(e):t}function Ux(e){var t=$a(),r=t.queue;if(r===null)throw Error(Gt(311));r.lastRenderedReducer=e;var a=$i,c=a.baseQueue,f=r.pending;if(f!==null){if(c!==null){var y=c.next;c.next=f.next,f.next=y}a.baseQueue=c=f,r.pending=null}if(c!==null){f=c.next,a=a.baseState;var l=y=null,w=null,C=f;do{var A=C.lane;if((wu&A)===A)w!==null&&(w=w.next={lane:0,action:C.action,hasEagerState:C.hasEagerState,eagerState:C.eagerState,next:null}),a=C.hasEagerState?C.eagerState:e(a,C.action);else{var M={lane:A,action:C.action,hasEagerState:C.hasEagerState,eagerState:C.eagerState,next:null};w===null?(l=w=M,y=a):w=w.next=M,pi.lanes|=A,Su|=A}C=C.next}while(C!==null&&C!==f);w===null?y=a:w.next=l,ps(a,t.memoizedState)||(Uo=!0),t.memoizedState=a,t.baseState=y,t.baseQueue=w,r.lastRenderedState=a}if(e=r.interleaved,e!==null){c=e;do f=c.lane,pi.lanes|=f,Su|=f,c=c.next;while(c!==e)}else c===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Vx(e){var t=$a(),r=t.queue;if(r===null)throw Error(Gt(311));r.lastRenderedReducer=e;var a=r.dispatch,c=r.pending,f=t.memoizedState;if(c!==null){r.pending=null;var y=c=c.next;do f=e(f,y.action),y=y.next;while(y!==c);ps(f,t.memoizedState)||(Uo=!0),t.memoizedState=f,t.baseQueue===null&&(t.baseState=f),r.lastRenderedState=f}return[f,a]}function YA(){}function JA(e,t){var r=pi,a=$a(),c=t(),f=!ps(a.memoizedState,c);if(f&&(a.memoizedState=c,Uo=!0),a=a.queue,cS(tR.bind(null,r,a,e),[e]),a.getSnapshot!==t||f||qi!==null&&qi.memoizedState.tag&1){if(r.flags|=2048,tm(9,eR.bind(null,r,a,c,t),void 0,null),Zi===null)throw Error(Gt(349));wu&30||QA(r,t,c)}return c}function QA(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=pi.updateQueue,t===null?(t={lastEffect:null,stores:null},pi.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function eR(e,t,r,a){t.value=r,t.getSnapshot=a,nR(t)&&rR(e)}function tR(e,t,r){return r(function(){nR(t)&&rR(e)})}function nR(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!ps(e,r)}catch{return!0}}function rR(e){var t=ml(e,1);t!==null&&hs(t,e,1,-1)}function kT(e){var t=ks();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:em,lastRenderedState:e},t.queue=e,e=e.dispatch=sB.bind(null,pi,e),[t.memoizedState,e]}function tm(e,t,r,a){return e={tag:e,create:t,destroy:r,deps:a,next:null},t=pi.updateQueue,t===null?(t={lastEffect:null,stores:null},pi.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(a=r.next,r.next=e,e.next=a,t.lastEffect=e)),e}function iR(){return $a().memoizedState}function Lv(e,t,r,a){var c=ks();pi.flags|=e,c.memoizedState=tm(1|t,r,void 0,a===void 0?null:a)}function o0(e,t,r,a){var c=$a();a=a===void 0?null:a;var f=void 0;if($i!==null){var y=$i.memoizedState;if(f=y.destroy,a!==null&&aS(a,y.deps)){c.memoizedState=tm(t,r,f,a);return}}pi.flags|=e,c.memoizedState=tm(1|t,r,f,a)}function LT(e,t){return Lv(8390656,8,e,t)}function cS(e,t){return o0(2048,8,e,t)}function oR(e,t){return o0(4,2,e,t)}function aR(e,t){return o0(4,4,e,t)}function sR(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function lR(e,t,r){return r=r!=null?r.concat([e]):null,o0(4,4,sR.bind(null,t,e),r)}function uS(){}function cR(e,t){var r=$a();t=t===void 0?null:t;var a=r.memoizedState;return a!==null&&t!==null&&aS(t,a[1])?a[0]:(r.memoizedState=[e,t],e)}function uR(e,t){var r=$a();t=t===void 0?null:t;var a=r.memoizedState;return a!==null&&t!==null&&aS(t,a[1])?a[0]:(e=e(),r.memoizedState=[e,t],e)}function dR(e,t,r){return wu&21?(ps(r,t)||(r=pA(),pi.lanes|=r,Su|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Uo=!0),e.memoizedState=r)}function oB(e,t){var r=Dr;Dr=r!==0&&4>r?r:4,e(!0);var a=jx.transition;jx.transition={};try{e(!1),t()}finally{Dr=r,jx.transition=a}}function hR(){return $a().memoizedState}function aB(e,t,r){var a=fc(e);if(r={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null},fR(e))pR(t,r);else if(r=HA(e,t,r,a),r!==null){var c=Co();hs(r,e,a,c),mR(r,t,a)}}function sB(e,t,r){var a=fc(e),c={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null};if(fR(e))pR(t,c);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=t.lastRenderedReducer,f!==null))try{var y=t.lastRenderedState,l=f(y,r);if(c.hasEagerState=!0,c.eagerState=l,ps(l,y)){var w=t.interleaved;w===null?(c.next=c,tS(t)):(c.next=w.next,w.next=c),t.interleaved=c;return}}catch{}finally{}r=HA(e,t,c,a),r!==null&&(c=Co(),hs(r,e,a,c),mR(r,t,a))}}function fR(e){var t=e.alternate;return e===pi||t!==null&&t===pi}function pR(e,t){Mp=my=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function mR(e,t,r){if(r&4194240){var a=t.lanes;a&=e.pendingLanes,r|=a,t.lanes=r,jw(e,r)}}var gy={readContext:Da,useCallback:fo,useContext:fo,useEffect:fo,useImperativeHandle:fo,useInsertionEffect:fo,useLayoutEffect:fo,useMemo:fo,useReducer:fo,useRef:fo,useState:fo,useDebugValue:fo,useDeferredValue:fo,useTransition:fo,useMutableSource:fo,useSyncExternalStore:fo,useId:fo,unstable_isNewReconciler:!1},lB={readContext:Da,useCallback:function(e,t){return ks().memoizedState=[e,t===void 0?null:t],e},useContext:Da,useEffect:LT,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Lv(4194308,4,sR.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Lv(4194308,4,e,t)},useInsertionEffect:function(e,t){return Lv(4,2,e,t)},useMemo:function(e,t){var r=ks();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var a=ks();return t=r!==void 0?r(t):t,a.memoizedState=a.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},a.queue=e,e=e.dispatch=aB.bind(null,pi,e),[a.memoizedState,e]},useRef:function(e){var t=ks();return e={current:e},t.memoizedState=e},useState:kT,useDebugValue:uS,useDeferredValue:function(e){return ks().memoizedState=e},useTransition:function(){var e=kT(!1),t=e[0];return e=oB.bind(null,e[1]),ks().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var a=pi,c=ks();if(oi){if(r===void 0)throw Error(Gt(407));r=r()}else{if(r=t(),Zi===null)throw Error(Gt(349));wu&30||QA(a,t,r)}c.memoizedState=r;var f={value:r,getSnapshot:t};return c.queue=f,LT(tR.bind(null,a,f,e),[e]),a.flags|=2048,tm(9,eR.bind(null,a,f,r,t),void 0,null),r},useId:function(){var e=ks(),t=Zi.identifierPrefix;if(oi){var r=cl,a=ll;r=(a&~(1<<32-ds(a)-1)).toString(32)+r,t=":"+t+"R"+r,r=Qp++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=iB++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},cB={readContext:Da,useCallback:cR,useContext:Da,useEffect:cS,useImperativeHandle:lR,useInsertionEffect:oR,useLayoutEffect:aR,useMemo:uR,useReducer:Ux,useRef:iR,useState:function(){return Ux(em)},useDebugValue:uS,useDeferredValue:function(e){var t=$a();return dR(t,$i.memoizedState,e)},useTransition:function(){var e=Ux(em)[0],t=$a().memoizedState;return[e,t]},useMutableSource:YA,useSyncExternalStore:JA,useId:hR,unstable_isNewReconciler:!1},uB={readContext:Da,useCallback:cR,useContext:Da,useEffect:cS,useImperativeHandle:lR,useInsertionEffect:oR,useLayoutEffect:aR,useMemo:uR,useReducer:Vx,useRef:iR,useState:function(){return Vx(em)},useDebugValue:uS,useDeferredValue:function(e){var t=$a();return $i===null?t.memoizedState=e:dR(t,$i.memoizedState,e)},useTransition:function(){var e=Vx(em)[0],t=$a().memoizedState;return[e,t]},useMutableSource:YA,useSyncExternalStore:JA,useId:hR,unstable_isNewReconciler:!1};function mh(e,t){try{var r="",a=t;do r+=F$(a),a=a.return;while(a);var c=r}catch(f){c=`
Error generating stack: `+f.message+`
`+f.stack}return{value:e,source:t,stack:c,digest:null}}function Hx(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function pb(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var dB=typeof WeakMap=="function"?WeakMap:Map;function gR(e,t,r){r=ul(-1,r),r.tag=3,r.payload={element:null};var a=t.value;return r.callback=function(){yy||(yy=!0,Eb=a),pb(e,t)},r}function vR(e,t,r){r=ul(-1,r),r.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var c=t.value;r.payload=function(){return a(c)},r.callback=function(){pb(e,t)}}var f=e.stateNode;return f!==null&&typeof f.componentDidCatch=="function"&&(r.callback=function(){pb(e,t),typeof a!="function"&&(hc===null?hc=new Set([this]):hc.add(this));var y=t.stack;this.componentDidCatch(t.value,{componentStack:y!==null?y:""})}),r}function DT(e,t,r){var a=e.pingCache;if(a===null){a=e.pingCache=new dB;var c=new Set;a.set(t,c)}else c=a.get(t),c===void 0&&(c=new Set,a.set(t,c));c.has(r)||(c.add(r),e=CB.bind(null,e,t,r),t.then(e,e))}function $T(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function FT(e,t,r,a,c){return e.mode&1?(e.flags|=65536,e.lanes=c,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=ul(-1,1),t.tag=2,dc(r,t,1))),r.lanes|=1),e)}var hB=_l.ReactCurrentOwner,Uo=!1;function So(e,t,r,a){t.child=e===null?XA(t,null,r,a):fh(t,e.child,r,a)}function BT(e,t,r,a,c){r=r.render;var f=t.ref;return oh(t,c),a=sS(e,t,r,a,f,c),r=lS(),e!==null&&!Uo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,gl(e,t,c)):(oi&&r&&Xw(t),t.flags|=1,So(e,t,a,c),t.child)}function NT(e,t,r,a,c){if(e===null){var f=r.type;return typeof f=="function"&&!yS(f)&&f.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=f,yR(e,t,f,a,c)):(e=Bv(r.type,null,a,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(f=e.child,!(e.lanes&c)){var y=f.memoizedProps;if(r=r.compare,r=r!==null?r:qp,r(y,a)&&e.ref===t.ref)return gl(e,t,c)}return t.flags|=1,e=pc(f,a),e.ref=t.ref,e.return=t,t.child=e}function yR(e,t,r,a,c){if(e!==null){var f=e.memoizedProps;if(qp(f,a)&&e.ref===t.ref)if(Uo=!1,t.pendingProps=a=f,(e.lanes&c)!==0)e.flags&131072&&(Uo=!0);else return t.lanes=e.lanes,gl(e,t,c)}return mb(e,t,r,a,c)}function _R(e,t,r){var a=t.pendingProps,c=a.children,f=e!==null?e.memoizedState:null;if(a.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Jr(Kd,aa),aa|=r;else{if(!(r&1073741824))return e=f!==null?f.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Jr(Kd,aa),aa|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=f!==null?f.baseLanes:r,Jr(Kd,aa),aa|=a}else f!==null?(a=f.baseLanes|r,t.memoizedState=null):a=r,Jr(Kd,aa),aa|=a;return So(e,t,c,r),t.child}function xR(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function mb(e,t,r,a,c){var f=Go(r)?xu:yo.current;return f=dh(t,f),oh(t,c),r=sS(e,t,r,a,f,c),a=lS(),e!==null&&!Uo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,gl(e,t,c)):(oi&&a&&Xw(t),t.flags|=1,So(e,t,r,c),t.child)}function jT(e,t,r,a,c){if(Go(r)){var f=!0;ly(t)}else f=!1;if(oh(t,c),t.stateNode===null)Dv(e,t),qA(t,r,a),fb(t,r,a,c),a=!0;else if(e===null){var y=t.stateNode,l=t.memoizedProps;y.props=l;var w=y.context,C=r.contextType;typeof C=="object"&&C!==null?C=Da(C):(C=Go(r)?xu:yo.current,C=dh(t,C));var A=r.getDerivedStateFromProps,M=typeof A=="function"||typeof y.getSnapshotBeforeUpdate=="function";M||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(l!==a||w!==C)&&OT(t,y,a,C),ec=!1;var k=t.memoizedState;y.state=k,fy(t,a,y,c),w=t.memoizedState,l!==a||k!==w||Ho.current||ec?(typeof A=="function"&&(hb(t,r,A,a),w=t.memoizedState),(l=ec||RT(t,r,l,a,k,w,C))?(M||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(t.flags|=4194308)):(typeof y.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=w),y.props=a,y.state=w,y.context=C,a=l):(typeof y.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{y=t.stateNode,GA(e,t),l=t.memoizedProps,C=t.type===t.elementType?l:is(t.type,l),y.props=C,M=t.pendingProps,k=y.context,w=r.contextType,typeof w=="object"&&w!==null?w=Da(w):(w=Go(r)?xu:yo.current,w=dh(t,w));var N=r.getDerivedStateFromProps;(A=typeof N=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(l!==M||k!==w)&&OT(t,y,a,w),ec=!1,k=t.memoizedState,y.state=k,fy(t,a,y,c);var D=t.memoizedState;l!==M||k!==D||Ho.current||ec?(typeof N=="function"&&(hb(t,r,N,a),D=t.memoizedState),(C=ec||RT(t,r,C,a,k,D,w)||!1)?(A||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(a,D,w),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(a,D,w)),typeof y.componentDidUpdate=="function"&&(t.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof y.componentDidUpdate!="function"||l===e.memoizedProps&&k===e.memoizedState||(t.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&k===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=D),y.props=a,y.state=D,y.context=w,a=C):(typeof y.componentDidUpdate!="function"||l===e.memoizedProps&&k===e.memoizedState||(t.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&k===e.memoizedState||(t.flags|=1024),a=!1)}return gb(e,t,r,a,f,c)}function gb(e,t,r,a,c,f){xR(e,t);var y=(t.flags&128)!==0;if(!a&&!y)return c&&TT(t,r,!1),gl(e,t,f);a=t.stateNode,hB.current=t;var l=y&&typeof r.getDerivedStateFromError!="function"?null:a.render();return t.flags|=1,e!==null&&y?(t.child=fh(t,e.child,null,f),t.child=fh(t,null,l,f)):So(e,t,l,f),t.memoizedState=a.state,c&&TT(t,r,!0),t.child}function bR(e){var t=e.stateNode;t.pendingContext?CT(e,t.pendingContext,t.pendingContext!==t.context):t.context&&CT(e,t.context,!1),rS(e,t.containerInfo)}function UT(e,t,r,a,c){return hh(),Yw(c),t.flags|=256,So(e,t,r,a),t.child}var vb={dehydrated:null,treeContext:null,retryLane:0};function yb(e){return{baseLanes:e,cachePool:null,transitions:null}}function wR(e,t,r){var a=t.pendingProps,c=fi.current,f=!1,y=(t.flags&128)!==0,l;if((l=y)||(l=e!==null&&e.memoizedState===null?!1:(c&2)!==0),l?(f=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(c|=1),Jr(fi,c&1),e===null)return ub(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(y=a.children,e=a.fallback,f?(a=t.mode,f=t.child,y={mode:"hidden",children:y},!(a&1)&&f!==null?(f.childLanes=0,f.pendingProps=y):f=l0(y,a,0,null),e=gu(e,a,r,null),f.return=t,e.return=t,f.sibling=e,t.child=f,t.child.memoizedState=yb(r),t.memoizedState=vb,e):dS(t,y));if(c=e.memoizedState,c!==null&&(l=c.dehydrated,l!==null))return fB(e,t,y,a,l,c,r);if(f){f=a.fallback,y=t.mode,c=e.child,l=c.sibling;var w={mode:"hidden",children:a.children};return!(y&1)&&t.child!==c?(a=t.child,a.childLanes=0,a.pendingProps=w,t.deletions=null):(a=pc(c,w),a.subtreeFlags=c.subtreeFlags&14680064),l!==null?f=pc(l,f):(f=gu(f,y,r,null),f.flags|=2),f.return=t,a.return=t,a.sibling=f,t.child=a,a=f,f=t.child,y=e.child.memoizedState,y=y===null?yb(r):{baseLanes:y.baseLanes|r,cachePool:null,transitions:y.transitions},f.memoizedState=y,f.childLanes=e.childLanes&~r,t.memoizedState=vb,a}return f=e.child,e=f.sibling,a=pc(f,{mode:"visible",children:a.children}),!(t.mode&1)&&(a.lanes=r),a.return=t,a.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=a,t.memoizedState=null,a}function dS(e,t){return t=l0({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function uv(e,t,r,a){return a!==null&&Yw(a),fh(t,e.child,null,r),e=dS(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function fB(e,t,r,a,c,f,y){if(r)return t.flags&256?(t.flags&=-257,a=Hx(Error(Gt(422))),uv(e,t,y,a)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(f=a.fallback,c=t.mode,a=l0({mode:"visible",children:a.children},c,0,null),f=gu(f,c,y,null),f.flags|=2,a.return=t,f.return=t,a.sibling=f,t.child=a,t.mode&1&&fh(t,e.child,null,y),t.child.memoizedState=yb(y),t.memoizedState=vb,f);if(!(t.mode&1))return uv(e,t,y,null);if(c.data==="$!"){if(a=c.nextSibling&&c.nextSibling.dataset,a)var l=a.dgst;return a=l,f=Error(Gt(419)),a=Hx(f,a,void 0),uv(e,t,y,a)}if(l=(y&e.childLanes)!==0,Uo||l){if(a=Zi,a!==null){switch(y&-y){case 4:c=2;break;case 16:c=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:c=32;break;case 536870912:c=268435456;break;default:c=0}c=c&(a.suspendedLanes|y)?0:c,c!==0&&c!==f.retryLane&&(f.retryLane=c,ml(e,c),hs(a,e,c,-1))}return vS(),a=Hx(Error(Gt(421))),uv(e,t,y,a)}return c.data==="$?"?(t.flags|=128,t.child=e.child,t=TB.bind(null,e),c._reactRetry=t,null):(e=f.treeContext,sa=uc(c.nextSibling),ca=t,oi=!0,ls=null,e!==null&&(Ra[Oa++]=ll,Ra[Oa++]=cl,Ra[Oa++]=bu,ll=e.id,cl=e.overflow,bu=t),t=dS(t,a.children),t.flags|=4096,t)}function VT(e,t,r){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),db(e.return,t,r)}function Gx(e,t,r,a,c){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:r,tailMode:c}:(f.isBackwards=t,f.rendering=null,f.renderingStartTime=0,f.last=a,f.tail=r,f.tailMode=c)}function SR(e,t,r){var a=t.pendingProps,c=a.revealOrder,f=a.tail;if(So(e,t,a.children,r),a=fi.current,a&2)a=a&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&VT(e,r,t);else if(e.tag===19)VT(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(Jr(fi,a),!(t.mode&1))t.memoizedState=null;else switch(c){case"forwards":for(r=t.child,c=null;r!==null;)e=r.alternate,e!==null&&py(e)===null&&(c=r),r=r.sibling;r=c,r===null?(c=t.child,t.child=null):(c=r.sibling,r.sibling=null),Gx(t,!1,c,r,f);break;case"backwards":for(r=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&py(e)===null){t.child=c;break}e=c.sibling,c.sibling=r,r=c,c=e}Gx(t,!0,r,null,f);break;case"together":Gx(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Dv(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function gl(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Su|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Gt(153));if(t.child!==null){for(e=t.child,r=pc(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=pc(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function pB(e,t,r){switch(t.tag){case 3:bR(t),hh();break;case 5:KA(t);break;case 1:Go(t.type)&&ly(t);break;case 4:rS(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,c=t.memoizedProps.value;Jr(dy,a._currentValue),a._currentValue=c;break;case 13:if(a=t.memoizedState,a!==null)return a.dehydrated!==null?(Jr(fi,fi.current&1),t.flags|=128,null):r&t.child.childLanes?wR(e,t,r):(Jr(fi,fi.current&1),e=gl(e,t,r),e!==null?e.sibling:null);Jr(fi,fi.current&1);break;case 19:if(a=(r&t.childLanes)!==0,e.flags&128){if(a)return SR(e,t,r);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),Jr(fi,fi.current),a)break;return null;case 22:case 23:return t.lanes=0,_R(e,t,r)}return gl(e,t,r)}var ER,_b,CR,TR;ER=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};_b=function(){};CR=function(e,t,r,a){var c=e.memoizedProps;if(c!==a){e=t.stateNode,uu(Fs.current);var f=null;switch(r){case"input":c=j1(e,c),a=j1(e,a),f=[];break;case"select":c=mi({},c,{value:void 0}),a=mi({},a,{value:void 0}),f=[];break;case"textarea":c=H1(e,c),a=H1(e,a),f=[];break;default:typeof c.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=ay)}W1(r,a);var y;r=null;for(C in c)if(!a.hasOwnProperty(C)&&c.hasOwnProperty(C)&&c[C]!=null)if(C==="style"){var l=c[C];for(y in l)l.hasOwnProperty(y)&&(r||(r={}),r[y]="")}else C!=="dangerouslySetInnerHTML"&&C!=="children"&&C!=="suppressContentEditableWarning"&&C!=="suppressHydrationWarning"&&C!=="autoFocus"&&(Np.hasOwnProperty(C)?f||(f=[]):(f=f||[]).push(C,null));for(C in a){var w=a[C];if(l=c!=null?c[C]:void 0,a.hasOwnProperty(C)&&w!==l&&(w!=null||l!=null))if(C==="style")if(l){for(y in l)!l.hasOwnProperty(y)||w&&w.hasOwnProperty(y)||(r||(r={}),r[y]="");for(y in w)w.hasOwnProperty(y)&&l[y]!==w[y]&&(r||(r={}),r[y]=w[y])}else r||(f||(f=[]),f.push(C,r)),r=w;else C==="dangerouslySetInnerHTML"?(w=w?w.__html:void 0,l=l?l.__html:void 0,w!=null&&l!==w&&(f=f||[]).push(C,w)):C==="children"?typeof w!="string"&&typeof w!="number"||(f=f||[]).push(C,""+w):C!=="suppressContentEditableWarning"&&C!=="suppressHydrationWarning"&&(Np.hasOwnProperty(C)?(w!=null&&C==="onScroll"&&ti("scroll",e),f||l===w||(f=[])):(f=f||[]).push(C,w))}r&&(f=f||[]).push("style",r);var C=f;(t.updateQueue=C)&&(t.flags|=4)}};TR=function(e,t,r,a){r!==a&&(t.flags|=4)};function lp(e,t){if(!oi)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function po(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,a=0;if(t)for(var c=e.child;c!==null;)r|=c.lanes|c.childLanes,a|=c.subtreeFlags&14680064,a|=c.flags&14680064,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)r|=c.lanes|c.childLanes,a|=c.subtreeFlags,a|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=a,e.childLanes=r,t}function mB(e,t,r){var a=t.pendingProps;switch(Kw(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return po(t),null;case 1:return Go(t.type)&&sy(),po(t),null;case 3:return a=t.stateNode,ph(),ni(Ho),ni(yo),oS(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(lv(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ls!==null&&(Ib(ls),ls=null))),_b(e,t),po(t),null;case 5:iS(t);var c=uu(Jp.current);if(r=t.type,e!==null&&t.stateNode!=null)CR(e,t,r,a,c),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(t.stateNode===null)throw Error(Gt(166));return po(t),null}if(e=uu(Fs.current),lv(t)){a=t.stateNode,r=t.type;var f=t.memoizedProps;switch(a[Ls]=t,a[Kp]=f,e=(t.mode&1)!==0,r){case"dialog":ti("cancel",a),ti("close",a);break;case"iframe":case"object":case"embed":ti("load",a);break;case"video":case"audio":for(c=0;c<bp.length;c++)ti(bp[c],a);break;case"source":ti("error",a);break;case"img":case"image":case"link":ti("error",a),ti("load",a);break;case"details":ti("toggle",a);break;case"input":J2(a,f),ti("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!f.multiple},ti("invalid",a);break;case"textarea":eT(a,f),ti("invalid",a)}W1(r,f),c=null;for(var y in f)if(f.hasOwnProperty(y)){var l=f[y];y==="children"?typeof l=="string"?a.textContent!==l&&(f.suppressHydrationWarning!==!0&&sv(a.textContent,l,e),c=["children",l]):typeof l=="number"&&a.textContent!==""+l&&(f.suppressHydrationWarning!==!0&&sv(a.textContent,l,e),c=["children",""+l]):Np.hasOwnProperty(y)&&l!=null&&y==="onScroll"&&ti("scroll",a)}switch(r){case"input":Qg(a),Q2(a,f,!0);break;case"textarea":Qg(a),tT(a);break;case"select":case"option":break;default:typeof f.onClick=="function"&&(a.onclick=ay)}a=c,t.updateQueue=a,a!==null&&(t.flags|=4)}else{y=c.nodeType===9?c:c.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=QP(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=y.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=y.createElement(r,{is:a.is}):(e=y.createElement(r),r==="select"&&(y=e,a.multiple?y.multiple=!0:a.size&&(y.size=a.size))):e=y.createElementNS(e,r),e[Ls]=t,e[Kp]=a,ER(e,t,!1,!1),t.stateNode=e;e:{switch(y=q1(r,a),r){case"dialog":ti("cancel",e),ti("close",e),c=a;break;case"iframe":case"object":case"embed":ti("load",e),c=a;break;case"video":case"audio":for(c=0;c<bp.length;c++)ti(bp[c],e);c=a;break;case"source":ti("error",e),c=a;break;case"img":case"image":case"link":ti("error",e),ti("load",e),c=a;break;case"details":ti("toggle",e),c=a;break;case"input":J2(e,a),c=j1(e,a),ti("invalid",e);break;case"option":c=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},c=mi({},a,{value:void 0}),ti("invalid",e);break;case"textarea":eT(e,a),c=H1(e,a),ti("invalid",e);break;default:c=a}W1(r,c),l=c;for(f in l)if(l.hasOwnProperty(f)){var w=l[f];f==="style"?nA(e,w):f==="dangerouslySetInnerHTML"?(w=w?w.__html:void 0,w!=null&&eA(e,w)):f==="children"?typeof w=="string"?(r!=="textarea"||w!=="")&&jp(e,w):typeof w=="number"&&jp(e,""+w):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(Np.hasOwnProperty(f)?w!=null&&f==="onScroll"&&ti("scroll",e):w!=null&&Lw(e,f,w,y))}switch(r){case"input":Qg(e),Q2(e,a,!1);break;case"textarea":Qg(e),tT(e);break;case"option":a.value!=null&&e.setAttribute("value",""+mc(a.value));break;case"select":e.multiple=!!a.multiple,f=a.value,f!=null?th(e,!!a.multiple,f,!1):a.defaultValue!=null&&th(e,!!a.multiple,a.defaultValue,!0);break;default:typeof c.onClick=="function"&&(e.onclick=ay)}switch(r){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return po(t),null;case 6:if(e&&t.stateNode!=null)TR(e,t,e.memoizedProps,a);else{if(typeof a!="string"&&t.stateNode===null)throw Error(Gt(166));if(r=uu(Jp.current),uu(Fs.current),lv(t)){if(a=t.stateNode,r=t.memoizedProps,a[Ls]=t,(f=a.nodeValue!==r)&&(e=ca,e!==null))switch(e.tag){case 3:sv(a.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&sv(a.nodeValue,r,(e.mode&1)!==0)}f&&(t.flags|=4)}else a=(r.nodeType===9?r:r.ownerDocument).createTextNode(a),a[Ls]=t,t.stateNode=a}return po(t),null;case 13:if(ni(fi),a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(oi&&sa!==null&&t.mode&1&&!(t.flags&128))VA(),hh(),t.flags|=98560,f=!1;else if(f=lv(t),a!==null&&a.dehydrated!==null){if(e===null){if(!f)throw Error(Gt(318));if(f=t.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(Gt(317));f[Ls]=t}else hh(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;po(t),f=!1}else ls!==null&&(Ib(ls),ls=null),f=!0;if(!f)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(a=a!==null,a!==(e!==null&&e.memoizedState!==null)&&a&&(t.child.flags|=8192,t.mode&1&&(e===null||fi.current&1?Fi===0&&(Fi=3):vS())),t.updateQueue!==null&&(t.flags|=4),po(t),null);case 4:return ph(),_b(e,t),e===null&&Zp(t.stateNode.containerInfo),po(t),null;case 10:return eS(t.type._context),po(t),null;case 17:return Go(t.type)&&sy(),po(t),null;case 19:if(ni(fi),f=t.memoizedState,f===null)return po(t),null;if(a=(t.flags&128)!==0,y=f.rendering,y===null)if(a)lp(f,!1);else{if(Fi!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(y=py(e),y!==null){for(t.flags|=128,lp(f,!1),a=y.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=r,r=t.child;r!==null;)f=r,e=a,f.flags&=14680066,y=f.alternate,y===null?(f.childLanes=0,f.lanes=e,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=y.childLanes,f.lanes=y.lanes,f.child=y.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=y.memoizedProps,f.memoizedState=y.memoizedState,f.updateQueue=y.updateQueue,f.type=y.type,e=y.dependencies,f.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Jr(fi,fi.current&1|2),t.child}e=e.sibling}f.tail!==null&&wi()>gh&&(t.flags|=128,a=!0,lp(f,!1),t.lanes=4194304)}else{if(!a)if(e=py(y),e!==null){if(t.flags|=128,a=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),lp(f,!0),f.tail===null&&f.tailMode==="hidden"&&!y.alternate&&!oi)return po(t),null}else 2*wi()-f.renderingStartTime>gh&&r!==1073741824&&(t.flags|=128,a=!0,lp(f,!1),t.lanes=4194304);f.isBackwards?(y.sibling=t.child,t.child=y):(r=f.last,r!==null?r.sibling=y:t.child=y,f.last=y)}return f.tail!==null?(t=f.tail,f.rendering=t,f.tail=t.sibling,f.renderingStartTime=wi(),t.sibling=null,r=fi.current,Jr(fi,a?r&1|2:r&1),t):(po(t),null);case 22:case 23:return gS(),a=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==a&&(t.flags|=8192),a&&t.mode&1?aa&1073741824&&(po(t),t.subtreeFlags&6&&(t.flags|=8192)):po(t),null;case 24:return null;case 25:return null}throw Error(Gt(156,t.tag))}function gB(e,t){switch(Kw(t),t.tag){case 1:return Go(t.type)&&sy(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ph(),ni(Ho),ni(yo),oS(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return iS(t),null;case 13:if(ni(fi),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Gt(340));hh()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ni(fi),null;case 4:return ph(),null;case 10:return eS(t.type._context),null;case 22:case 23:return gS(),null;case 24:return null;default:return null}}var dv=!1,mo=!1,vB=typeof WeakSet=="function"?WeakSet:Set,pn=null;function Xd(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(a){vi(e,t,a)}else r.current=null}function xb(e,t,r){try{r()}catch(a){vi(e,t,a)}}var HT=!1;function yB(e,t){if(rb=ry,e=AA(),Zw(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var a=r.getSelection&&r.getSelection();if(a&&a.rangeCount!==0){r=a.anchorNode;var c=a.anchorOffset,f=a.focusNode;a=a.focusOffset;try{r.nodeType,f.nodeType}catch{r=null;break e}var y=0,l=-1,w=-1,C=0,A=0,M=e,k=null;t:for(;;){for(var N;M!==r||c!==0&&M.nodeType!==3||(l=y+c),M!==f||a!==0&&M.nodeType!==3||(w=y+a),M.nodeType===3&&(y+=M.nodeValue.length),(N=M.firstChild)!==null;)k=M,M=N;for(;;){if(M===e)break t;if(k===r&&++C===c&&(l=y),k===f&&++A===a&&(w=y),(N=M.nextSibling)!==null)break;M=k,k=M.parentNode}M=N}r=l===-1||w===-1?null:{start:l,end:w}}else r=null}r=r||{start:0,end:0}}else r=null;for(ib={focusedElem:e,selectionRange:r},ry=!1,pn=t;pn!==null;)if(t=pn,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,pn=e;else for(;pn!==null;){t=pn;try{var D=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(D!==null){var U=D.memoizedProps,q=D.memoizedState,F=t.stateNode,j=F.getSnapshotBeforeUpdate(t.elementType===t.type?U:is(t.type,U),q);F.__reactInternalSnapshotBeforeUpdate=j}break;case 3:var V=t.stateNode.containerInfo;V.nodeType===1?V.textContent="":V.nodeType===9&&V.documentElement&&V.removeChild(V.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Gt(163))}}catch(X){vi(t,t.return,X)}if(e=t.sibling,e!==null){e.return=t.return,pn=e;break}pn=t.return}return D=HT,HT=!1,D}function Pp(e,t,r){var a=t.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var c=a=a.next;do{if((c.tag&e)===e){var f=c.destroy;c.destroy=void 0,f!==void 0&&xb(t,r,f)}c=c.next}while(c!==a)}}function a0(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var a=r.create;r.destroy=a()}r=r.next}while(r!==t)}}function bb(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function IR(e){var t=e.alternate;t!==null&&(e.alternate=null,IR(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ls],delete t[Kp],delete t[sb],delete t[eB],delete t[tB])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function MR(e){return e.tag===5||e.tag===3||e.tag===4}function GT(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||MR(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function wb(e,t,r){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=ay));else if(a!==4&&(e=e.child,e!==null))for(wb(e,t,r),e=e.sibling;e!==null;)wb(e,t,r),e=e.sibling}function Sb(e,t,r){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(Sb(e,t,r),e=e.sibling;e!==null;)Sb(e,t,r),e=e.sibling}var Yi=null,os=!1;function Xl(e,t,r){for(r=r.child;r!==null;)PR(e,t,r),r=r.sibling}function PR(e,t,r){if($s&&typeof $s.onCommitFiberUnmount=="function")try{$s.onCommitFiberUnmount(Jy,r)}catch{}switch(r.tag){case 5:mo||Xd(r,t);case 6:var a=Yi,c=os;Yi=null,Xl(e,t,r),Yi=a,os=c,Yi!==null&&(os?(e=Yi,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Yi.removeChild(r.stateNode));break;case 18:Yi!==null&&(os?(e=Yi,r=r.stateNode,e.nodeType===8?Fx(e.parentNode,r):e.nodeType===1&&Fx(e,r),Gp(e)):Fx(Yi,r.stateNode));break;case 4:a=Yi,c=os,Yi=r.stateNode.containerInfo,os=!0,Xl(e,t,r),Yi=a,os=c;break;case 0:case 11:case 14:case 15:if(!mo&&(a=r.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){c=a=a.next;do{var f=c,y=f.destroy;f=f.tag,y!==void 0&&(f&2||f&4)&&xb(r,t,y),c=c.next}while(c!==a)}Xl(e,t,r);break;case 1:if(!mo&&(Xd(r,t),a=r.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=r.memoizedProps,a.state=r.memoizedState,a.componentWillUnmount()}catch(l){vi(r,t,l)}Xl(e,t,r);break;case 21:Xl(e,t,r);break;case 22:r.mode&1?(mo=(a=mo)||r.memoizedState!==null,Xl(e,t,r),mo=a):Xl(e,t,r);break;default:Xl(e,t,r)}}function WT(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new vB),t.forEach(function(a){var c=IB.bind(null,e,a);r.has(a)||(r.add(a),a.then(c,c))})}}function ns(e,t){var r=t.deletions;if(r!==null)for(var a=0;a<r.length;a++){var c=r[a];try{var f=e,y=t,l=y;e:for(;l!==null;){switch(l.tag){case 5:Yi=l.stateNode,os=!1;break e;case 3:Yi=l.stateNode.containerInfo,os=!0;break e;case 4:Yi=l.stateNode.containerInfo,os=!0;break e}l=l.return}if(Yi===null)throw Error(Gt(160));PR(f,y,c),Yi=null,os=!1;var w=c.alternate;w!==null&&(w.return=null),c.return=null}catch(C){vi(c,t,C)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)AR(t,e),t=t.sibling}function AR(e,t){var r=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ns(t,e),zs(e),a&4){try{Pp(3,e,e.return),a0(3,e)}catch(U){vi(e,e.return,U)}try{Pp(5,e,e.return)}catch(U){vi(e,e.return,U)}}break;case 1:ns(t,e),zs(e),a&512&&r!==null&&Xd(r,r.return);break;case 5:if(ns(t,e),zs(e),a&512&&r!==null&&Xd(r,r.return),e.flags&32){var c=e.stateNode;try{jp(c,"")}catch(U){vi(e,e.return,U)}}if(a&4&&(c=e.stateNode,c!=null)){var f=e.memoizedProps,y=r!==null?r.memoizedProps:f,l=e.type,w=e.updateQueue;if(e.updateQueue=null,w!==null)try{l==="input"&&f.type==="radio"&&f.name!=null&&YP(c,f),q1(l,y);var C=q1(l,f);for(y=0;y<w.length;y+=2){var A=w[y],M=w[y+1];A==="style"?nA(c,M):A==="dangerouslySetInnerHTML"?eA(c,M):A==="children"?jp(c,M):Lw(c,A,M,C)}switch(l){case"input":U1(c,f);break;case"textarea":JP(c,f);break;case"select":var k=c._wrapperState.wasMultiple;c._wrapperState.wasMultiple=!!f.multiple;var N=f.value;N!=null?th(c,!!f.multiple,N,!1):k!==!!f.multiple&&(f.defaultValue!=null?th(c,!!f.multiple,f.defaultValue,!0):th(c,!!f.multiple,f.multiple?[]:"",!1))}c[Kp]=f}catch(U){vi(e,e.return,U)}}break;case 6:if(ns(t,e),zs(e),a&4){if(e.stateNode===null)throw Error(Gt(162));c=e.stateNode,f=e.memoizedProps;try{c.nodeValue=f}catch(U){vi(e,e.return,U)}}break;case 3:if(ns(t,e),zs(e),a&4&&r!==null&&r.memoizedState.isDehydrated)try{Gp(t.containerInfo)}catch(U){vi(e,e.return,U)}break;case 4:ns(t,e),zs(e);break;case 13:ns(t,e),zs(e),c=e.child,c.flags&8192&&(f=c.memoizedState!==null,c.stateNode.isHidden=f,!f||c.alternate!==null&&c.alternate.memoizedState!==null||(pS=wi())),a&4&&WT(e);break;case 22:if(A=r!==null&&r.memoizedState!==null,e.mode&1?(mo=(C=mo)||A,ns(t,e),mo=C):ns(t,e),zs(e),a&8192){if(C=e.memoizedState!==null,(e.stateNode.isHidden=C)&&!A&&e.mode&1)for(pn=e,A=e.child;A!==null;){for(M=pn=A;pn!==null;){switch(k=pn,N=k.child,k.tag){case 0:case 11:case 14:case 15:Pp(4,k,k.return);break;case 1:Xd(k,k.return);var D=k.stateNode;if(typeof D.componentWillUnmount=="function"){a=k,r=k.return;try{t=a,D.props=t.memoizedProps,D.state=t.memoizedState,D.componentWillUnmount()}catch(U){vi(a,r,U)}}break;case 5:Xd(k,k.return);break;case 22:if(k.memoizedState!==null){ZT(M);continue}}N!==null?(N.return=k,pn=N):ZT(M)}A=A.sibling}e:for(A=null,M=e;;){if(M.tag===5){if(A===null){A=M;try{c=M.stateNode,C?(f=c.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none"):(l=M.stateNode,w=M.memoizedProps.style,y=w!=null&&w.hasOwnProperty("display")?w.display:null,l.style.display=tA("display",y))}catch(U){vi(e,e.return,U)}}}else if(M.tag===6){if(A===null)try{M.stateNode.nodeValue=C?"":M.memoizedProps}catch(U){vi(e,e.return,U)}}else if((M.tag!==22&&M.tag!==23||M.memoizedState===null||M===e)&&M.child!==null){M.child.return=M,M=M.child;continue}if(M===e)break e;for(;M.sibling===null;){if(M.return===null||M.return===e)break e;A===M&&(A=null),M=M.return}A===M&&(A=null),M.sibling.return=M.return,M=M.sibling}}break;case 19:ns(t,e),zs(e),a&4&&WT(e);break;case 21:break;default:ns(t,e),zs(e)}}function zs(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(MR(r)){var a=r;break e}r=r.return}throw Error(Gt(160))}switch(a.tag){case 5:var c=a.stateNode;a.flags&32&&(jp(c,""),a.flags&=-33);var f=GT(e);Sb(e,f,c);break;case 3:case 4:var y=a.stateNode.containerInfo,l=GT(e);wb(e,l,y);break;default:throw Error(Gt(161))}}catch(w){vi(e,e.return,w)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function _B(e,t,r){pn=e,RR(e)}function RR(e,t,r){for(var a=(e.mode&1)!==0;pn!==null;){var c=pn,f=c.child;if(c.tag===22&&a){var y=c.memoizedState!==null||dv;if(!y){var l=c.alternate,w=l!==null&&l.memoizedState!==null||mo;l=dv;var C=mo;if(dv=y,(mo=w)&&!C)for(pn=c;pn!==null;)y=pn,w=y.child,y.tag===22&&y.memoizedState!==null?XT(c):w!==null?(w.return=y,pn=w):XT(c);for(;f!==null;)pn=f,RR(f),f=f.sibling;pn=c,dv=l,mo=C}qT(e)}else c.subtreeFlags&8772&&f!==null?(f.return=c,pn=f):qT(e)}}function qT(e){for(;pn!==null;){var t=pn;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:mo||a0(5,t);break;case 1:var a=t.stateNode;if(t.flags&4&&!mo)if(r===null)a.componentDidMount();else{var c=t.elementType===t.type?r.memoizedProps:is(t.type,r.memoizedProps);a.componentDidUpdate(c,r.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var f=t.updateQueue;f!==null&&AT(t,f,a);break;case 3:var y=t.updateQueue;if(y!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}AT(t,y,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var w=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":w.autoFocus&&r.focus();break;case"img":w.src&&(r.src=w.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var C=t.alternate;if(C!==null){var A=C.memoizedState;if(A!==null){var M=A.dehydrated;M!==null&&Gp(M)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Gt(163))}mo||t.flags&512&&bb(t)}catch(k){vi(t,t.return,k)}}if(t===e){pn=null;break}if(r=t.sibling,r!==null){r.return=t.return,pn=r;break}pn=t.return}}function ZT(e){for(;pn!==null;){var t=pn;if(t===e){pn=null;break}var r=t.sibling;if(r!==null){r.return=t.return,pn=r;break}pn=t.return}}function XT(e){for(;pn!==null;){var t=pn;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{a0(4,t)}catch(w){vi(t,r,w)}break;case 1:var a=t.stateNode;if(typeof a.componentDidMount=="function"){var c=t.return;try{a.componentDidMount()}catch(w){vi(t,c,w)}}var f=t.return;try{bb(t)}catch(w){vi(t,f,w)}break;case 5:var y=t.return;try{bb(t)}catch(w){vi(t,y,w)}}}catch(w){vi(t,t.return,w)}if(t===e){pn=null;break}var l=t.sibling;if(l!==null){l.return=t.return,pn=l;break}pn=t.return}}var xB=Math.ceil,vy=_l.ReactCurrentDispatcher,hS=_l.ReactCurrentOwner,ka=_l.ReactCurrentBatchConfig,mr=0,Zi=null,Ai=null,Qi=0,aa=0,Kd=bc(0),Fi=0,nm=null,Su=0,s0=0,fS=0,Ap=null,No=null,pS=0,gh=1/0,ol=null,yy=!1,Eb=null,hc=null,hv=!1,ic=null,_y=0,Rp=0,Cb=null,$v=-1,Fv=0;function Co(){return mr&6?wi():$v!==-1?$v:$v=wi()}function fc(e){return e.mode&1?mr&2&&Qi!==0?Qi&-Qi:rB.transition!==null?(Fv===0&&(Fv=pA()),Fv):(e=Dr,e!==0||(e=window.event,e=e===void 0?16:bA(e.type)),e):1}function hs(e,t,r,a){if(50<Rp)throw Rp=0,Cb=null,Error(Gt(185));mm(e,r,a),(!(mr&2)||e!==Zi)&&(e===Zi&&(!(mr&2)&&(s0|=r),Fi===4&&nc(e,Qi)),Wo(e,a),r===1&&mr===0&&!(t.mode&1)&&(gh=wi()+500,r0&&wc()))}function Wo(e,t){var r=e.callbackNode;rF(e,t);var a=ny(e,e===Zi?Qi:0);if(a===0)r!==null&&iT(r),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(r!=null&&iT(r),t===1)e.tag===0?nB(KT.bind(null,e)):NA(KT.bind(null,e)),JF(function(){!(mr&6)&&wc()}),r=null;else{switch(mA(a)){case 1:r=Nw;break;case 4:r=hA;break;case 16:r=ty;break;case 536870912:r=fA;break;default:r=ty}r=BR(r,OR.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function OR(e,t){if($v=-1,Fv=0,mr&6)throw Error(Gt(327));var r=e.callbackNode;if(ah()&&e.callbackNode!==r)return null;var a=ny(e,e===Zi?Qi:0);if(a===0)return null;if(a&30||a&e.expiredLanes||t)t=xy(e,a);else{t=a;var c=mr;mr|=2;var f=kR();(Zi!==e||Qi!==t)&&(ol=null,gh=wi()+500,mu(e,t));do try{SB();break}catch(l){zR(e,l)}while(1);Qw(),vy.current=f,mr=c,Ai!==null?t=0:(Zi=null,Qi=0,t=Fi)}if(t!==0){if(t===2&&(c=J1(e),c!==0&&(a=c,t=Tb(e,c))),t===1)throw r=nm,mu(e,0),nc(e,a),Wo(e,wi()),r;if(t===6)nc(e,a);else{if(c=e.current.alternate,!(a&30)&&!bB(c)&&(t=xy(e,a),t===2&&(f=J1(e),f!==0&&(a=f,t=Tb(e,f))),t===1))throw r=nm,mu(e,0),nc(e,a),Wo(e,wi()),r;switch(e.finishedWork=c,e.finishedLanes=a,t){case 0:case 1:throw Error(Gt(345));case 2:ru(e,No,ol);break;case 3:if(nc(e,a),(a&130023424)===a&&(t=pS+500-wi(),10<t)){if(ny(e,0)!==0)break;if(c=e.suspendedLanes,(c&a)!==a){Co(),e.pingedLanes|=e.suspendedLanes&c;break}e.timeoutHandle=ab(ru.bind(null,e,No,ol),t);break}ru(e,No,ol);break;case 4:if(nc(e,a),(a&4194240)===a)break;for(t=e.eventTimes,c=-1;0<a;){var y=31-ds(a);f=1<<y,y=t[y],y>c&&(c=y),a&=~f}if(a=c,a=wi()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*xB(a/1960))-a,10<a){e.timeoutHandle=ab(ru.bind(null,e,No,ol),a);break}ru(e,No,ol);break;case 5:ru(e,No,ol);break;default:throw Error(Gt(329))}}}return Wo(e,wi()),e.callbackNode===r?OR.bind(null,e):null}function Tb(e,t){var r=Ap;return e.current.memoizedState.isDehydrated&&(mu(e,t).flags|=256),e=xy(e,t),e!==2&&(t=No,No=r,t!==null&&Ib(t)),e}function Ib(e){No===null?No=e:No.push.apply(No,e)}function bB(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var a=0;a<r.length;a++){var c=r[a],f=c.getSnapshot;c=c.value;try{if(!ps(f(),c))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function nc(e,t){for(t&=~fS,t&=~s0,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-ds(t),a=1<<r;e[r]=-1,t&=~a}}function KT(e){if(mr&6)throw Error(Gt(327));ah();var t=ny(e,0);if(!(t&1))return Wo(e,wi()),null;var r=xy(e,t);if(e.tag!==0&&r===2){var a=J1(e);a!==0&&(t=a,r=Tb(e,a))}if(r===1)throw r=nm,mu(e,0),nc(e,t),Wo(e,wi()),r;if(r===6)throw Error(Gt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ru(e,No,ol),Wo(e,wi()),null}function mS(e,t){var r=mr;mr|=1;try{return e(t)}finally{mr=r,mr===0&&(gh=wi()+500,r0&&wc())}}function Eu(e){ic!==null&&ic.tag===0&&!(mr&6)&&ah();var t=mr;mr|=1;var r=ka.transition,a=Dr;try{if(ka.transition=null,Dr=1,e)return e()}finally{Dr=a,ka.transition=r,mr=t,!(mr&6)&&wc()}}function gS(){aa=Kd.current,ni(Kd)}function mu(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,YF(r)),Ai!==null)for(r=Ai.return;r!==null;){var a=r;switch(Kw(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&sy();break;case 3:ph(),ni(Ho),ni(yo),oS();break;case 5:iS(a);break;case 4:ph();break;case 13:ni(fi);break;case 19:ni(fi);break;case 10:eS(a.type._context);break;case 22:case 23:gS()}r=r.return}if(Zi=e,Ai=e=pc(e.current,null),Qi=aa=t,Fi=0,nm=null,fS=s0=Su=0,No=Ap=null,cu!==null){for(t=0;t<cu.length;t++)if(r=cu[t],a=r.interleaved,a!==null){r.interleaved=null;var c=a.next,f=r.pending;if(f!==null){var y=f.next;f.next=c,a.next=y}r.pending=a}cu=null}return e}function zR(e,t){do{var r=Ai;try{if(Qw(),kv.current=gy,my){for(var a=pi.memoizedState;a!==null;){var c=a.queue;c!==null&&(c.pending=null),a=a.next}my=!1}if(wu=0,qi=$i=pi=null,Mp=!1,Qp=0,hS.current=null,r===null||r.return===null){Fi=1,nm=t,Ai=null;break}e:{var f=e,y=r.return,l=r,w=t;if(t=Qi,l.flags|=32768,w!==null&&typeof w=="object"&&typeof w.then=="function"){var C=w,A=l,M=A.tag;if(!(A.mode&1)&&(M===0||M===11||M===15)){var k=A.alternate;k?(A.updateQueue=k.updateQueue,A.memoizedState=k.memoizedState,A.lanes=k.lanes):(A.updateQueue=null,A.memoizedState=null)}var N=$T(y);if(N!==null){N.flags&=-257,FT(N,y,l,f,t),N.mode&1&&DT(f,C,t),t=N,w=C;var D=t.updateQueue;if(D===null){var U=new Set;U.add(w),t.updateQueue=U}else D.add(w);break e}else{if(!(t&1)){DT(f,C,t),vS();break e}w=Error(Gt(426))}}else if(oi&&l.mode&1){var q=$T(y);if(q!==null){!(q.flags&65536)&&(q.flags|=256),FT(q,y,l,f,t),Yw(mh(w,l));break e}}f=w=mh(w,l),Fi!==4&&(Fi=2),Ap===null?Ap=[f]:Ap.push(f),f=y;do{switch(f.tag){case 3:f.flags|=65536,t&=-t,f.lanes|=t;var F=gR(f,w,t);PT(f,F);break e;case 1:l=w;var j=f.type,V=f.stateNode;if(!(f.flags&128)&&(typeof j.getDerivedStateFromError=="function"||V!==null&&typeof V.componentDidCatch=="function"&&(hc===null||!hc.has(V)))){f.flags|=65536,t&=-t,f.lanes|=t;var X=vR(f,l,t);PT(f,X);break e}}f=f.return}while(f!==null)}DR(r)}catch(te){t=te,Ai===r&&r!==null&&(Ai=r=r.return);continue}break}while(1)}function kR(){var e=vy.current;return vy.current=gy,e===null?gy:e}function vS(){(Fi===0||Fi===3||Fi===2)&&(Fi=4),Zi===null||!(Su&268435455)&&!(s0&268435455)||nc(Zi,Qi)}function xy(e,t){var r=mr;mr|=2;var a=kR();(Zi!==e||Qi!==t)&&(ol=null,mu(e,t));do try{wB();break}catch(c){zR(e,c)}while(1);if(Qw(),mr=r,vy.current=a,Ai!==null)throw Error(Gt(261));return Zi=null,Qi=0,Fi}function wB(){for(;Ai!==null;)LR(Ai)}function SB(){for(;Ai!==null&&!Z$();)LR(Ai)}function LR(e){var t=FR(e.alternate,e,aa);e.memoizedProps=e.pendingProps,t===null?DR(e):Ai=t,hS.current=null}function DR(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=gB(r,t),r!==null){r.flags&=32767,Ai=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Fi=6,Ai=null;return}}else if(r=mB(r,t,aa),r!==null){Ai=r;return}if(t=t.sibling,t!==null){Ai=t;return}Ai=t=e}while(t!==null);Fi===0&&(Fi=5)}function ru(e,t,r){var a=Dr,c=ka.transition;try{ka.transition=null,Dr=1,EB(e,t,r,a)}finally{ka.transition=c,Dr=a}return null}function EB(e,t,r,a){do ah();while(ic!==null);if(mr&6)throw Error(Gt(327));r=e.finishedWork;var c=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(Gt(177));e.callbackNode=null,e.callbackPriority=0;var f=r.lanes|r.childLanes;if(iF(e,f),e===Zi&&(Ai=Zi=null,Qi=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||hv||(hv=!0,BR(ty,function(){return ah(),null})),f=(r.flags&15990)!==0,r.subtreeFlags&15990||f){f=ka.transition,ka.transition=null;var y=Dr;Dr=1;var l=mr;mr|=4,hS.current=null,yB(e,r),AR(r,e),HF(ib),ry=!!rb,ib=rb=null,e.current=r,_B(r),X$(),mr=l,Dr=y,ka.transition=f}else e.current=r;if(hv&&(hv=!1,ic=e,_y=c),f=e.pendingLanes,f===0&&(hc=null),J$(r.stateNode),Wo(e,wi()),t!==null)for(a=e.onRecoverableError,r=0;r<t.length;r++)c=t[r],a(c.value,{componentStack:c.stack,digest:c.digest});if(yy)throw yy=!1,e=Eb,Eb=null,e;return _y&1&&e.tag!==0&&ah(),f=e.pendingLanes,f&1?e===Cb?Rp++:(Rp=0,Cb=e):Rp=0,wc(),null}function ah(){if(ic!==null){var e=mA(_y),t=ka.transition,r=Dr;try{if(ka.transition=null,Dr=16>e?16:e,ic===null)var a=!1;else{if(e=ic,ic=null,_y=0,mr&6)throw Error(Gt(331));var c=mr;for(mr|=4,pn=e.current;pn!==null;){var f=pn,y=f.child;if(pn.flags&16){var l=f.deletions;if(l!==null){for(var w=0;w<l.length;w++){var C=l[w];for(pn=C;pn!==null;){var A=pn;switch(A.tag){case 0:case 11:case 15:Pp(8,A,f)}var M=A.child;if(M!==null)M.return=A,pn=M;else for(;pn!==null;){A=pn;var k=A.sibling,N=A.return;if(IR(A),A===C){pn=null;break}if(k!==null){k.return=N,pn=k;break}pn=N}}}var D=f.alternate;if(D!==null){var U=D.child;if(U!==null){D.child=null;do{var q=U.sibling;U.sibling=null,U=q}while(U!==null)}}pn=f}}if(f.subtreeFlags&2064&&y!==null)y.return=f,pn=y;else e:for(;pn!==null;){if(f=pn,f.flags&2048)switch(f.tag){case 0:case 11:case 15:Pp(9,f,f.return)}var F=f.sibling;if(F!==null){F.return=f.return,pn=F;break e}pn=f.return}}var j=e.current;for(pn=j;pn!==null;){y=pn;var V=y.child;if(y.subtreeFlags&2064&&V!==null)V.return=y,pn=V;else e:for(y=j;pn!==null;){if(l=pn,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:a0(9,l)}}catch(te){vi(l,l.return,te)}if(l===y){pn=null;break e}var X=l.sibling;if(X!==null){X.return=l.return,pn=X;break e}pn=l.return}}if(mr=c,wc(),$s&&typeof $s.onPostCommitFiberRoot=="function")try{$s.onPostCommitFiberRoot(Jy,e)}catch{}a=!0}return a}finally{Dr=r,ka.transition=t}}return!1}function YT(e,t,r){t=mh(r,t),t=gR(e,t,1),e=dc(e,t,1),t=Co(),e!==null&&(mm(e,1,t),Wo(e,t))}function vi(e,t,r){if(e.tag===3)YT(e,e,r);else for(;t!==null;){if(t.tag===3){YT(t,e,r);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(hc===null||!hc.has(a))){e=mh(r,e),e=vR(t,e,1),t=dc(t,e,1),e=Co(),t!==null&&(mm(t,1,e),Wo(t,e));break}}t=t.return}}function CB(e,t,r){var a=e.pingCache;a!==null&&a.delete(t),t=Co(),e.pingedLanes|=e.suspendedLanes&r,Zi===e&&(Qi&r)===r&&(Fi===4||Fi===3&&(Qi&130023424)===Qi&&500>wi()-pS?mu(e,0):fS|=r),Wo(e,t)}function $R(e,t){t===0&&(e.mode&1?(t=nv,nv<<=1,!(nv&130023424)&&(nv=4194304)):t=1);var r=Co();e=ml(e,t),e!==null&&(mm(e,t,r),Wo(e,r))}function TB(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),$R(e,r)}function IB(e,t){var r=0;switch(e.tag){case 13:var a=e.stateNode,c=e.memoizedState;c!==null&&(r=c.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(Gt(314))}a!==null&&a.delete(t),$R(e,r)}var FR;FR=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ho.current)Uo=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Uo=!1,pB(e,t,r);Uo=!!(e.flags&131072)}else Uo=!1,oi&&t.flags&1048576&&jA(t,uy,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;Dv(e,t),e=t.pendingProps;var c=dh(t,yo.current);oh(t,r),c=sS(null,t,a,e,c,r);var f=lS();return t.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Go(a)?(f=!0,ly(t)):f=!1,t.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,nS(t),c.updater=i0,t.stateNode=c,c._reactInternals=t,fb(t,a,e,r),t=gb(null,t,a,!0,f,r)):(t.tag=0,oi&&f&&Xw(t),So(null,t,c,r),t=t.child),t;case 16:a=t.elementType;e:{switch(Dv(e,t),e=t.pendingProps,c=a._init,a=c(a._payload),t.type=a,c=t.tag=PB(a),e=is(a,e),c){case 0:t=mb(null,t,a,e,r);break e;case 1:t=jT(null,t,a,e,r);break e;case 11:t=BT(null,t,a,e,r);break e;case 14:t=NT(null,t,a,is(a.type,e),r);break e}throw Error(Gt(306,a,""))}return t;case 0:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:is(a,c),mb(e,t,a,c,r);case 1:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:is(a,c),jT(e,t,a,c,r);case 3:e:{if(bR(t),e===null)throw Error(Gt(387));a=t.pendingProps,f=t.memoizedState,c=f.element,GA(e,t),fy(t,a,null,r);var y=t.memoizedState;if(a=y.element,f.isDehydrated)if(f={element:a,isDehydrated:!1,cache:y.cache,pendingSuspenseBoundaries:y.pendingSuspenseBoundaries,transitions:y.transitions},t.updateQueue.baseState=f,t.memoizedState=f,t.flags&256){c=mh(Error(Gt(423)),t),t=UT(e,t,a,r,c);break e}else if(a!==c){c=mh(Error(Gt(424)),t),t=UT(e,t,a,r,c);break e}else for(sa=uc(t.stateNode.containerInfo.firstChild),ca=t,oi=!0,ls=null,r=XA(t,null,a,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(hh(),a===c){t=gl(e,t,r);break e}So(e,t,a,r)}t=t.child}return t;case 5:return KA(t),e===null&&ub(t),a=t.type,c=t.pendingProps,f=e!==null?e.memoizedProps:null,y=c.children,ob(a,c)?y=null:f!==null&&ob(a,f)&&(t.flags|=32),xR(e,t),So(e,t,y,r),t.child;case 6:return e===null&&ub(t),null;case 13:return wR(e,t,r);case 4:return rS(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=fh(t,null,a,r):So(e,t,a,r),t.child;case 11:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:is(a,c),BT(e,t,a,c,r);case 7:return So(e,t,t.pendingProps,r),t.child;case 8:return So(e,t,t.pendingProps.children,r),t.child;case 12:return So(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(a=t.type._context,c=t.pendingProps,f=t.memoizedProps,y=c.value,Jr(dy,a._currentValue),a._currentValue=y,f!==null)if(ps(f.value,y)){if(f.children===c.children&&!Ho.current){t=gl(e,t,r);break e}}else for(f=t.child,f!==null&&(f.return=t);f!==null;){var l=f.dependencies;if(l!==null){y=f.child;for(var w=l.firstContext;w!==null;){if(w.context===a){if(f.tag===1){w=ul(-1,r&-r),w.tag=2;var C=f.updateQueue;if(C!==null){C=C.shared;var A=C.pending;A===null?w.next=w:(w.next=A.next,A.next=w),C.pending=w}}f.lanes|=r,w=f.alternate,w!==null&&(w.lanes|=r),db(f.return,r,t),l.lanes|=r;break}w=w.next}}else if(f.tag===10)y=f.type===t.type?null:f.child;else if(f.tag===18){if(y=f.return,y===null)throw Error(Gt(341));y.lanes|=r,l=y.alternate,l!==null&&(l.lanes|=r),db(y,r,t),y=f.sibling}else y=f.child;if(y!==null)y.return=f;else for(y=f;y!==null;){if(y===t){y=null;break}if(f=y.sibling,f!==null){f.return=y.return,y=f;break}y=y.return}f=y}So(e,t,c.children,r),t=t.child}return t;case 9:return c=t.type,a=t.pendingProps.children,oh(t,r),c=Da(c),a=a(c),t.flags|=1,So(e,t,a,r),t.child;case 14:return a=t.type,c=is(a,t.pendingProps),c=is(a.type,c),NT(e,t,a,c,r);case 15:return yR(e,t,t.type,t.pendingProps,r);case 17:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:is(a,c),Dv(e,t),t.tag=1,Go(a)?(e=!0,ly(t)):e=!1,oh(t,r),qA(t,a,c),fb(t,a,c,r),gb(null,t,a,!0,e,r);case 19:return SR(e,t,r);case 22:return _R(e,t,r)}throw Error(Gt(156,t.tag))};function BR(e,t){return dA(e,t)}function MB(e,t,r,a){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function za(e,t,r,a){return new MB(e,t,r,a)}function yS(e){return e=e.prototype,!(!e||!e.isReactComponent)}function PB(e){if(typeof e=="function")return yS(e)?1:0;if(e!=null){if(e=e.$$typeof,e===$w)return 11;if(e===Fw)return 14}return 2}function pc(e,t){var r=e.alternate;return r===null?(r=za(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Bv(e,t,r,a,c,f){var y=2;if(a=e,typeof e=="function")yS(e)&&(y=1);else if(typeof e=="string")y=5;else e:switch(e){case Nd:return gu(r.children,c,f,t);case Dw:y=8,c|=8;break;case $1:return e=za(12,r,t,c|2),e.elementType=$1,e.lanes=f,e;case F1:return e=za(13,r,t,c),e.elementType=F1,e.lanes=f,e;case B1:return e=za(19,r,t,c),e.elementType=B1,e.lanes=f,e;case ZP:return l0(r,c,f,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case WP:y=10;break e;case qP:y=9;break e;case $w:y=11;break e;case Fw:y=14;break e;case Ql:y=16,a=null;break e}throw Error(Gt(130,e==null?e:typeof e,""))}return t=za(y,r,t,c),t.elementType=e,t.type=a,t.lanes=f,t}function gu(e,t,r,a){return e=za(7,e,a,t),e.lanes=r,e}function l0(e,t,r,a){return e=za(22,e,a,t),e.elementType=ZP,e.lanes=r,e.stateNode={isHidden:!1},e}function Wx(e,t,r){return e=za(6,e,null,t),e.lanes=r,e}function qx(e,t,r){return t=za(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function AB(e,t,r,a,c){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ix(0),this.expirationTimes=Ix(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ix(0),this.identifierPrefix=a,this.onRecoverableError=c,this.mutableSourceEagerHydrationData=null}function _S(e,t,r,a,c,f,y,l,w){return e=new AB(e,t,r,l,w),t===1?(t=1,f===!0&&(t|=8)):t=0,f=za(3,null,null,t),e.current=f,f.stateNode=e,f.memoizedState={element:a,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},nS(f),e}function RB(e,t,r){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Bd,key:a==null?null:""+a,children:e,containerInfo:t,implementation:r}}function NR(e){if(!e)return gc;e=e._reactInternals;e:{if(Mu(e)!==e||e.tag!==1)throw Error(Gt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Go(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Gt(171))}if(e.tag===1){var r=e.type;if(Go(r))return BA(e,r,t)}return t}function jR(e,t,r,a,c,f,y,l,w){return e=_S(r,a,!0,e,c,f,y,l,w),e.context=NR(null),r=e.current,a=Co(),c=fc(r),f=ul(a,c),f.callback=t??null,dc(r,f,c),e.current.lanes=c,mm(e,c,a),Wo(e,a),e}function c0(e,t,r,a){var c=t.current,f=Co(),y=fc(c);return r=NR(r),t.context===null?t.context=r:t.pendingContext=r,t=ul(f,y),t.payload={element:e},a=a===void 0?null:a,a!==null&&(t.callback=a),e=dc(c,t,y),e!==null&&(hs(e,c,y,f),zv(e,c,y)),y}function by(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function JT(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function xS(e,t){JT(e,t),(e=e.alternate)&&JT(e,t)}function OB(){return null}var UR=typeof reportError=="function"?reportError:function(e){console.error(e)};function bS(e){this._internalRoot=e}u0.prototype.render=bS.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Gt(409));c0(e,t,null,null)};u0.prototype.unmount=bS.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Eu(function(){c0(null,e,null,null)}),t[pl]=null}};function u0(e){this._internalRoot=e}u0.prototype.unstable_scheduleHydration=function(e){if(e){var t=yA();e={blockedOn:null,target:e,priority:t};for(var r=0;r<tc.length&&t!==0&&t<tc[r].priority;r++);tc.splice(r,0,e),r===0&&xA(e)}};function wS(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function d0(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function QT(){}function zB(e,t,r,a,c){if(c){if(typeof a=="function"){var f=a;a=function(){var C=by(y);f.call(C)}}var y=jR(t,a,e,0,null,!1,!1,"",QT);return e._reactRootContainer=y,e[pl]=y.current,Zp(e.nodeType===8?e.parentNode:e),Eu(),y}for(;c=e.lastChild;)e.removeChild(c);if(typeof a=="function"){var l=a;a=function(){var C=by(w);l.call(C)}}var w=_S(e,0,!1,null,null,!1,!1,"",QT);return e._reactRootContainer=w,e[pl]=w.current,Zp(e.nodeType===8?e.parentNode:e),Eu(function(){c0(t,w,r,a)}),w}function h0(e,t,r,a,c){var f=r._reactRootContainer;if(f){var y=f;if(typeof c=="function"){var l=c;c=function(){var w=by(y);l.call(w)}}c0(t,y,e,c)}else y=zB(r,t,e,c,a);return by(y)}gA=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=xp(t.pendingLanes);r!==0&&(jw(t,r|1),Wo(t,wi()),!(mr&6)&&(gh=wi()+500,wc()))}break;case 13:Eu(function(){var a=ml(e,1);if(a!==null){var c=Co();hs(a,e,1,c)}}),xS(e,1)}};Uw=function(e){if(e.tag===13){var t=ml(e,134217728);if(t!==null){var r=Co();hs(t,e,134217728,r)}xS(e,134217728)}};vA=function(e){if(e.tag===13){var t=fc(e),r=ml(e,t);if(r!==null){var a=Co();hs(r,e,t,a)}xS(e,t)}};yA=function(){return Dr};_A=function(e,t){var r=Dr;try{return Dr=e,t()}finally{Dr=r}};X1=function(e,t,r){switch(t){case"input":if(U1(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var a=r[t];if(a!==e&&a.form===e.form){var c=n0(a);if(!c)throw Error(Gt(90));KP(a),U1(a,c)}}}break;case"textarea":JP(e,r);break;case"select":t=r.value,t!=null&&th(e,!!r.multiple,t,!1)}};oA=mS;aA=Eu;var kB={usingClientEntryPoint:!1,Events:[vm,Hd,n0,rA,iA,mS]},cp={findFiberByHostInstance:lu,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},LB={bundleType:cp.bundleType,version:cp.version,rendererPackageName:cp.rendererPackageName,rendererConfig:cp.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_l.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=cA(e),e===null?null:e.stateNode},findFiberByHostInstance:cp.findFiberByHostInstance||OB,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fv.isDisabled&&fv.supportsFiber)try{Jy=fv.inject(LB),$s=fv}catch{}}ha.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kB;ha.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!wS(t))throw Error(Gt(200));return RB(e,t,null,r)};ha.createRoot=function(e,t){if(!wS(e))throw Error(Gt(299));var r=!1,a="",c=UR;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onRecoverableError!==void 0&&(c=t.onRecoverableError)),t=_S(e,1,!1,null,null,r,!1,a,c),e[pl]=t.current,Zp(e.nodeType===8?e.parentNode:e),new bS(t)};ha.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Gt(188)):(e=Object.keys(e).join(","),Error(Gt(268,e)));return e=cA(t),e=e===null?null:e.stateNode,e};ha.flushSync=function(e){return Eu(e)};ha.hydrate=function(e,t,r){if(!d0(t))throw Error(Gt(200));return h0(null,e,t,!0,r)};ha.hydrateRoot=function(e,t,r){if(!wS(e))throw Error(Gt(405));var a=r!=null&&r.hydratedSources||null,c=!1,f="",y=UR;if(r!=null&&(r.unstable_strictMode===!0&&(c=!0),r.identifierPrefix!==void 0&&(f=r.identifierPrefix),r.onRecoverableError!==void 0&&(y=r.onRecoverableError)),t=jR(t,null,e,1,r??null,c,!1,f,y),e[pl]=t.current,Zp(e),a)for(e=0;e<a.length;e++)r=a[e],c=r._getVersion,c=c(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,c]:t.mutableSourceEagerHydrationData.push(r,c);return new u0(t)};ha.render=function(e,t,r){if(!d0(t))throw Error(Gt(200));return h0(null,e,t,!1,r)};ha.unmountComponentAtNode=function(e){if(!d0(e))throw Error(Gt(40));return e._reactRootContainer?(Eu(function(){h0(null,null,e,!1,function(){e._reactRootContainer=null,e[pl]=null})}),!0):!1};ha.unstable_batchedUpdates=mS;ha.unstable_renderSubtreeIntoContainer=function(e,t,r,a){if(!d0(r))throw Error(Gt(200));if(e==null||e._reactInternals===void 0)throw Error(Gt(38));return h0(e,t,r,!1,a)};ha.version="18.2.0-next-9e3b772b8-20220608";function VR(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(VR)}catch(e){console.error(e)}}VR(),jP.exports=ha;var vc=jP.exports;const HR=_c(vc),DB=EP({__proto__:null,default:HR},[vc]);function wy(e){return e instanceof HTMLElement||e instanceof SVGElement}function Op(e){return wy(e)?e:e instanceof st.Component?HR.findDOMNode(e):null}function f0(e,t,r){var a=T.useRef({});return(!("value"in a.current)||r(a.current.condition,t))&&(a.current.value=e(),a.current.condition=t),a.current.value}function SS(e,t){typeof e=="function"?e(t):Kn(e)==="object"&&e&&"current"in e&&(e.current=t)}function gs(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var a=t.filter(function(c){return c});return a.length<=1?a[0]:function(c){t.forEach(function(f){SS(f,c)})}}function p0(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return f0(function(){return gs.apply(void 0,t)},t,function(a,c){return a.length!==c.length||a.every(function(f,y){return f!==c[y]})})}function _m(e){var t,r,a=FP.isMemo(e)?e.type.type:e.type;return!(typeof a=="function"&&!((t=a.prototype)!==null&&t!==void 0&&t.render)||typeof e=="function"&&!((r=e.prototype)!==null&&r!==void 0&&r.render))}var Mb=T.createContext(null);function $B(e){var t=e.children,r=e.onBatchResize,a=T.useRef(0),c=T.useRef([]),f=T.useContext(Mb),y=T.useCallback(function(l,w,C){a.current+=1;var A=a.current;c.current.push({size:l,element:w,data:C}),Promise.resolve().then(function(){A===a.current&&(r==null||r(c.current),c.current=[])}),f==null||f(l,w,C)},[r,f]);return T.createElement(Mb.Provider,{value:y},t)}var GR=function(){if(typeof Map<"u")return Map;function e(t,r){var a=-1;return t.some(function(c,f){return c[0]===r?(a=f,!0):!1}),a}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(r){var a=e(this.__entries__,r),c=this.__entries__[a];return c&&c[1]},t.prototype.set=function(r,a){var c=e(this.__entries__,r);~c?this.__entries__[c][1]=a:this.__entries__.push([r,a])},t.prototype.delete=function(r){var a=this.__entries__,c=e(a,r);~c&&a.splice(c,1)},t.prototype.has=function(r){return!!~e(this.__entries__,r)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(r,a){a===void 0&&(a=null);for(var c=0,f=this.__entries__;c<f.length;c++){var y=f[c];r.call(a,y[1],y[0])}},t}()}(),Pb=typeof window<"u"&&typeof document<"u"&&window.document===document,Sy=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),FB=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(Sy):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)}}(),BB=2;function NB(e,t){var r=!1,a=!1,c=0;function f(){r&&(r=!1,e()),a&&l()}function y(){FB(f)}function l(){var w=Date.now();if(r){if(w-c<BB)return;a=!0}else r=!0,a=!1,setTimeout(y,t);c=w}return l}var jB=20,UB=["top","right","bottom","left","width","height","size","weight"],VB=typeof MutationObserver<"u",HB=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=NB(this.refresh.bind(this),jB)}return e.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},e.prototype.removeObserver=function(t){var r=this.observers_,a=r.indexOf(t);~a&&r.splice(a,1),!r.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){var t=this.updateObservers_();t&&this.refresh()},e.prototype.updateObservers_=function(){var t=this.observers_.filter(function(r){return r.gatherActive(),r.hasActive()});return t.forEach(function(r){return r.broadcastActive()}),t.length>0},e.prototype.connect_=function(){!Pb||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),VB?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){!Pb||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(t){var r=t.propertyName,a=r===void 0?"":r,c=UB.some(function(f){return!!~a.indexOf(f)});c&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),WR=function(e,t){for(var r=0,a=Object.keys(t);r<a.length;r++){var c=a[r];Object.defineProperty(e,c,{value:t[c],enumerable:!1,writable:!1,configurable:!0})}return e},vh=function(e){var t=e&&e.ownerDocument&&e.ownerDocument.defaultView;return t||Sy},qR=m0(0,0,0,0);function Ey(e){return parseFloat(e)||0}function eI(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return t.reduce(function(a,c){var f=e["border-"+c+"-width"];return a+Ey(f)},0)}function GB(e){for(var t=["top","right","bottom","left"],r={},a=0,c=t;a<c.length;a++){var f=c[a],y=e["padding-"+f];r[f]=Ey(y)}return r}function WB(e){var t=e.getBBox();return m0(0,0,t.width,t.height)}function qB(e){var t=e.clientWidth,r=e.clientHeight;if(!t&&!r)return qR;var a=vh(e).getComputedStyle(e),c=GB(a),f=c.left+c.right,y=c.top+c.bottom,l=Ey(a.width),w=Ey(a.height);if(a.boxSizing==="border-box"&&(Math.round(l+f)!==t&&(l-=eI(a,"left","right")+f),Math.round(w+y)!==r&&(w-=eI(a,"top","bottom")+y)),!XB(e)){var C=Math.round(l+f)-t,A=Math.round(w+y)-r;Math.abs(C)!==1&&(l-=C),Math.abs(A)!==1&&(w-=A)}return m0(c.left,c.top,l,w)}var ZB=function(){return typeof SVGGraphicsElement<"u"?function(e){return e instanceof vh(e).SVGGraphicsElement}:function(e){return e instanceof vh(e).SVGElement&&typeof e.getBBox=="function"}}();function XB(e){return e===vh(e).document.documentElement}function KB(e){return Pb?ZB(e)?WB(e):qB(e):qR}function YB(e){var t=e.x,r=e.y,a=e.width,c=e.height,f=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,y=Object.create(f.prototype);return WR(y,{x:t,y:r,width:a,height:c,top:r,right:t+a,bottom:c+r,left:t}),y}function m0(e,t,r,a){return{x:e,y:t,width:r,height:a}}var JB=function(){function e(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=m0(0,0,0,0),this.target=t}return e.prototype.isActive=function(){var t=KB(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},e}(),QB=function(){function e(t,r){var a=YB(r);WR(this,{target:t,contentRect:a})}return e}(),e4=function(){function e(t,r,a){if(this.activeObservations_=[],this.observations_=new GR,typeof t!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=r,this.callbackCtx_=a}return e.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(t instanceof vh(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var r=this.observations_;r.has(t)||(r.set(t,new JB(t)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(t instanceof vh(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var r=this.observations_;r.has(t)&&(r.delete(t),r.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(r){r.isActive()&&t.activeObservations_.push(r)})},e.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,r=this.activeObservations_.map(function(a){return new QB(a.target,a.broadcastRect())});this.callback_.call(t,r,t),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),ZR=typeof WeakMap<"u"?new WeakMap:new GR,XR=function(){function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var r=HB.getInstance(),a=new e4(t,r,this);ZR.set(this,a)}return e}();["observe","unobserve","disconnect"].forEach(function(e){XR.prototype[e]=function(){var t;return(t=ZR.get(this))[e].apply(t,arguments)}});var t4=function(){return typeof Sy.ResizeObserver<"u"?Sy.ResizeObserver:XR}(),oc=new Map;function n4(e){e.forEach(function(t){var r,a=t.target;(r=oc.get(a))===null||r===void 0||r.forEach(function(c){return c(a)})})}var KR=new t4(n4);function r4(e,t){oc.has(e)||(oc.set(e,new Set),KR.observe(e)),oc.get(e).add(t)}function i4(e,t){oc.has(e)&&(oc.get(e).delete(t),oc.get(e).size||(KR.unobserve(e),oc.delete(e)))}function qo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tI(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,NP(a.key),a)}}function Zo(e,t,r){return t&&tI(e.prototype,t),r&&tI(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ab(e,t){return Ab=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,c){return a.__proto__=c,a},Ab(e,t)}function Pu(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ab(e,t)}function Cy(e){return Cy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Cy(e)}function o4(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function vn(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a4(e,t){if(t&&(Kn(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vn(e)}function Au(e){var t=o4();return function(){var a=Cy(e),c;if(t){var f=Cy(this).constructor;c=Reflect.construct(a,arguments,f)}else c=a.apply(this,arguments);return a4(this,c)}}var s4=function(e){Pu(r,e);var t=Au(r);function r(){return qo(this,r),t.apply(this,arguments)}return Zo(r,[{key:"render",value:function(){return this.props.children}}]),r}(T.Component);function l4(e,t){var r=e.children,a=e.disabled,c=T.useRef(null),f=T.useRef(null),y=T.useContext(Mb),l=typeof r=="function",w=l?r(c):r,C=T.useRef({width:-1,height:-1,offsetWidth:-1,offsetHeight:-1}),A=!l&&T.isValidElement(w)&&_m(w),M=A?w.ref:null,k=p0(M,c),N=function(){var F;return Op(c.current)||(c.current&&Kn(c.current)==="object"?Op((F=c.current)===null||F===void 0?void 0:F.nativeElement):null)||Op(f.current)};T.useImperativeHandle(t,function(){return N()});var D=T.useRef(e);D.current=e;var U=T.useCallback(function(q){var F=D.current,j=F.onResize,V=F.data,X=q.getBoundingClientRect(),te=X.width,re=X.height,Q=q.offsetWidth,ne=q.offsetHeight,ee=Math.floor(te),me=Math.floor(re);if(C.current.width!==ee||C.current.height!==me||C.current.offsetWidth!==Q||C.current.offsetHeight!==ne){var ce={width:ee,height:me,offsetWidth:Q,offsetHeight:ne};C.current=ce;var ie=Q===Math.round(te)?te:Q,fe=ne===Math.round(re)?re:ne,Te=lt(lt({},ce),{},{offsetWidth:ie,offsetHeight:fe});y==null||y(Te,q,V),j&&Promise.resolve().then(function(){j(Te,q)})}},[]);return T.useEffect(function(){var q=N();return q&&!a&&r4(q,U),function(){return i4(q,U)}},[c.current,a]),T.createElement(s4,{ref:f},A?T.cloneElement(w,{ref:k}):w)}var c4=T.forwardRef(l4),u4="rc-observer-key";function d4(e,t){var r=e.children,a=typeof r=="function"?[r]:hl(r);return a.map(function(c,f){var y=(c==null?void 0:c.key)||"".concat(u4,"-").concat(f);return T.createElement(c4,Cn({},e,{key:y,ref:f===0?t:void 0}),c)})}var xl=T.forwardRef(d4);xl.Collection=$B;function Sc(e,t){var r=lt({},e);return Array.isArray(t)&&t.forEach(function(a){delete r[a]}),r}function Rb(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function h4(e){if(Array.isArray(e))return Rb(e)}function YR(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function ES(e,t){if(e){if(typeof e=="string")return Rb(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Rb(e,t)}}function f4(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mn(e){return h4(e)||YR(e)||ES(e)||f4()}var JR=function(t){return+setTimeout(t,16)},QR=function(t){return clearTimeout(t)};typeof window<"u"&&"requestAnimationFrame"in window&&(JR=function(t){return window.requestAnimationFrame(t)},QR=function(t){return window.cancelAnimationFrame(t)});var nI=0,CS=new Map;function eO(e){CS.delete(e)}var tO=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;nI+=1;var a=nI;function c(f){if(f===0)eO(a),t();else{var y=JR(function(){c(f-1)});CS.set(a,y)}}return c(r),a};tO.cancel=function(e){var t=CS.get(e);return eO(e),QR(t)};const yi=tO;function TS(e){for(var t=0,r,a=0,c=e.length;c>=4;++a,c-=4)r=e.charCodeAt(a)&255|(e.charCodeAt(++a)&255)<<8|(e.charCodeAt(++a)&255)<<16|(e.charCodeAt(++a)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,t=(r&65535)*1540483477+((r>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(c){case 3:t^=(e.charCodeAt(a+2)&255)<<16;case 2:t^=(e.charCodeAt(a+1)&255)<<8;case 1:t^=e.charCodeAt(a)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}function p4(e,t){if(e==null)return{};var r={},a=Object.keys(e),c,f;for(f=0;f<a.length;f++)c=a[f],!(t.indexOf(c)>=0)&&(r[c]=e[c]);return r}function Vr(e,t){if(e==null)return{};var r=p4(e,t),a,c;if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(e);for(c=0;c<f.length;c++)a=f[c],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function nO(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=new Set;function c(f,y){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,w=a.has(f);if(Vo(!w,"Warning: There may be circular references"),w)return!1;if(f===y)return!0;if(r&&l>1)return!1;a.add(f);var C=l+1;if(Array.isArray(f)){if(!Array.isArray(y)||f.length!==y.length)return!1;for(var A=0;A<f.length;A++)if(!c(f[A],y[A],C))return!1;return!0}if(f&&y&&Kn(f)==="object"&&Kn(y)==="object"){var M=Object.keys(f);return M.length!==Object.keys(y).length?!1:M.every(function(k){return c(f[k],y[k],C)})}return!1}return c(e,t)}var rI="%",m4=function(){function e(t){qo(this,e),De(this,"instanceId",void 0),De(this,"cache",new Map),this.instanceId=t}return Zo(e,[{key:"get",value:function(r){return this.cache.get(r.join(rI))||null}},{key:"update",value:function(r,a){var c=r.join(rI),f=this.cache.get(c),y=a(f);y===null?this.cache.delete(c):this.cache.set(c,y)}}]),e}(),Ob="data-token-hash",vu="data-css-hash",Yd="__cssinjs_instance__";function g4(){var e=Math.random().toString(12).slice(2);if(typeof document<"u"&&document.head&&document.body){var t=document.body.querySelectorAll("style[".concat(vu,"]"))||[],r=document.head.firstChild;Array.from(t).forEach(function(c){c[Yd]=c[Yd]||e,c[Yd]===e&&document.head.insertBefore(c,r)});var a={};Array.from(document.querySelectorAll("style[".concat(vu,"]"))).forEach(function(c){var f=c.getAttribute(vu);if(a[f]){if(c[Yd]===e){var y;(y=c.parentNode)===null||y===void 0||y.removeChild(c)}}else a[f]=!0})}return new m4(e)}var IS=T.createContext({hashPriority:"low",cache:g4(),defaultCache:!0});function no(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function v4(e,t){if(!e)return!1;if(e.contains)return e.contains(t);for(var r=t;r;){if(r===e)return!0;r=r.parentNode}return!1}var iI="data-rc-order",oI="data-rc-priority",y4="rc-util-key",zb=new Map;function rO(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.mark;return t?t.startsWith("data-")?t:"data-".concat(t):y4}function g0(e){if(e.attachTo)return e.attachTo;var t=document.querySelector("head");return t||document.body}function _4(e){return e==="queue"?"prependQueue":e?"prepend":"append"}function iO(e){return Array.from((zb.get(e)||e).children).filter(function(t){return t.tagName==="STYLE"})}function oO(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!no())return null;var r=t.csp,a=t.prepend,c=t.priority,f=c===void 0?0:c,y=_4(a),l=y==="prependQueue",w=document.createElement("style");w.setAttribute(iI,y),l&&f&&w.setAttribute(oI,"".concat(f)),r!=null&&r.nonce&&(w.nonce=r==null?void 0:r.nonce),w.innerHTML=e;var C=g0(t),A=C.firstChild;if(a){if(l){var M=iO(C).filter(function(k){if(!["prepend","prependQueue"].includes(k.getAttribute(iI)))return!1;var N=Number(k.getAttribute(oI)||0);return f>=N});if(M.length)return C.insertBefore(w,M[M.length-1].nextSibling),w}C.insertBefore(w,A)}else C.appendChild(w);return w}function aO(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=g0(t);return iO(r).find(function(a){return a.getAttribute(rO(t))===e})}function Ty(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=aO(e,t);if(r){var a=g0(t);a.removeChild(r)}}function x4(e,t){var r=zb.get(e);if(!r||!v4(document,r)){var a=oO("",t),c=a.parentNode;zb.set(e,c),e.removeChild(a)}}function yh(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=g0(r);x4(a,r);var c=aO(t,r);if(c){var f,y;if((f=r.csp)!==null&&f!==void 0&&f.nonce&&c.nonce!==((y=r.csp)===null||y===void 0?void 0:y.nonce)){var l;c.nonce=(l=r.csp)===null||l===void 0?void 0:l.nonce}return c.innerHTML!==e&&(c.innerHTML=e),c}var w=oO(e,r);return w.setAttribute(rO(r),t),w}function sO(e){if(Array.isArray(e))return e}function b4(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,c,f,y,l=[],w=!0,C=!1;try{if(f=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;w=!1}else for(;!(w=(a=f.call(r)).done)&&(l.push(a.value),l.length!==t);w=!0);}catch(A){C=!0,c=A}finally{try{if(!w&&r.return!=null&&(y=r.return(),Object(y)!==y))return}finally{if(C)throw c}}return l}}function lO(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ut(e,t){return sO(e)||b4(e,t)||ES(e,t)||lO()}function w4(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}var MS=function(){function e(){qo(this,e),De(this,"cache",void 0),De(this,"keys",void 0),De(this,"cacheCallTimes",void 0),this.cache=new Map,this.keys=[],this.cacheCallTimes=0}return Zo(e,[{key:"size",value:function(){return this.keys.length}},{key:"internalGet",value:function(r){var a,c,f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,y={map:this.cache};return r.forEach(function(l){if(!y)y=void 0;else{var w,C;y=(w=y)===null||w===void 0||(C=w.map)===null||C===void 0?void 0:C.get(l)}}),(a=y)!==null&&a!==void 0&&a.value&&f&&(y.value[1]=this.cacheCallTimes++),(c=y)===null||c===void 0?void 0:c.value}},{key:"get",value:function(r){var a;return(a=this.internalGet(r,!0))===null||a===void 0?void 0:a[0]}},{key:"has",value:function(r){return!!this.internalGet(r)}},{key:"set",value:function(r,a){var c=this;if(!this.has(r)){if(this.size()+1>e.MAX_CACHE_SIZE+e.MAX_CACHE_OFFSET){var f=this.keys.reduce(function(C,A){var M=Ut(C,2),k=M[1];return c.internalGet(A)[1]<k?[A,c.internalGet(A)[1]]:C},[this.keys[0],this.cacheCallTimes]),y=Ut(f,1),l=y[0];this.delete(l)}this.keys.push(r)}var w=this.cache;r.forEach(function(C,A){if(A===r.length-1)w.set(C,{value:[a,c.cacheCallTimes++]});else{var M=w.get(C);M?M.map||(M.map=new Map):w.set(C,{map:new Map}),w=w.get(C).map}})}},{key:"deleteByPath",value:function(r,a){var c=r.get(a[0]);if(a.length===1){var f;return c.map?r.set(a[0],{map:c.map}):r.delete(a[0]),(f=c.value)===null||f===void 0?void 0:f[0]}var y=this.deleteByPath(c.map,a.slice(1));return(!c.map||c.map.size===0)&&!c.value&&r.delete(a[0]),y}},{key:"delete",value:function(r){if(this.has(r))return this.keys=this.keys.filter(function(a){return!w4(a,r)}),this.deleteByPath(this.cache,r)}}]),e}();De(MS,"MAX_CACHE_SIZE",20);De(MS,"MAX_CACHE_OFFSET",5);var aI=0,cO=function(){function e(t){qo(this,e),De(this,"derivatives",void 0),De(this,"id",void 0),this.derivatives=Array.isArray(t)?t:[t],this.id=aI,t.length===0&&(t.length>0,void 0),aI+=1}return Zo(e,[{key:"getDerivativeToken",value:function(r){return this.derivatives.reduce(function(a,c){return c(r,a)},void 0)}}]),e}(),Zx=new MS;function kb(e){var t=Array.isArray(e)?e:[e];return Zx.has(t)||Zx.set(t,new cO(t)),Zx.get(t)}var S4=new WeakMap,Xx={};function E4(e,t){for(var r=S4,a=0;a<t.length;a+=1){var c=t[a];r.has(c)||r.set(c,new WeakMap),r=r.get(c)}return r.has(Xx)||r.set(Xx,e()),r.get(Xx)}var sI=new WeakMap;function Iy(e){var t=sI.get(e)||"";return t||(Object.keys(e).forEach(function(r){var a=e[r];t+=r,a instanceof cO?t+=a.id:a&&Kn(a)==="object"?t+=Iy(a):t+=a}),sI.set(e,t)),t}function C4(e,t){return TS("".concat(t,"_").concat(Iy(e)))}var zp="random-".concat(Date.now(),"-").concat(Math.random()).replace(/\./g,""),uO="_bAmBoO_";function T4(e,t,r){if(no()){var a,c;yh(e,zp);var f=document.createElement("div");f.style.position="fixed",f.style.left="0",f.style.top="0",t==null||t(f),document.body.appendChild(f);var y=r?r(f):(a=getComputedStyle(f).content)===null||a===void 0?void 0:a.includes(uO);return(c=f.parentNode)===null||c===void 0||c.removeChild(f),Ty(zp),y}return!1}var Kx=void 0;function I4(){return Kx===void 0&&(Kx=T4("@layer ".concat(zp," { .").concat(zp,' { content: "').concat(uO,'"!important; } }'),function(e){e.className=zp})),Kx}var lI=no()?T.useLayoutEffect:T.useEffect,Lr=function(t,r){var a=T.useRef(!0);lI(function(){return t(a.current)},r),lI(function(){return a.current=!1,function(){a.current=!0}},[])},cI=function(t,r){Lr(function(a){if(!a)return t()},r)},M4=lt({},jy),uI=M4.useInsertionEffect,P4=function(t,r,a){T.useMemo(t,a),Lr(function(){return r(!0)},a)},A4=uI?function(e,t,r){return uI(function(){return e(),t()},r)}:P4,R4=lt({},jy),O4=R4.useInsertionEffect,z4=function(t){var r=[],a=!1;function c(f){a||r.push(f)}return T.useEffect(function(){return a=!1,function(){a=!0,r.length&&r.forEach(function(f){return f()})}},t),c},k4=function(){return function(t){t()}},L4=typeof O4<"u"?z4:k4;function dO(e,t,r,a,c){var f=T.useContext(IS),y=f.cache,l=[e].concat(mn(t)),w=l.join("_"),C=L4([w]),A=function(D){y.update(l,function(U){var q=U||[],F=Ut(q,2),j=F[0],V=j===void 0?0:j,X=F[1],te=X,re=te||r(),Q=[V,re];return D?D(Q):Q})};T.useMemo(function(){A()},[w]);var M=y.get(l),k=M[1];return A4(function(){c==null||c(k)},function(N){return A(function(D){var U=Ut(D,2),q=U[0],F=U[1];return N&&q===0&&(c==null||c(k)),[q+1,F]}),function(){y.update(l,function(D){var U=D||[],q=Ut(U,2),F=q[0],j=F===void 0?0:F,V=q[1],X=j-1;return X===0?(C(function(){return a==null?void 0:a(V,!1)}),null):[j-1,V]})}},[w]),k}var D4={},$4="css",au=new Map;function F4(e){au.set(e,(au.get(e)||0)+1)}function B4(e,t){if(typeof document<"u"){var r=document.querySelectorAll("style[".concat(Ob,'="').concat(e,'"]'));r.forEach(function(a){if(a[Yd]===t){var c;(c=a.parentNode)===null||c===void 0||c.removeChild(a)}})}}var N4=0;function j4(e,t){au.set(e,(au.get(e)||0)-1);var r=Array.from(au.keys()),a=r.filter(function(c){var f=au.get(c)||0;return f<=0});r.length-a.length>N4&&a.forEach(function(c){B4(c,t),au.delete(c)})}var U4=function(t,r,a,c){var f=a.getDerivativeToken(t),y=lt(lt({},f),r);return c&&(y=c(y)),y};function V4(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=T.useContext(IS),c=a.cache.instanceId,f=r.salt,y=f===void 0?"":f,l=r.override,w=l===void 0?D4:l,C=r.formatToken,A=r.getComputedToken,M=E4(function(){return Object.assign.apply(Object,[{}].concat(mn(t)))},t),k=Iy(M),N=Iy(w),D=dO("token",[y,e.id,k,N],function(){var U=A?A(M,w,e):U4(M,w,e,C),q=C4(U,y);U._tokenKey=q,F4(q);var F="".concat($4,"-").concat(TS(q));return U._hashId=F,[U,F]},function(U){j4(U[0]._tokenKey,c)});return D}var H4={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},hO="comm",fO="rule",pO="decl",G4="@import",W4="@keyframes",q4="@layer",Z4=Math.abs,PS=String.fromCharCode;function mO(e){return e.trim()}function Nv(e,t,r){return e.replace(t,r)}function X4(e,t){return e.indexOf(t)}function rm(e,t){return e.charCodeAt(t)|0}function im(e,t,r){return e.slice(t,r)}function sl(e){return e.length}function K4(e){return e.length}function pv(e,t){return t.push(e),e}var v0=1,_h=1,gO=0,Fa=0,Pi=0,Mh="";function AS(e,t,r,a,c,f,y,l){return{value:e,root:t,parent:r,type:a,props:c,children:f,line:v0,column:_h,length:y,return:"",siblings:l}}function Y4(){return Pi}function J4(){return Pi=Fa>0?rm(Mh,--Fa):0,_h--,Pi===10&&(_h=1,v0--),Pi}function fs(){return Pi=Fa<gO?rm(Mh,Fa++):0,_h++,Pi===10&&(_h=1,v0++),Pi}function yu(){return rm(Mh,Fa)}function jv(){return Fa}function y0(e,t){return im(Mh,e,t)}function Lb(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Q4(e){return v0=_h=1,gO=sl(Mh=e),Fa=0,[]}function e5(e){return Mh="",e}function Yx(e){return mO(y0(Fa-1,Db(e===91?e+2:e===40?e+1:e)))}function t5(e){for(;(Pi=yu())&&Pi<33;)fs();return Lb(e)>2||Lb(Pi)>3?"":" "}function n5(e,t){for(;--t&&fs()&&!(Pi<48||Pi>102||Pi>57&&Pi<65||Pi>70&&Pi<97););return y0(e,jv()+(t<6&&yu()==32&&fs()==32))}function Db(e){for(;fs();)switch(Pi){case e:return Fa;case 34:case 39:e!==34&&e!==39&&Db(Pi);break;case 40:e===41&&Db(e);break;case 92:fs();break}return Fa}function r5(e,t){for(;fs()&&e+Pi!==47+10;)if(e+Pi===42+42&&yu()===47)break;return"/*"+y0(t,Fa-1)+"*"+PS(e===47?e:fs())}function i5(e){for(;!Lb(yu());)fs();return y0(e,Fa)}function o5(e){return e5(Uv("",null,null,null,[""],e=Q4(e),0,[0],e))}function Uv(e,t,r,a,c,f,y,l,w){for(var C=0,A=0,M=y,k=0,N=0,D=0,U=1,q=1,F=1,j=0,V="",X=c,te=f,re=a,Q=V;q;)switch(D=j,j=fs()){case 40:if(D!=108&&rm(Q,M-1)==58){X4(Q+=Nv(Yx(j),"&","&\f"),"&\f")!=-1&&(F=-1);break}case 34:case 39:case 91:Q+=Yx(j);break;case 9:case 10:case 13:case 32:Q+=t5(D);break;case 92:Q+=n5(jv()-1,7);continue;case 47:switch(yu()){case 42:case 47:pv(a5(r5(fs(),jv()),t,r,w),w);break;default:Q+="/"}break;case 123*U:l[C++]=sl(Q)*F;case 125*U:case 59:case 0:switch(j){case 0:case 125:q=0;case 59+A:F==-1&&(Q=Nv(Q,/\f/g,"")),N>0&&sl(Q)-M&&pv(N>32?hI(Q+";",a,r,M-1,w):hI(Nv(Q," ","")+";",a,r,M-2,w),w);break;case 59:Q+=";";default:if(pv(re=dI(Q,t,r,C,A,c,l,V,X=[],te=[],M,f),f),j===123)if(A===0)Uv(Q,t,re,re,X,f,M,l,te);else switch(k===99&&rm(Q,3)===110?100:k){case 100:case 108:case 109:case 115:Uv(e,re,re,a&&pv(dI(e,re,re,0,0,c,l,V,c,X=[],M,te),te),c,te,M,l,a?X:te);break;default:Uv(Q,re,re,re,[""],te,0,l,te)}}C=A=N=0,U=F=1,V=Q="",M=y;break;case 58:M=1+sl(Q),N=D;default:if(U<1){if(j==123)--U;else if(j==125&&U++==0&&J4()==125)continue}switch(Q+=PS(j),j*U){case 38:F=A>0?1:(Q+="\f",-1);break;case 44:l[C++]=(sl(Q)-1)*F,F=1;break;case 64:yu()===45&&(Q+=Yx(fs())),k=yu(),A=M=sl(V=Q+=i5(jv())),j++;break;case 45:D===45&&sl(Q)==2&&(U=0)}}return f}function dI(e,t,r,a,c,f,y,l,w,C,A,M){for(var k=c-1,N=c===0?f:[""],D=K4(N),U=0,q=0,F=0;U<a;++U)for(var j=0,V=im(e,k+1,k=Z4(q=y[U])),X=e;j<D;++j)(X=mO(q>0?N[j]+" "+V:Nv(V,/&\f/g,N[j])))&&(w[F++]=X);return AS(e,t,r,c===0?fO:l,w,C,A,M)}function a5(e,t,r,a){return AS(e,t,r,hO,PS(Y4()),im(e,2,-2),0,a)}function hI(e,t,r,a,c){return AS(e,t,r,pO,im(e,0,a),im(e,a+1,-1),a,c)}function $b(e,t){for(var r="",a=0;a<e.length;a++)r+=t(e[a],a,e,t)||"";return r}function s5(e,t,r,a){switch(e.type){case q4:if(e.children.length)break;case G4:case pO:return e.return=e.return||e.value;case hO:return"";case W4:return e.return=e.value+"{"+$b(e.children,a)+"}";case fO:if(!sl(e.value=e.props.join(",")))return""}return sl(r=$b(e.children,a))?e.return=e.value+"{"+r+"}":""}var fI="data-ant-cssinjs-cache-path",vO="_FILE_STYLE__",_u,yO=!0;function l5(){if(!_u&&(_u={},no())){var e=document.createElement("div");e.className=fI,e.style.position="fixed",e.style.visibility="hidden",e.style.top="-9999px",document.body.appendChild(e);var t=getComputedStyle(e).content||"";t=t.replace(/^"/,"").replace(/"$/,""),t.split(";").forEach(function(c){var f=c.split(":"),y=Ut(f,2),l=y[0],w=y[1];_u[l]=w});var r=document.querySelector("style[".concat(fI,"]"));if(r){var a;yO=!1,(a=r.parentNode)===null||a===void 0||a.removeChild(r)}document.body.removeChild(e)}}function c5(e){return l5(),!!_u[e]}function u5(e){var t=_u[e],r=null;if(t&&no())if(yO)r=vO;else{var a=document.querySelector("style[".concat(vu,'="').concat(_u[e],'"]'));a?r=a.innerHTML:delete _u[e]}return[r,t]}var pI=no(),d5="_skip_check_",_O="_multi_value_";function mI(e){var t=$b(o5(e),s5);return t.replace(/\{%%%\:[^;];}/g,";")}function h5(e){return Kn(e)==="object"&&e&&(d5 in e||_O in e)}function f5(e,t,r){if(!t)return e;var a=".".concat(t),c=r==="low"?":where(".concat(a,")"):a,f=e.split(",").map(function(y){var l,w=y.trim().split(/\s+/),C=w[0]||"",A=((l=C.match(/^\w+/))===null||l===void 0?void 0:l[0])||"";return C="".concat(A).concat(c).concat(C.slice(A.length)),[C].concat(mn(w.slice(1))).join(" ")});return f.join(",")}var p5=function e(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{root:!0,parentSelectors:[]},c=a.root,f=a.injectHash,y=a.parentSelectors,l=r.hashId,w=r.layer;r.path;var C=r.hashPriority,A=r.transformers,M=A===void 0?[]:A;r.linters;var k="",N={};function D(V){var X=V.getName(l);if(!N[X]){var te=e(V.style,r,{root:!1,parentSelectors:y}),re=Ut(te,1),Q=re[0];N[X]="@keyframes ".concat(V.getName(l)).concat(Q)}}function U(V){var X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return V.forEach(function(te){Array.isArray(te)?U(te,X):te&&X.push(te)}),X}var q=U(Array.isArray(t)?t:[t]);if(q.forEach(function(V){var X=typeof V=="string"&&!c?{}:V;if(typeof X=="string")k+="".concat(X,`
`);else if(X._keyframe)D(X);else{var te=M.reduce(function(re,Q){var ne;return(Q==null||(ne=Q.visit)===null||ne===void 0?void 0:ne.call(Q,re))||re},X);Object.keys(te).forEach(function(re){var Q=te[re];if(Kn(Q)==="object"&&Q&&(re!=="animationName"||!Q._keyframe)&&!h5(Q)){var ne=!1,ee=re.trim(),me=!1;(c||f)&&l?ee.startsWith("@")?ne=!0:ee=f5(re,l,C):c&&!l&&(ee==="&"||ee==="")&&(ee="",me=!0);var ce=e(Q,r,{root:me,injectHash:ne,parentSelectors:[].concat(mn(y),[ee])}),ie=Ut(ce,2),fe=ie[0],Te=ie[1];N=lt(lt({},N),Te),k+="".concat(ee).concat(fe)}else{let Ne=function(pe,He){var Be=pe.replace(/[A-Z]/g,function(Qe){return"-".concat(Qe.toLowerCase())}),Ge=He;!H4[pe]&&typeof Ge=="number"&&Ge!==0&&(Ge="".concat(Ge,"px")),pe==="animationName"&&He!==null&&He!==void 0&&He._keyframe&&(D(He),Ge=He.getName(l)),k+="".concat(Be,":").concat(Ge,";")};var $e,Fe=($e=Q==null?void 0:Q.value)!==null&&$e!==void 0?$e:Q;Kn(Q)==="object"&&Q!==null&&Q!==void 0&&Q[_O]&&Array.isArray(Fe)?Fe.forEach(function(pe){Ne(re,pe)}):Ne(re,Fe)}})}}),!c)k="{".concat(k,"}");else if(w&&I4()){var F=w.split(","),j=F[F.length-1].trim();k="@layer ".concat(j," {").concat(k,"}"),F.length>1&&(k="@layer ".concat(w,"{%%%:%}").concat(k))}return[k,N]};function m5(e,t){return TS("".concat(e.join("%")).concat(t))}function g5(){return null}function Fb(e,t){var r=e.token,a=e.path,c=e.hashId,f=e.layer,y=e.nonce,l=e.clientOnly,w=e.order,C=w===void 0?0:w,A=T.useContext(IS),M=A.autoClear;A.mock;var k=A.defaultCache,N=A.hashPriority,D=A.container,U=A.ssrInline,q=A.transformers,F=A.linters,j=A.cache,V=r._tokenKey,X=[V].concat(mn(a)),te=pI,re=dO("style",X,function(){var ce=X.join("|");if(c5(ce)){var ie=u5(ce),fe=Ut(ie,2),Te=fe[0],$e=fe[1];if(Te)return[Te,V,$e,{},l,C]}var Fe=t(),Ne=p5(Fe,{hashId:c,hashPriority:N,layer:f,path:a.join("-"),transformers:q,linters:F}),pe=Ut(Ne,2),He=pe[0],Be=pe[1],Ge=mI(He),Qe=m5(X,Ge);return[Ge,V,Qe,Be,l,C]},function(ce,ie){var fe=Ut(ce,3),Te=fe[2];(ie||M)&&pI&&Ty(Te,{mark:vu})},function(ce){var ie=Ut(ce,4),fe=ie[0];ie[1];var Te=ie[2],$e=ie[3];if(te&&fe!==vO){var Fe={mark:vu,prepend:"queue",attachTo:D,priority:C},Ne=typeof y=="function"?y():y;Ne&&(Fe.csp={nonce:Ne});var pe=yh(fe,Te,Fe);pe[Yd]=j.instanceId,pe.setAttribute(Ob,V),Object.keys($e).forEach(function(He){yh(mI($e[He]),"_effect-".concat(He),Fe)})}}),Q=Ut(re,3),ne=Q[0],ee=Q[1],me=Q[2];return function(ce){var ie;if(!U||te||!k)ie=T.createElement(g5,null);else{var fe;ie=T.createElement("style",Cn({},(fe={},De(fe,Ob,ee),De(fe,vu,me),fe),{dangerouslySetInnerHTML:{__html:ne}}))}return T.createElement(T.Fragment,null,ie,ce)}}var Cr=function(){function e(t,r){qo(this,e),De(this,"name",void 0),De(this,"style",void 0),De(this,"_keyframe",!0),this.name=t,this.style=r}return Zo(e,[{key:"getName",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return r?"".concat(r,"-").concat(this.name):this.name}}]),e}();function Md(e){return e.notSplit=!0,e}Md(["borderTop","borderBottom"]),Md(["borderTop"]),Md(["borderBottom"]),Md(["borderLeft","borderRight"]),Md(["borderLeft"]),Md(["borderRight"]);var v5=T.createContext({});const RS=v5;function xO(e){return sO(e)||YR(e)||ES(e)||lO()}function us(e,t){for(var r=e,a=0;a<t.length;a+=1){if(r==null)return;r=r[t[a]]}return r}function bO(e,t,r,a){if(!t.length)return r;var c=xO(t),f=c[0],y=c.slice(1),l;return!e&&typeof f=="number"?l=[]:Array.isArray(e)?l=mn(e):l=lt({},e),a&&r===void 0&&y.length===1?delete l[f][y[0]]:l[f]=bO(l[f],y,r,a),l}function as(e,t,r){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return t.length&&a&&r===void 0&&!us(e,t.slice(0,-1))?e:bO(e,t,r,a)}function y5(e){return Kn(e)==="object"&&e!==null&&Object.getPrototypeOf(e)===Object.prototype}function gI(e){return Array.isArray(e)?[]:{}}var _5=typeof Reflect>"u"?Object.keys:Reflect.ownKeys;function Jd(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var a=gI(t[0]);return t.forEach(function(c){function f(y,l){var w=new Set(l),C=us(c,y),A=Array.isArray(C);if(A||y5(C)){if(!w.has(C)){w.add(C);var M=us(a,y);A?a=as(a,y,[]):(!M||Kn(M)!=="object")&&(a=as(a,y,gI(C))),_5(C).forEach(function(k){f([].concat(mn(y),[k]),w)})}}else a=as(a,y,C)}f([])}),a}function x5(){}const b5=T.createContext({}),wO=()=>{const e=()=>{};return e.deprecated=x5,e},w5=T.createContext(void 0),SO={items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"Page",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages",page_size:"Page Size"};var S5={locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"OK",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",yearFormat:"YYYY",dateFormat:"M/D/YYYY",dayFormat:"D",dateTimeFormat:"M/D/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"};const E5={placeholder:"Select time",rangePlaceholder:["Start time","End time"]},EO=E5,C5={lang:Object.assign({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeQuarterPlaceholder:["Start quarter","End quarter"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},S5),timePickerLocale:Object.assign({},EO)},vI=C5,na="${label} is not a valid ${type}",T5={locale:"en",Pagination:SO,DatePicker:vI,TimePicker:EO,Calendar:vI,global:{placeholder:"Please select"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",filterCheckall:"Select all items",filterSearchPlaceholder:"Search in filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Tour:{Next:"Next",Previous:"Previous",Finish:"Finish"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand"},PageHeader:{back:"Back"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:na,method:na,array:na,object:na,number:na,date:na,boolean:na,integer:na,float:na,regexp:na,email:na,url:na,hex:na},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"},QRCode:{expired:"QR code expired",refresh:"Refresh"},ColorPicker:{presetEmpty:"Empty"}},xh=T5;Object.assign({},xh.Modal);let Vv=[];const yI=()=>Vv.reduce((e,t)=>Object.assign(Object.assign({},e),t),xh.Modal);function I5(e){if(e){const t=Object.assign({},e);return Vv.push(t),yI(),()=>{Vv=Vv.filter(r=>r!==t),yI()}}Object.assign({},xh.Modal)}const M5=T.createContext(void 0),OS=M5,P5=(e,t)=>{const r=T.useContext(OS),a=T.useMemo(()=>{var f;const y=t||xh[e],l=(f=r==null?void 0:r[e])!==null&&f!==void 0?f:{};return Object.assign(Object.assign({},typeof y=="function"?y():y),l||{})},[e,t,r]),c=T.useMemo(()=>{const f=r==null?void 0:r.locale;return r!=null&&r.exist&&!f?xh.locale:f},[r]);return[a,c]},zS=P5,A5="internalMark",R5=e=>{const{locale:t={},children:r,_ANT_MARK__:a}=e;T.useEffect(()=>I5(t&&t.Modal),[t]);const c=T.useMemo(()=>Object.assign(Object.assign({},t),{exist:!0}),[t]);return T.createElement(OS.Provider,{value:c},r)},O5=R5;function eo(e,t){z5(e)&&(e="100%");var r=k5(e);return e=t===360?e:Math.min(t,Math.max(0,parseFloat(e))),r&&(e=parseInt(String(e*t),10)/100),Math.abs(e-t)<1e-6?1:(t===360?e=(e<0?e%t+t:e%t)/parseFloat(String(t)):e=e%t/parseFloat(String(t)),e)}function mv(e){return Math.min(1,Math.max(0,e))}function z5(e){return typeof e=="string"&&e.indexOf(".")!==-1&&parseFloat(e)===1}function k5(e){return typeof e=="string"&&e.indexOf("%")!==-1}function CO(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function gv(e){return e<=1?"".concat(Number(e)*100,"%"):e}function du(e){return e.length===1?"0"+e:String(e)}function L5(e,t,r){return{r:eo(e,255)*255,g:eo(t,255)*255,b:eo(r,255)*255}}function _I(e,t,r){e=eo(e,255),t=eo(t,255),r=eo(r,255);var a=Math.max(e,t,r),c=Math.min(e,t,r),f=0,y=0,l=(a+c)/2;if(a===c)y=0,f=0;else{var w=a-c;switch(y=l>.5?w/(2-a-c):w/(a+c),a){case e:f=(t-r)/w+(t<r?6:0);break;case t:f=(r-e)/w+2;break;case r:f=(e-t)/w+4;break}f/=6}return{h:f,s:y,l}}function Jx(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*(6*r):r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function D5(e,t,r){var a,c,f;if(e=eo(e,360),t=eo(t,100),r=eo(r,100),t===0)c=r,f=r,a=r;else{var y=r<.5?r*(1+t):r+t-r*t,l=2*r-y;a=Jx(l,y,e+1/3),c=Jx(l,y,e),f=Jx(l,y,e-1/3)}return{r:a*255,g:c*255,b:f*255}}function Bb(e,t,r){e=eo(e,255),t=eo(t,255),r=eo(r,255);var a=Math.max(e,t,r),c=Math.min(e,t,r),f=0,y=a,l=a-c,w=a===0?0:l/a;if(a===c)f=0;else{switch(a){case e:f=(t-r)/l+(t<r?6:0);break;case t:f=(r-e)/l+2;break;case r:f=(e-t)/l+4;break}f/=6}return{h:f,s:w,v:y}}function $5(e,t,r){e=eo(e,360)*6,t=eo(t,100),r=eo(r,100);var a=Math.floor(e),c=e-a,f=r*(1-t),y=r*(1-c*t),l=r*(1-(1-c)*t),w=a%6,C=[r,y,f,f,l,r][w],A=[l,r,r,y,f,f][w],M=[f,f,l,r,r,y][w];return{r:C*255,g:A*255,b:M*255}}function Nb(e,t,r,a){var c=[du(Math.round(e).toString(16)),du(Math.round(t).toString(16)),du(Math.round(r).toString(16))];return a&&c[0].startsWith(c[0].charAt(1))&&c[1].startsWith(c[1].charAt(1))&&c[2].startsWith(c[2].charAt(1))?c[0].charAt(0)+c[1].charAt(0)+c[2].charAt(0):c.join("")}function F5(e,t,r,a,c){var f=[du(Math.round(e).toString(16)),du(Math.round(t).toString(16)),du(Math.round(r).toString(16)),du(B5(a))];return c&&f[0].startsWith(f[0].charAt(1))&&f[1].startsWith(f[1].charAt(1))&&f[2].startsWith(f[2].charAt(1))&&f[3].startsWith(f[3].charAt(1))?f[0].charAt(0)+f[1].charAt(0)+f[2].charAt(0)+f[3].charAt(0):f.join("")}function B5(e){return Math.round(parseFloat(e)*255).toString(16)}function xI(e){return oa(e)/255}function oa(e){return parseInt(e,16)}function N5(e){return{r:e>>16,g:(e&65280)>>8,b:e&255}}var jb={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function Fd(e){var t={r:0,g:0,b:0},r=1,a=null,c=null,f=null,y=!1,l=!1;return typeof e=="string"&&(e=V5(e)),typeof e=="object"&&(rl(e.r)&&rl(e.g)&&rl(e.b)?(t=L5(e.r,e.g,e.b),y=!0,l=String(e.r).substr(-1)==="%"?"prgb":"rgb"):rl(e.h)&&rl(e.s)&&rl(e.v)?(a=gv(e.s),c=gv(e.v),t=$5(e.h,a,c),y=!0,l="hsv"):rl(e.h)&&rl(e.s)&&rl(e.l)&&(a=gv(e.s),f=gv(e.l),t=D5(e.h,a,f),y=!0,l="hsl"),Object.prototype.hasOwnProperty.call(e,"a")&&(r=e.a)),r=CO(r),{ok:y,format:e.format||l,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:r}}var j5="[-\\+]?\\d+%?",U5="[-\\+]?\\d*\\.\\d+%?",ac="(?:".concat(U5,")|(?:").concat(j5,")"),Qx="[\\s|\\(]+(".concat(ac,")[,|\\s]+(").concat(ac,")[,|\\s]+(").concat(ac,")\\s*\\)?"),e1="[\\s|\\(]+(".concat(ac,")[,|\\s]+(").concat(ac,")[,|\\s]+(").concat(ac,")[,|\\s]+(").concat(ac,")\\s*\\)?"),rs={CSS_UNIT:new RegExp(ac),rgb:new RegExp("rgb"+Qx),rgba:new RegExp("rgba"+e1),hsl:new RegExp("hsl"+Qx),hsla:new RegExp("hsla"+e1),hsv:new RegExp("hsv"+Qx),hsva:new RegExp("hsva"+e1),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function V5(e){if(e=e.trim().toLowerCase(),e.length===0)return!1;var t=!1;if(jb[e])e=jb[e],t=!0;else if(e==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var r=rs.rgb.exec(e);return r?{r:r[1],g:r[2],b:r[3]}:(r=rs.rgba.exec(e),r?{r:r[1],g:r[2],b:r[3],a:r[4]}:(r=rs.hsl.exec(e),r?{h:r[1],s:r[2],l:r[3]}:(r=rs.hsla.exec(e),r?{h:r[1],s:r[2],l:r[3],a:r[4]}:(r=rs.hsv.exec(e),r?{h:r[1],s:r[2],v:r[3]}:(r=rs.hsva.exec(e),r?{h:r[1],s:r[2],v:r[3],a:r[4]}:(r=rs.hex8.exec(e),r?{r:oa(r[1]),g:oa(r[2]),b:oa(r[3]),a:xI(r[4]),format:t?"name":"hex8"}:(r=rs.hex6.exec(e),r?{r:oa(r[1]),g:oa(r[2]),b:oa(r[3]),format:t?"name":"hex"}:(r=rs.hex4.exec(e),r?{r:oa(r[1]+r[1]),g:oa(r[2]+r[2]),b:oa(r[3]+r[3]),a:xI(r[4]+r[4]),format:t?"name":"hex8"}:(r=rs.hex3.exec(e),r?{r:oa(r[1]+r[1]),g:oa(r[2]+r[2]),b:oa(r[3]+r[3]),format:t?"name":"hex"}:!1)))))))))}function rl(e){return!!rs.CSS_UNIT.exec(String(e))}var Ji=function(){function e(t,r){t===void 0&&(t=""),r===void 0&&(r={});var a;if(t instanceof e)return t;typeof t=="number"&&(t=N5(t)),this.originalInput=t;var c=Fd(t);this.originalInput=t,this.r=c.r,this.g=c.g,this.b=c.b,this.a=c.a,this.roundA=Math.round(100*this.a)/100,this.format=(a=r.format)!==null&&a!==void 0?a:c.format,this.gradientType=r.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=c.ok}return e.prototype.isDark=function(){return this.getBrightness()<128},e.prototype.isLight=function(){return!this.isDark()},e.prototype.getBrightness=function(){var t=this.toRgb();return(t.r*299+t.g*587+t.b*114)/1e3},e.prototype.getLuminance=function(){var t=this.toRgb(),r,a,c,f=t.r/255,y=t.g/255,l=t.b/255;return f<=.03928?r=f/12.92:r=Math.pow((f+.055)/1.055,2.4),y<=.03928?a=y/12.92:a=Math.pow((y+.055)/1.055,2.4),l<=.03928?c=l/12.92:c=Math.pow((l+.055)/1.055,2.4),.2126*r+.7152*a+.0722*c},e.prototype.getAlpha=function(){return this.a},e.prototype.setAlpha=function(t){return this.a=CO(t),this.roundA=Math.round(100*this.a)/100,this},e.prototype.isMonochrome=function(){var t=this.toHsl().s;return t===0},e.prototype.toHsv=function(){var t=Bb(this.r,this.g,this.b);return{h:t.h*360,s:t.s,v:t.v,a:this.a}},e.prototype.toHsvString=function(){var t=Bb(this.r,this.g,this.b),r=Math.round(t.h*360),a=Math.round(t.s*100),c=Math.round(t.v*100);return this.a===1?"hsv(".concat(r,", ").concat(a,"%, ").concat(c,"%)"):"hsva(".concat(r,", ").concat(a,"%, ").concat(c,"%, ").concat(this.roundA,")")},e.prototype.toHsl=function(){var t=_I(this.r,this.g,this.b);return{h:t.h*360,s:t.s,l:t.l,a:this.a}},e.prototype.toHslString=function(){var t=_I(this.r,this.g,this.b),r=Math.round(t.h*360),a=Math.round(t.s*100),c=Math.round(t.l*100);return this.a===1?"hsl(".concat(r,", ").concat(a,"%, ").concat(c,"%)"):"hsla(".concat(r,", ").concat(a,"%, ").concat(c,"%, ").concat(this.roundA,")")},e.prototype.toHex=function(t){return t===void 0&&(t=!1),Nb(this.r,this.g,this.b,t)},e.prototype.toHexString=function(t){return t===void 0&&(t=!1),"#"+this.toHex(t)},e.prototype.toHex8=function(t){return t===void 0&&(t=!1),F5(this.r,this.g,this.b,this.a,t)},e.prototype.toHex8String=function(t){return t===void 0&&(t=!1),"#"+this.toHex8(t)},e.prototype.toHexShortString=function(t){return t===void 0&&(t=!1),this.a===1?this.toHexString(t):this.toHex8String(t)},e.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},e.prototype.toRgbString=function(){var t=Math.round(this.r),r=Math.round(this.g),a=Math.round(this.b);return this.a===1?"rgb(".concat(t,", ").concat(r,", ").concat(a,")"):"rgba(".concat(t,", ").concat(r,", ").concat(a,", ").concat(this.roundA,")")},e.prototype.toPercentageRgb=function(){var t=function(r){return"".concat(Math.round(eo(r,255)*100),"%")};return{r:t(this.r),g:t(this.g),b:t(this.b),a:this.a}},e.prototype.toPercentageRgbString=function(){var t=function(r){return Math.round(eo(r,255)*100)};return this.a===1?"rgb(".concat(t(this.r),"%, ").concat(t(this.g),"%, ").concat(t(this.b),"%)"):"rgba(".concat(t(this.r),"%, ").concat(t(this.g),"%, ").concat(t(this.b),"%, ").concat(this.roundA,")")},e.prototype.toName=function(){if(this.a===0)return"transparent";if(this.a<1)return!1;for(var t="#"+Nb(this.r,this.g,this.b,!1),r=0,a=Object.entries(jb);r<a.length;r++){var c=a[r],f=c[0],y=c[1];if(t===y)return f}return!1},e.prototype.toString=function(t){var r=!!t;t=t??this.format;var a=!1,c=this.a<1&&this.a>=0,f=!r&&c&&(t.startsWith("hex")||t==="name");return f?t==="name"&&this.a===0?this.toName():this.toRgbString():(t==="rgb"&&(a=this.toRgbString()),t==="prgb"&&(a=this.toPercentageRgbString()),(t==="hex"||t==="hex6")&&(a=this.toHexString()),t==="hex3"&&(a=this.toHexString(!0)),t==="hex4"&&(a=this.toHex8String(!0)),t==="hex8"&&(a=this.toHex8String()),t==="name"&&(a=this.toName()),t==="hsl"&&(a=this.toHslString()),t==="hsv"&&(a=this.toHsvString()),a||this.toHexString())},e.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},e.prototype.clone=function(){return new e(this.toString())},e.prototype.lighten=function(t){t===void 0&&(t=10);var r=this.toHsl();return r.l+=t/100,r.l=mv(r.l),new e(r)},e.prototype.brighten=function(t){t===void 0&&(t=10);var r=this.toRgb();return r.r=Math.max(0,Math.min(255,r.r-Math.round(255*-(t/100)))),r.g=Math.max(0,Math.min(255,r.g-Math.round(255*-(t/100)))),r.b=Math.max(0,Math.min(255,r.b-Math.round(255*-(t/100)))),new e(r)},e.prototype.darken=function(t){t===void 0&&(t=10);var r=this.toHsl();return r.l-=t/100,r.l=mv(r.l),new e(r)},e.prototype.tint=function(t){return t===void 0&&(t=10),this.mix("white",t)},e.prototype.shade=function(t){return t===void 0&&(t=10),this.mix("black",t)},e.prototype.desaturate=function(t){t===void 0&&(t=10);var r=this.toHsl();return r.s-=t/100,r.s=mv(r.s),new e(r)},e.prototype.saturate=function(t){t===void 0&&(t=10);var r=this.toHsl();return r.s+=t/100,r.s=mv(r.s),new e(r)},e.prototype.greyscale=function(){return this.desaturate(100)},e.prototype.spin=function(t){var r=this.toHsl(),a=(r.h+t)%360;return r.h=a<0?360+a:a,new e(r)},e.prototype.mix=function(t,r){r===void 0&&(r=50);var a=this.toRgb(),c=new e(t).toRgb(),f=r/100,y={r:(c.r-a.r)*f+a.r,g:(c.g-a.g)*f+a.g,b:(c.b-a.b)*f+a.b,a:(c.a-a.a)*f+a.a};return new e(y)},e.prototype.analogous=function(t,r){t===void 0&&(t=6),r===void 0&&(r=30);var a=this.toHsl(),c=360/r,f=[this];for(a.h=(a.h-(c*t>>1)+720)%360;--t;)a.h=(a.h+c)%360,f.push(new e(a));return f},e.prototype.complement=function(){var t=this.toHsl();return t.h=(t.h+180)%360,new e(t)},e.prototype.monochromatic=function(t){t===void 0&&(t=6);for(var r=this.toHsv(),a=r.h,c=r.s,f=r.v,y=[],l=1/t;t--;)y.push(new e({h:a,s:c,v:f})),f=(f+l)%1;return y},e.prototype.splitcomplement=function(){var t=this.toHsl(),r=t.h;return[this,new e({h:(r+72)%360,s:t.s,l:t.l}),new e({h:(r+216)%360,s:t.s,l:t.l})]},e.prototype.onBackground=function(t){var r=this.toRgb(),a=new e(t).toRgb(),c=r.a+a.a*(1-r.a);return new e({r:(r.r*r.a+a.r*a.a*(1-r.a))/c,g:(r.g*r.a+a.g*a.a*(1-r.a))/c,b:(r.b*r.a+a.b*a.a*(1-r.a))/c,a:c})},e.prototype.triad=function(){return this.polyad(3)},e.prototype.tetrad=function(){return this.polyad(4)},e.prototype.polyad=function(t){for(var r=this.toHsl(),a=r.h,c=[this],f=360/t,y=1;y<t;y++)c.push(new e({h:(a+y*f)%360,s:r.s,l:r.l}));return c},e.prototype.equals=function(t){return this.toRgbString()===new e(t).toRgbString()},e}(),vv=2,bI=.16,H5=.05,G5=.05,W5=.15,TO=5,IO=4,q5=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function wI(e){var t=e.r,r=e.g,a=e.b,c=Bb(t,r,a);return{h:c.h*360,s:c.s,v:c.v}}function yv(e){var t=e.r,r=e.g,a=e.b;return"#".concat(Nb(t,r,a,!1))}function Z5(e,t,r){var a=r/100,c={r:(t.r-e.r)*a+e.r,g:(t.g-e.g)*a+e.g,b:(t.b-e.b)*a+e.b};return c}function SI(e,t,r){var a;return Math.round(e.h)>=60&&Math.round(e.h)<=240?a=r?Math.round(e.h)-vv*t:Math.round(e.h)+vv*t:a=r?Math.round(e.h)+vv*t:Math.round(e.h)-vv*t,a<0?a+=360:a>=360&&(a-=360),a}function EI(e,t,r){if(e.h===0&&e.s===0)return e.s;var a;return r?a=e.s-bI*t:t===IO?a=e.s+bI:a=e.s+H5*t,a>1&&(a=1),r&&t===TO&&a>.1&&(a=.1),a<.06&&(a=.06),Number(a.toFixed(2))}function CI(e,t,r){var a;return r?a=e.v+G5*t:a=e.v-W5*t,a>1&&(a=1),Number(a.toFixed(2))}function Cu(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=[],a=Fd(e),c=TO;c>0;c-=1){var f=wI(a),y=yv(Fd({h:SI(f,c,!0),s:EI(f,c,!0),v:CI(f,c,!0)}));r.push(y)}r.push(yv(a));for(var l=1;l<=IO;l+=1){var w=wI(a),C=yv(Fd({h:SI(w,l),s:EI(w,l),v:CI(w,l)}));r.push(C)}return t.theme==="dark"?q5.map(function(A){var M=A.index,k=A.opacity,N=yv(Z5(Fd(t.backgroundColor||"#141414"),Fd(r[M]),k*100));return N}):r}var t1={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1677FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},kp={},n1={};Object.keys(t1).forEach(function(e){kp[e]=Cu(t1[e]),kp[e].primary=kp[e][5],n1[e]=Cu(t1[e],{theme:"dark",backgroundColor:"#141414"}),n1[e].primary=n1[e][5]});var X5=kp.gold,K5=kp.blue;const Y5=e=>{const{controlHeight:t}=e;return{controlHeightSM:t*.75,controlHeightXS:t*.5,controlHeightLG:t*1.25}},J5=Y5;function Q5(e){const{sizeUnit:t,sizeStep:r}=e;return{sizeXXL:t*(r+8),sizeXL:t*(r+4),sizeLG:t*(r+2),sizeMD:t*(r+1),sizeMS:t*r,size:t*r,sizeSM:t*(r-1),sizeXS:t*(r-2),sizeXXS:t*(r-3)}}const MO={blue:"#1677ff",purple:"#722ED1",cyan:"#13C2C2",green:"#52C41A",magenta:"#EB2F96",pink:"#eb2f96",red:"#F5222D",orange:"#FA8C16",yellow:"#FADB14",volcano:"#FA541C",geekblue:"#2F54EB",gold:"#FAAD14",lime:"#A0D911"},eN=Object.assign(Object.assign({},MO),{colorPrimary:"#1677ff",colorSuccess:"#52c41a",colorWarning:"#faad14",colorError:"#ff4d4f",colorInfo:"#1677ff",colorLink:"",colorTextBase:"",colorBgBase:"",fontFamily:`-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial,
'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',
'Noto Color Emoji'`,fontFamilyCode:"'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace",fontSize:14,lineWidth:1,lineType:"solid",motionUnit:.1,motionBase:0,motionEaseOutCirc:"cubic-bezier(0.08, 0.82, 0.17, 1)",motionEaseInOutCirc:"cubic-bezier(0.78, 0.14, 0.15, 0.86)",motionEaseOut:"cubic-bezier(0.215, 0.61, 0.355, 1)",motionEaseInOut:"cubic-bezier(0.645, 0.045, 0.355, 1)",motionEaseOutBack:"cubic-bezier(0.12, 0.4, 0.29, 1.46)",motionEaseInBack:"cubic-bezier(0.71, -0.46, 0.88, 0.6)",motionEaseInQuint:"cubic-bezier(0.755, 0.05, 0.855, 0.06)",motionEaseOutQuint:"cubic-bezier(0.23, 1, 0.32, 1)",borderRadius:6,sizeUnit:4,sizeStep:4,sizePopupArrow:16,controlHeight:32,zIndexBase:0,zIndexPopupBase:1e3,opacityImage:1,wireframe:!1,motion:!0}),om=eN;function tN(e,t){let{generateColorPalettes:r,generateNeutralColorPalettes:a}=t;const{colorSuccess:c,colorWarning:f,colorError:y,colorInfo:l,colorPrimary:w,colorBgBase:C,colorTextBase:A}=e,M=r(w),k=r(c),N=r(f),D=r(y),U=r(l),q=a(C,A),F=e.colorLink||e.colorInfo,j=r(F);return Object.assign(Object.assign({},q),{colorPrimaryBg:M[1],colorPrimaryBgHover:M[2],colorPrimaryBorder:M[3],colorPrimaryBorderHover:M[4],colorPrimaryHover:M[5],colorPrimary:M[6],colorPrimaryActive:M[7],colorPrimaryTextHover:M[8],colorPrimaryText:M[9],colorPrimaryTextActive:M[10],colorSuccessBg:k[1],colorSuccessBgHover:k[2],colorSuccessBorder:k[3],colorSuccessBorderHover:k[4],colorSuccessHover:k[4],colorSuccess:k[6],colorSuccessActive:k[7],colorSuccessTextHover:k[8],colorSuccessText:k[9],colorSuccessTextActive:k[10],colorErrorBg:D[1],colorErrorBgHover:D[2],colorErrorBorder:D[3],colorErrorBorderHover:D[4],colorErrorHover:D[5],colorError:D[6],colorErrorActive:D[7],colorErrorTextHover:D[8],colorErrorText:D[9],colorErrorTextActive:D[10],colorWarningBg:N[1],colorWarningBgHover:N[2],colorWarningBorder:N[3],colorWarningBorderHover:N[4],colorWarningHover:N[4],colorWarning:N[6],colorWarningActive:N[7],colorWarningTextHover:N[8],colorWarningText:N[9],colorWarningTextActive:N[10],colorInfoBg:U[1],colorInfoBgHover:U[2],colorInfoBorder:U[3],colorInfoBorderHover:U[4],colorInfoHover:U[4],colorInfo:U[6],colorInfoActive:U[7],colorInfoTextHover:U[8],colorInfoText:U[9],colorInfoTextActive:U[10],colorLinkHover:j[4],colorLink:j[6],colorLinkActive:j[7],colorBgMask:new Ji("#000").setAlpha(.45).toRgbString(),colorWhite:"#fff"})}const nN=e=>{let t=e,r=e,a=e,c=e;return e<6&&e>=5?t=e+1:e<16&&e>=6?t=e+2:e>=16&&(t=16),e<7&&e>=5?r=4:e<8&&e>=7?r=5:e<14&&e>=8?r=6:e<16&&e>=14?r=7:e>=16&&(r=8),e<6&&e>=2?a=1:e>=6&&(a=2),e>4&&e<8?c=4:e>=8&&(c=6),{borderRadius:e,borderRadiusXS:a,borderRadiusSM:r,borderRadiusLG:t,borderRadiusOuter:c}},rN=nN;function iN(e){const{motionUnit:t,motionBase:r,borderRadius:a,lineWidth:c}=e;return Object.assign({motionDurationFast:`${(r+t).toFixed(1)}s`,motionDurationMid:`${(r+t*2).toFixed(1)}s`,motionDurationSlow:`${(r+t*3).toFixed(1)}s`,lineWidthBold:c+1},rN(a))}const il=(e,t)=>new Ji(e).setAlpha(t).toRgbString(),up=(e,t)=>new Ji(e).darken(t).toHexString(),oN=e=>{const t=Cu(e);return{1:t[0],2:t[1],3:t[2],4:t[3],5:t[4],6:t[5],7:t[6],8:t[4],9:t[5],10:t[6]}},aN=(e,t)=>{const r=e||"#fff",a=t||"#000";return{colorBgBase:r,colorTextBase:a,colorText:il(a,.88),colorTextSecondary:il(a,.65),colorTextTertiary:il(a,.45),colorTextQuaternary:il(a,.25),colorFill:il(a,.15),colorFillSecondary:il(a,.06),colorFillTertiary:il(a,.04),colorFillQuaternary:il(a,.02),colorBgLayout:up(r,4),colorBgContainer:up(r,0),colorBgElevated:up(r,0),colorBgSpotlight:il(a,.85),colorBgBlur:"transparent",colorBorder:up(r,15),colorBorderSecondary:up(r,6)}};function sN(e){const t=new Array(10).fill(null).map((r,a)=>{const c=a-1,f=e*Math.pow(2.71828,c/5),y=a>1?Math.floor(f):Math.ceil(f);return Math.floor(y/2)*2});return t[1]=e,t.map(r=>{const a=r+8;return{size:r,lineHeight:a/r}})}const lN=e=>{const t=sN(e),r=t.map(c=>c.size),a=t.map(c=>c.lineHeight);return{fontSizeSM:r[0],fontSize:r[1],fontSizeLG:r[2],fontSizeXL:r[3],fontSizeHeading1:r[6],fontSizeHeading2:r[5],fontSizeHeading3:r[4],fontSizeHeading4:r[3],fontSizeHeading5:r[2],lineHeight:a[1],lineHeightLG:a[2],lineHeightSM:a[0],lineHeightHeading1:a[6],lineHeightHeading2:a[5],lineHeightHeading3:a[4],lineHeightHeading4:a[3],lineHeightHeading5:a[2]}},cN=lN;function uN(e){const t=Object.keys(MO).map(r=>{const a=Cu(e[r]);return new Array(10).fill(1).reduce((c,f,y)=>(c[`${r}-${y+1}`]=a[y],c[`${r}${y+1}`]=a[y],c),{})}).reduce((r,a)=>(r=Object.assign(Object.assign({},r),a),r),{});return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},e),t),tN(e,{generateColorPalettes:oN,generateNeutralColorPalettes:aN})),cN(e.fontSize)),Q5(e)),J5(e)),iN(e))}const PO=kb(uN),AO={token:om,override:{override:om},hashed:!0},RO=st.createContext(AO),kS="anticon",dN=(e,t)=>t||(e?`ant-${e}`:"ant"),cr=T.createContext({getPrefixCls:dN,iconPrefixCls:kS}),hN=`-ant-${Date.now()}-${Math.random()}`;function fN(e,t){const r={},a=(y,l)=>{let w=y.clone();return w=(l==null?void 0:l(w))||w,w.toRgbString()},c=(y,l)=>{const w=new Ji(y),C=Cu(w.toRgbString());r[`${l}-color`]=a(w),r[`${l}-color-disabled`]=C[1],r[`${l}-color-hover`]=C[4],r[`${l}-color-active`]=C[6],r[`${l}-color-outline`]=w.clone().setAlpha(.2).toRgbString(),r[`${l}-color-deprecated-bg`]=C[0],r[`${l}-color-deprecated-border`]=C[2]};if(t.primaryColor){c(t.primaryColor,"primary");const y=new Ji(t.primaryColor),l=Cu(y.toRgbString());l.forEach((C,A)=>{r[`primary-${A+1}`]=C}),r["primary-color-deprecated-l-35"]=a(y,C=>C.lighten(35)),r["primary-color-deprecated-l-20"]=a(y,C=>C.lighten(20)),r["primary-color-deprecated-t-20"]=a(y,C=>C.tint(20)),r["primary-color-deprecated-t-50"]=a(y,C=>C.tint(50)),r["primary-color-deprecated-f-12"]=a(y,C=>C.setAlpha(C.getAlpha()*.12));const w=new Ji(l[0]);r["primary-color-active-deprecated-f-30"]=a(w,C=>C.setAlpha(C.getAlpha()*.3)),r["primary-color-active-deprecated-d-02"]=a(w,C=>C.darken(2))}return t.successColor&&c(t.successColor,"success"),t.warningColor&&c(t.warningColor,"warning"),t.errorColor&&c(t.errorColor,"error"),t.infoColor&&c(t.infoColor,"info"),`
  :root {
    ${Object.keys(r).map(y=>`--${e}-${y}: ${r[y]};`).join(`
`)}
  }
  `.trim()}function pN(e,t){const r=fN(e,t);no()&&yh(r,`${hN}-dynamic-theme`)}const Ub=T.createContext(!1),mN=e=>{let{children:t,disabled:r}=e;const a=T.useContext(Ub);return T.createElement(Ub.Provider,{value:r??a},t)},Ph=Ub,Vb=T.createContext(void 0),gN=e=>{let{children:t,size:r}=e;const a=T.useContext(Vb);return T.createElement(Vb.Provider,{value:r||a},t)},_0=Vb;function vN(){const e=T.useContext(Ph),t=T.useContext(_0);return{componentDisabled:e,componentSize:t}}const My=["blue","purple","cyan","green","magenta","pink","red","orange","yellow","volcano","geekblue","lime","gold"],yN="5.11.1";function r1(e){return e>=0&&e<=255}function _v(e,t){const{r,g:a,b:c,a:f}=new Ji(e).toRgb();if(f<1)return e;const{r:y,g:l,b:w}=new Ji(t).toRgb();for(let C=.01;C<=1;C+=.01){const A=Math.round((r-y*(1-C))/C),M=Math.round((a-l*(1-C))/C),k=Math.round((c-w*(1-C))/C);if(r1(A)&&r1(M)&&r1(k))return new Ji({r:A,g:M,b:k,a:Math.round(C*100)/100}).toRgbString()}return new Ji({r,g:a,b:c,a:1}).toRgbString()}var _N=globalThis&&globalThis.__rest||function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(r[a[c]]=e[a[c]]);return r};function OO(e){const{override:t}=e,r=_N(e,["override"]),a=Object.assign({},t);Object.keys(om).forEach(k=>{delete a[k]});const c=Object.assign(Object.assign({},r),a),f=480,y=576,l=768,w=992,C=1200,A=1600;if(c.motion===!1){const k="0s";c.motionDurationFast=k,c.motionDurationMid=k,c.motionDurationSlow=k}return Object.assign(Object.assign(Object.assign({},c),{colorFillContent:c.colorFillSecondary,colorFillContentHover:c.colorFill,colorFillAlter:c.colorFillQuaternary,colorBgContainerDisabled:c.colorFillTertiary,colorBorderBg:c.colorBgContainer,colorSplit:_v(c.colorBorderSecondary,c.colorBgContainer),colorTextPlaceholder:c.colorTextQuaternary,colorTextDisabled:c.colorTextQuaternary,colorTextHeading:c.colorText,colorTextLabel:c.colorTextSecondary,colorTextDescription:c.colorTextTertiary,colorTextLightSolid:c.colorWhite,colorHighlight:c.colorError,colorBgTextHover:c.colorFillSecondary,colorBgTextActive:c.colorFill,colorIcon:c.colorTextTertiary,colorIconHover:c.colorText,colorErrorOutline:_v(c.colorErrorBg,c.colorBgContainer),colorWarningOutline:_v(c.colorWarningBg,c.colorBgContainer),fontSizeIcon:c.fontSizeSM,lineWidthFocus:c.lineWidth*4,lineWidth:c.lineWidth,controlOutlineWidth:c.lineWidth*2,controlInteractiveSize:c.controlHeight/2,controlItemBgHover:c.colorFillTertiary,controlItemBgActive:c.colorPrimaryBg,controlItemBgActiveHover:c.colorPrimaryBgHover,controlItemBgActiveDisabled:c.colorFill,controlTmpOutline:c.colorFillQuaternary,controlOutline:_v(c.colorPrimaryBg,c.colorBgContainer),lineType:c.lineType,borderRadius:c.borderRadius,borderRadiusXS:c.borderRadiusXS,borderRadiusSM:c.borderRadiusSM,borderRadiusLG:c.borderRadiusLG,fontWeightStrong:600,opacityLoading:.65,linkDecoration:"none",linkHoverDecoration:"none",linkFocusDecoration:"none",controlPaddingHorizontal:12,controlPaddingHorizontalSM:8,paddingXXS:c.sizeXXS,paddingXS:c.sizeXS,paddingSM:c.sizeSM,padding:c.size,paddingMD:c.sizeMD,paddingLG:c.sizeLG,paddingXL:c.sizeXL,paddingContentHorizontalLG:c.sizeLG,paddingContentVerticalLG:c.sizeMS,paddingContentHorizontal:c.sizeMS,paddingContentVertical:c.sizeSM,paddingContentHorizontalSM:c.size,paddingContentVerticalSM:c.sizeXS,marginXXS:c.sizeXXS,marginXS:c.sizeXS,marginSM:c.sizeSM,margin:c.size,marginMD:c.sizeMD,marginLG:c.sizeLG,marginXL:c.sizeXL,marginXXL:c.sizeXXL,boxShadow:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowSecondary:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTertiary:`
      0 1px 2px 0 rgba(0, 0, 0, 0.03),
      0 1px 6px -1px rgba(0, 0, 0, 0.02),
      0 2px 4px 0 rgba(0, 0, 0, 0.02)
    `,screenXS:f,screenXSMin:f,screenXSMax:y-1,screenSM:y,screenSMMin:y,screenSMMax:l-1,screenMD:l,screenMDMin:l,screenMDMax:w-1,screenLG:w,screenLGMin:w,screenLGMax:C-1,screenXL:C,screenXLMin:C,screenXLMax:A-1,screenXXL:A,screenXXLMin:A,boxShadowPopoverArrow:"2px 2px 5px rgba(0, 0, 0, 0.05)",boxShadowCard:`
      0 1px 2px -2px ${new Ji("rgba(0, 0, 0, 0.16)").toRgbString()},
      0 3px 6px 0 ${new Ji("rgba(0, 0, 0, 0.12)").toRgbString()},
      0 5px 12px 4px ${new Ji("rgba(0, 0, 0, 0.09)").toRgbString()}
    `,boxShadowDrawerRight:`
      -6px 0 16px 0 rgba(0, 0, 0, 0.08),
      -3px 0 6px -4px rgba(0, 0, 0, 0.12),
      -9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerLeft:`
      6px 0 16px 0 rgba(0, 0, 0, 0.08),
      3px 0 6px -4px rgba(0, 0, 0, 0.12),
      9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerUp:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerDown:`
      0 -6px 16px 0 rgba(0, 0, 0, 0.08),
      0 -3px 6px -4px rgba(0, 0, 0, 0.12),
      0 -9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTabsOverflowLeft:"inset 10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowRight:"inset -10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowTop:"inset 0 10px 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowBottom:"inset 0 -10px 8px -8px rgba(0, 0, 0, 0.08)"}),a)}var TI=globalThis&&globalThis.__rest||function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(r[a[c]]=e[a[c]]);return r};const zO=(e,t,r)=>{const a=r.getDerivativeToken(e),{override:c}=t,f=TI(t,["override"]);let y=Object.assign(Object.assign({},a),{override:c});return y=OO(y),f&&Object.entries(f).forEach(l=>{let[w,C]=l;const{theme:A}=C,M=TI(C,["theme"]);let k=M;A&&(k=zO(Object.assign(Object.assign({},y),M),{override:M},A)),y[w]=k}),y};function vs(){const{token:e,hashed:t,theme:r,override:a}=st.useContext(RO),c=`${yN}-${t||""}`,f=r||PO,[y,l]=V4(f,[om,e],{salt:c,override:a,getComputedToken:zO,formatToken:OO});return[f,y,t?l:""]}function jo(e){var t=T.useRef();t.current=e;var r=T.useCallback(function(){for(var a,c=arguments.length,f=new Array(c),y=0;y<c;y++)f[y]=arguments[y];return(a=t.current)===null||a===void 0?void 0:a.call.apply(a,[t].concat(f))},[]);return r}function sh(e){var t=T.useRef(!1),r=T.useState(e),a=Ut(r,2),c=a[0],f=a[1];T.useEffect(function(){return t.current=!1,function(){t.current=!0}},[]);function y(l,w){w&&t.current||f(l)}return[c,y]}function i1(e){return e!==void 0}function ms(e,t){var r=t||{},a=r.defaultValue,c=r.value,f=r.onChange,y=r.postState,l=sh(function(){return i1(c)?c:i1(a)?typeof a=="function"?a():a:typeof e=="function"?e():e}),w=Ut(l,2),C=w[0],A=w[1],M=c!==void 0?c:C,k=y?y(M):M,N=jo(f),D=sh([M]),U=Ut(D,2),q=U[0],F=U[1];cI(function(){var V=q[0];C!==V&&N(C,V)},[q]),cI(function(){i1(c)||A(c)},[c]);var j=jo(function(V,X){A(V,X),F([M],X)});return[k,j]}const kO=e=>({color:e.colorLink,textDecoration:"none",outline:"none",cursor:"pointer",transition:`color ${e.motionDurationSlow}`,"&:focus, &:hover":{color:e.colorLinkHover},"&:active":{color:e.colorLinkActive}}),xN=(e,t,r,a,c)=>{const f=e/2,y=0,l=f,w=r*1/Math.sqrt(2),C=f-r*(1-1/Math.sqrt(2)),A=f-t*(1/Math.sqrt(2)),M=r*(Math.sqrt(2)-1)+t*(1/Math.sqrt(2)),k=2*f-A,N=M,D=2*f-w,U=C,q=2*f-y,F=l,j=f*Math.sqrt(2)+r*(Math.sqrt(2)-2),V=r*(Math.sqrt(2)-1);return{pointerEvents:"none",width:e,height:e,overflow:"hidden","&::before":{position:"absolute",bottom:0,insetInlineStart:0,width:e,height:e/2,background:a,clipPath:{_multi_value_:!0,value:[`polygon(${V}px 100%, 50% ${V}px, ${2*f-V}px 100%, ${V}px 100%)`,`path('M ${y} ${l} A ${r} ${r} 0 0 0 ${w} ${C} L ${A} ${M} A ${t} ${t} 0 0 1 ${k} ${N} L ${D} ${U} A ${r} ${r} 0 0 0 ${q} ${F} Z')`]},content:'""'},"&::after":{content:'""',position:"absolute",width:j,height:j,bottom:0,insetInline:0,margin:"auto",borderRadius:{_skip_check_:!0,value:`0 0 ${t}px 0`},transform:"translateY(50%) rotate(-135deg)",boxShadow:c,zIndex:0,background:"transparent"}}},Hb={overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},da=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return{boxSizing:"border-box",margin:0,padding:0,color:e.colorText,fontSize:e.fontSize,lineHeight:e.lineHeight,listStyle:"none",fontFamily:t?"inherit":e.fontFamily}},LS=()=>({display:"inline-flex",alignItems:"center",color:"inherit",fontStyle:"normal",lineHeight:0,textAlign:"center",textTransform:"none",verticalAlign:"-0.125em",textRendering:"optimizeLegibility","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale","> *":{lineHeight:1},svg:{display:"inline-block"}}),bN=()=>({"&::before":{display:"table",content:'""'},"&::after":{display:"table",clear:"both",content:'""'}}),wN=e=>({a:{color:e.colorLink,textDecoration:e.linkDecoration,backgroundColor:"transparent",outline:"none",cursor:"pointer",transition:`color ${e.motionDurationSlow}`,"-webkit-text-decoration-skip":"objects","&:hover":{color:e.colorLinkHover},"&:active":{color:e.colorLinkActive},"&:active,\n  &:hover":{textDecoration:e.linkHoverDecoration,outline:0},"&:focus":{textDecoration:e.linkFocusDecoration,outline:0},"&[disabled]":{color:e.colorTextDisabled,cursor:"not-allowed"}}}),SN=(e,t)=>{const{fontFamily:r,fontSize:a}=e,c=`[class^="${t}"], [class*=" ${t}"]`;return{[c]:{fontFamily:r,fontSize:a,boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"},[c]:{boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"}}}}},am=e=>({outline:`${e.lineWidthFocus}px solid ${e.colorPrimaryBorder}`,outlineOffset:1,transition:"outline-offset 0s, outline 0s"}),LO=e=>({"&:focus-visible":Object.assign({},am(e))}),DO=typeof CSSINJS_STATISTIC<"u";let Gb=!0;function $r(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(!DO)return Object.assign.apply(Object,[{}].concat(t));Gb=!1;const a={};return t.forEach(c=>{Object.keys(c).forEach(y=>{Object.defineProperty(a,y,{configurable:!0,enumerable:!0,get:()=>c[y]})})}),Gb=!0,a}const II={};function EN(){}function CN(e){let t,r=e,a=EN;return DO&&typeof Proxy<"u"&&(t=new Set,r=new Proxy(e,{get(c,f){return Gb&&t.add(f),c[f]}}),a=(c,f)=>{var y;II[c]={global:Array.from(t),component:Object.assign(Object.assign({},(y=II[c])===null||y===void 0?void 0:y.component),f)}}),{token:r,keys:t,flush:a}}const TN=(e,t)=>{const[r,a]=vs();return Fb({theme:r,token:a,hashId:"",path:["ant-design-icons",e],nonce:()=>t==null?void 0:t.nonce},()=>[{[`.${e}`]:Object.assign(Object.assign({},LS()),{[`.${e} .${e}-icon`]:{display:"block"}})}])},$O=TN;function _o(e,t,r){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const c=Array.isArray(e)?e:[e,e],[f]=c,y=c.join("-");return l=>{const[w,C,A]=vs(),{getPrefixCls:M,iconPrefixCls:k,csp:N}=T.useContext(cr),D=M(),U={theme:w,token:C,hashId:A,nonce:()=>N==null?void 0:N.nonce,clientOnly:a.clientOnly,order:a.order||-999};return Fb(Object.assign(Object.assign({},U),{clientOnly:!1,path:["Shared",D]}),()=>[{"&":wN(C)}]),$O(k,N),[Fb(Object.assign(Object.assign({},U),{path:[y,l,k]}),()=>{const{token:q,flush:F}=CN(C),j=Object.assign({},C[f]);if(a.deprecatedTokens){const{deprecatedTokens:ne}=a;ne.forEach(ee=>{let[me,ce]=ee;var ie;(j!=null&&j[me]||j!=null&&j[ce])&&((ie=j[ce])!==null&&ie!==void 0||(j[ce]=j==null?void 0:j[me]))})}const V=typeof r=="function"?r($r(q,j??{})):r,X=Object.assign(Object.assign({},V),j),te=`.${l}`,re=$r(q,{componentCls:te,prefixCls:l,iconCls:`.${k}`,antCls:`.${D}`},X),Q=t(re,{hashId:A,prefixCls:l,rootPrefixCls:D,iconPrefixCls:k,overrideComponentToken:j});return F(f,X),[a.resetStyle===!1?null:SN(re,l),Q]}),A]}}const IN=(e,t,r,a)=>{const c=_o(e,t,r,Object.assign({resetStyle:!1,order:-998},a));return y=>{let{prefixCls:l}=y;return c(l),null}};function MN(e,t){return My.reduce((r,a)=>{const c=e[`${a}1`],f=e[`${a}3`],y=e[`${a}6`],l=e[`${a}7`];return Object.assign(Object.assign({},r),t(a,{lightColor:c,lightBorderColor:f,darkColor:y,textColor:l}))},{})}function PN(e,t){const r=e||{},a=r.inherit===!1||!t?AO:t;return f0(()=>{if(!e)return t;const c=Object.assign({},a.components);return Object.keys(e.components||{}).forEach(f=>{c[f]=Object.assign(Object.assign({},c[f]),e.components[f])}),Object.assign(Object.assign(Object.assign({},a),r),{token:Object.assign(Object.assign({},a.token),r.token),components:c})},[r,a],(c,f)=>c.some((y,l)=>{const w=f[l];return!nO(y,w,!0)}))}var AN=["children"],FO=T.createContext({});function RN(e){var t=e.children,r=Vr(e,AN);return T.createElement(FO.Provider,{value:r},t)}var ON=function(e){Pu(r,e);var t=Au(r);function r(){return qo(this,r),t.apply(this,arguments)}return Zo(r,[{key:"render",value:function(){return this.props.children}}]),r}(T.Component),iu="none",xv="appear",bv="enter",wv="leave",MI="none",ss="prepare",Qd="start",eh="active",DS="end",BO="prepared";function PI(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit".concat(e)]="webkit".concat(t),r["Moz".concat(e)]="moz".concat(t),r["ms".concat(e)]="MS".concat(t),r["O".concat(e)]="o".concat(t.toLowerCase()),r}function zN(e,t){var r={animationend:PI("Animation","AnimationEnd"),transitionend:PI("Transition","TransitionEnd")};return e&&("AnimationEvent"in t||delete r.animationend.animation,"TransitionEvent"in t||delete r.transitionend.transition),r}var kN=zN(no(),typeof window<"u"?window:{}),NO={};if(no()){var LN=document.createElement("div");NO=LN.style}var Sv={};function jO(e){if(Sv[e])return Sv[e];var t=kN[e];if(t)for(var r=Object.keys(t),a=r.length,c=0;c<a;c+=1){var f=r[c];if(Object.prototype.hasOwnProperty.call(t,f)&&f in NO)return Sv[e]=t[f],Sv[e]}return""}var UO=jO("animationend"),VO=jO("transitionend"),HO=!!(UO&&VO),AI=UO||"animationend",RI=VO||"transitionend";function OI(e,t){if(!e)return null;if(Kn(e)==="object"){var r=t.replace(/-\w/g,function(a){return a[1].toUpperCase()});return e[r]}return"".concat(e,"-").concat(t)}const DN=function(e){var t=T.useRef(),r=T.useRef(e);r.current=e;var a=T.useCallback(function(y){r.current(y)},[]);function c(y){y&&(y.removeEventListener(RI,a),y.removeEventListener(AI,a))}function f(y){t.current&&t.current!==y&&c(t.current),y&&y!==t.current&&(y.addEventListener(RI,a),y.addEventListener(AI,a),t.current=y)}return T.useEffect(function(){return function(){c(t.current)}},[]),[f,c]};var GO=no()?T.useLayoutEffect:T.useEffect;const $N=function(){var e=T.useRef(null);function t(){yi.cancel(e.current)}function r(a){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;t();var f=yi(function(){c<=1?a({isCanceled:function(){return f!==e.current}}):r(a,c-1)});e.current=f}return T.useEffect(function(){return function(){t()}},[]),[r,t]};var FN=[ss,Qd,eh,DS],BN=[ss,BO],WO=!1,NN=!0;function qO(e){return e===eh||e===DS}const jN=function(e,t,r){var a=sh(MI),c=Ut(a,2),f=c[0],y=c[1],l=$N(),w=Ut(l,2),C=w[0],A=w[1];function M(){y(ss,!0)}var k=t?BN:FN;return GO(function(){if(f!==MI&&f!==DS){var N=k.indexOf(f),D=k[N+1],U=r(f);U===WO?y(D,!0):D&&C(function(q){function F(){q.isCanceled()||y(D,!0)}U===!0?F():Promise.resolve(U).then(F)})}},[e,f]),T.useEffect(function(){return function(){A()}},[]),[M,f]};function UN(e,t,r,a){var c=a.motionEnter,f=c===void 0?!0:c,y=a.motionAppear,l=y===void 0?!0:y,w=a.motionLeave,C=w===void 0?!0:w,A=a.motionDeadline,M=a.motionLeaveImmediately,k=a.onAppearPrepare,N=a.onEnterPrepare,D=a.onLeavePrepare,U=a.onAppearStart,q=a.onEnterStart,F=a.onLeaveStart,j=a.onAppearActive,V=a.onEnterActive,X=a.onLeaveActive,te=a.onAppearEnd,re=a.onEnterEnd,Q=a.onLeaveEnd,ne=a.onVisibleChanged,ee=sh(),me=Ut(ee,2),ce=me[0],ie=me[1],fe=sh(iu),Te=Ut(fe,2),$e=Te[0],Fe=Te[1],Ne=sh(null),pe=Ut(Ne,2),He=pe[0],Be=pe[1],Ge=T.useRef(!1),Qe=T.useRef(null);function gt(){return r()}var St=T.useRef(!1);function xt(){Fe(iu,!0),Be(null,!0)}function Nt(ot){var rt=gt();if(!(ot&&!ot.deadline&&ot.target!==rt)){var Lt=St.current,Mt;$e===xv&&Lt?Mt=te==null?void 0:te(rt,ot):$e===bv&&Lt?Mt=re==null?void 0:re(rt,ot):$e===wv&&Lt&&(Mt=Q==null?void 0:Q(rt,ot)),$e!==iu&&Lt&&Mt!==!1&&xt()}}var jt=DN(Nt),bt=Ut(jt,1),ut=bt[0],Tt=function(rt){var Lt,Mt,sn;switch(rt){case xv:return Lt={},De(Lt,ss,k),De(Lt,Qd,U),De(Lt,eh,j),Lt;case bv:return Mt={},De(Mt,ss,N),De(Mt,Qd,q),De(Mt,eh,V),Mt;case wv:return sn={},De(sn,ss,D),De(sn,Qd,F),De(sn,eh,X),sn;default:return{}}},ft=T.useMemo(function(){return Tt($e)},[$e]),yt=jN($e,!e,function(ot){if(ot===ss){var rt=ft[ss];return rt?rt(gt()):WO}if(Ct in ft){var Lt;Be(((Lt=ft[Ct])===null||Lt===void 0?void 0:Lt.call(ft,gt(),null))||null)}return Ct===eh&&(ut(gt()),A>0&&(clearTimeout(Qe.current),Qe.current=setTimeout(function(){Nt({deadline:!0})},A))),Ct===BO&&xt(),NN}),ct=Ut(yt,2),It=ct[0],Ct=ct[1],Qt=qO(Ct);St.current=Qt,GO(function(){ie(t);var ot=Ge.current;Ge.current=!0;var rt;!ot&&t&&l&&(rt=xv),ot&&t&&f&&(rt=bv),(ot&&!t&&C||!ot&&M&&!t&&C)&&(rt=wv);var Lt=Tt(rt);rt&&(e||Lt[ss])?(Fe(rt),It()):Fe(iu)},[t]),T.useEffect(function(){($e===xv&&!l||$e===bv&&!f||$e===wv&&!C)&&Fe(iu)},[l,f,C]),T.useEffect(function(){return function(){Ge.current=!1,clearTimeout(Qe.current)}},[]);var Vt=T.useRef(!1);T.useEffect(function(){ce&&(Vt.current=!0),ce!==void 0&&$e===iu&&((Vt.current||ce)&&(ne==null||ne(ce)),Vt.current=!0)},[ce,$e]);var Bt=He;return ft[ss]&&Ct===Qd&&(Bt=lt({transition:"none"},Bt)),[$e,Ct,Bt,ce??t]}function VN(e){var t=e;Kn(e)==="object"&&(t=e.transitionSupport);function r(c,f){return!!(c.motionName&&t&&f!==!1)}var a=T.forwardRef(function(c,f){var y=c.visible,l=y===void 0?!0:y,w=c.removeOnLeave,C=w===void 0?!0:w,A=c.forceRender,M=c.children,k=c.motionName,N=c.leavedClassName,D=c.eventProps,U=T.useContext(FO),q=U.motion,F=r(c,q),j=T.useRef(),V=T.useRef();function X(){try{return j.current instanceof HTMLElement?j.current:Op(V.current)}catch{return null}}var te=UN(F,l,X,c),re=Ut(te,4),Q=re[0],ne=re[1],ee=re[2],me=re[3],ce=T.useRef(me);me&&(ce.current=!0);var ie=T.useCallback(function(Be){j.current=Be,SS(f,Be)},[f]),fe,Te=lt(lt({},D),{},{visible:l});if(!M)fe=null;else if(Q===iu)me?fe=M(lt({},Te),ie):!C&&ce.current&&N?fe=M(lt(lt({},Te),{},{className:N}),ie):A||!C&&!N?fe=M(lt(lt({},Te),{},{style:{display:"none"}}),ie):fe=null;else{var $e,Fe;ne===ss?Fe="prepare":qO(ne)?Fe="active":ne===Qd&&(Fe="start");var Ne=OI(k,"".concat(Q,"-").concat(Fe));fe=M(lt(lt({},Te),{},{className:$t(OI(k,Q),($e={},De($e,Ne,Ne&&Fe),De($e,k,typeof k=="string"),$e)),style:ee}),ie)}if(T.isValidElement(fe)&&_m(fe)){var pe=fe,He=pe.ref;He||(fe=T.cloneElement(fe,{ref:ie}))}return T.createElement(ON,{ref:V},fe)});return a.displayName="CSSMotion",a}const xm=VN(HO);var Wb="add",qb="keep",Zb="remove",o1="removed";function HN(e){var t;return e&&Kn(e)==="object"&&"key"in e?t=e:t={key:e},lt(lt({},t),{},{key:String(t.key)})}function Xb(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return e.map(HN)}function GN(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=[],a=0,c=t.length,f=Xb(e),y=Xb(t);f.forEach(function(C){for(var A=!1,M=a;M<c;M+=1){var k=y[M];if(k.key===C.key){a<M&&(r=r.concat(y.slice(a,M).map(function(N){return lt(lt({},N),{},{status:Wb})})),a=M),r.push(lt(lt({},k),{},{status:qb})),a+=1,A=!0;break}}A||r.push(lt(lt({},C),{},{status:Zb}))}),a<c&&(r=r.concat(y.slice(a).map(function(C){return lt(lt({},C),{},{status:Wb})})));var l={};r.forEach(function(C){var A=C.key;l[A]=(l[A]||0)+1});var w=Object.keys(l).filter(function(C){return l[C]>1});return w.forEach(function(C){r=r.filter(function(A){var M=A.key,k=A.status;return M!==C||k!==Zb}),r.forEach(function(A){A.key===C&&(A.status=qb)})}),r}var WN=["component","children","onVisibleChanged","onAllRemoved"],qN=["status"],ZN=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearPrepare","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];function XN(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:xm,r=function(a){Pu(f,a);var c=Au(f);function f(){var y;qo(this,f);for(var l=arguments.length,w=new Array(l),C=0;C<l;C++)w[C]=arguments[C];return y=c.call.apply(c,[this].concat(w)),De(vn(y),"state",{keyEntities:[]}),De(vn(y),"removeKey",function(A){var M=y.state.keyEntities,k=M.map(function(N){return N.key!==A?N:lt(lt({},N),{},{status:o1})});return y.setState({keyEntities:k}),k.filter(function(N){var D=N.status;return D!==o1}).length}),y}return Zo(f,[{key:"render",value:function(){var l=this,w=this.state.keyEntities,C=this.props,A=C.component,M=C.children,k=C.onVisibleChanged,N=C.onAllRemoved,D=Vr(C,WN),U=A||T.Fragment,q={};return ZN.forEach(function(F){q[F]=D[F],delete D[F]}),delete D.keys,T.createElement(U,D,w.map(function(F,j){var V=F.status,X=Vr(F,qN),te=V===Wb||V===qb;return T.createElement(t,Cn({},q,{key:X.key,visible:te,eventProps:X,onVisibleChanged:function(Q){if(k==null||k(Q,{key:X.key}),!Q){var ne=l.removeKey(X.key);ne===0&&N&&N()}}}),function(re,Q){return M(lt(lt({},re),{},{index:j}),Q)})}))}}],[{key:"getDerivedStateFromProps",value:function(l,w){var C=l.keys,A=w.keyEntities,M=Xb(C),k=GN(A,M);return{keyEntities:k.filter(function(N){var D=A.find(function(U){var q=U.key;return N.key===q});return!(D&&D.status===o1&&N.status===Zb)})}}}]),f}(T.Component);return De(r,"defaultProps",{component:"div"}),r}const KN=XN(HO);function YN(e){const{children:t}=e,[,r]=vs(),{motion:a}=r,c=T.useRef(!1);return c.current=c.current||a===!1,c.current?T.createElement(RN,{motion:a},t):t}const JN=()=>null;var QN=globalThis&&globalThis.__rest||function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(r[a[c]]=e[a[c]]);return r};const e6=["getTargetContainer","getPopupContainer","renderEmpty","pageHeader","input","pagination","form","select","button"],t6="ant";let Py,ZO,XO;function Hv(){return Py||t6}function n6(){return ZO||kS}function r6(e){return Object.keys(e).some(t=>t.endsWith("Color"))}const i6=e=>{let{prefixCls:t,iconPrefixCls:r,theme:a}=e;t!==void 0&&(Py=t),r!==void 0&&(ZO=r),a&&(r6(a)?pN(Hv(),a):XO=a)},KO=()=>({getPrefixCls:(e,t)=>t||(e?`${Hv()}-${e}`:Hv()),getIconPrefixCls:n6,getRootPrefixCls:()=>Py||Hv(),getTheme:()=>XO}),o6=e=>{const{children:t,csp:r,autoInsertSpaceInButton:a,alert:c,anchor:f,form:y,locale:l,componentSize:w,direction:C,space:A,virtual:M,dropdownMatchSelectWidth:k,popupMatchSelectWidth:N,popupOverflow:D,legacyLocale:U,parentContext:q,iconPrefixCls:F,theme:j,componentDisabled:V,segmented:X,statistic:te,spin:re,calendar:Q,carousel:ne,cascader:ee,collapse:me,typography:ce,checkbox:ie,descriptions:fe,divider:Te,drawer:$e,skeleton:Fe,steps:Ne,image:pe,layout:He,list:Be,mentions:Ge,modal:Qe,progress:gt,result:St,slider:xt,breadcrumb:Nt,menu:jt,pagination:bt,input:ut,empty:Tt,badge:ft,radio:yt,rate:ct,switch:It,transfer:Ct,avatar:Qt,message:Vt,tag:Bt,table:ot,card:rt,tabs:Lt,timeline:Mt,timePicker:sn,upload:An,notification:Mn,tree:on,colorPicker:Vn,datePicker:Nn,rangePicker:zn,flex:yn,wave:rn,dropdown:Wn,warning:jn}=e,fr=T.useCallback((Me,ke)=>{const{prefixCls:we}=e;if(ke)return ke;const Le=we||q.getPrefixCls("");return Me?`${Le}-${Me}`:Le},[q.getPrefixCls,e.prefixCls]),or=F||q.iconPrefixCls||kS,qn=r||q.csp;$O(or,qn);const Qn=PN(j,q.theme),Rr={csp:qn,autoInsertSpaceInButton:a,alert:c,anchor:f,locale:l||U,direction:C,space:A,virtual:M,popupMatchSelectWidth:N??k,popupOverflow:D,getPrefixCls:fr,iconPrefixCls:or,theme:Qn,segmented:X,statistic:te,spin:re,calendar:Q,carousel:ne,cascader:ee,collapse:me,typography:ce,checkbox:ie,descriptions:fe,divider:Te,drawer:$e,skeleton:Fe,steps:Ne,image:pe,input:ut,layout:He,list:Be,mentions:Ge,modal:Qe,progress:gt,result:St,slider:xt,breadcrumb:Nt,menu:jt,pagination:bt,empty:Tt,badge:ft,radio:yt,rate:ct,switch:It,transfer:Ct,avatar:Qt,message:Vt,tag:Bt,table:ot,card:rt,tabs:Lt,timeline:Mt,timePicker:sn,upload:An,notification:Mn,tree:on,colorPicker:Vn,datePicker:Nn,rangePicker:zn,flex:yn,wave:rn,dropdown:Wn,warning:jn},_e=Object.assign({},q);Object.keys(Rr).forEach(Me=>{Rr[Me]!==void 0&&(_e[Me]=Rr[Me])}),e6.forEach(Me=>{const ke=e[Me];ke&&(_e[Me]=ke)});const W=f0(()=>_e,_e,(Me,ke)=>{const we=Object.keys(Me),Le=Object.keys(ke);return we.length!==Le.length||we.some(je=>Me[je]!==ke[je])}),J=T.useMemo(()=>({prefixCls:or,csp:qn}),[or,qn]);let de=T.createElement(T.Fragment,null,T.createElement(JN,{dropdownMatchSelectWidth:k}),t);const Se=T.useMemo(()=>{var Me,ke,we,Le;return Jd(((Me=xh.Form)===null||Me===void 0?void 0:Me.defaultValidateMessages)||{},((we=(ke=W.locale)===null||ke===void 0?void 0:ke.Form)===null||we===void 0?void 0:we.defaultValidateMessages)||{},((Le=W.form)===null||Le===void 0?void 0:Le.validateMessages)||{},(y==null?void 0:y.validateMessages)||{})},[W,y==null?void 0:y.validateMessages]);Object.keys(Se).length>0&&(de=T.createElement(w5.Provider,{value:Se},de)),l&&(de=T.createElement(O5,{locale:l,_ANT_MARK__:A5},de)),(or||qn)&&(de=T.createElement(RS.Provider,{value:J},de)),w&&(de=T.createElement(gN,{size:w},de)),de=T.createElement(YN,null,de);const Ie=T.useMemo(()=>{const Me=Qn||{},{algorithm:ke,token:we,components:Le}=Me,je=QN(Me,["algorithm","token","components"]),Je=ke&&(!Array.isArray(ke)||ke.length>0)?kb(ke):PO,We={};Object.entries(Le||{}).forEach(Yt=>{let[Xt,un]=Yt;const ln=Object.assign({},un);"algorithm"in ln&&(ln.algorithm===!0?ln.theme=Je:(Array.isArray(ln.algorithm)||typeof ln.algorithm=="function")&&(ln.theme=kb(ln.algorithm)),delete ln.algorithm),We[Xt]=ln});const wt=Object.assign(Object.assign({},om),we);return Object.assign(Object.assign({},je),{theme:Je,token:wt,components:We,override:Object.assign({override:wt},We)})},[Qn]);return j&&(de=T.createElement(RO.Provider,{value:Ie},de)),W.warning&&(de=T.createElement(b5.Provider,{value:W.warning},de)),V!==void 0&&(de=T.createElement(mN,{disabled:V},de)),T.createElement(cr.Provider,{value:W},de)},Ah=e=>{const t=T.useContext(cr),r=T.useContext(OS);return T.createElement(o6,Object.assign({parentContext:t,legacyLocale:r},e))};Ah.ConfigContext=cr;Ah.SizeContext=_0;Ah.config=i6;Ah.useConfig=vN;Object.defineProperty(Ah,"SizeContext",{get:()=>_0});const YO=Ah;var a6={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z"}}]},name:"check-circle",theme:"filled"};const s6=a6;function JO(e){var t;return e==null||(t=e.getRootNode)===null||t===void 0?void 0:t.call(e)}function l6(e){return JO(e)instanceof ShadowRoot}function Ay(e){return l6(e)?JO(e):null}function c6(e){return e.replace(/-(.)/g,function(t,r){return r.toUpperCase()})}function u6(e,t){Vo(e,"[@ant-design/icons] ".concat(t))}function zI(e){return Kn(e)==="object"&&typeof e.name=="string"&&typeof e.theme=="string"&&(Kn(e.icon)==="object"||typeof e.icon=="function")}function kI(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.keys(e).reduce(function(t,r){var a=e[r];switch(r){case"class":t.className=a,delete t.class;break;default:delete t[r],t[c6(r)]=a}return t},{})}function Kb(e,t,r){return r?st.createElement(e.tag,lt(lt({key:t},kI(e.attrs)),r),(e.children||[]).map(function(a,c){return Kb(a,"".concat(t,"-").concat(e.tag,"-").concat(c))})):st.createElement(e.tag,lt({key:t},kI(e.attrs)),(e.children||[]).map(function(a,c){return Kb(a,"".concat(t,"-").concat(e.tag,"-").concat(c))}))}function QO(e){return Cu(e)[0]}function ez(e){return e?Array.isArray(e)?e:[e]:[]}var d6=`
.anticon {
  display: inline-block;
  color: inherit;
  font-style: normal;
  line-height: 0;
  text-align: center;
  text-transform: none;
  vertical-align: -0.125em;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.anticon > * {
  line-height: 1;
}

.anticon svg {
  display: inline-block;
}

.anticon::before {
  display: none;
}

.anticon .anticon-icon {
  display: block;
}

.anticon[tabindex] {
  cursor: pointer;
}

.anticon-spin::before,
.anticon-spin {
  display: inline-block;
  -webkit-animation: loadingCircle 1s infinite linear;
  animation: loadingCircle 1s infinite linear;
}

@-webkit-keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
`,h6=function(t){var r=T.useContext(RS),a=r.csp,c=r.prefixCls,f=d6;c&&(f=f.replace(/anticon/g,c)),T.useEffect(function(){var y=t.current,l=Ay(y);yh(f,"@ant-design-icons",{prepend:!0,csp:a,attachTo:l})},[])},f6=["icon","className","onClick","style","primaryColor","secondaryColor"],Lp={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};function p6(e){var t=e.primaryColor,r=e.secondaryColor;Lp.primaryColor=t,Lp.secondaryColor=r||QO(t),Lp.calculated=!!r}function m6(){return lt({},Lp)}var x0=function(t){var r=t.icon,a=t.className,c=t.onClick,f=t.style,y=t.primaryColor,l=t.secondaryColor,w=Vr(t,f6),C=T.useRef(),A=Lp;if(y&&(A={primaryColor:y,secondaryColor:l||QO(y)}),h6(C),u6(zI(r),"icon should be icon definiton, but got ".concat(r)),!zI(r))return null;var M=r;return M&&typeof M.icon=="function"&&(M=lt(lt({},M),{},{icon:M.icon(A.primaryColor,A.secondaryColor)})),Kb(M.icon,"svg-".concat(M.name),lt(lt({className:a,onClick:c,style:f,"data-icon":M.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},w),{},{ref:C}))};x0.displayName="IconReact";x0.getTwoToneColors=m6;x0.setTwoToneColors=p6;const $S=x0;function tz(e){var t=ez(e),r=Ut(t,2),a=r[0],c=r[1];return $S.setTwoToneColors({primaryColor:a,secondaryColor:c})}function g6(){var e=$S.getTwoToneColors();return e.calculated?[e.primaryColor,e.secondaryColor]:e.primaryColor}var v6=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];tz(K5.primary);var b0=T.forwardRef(function(e,t){var r,a=e.className,c=e.icon,f=e.spin,y=e.rotate,l=e.tabIndex,w=e.onClick,C=e.twoToneColor,A=Vr(e,v6),M=T.useContext(RS),k=M.prefixCls,N=k===void 0?"anticon":k,D=M.rootClassName,U=$t(D,N,(r={},De(r,"".concat(N,"-").concat(c.name),!!c.name),De(r,"".concat(N,"-spin"),!!f||c.name==="loading"),r),a),q=l;q===void 0&&w&&(q=-1);var F=y?{msTransform:"rotate(".concat(y,"deg)"),transform:"rotate(".concat(y,"deg)")}:void 0,j=ez(C),V=Ut(j,2),X=V[0],te=V[1];return T.createElement("span",Cn({role:"img","aria-label":c.name},A,{ref:t,tabIndex:q,onClick:w,className:U}),T.createElement($S,{icon:c,primaryColor:X,secondaryColor:te,style:F}))});b0.displayName="AntdIcon";b0.getTwoToneColor=g6;b0.setTwoToneColor=tz;const Xi=b0;var y6=function(t,r){return T.createElement(Xi,Cn({},t,{ref:r,icon:s6}))};const _6=T.forwardRef(y6);var x6={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm127.98 274.82h-.04l-.08.06L512 466.75 384.14 338.88c-.04-.05-.06-.06-.08-.06a.12.12 0 00-.07 0c-.03 0-.05.01-.09.05l-45.02 45.02a.2.2 0 00-.05.09.12.12 0 000 .07v.02a.27.27 0 00.06.06L466.75 512 338.88 639.86c-.05.04-.06.06-.06.08a.12.12 0 000 .07c0 .03.01.05.05.09l45.02 45.02a.2.2 0 00.09.05.12.12 0 00.07 0c.02 0 .04-.01.08-.05L512 557.25l127.86 127.87c.04.04.06.05.08.05a.12.12 0 00.07 0c.03 0 .05-.01.09-.05l45.02-45.02a.2.2 0 00.05-.09.12.12 0 000-.07v-.02a.27.27 0 00-.05-.06L557.25 512l127.87-127.86c.04-.04.05-.06.05-.08a.12.12 0 000-.07c0-.03-.01-.05-.05-.09l-45.02-45.02a.2.2 0 00-.09-.05.12.12 0 00-.07 0z"}}]},name:"close-circle",theme:"filled"};const b6=x6;var w6=function(t,r){return T.createElement(Xi,Cn({},t,{ref:r,icon:b6}))};const w0=T.forwardRef(w6);var S6={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M799.86 166.31c.02 0 .04.02.08.06l57.69 57.7c.04.03.05.05.06.08a.12.12 0 010 .06c0 .03-.02.05-.06.09L569.93 512l287.7 287.7c.04.04.05.06.06.09a.12.12 0 010 .07c0 .02-.02.04-.06.08l-57.7 57.69c-.03.04-.05.05-.07.06a.12.12 0 01-.07 0c-.03 0-.05-.02-.09-.06L512 569.93l-287.7 287.7c-.04.04-.06.05-.09.06a.12.12 0 01-.07 0c-.02 0-.04-.02-.08-.06l-57.69-57.7c-.04-.03-.05-.05-.06-.07a.12.12 0 010-.07c0-.03.02-.05.06-.09L454.07 512l-287.7-287.7c-.04-.04-.05-.06-.06-.09a.12.12 0 010-.07c0-.02.02-.04.06-.08l57.7-57.69c.03-.04.05-.05.07-.06a.12.12 0 01.07 0c.03 0 .05.02.09.06L512 454.07l287.7-287.7c.04-.04.06-.05.09-.06a.12.12 0 01.07 0z"}}]},name:"close",theme:"outlined"};const E6=S6;var C6=function(t,r){return T.createElement(Xi,Cn({},t,{ref:r,icon:E6}))};const nz=T.forwardRef(C6);var T6={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm-32 232c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V296zm32 440a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"exclamation-circle",theme:"filled"};const I6=T6;var M6=function(t,r){return T.createElement(Xi,Cn({},t,{ref:r,icon:I6}))};const P6=T.forwardRef(M6);var A6={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm32 664c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272zm-32-344a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"info-circle",theme:"filled"};const R6=A6;var O6=function(t,r){return T.createElement(Xi,Cn({},t,{ref:r,icon:R6}))};const z6=T.forwardRef(O6);var k6=`accept acceptCharset accessKey action allowFullScreen allowTransparency
    alt async autoComplete autoFocus autoPlay capture cellPadding cellSpacing challenge
    charSet checked classID className colSpan cols content contentEditable contextMenu
    controls coords crossOrigin data dateTime default defer dir disabled download draggable
    encType form formAction formEncType formMethod formNoValidate formTarget frameBorder
    headers height hidden high href hrefLang htmlFor httpEquiv icon id inputMode integrity
    is keyParams keyType kind label lang list loop low manifest marginHeight marginWidth max maxLength media
    mediaGroup method min minLength multiple muted name noValidate nonce open
    optimum pattern placeholder poster preload radioGroup readOnly rel required
    reversed role rowSpan rows sandbox scope scoped scrolling seamless selected
    shape size sizes span spellCheck src srcDoc srcLang srcSet start step style
    summary tabIndex target title type useMap value width wmode wrap`,L6=`onCopy onCut onPaste onCompositionEnd onCompositionStart onCompositionUpdate onKeyDown
    onKeyPress onKeyUp onFocus onBlur onChange onInput onSubmit onClick onContextMenu onDoubleClick
    onDrag onDragEnd onDragEnter onDragExit onDragLeave onDragOver onDragStart onDrop onMouseDown
    onMouseEnter onMouseLeave onMouseMove onMouseOut onMouseOver onMouseUp onSelect onTouchCancel
    onTouchEnd onTouchMove onTouchStart onScroll onWheel onAbort onCanPlay onCanPlayThrough
    onDurationChange onEmptied onEncrypted onEnded onError onLoadedData onLoadedMetadata
    onLoadStart onPause onPlay onPlaying onProgress onRateChange onSeeked onSeeking onStalled onSuspend onTimeUpdate onVolumeChange onWaiting onLoad onError`,D6="".concat(k6," ").concat(L6).split(/[\s\n]+/),$6="aria-",F6="data-";function LI(e,t){return e.indexOf(t)===0}function bh(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r;t===!1?r={aria:!0,data:!0,attr:!0}:t===!0?r={aria:!0}:r=lt({},t);var a={};return Object.keys(e).forEach(function(c){(r.aria&&(c==="role"||LI(c,$6))||r.data&&LI(c,F6)||r.attr&&D6.includes(c))&&(a[c]=e[c])}),a}const{isValidElement:sm}=jy;function rz(e){return e&&sm(e)&&e.type===T.Fragment}function B6(e,t,r){return sm(e)?T.cloneElement(e,typeof r=="function"?r(e.props||{}):r):t}function vl(e,t){return B6(e,e,t)}var Ht={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(t){var r=t.keyCode;if(t.altKey&&!t.ctrlKey||t.metaKey||r>=Ht.F1&&r<=Ht.F12)return!1;switch(r){case Ht.ALT:case Ht.CAPS_LOCK:case Ht.CONTEXT_MENU:case Ht.CTRL:case Ht.DOWN:case Ht.END:case Ht.ESC:case Ht.HOME:case Ht.INSERT:case Ht.LEFT:case Ht.MAC_FF_META:case Ht.META:case Ht.NUMLOCK:case Ht.NUM_CENTER:case Ht.PAGE_DOWN:case Ht.PAGE_UP:case Ht.PAUSE:case Ht.PRINT_SCREEN:case Ht.RIGHT:case Ht.SHIFT:case Ht.UP:case Ht.WIN_KEY:case Ht.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(t){if(t>=Ht.ZERO&&t<=Ht.NINE||t>=Ht.NUM_ZERO&&t<=Ht.NUM_MULTIPLY||t>=Ht.A&&t<=Ht.Z||window.navigator.userAgent.indexOf("WebKit")!==-1&&t===0)return!0;switch(t){case Ht.SPACE:case Ht.QUESTION_MARK:case Ht.NUM_PLUS:case Ht.NUM_MINUS:case Ht.NUM_PERIOD:case Ht.NUM_DIVISION:case Ht.SEMICOLON:case Ht.DASH:case Ht.EQUALS:case Ht.COMMA:case Ht.PERIOD:case Ht.SLASH:case Ht.APOSTROPHE:case Ht.SINGLE_QUOTE:case Ht.OPEN_SQUARE_BRACKET:case Ht.BACKSLASH:case Ht.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}},iz=T.forwardRef(function(e,t){var r=e.prefixCls,a=e.style,c=e.className,f=e.duration,y=f===void 0?4.5:f,l=e.eventKey,w=e.content,C=e.closable,A=e.closeIcon,M=A===void 0?"x":A,k=e.props,N=e.onClick,D=e.onNoticeClose,U=e.times,q=e.hovering,F=T.useState(!1),j=Ut(F,2),V=j[0],X=j[1],te=q||V,re=function(){D(l)},Q=function(me){(me.key==="Enter"||me.code==="Enter"||me.keyCode===Ht.ENTER)&&re()};T.useEffect(function(){if(!te&&y>0){var ee=setTimeout(function(){re()},y*1e3);return function(){clearTimeout(ee)}}},[y,te,U]);var ne="".concat(r,"-notice");return T.createElement("div",Cn({},k,{ref:t,className:$t(ne,c,De({},"".concat(ne,"-closable"),C)),style:a,onMouseEnter:function(me){var ce;X(!0),k==null||(ce=k.onMouseEnter)===null||ce===void 0||ce.call(k,me)},onMouseLeave:function(me){var ce;X(!1),k==null||(ce=k.onMouseLeave)===null||ce===void 0||ce.call(k,me)},onClick:N}),T.createElement("div",{className:"".concat(ne,"-content")},w),C&&T.createElement("a",{tabIndex:0,className:"".concat(ne,"-close"),onKeyDown:Q,onClick:function(me){me.preventDefault(),me.stopPropagation(),re()}},M))}),oz=st.createContext({}),N6=function(t){var r=t.children,a=t.classNames;return st.createElement(oz.Provider,{value:{classNames:a}},r)},DI=8,$I=3,FI=16,j6=function(t){var r={offset:DI,threshold:$I,gap:FI};if(t&&Kn(t)==="object"){var a,c,f;r.offset=(a=t.offset)!==null&&a!==void 0?a:DI,r.threshold=(c=t.threshold)!==null&&c!==void 0?c:$I,r.gap=(f=t.gap)!==null&&f!==void 0?f:FI}return[!!t,r]},U6=["className","style","classNames","styles"],V6=function(t){var r,a=t.configList,c=t.placement,f=t.prefixCls,y=t.className,l=t.style,w=t.motion,C=t.onAllNoticeRemoved,A=t.onNoticeClose,M=t.stack,k=T.useContext(oz),N=k.classNames,D=T.useRef({}),U=T.useState(null),q=Ut(U,2),F=q[0],j=q[1],V=T.useState([]),X=Ut(V,2),te=X[0],re=X[1],Q=a.map(function(Ne){return{config:Ne,key:String(Ne.key)}}),ne=j6(M),ee=Ut(ne,2),me=ee[0],ce=ee[1],ie=ce.offset,fe=ce.threshold,Te=ce.gap,$e=me&&(te.length>0||Q.length<=fe),Fe=typeof w=="function"?w(c):w;return T.useEffect(function(){me&&te.length>1&&re(function(Ne){return Ne.filter(function(pe){return Q.some(function(He){var Be=He.key;return pe===Be})})})},[te,Q,me]),T.useEffect(function(){var Ne;if(me&&D.current[(Ne=Q[Q.length-1])===null||Ne===void 0?void 0:Ne.key]){var pe;j(D.current[(pe=Q[Q.length-1])===null||pe===void 0?void 0:pe.key])}},[Q,me]),st.createElement(KN,Cn({key:c,className:$t(f,"".concat(f,"-").concat(c),N==null?void 0:N.list,y,(r={},De(r,"".concat(f,"-stack"),!!me),De(r,"".concat(f,"-stack-expanded"),$e),r)),style:l,keys:Q,motionAppear:!0},Fe,{onAllRemoved:function(){C(c)}}),function(Ne,pe){var He=Ne.config,Be=Ne.className,Ge=Ne.style,Qe=Ne.index,gt=He,St=gt.key,xt=gt.times,Nt=String(St),jt=He,bt=jt.className,ut=jt.style,Tt=jt.classNames,ft=jt.styles,yt=Vr(jt,U6),ct=Q.findIndex(function(Mn){return Mn.key===Nt}),It={};if(me){var Ct=Q.length-1-(ct>-1?ct:Qe-1),Qt=c==="top"||c==="bottom"?"-50%":"0";if(Ct>0){var Vt,Bt,ot;It.height=$e?(Vt=D.current[Nt])===null||Vt===void 0?void 0:Vt.offsetHeight:F==null?void 0:F.offsetHeight;for(var rt=0,Lt=0;Lt<Ct;Lt++){var Mt;rt+=((Mt=D.current[Q[Q.length-1-Lt].key])===null||Mt===void 0?void 0:Mt.offsetHeight)+Te}var sn=($e?rt:Ct*ie)*(c.startsWith("top")?1:-1),An=!$e&&F!==null&&F!==void 0&&F.offsetWidth&&(Bt=D.current[Nt])!==null&&Bt!==void 0&&Bt.offsetWidth?((F==null?void 0:F.offsetWidth)-ie*2*(Ct<3?Ct:3))/((ot=D.current[Nt])===null||ot===void 0?void 0:ot.offsetWidth):1;It.transform="translate3d(".concat(Qt,", ").concat(sn,"px, 0) scaleX(").concat(An,")")}else It.transform="translate3d(".concat(Qt,", 0, 0)")}return st.createElement("div",{ref:pe,className:$t("".concat(f,"-notice-wrapper"),Be,Tt==null?void 0:Tt.wrapper),style:lt(lt(lt({},Ge),It),ft==null?void 0:ft.wrapper),onMouseEnter:function(){return re(function(on){return on.includes(Nt)?on:[].concat(mn(on),[Nt])})},onMouseLeave:function(){return re(function(on){return on.filter(function(Vn){return Vn!==Nt})})}},st.createElement(iz,Cn({},yt,{ref:function(on){ct>-1?D.current[Nt]=on:delete D.current[Nt]},prefixCls:f,classNames:Tt,styles:ft,className:$t(bt,N==null?void 0:N.notice),style:ut,times:xt,key:St,eventKey:St,onNoticeClose:A,hovering:me&&te.length>0})))})},H6=T.forwardRef(function(e,t){var r=e.prefixCls,a=r===void 0?"rc-notification":r,c=e.container,f=e.motion,y=e.maxCount,l=e.className,w=e.style,C=e.onAllRemoved,A=e.stack,M=e.renderNotifications,k=T.useState([]),N=Ut(k,2),D=N[0],U=N[1],q=function(ee){var me,ce=D.find(function(ie){return ie.key===ee});ce==null||(me=ce.onClose)===null||me===void 0||me.call(ce),U(function(ie){return ie.filter(function(fe){return fe.key!==ee})})};T.useImperativeHandle(t,function(){return{open:function(ee){U(function(me){var ce=mn(me),ie=ce.findIndex(function($e){return $e.key===ee.key}),fe=lt({},ee);if(ie>=0){var Te;fe.times=(((Te=me[ie])===null||Te===void 0?void 0:Te.times)||0)+1,ce[ie]=fe}else fe.times=0,ce.push(fe);return y>0&&ce.length>y&&(ce=ce.slice(-y)),ce})},close:function(ee){q(ee)},destroy:function(){U([])}}});var F=T.useState({}),j=Ut(F,2),V=j[0],X=j[1];T.useEffect(function(){var ne={};D.forEach(function(ee){var me=ee.placement,ce=me===void 0?"topRight":me;ce&&(ne[ce]=ne[ce]||[],ne[ce].push(ee))}),Object.keys(V).forEach(function(ee){ne[ee]=ne[ee]||[]}),X(ne)},[D]);var te=function(ee){X(function(me){var ce=lt({},me),ie=ce[ee]||[];return ie.length||delete ce[ee],ce})},re=T.useRef(!1);if(T.useEffect(function(){Object.keys(V).length>0?re.current=!0:re.current&&(C==null||C(),re.current=!1)},[V]),!c)return null;var Q=Object.keys(V);return vc.createPortal(T.createElement(T.Fragment,null,Q.map(function(ne){var ee=V[ne],me=T.createElement(V6,{key:ne,configList:ee,placement:ne,prefixCls:a,className:l==null?void 0:l(ne),style:w==null?void 0:w(ne),motion:f,onNoticeClose:q,onAllNoticeRemoved:te,stack:A});return M?M(me,{prefixCls:a,key:ne}):me})),c)}),G6=["getContainer","motion","prefixCls","maxCount","className","style","onAllRemoved","stack","renderNotifications"],W6=function(){return document.body},BI=0;function q6(){for(var e={},t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return r.forEach(function(c){c&&Object.keys(c).forEach(function(f){var y=c[f];y!==void 0&&(e[f]=y)})}),e}function Z6(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.getContainer,r=t===void 0?W6:t,a=e.motion,c=e.prefixCls,f=e.maxCount,y=e.className,l=e.style,w=e.onAllRemoved,C=e.stack,A=e.renderNotifications,M=Vr(e,G6),k=T.useState(),N=Ut(k,2),D=N[0],U=N[1],q=T.useRef(),F=T.createElement(H6,{container:D,ref:q,prefixCls:c,motion:a,maxCount:f,className:y,style:l,onAllRemoved:w,stack:C,renderNotifications:A}),j=T.useState([]),V=Ut(j,2),X=V[0],te=V[1],re=T.useMemo(function(){return{open:function(ne){var ee=q6(M,ne);(ee.key===null||ee.key===void 0)&&(ee.key="rc-notification-".concat(BI),BI+=1),te(function(me){return[].concat(mn(me),[{type:"open",config:ee}])})},close:function(ne){te(function(ee){return[].concat(mn(ee),[{type:"close",key:ne}])})},destroy:function(){te(function(ne){return[].concat(mn(ne),[{type:"destroy"}])})}}},[]);return T.useEffect(function(){U(r())}),T.useEffect(function(){q.current&&X.length&&(X.forEach(function(Q){switch(Q.type){case"open":q.current.open(Q.config);break;case"close":q.current.close(Q.key);break;case"destroy":q.current.destroy();break}}),te(function(Q){return Q.filter(function(ne){return!X.includes(ne)})}))},[X]),[re,F]}var X6={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"}}]},name:"loading",theme:"outlined"};const K6=X6;var Y6=function(t,r){return T.createElement(Xi,Cn({},t,{ref:r,icon:K6}))};const FS=T.forwardRef(Y6),J6=e=>{const{componentCls:t,iconCls:r,boxShadow:a,colorText:c,colorSuccess:f,colorError:y,colorWarning:l,colorInfo:w,fontSizeLG:C,motionEaseInOutCirc:A,motionDurationSlow:M,marginXS:k,paddingXS:N,borderRadiusLG:D,zIndexPopup:U,contentPadding:q,contentBg:F}=e,j=`${t}-notice`,V=new Cr("MessageMoveIn",{"0%":{padding:0,transform:"translateY(-100%)",opacity:0},"100%":{padding:N,transform:"translateY(0)",opacity:1}}),X=new Cr("MessageMoveOut",{"0%":{maxHeight:e.height,padding:N,opacity:1},"100%":{maxHeight:0,padding:0,opacity:0}}),te={padding:N,textAlign:"center",[`${t}-custom-content > ${r}`]:{verticalAlign:"text-bottom",marginInlineEnd:k,fontSize:C},[`${j}-content`]:{display:"inline-block",padding:q,background:F,borderRadius:D,boxShadow:a,pointerEvents:"all"},[`${t}-success > ${r}`]:{color:f},[`${t}-error > ${r}`]:{color:y},[`${t}-warning > ${r}`]:{color:l},[`${t}-info > ${r},
      ${t}-loading > ${r}`]:{color:w}};return[{[t]:Object.assign(Object.assign({},da(e)),{color:c,position:"fixed",top:k,width:"100%",pointerEvents:"none",zIndex:U,[`${t}-move-up`]:{animationFillMode:"forwards"},[`
        ${t}-move-up-appear,
        ${t}-move-up-enter
      `]:{animationName:V,animationDuration:M,animationPlayState:"paused",animationTimingFunction:A},[`
        ${t}-move-up-appear${t}-move-up-appear-active,
        ${t}-move-up-enter${t}-move-up-enter-active
      `]:{animationPlayState:"running"},[`${t}-move-up-leave`]:{animationName:X,animationDuration:M,animationPlayState:"paused",animationTimingFunction:A},[`${t}-move-up-leave${t}-move-up-leave-active`]:{animationPlayState:"running"},"&-rtl":{direction:"rtl",span:{direction:"rtl"}}})},{[t]:{[`${j}-wrapper`]:Object.assign({},te)}},{[`${t}-notice-pure-panel`]:Object.assign(Object.assign({},te),{padding:0,textAlign:"start"})}]},az=_o("Message",e=>{const t=$r(e,{height:150});return[J6(t)]},e=>({zIndexPopup:e.zIndexPopupBase+10,contentBg:e.colorBgElevated,contentPadding:`${(e.controlHeightLG-e.fontSize*e.lineHeight)/2}px ${e.paddingSM}px`}));var Q6=globalThis&&globalThis.__rest||function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(r[a[c]]=e[a[c]]);return r};const ej={info:T.createElement(z6,null),success:T.createElement(_6,null),error:T.createElement(w0,null),warning:T.createElement(P6,null),loading:T.createElement(FS,null)},sz=e=>{let{prefixCls:t,type:r,icon:a,children:c}=e;return T.createElement("div",{className:$t(`${t}-custom-content`,`${t}-${r}`)},a||ej[r],T.createElement("span",null,c))},tj=e=>{const{prefixCls:t,className:r,type:a,icon:c,content:f}=e,y=Q6(e,["prefixCls","className","type","icon","content"]),{getPrefixCls:l}=T.useContext(cr),w=t||l("message"),[,C]=az(w);return T.createElement(iz,Object.assign({},y,{prefixCls:w,className:$t(r,C,`${w}-notice-pure-panel`),eventKey:"pure",duration:null,content:T.createElement(sz,{prefixCls:w,type:a,icon:c},f)}))},nj=tj;function rj(e,t){return{motionName:t??`${e}-move-up`}}function BS(e){let t;const r=new Promise(c=>{t=e(()=>{c(!0)})}),a=()=>{t==null||t()};return a.then=(c,f)=>r.then(c,f),a.promise=r,a}var ij=globalThis&&globalThis.__rest||function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(r[a[c]]=e[a[c]]);return r};const oj=8,aj=3,sj=e=>{let{children:t,prefixCls:r}=e;const[,a]=az(r);return T.createElement(N6,{classNames:{list:a,notice:a}},t)},lj=(e,t)=>{let{prefixCls:r,key:a}=t;return T.createElement(sj,{prefixCls:r,key:a},e)},cj=T.forwardRef((e,t)=>{const{top:r,prefixCls:a,getContainer:c,maxCount:f,duration:y=aj,rtl:l,transitionName:w,onAllRemoved:C}=e,{getPrefixCls:A,getPopupContainer:M,message:k}=T.useContext(cr),N=a||A("message"),D=()=>({left:"50%",transform:"translateX(-50%)",top:r??oj}),U=()=>$t({[`${N}-rtl`]:l}),q=()=>rj(N,w),F=T.createElement("span",{className:`${N}-close-x`},T.createElement(nz,{className:`${N}-close-icon`})),[j,V]=Z6({prefixCls:N,style:D,className:U,motion:q,closable:!1,closeIcon:F,duration:y,getContainer:()=>(c==null?void 0:c())||(M==null?void 0:M())||document.body,maxCount:f,onAllRemoved:C,renderNotifications:lj});return T.useImperativeHandle(t,()=>Object.assign(Object.assign({},j),{prefixCls:N,message:k})),V});let NI=0;function lz(e){const t=T.useRef(null);return wO(),[T.useMemo(()=>{const a=w=>{var C;(C=t.current)===null||C===void 0||C.close(w)},c=w=>{if(!t.current){const re=()=>{};return re.then=()=>{},re}const{open:C,prefixCls:A,message:M}=t.current,k=`${A}-notice`,{content:N,icon:D,type:U,key:q,className:F,style:j,onClose:V}=w,X=ij(w,["content","icon","type","key","className","style","onClose"]);let te=q;return te==null&&(NI+=1,te=`antd-message-${NI}`),BS(re=>(C(Object.assign(Object.assign({},X),{key:te,content:T.createElement(sz,{prefixCls:A,type:U,icon:D},N),placement:"top",className:$t(U&&`${k}-${U}`,F,M==null?void 0:M.className),style:Object.assign(Object.assign({},M==null?void 0:M.style),j),onClose:()=>{V==null||V(),re()}})),()=>{a(te)}))},y={open:c,destroy:w=>{var C;w!==void 0?a(w):(C=t.current)===null||C===void 0||C.destroy()}};return["info","success","warning","error","loading"].forEach(w=>{const C=(A,M,k)=>{let N;A&&typeof A=="object"&&"content"in A?N=A:N={content:A};let D,U;typeof M=="function"?U=M:(D=M,U=k);const q=Object.assign(Object.assign({onClose:U,duration:D},N),{type:w});return c(q)};y[w]=C}),y},[]),T.createElement(cj,Object.assign({key:"message-holder"},e,{ref:t}))]}function uj(e){return lz(e)}function To(){To=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,a=Object.defineProperty||function(ce,ie,fe){ce[ie]=fe.value},c=typeof Symbol=="function"?Symbol:{},f=c.iterator||"@@iterator",y=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function w(ce,ie,fe){return Object.defineProperty(ce,ie,{value:fe,enumerable:!0,configurable:!0,writable:!0}),ce[ie]}try{w({},"")}catch{w=function(fe,Te,$e){return fe[Te]=$e}}function C(ce,ie,fe,Te){var $e=ie&&ie.prototype instanceof k?ie:k,Fe=Object.create($e.prototype),Ne=new ee(Te||[]);return a(Fe,"_invoke",{value:te(ce,fe,Ne)}),Fe}function A(ce,ie,fe){try{return{type:"normal",arg:ce.call(ie,fe)}}catch(Te){return{type:"throw",arg:Te}}}e.wrap=C;var M={};function k(){}function N(){}function D(){}var U={};w(U,f,function(){return this});var q=Object.getPrototypeOf,F=q&&q(q(me([])));F&&F!==t&&r.call(F,f)&&(U=F);var j=D.prototype=k.prototype=Object.create(U);function V(ce){["next","throw","return"].forEach(function(ie){w(ce,ie,function(fe){return this._invoke(ie,fe)})})}function X(ce,ie){function fe($e,Fe,Ne,pe){var He=A(ce[$e],ce,Fe);if(He.type!=="throw"){var Be=He.arg,Ge=Be.value;return Ge&&Kn(Ge)=="object"&&r.call(Ge,"__await")?ie.resolve(Ge.__await).then(function(Qe){fe("next",Qe,Ne,pe)},function(Qe){fe("throw",Qe,Ne,pe)}):ie.resolve(Ge).then(function(Qe){Be.value=Qe,Ne(Be)},function(Qe){return fe("throw",Qe,Ne,pe)})}pe(He.arg)}var Te;a(this,"_invoke",{value:function(Fe,Ne){function pe(){return new ie(function(He,Be){fe(Fe,Ne,He,Be)})}return Te=Te?Te.then(pe,pe):pe()}})}function te(ce,ie,fe){var Te="suspendedStart";return function($e,Fe){if(Te==="executing")throw new Error("Generator is already running");if(Te==="completed"){if($e==="throw")throw Fe;return{value:void 0,done:!0}}for(fe.method=$e,fe.arg=Fe;;){var Ne=fe.delegate;if(Ne){var pe=re(Ne,fe);if(pe){if(pe===M)continue;return pe}}if(fe.method==="next")fe.sent=fe._sent=fe.arg;else if(fe.method==="throw"){if(Te==="suspendedStart")throw Te="completed",fe.arg;fe.dispatchException(fe.arg)}else fe.method==="return"&&fe.abrupt("return",fe.arg);Te="executing";var He=A(ce,ie,fe);if(He.type==="normal"){if(Te=fe.done?"completed":"suspendedYield",He.arg===M)continue;return{value:He.arg,done:fe.done}}He.type==="throw"&&(Te="completed",fe.method="throw",fe.arg=He.arg)}}}function re(ce,ie){var fe=ie.method,Te=ce.iterator[fe];if(Te===void 0)return ie.delegate=null,fe==="throw"&&ce.iterator.return&&(ie.method="return",ie.arg=void 0,re(ce,ie),ie.method==="throw")||fe!=="return"&&(ie.method="throw",ie.arg=new TypeError("The iterator does not provide a '"+fe+"' method")),M;var $e=A(Te,ce.iterator,ie.arg);if($e.type==="throw")return ie.method="throw",ie.arg=$e.arg,ie.delegate=null,M;var Fe=$e.arg;return Fe?Fe.done?(ie[ce.resultName]=Fe.value,ie.next=ce.nextLoc,ie.method!=="return"&&(ie.method="next",ie.arg=void 0),ie.delegate=null,M):Fe:(ie.method="throw",ie.arg=new TypeError("iterator result is not an object"),ie.delegate=null,M)}function Q(ce){var ie={tryLoc:ce[0]};1 in ce&&(ie.catchLoc=ce[1]),2 in ce&&(ie.finallyLoc=ce[2],ie.afterLoc=ce[3]),this.tryEntries.push(ie)}function ne(ce){var ie=ce.completion||{};ie.type="normal",delete ie.arg,ce.completion=ie}function ee(ce){this.tryEntries=[{tryLoc:"root"}],ce.forEach(Q,this),this.reset(!0)}function me(ce){if(ce||ce===""){var ie=ce[f];if(ie)return ie.call(ce);if(typeof ce.next=="function")return ce;if(!isNaN(ce.length)){var fe=-1,Te=function $e(){for(;++fe<ce.length;)if(r.call(ce,fe))return $e.value=ce[fe],$e.done=!1,$e;return $e.value=void 0,$e.done=!0,$e};return Te.next=Te}}throw new TypeError(Kn(ce)+" is not iterable")}return N.prototype=D,a(j,"constructor",{value:D,configurable:!0}),a(D,"constructor",{value:N,configurable:!0}),N.displayName=w(D,l,"GeneratorFunction"),e.isGeneratorFunction=function(ce){var ie=typeof ce=="function"&&ce.constructor;return!!ie&&(ie===N||(ie.displayName||ie.name)==="GeneratorFunction")},e.mark=function(ce){return Object.setPrototypeOf?Object.setPrototypeOf(ce,D):(ce.__proto__=D,w(ce,l,"GeneratorFunction")),ce.prototype=Object.create(j),ce},e.awrap=function(ce){return{__await:ce}},V(X.prototype),w(X.prototype,y,function(){return this}),e.AsyncIterator=X,e.async=function(ce,ie,fe,Te,$e){$e===void 0&&($e=Promise);var Fe=new X(C(ce,ie,fe,Te),$e);return e.isGeneratorFunction(ie)?Fe:Fe.next().then(function(Ne){return Ne.done?Ne.value:Fe.next()})},V(j),w(j,l,"Generator"),w(j,f,function(){return this}),w(j,"toString",function(){return"[object Generator]"}),e.keys=function(ce){var ie=Object(ce),fe=[];for(var Te in ie)fe.push(Te);return fe.reverse(),function $e(){for(;fe.length;){var Fe=fe.pop();if(Fe in ie)return $e.value=Fe,$e.done=!1,$e}return $e.done=!0,$e}},e.values=me,ee.prototype={constructor:ee,reset:function(ie){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(ne),!ie)for(var fe in this)fe.charAt(0)==="t"&&r.call(this,fe)&&!isNaN(+fe.slice(1))&&(this[fe]=void 0)},stop:function(){this.done=!0;var ie=this.tryEntries[0].completion;if(ie.type==="throw")throw ie.arg;return this.rval},dispatchException:function(ie){if(this.done)throw ie;var fe=this;function Te(Be,Ge){return Ne.type="throw",Ne.arg=ie,fe.next=Be,Ge&&(fe.method="next",fe.arg=void 0),!!Ge}for(var $e=this.tryEntries.length-1;$e>=0;--$e){var Fe=this.tryEntries[$e],Ne=Fe.completion;if(Fe.tryLoc==="root")return Te("end");if(Fe.tryLoc<=this.prev){var pe=r.call(Fe,"catchLoc"),He=r.call(Fe,"finallyLoc");if(pe&&He){if(this.prev<Fe.catchLoc)return Te(Fe.catchLoc,!0);if(this.prev<Fe.finallyLoc)return Te(Fe.finallyLoc)}else if(pe){if(this.prev<Fe.catchLoc)return Te(Fe.catchLoc,!0)}else{if(!He)throw new Error("try statement without catch or finally");if(this.prev<Fe.finallyLoc)return Te(Fe.finallyLoc)}}}},abrupt:function(ie,fe){for(var Te=this.tryEntries.length-1;Te>=0;--Te){var $e=this.tryEntries[Te];if($e.tryLoc<=this.prev&&r.call($e,"finallyLoc")&&this.prev<$e.finallyLoc){var Fe=$e;break}}Fe&&(ie==="break"||ie==="continue")&&Fe.tryLoc<=fe&&fe<=Fe.finallyLoc&&(Fe=null);var Ne=Fe?Fe.completion:{};return Ne.type=ie,Ne.arg=fe,Fe?(this.method="next",this.next=Fe.finallyLoc,M):this.complete(Ne)},complete:function(ie,fe){if(ie.type==="throw")throw ie.arg;return ie.type==="break"||ie.type==="continue"?this.next=ie.arg:ie.type==="return"?(this.rval=this.arg=ie.arg,this.method="return",this.next="end"):ie.type==="normal"&&fe&&(this.next=fe),M},finish:function(ie){for(var fe=this.tryEntries.length-1;fe>=0;--fe){var Te=this.tryEntries[fe];if(Te.finallyLoc===ie)return this.complete(Te.completion,Te.afterLoc),ne(Te),M}},catch:function(ie){for(var fe=this.tryEntries.length-1;fe>=0;--fe){var Te=this.tryEntries[fe];if(Te.tryLoc===ie){var $e=Te.completion;if($e.type==="throw"){var Fe=$e.arg;ne(Te)}return Fe}}throw new Error("illegal catch attempt")},delegateYield:function(ie,fe,Te){return this.delegate={iterator:me(ie),resultName:fe,nextLoc:Te},this.method==="next"&&(this.arg=void 0),M}},e}function jI(e,t,r,a,c,f,y){try{var l=e[f](y),w=l.value}catch(C){r(C);return}l.done?t(w):Promise.resolve(w).then(a,c)}function Ru(e){return function(){var t=this,r=arguments;return new Promise(function(a,c){var f=e.apply(t,r);function y(w){jI(f,a,c,y,l,"next",w)}function l(w){jI(f,a,c,y,l,"throw",w)}y(void 0)})}}var bm=lt({},DB),dj=bm.version,hj=bm.render,fj=bm.unmountComponentAtNode,S0;try{var pj=Number((dj||"").split(".")[0]);pj>=18&&(S0=bm.createRoot)}catch{}function UI(e){var t=bm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;t&&Kn(t)==="object"&&(t.usingClientEntryPoint=e)}var Ry="__rc_react_root__";function mj(e,t){UI(!0);var r=t[Ry]||S0(t);UI(!1),r.render(e),t[Ry]=r}function gj(e,t){hj(e,t)}function cz(e,t){if(S0){mj(e,t);return}gj(e,t)}function vj(e){return Yb.apply(this,arguments)}function Yb(){return Yb=Ru(To().mark(function e(t){return To().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",Promise.resolve().then(function(){var c;(c=t[Ry])===null||c===void 0||c.unmount(),delete t[Ry]}));case 1:case"end":return a.stop()}},e)})),Yb.apply(this,arguments)}function yj(e){fj(e)}function _j(e){return Jb.apply(this,arguments)}function Jb(){return Jb=Ru(To().mark(function e(t){return To().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(S0===void 0){a.next=2;break}return a.abrupt("return",vj(t));case 2:yj(t);case 3:case"end":return a.stop()}},e)})),Jb.apply(this,arguments)}const uz=(e,t,r)=>r!==void 0?r:`${e}-${t}`,dz=function(e){if(!e)return!1;if(e instanceof Element){if(e.offsetParent)return!0;if(e.getBBox){var t=e.getBBox(),r=t.width,a=t.height;if(r||a)return!0}if(e.getBoundingClientRect){var c=e.getBoundingClientRect(),f=c.width,y=c.height;if(f||y)return!0}}return!1},xj=e=>{const{componentCls:t,colorPrimary:r}=e;return{[t]:{position:"absolute",background:"transparent",pointerEvents:"none",boxSizing:"border-box",color:`var(--wave-color, ${r})`,boxShadow:"0 0 0 0 currentcolor",opacity:.2,"&.wave-motion-appear":{transition:[`box-shadow 0.4s ${e.motionEaseOutCirc}`,`opacity 2s ${e.motionEaseOutCirc}`].join(","),"&-active":{boxShadow:"0 0 0 6px currentcolor",opacity:0},"&.wave-quick":{transition:[`box-shadow 0.3s ${e.motionEaseInOut}`,`opacity 0.35s ${e.motionEaseInOut}`].join(",")}}}}},bj=_o("Wave",e=>[xj(e)]);function wj(e){const t=(e||"").match(/rgba?\((\d*), (\d*), (\d*)(, [\d.]*)?\)/);return t&&t[1]&&t[2]&&t[3]?!(t[1]===t[2]&&t[2]===t[3]):!0}function a1(e){return e&&e!=="#fff"&&e!=="#ffffff"&&e!=="rgb(255, 255, 255)"&&e!=="rgba(255, 255, 255, 1)"&&wj(e)&&!/rgba\((?:\d*, ){3}0\)/.test(e)&&e!=="transparent"}function Sj(e){const{borderTopColor:t,borderColor:r,backgroundColor:a}=getComputedStyle(e);return a1(t)?t:a1(r)?r:a1(a)?a:null}const NS="ant-wave-target";function s1(e){return Number.isNaN(e)?0:e}const Ej=e=>{const{className:t,target:r,component:a}=e,c=T.useRef(null),[f,y]=T.useState(null),[l,w]=T.useState([]),[C,A]=T.useState(0),[M,k]=T.useState(0),[N,D]=T.useState(0),[U,q]=T.useState(0),[F,j]=T.useState(!1),V={left:C,top:M,width:N,height:U,borderRadius:l.map(re=>`${re}px`).join(" ")};f&&(V["--wave-color"]=f);function X(){const re=getComputedStyle(r);y(Sj(r));const Q=re.position==="static",{borderLeftWidth:ne,borderTopWidth:ee}=re;A(Q?r.offsetLeft:s1(-parseFloat(ne))),k(Q?r.offsetTop:s1(-parseFloat(ee))),D(r.offsetWidth),q(r.offsetHeight);const{borderTopLeftRadius:me,borderTopRightRadius:ce,borderBottomLeftRadius:ie,borderBottomRightRadius:fe}=re;w([me,ce,fe,ie].map(Te=>s1(parseFloat(Te))))}if(T.useEffect(()=>{if(r){const re=yi(()=>{X(),j(!0)});let Q;return typeof ResizeObserver<"u"&&(Q=new ResizeObserver(X),Q.observe(r)),()=>{yi.cancel(re),Q==null||Q.disconnect()}}},[]),!F)return null;const te=(a==="Checkbox"||a==="Radio")&&(r==null?void 0:r.classList.contains(NS));return T.createElement(xm,{visible:!0,motionAppear:!0,motionName:"wave-motion",motionDeadline:5e3,onAppearEnd:(re,Q)=>{var ne;if(Q.deadline||Q.propertyName==="opacity"){const ee=(ne=c.current)===null||ne===void 0?void 0:ne.parentElement;_j(ee).then(()=>{ee==null||ee.remove()})}return!1}},re=>{let{className:Q}=re;return T.createElement("div",{ref:c,className:$t(t,{"wave-quick":te},Q),style:V})})},Cj=(e,t)=>{var r;const{component:a}=t;if(a==="Checkbox"&&!(!((r=e.querySelector("input"))===null||r===void 0)&&r.checked))return;const c=document.createElement("div");c.style.position="absolute",c.style.left="0px",c.style.top="0px",e==null||e.insertBefore(c,e==null?void 0:e.firstChild),cz(T.createElement(Ej,Object.assign({},t,{target:e})),c)},Tj=Cj;function Ij(e,t,r){const{wave:a}=T.useContext(cr),[,c,f]=vs(),y=jo(C=>{const A=e.current;if(a!=null&&a.disabled||!A)return;const M=A.querySelector(`.${NS}`)||A,{showEffect:k}=a||{};(k||Tj)(M,{className:t,token:c,component:r,event:C,hashId:f})}),l=T.useRef();return C=>{yi.cancel(l.current),l.current=yi(()=>{y(C)})}}const Mj=e=>{const{children:t,disabled:r,component:a}=e,{getPrefixCls:c}=T.useContext(cr),f=T.useRef(null),y=c("wave"),[,l]=bj(y),w=Ij(f,$t(y,l),a);if(st.useEffect(()=>{const A=f.current;if(!A||A.nodeType!==1||r)return;const M=k=>{!dz(k.target)||!A.getAttribute||A.getAttribute("disabled")||A.disabled||A.className.includes("disabled")||A.className.includes("-leave")||w(k)};return A.addEventListener("click",M,!0),()=>{A.removeEventListener("click",M,!0)}},[r]),!st.isValidElement(t))return t??null;const C=_m(t)?gs(t.ref,f):f;return vl(t,{ref:C})},hz=Mj,Pj=e=>{const t=st.useContext(_0);return st.useMemo(()=>e?typeof e=="string"?e??t:e instanceof Function?e(t):t:t,[e,t])},bl=Pj,Aj=e=>{const{componentCls:t}=e;return{[t]:{"&-block":{display:"flex",width:"100%"},"&-vertical":{flexDirection:"column"}}}},Rj=Aj,Oj=e=>{const{componentCls:t}=e;return{[t]:{display:"inline-flex","&-rtl":{direction:"rtl"},"&-vertical":{flexDirection:"column"},"&-align":{flexDirection:"column","&-center":{alignItems:"center"},"&-start":{alignItems:"flex-start"},"&-end":{alignItems:"flex-end"},"&-baseline":{alignItems:"baseline"}},[`${t}-item:empty`]:{display:"none"}}}},zj=e=>{const{componentCls:t}=e;return{[t]:{"&-gap-row-small":{rowGap:e.spaceGapSmallSize},"&-gap-row-middle":{rowGap:e.spaceGapMiddleSize},"&-gap-row-large":{rowGap:e.spaceGapLargeSize},"&-gap-col-small":{columnGap:e.spaceGapSmallSize},"&-gap-col-middle":{columnGap:e.spaceGapMiddleSize},"&-gap-col-large":{columnGap:e.spaceGapLargeSize}}}},fz=_o("Space",e=>{const t=$r(e,{spaceGapSmallSize:e.paddingXS,spaceGapMiddleSize:e.padding,spaceGapLargeSize:e.paddingLG});return[Oj(t),zj(t),Rj(t)]},()=>({}),{resetStyle:!1});var pz=globalThis&&globalThis.__rest||function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(r[a[c]]=e[a[c]]);return r};const E0=T.createContext(null),C0=(e,t)=>{const r=T.useContext(E0),a=T.useMemo(()=>{if(!r)return"";const{compactDirection:c,isFirstItem:f,isLastItem:y}=r,l=c==="vertical"?"-vertical-":"-";return $t(`${e}-compact${l}item`,{[`${e}-compact${l}first-item`]:f,[`${e}-compact${l}last-item`]:y,[`${e}-compact${l}item-rtl`]:t==="rtl"})},[e,t,r]);return{compactSize:r==null?void 0:r.compactSize,compactDirection:r==null?void 0:r.compactDirection,compactItemClassnames:a}},Qb=e=>{let{children:t}=e;return T.createElement(E0.Provider,{value:null},t)},kj=e=>{var{children:t}=e,r=pz(e,["children"]);return T.createElement(E0.Provider,{value:r},t)},Lj=e=>{const{getPrefixCls:t,direction:r}=T.useContext(cr),{size:a,direction:c,block:f,prefixCls:y,className:l,rootClassName:w,children:C}=e,A=pz(e,["size","direction","block","prefixCls","className","rootClassName","children"]),M=bl(V=>a??V),k=t("space-compact",y),[N,D]=fz(k),U=$t(k,D,{[`${k}-rtl`]:r==="rtl",[`${k}-block`]:f,[`${k}-vertical`]:c==="vertical"},l,w),q=T.useContext(E0),F=hl(C),j=T.useMemo(()=>F.map((V,X)=>{const te=V&&V.key||`${k}-item-${X}`;return T.createElement(kj,{key:te,compactSize:M,compactDirection:c,isFirstItem:X===0&&(!q||(q==null?void 0:q.isFirstItem)),isLastItem:X===F.length-1&&(!q||(q==null?void 0:q.isLastItem))},V)}),[a,F,q]);return F.length===0?null:N(T.createElement("div",Object.assign({className:U},A),j))},Dj=Lj;var $j=globalThis&&globalThis.__rest||function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(r[a[c]]=e[a[c]]);return r};const mz=T.createContext(void 0),Fj=e=>{const{getPrefixCls:t,direction:r}=T.useContext(cr),{prefixCls:a,size:c,className:f}=e,y=$j(e,["prefixCls","size","className"]),l=t("btn-group",a),[,,w]=vs();let C="";switch(c){case"large":C="lg";break;case"small":C="sm";break}const A=$t(l,{[`${l}-${C}`]:C,[`${l}-rtl`]:r==="rtl"},f,w);return T.createElement(mz.Provider,{value:c},T.createElement("div",Object.assign({},y,{className:A})))},Bj=Fj,VI=/^[\u4e00-\u9fa5]{2}$/,ew=VI.test.bind(VI);function HI(e){return typeof e=="string"}function l1(e){return e==="text"||e==="link"}function Nj(e,t){if(e==null)return;const r=t?" ":"";return typeof e!="string"&&typeof e!="number"&&HI(e.type)&&ew(e.props.children)?vl(e,{children:e.props.children.split("").join(r)}):HI(e)?ew(e)?st.createElement("span",null,e.split("").join(r)):st.createElement("span",null,e):rz(e)?st.createElement("span",null,e):e}function jj(e,t){let r=!1;const a=[];return st.Children.forEach(e,c=>{const f=typeof c,y=f==="string"||f==="number";if(r&&y){const l=a.length-1,w=a[l];a[l]=`${w}${c}`}else a.push(c);r=y}),st.Children.map(a,c=>Nj(c,t))}const Uj=T.forwardRef((e,t)=>{const{className:r,style:a,children:c,prefixCls:f}=e,y=$t(`${f}-icon`,r);return st.createElement("span",{ref:t,className:y,style:a},c)}),gz=Uj,GI=T.forwardRef((e,t)=>{let{prefixCls:r,className:a,style:c,iconClassName:f}=e;const y=$t(`${r}-loading-icon`,a);return st.createElement(gz,{prefixCls:r,className:y,style:c,ref:t},st.createElement(FS,{className:f}))}),c1=()=>({width:0,opacity:0,transform:"scale(0)"}),u1=e=>({width:e.scrollWidth,opacity:1,transform:"scale(1)"}),Vj=e=>{const{prefixCls:t,loading:r,existIcon:a,className:c,style:f}=e,y=!!r;return a?st.createElement(GI,{prefixCls:t,className:c,style:f}):st.createElement(xm,{visible:y,motionName:`${t}-loading-icon-motion`,motionLeave:y,removeOnLeave:!0,onAppearStart:c1,onAppearActive:u1,onEnterStart:c1,onEnterActive:u1,onLeaveStart:u1,onLeaveActive:c1},(l,w)=>{let{className:C,style:A}=l;return st.createElement(GI,{prefixCls:t,className:c,style:Object.assign(Object.assign({},f),A),ref:w,iconClassName:C})})},Hj=Vj,WI=(e,t)=>({[`> span, > ${e}`]:{"&:not(:last-child)":{[`&, & > ${e}`]:{"&:not(:disabled)":{borderInlineEndColor:t}}},"&:not(:first-child)":{[`&, & > ${e}`]:{"&:not(:disabled)":{borderInlineStartColor:t}}}}}),Gj=e=>{const{componentCls:t,fontSize:r,lineWidth:a,groupBorderColor:c,colorErrorHover:f}=e;return{[`${t}-group`]:[{position:"relative",display:"inline-flex",[`> span, > ${t}`]:{"&:not(:last-child)":{[`&, & > ${t}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},"&:not(:first-child)":{marginInlineStart:-a,[`&, & > ${t}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}},[t]:{position:"relative",zIndex:1,"&:hover,\n          &:focus,\n          &:active":{zIndex:2},"&[disabled]":{zIndex:0}},[`${t}-icon-only`]:{fontSize:r}},WI(`${t}-primary`,c),WI(`${t}-danger`,f)]}},Wj=Gj,qj=e=>{const{componentCls:t,iconCls:r,fontWeight:a}=e;return{[t]:{outline:"none",position:"relative",display:"inline-block",fontWeight:a,whiteSpace:"nowrap",textAlign:"center",backgroundImage:"none",backgroundColor:"transparent",border:`${e.lineWidth}px ${e.lineType} transparent`,cursor:"pointer",transition:`all ${e.motionDurationMid} ${e.motionEaseInOut}`,userSelect:"none",touchAction:"manipulation",lineHeight:e.lineHeight,color:e.colorText,"&:disabled > *":{pointerEvents:"none"},"> span":{display:"inline-block"},[`${t}-icon`]:{lineHeight:0},[`> ${r} + span, > span + ${r}`]:{marginInlineStart:e.marginXS},[`&:not(${t}-icon-only) > ${t}-icon`]:{[`&${t}-loading-icon, &:not(:last-child)`]:{marginInlineEnd:e.marginXS}},"> a":{color:"currentColor"},"&:not(:disabled)":Object.assign({},LO(e)),[`&${t}-two-chinese-chars::first-letter`]:{letterSpacing:"0.34em"},[`&${t}-two-chinese-chars > *:not(${r})`]:{marginInlineEnd:"-0.34em",letterSpacing:"0.34em"},[`&-icon-only${t}-compact-item`]:{flex:"none"},[`&-compact-item${t}-primary`]:{[`&:not([disabled]) + ${t}-compact-item${t}-primary:not([disabled])`]:{position:"relative","&:before":{position:"absolute",top:-e.lineWidth,insetInlineStart:-e.lineWidth,display:"inline-block",width:e.lineWidth,height:`calc(100% + ${e.lineWidth*2}px)`,backgroundColor:e.colorPrimaryHover,content:'""'}}},"&-compact-vertical-item":{[`&${t}-primary`]:{[`&:not([disabled]) + ${t}-compact-vertical-item${t}-primary:not([disabled])`]:{position:"relative","&:before":{position:"absolute",top:-e.lineWidth,insetInlineStart:-e.lineWidth,display:"inline-block",width:`calc(100% + ${e.lineWidth*2}px)`,height:e.lineWidth,backgroundColor:e.colorPrimaryHover,content:'""'}}}}}}},yl=(e,t,r)=>({[`&:not(:disabled):not(${e}-disabled)`]:{"&:hover":t,"&:active":r}}),Zj=e=>({minWidth:e.controlHeight,paddingInlineStart:0,paddingInlineEnd:0,borderRadius:"50%"}),Xj=e=>({borderRadius:e.controlHeight,paddingInlineStart:e.controlHeight/2,paddingInlineEnd:e.controlHeight/2}),Kj=e=>({cursor:"not-allowed",borderColor:e.borderColorDisabled,color:e.colorTextDisabled,backgroundColor:e.colorBgContainerDisabled,boxShadow:"none"}),lm=(e,t,r,a,c,f,y,l)=>({[`&${e}-background-ghost`]:Object.assign(Object.assign({color:r||void 0,backgroundColor:t,borderColor:a||void 0,boxShadow:"none"},yl(e,Object.assign({backgroundColor:t},y),Object.assign({backgroundColor:t},l))),{"&:disabled":{cursor:"not-allowed",color:c||void 0,borderColor:f||void 0}})}),jS=e=>({[`&:disabled, &${e.componentCls}-disabled`]:Object.assign({},Kj(e))}),vz=e=>Object.assign({},jS(e)),Oy=e=>({[`&:disabled, &${e.componentCls}-disabled`]:{cursor:"not-allowed",color:e.colorTextDisabled}}),yz=e=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},vz(e)),{backgroundColor:e.defaultBg,borderColor:e.defaultBorderColor,color:e.defaultColor,boxShadow:e.defaultShadow}),yl(e.componentCls,{color:e.colorPrimaryHover,borderColor:e.colorPrimaryHover},{color:e.colorPrimaryActive,borderColor:e.colorPrimaryActive})),lm(e.componentCls,e.ghostBg,e.defaultGhostColor,e.defaultGhostBorderColor,e.colorTextDisabled,e.colorBorder)),{[`&${e.componentCls}-dangerous`]:Object.assign(Object.assign(Object.assign({color:e.colorError,borderColor:e.colorError},yl(e.componentCls,{color:e.colorErrorHover,borderColor:e.colorErrorBorderHover},{color:e.colorErrorActive,borderColor:e.colorErrorActive})),lm(e.componentCls,e.ghostBg,e.colorError,e.colorError,e.colorTextDisabled,e.colorBorder)),jS(e))}),Yj=e=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},vz(e)),{color:e.primaryColor,backgroundColor:e.colorPrimary,boxShadow:e.primaryShadow}),yl(e.componentCls,{color:e.colorTextLightSolid,backgroundColor:e.colorPrimaryHover},{color:e.colorTextLightSolid,backgroundColor:e.colorPrimaryActive})),lm(e.componentCls,e.ghostBg,e.colorPrimary,e.colorPrimary,e.colorTextDisabled,e.colorBorder,{color:e.colorPrimaryHover,borderColor:e.colorPrimaryHover},{color:e.colorPrimaryActive,borderColor:e.colorPrimaryActive})),{[`&${e.componentCls}-dangerous`]:Object.assign(Object.assign(Object.assign({backgroundColor:e.colorError,boxShadow:e.dangerShadow,color:e.dangerColor},yl(e.componentCls,{backgroundColor:e.colorErrorHover},{backgroundColor:e.colorErrorActive})),lm(e.componentCls,e.ghostBg,e.colorError,e.colorError,e.colorTextDisabled,e.colorBorder,{color:e.colorErrorHover,borderColor:e.colorErrorHover},{color:e.colorErrorActive,borderColor:e.colorErrorActive})),jS(e))}),Jj=e=>Object.assign(Object.assign({},yz(e)),{borderStyle:"dashed"}),Qj=e=>Object.assign(Object.assign(Object.assign({color:e.colorLink},yl(e.componentCls,{color:e.colorLinkHover,backgroundColor:e.linkHoverBg},{color:e.colorLinkActive})),Oy(e)),{[`&${e.componentCls}-dangerous`]:Object.assign(Object.assign({color:e.colorError},yl(e.componentCls,{color:e.colorErrorHover},{color:e.colorErrorActive})),Oy(e))}),e8=e=>Object.assign(Object.assign(Object.assign({},yl(e.componentCls,{color:e.colorText,backgroundColor:e.textHoverBg},{color:e.colorText,backgroundColor:e.colorBgTextActive})),Oy(e)),{[`&${e.componentCls}-dangerous`]:Object.assign(Object.assign({color:e.colorError},Oy(e)),yl(e.componentCls,{color:e.colorErrorHover,backgroundColor:e.colorErrorBg},{color:e.colorErrorHover,backgroundColor:e.colorErrorBg}))}),t8=e=>{const{componentCls:t}=e;return{[`${t}-default`]:yz(e),[`${t}-primary`]:Yj(e),[`${t}-dashed`]:Jj(e),[`${t}-link`]:Qj(e),[`${t}-text`]:e8(e),[`${t}-ghost`]:lm(e.componentCls,e.ghostBg,e.colorBgContainer,e.colorBgContainer,e.colorTextDisabled,e.colorBorder)}},US=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const{componentCls:r,controlHeight:a,fontSize:c,lineHeight:f,lineWidth:y,borderRadius:l,buttonPaddingHorizontal:w,iconCls:C}=e,A=Math.max(0,(a-c*f)/2-y),M=`${r}-icon-only`;return[{[`${r}${t}`]:{fontSize:c,height:a,padding:`${A}px ${w}px`,borderRadius:l,[`&${M}`]:{width:a,paddingInlineStart:0,paddingInlineEnd:0,[`&${r}-round`]:{width:"auto"},[C]:{fontSize:e.buttonIconOnlyFontSize}},[`&${r}-loading`]:{opacity:e.opacityLoading,cursor:"default"},[`${r}-loading-icon`]:{transition:`width ${e.motionDurationSlow} ${e.motionEaseInOut}, opacity ${e.motionDurationSlow} ${e.motionEaseInOut}`}}},{[`${r}${r}-circle${t}`]:Zj(e)},{[`${r}${r}-round${t}`]:Xj(e)}]},n8=e=>US($r(e,{fontSize:e.contentFontSize})),r8=e=>{const t=$r(e,{controlHeight:e.controlHeightSM,fontSize:e.contentFontSizeSM,padding:e.paddingXS,buttonPaddingHorizontal:e.paddingInlineSM,borderRadius:e.borderRadiusSM,buttonIconOnlyFontSize:e.onlyIconSizeSM});return US(t,`${e.componentCls}-sm`)},i8=e=>{const t=$r(e,{controlHeight:e.controlHeightLG,fontSize:e.contentFontSizeLG,buttonPaddingHorizontal:e.paddingInlineLG,borderRadius:e.borderRadiusLG,buttonIconOnlyFontSize:e.onlyIconSizeLG});return US(t,`${e.componentCls}-lg`)},o8=e=>{const{componentCls:t}=e;return{[t]:{[`&${t}-block`]:{width:"100%"}}}},_z=e=>{const{paddingInline:t,onlyIconSize:r}=e;return $r(e,{buttonPaddingHorizontal:t,buttonIconOnlyFontSize:r})},xz=e=>({fontWeight:400,defaultShadow:`0 ${e.controlOutlineWidth}px 0 ${e.controlTmpOutline}`,primaryShadow:`0 ${e.controlOutlineWidth}px 0 ${e.controlOutline}`,dangerShadow:`0 ${e.controlOutlineWidth}px 0 ${e.colorErrorOutline}`,primaryColor:e.colorTextLightSolid,dangerColor:e.colorTextLightSolid,borderColorDisabled:e.colorBorder,defaultGhostColor:e.colorBgContainer,ghostBg:"transparent",defaultGhostBorderColor:e.colorBgContainer,paddingInline:e.paddingContentHorizontal-e.lineWidth,paddingInlineLG:e.paddingContentHorizontal-e.lineWidth,paddingInlineSM:8-e.lineWidth,onlyIconSize:e.fontSizeLG,onlyIconSizeSM:e.fontSizeLG-2,onlyIconSizeLG:e.fontSizeLG+2,groupBorderColor:e.colorPrimaryHover,linkHoverBg:"transparent",textHoverBg:e.colorBgTextHover,defaultColor:e.colorText,defaultBg:e.colorBgContainer,defaultBorderColor:e.colorBorder,defaultBorderColorDisabled:e.colorBorder,contentFontSize:e.fontSize,contentFontSizeSM:e.fontSize,contentFontSizeLG:e.fontSizeLG}),a8=_o("Button",e=>{const t=_z(e);return[qj(t),r8(t),n8(t),i8(t),o8(t),t8(t),Wj(t)]},xz);function s8(e,t,r){const{focusElCls:a,focus:c,borderElCls:f}=r,y=f?"> *":"",l=["hover",c?"focus":null,"active"].filter(Boolean).map(w=>`&:${w} ${y}`).join(",");return{[`&-item:not(${t}-last-item)`]:{marginInlineEnd:-e.lineWidth},"&-item":Object.assign(Object.assign({[l]:{zIndex:2}},a?{[`&${a}`]:{zIndex:2}}:{}),{[`&[disabled] ${y}`]:{zIndex:0}})}}function l8(e,t,r){const{borderElCls:a}=r,c=a?`> ${a}`:"";return{[`&-item:not(${t}-first-item):not(${t}-last-item) ${c}`]:{borderRadius:0},[`&-item:not(${t}-last-item)${t}-first-item`]:{[`& ${c}, &${e}-sm ${c}, &${e}-lg ${c}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&-item:not(${t}-first-item)${t}-last-item`]:{[`& ${c}, &${e}-sm ${c}, &${e}-lg ${c}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}}}function VS(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{focus:!0};const{componentCls:r}=e,a=`${r}-compact`;return{[a]:Object.assign(Object.assign({},s8(e,a,t)),l8(r,a,t))}}function c8(e,t){return{[`&-item:not(${t}-last-item)`]:{marginBottom:-e.lineWidth},"&-item":{"&:hover,&:focus,&:active":{zIndex:2},"&[disabled]":{zIndex:0}}}}function u8(e,t){return{[`&-item:not(${t}-first-item):not(${t}-last-item)`]:{borderRadius:0},[`&-item${t}-first-item:not(${t}-last-item)`]:{[`&, &${e}-sm, &${e}-lg`]:{borderEndEndRadius:0,borderEndStartRadius:0}},[`&-item${t}-last-item:not(${t}-first-item)`]:{[`&, &${e}-sm, &${e}-lg`]:{borderStartStartRadius:0,borderStartEndRadius:0}}}}function d8(e){const t=`${e.componentCls}-compact-vertical`;return{[t]:Object.assign(Object.assign({},c8(e,t)),u8(e.componentCls,t))}}const h8=IN(["Button","compact"],e=>{const t=_z(e);return[VS(t),d8(t)]},xz);var f8=globalThis&&globalThis.__rest||function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(r[a[c]]=e[a[c]]);return r};function p8(e){if(typeof e=="object"&&e){let t=e==null?void 0:e.delay;return t=!Number.isNaN(t)&&typeof t=="number"?t:0,{loading:t<=0,delay:t}}return{loading:!!e,delay:0}}const m8=(e,t)=>{var r,a;const{loading:c=!1,prefixCls:f,type:y="default",danger:l,shape:w="default",size:C,styles:A,disabled:M,className:k,rootClassName:N,children:D,icon:U,ghost:q=!1,block:F=!1,htmlType:j="button",classNames:V,style:X={}}=e,te=f8(e,["loading","prefixCls","type","danger","shape","size","styles","disabled","className","rootClassName","children","icon","ghost","block","htmlType","classNames","style"]),{getPrefixCls:re,autoInsertSpaceInButton:Q,direction:ne,button:ee}=T.useContext(cr),me=re("btn",f),[ce,ie]=a8(me),fe=T.useContext(Ph),Te=M??fe,$e=T.useContext(mz),Fe=T.useMemo(()=>p8(c),[c]),[Ne,pe]=T.useState(Fe.loading),[He,Be]=T.useState(!1),Qe=gs(t,T.createRef()),gt=T.Children.count(D)===1&&!U&&!l1(y);T.useEffect(()=>{let rt=null;Fe.delay>0?rt=setTimeout(()=>{rt=null,pe(!0)},Fe.delay):pe(Fe.loading);function Lt(){rt&&(clearTimeout(rt),rt=null)}return Lt},[Fe]),T.useEffect(()=>{if(!Qe||!Qe.current||Q===!1)return;const rt=Qe.current.textContent;gt&&ew(rt)?He||Be(!0):He&&Be(!1)},[Qe]);const St=rt=>{const{onClick:Lt}=e;if(Ne||Te){rt.preventDefault();return}Lt==null||Lt(rt)},xt=Q!==!1,{compactSize:Nt,compactItemClassnames:jt}=C0(me,ne),bt={large:"lg",small:"sm",middle:void 0},ut=bl(rt=>{var Lt,Mt;return(Mt=(Lt=C??Nt)!==null&&Lt!==void 0?Lt:$e)!==null&&Mt!==void 0?Mt:rt}),Tt=ut&&bt[ut]||"",ft=Ne?"loading":U,yt=Sc(te,["navigate"]),ct=$t(me,ie,{[`${me}-${w}`]:w!=="default"&&w,[`${me}-${y}`]:y,[`${me}-${Tt}`]:Tt,[`${me}-icon-only`]:!D&&D!==0&&!!ft,[`${me}-background-ghost`]:q&&!l1(y),[`${me}-loading`]:Ne,[`${me}-two-chinese-chars`]:He&&xt&&!Ne,[`${me}-block`]:F,[`${me}-dangerous`]:!!l,[`${me}-rtl`]:ne==="rtl"},jt,k,N,ee==null?void 0:ee.className),It=Object.assign(Object.assign({},ee==null?void 0:ee.style),X),Ct=$t(V==null?void 0:V.icon,(r=ee==null?void 0:ee.classNames)===null||r===void 0?void 0:r.icon),Qt=Object.assign(Object.assign({},(A==null?void 0:A.icon)||{}),((a=ee==null?void 0:ee.styles)===null||a===void 0?void 0:a.icon)||{}),Vt=U&&!Ne?st.createElement(gz,{prefixCls:me,className:Ct,style:Qt},U):st.createElement(Hj,{existIcon:!!U,prefixCls:me,loading:!!Ne}),Bt=D||D===0?jj(D,gt&&xt):null;if(yt.href!==void 0)return ce(st.createElement("a",Object.assign({},yt,{className:$t(ct,{[`${me}-disabled`]:Te}),style:It,onClick:St,ref:Qe}),Vt,Bt));let ot=st.createElement("button",Object.assign({},te,{type:j,className:ct,style:It,onClick:St,disabled:Te,ref:Qe}),Vt,Bt,jt&&st.createElement(h8,{key:"compact",prefixCls:me}));return l1(y)||(ot=st.createElement(hz,{component:"Button",disabled:!!Ne},ot)),ce(ot)},HS=T.forwardRef(m8);HS.Group=Bj;HS.__ANT_BUTTON=!0;const g8=HS;var bz=T.createContext(null),qI=[];function v8(e,t){var r=T.useState(function(){if(!no())return null;var D=document.createElement("div");return D}),a=Ut(r,1),c=a[0],f=T.useRef(!1),y=T.useContext(bz),l=T.useState(qI),w=Ut(l,2),C=w[0],A=w[1],M=y||(f.current?void 0:function(D){A(function(U){var q=[D].concat(mn(U));return q})});function k(){c.parentElement||document.body.appendChild(c),f.current=!0}function N(){var D;(D=c.parentElement)===null||D===void 0||D.removeChild(c),f.current=!1}return Lr(function(){return e?y?y(k):k():N(),N},[e]),Lr(function(){C.length&&(C.forEach(function(D){return D()}),A(qI))},[C]),[c,M]}var d1;function y8(e){if(typeof document>"u")return 0;if(e||d1===void 0){var t=document.createElement("div");t.style.width="100%",t.style.height="200px";var r=document.createElement("div"),a=r.style;a.position="absolute",a.top="0",a.left="0",a.pointerEvents="none",a.visibility="hidden",a.width="200px",a.height="150px",a.overflow="hidden",r.appendChild(t),document.body.appendChild(r);var c=t.offsetWidth;r.style.overflow="scroll";var f=t.offsetWidth;c===f&&(f=r.clientWidth),document.body.removeChild(r),d1=c-f}return d1}function ZI(e){var t=e.match(/^(.*)px$/),r=Number(t==null?void 0:t[1]);return Number.isNaN(r)?y8():r}function _8(e){if(typeof document>"u"||!e||!(e instanceof Element))return{width:0,height:0};var t=getComputedStyle(e,"::-webkit-scrollbar"),r=t.width,a=t.height;return{width:ZI(r),height:ZI(a)}}function x8(){return document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth}var b8="rc-util-locker-".concat(Date.now()),XI=0;function w8(e){var t=!!e,r=T.useState(function(){return XI+=1,"".concat(b8,"_").concat(XI)}),a=Ut(r,1),c=a[0];Lr(function(){if(t){var f=_8(document.body).width,y=x8();yh(`
html body {
  overflow-y: hidden;
  `.concat(y?"width: calc(100% - ".concat(f,"px);"):"",`
}`),c)}else Ty(c);return function(){Ty(c)}},[t,c])}var KI=!1;function S8(e){return typeof e=="boolean"&&(KI=e),KI}var YI=function(t){return t===!1?!1:!no()||!t?null:typeof t=="string"?document.querySelector(t):typeof t=="function"?t():t},wz=T.forwardRef(function(e,t){var r=e.open,a=e.autoLock,c=e.getContainer;e.debug;var f=e.autoDestroy,y=f===void 0?!0:f,l=e.children,w=T.useState(r),C=Ut(w,2),A=C[0],M=C[1],k=A||r;T.useEffect(function(){(y||r)&&M(r)},[r,y]);var N=T.useState(function(){return YI(c)}),D=Ut(N,2),U=D[0],q=D[1];T.useEffect(function(){var ce=YI(c);q(ce??null)});var F=v8(k&&!U),j=Ut(F,2),V=j[0],X=j[1],te=U??V;w8(a&&r&&no()&&(te===V||te===document.body));var re=null;if(l&&_m(l)&&t){var Q=l;re=Q.ref}var ne=p0(re,t);if(!k||!no()||U===void 0)return null;var ee=te===!1||S8(),me=l;return t&&(me=T.cloneElement(l,{ref:ne})),T.createElement(bz.Provider,{value:X},ee?me:vc.createPortal(me,te))});function E8(){var e=lt({},jy);return e.useId}var JI=0,QI=E8();const C8=QI?function(t){var r=QI();return t||r}:function(t){var r=T.useState("ssr-id"),a=Ut(r,2),c=a[0],f=a[1];return T.useEffect(function(){var y=JI;JI+=1,f("rc_unique_".concat(y))},[]),t||c};var Sz=function(t){if(no()&&window.document.documentElement){var r=Array.isArray(t)?t:[t],a=window.document.documentElement;return r.some(function(c){return c in a.style})}return!1},T8=function(t,r){if(!Sz(t))return!1;var a=document.createElement("div"),c=a.style[t];return a.style[t]=r,a.style[t]!==c};function eM(e,t){return!Array.isArray(e)&&t!==void 0?T8(e,t):Sz(e)}const I8=st.createContext(void 0),Ez=I8;var hu="RC_FORM_INTERNAL_HOOKS",Ur=function(){Vo(!1,"Can not find FormContext. Please make sure you wrap Field under Form.")},wh=T.createContext({getFieldValue:Ur,getFieldsValue:Ur,getFieldError:Ur,getFieldWarning:Ur,getFieldsError:Ur,isFieldsTouched:Ur,isFieldTouched:Ur,isFieldValidating:Ur,isFieldsValidating:Ur,resetFields:Ur,setFields:Ur,setFieldValue:Ur,setFieldsValue:Ur,validateFields:Ur,submit:Ur,getInternalHooks:function(){return Ur(),{dispatch:Ur,initEntityValue:Ur,registerField:Ur,useSubscribe:Ur,setInitialValues:Ur,destroyForm:Ur,setCallbacks:Ur,registerWatch:Ur,getFields:Ur,setValidateMessages:Ur,setPreserve:Ur,getInitialValue:Ur}}}),zy=T.createContext(null);function tw(e){return e==null?[]:Array.isArray(e)?e:[e]}function M8(e){return e&&!!e._init}function fu(){return fu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},fu.apply(this,arguments)}function P8(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,cm(e,t)}function nw(e){return nw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},nw(e)}function cm(e,t){return cm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,c){return a.__proto__=c,a},cm(e,t)}function A8(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Gv(e,t,r){return A8()?Gv=Reflect.construct.bind():Gv=function(c,f,y){var l=[null];l.push.apply(l,f);var w=Function.bind.apply(c,l),C=new w;return y&&cm(C,y.prototype),C},Gv.apply(null,arguments)}function R8(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function rw(e){var t=typeof Map=="function"?new Map:void 0;return rw=function(a){if(a===null||!R8(a))return a;if(typeof a!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t<"u"){if(t.has(a))return t.get(a);t.set(a,c)}function c(){return Gv(a,arguments,nw(this).constructor)}return c.prototype=Object.create(a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),cm(c,a)},rw(e)}var O8=/%[sdj%]/g,z8=function(){};typeof process<"u"&&process.env;function iw(e){if(!e||!e.length)return null;var t={};return e.forEach(function(r){var a=r.field;t[a]=t[a]||[],t[a].push(r)}),t}function la(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];var c=0,f=r.length;if(typeof e=="function")return e.apply(null,r);if(typeof e=="string"){var y=e.replace(O8,function(l){if(l==="%%")return"%";if(c>=f)return l;switch(l){case"%s":return String(r[c++]);case"%d":return Number(r[c++]);case"%j":try{return JSON.stringify(r[c++])}catch{return"[Circular]"}break;default:return l}});return y}return e}function k8(e){return e==="string"||e==="url"||e==="hex"||e==="email"||e==="date"||e==="pattern"}function Bi(e,t){return!!(e==null||t==="array"&&Array.isArray(e)&&!e.length||k8(t)&&typeof e=="string"&&!e)}function L8(e,t,r){var a=[],c=0,f=e.length;function y(l){a.push.apply(a,l||[]),c++,c===f&&r(a)}e.forEach(function(l){t(l,y)})}function tM(e,t,r){var a=0,c=e.length;function f(y){if(y&&y.length){r(y);return}var l=a;a=a+1,l<c?t(e[l],f):r([])}f([])}function D8(e){var t=[];return Object.keys(e).forEach(function(r){t.push.apply(t,e[r]||[])}),t}var nM=function(e){P8(t,e);function t(r,a){var c;return c=e.call(this,"Async Validation Error")||this,c.errors=r,c.fields=a,c}return t}(rw(Error));function $8(e,t,r,a,c){if(t.first){var f=new Promise(function(k,N){var D=function(F){return a(F),F.length?N(new nM(F,iw(F))):k(c)},U=D8(e);tM(U,r,D)});return f.catch(function(k){return k}),f}var y=t.firstFields===!0?Object.keys(e):t.firstFields||[],l=Object.keys(e),w=l.length,C=0,A=[],M=new Promise(function(k,N){var D=function(q){if(A.push.apply(A,q),C++,C===w)return a(A),A.length?N(new nM(A,iw(A))):k(c)};l.length||(a(A),k(c)),l.forEach(function(U){var q=e[U];y.indexOf(U)!==-1?tM(q,r,D):L8(q,r,D)})});return M.catch(function(k){return k}),M}function F8(e){return!!(e&&e.message!==void 0)}function B8(e,t){for(var r=e,a=0;a<t.length;a++){if(r==null)return r;r=r[t[a]]}return r}function rM(e,t){return function(r){var a;return e.fullFields?a=B8(t,e.fullFields):a=t[r.field||e.fullField],F8(r)?(r.field=r.field||e.fullField,r.fieldValue=a,r):{message:typeof r=="function"?r():r,fieldValue:a,field:r.field||e.fullField}}}function iM(e,t){if(t){for(var r in t)if(t.hasOwnProperty(r)){var a=t[r];typeof a=="object"&&typeof e[r]=="object"?e[r]=fu({},e[r],a):e[r]=a}}return e}var Cz=function(t,r,a,c,f,y){t.required&&(!a.hasOwnProperty(t.field)||Bi(r,y||t.type))&&c.push(la(f.messages.required,t.fullField))},N8=function(t,r,a,c,f){(/^\s+$/.test(r)||r==="")&&c.push(la(f.messages.whitespace,t.fullField))},Ev,j8=function(){if(Ev)return Ev;var e="[a-fA-F\\d:]",t=function(X){return X&&X.includeBoundaries?"(?:(?<=\\s|^)(?="+e+")|(?<="+e+")(?=\\s|$))":""},r="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",a="[a-fA-F\\d]{1,4}",c=(`
(?:
(?:`+a+":){7}(?:"+a+`|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:`+a+":){6}(?:"+r+"|:"+a+`|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:`+a+":){5}(?::"+r+"|(?::"+a+`){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:`+a+":){4}(?:(?::"+a+"){0,1}:"+r+"|(?::"+a+`){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:`+a+":){3}(?:(?::"+a+"){0,2}:"+r+"|(?::"+a+`){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:`+a+":){2}(?:(?::"+a+"){0,3}:"+r+"|(?::"+a+`){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:`+a+":){1}(?:(?::"+a+"){0,4}:"+r+"|(?::"+a+`){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::`+a+"){0,5}:"+r+"|(?::"+a+`){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`).replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),f=new RegExp("(?:^"+r+"$)|(?:^"+c+"$)"),y=new RegExp("^"+r+"$"),l=new RegExp("^"+c+"$"),w=function(X){return X&&X.exact?f:new RegExp("(?:"+t(X)+r+t(X)+")|(?:"+t(X)+c+t(X)+")","g")};w.v4=function(V){return V&&V.exact?y:new RegExp(""+t(V)+r+t(V),"g")},w.v6=function(V){return V&&V.exact?l:new RegExp(""+t(V)+c+t(V),"g")};var C="(?:(?:[a-z]+:)?//)",A="(?:\\S+(?::\\S*)?@)?",M=w.v4().source,k=w.v6().source,N="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",D="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",U="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",q="(?::\\d{2,5})?",F='(?:[/?#][^\\s"]*)?',j="(?:"+C+"|www\\.)"+A+"(?:localhost|"+M+"|"+k+"|"+N+D+U+")"+q+F;return Ev=new RegExp("(?:^"+j+"$)","i"),Ev},oM={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},wp={integer:function(t){return wp.number(t)&&parseInt(t,10)===t},float:function(t){return wp.number(t)&&!wp.integer(t)},array:function(t){return Array.isArray(t)},regexp:function(t){if(t instanceof RegExp)return!0;try{return!!new RegExp(t)}catch{return!1}},date:function(t){return typeof t.getTime=="function"&&typeof t.getMonth=="function"&&typeof t.getYear=="function"&&!isNaN(t.getTime())},number:function(t){return isNaN(t)?!1:typeof t=="number"},object:function(t){return typeof t=="object"&&!wp.array(t)},method:function(t){return typeof t=="function"},email:function(t){return typeof t=="string"&&t.length<=320&&!!t.match(oM.email)},url:function(t){return typeof t=="string"&&t.length<=2048&&!!t.match(j8())},hex:function(t){return typeof t=="string"&&!!t.match(oM.hex)}},U8=function(t,r,a,c,f){if(t.required&&r===void 0){Cz(t,r,a,c,f);return}var y=["integer","float","array","regexp","object","method","email","number","date","url","hex"],l=t.type;y.indexOf(l)>-1?wp[l](r)||c.push(la(f.messages.types[l],t.fullField,t.type)):l&&typeof r!==t.type&&c.push(la(f.messages.types[l],t.fullField,t.type))},V8=function(t,r,a,c,f){var y=typeof t.len=="number",l=typeof t.min=="number",w=typeof t.max=="number",C=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,A=r,M=null,k=typeof r=="number",N=typeof r=="string",D=Array.isArray(r);if(k?M="number":N?M="string":D&&(M="array"),!M)return!1;D&&(A=r.length),N&&(A=r.replace(C,"_").length),y?A!==t.len&&c.push(la(f.messages[M].len,t.fullField,t.len)):l&&!w&&A<t.min?c.push(la(f.messages[M].min,t.fullField,t.min)):w&&!l&&A>t.max?c.push(la(f.messages[M].max,t.fullField,t.max)):l&&w&&(A<t.min||A>t.max)&&c.push(la(f.messages[M].range,t.fullField,t.min,t.max))},Pd="enum",H8=function(t,r,a,c,f){t[Pd]=Array.isArray(t[Pd])?t[Pd]:[],t[Pd].indexOf(r)===-1&&c.push(la(f.messages[Pd],t.fullField,t[Pd].join(", ")))},G8=function(t,r,a,c,f){if(t.pattern){if(t.pattern instanceof RegExp)t.pattern.lastIndex=0,t.pattern.test(r)||c.push(la(f.messages.pattern.mismatch,t.fullField,r,t.pattern));else if(typeof t.pattern=="string"){var y=new RegExp(t.pattern);y.test(r)||c.push(la(f.messages.pattern.mismatch,t.fullField,r,t.pattern))}}},sr={required:Cz,whitespace:N8,type:U8,range:V8,enum:H8,pattern:G8},W8=function(t,r,a,c,f){var y=[],l=t.required||!t.required&&c.hasOwnProperty(t.field);if(l){if(Bi(r,"string")&&!t.required)return a();sr.required(t,r,c,y,f,"string"),Bi(r,"string")||(sr.type(t,r,c,y,f),sr.range(t,r,c,y,f),sr.pattern(t,r,c,y,f),t.whitespace===!0&&sr.whitespace(t,r,c,y,f))}a(y)},q8=function(t,r,a,c,f){var y=[],l=t.required||!t.required&&c.hasOwnProperty(t.field);if(l){if(Bi(r)&&!t.required)return a();sr.required(t,r,c,y,f),r!==void 0&&sr.type(t,r,c,y,f)}a(y)},Z8=function(t,r,a,c,f){var y=[],l=t.required||!t.required&&c.hasOwnProperty(t.field);if(l){if(r===""&&(r=void 0),Bi(r)&&!t.required)return a();sr.required(t,r,c,y,f),r!==void 0&&(sr.type(t,r,c,y,f),sr.range(t,r,c,y,f))}a(y)},X8=function(t,r,a,c,f){var y=[],l=t.required||!t.required&&c.hasOwnProperty(t.field);if(l){if(Bi(r)&&!t.required)return a();sr.required(t,r,c,y,f),r!==void 0&&sr.type(t,r,c,y,f)}a(y)},K8=function(t,r,a,c,f){var y=[],l=t.required||!t.required&&c.hasOwnProperty(t.field);if(l){if(Bi(r)&&!t.required)return a();sr.required(t,r,c,y,f),Bi(r)||sr.type(t,r,c,y,f)}a(y)},Y8=function(t,r,a,c,f){var y=[],l=t.required||!t.required&&c.hasOwnProperty(t.field);if(l){if(Bi(r)&&!t.required)return a();sr.required(t,r,c,y,f),r!==void 0&&(sr.type(t,r,c,y,f),sr.range(t,r,c,y,f))}a(y)},J8=function(t,r,a,c,f){var y=[],l=t.required||!t.required&&c.hasOwnProperty(t.field);if(l){if(Bi(r)&&!t.required)return a();sr.required(t,r,c,y,f),r!==void 0&&(sr.type(t,r,c,y,f),sr.range(t,r,c,y,f))}a(y)},Q8=function(t,r,a,c,f){var y=[],l=t.required||!t.required&&c.hasOwnProperty(t.field);if(l){if(r==null&&!t.required)return a();sr.required(t,r,c,y,f,"array"),r!=null&&(sr.type(t,r,c,y,f),sr.range(t,r,c,y,f))}a(y)},eU=function(t,r,a,c,f){var y=[],l=t.required||!t.required&&c.hasOwnProperty(t.field);if(l){if(Bi(r)&&!t.required)return a();sr.required(t,r,c,y,f),r!==void 0&&sr.type(t,r,c,y,f)}a(y)},tU="enum",nU=function(t,r,a,c,f){var y=[],l=t.required||!t.required&&c.hasOwnProperty(t.field);if(l){if(Bi(r)&&!t.required)return a();sr.required(t,r,c,y,f),r!==void 0&&sr[tU](t,r,c,y,f)}a(y)},rU=function(t,r,a,c,f){var y=[],l=t.required||!t.required&&c.hasOwnProperty(t.field);if(l){if(Bi(r,"string")&&!t.required)return a();sr.required(t,r,c,y,f),Bi(r,"string")||sr.pattern(t,r,c,y,f)}a(y)},iU=function(t,r,a,c,f){var y=[],l=t.required||!t.required&&c.hasOwnProperty(t.field);if(l){if(Bi(r,"date")&&!t.required)return a();if(sr.required(t,r,c,y,f),!Bi(r,"date")){var w;r instanceof Date?w=r:w=new Date(r),sr.type(t,w,c,y,f),w&&sr.range(t,w.getTime(),c,y,f)}}a(y)},oU=function(t,r,a,c,f){var y=[],l=Array.isArray(r)?"array":typeof r;sr.required(t,r,c,y,f,l),a(y)},h1=function(t,r,a,c,f){var y=t.type,l=[],w=t.required||!t.required&&c.hasOwnProperty(t.field);if(w){if(Bi(r,y)&&!t.required)return a();sr.required(t,r,c,l,f,y),Bi(r,y)||sr.type(t,r,c,l,f)}a(l)},aU=function(t,r,a,c,f){var y=[],l=t.required||!t.required&&c.hasOwnProperty(t.field);if(l){if(Bi(r)&&!t.required)return a();sr.required(t,r,c,y,f)}a(y)},Dp={string:W8,method:q8,number:Z8,boolean:X8,regexp:K8,integer:Y8,float:J8,array:Q8,object:eU,enum:nU,pattern:rU,date:iU,url:h1,hex:h1,email:h1,required:oU,any:aU};function ow(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var t=JSON.parse(JSON.stringify(this));return t.clone=this.clone,t}}}var aw=ow(),wm=function(){function e(r){this.rules=null,this._messages=aw,this.define(r)}var t=e.prototype;return t.define=function(a){var c=this;if(!a)throw new Error("Cannot configure a schema with no rules");if(typeof a!="object"||Array.isArray(a))throw new Error("Rules must be an object");this.rules={},Object.keys(a).forEach(function(f){var y=a[f];c.rules[f]=Array.isArray(y)?y:[y]})},t.messages=function(a){return a&&(this._messages=iM(ow(),a)),this._messages},t.validate=function(a,c,f){var y=this;c===void 0&&(c={}),f===void 0&&(f=function(){});var l=a,w=c,C=f;if(typeof w=="function"&&(C=w,w={}),!this.rules||Object.keys(this.rules).length===0)return C&&C(null,l),Promise.resolve(l);function A(U){var q=[],F={};function j(X){if(Array.isArray(X)){var te;q=(te=q).concat.apply(te,X)}else q.push(X)}for(var V=0;V<U.length;V++)j(U[V]);q.length?(F=iw(q),C(q,F)):C(null,l)}if(w.messages){var M=this.messages();M===aw&&(M=ow()),iM(M,w.messages),w.messages=M}else w.messages=this.messages();var k={},N=w.keys||Object.keys(this.rules);N.forEach(function(U){var q=y.rules[U],F=l[U];q.forEach(function(j){var V=j;typeof V.transform=="function"&&(l===a&&(l=fu({},l)),F=l[U]=V.transform(F)),typeof V=="function"?V={validator:V}:V=fu({},V),V.validator=y.getValidationMethod(V),V.validator&&(V.field=U,V.fullField=V.fullField||U,V.type=y.getType(V),k[U]=k[U]||[],k[U].push({rule:V,value:F,source:l,field:U}))})});var D={};return $8(k,w,function(U,q){var F=U.rule,j=(F.type==="object"||F.type==="array")&&(typeof F.fields=="object"||typeof F.defaultField=="object");j=j&&(F.required||!F.required&&U.value),F.field=U.field;function V(re,Q){return fu({},Q,{fullField:F.fullField+"."+re,fullFields:F.fullFields?[].concat(F.fullFields,[re]):[re]})}function X(re){re===void 0&&(re=[]);var Q=Array.isArray(re)?re:[re];!w.suppressWarning&&Q.length&&e.warning("async-validator:",Q),Q.length&&F.message!==void 0&&(Q=[].concat(F.message));var ne=Q.map(rM(F,l));if(w.first&&ne.length)return D[F.field]=1,q(ne);if(!j)q(ne);else{if(F.required&&!U.value)return F.message!==void 0?ne=[].concat(F.message).map(rM(F,l)):w.error&&(ne=[w.error(F,la(w.messages.required,F.field))]),q(ne);var ee={};F.defaultField&&Object.keys(U.value).map(function(ie){ee[ie]=F.defaultField}),ee=fu({},ee,U.rule.fields);var me={};Object.keys(ee).forEach(function(ie){var fe=ee[ie],Te=Array.isArray(fe)?fe:[fe];me[ie]=Te.map(V.bind(null,ie))});var ce=new e(me);ce.messages(w.messages),U.rule.options&&(U.rule.options.messages=w.messages,U.rule.options.error=w.error),ce.validate(U.value,U.rule.options||w,function(ie){var fe=[];ne&&ne.length&&fe.push.apply(fe,ne),ie&&ie.length&&fe.push.apply(fe,ie),q(fe.length?fe:null)})}}var te;if(F.asyncValidator)te=F.asyncValidator(F,U.value,X,U.source,w);else if(F.validator){try{te=F.validator(F,U.value,X,U.source,w)}catch(re){console.error==null||console.error(re),w.suppressValidatorError||setTimeout(function(){throw re},0),X(re.message)}te===!0?X():te===!1?X(typeof F.message=="function"?F.message(F.fullField||F.field):F.message||(F.fullField||F.field)+" fails"):te instanceof Array?X(te):te instanceof Error&&X(te.message)}te&&te.then&&te.then(function(){return X()},function(re){return X(re)})},function(U){A(U)},l)},t.getType=function(a){if(a.type===void 0&&a.pattern instanceof RegExp&&(a.type="pattern"),typeof a.validator!="function"&&a.type&&!Dp.hasOwnProperty(a.type))throw new Error(la("Unknown rule type %s",a.type));return a.type||"string"},t.getValidationMethod=function(a){if(typeof a.validator=="function")return a.validator;var c=Object.keys(a),f=c.indexOf("message");return f!==-1&&c.splice(f,1),c.length===1&&c[0]==="required"?Dp.required:Dp[this.getType(a)]||void 0},e}();wm.register=function(t,r){if(typeof r!="function")throw new Error("Cannot register a validator by type, validator is not a function");Dp[t]=r};wm.warning=z8;wm.messages=aw;wm.validators=Dp;var ra="'${name}' is not a valid ${type}",Tz={default:"Validation error on field '${name}'",required:"'${name}' is required",enum:"'${name}' must be one of [${enum}]",whitespace:"'${name}' cannot be empty",date:{format:"'${name}' is invalid for format date",parse:"'${name}' could not be parsed as date",invalid:"'${name}' is invalid date"},types:{string:ra,method:ra,array:ra,object:ra,number:ra,date:ra,boolean:ra,integer:ra,float:ra,regexp:ra,email:ra,url:ra,hex:ra},string:{len:"'${name}' must be exactly ${len} characters",min:"'${name}' must be at least ${min} characters",max:"'${name}' cannot be longer than ${max} characters",range:"'${name}' must be between ${min} and ${max} characters"},number:{len:"'${name}' must equal ${len}",min:"'${name}' cannot be less than ${min}",max:"'${name}' cannot be greater than ${max}",range:"'${name}' must be between ${min} and ${max}"},array:{len:"'${name}' must be exactly ${len} in length",min:"'${name}' cannot be less than ${min} in length",max:"'${name}' cannot be greater than ${max} in length",range:"'${name}' must be between ${min} and ${max} in length"},pattern:{mismatch:"'${name}' does not match pattern ${pattern}"}},aM=wm;function sU(e,t){return e.replace(/\$\{\w+\}/g,function(r){var a=r.slice(2,-1);return t[a]})}var sM="CODE_LOGIC_ERROR";function sw(e,t,r,a,c){return lw.apply(this,arguments)}function lw(){return lw=Ru(To().mark(function e(t,r,a,c,f){var y,l,w,C,A,M,k,N,D;return To().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return y=lt({},a),delete y.ruleIndex,aM.warning=function(){},y.validator&&(l=y.validator,y.validator=function(){try{return l.apply(void 0,arguments)}catch(F){return console.error(F),Promise.reject(sM)}}),w=null,y&&y.type==="array"&&y.defaultField&&(w=y.defaultField,delete y.defaultField),C=new aM(De({},t,[y])),A=Jd(Tz,c.validateMessages),C.messages(A),M=[],q.prev=10,q.next=13,Promise.resolve(C.validate(De({},t,r),lt({},c)));case 13:q.next=18;break;case 15:q.prev=15,q.t0=q.catch(10),q.t0.errors&&(M=q.t0.errors.map(function(F,j){var V=F.message,X=V===sM?A.default:V;return T.isValidElement(X)?T.cloneElement(X,{key:"error_".concat(j)}):X}));case 18:if(!(!M.length&&w)){q.next=23;break}return q.next=21,Promise.all(r.map(function(F,j){return sw("".concat(t,".").concat(j),F,w,c,f)}));case 21:return k=q.sent,q.abrupt("return",k.reduce(function(F,j){return[].concat(mn(F),mn(j))},[]));case 23:return N=lt(lt({},a),{},{name:t,enum:(a.enum||[]).join(", ")},f),D=M.map(function(F){return typeof F=="string"?sU(F,N):F}),q.abrupt("return",D);case 26:case"end":return q.stop()}},e,null,[[10,15]])})),lw.apply(this,arguments)}function lU(e,t,r,a,c,f){var y=e.join("."),l=r.map(function(A,M){var k=A.validator,N=lt(lt({},A),{},{ruleIndex:M});return k&&(N.validator=function(D,U,q){var F=!1,j=function(){for(var te=arguments.length,re=new Array(te),Q=0;Q<te;Q++)re[Q]=arguments[Q];Promise.resolve().then(function(){Vo(!F,"Your validator function has already return a promise. `callback` will be ignored."),F||q.apply(void 0,re)})},V=k(D,U,j);F=V&&typeof V.then=="function"&&typeof V.catch=="function",Vo(F,"`callback` is deprecated. Please return a promise instead."),F&&V.then(function(){q()}).catch(function(X){q(X||" ")})}),N}).sort(function(A,M){var k=A.warningOnly,N=A.ruleIndex,D=M.warningOnly,U=M.ruleIndex;return!!k==!!D?N-U:k?1:-1}),w;if(c===!0)w=new Promise(function(){var A=Ru(To().mark(function M(k,N){var D,U,q;return To().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:D=0;case 1:if(!(D<l.length)){j.next=12;break}return U=l[D],j.next=5,sw(y,t,U,a,f);case 5:if(q=j.sent,!q.length){j.next=9;break}return N([{errors:q,rule:U}]),j.abrupt("return");case 9:D+=1,j.next=1;break;case 12:k([]);case 13:case"end":return j.stop()}},M)}));return function(M,k){return A.apply(this,arguments)}}());else{var C=l.map(function(A){return sw(y,t,A,a,f).then(function(M){return{errors:M,rule:A}})});w=(c?uU(C):cU(C)).then(function(A){return Promise.reject(A)})}return w.catch(function(A){return A}),w}function cU(e){return cw.apply(this,arguments)}function cw(){return cw=Ru(To().mark(function e(t){return To().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",Promise.all(t).then(function(c){var f,y=(f=[]).concat.apply(f,mn(c));return y}));case 1:case"end":return a.stop()}},e)})),cw.apply(this,arguments)}function uU(e){return uw.apply(this,arguments)}function uw(){return uw=Ru(To().mark(function e(t){var r;return To().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return r=0,c.abrupt("return",new Promise(function(f){t.forEach(function(y){y.then(function(l){l.errors.length&&f([l]),r+=1,r===t.length&&f([])})})}));case 2:case"end":return c.stop()}},e)})),uw.apply(this,arguments)}function bi(e){return tw(e)}function lM(e,t){var r={};return t.forEach(function(a){var c=us(e,a);r=as(r,a,c)}),r}function lh(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return e&&e.some(function(a){return Iz(t,a,r)})}function Iz(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return!e||!t||!r&&e.length!==t.length?!1:t.every(function(a,c){return e[c]===a})}function dU(e,t){if(e===t)return!0;if(!e&&t||e&&!t||!e||!t||Kn(e)!=="object"||Kn(t)!=="object")return!1;var r=Object.keys(e),a=Object.keys(t),c=new Set([].concat(r,a));return mn(c).every(function(f){var y=e[f],l=t[f];return typeof y=="function"&&typeof l=="function"?!0:y===l})}function hU(e){var t=arguments.length<=1?void 0:arguments[1];return t&&t.target&&Kn(t.target)==="object"&&e in t.target?t.target[e]:t}function cM(e,t,r){var a=e.length;if(t<0||t>=a||r<0||r>=a)return e;var c=e[t],f=t-r;return f>0?[].concat(mn(e.slice(0,r)),[c],mn(e.slice(r,t)),mn(e.slice(t+1,a))):f<0?[].concat(mn(e.slice(0,t)),mn(e.slice(t+1,r+1)),[c],mn(e.slice(r+1,a))):e}var fU=["name"],Ia=[];function uM(e,t,r,a,c,f){return typeof e=="function"?e(t,r,"source"in f?{source:f.source}:{}):a!==c}var GS=function(e){Pu(r,e);var t=Au(r);function r(a){var c;if(qo(this,r),c=t.call(this,a),De(vn(c),"state",{resetCount:0}),De(vn(c),"cancelRegisterFunc",null),De(vn(c),"mounted",!1),De(vn(c),"touched",!1),De(vn(c),"dirty",!1),De(vn(c),"validatePromise",void 0),De(vn(c),"prevValidating",void 0),De(vn(c),"errors",Ia),De(vn(c),"warnings",Ia),De(vn(c),"cancelRegister",function(){var w=c.props,C=w.preserve,A=w.isListField,M=w.name;c.cancelRegisterFunc&&c.cancelRegisterFunc(A,C,bi(M)),c.cancelRegisterFunc=null}),De(vn(c),"getNamePath",function(){var w=c.props,C=w.name,A=w.fieldContext,M=A.prefixName,k=M===void 0?[]:M;return C!==void 0?[].concat(mn(k),mn(C)):[]}),De(vn(c),"getRules",function(){var w=c.props,C=w.rules,A=C===void 0?[]:C,M=w.fieldContext;return A.map(function(k){return typeof k=="function"?k(M):k})}),De(vn(c),"refresh",function(){c.mounted&&c.setState(function(w){var C=w.resetCount;return{resetCount:C+1}})}),De(vn(c),"metaCache",null),De(vn(c),"triggerMetaEvent",function(w){var C=c.props.onMetaChange;if(C){var A=lt(lt({},c.getMeta()),{},{destroy:w});nO(c.metaCache,A)||C(A),c.metaCache=A}else c.metaCache=null}),De(vn(c),"onStoreChange",function(w,C,A){var M=c.props,k=M.shouldUpdate,N=M.dependencies,D=N===void 0?[]:N,U=M.onReset,q=A.store,F=c.getNamePath(),j=c.getValue(w),V=c.getValue(q),X=C&&lh(C,F);switch(A.type==="valueUpdate"&&A.source==="external"&&j!==V&&(c.touched=!0,c.dirty=!0,c.validatePromise=null,c.errors=Ia,c.warnings=Ia,c.triggerMetaEvent()),A.type){case"reset":if(!C||X){c.touched=!1,c.dirty=!1,c.validatePromise=void 0,c.errors=Ia,c.warnings=Ia,c.triggerMetaEvent(),U==null||U(),c.refresh();return}break;case"remove":{if(k){c.reRender();return}break}case"setField":{var te=A.data;if(X){"touched"in te&&(c.touched=te.touched),"validating"in te&&!("originRCField"in te)&&(c.validatePromise=te.validating?Promise.resolve([]):null),"errors"in te&&(c.errors=te.errors||Ia),"warnings"in te&&(c.warnings=te.warnings||Ia),c.dirty=!0,c.triggerMetaEvent(),c.reRender();return}else if("value"in te&&lh(C,F,!0)){c.reRender();return}if(k&&!F.length&&uM(k,w,q,j,V,A)){c.reRender();return}break}case"dependenciesUpdate":{var re=D.map(bi);if(re.some(function(Q){return lh(A.relatedFields,Q)})){c.reRender();return}break}default:if(X||(!D.length||F.length||k)&&uM(k,w,q,j,V,A)){c.reRender();return}break}k===!0&&c.reRender()}),De(vn(c),"validateRules",function(w){var C=c.getNamePath(),A=c.getValue(),M=w||{},k=M.triggerName,N=M.validateOnly,D=N===void 0?!1:N,U=Promise.resolve().then(Ru(To().mark(function q(){var F,j,V,X,te,re,Q;return To().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:if(c.mounted){ee.next=2;break}return ee.abrupt("return",[]);case 2:if(F=c.props,j=F.validateFirst,V=j===void 0?!1:j,X=F.messageVariables,te=F.validateDebounce,re=c.getRules(),k&&(re=re.filter(function(me){return me}).filter(function(me){var ce=me.validateTrigger;if(!ce)return!0;var ie=tw(ce);return ie.includes(k)})),!(te&&k)){ee.next=10;break}return ee.next=8,new Promise(function(me){setTimeout(me,te)});case 8:if(c.validatePromise===U){ee.next=10;break}return ee.abrupt("return",[]);case 10:return Q=lU(C,A,re,w,V,X),Q.catch(function(me){return me}).then(function(){var me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ia;if(c.validatePromise===U){var ce;c.validatePromise=null;var ie=[],fe=[];(ce=me.forEach)===null||ce===void 0||ce.call(me,function(Te){var $e=Te.rule.warningOnly,Fe=Te.errors,Ne=Fe===void 0?Ia:Fe;$e?fe.push.apply(fe,mn(Ne)):ie.push.apply(ie,mn(Ne))}),c.errors=ie,c.warnings=fe,c.triggerMetaEvent(),c.reRender()}}),ee.abrupt("return",Q);case 13:case"end":return ee.stop()}},q)})));return D||(c.validatePromise=U,c.dirty=!0,c.errors=Ia,c.warnings=Ia,c.triggerMetaEvent(),c.reRender()),U}),De(vn(c),"isFieldValidating",function(){return!!c.validatePromise}),De(vn(c),"isFieldTouched",function(){return c.touched}),De(vn(c),"isFieldDirty",function(){if(c.dirty||c.props.initialValue!==void 0)return!0;var w=c.props.fieldContext,C=w.getInternalHooks(hu),A=C.getInitialValue;return A(c.getNamePath())!==void 0}),De(vn(c),"getErrors",function(){return c.errors}),De(vn(c),"getWarnings",function(){return c.warnings}),De(vn(c),"isListField",function(){return c.props.isListField}),De(vn(c),"isList",function(){return c.props.isList}),De(vn(c),"isPreserve",function(){return c.props.preserve}),De(vn(c),"getMeta",function(){c.prevValidating=c.isFieldValidating();var w={touched:c.isFieldTouched(),validating:c.prevValidating,errors:c.errors,warnings:c.warnings,name:c.getNamePath(),validated:c.validatePromise===null};return w}),De(vn(c),"getOnlyChild",function(w){if(typeof w=="function"){var C=c.getMeta();return lt(lt({},c.getOnlyChild(w(c.getControlled(),C,c.props.fieldContext))),{},{isFunction:!0})}var A=hl(w);return A.length!==1||!T.isValidElement(A[0])?{child:A,isFunction:!1}:{child:A[0],isFunction:!1}}),De(vn(c),"getValue",function(w){var C=c.props.fieldContext.getFieldsValue,A=c.getNamePath();return us(w||C(!0),A)}),De(vn(c),"getControlled",function(){var w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},C=c.props,A=C.trigger,M=C.validateTrigger,k=C.getValueFromEvent,N=C.normalize,D=C.valuePropName,U=C.getValueProps,q=C.fieldContext,F=M!==void 0?M:q.validateTrigger,j=c.getNamePath(),V=q.getInternalHooks,X=q.getFieldsValue,te=V(hu),re=te.dispatch,Q=c.getValue(),ne=U||function(ie){return De({},D,ie)},ee=w[A],me=lt(lt({},w),ne(Q));me[A]=function(){c.touched=!0,c.dirty=!0,c.triggerMetaEvent();for(var ie,fe=arguments.length,Te=new Array(fe),$e=0;$e<fe;$e++)Te[$e]=arguments[$e];k?ie=k.apply(void 0,Te):ie=hU.apply(void 0,[D].concat(Te)),N&&(ie=N(ie,Q,X(!0))),re({type:"updateValue",namePath:j,value:ie}),ee&&ee.apply(void 0,Te)};var ce=tw(F||[]);return ce.forEach(function(ie){var fe=me[ie];me[ie]=function(){fe&&fe.apply(void 0,arguments);var Te=c.props.rules;Te&&Te.length&&re({type:"validateField",namePath:j,triggerName:ie})}}),me}),a.fieldContext){var f=a.fieldContext.getInternalHooks,y=f(hu),l=y.initEntityValue;l(vn(c))}return c}return Zo(r,[{key:"componentDidMount",value:function(){var c=this.props,f=c.shouldUpdate,y=c.fieldContext;if(this.mounted=!0,y){var l=y.getInternalHooks,w=l(hu),C=w.registerField;this.cancelRegisterFunc=C(this)}f===!0&&this.reRender()}},{key:"componentWillUnmount",value:function(){this.cancelRegister(),this.triggerMetaEvent(!0),this.mounted=!1}},{key:"reRender",value:function(){this.mounted&&this.forceUpdate()}},{key:"render",value:function(){var c=this.state.resetCount,f=this.props.children,y=this.getOnlyChild(f),l=y.child,w=y.isFunction,C;return w?C=l:T.isValidElement(l)?C=T.cloneElement(l,this.getControlled(l.props)):(Vo(!l,"`children` of Field is not validate ReactElement."),C=l),T.createElement(T.Fragment,{key:c},C)}}]),r}(T.Component);De(GS,"contextType",wh);De(GS,"defaultProps",{trigger:"onChange",valuePropName:"value"});function Mz(e){var t=e.name,r=Vr(e,fU),a=T.useContext(wh),c=T.useContext(zy),f=t!==void 0?bi(t):void 0,y="keep";return r.isListField||(y="_".concat((f||[]).join("_"))),T.createElement(GS,Cn({key:y,name:f,isListField:!!c},r,{fieldContext:a}))}function pU(e){var t=e.name,r=e.initialValue,a=e.children,c=e.rules,f=e.validateTrigger,y=e.isListField,l=T.useContext(wh),w=T.useContext(zy),C=T.useRef({keys:[],id:0}),A=C.current,M=T.useMemo(function(){var U=bi(l.prefixName)||[];return[].concat(mn(U),mn(bi(t)))},[l.prefixName,t]),k=T.useMemo(function(){return lt(lt({},l),{},{prefixName:M})},[l,M]),N=T.useMemo(function(){return{getKey:function(q){var F=M.length,j=q[F];return[A.keys[j],q.slice(F+1)]}}},[M]);if(typeof a!="function")return Vo(!1,"Form.List only accepts function as children."),null;var D=function(q,F,j){var V=j.source;return V==="internal"?!1:q!==F};return T.createElement(zy.Provider,{value:N},T.createElement(wh.Provider,{value:k},T.createElement(Mz,{name:[],shouldUpdate:D,rules:c,validateTrigger:f,initialValue:r,isList:!0,isListField:y??!!w},function(U,q){var F=U.value,j=F===void 0?[]:F,V=U.onChange,X=l.getFieldValue,te=function(){var ee=X(M||[]);return ee||[]},re={add:function(ee,me){var ce=te();me>=0&&me<=ce.length?(A.keys=[].concat(mn(A.keys.slice(0,me)),[A.id],mn(A.keys.slice(me))),V([].concat(mn(ce.slice(0,me)),[ee],mn(ce.slice(me))))):(A.keys=[].concat(mn(A.keys),[A.id]),V([].concat(mn(ce),[ee]))),A.id+=1},remove:function(ee){var me=te(),ce=new Set(Array.isArray(ee)?ee:[ee]);ce.size<=0||(A.keys=A.keys.filter(function(ie,fe){return!ce.has(fe)}),V(me.filter(function(ie,fe){return!ce.has(fe)})))},move:function(ee,me){if(ee!==me){var ce=te();ee<0||ee>=ce.length||me<0||me>=ce.length||(A.keys=cM(A.keys,ee,me),V(cM(ce,ee,me)))}}},Q=j||[];return Array.isArray(Q)||(Q=[]),a(Q.map(function(ne,ee){var me=A.keys[ee];return me===void 0&&(A.keys[ee]=A.id,me=A.keys[ee],A.id+=1),{name:ee,key:me,isListField:!0}}),re,q)})))}function mU(e){var t=!1,r=e.length,a=[];return e.length?new Promise(function(c,f){e.forEach(function(y,l){y.catch(function(w){return t=!0,w}).then(function(w){r-=1,a[l]=w,!(r>0)&&(t&&f(a),c(a))})})}):Promise.resolve([])}var Pz="__@field_split__";function f1(e){return e.map(function(t){return"".concat(Kn(t),":").concat(t)}).join(Pz)}var Ad=function(){function e(){qo(this,e),De(this,"kvs",new Map)}return Zo(e,[{key:"set",value:function(r,a){this.kvs.set(f1(r),a)}},{key:"get",value:function(r){return this.kvs.get(f1(r))}},{key:"update",value:function(r,a){var c=this.get(r),f=a(c);f?this.set(r,f):this.delete(r)}},{key:"delete",value:function(r){this.kvs.delete(f1(r))}},{key:"map",value:function(r){return mn(this.kvs.entries()).map(function(a){var c=Ut(a,2),f=c[0],y=c[1],l=f.split(Pz);return r({key:l.map(function(w){var C=w.match(/^([^:]*):(.*)$/),A=Ut(C,3),M=A[1],k=A[2];return M==="number"?Number(k):k}),value:y})})}},{key:"toJSON",value:function(){var r={};return this.map(function(a){var c=a.key,f=a.value;return r[c.join(".")]=f,null}),r}}]),e}(),gU=["name"],vU=Zo(function e(t){var r=this;qo(this,e),De(this,"formHooked",!1),De(this,"forceRootUpdate",void 0),De(this,"subscribable",!0),De(this,"store",{}),De(this,"fieldEntities",[]),De(this,"initialValues",{}),De(this,"callbacks",{}),De(this,"validateMessages",null),De(this,"preserve",null),De(this,"lastValidatePromise",null),De(this,"getForm",function(){return{getFieldValue:r.getFieldValue,getFieldsValue:r.getFieldsValue,getFieldError:r.getFieldError,getFieldWarning:r.getFieldWarning,getFieldsError:r.getFieldsError,isFieldsTouched:r.isFieldsTouched,isFieldTouched:r.isFieldTouched,isFieldValidating:r.isFieldValidating,isFieldsValidating:r.isFieldsValidating,resetFields:r.resetFields,setFields:r.setFields,setFieldValue:r.setFieldValue,setFieldsValue:r.setFieldsValue,validateFields:r.validateFields,submit:r.submit,_init:!0,getInternalHooks:r.getInternalHooks}}),De(this,"getInternalHooks",function(a){return a===hu?(r.formHooked=!0,{dispatch:r.dispatch,initEntityValue:r.initEntityValue,registerField:r.registerField,useSubscribe:r.useSubscribe,setInitialValues:r.setInitialValues,destroyForm:r.destroyForm,setCallbacks:r.setCallbacks,setValidateMessages:r.setValidateMessages,getFields:r.getFields,setPreserve:r.setPreserve,getInitialValue:r.getInitialValue,registerWatch:r.registerWatch}):(Vo(!1,"`getInternalHooks` is internal usage. Should not call directly."),null)}),De(this,"useSubscribe",function(a){r.subscribable=a}),De(this,"prevWithoutPreserves",null),De(this,"setInitialValues",function(a,c){if(r.initialValues=a||{},c){var f,y=Jd(a,r.store);(f=r.prevWithoutPreserves)===null||f===void 0||f.map(function(l){var w=l.key;y=as(y,w,us(a,w))}),r.prevWithoutPreserves=null,r.updateStore(y)}}),De(this,"destroyForm",function(){var a=new Ad;r.getFieldEntities(!0).forEach(function(c){r.isMergedPreserve(c.isPreserve())||a.set(c.getNamePath(),!0)}),r.prevWithoutPreserves=a}),De(this,"getInitialValue",function(a){var c=us(r.initialValues,a);return a.length?Jd(c):c}),De(this,"setCallbacks",function(a){r.callbacks=a}),De(this,"setValidateMessages",function(a){r.validateMessages=a}),De(this,"setPreserve",function(a){r.preserve=a}),De(this,"watchList",[]),De(this,"registerWatch",function(a){return r.watchList.push(a),function(){r.watchList=r.watchList.filter(function(c){return c!==a})}}),De(this,"notifyWatch",function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];if(r.watchList.length){var c=r.getFieldsValue(),f=r.getFieldsValue(!0);r.watchList.forEach(function(y){y(c,f,a)})}}),De(this,"timeoutId",null),De(this,"warningUnhooked",function(){}),De(this,"updateStore",function(a){r.store=a}),De(this,"getFieldEntities",function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return a?r.fieldEntities.filter(function(c){return c.getNamePath().length}):r.fieldEntities}),De(this,"getFieldsMap",function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,c=new Ad;return r.getFieldEntities(a).forEach(function(f){var y=f.getNamePath();c.set(y,f)}),c}),De(this,"getFieldEntitiesForNamePathList",function(a){if(!a)return r.getFieldEntities(!0);var c=r.getFieldsMap(!0);return a.map(function(f){var y=bi(f);return c.get(y)||{INVALIDATE_NAME_PATH:bi(f)}})}),De(this,"getFieldsValue",function(a,c){r.warningUnhooked();var f,y,l;if(a===!0||Array.isArray(a)?(f=a,y=c):a&&Kn(a)==="object"&&(l=a.strict,y=a.filter),f===!0&&!y)return r.store;var w=r.getFieldEntitiesForNamePathList(Array.isArray(f)?f:null),C=[];return w.forEach(function(A){var M,k,N="INVALIDATE_NAME_PATH"in A?A.INVALIDATE_NAME_PATH:A.getNamePath();if(l){var D,U;if((D=(U=A).isList)!==null&&D!==void 0&&D.call(U))return}else if(!f&&(M=(k=A).isListField)!==null&&M!==void 0&&M.call(k))return;if(!y)C.push(N);else{var q="getMeta"in A?A.getMeta():null;y(q)&&C.push(N)}}),lM(r.store,C.map(bi))}),De(this,"getFieldValue",function(a){r.warningUnhooked();var c=bi(a);return us(r.store,c)}),De(this,"getFieldsError",function(a){r.warningUnhooked();var c=r.getFieldEntitiesForNamePathList(a);return c.map(function(f,y){return f&&!("INVALIDATE_NAME_PATH"in f)?{name:f.getNamePath(),errors:f.getErrors(),warnings:f.getWarnings()}:{name:bi(a[y]),errors:[],warnings:[]}})}),De(this,"getFieldError",function(a){r.warningUnhooked();var c=bi(a),f=r.getFieldsError([c])[0];return f.errors}),De(this,"getFieldWarning",function(a){r.warningUnhooked();var c=bi(a),f=r.getFieldsError([c])[0];return f.warnings}),De(this,"isFieldsTouched",function(){r.warningUnhooked();for(var a=arguments.length,c=new Array(a),f=0;f<a;f++)c[f]=arguments[f];var y=c[0],l=c[1],w,C=!1;c.length===0?w=null:c.length===1?Array.isArray(y)?(w=y.map(bi),C=!1):(w=null,C=y):(w=y.map(bi),C=l);var A=r.getFieldEntities(!0),M=function(q){return q.isFieldTouched()};if(!w)return C?A.every(M):A.some(M);var k=new Ad;w.forEach(function(U){k.set(U,[])}),A.forEach(function(U){var q=U.getNamePath();w.forEach(function(F){F.every(function(j,V){return q[V]===j})&&k.update(F,function(j){return[].concat(mn(j),[U])})})});var N=function(q){return q.some(M)},D=k.map(function(U){var q=U.value;return q});return C?D.every(N):D.some(N)}),De(this,"isFieldTouched",function(a){return r.warningUnhooked(),r.isFieldsTouched([a])}),De(this,"isFieldsValidating",function(a){r.warningUnhooked();var c=r.getFieldEntities();if(!a)return c.some(function(y){return y.isFieldValidating()});var f=a.map(bi);return c.some(function(y){var l=y.getNamePath();return lh(f,l)&&y.isFieldValidating()})}),De(this,"isFieldValidating",function(a){return r.warningUnhooked(),r.isFieldsValidating([a])}),De(this,"resetWithFieldInitialValue",function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},c=new Ad,f=r.getFieldEntities(!0);f.forEach(function(w){var C=w.props.initialValue,A=w.getNamePath();if(C!==void 0){var M=c.get(A)||new Set;M.add({entity:w,value:C}),c.set(A,M)}});var y=function(C){C.forEach(function(A){var M=A.props.initialValue;if(M!==void 0){var k=A.getNamePath(),N=r.getInitialValue(k);if(N!==void 0)Vo(!1,"Form already set 'initialValues' with path '".concat(k.join("."),"'. Field can not overwrite it."));else{var D=c.get(k);if(D&&D.size>1)Vo(!1,"Multiple Field with path '".concat(k.join("."),"' set 'initialValue'. Can not decide which one to pick."));else if(D){var U=r.getFieldValue(k),q=A.isListField();!q&&(!a.skipExist||U===void 0)&&r.updateStore(as(r.store,k,mn(D)[0].value))}}}})},l;a.entities?l=a.entities:a.namePathList?(l=[],a.namePathList.forEach(function(w){var C=c.get(w);if(C){var A;(A=l).push.apply(A,mn(mn(C).map(function(M){return M.entity})))}})):l=f,y(l)}),De(this,"resetFields",function(a){r.warningUnhooked();var c=r.store;if(!a){r.updateStore(Jd(r.initialValues)),r.resetWithFieldInitialValue(),r.notifyObservers(c,null,{type:"reset"}),r.notifyWatch();return}var f=a.map(bi);f.forEach(function(y){var l=r.getInitialValue(y);r.updateStore(as(r.store,y,l))}),r.resetWithFieldInitialValue({namePathList:f}),r.notifyObservers(c,f,{type:"reset"}),r.notifyWatch(f)}),De(this,"setFields",function(a){r.warningUnhooked();var c=r.store,f=[];a.forEach(function(y){var l=y.name,w=Vr(y,gU),C=bi(l);f.push(C),"value"in w&&r.updateStore(as(r.store,C,w.value)),r.notifyObservers(c,[C],{type:"setField",data:y})}),r.notifyWatch(f)}),De(this,"getFields",function(){var a=r.getFieldEntities(!0),c=a.map(function(f){var y=f.getNamePath(),l=f.getMeta(),w=lt(lt({},l),{},{name:y,value:r.getFieldValue(y)});return Object.defineProperty(w,"originRCField",{value:!0}),w});return c}),De(this,"initEntityValue",function(a){var c=a.props.initialValue;if(c!==void 0){var f=a.getNamePath(),y=us(r.store,f);y===void 0&&r.updateStore(as(r.store,f,c))}}),De(this,"isMergedPreserve",function(a){var c=a!==void 0?a:r.preserve;return c??!0}),De(this,"registerField",function(a){r.fieldEntities.push(a);var c=a.getNamePath();if(r.notifyWatch([c]),a.props.initialValue!==void 0){var f=r.store;r.resetWithFieldInitialValue({entities:[a],skipExist:!0}),r.notifyObservers(f,[a.getNamePath()],{type:"valueUpdate",source:"internal"})}return function(y,l){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(r.fieldEntities=r.fieldEntities.filter(function(M){return M!==a}),!r.isMergedPreserve(l)&&(!y||w.length>1)){var C=y?void 0:r.getInitialValue(c);if(c.length&&r.getFieldValue(c)!==C&&r.fieldEntities.every(function(M){return!Iz(M.getNamePath(),c)})){var A=r.store;r.updateStore(as(A,c,C,!0)),r.notifyObservers(A,[c],{type:"remove"}),r.triggerDependenciesUpdate(A,c)}}r.notifyWatch([c])}}),De(this,"dispatch",function(a){switch(a.type){case"updateValue":{var c=a.namePath,f=a.value;r.updateValue(c,f);break}case"validateField":{var y=a.namePath,l=a.triggerName;r.validateFields([y],{triggerName:l});break}}}),De(this,"notifyObservers",function(a,c,f){if(r.subscribable){var y=lt(lt({},f),{},{store:r.getFieldsValue(!0)});r.getFieldEntities().forEach(function(l){var w=l.onStoreChange;w(a,c,y)})}else r.forceRootUpdate()}),De(this,"triggerDependenciesUpdate",function(a,c){var f=r.getDependencyChildrenFields(c);return f.length&&r.validateFields(f),r.notifyObservers(a,f,{type:"dependenciesUpdate",relatedFields:[c].concat(mn(f))}),f}),De(this,"updateValue",function(a,c){var f=bi(a),y=r.store;r.updateStore(as(r.store,f,c)),r.notifyObservers(y,[f],{type:"valueUpdate",source:"internal"}),r.notifyWatch([f]);var l=r.triggerDependenciesUpdate(y,f),w=r.callbacks.onValuesChange;if(w){var C=lM(r.store,[f]);w(C,r.getFieldsValue())}r.triggerOnFieldsChange([f].concat(mn(l)))}),De(this,"setFieldsValue",function(a){r.warningUnhooked();var c=r.store;if(a){var f=Jd(r.store,a);r.updateStore(f)}r.notifyObservers(c,null,{type:"valueUpdate",source:"external"}),r.notifyWatch()}),De(this,"setFieldValue",function(a,c){r.setFields([{name:a,value:c}])}),De(this,"getDependencyChildrenFields",function(a){var c=new Set,f=[],y=new Ad;r.getFieldEntities().forEach(function(w){var C=w.props.dependencies;(C||[]).forEach(function(A){var M=bi(A);y.update(M,function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Set;return k.add(w),k})})});var l=function w(C){var A=y.get(C)||new Set;A.forEach(function(M){if(!c.has(M)){c.add(M);var k=M.getNamePath();M.isFieldDirty()&&k.length&&(f.push(k),w(k))}})};return l(a),f}),De(this,"triggerOnFieldsChange",function(a,c){var f=r.callbacks.onFieldsChange;if(f){var y=r.getFields();if(c){var l=new Ad;c.forEach(function(C){var A=C.name,M=C.errors;l.set(A,M)}),y.forEach(function(C){C.errors=l.get(C.name)||C.errors})}var w=y.filter(function(C){var A=C.name;return lh(a,A)});w.length&&f(w,y)}}),De(this,"validateFields",function(a,c){r.warningUnhooked();var f,y;Array.isArray(a)||typeof a=="string"||typeof c=="string"?(f=a,y=c):y=a;var l=!!f,w=l?f.map(bi):[],C=[],A=String(Date.now()),M=new Set,k=y||{},N=k.recursive,D=k.dirty;r.getFieldEntities(!0).forEach(function(j){if(l||w.push(j.getNamePath()),!(!j.props.rules||!j.props.rules.length)&&!(D&&!j.isFieldDirty())){var V=j.getNamePath();if(M.add(V.join(A)),!l||lh(w,V,N)){var X=j.validateRules(lt({validateMessages:lt(lt({},Tz),r.validateMessages)},y));C.push(X.then(function(){return{name:V,errors:[],warnings:[]}}).catch(function(te){var re,Q=[],ne=[];return(re=te.forEach)===null||re===void 0||re.call(te,function(ee){var me=ee.rule.warningOnly,ce=ee.errors;me?ne.push.apply(ne,mn(ce)):Q.push.apply(Q,mn(ce))}),Q.length?Promise.reject({name:V,errors:Q,warnings:ne}):{name:V,errors:Q,warnings:ne}}))}}});var U=mU(C);r.lastValidatePromise=U,U.catch(function(j){return j}).then(function(j){var V=j.map(function(X){var te=X.name;return te});r.notifyObservers(r.store,V,{type:"validateFinish"}),r.triggerOnFieldsChange(V,j)});var q=U.then(function(){return r.lastValidatePromise===U?Promise.resolve(r.getFieldsValue(w)):Promise.reject([])}).catch(function(j){var V=j.filter(function(X){return X&&X.errors.length});return Promise.reject({values:r.getFieldsValue(w),errorFields:V,outOfDate:r.lastValidatePromise!==U})});q.catch(function(j){return j});var F=w.filter(function(j){return M.has(j.join(A))});return r.triggerOnFieldsChange(F),q}),De(this,"submit",function(){r.warningUnhooked(),r.validateFields().then(function(a){var c=r.callbacks.onFinish;if(c)try{c(a)}catch(f){console.error(f)}}).catch(function(a){var c=r.callbacks.onFinishFailed;c&&c(a)})}),this.forceRootUpdate=t});function Az(e){var t=T.useRef(),r=T.useState({}),a=Ut(r,2),c=a[1];if(!t.current)if(e)t.current=e;else{var f=function(){c({})},y=new vU(f);t.current=y.getForm()}return[t.current]}var dw=T.createContext({triggerFormChange:function(){},triggerFormFinish:function(){},registerForm:function(){},unregisterForm:function(){}}),yU=function(t){var r=t.validateMessages,a=t.onFormChange,c=t.onFormFinish,f=t.children,y=T.useContext(dw),l=T.useRef({});return T.createElement(dw.Provider,{value:lt(lt({},y),{},{validateMessages:lt(lt({},y.validateMessages),r),triggerFormChange:function(C,A){a&&a(C,{changedFields:A,forms:l.current}),y.triggerFormChange(C,A)},triggerFormFinish:function(C,A){c&&c(C,{values:A,forms:l.current}),y.triggerFormFinish(C,A)},registerForm:function(C,A){C&&(l.current=lt(lt({},l.current),{},De({},C,A))),y.registerForm(C,A)},unregisterForm:function(C){var A=lt({},l.current);delete A[C],l.current=A,y.unregisterForm(C)}})},f)},_U=["name","initialValues","fields","form","preserve","children","component","validateMessages","validateTrigger","onValuesChange","onFieldsChange","onFinish","onFinishFailed"],xU=function(t,r){var a=t.name,c=t.initialValues,f=t.fields,y=t.form,l=t.preserve,w=t.children,C=t.component,A=C===void 0?"form":C,M=t.validateMessages,k=t.validateTrigger,N=k===void 0?"onChange":k,D=t.onValuesChange,U=t.onFieldsChange,q=t.onFinish,F=t.onFinishFailed,j=Vr(t,_U),V=T.useContext(dw),X=Az(y),te=Ut(X,1),re=te[0],Q=re.getInternalHooks(hu),ne=Q.useSubscribe,ee=Q.setInitialValues,me=Q.setCallbacks,ce=Q.setValidateMessages,ie=Q.setPreserve,fe=Q.destroyForm;T.useImperativeHandle(r,function(){return re}),T.useEffect(function(){return V.registerForm(a,re),function(){V.unregisterForm(a)}},[V,re,a]),ce(lt(lt({},V.validateMessages),M)),me({onValuesChange:D,onFieldsChange:function(Qe){if(V.triggerFormChange(a,Qe),U){for(var gt=arguments.length,St=new Array(gt>1?gt-1:0),xt=1;xt<gt;xt++)St[xt-1]=arguments[xt];U.apply(void 0,[Qe].concat(St))}},onFinish:function(Qe){V.triggerFormFinish(a,Qe),q&&q(Qe)},onFinishFailed:F}),ie(l);var Te=T.useRef(null);ee(c,!Te.current),Te.current||(Te.current=!0),T.useEffect(function(){return fe},[]);var $e,Fe=typeof w=="function";if(Fe){var Ne=re.getFieldsValue(!0);$e=w(Ne,re)}else $e=w;ne(!Fe);var pe=T.useRef();T.useEffect(function(){dU(pe.current||[],f||[])||re.setFields(f||[]),pe.current=f},[f,re]);var He=T.useMemo(function(){return lt(lt({},re),{},{validateTrigger:N})},[re,N]),Be=T.createElement(zy.Provider,{value:null},T.createElement(wh.Provider,{value:He},$e));return A===!1?Be:T.createElement(A,Cn({},j,{onSubmit:function(Qe){Qe.preventDefault(),Qe.stopPropagation(),re.submit()},onReset:function(Qe){var gt;Qe.preventDefault(),re.resetFields(),(gt=j.onReset)===null||gt===void 0||gt.call(j,Qe)}}),Be)};function dM(e){try{return JSON.stringify(e)}catch{return Math.random()}}function bU(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var a=t[0],c=a===void 0?[]:a,f=t[1],y=f===void 0?{}:f,l=M8(y)?{form:y}:y,w=l.form,C=T.useState(),A=Ut(C,2),M=A[0],k=A[1],N=T.useMemo(function(){return dM(M)},[M]),D=T.useRef(N);D.current=N;var U=T.useContext(wh),q=w||U,F=q&&q._init,j=bi(c),V=T.useRef(j);return V.current=j,T.useEffect(function(){if(F){var X=q.getFieldsValue,te=q.getInternalHooks,re=te(hu),Q=re.registerWatch,ne=Q(function(me,ce){var ie=us(l.preserve?ce:me,V.current),fe=dM(ie);D.current!==fe&&(D.current=fe,k(ie))}),ee=us(l.preserve?X(!0):X(),V.current);return M!==ee&&k(ee),ne}},[F]),M}var wU=T.forwardRef(xU),Sm=wU;Sm.FormProvider=yU;Sm.Field=Mz;Sm.List=pU;Sm.useForm=Az;Sm.useWatch=bU;const yc=T.createContext({}),hM=e=>{let{children:t,status:r,override:a}=e;const c=T.useContext(yc),f=T.useMemo(()=>{const y=Object.assign({},c);return a&&delete y.isFormItemInput,r&&(delete y.status,delete y.hasFeedback,delete y.feedbackIcon),y},[r,a,c]);return T.createElement(yc.Provider,{value:f},t)};function fM(){}const SU=T.createContext({add:fM,remove:fM}),EU=SU,CU=e=>({animationDuration:e,animationFillMode:"both"}),TU=e=>({animationDuration:e,animationFillMode:"both"}),WS=function(e,t,r,a){const f=(arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1)?"&":"";return{[`
      ${f}${e}-enter,
      ${f}${e}-appear
    `]:Object.assign(Object.assign({},CU(a)),{animationPlayState:"paused"}),[`${f}${e}-leave`]:Object.assign(Object.assign({},TU(a)),{animationPlayState:"paused"}),[`
      ${f}${e}-enter${e}-enter-active,
      ${f}${e}-appear${e}-appear-active
    `]:{animationName:t,animationPlayState:"running"},[`${f}${e}-leave${e}-leave-active`]:{animationName:r,animationPlayState:"running",pointerEvents:"none"}}},IU=new Cr("antMoveDownIn",{"0%":{transform:"translate3d(0, 100%, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),MU=new Cr("antMoveDownOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(0, 100%, 0)",transformOrigin:"0 0",opacity:0}}),PU=new Cr("antMoveLeftIn",{"0%":{transform:"translate3d(-100%, 0, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),AU=new Cr("antMoveLeftOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(-100%, 0, 0)",transformOrigin:"0 0",opacity:0}}),RU=new Cr("antMoveRightIn",{"0%":{transform:"translate3d(100%, 0, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),OU=new Cr("antMoveRightOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(100%, 0, 0)",transformOrigin:"0 0",opacity:0}}),zU=new Cr("antMoveUpIn",{"0%":{transform:"translate3d(0, -100%, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),kU=new Cr("antMoveUpOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(0, -100%, 0)",transformOrigin:"0 0",opacity:0}}),LU={"move-up":{inKeyframes:zU,outKeyframes:kU},"move-down":{inKeyframes:IU,outKeyframes:MU},"move-left":{inKeyframes:PU,outKeyframes:AU},"move-right":{inKeyframes:RU,outKeyframes:OU}},pM=(e,t)=>{const{antCls:r}=e,a=`${r}-${t}`,{inKeyframes:c,outKeyframes:f}=LU[t];return[WS(a,c,f,e.motionDurationMid),{[`
        ${a}-enter,
        ${a}-appear
      `]:{opacity:0,animationTimingFunction:e.motionEaseOutCirc},[`${a}-leave`]:{animationTimingFunction:e.motionEaseInOutCirc}}]},Rz=new Cr("antSlideUpIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1}}),Oz=new Cr("antSlideUpOut",{"0%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0}}),zz=new Cr("antSlideDownIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1}}),kz=new Cr("antSlideDownOut",{"0%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0}}),DU=new Cr("antSlideLeftIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1}}),$U=new Cr("antSlideLeftOut",{"0%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0}}),FU=new Cr("antSlideRightIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1}}),BU=new Cr("antSlideRightOut",{"0%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0}}),NU={"slide-up":{inKeyframes:Rz,outKeyframes:Oz},"slide-down":{inKeyframes:zz,outKeyframes:kz},"slide-left":{inKeyframes:DU,outKeyframes:$U},"slide-right":{inKeyframes:FU,outKeyframes:BU}},mM=(e,t)=>{const{antCls:r}=e,a=`${r}-${t}`,{inKeyframes:c,outKeyframes:f}=NU[t];return[WS(a,c,f,e.motionDurationMid),{[`
      ${a}-enter,
      ${a}-appear
    `]:{transform:"scale(0)",transformOrigin:"0% 0%",opacity:0,animationTimingFunction:e.motionEaseOutQuint,"&-prepare":{transform:"scale(1)"}},[`${a}-leave`]:{animationTimingFunction:e.motionEaseInQuint}}]},jU=new Cr("antZoomIn",{"0%":{transform:"scale(0.2)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),UU=new Cr("antZoomOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.2)",opacity:0}}),gM=new Cr("antZoomBigIn",{"0%":{transform:"scale(0.8)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),vM=new Cr("antZoomBigOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.8)",opacity:0}}),VU=new Cr("antZoomUpIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 0%"}}),HU=new Cr("antZoomUpOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 0%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0}}),GU=new Cr("antZoomLeftIn",{"0%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"0% 50%"}}),WU=new Cr("antZoomLeftOut",{"0%":{transform:"scale(1)",transformOrigin:"0% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0}}),qU=new Cr("antZoomRightIn",{"0%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"100% 50%"}}),ZU=new Cr("antZoomRightOut",{"0%":{transform:"scale(1)",transformOrigin:"100% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0}}),XU=new Cr("antZoomDownIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 100%"}}),KU=new Cr("antZoomDownOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 100%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0}}),YU={zoom:{inKeyframes:jU,outKeyframes:UU},"zoom-big":{inKeyframes:gM,outKeyframes:vM},"zoom-big-fast":{inKeyframes:gM,outKeyframes:vM},"zoom-left":{inKeyframes:GU,outKeyframes:WU},"zoom-right":{inKeyframes:qU,outKeyframes:ZU},"zoom-up":{inKeyframes:VU,outKeyframes:HU},"zoom-down":{inKeyframes:XU,outKeyframes:KU}},JU=(e,t)=>{const{antCls:r}=e,a=`${r}-${t}`,{inKeyframes:c,outKeyframes:f}=YU[t];return[WS(a,c,f,t==="zoom-big-fast"?e.motionDurationFast:e.motionDurationMid),{[`
        ${a}-enter,
        ${a}-appear
      `]:{transform:"scale(0)",opacity:0,animationTimingFunction:e.motionEaseOutCirc,"&-prepare":{transform:"none"}},[`${a}-leave`]:{animationTimingFunction:e.motionEaseInOutCirc}}]},Lz={Modal:0,Drawer:0,Popover:70,Popconfirm:70,Tooltip:70,Tour:70},QU={SelectLike:50,Dropdown:50,ColorPicker:30,DatePicker:50,Menu:50};function eV(e){return e in Lz}function Dz(e,t){const[,r]=vs(),a=st.useContext(Ez),c=eV(e);let f=a??0;return c?f+=r.zIndexPopupBase+Lz[e]:f+=QU[e],[a===void 0?t:f,f]}function tV(e){return function(r){return T.createElement(YO,{theme:{token:{motion:!1,zIndexPopupBase:0}}},T.createElement(e,Object.assign({},r)))}}function nV(e,t,r,a){function c(f){const{prefixCls:y,style:l}=f,w=T.useRef(null),[C,A]=T.useState(0),[M,k]=T.useState(0),[N,D]=ms(!1,{value:f.open}),{getPrefixCls:U}=T.useContext(cr),q=U(t||"select",y);T.useEffect(()=>{if(D(!0),typeof ResizeObserver<"u"){const j=new ResizeObserver(X=>{const te=X[0].target;A(te.offsetHeight+8),k(te.offsetWidth)}),V=setInterval(()=>{var X;const te=r?`.${r(q)}`:`.${q}-dropdown`,re=(X=w.current)===null||X===void 0?void 0:X.querySelector(te);re&&(clearInterval(V),j.observe(re))},10);return()=>{clearInterval(V),j.disconnect()}}},[]);let F=Object.assign(Object.assign({},f),{style:Object.assign(Object.assign({},l),{margin:0}),open:N,visible:N,getPopupContainer:()=>w.current});return a&&(F=a(F)),T.createElement("div",{ref:w,style:{paddingBottom:C,position:"relative",minWidth:M}},T.createElement(e,Object.assign({},F)))}return tV(c)}const $z=function(){if(typeof navigator>"u"||typeof window>"u")return!1;var e=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(e==null?void 0:e.substr(0,4))};var T0=function(t){var r=t.className,a=t.customizeIcon,c=t.customizeIconProps,f=t.onMouseDown,y=t.onClick,l=t.children,w;return typeof a=="function"?w=a(c):w=a,T.createElement("span",{className:r,onMouseDown:function(A){A.preventDefault(),f&&f(A)},style:{userSelect:"none",WebkitUserSelect:"none"},unselectable:"on",onClick:y,"aria-hidden":!0},w!==void 0?w:T.createElement("span",{className:$t(r.split(/\s+/).map(function(C){return"".concat(C,"-icon")}))},l))};function rV(e,t,r,a,c){var f=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!1,y=arguments.length>6?arguments[6]:void 0,l=arguments.length>7?arguments[7]:void 0,w=st.useMemo(function(){if(Kn(a)==="object")return a.clearIcon;if(c)return c},[a,c]),C=st.useMemo(function(){return!!(!f&&a&&(r.length||y)&&!(l==="combobox"&&y===""))},[a,f,r.length,y,l]);return{allowClear:C,clearIcon:st.createElement(T0,{className:"".concat(e,"-clear"),onMouseDown:t,customizeIcon:w},"×")}}var Fz=T.createContext(null);function iV(){return T.useContext(Fz)}function oV(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:10,t=T.useState(!1),r=Ut(t,2),a=r[0],c=r[1],f=T.useRef(null),y=function(){window.clearTimeout(f.current)};T.useEffect(function(){return y},[]);var l=function(C,A){y(),f.current=window.setTimeout(function(){c(C),A&&A()},e)};return[a,l,y]}function Bz(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:250,t=T.useRef(null),r=T.useRef(null);T.useEffect(function(){return function(){window.clearTimeout(r.current)}},[]);function a(c){(c||t.current===null)&&(t.current=c),window.clearTimeout(r.current),r.current=window.setTimeout(function(){t.current=null},e)}return[function(){return t.current},a]}function aV(e,t,r,a){var c=T.useRef(null);c.current={open:t,triggerOpen:r,customizedTrigger:a},T.useEffect(function(){function f(y){var l;if(!((l=c.current)!==null&&l!==void 0&&l.customizedTrigger)){var w=y.target;w.shadowRoot&&y.composed&&(w=y.composedPath()[0]||w),c.current.open&&e().filter(function(C){return C}).every(function(C){return!C.contains(w)&&C!==w})&&c.current.triggerOpen(!1)}}return window.addEventListener("mousedown",f),function(){return window.removeEventListener("mousedown",f)}},[])}var sV=["prefixCls","invalidate","item","renderItem","responsive","responsiveDisabled","registerSize","itemKey","className","style","children","display","order","component"],Rd=void 0;function lV(e,t){var r=e.prefixCls,a=e.invalidate,c=e.item,f=e.renderItem,y=e.responsive,l=e.responsiveDisabled,w=e.registerSize,C=e.itemKey,A=e.className,M=e.style,k=e.children,N=e.display,D=e.order,U=e.component,q=U===void 0?"div":U,F=Vr(e,sV),j=y&&!N;function V(ne){w(C,ne)}T.useEffect(function(){return function(){V(null)}},[]);var X=f&&c!==Rd?f(c):k,te;a||(te={opacity:j?0:1,height:j?0:Rd,overflowY:j?"hidden":Rd,order:y?D:Rd,pointerEvents:j?"none":Rd,position:j?"absolute":Rd});var re={};j&&(re["aria-hidden"]=!0);var Q=T.createElement(q,Cn({className:$t(!a&&r,A),style:lt(lt({},te),M)},re,F,{ref:t}),X);return y&&(Q=T.createElement(xl,{onResize:function(ee){var me=ee.offsetWidth;V(me)},disabled:l},Q)),Q}var $p=T.forwardRef(lV);$p.displayName="Item";function cV(e){if(typeof MessageChannel>"u")yi(e);else{var t=new MessageChannel;t.port1.onmessage=function(){return e()},t.port2.postMessage(void 0)}}function uV(){var e=T.useRef(null),t=function(a){e.current||(e.current=[],cV(function(){vc.unstable_batchedUpdates(function(){e.current.forEach(function(c){c()}),e.current=null})})),e.current.push(a)};return t}function dp(e,t){var r=T.useState(t),a=Ut(r,2),c=a[0],f=a[1],y=jo(function(l){e(function(){f(l)})});return[c,y]}var ky=st.createContext(null),dV=["component"],hV=["className"],fV=["className"],pV=function(t,r){var a=T.useContext(ky);if(!a){var c=t.component,f=c===void 0?"div":c,y=Vr(t,dV);return T.createElement(f,Cn({},y,{ref:r}))}var l=a.className,w=Vr(a,hV),C=t.className,A=Vr(t,fV);return T.createElement(ky.Provider,{value:null},T.createElement($p,Cn({ref:r,className:$t(l,C)},w,A)))},Nz=T.forwardRef(pV);Nz.displayName="RawItem";var mV=["prefixCls","data","renderItem","renderRawItem","itemKey","itemWidth","ssr","style","className","maxCount","renderRest","renderRawRest","suffix","component","itemComponent","onVisibleChange"],jz="responsive",Uz="invalidate";function gV(e){return"+ ".concat(e.length," ...")}function vV(e,t){var r=e.prefixCls,a=r===void 0?"rc-overflow":r,c=e.data,f=c===void 0?[]:c,y=e.renderItem,l=e.renderRawItem,w=e.itemKey,C=e.itemWidth,A=C===void 0?10:C,M=e.ssr,k=e.style,N=e.className,D=e.maxCount,U=e.renderRest,q=e.renderRawRest,F=e.suffix,j=e.component,V=j===void 0?"div":j,X=e.itemComponent,te=e.onVisibleChange,re=Vr(e,mV),Q=M==="full",ne=uV(),ee=dp(ne,null),me=Ut(ee,2),ce=me[0],ie=me[1],fe=ce||0,Te=dp(ne,new Map),$e=Ut(Te,2),Fe=$e[0],Ne=$e[1],pe=dp(ne,0),He=Ut(pe,2),Be=He[0],Ge=He[1],Qe=dp(ne,0),gt=Ut(Qe,2),St=gt[0],xt=gt[1],Nt=dp(ne,0),jt=Ut(Nt,2),bt=jt[0],ut=jt[1],Tt=T.useState(null),ft=Ut(Tt,2),yt=ft[0],ct=ft[1],It=T.useState(null),Ct=Ut(It,2),Qt=Ct[0],Vt=Ct[1],Bt=T.useMemo(function(){return Qt===null&&Q?Number.MAX_SAFE_INTEGER:Qt||0},[Qt,ce]),ot=T.useState(!1),rt=Ut(ot,2),Lt=rt[0],Mt=rt[1],sn="".concat(a,"-item"),An=Math.max(Be,St),Mn=D===jz,on=f.length&&Mn,Vn=D===Uz,Nn=on||typeof D=="number"&&f.length>D,zn=T.useMemo(function(){var we=f;return on?ce===null&&Q?we=f:we=f.slice(0,Math.min(f.length,fe/A)):typeof D=="number"&&(we=f.slice(0,D)),we},[f,A,ce,D,on]),yn=T.useMemo(function(){return on?f.slice(Bt+1):f.slice(zn.length)},[f,zn,on,Bt]),rn=T.useCallback(function(we,Le){var je;return typeof w=="function"?w(we):(je=w&&(we==null?void 0:we[w]))!==null&&je!==void 0?je:Le},[w]),Wn=T.useCallback(y||function(we){return we},[y]);function jn(we,Le,je){Qt===we&&(Le===void 0||Le===yt)||(Vt(we),je||(Mt(we<f.length-1),te==null||te(we)),Le!==void 0&&ct(Le))}function fr(we,Le){ie(Le.clientWidth)}function or(we,Le){Ne(function(je){var Je=new Map(je);return Le===null?Je.delete(we):Je.set(we,Le),Je})}function qn(we,Le){xt(Le),Ge(St)}function Qn(we,Le){ut(Le)}function Rr(we){return Fe.get(rn(zn[we],we))}Lr(function(){if(fe&&typeof An=="number"&&zn){var we=bt,Le=zn.length,je=Le-1;if(!Le){jn(0,null);return}for(var Je=0;Je<Le;Je+=1){var We=Rr(Je);if(Q&&(We=We||0),We===void 0){jn(Je-1,void 0,!0);break}if(we+=We,je===0&&we<=fe||Je===je-1&&we+Rr(je)<=fe){jn(je,null);break}else if(we+An>fe){jn(Je-1,we-We-bt+St);break}}F&&Rr(0)+bt>fe&&ct(null)}},[fe,Fe,St,bt,rn,zn]);var _e=Lt&&!!yn.length,W={};yt!==null&&on&&(W={position:"absolute",left:yt,top:0});var J={prefixCls:sn,responsive:on,component:X,invalidate:Vn},de=l?function(we,Le){var je=rn(we,Le);return T.createElement(ky.Provider,{key:je,value:lt(lt({},J),{},{order:Le,item:we,itemKey:je,registerSize:or,display:Le<=Bt})},l(we,Le))}:function(we,Le){var je=rn(we,Le);return T.createElement($p,Cn({},J,{order:Le,key:je,item:we,renderItem:Wn,itemKey:je,registerSize:or,display:Le<=Bt}))},Se,Ie={order:_e?Bt:Number.MAX_SAFE_INTEGER,className:"".concat(sn,"-rest"),registerSize:qn,display:_e};if(q)q&&(Se=T.createElement(ky.Provider,{value:lt(lt({},J),Ie)},q(yn)));else{var Me=U||gV;Se=T.createElement($p,Cn({},J,Ie),typeof Me=="function"?Me(yn):Me)}var ke=T.createElement(V,Cn({className:$t(!Vn&&a,N),style:k,ref:t},re),zn.map(de),Nn?Se:null,F&&T.createElement($p,Cn({},J,{responsive:Mn,responsiveDisabled:!on,order:Bt,className:"".concat(sn,"-suffix"),registerSize:Qn,display:!0,style:W}),F));return Mn&&(ke=T.createElement(xl,{onResize:fr,disabled:!on},ke)),ke}var Em=T.forwardRef(vV);Em.displayName="Overflow";Em.Item=Nz;Em.RESPONSIVE=jz;Em.INVALIDATE=Uz;var yV=function(t,r){var a,c=t.prefixCls,f=t.id,y=t.inputElement,l=t.disabled,w=t.tabIndex,C=t.autoFocus,A=t.autoComplete,M=t.editable,k=t.activeDescendantId,N=t.value,D=t.maxLength,U=t.onKeyDown,q=t.onMouseDown,F=t.onChange,j=t.onPaste,V=t.onCompositionStart,X=t.onCompositionEnd,te=t.open,re=t.attrs,Q=y||T.createElement("input",null),ne=Q,ee=ne.ref,me=ne.props,ce=me.onKeyDown,ie=me.onChange,fe=me.onMouseDown,Te=me.onCompositionStart,$e=me.onCompositionEnd,Fe=me.style;return"maxLength"in Q.props,Q=T.cloneElement(Q,lt(lt(lt({type:"search"},me),{},{id:f,ref:gs(r,ee),disabled:l,tabIndex:w,autoComplete:A||"off",autoFocus:C,className:$t("".concat(c,"-selection-search-input"),(a=Q)===null||a===void 0||(a=a.props)===null||a===void 0?void 0:a.className),role:"combobox","aria-expanded":te||!1,"aria-haspopup":"listbox","aria-owns":"".concat(f,"_list"),"aria-autocomplete":"list","aria-controls":"".concat(f,"_list"),"aria-activedescendant":te?k:void 0},re),{},{value:M?N:"",maxLength:D,readOnly:!M,unselectable:M?null:"on",style:lt(lt({},Fe),{},{opacity:M?null:0}),onKeyDown:function(pe){U(pe),ce&&ce(pe)},onMouseDown:function(pe){q(pe),fe&&fe(pe)},onChange:function(pe){F(pe),ie&&ie(pe)},onCompositionStart:function(pe){V(pe),Te&&Te(pe)},onCompositionEnd:function(pe){X(pe),$e&&$e(pe)},onPaste:j})),Q},qS=T.forwardRef(yV);qS.displayName="Input";function Vz(e){return Array.isArray(e)?e:e!==void 0?[e]:[]}var _V=typeof window<"u"&&window.document&&window.document.documentElement,xV=_V;function bV(e){return e!=null}function wV(e){return!e&&e!==0}function yM(e){return["string","number"].includes(Kn(e))}function Hz(e){var t=void 0;return e&&(yM(e.title)?t=e.title.toString():yM(e.label)&&(t=e.label.toString())),t}function SV(e,t){xV?T.useLayoutEffect(e,t):T.useEffect(e,t)}function EV(e){var t;return(t=e.key)!==null&&t!==void 0?t:e.value}var _M=function(t){t.preventDefault(),t.stopPropagation()},CV=function(t){var r=t.id,a=t.prefixCls,c=t.values,f=t.open,y=t.searchValue,l=t.autoClearSearchValue,w=t.inputRef,C=t.placeholder,A=t.disabled,M=t.mode,k=t.showSearch,N=t.autoFocus,D=t.autoComplete,U=t.activeDescendantId,q=t.tabIndex,F=t.removeIcon,j=t.maxTagCount,V=t.maxTagTextLength,X=t.maxTagPlaceholder,te=X===void 0?function(ct){return"+ ".concat(ct.length," ...")}:X,re=t.tagRender,Q=t.onToggleOpen,ne=t.onRemove,ee=t.onInputChange,me=t.onInputPaste,ce=t.onInputKeyDown,ie=t.onInputMouseDown,fe=t.onInputCompositionStart,Te=t.onInputCompositionEnd,$e=T.useRef(null),Fe=T.useState(0),Ne=Ut(Fe,2),pe=Ne[0],He=Ne[1],Be=T.useState(!1),Ge=Ut(Be,2),Qe=Ge[0],gt=Ge[1],St="".concat(a,"-selection"),xt=f||M==="multiple"&&l===!1||M==="tags"?y:"",Nt=M==="tags"||M==="multiple"&&l===!1||k&&(f||Qe);SV(function(){He($e.current.scrollWidth)},[xt]);function jt(ct,It,Ct,Qt,Vt){return T.createElement("span",{className:$t("".concat(St,"-item"),De({},"".concat(St,"-item-disabled"),Ct)),title:Hz(ct)},T.createElement("span",{className:"".concat(St,"-item-content")},It),Qt&&T.createElement(T0,{className:"".concat(St,"-item-remove"),onMouseDown:_M,onClick:Vt,customizeIcon:F},"×"))}function bt(ct,It,Ct,Qt,Vt){var Bt=function(rt){_M(rt),Q(!f)};return T.createElement("span",{onMouseDown:Bt},re({label:It,value:ct,disabled:Ct,closable:Qt,onClose:Vt}))}function ut(ct){var It=ct.disabled,Ct=ct.label,Qt=ct.value,Vt=!A&&!It,Bt=Ct;if(typeof V=="number"&&(typeof Ct=="string"||typeof Ct=="number")){var ot=String(Bt);ot.length>V&&(Bt="".concat(ot.slice(0,V),"..."))}var rt=function(Mt){Mt&&Mt.stopPropagation(),ne(ct)};return typeof re=="function"?bt(Qt,Bt,It,Vt,rt):jt(ct,Bt,It,Vt,rt)}function Tt(ct){var It=typeof te=="function"?te(ct):te;return jt({title:It},It,!1)}var ft=T.createElement("div",{className:"".concat(St,"-search"),style:{width:pe},onFocus:function(){gt(!0)},onBlur:function(){gt(!1)}},T.createElement(qS,{ref:w,open:f,prefixCls:a,id:r,inputElement:null,disabled:A,autoFocus:N,autoComplete:D,editable:Nt,activeDescendantId:U,value:xt,onKeyDown:ce,onMouseDown:ie,onChange:ee,onPaste:me,onCompositionStart:fe,onCompositionEnd:Te,tabIndex:q,attrs:bh(t,!0)}),T.createElement("span",{ref:$e,className:"".concat(St,"-search-mirror"),"aria-hidden":!0},xt," ")),yt=T.createElement(Em,{prefixCls:"".concat(St,"-overflow"),data:c,renderItem:ut,renderRest:Tt,suffix:ft,itemKey:EV,maxCount:j});return T.createElement(T.Fragment,null,yt,!c.length&&!xt&&T.createElement("span",{className:"".concat(St,"-placeholder")},C))},TV=function(t){var r=t.inputElement,a=t.prefixCls,c=t.id,f=t.inputRef,y=t.disabled,l=t.autoFocus,w=t.autoComplete,C=t.activeDescendantId,A=t.mode,M=t.open,k=t.values,N=t.placeholder,D=t.tabIndex,U=t.showSearch,q=t.searchValue,F=t.activeValue,j=t.maxLength,V=t.onInputKeyDown,X=t.onInputMouseDown,te=t.onInputChange,re=t.onInputPaste,Q=t.onInputCompositionStart,ne=t.onInputCompositionEnd,ee=t.title,me=T.useState(!1),ce=Ut(me,2),ie=ce[0],fe=ce[1],Te=A==="combobox",$e=Te||U,Fe=k[0],Ne=q||"";Te&&F&&!ie&&(Ne=F),T.useEffect(function(){Te&&fe(!1)},[Te,F]);var pe=A!=="combobox"&&!M&&!U?!1:!!Ne,He=ee===void 0?Hz(Fe):ee,Be=function(){if(Fe)return null;var Qe=pe?{visibility:"hidden"}:void 0;return T.createElement("span",{className:"".concat(a,"-selection-placeholder"),style:Qe},N)};return T.createElement(T.Fragment,null,T.createElement("span",{className:"".concat(a,"-selection-search")},T.createElement(qS,{ref:f,prefixCls:a,id:c,open:M,inputElement:r,disabled:y,autoFocus:l,autoComplete:w,editable:$e,activeDescendantId:C,value:Ne,onKeyDown:V,onMouseDown:X,onChange:function(Qe){fe(!0),te(Qe)},onPaste:re,onCompositionStart:Q,onCompositionEnd:ne,tabIndex:D,attrs:bh(t,!0),maxLength:Te?j:void 0})),!Te&&Fe?T.createElement("span",{className:"".concat(a,"-selection-item"),title:He,style:pe?{visibility:"hidden"}:void 0},Fe.label):null,Be())};function IV(e){return![Ht.ESC,Ht.SHIFT,Ht.BACKSPACE,Ht.TAB,Ht.WIN_KEY,Ht.ALT,Ht.META,Ht.WIN_KEY_RIGHT,Ht.CTRL,Ht.SEMICOLON,Ht.EQUALS,Ht.CAPS_LOCK,Ht.CONTEXT_MENU,Ht.F1,Ht.F2,Ht.F3,Ht.F4,Ht.F5,Ht.F6,Ht.F7,Ht.F8,Ht.F9,Ht.F10,Ht.F11,Ht.F12].includes(e)}var MV=function(t,r){var a=T.useRef(null),c=T.useRef(!1),f=t.prefixCls,y=t.open,l=t.mode,w=t.showSearch,C=t.tokenWithEnter,A=t.autoClearSearchValue,M=t.onSearch,k=t.onSearchSubmit,N=t.onToggleOpen,D=t.onInputKeyDown,U=t.domRef;T.useImperativeHandle(r,function(){return{focus:function(){a.current.focus()},blur:function(){a.current.blur()}}});var q=Bz(0),F=Ut(q,2),j=F[0],V=F[1],X=function(Ne){var pe=Ne.which;(pe===Ht.UP||pe===Ht.DOWN)&&Ne.preventDefault(),D&&D(Ne),pe===Ht.ENTER&&l==="tags"&&!c.current&&!y&&(k==null||k(Ne.target.value)),IV(pe)&&N(!0)},te=function(){V(!0)},re=T.useRef(null),Q=function(Ne){M(Ne,!0,c.current)!==!1&&N(!0)},ne=function(){c.current=!0},ee=function(Ne){c.current=!1,l!=="combobox"&&Q(Ne.target.value)},me=function(Ne){var pe=Ne.target.value;if(C&&re.current&&/[\r\n]/.test(re.current)){var He=re.current.replace(/[\r\n]+$/,"").replace(/\r\n/g," ").replace(/[\r\n]/g," ");pe=pe.replace(He,re.current)}re.current=null,Q(pe)},ce=function(Ne){var pe=Ne.clipboardData,He=pe.getData("text");re.current=He},ie=function(Ne){var pe=Ne.target;if(pe!==a.current){var He=document.body.style.msTouchAction!==void 0;He?setTimeout(function(){a.current.focus()}):a.current.focus()}},fe=function(Ne){var pe=j();Ne.target!==a.current&&!pe&&l!=="combobox"&&Ne.preventDefault(),(l!=="combobox"&&(!w||!pe)||!y)&&(y&&A!==!1&&M("",!0,!1),N())},Te={inputRef:a,onInputKeyDown:X,onInputMouseDown:te,onInputChange:me,onInputPaste:ce,onInputCompositionStart:ne,onInputCompositionEnd:ee},$e=l==="multiple"||l==="tags"?T.createElement(CV,Cn({},t,Te)):T.createElement(TV,Cn({},t,Te));return T.createElement("div",{ref:U,className:"".concat(f,"-selector"),onClick:ie,onMouseDown:fe},$e)},Gz=T.forwardRef(MV);Gz.displayName="Selector";function um(e){"@babel/helpers - typeof";return um=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},um(e)}function PV(e,t){if(um(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(um(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function AV(e){var t=PV(e,"string");return um(t)==="symbol"?t:String(t)}function RV(e,t,r){return t=AV(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),r.push.apply(r,a)}return r}function Eo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xM(Object(r),!0).forEach(function(a){RV(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xM(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function OV(e){if(Array.isArray(e))return e}function zV(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,c,f,y,l=[],w=!0,C=!1;try{if(f=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;w=!1}else for(;!(w=(a=f.call(r)).done)&&(l.push(a.value),l.length!==t);w=!0);}catch(A){C=!0,c=A}finally{try{if(!w&&r.return!=null&&(y=r.return(),Object(y)!==y))return}finally{if(C)throw c}}return l}}function hw(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function Wz(e,t){if(e){if(typeof e=="string")return hw(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return hw(e,t)}}function kV(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Di(e,t){return OV(e)||zV(e,t)||Wz(e,t)||kV()}function LV(e,t){if(e==null)return{};var r={},a=Object.keys(e),c,f;for(f=0;f<a.length;f++)c=a[f],!(t.indexOf(c)>=0)&&(r[c]=e[c]);return r}function DV(e,t){if(e==null)return{};var r=LV(e,t),a,c;if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(e);for(c=0;c<f.length;c++)a=f[c],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function Ly(){return Ly=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Ly.apply(this,arguments)}function $V(e){var t=e.prefixCls,r=e.align,a=e.arrow,c=e.arrowPos,f=a||{},y=f.className,l=f.content,w=c.x,C=w===void 0?0:w,A=c.y,M=A===void 0?0:A,k=T.useRef();if(!r||!r.points)return null;var N={position:"absolute"};if(r.autoArrow!==!1){var D=r.points[0],U=r.points[1],q=D[0],F=D[1],j=U[0],V=U[1];q===j||!["t","b"].includes(q)?N.top=M:q==="t"?N.top=0:N.bottom=0,F===V||!["l","r"].includes(F)?N.left=C:F==="l"?N.left=0:N.right=0}return T.createElement("div",{ref:k,className:$t("".concat(t,"-arrow"),y),style:N},l)}function FV(e){var t=e.prefixCls,r=e.open,a=e.zIndex,c=e.mask,f=e.motion;return c?T.createElement(xm,Ly({},f,{motionAppear:!0,visible:r,removeOnLeave:!0}),function(y){var l=y.className;return T.createElement("div",{style:{zIndex:a},className:$t("".concat(t,"-mask"),l)})}):null}var BV=T.memo(function(e){var t=e.children;return t},function(e,t){return t.cache}),NV=T.forwardRef(function(e,t){var r=e.popup,a=e.className,c=e.prefixCls,f=e.style,y=e.target,l=e.onVisibleChanged,w=e.open,C=e.keepDom,A=e.fresh,M=e.onClick,k=e.mask,N=e.arrow,D=e.arrowPos,U=e.align,q=e.motion,F=e.maskMotion,j=e.forceRender,V=e.getPopupContainer,X=e.autoDestroy,te=e.portal,re=e.zIndex,Q=e.onMouseEnter,ne=e.onMouseLeave,ee=e.onPointerEnter,me=e.ready,ce=e.offsetX,ie=e.offsetY,fe=e.offsetR,Te=e.offsetB,$e=e.onAlign,Fe=e.onPrepare,Ne=e.stretch,pe=e.targetWidth,He=e.targetHeight,Be=typeof r=="function"?r():r,Ge=w||C,Qe=(V==null?void 0:V.length)>0,gt=T.useState(!V||!Qe),St=Di(gt,2),xt=St[0],Nt=St[1];if(Lr(function(){!xt&&Qe&&y&&Nt(!0)},[xt,Qe,y]),!xt)return null;var jt="auto",bt={left:"-1000vw",top:"-1000vh",right:jt,bottom:jt};if(me||!w){var ut,Tt=U.points,ft=U.dynamicInset||((ut=U._experimental)===null||ut===void 0?void 0:ut.dynamicInset),yt=ft&&Tt[0][1]==="r",ct=ft&&Tt[0][0]==="b";yt?(bt.right=fe,bt.left=jt):(bt.left=ce,bt.right=jt),ct?(bt.bottom=Te,bt.top=jt):(bt.top=ie,bt.bottom=jt)}var It={};return Ne&&(Ne.includes("height")&&He?It.height=He:Ne.includes("minHeight")&&He&&(It.minHeight=He),Ne.includes("width")&&pe?It.width=pe:Ne.includes("minWidth")&&pe&&(It.minWidth=pe)),w||(It.pointerEvents="none"),T.createElement(te,{open:j||Ge,getContainer:V&&function(){return V(y)},autoDestroy:X},T.createElement(FV,{prefixCls:c,open:w,zIndex:re,mask:k,motion:F}),T.createElement(xl,{onResize:$e,disabled:!w},function(Ct){return T.createElement(xm,Ly({motionAppear:!0,motionEnter:!0,motionLeave:!0,removeOnLeave:!1,forceRender:j,leavedClassName:"".concat(c,"-hidden")},q,{onAppearPrepare:Fe,onEnterPrepare:Fe,visible:w,onVisibleChanged:function(Vt){var Bt;q==null||(Bt=q.onVisibleChanged)===null||Bt===void 0||Bt.call(q,Vt),l(Vt)}}),function(Qt,Vt){var Bt=Qt.className,ot=Qt.style,rt=$t(c,Bt,a);return T.createElement("div",{ref:gs(Ct,t,Vt),className:rt,style:Eo(Eo(Eo(Eo({"--arrow-x":"".concat(D.x||0,"px"),"--arrow-y":"".concat(D.y||0,"px")},bt),It),ot),{},{boxSizing:"border-box",zIndex:re},f),onMouseEnter:Q,onMouseLeave:ne,onPointerEnter:ee,onClick:M},N&&T.createElement($V,{prefixCls:c,arrow:N,arrowPos:D,align:U}),T.createElement(BV,{cache:!w&&!A},Be))})}))}),jV=T.forwardRef(function(e,t){var r=e.children,a=e.getTriggerDOMNode,c=_m(r),f=T.useCallback(function(l){SS(t,a?a(l):l)},[a]),y=p0(f,r.ref);return c?T.cloneElement(r,{ref:y}):r}),bM=T.createContext(null);function wM(e){return e?Array.isArray(e)?e:[e]:[]}function UV(e,t,r,a){return T.useMemo(function(){var c=wM(r??t),f=wM(a??t),y=new Set(c),l=new Set(f);return e&&(y.has("hover")&&(y.delete("hover"),y.add("click")),l.has("hover")&&(l.delete("hover"),l.add("click"))),[y,l]},[e,t,r,a])}function VV(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0;return r?e[0]===t[0]:e[0]===t[0]&&e[1]===t[1]}function HV(e,t,r,a){for(var c=r.points,f=Object.keys(e),y=0;y<f.length;y+=1){var l,w=f[y];if(VV((l=e[w])===null||l===void 0?void 0:l.points,c,a))return"".concat(t,"-placement-").concat(w)}return""}function SM(e,t,r,a){return t||(r?{motionName:"".concat(e,"-").concat(r)}:a?{motionName:a}:null)}function Cm(e){return e.ownerDocument.defaultView}function fw(e){for(var t=[],r=e==null?void 0:e.parentElement,a=["hidden","scroll","clip","auto"];r;){var c=Cm(r).getComputedStyle(r),f=c.overflowX,y=c.overflowY,l=c.overflow;[f,y,l].some(function(w){return a.includes(w)})&&t.push(r),r=r.parentElement}return t}function dm(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return Number.isNaN(e)?t:e}function hp(e){return dm(parseFloat(e),0)}function EM(e,t){var r=Eo({},e);return(t||[]).forEach(function(a){if(!(a instanceof HTMLBodyElement||a instanceof HTMLHtmlElement)){var c=Cm(a).getComputedStyle(a),f=c.overflow,y=c.overflowClipMargin,l=c.borderTopWidth,w=c.borderBottomWidth,C=c.borderLeftWidth,A=c.borderRightWidth,M=a.getBoundingClientRect(),k=a.offsetHeight,N=a.clientHeight,D=a.offsetWidth,U=a.clientWidth,q=hp(l),F=hp(w),j=hp(C),V=hp(A),X=dm(Math.round(M.width/D*1e3)/1e3),te=dm(Math.round(M.height/k*1e3)/1e3),re=(D-U-j-V)*X,Q=(k-N-q-F)*te,ne=q*te,ee=F*te,me=j*X,ce=V*X,ie=0,fe=0;if(f==="clip"){var Te=hp(y);ie=Te*X,fe=Te*te}var $e=M.x+me-ie,Fe=M.y+ne-fe,Ne=$e+M.width+2*ie-me-ce-re,pe=Fe+M.height+2*fe-ne-ee-Q;r.left=Math.max(r.left,$e),r.top=Math.max(r.top,Fe),r.right=Math.min(r.right,Ne),r.bottom=Math.min(r.bottom,pe)}}),r}function CM(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r="".concat(t),a=r.match(/^(.*)\%$/);return a?e*(parseFloat(a[1])/100):parseFloat(r)}function TM(e,t){var r=t||[],a=Di(r,2),c=a[0],f=a[1];return[CM(e.width,c),CM(e.height,f)]}function IM(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return[e[0],e[1]]}function Od(e,t){var r=t[0],a=t[1],c,f;return r==="t"?f=e.y:r==="b"?f=e.y+e.height:f=e.y+e.height/2,a==="l"?c=e.x:a==="r"?c=e.x+e.width:c=e.x+e.width/2,{x:c,y:f}}function Kl(e,t){var r={t:"b",b:"t",l:"r",r:"l"};return e.map(function(a,c){return c===t?r[a]||"c":a}).join("")}function GV(e,t,r,a,c,f,y){var l=T.useState({ready:!1,offsetX:0,offsetY:0,offsetR:0,offsetB:0,arrowX:0,arrowY:0,scaleX:1,scaleY:1,align:c[a]||{}}),w=Di(l,2),C=w[0],A=w[1],M=T.useRef(0),k=T.useMemo(function(){return t?fw(t):[]},[t]),N=T.useRef({}),D=function(){N.current={}};e||D();var U=jo(function(){if(t&&r&&e){let Xn=function(xi,bo){var Oo=arguments.length>2&&arguments[2]!==void 0?arguments[2]:rt,ma=Be.x+xi,ys=Be.y+bo,Ko=ma+ut,ga=ys+bt,_s=Math.max(ma,Oo.left),va=Math.max(ys,Oo.top),Ei=Math.min(Ko,Oo.right),Nr=Math.min(ga,Oo.bottom);return Math.max(0,(Ei-_s)*(Nr-va))},Ns=function(){On=Be.y+Me,er=On+bt,Zn=Be.x+Ie,Zr=Zn+ut};var j,V,X=t,te=X.ownerDocument,re=Cm(X),Q=re.getComputedStyle(X),ne=Q.width,ee=Q.height,me=Q.position,ce=X.style.left,ie=X.style.top,fe=X.style.right,Te=X.style.bottom,$e=X.style.overflow,Fe=Eo(Eo({},c[a]),f),Ne=te.createElement("div");(j=X.parentElement)===null||j===void 0||j.appendChild(Ne),Ne.style.left="".concat(X.offsetLeft,"px"),Ne.style.top="".concat(X.offsetTop,"px"),Ne.style.position=me,Ne.style.height="".concat(X.offsetHeight,"px"),Ne.style.width="".concat(X.offsetWidth,"px"),X.style.left="0",X.style.top="0",X.style.right="auto",X.style.bottom="auto",X.style.overflow="hidden";var pe;if(Array.isArray(r))pe={x:r[0],y:r[1],width:0,height:0};else{var He=r.getBoundingClientRect();pe={x:He.x,y:He.y,width:He.width,height:He.height}}var Be=X.getBoundingClientRect(),Ge=te.documentElement,Qe=Ge.clientWidth,gt=Ge.clientHeight,St=Ge.scrollWidth,xt=Ge.scrollHeight,Nt=Ge.scrollTop,jt=Ge.scrollLeft,bt=Be.height,ut=Be.width,Tt=pe.height,ft=pe.width,yt={left:0,top:0,right:Qe,bottom:gt},ct={left:-jt,top:-Nt,right:St-jt,bottom:xt-Nt},It=Fe.htmlRegion,Ct="visible",Qt="visibleFirst";It!=="scroll"&&It!==Qt&&(It=Ct);var Vt=It===Qt,Bt=EM(ct,k),ot=EM(yt,k),rt=It===Ct?ot:Bt,Lt=Vt?ot:rt;X.style.left="auto",X.style.top="auto",X.style.right="0",X.style.bottom="0";var Mt=X.getBoundingClientRect();X.style.left=ce,X.style.top=ie,X.style.right=fe,X.style.bottom=Te,X.style.overflow=$e,(V=X.parentElement)===null||V===void 0||V.removeChild(Ne);var sn=dm(Math.round(ut/parseFloat(ne)*1e3)/1e3),An=dm(Math.round(bt/parseFloat(ee)*1e3)/1e3);if(sn===0||An===0||wy(r)&&!dz(r))return;var Mn=Fe.offset,on=Fe.targetOffset,Vn=TM(Be,Mn),Nn=Di(Vn,2),zn=Nn[0],yn=Nn[1],rn=TM(pe,on),Wn=Di(rn,2),jn=Wn[0],fr=Wn[1];pe.x-=jn,pe.y-=fr;var or=Fe.points||[],qn=Di(or,2),Qn=qn[0],Rr=qn[1],_e=IM(Rr),W=IM(Qn),J=Od(pe,_e),de=Od(Be,W),Se=Eo({},Fe),Ie=J.x-de.x+zn,Me=J.y-de.y+yn,ke=Xn(Ie,Me),we=Xn(Ie,Me,ot),Le=Od(pe,["t","l"]),je=Od(Be,["t","l"]),Je=Od(pe,["b","r"]),We=Od(Be,["b","r"]),wt=Fe.overflow||{},Yt=wt.adjustX,Xt=wt.adjustY,un=wt.shiftX,ln=wt.shiftY,Gn=function(bo){return typeof bo=="boolean"?bo:bo>=0},On,er,Zn,Zr;Ns();var an=Gn(Xt),nn=W[0]===_e[0];if(an&&W[0]==="t"&&(er>Lt.bottom||N.current.bt)){var Sn=Me;nn?Sn-=bt-Tt:Sn=Le.y-We.y-yn;var Tr=Xn(Ie,Sn),ri=Xn(Ie,Sn,ot);Tr>ke||Tr===ke&&(!Vt||ri>=we)?(N.current.bt=!0,Me=Sn,yn=-yn,Se.points=[Kl(W,0),Kl(_e,0)]):N.current.bt=!1}if(an&&W[0]==="b"&&(On<Lt.top||N.current.tb)){var En=Me;nn?En+=bt-Tt:En=Je.y-je.y-yn;var Ni=Xn(Ie,En),xo=Xn(Ie,En,ot);Ni>ke||Ni===ke&&(!Vt||xo>=we)?(N.current.tb=!0,Me=En,yn=-yn,Se.points=[Kl(W,0),Kl(_e,0)]):N.current.tb=!1}var Po=Gn(Yt),ro=W[1]===_e[1];if(Po&&W[1]==="l"&&(Zr>Lt.right||N.current.rl)){var Hr=Ie;ro?Hr-=ut-ft:Hr=Le.x-We.x-zn;var ji=Xn(Hr,Me),pa=Xn(Hr,Me,ot);ji>ke||ji===ke&&(!Vt||pa>=we)?(N.current.rl=!0,Ie=Hr,zn=-zn,Se.points=[Kl(W,1),Kl(_e,1)]):N.current.rl=!1}if(Po&&W[1]==="r"&&(Zn<Lt.left||N.current.lr)){var io=Ie;ro?io+=ut-ft:io=Je.x-je.x-zn;var oo=Xn(io,Me),_i=Xn(io,Me,ot);oo>ke||oo===ke&&(!Vt||_i>=we)?(N.current.lr=!0,Ie=io,zn=-zn,Se.points=[Kl(W,1),Kl(_e,1)]):N.current.lr=!1}Ns();var Oi=un===!0?0:un;typeof Oi=="number"&&(Zn<ot.left&&(Ie-=Zn-ot.left-zn,pe.x+ft<ot.left+Oi&&(Ie+=pe.x-ot.left+ft-Oi)),Zr>ot.right&&(Ie-=Zr-ot.right-zn,pe.x>ot.right-Oi&&(Ie+=pe.x-ot.right+Oi)));var nt=ln===!0?0:ln;typeof nt=="number"&&(On<ot.top&&(Me-=On-ot.top-yn,pe.y+Tt<ot.top+nt&&(Me+=pe.y-ot.top+Tt-nt)),er>ot.bottom&&(Me-=er-ot.bottom-yn,pe.y>ot.bottom-nt&&(Me+=pe.y-ot.bottom+nt)));var Si=Be.x+Ie,gr=Si+ut,pr=Be.y+Me,Xo=pr+bt,Tn=pe.x,Pn=Tn+ft,Xr=pe.y,Gr=Xr+Tt,Ot=Math.max(Si,Tn),xn=Math.min(gr,Pn),bn=(Ot+xn)/2,Qr=bn-Si,Kr=Math.max(pr,Xr),In=Math.min(Xo,Gr),Br=(Kr+In)/2,Ao=Br-pr;y==null||y(t,Se);var Ro=Mt.right-Be.x-(Ie+Be.width),Ui=Mt.bottom-Be.y-(Me+Be.height);A({ready:!0,offsetX:Ie/sn,offsetY:Me/An,offsetR:Ro/sn,offsetB:Ui/An,arrowX:Qr/sn,arrowY:Ao/An,scaleX:sn,scaleY:An,align:Se})}}),q=function(){M.current+=1;var V=M.current;Promise.resolve().then(function(){M.current===V&&U()})},F=function(){A(function(V){return Eo(Eo({},V),{},{ready:!1})})};return Lr(F,[a]),Lr(function(){e||F()},[e]),[C.ready,C.offsetX,C.offsetY,C.offsetR,C.offsetB,C.arrowX,C.arrowY,C.scaleX,C.scaleY,C.align,q]}function WV(e){if(Array.isArray(e))return hw(e)}function qV(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function ZV(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function MM(e){return WV(e)||qV(e)||Wz(e)||ZV()}function XV(e,t,r,a,c){Lr(function(){if(e&&t&&r){let M=function(){a(),c()};var f=t,y=r,l=fw(f),w=fw(y),C=Cm(y),A=new Set([C].concat(MM(l),MM(w)));return A.forEach(function(k){k.addEventListener("scroll",M,{passive:!0})}),C.addEventListener("resize",M,{passive:!0}),a(),function(){A.forEach(function(k){k.removeEventListener("scroll",M),C.removeEventListener("resize",M)})}}},[e,t,r])}function KV(e,t,r,a,c,f,y,l){var w=T.useRef(e),C=T.useRef(!1);w.current!==e&&(C.current=!0,w.current=e),T.useEffect(function(){var A=yi(function(){C.current=!1});return function(){yi.cancel(A)}},[e]),T.useEffect(function(){if(t&&a&&(!c||f)){var A=function(){var re=!1,Q=function(me){var ce=me.target;re=y(ce)},ne=function(me){var ce=me.target;!C.current&&w.current&&!re&&!y(ce)&&l(!1)};return[Q,ne]},M=A(),k=Di(M,2),N=k[0],D=k[1],U=A(),q=Di(U,2),F=q[0],j=q[1],V=Cm(a);V.addEventListener("mousedown",N,!0),V.addEventListener("click",D,!0),V.addEventListener("contextmenu",D,!0);var X=Ay(r);return X&&(X.addEventListener("mousedown",F,!0),X.addEventListener("click",j,!0),X.addEventListener("contextmenu",j,!0)),function(){V.removeEventListener("mousedown",N,!0),V.removeEventListener("click",D,!0),V.removeEventListener("contextmenu",D,!0),X&&(X.removeEventListener("mousedown",F,!0),X.removeEventListener("click",j,!0),X.removeEventListener("contextmenu",j,!0))}}},[t,r,a,c,f])}var YV=["prefixCls","children","action","showAction","hideAction","popupVisible","defaultPopupVisible","onPopupVisibleChange","afterPopupVisibleChange","mouseEnterDelay","mouseLeaveDelay","focusDelay","blurDelay","mask","maskClosable","getPopupContainer","forceRender","autoDestroy","destroyPopupOnHide","popup","popupClassName","popupStyle","popupPlacement","builtinPlacements","popupAlign","zIndex","stretch","getPopupClassNameFromAlign","fresh","alignPoint","onPopupClick","onPopupAlign","arrow","popupMotion","maskMotion","popupTransitionName","popupAnimation","maskTransitionName","maskAnimation","className","getTriggerDOMNode"];function JV(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:wz,t=T.forwardRef(function(r,a){var c=r.prefixCls,f=c===void 0?"rc-trigger-popup":c,y=r.children,l=r.action,w=l===void 0?"hover":l,C=r.showAction,A=r.hideAction,M=r.popupVisible,k=r.defaultPopupVisible,N=r.onPopupVisibleChange,D=r.afterPopupVisibleChange,U=r.mouseEnterDelay,q=r.mouseLeaveDelay,F=q===void 0?.1:q,j=r.focusDelay,V=r.blurDelay,X=r.mask,te=r.maskClosable,re=te===void 0?!0:te,Q=r.getPopupContainer,ne=r.forceRender,ee=r.autoDestroy,me=r.destroyPopupOnHide,ce=r.popup,ie=r.popupClassName,fe=r.popupStyle,Te=r.popupPlacement,$e=r.builtinPlacements,Fe=$e===void 0?{}:$e,Ne=r.popupAlign,pe=r.zIndex,He=r.stretch,Be=r.getPopupClassNameFromAlign,Ge=r.fresh,Qe=r.alignPoint,gt=r.onPopupClick,St=r.onPopupAlign,xt=r.arrow,Nt=r.popupMotion,jt=r.maskMotion,bt=r.popupTransitionName,ut=r.popupAnimation,Tt=r.maskTransitionName,ft=r.maskAnimation,yt=r.className,ct=r.getTriggerDOMNode,It=DV(r,YV),Ct=ee||me||!1,Qt=T.useState(!1),Vt=Di(Qt,2),Bt=Vt[0],ot=Vt[1];Lr(function(){ot($z())},[]);var rt=T.useRef({}),Lt=T.useContext(bM),Mt=T.useMemo(function(){return{registerSubPopup:function($n,Yn){rt.current[$n]=Yn,Lt==null||Lt.registerSubPopup($n,Yn)}}},[Lt]),sn=C8(),An=T.useState(null),Mn=Di(An,2),on=Mn[0],Vn=Mn[1],Nn=jo(function(hn){wy(hn)&&on!==hn&&Vn(hn),Lt==null||Lt.registerSubPopup(sn,hn)}),zn=T.useState(null),yn=Di(zn,2),rn=yn[0],Wn=yn[1],jn=T.useRef(null),fr=jo(function(hn){wy(hn)&&rn!==hn&&(Wn(hn),jn.current=hn)}),or=T.Children.only(y),qn=(or==null?void 0:or.props)||{},Qn={},Rr=jo(function(hn){var $n,Yn,dr=rn;return(dr==null?void 0:dr.contains(hn))||(($n=Ay(dr))===null||$n===void 0?void 0:$n.host)===hn||hn===dr||(on==null?void 0:on.contains(hn))||((Yn=Ay(on))===null||Yn===void 0?void 0:Yn.host)===hn||hn===on||Object.values(rt.current).some(function(Wr){return(Wr==null?void 0:Wr.contains(hn))||hn===Wr})}),_e=SM(f,Nt,ut,bt),W=SM(f,jt,ft,Tt),J=T.useState(k||!1),de=Di(J,2),Se=de[0],Ie=de[1],Me=M??Se,ke=jo(function(hn){M===void 0&&Ie(hn)});Lr(function(){Ie(M||!1)},[M]);var we=T.useRef(Me);we.current=Me;var Le=T.useRef([]);Le.current=[];var je=jo(function(hn){var $n;ke(hn),(($n=Le.current[Le.current.length-1])!==null&&$n!==void 0?$n:Me)!==hn&&(Le.current.push(hn),N==null||N(hn))}),Je=T.useRef(),We=function(){clearTimeout(Je.current)},wt=function($n){var Yn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;We(),Yn===0?je($n):Je.current=setTimeout(function(){je($n)},Yn*1e3)};T.useEffect(function(){return We},[]);var Yt=T.useState(!1),Xt=Di(Yt,2),un=Xt[0],ln=Xt[1];Lr(function(hn){(!hn||Me)&&ln(!0)},[Me]);var Gn=T.useState(null),On=Di(Gn,2),er=On[0],Zn=On[1],Zr=T.useState([0,0]),an=Di(Zr,2),nn=an[0],Sn=an[1],Tr=function($n){Sn([$n.clientX,$n.clientY])},ri=GV(Me,on,Qe?nn:rn,Te,Fe,Ne,St),En=Di(ri,11),Ni=En[0],xo=En[1],Po=En[2],ro=En[3],Hr=En[4],ji=En[5],pa=En[6],io=En[7],oo=En[8],_i=En[9],Oi=En[10],nt=UV(Bt,w,C,A),Si=Di(nt,2),gr=Si[0],pr=Si[1],Xo=gr.has("click"),Tn=pr.has("click")||pr.has("contextMenu"),Pn=jo(function(){un||Oi()}),Xr=function(){we.current&&Qe&&Tn&&wt(!1)};XV(Me,rn,on,Pn,Xr),Lr(function(){Pn()},[nn,Te]),Lr(function(){Me&&!(Fe!=null&&Fe[Te])&&Pn()},[JSON.stringify(Ne)]);var Gr=T.useMemo(function(){var hn=HV(Fe,f,_i,Qe);return $t(hn,Be==null?void 0:Be(_i))},[_i,Be,Fe,f,Qe]);T.useImperativeHandle(a,function(){return{nativeElement:jn.current,forceAlign:Pn}});var Ot=T.useState(0),xn=Di(Ot,2),bn=xn[0],Qr=xn[1],Kr=T.useState(0),In=Di(Kr,2),Br=In[0],Ao=In[1],Ro=function(){if(He&&rn){var $n=rn.getBoundingClientRect();Qr($n.width),Ao($n.height)}},Ui=function(){Ro(),Pn()},Xn=function($n){ln(!1),Oi(),D==null||D($n)},Ns=function(){return new Promise(function($n){Ro(),Zn(function(){return $n})})};Lr(function(){er&&(Oi(),er(),Zn(null))},[er]);function xi(hn,$n,Yn,dr){Qn[hn]=function(Wr){var ya;dr==null||dr(Wr),wt($n,Yn);for(var zr=arguments.length,xs=new Array(zr>1?zr-1:0),bs=1;bs<zr;bs++)xs[bs-1]=arguments[bs];(ya=qn[hn])===null||ya===void 0||ya.call.apply(ya,[qn,Wr].concat(xs))}}(Xo||Tn)&&(Qn.onClick=function(hn){var $n;we.current&&Tn?wt(!1):!we.current&&Xo&&(Tr(hn),wt(!0));for(var Yn=arguments.length,dr=new Array(Yn>1?Yn-1:0),Wr=1;Wr<Yn;Wr++)dr[Wr-1]=arguments[Wr];($n=qn.onClick)===null||$n===void 0||$n.call.apply($n,[qn,hn].concat(dr))}),KV(Me,Tn,rn,on,X,re,Rr,wt);var bo=gr.has("hover"),Oo=pr.has("hover"),ma,ys;bo&&(xi("onMouseEnter",!0,U,function(hn){Tr(hn)}),xi("onPointerEnter",!0,U,function(hn){Tr(hn)}),ma=function(){(Me||un)&&wt(!0,U)},Qe&&(Qn.onMouseMove=function(hn){var $n;($n=qn.onMouseMove)===null||$n===void 0||$n.call(qn,hn)})),Oo&&(xi("onMouseLeave",!1,F),xi("onPointerLeave",!1,F),ys=function(){wt(!1,F)}),gr.has("focus")&&xi("onFocus",!0,j),pr.has("focus")&&xi("onBlur",!1,V),gr.has("contextMenu")&&(Qn.onContextMenu=function(hn){var $n;we.current&&pr.has("contextMenu")?wt(!1):(Tr(hn),wt(!0)),hn.preventDefault();for(var Yn=arguments.length,dr=new Array(Yn>1?Yn-1:0),Wr=1;Wr<Yn;Wr++)dr[Wr-1]=arguments[Wr];($n=qn.onContextMenu)===null||$n===void 0||$n.call.apply($n,[qn,hn].concat(dr))}),yt&&(Qn.className=$t(qn.className,yt));var Ko=Eo(Eo({},qn),Qn),ga={},_s=["onContextMenu","onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur"];_s.forEach(function(hn){It[hn]&&(ga[hn]=function(){for(var $n,Yn=arguments.length,dr=new Array(Yn),Wr=0;Wr<Yn;Wr++)dr[Wr]=arguments[Wr];($n=Ko[hn])===null||$n===void 0||$n.call.apply($n,[Ko].concat(dr)),It[hn].apply(It,dr)})});var va=T.cloneElement(or,Eo(Eo({},Ko),ga)),Ei={x:ji,y:pa},Nr=xt?Eo({},xt!==!0?xt:{}):null;return T.createElement(T.Fragment,null,T.createElement(xl,{disabled:!Me,ref:fr,onResize:Ui},T.createElement(jV,{getTriggerDOMNode:ct},va)),T.createElement(bM.Provider,{value:Mt},T.createElement(NV,{portal:e,ref:Nn,prefixCls:f,popup:ce,className:$t(ie,Gr),style:fe,target:rn,onMouseEnter:ma,onMouseLeave:ys,onPointerEnter:ma,zIndex:pe,open:Me,keepDom:un,fresh:Ge,onClick:gt,mask:X,motion:_e,maskMotion:W,onVisibleChanged:Xn,onPrepare:Ns,forceRender:ne,autoDestroy:Ct,getPopupContainer:Q,align:_i,arrow:Nr,arrowPos:Ei,ready:Ni,offsetX:xo,offsetY:Po,offsetR:ro,offsetB:Hr,onAlign:Pn,stretch:He,targetWidth:bn/io,targetHeight:Br/oo})))});return t}const qz=JV(wz);var QV=["prefixCls","disabled","visible","children","popupElement","animation","transitionName","dropdownStyle","dropdownClassName","direction","placement","builtinPlacements","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","getPopupContainer","empty","getTriggerDOMNode","onPopupVisibleChange","onPopupMouseEnter"],e9=function(t){var r=t===!0?0:1;return{bottomLeft:{points:["tl","bl"],offset:[0,4],overflow:{adjustX:r,adjustY:1},htmlRegion:"scroll"},bottomRight:{points:["tr","br"],offset:[0,4],overflow:{adjustX:r,adjustY:1},htmlRegion:"scroll"},topLeft:{points:["bl","tl"],offset:[0,-4],overflow:{adjustX:r,adjustY:1},htmlRegion:"scroll"},topRight:{points:["br","tr"],offset:[0,-4],overflow:{adjustX:r,adjustY:1},htmlRegion:"scroll"}}},t9=function(t,r){var a=t.prefixCls;t.disabled;var c=t.visible,f=t.children,y=t.popupElement,l=t.animation,w=t.transitionName,C=t.dropdownStyle,A=t.dropdownClassName,M=t.direction,k=M===void 0?"ltr":M,N=t.placement,D=t.builtinPlacements,U=t.dropdownMatchSelectWidth,q=t.dropdownRender,F=t.dropdownAlign,j=t.getPopupContainer,V=t.empty,X=t.getTriggerDOMNode,te=t.onPopupVisibleChange,re=t.onPopupMouseEnter,Q=Vr(t,QV),ne="".concat(a,"-dropdown"),ee=y;q&&(ee=q(y));var me=T.useMemo(function(){return D||e9(U)},[D,U]),ce=l?"".concat(ne,"-").concat(l):w,ie=typeof U=="number",fe=T.useMemo(function(){return ie?null:U===!1?"minWidth":"width"},[U,ie]),Te=C;ie&&(Te=lt(lt({},Te),{},{width:U}));var $e=T.useRef(null);return T.useImperativeHandle(r,function(){return{getPopupElement:function(){return $e.current}}}),T.createElement(qz,Cn({},Q,{showAction:te?["click"]:[],hideAction:te?["click"]:[],popupPlacement:N||(k==="rtl"?"bottomRight":"bottomLeft"),builtinPlacements:me,prefixCls:ne,popupTransitionName:ce,popup:T.createElement("div",{ref:$e,onMouseEnter:re},ee),stretch:fe,popupAlign:F,popupVisible:c,getPopupContainer:j,popupClassName:$t(A,De({},"".concat(ne,"-empty"),V)),popupStyle:Te,getTriggerDOMNode:X,onPopupVisibleChange:te}),f)},Zz=T.forwardRef(t9);Zz.displayName="SelectTrigger";function PM(e,t){var r=e.key,a;return"value"in e&&(a=e.value),r??(a!==void 0?a:"rc-index-key-".concat(t))}function Xz(e,t){var r=e||{},a=r.label,c=r.value,f=r.options,y=r.groupLabel,l=a||(t?"children":"label");return{label:l,value:c||"value",options:f||"options",groupLabel:y||l}}function n9(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=t.fieldNames,a=t.childrenAsData,c=[],f=Xz(r,!1),y=f.label,l=f.value,w=f.options,C=f.groupLabel;function A(M,k){M.forEach(function(N){if(k||!(w in N)){var D=N[l];c.push({key:PM(N,c.length),groupOption:k,data:N,label:N[y],value:D})}else{var U=N[C];U===void 0&&a&&(U=N.label),c.push({key:PM(N,c.length),group:!0,data:N,label:U}),A(N[w],!0)}})}return A(e,!1),c}function pw(e){var t=lt({},e);return"props"in t||Object.defineProperty(t,"props",{get:function(){return Vo(!1,"Return type is option instead of Option instance. Please read value directly instead of reading from `props`."),t}}),t}function r9(e,t){if(!t||!t.length)return null;var r=!1;function a(f,y){var l=xO(y),w=l[0],C=l.slice(1);if(!w)return[f];var A=f.split(w);return r=r||A.length>1,A.reduce(function(M,k){return[].concat(mn(M),mn(a(k,C)))},[]).filter(function(M){return M})}var c=a(e,t);return r?c:null}var i9=["id","prefixCls","className","showSearch","tagRender","direction","omitDomProps","displayValues","onDisplayValuesChange","emptyOptions","notFoundContent","onClear","mode","disabled","loading","getInputElement","getRawInputElement","open","defaultOpen","onDropdownVisibleChange","activeValue","onActiveValueChange","activeDescendantId","searchValue","autoClearSearchValue","onSearch","onSearchSplit","tokenSeparators","allowClear","suffixIcon","clearIcon","OptionList","animation","transitionName","dropdownStyle","dropdownClassName","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","placement","builtinPlacements","getPopupContainer","showAction","onFocus","onBlur","onKeyUp","onKeyDown","onMouseDown"],o9=["value","onChange","removeIcon","placeholder","autoFocus","maxTagCount","maxTagTextLength","maxTagPlaceholder","choiceTransitionName","onInputKeyDown","onPopupScroll","tabIndex"];function mw(e){return e==="tags"||e==="multiple"}var a9=T.forwardRef(function(e,t){var r,a,c=e.id,f=e.prefixCls,y=e.className,l=e.showSearch,w=e.tagRender,C=e.direction,A=e.omitDomProps,M=e.displayValues,k=e.onDisplayValuesChange,N=e.emptyOptions,D=e.notFoundContent,U=D===void 0?"Not Found":D,q=e.onClear,F=e.mode,j=e.disabled,V=e.loading,X=e.getInputElement,te=e.getRawInputElement,re=e.open,Q=e.defaultOpen,ne=e.onDropdownVisibleChange,ee=e.activeValue,me=e.onActiveValueChange,ce=e.activeDescendantId,ie=e.searchValue,fe=e.autoClearSearchValue,Te=e.onSearch,$e=e.onSearchSplit,Fe=e.tokenSeparators,Ne=e.allowClear,pe=e.suffixIcon,He=e.clearIcon,Be=e.OptionList,Ge=e.animation,Qe=e.transitionName,gt=e.dropdownStyle,St=e.dropdownClassName,xt=e.dropdownMatchSelectWidth,Nt=e.dropdownRender,jt=e.dropdownAlign,bt=e.placement,ut=e.builtinPlacements,Tt=e.getPopupContainer,ft=e.showAction,yt=ft===void 0?[]:ft,ct=e.onFocus,It=e.onBlur,Ct=e.onKeyUp,Qt=e.onKeyDown,Vt=e.onMouseDown,Bt=Vr(e,i9),ot=mw(F),rt=(l!==void 0?l:ot)||F==="combobox",Lt=lt({},Bt);o9.forEach(function(Tn){delete Lt[Tn]}),A==null||A.forEach(function(Tn){delete Lt[Tn]});var Mt=T.useState(!1),sn=Ut(Mt,2),An=sn[0],Mn=sn[1];T.useEffect(function(){Mn($z())},[]);var on=T.useRef(null),Vn=T.useRef(null),Nn=T.useRef(null),zn=T.useRef(null),yn=T.useRef(null),rn=T.useRef(!1),Wn=oV(),jn=Ut(Wn,3),fr=jn[0],or=jn[1],qn=jn[2];T.useImperativeHandle(t,function(){var Tn,Pn;return{focus:(Tn=zn.current)===null||Tn===void 0?void 0:Tn.focus,blur:(Pn=zn.current)===null||Pn===void 0?void 0:Pn.blur,scrollTo:function(Gr){var Ot;return(Ot=yn.current)===null||Ot===void 0?void 0:Ot.scrollTo(Gr)}}});var Qn=T.useMemo(function(){var Tn;if(F!=="combobox")return ie;var Pn=(Tn=M[0])===null||Tn===void 0?void 0:Tn.value;return typeof Pn=="string"||typeof Pn=="number"?String(Pn):""},[ie,F,M]),Rr=F==="combobox"&&typeof X=="function"&&X()||null,_e=typeof te=="function"&&te(),W=p0(Vn,_e==null||(r=_e.props)===null||r===void 0?void 0:r.ref),J=T.useState(!1),de=Ut(J,2),Se=de[0],Ie=de[1];Lr(function(){Ie(!0)},[]);var Me=ms(!1,{defaultValue:Q,value:re}),ke=Ut(Me,2),we=ke[0],Le=ke[1],je=Se?we:!1,Je=!U&&N;(j||Je&&je&&F==="combobox")&&(je=!1);var We=Je?!1:je,wt=T.useCallback(function(Tn){var Pn=Tn!==void 0?Tn:!je;j||(Le(Pn),je!==Pn&&(ne==null||ne(Pn)))},[j,je,Le,ne]),Yt=T.useMemo(function(){return(Fe||[]).some(function(Tn){return[`
`,`\r
`].includes(Tn)})},[Fe]),Xt=function(Pn,Xr,Gr){var Ot=!0,xn=Pn;me==null||me(null);var bn=Gr?null:r9(Pn,Fe);return F!=="combobox"&&bn&&(xn="",$e==null||$e(bn),wt(!1),Ot=!1),Te&&Qn!==xn&&Te(xn,{source:Xr?"typing":"effect"}),Ot},un=function(Pn){!Pn||!Pn.trim()||Te(Pn,{source:"submit"})};T.useEffect(function(){!je&&!ot&&F!=="combobox"&&Xt("",!1,!1)},[je]),T.useEffect(function(){we&&j&&Le(!1),j&&!rn.current&&or(!1)},[j]);var ln=Bz(),Gn=Ut(ln,2),On=Gn[0],er=Gn[1],Zn=function(Pn){var Xr=On(),Gr=Pn.which;if(Gr===Ht.ENTER&&(F!=="combobox"&&Pn.preventDefault(),je||wt(!0)),er(!!Qn),Gr===Ht.BACKSPACE&&!Xr&&ot&&!Qn&&M.length){for(var Ot=mn(M),xn=null,bn=Ot.length-1;bn>=0;bn-=1){var Qr=Ot[bn];if(!Qr.disabled){Ot.splice(bn,1),xn=Qr;break}}xn&&k(Ot,{type:"remove",values:[xn]})}for(var Kr=arguments.length,In=new Array(Kr>1?Kr-1:0),Br=1;Br<Kr;Br++)In[Br-1]=arguments[Br];if(je&&yn.current){var Ao;(Ao=yn.current).onKeyDown.apply(Ao,[Pn].concat(In))}Qt==null||Qt.apply(void 0,[Pn].concat(In))},Zr=function(Pn){for(var Xr=arguments.length,Gr=new Array(Xr>1?Xr-1:0),Ot=1;Ot<Xr;Ot++)Gr[Ot-1]=arguments[Ot];if(je&&yn.current){var xn;(xn=yn.current).onKeyUp.apply(xn,[Pn].concat(Gr))}Ct==null||Ct.apply(void 0,[Pn].concat(Gr))},an=function(Pn){var Xr=M.filter(function(Gr){return Gr!==Pn});k(Xr,{type:"remove",values:[Pn]})},nn=T.useRef(!1),Sn=function(){or(!0),j||(ct&&!nn.current&&ct.apply(void 0,arguments),yt.includes("focus")&&wt(!0)),nn.current=!0},Tr=function(){rn.current=!0,or(!1,function(){nn.current=!1,rn.current=!1,wt(!1)}),!j&&(Qn&&(F==="tags"?Te(Qn,{source:"submit"}):F==="multiple"&&Te("",{source:"blur"})),It&&It.apply(void 0,arguments))},ri=[];T.useEffect(function(){return function(){ri.forEach(function(Tn){return clearTimeout(Tn)}),ri.splice(0,ri.length)}},[]);var En=function(Pn){var Xr,Gr=Pn.target,Ot=(Xr=Nn.current)===null||Xr===void 0?void 0:Xr.getPopupElement();if(Ot&&Ot.contains(Gr)){var xn=setTimeout(function(){var In=ri.indexOf(xn);if(In!==-1&&ri.splice(In,1),qn(),!An&&!Ot.contains(document.activeElement)){var Br;(Br=zn.current)===null||Br===void 0||Br.focus()}});ri.push(xn)}for(var bn=arguments.length,Qr=new Array(bn>1?bn-1:0),Kr=1;Kr<bn;Kr++)Qr[Kr-1]=arguments[Kr];Vt==null||Vt.apply(void 0,[Pn].concat(Qr))},Ni=T.useState({}),xo=Ut(Ni,2),Po=xo[1];function ro(){Po({})}var Hr;_e&&(Hr=function(Pn){wt(Pn)}),aV(function(){var Tn;return[on.current,(Tn=Nn.current)===null||Tn===void 0?void 0:Tn.getPopupElement()]},We,wt,!!_e);var ji=T.useMemo(function(){return lt(lt({},e),{},{notFoundContent:U,open:je,triggerOpen:We,id:c,showSearch:rt,multiple:ot,toggleOpen:wt})},[e,U,We,je,c,rt,ot,wt]),pa=!!pe||V,io;pa&&(io=T.createElement(T0,{className:$t("".concat(f,"-arrow"),De({},"".concat(f,"-arrow-loading"),V)),customizeIcon:pe,customizeIconProps:{loading:V,searchValue:Qn,open:je,focused:fr,showSearch:rt}}));var oo=function(){var Pn;q==null||q(),(Pn=zn.current)===null||Pn===void 0||Pn.focus(),k([],{type:"clear",values:M}),Xt("",!1,!1)},_i=rV(f,oo,M,Ne,He,j,Qn,F),Oi=_i.allowClear,nt=_i.clearIcon,Si=T.createElement(Be,{ref:yn}),gr=$t(f,y,(a={},De(a,"".concat(f,"-focused"),fr),De(a,"".concat(f,"-multiple"),ot),De(a,"".concat(f,"-single"),!ot),De(a,"".concat(f,"-allow-clear"),Ne),De(a,"".concat(f,"-show-arrow"),pa),De(a,"".concat(f,"-disabled"),j),De(a,"".concat(f,"-loading"),V),De(a,"".concat(f,"-open"),je),De(a,"".concat(f,"-customize-input"),Rr),De(a,"".concat(f,"-show-search"),rt),a)),pr=T.createElement(Zz,{ref:Nn,disabled:j,prefixCls:f,visible:We,popupElement:Si,animation:Ge,transitionName:Qe,dropdownStyle:gt,dropdownClassName:St,direction:C,dropdownMatchSelectWidth:xt,dropdownRender:Nt,dropdownAlign:jt,placement:bt,builtinPlacements:ut,getPopupContainer:Tt,empty:N,getTriggerDOMNode:function(){return Vn.current},onPopupVisibleChange:Hr,onPopupMouseEnter:ro},_e?T.cloneElement(_e,{ref:W}):T.createElement(Gz,Cn({},e,{domRef:Vn,prefixCls:f,inputElement:Rr,ref:zn,id:c,showSearch:rt,autoClearSearchValue:fe,mode:F,activeDescendantId:ce,tagRender:w,values:M,open:je,onToggleOpen:wt,activeValue:ee,searchValue:Qn,onSearch:Xt,onSearchSubmit:un,onRemove:an,tokenWithEnter:Yt}))),Xo;return _e?Xo=pr:Xo=T.createElement("div",Cn({className:gr},Lt,{ref:on,onMouseDown:En,onKeyDown:Zn,onKeyUp:Zr,onFocus:Sn,onBlur:Tr}),fr&&!je&&T.createElement("span",{style:{width:0,height:0,position:"absolute",overflow:"hidden",opacity:0},"aria-live":"polite"},"".concat(M.map(function(Tn){var Pn=Tn.label,Xr=Tn.value;return["number","string"].includes(Kn(Pn))?Pn:Xr}).join(", "))),pr,io,Oi&&nt),T.createElement(Fz.Provider,{value:ji},Xo)}),ZS=function(){return null};ZS.isSelectOptGroup=!0;var XS=function(){return null};XS.isSelectOption=!0;var Kz=T.forwardRef(function(e,t){var r=e.height,a=e.offsetY,c=e.offsetX,f=e.children,y=e.prefixCls,l=e.onInnerResize,w=e.innerProps,C=e.rtl,A=e.extra,M={},k={display:"flex",flexDirection:"column"};if(a!==void 0){var N;M={height:r,position:"relative",overflow:"hidden"},k=lt(lt({},k),{},(N={transform:"translateY(".concat(a,"px)")},De(N,C?"marginRight":"marginLeft",-c),De(N,"position","absolute"),De(N,"left",0),De(N,"right",0),De(N,"top",0),N))}return T.createElement("div",{style:M},T.createElement(xl,{onResize:function(U){var q=U.offsetHeight;q&&l&&l()}},T.createElement("div",Cn({style:k,className:$t(De({},"".concat(y,"-holder-inner"),y)),ref:t},w),f,A)))});Kz.displayName="Filler";function AM(e,t){var r="touches"in e?e.touches[0]:e;return r[t?"pageX":"pageY"]}var RM=T.forwardRef(function(e,t){var r,a=e.prefixCls,c=e.rtl,f=e.scrollOffset,y=e.scrollRange,l=e.onStartMove,w=e.onStopMove,C=e.onScroll,A=e.horizontal,M=e.spinSize,k=e.containerSize,N=e.style,D=e.thumbStyle,U=T.useState(!1),q=Ut(U,2),F=q[0],j=q[1],V=T.useState(null),X=Ut(V,2),te=X[0],re=X[1],Q=T.useState(null),ne=Ut(Q,2),ee=ne[0],me=ne[1],ce=!c,ie=T.useRef(),fe=T.useRef(),Te=T.useState(!1),$e=Ut(Te,2),Fe=$e[0],Ne=$e[1],pe=T.useRef(),He=function(){clearTimeout(pe.current),Ne(!0),pe.current=setTimeout(function(){Ne(!1)},3e3)},Be=y-k||0,Ge=k-M||0,Qe=Be>0,gt=T.useMemo(function(){if(f===0||Be===0)return 0;var yt=f/Be;return yt*Ge},[f,Be,Ge]),St=function(ct){ct.stopPropagation(),ct.preventDefault()},xt=T.useRef({top:gt,dragging:F,pageY:te,startTop:ee});xt.current={top:gt,dragging:F,pageY:te,startTop:ee};var Nt=function(ct){j(!0),re(AM(ct,A)),me(xt.current.top),l(),ct.stopPropagation(),ct.preventDefault()};T.useEffect(function(){var yt=function(Qt){Qt.preventDefault()},ct=ie.current,It=fe.current;return ct.addEventListener("touchstart",yt),It.addEventListener("touchstart",Nt),function(){ct.removeEventListener("touchstart",yt),It.removeEventListener("touchstart",Nt)}},[]);var jt=T.useRef();jt.current=Be;var bt=T.useRef();bt.current=Ge,T.useEffect(function(){if(F){var yt,ct=function(Qt){var Vt=xt.current,Bt=Vt.dragging,ot=Vt.pageY,rt=Vt.startTop;if(yi.cancel(yt),Bt){var Lt=AM(Qt,A)-ot,Mt=rt;!ce&&A?Mt-=Lt:Mt+=Lt;var sn=jt.current,An=bt.current,Mn=An?Mt/An:0,on=Math.ceil(Mn*sn);on=Math.max(on,0),on=Math.min(on,sn),yt=yi(function(){C(on,A)})}},It=function(){j(!1),w()};return window.addEventListener("mousemove",ct),window.addEventListener("touchmove",ct),window.addEventListener("mouseup",It),window.addEventListener("touchend",It),function(){window.removeEventListener("mousemove",ct),window.removeEventListener("touchmove",ct),window.removeEventListener("mouseup",It),window.removeEventListener("touchend",It),yi.cancel(yt)}}},[F]),T.useEffect(function(){He()},[f]),T.useImperativeHandle(t,function(){return{delayHidden:He}});var ut="".concat(a,"-scrollbar"),Tt={position:"absolute",visibility:Fe&&Qe?null:"hidden"},ft={position:"absolute",background:"rgba(0, 0, 0, 0.5)",borderRadius:99,cursor:"pointer",userSelect:"none"};return A?(Tt.height=8,Tt.left=0,Tt.right=0,Tt.bottom=0,ft.height="100%",ft.width=M,ce?ft.left=gt:ft.right=gt):(Tt.width=8,Tt.top=0,Tt.bottom=0,ce?Tt.right=0:Tt.left=0,ft.width="100%",ft.height=M,ft.top=gt),T.createElement("div",{ref:ie,className:$t(ut,(r={},De(r,"".concat(ut,"-horizontal"),A),De(r,"".concat(ut,"-vertical"),!A),De(r,"".concat(ut,"-visible"),Fe),r)),style:lt(lt({},Tt),N),onMouseDown:St,onMouseMove:He},T.createElement("div",{ref:fe,className:$t("".concat(ut,"-thumb"),De({},"".concat(ut,"-thumb-moving"),F)),style:lt(lt({},ft),D),onMouseDown:Nt}))});function s9(e){var t=e.children,r=e.setRef,a=T.useCallback(function(c){r(c)},[]);return T.cloneElement(t,{ref:a})}function l9(e,t,r,a,c,f,y){var l=y.getKey;return e.slice(t,r+1).map(function(w,C){var A=t+C,M=f(w,A,{style:{width:a}}),k=l(w);return T.createElement(s9,{key:k,setRef:function(D){return c(w,D)}},M)})}var c9=function(){function e(){qo(this,e),this.maps=void 0,this.id=0,this.maps=Object.create(null)}return Zo(e,[{key:"set",value:function(r,a){this.maps[r]=a,this.id+=1}},{key:"get",value:function(r){return this.maps[r]}}]),e}();function u9(e,t,r){var a=T.useState(0),c=Ut(a,2),f=c[0],y=c[1],l=T.useRef(new Map),w=T.useRef(new c9),C=T.useRef();function A(){yi.cancel(C.current)}function M(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;A();var D=function(){l.current.forEach(function(q,F){if(q&&q.offsetParent){var j=Op(q),V=j.offsetHeight;w.current.get(F)!==V&&w.current.set(F,j.offsetHeight)}}),y(function(q){return q+1})};N?D():C.current=yi(D)}function k(N,D){var U=e(N),q=l.current.get(U);D?(l.current.set(U,D),M()):l.current.delete(U),!q!=!D&&(D?t==null||t(N):r==null||r(N))}return T.useEffect(function(){return A},[]),[k,M,w.current,f]}var d9=10;function h9(e,t,r,a,c,f,y,l){var w=T.useRef(),C=T.useState(null),A=Ut(C,2),M=A[0],k=A[1];return Lr(function(){if(M&&M.times<d9){if(!e.current){k(function(He){return lt({},He)});return}f();var N=M.targetAlign,D=M.originAlign,U=M.index,q=M.offset,F=e.current.clientHeight,j=!1,V=N,X=null;if(F){for(var te=N||D,re=0,Q=0,ne=0,ee=Math.min(t.length-1,U),me=0;me<=ee;me+=1){var ce=c(t[me]);Q=re;var ie=r.get(ce);ne=Q+(ie===void 0?a:ie),re=ne}for(var fe=te==="top"?q:F-q,Te=ee;Te>=0;Te-=1){var $e=c(t[Te]),Fe=r.get($e);if(Fe===void 0){j=!0;break}if(fe-=Fe,fe<=0)break}switch(te){case"top":X=Q-q;break;case"bottom":X=ne-F+q;break;default:{var Ne=e.current.scrollTop,pe=Ne+F;Q<Ne?V="top":ne>pe&&(V="bottom")}}X!==null&&y(X),X!==M.lastTop&&(j=!0)}j&&k(lt(lt({},M),{},{times:M.times+1,targetAlign:V,lastTop:X}))}},[M,e.current]),function(N){if(N==null){l();return}if(yi.cancel(w.current),typeof N=="number")y(N);else if(N&&Kn(N)==="object"){var D,U=N.align;"index"in N?D=N.index:D=t.findIndex(function(j){return c(j)===N.key});var q=N.offset,F=q===void 0?0:q;k({times:0,index:D,offset:F,originAlign:U})}}}function f9(e,t,r){var a=e.length,c=t.length,f,y;if(a===0&&c===0)return null;a<c?(f=e,y=t):(f=t,y=e);var l={__EMPTY_ITEM__:!0};function w(D){return D!==void 0?r(D):l}for(var C=null,A=Math.abs(a-c)!==1,M=0;M<y.length;M+=1){var k=w(f[M]),N=w(y[M]);if(k!==N){C=M,A=A||k!==w(y[M+1]);break}}return C===null?null:{index:C,multiple:A}}function p9(e,t,r){var a=T.useState(e),c=Ut(a,2),f=c[0],y=c[1],l=T.useState(null),w=Ut(l,2),C=w[0],A=w[1];return T.useEffect(function(){var M=f9(f||[],e||[],t);(M==null?void 0:M.index)!==void 0&&(r==null||r(M.index),A(e[M.index])),y(e)},[e]),[C]}var OM=(typeof navigator>"u"?"undefined":Kn(navigator))==="object"&&/Firefox/i.test(navigator.userAgent);const Yz=function(e,t){var r=T.useRef(!1),a=T.useRef(null);function c(){clearTimeout(a.current),r.current=!0,a.current=setTimeout(function(){r.current=!1},50)}var f=T.useRef({top:e,bottom:t});return f.current.top=e,f.current.bottom=t,function(y){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,w=y<0&&f.current.top||y>0&&f.current.bottom;return l&&w?(clearTimeout(a.current),r.current=!1):(!w||r.current)&&c(),!r.current&&w}};function m9(e,t,r,a,c){var f=T.useRef(0),y=T.useRef(null),l=T.useRef(null),w=T.useRef(!1),C=Yz(t,r);function A(q,F){yi.cancel(y.current),f.current+=F,l.current=F,!C(F)&&(OM||q.preventDefault(),y.current=yi(function(){var j=w.current?10:1;c(f.current*j),f.current=0}))}function M(q,F){c(F,!0),OM||q.preventDefault()}var k=T.useRef(null),N=T.useRef(null);function D(q){if(e){yi.cancel(N.current),N.current=yi(function(){k.current=null},2);var F=q.deltaX,j=q.deltaY,V=q.shiftKey,X=F,te=j;(k.current==="sx"||!k.current&&V&&j&&!F)&&(X=j,te=0,k.current="sx");var re=Math.abs(X),Q=Math.abs(te);k.current===null&&(k.current=a&&re>Q?"x":"y"),k.current==="y"?A(q,te):M(q,X)}}function U(q){e&&(w.current=q.detail===l.current)}return[D,U]}var g9=14/15;function v9(e,t,r){var a=T.useRef(!1),c=T.useRef(0),f=T.useRef(null),y=T.useRef(null),l,w=function(k){if(a.current){var N=Math.ceil(k.touches[0].pageY),D=c.current-N;c.current=N,r(D)&&k.preventDefault(),clearInterval(y.current),y.current=setInterval(function(){D*=g9,(!r(D,!0)||Math.abs(D)<=.1)&&clearInterval(y.current)},16)}},C=function(){a.current=!1,l()},A=function(k){l(),k.touches.length===1&&!a.current&&(a.current=!0,c.current=Math.ceil(k.touches[0].pageY),f.current=k.target,f.current.addEventListener("touchmove",w),f.current.addEventListener("touchend",C))};l=function(){f.current&&(f.current.removeEventListener("touchmove",w),f.current.removeEventListener("touchend",C))},Lr(function(){return e&&t.current.addEventListener("touchstart",A),function(){var M;(M=t.current)===null||M===void 0||M.removeEventListener("touchstart",A),l(),clearInterval(y.current)}},[e])}var y9=20;function zM(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=e/t*100;return isNaN(r)&&(r=0),r=Math.max(r,y9),r=Math.min(r,e/2),Math.floor(r)}function _9(e,t,r,a){var c=T.useMemo(function(){return[new Map,[]]},[e,r.id,a]),f=Ut(c,2),y=f[0],l=f[1],w=function(A){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:A,k=y.get(A),N=y.get(M);if(k===void 0||N===void 0)for(var D=e.length,U=l.length;U<D;U+=1){var q,F=e[U],j=t(F);y.set(j,U);var V=(q=r.get(j))!==null&&q!==void 0?q:a;if(l[U]=(l[U-1]||0)+V,j===A&&(k=U),j===M&&(N=U),k!==void 0&&N!==void 0)break}return{top:l[k-1]||0,bottom:l[N]}};return w}var x9=["prefixCls","className","height","itemHeight","fullHeight","style","data","children","itemKey","virtual","direction","scrollWidth","component","onScroll","onVirtualScroll","onVisibleChange","innerProps","extraRender","styles"],b9=[],w9={overflowY:"auto",overflowAnchor:"none"};function S9(e,t){var r=e.prefixCls,a=r===void 0?"rc-virtual-list":r,c=e.className,f=e.height,y=e.itemHeight,l=e.fullHeight,w=l===void 0?!0:l,C=e.style,A=e.data,M=e.children,k=e.itemKey,N=e.virtual,D=e.direction,U=e.scrollWidth,q=e.component,F=q===void 0?"div":q,j=e.onScroll,V=e.onVirtualScroll,X=e.onVisibleChange,te=e.innerProps,re=e.extraRender,Q=e.styles,ne=Vr(e,x9),ee=!!(N!==!1&&f&&y),me=ee&&A&&(y*A.length>f||!!U),ce=D==="rtl",ie=$t(a,De({},"".concat(a,"-rtl"),ce),c),fe=A||b9,Te=T.useRef(),$e=T.useRef(),Fe=T.useState(0),Ne=Ut(Fe,2),pe=Ne[0],He=Ne[1],Be=T.useState(0),Ge=Ut(Be,2),Qe=Ge[0],gt=Ge[1],St=T.useState(!1),xt=Ut(St,2),Nt=xt[0],jt=xt[1],bt=function(){jt(!0)},ut=function(){jt(!1)},Tt=T.useCallback(function(an){return typeof k=="function"?k(an):an==null?void 0:an[k]},[k]),ft={getKey:Tt};function yt(an){He(function(nn){var Sn;typeof an=="function"?Sn=an(nn):Sn=an;var Tr=W(Sn);return Te.current.scrollTop=Tr,Tr})}var ct=T.useRef({start:0,end:fe.length}),It=T.useRef(),Ct=p9(fe,Tt),Qt=Ut(Ct,1),Vt=Qt[0];It.current=Vt;var Bt=u9(Tt,null,null),ot=Ut(Bt,4),rt=ot[0],Lt=ot[1],Mt=ot[2],sn=ot[3],An=T.useMemo(function(){if(!ee)return{scrollHeight:void 0,start:0,end:fe.length-1,offset:void 0};if(!me){var an;return{scrollHeight:((an=$e.current)===null||an===void 0?void 0:an.offsetHeight)||0,start:0,end:fe.length-1,offset:void 0}}for(var nn=0,Sn,Tr,ri,En=fe.length,Ni=0;Ni<En;Ni+=1){var xo=fe[Ni],Po=Tt(xo),ro=Mt.get(Po),Hr=nn+(ro===void 0?y:ro);Hr>=pe&&Sn===void 0&&(Sn=Ni,Tr=nn),Hr>pe+f&&ri===void 0&&(ri=Ni),nn=Hr}return Sn===void 0&&(Sn=0,Tr=0,ri=Math.ceil(f/y)),ri===void 0&&(ri=fe.length-1),ri=Math.min(ri+1,fe.length-1),{scrollHeight:nn,start:Sn,end:ri,offset:Tr}},[me,ee,pe,fe,sn,f]),Mn=An.scrollHeight,on=An.start,Vn=An.end,Nn=An.offset;ct.current.start=on,ct.current.end=Vn;var zn=T.useState({width:0,height:f}),yn=Ut(zn,2),rn=yn[0],Wn=yn[1],jn=function(nn){Wn({width:nn.width||nn.offsetWidth,height:nn.height||nn.offsetHeight})},fr=T.useRef(),or=T.useRef(),qn=T.useMemo(function(){return zM(rn.width,U)},[rn.width,U]),Qn=T.useMemo(function(){return zM(rn.height,Mn)},[rn.height,Mn]),Rr=Mn-f,_e=T.useRef(Rr);_e.current=Rr;function W(an){var nn=an;return Number.isNaN(_e.current)||(nn=Math.min(nn,_e.current)),nn=Math.max(nn,0),nn}var J=pe<=0,de=pe>=Rr,Se=Yz(J,de),Ie=function(){return{x:ce?-Qe:Qe,y:pe}},Me=T.useRef(Ie()),ke=jo(function(){if(V){var an=Ie();(Me.current.x!==an.x||Me.current.y!==an.y)&&(V(an),Me.current=an)}});function we(an,nn){var Sn=an;nn?(vc.flushSync(function(){gt(Sn)}),ke()):yt(Sn)}function Le(an){var nn=an.currentTarget.scrollTop;nn!==pe&&yt(nn),j==null||j(an),ke()}var je=function(nn){var Sn=nn,Tr=U-rn.width;return Sn=Math.max(Sn,0),Sn=Math.min(Sn,Tr),Sn},Je=jo(function(an,nn){nn?(vc.flushSync(function(){gt(function(Sn){var Tr=Sn+(ce?-an:an);return je(Tr)})}),ke()):yt(function(Sn){var Tr=Sn+an;return Tr})}),We=m9(ee,J,de,!!U,Je),wt=Ut(We,2),Yt=wt[0],Xt=wt[1];v9(ee,Te,function(an,nn){return Se(an,nn)?!1:(Yt({preventDefault:function(){},deltaY:an}),!0)}),Lr(function(){function an(Sn){ee&&Sn.preventDefault()}var nn=Te.current;return nn.addEventListener("wheel",Yt),nn.addEventListener("DOMMouseScroll",Xt),nn.addEventListener("MozMousePixelScroll",an),function(){nn.removeEventListener("wheel",Yt),nn.removeEventListener("DOMMouseScroll",Xt),nn.removeEventListener("MozMousePixelScroll",an)}},[ee]),Lr(function(){U&&gt(function(an){return je(an)})},[rn.width,U]);var un=function(){var nn,Sn;(nn=fr.current)===null||nn===void 0||nn.delayHidden(),(Sn=or.current)===null||Sn===void 0||Sn.delayHidden()},ln=h9(Te,fe,Mt,y,Tt,function(){return Lt(!0)},yt,un);T.useImperativeHandle(t,function(){return{getScrollInfo:Ie,scrollTo:function(nn){function Sn(Tr){return Tr&&Kn(Tr)==="object"&&("left"in Tr||"top"in Tr)}Sn(nn)?(nn.left!==void 0&&gt(je(nn.left)),ln(nn.top)):ln(nn)}}}),Lr(function(){if(X){var an=fe.slice(on,Vn+1);X(an,fe)}},[on,Vn,fe]);var Gn=_9(fe,Tt,Mt,y),On=re==null?void 0:re({start:on,end:Vn,virtual:me,offsetX:Qe,offsetY:Nn,rtl:ce,getSize:Gn}),er=l9(fe,on,Vn,U,rt,M,ft),Zn=null;f&&(Zn=lt(De({},w?"height":"maxHeight",f),w9),ee&&(Zn.overflowY="hidden",U&&(Zn.overflowX="hidden"),Nt&&(Zn.pointerEvents="none")));var Zr={};return ce&&(Zr.dir="rtl"),T.createElement("div",Cn({style:lt(lt({},C),{},{position:"relative"}),className:ie},Zr,ne),T.createElement(xl,{onResize:jn},T.createElement(F,{className:"".concat(a,"-holder"),style:Zn,ref:Te,onScroll:Le,onMouseEnter:un},T.createElement(Kz,{prefixCls:a,height:Mn,offsetX:Qe,offsetY:Nn,scrollWidth:U,onInnerResize:Lt,ref:$e,innerProps:te,rtl:ce,extra:On},er))),me&&Mn>f&&T.createElement(RM,{ref:fr,prefixCls:a,scrollOffset:pe,scrollRange:Mn,rtl:ce,onScroll:we,onStartMove:bt,onStopMove:ut,spinSize:Qn,containerSize:rn.height,style:Q==null?void 0:Q.verticalScrollBar,thumbStyle:Q==null?void 0:Q.verticalScrollBarThumb}),me&&U&&T.createElement(RM,{ref:or,prefixCls:a,scrollOffset:Qe,scrollRange:U,rtl:ce,onScroll:we,onStartMove:bt,onStopMove:ut,spinSize:qn,containerSize:rn.width,horizontal:!0,style:Q==null?void 0:Q.horizontalScrollBar,thumbStyle:Q==null?void 0:Q.horizontalScrollBarThumb}))}var Jz=T.forwardRef(S9);Jz.displayName="List";var Qz=T.createContext(null);function E9(){return/(mac\sos|macintosh)/i.test(navigator.appVersion)}var C9=["disabled","title","children","style","className"];function kM(e){return typeof e=="string"||typeof e=="number"}var T9=function(t,r){var a=iV(),c=a.prefixCls,f=a.id,y=a.open,l=a.multiple,w=a.mode,C=a.searchValue,A=a.toggleOpen,M=a.notFoundContent,k=a.onPopupScroll,N=T.useContext(Qz),D=N.flattenOptions,U=N.onActiveValue,q=N.defaultActiveFirstOption,F=N.onSelect,j=N.menuItemSelectedIcon,V=N.rawValues,X=N.fieldNames,te=N.virtual,re=N.direction,Q=N.listHeight,ne=N.listItemHeight,ee=N.optionRender,me="".concat(c,"-item"),ce=f0(function(){return D},[y,D],function(bt,ut){return ut[0]&&bt[1]!==ut[1]}),ie=T.useRef(null),fe=function(ut){ut.preventDefault()},Te=function(ut){ie.current&&ie.current.scrollTo(typeof ut=="number"?{index:ut}:ut)},$e=function(ut){for(var Tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,ft=ce.length,yt=0;yt<ft;yt+=1){var ct=(ut+yt*Tt+ft)%ft,It=ce[ct],Ct=It.group,Qt=It.data;if(!Ct&&!Qt.disabled)return ct}return-1},Fe=T.useState(function(){return $e(0)}),Ne=Ut(Fe,2),pe=Ne[0],He=Ne[1],Be=function(ut){var Tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;He(ut);var ft={source:Tt?"keyboard":"mouse"},yt=ce[ut];if(!yt){U(null,-1,ft);return}U(yt.value,ut,ft)};T.useEffect(function(){Be(q!==!1?$e(0):-1)},[ce.length,C]);var Ge=T.useCallback(function(bt){return V.has(bt)&&w!=="combobox"},[w,mn(V).toString(),V.size]);T.useEffect(function(){var bt=setTimeout(function(){if(!l&&y&&V.size===1){var Tt=Array.from(V)[0],ft=ce.findIndex(function(yt){var ct=yt.data;return ct.value===Tt});ft!==-1&&(Be(ft),Te(ft))}});if(y){var ut;(ut=ie.current)===null||ut===void 0||ut.scrollTo(void 0)}return function(){return clearTimeout(bt)}},[y,C]);var Qe=function(ut){ut!==void 0&&F(ut,{selected:!V.has(ut)}),l||A(!1)};if(T.useImperativeHandle(r,function(){return{onKeyDown:function(ut){var Tt=ut.which,ft=ut.ctrlKey;switch(Tt){case Ht.N:case Ht.P:case Ht.UP:case Ht.DOWN:{var yt=0;if(Tt===Ht.UP?yt=-1:Tt===Ht.DOWN?yt=1:E9()&&ft&&(Tt===Ht.N?yt=1:Tt===Ht.P&&(yt=-1)),yt!==0){var ct=$e(pe+yt,yt);Te(ct),Be(ct,!0)}break}case Ht.ENTER:{var It=ce[pe];It&&!It.data.disabled?Qe(It.value):Qe(void 0),y&&ut.preventDefault();break}case Ht.ESC:A(!1),y&&ut.stopPropagation()}},onKeyUp:function(){},scrollTo:function(ut){Te(ut)}}}),ce.length===0)return T.createElement("div",{role:"listbox",id:"".concat(f,"_list"),className:"".concat(me,"-empty"),onMouseDown:fe},M);var gt=Object.keys(X).map(function(bt){return X[bt]}),St=function(ut){return ut.label};function xt(bt,ut){var Tt=bt.group;return{role:Tt?"presentation":"option",id:"".concat(f,"_list_").concat(ut)}}var Nt=function(ut){var Tt=ce[ut];if(!Tt)return null;var ft=Tt.data||{},yt=ft.value,ct=Tt.group,It=bh(ft,!0),Ct=St(Tt);return Tt?T.createElement("div",Cn({"aria-label":typeof Ct=="string"&&!ct?Ct:null},It,{key:ut},xt(Tt,ut),{"aria-selected":Ge(yt)}),yt):null},jt={role:"listbox",id:"".concat(f,"_list")};return T.createElement(T.Fragment,null,te&&T.createElement("div",Cn({},jt,{style:{height:0,width:0,overflow:"hidden"}}),Nt(pe-1),Nt(pe),Nt(pe+1)),T.createElement(Jz,{itemKey:"key",ref:ie,data:ce,height:Q,itemHeight:ne,fullHeight:!1,onMouseDown:fe,onScroll:k,virtual:te,direction:re,innerProps:te?null:jt},function(bt,ut){var Tt,ft=bt.group,yt=bt.groupOption,ct=bt.data,It=bt.label,Ct=bt.value,Qt=ct.key;if(ft){var Vt,Bt=(Vt=ct.title)!==null&&Vt!==void 0?Vt:kM(It)?It.toString():void 0;return T.createElement("div",{className:$t(me,"".concat(me,"-group")),title:Bt},It!==void 0?It:Qt)}var ot=ct.disabled,rt=ct.title;ct.children;var Lt=ct.style,Mt=ct.className,sn=Vr(ct,C9),An=Sc(sn,gt),Mn=Ge(Ct),on="".concat(me,"-option"),Vn=$t(me,on,Mt,(Tt={},De(Tt,"".concat(on,"-grouped"),yt),De(Tt,"".concat(on,"-active"),pe===ut&&!ot),De(Tt,"".concat(on,"-disabled"),ot),De(Tt,"".concat(on,"-selected"),Mn),Tt)),Nn=St(bt),zn=!j||typeof j=="function"||Mn,yn=typeof Nn=="number"?Nn:Nn||Ct,rn=kM(yn)?yn.toString():void 0;return rt!==void 0&&(rn=rt),T.createElement("div",Cn({},bh(An),te?{}:xt(bt,ut),{"aria-selected":Mn,className:Vn,title:rn,onMouseMove:function(){pe===ut||ot||Be(ut)},onClick:function(){ot||Qe(Ct)},style:Lt}),T.createElement("div",{className:"".concat(on,"-content")},typeof ee=="function"?ee(bt,{index:ut}):yn),T.isValidElement(j)||Mn,zn&&T.createElement(T0,{className:"".concat(me,"-option-state"),customizeIcon:j,customizeIconProps:{value:Ct,disabled:ot,isSelected:Mn}},Mn?"✓":null))}))},ek=T.forwardRef(T9);ek.displayName="OptionList";const I9=function(e,t){var r=T.useRef({values:new Map,options:new Map}),a=T.useMemo(function(){var f=r.current,y=f.values,l=f.options,w=e.map(function(M){if(M.label===void 0){var k;return lt(lt({},M),{},{label:(k=y.get(M.value))===null||k===void 0?void 0:k.label})}return M}),C=new Map,A=new Map;return w.forEach(function(M){C.set(M.value,M),A.set(M.value,t.get(M.value)||l.get(M.value))}),r.current.values=C,r.current.options=A,w},[e,t]),c=T.useCallback(function(f){return t.get(f)||r.current.options.get(f)},[t]);return[a,c]};function p1(e,t){return Vz(e).join("").toUpperCase().includes(t)}const M9=function(e,t,r,a,c){return T.useMemo(function(){if(!r||a===!1)return e;var f=t.options,y=t.label,l=t.value,w=[],C=typeof a=="function",A=r.toUpperCase(),M=C?a:function(N,D){return c?p1(D[c],A):D[f]?p1(D[y!=="children"?y:"label"],A):p1(D[l],A)},k=C?function(N){return pw(N)}:function(N){return N};return e.forEach(function(N){if(N[f]){var D=M(r,k(N));if(D)w.push(N);else{var U=N[f].filter(function(q){return M(r,k(q))});U.length&&w.push(lt(lt({},N),{},De({},f,U)))}return}M(r,k(N))&&w.push(N)}),w},[e,a,c,r,t])};var LM=0,P9=no();function A9(){var e;return P9?(e=LM,LM+=1):e="TEST_OR_SSR",e}function R9(e){var t=T.useState(),r=Ut(t,2),a=r[0],c=r[1];return T.useEffect(function(){c("rc_select_".concat(A9()))},[]),e||a}var O9=["children","value"],z9=["children"];function k9(e){var t=e,r=t.key,a=t.props,c=a.children,f=a.value,y=Vr(a,O9);return lt({key:r,value:f!==void 0?f:r,children:c},y)}function tk(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return hl(e).map(function(r,a){if(!T.isValidElement(r)||!r.type)return null;var c=r,f=c.type.isSelectOptGroup,y=c.key,l=c.props,w=l.children,C=Vr(l,z9);return t||!f?k9(r):lt(lt({key:"__RC_SELECT_GRP__".concat(y===null?a:y,"__"),label:y},C),{},{options:tk(w)})}).filter(function(r){return r})}function L9(e,t,r,a,c){return T.useMemo(function(){var f=e,y=!e;y&&(f=tk(t));var l=new Map,w=new Map,C=function(k,N,D){D&&typeof D=="string"&&k.set(N[D],N)};function A(M){for(var k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,N=0;N<M.length;N+=1){var D=M[N];!D[r.options]||k?(l.set(D[r.value],D),C(w,D,r.label),C(w,D,a),C(w,D,c)):A(D[r.options],!0)}}return A(f),{options:f,valueOptions:l,labelOptions:w}},[e,t,r,a,c])}function DM(e){var t=T.useRef();t.current=e;var r=T.useCallback(function(){return t.current.apply(t,arguments)},[]);return r}var D9=["id","mode","prefixCls","backfill","fieldNames","inputValue","searchValue","onSearch","autoClearSearchValue","onSelect","onDeselect","dropdownMatchSelectWidth","filterOption","filterSort","optionFilterProp","optionLabelProp","options","optionRender","children","defaultActiveFirstOption","menuItemSelectedIcon","virtual","direction","listHeight","listItemHeight","value","defaultValue","labelInValue","onChange"],$9=["inputValue"];function F9(e){return!e||Kn(e)!=="object"}var B9=T.forwardRef(function(e,t){var r=e.id,a=e.mode,c=e.prefixCls,f=c===void 0?"rc-select":c,y=e.backfill,l=e.fieldNames,w=e.inputValue,C=e.searchValue,A=e.onSearch,M=e.autoClearSearchValue,k=M===void 0?!0:M,N=e.onSelect,D=e.onDeselect,U=e.dropdownMatchSelectWidth,q=U===void 0?!0:U,F=e.filterOption,j=e.filterSort,V=e.optionFilterProp,X=e.optionLabelProp,te=e.options,re=e.optionRender,Q=e.children,ne=e.defaultActiveFirstOption,ee=e.menuItemSelectedIcon,me=e.virtual,ce=e.direction,ie=e.listHeight,fe=ie===void 0?200:ie,Te=e.listItemHeight,$e=Te===void 0?20:Te,Fe=e.value,Ne=e.defaultValue,pe=e.labelInValue,He=e.onChange,Be=Vr(e,D9),Ge=R9(r),Qe=mw(a),gt=!!(!te&&Q),St=T.useMemo(function(){return F===void 0&&a==="combobox"?!1:F},[F,a]),xt=T.useMemo(function(){return Xz(l,gt)},[JSON.stringify(l),gt]),Nt=ms("",{value:C!==void 0?C:w,postState:function(Je){return Je||""}}),jt=Ut(Nt,2),bt=jt[0],ut=jt[1],Tt=L9(te,Q,xt,V,X),ft=Tt.valueOptions,yt=Tt.labelOptions,ct=Tt.options,It=T.useCallback(function(je){var Je=Vz(je);return Je.map(function(We){var wt,Yt,Xt,un,ln;if(F9(We))wt=We;else{var Gn;Xt=We.key,Yt=We.label,wt=(Gn=We.value)!==null&&Gn!==void 0?Gn:Xt}var On=ft.get(wt);if(On){var er;Yt===void 0&&(Yt=On==null?void 0:On[X||xt.label]),Xt===void 0&&(Xt=(er=On==null?void 0:On.key)!==null&&er!==void 0?er:wt),un=On==null?void 0:On.disabled,ln=On==null?void 0:On.title}return{label:Yt,value:wt,key:Xt,disabled:un,title:ln}})},[xt,X,ft]),Ct=ms(Ne,{value:Fe}),Qt=Ut(Ct,2),Vt=Qt[0],Bt=Qt[1],ot=T.useMemo(function(){var je,Je=It(Vt);return a==="combobox"&&wV((je=Je[0])===null||je===void 0?void 0:je.value)?[]:Je},[Vt,It,a]),rt=I9(ot,ft),Lt=Ut(rt,2),Mt=Lt[0],sn=Lt[1],An=T.useMemo(function(){if(!a&&Mt.length===1){var je=Mt[0];if(je.value===null&&(je.label===null||je.label===void 0))return[]}return Mt.map(function(Je){var We;return lt(lt({},Je),{},{label:(We=Je.label)!==null&&We!==void 0?We:Je.value})})},[a,Mt]),Mn=T.useMemo(function(){return new Set(Mt.map(function(je){return je.value}))},[Mt]);T.useEffect(function(){if(a==="combobox"){var je,Je=(je=Mt[0])===null||je===void 0?void 0:je.value;ut(bV(Je)?String(Je):"")}},[Mt]);var on=DM(function(je,Je){var We,wt=Je??je;return We={},De(We,xt.value,je),De(We,xt.label,wt),We}),Vn=T.useMemo(function(){if(a!=="tags")return ct;var je=mn(ct),Je=function(wt){return ft.has(wt)};return mn(Mt).sort(function(We,wt){return We.value<wt.value?-1:1}).forEach(function(We){var wt=We.value;Je(wt)||je.push(on(wt,We.label))}),je},[on,ct,ft,Mt,a]),Nn=M9(Vn,xt,bt,St,V),zn=T.useMemo(function(){return a!=="tags"||!bt||Nn.some(function(je){return je[V||"value"]===bt})||Nn.some(function(je){return je[xt.value]===bt})?Nn:[on(bt)].concat(mn(Nn))},[on,V,a,Nn,bt,xt]),yn=T.useMemo(function(){return j?mn(zn).sort(function(je,Je){return j(je,Je)}):zn},[zn,j]),rn=T.useMemo(function(){return n9(yn,{fieldNames:xt,childrenAsData:gt})},[yn,xt,gt]),Wn=function(Je){var We=It(Je);if(Bt(We),He&&(We.length!==Mt.length||We.some(function(Xt,un){var ln;return((ln=Mt[un])===null||ln===void 0?void 0:ln.value)!==(Xt==null?void 0:Xt.value)}))){var wt=pe?We:We.map(function(Xt){return Xt.value}),Yt=We.map(function(Xt){return pw(sn(Xt.value))});He(Qe?wt:wt[0],Qe?Yt:Yt[0])}},jn=T.useState(null),fr=Ut(jn,2),or=fr[0],qn=fr[1],Qn=T.useState(0),Rr=Ut(Qn,2),_e=Rr[0],W=Rr[1],J=ne!==void 0?ne:a!=="combobox",de=T.useCallback(function(je,Je){var We=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},wt=We.source,Yt=wt===void 0?"keyboard":wt;W(Je),y&&a==="combobox"&&je!==null&&Yt==="keyboard"&&qn(String(je))},[y,a]),Se=function(Je,We,wt){var Yt=function(){var nn,Sn=sn(Je);return[pe?{label:Sn==null?void 0:Sn[xt.label],value:Je,key:(nn=Sn==null?void 0:Sn.key)!==null&&nn!==void 0?nn:Je}:Je,pw(Sn)]};if(We&&N){var Xt=Yt(),un=Ut(Xt,2),ln=un[0],Gn=un[1];N(ln,Gn)}else if(!We&&D&&wt!=="clear"){var On=Yt(),er=Ut(On,2),Zn=er[0],Zr=er[1];D(Zn,Zr)}},Ie=DM(function(je,Je){var We,wt=Qe?Je.selected:!0;wt?We=Qe?[].concat(mn(Mt),[je]):[je]:We=Mt.filter(function(Yt){return Yt.value!==je}),Wn(We),Se(je,wt),a==="combobox"?qn(""):(!mw||k)&&(ut(""),qn(""))}),Me=function(Je,We){Wn(Je);var wt=We.type,Yt=We.values;(wt==="remove"||wt==="clear")&&Yt.forEach(function(Xt){Se(Xt.value,!1,wt)})},ke=function(Je,We){if(ut(Je),qn(null),We.source==="submit"){var wt=(Je||"").trim();if(wt){var Yt=Array.from(new Set([].concat(mn(Mn),[wt])));Wn(Yt),Se(wt,!0),ut("")}return}We.source!=="blur"&&(a==="combobox"&&Wn(Je),A==null||A(Je))},we=function(Je){var We=Je;a!=="tags"&&(We=Je.map(function(Yt){var Xt=yt.get(Yt);return Xt==null?void 0:Xt.value}).filter(function(Yt){return Yt!==void 0}));var wt=Array.from(new Set([].concat(mn(Mn),mn(We))));Wn(wt),wt.forEach(function(Yt){Se(Yt,!0)})},Le=T.useMemo(function(){var je=me!==!1&&q!==!1;return lt(lt({},Tt),{},{flattenOptions:rn,onActiveValue:de,defaultActiveFirstOption:J,onSelect:Ie,menuItemSelectedIcon:ee,rawValues:Mn,fieldNames:xt,virtual:je,direction:ce,listHeight:fe,listItemHeight:$e,childrenAsData:gt,optionRender:re})},[Tt,rn,de,J,Ie,ee,Mn,xt,me,q,fe,$e,gt,re]);return T.createElement(Qz.Provider,{value:Le},T.createElement(a9,Cn({},Be,{id:Ge,prefixCls:f,ref:t,omitDomProps:$9,mode:a,displayValues:An,onDisplayValuesChange:Me,direction:ce,searchValue:bt,onSearch:ke,autoClearSearchValue:k,onSearchSplit:we,dropdownMatchSelectWidth:q,OptionList:ek,emptyOptions:!rn.length,activeValue:or,activeDescendantId:"".concat(Ge,"_list_").concat(_e)})))}),KS=B9;KS.Option=XS;KS.OptGroup=ZS;function ch(e,t,r){return $t({[`${e}-status-success`]:t==="success",[`${e}-status-warning`]:t==="warning",[`${e}-status-error`]:t==="error",[`${e}-status-validating`]:t==="validating",[`${e}-has-feedback`]:r})}const YS=(e,t)=>t||e,N9=()=>{const[,e]=vs(),r=new Ji(e.colorBgBase).toHsl().l<.5?{opacity:.65}:{};return T.createElement("svg",{style:r,width:"184",height:"152",viewBox:"0 0 184 152",xmlns:"http://www.w3.org/2000/svg"},T.createElement("g",{fill:"none",fillRule:"evenodd"},T.createElement("g",{transform:"translate(24 31.67)"},T.createElement("ellipse",{fillOpacity:".8",fill:"#F5F5F7",cx:"67.797",cy:"106.89",rx:"67.797",ry:"12.668"}),T.createElement("path",{d:"M122.034 69.674L98.109 40.229c-1.148-1.386-2.826-2.225-4.593-2.225h-51.44c-1.766 0-3.444.839-4.592 2.225L13.56 69.674v15.383h108.475V69.674z",fill:"#AEB8C2"}),T.createElement("path",{d:"M101.537 86.214L80.63 61.102c-1.001-1.207-2.507-1.867-4.048-1.867H31.724c-1.54 0-3.047.66-4.048 1.867L6.769 86.214v13.792h94.768V86.214z",fill:"url(#linearGradient-1)",transform:"translate(13.56)"}),T.createElement("path",{d:"M33.83 0h67.933a4 4 0 0 1 4 4v93.344a4 4 0 0 1-4 4H33.83a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4z",fill:"#F5F5F7"}),T.createElement("path",{d:"M42.678 9.953h50.237a2 2 0 0 1 2 2V36.91a2 2 0 0 1-2 2H42.678a2 2 0 0 1-2-2V11.953a2 2 0 0 1 2-2zM42.94 49.767h49.713a2.262 2.262 0 1 1 0 4.524H42.94a2.262 2.262 0 0 1 0-4.524zM42.94 61.53h49.713a2.262 2.262 0 1 1 0 4.525H42.94a2.262 2.262 0 0 1 0-4.525zM121.813 105.032c-.775 3.071-3.497 5.36-6.735 5.36H20.515c-3.238 0-5.96-2.29-6.734-5.36a7.309 7.309 0 0 1-.222-1.79V69.675h26.318c2.907 0 5.25 2.448 5.25 5.42v.04c0 2.971 2.37 5.37 5.277 5.37h34.785c2.907 0 5.277-2.421 5.277-5.393V75.1c0-2.972 2.343-5.426 5.25-5.426h26.318v33.569c0 .617-.077 1.216-.221 1.789z",fill:"#DCE0E6"})),T.createElement("path",{d:"M149.121 33.292l-6.83 2.65a1 1 0 0 1-1.317-1.23l1.937-6.207c-2.589-2.944-4.109-6.534-4.109-10.408C138.802 8.102 148.92 0 161.402 0 173.881 0 184 8.102 184 18.097c0 9.995-10.118 18.097-22.599 18.097-4.528 0-8.744-1.066-12.28-2.902z",fill:"#DCE0E6"}),T.createElement("g",{transform:"translate(149.65 15.383)",fill:"#FFF"},T.createElement("ellipse",{cx:"20.654",cy:"3.167",rx:"2.849",ry:"2.815"}),T.createElement("path",{d:"M5.698 5.63H0L2.898.704zM9.259.704h4.985V5.63H9.259z"}))))},j9=N9,U9=()=>{const[,e]=vs(),{colorFill:t,colorFillTertiary:r,colorFillQuaternary:a,colorBgContainer:c}=e,{borderColor:f,shadowColor:y,contentColor:l}=T.useMemo(()=>({borderColor:new Ji(t).onBackground(c).toHexShortString(),shadowColor:new Ji(r).onBackground(c).toHexShortString(),contentColor:new Ji(a).onBackground(c).toHexShortString()}),[t,r,a,c]);return T.createElement("svg",{width:"64",height:"41",viewBox:"0 0 64 41",xmlns:"http://www.w3.org/2000/svg"},T.createElement("g",{transform:"translate(0 1)",fill:"none",fillRule:"evenodd"},T.createElement("ellipse",{fill:y,cx:"32",cy:"33",rx:"32",ry:"7"}),T.createElement("g",{fillRule:"nonzero",stroke:f},T.createElement("path",{d:"M55 12.76L44.854 1.258C44.367.474 43.656 0 42.907 0H21.093c-.749 0-1.46.474-1.947 1.257L9 12.761V22h46v-9.24z"}),T.createElement("path",{d:"M41.613 15.931c0-1.605.994-2.93 2.227-2.931H55v18.137C55 33.26 53.68 35 52.05 35h-40.1C10.32 35 9 33.259 9 31.137V13h11.16c1.233 0 2.227 1.323 2.227 2.928v.022c0 1.605 1.005 2.901 2.237 2.901h14.752c1.232 0 2.237-1.308 2.237-2.913v-.007z",fill:l}))))},V9=U9,H9=e=>{const{componentCls:t,margin:r,marginXS:a,marginXL:c,fontSize:f,lineHeight:y}=e;return{[t]:{marginInline:a,fontSize:f,lineHeight:y,textAlign:"center",[`${t}-image`]:{height:e.emptyImgHeight,marginBottom:a,opacity:e.opacityImage,img:{height:"100%"},svg:{maxWidth:"100%",height:"100%",margin:"auto"}},[`${t}-description`]:{color:e.colorText},[`${t}-footer`]:{marginTop:r},"&-normal":{marginBlock:c,color:e.colorTextDisabled,[`${t}-description`]:{color:e.colorTextDisabled},[`${t}-image`]:{height:e.emptyImgHeightMD}},"&-small":{marginBlock:a,color:e.colorTextDisabled,[`${t}-image`]:{height:e.emptyImgHeightSM}}}}},G9=_o("Empty",e=>{const{componentCls:t,controlHeightLG:r}=e,a=$r(e,{emptyImgCls:`${t}-img`,emptyImgHeight:r*2.5,emptyImgHeightMD:r,emptyImgHeightSM:r*.875});return[H9(a)]});var W9=globalThis&&globalThis.__rest||function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(r[a[c]]=e[a[c]]);return r};const nk=T.createElement(j9,null),rk=T.createElement(V9,null),JS=e=>{var{className:t,rootClassName:r,prefixCls:a,image:c=nk,description:f,children:y,imageStyle:l,style:w}=e,C=W9(e,["className","rootClassName","prefixCls","image","description","children","imageStyle","style"]);const{getPrefixCls:A,direction:M,empty:k}=T.useContext(cr),N=A("empty",a),[D,U]=G9(N),[q]=zS("Empty"),F=typeof f<"u"?f:q==null?void 0:q.description,j=typeof F=="string"?F:"empty";let V=null;return typeof c=="string"?V=T.createElement("img",{alt:j,src:c}):V=c,D(T.createElement("div",Object.assign({className:$t(U,N,k==null?void 0:k.className,{[`${N}-normal`]:c===rk,[`${N}-rtl`]:M==="rtl"},t,r),style:Object.assign(Object.assign({},k==null?void 0:k.style),w)},C),T.createElement("div",{className:`${N}-image`,style:l},V),F&&T.createElement("div",{className:`${N}-description`},F),y&&T.createElement("div",{className:`${N}-footer`},y)))};JS.PRESENTED_IMAGE_DEFAULT=nk;JS.PRESENTED_IMAGE_SIMPLE=rk;const fp=JS,q9=e=>{const{componentName:t}=e,{getPrefixCls:r}=T.useContext(cr),a=r("empty");switch(t){case"Table":case"List":return st.createElement(fp,{image:fp.PRESENTED_IMAGE_SIMPLE});case"Select":case"TreeSelect":case"Cascader":case"Transfer":case"Mentions":return st.createElement(fp,{image:fp.PRESENTED_IMAGE_SIMPLE,className:`${a}-small`});default:return st.createElement(fp,null)}},ik=q9,Z9=e=>{const{optionHeight:t,optionFontSize:r,optionLineHeight:a,optionPadding:c}=e;return{position:"relative",display:"block",minHeight:t,padding:c,color:e.colorText,fontWeight:"normal",fontSize:r,lineHeight:a,boxSizing:"border-box"}},X9=e=>{const{antCls:t,componentCls:r}=e,a=`${r}-item`,c=`&${t}-slide-up-enter${t}-slide-up-enter-active`,f=`&${t}-slide-up-appear${t}-slide-up-appear-active`,y=`&${t}-slide-up-leave${t}-slide-up-leave-active`,l=`${r}-dropdown-placement-`;return[{[`${r}-dropdown`]:Object.assign(Object.assign({},da(e)),{position:"absolute",top:-9999,zIndex:e.zIndexPopup,boxSizing:"border-box",padding:e.paddingXXS,overflow:"hidden",fontSize:e.fontSize,fontVariant:"initial",backgroundColor:e.colorBgElevated,borderRadius:e.borderRadiusLG,outline:"none",boxShadow:e.boxShadowSecondary,[`
          ${c}${l}bottomLeft,
          ${f}${l}bottomLeft
        `]:{animationName:Rz},[`
          ${c}${l}topLeft,
          ${f}${l}topLeft,
          ${c}${l}topRight,
          ${f}${l}topRight
        `]:{animationName:zz},[`${y}${l}bottomLeft`]:{animationName:Oz},[`
          ${y}${l}topLeft,
          ${y}${l}topRight
        `]:{animationName:kz},"&-hidden":{display:"none"},[`${a}`]:Object.assign(Object.assign({},Z9(e)),{cursor:"pointer",transition:`background ${e.motionDurationSlow} ease`,borderRadius:e.borderRadiusSM,"&-group":{color:e.colorTextDescription,fontSize:e.fontSizeSM,cursor:"default"},"&-option":{display:"flex","&-content":Object.assign({flex:"auto"},Hb),"&-state":{flex:"none",display:"flex",alignItems:"center"},[`&-active:not(${a}-option-disabled)`]:{backgroundColor:e.optionActiveBg},[`&-selected:not(${a}-option-disabled)`]:{color:e.optionSelectedColor,fontWeight:e.optionSelectedFontWeight,backgroundColor:e.optionSelectedBg,[`${a}-option-state`]:{color:e.colorPrimary}},"&-disabled":{[`&${a}-option-selected`]:{backgroundColor:e.colorBgContainerDisabled},color:e.colorTextDisabled,cursor:"not-allowed"},"&-grouped":{paddingInlineStart:e.controlPaddingHorizontal*2}}}),"&-rtl":{direction:"rtl"}})},mM(e,"slide-up"),mM(e,"slide-down"),pM(e,"move-up"),pM(e,"move-down")]},K9=X9,zd=2,ok=e=>{let{multipleSelectItemHeight:t,selectHeight:r,lineWidth:a}=e;const c=(r-t)/2-a,f=Math.ceil(c/2);return[c,f]};function m1(e,t){const{componentCls:r,iconCls:a}=e,c=`${r}-selection-overflow`,f=e.multipleSelectItemHeight,[y]=ok(e),l=t?`${r}-${t}`:"";return{[`${r}-multiple${l}`]:{fontSize:e.fontSize,[c]:{position:"relative",display:"flex",flex:"auto",flexWrap:"wrap",maxWidth:"100%","&-item":{flex:"none",alignSelf:"center",maxWidth:"100%",display:"inline-flex"}},[`${r}-selector`]:{display:"flex",flexWrap:"wrap",alignItems:"center",height:"100%",padding:`${y-zd}px ${zd*2}px`,borderRadius:e.borderRadius,[`${r}-show-search&`]:{cursor:"text"},[`${r}-disabled&`]:{background:e.multipleSelectorBgDisabled,cursor:"not-allowed"},"&:after":{display:"inline-block",width:0,margin:`${zd}px 0`,lineHeight:`${f}px`,visibility:"hidden",content:'"\\a0"'}},[`
        &${r}-show-arrow ${r}-selector,
        &${r}-allow-clear ${r}-selector
      `]:{paddingInlineEnd:e.fontSizeIcon+e.controlPaddingHorizontal},[`${r}-selection-item`]:{display:"flex",alignSelf:"center",flex:"none",boxSizing:"border-box",maxWidth:"100%",height:f,marginTop:zd,marginBottom:zd,lineHeight:`${f-e.lineWidth*2}px`,background:e.multipleItemBg,border:`${e.lineWidth}px ${e.lineType} ${e.multipleItemBorderColor}`,borderRadius:e.borderRadiusSM,cursor:"default",transition:`font-size ${e.motionDurationSlow}, line-height ${e.motionDurationSlow}, height ${e.motionDurationSlow}`,marginInlineEnd:zd*2,paddingInlineStart:e.paddingXS,paddingInlineEnd:e.paddingXS/2,[`${r}-disabled&`]:{color:e.multipleItemColorDisabled,borderColor:e.multipleItemBorderColorDisabled,cursor:"not-allowed"},"&-content":{display:"inline-block",marginInlineEnd:e.paddingXS/2,overflow:"hidden",whiteSpace:"pre",textOverflow:"ellipsis"},"&-remove":Object.assign(Object.assign({},LS()),{display:"inline-flex",alignItems:"center",color:e.colorIcon,fontWeight:"bold",fontSize:10,lineHeight:"inherit",cursor:"pointer",[`> ${a}`]:{verticalAlign:"-0.2em"},"&:hover":{color:e.colorIconHover}})},[`${c}-item + ${c}-item`]:{[`${r}-selection-search`]:{marginInlineStart:0}},[`${c}-item-suffix`]:{height:"100%"},[`${r}-selection-search`]:{display:"inline-flex",position:"relative",maxWidth:"100%",marginInlineStart:e.inputPaddingHorizontalBase-y,"\n          &-input,\n          &-mirror\n        ":{height:f,fontFamily:e.fontFamily,lineHeight:`${f}px`,transition:`all ${e.motionDurationSlow}`},"&-input":{width:"100%",minWidth:4.1},"&-mirror":{position:"absolute",top:0,insetInlineStart:0,insetInlineEnd:"auto",zIndex:999,whiteSpace:"pre",visibility:"hidden"}},[`${r}-selection-placeholder`]:{position:"absolute",top:"50%",insetInlineStart:e.inputPaddingHorizontalBase,insetInlineEnd:e.inputPaddingHorizontalBase,transform:"translateY(-50%)",transition:`all ${e.motionDurationSlow}`}}}}const Y9=e=>{const{componentCls:t}=e,r=$r(e,{selectHeight:e.controlHeightSM,multipleSelectItemHeight:e.controlHeightXS,borderRadius:e.borderRadiusSM,borderRadiusSM:e.borderRadiusXS}),a=$r(e,{fontSize:e.fontSizeLG,selectHeight:e.controlHeightLG,multipleSelectItemHeight:e.multipleItemHeightLG,borderRadius:e.borderRadiusLG,borderRadiusSM:e.borderRadius}),[,c]=ok(e);return[m1(e),m1(r,"sm"),{[`${t}-multiple${t}-sm`]:{[`${t}-selection-placeholder`]:{insetInline:e.controlPaddingHorizontalSM-e.lineWidth},[`${t}-selection-search`]:{marginInlineStart:c}}},m1(a,"lg")]},J9=Y9;function g1(e,t){const{componentCls:r,inputPaddingHorizontalBase:a,borderRadius:c}=e,f=e.controlHeight-e.lineWidth*2,y=Math.ceil(e.fontSize*1.25),l=t?`${r}-${t}`:"";return{[`${r}-single${l}`]:{fontSize:e.fontSize,height:e.controlHeight,[`${r}-selector`]:Object.assign(Object.assign({},da(e,!0)),{display:"flex",borderRadius:c,[`${r}-selection-search`]:{position:"absolute",top:0,insetInlineStart:a,insetInlineEnd:a,bottom:0,"&-input":{width:"100%"}},[`
          ${r}-selection-item,
          ${r}-selection-placeholder
        `]:{padding:0,lineHeight:`${f}px`,transition:`all ${e.motionDurationSlow}, visibility 0s`,alignSelf:"center"},[`${r}-selection-placeholder`]:{transition:"none",pointerEvents:"none"},[["&:after",`${r}-selection-item:empty:after`,`${r}-selection-placeholder:empty:after`].join(",")]:{display:"inline-block",width:0,visibility:"hidden",content:'"\\a0"'}}),[`
        &${r}-show-arrow ${r}-selection-item,
        &${r}-show-arrow ${r}-selection-placeholder
      `]:{paddingInlineEnd:y},[`&${r}-open ${r}-selection-item`]:{color:e.colorTextPlaceholder},[`&:not(${r}-customize-input)`]:{[`${r}-selector`]:{width:"100%",height:"100%",padding:`0 ${a}px`,[`${r}-selection-search-input`]:{height:f},"&:after":{lineHeight:`${f}px`}}},[`&${r}-customize-input`]:{[`${r}-selector`]:{"&:after":{display:"none"},[`${r}-selection-search`]:{position:"static",width:"100%"},[`${r}-selection-placeholder`]:{position:"absolute",insetInlineStart:0,insetInlineEnd:0,padding:`0 ${a}px`,"&:after":{display:"none"}}}}}}}function Q9(e){const{componentCls:t}=e,r=e.controlPaddingHorizontalSM-e.lineWidth;return[g1(e),g1($r(e,{controlHeight:e.controlHeightSM,borderRadius:e.borderRadiusSM}),"sm"),{[`${t}-single${t}-sm`]:{[`&:not(${t}-customize-input)`]:{[`${t}-selection-search`]:{insetInlineStart:r,insetInlineEnd:r},[`${t}-selector`]:{padding:`0 ${r}px`},[`&${t}-show-arrow ${t}-selection-search`]:{insetInlineEnd:r+e.fontSize*1.5},[`
            &${t}-show-arrow ${t}-selection-item,
            &${t}-show-arrow ${t}-selection-placeholder
          `]:{paddingInlineEnd:e.fontSize*1.5}}}},g1($r(e,{controlHeight:e.singleItemHeightLG,fontSize:e.fontSizeLG,borderRadius:e.borderRadiusLG}),"lg")]}const e7=e=>{const{componentCls:t,selectorBg:r}=e;return{position:"relative",backgroundColor:r,border:`${e.lineWidth}px ${e.lineType} ${e.colorBorder}`,transition:`all ${e.motionDurationMid} ${e.motionEaseInOut}`,input:{cursor:"pointer"},[`${t}-show-search&`]:{cursor:"text",input:{cursor:"auto",color:"inherit",height:"100%"}},[`${t}-disabled&`]:{color:e.colorTextDisabled,background:e.colorBgContainerDisabled,cursor:"not-allowed",[`${t}-multiple&`]:{background:e.multipleSelectorBgDisabled},input:{cursor:"not-allowed"}}}},v1=function(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const{componentCls:a,borderHoverColor:c,antCls:f,borderActiveColor:y,outlineColor:l,controlOutlineWidth:w}=t,C=r?{[`${a}-selector`]:{borderColor:y}}:{};return{[e]:{[`&:not(${a}-disabled):not(${a}-customize-input):not(${f}-pagination-size-changer)`]:Object.assign(Object.assign({},C),{[`&:hover ${a}-selector`]:{borderColor:c},[`${a}-focused& ${a}-selector`]:{borderColor:y,boxShadow:`0 0 0 ${w}px ${l}`,outline:0}})}}},t7=e=>{const{componentCls:t}=e;return{[`${t}-selection-search-input`]:{margin:0,padding:0,background:"transparent",border:"none",outline:"none",appearance:"none",fontFamily:"inherit","&::-webkit-search-cancel-button":{display:"none","-webkit-appearance":"none"}}}},n7=e=>{const{antCls:t,componentCls:r,inputPaddingHorizontalBase:a,iconCls:c}=e;return{[r]:Object.assign(Object.assign({},da(e)),{position:"relative",display:"inline-block",cursor:"pointer",[`&:not(${r}-customize-input) ${r}-selector`]:Object.assign(Object.assign({},e7(e)),t7(e)),[`${r}-selection-item`]:Object.assign(Object.assign({flex:1,fontWeight:"normal",position:"relative",userSelect:"none"},Hb),{[`> ${t}-typography`]:{display:"inline"}}),[`${r}-selection-placeholder`]:Object.assign(Object.assign({},Hb),{flex:1,color:e.colorTextPlaceholder,pointerEvents:"none"}),[`${r}-arrow`]:Object.assign(Object.assign({},LS()),{position:"absolute",top:"50%",insetInlineStart:"auto",insetInlineEnd:a,height:e.fontSizeIcon,marginTop:-e.fontSizeIcon/2,color:e.colorTextQuaternary,fontSize:e.fontSizeIcon,lineHeight:1,textAlign:"center",pointerEvents:"none",display:"flex",alignItems:"center",[c]:{verticalAlign:"top",transition:`transform ${e.motionDurationSlow}`,"> svg":{verticalAlign:"top"},[`&:not(${r}-suffix)`]:{pointerEvents:"auto"}},[`${r}-disabled &`]:{cursor:"not-allowed"},"> *:not(:last-child)":{marginInlineEnd:8}}),[`${r}-clear`]:{position:"absolute",top:"50%",insetInlineStart:"auto",insetInlineEnd:a,zIndex:1,display:"inline-block",width:e.fontSizeIcon,height:e.fontSizeIcon,marginTop:-e.fontSizeIcon/2,color:e.colorTextQuaternary,fontSize:e.fontSizeIcon,fontStyle:"normal",lineHeight:1,textAlign:"center",textTransform:"none",background:e.clearBg,cursor:"pointer",opacity:0,transition:`color ${e.motionDurationMid} ease, opacity ${e.motionDurationSlow} ease`,textRendering:"auto","&:before":{display:"block"},"&:hover":{color:e.colorTextTertiary}},"&:hover":{[`${r}-clear`]:{opacity:1}}}),[`${r}-has-feedback`]:{[`${r}-clear`]:{insetInlineEnd:a+e.fontSize+e.paddingXS}}}},r7=e=>{const{componentCls:t}=e;return[{[t]:{[`&-borderless ${t}-selector`]:{backgroundColor:"transparent !important",borderColor:"transparent !important",boxShadow:"none !important"},[`&${t}-in-form-item`]:{width:"100%"}}},n7(e),Q9(e),J9(e),K9(e),{[`${t}-rtl`]:{direction:"rtl"}},v1(t,$r(e,{borderHoverColor:e.colorPrimaryHover,borderActiveColor:e.colorPrimary,outlineColor:e.controlOutline})),v1(`${t}-status-error`,$r(e,{borderHoverColor:e.colorErrorHover,borderActiveColor:e.colorError,outlineColor:e.colorErrorOutline}),!0),v1(`${t}-status-warning`,$r(e,{borderHoverColor:e.colorWarningHover,borderActiveColor:e.colorWarning,outlineColor:e.colorWarningOutline}),!0),VS(e,{borderElCls:`${t}-selector`,focusElCls:`${t}-focused`})]},i7=_o("Select",(e,t)=>{let{rootPrefixCls:r}=t;const a=$r(e,{rootPrefixCls:r,inputPaddingHorizontalBase:e.paddingSM-1,multipleSelectItemHeight:e.multipleItemHeight,selectHeight:e.controlHeight});return[r7(a)]},e=>{const{fontSize:t,lineHeight:r,controlHeight:a,controlPaddingHorizontal:c,zIndexPopupBase:f,colorText:y,fontWeightStrong:l,controlItemBgActive:w,controlItemBgHover:C,colorBgContainer:A,colorFillSecondary:M,controlHeightLG:k,controlHeightSM:N,colorBgContainerDisabled:D,colorTextDisabled:U}=e;return{zIndexPopup:f+50,optionSelectedColor:y,optionSelectedFontWeight:l,optionSelectedBg:w,optionActiveBg:C,optionPadding:`${(a-t*r)/2}px ${c}px`,optionFontSize:t,optionLineHeight:r,optionHeight:a,selectorBg:A,clearBg:A,singleItemHeightLG:k,multipleItemBg:M,multipleItemBorderColor:"transparent",multipleItemHeight:N,multipleItemHeightLG:a,multipleSelectorBgDisabled:D,multipleItemColorDisabled:U,multipleItemBorderColorDisabled:"transparent"}}),o7=e=>{const r={overflow:{adjustX:!0,adjustY:!0,shiftY:!0},htmlRegion:e==="scroll"?"scroll":"visible",dynamicInset:!0};return{bottomLeft:Object.assign(Object.assign({},r),{points:["tl","bl"],offset:[0,4]}),bottomRight:Object.assign(Object.assign({},r),{points:["tr","br"],offset:[0,4]}),topLeft:Object.assign(Object.assign({},r),{points:["bl","tl"],offset:[0,-4]}),topRight:Object.assign(Object.assign({},r),{points:["br","tr"],offset:[0,-4]})}};function a7(e,t){return e||o7(t)}var s7={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"};const l7=s7;var c7=function(t,r){return T.createElement(Xi,Cn({},t,{ref:r,icon:l7}))};const ak=T.forwardRef(c7);var u7={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"}}]},name:"down",theme:"outlined"};const d7=u7;var h7=function(t,r){return T.createElement(Xi,Cn({},t,{ref:r,icon:d7}))};const f7=T.forwardRef(h7);var p7={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0011.6 0l43.6-43.5a8.2 8.2 0 000-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z"}}]},name:"search",theme:"outlined"};const m7=p7;var g7=function(t,r){return T.createElement(Xi,Cn({},t,{ref:r,icon:m7}))};const sk=T.forwardRef(g7);function v7(e){let{suffixIcon:t,clearIcon:r,menuItemSelectedIcon:a,removeIcon:c,loading:f,multiple:y,hasFeedback:l,prefixCls:w,showSuffixIcon:C,feedbackIcon:A,showArrow:M,componentName:k}=e;const N=r??T.createElement(w0,null),D=j=>t===null&&!l&&!M?null:T.createElement(T.Fragment,null,C!==!1&&j,l&&A);let U=null;if(t!==void 0)U=D(t);else if(f)U=D(T.createElement(FS,{spin:!0}));else{const j=`${w}-suffix`;U=V=>{let{open:X,showSearch:te}=V;return D(X&&te?T.createElement(sk,{className:j}):T.createElement(f7,{className:j}))}}let q=null;a!==void 0?q=a:y?q=T.createElement(ak,null):q=null;let F=null;return c!==void 0?F=c:F=T.createElement(nz,null),{clearIcon:N,suffixIcon:U,itemIcon:q,removeIcon:F}}function y7(e,t){return t!==void 0?t:e!==null}var _7=globalThis&&globalThis.__rest||function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(r[a[c]]=e[a[c]]);return r};const lk="SECRET_COMBOBOX_MODE_DO_NOT_USE",x7=(e,t)=>{var r,a,{prefixCls:c,bordered:f=!0,className:y,rootClassName:l,getPopupContainer:w,popupClassName:C,dropdownClassName:A,listHeight:M=256,placement:k,listItemHeight:N=24,size:D,disabled:U,notFoundContent:q,status:F,builtinPlacements:j,dropdownMatchSelectWidth:V,popupMatchSelectWidth:X,direction:te,style:re,allowClear:Q}=e,ne=_7(e,["prefixCls","bordered","className","rootClassName","getPopupContainer","popupClassName","dropdownClassName","listHeight","placement","listItemHeight","size","disabled","notFoundContent","status","builtinPlacements","dropdownMatchSelectWidth","popupMatchSelectWidth","direction","style","allowClear"]);const{getPopupContainer:ee,getPrefixCls:me,renderEmpty:ce,direction:ie,virtual:fe,popupMatchSelectWidth:Te,popupOverflow:$e,select:Fe}=T.useContext(cr),Ne=me("select",c),pe=me(),He=te??ie,{compactSize:Be,compactItemClassnames:Ge}=C0(Ne,He),[Qe,gt]=i7(Ne),St=T.useMemo(()=>{const{mode:Nn}=ne;if(Nn!=="combobox")return Nn===lk?"combobox":Nn},[ne.mode]),xt=St==="multiple"||St==="tags",Nt=y7(ne.suffixIcon,ne.showArrow),jt=(r=X??V)!==null&&r!==void 0?r:Te,{status:bt,hasFeedback:ut,isFormItemInput:Tt,feedbackIcon:ft}=T.useContext(yc),yt=YS(bt,F);let ct;q!==void 0?ct=q:St==="combobox"?ct=null:ct=(ce==null?void 0:ce("Select"))||T.createElement(ik,{componentName:"Select"});const{suffixIcon:It,itemIcon:Ct,removeIcon:Qt,clearIcon:Vt}=v7(Object.assign(Object.assign({},ne),{multiple:xt,hasFeedback:ut,feedbackIcon:ft,showSuffixIcon:Nt,prefixCls:Ne,showArrow:ne.showArrow,componentName:"Select"})),Bt=Q===!0?{clearIcon:Vt}:Q,ot=Sc(ne,["suffixIcon","itemIcon"]),rt=$t(C||A,{[`${Ne}-dropdown-${He}`]:He==="rtl"},l,gt),Lt=bl(Nn=>{var zn;return(zn=D??Be)!==null&&zn!==void 0?zn:Nn}),Mt=T.useContext(Ph),sn=U??Mt,An=$t({[`${Ne}-lg`]:Lt==="large",[`${Ne}-sm`]:Lt==="small",[`${Ne}-rtl`]:He==="rtl",[`${Ne}-borderless`]:!f,[`${Ne}-in-form-item`]:Tt},ch(Ne,yt,ut),Ge,Fe==null?void 0:Fe.className,y,l,gt),Mn=T.useMemo(()=>k!==void 0?k:He==="rtl"?"bottomRight":"bottomLeft",[k,He]),on=a7(j,$e),[Vn]=Dz("SelectLike",(a=ne.dropdownStyle)===null||a===void 0?void 0:a.zIndex);return Qe(T.createElement(KS,Object.assign({ref:t,virtual:fe,showSearch:Fe==null?void 0:Fe.showSearch},ot,{style:Object.assign(Object.assign({},Fe==null?void 0:Fe.style),re),dropdownMatchSelectWidth:jt,builtinPlacements:on,transitionName:uz(pe,"slide-up",ne.transitionName),listHeight:M,listItemHeight:N,mode:St,prefixCls:Ne,placement:Mn,direction:He,suffixIcon:It,menuItemSelectedIcon:Ct,removeIcon:Qt,allowClear:Bt,notFoundContent:ct,className:An,getPopupContainer:w||ee,dropdownClassName:rt,disabled:sn,dropdownStyle:Object.assign(Object.assign({},ne==null?void 0:ne.dropdownStyle),{zIndex:Vn})})))},Rh=T.forwardRef(x7),b7=nV(Rh);Rh.SECRET_COMBOBOX_MODE_DO_NOT_USE=lk;Rh.Option=XS;Rh.OptGroup=ZS;Rh._InternalPanelDoNotUseOrYouWillBeFired=b7;const I0=Rh,Tu=["xxl","xl","lg","md","sm","xs"],w7=e=>({xs:`(max-width: ${e.screenXSMax}px)`,sm:`(min-width: ${e.screenSM}px)`,md:`(min-width: ${e.screenMD}px)`,lg:`(min-width: ${e.screenLG}px)`,xl:`(min-width: ${e.screenXL}px)`,xxl:`(min-width: ${e.screenXXL}px)`}),S7=e=>{const t=e,r=[].concat(Tu).reverse();return r.forEach((a,c)=>{const f=a.toUpperCase(),y=`screen${f}Min`,l=`screen${f}`;if(!(t[y]<=t[l]))throw new Error(`${y}<=${l} fails : !(${t[y]}<=${t[l]})`);if(c<r.length-1){const w=`screen${f}Max`;if(!(t[l]<=t[w]))throw new Error(`${l}<=${w} fails : !(${t[l]}<=${t[w]})`);const A=`screen${r[c+1].toUpperCase()}Min`;if(!(t[w]<=t[A]))throw new Error(`${w}<=${A} fails : !(${t[w]}<=${t[A]})`)}}),e};function ck(){const[,e]=vs(),t=w7(S7(e));return st.useMemo(()=>{const r=new Map;let a=-1,c={};return{matchHandlers:{},dispatch(f){return c=f,r.forEach(y=>y(c)),r.size>=1},subscribe(f){return r.size||this.register(),a+=1,r.set(a,f),f(c),a},unsubscribe(f){r.delete(f),r.size||this.unregister()},unregister(){Object.keys(t).forEach(f=>{const y=t[f],l=this.matchHandlers[y];l==null||l.mql.removeListener(l==null?void 0:l.listener)}),r.clear()},register(){Object.keys(t).forEach(f=>{const y=t[f],l=C=>{let{matches:A}=C;this.dispatch(Object.assign(Object.assign({},c),{[f]:A}))},w=window.matchMedia(y);w.addListener(l),this.matchHandlers[y]={mql:w,listener:l},l(w)})},responsiveMap:t}},[e])}function E7(){const[,e]=T.useReducer(t=>t+1,0);return e}function uk(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;const t=T.useRef({}),r=E7(),a=ck();return Lr(()=>{const c=a.subscribe(f=>{t.current=f,e&&r()});return()=>a.unsubscribe(c)},[]),t.current}function dk(e){var t=e.children,r=e.prefixCls,a=e.id,c=e.overlayInnerStyle,f=e.className,y=e.style;return T.createElement("div",{className:$t("".concat(r,"-content"),f),style:y},T.createElement("div",{className:"".concat(r,"-inner"),id:a,role:"tooltip",style:c},typeof t=="function"?t():t))}var kd={shiftX:64,adjustY:1},Ld={adjustX:1,shiftY:!0},Ma=[0,0],C7={left:{points:["cr","cl"],overflow:Ld,offset:[-4,0],targetOffset:Ma},right:{points:["cl","cr"],overflow:Ld,offset:[4,0],targetOffset:Ma},top:{points:["bc","tc"],overflow:kd,offset:[0,-4],targetOffset:Ma},bottom:{points:["tc","bc"],overflow:kd,offset:[0,4],targetOffset:Ma},topLeft:{points:["bl","tl"],overflow:kd,offset:[0,-4],targetOffset:Ma},leftTop:{points:["tr","tl"],overflow:Ld,offset:[-4,0],targetOffset:Ma},topRight:{points:["br","tr"],overflow:kd,offset:[0,-4],targetOffset:Ma},rightTop:{points:["tl","tr"],overflow:Ld,offset:[4,0],targetOffset:Ma},bottomRight:{points:["tr","br"],overflow:kd,offset:[0,4],targetOffset:Ma},rightBottom:{points:["bl","br"],overflow:Ld,offset:[4,0],targetOffset:Ma},bottomLeft:{points:["tl","bl"],overflow:kd,offset:[0,4],targetOffset:Ma},leftBottom:{points:["br","bl"],overflow:Ld,offset:[-4,0],targetOffset:Ma}},T7=["overlayClassName","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle","prefixCls","children","onVisibleChange","afterVisibleChange","transitionName","animation","motion","placement","align","destroyTooltipOnHide","defaultVisible","getTooltipContainer","overlayInnerStyle","arrowContent","overlay","id","showArrow"],I7=function(t,r){var a=t.overlayClassName,c=t.trigger,f=c===void 0?["hover"]:c,y=t.mouseEnterDelay,l=y===void 0?0:y,w=t.mouseLeaveDelay,C=w===void 0?.1:w,A=t.overlayStyle,M=t.prefixCls,k=M===void 0?"rc-tooltip":M,N=t.children,D=t.onVisibleChange,U=t.afterVisibleChange,q=t.transitionName,F=t.animation,j=t.motion,V=t.placement,X=V===void 0?"right":V,te=t.align,re=te===void 0?{}:te,Q=t.destroyTooltipOnHide,ne=Q===void 0?!1:Q,ee=t.defaultVisible,me=t.getTooltipContainer,ce=t.overlayInnerStyle;t.arrowContent;var ie=t.overlay,fe=t.id,Te=t.showArrow,$e=Te===void 0?!0:Te,Fe=Vr(t,T7),Ne=T.useRef(null);T.useImperativeHandle(r,function(){return Ne.current});var pe=lt({},Fe);"visible"in t&&(pe.popupVisible=t.visible);var He=function(){return T.createElement(dk,{key:"content",prefixCls:k,id:fe,overlayInnerStyle:ce},ie)};return T.createElement(qz,Cn({popupClassName:a,prefixCls:k,popup:He,action:f,builtinPlacements:C7,popupPlacement:X,ref:Ne,popupAlign:re,getPopupContainer:me,onPopupVisibleChange:D,afterPopupVisibleChange:U,popupTransitionName:q,popupAnimation:F,popupMotion:j,defaultPopupVisible:ee,autoDestroy:ne,mouseLeaveDelay:C,popupStyle:A,mouseEnterDelay:l,arrow:$e},pe),N)};const M7=T.forwardRef(I7),hk=8;function fk(e){const t=hk,{contentRadius:r,limitVerticalRadius:a}=e,c=r>12?r+2:12;return{dropdownArrowOffset:c,dropdownArrowOffsetVertical:a?t:c}}function Cv(e,t){return e?t:{}}function P7(e,t){const{componentCls:r,sizePopupArrow:a,borderRadiusXS:c,borderRadiusOuter:f,boxShadowPopoverArrow:y}=e,{colorBg:l,contentRadius:w=e.borderRadiusLG,limitVerticalRadius:C,arrowDistance:A=0,arrowPlacement:M={left:!0,right:!0,top:!0,bottom:!0}}=t,{dropdownArrowOffsetVertical:k,dropdownArrowOffset:N}=fk({contentRadius:w,limitVerticalRadius:C});return{[r]:Object.assign(Object.assign(Object.assign(Object.assign({[`${r}-arrow`]:[Object.assign(Object.assign({position:"absolute",zIndex:1,display:"block"},xN(a,c,f,l,y)),{"&:before":{background:l}})]},Cv(!!M.top,{[[`&-placement-top ${r}-arrow`,`&-placement-topLeft ${r}-arrow`,`&-placement-topRight ${r}-arrow`].join(",")]:{bottom:A,transform:"translateY(100%) rotate(180deg)"},[`&-placement-top ${r}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(100%) rotate(180deg)"},[`&-placement-topLeft ${r}-arrow`]:{left:{_skip_check_:!0,value:N}},[`&-placement-topRight ${r}-arrow`]:{right:{_skip_check_:!0,value:N}}})),Cv(!!M.bottom,{[[`&-placement-bottom ${r}-arrow`,`&-placement-bottomLeft ${r}-arrow`,`&-placement-bottomRight ${r}-arrow`].join(",")]:{top:A,transform:"translateY(-100%)"},[`&-placement-bottom ${r}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(-100%)"},[`&-placement-bottomLeft ${r}-arrow`]:{left:{_skip_check_:!0,value:N}},[`&-placement-bottomRight ${r}-arrow`]:{right:{_skip_check_:!0,value:N}}})),Cv(!!M.left,{[[`&-placement-left ${r}-arrow`,`&-placement-leftTop ${r}-arrow`,`&-placement-leftBottom ${r}-arrow`].join(",")]:{right:{_skip_check_:!0,value:A},transform:"translateX(100%) rotate(90deg)"},[`&-placement-left ${r}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(100%) rotate(90deg)"},[`&-placement-leftTop ${r}-arrow`]:{top:k},[`&-placement-leftBottom ${r}-arrow`]:{bottom:k}})),Cv(!!M.right,{[[`&-placement-right ${r}-arrow`,`&-placement-rightTop ${r}-arrow`,`&-placement-rightBottom ${r}-arrow`].join(",")]:{left:{_skip_check_:!0,value:A},transform:"translateX(-100%) rotate(-90deg)"},[`&-placement-right ${r}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(-100%) rotate(-90deg)"},[`&-placement-rightTop ${r}-arrow`]:{top:k},[`&-placement-rightBottom ${r}-arrow`]:{bottom:k}}))}}function A7(e,t,r,a){if(a===!1)return{adjustX:!1,adjustY:!1};const c=a&&typeof a=="object"?a:{},f={};switch(e){case"top":case"bottom":f.shiftX=t.dropdownArrowOffset*2+r,f.shiftY=!0,f.adjustY=!0;break;case"left":case"right":f.shiftY=t.dropdownArrowOffsetVertical*2+r,f.shiftX=!0,f.adjustX=!0;break}const y=Object.assign(Object.assign({},f),c);return y.shiftX||(y.adjustX=!0),y.shiftY||(y.adjustY=!0),y}const $M={left:{points:["cr","cl"]},right:{points:["cl","cr"]},top:{points:["bc","tc"]},bottom:{points:["tc","bc"]},topLeft:{points:["bl","tl"]},leftTop:{points:["tr","tl"]},topRight:{points:["br","tr"]},rightTop:{points:["tl","tr"]},bottomRight:{points:["tr","br"]},rightBottom:{points:["bl","br"]},bottomLeft:{points:["tl","bl"]},leftBottom:{points:["br","bl"]}},R7={topLeft:{points:["bl","tc"]},leftTop:{points:["tr","cl"]},topRight:{points:["br","tc"]},rightTop:{points:["tl","cr"]},bottomRight:{points:["tr","bc"]},rightBottom:{points:["bl","cr"]},bottomLeft:{points:["tl","bc"]},leftBottom:{points:["br","cl"]}},O7=new Set(["topLeft","topRight","bottomLeft","bottomRight","leftTop","leftBottom","rightTop","rightBottom"]);function z7(e){const{arrowWidth:t,autoAdjustOverflow:r,arrowPointAtCenter:a,offset:c,borderRadius:f,visibleFirst:y}=e,l=t/2,w={};return Object.keys($M).forEach(C=>{const A=a&&R7[C]||$M[C],M=Object.assign(Object.assign({},A),{offset:[0,0],dynamicInset:!0});switch(w[C]=M,O7.has(C)&&(M.autoArrow=!1),C){case"top":case"topLeft":case"topRight":M.offset[1]=-l-c;break;case"bottom":case"bottomLeft":case"bottomRight":M.offset[1]=l+c;break;case"left":case"leftTop":case"leftBottom":M.offset[0]=-l-c;break;case"right":case"rightTop":case"rightBottom":M.offset[0]=l+c;break}const k=fk({contentRadius:f,limitVerticalRadius:!0});if(a)switch(C){case"topLeft":case"bottomLeft":M.offset[0]=-k.dropdownArrowOffset-l;break;case"topRight":case"bottomRight":M.offset[0]=k.dropdownArrowOffset+l;break;case"leftTop":case"rightTop":M.offset[1]=-k.dropdownArrowOffset-l;break;case"leftBottom":case"rightBottom":M.offset[1]=k.dropdownArrowOffset+l;break}M.overflow=A7(C,k,t,r),y&&(M.htmlRegion="visibleFirst")}),w}const k7=e=>{const{componentCls:t,tooltipMaxWidth:r,tooltipColor:a,tooltipBg:c,tooltipBorderRadius:f,zIndexPopup:y,controlHeight:l,boxShadowSecondary:w,paddingSM:C,paddingXS:A,tooltipRadiusOuter:M}=e;return[{[t]:Object.assign(Object.assign(Object.assign(Object.assign({},da(e)),{position:"absolute",zIndex:y,display:"block",width:"max-content",maxWidth:r,visibility:"visible",transformOrigin:"var(--arrow-x, 50%) var(--arrow-y, 50%)","&-hidden":{display:"none"},"--antd-arrow-background-color":c,[`${t}-inner`]:{minWidth:l,minHeight:l,padding:`${C/2}px ${A}px`,color:a,textAlign:"start",textDecoration:"none",wordWrap:"break-word",backgroundColor:c,borderRadius:f,boxShadow:w,boxSizing:"border-box"},[["&-placement-left","&-placement-leftTop","&-placement-leftBottom","&-placement-right","&-placement-rightTop","&-placement-rightBottom"].join(",")]:{[`${t}-inner`]:{borderRadius:Math.min(f,hk)}},[`${t}-content`]:{position:"relative"}}),MN(e,(k,N)=>{let{darkColor:D}=N;return{[`&${t}-${k}`]:{[`${t}-inner`]:{backgroundColor:D},[`${t}-arrow`]:{"--antd-arrow-background-color":D}}}})),{"&-rtl":{direction:"rtl"}})},P7($r(e,{borderRadiusOuter:M}),{colorBg:"var(--antd-arrow-background-color)",contentRadius:f,limitVerticalRadius:!0}),{[`${t}-pure`]:{position:"relative",maxWidth:"none",margin:e.sizePopupArrow}}]},pk=(e,t)=>_o("Tooltip",a=>{if(t===!1)return[];const{borderRadius:c,colorTextLightSolid:f,colorBgDefault:y,borderRadiusOuter:l}=a,w=$r(a,{tooltipMaxWidth:250,tooltipColor:f,tooltipBorderRadius:c,tooltipBg:y,tooltipRadiusOuter:l>4?4:l});return[k7(w),JU(a,"zoom-big-fast")]},a=>{let{zIndexPopupBase:c,colorBgSpotlight:f}=a;return{zIndexPopup:c+70,colorBgDefault:f}},{resetStyle:!1})(e),L7=My.map(e=>`${e}-inverse`);function D7(e){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0)?[].concat(mn(L7),mn(My)).includes(e):My.includes(e)}function mk(e,t){const r=D7(t),a=$t({[`${e}-${t}`]:t&&r}),c={},f={};return t&&!r&&(c.background=t,f["--antd-arrow-background-color"]=t),{className:a,overlayStyle:c,arrowStyle:f}}const $7=e=>{const{prefixCls:t,className:r,placement:a="top",title:c,color:f,overlayInnerStyle:y}=e,{getPrefixCls:l}=T.useContext(cr),w=l("tooltip",t),[C,A]=pk(w,!0),M=mk(w,f),k=M.arrowStyle,N=Object.assign(Object.assign({},y),M.overlayStyle),D=$t(A,w,`${w}-pure`,`${w}-placement-${a}`,r,M.className);return C(T.createElement("div",{className:D,style:k},T.createElement("div",{className:`${w}-arrow`}),T.createElement(dk,Object.assign({},e,{className:A,prefixCls:w,overlayInnerStyle:N}),c)))},F7=$7;var B7=globalThis&&globalThis.__rest||function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(r[a[c]]=e[a[c]]);return r};const gk=T.forwardRef((e,t)=>{var r,a;const{prefixCls:c,openClassName:f,getTooltipContainer:y,overlayClassName:l,color:w,overlayInnerStyle:C,children:A,afterOpenChange:M,afterVisibleChange:k,destroyTooltipOnHide:N,arrow:D=!0,title:U,overlay:q,builtinPlacements:F,arrowPointAtCenter:j=!1,autoAdjustOverflow:V=!0}=e,X=!!D,[,te]=vs(),{getPopupContainer:re,getPrefixCls:Q,direction:ne}=T.useContext(cr),ee=wO(),me=T.useRef(null),ce=()=>{var Mt;(Mt=me.current)===null||Mt===void 0||Mt.forceAlign()};T.useImperativeHandle(t,()=>({forceAlign:ce,forcePopupAlign:()=>{ee.deprecated(!1,"forcePopupAlign","forceAlign"),ce()}}));const[ie,fe]=ms(!1,{value:(r=e.open)!==null&&r!==void 0?r:e.visible,defaultValue:(a=e.defaultOpen)!==null&&a!==void 0?a:e.defaultVisible}),Te=!U&&!q&&U!==0,$e=Mt=>{var sn,An;fe(Te?!1:Mt),Te||((sn=e.onOpenChange)===null||sn===void 0||sn.call(e,Mt),(An=e.onVisibleChange)===null||An===void 0||An.call(e,Mt))},Fe=T.useMemo(()=>{var Mt,sn;let An=j;return typeof D=="object"&&(An=(sn=(Mt=D.pointAtCenter)!==null&&Mt!==void 0?Mt:D.arrowPointAtCenter)!==null&&sn!==void 0?sn:j),F||z7({arrowPointAtCenter:An,autoAdjustOverflow:V,arrowWidth:X?te.sizePopupArrow:0,borderRadius:te.borderRadius,offset:te.marginXXS,visibleFirst:!0})},[j,D,F,te]),Ne=T.useMemo(()=>U===0?U:q||U||"",[q,U]),pe=T.createElement(Qb,null,typeof Ne=="function"?Ne():Ne),{getPopupContainer:He,placement:Be="top",mouseEnterDelay:Ge=.1,mouseLeaveDelay:Qe=.1,overlayStyle:gt,rootClassName:St}=e,xt=B7(e,["getPopupContainer","placement","mouseEnterDelay","mouseLeaveDelay","overlayStyle","rootClassName"]),Nt=Q("tooltip",c),jt=Q(),bt=e["data-popover-inject"];let ut=ie;!("open"in e)&&!("visible"in e)&&Te&&(ut=!1);const Tt=sm(A)&&!rz(A)?A:T.createElement("span",null,A),ft=Tt.props,yt=!ft.className||typeof ft.className=="string"?$t(ft.className,f||`${Nt}-open`):ft.className,[ct,It]=pk(Nt,!bt),Ct=mk(Nt,w),Qt=Ct.arrowStyle,Vt=Object.assign(Object.assign({},C),Ct.overlayStyle),Bt=$t(l,{[`${Nt}-rtl`]:ne==="rtl"},Ct.className,St,It),[ot,rt]=Dz("Tooltip",xt.zIndex),Lt=T.createElement(M7,Object.assign({},xt,{zIndex:bt?xt.zIndex:ot,showArrow:X,placement:Be,mouseEnterDelay:Ge,mouseLeaveDelay:Qe,prefixCls:Nt,overlayClassName:Bt,overlayStyle:Object.assign(Object.assign({},Qt),gt),getTooltipContainer:He||y||re,ref:me,builtinPlacements:Fe,overlay:pe,visible:ut,onVisibleChange:$e,afterVisibleChange:M??k,overlayInnerStyle:Vt,arrowContent:T.createElement("span",{className:`${Nt}-arrow-content`}),motion:{motionName:uz(jt,"zoom-big-fast",e.transitionName),motionDeadline:1e3},destroyTooltipOnHide:!!N}),ut?vl(Tt,{className:yt}):Tt);return ct(T.createElement(Ez.Provider,{value:rt},Lt))});gk._InternalPanelDoNotUseOrYouWillBeFired=F7;const gw=gk;var N7={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M765.7 486.8L314.9 134.7A7.97 7.97 0 00302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 000-50.4z"}}]},name:"right",theme:"outlined"};const j7=N7;var U7=function(t,r){return T.createElement(Xi,Cn({},t,{ref:r,icon:j7}))};const FM=T.forwardRef(U7);var V7={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 000 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"}}]},name:"left",theme:"outlined"};const H7=V7;var G7=function(t,r){return T.createElement(Xi,Cn({},t,{ref:r,icon:H7}))};const BM=T.forwardRef(G7),vk=T.createContext(null),W7=vk.Provider,yk=T.createContext(null),q7=yk.Provider;var Z7=["prefixCls","className","style","checked","disabled","defaultChecked","type","title","onChange"],X7=T.forwardRef(function(e,t){var r,a=e.prefixCls,c=a===void 0?"rc-checkbox":a,f=e.className,y=e.style,l=e.checked,w=e.disabled,C=e.defaultChecked,A=C===void 0?!1:C,M=e.type,k=M===void 0?"checkbox":M,N=e.title,D=e.onChange,U=Vr(e,Z7),q=T.useRef(null),F=ms(A,{value:l}),j=Ut(F,2),V=j[0],X=j[1];T.useImperativeHandle(t,function(){return{focus:function(){var ne;(ne=q.current)===null||ne===void 0||ne.focus()},blur:function(){var ne;(ne=q.current)===null||ne===void 0||ne.blur()},input:q.current}});var te=$t(c,f,(r={},De(r,"".concat(c,"-checked"),V),De(r,"".concat(c,"-disabled"),w),r)),re=function(ne){w||("checked"in e||X(ne.target.checked),D==null||D({target:lt(lt({},e),{},{type:k,checked:ne.target.checked}),stopPropagation:function(){ne.stopPropagation()},preventDefault:function(){ne.preventDefault()},nativeEvent:ne.nativeEvent}))};return T.createElement("span",{className:te,title:N,style:y},T.createElement("input",Cn({},U,{className:"".concat(c,"-input"),ref:q,onChange:re,disabled:w,checked:!!V,type:k})),T.createElement("span",{className:"".concat(c,"-inner")}))});const K7=e=>{const{componentCls:t,antCls:r}=e,a=`${t}-group`;return{[a]:Object.assign(Object.assign({},da(e)),{display:"inline-block",fontSize:0,[`&${a}-rtl`]:{direction:"rtl"},[`${r}-badge ${r}-badge-count`]:{zIndex:1},[`> ${r}-badge:not(:first-child) > ${r}-button-wrapper`]:{borderInlineStart:"none"}})}},Y7=e=>{const{componentCls:t,wrapperMarginInlineEnd:r,colorPrimary:a,radioSize:c,motionDurationSlow:f,motionDurationMid:y,motionEaseInOutCirc:l,colorBgContainer:w,colorBorder:C,lineWidth:A,dotSize:M,colorBgContainerDisabled:k,colorTextDisabled:N,paddingXS:D,dotColorDisabled:U,lineType:q,radioDotDisabledSize:F,wireframe:j,colorWhite:V}=e,X=`${t}-inner`;return{[`${t}-wrapper`]:Object.assign(Object.assign({},da(e)),{display:"inline-flex",alignItems:"baseline",marginInlineStart:0,marginInlineEnd:r,cursor:"pointer",[`&${t}-wrapper-rtl`]:{direction:"rtl"},"&-disabled":{cursor:"not-allowed",color:e.colorTextDisabled},"&::after":{display:"inline-block",width:0,overflow:"hidden",content:'"\\a0"'},[`${t}-checked::after`]:{position:"absolute",insetBlockStart:0,insetInlineStart:0,width:"100%",height:"100%",border:`${A}px ${q} ${a}`,borderRadius:"50%",visibility:"hidden",content:'""'},[t]:Object.assign(Object.assign({},da(e)),{position:"relative",display:"inline-block",outline:"none",cursor:"pointer",alignSelf:"center",borderRadius:"50%"}),[`${t}-wrapper:hover &,
        &:hover ${X}`]:{borderColor:a},[`${t}-input:focus-visible + ${X}`]:Object.assign({},am(e)),[`${t}:hover::after, ${t}-wrapper:hover &::after`]:{visibility:"visible"},[`${t}-inner`]:{"&::after":{boxSizing:"border-box",position:"absolute",insetBlockStart:"50%",insetInlineStart:"50%",display:"block",width:c,height:c,marginBlockStart:c/-2,marginInlineStart:c/-2,backgroundColor:j?a:V,borderBlockStart:0,borderInlineStart:0,borderRadius:c,transform:"scale(0)",opacity:0,transition:`all ${f} ${l}`,content:'""'},boxSizing:"border-box",position:"relative",insetBlockStart:0,insetInlineStart:0,display:"block",width:c,height:c,backgroundColor:w,borderColor:C,borderStyle:"solid",borderWidth:A,borderRadius:"50%",transition:`all ${y}`},[`${t}-input`]:{position:"absolute",inset:0,zIndex:1,cursor:"pointer",opacity:0},[`${t}-checked`]:{[X]:{borderColor:a,backgroundColor:j?w:a,"&::after":{transform:`scale(${M/c})`,opacity:1,transition:`all ${f} ${l}`}}},[`${t}-disabled`]:{cursor:"not-allowed",[X]:{backgroundColor:k,borderColor:C,cursor:"not-allowed","&::after":{backgroundColor:U}},[`${t}-input`]:{cursor:"not-allowed"},[`${t}-disabled + span`]:{color:N,cursor:"not-allowed"},[`&${t}-checked`]:{[X]:{"&::after":{transform:`scale(${F/c})`}}}},[`span${t} + *`]:{paddingInlineStart:D,paddingInlineEnd:D}})}},J7=e=>{const{buttonColor:t,controlHeight:r,componentCls:a,lineWidth:c,lineType:f,colorBorder:y,motionDurationSlow:l,motionDurationMid:w,buttonPaddingInline:C,fontSize:A,buttonBg:M,fontSizeLG:k,controlHeightLG:N,controlHeightSM:D,paddingXS:U,borderRadius:q,borderRadiusSM:F,borderRadiusLG:j,buttonCheckedBg:V,buttonSolidCheckedColor:X,colorTextDisabled:te,colorBgContainerDisabled:re,buttonCheckedBgDisabled:Q,buttonCheckedColorDisabled:ne,colorPrimary:ee,colorPrimaryHover:me,colorPrimaryActive:ce,buttonSolidCheckedBg:ie,buttonSolidCheckedHoverBg:fe,buttonSolidCheckedActiveBg:Te}=e;return{[`${a}-button-wrapper`]:{position:"relative",display:"inline-block",height:r,margin:0,paddingInline:C,paddingBlock:0,color:t,fontSize:A,lineHeight:`${r-c*2}px`,background:M,border:`${c}px ${f} ${y}`,borderBlockStartWidth:c+.02,borderInlineStartWidth:0,borderInlineEndWidth:c,cursor:"pointer",transition:[`color ${w}`,`background ${w}`,`box-shadow ${w}`].join(","),a:{color:t},[`> ${a}-button`]:{position:"absolute",insetBlockStart:0,insetInlineStart:0,zIndex:-1,width:"100%",height:"100%"},"&:not(:first-child)":{"&::before":{position:"absolute",insetBlockStart:-c,insetInlineStart:-c,display:"block",boxSizing:"content-box",width:1,height:"100%",paddingBlock:c,paddingInline:0,backgroundColor:y,transition:`background-color ${l}`,content:'""'}},"&:first-child":{borderInlineStart:`${c}px ${f} ${y}`,borderStartStartRadius:q,borderEndStartRadius:q},"&:last-child":{borderStartEndRadius:q,borderEndEndRadius:q},"&:first-child:last-child":{borderRadius:q},[`${a}-group-large &`]:{height:N,fontSize:k,lineHeight:`${N-c*2}px`,"&:first-child":{borderStartStartRadius:j,borderEndStartRadius:j},"&:last-child":{borderStartEndRadius:j,borderEndEndRadius:j}},[`${a}-group-small &`]:{height:D,paddingInline:U-c,paddingBlock:0,lineHeight:`${D-c*2}px`,"&:first-child":{borderStartStartRadius:F,borderEndStartRadius:F},"&:last-child":{borderStartEndRadius:F,borderEndEndRadius:F}},"&:hover":{position:"relative",color:ee},"&:has(:focus-visible)":Object.assign({},am(e)),[`${a}-inner, input[type='checkbox'], input[type='radio']`]:{width:0,height:0,opacity:0,pointerEvents:"none"},[`&-checked:not(${a}-button-wrapper-disabled)`]:{zIndex:1,color:ee,background:V,borderColor:ee,"&::before":{backgroundColor:ee},"&:first-child":{borderColor:ee},"&:hover":{color:me,borderColor:me,"&::before":{backgroundColor:me}},"&:active":{color:ce,borderColor:ce,"&::before":{backgroundColor:ce}}},[`${a}-group-solid &-checked:not(${a}-button-wrapper-disabled)`]:{color:X,background:ie,borderColor:ie,"&:hover":{color:X,background:fe,borderColor:fe},"&:active":{color:X,background:Te,borderColor:Te}},"&-disabled":{color:te,backgroundColor:re,borderColor:y,cursor:"not-allowed","&:first-child, &:hover":{color:te,backgroundColor:re,borderColor:y}},[`&-disabled${a}-button-wrapper-checked`]:{color:ne,backgroundColor:Q,borderColor:y,boxShadow:"none"}}}},NM=e=>e-4*2,_k=_o("Radio",e=>{const{controlOutline:t,controlOutlineWidth:r,radioSize:a}=e,c=`0 0 0 ${r}px ${t}`,f=c,y=NM(a),l=$r(e,{radioDotDisabledSize:y,radioFocusShadow:c,radioButtonFocusShadow:f});return[K7(l),Y7(l),J7(l)]},e=>{const{wireframe:t,padding:r,marginXS:a,lineWidth:c,fontSizeLG:f,colorText:y,colorBgContainer:l,colorTextDisabled:w,controlItemBgActiveDisabled:C,colorTextLightSolid:A,colorPrimary:M,colorPrimaryHover:k,colorPrimaryActive:N}=e,D=4,U=f,q=t?NM(U):U-(D+c)*2;return{radioSize:U,dotSize:q,dotColorDisabled:w,buttonSolidCheckedColor:A,buttonSolidCheckedBg:M,buttonSolidCheckedHoverBg:k,buttonSolidCheckedActiveBg:N,buttonBg:l,buttonCheckedBg:l,buttonColor:y,buttonCheckedBgDisabled:C,buttonCheckedColorDisabled:w,buttonPaddingInline:r-c,wrapperMarginInlineEnd:a}});var Q7=globalThis&&globalThis.__rest||function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(r[a[c]]=e[a[c]]);return r};const eH=(e,t)=>{var r,a;const c=T.useContext(vk),f=T.useContext(yk),{getPrefixCls:y,direction:l,radio:w}=T.useContext(cr),C=T.useRef(null),A=gs(t,C),{isFormItemInput:M}=T.useContext(yc),k=ce=>{var ie,fe;(ie=e.onChange)===null||ie===void 0||ie.call(e,ce),(fe=c==null?void 0:c.onChange)===null||fe===void 0||fe.call(c,ce)},{prefixCls:N,className:D,rootClassName:U,children:q,style:F}=e,j=Q7(e,["prefixCls","className","rootClassName","children","style"]),V=y("radio",N),X=((c==null?void 0:c.optionType)||f)==="button",te=X?`${V}-button`:V,[re,Q]=_k(V),ne=Object.assign({},j),ee=T.useContext(Ph);c&&(ne.name=c.name,ne.onChange=k,ne.checked=e.value===c.value,ne.disabled=(r=ne.disabled)!==null&&r!==void 0?r:c.disabled),ne.disabled=(a=ne.disabled)!==null&&a!==void 0?a:ee;const me=$t(`${te}-wrapper`,{[`${te}-wrapper-checked`]:ne.checked,[`${te}-wrapper-disabled`]:ne.disabled,[`${te}-wrapper-rtl`]:l==="rtl",[`${te}-wrapper-in-form-item`]:M},w==null?void 0:w.className,D,U,Q);return re(T.createElement(hz,{component:"Radio",disabled:ne.disabled},T.createElement("label",{className:me,style:Object.assign(Object.assign({},w==null?void 0:w.style),F),onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave},T.createElement(X7,Object.assign({},ne,{className:$t(ne.className,!X&&NS),type:"radio",prefixCls:te,ref:A})),q!==void 0?T.createElement("span",null,q):null)))},tH=T.forwardRef(eH),Dy=tH,nH=T.forwardRef((e,t)=>{const{getPrefixCls:r,direction:a}=T.useContext(cr),[c,f]=ms(e.defaultValue,{value:e.value}),y=ie=>{const fe=c,Te=ie.target.value;"value"in e||f(Te);const{onChange:$e}=e;$e&&Te!==fe&&$e(ie)},{prefixCls:l,className:w,rootClassName:C,options:A,buttonStyle:M="outline",disabled:k,children:N,size:D,style:U,id:q,onMouseEnter:F,onMouseLeave:j,onFocus:V,onBlur:X}=e,te=r("radio",l),re=`${te}-group`,[Q,ne]=_k(te);let ee=N;A&&A.length>0&&(ee=A.map(ie=>typeof ie=="string"||typeof ie=="number"?T.createElement(Dy,{key:ie.toString(),prefixCls:te,disabled:k,value:ie,checked:c===ie},ie):T.createElement(Dy,{key:`radio-group-value-options-${ie.value}`,prefixCls:te,disabled:ie.disabled||k,value:ie.value,checked:c===ie.value,title:ie.title,style:ie.style,id:ie.id},ie.label)));const me=bl(D),ce=$t(re,`${re}-${M}`,{[`${re}-${me}`]:me,[`${re}-rtl`]:a==="rtl"},w,C,ne);return Q(T.createElement("div",Object.assign({},bh(e,{aria:!0,data:!0}),{className:ce,style:U,onMouseEnter:F,onMouseLeave:j,onFocus:V,onBlur:X,id:q,ref:t}),T.createElement(W7,{value:{onChange:y,value:c,disabled:e.disabled,name:e.name,optionType:e.optionType}},ee)))}),rH=T.memo(nH);var iH=globalThis&&globalThis.__rest||function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(r[a[c]]=e[a[c]]);return r};const oH=(e,t)=>{const{getPrefixCls:r}=T.useContext(cr),{prefixCls:a}=e,c=iH(e,["prefixCls"]),f=r("radio",a);return T.createElement(q7,{value:"button"},T.createElement(Dy,Object.assign({prefixCls:f},c,{type:"radio",ref:t})))},aH=T.forwardRef(oH),M0=Dy;M0.Button=aH;M0.Group=rH;M0.__ANT_RADIO=!0;const EY=M0,sH=e=>({"&::-moz-placeholder":{opacity:1},"&::placeholder":{color:e,userSelect:"none"},"&:placeholder-shown":{textOverflow:"ellipsis"}}),xk=e=>({borderColor:e.hoverBorderColor,backgroundColor:e.hoverBg}),vw=e=>({borderColor:e.activeBorderColor,boxShadow:e.activeShadow,outline:0,backgroundColor:e.activeBg}),bk=e=>({color:e.colorTextDisabled,backgroundColor:e.colorBgContainerDisabled,borderColor:e.colorBorder,boxShadow:"none",cursor:"not-allowed",opacity:1,"&:hover":Object.assign({},xk($r(e,{hoverBorderColor:e.colorBorder,hoverBg:e.colorBgContainerDisabled})))}),wk=e=>{const{paddingBlockLG:t,fontSizeLG:r,lineHeightLG:a,borderRadiusLG:c,paddingInlineLG:f}=e;return{padding:`${t}px ${f}px`,fontSize:r,lineHeight:a,borderRadius:c}},QS=e=>({padding:`${e.paddingBlockSM}px ${e.paddingInlineSM}px`,borderRadius:e.borderRadiusSM}),Sk=(e,t)=>{const{componentCls:r,colorError:a,colorWarning:c,errorActiveShadow:f,warningActiveShadow:y,colorErrorBorderHover:l,colorWarningBorderHover:w}=e;return{[`&-status-error:not(${t}-disabled):not(${t}-borderless)${t}`]:{borderColor:a,"&:hover":{borderColor:l},"&:focus, &:focus-within":Object.assign({},vw($r(e,{activeBorderColor:a,activeShadow:f}))),[`${r}-prefix, ${r}-suffix`]:{color:a}},[`&-status-warning:not(${t}-disabled):not(${t}-borderless)${t}`]:{borderColor:c,"&:hover":{borderColor:w},"&:focus, &:focus-within":Object.assign({},vw($r(e,{activeBorderColor:c,activeShadow:y}))),[`${r}-prefix, ${r}-suffix`]:{color:c}}}},eE=e=>Object.assign(Object.assign({position:"relative",display:"inline-block",width:"100%",minWidth:0,padding:`${e.paddingBlock}px ${e.paddingInline}px`,color:e.colorText,fontSize:e.fontSize,lineHeight:e.lineHeight,backgroundColor:e.colorBgContainer,backgroundImage:"none",borderWidth:e.lineWidth,borderStyle:e.lineType,borderColor:e.colorBorder,borderRadius:e.borderRadius,transition:`all ${e.motionDurationMid}`},sH(e.colorTextPlaceholder)),{"&:hover":Object.assign({},xk(e)),"&:focus, &:focus-within":Object.assign({},vw(e)),"&-disabled, &[disabled]":Object.assign({},bk(e)),"&-borderless":{"&, &:hover, &:focus, &-focused, &-disabled, &[disabled]":{backgroundColor:"transparent",border:"none",boxShadow:"none"}},"textarea&":{maxWidth:"100%",height:"auto",minHeight:e.controlHeight,lineHeight:e.lineHeight,verticalAlign:"bottom",transition:`all ${e.motionDurationSlow}, height 0s`,resize:"vertical"},"&-lg":Object.assign({},wk(e)),"&-sm":Object.assign({},QS(e)),"&-rtl":{direction:"rtl"},"&-textarea-rtl":{direction:"rtl"}}),lH=e=>{const{componentCls:t,antCls:r}=e;return{position:"relative",display:"table",width:"100%",borderCollapse:"separate",borderSpacing:0,"&[class*='col-']":{paddingInlineEnd:e.paddingXS,"&:last-child":{paddingInlineEnd:0}},[`&-lg ${t}, &-lg > ${t}-group-addon`]:Object.assign({},wk(e)),[`&-sm ${t}, &-sm > ${t}-group-addon`]:Object.assign({},QS(e)),[`&-lg ${r}-select-single ${r}-select-selector`]:{height:e.controlHeightLG},[`&-sm ${r}-select-single ${r}-select-selector`]:{height:e.controlHeightSM},[`> ${t}`]:{display:"table-cell","&:not(:first-child):not(:last-child)":{borderRadius:0}},[`${t}-group`]:{"&-addon, &-wrap":{display:"table-cell",width:1,whiteSpace:"nowrap",verticalAlign:"middle","&:not(:first-child):not(:last-child)":{borderRadius:0}},"&-wrap > *":{display:"block !important"},"&-addon":{position:"relative",padding:`0 ${e.paddingInline}px`,color:e.colorText,fontWeight:"normal",fontSize:e.fontSize,textAlign:"center",backgroundColor:e.addonBg,border:`${e.lineWidth}px ${e.lineType} ${e.colorBorder}`,borderRadius:e.borderRadius,transition:`all ${e.motionDurationSlow}`,lineHeight:1,[`${r}-select`]:{margin:`-${e.paddingBlock+1}px -${e.paddingInline}px`,[`&${r}-select-single:not(${r}-select-customize-input):not(${r}-pagination-size-changer)`]:{[`${r}-select-selector`]:{backgroundColor:"inherit",border:`${e.lineWidth}px ${e.lineType} transparent`,boxShadow:"none"}},"&-open, &-focused":{[`${r}-select-selector`]:{color:e.colorPrimary}}},[`${r}-cascader-picker`]:{margin:`-9px -${e.paddingInline}px`,backgroundColor:"transparent",[`${r}-cascader-input`]:{textAlign:"start",border:0,boxShadow:"none"}}},"&-addon:first-child":{borderInlineEnd:0},"&-addon:last-child":{borderInlineStart:0}},[`${t}`]:{width:"100%",marginBottom:0,textAlign:"inherit","&:focus":{zIndex:1,borderInlineEndWidth:1},"&:hover":{zIndex:1,borderInlineEndWidth:1,[`${t}-search-with-button &`]:{zIndex:0}}},[`> ${t}:first-child, ${t}-group-addon:first-child`]:{borderStartEndRadius:0,borderEndEndRadius:0,[`${r}-select ${r}-select-selector`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`> ${t}-affix-wrapper`]:{[`&:not(:first-child) ${t}`]:{borderStartStartRadius:0,borderEndStartRadius:0},[`&:not(:last-child) ${t}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`> ${t}:last-child, ${t}-group-addon:last-child`]:{borderStartStartRadius:0,borderEndStartRadius:0,[`${r}-select ${r}-select-selector`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`${t}-affix-wrapper`]:{"&:not(:last-child)":{borderStartEndRadius:0,borderEndEndRadius:0,[`${t}-search &`]:{borderStartStartRadius:e.borderRadius,borderEndStartRadius:e.borderRadius}},[`&:not(:first-child), ${t}-search &:not(:first-child)`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`&${t}-group-compact`]:Object.assign(Object.assign({display:"block"},bN()),{[`${t}-group-addon, ${t}-group-wrap, > ${t}`]:{"&:not(:first-child):not(:last-child)":{borderInlineEndWidth:e.lineWidth,"&:hover":{zIndex:1},"&:focus":{zIndex:1}}},"& > *":{display:"inline-block",float:"none",verticalAlign:"top",borderRadius:0},[`
        & > ${t}-affix-wrapper,
        & > ${t}-number-affix-wrapper,
        & > ${r}-picker-range
      `]:{display:"inline-flex"},"& > *:not(:last-child)":{marginInlineEnd:-e.lineWidth,borderInlineEndWidth:e.lineWidth},[`${t}`]:{float:"none"},[`& > ${r}-select > ${r}-select-selector,
      & > ${r}-select-auto-complete ${t},
      & > ${r}-cascader-picker ${t},
      & > ${t}-group-wrapper ${t}`]:{borderInlineEndWidth:e.lineWidth,borderRadius:0,"&:hover":{zIndex:1},"&:focus":{zIndex:1}},[`& > ${r}-select-focused`]:{zIndex:1},[`& > ${r}-select > ${r}-select-arrow`]:{zIndex:1},[`& > *:first-child,
      & > ${r}-select:first-child > ${r}-select-selector,
      & > ${r}-select-auto-complete:first-child ${t},
      & > ${r}-cascader-picker:first-child ${t}`]:{borderStartStartRadius:e.borderRadius,borderEndStartRadius:e.borderRadius},[`& > *:last-child,
      & > ${r}-select:last-child > ${r}-select-selector,
      & > ${r}-cascader-picker:last-child ${t},
      & > ${r}-cascader-picker-focused:last-child ${t}`]:{borderInlineEndWidth:e.lineWidth,borderStartEndRadius:e.borderRadius,borderEndEndRadius:e.borderRadius},[`& > ${r}-select-auto-complete ${t}`]:{verticalAlign:"top"},[`${t}-group-wrapper + ${t}-group-wrapper`]:{marginInlineStart:-e.lineWidth,[`${t}-affix-wrapper`]:{borderRadius:0}},[`${t}-group-wrapper:not(:last-child)`]:{[`&${t}-search > ${t}-group`]:{[`& > ${t}-group-addon > ${t}-search-button`]:{borderRadius:0},[`& > ${t}`]:{borderStartStartRadius:e.borderRadius,borderStartEndRadius:0,borderEndEndRadius:0,borderEndStartRadius:e.borderRadius}}}})}},cH=e=>{const{componentCls:t,controlHeightSM:r,lineWidth:a}=e,c=16,f=(r-a*2-c)/2;return{[t]:Object.assign(Object.assign(Object.assign(Object.assign({},da(e)),eE(e)),Sk(e,t)),{'&[type="color"]':{height:e.controlHeight,[`&${t}-lg`]:{height:e.controlHeightLG},[`&${t}-sm`]:{height:r,paddingTop:f,paddingBottom:f}},'&[type="search"]::-webkit-search-cancel-button, &[type="search"]::-webkit-search-decoration':{"-webkit-appearance":"none"}})}},uH=e=>{const{componentCls:t}=e;return{[`${t}-clear-icon`]:{margin:0,color:e.colorTextQuaternary,fontSize:e.fontSizeIcon,verticalAlign:-1,cursor:"pointer",transition:`color ${e.motionDurationSlow}`,"&:hover":{color:e.colorTextTertiary},"&:active":{color:e.colorText},"&-hidden":{visibility:"hidden"},"&-has-suffix":{margin:`0 ${e.inputAffixPadding}px`}}}},dH=e=>{const{componentCls:t,inputAffixPadding:r,colorTextDescription:a,motionDurationSlow:c,colorIcon:f,colorIconHover:y,iconCls:l}=e;return{[`${t}-affix-wrapper`]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},eE(e)),{display:"inline-flex",[`&:not(${t}-affix-wrapper-disabled):hover`]:{zIndex:1,[`${t}-search-with-button &`]:{zIndex:0}},"&-focused, &:focus":{zIndex:1},"&-disabled":{[`${t}[disabled]`]:{background:"transparent"}},[`> input${t}`]:{padding:0,fontSize:"inherit",border:"none",borderRadius:0,outline:"none","&::-ms-reveal":{display:"none"},"&:focus":{boxShadow:"none !important"}},"&::before":{display:"inline-block",width:0,visibility:"hidden",content:'"\\a0"'},[`${t}`]:{"&-prefix, &-suffix":{display:"flex",flex:"none",alignItems:"center","> *:not(:last-child)":{marginInlineEnd:e.paddingXS}},"&-show-count-suffix":{color:a},"&-show-count-has-suffix":{marginInlineEnd:e.paddingXXS},"&-prefix":{marginInlineEnd:r},"&-suffix":{marginInlineStart:r}}}),uH(e)),{[`${l}${t}-password-icon`]:{color:f,cursor:"pointer",transition:`all ${c}`,"&:hover":{color:y}}}),Sk(e,`${t}-affix-wrapper`))}},hH=e=>{const{componentCls:t,colorError:r,colorWarning:a,borderRadiusLG:c,borderRadiusSM:f}=e;return{[`${t}-group`]:Object.assign(Object.assign(Object.assign({},da(e)),lH(e)),{"&-rtl":{direction:"rtl"},"&-wrapper":{display:"inline-block",width:"100%",textAlign:"start",verticalAlign:"top","&-rtl":{direction:"rtl"},"&-lg":{[`${t}-group-addon`]:{borderRadius:c,fontSize:e.fontSizeLG}},"&-sm":{[`${t}-group-addon`]:{borderRadius:f}},"&-status-error":{[`${t}-group-addon`]:{color:r,borderColor:r}},"&-status-warning":{[`${t}-group-addon`]:{color:a,borderColor:a}},"&-disabled":{[`${t}-group-addon`]:Object.assign({},bk(e))},[`&:not(${t}-compact-first-item):not(${t}-compact-last-item)${t}-compact-item`]:{[`${t}, ${t}-group-addon`]:{borderRadius:0}},[`&:not(${t}-compact-last-item)${t}-compact-first-item`]:{[`${t}, ${t}-group-addon`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&:not(${t}-compact-first-item)${t}-compact-last-item`]:{[`${t}, ${t}-group-addon`]:{borderStartStartRadius:0,borderEndStartRadius:0}}}})}},fH=e=>{const{componentCls:t,antCls:r}=e,a=`${t}-search`;return{[a]:{[`${t}`]:{"&:hover, &:focus":{borderColor:e.colorPrimaryHover,[`+ ${t}-group-addon ${a}-button:not(${r}-btn-primary)`]:{borderInlineStartColor:e.colorPrimaryHover}}},[`${t}-affix-wrapper`]:{borderRadius:0},[`${t}-lg`]:{lineHeight:e.lineHeightLG-2e-4},[`> ${t}-group`]:{[`> ${t}-group-addon:last-child`]:{insetInlineStart:-1,padding:0,border:0,[`${a}-button`]:{paddingTop:0,paddingBottom:0,borderStartStartRadius:0,borderStartEndRadius:e.borderRadius,borderEndEndRadius:e.borderRadius,borderEndStartRadius:0,boxShadow:"none"},[`${a}-button:not(${r}-btn-primary)`]:{color:e.colorTextDescription,"&:hover":{color:e.colorPrimaryHover},"&:active":{color:e.colorPrimaryActive},[`&${r}-btn-loading::before`]:{insetInlineStart:0,insetInlineEnd:0,insetBlockStart:0,insetBlockEnd:0}}}},[`${a}-button`]:{height:e.controlHeight,"&:hover, &:focus":{zIndex:1}},[`&-large ${a}-button`]:{height:e.controlHeightLG},[`&-small ${a}-button`]:{height:e.controlHeightSM},"&-rtl":{direction:"rtl"},[`&${t}-compact-item`]:{[`&:not(${t}-compact-last-item)`]:{[`${t}-group-addon`]:{[`${t}-search-button`]:{marginInlineEnd:-e.lineWidth,borderRadius:0}}},[`&:not(${t}-compact-first-item)`]:{[`${t},${t}-affix-wrapper`]:{borderRadius:0}},[`> ${t}-group-addon ${t}-search-button,
        > ${t},
        ${t}-affix-wrapper`]:{"&:hover,&:focus,&:active":{zIndex:2}},[`> ${t}-affix-wrapper-focused`]:{zIndex:2}}}}},pH=e=>{const{componentCls:t,paddingLG:r}=e,a=`${t}-textarea`;return{[a]:{position:"relative","&-show-count":{[`> ${t}`]:{height:"100%"},[`${t}-data-count`]:{position:"absolute",bottom:-e.fontSize*e.lineHeight,insetInlineEnd:0,color:e.colorTextDescription,whiteSpace:"nowrap",pointerEvents:"none"}},"&-allow-clear":{[`> ${t}`]:{paddingInlineEnd:r}},[`&-affix-wrapper${a}-has-feedback`]:{[`${t}`]:{paddingInlineEnd:r}},[`&-affix-wrapper${t}-affix-wrapper`]:{padding:0,[`> textarea${t}`]:{fontSize:"inherit",border:"none",outline:"none","&:focus":{boxShadow:"none !important"}},[`${t}-suffix`]:{margin:0,"> *:not(:last-child)":{marginInline:0},[`${t}-clear-icon`]:{position:"absolute",insetInlineEnd:e.paddingXS,insetBlockStart:e.paddingXS},[`${a}-suffix`]:{position:"absolute",top:0,insetInlineEnd:e.paddingInline,bottom:0,zIndex:1,display:"inline-flex",alignItems:"center",margin:"auto",pointerEvents:"none"}}}}}},mH=e=>{const{componentCls:t}=e;return{[`${t}-out-of-range`]:{[`&, & input, & textarea, ${t}-show-count-suffix, ${t}-data-count`]:{color:e.colorError}}}};function Ek(e){return $r(e,{inputAffixPadding:e.paddingXXS})}const Ck=e=>{const{controlHeight:t,fontSize:r,lineHeight:a,lineWidth:c,controlHeightSM:f,controlHeightLG:y,fontSizeLG:l,lineHeightLG:w,paddingSM:C,controlPaddingHorizontalSM:A,controlPaddingHorizontal:M,colorFillAlter:k,colorPrimaryHover:N,colorPrimary:D,controlOutlineWidth:U,controlOutline:q,colorErrorOutline:F,colorWarningOutline:j}=e;return{paddingBlock:Math.max(Math.round((t-r*a)/2*10)/10-c,0),paddingBlockSM:Math.max(Math.round((f-r*a)/2*10)/10-c,0),paddingBlockLG:Math.ceil((y-l*w)/2*10)/10-c,paddingInline:C-c,paddingInlineSM:A-c,paddingInlineLG:M-c,addonBg:k,activeBorderColor:D,hoverBorderColor:N,activeShadow:`0 0 0 ${U}px ${q}`,errorActiveShadow:`0 0 0 ${U}px ${F}`,warningActiveShadow:`0 0 0 ${U}px ${j}`,hoverBg:"",activeBg:""}},tE=_o("Input",e=>{const t=$r(e,Ek(e));return[cH(t),pH(t),dH(t),hH(t),fH(t),mH(t),VS(t)]},Ck);function gH(e,t,r){var a=r||{},c=a.noTrailing,f=c===void 0?!1:c,y=a.noLeading,l=y===void 0?!1:y,w=a.debounceMode,C=w===void 0?void 0:w,A,M=!1,k=0;function N(){A&&clearTimeout(A)}function D(q){var F=q||{},j=F.upcomingOnly,V=j===void 0?!1:j;N(),M=!V}function U(){for(var q=arguments.length,F=new Array(q),j=0;j<q;j++)F[j]=arguments[j];var V=this,X=Date.now()-k;if(M)return;function te(){k=Date.now(),t.apply(V,F)}function re(){A=void 0}!l&&C&&!A&&te(),N(),C===void 0&&X>e?l?(k=Date.now(),f||(A=setTimeout(C?re:te,e))):te():f!==!0&&(A=setTimeout(C?re:te,C===void 0?e-X:e))}return U.cancel=D,U}function vH(e,t,r){var a=r||{},c=a.atBegin,f=c===void 0?!1:c;return gH(e,t,{debounceMode:f!==!1})}const yH=T.createContext({}),Tk=yH,_H=e=>{const{componentCls:t}=e;return{[t]:{display:"flex",flexFlow:"row wrap",minWidth:0,"&::before, &::after":{display:"flex"},"&-no-wrap":{flexWrap:"nowrap"},"&-start":{justifyContent:"flex-start"},"&-center":{justifyContent:"center"},"&-end":{justifyContent:"flex-end"},"&-space-between":{justifyContent:"space-between"},"&-space-around":{justifyContent:"space-around"},"&-space-evenly":{justifyContent:"space-evenly"},"&-top":{alignItems:"flex-start"},"&-middle":{alignItems:"center"},"&-bottom":{alignItems:"flex-end"}}}},xH=e=>{const{componentCls:t}=e;return{[t]:{position:"relative",maxWidth:"100%",minHeight:1}}},bH=(e,t)=>{const{componentCls:r,gridColumns:a}=e,c={};for(let f=a;f>=0;f--)f===0?(c[`${r}${t}-${f}`]={display:"none"},c[`${r}-push-${f}`]={insetInlineStart:"auto"},c[`${r}-pull-${f}`]={insetInlineEnd:"auto"},c[`${r}${t}-push-${f}`]={insetInlineStart:"auto"},c[`${r}${t}-pull-${f}`]={insetInlineEnd:"auto"},c[`${r}${t}-offset-${f}`]={marginInlineStart:0},c[`${r}${t}-order-${f}`]={order:0}):(c[`${r}${t}-${f}`]=[{"--ant-display":"block",display:"block"},{display:"var(--ant-display)",flex:`0 0 ${f/a*100}%`,maxWidth:`${f/a*100}%`}],c[`${r}${t}-push-${f}`]={insetInlineStart:`${f/a*100}%`},c[`${r}${t}-pull-${f}`]={insetInlineEnd:`${f/a*100}%`},c[`${r}${t}-offset-${f}`]={marginInlineStart:`${f/a*100}%`},c[`${r}${t}-order-${f}`]={order:f});return c},yw=(e,t)=>bH(e,t),wH=(e,t,r)=>({[`@media (min-width: ${t}px)`]:Object.assign({},yw(e,r))}),SH=_o("Grid",e=>[_H(e)]),EH=_o("Grid",e=>{const t=$r(e,{gridColumns:24}),r={"-sm":t.screenSMMin,"-md":t.screenMDMin,"-lg":t.screenLGMin,"-xl":t.screenXLMin,"-xxl":t.screenXXLMin};return[xH(t),yw(t,""),yw(t,"-xs"),Object.keys(r).map(a=>wH(t,r[a],a)).reduce((a,c)=>Object.assign(Object.assign({},a),c),{})]});var CH=globalThis&&globalThis.__rest||function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(r[a[c]]=e[a[c]]);return r};function TH(e){return typeof e=="number"?`${e} ${e} auto`:/^\d+(\.\d+)?(px|em|rem|%)$/.test(e)?`0 0 ${e}`:e}const IH=["xs","sm","md","lg","xl","xxl"],MH=T.forwardRef((e,t)=>{const{getPrefixCls:r,direction:a}=T.useContext(cr),{gutter:c,wrap:f}=T.useContext(Tk),{prefixCls:y,span:l,order:w,offset:C,push:A,pull:M,className:k,children:N,flex:D,style:U}=e,q=CH(e,["prefixCls","span","order","offset","push","pull","className","children","flex","style"]),F=r("col",y),[j,V]=EH(F);let X={};IH.forEach(Q=>{let ne={};const ee=e[Q];typeof ee=="number"?ne.span=ee:typeof ee=="object"&&(ne=ee||{}),delete q[Q],X=Object.assign(Object.assign({},X),{[`${F}-${Q}-${ne.span}`]:ne.span!==void 0,[`${F}-${Q}-order-${ne.order}`]:ne.order||ne.order===0,[`${F}-${Q}-offset-${ne.offset}`]:ne.offset||ne.offset===0,[`${F}-${Q}-push-${ne.push}`]:ne.push||ne.push===0,[`${F}-${Q}-pull-${ne.pull}`]:ne.pull||ne.pull===0,[`${F}-${Q}-flex-${ne.flex}`]:ne.flex||ne.flex==="auto",[`${F}-rtl`]:a==="rtl"})});const te=$t(F,{[`${F}-${l}`]:l!==void 0,[`${F}-order-${w}`]:w,[`${F}-offset-${C}`]:C,[`${F}-push-${A}`]:A,[`${F}-pull-${M}`]:M},k,X,V),re={};if(c&&c[0]>0){const Q=c[0]/2;re.paddingLeft=Q,re.paddingRight=Q}return D&&(re.flex=TH(D),f===!1&&!re.minWidth&&(re.minWidth=0)),j(T.createElement("div",Object.assign({},q,{style:Object.assign(Object.assign({},re),U),className:te,ref:t}),N))}),PH=MH;var AH=globalThis&&globalThis.__rest||function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(r[a[c]]=e[a[c]]);return r};function jM(e,t){const[r,a]=T.useState(typeof e=="string"?e:""),c=()=>{if(typeof e=="string"&&a(e),typeof e=="object")for(let f=0;f<Tu.length;f++){const y=Tu[f];if(!t[y])continue;const l=e[y];if(l!==void 0){a(l);return}}};return T.useEffect(()=>{c()},[JSON.stringify(e),t]),r}const RH=T.forwardRef((e,t)=>{const{prefixCls:r,justify:a,align:c,className:f,style:y,children:l,gutter:w=0,wrap:C}=e,A=AH(e,["prefixCls","justify","align","className","style","children","gutter","wrap"]),{getPrefixCls:M,direction:k}=T.useContext(cr),[N,D]=T.useState({xs:!0,sm:!0,md:!0,lg:!0,xl:!0,xxl:!0}),[U,q]=T.useState({xs:!1,sm:!1,md:!1,lg:!1,xl:!1,xxl:!1}),F=jM(c,U),j=jM(a,U),V=T.useRef(w),X=ck();T.useEffect(()=>{const Fe=X.subscribe(Ne=>{q(Ne);const pe=V.current||0;(!Array.isArray(pe)&&typeof pe=="object"||Array.isArray(pe)&&(typeof pe[0]=="object"||typeof pe[1]=="object"))&&D(Ne)});return()=>X.unsubscribe(Fe)},[]);const te=()=>{const Fe=[void 0,void 0];return(Array.isArray(w)?w:[w,void 0]).forEach((pe,He)=>{if(typeof pe=="object")for(let Be=0;Be<Tu.length;Be++){const Ge=Tu[Be];if(N[Ge]&&pe[Ge]!==void 0){Fe[He]=pe[Ge];break}}else Fe[He]=pe}),Fe},re=M("row",r),[Q,ne]=SH(re),ee=te(),me=$t(re,{[`${re}-no-wrap`]:C===!1,[`${re}-${j}`]:j,[`${re}-${F}`]:F,[`${re}-rtl`]:k==="rtl"},f,ne),ce={},ie=ee[0]!=null&&ee[0]>0?ee[0]/-2:void 0;ie&&(ce.marginLeft=ie,ce.marginRight=ie),[,ce.rowGap]=ee;const[fe,Te]=ee,$e=T.useMemo(()=>({gutter:[fe,Te],wrap:C}),[fe,Te,C]);return Q(T.createElement(Tk.Provider,{value:$e},T.createElement("div",Object.assign({},A,{className:me,style:Object.assign(Object.assign({},ce),y),ref:t}),l)))}),OH=RH;function Dd(e){return!!(e.addonBefore||e.addonAfter)}function y1(e){return!!(e.prefix||e.suffix||e.allowClear)}function $y(e,t,r,a){if(r){var c=t;if(t.type==="click"){var f=e.cloneNode(!0);c=Object.create(t,{target:{value:f},currentTarget:{value:f}}),f.value="",r(c);return}if(a!==void 0){c=Object.create(t,{target:{value:e},currentTarget:{value:e}}),e.type!=="file"&&(e.value=a),r(c);return}r(c)}}function zH(e,t){if(e){e.focus(t);var r=t||{},a=r.cursor;if(a){var c=e.value.length;switch(a){case"start":e.setSelectionRange(0,0);break;case"end":e.setSelectionRange(c,c);break;default:e.setSelectionRange(0,c)}}}}var Ik=function(t){var r,a,c=t.inputElement,f=t.prefixCls,y=t.prefix,l=t.suffix,w=t.addonBefore,C=t.addonAfter,A=t.className,M=t.style,k=t.disabled,N=t.readOnly,D=t.focused,U=t.triggerFocus,q=t.allowClear,F=t.value,j=t.handleReset,V=t.hidden,X=t.classes,te=t.classNames,re=t.dataAttrs,Q=t.styles,ne=t.components,ee=(ne==null?void 0:ne.affixWrapper)||"span",me=(ne==null?void 0:ne.groupWrapper)||"span",ce=(ne==null?void 0:ne.wrapper)||"span",ie=(ne==null?void 0:ne.groupAddon)||"span",fe=T.useRef(null),Te=function(Nt){var jt;(jt=fe.current)!==null&&jt!==void 0&&jt.contains(Nt.target)&&(U==null||U())},$e=function(){var Nt;if(!q)return null;var jt=!k&&!N&&F,bt="".concat(f,"-clear-icon"),ut=Kn(q)==="object"&&q!==null&&q!==void 0&&q.clearIcon?q.clearIcon:"✖";return st.createElement("span",{onClick:j,onMouseDown:function(ft){return ft.preventDefault()},className:$t(bt,(Nt={},De(Nt,"".concat(bt,"-hidden"),!jt),De(Nt,"".concat(bt,"-has-suffix"),!!l),Nt)),role:"button",tabIndex:-1},ut)},Fe=T.cloneElement(c,{value:F,hidden:V,className:$t((r=c.props)===null||r===void 0?void 0:r.className,!y1(t)&&!Dd(t)&&A)||null,style:lt(lt({},(a=c.props)===null||a===void 0?void 0:a.style),!y1(t)&&!Dd(t)?M:{})});if(y1(t)){var Ne,pe="".concat(f,"-affix-wrapper"),He=$t(pe,(Ne={},De(Ne,"".concat(pe,"-disabled"),k),De(Ne,"".concat(pe,"-focused"),D),De(Ne,"".concat(pe,"-readonly"),N),De(Ne,"".concat(pe,"-input-with-clear-btn"),l&&q&&F),Ne),!Dd(t)&&A,X==null?void 0:X.affixWrapper,te==null?void 0:te.affixWrapper),Be=(l||q)&&st.createElement("span",{className:$t("".concat(f,"-suffix"),te==null?void 0:te.suffix),style:Q==null?void 0:Q.suffix},$e(),l);Fe=st.createElement(ee,Cn({className:He,style:lt(lt({},Dd(t)?void 0:M),Q==null?void 0:Q.affixWrapper),hidden:!Dd(t)&&V,onClick:Te},re==null?void 0:re.affixWrapper,{ref:fe}),y&&st.createElement("span",{className:$t("".concat(f,"-prefix"),te==null?void 0:te.prefix),style:Q==null?void 0:Q.prefix},y),T.cloneElement(c,{value:F,hidden:null}),Be)}if(Dd(t)){var Ge="".concat(f,"-group"),Qe="".concat(Ge,"-addon"),gt=$t("".concat(f,"-wrapper"),Ge,X==null?void 0:X.wrapper),St=$t("".concat(f,"-group-wrapper"),A,X==null?void 0:X.group);return st.createElement(me,{className:St,style:M,hidden:V},st.createElement(ce,{className:gt},w&&st.createElement(ie,{className:Qe},w),T.cloneElement(Fe,{hidden:null}),C&&st.createElement(ie,{className:Qe},C)))}return Fe},kH=["show"];function Mk(e,t){return T.useMemo(function(){var r={};t&&(r.show=Kn(t)==="object"&&t.formatter?t.formatter:!!t),r=lt(lt({},r),e);var a=r,c=a.show,f=Vr(a,kH);return lt(lt({},f),{},{show:!!c,showFormatter:typeof c=="function"?c:void 0,strategy:f.strategy||function(y){return y.length}})},[e,t])}var LH=["autoComplete","onChange","onFocus","onBlur","onPressEnter","onKeyDown","prefixCls","disabled","htmlSize","className","maxLength","suffix","showCount","count","type","classes","classNames","styles","onCompositionStart","onCompositionEnd"],DH=T.forwardRef(function(e,t){var r=e.autoComplete,a=e.onChange,c=e.onFocus,f=e.onBlur,y=e.onPressEnter,l=e.onKeyDown,w=e.prefixCls,C=w===void 0?"rc-input":w,A=e.disabled,M=e.htmlSize,k=e.className,N=e.maxLength,D=e.suffix,U=e.showCount,q=e.count,F=e.type,j=F===void 0?"text":F,V=e.classes,X=e.classNames,te=e.styles,re=e.onCompositionStart,Q=e.onCompositionEnd,ne=Vr(e,LH),ee=T.useState(!1),me=Ut(ee,2),ce=me[0],ie=me[1],fe=st.useRef(!1),Te=T.useRef(null),$e=function(rt){Te.current&&zH(Te.current,rt)},Fe=ms(e.defaultValue,{value:e.value}),Ne=Ut(Fe,2),pe=Ne[0],He=Ne[1],Be=pe==null?"":String(pe),Ge=st.useState(null),Qe=Ut(Ge,2),gt=Qe[0],St=Qe[1],xt=Mk(q,U),Nt=xt.max||N,jt=xt.strategy(Be),bt=!!Nt&&jt>Nt;T.useImperativeHandle(t,function(){return{focus:$e,blur:function(){var rt;(rt=Te.current)===null||rt===void 0||rt.blur()},setSelectionRange:function(rt,Lt,Mt){var sn;(sn=Te.current)===null||sn===void 0||sn.setSelectionRange(rt,Lt,Mt)},select:function(){var rt;(rt=Te.current)===null||rt===void 0||rt.select()},input:Te.current}}),T.useEffect(function(){ie(function(ot){return ot&&A?!1:ot})},[A]);var ut=function(rt,Lt){var Mt=Lt;if(!fe.current&&xt.exceedFormatter&&xt.max&&xt.strategy(Lt)>xt.max&&(Mt=xt.exceedFormatter(Lt,{max:xt.max}),Lt!==Mt)){var sn,An;St([((sn=Te.current)===null||sn===void 0?void 0:sn.selectionStart)||0,((An=Te.current)===null||An===void 0?void 0:An.selectionEnd)||0])}He(Mt),Te.current&&$y(Te.current,rt,a,Mt)};st.useEffect(function(){if(gt){var ot;(ot=Te.current)===null||ot===void 0||ot.setSelectionRange.apply(ot,mn(gt))}},[gt]);var Tt=function(rt){ut(rt,rt.target.value)},ft=function(rt){fe.current=!1,ut(rt,rt.currentTarget.value),Q==null||Q(rt)},yt=function(rt){y&&rt.key==="Enter"&&y(rt),l==null||l(rt)},ct=function(rt){ie(!0),c==null||c(rt)},It=function(rt){ie(!1),f==null||f(rt)},Ct=function(rt){He(""),$e(),Te.current&&$y(Te.current,rt,a)},Qt=bt&&"".concat(C,"-out-of-range"),Vt=function(){var rt=Sc(e,["prefixCls","onPressEnter","addonBefore","addonAfter","prefix","suffix","allowClear","defaultValue","showCount","count","classes","htmlSize","styles","classNames"]);return st.createElement("input",Cn({autoComplete:r},rt,{onChange:Tt,onFocus:ct,onBlur:It,onKeyDown:yt,className:$t(C,De({},"".concat(C,"-disabled"),A),X==null?void 0:X.input),style:te==null?void 0:te.input,ref:Te,size:M,type:j,onCompositionStart:function(Mt){fe.current=!0,re==null||re(Mt)},onCompositionEnd:ft}))},Bt=function(){var rt=Number(Nt)>0;if(D||xt.show){var Lt=xt.showFormatter?xt.showFormatter({value:Be,count:jt,maxLength:Nt}):"".concat(jt).concat(rt?" / ".concat(Nt):"");return st.createElement(st.Fragment,null,xt.show&&st.createElement("span",{className:$t("".concat(C,"-show-count-suffix"),De({},"".concat(C,"-show-count-has-suffix"),!!D),X==null?void 0:X.count),style:lt({},te==null?void 0:te.count)},Lt),D)}return null};return st.createElement(Ik,Cn({},ne,{prefixCls:C,className:$t(k,Qt),inputElement:Vt(),handleReset:Ct,value:Be,focused:ce,triggerFocus:$e,suffix:Bt(),disabled:A,classes:V,classNames:X,styles:te}))});const $H=e=>{const{getPrefixCls:t,direction:r}=T.useContext(cr),{prefixCls:a,className:c}=e,f=t("input-group",a),y=t("input"),[l,w]=tE(y),C=$t(f,{[`${f}-lg`]:e.size==="large",[`${f}-sm`]:e.size==="small",[`${f}-compact`]:e.compact,[`${f}-rtl`]:r==="rtl"},w,c),A=T.useContext(yc),M=T.useMemo(()=>Object.assign(Object.assign({},A),{isFormItemInput:!1}),[A]);return l(T.createElement("span",{className:C,style:e.style,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,onFocus:e.onFocus,onBlur:e.onBlur},T.createElement(yc.Provider,{value:M},e.children)))},FH=$H;function Pk(e,t){const r=T.useRef([]),a=()=>{r.current.push(setTimeout(()=>{var c,f,y,l;!((c=e.current)===null||c===void 0)&&c.input&&((f=e.current)===null||f===void 0?void 0:f.input.getAttribute("type"))==="password"&&(!((y=e.current)===null||y===void 0)&&y.input.hasAttribute("value"))&&((l=e.current)===null||l===void 0||l.input.removeAttribute("value"))}))};return T.useEffect(()=>(t&&a(),()=>r.current.forEach(c=>{c&&clearTimeout(c)})),[]),a}function BH(e){return!!(e.prefix||e.suffix||e.allowClear)}var NH=globalThis&&globalThis.__rest||function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(r[a[c]]=e[a[c]]);return r};function jH(e,t){if(!e)return;e.focus(t);const{cursor:r}=t||{};if(r){const a=e.value.length;switch(r){case"start":e.setSelectionRange(0,0);break;case"end":e.setSelectionRange(a,a);break;default:e.setSelectionRange(0,a);break}}}const UH=T.forwardRef((e,t)=>{var r;const{prefixCls:a,bordered:c=!0,status:f,size:y,disabled:l,onBlur:w,onFocus:C,suffix:A,allowClear:M,addonAfter:k,addonBefore:N,className:D,style:U,styles:q,rootClassName:F,onChange:j,classNames:V}=e,X=NH(e,["prefixCls","bordered","status","size","disabled","onBlur","onFocus","suffix","allowClear","addonAfter","addonBefore","className","style","styles","rootClassName","onChange","classNames"]),{getPrefixCls:te,direction:re,input:Q}=st.useContext(cr),ne=te("input",a),ee=T.useRef(null),[me,ce]=tE(ne),{compactSize:ie,compactItemClassnames:fe}=C0(ne,re),Te=bl(bt=>{var ut;return(ut=y??ie)!==null&&ut!==void 0?ut:bt}),$e=st.useContext(Ph),Fe=l??$e,{status:Ne,hasFeedback:pe,feedbackIcon:He}=T.useContext(yc),Be=YS(Ne,f),Ge=BH(e)||!!pe;T.useRef(Ge);const Qe=Pk(ee,!0),gt=bt=>{Qe(),w==null||w(bt)},St=bt=>{Qe(),C==null||C(bt)},xt=bt=>{Qe(),j==null||j(bt)},Nt=(pe||A)&&st.createElement(st.Fragment,null,A,pe&&He);let jt;return typeof M=="object"&&(M!=null&&M.clearIcon)?jt=M:M&&(jt={clearIcon:st.createElement(w0,null)}),me(st.createElement(DH,Object.assign({ref:gs(t,ee),prefixCls:ne,autoComplete:Q==null?void 0:Q.autoComplete},X,{disabled:Fe,onBlur:gt,onFocus:St,style:Object.assign(Object.assign({},Q==null?void 0:Q.style),U),styles:Object.assign(Object.assign({},Q==null?void 0:Q.styles),q),suffix:Nt,allowClear:jt,className:$t(D,F,fe,Q==null?void 0:Q.className),onChange:xt,addonAfter:k&&st.createElement(Qb,null,st.createElement(hM,{override:!0,status:!0},k)),addonBefore:N&&st.createElement(Qb,null,st.createElement(hM,{override:!0,status:!0},N)),classNames:Object.assign(Object.assign(Object.assign({},V),Q==null?void 0:Q.classNames),{input:$t({[`${ne}-sm`]:Te==="small",[`${ne}-lg`]:Te==="large",[`${ne}-rtl`]:re==="rtl",[`${ne}-borderless`]:!c},!Ge&&ch(ne,Be),V==null?void 0:V.input,(r=Q==null?void 0:Q.classNames)===null||r===void 0?void 0:r.input,ce)}),classes:{affixWrapper:$t({[`${ne}-affix-wrapper-sm`]:Te==="small",[`${ne}-affix-wrapper-lg`]:Te==="large",[`${ne}-affix-wrapper-rtl`]:re==="rtl",[`${ne}-affix-wrapper-borderless`]:!c},ch(`${ne}-affix-wrapper`,Be,pe),ce),wrapper:$t({[`${ne}-group-rtl`]:re==="rtl"},ce),group:$t({[`${ne}-group-wrapper-sm`]:Te==="small",[`${ne}-group-wrapper-lg`]:Te==="large",[`${ne}-group-wrapper-rtl`]:re==="rtl",[`${ne}-group-wrapper-disabled`]:Fe},ch(`${ne}-group-wrapper`,Be,pe),ce)}})))}),nE=UH;var VH={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2Q889.47 375.11 816.7 305l-50.88 50.88C807.31 395.53 843.45 447.4 874.7 512 791.5 684.2 673.4 766 512 766q-72.67 0-133.87-22.38L323 798.75Q408 838 512 838q288.3 0 430.2-300.3a60.29 60.29 0 000-51.5zm-63.57-320.64L836 122.88a8 8 0 00-11.32 0L715.31 232.2Q624.86 186 512 186q-288.3 0-430.2 300.3a60.3 60.3 0 000 51.5q56.69 119.4 136.5 191.41L112.48 835a8 8 0 000 11.31L155.17 889a8 8 0 0011.31 0l712.15-712.12a8 8 0 000-11.32zM149.3 512C232.6 339.8 350.7 258 512 258c54.54 0 104.13 9.36 149.12 28.39l-70.3 70.3a176 176 0 00-238.13 238.13l-83.42 83.42C223.1 637.49 183.3 582.28 149.3 512zm246.7 0a112.11 112.11 0 01146.2-106.69L401.31 546.2A112 112 0 01396 512z"}},{tag:"path",attrs:{d:"M508 624c-3.46 0-6.87-.16-10.25-.47l-52.82 52.82a176.09 176.09 0 00227.42-227.42l-52.82 52.82c.31 3.38.47 6.79.47 10.25a111.94 111.94 0 01-112 112z"}}]},name:"eye-invisible",theme:"outlined"};const HH=VH;var GH=function(t,r){return T.createElement(Xi,Cn({},t,{ref:r,icon:HH}))};const WH=T.forwardRef(GH);var qH={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"}}]},name:"eye",theme:"outlined"};const ZH=qH;var XH=function(t,r){return T.createElement(Xi,Cn({},t,{ref:r,icon:ZH}))};const KH=T.forwardRef(XH);var YH=globalThis&&globalThis.__rest||function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(r[a[c]]=e[a[c]]);return r};const JH=e=>e?T.createElement(KH,null):T.createElement(WH,null),QH={click:"onClick",hover:"onMouseOver"},eG=T.forwardRef((e,t)=>{const{visibilityToggle:r=!0}=e,a=typeof r=="object"&&r.visible!==void 0,[c,f]=T.useState(()=>a?r.visible:!1),y=T.useRef(null);T.useEffect(()=>{a&&f(r.visible)},[a,r]);const l=Pk(y),w=()=>{const{disabled:te}=e;te||(c&&l(),f(re=>{var Q;const ne=!re;return typeof r=="object"&&((Q=r.onVisibleChange)===null||Q===void 0||Q.call(r,ne)),ne}))},C=te=>{const{action:re="click",iconRender:Q=JH}=e,ne=QH[re]||"",ee=Q(c),me={[ne]:w,className:`${te}-icon`,key:"passwordIcon",onMouseDown:ce=>{ce.preventDefault()},onMouseUp:ce=>{ce.preventDefault()}};return T.cloneElement(T.isValidElement(ee)?ee:T.createElement("span",null,ee),me)},{className:A,prefixCls:M,inputPrefixCls:k,size:N}=e,D=YH(e,["className","prefixCls","inputPrefixCls","size"]),{getPrefixCls:U}=T.useContext(cr),q=U("input",k),F=U("input-password",M),j=r&&C(F),V=$t(F,A,{[`${F}-${N}`]:!!N}),X=Object.assign(Object.assign({},Sc(D,["suffix","iconRender","visibilityToggle"])),{type:c?"text":"password",className:V,prefixCls:q,suffix:j});return N&&(X.size=N),T.createElement(nE,Object.assign({ref:gs(t,y)},X))}),tG=eG;var nG=globalThis&&globalThis.__rest||function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(r[a[c]]=e[a[c]]);return r};const rG=T.forwardRef((e,t)=>{const{prefixCls:r,inputPrefixCls:a,className:c,size:f,suffix:y,enterButton:l=!1,addonAfter:w,loading:C,disabled:A,onSearch:M,onChange:k,onCompositionStart:N,onCompositionEnd:D}=e,U=nG(e,["prefixCls","inputPrefixCls","className","size","suffix","enterButton","addonAfter","loading","disabled","onSearch","onChange","onCompositionStart","onCompositionEnd"]),{getPrefixCls:q,direction:F}=T.useContext(cr),j=T.useRef(!1),V=q("input-search",r),X=q("input",a),{compactSize:te}=C0(V,F),re=bl(Be=>{var Ge;return(Ge=f??te)!==null&&Ge!==void 0?Ge:Be}),Q=T.useRef(null),ne=Be=>{Be&&Be.target&&Be.type==="click"&&M&&M(Be.target.value,Be,{source:"clear"}),k&&k(Be)},ee=Be=>{var Ge;document.activeElement===((Ge=Q.current)===null||Ge===void 0?void 0:Ge.input)&&Be.preventDefault()},me=Be=>{var Ge,Qe;M&&M((Qe=(Ge=Q.current)===null||Ge===void 0?void 0:Ge.input)===null||Qe===void 0?void 0:Qe.value,Be,{source:"input"})},ce=Be=>{j.current||C||me(Be)},ie=typeof l=="boolean"?T.createElement(sk,null):null,fe=`${V}-button`;let Te;const $e=l||{},Fe=$e.type&&$e.type.__ANT_BUTTON===!0;Fe||$e.type==="button"?Te=vl($e,Object.assign({onMouseDown:ee,onClick:Be=>{var Ge,Qe;(Qe=(Ge=$e==null?void 0:$e.props)===null||Ge===void 0?void 0:Ge.onClick)===null||Qe===void 0||Qe.call(Ge,Be),me(Be)},key:"enterButton"},Fe?{className:fe,size:re}:{})):Te=T.createElement(g8,{className:fe,type:l?"primary":void 0,size:re,disabled:A,key:"enterButton",onMouseDown:ee,onClick:me,loading:C,icon:ie},l),w&&(Te=[Te,vl(w,{key:"addonAfter"})]);const Ne=$t(V,{[`${V}-rtl`]:F==="rtl",[`${V}-${re}`]:!!re,[`${V}-with-button`]:!!l},c),pe=Be=>{j.current=!0,N==null||N(Be)},He=Be=>{j.current=!1,D==null||D(Be)};return T.createElement(nE,Object.assign({ref:gs(Q,t),onPressEnter:ce},U,{size:re,onCompositionStart:pe,onCompositionEnd:He,prefixCls:X,addonAfter:Te,suffix:y,onChange:ne,className:Ne,disabled:A}))}),iG=rG;var oG=`
  min-height:0 !important;
  max-height:none !important;
  height:0 !important;
  visibility:hidden !important;
  overflow:hidden !important;
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
  pointer-events: none !important;
`,aG=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","font-variant","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing","word-break","white-space"],_1={},Pa;function sG(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=e.getAttribute("id")||e.getAttribute("data-reactid")||e.getAttribute("name");if(t&&_1[r])return _1[r];var a=window.getComputedStyle(e),c=a.getPropertyValue("box-sizing")||a.getPropertyValue("-moz-box-sizing")||a.getPropertyValue("-webkit-box-sizing"),f=parseFloat(a.getPropertyValue("padding-bottom"))+parseFloat(a.getPropertyValue("padding-top")),y=parseFloat(a.getPropertyValue("border-bottom-width"))+parseFloat(a.getPropertyValue("border-top-width")),l=aG.map(function(C){return"".concat(C,":").concat(a.getPropertyValue(C))}).join(";"),w={sizingStyle:l,paddingSize:f,borderSize:y,boxSizing:c};return t&&r&&(_1[r]=w),w}function lG(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;Pa||(Pa=document.createElement("textarea"),Pa.setAttribute("tab-index","-1"),Pa.setAttribute("aria-hidden","true"),document.body.appendChild(Pa)),e.getAttribute("wrap")?Pa.setAttribute("wrap",e.getAttribute("wrap")):Pa.removeAttribute("wrap");var c=sG(e,t),f=c.paddingSize,y=c.borderSize,l=c.boxSizing,w=c.sizingStyle;Pa.setAttribute("style","".concat(w,";").concat(oG)),Pa.value=e.value||e.placeholder||"";var C=void 0,A=void 0,M,k=Pa.scrollHeight;if(l==="border-box"?k+=y:l==="content-box"&&(k-=f),r!==null||a!==null){Pa.value=" ";var N=Pa.scrollHeight-f;r!==null&&(C=N*r,l==="border-box"&&(C=C+f+y),k=Math.max(C,k)),a!==null&&(A=N*a,l==="border-box"&&(A=A+f+y),M=k>A?"":"hidden",k=Math.min(A,k))}var D={height:k,overflowY:M,resize:"none"};return C&&(D.minHeight=C),A&&(D.maxHeight=A),D}var cG=["prefixCls","onPressEnter","defaultValue","value","autoSize","onResize","className","style","disabled","onChange","onInternalAutoSize"],x1=0,b1=1,w1=2,uG=T.forwardRef(function(e,t){var r=e,a=r.prefixCls;r.onPressEnter;var c=r.defaultValue,f=r.value,y=r.autoSize,l=r.onResize,w=r.className,C=r.style,A=r.disabled,M=r.onChange;r.onInternalAutoSize;var k=Vr(r,cG),N=ms(c,{value:f,postState:function(St){return St??""}}),D=Ut(N,2),U=D[0],q=D[1],F=function(St){q(St.target.value),M==null||M(St)},j=T.useRef();T.useImperativeHandle(t,function(){return{textArea:j.current}});var V=T.useMemo(function(){return y&&Kn(y)==="object"?[y.minRows,y.maxRows]:[]},[y]),X=Ut(V,2),te=X[0],re=X[1],Q=!!y,ne=function(){try{if(document.activeElement===j.current){var St=j.current,xt=St.selectionStart,Nt=St.selectionEnd,jt=St.scrollTop;j.current.setSelectionRange(xt,Nt),j.current.scrollTop=jt}}catch{}},ee=T.useState(w1),me=Ut(ee,2),ce=me[0],ie=me[1],fe=T.useState(),Te=Ut(fe,2),$e=Te[0],Fe=Te[1],Ne=function(){ie(x1)};Lr(function(){Q&&Ne()},[f,te,re,Q]),Lr(function(){if(ce===x1)ie(b1);else if(ce===b1){var gt=lG(j.current,!1,te,re);ie(w1),Fe(gt)}else ne()},[ce]);var pe=T.useRef(),He=function(){yi.cancel(pe.current)},Be=function(St){ce===w1&&(l==null||l(St),y&&(He(),pe.current=yi(function(){Ne()})))};T.useEffect(function(){return He},[]);var Ge=Q?$e:null,Qe=lt(lt({},C),Ge);return(ce===x1||ce===b1)&&(Qe.overflowY="hidden",Qe.overflowX="hidden"),T.createElement(xl,{onResize:Be,disabled:!(y||l)},T.createElement("textarea",Cn({},k,{ref:j,style:Qe,className:$t(a,w,De({},"".concat(a,"-disabled"),A)),disabled:A,value:U,onChange:F})))}),dG=["defaultValue","value","onFocus","onBlur","onChange","allowClear","maxLength","onCompositionStart","onCompositionEnd","suffix","prefixCls","classes","showCount","count","className","style","disabled","hidden","classNames","styles","onResize"],hG=st.forwardRef(function(e,t){var r,a,c=e.defaultValue,f=e.value,y=e.onFocus,l=e.onBlur,w=e.onChange,C=e.allowClear,A=e.maxLength,M=e.onCompositionStart,k=e.onCompositionEnd,N=e.suffix,D=e.prefixCls,U=D===void 0?"rc-textarea":D,q=e.classes,F=e.showCount,j=e.count,V=e.className,X=e.style,te=e.disabled,re=e.hidden,Q=e.classNames,ne=e.styles,ee=e.onResize,me=Vr(e,dG),ce=ms(c,{value:f,defaultValue:c}),ie=Ut(ce,2),fe=ie[0],Te=ie[1],$e=fe==null?"":String(fe),Fe=st.useState(!1),Ne=Ut(Fe,2),pe=Ne[0],He=Ne[1],Be=st.useRef(!1),Ge=st.useState(null),Qe=Ut(Ge,2),gt=Qe[0],St=Qe[1],xt=T.useRef(null),Nt=function(){var rn;return(rn=xt.current)===null||rn===void 0?void 0:rn.textArea},jt=function(){Nt().focus()};T.useImperativeHandle(t,function(){return{resizableTextArea:xt.current,focus:jt,blur:function(){Nt().blur()}}}),T.useEffect(function(){He(function(yn){return!te&&yn})},[te]);var bt=st.useState(null),ut=Ut(bt,2),Tt=ut[0],ft=ut[1];st.useEffect(function(){if(Tt){var yn;(yn=Nt()).setSelectionRange.apply(yn,mn(Tt))}},[Tt]);var yt=Mk(j,F),ct=(r=yt.max)!==null&&r!==void 0?r:A,It=Number(ct)>0,Ct=yt.strategy($e),Qt=!!ct&&Ct>ct,Vt=function(rn,Wn){var jn=Wn;!Be.current&&yt.exceedFormatter&&yt.max&&yt.strategy(Wn)>yt.max&&(jn=yt.exceedFormatter(Wn,{max:yt.max}),Wn!==jn&&ft([Nt().selectionStart||0,Nt().selectionEnd||0])),Te(jn),$y(rn.currentTarget,rn,w,jn)},Bt=function(rn){Be.current=!0,M==null||M(rn)},ot=function(rn){Be.current=!1,Vt(rn,rn.currentTarget.value),k==null||k(rn)},rt=function(rn){Vt(rn,rn.target.value)},Lt=function(rn){var Wn=me.onPressEnter,jn=me.onKeyDown;rn.key==="Enter"&&Wn&&Wn(rn),jn==null||jn(rn)},Mt=function(rn){He(!0),y==null||y(rn)},sn=function(rn){He(!1),l==null||l(rn)},An=function(rn){Te(""),jt(),$y(Nt(),rn,w)},Mn=N,on;yt.show&&(yt.showFormatter?on=yt.showFormatter({value:$e,count:Ct,maxLength:ct}):on="".concat(Ct).concat(It?" / ".concat(ct):""),Mn=st.createElement(st.Fragment,null,Mn,st.createElement("span",{className:$t("".concat(U,"-data-count"),Q==null?void 0:Q.count),style:ne==null?void 0:ne.count},on)));var Vn=function(rn){var Wn;ee==null||ee(rn),(Wn=Nt())!==null&&Wn!==void 0&&Wn.style.height&&St(!0)},Nn=!me.autoSize&&!F&&!C,zn=st.createElement(Ik,{value:$e,allowClear:C,handleReset:An,suffix:Mn,prefixCls:U,classes:{affixWrapper:$t(q==null?void 0:q.affixWrapper,(a={},De(a,"".concat(U,"-show-count"),F),De(a,"".concat(U,"-textarea-allow-clear"),C),a))},disabled:te,focused:pe,className:$t(V,Qt&&"".concat(U,"-out-of-range")),style:lt(lt({},X),gt&&!Nn?{height:"auto"}:{}),dataAttrs:{affixWrapper:{"data-count":typeof on=="string"?on:void 0}},hidden:re,inputElement:st.createElement(uG,Cn({},me,{maxLength:A,onKeyDown:Lt,onChange:rt,onFocus:Mt,onBlur:sn,onCompositionStart:Bt,onCompositionEnd:ot,className:$t(Q==null?void 0:Q.textarea),style:lt(lt({},ne==null?void 0:ne.textarea),{},{resize:X==null?void 0:X.resize}),disabled:te,prefixCls:U,onResize:Vn,ref:xt}))});return zn}),fG=globalThis&&globalThis.__rest||function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(r[a[c]]=e[a[c]]);return r};const pG=T.forwardRef((e,t)=>{var r;const{prefixCls:a,bordered:c=!0,size:f,disabled:y,status:l,allowClear:w,classNames:C,rootClassName:A,className:M}=e,k=fG(e,["prefixCls","bordered","size","disabled","status","allowClear","classNames","rootClassName","className"]),{getPrefixCls:N,direction:D}=T.useContext(cr),U=bl(f),q=T.useContext(Ph),F=y??q,{status:j,hasFeedback:V,feedbackIcon:X}=T.useContext(yc),te=YS(j,l),re=T.useRef(null);T.useImperativeHandle(t,()=>{var ce;return{resizableTextArea:(ce=re.current)===null||ce===void 0?void 0:ce.resizableTextArea,focus:ie=>{var fe,Te;jH((Te=(fe=re.current)===null||fe===void 0?void 0:fe.resizableTextArea)===null||Te===void 0?void 0:Te.textArea,ie)},blur:()=>{var ie;return(ie=re.current)===null||ie===void 0?void 0:ie.blur()}}});const Q=N("input",a);let ne;typeof w=="object"&&(w!=null&&w.clearIcon)?ne=w:w&&(ne={clearIcon:T.createElement(w0,null)});const[ee,me]=tE(Q);return ee(T.createElement(hG,Object.assign({},k,{disabled:F,allowClear:ne,className:$t(M,A),classes:{affixWrapper:$t(`${Q}-textarea-affix-wrapper`,{[`${Q}-affix-wrapper-rtl`]:D==="rtl",[`${Q}-affix-wrapper-borderless`]:!c,[`${Q}-affix-wrapper-sm`]:U==="small",[`${Q}-affix-wrapper-lg`]:U==="large",[`${Q}-textarea-show-count`]:e.showCount||((r=e.count)===null||r===void 0?void 0:r.show)},ch(`${Q}-affix-wrapper`,te),me)},classNames:Object.assign(Object.assign({},C),{textarea:$t({[`${Q}-borderless`]:!c,[`${Q}-sm`]:U==="small",[`${Q}-lg`]:U==="large"},ch(Q,te),me,C==null?void 0:C.textarea)}),prefixCls:Q,suffix:V&&T.createElement("span",{className:`${Q}-textarea-suffix`},X),ref:re})))}),Ak=pG,Tm=nE;Tm.Group=FH;Tm.Search=iG;Tm.TextArea=Ak;Tm.Password=tG;const CY=Tm;function UM(e){return["small","middle","large"].includes(e)}function VM(e){return e?typeof e=="number"&&!Number.isNaN(e):!1}const Rk=st.createContext({latestIndex:0}),mG=Rk.Provider,gG=e=>{let{className:t,index:r,children:a,split:c,style:f}=e;const{latestIndex:y}=T.useContext(Rk);return a==null?null:T.createElement(T.Fragment,null,T.createElement("div",{className:t,style:f},a),r<y&&c&&T.createElement("span",{className:`${t}-split`},c))},vG=gG;var yG=globalThis&&globalThis.__rest||function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(r[a[c]]=e[a[c]]);return r};const _G=T.forwardRef((e,t)=>{var r,a;const{getPrefixCls:c,space:f,direction:y}=T.useContext(cr),{size:l=(f==null?void 0:f.size)||"small",align:w,className:C,rootClassName:A,children:M,direction:k="horizontal",prefixCls:N,split:D,style:U,wrap:q=!1,classNames:F,styles:j}=e,V=yG(e,["size","align","className","rootClassName","children","direction","prefixCls","split","style","wrap","classNames","styles"]),[X,te]=Array.isArray(l)?l:[l,l],re=UM(te),Q=UM(X),ne=VM(te),ee=VM(X),me=hl(M,{keepEmpty:!0}),ce=w===void 0&&k==="horizontal"?"center":w,ie=c("space",N),[fe,Te]=fz(ie),$e=$t(ie,f==null?void 0:f.className,Te,`${ie}-${k}`,{[`${ie}-rtl`]:y==="rtl",[`${ie}-align-${ce}`]:ce,[`${ie}-gap-row-${te}`]:re,[`${ie}-gap-col-${X}`]:Q},C,A),Fe=$t(`${ie}-item`,(r=F==null?void 0:F.item)!==null&&r!==void 0?r:(a=f==null?void 0:f.classNames)===null||a===void 0?void 0:a.item);let Ne=0;const pe=me.map((Ge,Qe)=>{var gt,St;Ge!=null&&(Ne=Qe);const xt=Ge&&Ge.key||`${Fe}-${Qe}`;return T.createElement(vG,{className:Fe,key:xt,index:Qe,split:D,style:(gt=j==null?void 0:j.item)!==null&&gt!==void 0?gt:(St=f==null?void 0:f.styles)===null||St===void 0?void 0:St.item},Ge)}),He=T.useMemo(()=>({latestIndex:Ne}),[Ne]);if(me.length===0)return null;const Be={};return q&&(Be.flexWrap="wrap"),!Q&&ee&&(Be.columnGap=X),!re&&ne&&(Be.rowGap=te),fe(T.createElement("div",Object.assign({ref:t,className:$e,style:Object.assign(Object.assign(Object.assign({},Be),f==null?void 0:f.style),U)},V),T.createElement(mG,{value:He},pe)))}),Ok=_G;Ok.Compact=Dj;const TY=Ok;function xG(){const e=Object.assign({},arguments.length<=0?void 0:arguments[0]);for(let t=1;t<arguments.length;t++){const r=t<0||arguments.length<=t?void 0:arguments[t];r&&Object.keys(r).forEach(a=>{const c=r[a];c!==void 0&&(e[a]=c)})}return e}var bG={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M272.9 512l265.4-339.1c4.1-5.2.4-12.9-6.3-12.9h-77.3c-4.9 0-9.6 2.3-12.6 6.1L186.8 492.3a31.99 31.99 0 000 39.5l255.3 326.1c3 3.9 7.7 6.1 12.6 6.1H532c6.7 0 10.4-7.7 6.3-12.9L272.9 512zm304 0l265.4-339.1c4.1-5.2.4-12.9-6.3-12.9h-77.3c-4.9 0-9.6 2.3-12.6 6.1L490.8 492.3a31.99 31.99 0 000 39.5l255.3 326.1c3 3.9 7.7 6.1 12.6 6.1H836c6.7 0 10.4-7.7 6.3-12.9L576.9 512z"}}]},name:"double-left",theme:"outlined"};const wG=bG;var SG=function(t,r){return T.createElement(Xi,Cn({},t,{ref:r,icon:wG}))};const HM=T.forwardRef(SG);var EG={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M533.2 492.3L277.9 166.1c-3-3.9-7.7-6.1-12.6-6.1H188c-6.7 0-10.4 7.7-6.3 12.9L447.1 512 181.7 851.1A7.98 7.98 0 00188 864h77.3c4.9 0 9.6-2.3 12.6-6.1l255.3-326.1c9.1-11.7 9.1-27.9 0-39.5zm304 0L581.9 166.1c-3-3.9-7.7-6.1-12.6-6.1H492c-6.7 0-10.4 7.7-6.3 12.9L751.1 512 485.7 851.1A7.98 7.98 0 00492 864h77.3c4.9 0 9.6-2.3 12.6-6.1l255.3-326.1c9.1-11.7 9.1-27.9 0-39.5z"}}]},name:"double-right",theme:"outlined"};const CG=EG;var TG=function(t,r){return T.createElement(Xi,Cn({},t,{ref:r,icon:CG}))};const GM=T.forwardRef(TG);var ou={ZERO:48,NINE:57,NUMPAD_ZERO:96,NUMPAD_NINE:105,BACKSPACE:8,DELETE:46,ENTER:13,ARROW_UP:38,ARROW_DOWN:40};const IG={items_per_page:"条/页",jump_to:"跳至",jump_to_confirm:"确定",page:"页",prev_page:"上一页",next_page:"下一页",prev_5:"向前 5 页",next_5:"向后 5 页",prev_3:"向前 3 页",next_3:"向后 3 页",page_size:"页码"};var _w=function(e){Pu(r,e);var t=Au(r);function r(){var a;qo(this,r);for(var c=arguments.length,f=new Array(c),y=0;y<c;y++)f[y]=arguments[y];return a=t.call.apply(t,[this].concat(f)),De(vn(a),"state",{goInputText:""}),De(vn(a),"getValidValue",function(){var l=a.state.goInputText;return!l||Number.isNaN(l)?void 0:Number(l)}),De(vn(a),"buildOptionText",function(l){return"".concat(l," ").concat(a.props.locale.items_per_page)}),De(vn(a),"changeSize",function(l){a.props.changeSize(Number(l))}),De(vn(a),"handleChange",function(l){a.setState({goInputText:l.target.value})}),De(vn(a),"handleBlur",function(l){var w=a.props,C=w.goButton,A=w.quickGo,M=w.rootPrefixCls,k=a.state.goInputText;C||k===""||(a.setState({goInputText:""}),!(l.relatedTarget&&(l.relatedTarget.className.indexOf("".concat(M,"-item-link"))>=0||l.relatedTarget.className.indexOf("".concat(M,"-item"))>=0))&&A(a.getValidValue()))}),De(vn(a),"go",function(l){var w=a.state.goInputText;w!==""&&(l.keyCode===ou.ENTER||l.type==="click")&&(a.setState({goInputText:""}),a.props.quickGo(a.getValidValue()))}),a}return Zo(r,[{key:"getPageSizeOptions",value:function(){var c=this.props,f=c.pageSize,y=c.pageSizeOptions;return y.some(function(l){return l.toString()===f.toString()})?y:y.concat([f.toString()]).sort(function(l,w){var C=Number.isNaN(Number(l))?0:Number(l),A=Number.isNaN(Number(w))?0:Number(w);return C-A})}},{key:"render",value:function(){var c=this,f=this.props,y=f.pageSize,l=f.locale,w=f.rootPrefixCls,C=f.changeSize,A=f.quickGo,M=f.goButton,k=f.selectComponentClass,N=f.buildOptionText,D=f.selectPrefixCls,U=f.disabled,q=this.state.goInputText,F="".concat(w,"-options"),j=k,V=null,X=null,te=null;if(!C&&!A)return null;var re=this.getPageSizeOptions();if(C&&j){var Q=re.map(function(ne,ee){return st.createElement(j.Option,{key:ee,value:ne.toString()},(N||c.buildOptionText)(ne))});V=st.createElement(j,{disabled:U,prefixCls:D,showSearch:!1,className:"".concat(F,"-size-changer"),optionLabelProp:"children",popupMatchSelectWidth:!1,value:(y||re[0]).toString(),onChange:this.changeSize,getPopupContainer:function(ee){return ee.parentNode},"aria-label":l.page_size,defaultOpen:!1},Q)}return A&&(M&&(te=typeof M=="boolean"?st.createElement("button",{type:"button",onClick:this.go,onKeyUp:this.go,disabled:U,className:"".concat(F,"-quick-jumper-button")},l.jump_to_confirm):st.createElement("span",{onClick:this.go,onKeyUp:this.go},M)),X=st.createElement("div",{className:"".concat(F,"-quick-jumper")},l.jump_to,st.createElement("input",{disabled:U,type:"text",value:q,onChange:this.handleChange,onKeyUp:this.go,onBlur:this.handleBlur,"aria-label":l.page}),l.page,te)),st.createElement("li",{className:"".concat(F)},V,X)}}]),r}(st.Component);De(_w,"defaultProps",{pageSizeOptions:["10","20","50","100"]});var pp=function(t){var r,a=t.rootPrefixCls,c=t.page,f=t.active,y=t.className,l=t.showTitle,w=t.onClick,C=t.onKeyPress,A=t.itemRender,M="".concat(a,"-item"),k=$t(M,"".concat(M,"-").concat(c),(r={},De(r,"".concat(M,"-active"),f),De(r,"".concat(M,"-disabled"),!c),De(r,t.className,y),r)),N=function(){w(c)},D=function(F){C(F,w,c)},U=A(c,"page",st.createElement("a",{rel:"nofollow"},c));return U?st.createElement("li",{title:l?c.toString():null,className:k,onClick:N,onKeyPress:D,tabIndex:0},U):null};function xw(){}function WM(e){var t=Number(e);return typeof t=="number"&&!Number.isNaN(t)&&isFinite(t)&&Math.floor(t)===t}var MG=function(t,r,a){return a};function Yl(e,t,r){var a=typeof e>"u"?t.pageSize:e;return Math.floor((r.total-1)/a)+1}var zk=function(e){Pu(r,e);var t=Au(r);function r(a){var c;qo(this,r),c=t.call(this,a),De(vn(c),"paginationNode",st.createRef()),De(vn(c),"getJumpPrevPage",function(){return Math.max(1,c.state.current-(c.props.showLessItems?3:5))}),De(vn(c),"getJumpNextPage",function(){return Math.min(Yl(void 0,c.state,c.props),c.state.current+(c.props.showLessItems?3:5))}),De(vn(c),"getItemIcon",function(C,A){var M=c.props.prefixCls,k=C||st.createElement("button",{type:"button","aria-label":A,className:"".concat(M,"-item-link")});return typeof C=="function"&&(k=st.createElement(C,lt({},c.props))),k}),De(vn(c),"isValid",function(C){var A=c.props.total;return WM(C)&&C!==c.state.current&&WM(A)&&A>0}),De(vn(c),"shouldDisplayQuickJumper",function(){var C=c.props,A=C.showQuickJumper,M=C.total,k=c.state.pageSize;return M<=k?!1:A}),De(vn(c),"handleKeyDown",function(C){(C.keyCode===ou.ARROW_UP||C.keyCode===ou.ARROW_DOWN)&&C.preventDefault()}),De(vn(c),"handleKeyUp",function(C){var A=c.getValidValue(C),M=c.state.currentInputValue;A!==M&&c.setState({currentInputValue:A}),C.keyCode===ou.ENTER?c.handleChange(A):C.keyCode===ou.ARROW_UP?c.handleChange(A-1):C.keyCode===ou.ARROW_DOWN&&c.handleChange(A+1)}),De(vn(c),"handleBlur",function(C){var A=c.getValidValue(C);c.handleChange(A)}),De(vn(c),"changePageSize",function(C){var A=c.state.current,M=Yl(C,c.state,c.props);A=A>M?M:A,M===0&&(A=c.state.current),typeof C=="number"&&("pageSize"in c.props||c.setState({pageSize:C}),"current"in c.props||c.setState({current:A,currentInputValue:A})),c.props.onShowSizeChange(A,C),"onChange"in c.props&&c.props.onChange&&c.props.onChange(A,C)}),De(vn(c),"handleChange",function(C){var A=c.props,M=A.disabled,k=A.onChange,N=c.state,D=N.pageSize,U=N.current,q=N.currentInputValue;if(c.isValid(C)&&!M){var F=Yl(void 0,c.state,c.props),j=C;return C>F?j=F:C<1&&(j=1),"current"in c.props||c.setState({current:j}),j!==q&&c.setState({currentInputValue:j}),k(j,D),j}return U}),De(vn(c),"prev",function(){c.hasPrev()&&c.handleChange(c.state.current-1)}),De(vn(c),"next",function(){c.hasNext()&&c.handleChange(c.state.current+1)}),De(vn(c),"jumpPrev",function(){c.handleChange(c.getJumpPrevPage())}),De(vn(c),"jumpNext",function(){c.handleChange(c.getJumpNextPage())}),De(vn(c),"hasPrev",function(){return c.state.current>1}),De(vn(c),"hasNext",function(){return c.state.current<Yl(void 0,c.state,c.props)}),De(vn(c),"runIfEnter",function(C,A){if(C.key==="Enter"||C.charCode===13){for(var M=arguments.length,k=new Array(M>2?M-2:0),N=2;N<M;N++)k[N-2]=arguments[N];A.apply(void 0,k)}}),De(vn(c),"runIfEnterPrev",function(C){c.runIfEnter(C,c.prev)}),De(vn(c),"runIfEnterNext",function(C){c.runIfEnter(C,c.next)}),De(vn(c),"runIfEnterJumpPrev",function(C){c.runIfEnter(C,c.jumpPrev)}),De(vn(c),"runIfEnterJumpNext",function(C){c.runIfEnter(C,c.jumpNext)}),De(vn(c),"handleGoTO",function(C){(C.keyCode===ou.ENTER||C.type==="click")&&c.handleChange(c.state.currentInputValue)}),De(vn(c),"renderPrev",function(C){var A=c.props,M=A.prevIcon,k=A.itemRender,N=k(C,"prev",c.getItemIcon(M,"prev page")),D=!c.hasPrev();return T.isValidElement(N)?T.cloneElement(N,{disabled:D}):N}),De(vn(c),"renderNext",function(C){var A=c.props,M=A.nextIcon,k=A.itemRender,N=k(C,"next",c.getItemIcon(M,"next page")),D=!c.hasNext();return T.isValidElement(N)?T.cloneElement(N,{disabled:D}):N});var f=a.onChange!==xw,y="current"in a;y&&!f&&console.warn("Warning: You provided a `current` prop to a Pagination component without an `onChange` handler. This will render a read-only component.");var l=a.defaultCurrent;"current"in a&&(l=a.current);var w=a.defaultPageSize;return"pageSize"in a&&(w=a.pageSize),l=Math.min(l,Yl(w,void 0,a)),c.state={current:l,currentInputValue:l,pageSize:w},c}return Zo(r,[{key:"componentDidUpdate",value:function(c,f){var y=this.props.prefixCls;if(f.current!==this.state.current&&this.paginationNode.current){var l=this.paginationNode.current.querySelector(".".concat(y,"-item-").concat(f.current));if(l&&document.activeElement===l){var w;l==null||(w=l.blur)===null||w===void 0||w.call(l)}}}},{key:"getValidValue",value:function(c){var f=c.target.value,y=Yl(void 0,this.state,this.props),l=this.state.currentInputValue,w;return f===""?w=f:Number.isNaN(Number(f))?w=l:f>=y?w=y:w=Number(f),w}},{key:"getShowSizeChanger",value:function(){var c=this.props,f=c.showSizeChanger,y=c.total,l=c.totalBoundaryShowSizeChanger;return typeof f<"u"?f:y>l}},{key:"render",value:function(){var c=this.props,f=c.prefixCls,y=c.className,l=c.style,w=c.disabled,C=c.hideOnSinglePage,A=c.total,M=c.locale,k=c.showQuickJumper,N=c.showLessItems,D=c.showTitle,U=c.showTotal,q=c.simple,F=c.itemRender,j=c.showPrevNextJumpers,V=c.jumpPrevIcon,X=c.jumpNextIcon,te=c.selectComponentClass,re=c.selectPrefixCls,Q=c.pageSizeOptions,ne=this.state,ee=ne.current,me=ne.pageSize,ce=ne.currentInputValue;if(C===!0&&A<=me)return null;var ie=Yl(void 0,this.state,this.props),fe=[],Te=null,$e=null,Fe=null,Ne=null,pe=null,He=k&&k.goButton,Be=N?1:2,Ge=ee-1>0?ee-1:0,Qe=ee+1<ie?ee+1:ie,gt=bh(this.props,{aria:!0,data:!0}),St=U&&st.createElement("li",{className:"".concat(f,"-total-text")},U(A,[A===0?0:(ee-1)*me+1,ee*me>A?A:ee*me]));if(q){He&&(typeof He=="boolean"?pe=st.createElement("button",{type:"button",onClick:this.handleGoTO,onKeyUp:this.handleGoTO},M.jump_to_confirm):pe=st.createElement("span",{onClick:this.handleGoTO,onKeyUp:this.handleGoTO},He),pe=st.createElement("li",{title:D?"".concat(M.jump_to).concat(ee,"/").concat(ie):null,className:"".concat(f,"-simple-pager")},pe));var xt=this.renderPrev(Ge);return st.createElement("ul",Cn({className:$t(f,"".concat(f,"-simple"),De({},"".concat(f,"-disabled"),w),y),style:l,ref:this.paginationNode},gt),St,xt?st.createElement("li",{title:D?M.prev_page:null,onClick:this.prev,tabIndex:this.hasPrev()?0:null,onKeyPress:this.runIfEnterPrev,className:$t("".concat(f,"-prev"),De({},"".concat(f,"-disabled"),!this.hasPrev())),"aria-disabled":!this.hasPrev()},xt):null,st.createElement("li",{title:D?"".concat(ee,"/").concat(ie):null,className:"".concat(f,"-simple-pager")},st.createElement("input",{type:"text",value:ce,disabled:w,onKeyDown:this.handleKeyDown,onKeyUp:this.handleKeyUp,onChange:this.handleKeyUp,onBlur:this.handleBlur,size:3}),st.createElement("span",{className:"".concat(f,"-slash")},"/"),ie),st.createElement("li",{title:D?M.next_page:null,onClick:this.next,tabIndex:this.hasPrev()?0:null,onKeyPress:this.runIfEnterNext,className:$t("".concat(f,"-next"),De({},"".concat(f,"-disabled"),!this.hasNext())),"aria-disabled":!this.hasNext()},this.renderNext(Qe)),st.createElement(_w,{disabled:w,locale:M,rootPrefixCls:f,selectComponentClass:te,selectPrefixCls:re,changeSize:this.getShowSizeChanger()?this.changePageSize:null,current:ee,pageSize:me,pageSizeOptions:Q,quickGo:this.shouldDisplayQuickJumper()?this.handleChange:null,goButton:pe}))}if(ie<=3+Be*2){var Nt={locale:M,rootPrefixCls:f,onClick:this.handleChange,onKeyPress:this.runIfEnter,showTitle:D,itemRender:F};ie||fe.push(st.createElement(pp,Cn({},Nt,{key:"noPager",page:1,className:"".concat(f,"-item-disabled")})));for(var jt=1;jt<=ie;jt+=1){var bt=ee===jt;fe.push(st.createElement(pp,Cn({},Nt,{key:jt,page:jt,active:bt})))}}else{var ut=N?M.prev_3:M.prev_5,Tt=N?M.next_3:M.next_5,ft=F(this.getJumpPrevPage(),"jump-prev",this.getItemIcon(V,"prev page")),yt=F(this.getJumpNextPage(),"jump-next",this.getItemIcon(X,"next page"));j&&(Te=ft?st.createElement("li",{title:D?ut:null,key:"prev",onClick:this.jumpPrev,tabIndex:0,onKeyPress:this.runIfEnterJumpPrev,className:$t("".concat(f,"-jump-prev"),De({},"".concat(f,"-jump-prev-custom-icon"),!!V))},ft):null,$e=yt?st.createElement("li",{title:D?Tt:null,key:"next",tabIndex:0,onClick:this.jumpNext,onKeyPress:this.runIfEnterJumpNext,className:$t("".concat(f,"-jump-next"),De({},"".concat(f,"-jump-next-custom-icon"),!!X))},yt):null),Ne=st.createElement(pp,{locale:M,last:!0,rootPrefixCls:f,onClick:this.handleChange,onKeyPress:this.runIfEnter,key:ie,page:ie,active:!1,showTitle:D,itemRender:F}),Fe=st.createElement(pp,{locale:M,rootPrefixCls:f,onClick:this.handleChange,onKeyPress:this.runIfEnter,key:1,page:1,active:!1,showTitle:D,itemRender:F});var ct=Math.max(1,ee-Be),It=Math.min(ee+Be,ie);ee-1<=Be&&(It=1+Be*2),ie-ee<=Be&&(ct=ie-Be*2);for(var Ct=ct;Ct<=It;Ct+=1){var Qt=ee===Ct;fe.push(st.createElement(pp,{locale:M,rootPrefixCls:f,onClick:this.handleChange,onKeyPress:this.runIfEnter,key:Ct,page:Ct,active:Qt,showTitle:D,itemRender:F}))}ee-1>=Be*2&&ee!==1+2&&(fe[0]=T.cloneElement(fe[0],{className:"".concat(f,"-item-after-jump-prev")}),fe.unshift(Te)),ie-ee>=Be*2&&ee!==ie-2&&(fe[fe.length-1]=T.cloneElement(fe[fe.length-1],{className:"".concat(f,"-item-before-jump-next")}),fe.push($e)),ct!==1&&fe.unshift(Fe),It!==ie&&fe.push(Ne)}var Vt=!this.hasPrev()||!ie,Bt=!this.hasNext()||!ie,ot=this.renderPrev(Ge),rt=this.renderNext(Qe);return st.createElement("ul",Cn({className:$t(f,y,De({},"".concat(f,"-disabled"),w)),style:l,ref:this.paginationNode},gt),St,ot?st.createElement("li",{title:D?M.prev_page:null,onClick:this.prev,tabIndex:Vt?null:0,onKeyPress:this.runIfEnterPrev,className:$t("".concat(f,"-prev"),De({},"".concat(f,"-disabled"),Vt)),"aria-disabled":Vt},ot):null,fe,rt?st.createElement("li",{title:D?M.next_page:null,onClick:this.next,tabIndex:Bt?null:0,onKeyPress:this.runIfEnterNext,className:$t("".concat(f,"-next"),De({},"".concat(f,"-disabled"),Bt)),"aria-disabled":Bt},rt):null,st.createElement(_w,{disabled:w,locale:M,rootPrefixCls:f,selectComponentClass:te,selectPrefixCls:re,changeSize:this.getShowSizeChanger()?this.changePageSize:null,current:ee,pageSize:me,pageSizeOptions:Q,quickGo:this.shouldDisplayQuickJumper()?this.handleChange:null,goButton:He}))}}],[{key:"getDerivedStateFromProps",value:function(c,f){var y={};if("current"in c&&(y.current=c.current,c.current!==f.current&&(y.currentInputValue=y.current)),"pageSize"in c&&c.pageSize!==f.pageSize){var l=f.current,w=Yl(c.pageSize,f,c);l=l>w?w:l,"current"in c||(y.current=l,y.currentInputValue=l),y.pageSize=c.pageSize}return y}}]),r}(st.Component);De(zk,"defaultProps",{defaultCurrent:1,total:0,defaultPageSize:10,onChange:xw,className:"",selectPrefixCls:"rc-select",prefixCls:"rc-pagination",selectComponentClass:null,hideOnSinglePage:!1,showPrevNextJumpers:!0,showQuickJumper:!1,showLessItems:!1,showTitle:!0,onShowSizeChange:xw,locale:IG,style:{},itemRender:MG,totalBoundaryShowSizeChanger:50});const kk=e=>T.createElement(I0,Object.assign({},e,{showSearch:!0,size:"small"})),Lk=e=>T.createElement(I0,Object.assign({},e,{showSearch:!0,size:"middle"}));kk.Option=I0.Option;Lk.Option=I0.Option;const PG=e=>{const{componentCls:t}=e;return{[`${t}-disabled`]:{"&, &:hover":{cursor:"not-allowed",[`${t}-item-link`]:{color:e.colorTextDisabled,cursor:"not-allowed"}},"&:focus-visible":{cursor:"not-allowed",[`${t}-item-link`]:{color:e.colorTextDisabled,cursor:"not-allowed"}}},[`&${t}-disabled`]:{cursor:"not-allowed",[`${t}-item`]:{cursor:"not-allowed","&:hover, &:active":{backgroundColor:"transparent"},a:{color:e.colorTextDisabled,backgroundColor:"transparent",border:"none",cursor:"not-allowed"},"&-active":{borderColor:e.colorBorder,backgroundColor:e.itemActiveBgDisabled,"&:hover, &:active":{backgroundColor:e.itemActiveBgDisabled},a:{color:e.itemActiveColorDisabled}}},[`${t}-item-link`]:{color:e.colorTextDisabled,cursor:"not-allowed","&:hover, &:active":{backgroundColor:"transparent"},[`${t}-simple&`]:{backgroundColor:"transparent","&:hover, &:active":{backgroundColor:"transparent"}}},[`${t}-simple-pager`]:{color:e.colorTextDisabled},[`${t}-jump-prev, ${t}-jump-next`]:{[`${t}-item-link-icon`]:{opacity:0},[`${t}-item-ellipsis`]:{opacity:1}}},[`&${t}-simple`]:{[`${t}-prev, ${t}-next`]:{[`&${t}-disabled ${t}-item-link`]:{"&:hover, &:active":{backgroundColor:"transparent"}}}}}},AG=e=>{const{componentCls:t}=e;return{[`&${t}-mini ${t}-total-text, &${t}-mini ${t}-simple-pager`]:{height:e.itemSizeSM,lineHeight:`${e.itemSizeSM}px`},[`&${t}-mini ${t}-item`]:{minWidth:e.itemSizeSM,height:e.itemSizeSM,margin:0,lineHeight:`${e.itemSizeSM-2}px`},[`&${t}-mini:not(${t}-disabled) ${t}-item:not(${t}-item-active)`]:{backgroundColor:"transparent",borderColor:"transparent","&:hover":{backgroundColor:e.colorBgTextHover},"&:active":{backgroundColor:e.colorBgTextActive}},[`&${t}-mini ${t}-prev, &${t}-mini ${t}-next`]:{minWidth:e.itemSizeSM,height:e.itemSizeSM,margin:0,lineHeight:`${e.itemSizeSM}px`},[`&${t}-mini:not(${t}-disabled)`]:{[`${t}-prev, ${t}-next`]:{[`&:hover ${t}-item-link`]:{backgroundColor:e.colorBgTextHover},[`&:active ${t}-item-link`]:{backgroundColor:e.colorBgTextActive},[`&${t}-disabled:hover ${t}-item-link`]:{backgroundColor:"transparent"}}},[`
    &${t}-mini ${t}-prev ${t}-item-link,
    &${t}-mini ${t}-next ${t}-item-link
    `]:{backgroundColor:"transparent",borderColor:"transparent","&::after":{height:e.itemSizeSM,lineHeight:`${e.itemSizeSM}px`}},[`&${t}-mini ${t}-jump-prev, &${t}-mini ${t}-jump-next`]:{height:e.itemSizeSM,marginInlineEnd:0,lineHeight:`${e.itemSizeSM}px`},[`&${t}-mini ${t}-options`]:{marginInlineStart:e.paginationMiniOptionsMarginInlineStart,"&-size-changer":{top:e.miniOptionsSizeChangerTop},"&-quick-jumper":{height:e.itemSizeSM,lineHeight:`${e.itemSizeSM}px`,input:Object.assign(Object.assign({},QS(e)),{width:e.paginationMiniQuickJumperInputWidth,height:e.controlHeightSM})}}}},RG=e=>{const{componentCls:t}=e;return{[`
    &${t}-simple ${t}-prev,
    &${t}-simple ${t}-next
    `]:{height:e.itemSizeSM,lineHeight:`${e.itemSizeSM}px`,verticalAlign:"top",[`${t}-item-link`]:{height:e.itemSizeSM,backgroundColor:"transparent",border:0,"&:hover":{backgroundColor:e.colorBgTextHover},"&:active":{backgroundColor:e.colorBgTextActive},"&::after":{height:e.itemSizeSM,lineHeight:`${e.itemSizeSM}px`}}},[`&${t}-simple ${t}-simple-pager`]:{display:"inline-block",height:e.itemSizeSM,marginInlineEnd:e.marginXS,input:{boxSizing:"border-box",height:"100%",marginInlineEnd:e.marginXS,padding:`0 ${e.paginationItemPaddingInline}px`,textAlign:"center",backgroundColor:e.itemInputBg,border:`${e.lineWidth}px ${e.lineType} ${e.colorBorder}`,borderRadius:e.borderRadius,outline:"none",transition:`border-color ${e.motionDurationMid}`,color:"inherit","&:hover":{borderColor:e.colorPrimary},"&:focus":{borderColor:e.colorPrimaryHover,boxShadow:`${e.inputOutlineOffset}px 0 ${e.controlOutlineWidth}px ${e.controlOutline}`},"&[disabled]":{color:e.colorTextDisabled,backgroundColor:e.colorBgContainerDisabled,borderColor:e.colorBorder,cursor:"not-allowed"}}}}},OG=e=>{const{componentCls:t}=e;return{[`${t}-jump-prev, ${t}-jump-next`]:{outline:0,[`${t}-item-container`]:{position:"relative",[`${t}-item-link-icon`]:{color:e.colorPrimary,fontSize:e.fontSizeSM,opacity:0,transition:`all ${e.motionDurationMid}`,"&-svg":{top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,margin:"auto"}},[`${t}-item-ellipsis`]:{position:"absolute",top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,display:"block",margin:"auto",color:e.colorTextDisabled,fontFamily:"Arial, Helvetica, sans-serif",letterSpacing:e.paginationEllipsisLetterSpacing,textAlign:"center",textIndent:e.paginationEllipsisTextIndent,opacity:1,transition:`all ${e.motionDurationMid}`}},"&:hover":{[`${t}-item-link-icon`]:{opacity:1},[`${t}-item-ellipsis`]:{opacity:0}}},[`
    ${t}-prev,
    ${t}-jump-prev,
    ${t}-jump-next
    `]:{marginInlineEnd:e.marginXS},[`
    ${t}-prev,
    ${t}-next,
    ${t}-jump-prev,
    ${t}-jump-next
    `]:{display:"inline-block",minWidth:e.itemSize,height:e.itemSize,color:e.colorText,fontFamily:e.fontFamily,lineHeight:`${e.itemSize}px`,textAlign:"center",verticalAlign:"middle",listStyle:"none",borderRadius:e.borderRadius,cursor:"pointer",transition:`all ${e.motionDurationMid}`},[`${t}-prev, ${t}-next`]:{fontFamily:"Arial, Helvetica, sans-serif",outline:0,button:{color:e.colorText,cursor:"pointer",userSelect:"none"},[`${t}-item-link`]:{display:"block",width:"100%",height:"100%",padding:0,fontSize:e.fontSizeSM,textAlign:"center",backgroundColor:"transparent",border:`${e.lineWidth}px ${e.lineType} transparent`,borderRadius:e.borderRadius,outline:"none",transition:`all ${e.motionDurationMid}`},[`&:hover ${t}-item-link`]:{backgroundColor:e.colorBgTextHover},[`&:active ${t}-item-link`]:{backgroundColor:e.colorBgTextActive},[`&${t}-disabled:hover`]:{[`${t}-item-link`]:{backgroundColor:"transparent"}}},[`${t}-slash`]:{marginInlineEnd:e.paginationSlashMarginInlineEnd,marginInlineStart:e.paginationSlashMarginInlineStart},[`${t}-options`]:{display:"inline-block",marginInlineStart:e.margin,verticalAlign:"middle","&-size-changer.-select":{display:"inline-block",width:"auto"},"&-quick-jumper":{display:"inline-block",height:e.controlHeight,marginInlineStart:e.marginXS,lineHeight:`${e.controlHeight}px`,verticalAlign:"top",input:Object.assign(Object.assign({},eE(e)),{width:e.controlHeightLG*1.25,height:e.controlHeight,boxSizing:"border-box",margin:0,marginInlineStart:e.marginXS,marginInlineEnd:e.marginXS})}}}},zG=e=>{const{componentCls:t}=e;return{[`${t}-item`]:{display:"inline-block",minWidth:e.itemSize,height:e.itemSize,marginInlineEnd:e.marginXS,fontFamily:e.fontFamily,lineHeight:`${e.itemSize-2}px`,textAlign:"center",verticalAlign:"middle",listStyle:"none",backgroundColor:"transparent",border:`${e.lineWidth}px ${e.lineType} transparent`,borderRadius:e.borderRadius,outline:0,cursor:"pointer",userSelect:"none",a:{display:"block",padding:`0 ${e.paginationItemPaddingInline}px`,color:e.colorText,"&:hover":{textDecoration:"none"}},[`&:not(${t}-item-active)`]:{"&:hover":{transition:`all ${e.motionDurationMid}`,backgroundColor:e.colorBgTextHover},"&:active":{backgroundColor:e.colorBgTextActive}},"&-active":{fontWeight:e.fontWeightStrong,backgroundColor:e.itemActiveBg,borderColor:e.colorPrimary,a:{color:e.colorPrimary},"&:hover":{borderColor:e.colorPrimaryHover},"&:hover a":{color:e.colorPrimaryHover}}}}},kG=e=>{const{componentCls:t}=e;return{[t]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},da(e)),{"ul, ol":{margin:0,padding:0,listStyle:"none"},"&::after":{display:"block",clear:"both",height:0,overflow:"hidden",visibility:"hidden",content:'""'},[`${t}-total-text`]:{display:"inline-block",height:e.itemSize,marginInlineEnd:e.marginXS,lineHeight:`${e.itemSize-2}px`,verticalAlign:"middle"}}),zG(e)),OG(e)),RG(e)),AG(e)),PG(e)),{[`@media only screen and (max-width: ${e.screenLG}px)`]:{[`${t}-item`]:{"&-after-jump-prev, &-before-jump-next":{display:"none"}}},[`@media only screen and (max-width: ${e.screenSM}px)`]:{[`${t}-options`]:{display:"none"}}}),[`&${e.componentCls}-rtl`]:{direction:"rtl"}}},LG=e=>{const{componentCls:t}=e;return{[`${t}${t}-disabled:not(${t}-mini)`]:{"&, &:hover":{[`${t}-item-link`]:{borderColor:e.colorBorder}},"&:focus-visible":{[`${t}-item-link`]:{borderColor:e.colorBorder}},[`${t}-item, ${t}-item-link`]:{backgroundColor:e.colorBgContainerDisabled,borderColor:e.colorBorder,[`&:hover:not(${t}-item-active)`]:{backgroundColor:e.colorBgContainerDisabled,borderColor:e.colorBorder,a:{color:e.colorTextDisabled}},[`&${t}-item-active`]:{backgroundColor:e.itemActiveBgDisabled}},[`${t}-prev, ${t}-next`]:{"&:hover button":{backgroundColor:e.colorBgContainerDisabled,borderColor:e.colorBorder,color:e.colorTextDisabled},[`${t}-item-link`]:{backgroundColor:e.colorBgContainerDisabled,borderColor:e.colorBorder}}},[`${t}:not(${t}-mini)`]:{[`${t}-prev, ${t}-next`]:{"&:hover button":{borderColor:e.colorPrimaryHover,backgroundColor:e.itemBg},[`${t}-item-link`]:{backgroundColor:e.itemLinkBg,borderColor:e.colorBorder},[`&:hover ${t}-item-link`]:{borderColor:e.colorPrimary,backgroundColor:e.itemBg,color:e.colorPrimary},[`&${t}-disabled`]:{[`${t}-item-link`]:{borderColor:e.colorBorder,color:e.colorTextDisabled}}},[`${t}-item`]:{backgroundColor:e.itemBg,border:`${e.lineWidth}px ${e.lineType} ${e.colorBorder}`,[`&:hover:not(${t}-item-active)`]:{borderColor:e.colorPrimary,backgroundColor:e.itemBg,a:{color:e.colorPrimary}},"&-active":{borderColor:e.colorPrimary}}}}},DG=e=>{const{componentCls:t}=e;return{[`${t}:not(${t}-disabled)`]:{[`${t}-item`]:Object.assign({},LO(e)),[`${t}-jump-prev, ${t}-jump-next`]:{"&:focus-visible":Object.assign({[`${t}-item-link-icon`]:{opacity:1},[`${t}-item-ellipsis`]:{opacity:0}},am(e))},[`${t}-prev, ${t}-next`]:{[`&:focus-visible ${t}-item-link`]:Object.assign({},am(e))}}}},$G=_o("Pagination",e=>{const t=$r(e,{inputOutlineOffset:0,paginationMiniOptionsMarginInlineStart:e.marginXXS/2,paginationMiniQuickJumperInputWidth:e.controlHeightLG*1.1,paginationItemPaddingInline:e.marginXXS*1.5,paginationEllipsisLetterSpacing:e.marginXXS/2,paginationSlashMarginInlineStart:e.marginXXS,paginationSlashMarginInlineEnd:e.marginSM,paginationEllipsisTextIndent:"0.13em"},Ek(e),Ck(e));return[kG(t),DG(t),e.wireframe&&LG(t)]},e=>({itemBg:e.colorBgContainer,itemSize:e.controlHeight,itemSizeSM:e.controlHeightSM,itemActiveBg:e.colorBgContainer,itemLinkBg:e.colorBgContainer,itemActiveColorDisabled:e.colorTextDisabled,itemActiveBgDisabled:e.controlItemBgActiveDisabled,itemInputBg:e.colorBgContainer,miniOptionsSizeChangerTop:0}));var FG=globalThis&&globalThis.__rest||function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(r[a[c]]=e[a[c]]);return r};const BG=e=>{const{prefixCls:t,selectPrefixCls:r,className:a,rootClassName:c,style:f,size:y,locale:l,selectComponentClass:w,responsive:C,showSizeChanger:A}=e,M=FG(e,["prefixCls","selectPrefixCls","className","rootClassName","style","size","locale","selectComponentClass","responsive","showSizeChanger"]),{xs:k}=uk(C),{getPrefixCls:N,direction:D,pagination:U={}}=T.useContext(cr),q=N("pagination",t),[F,j]=$G(q),V=A??U.showSizeChanger,X=T.useMemo(()=>{const ie=T.createElement("span",{className:`${q}-item-ellipsis`},"•••"),fe=T.createElement("button",{className:`${q}-item-link`,type:"button",tabIndex:-1},D==="rtl"?T.createElement(FM,null):T.createElement(BM,null)),Te=T.createElement("button",{className:`${q}-item-link`,type:"button",tabIndex:-1},D==="rtl"?T.createElement(BM,null):T.createElement(FM,null)),$e=T.createElement("a",{className:`${q}-item-link`},T.createElement("div",{className:`${q}-item-container`},D==="rtl"?T.createElement(GM,{className:`${q}-item-link-icon`}):T.createElement(HM,{className:`${q}-item-link-icon`}),ie)),Fe=T.createElement("a",{className:`${q}-item-link`},T.createElement("div",{className:`${q}-item-container`},D==="rtl"?T.createElement(HM,{className:`${q}-item-link-icon`}):T.createElement(GM,{className:`${q}-item-link-icon`}),ie));return{prevIcon:fe,nextIcon:Te,jumpPrevIcon:$e,jumpNextIcon:Fe}},[D,q]),[te]=zS("Pagination",SO),re=Object.assign(Object.assign({},te),l),Q=bl(y),ne=Q==="small"||!!(k&&!Q&&C),ee=N("select",r),me=$t({[`${q}-mini`]:ne,[`${q}-rtl`]:D==="rtl"},U==null?void 0:U.className,a,c,j),ce=Object.assign(Object.assign({},U==null?void 0:U.style),f);return F(T.createElement(zk,Object.assign({},X,M,{style:ce,prefixCls:q,selectPrefixCls:ee,className:me,selectComponentClass:w||(ne?kk:Lk),locale:re,showSizeChanger:V})))},NG=BG,jG=new Cr("antSpinMove",{to:{opacity:1}}),UG=new Cr("antRotate",{to:{transform:"rotate(405deg)"}}),VG=e=>(e.dotSize-e.fontSize)/2+2,HG=e=>({[`${e.componentCls}`]:Object.assign(Object.assign({},da(e)),{position:"absolute",display:"none",color:e.colorPrimary,fontSize:0,textAlign:"center",verticalAlign:"middle",opacity:0,transition:`transform ${e.motionDurationSlow} ${e.motionEaseInOutCirc}`,"&-spinning":{position:"static",display:"inline-block",opacity:1},[`${e.componentCls}-text`]:{fontSize:e.fontSize,paddingTop:VG(e)},"&-fullscreen":{position:"fixed",width:"100vw",height:"100vh",backgroundColor:e.colorBgMask,zIndex:e.zIndexPopupBase,inset:0,display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"center",pointerEvents:"none",opacity:0,visibility:"hidden",transition:`all ${e.motionDurationMid}`,"&-show":{opacity:1,visibility:"visible"},[`${e.componentCls}-dot ${e.componentCls}-dot-item`]:{backgroundColor:e.colorWhite},[`${e.componentCls}-text`]:{color:e.colorTextLightSolid}},"&-nested-loading":{position:"relative",[`> div > ${e.componentCls}`]:{position:"absolute",top:0,insetInlineStart:0,zIndex:4,display:"block",width:"100%",height:"100%",maxHeight:e.contentHeight,[`${e.componentCls}-dot`]:{position:"absolute",top:"50%",insetInlineStart:"50%",margin:-e.dotSize/2},[`${e.componentCls}-text`]:{position:"absolute",top:"50%",width:"100%",textShadow:`0 1px 2px ${e.colorBgContainer}`},[`&${e.componentCls}-show-text ${e.componentCls}-dot`]:{marginTop:-(e.dotSize/2)-10},"&-sm":{[`${e.componentCls}-dot`]:{margin:-e.dotSizeSM/2},[`${e.componentCls}-text`]:{paddingTop:(e.dotSizeSM-e.fontSize)/2+2},[`&${e.componentCls}-show-text ${e.componentCls}-dot`]:{marginTop:-(e.dotSizeSM/2)-10}},"&-lg":{[`${e.componentCls}-dot`]:{margin:-(e.dotSizeLG/2)},[`${e.componentCls}-text`]:{paddingTop:(e.dotSizeLG-e.fontSize)/2+2},[`&${e.componentCls}-show-text ${e.componentCls}-dot`]:{marginTop:-(e.dotSizeLG/2)-10}}},[`${e.componentCls}-container`]:{position:"relative",transition:`opacity ${e.motionDurationSlow}`,"&::after":{position:"absolute",top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,zIndex:10,width:"100%",height:"100%",background:e.colorBgContainer,opacity:0,transition:`all ${e.motionDurationSlow}`,content:'""',pointerEvents:"none"}},[`${e.componentCls}-blur`]:{clear:"both",opacity:.5,userSelect:"none",pointerEvents:"none","&::after":{opacity:.4,pointerEvents:"auto"}}},"&-tip":{color:e.spinDotDefault},[`${e.componentCls}-dot`]:{position:"relative",display:"inline-block",fontSize:e.dotSize,width:"1em",height:"1em","&-item":{position:"absolute",display:"block",width:(e.dotSize-e.marginXXS/2)/2,height:(e.dotSize-e.marginXXS/2)/2,backgroundColor:e.colorPrimary,borderRadius:"100%",transform:"scale(0.75)",transformOrigin:"50% 50%",opacity:.3,animationName:jG,animationDuration:"1s",animationIterationCount:"infinite",animationTimingFunction:"linear",animationDirection:"alternate","&:nth-child(1)":{top:0,insetInlineStart:0},"&:nth-child(2)":{top:0,insetInlineEnd:0,animationDelay:"0.4s"},"&:nth-child(3)":{insetInlineEnd:0,bottom:0,animationDelay:"0.8s"},"&:nth-child(4)":{bottom:0,insetInlineStart:0,animationDelay:"1.2s"}},"&-spin":{transform:"rotate(45deg)",animationName:UG,animationDuration:"1.2s",animationIterationCount:"infinite",animationTimingFunction:"linear"}},[`&-sm ${e.componentCls}-dot`]:{fontSize:e.dotSizeSM,i:{width:(e.dotSizeSM-e.marginXXS/2)/2,height:(e.dotSizeSM-e.marginXXS/2)/2}},[`&-lg ${e.componentCls}-dot`]:{fontSize:e.dotSizeLG,i:{width:(e.dotSizeLG-e.marginXXS)/2,height:(e.dotSizeLG-e.marginXXS)/2}},[`&${e.componentCls}-show-text ${e.componentCls}-text`]:{display:"block"}})}),GG=_o("Spin",e=>{const t=$r(e,{spinDotDefault:e.colorTextDescription});return[HG(t)]},e=>({contentHeight:400,dotSize:e.controlHeightLG/2,dotSizeSM:e.controlHeightLG*.35,dotSizeLG:e.controlHeight}));var WG=globalThis&&globalThis.__rest||function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(r[a[c]]=e[a[c]]);return r};let Wv=null;function qG(e,t){const{indicator:r}=t,a=`${e}-dot`;return r===null?null:sm(r)?vl(r,{className:$t(r.props.className,a)}):sm(Wv)?vl(Wv,{className:$t(Wv.props.className,a)}):T.createElement("span",{className:$t(a,`${e}-dot-spin`)},T.createElement("i",{className:`${e}-dot-item`,key:1}),T.createElement("i",{className:`${e}-dot-item`,key:2}),T.createElement("i",{className:`${e}-dot-item`,key:3}),T.createElement("i",{className:`${e}-dot-item`,key:4}))}function ZG(e,t){return!!e&&!!t&&!isNaN(Number(t))}const XG=e=>{const{spinPrefixCls:t,spinning:r=!0,delay:a=0,className:c,rootClassName:f,size:y="default",tip:l,wrapperClassName:w,style:C,children:A,hashId:M,fullscreen:k}=e,N=WG(e,["spinPrefixCls","spinning","delay","className","rootClassName","size","tip","wrapperClassName","style","children","hashId","fullscreen"]),[D,U]=T.useState(()=>r&&!ZG(r,a));T.useEffect(()=>{if(r){const ne=vH(a,()=>{U(!0)});return ne(),()=>{var ee;(ee=ne==null?void 0:ne.cancel)===null||ee===void 0||ee.call(ne)}}U(!1)},[a,r]);const q=T.useMemo(()=>typeof A<"u"&&!k,[A,k]),{direction:F,spin:j}=T.useContext(cr),V=$t(t,j==null?void 0:j.className,{[`${t}-sm`]:y==="small",[`${t}-lg`]:y==="large",[`${t}-spinning`]:D,[`${t}-show-text`]:!!l,[`${t}-fullscreen`]:k,[`${t}-fullscreen-show`]:k&&D,[`${t}-rtl`]:F==="rtl"},c,f,M),X=$t(`${t}-container`,{[`${t}-blur`]:D}),te=Sc(N,["indicator","prefixCls"]),re=Object.assign(Object.assign({},j==null?void 0:j.style),C),Q=T.createElement("div",Object.assign({},te,{style:re,className:V,"aria-live":"polite","aria-busy":D}),qG(t,e),l&&(q||k)?T.createElement("div",{className:`${t}-text`},l):null);return q?T.createElement("div",Object.assign({},te,{className:$t(`${t}-nested-loading`,w,M)}),D&&T.createElement("div",{key:"loading"},Q),T.createElement("div",{className:X,key:"container"},A)):Q},Dk=e=>{const{prefixCls:t}=e,{getPrefixCls:r}=T.useContext(cr),a=r("spin",t),[c,f]=GG(a),y=Object.assign(Object.assign({},e),{spinPrefixCls:a,hashId:f});return c(T.createElement(XG,Object.assign({},y)))};Dk.setDefaultIndicator=e=>{Wv=e};const KG=Dk,rE=st.createContext({});rE.Consumer;var $k=globalThis&&globalThis.__rest||function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(r[a[c]]=e[a[c]]);return r};const YG=e=>{var{prefixCls:t,className:r,avatar:a,title:c,description:f}=e,y=$k(e,["prefixCls","className","avatar","title","description"]);const{getPrefixCls:l}=T.useContext(cr),w=l("list",t),C=$t(`${w}-item-meta`,r),A=st.createElement("div",{className:`${w}-item-meta-content`},c&&st.createElement("h4",{className:`${w}-item-meta-title`},c),f&&st.createElement("div",{className:`${w}-item-meta-description`},f));return st.createElement("div",Object.assign({},y,{className:C}),a&&st.createElement("div",{className:`${w}-item-meta-avatar`},a),(c||f)&&A)},JG=(e,t)=>{var{prefixCls:r,children:a,actions:c,extra:f,className:y,colStyle:l}=e,w=$k(e,["prefixCls","children","actions","extra","className","colStyle"]);const{grid:C,itemLayout:A}=T.useContext(rE),{getPrefixCls:M}=T.useContext(cr),k=()=>{let j;return T.Children.forEach(a,V=>{typeof V=="string"&&(j=!0)}),j&&T.Children.count(a)>1},N=()=>A==="vertical"?!!f:!k(),D=M("list",r),U=c&&c.length>0&&st.createElement("ul",{className:`${D}-item-action`,key:"actions"},c.map((j,V)=>st.createElement("li",{key:`${D}-item-action-${V}`},j,V!==c.length-1&&st.createElement("em",{className:`${D}-item-action-split`})))),q=C?"div":"li",F=st.createElement(q,Object.assign({},w,C?{}:{ref:t},{className:$t(`${D}-item`,{[`${D}-item-no-flex`]:!N()},y)}),A==="vertical"&&f?[st.createElement("div",{className:`${D}-item-main`,key:"content"},a,U),st.createElement("div",{className:`${D}-item-extra`,key:"extra"},f)]:[a,U,vl(f,{key:"extra"})]);return C?st.createElement(PH,{ref:t,flex:1,style:l},F):F},Fk=T.forwardRef(JG);Fk.Meta=YG;const QG=Fk,eW=e=>{const{listBorderedCls:t,componentCls:r,paddingLG:a,margin:c,itemPaddingSM:f,itemPaddingLG:y,marginLG:l,borderRadiusLG:w}=e;return{[`${t}`]:{border:`${e.lineWidth}px ${e.lineType} ${e.colorBorder}`,borderRadius:w,[`${r}-header,${r}-footer,${r}-item`]:{paddingInline:a},[`${r}-pagination`]:{margin:`${c}px ${l}px`}},[`${t}${r}-sm`]:{[`${r}-item,${r}-header,${r}-footer`]:{padding:f}},[`${t}${r}-lg`]:{[`${r}-item,${r}-header,${r}-footer`]:{padding:y}}}},tW=e=>{const{componentCls:t,screenSM:r,screenMD:a,marginLG:c,marginSM:f,margin:y}=e;return{[`@media screen and (max-width:${a})`]:{[`${t}`]:{[`${t}-item`]:{[`${t}-item-action`]:{marginInlineStart:c}}},[`${t}-vertical`]:{[`${t}-item`]:{[`${t}-item-extra`]:{marginInlineStart:c}}}},[`@media screen and (max-width: ${r})`]:{[`${t}`]:{[`${t}-item`]:{flexWrap:"wrap",[`${t}-action`]:{marginInlineStart:f}}},[`${t}-vertical`]:{[`${t}-item`]:{flexWrap:"wrap-reverse",[`${t}-item-main`]:{minWidth:e.contentWidth},[`${t}-item-extra`]:{margin:`auto auto ${y}px`}}}}}},nW=e=>{const{componentCls:t,antCls:r,controlHeight:a,minHeight:c,paddingSM:f,marginLG:y,padding:l,itemPadding:w,colorPrimary:C,itemPaddingSM:A,itemPaddingLG:M,paddingXS:k,margin:N,colorText:D,colorTextDescription:U,motionDurationSlow:q,lineWidth:F,headerBg:j,footerBg:V,emptyTextPadding:X,metaMarginBottom:te,avatarMarginRight:re,titleMarginBottom:Q,descriptionFontSize:ne}=e,ee={};return["start","center","end"].forEach(me=>{ee[`&-align-${me}`]={textAlign:me}}),{[`${t}`]:Object.assign(Object.assign({},da(e)),{position:"relative","*":{outline:"none"},[`${t}-header`]:{background:j},[`${t}-footer`]:{background:V},[`${t}-header, ${t}-footer`]:{paddingBlock:f},[`${t}-pagination`]:Object.assign(Object.assign({marginBlockStart:y},ee),{[`${r}-pagination-options`]:{textAlign:"start"}}),[`${t}-spin`]:{minHeight:c,textAlign:"center"},[`${t}-items`]:{margin:0,padding:0,listStyle:"none"},[`${t}-item`]:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:w,color:D,[`${t}-item-meta`]:{display:"flex",flex:1,alignItems:"flex-start",maxWidth:"100%",[`${t}-item-meta-avatar`]:{marginInlineEnd:re},[`${t}-item-meta-content`]:{flex:"1 0",width:0,color:D},[`${t}-item-meta-title`]:{margin:`0 0 ${e.marginXXS}px 0`,color:D,fontSize:e.fontSize,lineHeight:e.lineHeight,"> a":{color:D,transition:`all ${q}`,"&:hover":{color:C}}},[`${t}-item-meta-description`]:{color:U,fontSize:ne,lineHeight:e.lineHeight}},[`${t}-item-action`]:{flex:"0 0 auto",marginInlineStart:e.marginXXL,padding:0,fontSize:0,listStyle:"none","& > li":{position:"relative",display:"inline-block",padding:`0 ${k}px`,color:U,fontSize:e.fontSize,lineHeight:e.lineHeight,textAlign:"center","&:first-child":{paddingInlineStart:0}},[`${t}-item-action-split`]:{position:"absolute",insetBlockStart:"50%",insetInlineEnd:0,width:F,height:Math.ceil(e.fontSize*e.lineHeight)-e.marginXXS*2,transform:"translateY(-50%)",backgroundColor:e.colorSplit}}},[`${t}-empty`]:{padding:`${l}px 0`,color:U,fontSize:e.fontSizeSM,textAlign:"center"},[`${t}-empty-text`]:{padding:X,color:e.colorTextDisabled,fontSize:e.fontSize,textAlign:"center"},[`${t}-item-no-flex`]:{display:"block"}}),[`${t}-grid ${r}-col > ${t}-item`]:{display:"block",maxWidth:"100%",marginBlockEnd:N,paddingBlock:0,borderBlockEnd:"none"},[`${t}-vertical ${t}-item`]:{alignItems:"initial",[`${t}-item-main`]:{display:"block",flex:1},[`${t}-item-extra`]:{marginInlineStart:y},[`${t}-item-meta`]:{marginBlockEnd:te,[`${t}-item-meta-title`]:{marginBlockStart:0,marginBlockEnd:Q,color:D,fontSize:e.fontSizeLG,lineHeight:e.lineHeightLG}},[`${t}-item-action`]:{marginBlockStart:l,marginInlineStart:"auto","> li":{padding:`0 ${l}px`,"&:first-child":{paddingInlineStart:0}}}},[`${t}-split ${t}-item`]:{borderBlockEnd:`${e.lineWidth}px ${e.lineType} ${e.colorSplit}`,"&:last-child":{borderBlockEnd:"none"}},[`${t}-split ${t}-header`]:{borderBlockEnd:`${e.lineWidth}px ${e.lineType} ${e.colorSplit}`},[`${t}-split${t}-empty ${t}-footer`]:{borderTop:`${e.lineWidth}px ${e.lineType} ${e.colorSplit}`},[`${t}-loading ${t}-spin-nested-loading`]:{minHeight:a},[`${t}-split${t}-something-after-last-item ${r}-spin-container > ${t}-items > ${t}-item:last-child`]:{borderBlockEnd:`${e.lineWidth}px ${e.lineType} ${e.colorSplit}`},[`${t}-lg ${t}-item`]:{padding:M},[`${t}-sm ${t}-item`]:{padding:A},[`${t}:not(${t}-vertical)`]:{[`${t}-item-no-flex`]:{[`${t}-item-action`]:{float:"right"}}}}},rW=_o("List",e=>{const t=$r(e,{listBorderedCls:`${e.componentCls}-bordered`,minHeight:e.controlHeightLG});return[nW(t),eW(t),tW(t)]},e=>({contentWidth:220,itemPadding:`${e.paddingContentVertical}px 0`,itemPaddingSM:`${e.paddingContentVerticalSM}px ${e.paddingContentHorizontal}px`,itemPaddingLG:`${e.paddingContentVerticalLG}px ${e.paddingContentHorizontalLG}px`,headerBg:"transparent",footerBg:"transparent",emptyTextPadding:e.padding,metaMarginBottom:e.padding,avatarMarginRight:e.padding,titleMarginBottom:e.paddingSM,descriptionFontSize:e.fontSize}));var iW=globalThis&&globalThis.__rest||function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(r[a[c]]=e[a[c]]);return r};function oW(e){var t,{pagination:r=!1,prefixCls:a,bordered:c=!1,split:f=!0,className:y,rootClassName:l,style:w,children:C,itemLayout:A,loadMore:M,grid:k,dataSource:N=[],size:D,header:U,footer:q,loading:F=!1,rowKey:j,renderItem:V,locale:X}=e,te=iW(e,["pagination","prefixCls","bordered","split","className","rootClassName","style","children","itemLayout","loadMore","grid","dataSource","size","header","footer","loading","rowKey","renderItem","locale"]);const re=r&&typeof r=="object"?r:{},[Q,ne]=T.useState(re.defaultCurrent||1),[ee,me]=T.useState(re.defaultPageSize||10),{getPrefixCls:ce,renderEmpty:ie,direction:fe,list:Te}=T.useContext(cr),$e={current:1,total:0},Fe=rt=>(Lt,Mt)=>{var sn;ne(Lt),me(Mt),r&&r[rt]&&((sn=r==null?void 0:r[rt])===null||sn===void 0||sn.call(r,Lt,Mt))},Ne=Fe("onChange"),pe=Fe("onShowSizeChange"),He=(rt,Lt)=>{if(!V)return null;let Mt;return typeof j=="function"?Mt=j(rt):j?Mt=rt[j]:Mt=rt.key,Mt||(Mt=`list-item-${Lt}`),T.createElement(T.Fragment,{key:Mt},V(rt,Lt))},Be=()=>!!(M||r||q),Ge=ce("list",a),[Qe,gt]=rW(Ge);let St=F;typeof St=="boolean"&&(St={spinning:St});const xt=St&&St.spinning,Nt=bl(D);let jt="";switch(Nt){case"large":jt="lg";break;case"small":jt="sm";break}const bt=$t(Ge,{[`${Ge}-vertical`]:A==="vertical",[`${Ge}-${jt}`]:jt,[`${Ge}-split`]:f,[`${Ge}-bordered`]:c,[`${Ge}-loading`]:xt,[`${Ge}-grid`]:!!k,[`${Ge}-something-after-last-item`]:Be(),[`${Ge}-rtl`]:fe==="rtl"},Te==null?void 0:Te.className,y,l,gt),ut=xG($e,{total:N.length,current:Q,pageSize:ee},r||{}),Tt=Math.ceil(ut.total/ut.pageSize);ut.current>Tt&&(ut.current=Tt);const ft=r?T.createElement("div",{className:$t(`${Ge}-pagination`,`${Ge}-pagination-align-${(t=ut==null?void 0:ut.align)!==null&&t!==void 0?t:"end"}`)},T.createElement(NG,Object.assign({},ut,{onChange:Ne,onShowSizeChange:pe}))):null;let yt=mn(N);r&&N.length>(ut.current-1)*ut.pageSize&&(yt=mn(N).splice((ut.current-1)*ut.pageSize,ut.pageSize));const ct=Object.keys(k||{}).some(rt=>["xs","sm","md","lg","xl","xxl"].includes(rt)),It=uk(ct),Ct=T.useMemo(()=>{for(let rt=0;rt<Tu.length;rt+=1){const Lt=Tu[rt];if(It[Lt])return Lt}},[It]),Qt=T.useMemo(()=>{if(!k)return;const rt=Ct&&k[Ct]?k[Ct]:k.column;if(rt)return{width:`${100/rt}%`,maxWidth:`${100/rt}%`}},[k==null?void 0:k.column,Ct]);let Vt=xt&&T.createElement("div",{style:{minHeight:53}});if(yt.length>0){const rt=yt.map((Lt,Mt)=>He(Lt,Mt));Vt=k?T.createElement(OH,{gutter:k.gutter},T.Children.map(rt,Lt=>T.createElement("div",{key:Lt==null?void 0:Lt.key,style:Qt},Lt))):T.createElement("ul",{className:`${Ge}-items`},rt)}else!C&&!xt&&(Vt=T.createElement("div",{className:`${Ge}-empty-text`},X&&X.emptyText||(ie==null?void 0:ie("List"))||T.createElement(ik,{componentName:"List"})));const Bt=ut.position||"bottom",ot=T.useMemo(()=>({grid:k,itemLayout:A}),[JSON.stringify(k),A]);return Qe(T.createElement(rE.Provider,{value:ot},T.createElement("div",Object.assign({style:Object.assign(Object.assign({},Te==null?void 0:Te.style),w),className:bt},te),(Bt==="top"||Bt==="both")&&ft,U&&T.createElement("div",{className:`${Ge}-header`},U),T.createElement(KG,Object.assign({},St),Vt,C),q&&T.createElement("div",{className:`${Ge}-footer`},q),M||(Bt==="bottom"||Bt==="both")&&ft)))}oW.Item=QG;let Aa=null,pu=e=>e(),hm=[],Fy={};function qM(){const{prefixCls:e,getContainer:t,duration:r,rtl:a,maxCount:c,top:f}=Fy,y=e??KO().getPrefixCls("message"),l=(t==null?void 0:t())||document.body;return{prefixCls:y,getContainer:()=>l,duration:r,rtl:a,maxCount:c,top:f}}const aW=T.forwardRef((e,t)=>{const[r,a]=T.useState(qM),[c,f]=lz(r),y=KO(),l=y.getRootPrefixCls(),w=y.getIconPrefixCls(),C=y.getTheme(),A=()=>{a(qM)};return T.useEffect(A,[]),T.useImperativeHandle(t,()=>{const M=Object.assign({},c);return Object.keys(M).forEach(k=>{M[k]=function(){return A(),c[k].apply(c,arguments)}}),{instance:M,sync:A}}),T.createElement(YO,{prefixCls:l,iconPrefixCls:w,theme:C},f)});function P0(){if(!Aa){const e=document.createDocumentFragment(),t={fragment:e};Aa=t,pu(()=>{cz(T.createElement(aW,{ref:r=>{const{instance:a,sync:c}=r||{};Promise.resolve().then(()=>{!t.instance&&a&&(t.instance=a,t.sync=c,P0())})}}),e)});return}Aa.instance&&(hm.forEach(e=>{const{type:t,skipped:r}=e;if(!r)switch(t){case"open":{pu(()=>{const a=Aa.instance.open(Object.assign(Object.assign({},Fy),e.config));a==null||a.then(e.resolve),e.setCloseFn(a)});break}case"destroy":pu(()=>{Aa==null||Aa.instance.destroy(e.key)});break;default:pu(()=>{var a;const c=(a=Aa.instance)[t].apply(a,mn(e.args));c==null||c.then(e.resolve),e.setCloseFn(c)})}}),hm=[])}function sW(e){Fy=Object.assign(Object.assign({},Fy),e),pu(()=>{var t;(t=Aa==null?void 0:Aa.sync)===null||t===void 0||t.call(Aa)})}function lW(e){const t=BS(r=>{let a;const c={type:"open",config:e,resolve:r,setCloseFn:f=>{a=f}};return hm.push(c),()=>{a?pu(()=>{a()}):c.skipped=!0}});return P0(),t}function cW(e,t){const r=BS(a=>{let c;const f={type:e,args:t,resolve:a,setCloseFn:y=>{c=y}};return hm.push(f),()=>{c?pu(()=>{c()}):f.skipped=!0}});return P0(),r}function uW(e){hm.push({type:"destroy",key:e}),P0()}const dW=["success","info","warning","error","loading"],hW={open:lW,destroy:uW,config:sW,useMessage:uj,_InternalPanelDoNotUseOrYouWillBeFired:nj},Bk=hW;dW.forEach(e=>{Bk[e]=function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return cW(e,r)}});const IY=Bk;var fW=globalThis&&globalThis.__rest||function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(r[a[c]]=e[a[c]]);return r};const pW={border:0,background:"transparent",padding:0,lineHeight:"inherit",display:"inline-block"},mW=T.forwardRef((e,t)=>{const r=C=>{const{keyCode:A}=C;A===Ht.ENTER&&C.preventDefault()},a=C=>{const{keyCode:A}=C,{onClick:M}=e;A===Ht.ENTER&&M&&M()},{style:c,noStyle:f,disabled:y}=e,l=fW(e,["style","noStyle","disabled"]);let w={};return f||(w=Object.assign({},pW)),y&&(w.pointerEvents="none"),w=Object.assign(Object.assign({},w),c),T.createElement("div",Object.assign({role:"button",tabIndex:0,ref:t},l,{onKeyDown:r,onKeyUp:a,style:w}))}),ZM=mW;var gW={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2L263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"}}]},name:"copy",theme:"outlined"};const vW=gW;var yW=function(t,r){return T.createElement(Xi,Cn({},t,{ref:r,icon:vW}))};const _W=T.forwardRef(yW);var xW={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"};const bW=xW;var wW=function(t,r){return T.createElement(Xi,Cn({},t,{ref:r,icon:bW}))};const SW=T.forwardRef(wW);var EW=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,r=[],a=0;a<e.rangeCount;a++)r.push(e.getRangeAt(a));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null;break}return e.removeAllRanges(),function(){e.type==="Caret"&&e.removeAllRanges(),e.rangeCount||r.forEach(function(c){e.addRange(c)}),t&&t.focus()}},CW=EW,XM={"text/plain":"Text","text/html":"Url",default:"Text"},TW="Copy to clipboard: #{key}, Enter";function IW(e){var t=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}function MW(e,t){var r,a,c,f,y,l,w=!1;t||(t={}),r=t.debug||!1;try{c=CW(),f=document.createRange(),y=document.getSelection(),l=document.createElement("span"),l.textContent=e,l.ariaHidden="true",l.style.all="unset",l.style.position="fixed",l.style.top=0,l.style.clip="rect(0, 0, 0, 0)",l.style.whiteSpace="pre",l.style.webkitUserSelect="text",l.style.MozUserSelect="text",l.style.msUserSelect="text",l.style.userSelect="text",l.addEventListener("copy",function(A){if(A.stopPropagation(),t.format)if(A.preventDefault(),typeof A.clipboardData>"u"){r&&console.warn("unable to use e.clipboardData"),r&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var M=XM[t.format]||XM.default;window.clipboardData.setData(M,e)}else A.clipboardData.clearData(),A.clipboardData.setData(t.format,e);t.onCopy&&(A.preventDefault(),t.onCopy(A.clipboardData))}),document.body.appendChild(l),f.selectNodeContents(l),y.addRange(f);var C=document.execCommand("copy");if(!C)throw new Error("copy command was unsuccessful");w=!0}catch(A){r&&console.error("unable to copy using execCommand: ",A),r&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),w=!0}catch(M){r&&console.error("unable to copy using clipboardData: ",M),r&&console.error("falling back to prompt"),a=IW("message"in t?t.message:TW),window.prompt(a,e)}}finally{y&&(typeof y.removeRange=="function"?y.removeRange(f):y.removeAllRanges()),l&&document.body.removeChild(l),c()}return w}var PW=MW;const AW=_c(PW);var RW={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 170h-60c-4.4 0-8 3.6-8 8v518H310v-73c0-6.7-7.8-10.5-13-6.3l-141.9 112a8 8 0 000 12.6l141.9 112c5.3 4.2 13 .4 13-6.3v-75h498c35.3 0 64-28.7 64-64V178c0-4.4-3.6-8-8-8z"}}]},name:"enter",theme:"outlined"};const OW=RW;var zW=function(t,r){return T.createElement(Xi,Cn({},t,{ref:r,icon:OW}))};const kW=T.forwardRef(zW),LW=(e,t,r,a)=>{const{titleMarginBottom:c,fontWeightStrong:f}=a;return{marginBottom:c,color:r,fontWeight:f,fontSize:e,lineHeight:t}},DW=e=>{const t=[1,2,3,4,5],r={};return t.forEach(a=>{r[`
      h${a}&,
      div&-h${a},
      div&-h${a} > textarea,
      h${a}
    `]=LW(e[`fontSizeHeading${a}`],e[`lineHeightHeading${a}`],e.colorTextHeading,e)}),r},$W=e=>{const{componentCls:t}=e;return{"a&, a":Object.assign(Object.assign({},kO(e)),{textDecoration:e.linkDecoration,"&:active, &:hover":{textDecoration:e.linkHoverDecoration},[`&[disabled], &${t}-disabled`]:{color:e.colorTextDisabled,cursor:"not-allowed","&:active, &:hover":{color:e.colorTextDisabled},"&:active":{pointerEvents:"none"}}})}},FW=e=>({code:{margin:"0 0.2em",paddingInline:"0.4em",paddingBlock:"0.2em 0.1em",fontSize:"85%",fontFamily:e.fontFamilyCode,background:"rgba(150, 150, 150, 0.1)",border:"1px solid rgba(100, 100, 100, 0.2)",borderRadius:3},kbd:{margin:"0 0.2em",paddingInline:"0.4em",paddingBlock:"0.15em 0.1em",fontSize:"90%",fontFamily:e.fontFamilyCode,background:"rgba(150, 150, 150, 0.06)",border:"1px solid rgba(100, 100, 100, 0.2)",borderBottomWidth:2,borderRadius:3},mark:{padding:0,backgroundColor:X5[2]},"u, ins":{textDecoration:"underline",textDecorationSkipInk:"auto"},"s, del":{textDecoration:"line-through"},strong:{fontWeight:600},"ul, ol":{marginInline:0,marginBlock:"0 1em",padding:0,li:{marginInline:"20px 0",marginBlock:0,paddingInline:"4px 0",paddingBlock:0}},ul:{listStyleType:"circle",ul:{listStyleType:"disc"}},ol:{listStyleType:"decimal"},"pre, blockquote":{margin:"1em 0"},pre:{padding:"0.4em 0.6em",whiteSpace:"pre-wrap",wordWrap:"break-word",background:"rgba(150, 150, 150, 0.1)",border:"1px solid rgba(100, 100, 100, 0.2)",borderRadius:3,fontFamily:e.fontFamilyCode,code:{display:"inline",margin:0,padding:0,fontSize:"inherit",fontFamily:"inherit",background:"transparent",border:0}},blockquote:{paddingInline:"0.6em 0",paddingBlock:0,borderInlineStart:"4px solid rgba(100, 100, 100, 0.2)",opacity:.85}}),BW=e=>{const{componentCls:t,paddingSM:r}=e,a=r;return{"&-edit-content":{position:"relative","div&":{insetInlineStart:-e.paddingSM,marginTop:-a,marginBottom:`calc(1em - ${a}px)`},[`${t}-edit-content-confirm`]:{position:"absolute",insetInlineEnd:e.marginXS+2,insetBlockEnd:e.marginXS,color:e.colorTextDescription,fontWeight:"normal",fontSize:e.fontSize,fontStyle:"normal",pointerEvents:"none"},textarea:{margin:"0!important",MozTransition:"none",height:"1em"}}}},NW=e=>({"&-copy-success":{"\n    &,\n    &:hover,\n    &:focus":{color:e.colorSuccess}}}),jW=()=>({"\n  a&-ellipsis,\n  span&-ellipsis\n  ":{display:"inline-block",maxWidth:"100%"},"&-single-line":{whiteSpace:"nowrap"},"&-ellipsis-single-line":{overflow:"hidden",textOverflow:"ellipsis","a&, span&":{verticalAlign:"bottom"},"> code":{paddingBlock:0,maxWidth:"calc(100% - 1.2em)",display:"inline-block",overflow:"hidden",textOverflow:"ellipsis",verticalAlign:"bottom"}},"&-ellipsis-multiple-line":{display:"-webkit-box",overflow:"hidden",WebkitLineClamp:3,WebkitBoxOrient:"vertical"}}),UW=e=>{const{componentCls:t,titleMarginTop:r}=e;return{[t]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:e.colorText,wordBreak:"break-word",lineHeight:e.lineHeight,[`&${t}-secondary`]:{color:e.colorTextDescription},[`&${t}-success`]:{color:e.colorSuccess},[`&${t}-warning`]:{color:e.colorWarning},[`&${t}-danger`]:{color:e.colorError,"a&:active, a&:focus":{color:e.colorErrorActive},"a&:hover":{color:e.colorErrorHover}},[`&${t}-disabled`]:{color:e.colorTextDisabled,cursor:"not-allowed",userSelect:"none"},"\n        div&,\n        p\n      ":{marginBottom:"1em"}},DW(e)),{[`
      & + h1${t},
      & + h2${t},
      & + h3${t},
      & + h4${t},
      & + h5${t}
      `]:{marginTop:r},"\n      div,\n      ul,\n      li,\n      p,\n      h1,\n      h2,\n      h3,\n      h4,\n      h5":{"\n        + h1,\n        + h2,\n        + h3,\n        + h4,\n        + h5\n        ":{marginTop:r}}}),FW(e)),$W(e)),{[`
        ${t}-expand,
        ${t}-edit,
        ${t}-copy
      `]:Object.assign(Object.assign({},kO(e)),{marginInlineStart:e.marginXXS})}),BW(e)),NW(e)),jW()),{"&-rtl":{direction:"rtl"}})}},Nk=_o("Typography",e=>[UW(e)],()=>({titleMarginTop:"1.2em",titleMarginBottom:"0.5em"})),VW=e=>{const{prefixCls:t,"aria-label":r,className:a,style:c,direction:f,maxLength:y,autoSize:l=!0,value:w,onSave:C,onCancel:A,onEnd:M,component:k,enterIcon:N=T.createElement(kW,null)}=e,D=T.useRef(null),U=T.useRef(!1),q=T.useRef(),[F,j]=T.useState(w);T.useEffect(()=>{j(w)},[w]),T.useEffect(()=>{if(D.current&&D.current.resizableTextArea){const{textArea:Te}=D.current.resizableTextArea;Te.focus();const{length:$e}=Te.value;Te.setSelectionRange($e,$e)}},[]);const V=Te=>{let{target:$e}=Te;j($e.value.replace(/[\n\r]/g,""))},X=()=>{U.current=!0},te=()=>{U.current=!1},re=Te=>{let{keyCode:$e}=Te;U.current||(q.current=$e)},Q=()=>{C(F.trim())},ne=Te=>{let{keyCode:$e,ctrlKey:Fe,altKey:Ne,metaKey:pe,shiftKey:He}=Te;q.current===$e&&!U.current&&!Fe&&!Ne&&!pe&&!He&&($e===Ht.ENTER?(Q(),M==null||M()):$e===Ht.ESC&&A())},ee=()=>{Q()},me=k?`${t}-${k}`:"",[ce,ie]=Nk(t),fe=$t(t,`${t}-edit-content`,{[`${t}-rtl`]:f==="rtl"},a,me,ie);return ce(T.createElement("div",{className:fe,style:c},T.createElement(Ak,{ref:D,maxLength:y,value:F,onChange:V,onKeyDown:re,onKeyUp:ne,onCompositionStart:X,onCompositionEnd:te,onBlur:ee,"aria-label":r,rows:1,autoSize:l}),N!==null?vl(N,{className:`${t}-edit-content-confirm`}):null))},HW=VW;var GW=globalThis&&globalThis.__rest||function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(r[a[c]]=e[a[c]]);return r};const WW=T.forwardRef((e,t)=>{const{prefixCls:r,component:a="article",className:c,rootClassName:f,setContentRef:y,children:l,direction:w,style:C}=e,A=GW(e,["prefixCls","component","className","rootClassName","setContentRef","children","direction","style"]),{getPrefixCls:M,direction:k,typography:N}=T.useContext(cr),D=w??k;let U=t;y&&(U=gs(t,y));const q=M("typography",r),[F,j]=Nk(q),V=$t(q,N==null?void 0:N.className,{[`${q}-rtl`]:D==="rtl"},c,f,j),X=Object.assign(Object.assign({},N==null?void 0:N.style),C);return F(T.createElement(a,Object.assign({className:V,style:X,ref:U},A),l))}),jk=WW;function S1(e,t){return T.useMemo(()=>{const r=!!e;return[r,Object.assign(Object.assign({},t),r&&typeof e=="object"?e:null)]},[e])}const qW=(e,t)=>{const r=T.useRef(!1);T.useEffect(()=>{r.current?e():r.current=!0},t)},ZW=qW;function Uk(e){const t=typeof e;return t==="string"||t==="number"}function XW(e){let t=0;return e.forEach(r=>{Uk(r)?t+=String(r).length:t+=1}),t}function E1(e,t){let r=0;const a=[];for(let c=0;c<e.length;c+=1){if(r===t)return a;const f=e[c],l=Uk(f)?String(f).length:1,w=r+l;if(w>t){const C=t-r;return a.push(String(f).slice(0,C)),a}a.push(f),r=w}return e}const KW=0,Tv=1,KM=2,C1=3,T1=4,YW=e=>{let{enabledMeasure:t,children:r,text:a,width:c,fontSize:f,rows:y,onEllipsis:l}=e;const[[w,C,A],M]=T.useState([0,0,0]),[k,N]=T.useState(0),[D,U]=T.useState(KW),[q,F]=T.useState(0),j=T.useRef(null),V=T.useRef(null),X=T.useMemo(()=>hl(a),[a]),te=T.useMemo(()=>XW(X),[X]),re=T.useMemo(()=>!t||D!==C1?k&&D!==T1&&t?r(E1(X,k),k<te):r(X,!1):r(E1(X,C),C<te),[t,D,r,X,C,te]);Lr(()=>{t&&c&&f&&te&&(U(Tv),M([0,Math.ceil(te/2),te]))},[t,c,f,a,te,y]),Lr(()=>{var me;D===Tv&&F(((me=j.current)===null||me===void 0?void 0:me.offsetHeight)||0)},[D]),Lr(()=>{var me,ce;if(q){if(D===Tv){const ie=((me=V.current)===null||me===void 0?void 0:me.offsetHeight)||0,fe=y*q;ie<=fe?(U(T1),l(!1)):U(KM)}else if(D===KM)if(w!==A){const ie=((ce=V.current)===null||ce===void 0?void 0:ce.offsetHeight)||0,fe=y*q;let Te=w,$e=A;w===A-1?$e=w:ie<=fe?Te=C:$e=C;const Fe=Math.ceil((Te+$e)/2);M([Te,Fe,$e])}else U(C1),N(C),l(!0)}},[D,w,A,y,q]);const Q={width:c,whiteSpace:"normal",margin:0,padding:0},ne=(me,ce,ie)=>T.createElement("span",{"aria-hidden":!0,ref:ce,style:Object.assign({position:"fixed",display:"block",left:0,top:0,zIndex:-9999,visibility:"hidden",pointerEvents:"none",fontSize:Math.ceil(f/2)*2},ie)},me),ee=(me,ce)=>{const ie=E1(X,me);return ne(r(ie,!0),ce,Q)};return T.createElement(T.Fragment,null,re,t&&D!==C1&&D!==T1&&T.createElement(T.Fragment,null,ne("lg",j,{wordBreak:"keep-all",whiteSpace:"nowrap"}),D===Tv?ne(r(X,!1),V,Q):ee(C,V)))},JW=YW,QW=e=>{let{enabledEllipsis:t,isEllipsis:r,children:a,tooltipProps:c}=e;return!(c!=null&&c.title)||!t?a:T.createElement(gw,Object.assign({open:r?void 0:!1},c),a)},eq=QW;var tq=globalThis&&globalThis.__rest||function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(r[a[c]]=e[a[c]]);return r};function nq(e,t){let{mark:r,code:a,underline:c,delete:f,strong:y,keyboard:l,italic:w}=e,C=t;function A(M,k){k&&(C=T.createElement(M,{},C))}return A("strong",y),A("u",c),A("del",f),A("code",a),A("mark",r),A("kbd",l),A("i",w),C}function Iv(e,t,r){return e===!0||e===void 0?t:e||r&&t}function YM(e){return e===!1?[!1,!1]:Array.isArray(e)?e:[e]}const rq="...",iq=T.forwardRef((e,t)=>{var r,a,c;const{prefixCls:f,className:y,style:l,type:w,disabled:C,children:A,ellipsis:M,editable:k,copyable:N,component:D,title:U}=e,q=tq(e,["prefixCls","className","style","type","disabled","children","ellipsis","editable","copyable","component","title"]),{getPrefixCls:F,direction:j}=T.useContext(cr),[V]=zS("Text"),X=T.useRef(null),te=T.useRef(null),re=F("typography",f),Q=Sc(q,["mark","code","delete","underline","strong","keyboard","italic"]),[ne,ee]=S1(k),[me,ce]=ms(!1,{value:ee.editing}),{triggerType:ie=["icon"]}=ee,fe=W=>{var J;W&&((J=ee.onStart)===null||J===void 0||J.call(ee)),ce(W)};ZW(()=>{var W;me||(W=te.current)===null||W===void 0||W.focus()},[me]);const Te=W=>{W==null||W.preventDefault(),fe(!0)},$e=W=>{var J;(J=ee.onChange)===null||J===void 0||J.call(ee,W),fe(!1)},Fe=()=>{var W;(W=ee.onCancel)===null||W===void 0||W.call(ee),fe(!1)},[Ne,pe]=S1(N),[He,Be]=T.useState(!1),Ge=T.useRef(null),Qe={};pe.format&&(Qe.format=pe.format);const gt=()=>{Ge.current&&clearTimeout(Ge.current)},St=W=>{var J;W==null||W.preventDefault(),W==null||W.stopPropagation(),AW(pe.text||String(A)||"",Qe),Be(!0),gt(),Ge.current=setTimeout(()=>{Be(!1)},3e3),(J=pe.onCopy)===null||J===void 0||J.call(pe,W)};T.useEffect(()=>gt,[]);const[xt,Nt]=T.useState(!1),[jt,bt]=T.useState(!1),[ut,Tt]=T.useState(!1),[ft,yt]=T.useState(!1),[ct,It]=T.useState(!1),[Ct,Qt]=T.useState(!0),[Vt,Bt]=S1(M,{expandable:!1}),ot=Vt&&!ut,{rows:rt=1}=Bt,Lt=T.useMemo(()=>!ot||Bt.suffix!==void 0||Bt.onEllipsis||Bt.expandable||ne||Ne,[ot,Bt,ne,Ne]);Lr(()=>{Vt&&!Lt&&(Nt(eM("webkitLineClamp")),bt(eM("textOverflow")))},[Lt,Vt]);const Mt=T.useMemo(()=>Lt?!1:rt===1?jt:xt,[Lt,jt,xt]),sn=ot&&(Mt?ct:ft),An=ot&&rt===1&&Mt,Mn=ot&&rt>1&&Mt,on=W=>{var J;Tt(!0),(J=Bt.onExpand)===null||J===void 0||J.call(Bt,W)},[Vn,Nn]=T.useState(0),[zn,yn]=T.useState(0),rn=(W,J)=>{let{offsetWidth:de}=W;var Se;Nn(de),yn(parseInt((Se=window.getComputedStyle)===null||Se===void 0?void 0:Se.call(window,J).fontSize,10)||0)},Wn=W=>{var J;yt(W),ft!==W&&((J=Bt.onEllipsis)===null||J===void 0||J.call(Bt,W))};T.useEffect(()=>{const W=X.current;if(Vt&&Mt&&W){const J=Mn?W.offsetHeight<W.scrollHeight:W.offsetWidth<W.scrollWidth;ct!==J&&It(J)}},[Vt,Mt,A,Mn,Ct]),T.useEffect(()=>{const W=X.current;if(typeof IntersectionObserver>"u"||!W||!Mt||!ot)return;const J=new IntersectionObserver(()=>{Qt(!!W.offsetParent)});return J.observe(W),()=>{J.disconnect()}},[Mt,ot]);let jn={};Bt.tooltip===!0?jn={title:(r=ee.text)!==null&&r!==void 0?r:A}:T.isValidElement(Bt.tooltip)?jn={title:Bt.tooltip}:typeof Bt.tooltip=="object"?jn=Object.assign({title:(a=ee.text)!==null&&a!==void 0?a:A},Bt.tooltip):jn={title:Bt.tooltip};const fr=T.useMemo(()=>{const W=J=>["string","number"].includes(typeof J);if(!(!Vt||Mt)){if(W(ee.text))return ee.text;if(W(A))return A;if(W(U))return U;if(W(jn.title))return jn.title}},[Vt,Mt,U,jn.title,sn]);if(me)return T.createElement(HW,{value:(c=ee.text)!==null&&c!==void 0?c:typeof A=="string"?A:"",onSave:$e,onCancel:Fe,onEnd:ee.onEnd,prefixCls:re,className:y,style:l,direction:j,component:D,maxLength:ee.maxLength,autoSize:ee.autoSize,enterIcon:ee.enterIcon});const or=()=>{const{expandable:W,symbol:J}=Bt;if(!W)return null;let de;return J?de=J:de=V==null?void 0:V.expand,T.createElement("a",{key:"expand",className:`${re}-expand`,onClick:on,"aria-label":V==null?void 0:V.expand},de)},qn=()=>{if(!ne)return;const{icon:W,tooltip:J}=ee,de=hl(J)[0]||(V==null?void 0:V.edit),Se=typeof de=="string"?de:"";return ie.includes("icon")?T.createElement(gw,{key:"edit",title:J===!1?"":de},T.createElement(ZM,{ref:te,className:`${re}-edit`,onClick:Te,"aria-label":Se},W||T.createElement(SW,{role:"button"}))):null},Qn=()=>{if(!Ne)return;const{tooltips:W,icon:J}=pe,de=YM(W),Se=YM(J),Ie=He?Iv(de[1],V==null?void 0:V.copied):Iv(de[0],V==null?void 0:V.copy),Me=He?V==null?void 0:V.copied:V==null?void 0:V.copy,ke=typeof Ie=="string"?Ie:Me;return T.createElement(gw,{key:"copy",title:Ie},T.createElement(ZM,{className:$t(`${re}-copy`,He&&`${re}-copy-success`),onClick:St,"aria-label":ke},He?Iv(Se[1],T.createElement(ak,null),!0):Iv(Se[0],T.createElement(_W,null),!0)))},Rr=W=>[W&&or(),qn(),Qn()],_e=W=>[W&&T.createElement("span",{"aria-hidden":!0,key:"ellipsis"},rq),Bt.suffix,Rr(W)];return T.createElement(xl,{onResize:rn,disabled:!ot||Mt},W=>T.createElement(eq,{tooltipProps:jn,enabledEllipsis:ot,isEllipsis:sn},T.createElement(jk,Object.assign({className:$t({[`${re}-${w}`]:w,[`${re}-disabled`]:C,[`${re}-ellipsis`]:Vt,[`${re}-single-line`]:ot&&rt===1,[`${re}-ellipsis-single-line`]:An,[`${re}-ellipsis-multiple-line`]:Mn},y),prefixCls:f,style:Object.assign(Object.assign({},l),{WebkitLineClamp:Mn?rt:void 0}),component:D,ref:gs(W,X,t),direction:j,onClick:ie.includes("text")?Te:void 0,"aria-label":fr==null?void 0:fr.toString(),title:U},Q),T.createElement(JW,{enabledMeasure:ot&&!Mt,text:A,rows:rt,width:Vn,fontSize:zn,onEllipsis:Wn},(J,de)=>{let Se=J;return J.length&&de&&fr&&(Se=T.createElement("span",{key:"show-content","aria-hidden":!0},Se)),nq(e,T.createElement(T.Fragment,null,Se,_e(de)))}))))}),A0=iq;var oq=globalThis&&globalThis.__rest||function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(r[a[c]]=e[a[c]]);return r};const aq=T.forwardRef((e,t)=>{var{ellipsis:r,rel:a}=e,c=oq(e,["ellipsis","rel"]);const f=Object.assign(Object.assign({},c),{rel:a===void 0&&c.target==="_blank"?"noopener noreferrer":a});return delete f.navigate,T.createElement(A0,Object.assign({},f,{ref:t,ellipsis:!!r,component:"a"}))}),sq=aq,lq=T.forwardRef((e,t)=>T.createElement(A0,Object.assign({ref:t},e,{component:"div"}))),cq=lq;var uq=globalThis&&globalThis.__rest||function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(r[a[c]]=e[a[c]]);return r};const dq=(e,t)=>{var{ellipsis:r}=e,a=uq(e,["ellipsis"]);const c=T.useMemo(()=>r&&typeof r=="object"?Sc(r,["expandable","rows"]):r,[r]);return T.createElement(A0,Object.assign({ref:t},a,{ellipsis:c,component:"span"}))},hq=T.forwardRef(dq);var fq=globalThis&&globalThis.__rest||function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(r[a[c]]=e[a[c]]);return r};const pq=[1,2,3,4,5],mq=T.forwardRef((e,t)=>{const{level:r=1}=e,a=fq(e,["level"]);let c;return pq.includes(r)?c=`h${r}`:c="h1",T.createElement(A0,Object.assign({ref:t},a,{component:c}))}),gq=mq,Im=jk;Im.Text=hq;Im.Link=sq;Im.Title=gq;Im.Paragraph=cq;const MY=Im;st.Component;var vq={subtree:!0,childList:!0,attributeFilter:["style","class"]};function yq(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:vq;T.useEffect(function(){if(!(!no()||!e)){var a,c=Array.isArray(e)?e:[e];return"MutationObserver"in window&&(a=new MutationObserver(t),c.forEach(function(f){a.observe(f,r)})),function(){var f,y;(f=a)===null||f===void 0||f.takeRecords(),(y=a)===null||y===void 0||y.disconnect()}}},[r,e])}const Vk=3;function I1(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;const a=document.createElement("canvas"),c=a.getContext("2d"),f=e*r,y=t*r;return a.setAttribute("width",`${f}px`),a.setAttribute("height",`${y}px`),c.save(),[c,a,f,y]}function _q(){function e(t,r,a,c,f,y,l,w){const[C,A,M,k]=I1(c,f,a);if(t instanceof HTMLImageElement)C.drawImage(t,0,0,M,k);else{const{color:Ge,fontSize:Qe,fontStyle:gt,fontWeight:St,fontFamily:xt,textAlign:Nt}=y,jt=Number(Qe)*a;C.font=`${gt} normal ${St} ${jt}px/${f}px ${xt}`,C.fillStyle=Ge,C.textAlign=Nt,C.textBaseline="top";const bt=Array.isArray(t)?t:[t];bt==null||bt.forEach((ut,Tt)=>{C.fillText(ut??"",M/2,Tt*(jt+Vk*a))})}const N=Math.PI/180*Number(r),D=Math.max(c,f),[U,q,F]=I1(D,D,a);U.translate(F/2,F/2),U.rotate(N),M>0&&k>0&&U.drawImage(A,-M/2,-k/2);function j(Ge,Qe){const gt=Ge*Math.cos(N)-Qe*Math.sin(N),St=Ge*Math.sin(N)+Qe*Math.cos(N);return[gt,St]}let V=0,X=0,te=0,re=0;const Q=M/2,ne=k/2;[[0-Q,0-ne],[0+Q,0-ne],[0+Q,0+ne],[0-Q,0+ne]].forEach(Ge=>{let[Qe,gt]=Ge;const[St,xt]=j(Qe,gt);V=Math.min(V,St),X=Math.max(X,St),te=Math.min(te,xt),re=Math.max(re,xt)});const me=V+F/2,ce=te+F/2,ie=X-V,fe=re-te,Te=l*a,$e=w*a,Fe=(ie+Te)*2,Ne=fe+$e,[pe,He]=I1(Fe,Ne);function Be(){let Ge=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,Qe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;pe.drawImage(q,me,ce,ie,fe,Ge,Qe,ie,fe)}return Be(),Be(ie+Te,-fe/2-$e/2),Be(ie+Te,+fe/2+$e/2),[He.toDataURL(),Fe/a,Ne/a]}return e}function xq(e){const t=st.useRef(!1),r=st.useRef(),a=jo(e);return()=>{t.current||(t.current=!0,a(),r.current=yi(()=>{t.current=!1}))}}function bq(e){return e.replace(/([A-Z])/g,"-$1").toLowerCase()}function wq(e){return Object.keys(e).map(t=>`${bq(t)}: ${e[t]};`).join(" ")}function Sq(){return window.devicePixelRatio||1}const Eq=(e,t)=>{let r=!1;return e.removedNodes.length&&(r=Array.from(e.removedNodes).some(a=>t(a))),e.type==="attributes"&&t(e.target)&&(r=!0),r},Cq={visibility:"visible !important"};function Tq(e){const[t]=T.useState(()=>new Map);return[(f,y,l)=>{if(l){if(!t.get(l)){const C=document.createElement("div");t.set(l,C)}const w=t.get(l);w.setAttribute("style",wq(Object.assign(Object.assign(Object.assign({},e),{backgroundImage:`url('${f}')`,backgroundSize:`${Math.floor(y)}px`}),Cq))),w.removeAttribute("class"),l.append(w)}},f=>{const y=t.get(f);y&&f&&f.removeChild(y),t.delete(f)},f=>Array.from(t.values()).includes(f)]}function JM(e,t){return e.size===t.size?e:t}const QM=100,eP=100,Iq=e=>{var t,r;const{zIndex:a=9,rotate:c=-22,width:f,height:y,image:l,content:w,font:C={},style:A,className:M,rootClassName:k,gap:N=[QM,eP],offset:D,children:U,inherit:q=!0}=e,[,F]=vs(),{color:j=F.colorFill,fontSize:V=F.fontSizeLG,fontWeight:X="normal",fontStyle:te="normal",fontFamily:re="sans-serif",textAlign:Q="center"}=C,[ne=QM,ee=eP]=N,me=ne/2,ce=ee/2,ie=(t=D==null?void 0:D[0])!==null&&t!==void 0?t:me,fe=(r=D==null?void 0:D[1])!==null&&r!==void 0?r:ce,Te=st.useMemo(()=>{const yt={zIndex:a,position:"absolute",left:0,top:0,width:"100%",height:"100%",pointerEvents:"none",backgroundRepeat:"repeat"};let ct=ie-me,It=fe-ce;return ct>0&&(yt.left=`${ct}px`,yt.width=`calc(100% - ${ct}px)`,ct=0),It>0&&(yt.top=`${It}px`,yt.height=`calc(100% - ${It}px)`,It=0),yt.backgroundPosition=`${ct}px ${It}px`,yt},[a,ie,me,fe,ce]),[$e,Fe]=st.useState(),[Ne,pe]=st.useState(new Set),He=st.useMemo(()=>{const yt=$e?[$e]:[];return[].concat(yt,mn(Array.from(Ne)))},[$e,Ne]),Be=yt=>{let ct=120,It=64;if(!l&&yt.measureText){yt.font=`${Number(V)}px ${re}`;const Ct=Array.isArray(w)?w:[w],Qt=Ct.map(Vt=>{const Bt=yt.measureText(Vt);return[Bt.width,Bt.fontBoundingBoxAscent+Bt.fontBoundingBoxDescent]});ct=Math.ceil(Math.max.apply(Math,mn(Qt.map(Vt=>Vt[0])))),It=Math.ceil(Math.max.apply(Math,mn(Qt.map(Vt=>Vt[1]))))*Ct.length+(Ct.length-1)*Vk}return[f??ct,y??It]},Ge=_q(),[Qe,gt]=st.useState(null),xt=xq(()=>{const ct=document.createElement("canvas").getContext("2d");if(ct){const It=Sq(),[Ct,Qt]=Be(ct),Vt=Bt=>{const[ot,rt]=Ge(Bt||"",c,It,Ct,Qt,{color:j,fontSize:V,fontStyle:te,fontWeight:X,fontFamily:re,textAlign:Q},ne,ee);gt([ot,rt])};if(l){const Bt=new Image;Bt.onload=()=>{Vt(Bt)},Bt.onerror=()=>{Vt(w)},Bt.crossOrigin="anonymous",Bt.referrerPolicy="no-referrer",Bt.src=l}else Vt(w)}}),[Nt,jt,bt]=Tq(Te);T.useEffect(()=>{Qe&&He.forEach(yt=>{Nt(Qe[0],Qe[1],yt)})},[Qe,He]),yq(He,yt=>{yt.forEach(ct=>{Eq(ct,bt)&&xt()})}),T.useEffect(xt,[c,a,f,y,l,w,j,V,X,te,re,Q,ne,ee,ie,fe]);const Tt=st.useMemo(()=>({add:yt=>{pe(ct=>{const It=new Set(ct);return It.add(yt),JM(ct,It)})},remove:yt=>{jt(yt),pe(ct=>{const It=new Set(ct);return It.delete(yt),JM(ct,It)})}}),[]),ft=q?st.createElement(EU.Provider,{value:Tt},U):U;return st.createElement("div",{ref:Fe,className:$t(M,k),style:Object.assign({position:"relative"},A)},ft)},PY=Iq;var iE={},Hk={exports:{}};(function(e){function t(r){return r&&r.__esModule?r:{default:r}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(Hk);var oE=Hk.exports,R0={};Object.defineProperty(R0,"__esModule",{value:!0});R0.default=void 0;R0.default={items_per_page:"条/页",jump_to:"跳至",jump_to_confirm:"确定",page:"页",prev_page:"上一页",next_page:"下一页",prev_5:"向前 5 页",next_5:"向后 5 页",prev_3:"向前 3 页",next_3:"向后 3 页",page_size:"页码"};var O0={},Mm={},z0={};Object.defineProperty(z0,"__esModule",{value:!0});z0.default=void 0;var Mq={locale:"zh_CN",today:"今天",now:"此刻",backToToday:"返回今天",ok:"确定",timeSelect:"选择时间",dateSelect:"选择日期",weekSelect:"选择周",clear:"清除",month:"月",year:"年",previousMonth:"上个月 (翻页上键)",nextMonth:"下个月 (翻页下键)",monthSelect:"选择月份",yearSelect:"选择年份",decadeSelect:"选择年代",yearFormat:"YYYY年",dayFormat:"D日",dateFormat:"YYYY年M月D日",dateTimeFormat:"YYYY年M月D日 HH时mm分ss秒",previousYear:"上一年 (Control键加左方向键)",nextYear:"下一年 (Control键加右方向键)",previousDecade:"上一年代",nextDecade:"下一年代",previousCentury:"上一世纪",nextCentury:"下一世纪"};z0.default=Mq;var Pm={};Object.defineProperty(Pm,"__esModule",{value:!0});Pm.default=void 0;const Pq={placeholder:"请选择时间",rangePlaceholder:["开始时间","结束时间"]};Pm.default=Pq;var Gk=oE.default;Object.defineProperty(Mm,"__esModule",{value:!0});Mm.default=void 0;var Aq=Gk(z0),Rq=Gk(Pm);const Wk={lang:Object.assign({placeholder:"请选择日期",yearPlaceholder:"请选择年份",quarterPlaceholder:"请选择季度",monthPlaceholder:"请选择月份",weekPlaceholder:"请选择周",rangePlaceholder:["开始日期","结束日期"],rangeYearPlaceholder:["开始年份","结束年份"],rangeMonthPlaceholder:["开始月份","结束月份"],rangeQuarterPlaceholder:["开始季度","结束季度"],rangeWeekPlaceholder:["开始周","结束周"]},Aq.default),timePickerLocale:Object.assign({},Rq.default)};Wk.lang.ok="确定";Mm.default=Wk;var Oq=oE.default;Object.defineProperty(O0,"__esModule",{value:!0});O0.default=void 0;var zq=Oq(Mm);O0.default=zq.default;var k0=oE.default;Object.defineProperty(iE,"__esModule",{value:!0});var kq=iE.default=void 0,Lq=k0(R0),Dq=k0(O0),$q=k0(Mm),Fq=k0(Pm);const ia="${label}不是一个有效的${type}",Bq={locale:"zh-cn",Pagination:Lq.default,DatePicker:$q.default,TimePicker:Fq.default,Calendar:Dq.default,global:{placeholder:"请选择"},Table:{filterTitle:"筛选",filterConfirm:"确定",filterReset:"重置",filterEmptyText:"无筛选项",filterCheckall:"全选",filterSearchPlaceholder:"在筛选项中搜索",selectAll:"全选当页",selectInvert:"反选当页",selectNone:"清空所有",selectionAll:"全选所有",sortTitle:"排序",expand:"展开行",collapse:"关闭行",triggerDesc:"点击降序",triggerAsc:"点击升序",cancelSort:"取消排序"},Modal:{okText:"确定",cancelText:"取消",justOkText:"知道了"},Tour:{Next:"下一步",Previous:"上一步",Finish:"结束导览"},Popconfirm:{cancelText:"取消",okText:"确定"},Transfer:{titles:["",""],searchPlaceholder:"请输入搜索内容",itemUnit:"项",itemsUnit:"项",remove:"删除",selectCurrent:"全选当页",removeCurrent:"删除当页",selectAll:"全选所有",removeAll:"删除全部",selectInvert:"反选当页"},Upload:{uploading:"文件上传中",removeFile:"删除文件",uploadError:"上传错误",previewFile:"预览文件",downloadFile:"下载文件"},Empty:{description:"暂无数据"},Icon:{icon:"图标"},Text:{edit:"编辑",copy:"复制",copied:"复制成功",expand:"展开"},PageHeader:{back:"返回"},Form:{optional:"（可选）",defaultValidateMessages:{default:"字段验证错误${label}",required:"请输入${label}",enum:"${label}必须是其中一个[${enum}]",whitespace:"${label}不能为空字符",date:{format:"${label}日期格式无效",parse:"${label}不能转换为日期",invalid:"${label}是一个无效日期"},types:{string:ia,method:ia,array:ia,object:ia,number:ia,date:ia,boolean:ia,integer:ia,float:ia,regexp:ia,email:ia,url:ia,hex:ia},string:{len:"${label}须为${len}个字符",min:"${label}最少${min}个字符",max:"${label}最多${max}个字符",range:"${label}须在${min}-${max}字符之间"},number:{len:"${label}必须等于${len}",min:"${label}最小值为${min}",max:"${label}最大值为${max}",range:"${label}须在${min}-${max}之间"},array:{len:"须为${len}个${label}",min:"最少${min}个${label}",max:"最多${max}个${label}",range:"${label}数量须在${min}-${max}之间"},pattern:{mismatch:"${label}与模式不匹配${pattern}"}}},Image:{preview:"预览"},QRCode:{expired:"二维码过期",refresh:"点击刷新"},ColorPicker:{presetEmpty:"暂无"}};kq=iE.default=Bq;var tP={},Nq,nP=vc;Nq=tP.createRoot=nP.createRoot,tP.hydrateRoot=nP.hydrateRoot;var qk={exports:{}};(function(e,t){(function(r,a){e.exports=a()})(vp,function(){var r,a,c;function f(l,w){if(!r)r=w;else if(!a)a=w;else{var C="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+r+")(sharedChunk); ("+a+")(sharedChunk); self.onerror = null;",A={};r(A),c=w(A),typeof window<"u"&&window&&window.URL&&window.URL.createObjectURL&&(c.workerUrl=window.URL.createObjectURL(new Blob([C],{type:"text/javascript"})))}}f(["exports"],function(l){var w=typeof self<"u"?self:{},C="2.15.0";let A;const M={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(A==null){const i=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{A={}.API_URL_REGEX!=null?new RegExp({}.API_URL_REGEX):i}catch{A=i}}return A},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!M.API_URL)return null;try{const i=new URL(M.API_URL);return i.hostname==="api.mapbox.cn"?"https://events.mapbox.cn/events/v2":i.hostname==="api.mapbox.com"?"https://events.mapbox.com/events/v2":null}catch{return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},k={supported:!1,testSupport:function(i){!U&&D&&(q?F(i):N=i)}};let N,D,U=!1,q=!1;function F(i){const n=i.createTexture();i.bindTexture(i.TEXTURE_2D,n);try{if(i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,D),i.isContextLost())return;k.supported=!0}catch{}i.deleteTexture(n),U=!0}w.document&&(D=w.document.createElement("img"),D.onload=function(){N&&F(N),N=null,q=!0},D.onerror=function(){U=!0,N=null},D.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const j="01";function V(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var X=te;function te(i,n,o,u){this.cx=3*i,this.bx=3*(o-i)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(u-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=i,this.p1y=n,this.p2x=o,this.p2y=u}te.prototype={sampleCurveX:function(i){return((this.ax*i+this.bx)*i+this.cx)*i},sampleCurveY:function(i){return((this.ay*i+this.by)*i+this.cy)*i},sampleCurveDerivativeX:function(i){return(3*this.ax*i+2*this.bx)*i+this.cx},solveCurveX:function(i,n){if(n===void 0&&(n=1e-6),i<0)return 0;if(i>1)return 1;for(var o=i,u=0;u<8;u++){var h=this.sampleCurveX(o)-i;if(Math.abs(h)<n)return o;var m=this.sampleCurveDerivativeX(o);if(Math.abs(m)<1e-6)break;o-=h/m}var v=0,x=1;for(o=i,u=0;u<20&&(h=this.sampleCurveX(o),!(Math.abs(h-i)<n));u++)i>h?v=o:x=o,o=.5*(x-v)+v;return o},solve:function(i,n){return this.sampleCurveY(this.solveCurveX(i,n))}};var re=V(X),Q=ne;function ne(i,n){this.x=i,this.y=n}ne.prototype={clone:function(){return new ne(this.x,this.y)},add:function(i){return this.clone()._add(i)},sub:function(i){return this.clone()._sub(i)},multByPoint:function(i){return this.clone()._multByPoint(i)},divByPoint:function(i){return this.clone()._divByPoint(i)},mult:function(i){return this.clone()._mult(i)},div:function(i){return this.clone()._div(i)},rotate:function(i){return this.clone()._rotate(i)},rotateAround:function(i,n){return this.clone()._rotateAround(i,n)},matMult:function(i){return this.clone()._matMult(i)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(i){return this.x===i.x&&this.y===i.y},dist:function(i){return Math.sqrt(this.distSqr(i))},distSqr:function(i){var n=i.x-this.x,o=i.y-this.y;return n*n+o*o},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(i){return Math.atan2(this.y-i.y,this.x-i.x)},angleWith:function(i){return this.angleWithSep(i.x,i.y)},angleWithSep:function(i,n){return Math.atan2(this.x*n-this.y*i,this.x*i+this.y*n)},_matMult:function(i){var n=i[2]*this.x+i[3]*this.y;return this.x=i[0]*this.x+i[1]*this.y,this.y=n,this},_add:function(i){return this.x+=i.x,this.y+=i.y,this},_sub:function(i){return this.x-=i.x,this.y-=i.y,this},_mult:function(i){return this.x*=i,this.y*=i,this},_div:function(i){return this.x/=i,this.y/=i,this},_multByPoint:function(i){return this.x*=i.x,this.y*=i.y,this},_divByPoint:function(i){return this.x/=i.x,this.y/=i.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var i=this.y;return this.y=this.x,this.x=-i,this},_rotate:function(i){var n=Math.cos(i),o=Math.sin(i),u=o*this.x+n*this.y;return this.x=n*this.x-o*this.y,this.y=u,this},_rotateAround:function(i,n){var o=Math.cos(i),u=Math.sin(i),h=n.y+u*(this.x-n.x)+o*(this.y-n.y);return this.x=n.x+o*(this.x-n.x)-u*(this.y-n.y),this.y=h,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},ne.convert=function(i){return i instanceof ne?i:Array.isArray(i)?new ne(i[0],i[1]):i};var ee=V(Q);const me=Math.PI/180,ce=180/Math.PI;function ie(i){return i*me}function fe(i){return i*ce}const Te=[[0,0],[1,0],[1,1],[0,1]];function $e(i){if(i<=0)return 0;if(i>=1)return 1;const n=i*i,o=n*i;return 4*(i<.5?o:3*(i-n)+o-.75)}function Fe(i,n,o,u){const h=new re(i,n,o,u);return function(m){return h.solve(m)}}const Ne=Fe(.25,.1,.25,1);function pe(i,n,o){return Math.min(o,Math.max(n,i))}function He(i,n,o){return(o=pe((o-i)/(n-i),0,1))*o*(3-2*o)}function Be(i,n,o){const u=o-n,h=((i-n)%u+u)%u+n;return h===n?o:h}function Ge(i,n,o){if(!i.length)return o(null,[]);let u=i.length;const h=new Array(i.length);let m=null;i.forEach((v,x)=>{n(v,(S,E)=>{S&&(m=S),h[x]=E,--u==0&&o(m,h)})})}function Qe(i){const n=[];for(const o in i)n.push(i[o]);return n}function gt(i,...n){for(const o of n)for(const u in o)i[u]=o[u];return i}let St=1;function xt(){return St++}function Nt(){return function i(n){return n?(n^Math.random()*(16>>n/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,i)}()}function jt(i){return i<=1?1:Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))}function bt(i){return!!i&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(i)}function ut(i,n){i.forEach(o=>{n[o]&&(n[o]=n[o].bind(n))})}function Tt(i,n){return i.indexOf(n,i.length-n.length)!==-1}function ft(i,n,o){const u={};for(const h in i)u[h]=n.call(o||this,i[h],h,i);return u}function yt(i,n,o){const u={};for(const h in i)n.call(o||this,i[h],h,i)&&(u[h]=i[h]);return u}function ct(i){return Array.isArray(i)?i.map(ct):typeof i=="object"&&i?ft(i,ct):i}const It={};function Ct(i){It[i]||(typeof console<"u"&&console.warn(i),It[i]=!0)}function Qt(i,n,o){return(o.y-i.y)*(n.x-i.x)>(n.y-i.y)*(o.x-i.x)}function Vt(i){let n=0;for(let o,u,h=0,m=i.length,v=m-1;h<m;v=h++)o=i[h],u=i[v],n+=(u.x-o.x)*(o.y+u.y);return n}function Bt(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function ot(i){const n={};if(i.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(o,u,h,m)=>{const v=h||m;return n[u]=!v||v.toLowerCase(),""}),n["max-age"]){const o=parseInt(n["max-age"],10);isNaN(o)?delete n["max-age"]:n["max-age"]=o}return n}let rt=null;function Lt(i){if(rt==null){const n=i.navigator?i.navigator.userAgent:null;rt=!!i.safari||!(!n||!(/\b(iPad|iPhone|iPod)\b/.test(n)||n.match("Safari")&&!n.match("Chrome")))}return rt}function Mt(i){try{const n=w[i];return n.setItem("_mapbox_test_",1),n.removeItem("_mapbox_test_"),!0}catch{return!1}}function sn(i,n){return[i[4*n],i[4*n+1],i[4*n+2],i[4*n+3]]}const An="mapbox-tiles";let Mn=500,on=50,Vn,Nn;function zn(){try{return w.caches}catch{}}function yn(){zn()&&!Vn&&(Vn=w.caches.open(An))}function rn(i){const n=i.indexOf("?");if(n<0)return i;const o=function(h){const m=h.indexOf("?");return m>0?h.slice(m+1).split("&"):[]}(i),u=o.filter(h=>{const m=h.split("=");return m[0]==="language"||m[0]==="worldview"});return u.length?`${i.slice(0,n)}?${u.join("&")}`:i.slice(0,n)}let Wn=1/0;const jn={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(jn);class fr extends Error{constructor(n,o,u){o===401&&Me(u)&&(n+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(n),this.status=o,this.url=u}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const or=Bt()?()=>self.worker&&self.worker.referrer:()=>(w.location.protocol==="blob:"?w.parent:w).location.href,qn=function(i,n){if(!(/^file:/.test(o=i.url)||/^file:/.test(or())&&!/^\w+:/.test(o))){if(w.fetch&&w.Request&&w.AbortController&&w.Request.prototype.hasOwnProperty("signal"))return function(u,h){const m=new w.AbortController,v=new w.Request(u.url,{method:u.method||"GET",body:u.body,credentials:u.credentials,headers:u.headers,referrer:or(),referrerPolicy:u.referrerPolicy,signal:m.signal});let x=!1,S=!1;const E=(R=v.url).indexOf("sku=")>0&&Me(R);var R;u.type==="json"&&v.headers.set("Accept","application/json");const z=(H,G,Y)=>{if(S)return;if(H&&H.message!=="SecurityError"&&Ct(H.toString()),G&&Y)return L(G);const ae=Date.now();w.fetch(v).then(ve=>{if(ve.ok){const Ce=E?ve.clone():null;return L(ve,Ce,ae)}return h(new fr(ve.statusText,ve.status,u.url))}).catch(ve=>{ve.name!=="AbortError"&&h(new Error(`${ve.message} ${u.url}`))})},L=(H,G,Y)=>{(u.type==="arrayBuffer"?H.arrayBuffer():u.type==="json"?H.json():H.text()).then(ae=>{S||(G&&Y&&function(ve,Ce,ye){if(yn(),!Vn)return;const Ee={status:Ce.status,statusText:Ce.statusText,headers:new w.Headers};Ce.headers.forEach((Ye,Ze)=>Ee.headers.set(Ze,Ye));const Ae=ot(Ce.headers.get("Cache-Control")||"");if(Ae["no-store"])return;Ae["max-age"]&&Ee.headers.set("Expires",new Date(ye+1e3*Ae["max-age"]).toUTCString());const Pe=Ee.headers.get("Expires");Pe&&(new Date(Pe).getTime()-ye<42e4||function(Ye,Ze){if(Nn===void 0)try{new Response(new ReadableStream),Nn=!0}catch{Nn=!1}Nn?Ze(Ye.body):Ye.blob().then(Ze)}(Ce,Ye=>{const Ze=new w.Response(Ye,Ee);yn(),Vn&&Vn.then(at=>at.put(rn(ve.url),Ze)).catch(at=>Ct(at.message))}))}(v,G,Y),x=!0,h(null,ae,H.headers.get("Cache-Control"),H.headers.get("Expires")))}).catch(ae=>{S||h(new Error(ae.message))})};return E?function(H,G){if(yn(),!Vn)return G(null);const Y=rn(H.url);Vn.then(ae=>{ae.match(Y).then(ve=>{const Ce=function(ye){if(!ye)return!1;const Ee=new Date(ye.headers.get("Expires")||0),Ae=ot(ye.headers.get("Cache-Control")||"");return Ee>Date.now()&&!Ae["no-cache"]}(ve);ae.delete(Y),Ce&&ae.put(Y,ve.clone()),G(null,ve,Ce)}).catch(G)}).catch(G)}(v,z):z(null,null),{cancel:()=>{S=!0,x||m.abort()}}}(i,n);if(Bt()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",i,n,void 0,!0)}var o;return function(u,h){const m=new w.XMLHttpRequest;m.open(u.method||"GET",u.url,!0),u.type==="arrayBuffer"&&(m.responseType="arraybuffer");for(const v in u.headers)m.setRequestHeader(v,u.headers[v]);return u.type==="json"&&(m.responseType="text",m.setRequestHeader("Accept","application/json")),m.withCredentials=u.credentials==="include",m.onerror=()=>{h(new Error(m.statusText))},m.onload=()=>{if((m.status>=200&&m.status<300||m.status===0)&&m.response!==null){let v=m.response;if(u.type==="json")try{v=JSON.parse(m.response)}catch(x){return h(x)}h(null,v,m.getResponseHeader("Cache-Control"),m.getResponseHeader("Expires"))}else h(new fr(m.statusText,m.status,u.url))},m.send(u.body),{cancel:()=>m.abort()}}(i,n)},Qn=function(i,n){return qn(gt(i,{type:"arrayBuffer"}),n)};function Rr(i){const n=w.document.createElement("a");return n.href=i,n.protocol===w.document.location.protocol&&n.host===w.document.location.host}const _e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let W,J;W=[],J=0;const de=function(i,n){if(k.supported&&(i.headers||(i.headers={}),i.headers.accept="image/webp,*/*"),J>=M.MAX_PARALLEL_IMAGE_REQUESTS){const m={requestParameters:i,callback:n,cancelled:!1,cancel(){this.cancelled=!0}};return W.push(m),m}J++;let o=!1;const u=()=>{if(!o)for(o=!0,J--;W.length&&J<M.MAX_PARALLEL_IMAGE_REQUESTS;){const m=W.shift(),{requestParameters:v,callback:x,cancelled:S}=m;S||(m.cancel=de(v,x).cancel)}},h=Qn(i,(m,v,x,S)=>{u(),m?n(m):v&&(w.createImageBitmap?function(E,R){const z=new w.Blob([new Uint8Array(E)],{type:"image/png"});w.createImageBitmap(z).then(L=>{R(null,L)}).catch(L=>{R(new Error(`Could not load image because of ${L.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(v,(E,R)=>n(E,R,x,S)):function(E,R){const z=new w.Image,L=w.URL;z.onload=()=>{R(null,z),L.revokeObjectURL(z.src),z.onload=null,w.requestAnimationFrame(()=>{z.src=_e})},z.onerror=()=>R(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const H=new w.Blob([new Uint8Array(E)],{type:"image/png"});z.src=E.byteLength?L.createObjectURL(H):_e}(v,(E,R)=>n(E,R,x,S)))});return{cancel:()=>{h.cancel(),u()}}},Se="NO_ACCESS_TOKEN";function Ie(i){return i.indexOf("mapbox:")===0}function Me(i){return M.API_URL_REGEX.test(i)}function ke(i){return M.API_CDN_URL_REGEX.test(i)}function we(i){return M.API_STYLE_REGEX.test(i)&&!Le(i)}function Le(i){return M.API_SPRITE_REGEX.test(i)}const je=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Je(i){const n=i.match(je);if(!n)throw new Error("Unable to parse URL object");return{protocol:n[1],authority:n[2],path:n[3]||"/",params:n[4]?n[4].split("&"):[]}}function We(i){const n=i.params.length?`?${i.params.join("&")}`:"";return`${i.protocol}://${i.authority}${i.path}${n}`}const wt="mapbox.eventData";function Yt(i){if(!i)return null;const n=i.split(".");if(!n||n.length!==3)return null;try{return JSON.parse(decodeURIComponent(w.atob(n[1]).split("").map(o=>"%"+("00"+o.charCodeAt(0).toString(16)).slice(-2)).join("")))}catch{return null}}class Xt{constructor(n){this.type=n,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(n){const o=Yt(M.ACCESS_TOKEN);let u="";return u=o&&o.u?w.btoa(encodeURIComponent(o.u).replace(/%([0-9A-F]{2})/g,(h,m)=>String.fromCharCode(+("0x"+m)))):M.ACCESS_TOKEN||"",n?`${wt}.${n}:${u}`:`${wt}:${u}`}fetchEventData(){const n=Mt("localStorage"),o=this.getStorageKey(),u=this.getStorageKey("uuid");if(n)try{const h=w.localStorage.getItem(o);h&&(this.eventData=JSON.parse(h));const m=w.localStorage.getItem(u);m&&(this.anonId=m)}catch{Ct("Unable to read from LocalStorage")}}saveEventData(){const n=Mt("localStorage"),o=this.getStorageKey(),u=this.getStorageKey("uuid");if(n)try{w.localStorage.setItem(u,this.anonId),Object.keys(this.eventData).length>=1&&w.localStorage.setItem(o,JSON.stringify(this.eventData))}catch{Ct("Unable to write to LocalStorage")}}processRequests(n){}postEvent(n,o,u,h){if(!M.EVENTS_URL)return;const m=Je(M.EVENTS_URL);m.params.push(`access_token=${h||M.ACCESS_TOKEN||""}`);const v={event:this.type,created:new Date(n).toISOString()},x=o?gt(v,o):v,S={url:We(m),headers:{"Content-Type":"text/plain"},body:JSON.stringify([x])};this.pendingRequest=function(E,R){return qn(gt(E,{method:"POST"}),R)}(S,E=>{this.pendingRequest=null,u(E),this.saveEventData(),this.processRequests(h)})}queueRequest(n,o){this.queue.push(n),this.processRequests(o)}}const un=new class extends Xt{constructor(i){super("appUserTurnstile"),this._customAccessToken=i}postTurnstileEvent(i,n){M.EVENTS_URL&&M.ACCESS_TOKEN&&Array.isArray(i)&&i.some(o=>Ie(o)||Me(o))&&this.queueRequest(Date.now(),n)}processRequests(i){if(this.pendingRequest||this.queue.length===0)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const n=Yt(M.ACCESS_TOKEN),o=n?n.u:M.ACCESS_TOKEN;let u=o!==this.eventData.tokenU;bt(this.anonId)||(this.anonId=Nt(),u=!0);const h=this.queue.shift();if(this.eventData.lastSuccess){const m=new Date(this.eventData.lastSuccess),v=new Date(h),x=(h-this.eventData.lastSuccess)/864e5;u=u||x>=1||x<-1||m.getDate()!==v.getDate()}else u=!0;u?this.postEvent(h,{sdkIdentifier:"mapbox-gl-js",sdkVersion:C,skuId:j,"enabled.telemetry":!1,userId:this.anonId},m=>{m||(this.eventData.lastSuccess=h,this.eventData.tokenU=o)},i):this.processRequests()}},ln=un.postTurnstileEvent.bind(un),Gn=new class extends Xt{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(i,n,o,u){this.skuToken=n,this.errorCb=u,M.EVENTS_URL&&(o||M.ACCESS_TOKEN?this.queueRequest({id:i,timestamp:Date.now()},o):this.errorCb(new Error(Se)))}processRequests(i){if(this.pendingRequest||this.queue.length===0)return;const{id:n,timestamp:o}=this.queue.shift();n&&this.success[n]||(this.anonId||this.fetchEventData(),bt(this.anonId)||(this.anonId=Nt()),this.postEvent(o,{sdkIdentifier:"mapbox-gl-js",sdkVersion:C,skuId:j,skuToken:this.skuToken,userId:this.anonId},u=>{u?this.errorCb(u):n&&(this.success[n]=!0)},i))}},On=Gn.postMapLoadEvent.bind(Gn),er=new class extends Xt{constructor(){super("gljs.performance")}postPerformanceEvent(i,n){M.EVENTS_URL&&(i||M.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:n},i)}processRequests(i){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:n,performanceData:o}=this.queue.shift(),u=function(h){const m=w.performance.getEntriesByType("resource"),v=w.performance.getEntriesByType("mark"),x=function(L){const H={};if(L){for(const G in L)if(G!=="other")for(const Y of L[G]){const ae=`${G}ResolveRangeMin`,ve=`${G}ResolveRangeMax`,Ce=`${G}RequestCount`,ye=`${G}RequestCachedCount`;H[ae]=Math.min(H[ae]||1/0,Y.startTime),H[ve]=Math.max(H[ve]||-1/0,Y.responseEnd);const Ee=Ae=>{H[Ae]===void 0&&(H[Ae]=0),++H[Ae]};Y.transferSize!==void 0&&Y.transferSize===0&&Ee(ye),Ee(Ce)}}return H}(function(L,H){const G={};if(L)for(const Y of L){const ae=H(Y);G[ae]===void 0&&(G[ae]=[]),G[ae].push(Y)}return G}(m,ri)),S=w.devicePixelRatio,E=w.navigator.connection||w.navigator.mozConnection||w.navigator.webkitConnection,R={counters:[],metadata:[],attributes:[]},z=(L,H,G)=>{G!=null&&L.push({name:H,value:G.toString()})};for(const L in x)z(R.counters,L,x[L]);if(h.interactionRange[0]!==1/0&&h.interactionRange[1]!==-1/0&&(z(R.counters,"interactionRangeMin",h.interactionRange[0]),z(R.counters,"interactionRangeMax",h.interactionRange[1])),v)for(const L of Object.keys(Sn)){const H=Sn[L],G=v.find(Y=>Y.name===H);G&&z(R.counters,H,G.startTime)}return z(R.counters,"visibilityHidden",h.visibilityHidden),z(R.attributes,"style",function(L){if(L)for(const H of L){const G=H.name.split("?")[0];if(we(G)){const Y=G.split("/").slice(-2);if(Y.length===2)return`mapbox://styles/${Y[0]}/${Y[1]}`}}}(m)),z(R.attributes,"terrainEnabled",h.terrainEnabled?"true":"false"),z(R.attributes,"fogEnabled",h.fogEnabled?"true":"false"),z(R.attributes,"projection",h.projection),z(R.attributes,"zoom",h.zoom),z(R.metadata,"devicePixelRatio",S),z(R.metadata,"connectionEffectiveType",E?E.effectiveType:void 0),z(R.metadata,"navigatorUserAgent",w.navigator.userAgent),z(R.metadata,"screenWidth",w.screen.width),z(R.metadata,"screenHeight",w.screen.height),z(R.metadata,"windowWidth",w.innerWidth),z(R.metadata,"windowHeight",w.innerHeight),z(R.metadata,"mapWidth",h.width/S),z(R.metadata,"mapHeight",h.height/S),z(R.metadata,"webglRenderer",h.renderer),z(R.metadata,"webglVendor",h.vendor),z(R.metadata,"sdkVersion",C),z(R.metadata,"sdkIdentifier","mapbox-gl-js"),R}(o);for(const h of u.metadata);for(const h of u.counters);for(const h of u.attributes);this.postEvent(n,u,()=>{},i)}},Zn=er.postPerformanceEvent.bind(er),Zr=new class extends Xt{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(i,n,o,u){if(!M.API_URL||!M.SESSION_PATH)return;const h=Je(M.API_URL+M.SESSION_PATH);h.params.push(`sku=${n||""}`),h.params.push(`access_token=${u||M.ACCESS_TOKEN||""}`);const m={url:We(h),headers:{"Content-Type":"text/plain"}};this.pendingRequest=function(v,x){return qn(gt(v,{method:"GET"}),x)}(m,v=>{this.pendingRequest=null,o(v),this.saveEventData(),this.processRequests(u)})}getSessionAPI(i,n,o,u){this.skuToken=n,this.errorCb=u,M.SESSION_PATH&&M.API_URL&&(o||M.ACCESS_TOKEN?this.queueRequest({id:i,timestamp:Date.now()},o):this.errorCb(new Error(Se)))}processRequests(i){if(this.pendingRequest||this.queue.length===0)return;const{id:n,timestamp:o}=this.queue.shift();n&&this.success[n]||this.getSession(o,this.skuToken,u=>{u?this.errorCb(u):n&&(this.success[n]=!0)},i)}},an=Zr.getSessionAPI.bind(Zr),nn=new Set,Sn={create:"create",load:"load",fullLoad:"fullLoad"},Tr={mark(i){w.performance.mark(i)},measure(i,n,o){w.performance.measure(i,n,o)}};function ri(i){const n=i.name.split("?")[0];return ke(n)&&n.includes("mapbox-gl.js")?"javascript":ke(n)&&n.includes("mapbox-gl.css")?"css":function(o){return M.API_FONTS_REGEX.test(o)}(n)?"fontRange":Le(n)?"sprite":we(n)?"style":function(o){return M.API_TILEJSON_REGEX.test(o)}(n)?"tilejson":"other"}const En=w.performance;function Ni(i){const n=i?i.url.toString():void 0;return En.getEntriesByName(n)}let xo,Po,ro,Hr;const ji={now:()=>ro!==void 0?ro:w.performance.now(),setNow(i){ro=i},restoreNow(){ro=void 0},frame(i){const n=w.requestAnimationFrame(i);return{cancel:()=>w.cancelAnimationFrame(n)}},getImageData(i,n=0){const{width:o,height:u}=i;Hr||(Hr=w.document.createElement("canvas"));const h=Hr.getContext("2d",{willReadFrequently:!0});if(!h)throw new Error("failed to create canvas 2d context");return(o>Hr.width||u>Hr.height)&&(Hr.width=o,Hr.height=u),h.clearRect(-n,-n,o+2*n,u+2*n),h.drawImage(i,0,0,o,u),h.getImageData(-n,-n,o+2*n,u+2*n)},resolveURL:i=>(xo||(xo=w.document.createElement("a")),xo.href=i,xo.href),get devicePixelRatio(){return w.devicePixelRatio},get prefersReducedMotion(){return!!w.matchMedia&&(Po==null&&(Po=w.matchMedia("(prefers-reduced-motion: reduce)")),Po.matches)}};function pa(i,n,o){o[i]&&o[i].indexOf(n)!==-1||(o[i]=o[i]||[],o[i].push(n))}function io(i,n,o){if(o&&o[i]){const u=o[i].indexOf(n);u!==-1&&o[i].splice(u,1)}}class oo{constructor(n,o={}){gt(this,o),this.type=n}}class _i extends oo{constructor(n,o={}){super("error",gt({error:n},o))}}class Oi{on(n,o){return this._listeners=this._listeners||{},pa(n,o,this._listeners),this}off(n,o){return io(n,o,this._listeners),io(n,o,this._oneTimeListeners),this}once(n,o){return o?(this._oneTimeListeners=this._oneTimeListeners||{},pa(n,o,this._oneTimeListeners),this):new Promise(u=>this.once(n,u))}fire(n,o){typeof n=="string"&&(n=new oo(n,o||{}));const u=n.type;if(this.listens(u)){n.target=this;const h=this._listeners&&this._listeners[u]?this._listeners[u].slice():[];for(const x of h)x.call(this,n);const m=this._oneTimeListeners&&this._oneTimeListeners[u]?this._oneTimeListeners[u].slice():[];for(const x of m)io(u,x,this._oneTimeListeners),x.call(this,n);const v=this._eventedParent;v&&(gt(n,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),v.fire(n))}else n instanceof _i&&console.error(n.error);return this}listens(n){return!!(this._listeners&&this._listeners[n]&&this._listeners[n].length>0||this._oneTimeListeners&&this._oneTimeListeners[n]&&this._oneTimeListeners[n].length>0||this._eventedParent&&this._eventedParent.listens(n))}setEventedParent(n,o){return this._eventedParent=n,this._eventedParentData=o,this}}var nt=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{},"globe":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["source"]}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["fill-extrusion-edge-radius"]},"fill-extrusion-rounded-roof":{"type":"boolean","default":true,"requires":["fill-extrusion-edge-radius"],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":false,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"transition":false,"requires":[{"source":"geojson","has":{"lineMetrics":true}}],"property-type":"constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function Si(i,...n){for(const o of n)for(const u in o)i[u]=o[u];return i}function gr(i){return i instanceof Number||i instanceof String||i instanceof Boolean?i.valueOf():i}function pr(i){if(Array.isArray(i))return i.map(pr);if(i instanceof Object&&!(i instanceof Number||i instanceof String||i instanceof Boolean)){const n={};for(const o in i)n[o]=pr(i[o]);return n}return gr(i)}class Xo extends Error{constructor(n,o){super(o),this.message=o,this.key=n}}var Tn=Xo;class Pn{constructor(n,o=[]){this.parent=n,this.bindings={};for(const[u,h]of o)this.bindings[u]=h}concat(n){return new Pn(this,n)}get(n){if(this.bindings[n])return this.bindings[n];if(this.parent)return this.parent.get(n);throw new Error(`${n} not found in scope.`)}has(n){return!!this.bindings[n]||!!this.parent&&this.parent.has(n)}}var Xr=Pn;const Gr={kind:"null"},Ot={kind:"number"},xn={kind:"string"},bn={kind:"boolean"},Qr={kind:"color"},Kr={kind:"object"},In={kind:"value"},Br={kind:"collator"},Ao={kind:"formatted"},Ro={kind:"resolvedImage"};function Ui(i,n){return{kind:"array",itemType:i,N:n}}function Xn(i){if(i.kind==="array"){const n=Xn(i.itemType);return typeof i.N=="number"?`array<${n}, ${i.N}>`:i.itemType.kind==="value"?"array":`array<${n}>`}return i.kind}const Ns=[Gr,Ot,xn,bn,Qr,Ao,Kr,Ui(In),Ro];function xi(i,n){if(n.kind==="error")return null;if(i.kind==="array"){if(n.kind==="array"&&(n.N===0&&n.itemType.kind==="value"||!xi(i.itemType,n.itemType))&&(typeof i.N!="number"||i.N===n.N))return null}else{if(i.kind===n.kind)return null;if(i.kind==="value"){for(const o of Ns)if(!xi(o,n))return null}}return`Expected ${Xn(i)} but found ${Xn(n)} instead.`}function bo(i,n){return n.some(o=>o.kind===i.kind)}function Oo(i,n){return n.some(o=>o==="null"?i===null:o==="array"?Array.isArray(i):o==="object"?i&&!Array.isArray(i)&&typeof i=="object":o===typeof i)}var ma,ys={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Ko(i){return(i=Math.round(i))<0?0:i>255?255:i}function ga(i){return Ko(i[i.length-1]==="%"?parseFloat(i)/100*255:parseInt(i))}function _s(i){return(n=i[i.length-1]==="%"?parseFloat(i)/100:parseFloat(i))<0?0:n>1?1:n;var n}function va(i,n,o){return o<0?o+=1:o>1&&(o-=1),6*o<1?i+(n-i)*o*6:2*o<1?n:3*o<2?i+(n-i)*(2/3-o)*6:i}try{ma={}.parseCSSColor=function(i){var n,o=i.replace(/ /g,"").toLowerCase();if(o in ys)return ys[o].slice();if(o[0]==="#")return o.length===4?(n=parseInt(o.substr(1),16))>=0&&n<=4095?[(3840&n)>>4|(3840&n)>>8,240&n|(240&n)>>4,15&n|(15&n)<<4,1]:null:o.length===7&&(n=parseInt(o.substr(1),16))>=0&&n<=16777215?[(16711680&n)>>16,(65280&n)>>8,255&n,1]:null;var u=o.indexOf("("),h=o.indexOf(")");if(u!==-1&&h+1===o.length){var m=o.substr(0,u),v=o.substr(u+1,h-(u+1)).split(","),x=1;switch(m){case"rgba":if(v.length!==4)return null;x=_s(v.pop());case"rgb":return v.length!==3?null:[ga(v[0]),ga(v[1]),ga(v[2]),x];case"hsla":if(v.length!==4)return null;x=_s(v.pop());case"hsl":if(v.length!==3)return null;var S=(parseFloat(v[0])%360+360)%360/360,E=_s(v[1]),R=_s(v[2]),z=R<=.5?R*(E+1):R+E-R*E,L=2*R-z;return[Ko(255*va(L,z,S+1/3)),Ko(255*va(L,z,S)),Ko(255*va(L,z,S-1/3)),x];default:return null}}return null}}catch{}class Ei{constructor(n,o,u,h=1){this.r=n,this.g=o,this.b=u,this.a=h}static parse(n){if(!n)return;if(n instanceof Ei)return n;if(typeof n!="string")return;const o=ma(n);return o?new Ei(o[0]/255*o[3],o[1]/255*o[3],o[2]/255*o[3],o[3]):void 0}toString(){const[n,o,u,h]=this.toArray();return`rgba(${Math.round(n)},${Math.round(o)},${Math.round(u)},${h})`}toArray(){const{r:n,g:o,b:u,a:h}=this;return h===0?[0,0,0,0]:[255*n/h,255*o/h,255*u/h,h]}toArray01(){const{r:n,g:o,b:u,a:h}=this;return h===0?[0,0,0,0]:[n/h,o/h,u/h,h]}toArray01PremultipliedAlpha(){const{r:n,g:o,b:u,a:h}=this;return[n,o,u,h]}}Ei.black=new Ei(0,0,0,1),Ei.white=new Ei(1,1,1,1),Ei.transparent=new Ei(0,0,0,0),Ei.red=new Ei(1,0,0,1),Ei.blue=new Ei(0,0,1,1);var Nr=Ei;class hn{constructor(n,o,u){this.sensitivity=n?o?"variant":"case":o?"accent":"base",this.locale=u,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(n,o){return this.collator.compare(n,o)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class $n{constructor(n,o,u,h,m){this.text=n.normalize?n.normalize():n,this.image=o,this.scale=u,this.fontStack=h,this.textColor=m}}class Yn{constructor(n){this.sections=n}static fromString(n){return new Yn([new $n(n,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(n=>n.text.length!==0||n.image&&n.image.name.length!==0)}static factory(n){return n instanceof Yn?n:Yn.fromString(n)}toString(){return this.sections.length===0?"":this.sections.map(n=>n.text).join("")}serialize(){const n=["format"];for(const o of this.sections){if(o.image){n.push(["image",o.image.name]);continue}n.push(o.text);const u={};o.fontStack&&(u["text-font"]=["literal",o.fontStack.split(",")]),o.scale&&(u["font-scale"]=o.scale),o.textColor&&(u["text-color"]=["rgba"].concat(o.textColor.toArray())),n.push(u)}return n}}class dr{constructor(n){this.name=n.name,this.available=n.available}toString(){return this.name}static fromString(n){return n?new dr({name:n,available:!1}):null}serialize(){return["image",this.name]}}function Wr(i,n,o,u){return typeof i=="number"&&i>=0&&i<=255&&typeof n=="number"&&n>=0&&n<=255&&typeof o=="number"&&o>=0&&o<=255?u===void 0||typeof u=="number"&&u>=0&&u<=1?null:`Invalid rgba value [${[i,n,o,u].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof u=="number"?[i,n,o,u]:[i,n,o]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function ya(i){if(i===null||typeof i=="string"||typeof i=="boolean"||typeof i=="number"||i instanceof Nr||i instanceof hn||i instanceof Yn||i instanceof dr)return!0;if(Array.isArray(i)){for(const n of i)if(!ya(n))return!1;return!0}if(typeof i=="object"){for(const n in i)if(!ya(i[n]))return!1;return!0}return!1}function zr(i){if(i===null)return Gr;if(typeof i=="string")return xn;if(typeof i=="boolean")return bn;if(typeof i=="number")return Ot;if(i instanceof Nr)return Qr;if(i instanceof hn)return Br;if(i instanceof Yn)return Ao;if(i instanceof dr)return Ro;if(Array.isArray(i)){const n=i.length;let o;for(const u of i){const h=zr(u);if(o){if(o===h)continue;o=In;break}o=h}return Ui(o||In,n)}return Kr}function xs(i){const n=typeof i;return i===null?"":n==="string"||n==="number"||n==="boolean"?String(i):i instanceof Nr||i instanceof Yn||i instanceof dr?i.toString():JSON.stringify(i)}class bs{constructor(n,o){this.type=n,this.value=o}static parse(n,o){if(n.length!==2)return o.error(`'literal' expression requires exactly one argument, but found ${n.length-1} instead.`);if(!ya(n[1]))return o.error("invalid value");const u=n[1];let h=zr(u);const m=o.expectedType;return h.kind!=="array"||h.N!==0||!m||m.kind!=="array"||typeof m.N=="number"&&m.N!==0||(h=m),new bs(h,u)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Nr?["rgba"].concat(this.value.toArray()):this.value instanceof Yn?this.value.serialize():this.value}}var js=bs,zi=class{constructor(i){this.name="ExpressionEvaluationError",this.message=i}toJSON(){return this.message}};const zh={string:xn,number:Ot,boolean:bn,object:Kr};class kh{constructor(n,o){this.type=n,this.args=o}static parse(n,o){if(n.length<2)return o.error("Expected at least one argument.");let u,h=1;const m=n[0];if(m==="array"){let x,S;if(n.length>2){const E=n[1];if(typeof E!="string"||!(E in zh)||E==="object")return o.error('The item type argument of "array" must be one of string, number, boolean',1);x=zh[E],h++}else x=In;if(n.length>3){if(n[2]!==null&&(typeof n[2]!="number"||n[2]<0||n[2]!==Math.floor(n[2])))return o.error('The length argument to "array" must be a positive integer literal',2);S=n[2],h++}u=Ui(x,S)}else u=zh[m];const v=[];for(;h<n.length;h++){const x=o.parse(n[h],h,In);if(!x)return null;v.push(x)}return new kh(u,v)}evaluate(n){for(let o=0;o<this.args.length;o++){const u=this.args[o].evaluate(n);if(!xi(this.type,zr(u)))return u;if(o===this.args.length-1)throw new zi(`Expected value to be of type ${Xn(this.type)}, but found ${Xn(zr(u))} instead.`)}return null}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}serialize(){const n=this.type,o=[n.kind];if(n.kind==="array"){const u=n.itemType;if(u.kind==="string"||u.kind==="number"||u.kind==="boolean"){o.push(u.kind);const h=n.N;(typeof h=="number"||this.args.length>1)&&o.push(h)}}return o.concat(this.args.map(u=>u.serialize()))}}var Na=kh;class ws{constructor(n){this.type=Ao,this.sections=n}static parse(n,o){if(n.length<2)return o.error("Expected at least one argument.");const u=n[1];if(!Array.isArray(u)&&typeof u=="object")return o.error("First argument must be an image or text section.");const h=[];let m=!1;for(let v=1;v<=n.length-1;++v){const x=n[v];if(m&&typeof x=="object"&&!Array.isArray(x)){m=!1;let S=null;if(x["font-scale"]&&(S=o.parse(x["font-scale"],1,Ot),!S))return null;let E=null;if(x["text-font"]&&(E=o.parse(x["text-font"],1,Ui(xn)),!E))return null;let R=null;if(x["text-color"]&&(R=o.parse(x["text-color"],1,Qr),!R))return null;const z=h[h.length-1];z.scale=S,z.font=E,z.textColor=R}else{const S=o.parse(n[v],1,In);if(!S)return null;const E=S.type.kind;if(E!=="string"&&E!=="value"&&E!=="null"&&E!=="resolvedImage")return o.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");m=!0,h.push({content:S,scale:null,font:null,textColor:null})}}return new ws(h)}evaluate(n){return new Yn(this.sections.map(o=>{const u=o.content.evaluate(n);return zr(u)===Ro?new $n("",u,null,null,null):new $n(xs(u),null,o.scale?o.scale.evaluate(n):null,o.font?o.font.evaluate(n).join(","):null,o.textColor?o.textColor.evaluate(n):null)}))}eachChild(n){for(const o of this.sections)n(o.content),o.scale&&n(o.scale),o.font&&n(o.font),o.textColor&&n(o.textColor)}outputDefined(){return!1}serialize(){const n=["format"];for(const o of this.sections){n.push(o.content.serialize());const u={};o.scale&&(u["font-scale"]=o.scale.serialize()),o.font&&(u["text-font"]=o.font.serialize()),o.textColor&&(u["text-color"]=o.textColor.serialize()),n.push(u)}return n}}class Ou{constructor(n){this.type=Ro,this.input=n}static parse(n,o){if(n.length!==2)return o.error("Expected two arguments.");const u=o.parse(n[1],1,xn);return u?new Ou(u):o.error("No image name provided.")}evaluate(n){const o=this.input.evaluate(n),u=dr.fromString(o);return u&&n.availableImages&&(u.available=n.availableImages.indexOf(o)>-1),u}eachChild(n){n(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const H0={"to-boolean":bn,"to-color":Qr,"to-number":Ot,"to-string":xn};class Lh{constructor(n,o){this.type=n,this.args=o}static parse(n,o){if(n.length<2)return o.error("Expected at least one argument.");const u=n[0];if((u==="to-boolean"||u==="to-string")&&n.length!==2)return o.error("Expected one argument.");const h=H0[u],m=[];for(let v=1;v<n.length;v++){const x=o.parse(n[v],v,In);if(!x)return null;m.push(x)}return new Lh(h,m)}evaluate(n){if(this.type.kind==="boolean")return!!this.args[0].evaluate(n);if(this.type.kind==="color"){let o,u;for(const h of this.args){if(o=h.evaluate(n),u=null,o instanceof Nr)return o;if(typeof o=="string"){const m=n.parseColor(o);if(m)return m}else if(Array.isArray(o)&&(u=o.length<3||o.length>4?`Invalid rbga value ${JSON.stringify(o)}: expected an array containing either three or four numeric values.`:Wr(o[0],o[1],o[2],o[3]),!u))return new Nr(o[0]/255,o[1]/255,o[2]/255,o[3])}throw new zi(u||`Could not parse color from value '${typeof o=="string"?o:String(JSON.stringify(o))}'`)}if(this.type.kind==="number"){let o=null;for(const u of this.args){if(o=u.evaluate(n),o===null)return 0;const h=Number(o);if(!isNaN(h))return h}throw new zi(`Could not convert ${JSON.stringify(o)} to number.`)}return this.type.kind==="formatted"?Yn.fromString(xs(this.args[0].evaluate(n))):this.type.kind==="resolvedImage"?dr.fromString(xs(this.args[0].evaluate(n))):xs(this.args[0].evaluate(n))}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}serialize(){if(this.type.kind==="formatted")return new ws([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Ou(this.args[0]).serialize();const n=[`to-${this.type.kind}`];return this.eachChild(o=>{n.push(o.serialize())}),n}}var wl=Lh;const _a=["Unknown","Point","LineString","Polygon"];var Dh=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?_a[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const i=this.featureDistanceData.center,n=this.featureDistanceData.scale,{x:o,y:u}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(o*n-i[0])+this.featureDistanceData.bearing[1]*(u*n-i[1])}return 0}parseColor(i){let n=this._parseColorCache[i];return n||(n=this._parseColorCache[i]=Nr.parse(i)),n}};class Us{constructor(n,o,u,h){this.name=n,this.type=o,this._evaluate=u,this.args=h}evaluate(n){return this._evaluate(n,this.args)}eachChild(n){this.args.forEach(n)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(n=>n.serialize()))}static parse(n,o){const u=n[0],h=Us.definitions[u];if(!h)return o.error(`Unknown expression "${u}". If you wanted a literal array, use ["literal", [...]].`,0);const m=Array.isArray(h)?h[0]:h.type,v=Array.isArray(h)?[[h[1],h[2]]]:h.overloads,x=v.filter(([E])=>!Array.isArray(E)||E.length===n.length-1);let S=null;for(const[E,R]of x){S=new Uh(o.registry,o.path,null,o.scope);const z=[];let L=!1;for(let H=1;H<n.length;H++){const G=n[H],Y=Array.isArray(E)?E[H-1]:E.type,ae=S.parse(G,1+z.length,Y);if(!ae){L=!0;break}z.push(ae)}if(!L)if(Array.isArray(E)&&E.length!==z.length)S.error(`Expected ${E.length} arguments, but found ${z.length} instead.`);else{for(let H=0;H<z.length;H++){const G=Array.isArray(E)?E[H]:E.type,Y=z[H];S.concat(H+1).checkSubtype(G,Y.type)}if(S.errors.length===0)return new Us(u,m,R,z)}}if(x.length===1)o.errors.push(...S.errors);else{const E=(x.length?x:v).map(([z])=>{return L=z,Array.isArray(L)?`(${L.map(Xn).join(", ")})`:`(${Xn(L.type)}...)`;var L}).join(" | "),R=[];for(let z=1;z<n.length;z++){const L=o.parse(n[z],1+R.length);if(!L)return null;R.push(Xn(L.type))}o.error(`Expected arguments of type ${E}, but found (${R.join(", ")}) instead.`)}return null}static register(n,o){Us.definitions=o;for(const u in o)n[u]=Us}}var ja=Us;class Ec{constructor(n,o,u){this.type=Br,this.locale=u,this.caseSensitive=n,this.diacriticSensitive=o}static parse(n,o){if(n.length!==2)return o.error("Expected one argument.");const u=n[1];if(typeof u!="object"||Array.isArray(u))return o.error("Collator options argument must be an object.");const h=o.parse(u["case-sensitive"]!==void 0&&u["case-sensitive"],1,bn);if(!h)return null;const m=o.parse(u["diacritic-sensitive"]!==void 0&&u["diacritic-sensitive"],1,bn);if(!m)return null;let v=null;return u.locale&&(v=o.parse(u.locale,1,xn),!v)?null:new Ec(h,m,v)}evaluate(n){return new hn(this.caseSensitive.evaluate(n),this.diacriticSensitive.evaluate(n),this.locale?this.locale.evaluate(n):null)}eachChild(n){n(this.caseSensitive),n(this.diacriticSensitive),this.locale&&n(this.locale)}outputDefined(){return!1}serialize(){const n={};return n["case-sensitive"]=this.caseSensitive.serialize(),n["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(n.locale=this.locale.serialize()),["collator",n]}}const Ua=8192;function zu(i,n){i[0]=Math.min(i[0],n[0]),i[1]=Math.min(i[1],n[1]),i[2]=Math.max(i[2],n[0]),i[3]=Math.max(i[3],n[1])}function Sl(i,n){return!(i[0]<=n[0]||i[2]>=n[2]||i[1]<=n[1]||i[3]>=n[3])}function Cc(i,n){const o=(180+i[0])/360,u=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+i[1]*Math.PI/360)))/360,h=Math.pow(2,n.z);return[Math.round(o*h*Ua),Math.round(u*h*Ua)]}function Om(i,n,o){const u=i[0]-n[0],h=i[1]-n[1],m=i[0]-o[0],v=i[1]-o[1];return u*v-m*h==0&&u*m<=0&&h*v<=0}function ku(i,n){let o=!1;for(let v=0,x=n.length;v<x;v++){const S=n[v];for(let E=0,R=S.length;E<R-1;E++){if(Om(i,S[E],S[E+1]))return!1;(h=S[E])[1]>(u=i)[1]!=(m=S[E+1])[1]>u[1]&&u[0]<(m[0]-h[0])*(u[1]-h[1])/(m[1]-h[1])+h[0]&&(o=!o)}}var u,h,m;return o}function $h(i,n){for(let o=0;o<n.length;o++)if(ku(i,n[o]))return!0;return!1}function Fh(i,n,o,u){const h=u[0]-o[0],m=u[1]-o[1],v=(i[0]-o[0])*m-h*(i[1]-o[1]),x=(n[0]-o[0])*m-h*(n[1]-o[1]);return v>0&&x<0||v<0&&x>0}function El(i,n,o){for(const E of o)for(let R=0;R<E.length-1;++R)if((x=[(v=E[R+1])[0]-(m=E[R])[0],v[1]-m[1]])[0]*(S=[(h=n)[0]-(u=i)[0],h[1]-u[1]])[1]-x[1]*S[0]!=0&&Fh(u,h,m,v)&&Fh(m,v,u,h))return!0;var u,h,m,v,x,S;return!1}function ar(i,n){for(let o=0;o<i.length;++o)if(!ku(i[o],n))return!1;for(let o=0;o<i.length-1;++o)if(El(i[o],i[o+1],n))return!1;return!0}function G0(i,n){for(let o=0;o<n.length;o++)if(ar(i,n[o]))return!0;return!1}function Bh(i,n,o){const u=[];for(let h=0;h<i.length;h++){const m=[];for(let v=0;v<i[h].length;v++){const x=Cc(i[h][v],o);zu(n,x),m.push(x)}u.push(m)}return u}function zm(i,n,o){const u=[];for(let h=0;h<i.length;h++){const m=Bh(i[h],n,o);u.push(m)}return u}function Nh(i,n,o,u){if(i[0]<o[0]||i[0]>o[2]){const h=.5*u;let m=i[0]-o[0]>h?-u:o[0]-i[0]>h?u:0;m===0&&(m=i[0]-o[2]>h?-u:o[2]-i[0]>h?u:0),i[0]+=m}zu(n,i)}function km(i,n,o,u){const h=Math.pow(2,u.z)*Ua,m=[u.x*Ua,u.y*Ua],v=[];if(!i)return v;for(const x of i)for(const S of x){const E=[S.x+m[0],S.y+m[1]];Nh(E,n,o,h),v.push(E)}return v}function jh(i,n,o,u){const h=Math.pow(2,u.z)*Ua,m=[u.x*Ua,u.y*Ua],v=[];if(!i)return v;for(const S of i){const E=[];for(const R of S){const z=[R.x+m[0],R.y+m[1]];zu(n,z),E.push(z)}v.push(E)}if(n[2]-n[0]<=h/2){(x=n)[0]=x[1]=1/0,x[2]=x[3]=-1/0;for(const S of v)for(const E of S)Nh(E,n,o,h)}var x;return v}class Cl{constructor(n,o){this.type=bn,this.geojson=n,this.geometries=o}static parse(n,o){if(n.length!==2)return o.error(`'within' expression requires exactly one argument, but found ${n.length-1} instead.`);if(ya(n[1])){const u=n[1];if(u.type==="FeatureCollection")for(let h=0;h<u.features.length;++h){const m=u.features[h].geometry.type;if(m==="Polygon"||m==="MultiPolygon")return new Cl(u,u.features[h].geometry)}else if(u.type==="Feature"){const h=u.geometry.type;if(h==="Polygon"||h==="MultiPolygon")return new Cl(u,u.geometry)}else if(u.type==="Polygon"||u.type==="MultiPolygon")return new Cl(u,u)}return o.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return function(o,u){const h=[1/0,1/0,-1/0,-1/0],m=[1/0,1/0,-1/0,-1/0],v=o.canonicalID();if(!v)return!1;if(u.type==="Polygon"){const x=Bh(u.coordinates,m,v),S=km(o.geometry(),h,m,v);if(!Sl(h,m))return!1;for(const E of S)if(!ku(E,x))return!1}if(u.type==="MultiPolygon"){const x=zm(u.coordinates,m,v),S=km(o.geometry(),h,m,v);if(!Sl(h,m))return!1;for(const E of S)if(!$h(E,x))return!1}return!0}(n,this.geometries);if(n.geometryType()==="LineString")return function(o,u){const h=[1/0,1/0,-1/0,-1/0],m=[1/0,1/0,-1/0,-1/0],v=o.canonicalID();if(!v)return!1;if(u.type==="Polygon"){const x=Bh(u.coordinates,m,v),S=jh(o.geometry(),h,m,v);if(!Sl(h,m))return!1;for(const E of S)if(!ar(E,x))return!1}if(u.type==="MultiPolygon"){const x=zm(u.coordinates,m,v),S=jh(o.geometry(),h,m,v);if(!Sl(h,m))return!1;for(const E of S)if(!G0(E,x))return!1}return!0}(n,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var Lu=Cl;function Tl(i){if(i instanceof ja&&(i.name==="get"&&i.args.length===1||i.name==="feature-state"||i.name==="has"&&i.args.length===1||i.name==="properties"||i.name==="geometry-type"||i.name==="id"||/^filter-/.test(i.name))||i instanceof Lu)return!1;let n=!0;return i.eachChild(o=>{n&&!Tl(o)&&(n=!1)}),n}function Va(i){if(i instanceof ja&&i.name==="feature-state")return!1;let n=!0;return i.eachChild(o=>{n&&!Va(o)&&(n=!1)}),n}function Vs(i,n){if(i instanceof ja&&n.indexOf(i.name)>=0)return!1;let o=!0;return i.eachChild(u=>{o&&!Vs(u,n)&&(o=!1)}),o}class Du{constructor(n,o){this.type=o.type,this.name=n,this.boundExpression=o}static parse(n,o){if(n.length!==2||typeof n[1]!="string")return o.error("'var' expression requires exactly one string literal argument.");const u=n[1];return o.scope.has(u)?new Du(u,o.scope.get(u)):o.error(`Unknown variable "${u}". Make sure "${u}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(n){return this.boundExpression.evaluate(n)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var Lm=Du;class Tc{constructor(n,o=[],u,h=new Xr,m=[]){this.registry=n,this.path=o,this.key=o.map(v=>`[${v}]`).join(""),this.scope=h,this.errors=m,this.expectedType=u}parse(n,o,u,h,m={}){return o?this.concat(o,u,h)._parse(n,m):this._parse(n,m)}_parse(n,o){function u(h,m,v){return v==="assert"?new Na(m,[h]):v==="coerce"?new wl(m,[h]):h}if(n!==null&&typeof n!="string"&&typeof n!="boolean"&&typeof n!="number"||(n=["literal",n]),Array.isArray(n)){if(n.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const h=n[0];if(typeof h!="string")return this.error(`Expression name must be a string, but found ${typeof h} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const m=this.registry[h];if(m){let v=m.parse(n,this);if(!v)return null;if(this.expectedType){const x=this.expectedType,S=v.type;if(x.kind!=="string"&&x.kind!=="number"&&x.kind!=="boolean"&&x.kind!=="object"&&x.kind!=="array"||S.kind!=="value")if(x.kind!=="color"&&x.kind!=="formatted"&&x.kind!=="resolvedImage"||S.kind!=="value"&&S.kind!=="string"){if(this.checkSubtype(x,S))return null}else v=u(v,x,o.typeAnnotation||"coerce");else v=u(v,x,o.typeAnnotation||"assert")}if(!(v instanceof js)&&v.type.kind!=="resolvedImage"&&Vh(v)){const x=new Dh;try{v=new js(v.type,v.evaluate(x))}catch(S){return this.error(S.message),null}}return v}return this.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(n===void 0?"'undefined' value invalid. Use null instead.":typeof n=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof n} instead.`)}concat(n,o,u){const h=typeof n=="number"?this.path.concat(n):this.path,m=u?this.scope.concat(u):this.scope;return new Tc(this.registry,h,o||null,m,this.errors)}error(n,...o){const u=`${this.key}${o.map(h=>`[${h}]`).join("")}`;this.errors.push(new Tn(u,n))}checkSubtype(n,o){const u=xi(n,o);return u&&this.error(u),u}}var Uh=Tc;function Vh(i){if(i instanceof Lm)return Vh(i.boundExpression);if(i instanceof ja&&i.name==="error"||i instanceof Ec||i instanceof Lu)return!1;const n=i instanceof wl||i instanceof Na;let o=!0;return i.eachChild(u=>{o=n?o&&Vh(u):o&&u instanceof js}),!!o&&Tl(i)&&Vs(i,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function $u(i,n){const o=i.length-1;let u,h,m=0,v=o,x=0;for(;m<=v;)if(x=Math.floor((m+v)/2),u=i[x],h=i[x+1],u<=n){if(x===o||n<h)return x;m=x+1}else{if(!(u>n))throw new zi("Input is not a number.");v=x-1}return 0}class Fu{constructor(n,o,u){this.type=n,this.input=o,this.labels=[],this.outputs=[];for(const[h,m]of u)this.labels.push(h),this.outputs.push(m)}static parse(n,o){if(n.length-1<4)return o.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return o.error("Expected an even number of arguments.");const u=o.parse(n[1],1,Ot);if(!u)return null;const h=[];let m=null;o.expectedType&&o.expectedType.kind!=="value"&&(m=o.expectedType);for(let v=1;v<n.length;v+=2){const x=v===1?-1/0:n[v],S=n[v+1],E=v,R=v+1;if(typeof x!="number")return o.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',E);if(h.length&&h[h.length-1][0]>=x)return o.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',E);const z=o.parse(S,R,m);if(!z)return null;m=m||z.type,h.push([x,z])}return new Fu(m,u,h)}evaluate(n){const o=this.labels,u=this.outputs;if(o.length===1)return u[0].evaluate(n);const h=this.input.evaluate(n);if(h<=o[0])return u[0].evaluate(n);const m=o.length;return h>=o[m-1]?u[m-1].evaluate(n):u[$u(o,h)].evaluate(n)}eachChild(n){n(this.input);for(const o of this.outputs)n(o)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}serialize(){const n=["step",this.input.serialize()];for(let o=0;o<this.labels.length;o++)o>0&&n.push(this.labels[o]),n.push(this.outputs[o].serialize());return n}}var Hh=Fu;function Jn(i,n,o){return i*(1-o)+n*o}var Ic=Object.freeze({__proto__:null,array:function(i,n,o){return i.map((u,h)=>Jn(u,n[h],o))},color:function(i,n,o){return new Nr(Jn(i.r,n.r,o),Jn(i.g,n.g,o),Jn(i.b,n.b,o),Jn(i.a,n.a,o))},number:Jn});const Dm=.95047,Gh=1.08883,$m=4/29,Hs=6/29,Wh=3*Hs*Hs,W0=Hs*Hs*Hs,q0=Math.PI/180,Z0=180/Math.PI;function qh(i){return i>W0?Math.pow(i,1/3):i/Wh+$m}function Zh(i){return i>Hs?i*i*i:Wh*(i-$m)}function Xh(i){return 255*(i<=.0031308?12.92*i:1.055*Math.pow(i,1/2.4)-.055)}function Bu(i){return(i/=255)<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4)}function Fm(i){const n=Bu(i.r),o=Bu(i.g),u=Bu(i.b),h=qh((.4124564*n+.3575761*o+.1804375*u)/Dm),m=qh((.2126729*n+.7151522*o+.072175*u)/1);return{l:116*m-16,a:500*(h-m),b:200*(m-qh((.0193339*n+.119192*o+.9503041*u)/Gh)),alpha:i.a}}function Bm(i){let n=(i.l+16)/116,o=isNaN(i.a)?n:n+i.a/500,u=isNaN(i.b)?n:n-i.b/200;return n=1*Zh(n),o=Dm*Zh(o),u=Gh*Zh(u),new Nr(Xh(3.2404542*o-1.5371385*n-.4985314*u),Xh(-.969266*o+1.8760108*n+.041556*u),Xh(.0556434*o-.2040259*n+1.0572252*u),i.alpha)}function X0(i,n,o){const u=n-i;return i+o*(u>180||u<-180?u-360*Math.round(u/360):u)}const Mc={forward:Fm,reverse:Bm,interpolate:function(i,n,o){return{l:Jn(i.l,n.l,o),a:Jn(i.a,n.a,o),b:Jn(i.b,n.b,o),alpha:Jn(i.alpha,n.alpha,o)}}},Il={forward:function(i){const{l:n,a:o,b:u}=Fm(i),h=Math.atan2(u,o)*Z0;return{h:h<0?h+360:h,c:Math.sqrt(o*o+u*u),l:n,alpha:i.a}},reverse:function(i){const n=i.h*q0,o=i.c;return Bm({l:i.l,a:Math.cos(n)*o,b:Math.sin(n)*o,alpha:i.alpha})},interpolate:function(i,n,o){return{h:X0(i.h,n.h,o),c:Jn(i.c,n.c,o),l:Jn(i.l,n.l,o),alpha:Jn(i.alpha,n.alpha,o)}}};var Kh=Object.freeze({__proto__:null,hcl:Il,lab:Mc});class Pc{constructor(n,o,u,h,m){this.type=n,this.operator=o,this.interpolation=u,this.input=h,this.labels=[],this.outputs=[];for(const[v,x]of m)this.labels.push(v),this.outputs.push(x)}static interpolationFactor(n,o,u,h){let m=0;if(n.name==="exponential")m=Yh(o,n.base,u,h);else if(n.name==="linear")m=Yh(o,1,u,h);else if(n.name==="cubic-bezier"){const v=n.controlPoints;m=new re(v[0],v[1],v[2],v[3]).solve(Yh(o,1,u,h))}return m}static parse(n,o){let[u,h,m,...v]=n;if(!Array.isArray(h)||h.length===0)return o.error("Expected an interpolation type expression.",1);if(h[0]==="linear")h={name:"linear"};else if(h[0]==="exponential"){const E=h[1];if(typeof E!="number")return o.error("Exponential interpolation requires a numeric base.",1,1);h={name:"exponential",base:E}}else{if(h[0]!=="cubic-bezier")return o.error(`Unknown interpolation type ${String(h[0])}`,1,0);{const E=h.slice(1);if(E.length!==4||E.some(R=>typeof R!="number"||R<0||R>1))return o.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);h={name:"cubic-bezier",controlPoints:E}}}if(n.length-1<4)return o.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return o.error("Expected an even number of arguments.");if(m=o.parse(m,2,Ot),!m)return null;const x=[];let S=null;u==="interpolate-hcl"||u==="interpolate-lab"?S=Qr:o.expectedType&&o.expectedType.kind!=="value"&&(S=o.expectedType);for(let E=0;E<v.length;E+=2){const R=v[E],z=v[E+1],L=E+3,H=E+4;if(typeof R!="number")return o.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',L);if(x.length&&x[x.length-1][0]>=R)return o.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',L);const G=o.parse(z,H,S);if(!G)return null;S=S||G.type,x.push([R,G])}return S.kind==="number"||S.kind==="color"||S.kind==="array"&&S.itemType.kind==="number"&&typeof S.N=="number"?new Pc(S,u,h,m,x):o.error(`Type ${Xn(S)} is not interpolatable.`)}evaluate(n){const o=this.labels,u=this.outputs;if(o.length===1)return u[0].evaluate(n);const h=this.input.evaluate(n);if(h<=o[0])return u[0].evaluate(n);const m=o.length;if(h>=o[m-1])return u[m-1].evaluate(n);const v=$u(o,h),x=Pc.interpolationFactor(this.interpolation,h,o[v],o[v+1]),S=u[v].evaluate(n),E=u[v+1].evaluate(n);return this.operator==="interpolate"?Ic[this.type.kind.toLowerCase()](S,E,x):this.operator==="interpolate-hcl"?Il.reverse(Il.interpolate(Il.forward(S),Il.forward(E),x)):Mc.reverse(Mc.interpolate(Mc.forward(S),Mc.forward(E),x))}eachChild(n){n(this.input);for(const o of this.outputs)n(o)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}serialize(){let n;n=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const o=[this.operator,n,this.input.serialize()];for(let u=0;u<this.labels.length;u++)o.push(this.labels[u],this.outputs[u].serialize());return o}}function Yh(i,n,o,u){const h=u-o,m=i-o;return h===0?0:n===1?m/h:(Math.pow(n,m)-1)/(Math.pow(n,h)-1)}var xa=Pc;class Nu{constructor(n,o){this.type=n,this.args=o}static parse(n,o){if(n.length<2)return o.error("Expectected at least one argument.");let u=null;const h=o.expectedType;h&&h.kind!=="value"&&(u=h);const m=[];for(const x of n.slice(1)){const S=o.parse(x,1+m.length,u,void 0,{typeAnnotation:"omit"});if(!S)return null;u=u||S.type,m.push(S)}const v=h&&m.some(x=>xi(h,x.type));return new Nu(v?In:u,m)}evaluate(n){let o,u=null,h=0;for(const m of this.args){if(h++,u=m.evaluate(n),u&&u instanceof dr&&!u.available&&(o||(o=u),u=null,h===this.args.length))return o;if(u!==null)break}return u}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}serialize(){const n=["coalesce"];return this.eachChild(o=>{n.push(o.serialize())}),n}}var Jh=Nu;class ju{constructor(n,o){this.type=o.type,this.bindings=[].concat(n),this.result=o}evaluate(n){return this.result.evaluate(n)}eachChild(n){for(const o of this.bindings)n(o[1]);n(this.result)}static parse(n,o){if(n.length<4)return o.error(`Expected at least 3 arguments, but found ${n.length-1} instead.`);const u=[];for(let m=1;m<n.length-1;m+=2){const v=n[m];if(typeof v!="string")return o.error(`Expected string, but found ${typeof v} instead.`,m);if(/[^a-zA-Z0-9_]/.test(v))return o.error("Variable names must contain only alphanumeric characters or '_'.",m);const x=o.parse(n[m+1],m+1);if(!x)return null;u.push([v,x])}const h=o.parse(n[n.length-1],n.length-1,o.expectedType,u);return h?new ju(u,h):null}outputDefined(){return this.result.outputDefined()}serialize(){const n=["let"];for(const[o,u]of this.bindings)n.push(o,u.serialize());return n.push(this.result.serialize()),n}}var Nm=ju;class Qh{constructor(n,o,u){this.type=n,this.index=o,this.input=u}static parse(n,o){if(n.length!==3)return o.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const u=o.parse(n[1],1,Ot),h=o.parse(n[2],2,Ui(o.expectedType||In));return u&&h?new Qh(h.type.itemType,u,h):null}evaluate(n){const o=this.index.evaluate(n),u=this.input.evaluate(n);if(o<0)throw new zi(`Array index out of bounds: ${o} < 0.`);if(o>=u.length)throw new zi(`Array index out of bounds: ${o} > ${u.length-1}.`);if(o!==Math.floor(o))throw new zi(`Array index must be an integer, but found ${o} instead.`);return u[o]}eachChild(n){n(this.index),n(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var K0=Qh;class ef{constructor(n,o){this.type=bn,this.needle=n,this.haystack=o}static parse(n,o){if(n.length!==3)return o.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const u=o.parse(n[1],1,In),h=o.parse(n[2],2,In);return u&&h?bo(u.type,[bn,xn,Ot,Gr,In])?new ef(u,h):o.error(`Expected first argument to be of type boolean, string, number or null, but found ${Xn(u.type)} instead`):null}evaluate(n){const o=this.needle.evaluate(n),u=this.haystack.evaluate(n);if(u==null)return!1;if(!Oo(o,["boolean","string","number","null"]))throw new zi(`Expected first argument to be of type boolean, string, number or null, but found ${Xn(zr(o))} instead.`);if(!Oo(u,["string","array"]))throw new zi(`Expected second argument to be of type array or string, but found ${Xn(zr(u))} instead.`);return u.indexOf(o)>=0}eachChild(n){n(this.needle),n(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var Uu=ef;class Ac{constructor(n,o,u){this.type=Ot,this.needle=n,this.haystack=o,this.fromIndex=u}static parse(n,o){if(n.length<=2||n.length>=5)return o.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const u=o.parse(n[1],1,In),h=o.parse(n[2],2,In);if(!u||!h)return null;if(!bo(u.type,[bn,xn,Ot,Gr,In]))return o.error(`Expected first argument to be of type boolean, string, number or null, but found ${Xn(u.type)} instead`);if(n.length===4){const m=o.parse(n[3],3,Ot);return m?new Ac(u,h,m):null}return new Ac(u,h)}evaluate(n){const o=this.needle.evaluate(n),u=this.haystack.evaluate(n);if(!Oo(o,["boolean","string","number","null"]))throw new zi(`Expected first argument to be of type boolean, string, number or null, but found ${Xn(zr(o))} instead.`);if(!Oo(u,["string","array"]))throw new zi(`Expected second argument to be of type array or string, but found ${Xn(zr(u))} instead.`);if(this.fromIndex){const h=this.fromIndex.evaluate(n);return u.indexOf(o,h)}return u.indexOf(o)}eachChild(n){n(this.needle),n(this.haystack),this.fromIndex&&n(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const n=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),n]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var jm=Ac;class tf{constructor(n,o,u,h,m,v){this.inputType=n,this.type=o,this.input=u,this.cases=h,this.outputs=m,this.otherwise=v}static parse(n,o){if(n.length<5)return o.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if(n.length%2!=1)return o.error("Expected an even number of arguments.");let u,h;o.expectedType&&o.expectedType.kind!=="value"&&(h=o.expectedType);const m={},v=[];for(let E=2;E<n.length-1;E+=2){let R=n[E];const z=n[E+1];Array.isArray(R)||(R=[R]);const L=o.concat(E);if(R.length===0)return L.error("Expected at least one branch label.");for(const G of R){if(typeof G!="number"&&typeof G!="string")return L.error("Branch labels must be numbers or strings.");if(typeof G=="number"&&Math.abs(G)>Number.MAX_SAFE_INTEGER)return L.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof G=="number"&&Math.floor(G)!==G)return L.error("Numeric branch labels must be integer values.");if(u){if(L.checkSubtype(u,zr(G)))return null}else u=zr(G);if(m[String(G)]!==void 0)return L.error("Branch labels must be unique.");m[String(G)]=v.length}const H=o.parse(z,E,h);if(!H)return null;h=h||H.type,v.push(H)}const x=o.parse(n[1],1,In);if(!x)return null;const S=o.parse(n[n.length-1],n.length-1,h);return S?x.type.kind!=="value"&&o.concat(1).checkSubtype(u,x.type)?null:new tf(u,h,x,m,v,S):null}evaluate(n){const o=this.input.evaluate(n);return(zr(o)===this.inputType&&this.outputs[this.cases[o]]||this.otherwise).evaluate(n)}eachChild(n){n(this.input),this.outputs.forEach(n),n(this.otherwise)}outputDefined(){return this.outputs.every(n=>n.outputDefined())&&this.otherwise.outputDefined()}serialize(){const n=["match",this.input.serialize()],o=Object.keys(this.cases).sort(),u=[],h={};for(const v of o){const x=h[this.cases[v]];x===void 0?(h[this.cases[v]]=u.length,u.push([this.cases[v],[v]])):u[x][1].push(v)}const m=v=>this.inputType.kind==="number"?Number(v):v;for(const[v,x]of u)n.push(x.length===1?m(x[0]):x.map(m)),n.push(this.outputs[v].serialize());return n.push(this.otherwise.serialize()),n}}var Y0=tf;class nf{constructor(n,o,u){this.type=n,this.branches=o,this.otherwise=u}static parse(n,o){if(n.length<4)return o.error(`Expected at least 3 arguments, but found only ${n.length-1}.`);if(n.length%2!=0)return o.error("Expected an odd number of arguments.");let u;o.expectedType&&o.expectedType.kind!=="value"&&(u=o.expectedType);const h=[];for(let v=1;v<n.length-1;v+=2){const x=o.parse(n[v],v,bn);if(!x)return null;const S=o.parse(n[v+1],v+1,u);if(!S)return null;h.push([x,S]),u=u||S.type}const m=o.parse(n[n.length-1],n.length-1,u);return m?new nf(u,h,m):null}evaluate(n){for(const[o,u]of this.branches)if(o.evaluate(n))return u.evaluate(n);return this.otherwise.evaluate(n)}eachChild(n){for(const[o,u]of this.branches)n(o),n(u);n(this.otherwise)}outputDefined(){return this.branches.every(([n,o])=>o.outputDefined())&&this.otherwise.outputDefined()}serialize(){const n=["case"];return this.eachChild(o=>{n.push(o.serialize())}),n}}var Um=nf;class Rc{constructor(n,o,u,h){this.type=n,this.input=o,this.beginIndex=u,this.endIndex=h}static parse(n,o){if(n.length<=2||n.length>=5)return o.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const u=o.parse(n[1],1,In),h=o.parse(n[2],2,Ot);if(!u||!h)return null;if(!bo(u.type,[Ui(In),xn,In]))return o.error(`Expected first argument to be of type array or string, but found ${Xn(u.type)} instead`);if(n.length===4){const m=o.parse(n[3],3,Ot);return m?new Rc(u.type,u,h,m):null}return new Rc(u.type,u,h)}evaluate(n){const o=this.input.evaluate(n),u=this.beginIndex.evaluate(n);if(!Oo(o,["string","array"]))throw new zi(`Expected first argument to be of type array or string, but found ${Xn(zr(o))} instead.`);if(this.endIndex){const h=this.endIndex.evaluate(n);return o.slice(u,h)}return o.slice(u)}eachChild(n){n(this.input),n(this.beginIndex),this.endIndex&&n(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const n=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),n]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var Vm=Rc;function Vu(i,n){return i==="=="||i==="!="?n.kind==="boolean"||n.kind==="string"||n.kind==="number"||n.kind==="null"||n.kind==="value":n.kind==="string"||n.kind==="number"||n.kind==="value"}function Hm(i,n,o,u){return u.compare(n,o)===0}function Ml(i,n,o){const u=i!=="=="&&i!=="!=";return class Zk{constructor(m,v,x){this.type=bn,this.lhs=m,this.rhs=v,this.collator=x,this.hasUntypedArgument=m.type.kind==="value"||v.type.kind==="value"}static parse(m,v){if(m.length!==3&&m.length!==4)return v.error("Expected two or three arguments.");const x=m[0];let S=v.parse(m[1],1,In);if(!S)return null;if(!Vu(x,S.type))return v.concat(1).error(`"${x}" comparisons are not supported for type '${Xn(S.type)}'.`);let E=v.parse(m[2],2,In);if(!E)return null;if(!Vu(x,E.type))return v.concat(2).error(`"${x}" comparisons are not supported for type '${Xn(E.type)}'.`);if(S.type.kind!==E.type.kind&&S.type.kind!=="value"&&E.type.kind!=="value")return v.error(`Cannot compare types '${Xn(S.type)}' and '${Xn(E.type)}'.`);u&&(S.type.kind==="value"&&E.type.kind!=="value"?S=new Na(E.type,[S]):S.type.kind!=="value"&&E.type.kind==="value"&&(E=new Na(S.type,[E])));let R=null;if(m.length===4){if(S.type.kind!=="string"&&E.type.kind!=="string"&&S.type.kind!=="value"&&E.type.kind!=="value")return v.error("Cannot use collator to compare non-string types.");if(R=v.parse(m[3],3,Br),!R)return null}return new Zk(S,E,R)}evaluate(m){const v=this.lhs.evaluate(m),x=this.rhs.evaluate(m);if(u&&this.hasUntypedArgument){const S=zr(v),E=zr(x);if(S.kind!==E.kind||S.kind!=="string"&&S.kind!=="number")throw new zi(`Expected arguments for "${i}" to be (string, string) or (number, number), but found (${S.kind}, ${E.kind}) instead.`)}if(this.collator&&!u&&this.hasUntypedArgument){const S=zr(v),E=zr(x);if(S.kind!=="string"||E.kind!=="string")return n(m,v,x)}return this.collator?o(m,v,x,this.collator.evaluate(m)):n(m,v,x)}eachChild(m){m(this.lhs),m(this.rhs),this.collator&&m(this.collator)}outputDefined(){return!0}serialize(){const m=[i];return this.eachChild(v=>{m.push(v.serialize())}),m}}}const J0=Ml("==",function(i,n,o){return n===o},Hm),Q0=Ml("!=",function(i,n,o){return n!==o},function(i,n,o,u){return!Hm(0,n,o,u)}),e_=Ml("<",function(i,n,o){return n<o},function(i,n,o,u){return u.compare(n,o)<0}),t_=Ml(">",function(i,n,o){return n>o},function(i,n,o,u){return u.compare(n,o)>0}),n_=Ml("<=",function(i,n,o){return n<=o},function(i,n,o,u){return u.compare(n,o)<=0}),Gm=Ml(">=",function(i,n,o){return n>=o},function(i,n,o,u){return u.compare(n,o)>=0});class Hu{constructor(n,o,u,h,m,v){this.type=xn,this.number=n,this.locale=o,this.currency=u,this.unit=h,this.minFractionDigits=m,this.maxFractionDigits=v}static parse(n,o){if(n.length!==3)return o.error("Expected two arguments.");const u=o.parse(n[1],1,Ot);if(!u)return null;const h=n[2];if(typeof h!="object"||Array.isArray(h))return o.error("NumberFormat options argument must be an object.");let m=null;if(h.locale&&(m=o.parse(h.locale,1,xn),!m))return null;let v=null;if(h.currency&&(v=o.parse(h.currency,1,xn),!v))return null;let x=null;if(h.unit&&(x=o.parse(h.unit,1,xn),!x))return null;let S=null;if(h["min-fraction-digits"]&&(S=o.parse(h["min-fraction-digits"],1,Ot),!S))return null;let E=null;return h["max-fraction-digits"]&&(E=o.parse(h["max-fraction-digits"],1,Ot),!E)?null:new Hu(u,m,v,x,S,E)}evaluate(n){return new Intl.NumberFormat(this.locale?this.locale.evaluate(n):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(n):void 0,unit:this.unit?this.unit.evaluate(n):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(n):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(n):void 0}).format(this.number.evaluate(n))}eachChild(n){n(this.number),this.locale&&n(this.locale),this.currency&&n(this.currency),this.unit&&n(this.unit),this.minFractionDigits&&n(this.minFractionDigits),this.maxFractionDigits&&n(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const n={};return this.locale&&(n.locale=this.locale.serialize()),this.currency&&(n.currency=this.currency.serialize()),this.unit&&(n.unit=this.unit.serialize()),this.minFractionDigits&&(n["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(n["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),n]}}class Pl{constructor(n){this.type=Ot,this.input=n}static parse(n,o){if(n.length!==2)return o.error(`Expected 1 argument, but found ${n.length-1} instead.`);const u=o.parse(n[1],1);return u?u.type.kind!=="array"&&u.type.kind!=="string"&&u.type.kind!=="value"?o.error(`Expected argument of type string or array, but found ${Xn(u.type)} instead.`):new Pl(u):null}evaluate(n){const o=this.input.evaluate(n);if(typeof o=="string"||Array.isArray(o))return o.length;throw new zi(`Expected value to be of type string or array, but found ${Xn(zr(o))} instead.`)}eachChild(n){n(this.input)}outputDefined(){return!1}serialize(){const n=["length"];return this.eachChild(o=>{n.push(o.serialize())}),n}}const Wm={"==":J0,"!=":Q0,">":t_,"<":e_,">=":Gm,"<=":n_,array:Na,at:K0,boolean:Na,case:Um,coalesce:Jh,collator:Ec,format:ws,image:Ou,in:Uu,"index-of":jm,interpolate:xa,"interpolate-hcl":xa,"interpolate-lab":xa,length:Pl,let:Nm,literal:js,match:Y0,number:Na,"number-format":Hu,object:Na,slice:Vm,step:Hh,string:Na,"to-boolean":wl,"to-color":wl,"to-number":wl,"to-string":wl,var:Lm,within:Lu};function qm(i,[n,o,u,h]){n=n.evaluate(i),o=o.evaluate(i),u=u.evaluate(i);const m=h?h.evaluate(i):1,v=Wr(n,o,u,m);if(v)throw new zi(v);return new Nr(n/255*m,o/255*m,u/255*m,m)}function Ha(i,n){return i in n}function Gu(i,n){const o=n[i];return o===void 0?null:o}function zo(i){return{type:i}}ja.register(Wm,{error:[{kind:"error"},[xn],(i,[n])=>{throw new zi(n.evaluate(i))}],typeof:[xn,[In],(i,[n])=>Xn(zr(n.evaluate(i)))],"to-rgba":[Ui(Ot,4),[Qr],(i,[n])=>n.evaluate(i).toArray()],rgb:[Qr,[Ot,Ot,Ot],qm],rgba:[Qr,[Ot,Ot,Ot,Ot],qm],has:{type:bn,overloads:[[[xn],(i,[n])=>Ha(n.evaluate(i),i.properties())],[[xn,Kr],(i,[n,o])=>Ha(n.evaluate(i),o.evaluate(i))]]},get:{type:In,overloads:[[[xn],(i,[n])=>Gu(n.evaluate(i),i.properties())],[[xn,Kr],(i,[n,o])=>Gu(n.evaluate(i),o.evaluate(i))]]},"feature-state":[In,[xn],(i,[n])=>Gu(n.evaluate(i),i.featureState||{})],properties:[Kr,[],i=>i.properties()],"geometry-type":[xn,[],i=>i.geometryType()],id:[In,[],i=>i.id()],zoom:[Ot,[],i=>i.globals.zoom],pitch:[Ot,[],i=>i.globals.pitch||0],"distance-from-center":[Ot,[],i=>i.distanceFromCenter()],"heatmap-density":[Ot,[],i=>i.globals.heatmapDensity||0],"line-progress":[Ot,[],i=>i.globals.lineProgress||0],"sky-radial-progress":[Ot,[],i=>i.globals.skyRadialProgress||0],accumulated:[In,[],i=>i.globals.accumulated===void 0?null:i.globals.accumulated],"+":[Ot,zo(Ot),(i,n)=>{let o=0;for(const u of n)o+=u.evaluate(i);return o}],"*":[Ot,zo(Ot),(i,n)=>{let o=1;for(const u of n)o*=u.evaluate(i);return o}],"-":{type:Ot,overloads:[[[Ot,Ot],(i,[n,o])=>n.evaluate(i)-o.evaluate(i)],[[Ot],(i,[n])=>-n.evaluate(i)]]},"/":[Ot,[Ot,Ot],(i,[n,o])=>n.evaluate(i)/o.evaluate(i)],"%":[Ot,[Ot,Ot],(i,[n,o])=>n.evaluate(i)%o.evaluate(i)],ln2:[Ot,[],()=>Math.LN2],pi:[Ot,[],()=>Math.PI],e:[Ot,[],()=>Math.E],"^":[Ot,[Ot,Ot],(i,[n,o])=>Math.pow(n.evaluate(i),o.evaluate(i))],sqrt:[Ot,[Ot],(i,[n])=>Math.sqrt(n.evaluate(i))],log10:[Ot,[Ot],(i,[n])=>Math.log(n.evaluate(i))/Math.LN10],ln:[Ot,[Ot],(i,[n])=>Math.log(n.evaluate(i))],log2:[Ot,[Ot],(i,[n])=>Math.log(n.evaluate(i))/Math.LN2],sin:[Ot,[Ot],(i,[n])=>Math.sin(n.evaluate(i))],cos:[Ot,[Ot],(i,[n])=>Math.cos(n.evaluate(i))],tan:[Ot,[Ot],(i,[n])=>Math.tan(n.evaluate(i))],asin:[Ot,[Ot],(i,[n])=>Math.asin(n.evaluate(i))],acos:[Ot,[Ot],(i,[n])=>Math.acos(n.evaluate(i))],atan:[Ot,[Ot],(i,[n])=>Math.atan(n.evaluate(i))],min:[Ot,zo(Ot),(i,n)=>Math.min(...n.map(o=>o.evaluate(i)))],max:[Ot,zo(Ot),(i,n)=>Math.max(...n.map(o=>o.evaluate(i)))],abs:[Ot,[Ot],(i,[n])=>Math.abs(n.evaluate(i))],round:[Ot,[Ot],(i,[n])=>{const o=n.evaluate(i);return o<0?-Math.round(-o):Math.round(o)}],floor:[Ot,[Ot],(i,[n])=>Math.floor(n.evaluate(i))],ceil:[Ot,[Ot],(i,[n])=>Math.ceil(n.evaluate(i))],"filter-==":[bn,[xn,In],(i,[n,o])=>i.properties()[n.value]===o.value],"filter-id-==":[bn,[In],(i,[n])=>i.id()===n.value],"filter-type-==":[bn,[xn],(i,[n])=>i.geometryType()===n.value],"filter-<":[bn,[xn,In],(i,[n,o])=>{const u=i.properties()[n.value],h=o.value;return typeof u==typeof h&&u<h}],"filter-id-<":[bn,[In],(i,[n])=>{const o=i.id(),u=n.value;return typeof o==typeof u&&o<u}],"filter->":[bn,[xn,In],(i,[n,o])=>{const u=i.properties()[n.value],h=o.value;return typeof u==typeof h&&u>h}],"filter-id->":[bn,[In],(i,[n])=>{const o=i.id(),u=n.value;return typeof o==typeof u&&o>u}],"filter-<=":[bn,[xn,In],(i,[n,o])=>{const u=i.properties()[n.value],h=o.value;return typeof u==typeof h&&u<=h}],"filter-id-<=":[bn,[In],(i,[n])=>{const o=i.id(),u=n.value;return typeof o==typeof u&&o<=u}],"filter->=":[bn,[xn,In],(i,[n,o])=>{const u=i.properties()[n.value],h=o.value;return typeof u==typeof h&&u>=h}],"filter-id->=":[bn,[In],(i,[n])=>{const o=i.id(),u=n.value;return typeof o==typeof u&&o>=u}],"filter-has":[bn,[In],(i,[n])=>n.value in i.properties()],"filter-has-id":[bn,[],i=>i.id()!==null&&i.id()!==void 0],"filter-type-in":[bn,[Ui(xn)],(i,[n])=>n.value.indexOf(i.geometryType())>=0],"filter-id-in":[bn,[Ui(In)],(i,[n])=>n.value.indexOf(i.id())>=0],"filter-in-small":[bn,[xn,Ui(In)],(i,[n,o])=>o.value.indexOf(i.properties()[n.value])>=0],"filter-in-large":[bn,[xn,Ui(In)],(i,[n,o])=>function(u,h,m,v){for(;m<=v;){const x=m+v>>1;if(h[x]===u)return!0;h[x]>u?v=x-1:m=x+1}return!1}(i.properties()[n.value],o.value,0,o.value.length-1)],all:{type:bn,overloads:[[[bn,bn],(i,[n,o])=>n.evaluate(i)&&o.evaluate(i)],[zo(bn),(i,n)=>{for(const o of n)if(!o.evaluate(i))return!1;return!0}]]},any:{type:bn,overloads:[[[bn,bn],(i,[n,o])=>n.evaluate(i)||o.evaluate(i)],[zo(bn),(i,n)=>{for(const o of n)if(o.evaluate(i))return!0;return!1}]]},"!":[bn,[bn],(i,[n])=>!n.evaluate(i)],"is-supported-script":[bn,[xn],(i,[n])=>{const o=i.globals&&i.globals.isSupportedScript;return!o||o(n.evaluate(i))}],upcase:[xn,[xn],(i,[n])=>n.evaluate(i).toUpperCase()],downcase:[xn,[xn],(i,[n])=>n.evaluate(i).toLowerCase()],concat:[xn,zo(In),(i,n)=>n.map(o=>xs(o.evaluate(i))).join("")],"resolved-locale":[xn,[Br],(i,[n])=>n.evaluate(i).resolvedLocale()]});var Oc=Wm;function Zm(i){return{result:"success",value:i}}function Gs(i){return{result:"error",value:i}}function Al(i){return i["property-type"]==="data-driven"}function Wu(i){return!!i.expression&&i.expression.parameters.indexOf("zoom")>-1}function qu(i){return!!i.expression&&i.expression.interpolated}function tr(i){return i instanceof Number?"number":i instanceof String?"string":i instanceof Boolean?"boolean":Array.isArray(i)?"array":i===null?"null":typeof i}function zc(i){return typeof i=="object"&&i!==null&&!Array.isArray(i)}function Xm(i){return i}function Zu(i,n){const o=n.type==="color",u=i.stops&&typeof i.stops[0][0]=="object",h=u||!(u||i.property!==void 0),m=i.type||(qu(n)?"exponential":"interval");if(o&&((i=Si({},i)).stops&&(i.stops=i.stops.map(E=>[E[0],Nr.parse(E[1])])),i.default=Nr.parse(i.default?i.default:n.default)),i.colorSpace&&i.colorSpace!=="rgb"&&!Kh[i.colorSpace])throw new Error(`Unknown color space: ${i.colorSpace}`);let v,x,S;if(m==="exponential")v=Ga;else if(m==="interval")v=Xu;else if(m==="categorical"){v=Km,x=Object.create(null);for(const E of i.stops)x[E[0]]=E[1];S=typeof i.stops[0][0]}else{if(m!=="identity")throw new Error(`Unknown function type "${m}"`);v=Ym}if(u){const E={},R=[];for(let H=0;H<i.stops.length;H++){const G=i.stops[H],Y=G[0].zoom;E[Y]===void 0&&(E[Y]={zoom:Y,type:i.type,property:i.property,default:i.default,stops:[]},R.push(Y)),E[Y].stops.push([G[0].value,G[1]])}const z=[];for(const H of R)z.push([E[H].zoom,Zu(E[H],n)]);const L={name:"linear"};return{kind:"composite",interpolationType:L,interpolationFactor:xa.interpolationFactor.bind(void 0,L),zoomStops:z.map(H=>H[0]),evaluate:({zoom:H},G)=>Ga({stops:z,base:i.base},n,H).evaluate(H,G)}}if(h){const E=m==="exponential"?{name:"exponential",base:i.base!==void 0?i.base:1}:null;return{kind:"camera",interpolationType:E,interpolationFactor:xa.interpolationFactor.bind(void 0,E),zoomStops:i.stops.map(R=>R[0]),evaluate:({zoom:R})=>v(i,n,R,x,S)}}return{kind:"source",evaluate(E,R){const z=R&&R.properties?R.properties[i.property]:void 0;return z===void 0?Rl(i.default,n.default):v(i,n,z,x,S)}}}function Rl(i,n,o){return i!==void 0?i:n!==void 0?n:o!==void 0?o:void 0}function Km(i,n,o,u,h){return Rl(typeof o===h?u[o]:void 0,i.default,n.default)}function Xu(i,n,o){if(tr(o)!=="number")return Rl(i.default,n.default);const u=i.stops.length;if(u===1||o<=i.stops[0][0])return i.stops[0][1];if(o>=i.stops[u-1][0])return i.stops[u-1][1];const h=$u(i.stops.map(m=>m[0]),o);return i.stops[h][1]}function Ga(i,n,o){const u=i.base!==void 0?i.base:1;if(tr(o)!=="number")return Rl(i.default,n.default);const h=i.stops.length;if(h===1||o<=i.stops[0][0])return i.stops[0][1];if(o>=i.stops[h-1][0])return i.stops[h-1][1];const m=$u(i.stops.map(R=>R[0]),o),v=function(R,z,L,H){const G=H-L,Y=R-L;return G===0?0:z===1?Y/G:(Math.pow(z,Y)-1)/(Math.pow(z,G)-1)}(o,u,i.stops[m][0],i.stops[m+1][0]),x=i.stops[m][1],S=i.stops[m+1][1];let E=Ic[n.type]||Xm;if(i.colorSpace&&i.colorSpace!=="rgb"){const R=Kh[i.colorSpace];E=(z,L)=>R.reverse(R.interpolate(R.forward(z),R.forward(L),v))}return typeof x.evaluate=="function"?{evaluate(...R){const z=x.evaluate.apply(void 0,R),L=S.evaluate.apply(void 0,R);if(z!==void 0&&L!==void 0)return E(z,L,v)}}:E(x,S,v)}function Ym(i,n,o){return n.type==="color"?o=Nr.parse(o):n.type==="formatted"?o=Yn.fromString(o.toString()):n.type==="resolvedImage"?o=dr.fromString(o.toString()):tr(o)===n.type||n.type==="enum"&&n.values[o]||(o=void 0),Rl(o,i.default,n.default)}class Ku{constructor(n,o){this.expression=n,this._warningHistory={},this._evaluator=new Dh,this._defaultValue=o?function(u){return u.type==="color"&&(zc(u.default)||Array.isArray(u.default))?new Nr(0,0,0,0):u.type==="color"?Nr.parse(u.default)||null:u.default===void 0?null:u.default}(o):null,this._enumValues=o&&o.type==="enum"?o.values:null}evaluateWithoutErrorHandling(n,o,u,h,m,v,x,S){return this._evaluator.globals=n,this._evaluator.feature=o,this._evaluator.featureState=u,this._evaluator.canonical=h||null,this._evaluator.availableImages=m||null,this._evaluator.formattedSection=v,this._evaluator.featureTileCoord=x||null,this._evaluator.featureDistanceData=S||null,this.expression.evaluate(this._evaluator)}evaluate(n,o,u,h,m,v,x,S){this._evaluator.globals=n,this._evaluator.feature=o||null,this._evaluator.featureState=u||null,this._evaluator.canonical=h||null,this._evaluator.availableImages=m||null,this._evaluator.formattedSection=v||null,this._evaluator.featureTileCoord=x||null,this._evaluator.featureDistanceData=S||null;try{const E=this.expression.evaluate(this._evaluator);if(E==null||typeof E=="number"&&E!=E)return this._defaultValue;if(this._enumValues&&!(E in this._enumValues))throw new zi(`Expected value to be one of ${Object.keys(this._enumValues).map(R=>JSON.stringify(R)).join(", ")}, but found ${JSON.stringify(E)} instead.`);return E}catch(E){return this._warningHistory[E.message]||(this._warningHistory[E.message]=!0,typeof console<"u"&&console.warn(E.message)),this._defaultValue}}}function Ol(i){return Array.isArray(i)&&i.length>0&&typeof i[0]=="string"&&i[0]in Oc}function zl(i,n){const o=new Uh(Oc,[],n?function(h){const m={color:Qr,string:xn,number:Ot,enum:xn,boolean:bn,formatted:Ao,resolvedImage:Ro};return h.type==="array"?Ui(m[h.value]||In,h.length):m[h.type]}(n):void 0),u=o.parse(i,void 0,void 0,void 0,n&&n.type==="string"?{typeAnnotation:"coerce"}:void 0);return u?Zm(new Ku(u,n)):Gs(o.errors)}class rf{constructor(n,o){this.kind=n,this._styleExpression=o,this.isStateDependent=n!=="constant"&&!Va(o.expression)}evaluateWithoutErrorHandling(n,o,u,h,m,v){return this._styleExpression.evaluateWithoutErrorHandling(n,o,u,h,m,v)}evaluate(n,o,u,h,m,v){return this._styleExpression.evaluate(n,o,u,h,m,v)}}class kc{constructor(n,o,u,h){this.kind=n,this.zoomStops=u,this._styleExpression=o,this.isStateDependent=n!=="camera"&&!Va(o.expression),this.interpolationType=h}evaluateWithoutErrorHandling(n,o,u,h,m,v){return this._styleExpression.evaluateWithoutErrorHandling(n,o,u,h,m,v)}evaluate(n,o,u,h,m,v){return this._styleExpression.evaluate(n,o,u,h,m,v)}interpolationFactor(n,o,u){return this.interpolationType?xa.interpolationFactor(this.interpolationType,n,o,u):0}}function Lc(i,n){if((i=zl(i,n)).result==="error")return i;const o=i.value.expression,u=Tl(o);if(!u&&!Al(n))return Gs([new Tn("","data expressions not supported")]);const h=Vs(o,["zoom","pitch","distance-from-center"]);if(!h&&!Wu(n))return Gs([new Tn("","zoom expressions not supported")]);const m=Ju(o);return m||h?m instanceof Tn?Gs([m]):m instanceof xa&&!qu(n)?Gs([new Tn("",'"interpolate" expressions cannot be used with this property')]):Zm(m?new kc(u?"camera":"composite",i.value,m.labels,m instanceof xa?m.interpolation:void 0):new rf(u?"constant":"source",i.value)):Gs([new Tn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Yu{constructor(n,o){this._parameters=n,this._specification=o,Si(this,Zu(this._parameters,this._specification))}static deserialize(n){return new Yu(n._parameters,n._specification)}static serialize(n){return{_parameters:n._parameters,_specification:n._specification}}}function Ju(i){let n=null;if(i instanceof Nm)n=Ju(i.result);else if(i instanceof Jh){for(const o of i.args)if(n=Ju(o),n)break}else(i instanceof Hh||i instanceof xa)&&i.input instanceof ja&&i.input.name==="zoom"&&(n=i);return n instanceof Tn||i.eachChild(o=>{const u=Ju(o);u instanceof Tn?n=u:!n&&u?n=new Tn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&u&&n!==u&&(n=new Tn("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),n}class Kt{constructor(n,o,u,h){this.message=(n?`${n}: `:"")+u,h&&(this.identifier=h),o!=null&&o.__line__&&(this.line=o.__line__)}}function Yo(i){const n=i.key,o=i.value,u=i.valueSpec||{},h=i.objectElementValidators||{},m=i.style,v=i.styleSpec;let x=[];const S=tr(o);if(S!=="object")return[new Kt(n,o,`object expected, ${S} found`)];for(const E in o){const R=E.split(".")[0];let z;h[R]?z=h[R]:u[R]?z=Vi:h["*"]?z=h["*"]:u["*"]&&(z=Vi),z?x=x.concat(z({key:(n&&`${n}.`)+E,value:o[E],valueSpec:u[R]||u["*"],style:m,styleSpec:v,object:o,objectKey:E},o)):x.push(new Kt(n,o[E],`unknown property "${E}"`))}for(const E in u)h[E]||u[E].required&&u[E].default===void 0&&o[E]===void 0&&x.push(new Kt(n,o,`missing required property "${E}"`));return x}function Jm(i){const n=i.value,o=i.valueSpec,u=i.style,h=i.styleSpec,m=i.key,v=i.arrayElementValidator||Vi;if(tr(n)!=="array")return[new Kt(m,n,`array expected, ${tr(n)} found`)];if(o.length&&n.length!==o.length)return[new Kt(m,n,`array length ${o.length} expected, length ${n.length} found`)];if(o["min-length"]&&n.length<o["min-length"])return[new Kt(m,n,`array length at least ${o["min-length"]} expected, length ${n.length} found`)];let x={type:o.value,values:o.values,minimum:o.minimum,maximum:o.maximum,function:void 0};h.$version<7&&(x.function=o.function),tr(o.value)==="object"&&(x=o.value);let S=[];for(let E=0;E<n.length;E++)S=S.concat(v({array:n,arrayIndex:E,value:n[E],valueSpec:x,style:u,styleSpec:h,key:`${m}[${E}]`}));return S}function Dc(i){const n=i.key,o=i.value,u=i.valueSpec;let h=tr(o);if(h==="number"&&o!=o&&(h="NaN"),h!=="number")return[new Kt(n,o,`number expected, ${h} found`)];if("minimum"in u){let m=u.minimum;if(tr(u.minimum)==="array"&&(m=u.minimum[i.arrayIndex]),o<m)return[new Kt(n,o,`${o} is less than the minimum value ${m}`)]}if("maximum"in u){let m=u.maximum;if(tr(u.maximum)==="array"&&(m=u.maximum[i.arrayIndex]),o>m)return[new Kt(n,o,`${o} is greater than the maximum value ${m}`)]}return[]}function $c(i){const n=i.valueSpec,o=gr(i.value.type);let u,h,m,v={};const x=o!=="categorical"&&i.value.property===void 0,S=!x,E=tr(i.value.stops)==="array"&&tr(i.value.stops[0])==="array"&&tr(i.value.stops[0][0])==="object",R=Yo({key:i.key,value:i.value,valueSpec:i.styleSpec.function,style:i.style,styleSpec:i.styleSpec,objectElementValidators:{stops:function(H){if(o==="identity")return[new Kt(H.key,H.value,'identity function may not have a "stops" property')];let G=[];const Y=H.value;return G=G.concat(Jm({key:H.key,value:Y,valueSpec:H.valueSpec,style:H.style,styleSpec:H.styleSpec,arrayElementValidator:z})),tr(Y)==="array"&&Y.length===0&&G.push(new Kt(H.key,Y,"array must have at least one stop")),G},default:function(H){return Vi({key:H.key,value:H.value,valueSpec:n,style:H.style,styleSpec:H.styleSpec})}}});return o==="identity"&&x&&R.push(new Kt(i.key,i.value,'missing required property "property"')),o==="identity"||i.value.stops||R.push(new Kt(i.key,i.value,'missing required property "stops"')),o==="exponential"&&i.valueSpec.expression&&!qu(i.valueSpec)&&R.push(new Kt(i.key,i.value,"exponential functions not supported")),i.styleSpec.$version>=8&&(S&&!Al(i.valueSpec)?R.push(new Kt(i.key,i.value,"property functions not supported")):x&&!Wu(i.valueSpec)&&R.push(new Kt(i.key,i.value,"zoom functions not supported"))),o!=="categorical"&&!E||i.value.property!==void 0||R.push(new Kt(i.key,i.value,'"property" property is required')),R;function z(H){let G=[];const Y=H.value,ae=H.key;if(tr(Y)!=="array")return[new Kt(ae,Y,`array expected, ${tr(Y)} found`)];if(Y.length!==2)return[new Kt(ae,Y,`array length 2 expected, length ${Y.length} found`)];if(E){if(tr(Y[0])!=="object")return[new Kt(ae,Y,`object expected, ${tr(Y[0])} found`)];if(Y[0].zoom===void 0)return[new Kt(ae,Y,"object stop key must have zoom")];if(Y[0].value===void 0)return[new Kt(ae,Y,"object stop key must have value")];const ve=gr(Y[0].zoom);if(typeof ve!="number")return[new Kt(ae,Y[0].zoom,"stop zoom values must be numbers")];if(m&&m>ve)return[new Kt(ae,Y[0].zoom,"stop zoom values must appear in ascending order")];ve!==m&&(m=ve,h=void 0,v={}),G=G.concat(Yo({key:`${ae}[0]`,value:Y[0],valueSpec:{zoom:{}},style:H.style,styleSpec:H.styleSpec,objectElementValidators:{zoom:Dc,value:L}}))}else G=G.concat(L({key:`${ae}[0]`,value:Y[0],valueSpec:{},style:H.style,styleSpec:H.styleSpec},Y));return Ol(pr(Y[1]))?G.concat([new Kt(`${ae}[1]`,Y[1],"expressions are not allowed in function stops.")]):G.concat(Vi({key:`${ae}[1]`,value:Y[1],valueSpec:n,style:H.style,styleSpec:H.styleSpec}))}function L(H,G){const Y=tr(H.value),ae=gr(H.value),ve=H.value!==null?H.value:G;if(u){if(Y!==u)return[new Kt(H.key,ve,`${Y} stop domain type must match previous stop domain type ${u}`)]}else u=Y;if(Y!=="number"&&Y!=="string"&&Y!=="boolean"&&typeof ae!="number"&&typeof ae!="string"&&typeof ae!="boolean")return[new Kt(H.key,ve,"stop domain value must be a number, string, or boolean")];if(Y!=="number"&&o!=="categorical"){let Ce=`number expected, ${Y} found`;return Al(n)&&o===void 0&&(Ce+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Kt(H.key,ve,Ce)]}return o!=="categorical"||Y!=="number"||typeof ae=="number"&&isFinite(ae)&&Math.floor(ae)===ae?o!=="categorical"&&Y==="number"&&typeof ae=="number"&&typeof h=="number"&&h!==void 0&&ae<h?[new Kt(H.key,ve,"stop domain values must appear in ascending order")]:(h=ae,o==="categorical"&&ae in v?[new Kt(H.key,ve,"stop domain values must be unique")]:(v[ae]=!0,[])):[new Kt(H.key,ve,`integer expected, found ${String(ae)}`)]}}function Ci(i){const n=(i.expressionContext==="property"?Lc:zl)(pr(i.value),i.valueSpec);if(n.result==="error")return n.value.map(u=>new Kt(`${i.key}${u.key}`,i.value,u.message));const o=n.value.expression||n.value._styleExpression.expression;if(i.expressionContext==="property"&&i.propertyKey==="text-font"&&!o.outputDefined())return[new Kt(i.key,i.value,`Invalid data expression for "${i.propertyKey}". Output values must be contained as literals within the expression.`)];if(i.expressionContext==="property"&&i.propertyType==="layout"&&!Va(o))return[new Kt(i.key,i.value,'"feature-state" data expressions are not supported with layout properties.')];if(i.expressionContext==="filter")return Fc(o,i);if(i.expressionContext&&i.expressionContext.indexOf("cluster")===0){if(!Vs(o,["zoom","feature-state"]))return[new Kt(i.key,i.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(i.expressionContext==="cluster-initial"&&!Tl(o))return[new Kt(i.key,i.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Fc(i,n){const o=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(n.valueSpec&&n.valueSpec.expression)for(const h of n.valueSpec.expression.parameters)o.delete(h);if(o.size===0)return[];const u=[];return i instanceof ja&&o.has(i.name)?[new Kt(n.key,n.value,`["${i.name}"] expression is not supported in a filter for a ${n.object.type} layer with id: ${n.object.id}`)]:(i.eachChild(h=>{u.push(...Fc(h,n))}),u)}function Qu(i){const n=i.key,o=i.value,u=i.valueSpec,h=[];return Array.isArray(u.values)?u.values.indexOf(gr(o))===-1&&h.push(new Kt(n,o,`expected one of [${u.values.join(", ")}], ${JSON.stringify(o)} found`)):Object.keys(u.values).indexOf(gr(o))===-1&&h.push(new Kt(n,o,`expected one of [${Object.keys(u.values).join(", ")}], ${JSON.stringify(o)} found`)),h}function of(i){if(i===!0||i===!1)return!0;if(!Array.isArray(i)||i.length===0)return!1;switch(i[0]){case"has":return i.length>=2&&i[1]!=="$id"&&i[1]!=="$type";case"in":return i.length>=3&&(typeof i[1]!="string"||Array.isArray(i[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return i.length!==3||Array.isArray(i[1])||Array.isArray(i[2]);case"any":case"all":for(const n of i.slice(1))if(!of(n)&&typeof n!="boolean")return!1;return!0;default:return!0}}function ed(i,n="fill"){if(i==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};of(i)||(i=Ll(i));const o=i;let u=!0;try{u=function(E){if(!kl(E))return E;let R=pr(E);return td(R),R=Qm(R),R}(o)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(o,null,2)}
        `)}const h=nt[`filter_${n}`],m=zl(u,h);let v=null;if(m.result==="error")throw new Error(m.value.map(E=>`${E.key}: ${E.message}`).join(", "));v=(E,R,z)=>m.value.evaluate(E,R,{},z);let x=null,S=null;if(u!==o){const E=zl(o,h);if(E.result==="error")throw new Error(E.value.map(R=>`${R.key}: ${R.message}`).join(", "));x=(R,z,L,H,G)=>E.value.evaluate(R,z,{},L,void 0,void 0,H,G),S=!Tl(E.value.expression)}return{filter:v,dynamicFilter:x||void 0,needGeometry:eg(u),needFeature:!!S}}function Qm(i){if(!Array.isArray(i))return i;const n=function(o){if(af.has(o[0])){for(let u=1;u<o.length;u++)if(kl(o[u]))return!0}return o}(i);return n===!0?n:n.map(o=>Qm(o))}function td(i){let n=!1;const o=[];if(i[0]==="case"){for(let u=1;u<i.length-1;u+=2)n=n||kl(i[u]),o.push(i[u+1]);o.push(i[i.length-1])}else if(i[0]==="match"){n=n||kl(i[1]);for(let u=2;u<i.length-1;u+=2)o.push(i[u+1]);o.push(i[i.length-1])}else if(i[0]==="step"){n=n||kl(i[1]);for(let u=1;u<i.length-1;u+=2)o.push(i[u+1])}n&&(i.length=0,i.push("any",...o));for(let u=1;u<i.length;u++)td(i[u])}function kl(i){if(!Array.isArray(i))return!1;if((n=i[0])==="pitch"||n==="distance-from-center")return!0;var n;for(let o=1;o<i.length;o++)if(kl(i[o]))return!0;return!1}const af=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function r_(i,n){return i<n?-1:i>n?1:0}function eg(i){if(!Array.isArray(i))return!1;if(i[0]==="within")return!0;for(let n=1;n<i.length;n++)if(eg(i[n]))return!0;return!1}function Ll(i){if(!i)return!0;const n=i[0];return i.length<=1?n!=="any":n==="=="?sf(i[1],i[2],"=="):n==="!="?nd(sf(i[1],i[2],"==")):n==="<"||n===">"||n==="<="||n===">="?sf(i[1],i[2],n):n==="any"?(o=i.slice(1),["any"].concat(o.map(Ll))):n==="all"?["all"].concat(i.slice(1).map(Ll)):n==="none"?["all"].concat(i.slice(1).map(Ll).map(nd)):n==="in"?lf(i[1],i.slice(2)):n==="!in"?nd(lf(i[1],i.slice(2))):n==="has"?cf(i[1]):n==="!has"?nd(cf(i[1])):n!=="within"||i;var o}function sf(i,n,o){switch(i){case"$type":return[`filter-type-${o}`,n];case"$id":return[`filter-id-${o}`,n];default:return[`filter-${o}`,i,n]}}function lf(i,n){if(n.length===0)return!1;switch(i){case"$type":return["filter-type-in",["literal",n]];case"$id":return["filter-id-in",["literal",n]];default:return n.length>200&&!n.some(o=>typeof o!=typeof n[0])?["filter-in-large",i,["literal",n.sort(r_)]]:["filter-in-small",i,["literal",n]]}}function cf(i){switch(i){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",i]}}function nd(i){return["!",i]}function Bc(i){return of(pr(i.value))?Ci(Si({},i,{expressionContext:"filter",valueSpec:i.styleSpec[`filter_${i.layerType||"fill"}`]})):Nc(i)}function Nc(i){const n=i.value,o=i.key;if(tr(n)!=="array")return[new Kt(o,n,`array expected, ${tr(n)} found`)];const u=i.styleSpec;let h,m=[];if(n.length<1)return[new Kt(o,n,"filter array must have at least 1 element")];switch(m=m.concat(Qu({key:`${o}[0]`,value:n[0],valueSpec:u.filter_operator,style:i.style,styleSpec:i.styleSpec})),gr(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&gr(n[1])==="$type"&&m.push(new Kt(o,n,`"$type" cannot be use with operator "${n[0]}"`));case"==":case"!=":n.length!==3&&m.push(new Kt(o,n,`filter array for operator "${n[0]}" must have 3 elements`));case"in":case"!in":n.length>=2&&(h=tr(n[1]),h!=="string"&&m.push(new Kt(`${o}[1]`,n[1],`string expected, ${h} found`)));for(let v=2;v<n.length;v++)h=tr(n[v]),gr(n[1])==="$type"?m=m.concat(Qu({key:`${o}[${v}]`,value:n[v],valueSpec:u.geometry_type,style:i.style,styleSpec:i.styleSpec})):h!=="string"&&h!=="number"&&h!=="boolean"&&m.push(new Kt(`${o}[${v}]`,n[v],`string, number, or boolean expected, ${h} found`));break;case"any":case"all":case"none":for(let v=1;v<n.length;v++)m=m.concat(Nc({key:`${o}[${v}]`,value:n[v],style:i.style,styleSpec:i.styleSpec}));break;case"has":case"!has":h=tr(n[1]),n.length!==2?m.push(new Kt(o,n,`filter array for "${n[0]}" operator must have 2 elements`)):h!=="string"&&m.push(new Kt(`${o}[1]`,n[1],`string expected, ${h} found`));break;case"within":h=tr(n[1]),n.length!==2?m.push(new Kt(o,n,`filter array for "${n[0]}" operator must have 2 elements`)):h!=="object"&&m.push(new Kt(`${o}[1]`,n[1],`object expected, ${h} found`))}return m}function uf(i,n){const o=i.key,u=i.style,h=i.styleSpec,m=i.value,v=i.objectKey,x=h[`${n}_${i.layerType}`];if(!x)return[];const S=v.match(/^(.*)-transition$/);if(n==="paint"&&S&&x[S[1]]&&x[S[1]].transition)return Vi({key:o,value:m,valueSpec:h.transition,style:u,styleSpec:h});const E=i.valueSpec||x[v];if(!E)return[new Kt(o,m,`unknown property "${v}"`)];let R;if(tr(m)==="string"&&Al(E)&&!E.tokens&&(R=/^{([^}]+)}$/.exec(m))){const L=`\`{ "type": "identity", "property": ${R?JSON.stringify(R[1]):'"_"'} }\``;return[new Kt(o,m,`"${v}" does not support interpolation syntax
Use an identity property function instead: ${L}.`)]}const z=[];return i.layerType==="symbol"&&(v==="text-field"&&u&&!u.glyphs&&z.push(new Kt(o,m,'use of "text-field" requires a style "glyphs" property')),v==="text-font"&&zc(pr(m))&&gr(m.type)==="identity"&&z.push(new Kt(o,m,'"text-font" does not support identity functions'))),z.concat(Vi({key:i.key,value:m,valueSpec:E,style:u,styleSpec:h,expressionContext:"property",propertyType:n,propertyKey:v}))}function tg(i){return uf(i,"paint")}function df(i){return uf(i,"layout")}function ng(i){let n=[];const o=i.value,u=i.key,h=i.style,m=i.styleSpec;o.type||o.ref||n.push(new Kt(u,o,'either "type" or "ref" is required'));let v=gr(o.type);const x=gr(o.ref);if(o.id){const S=gr(o.id);for(let E=0;E<i.arrayIndex;E++){const R=h.layers[E];gr(R.id)===S&&n.push(new Kt(u,o.id,`duplicate layer id "${o.id}", previously used at line ${R.id.__line__}`))}}if("ref"in o){let S;["type","source","source-layer","filter","layout"].forEach(E=>{E in o&&n.push(new Kt(u,o[E],`"${E}" is prohibited for ref layers`))}),h.layers.forEach(E=>{gr(E.id)===x&&(S=E)}),S?S.ref?n.push(new Kt(u,o.ref,"ref cannot reference another ref layer")):v=gr(S.type):typeof x=="string"&&n.push(new Kt(u,o.ref,`ref layer "${x}" not found`))}else if(v!=="background"&&v!=="sky")if(o.source){const S=h.sources&&h.sources[o.source],E=S&&gr(S.type);S?E==="vector"&&v==="raster"?n.push(new Kt(u,o.source,`layer "${o.id}" requires a raster source`)):E==="raster"&&v!=="raster"?n.push(new Kt(u,o.source,`layer "${o.id}" requires a vector source`)):E!=="vector"||o["source-layer"]?E==="raster-dem"&&v!=="hillshade"?n.push(new Kt(u,o.source,"raster-dem source can only be used with layer type 'hillshade'.")):v!=="line"||!o.paint||!o.paint["line-gradient"]&&!o.paint["line-trim-offset"]||E==="geojson"&&S.lineMetrics||n.push(new Kt(u,o,`layer "${o.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):n.push(new Kt(u,o,`layer "${o.id}" must specify a "source-layer"`)):n.push(new Kt(u,o.source,`source "${o.source}" not found`))}else n.push(new Kt(u,o,'missing required property "source"'));return n=n.concat(Yo({key:u,value:o,valueSpec:m.layer,style:i.style,styleSpec:i.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Vi({key:`${u}.type`,value:o.type,valueSpec:m.layer.type,style:i.style,styleSpec:i.styleSpec,object:o,objectKey:"type"}),filter:S=>Bc(Si({layerType:v},S)),layout:S=>Yo({layer:o,key:S.key,value:S.value,valueSpec:{},style:S.style,styleSpec:S.styleSpec,objectElementValidators:{"*":E=>df(Si({layerType:v},E))}}),paint:S=>Yo({layer:o,key:S.key,value:S.value,valueSpec:{},style:S.style,styleSpec:S.styleSpec,objectElementValidators:{"*":E=>tg(Si({layerType:v},E))}})}})),n}function Ss(i){const n=i.value,o=i.key,u=tr(n);return u!=="string"?[new Kt(o,n,`string expected, ${u} found`)]:[]}const rg={promoteId:function({key:i,value:n}){if(tr(n)==="string")return Ss({key:i,value:n});{const o=[];for(const u in n)o.push(...Ss({key:`${i}.${u}`,value:n[u]}));return o}}};function ig(i){const n=i.value,o=i.key,u=i.styleSpec,h=i.style;if(!n.type)return[new Kt(o,n,'"type" is required')];const m=gr(n.type);let v;switch(m){case"vector":case"raster":case"raster-dem":return v=Yo({key:o,value:n,valueSpec:u[`source_${m.replace("-","_")}`],style:i.style,styleSpec:u,objectElementValidators:rg}),v;case"geojson":if(v=Yo({key:o,value:n,valueSpec:u.source_geojson,style:h,styleSpec:u,objectElementValidators:rg}),n.cluster)for(const x in n.clusterProperties){const[S,E]=n.clusterProperties[x],R=typeof S=="string"?[S,["accumulated"],["get",x]]:S;v.push(...Ci({key:`${o}.${x}.map`,value:E,expressionContext:"cluster-map"})),v.push(...Ci({key:`${o}.${x}.reduce`,value:R,expressionContext:"cluster-reduce"}))}return v;case"video":return Yo({key:o,value:n,valueSpec:u.source_video,style:h,styleSpec:u});case"image":return Yo({key:o,value:n,valueSpec:u.source_image,style:h,styleSpec:u});case"canvas":return[new Kt(o,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Qu({key:`${o}.type`,value:n.type,valueSpec:{values:i_(u)},style:h,styleSpec:u})}}function i_(i){return i.source.reduce((n,o)=>{const u=i[o];return u.type.type==="enum"&&(n=n.concat(Object.keys(u.type.values))),n},[])}function og(i){const n=i.value,o=i.styleSpec,u=o.light,h=i.style;let m=[];const v=tr(n);if(n===void 0)return m;if(v!=="object")return m=m.concat([new Kt("light",n,`object expected, ${v} found`)]),m;for(const x in n){const S=x.match(/^(.*)-transition$/);m=m.concat(S&&u[S[1]]&&u[S[1]].transition?Vi({key:x,value:n[x],valueSpec:o.transition,style:h,styleSpec:o}):u[x]?Vi({key:x,value:n[x],valueSpec:u[x],style:h,styleSpec:o}):[new Kt(x,n[x],`unknown property "${x}"`)])}return m}function hf(i){const n=i.value,o=i.key,u=i.style,h=i.styleSpec,m=h.terrain;let v=[];const x=tr(n);if(n===void 0)return v;if(x!=="object")return v=v.concat([new Kt("terrain",n,`object expected, ${x} found`)]),v;for(const S in n){const E=S.match(/^(.*)-transition$/);v=v.concat(E&&m[E[1]]&&m[E[1]].transition?Vi({key:S,value:n[S],valueSpec:h.transition,style:u,styleSpec:h}):m[S]?Vi({key:S,value:n[S],valueSpec:m[S],style:u,styleSpec:h}):[new Kt(S,n[S],`unknown property "${S}"`)])}if(n.source){const S=u.sources&&u.sources[n.source],E=S&&gr(S.type);S?E!=="raster-dem"&&v.push(new Kt(o,n.source,`terrain cannot be used with a source of type ${String(E)}, it only be used with a "raster-dem" source type`)):v.push(new Kt(o,n.source,`source "${n.source}" not found`))}else v.push(new Kt(o,n,'terrain is missing required property "source"'));return v}function ag(i){const n=i.value,o=i.style,u=i.styleSpec,h=u.fog;let m=[];const v=tr(n);if(n===void 0)return m;if(v!=="object")return m=m.concat([new Kt("fog",n,`object expected, ${v} found`)]),m;for(const x in n){const S=x.match(/^(.*)-transition$/);m=m.concat(S&&h[S[1]]&&h[S[1]].transition?Vi({key:x,value:n[x],valueSpec:u.transition,style:o,styleSpec:u}):h[x]?Vi({key:x,value:n[x],valueSpec:h[x],style:o,styleSpec:u}):[new Kt(x,n[x],`unknown property "${x}"`)])}return m}const sg={"*":()=>[],array:Jm,boolean:function(i){const n=i.value,o=i.key,u=tr(n);return u!=="boolean"?[new Kt(o,n,`boolean expected, ${u} found`)]:[]},number:Dc,color:function(i){const n=i.key,o=i.value,u=tr(o);return u!=="string"?[new Kt(n,o,`color expected, ${u} found`)]:ma(o)===null?[new Kt(n,o,`color expected, "${o}" found`)]:[]},enum:Qu,filter:Bc,function:$c,layer:ng,object:Yo,source:ig,light:og,terrain:hf,fog:ag,string:Ss,formatted:function(i){return Ss(i).length===0?[]:Ci(i)},resolvedImage:function(i){return Ss(i).length===0?[]:Ci(i)},projection:function(i){const n=i.value,o=i.styleSpec,u=o.projection,h=i.style;let m=[];const v=tr(n);if(v==="object")for(const x in n)m=m.concat(Vi({key:x,value:n[x],valueSpec:u[x],style:h,styleSpec:o}));else v!=="string"&&(m=m.concat([new Kt("projection",n,`object or string expected, ${v} found`)]));return m}};function Vi(i){const n=i.value,o=i.valueSpec,u=i.styleSpec;return o.expression&&zc(gr(n))?$c(i):o.expression&&Ol(pr(n))?Ci(i):o.type&&sg[o.type]?sg[o.type](i):Yo(Si({},i,{valueSpec:o.type?u[o.type]:o}))}function o_(i){const n=i.value,o=i.key,u=Ss(i);return u.length||(n.indexOf("{fontstack}")===-1&&u.push(new Kt(o,n,'"glyphs" url must include a "{fontstack}" token')),n.indexOf("{range}")===-1&&u.push(new Kt(o,n,'"glyphs" url must include a "{range}" token'))),u}function lg(i,n=nt){return ko(Vi({key:"",value:i,valueSpec:n.$root,styleSpec:n,style:i,objectElementValidators:{glyphs:o_,"*":()=>[]}}))}const a_=i=>ko(tg(i)),s_=i=>ko(df(i));function ko(i){return i.slice().sort((n,o)=>n.line&&o.line?n.line-o.line:0)}function cg(i,n){let o=!1;if(n&&n.length)for(const u of n)i.fire(new _i(new Error(u.message))),o=!0;return o}var l_=ba,Jo=3;function ba(i,n,o){var u=this.cells=[];if(i instanceof ArrayBuffer){this.arrayBuffer=i;var h=new Int32Array(this.arrayBuffer);i=h[0],this.d=(n=h[1])+2*(o=h[2]);for(var m=0;m<this.d*this.d;m++){var v=h[Jo+m],x=h[Jo+m+1];u.push(v===x?null:h.subarray(v,x))}var S=h[Jo+u.length+1];this.keys=h.subarray(h[Jo+u.length],S),this.bboxes=h.subarray(S),this.insert=this._insertReadonly}else{this.d=n+2*o;for(var E=0;E<this.d*this.d;E++)u.push([]);this.keys=[],this.bboxes=[]}this.n=n,this.extent=i,this.padding=o,this.scale=n/i,this.uid=0;var R=o/n*i;this.min=-R,this.max=i+R}ba.prototype.insert=function(i,n,o,u,h){this._forEachCell(n,o,u,h,this._insertCell,this.uid++),this.keys.push(i),this.bboxes.push(n),this.bboxes.push(o),this.bboxes.push(u),this.bboxes.push(h)},ba.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},ba.prototype._insertCell=function(i,n,o,u,h,m){this.cells[h].push(m)},ba.prototype.query=function(i,n,o,u,h){var m=this.min,v=this.max;if(i<=m&&n<=m&&v<=o&&v<=u&&!h)return Array.prototype.slice.call(this.keys);var x=[];return this._forEachCell(i,n,o,u,this._queryCell,x,{},h),x},ba.prototype._queryCell=function(i,n,o,u,h,m,v,x){var S=this.cells[h];if(S!==null)for(var E=this.keys,R=this.bboxes,z=0;z<S.length;z++){var L=S[z];if(v[L]===void 0){var H=4*L;(x?x(R[H+0],R[H+1],R[H+2],R[H+3]):i<=R[H+2]&&n<=R[H+3]&&o>=R[H+0]&&u>=R[H+1])?(v[L]=!0,m.push(E[L])):v[L]=!1}}},ba.prototype._forEachCell=function(i,n,o,u,h,m,v,x){for(var S=this._convertToCellCoord(i),E=this._convertToCellCoord(n),R=this._convertToCellCoord(o),z=this._convertToCellCoord(u),L=S;L<=R;L++)for(var H=E;H<=z;H++){var G=this.d*H+L;if((!x||x(this._convertFromCellCoord(L),this._convertFromCellCoord(H),this._convertFromCellCoord(L+1),this._convertFromCellCoord(H+1)))&&h.call(this,i,n,o,u,G,m,v,x))return}},ba.prototype._convertFromCellCoord=function(i){return(i-this.padding)/this.scale},ba.prototype._convertToCellCoord=function(i){return Math.max(0,Math.min(this.d-1,Math.floor(i*this.scale)+this.padding))},ba.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var i=this.cells,n=Jo+this.cells.length+1+1,o=0,u=0;u<this.cells.length;u++)o+=this.cells[u].length;var h=new Int32Array(n+o+this.keys.length+this.bboxes.length);h[0]=this.extent,h[1]=this.n,h[2]=this.padding;for(var m=n,v=0;v<i.length;v++){var x=i[v];h[Jo+v]=m,h.set(x,m),m+=x.length}return h[Jo+i.length]=m,h.set(this.keys,m),h[Jo+i.length+1]=m+=this.keys.length,h.set(this.bboxes,m),m+=this.bboxes.length,h.buffer};var Ws=V(l_);const rd={};function Jt(i,n,o={}){Object.defineProperty(i,"_classRegistryKey",{value:n,writeable:!1}),rd[n]={klass:i,omit:o.omit||[]}}Jt(Object,"Object"),Ws.serialize=function(i,n){const o=i.toArrayBuffer();return n&&n.push(o),{buffer:o}},Ws.deserialize=function(i){return new Ws(i.buffer)},Object.defineProperty(Ws,"name",{value:"Grid"}),Jt(Ws,"Grid"),Jt(Nr,"Color"),Jt(Error,"Error"),Jt(fr,"AJAXError"),Jt(dr,"ResolvedImage"),Jt(Yu,"StylePropertyFunction"),Jt(Ku,"StyleExpression",{omit:["_evaluator"]}),Jt(kc,"ZoomDependentExpression"),Jt(rf,"ZoomConstantExpression"),Jt(ja,"CompoundExpression",{omit:["_evaluate"]});for(const i in Oc)rd[Oc[i]._classRegistryKey]||Jt(Oc[i],`Expression${i}`);function ff(i){return i&&typeof ArrayBuffer<"u"&&(i instanceof ArrayBuffer||i.constructor&&i.constructor.name==="ArrayBuffer")}function pf(i){return w.ImageBitmap&&i instanceof w.ImageBitmap}function Dl(i,n){if(i==null||typeof i=="boolean"||typeof i=="number"||typeof i=="string"||i instanceof Boolean||i instanceof Number||i instanceof String||i instanceof Date||i instanceof RegExp)return i;if(ff(i)||pf(i))return n&&n.push(i),i;if(ArrayBuffer.isView(i)){const o=i;return n&&n.push(o.buffer),o}if(i instanceof w.ImageData)return n&&n.push(i.data.buffer),i;if(Array.isArray(i)){const o=[];for(const u of i)o.push(Dl(u,n));return o}if(typeof i=="object"){const o=i.constructor,u=o._classRegistryKey;if(!u)throw new Error(`can't serialize object of unregistered class ${u}`);const h=o.serialize?o.serialize(i,n):{};if(!o.serialize){for(const m in i)i.hasOwnProperty(m)&&(rd[u].omit.indexOf(m)>=0||(h[m]=Dl(i[m],n)));i instanceof Error&&(h.message=i.message)}if(h.$name)throw new Error("$name property is reserved for worker serialization logic.");return u!=="Object"&&(h.$name=u),h}throw new Error("can't serialize object of type "+typeof i)}function qs(i){if(i==null||typeof i=="boolean"||typeof i=="number"||typeof i=="string"||i instanceof Boolean||i instanceof Number||i instanceof String||i instanceof Date||i instanceof RegExp||ff(i)||pf(i)||ArrayBuffer.isView(i)||i instanceof w.ImageData)return i;if(Array.isArray(i))return i.map(qs);if(typeof i=="object"){const n=i.$name||"Object",{klass:o}=rd[n];if(!o)throw new Error(`can't deserialize unregistered class ${n}`);if(o.deserialize)return o.deserialize(i);const u=Object.create(o.prototype);for(const h of Object.keys(i))h!=="$name"&&(u[h]=qs(i[h]));return u}throw new Error("can't deserialize object of type "+typeof i)}const Zt={"Latin-1 Supplement":i=>i>=128&&i<=255,Arabic:i=>i>=1536&&i<=1791,"Arabic Supplement":i=>i>=1872&&i<=1919,"Arabic Extended-A":i=>i>=2208&&i<=2303,"Hangul Jamo":i=>i>=4352&&i<=4607,"Unified Canadian Aboriginal Syllabics":i=>i>=5120&&i<=5759,Khmer:i=>i>=6016&&i<=6143,"Unified Canadian Aboriginal Syllabics Extended":i=>i>=6320&&i<=6399,"General Punctuation":i=>i>=8192&&i<=8303,"Letterlike Symbols":i=>i>=8448&&i<=8527,"Number Forms":i=>i>=8528&&i<=8591,"Miscellaneous Technical":i=>i>=8960&&i<=9215,"Control Pictures":i=>i>=9216&&i<=9279,"Optical Character Recognition":i=>i>=9280&&i<=9311,"Enclosed Alphanumerics":i=>i>=9312&&i<=9471,"Geometric Shapes":i=>i>=9632&&i<=9727,"Miscellaneous Symbols":i=>i>=9728&&i<=9983,"Miscellaneous Symbols and Arrows":i=>i>=11008&&i<=11263,"CJK Radicals Supplement":i=>i>=11904&&i<=12031,"Kangxi Radicals":i=>i>=12032&&i<=12255,"Ideographic Description Characters":i=>i>=12272&&i<=12287,"CJK Symbols and Punctuation":i=>i>=12288&&i<=12351,Hiragana:i=>i>=12352&&i<=12447,Katakana:i=>i>=12448&&i<=12543,Bopomofo:i=>i>=12544&&i<=12591,"Hangul Compatibility Jamo":i=>i>=12592&&i<=12687,Kanbun:i=>i>=12688&&i<=12703,"Bopomofo Extended":i=>i>=12704&&i<=12735,"CJK Strokes":i=>i>=12736&&i<=12783,"Katakana Phonetic Extensions":i=>i>=12784&&i<=12799,"Enclosed CJK Letters and Months":i=>i>=12800&&i<=13055,"CJK Compatibility":i=>i>=13056&&i<=13311,"CJK Unified Ideographs Extension A":i=>i>=13312&&i<=19903,"Yijing Hexagram Symbols":i=>i>=19904&&i<=19967,"CJK Unified Ideographs":i=>i>=19968&&i<=40959,"Yi Syllables":i=>i>=40960&&i<=42127,"Yi Radicals":i=>i>=42128&&i<=42191,"Hangul Jamo Extended-A":i=>i>=43360&&i<=43391,"Hangul Syllables":i=>i>=44032&&i<=55215,"Hangul Jamo Extended-B":i=>i>=55216&&i<=55295,"Private Use Area":i=>i>=57344&&i<=63743,"CJK Compatibility Ideographs":i=>i>=63744&&i<=64255,"Arabic Presentation Forms-A":i=>i>=64336&&i<=65023,"Vertical Forms":i=>i>=65040&&i<=65055,"CJK Compatibility Forms":i=>i>=65072&&i<=65103,"Small Form Variants":i=>i>=65104&&i<=65135,"Arabic Presentation Forms-B":i=>i>=65136&&i<=65279,"Halfwidth and Fullwidth Forms":i=>i>=65280&&i<=65519};function mf(i){for(const n of i)if(gf(n.charCodeAt(0)))return!0;return!1}function c_(i){for(const n of i)if(!ug(n.charCodeAt(0)))return!1;return!0}function ug(i){return!(Zt.Arabic(i)||Zt["Arabic Supplement"](i)||Zt["Arabic Extended-A"](i)||Zt["Arabic Presentation Forms-A"](i)||Zt["Arabic Presentation Forms-B"](i))}function gf(i){return!(i!==746&&i!==747&&(i<4352||!(Zt["Bopomofo Extended"](i)||Zt.Bopomofo(i)||Zt["CJK Compatibility Forms"](i)&&!(i>=65097&&i<=65103)||Zt["CJK Compatibility Ideographs"](i)||Zt["CJK Compatibility"](i)||Zt["CJK Radicals Supplement"](i)||Zt["CJK Strokes"](i)||!(!Zt["CJK Symbols and Punctuation"](i)||i>=12296&&i<=12305||i>=12308&&i<=12319||i===12336)||Zt["CJK Unified Ideographs Extension A"](i)||Zt["CJK Unified Ideographs"](i)||Zt["Enclosed CJK Letters and Months"](i)||Zt["Hangul Compatibility Jamo"](i)||Zt["Hangul Jamo Extended-A"](i)||Zt["Hangul Jamo Extended-B"](i)||Zt["Hangul Jamo"](i)||Zt["Hangul Syllables"](i)||Zt.Hiragana(i)||Zt["Ideographic Description Characters"](i)||Zt.Kanbun(i)||Zt["Kangxi Radicals"](i)||Zt["Katakana Phonetic Extensions"](i)||Zt.Katakana(i)&&i!==12540||!(!Zt["Halfwidth and Fullwidth Forms"](i)||i===65288||i===65289||i===65293||i>=65306&&i<=65310||i===65339||i===65341||i===65343||i>=65371&&i<=65503||i===65507||i>=65512&&i<=65519)||!(!Zt["Small Form Variants"](i)||i>=65112&&i<=65118||i>=65123&&i<=65126)||Zt["Unified Canadian Aboriginal Syllabics"](i)||Zt["Unified Canadian Aboriginal Syllabics Extended"](i)||Zt["Vertical Forms"](i)||Zt["Yijing Hexagram Symbols"](i)||Zt["Yi Syllables"](i)||Zt["Yi Radicals"](i))))}function dg(i){return!(gf(i)||function(n){return!!(Zt["Latin-1 Supplement"](n)&&(n===167||n===169||n===174||n===177||n===188||n===189||n===190||n===215||n===247)||Zt["General Punctuation"](n)&&(n===8214||n===8224||n===8225||n===8240||n===8241||n===8251||n===8252||n===8258||n===8263||n===8264||n===8265||n===8273)||Zt["Letterlike Symbols"](n)||Zt["Number Forms"](n)||Zt["Miscellaneous Technical"](n)&&(n>=8960&&n<=8967||n>=8972&&n<=8991||n>=8996&&n<=9e3||n===9003||n>=9085&&n<=9114||n>=9150&&n<=9165||n===9167||n>=9169&&n<=9179||n>=9186&&n<=9215)||Zt["Control Pictures"](n)&&n!==9251||Zt["Optical Character Recognition"](n)||Zt["Enclosed Alphanumerics"](n)||Zt["Geometric Shapes"](n)||Zt["Miscellaneous Symbols"](n)&&!(n>=9754&&n<=9759)||Zt["Miscellaneous Symbols and Arrows"](n)&&(n>=11026&&n<=11055||n>=11088&&n<=11097||n>=11192&&n<=11243)||Zt["CJK Symbols and Punctuation"](n)||Zt.Katakana(n)||Zt["Private Use Area"](n)||Zt["CJK Compatibility Forms"](n)||Zt["Small Form Variants"](n)||Zt["Halfwidth and Fullwidth Forms"](n)||n===8734||n===8756||n===8757||n>=9984&&n<=10087||n>=10102&&n<=10131||n===65532||n===65533)}(i))}function hg(i){return i>=1424&&i<=2303||Zt["Arabic Presentation Forms-A"](i)||Zt["Arabic Presentation Forms-B"](i)}function u_(i,n){return!(!n&&hg(i)||i>=2304&&i<=3583||i>=3840&&i<=4255||Zt.Khmer(i))}function d_(i){for(const n of i)if(hg(n.charCodeAt(0)))return!0;return!1}const vf="deferred",yf="loading",_f="loaded";let $l=null,p="unavailable",s=null;const d=function(i){i&&typeof i=="string"&&i.indexOf("NetworkError")>-1&&(p="error"),$l&&$l(i)};function g(){_.fire(new oo("pluginStateChange",{pluginStatus:p,pluginURL:s}))}const _=new Oi,b=function(){return p},I=function(){if(p!==vf||!s)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");p=yf,g(),s&&Qn({url:s},i=>{i?d(i):(p=_f,g())})},P={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>p===_f||P.applyArabicShaping!=null,isLoading:()=>p===yf,setState(i){p=i.pluginStatus,s=i.pluginURL},isParsed:()=>P.applyArabicShaping!=null&&P.processBidirectionalText!=null&&P.processStyledBidirectionalText!=null,getPluginURL:()=>s};class O{constructor(n,o){this.zoom=n,o?(this.now=o.now,this.fadeDuration=o.fadeDuration,this.transition=o.transition,this.pitch=o.pitch):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0)}isSupportedScript(n){return function(o,u){for(const h of o)if(!u_(h.charCodeAt(0),u))return!1;return!0}(n,P.isLoaded())}}class B{constructor(n,o){this.property=n,this.value=o,this.expression=function(u,h){if(zc(u))return new Yu(u,h);if(Ol(u)){const m=Lc(u,h);if(m.result==="error")throw new Error(m.value.map(v=>`${v.key}: ${v.message}`).join(", "));return m.value}{let m=u;return typeof u=="string"&&h.type==="color"&&(m=Nr.parse(u)),{kind:"constant",evaluate:()=>m}}}(o===void 0?n.specification.default:o,n.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(n,o,u){return this.property.possiblyEvaluate(this,n,o,u)}}class ${constructor(n){this.property=n,this.value=new B(n,void 0)}transitioned(n,o){return new oe(this.property,this.value,o,gt({},n.transition,this.transition),n.now)}untransitioned(){return new oe(this.property,this.value,null,{},0)}}class Z{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitionablePropertyValues)}getValue(n){return ct(this._values[n].value.value)}setValue(n,o){this._values.hasOwnProperty(n)||(this._values[n]=new $(this._values[n].property)),this._values[n].value=new B(this._values[n].property,o===null?void 0:ct(o))}getTransition(n){return ct(this._values[n].transition)}setTransition(n,o){this._values.hasOwnProperty(n)||(this._values[n]=new $(this._values[n].property)),this._values[n].transition=ct(o)||void 0}serialize(){const n={};for(const o of Object.keys(this._values)){const u=this.getValue(o);u!==void 0&&(n[o]=u);const h=this.getTransition(o);h!==void 0&&(n[`${o}-transition`]=h)}return n}transitioned(n,o){const u=new le(this._properties);for(const h of Object.keys(this._values))u._values[h]=this._values[h].transitioned(n,o._values[h]);return u}untransitioned(){const n=new le(this._properties);for(const o of Object.keys(this._values))n._values[o]=this._values[o].untransitioned();return n}}class oe{constructor(n,o,u,h,m){const v=h.delay||0,x=h.duration||0;m=m||0,this.property=n,this.value=o,this.begin=m+v,this.end=this.begin+x,n.specification.transition&&(h.delay||h.duration)&&(this.prior=u)}possiblyEvaluate(n,o,u){const h=n.now||0,m=this.value.possiblyEvaluate(n,o,u),v=this.prior;if(v){if(h>this.end)return this.prior=null,m;if(this.value.isDataDriven())return this.prior=null,m;if(h<this.begin)return v.possiblyEvaluate(n,o,u);{const x=(h-this.begin)/(this.end-this.begin);return this.property.interpolate(v.possiblyEvaluate(n,o,u),m,$e(x))}}return m}}class le{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitioningPropertyValues)}possiblyEvaluate(n,o,u){const h=new ge(this._properties);for(const m of Object.keys(this._values))h._values[m]=this._values[m].possiblyEvaluate(n,o,u);return h}hasTransition(){for(const n of Object.keys(this._values))if(this._values[n].prior)return!0;return!1}}class he{constructor(n){this._properties=n,this._values=Object.create(n.defaultPropertyValues)}getValue(n){return ct(this._values[n].value)}setValue(n,o){this._values[n]=new B(this._values[n].property,o===null?void 0:ct(o))}serialize(){const n={};for(const o of Object.keys(this._values)){const u=this.getValue(o);u!==void 0&&(n[o]=u)}return n}possiblyEvaluate(n,o,u){const h=new ge(this._properties);for(const m of Object.keys(this._values))h._values[m]=this._values[m].possiblyEvaluate(n,o,u);return h}}class ue{constructor(n,o,u){this.property=n,this.value=o,this.parameters=u}isConstant(){return this.value.kind==="constant"}constantOr(n){return this.value.kind==="constant"?this.value.value:n}evaluate(n,o,u,h){return this.property.evaluate(this.value,this.parameters,n,o,u,h)}}class ge{constructor(n){this._properties=n,this._values=Object.create(n.defaultPossiblyEvaluatedValues)}get(n){return this._values[n]}}class K{constructor(n){this.specification=n}possiblyEvaluate(n,o){return n.expression.evaluate(o)}interpolate(n,o,u){const h=Ic[this.specification.type];return h?h(n,o,u):n}}class se{constructor(n,o){this.specification=n,this.overrides=o}possiblyEvaluate(n,o,u,h){return new ue(this,n.expression.kind==="constant"||n.expression.kind==="camera"?{kind:"constant",value:n.expression.evaluate(o,null,{},u,h)}:n.expression,o)}interpolate(n,o,u){if(n.value.kind!=="constant"||o.value.kind!=="constant")return n;if(n.value.value===void 0||o.value.value===void 0)return new ue(this,{kind:"constant",value:void 0},n.parameters);const h=Ic[this.specification.type];return h?new ue(this,{kind:"constant",value:h(n.value.value,o.value.value,u)},n.parameters):n}evaluate(n,o,u,h,m,v){return n.kind==="constant"?n.value:n.evaluate(o,u,h,m,v)}}class xe{constructor(n){this.specification=n}possiblyEvaluate(n,o,u,h){return!!n.expression.evaluate(o,null,{},u,h)}interpolate(){return!1}}class be{constructor(n){this.properties=n,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const o=new O(0,{});for(const u in n){const h=n[u];h.specification.overridable&&this.overridableProperties.push(u);const m=this.defaultPropertyValues[u]=new B(h,void 0),v=this.defaultTransitionablePropertyValues[u]=new $(h);this.defaultTransitioningPropertyValues[u]=v.untransitioned(),this.defaultPossiblyEvaluatedValues[u]=m.possiblyEvaluate(o)}}}function Re(i,n){return 256*(i=pe(Math.floor(i),0,255))+pe(Math.floor(n),0,255)}Jt(se,"DataDrivenProperty"),Jt(K,"DataConstantProperty"),Jt(xe,"ColorRampProperty");const ze={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Oe{constructor(n,o){this._structArray=n,this._pos1=o*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Ve{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(n,o){return n._trim(),o&&(n.isTransferred=!0,o.push(n.arrayBuffer)),{length:n.length,arrayBuffer:n.arrayBuffer}}static deserialize(n){const o=Object.create(this.prototype);return o.arrayBuffer=n.arrayBuffer,o.length=n.length,o.capacity=n.arrayBuffer.byteLength/o.bytesPerElement,o._refreshViews(),o}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(n){this.reserve(n),this.length=n}reserve(n){if(n>this.capacity){this.capacity=Math.max(n,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const o=this.uint8;this._refreshViews(),o&&this.uint8.set(o)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function Ue(i,n=1){let o=0,u=0;return{members:i.map(h=>{const m=ze[h.type].BYTES_PER_ELEMENT,v=o=Ke(o,Math.max(n,m)),x=h.components||1;return u=Math.max(u,m),o+=m*x,{name:h.name,type:h.type,components:x,offset:v}}),size:Ke(o,Math.max(u,n)),alignment:n}}function Ke(i,n){return Math.ceil(i/n)*n}class Pt extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,o){const u=this.length;return this.resize(u+1),this.emplace(u,n,o)}emplace(n,o,u){const h=2*n;return this.int16[h+0]=o,this.int16[h+1]=u,n}}Pt.prototype.bytesPerElement=4,Jt(Pt,"StructArrayLayout2i4");class qe extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,o,u){const h=this.length;return this.resize(h+1),this.emplace(h,n,o,u)}emplace(n,o,u,h){const m=3*n;return this.int16[m+0]=o,this.int16[m+1]=u,this.int16[m+2]=h,n}}qe.prototype.bytesPerElement=6,Jt(qe,"StructArrayLayout3i6");class ht extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,o,u,h){const m=this.length;return this.resize(m+1),this.emplace(m,n,o,u,h)}emplace(n,o,u,h,m){const v=4*n;return this.int16[v+0]=o,this.int16[v+1]=u,this.int16[v+2]=h,this.int16[v+3]=m,n}}ht.prototype.bytesPerElement=8,Jt(ht,"StructArrayLayout4i8");class et extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,o,u,h,m,v,x){const S=this.length;return this.resize(S+1),this.emplace(S,n,o,u,h,m,v,x)}emplace(n,o,u,h,m,v,x,S){const E=6*n,R=12*n,z=3*n;return this.int16[E+0]=o,this.int16[E+1]=u,this.uint8[R+4]=h,this.uint8[R+5]=m,this.uint8[R+6]=v,this.uint8[R+7]=x,this.float32[z+2]=S,n}}et.prototype.bytesPerElement=12,Jt(et,"StructArrayLayout2i4ub1f12");class Et extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,o,u,h){const m=this.length;return this.resize(m+1),this.emplace(m,n,o,u,h)}emplace(n,o,u,h,m){const v=4*n;return this.float32[v+0]=o,this.float32[v+1]=u,this.float32[v+2]=h,this.float32[v+3]=m,n}}Et.prototype.bytesPerElement=16,Jt(Et,"StructArrayLayout4f16");class Xe extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,o,u,h,m){const v=this.length;return this.resize(v+1),this.emplace(v,n,o,u,h,m)}emplace(n,o,u,h,m,v){const x=6*n,S=3*n;return this.uint16[x+0]=o,this.uint16[x+1]=u,this.uint16[x+2]=h,this.uint16[x+3]=m,this.float32[S+2]=v,n}}Xe.prototype.bytesPerElement=12,Jt(Xe,"StructArrayLayout4ui1f12");class dt extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,o,u,h){const m=this.length;return this.resize(m+1),this.emplace(m,n,o,u,h)}emplace(n,o,u,h,m){const v=4*n;return this.uint16[v+0]=o,this.uint16[v+1]=u,this.uint16[v+2]=h,this.uint16[v+3]=m,n}}dt.prototype.bytesPerElement=8,Jt(dt,"StructArrayLayout4ui8");class zt extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,o,u,h,m,v){const x=this.length;return this.resize(x+1),this.emplace(x,n,o,u,h,m,v)}emplace(n,o,u,h,m,v,x){const S=6*n;return this.int16[S+0]=o,this.int16[S+1]=u,this.int16[S+2]=h,this.int16[S+3]=m,this.int16[S+4]=v,this.int16[S+5]=x,n}}zt.prototype.bytesPerElement=12,Jt(zt,"StructArrayLayout6i12");class vt extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,o,u,h,m,v,x,S,E,R,z,L){const H=this.length;return this.resize(H+1),this.emplace(H,n,o,u,h,m,v,x,S,E,R,z,L)}emplace(n,o,u,h,m,v,x,S,E,R,z,L,H){const G=12*n;return this.int16[G+0]=o,this.int16[G+1]=u,this.int16[G+2]=h,this.int16[G+3]=m,this.uint16[G+4]=v,this.uint16[G+5]=x,this.uint16[G+6]=S,this.uint16[G+7]=E,this.int16[G+8]=R,this.int16[G+9]=z,this.int16[G+10]=L,this.int16[G+11]=H,n}}vt.prototype.bytesPerElement=24,Jt(vt,"StructArrayLayout4i4ui4i24");class kt extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,o,u,h,m,v){const x=this.length;return this.resize(x+1),this.emplace(x,n,o,u,h,m,v)}emplace(n,o,u,h,m,v,x){const S=10*n,E=5*n;return this.int16[S+0]=o,this.int16[S+1]=u,this.int16[S+2]=h,this.float32[E+2]=m,this.float32[E+3]=v,this.float32[E+4]=x,n}}kt.prototype.bytesPerElement=20,Jt(kt,"StructArrayLayout3i3f20");class dn extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n){const o=this.length;return this.resize(o+1),this.emplace(o,n)}emplace(n,o){return this.uint32[1*n+0]=o,n}}dn.prototype.bytesPerElement=4,Jt(dn,"StructArrayLayout1ul4");class Rn extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,o,u,h,m,v,x,S,E,R,z,L,H){const G=this.length;return this.resize(G+1),this.emplace(G,n,o,u,h,m,v,x,S,E,R,z,L,H)}emplace(n,o,u,h,m,v,x,S,E,R,z,L,H,G){const Y=20*n,ae=10*n;return this.int16[Y+0]=o,this.int16[Y+1]=u,this.int16[Y+2]=h,this.int16[Y+3]=m,this.int16[Y+4]=v,this.float32[ae+3]=x,this.float32[ae+4]=S,this.float32[ae+5]=E,this.float32[ae+6]=R,this.int16[Y+14]=z,this.uint32[ae+8]=L,this.uint16[Y+18]=H,this.uint16[Y+19]=G,n}}Rn.prototype.bytesPerElement=40,Jt(Rn,"StructArrayLayout5i4f1i1ul2ui40");class en extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,o,u,h,m,v,x){const S=this.length;return this.resize(S+1),this.emplace(S,n,o,u,h,m,v,x)}emplace(n,o,u,h,m,v,x,S){const E=8*n;return this.int16[E+0]=o,this.int16[E+1]=u,this.int16[E+2]=h,this.int16[E+4]=m,this.int16[E+5]=v,this.int16[E+6]=x,this.int16[E+7]=S,n}}en.prototype.bytesPerElement=16,Jt(en,"StructArrayLayout3i2i2i16");class _n extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,o,u,h,m){const v=this.length;return this.resize(v+1),this.emplace(v,n,o,u,h,m)}emplace(n,o,u,h,m,v){const x=4*n,S=8*n;return this.float32[x+0]=o,this.float32[x+1]=u,this.float32[x+2]=h,this.int16[S+6]=m,this.int16[S+7]=v,n}}_n.prototype.bytesPerElement=16,Jt(_n,"StructArrayLayout2f1f2i16");class Hn extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,o,u,h){const m=this.length;return this.resize(m+1),this.emplace(m,n,o,u,h)}emplace(n,o,u,h,m){const v=12*n,x=3*n;return this.uint8[v+0]=o,this.uint8[v+1]=u,this.float32[x+1]=h,this.float32[x+2]=m,n}}Hn.prototype.bytesPerElement=12,Jt(Hn,"StructArrayLayout2ub2f12");class Un extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,o,u){const h=this.length;return this.resize(h+1),this.emplace(h,n,o,u)}emplace(n,o,u,h){const m=3*n;return this.float32[m+0]=o,this.float32[m+1]=u,this.float32[m+2]=h,n}}Un.prototype.bytesPerElement=12,Jt(Un,"StructArrayLayout3f12");class cn extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,o,u){const h=this.length;return this.resize(h+1),this.emplace(h,n,o,u)}emplace(n,o,u,h){const m=3*n;return this.uint16[m+0]=o,this.uint16[m+1]=u,this.uint16[m+2]=h,n}}cn.prototype.bytesPerElement=6,Jt(cn,"StructArrayLayout3ui6");class ur extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n,o,u,h,m,v,x,S,E,R,z,L,H,G,Y,ae,ve,Ce,ye,Ee,Ae){const Pe=this.length;return this.resize(Pe+1),this.emplace(Pe,n,o,u,h,m,v,x,S,E,R,z,L,H,G,Y,ae,ve,Ce,ye,Ee,Ae)}emplace(n,o,u,h,m,v,x,S,E,R,z,L,H,G,Y,ae,ve,Ce,ye,Ee,Ae,Pe){const Ye=30*n,Ze=15*n,at=60*n;return this.int16[Ye+0]=o,this.int16[Ye+1]=u,this.int16[Ye+2]=h,this.float32[Ze+2]=m,this.float32[Ze+3]=v,this.uint16[Ye+8]=x,this.uint16[Ye+9]=S,this.uint32[Ze+5]=E,this.uint32[Ze+6]=R,this.uint32[Ze+7]=z,this.uint16[Ye+16]=L,this.uint16[Ye+17]=H,this.uint16[Ye+18]=G,this.float32[Ze+10]=Y,this.float32[Ze+11]=ae,this.uint8[at+48]=ve,this.uint8[at+49]=Ce,this.uint8[at+50]=ye,this.uint32[Ze+13]=Ee,this.int16[Ye+28]=Ae,this.uint8[at+58]=Pe,n}}ur.prototype.bytesPerElement=60,Jt(ur,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class vr extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n,o,u,h,m,v,x,S,E,R,z,L,H,G,Y,ae,ve,Ce,ye,Ee,Ae,Pe,Ye,Ze,at,At,tt,pt,mt,_t){const Dt=this.length;return this.resize(Dt+1),this.emplace(Dt,n,o,u,h,m,v,x,S,E,R,z,L,H,G,Y,ae,ve,Ce,ye,Ee,Ae,Pe,Ye,Ze,at,At,tt,pt,mt,_t)}emplace(n,o,u,h,m,v,x,S,E,R,z,L,H,G,Y,ae,ve,Ce,ye,Ee,Ae,Pe,Ye,Ze,at,At,tt,pt,mt,_t,Dt){const it=38*n,Wt=19*n;return this.int16[it+0]=o,this.int16[it+1]=u,this.int16[it+2]=h,this.float32[Wt+2]=m,this.float32[Wt+3]=v,this.int16[it+8]=x,this.int16[it+9]=S,this.int16[it+10]=E,this.int16[it+11]=R,this.int16[it+12]=z,this.int16[it+13]=L,this.uint16[it+14]=H,this.uint16[it+15]=G,this.uint16[it+16]=Y,this.uint16[it+17]=ae,this.uint16[it+18]=ve,this.uint16[it+19]=Ce,this.uint16[it+20]=ye,this.uint16[it+21]=Ee,this.uint16[it+22]=Ae,this.uint16[it+23]=Pe,this.uint16[it+24]=Ye,this.uint16[it+25]=Ze,this.uint16[it+26]=at,this.uint16[it+27]=At,this.uint16[it+28]=tt,this.uint32[Wt+15]=pt,this.float32[Wt+16]=mt,this.float32[Wt+17]=_t,this.float32[Wt+18]=Dt,n}}vr.prototype.bytesPerElement=76,Jt(vr,"StructArrayLayout3i2f6i15ui1ul3f76");class yr extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n){const o=this.length;return this.resize(o+1),this.emplace(o,n)}emplace(n,o){return this.float32[1*n+0]=o,n}}yr.prototype.bytesPerElement=4,Jt(yr,"StructArrayLayout1f4");class _r extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,o,u,h,m){const v=this.length;return this.resize(v+1),this.emplace(v,n,o,u,h,m)}emplace(n,o,u,h,m,v){const x=5*n;return this.float32[x+0]=o,this.float32[x+1]=u,this.float32[x+2]=h,this.float32[x+3]=m,this.float32[x+4]=v,n}}_r.prototype.bytesPerElement=20,Jt(_r,"StructArrayLayout5f20");class Hi extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,o,u,h){const m=this.length;return this.resize(m+1),this.emplace(m,n,o,u,h)}emplace(n,o,u,h,m){const v=6*n;return this.uint32[3*n+0]=o,this.uint16[v+2]=u,this.uint16[v+3]=h,this.uint16[v+4]=m,n}}Hi.prototype.bytesPerElement=12,Jt(Hi,"StructArrayLayout1ul3ui12");class Ti extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,o){const u=this.length;return this.resize(u+1),this.emplace(u,n,o)}emplace(n,o,u){const h=2*n;return this.uint16[h+0]=o,this.uint16[h+1]=u,n}}Ti.prototype.bytesPerElement=4,Jt(Ti,"StructArrayLayout2ui4");class Lo extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n){const o=this.length;return this.resize(o+1),this.emplace(o,n)}emplace(n,o){return this.uint16[1*n+0]=o,n}}Lo.prototype.bytesPerElement=2,Jt(Lo,"StructArrayLayout1ui2");class wa extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,o){const u=this.length;return this.resize(u+1),this.emplace(u,n,o)}emplace(n,o,u){const h=2*n;return this.float32[h+0]=o,this.float32[h+1]=u,n}}wa.prototype.bytesPerElement=8,Jt(wa,"StructArrayLayout2f8");class jr extends Oe{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}jr.prototype.size=40;class xr extends Rn{get(n){return new jr(this,n)}}Jt(xr,"CollisionBoxArray");class rr extends Oe{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(n){this._structArray.uint8[this._pos1+49]=n}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(n){this._structArray.uint8[this._pos1+50]=n}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(n){this._structArray.uint32[this._pos4+13]=n}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(n){this._structArray.uint8[this._pos1+58]=n}}rr.prototype.size=60;class ai extends ur{get(n){return new rr(this,n)}}Jt(ai,"PlacedSymbolArray");class Ki extends Oe{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(n){this._structArray.uint32[this._pos4+15]=n}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}Ki.prototype.size=76;class kr extends vr{get(n){return new Ki(this,n)}}Jt(kr,"SymbolInstanceArray");class ao extends yr{getoffsetX(n){return this.float32[1*n+0]}}Jt(ao,"GlyphOffsetArray");class id extends Pt{getx(n){return this.int16[2*n+0]}gety(n){return this.int16[2*n+1]}}Jt(id,"SymbolLineVertexArray");class Zs extends Oe{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}Zs.prototype.size=12;class jc extends Hi{get(n){return new Zs(this,n)}}Jt(jc,"FeatureIndexArray");class Wa extends Ti{geta_centroid_pos0(n){return this.uint16[2*n+0]}geta_centroid_pos1(n){return this.uint16[2*n+1]}}Jt(Wa,"FillExtrusionCentroidArray");const Es=Ue([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),Xs=Ue([{name:"a_dash",components:4,type:"Uint16"}]);var od={exports:{}},Uc={exports:{}};Uc.exports=function(i,n){var o,u,h,m,v,x,S,E;for(u=i.length-(o=3&i.length),h=n,v=3432918353,x=461845907,E=0;E<u;)S=255&i.charCodeAt(E)|(255&i.charCodeAt(++E))<<8|(255&i.charCodeAt(++E))<<16|(255&i.charCodeAt(++E))<<24,++E,h=27492+(65535&(m=5*(65535&(h=(h^=S=(65535&(S=(S=(65535&S)*v+(((S>>>16)*v&65535)<<16)&4294967295)<<15|S>>>17))*x+(((S>>>16)*x&65535)<<16)&4294967295)<<13|h>>>19))+((5*(h>>>16)&65535)<<16)&4294967295))+((58964+(m>>>16)&65535)<<16);switch(S=0,o){case 3:S^=(255&i.charCodeAt(E+2))<<16;case 2:S^=(255&i.charCodeAt(E+1))<<8;case 1:h^=S=(65535&(S=(S=(65535&(S^=255&i.charCodeAt(E)))*v+(((S>>>16)*v&65535)<<16)&4294967295)<<15|S>>>17))*x+(((S>>>16)*x&65535)<<16)&4294967295}return h^=i.length,h=2246822507*(65535&(h^=h>>>16))+((2246822507*(h>>>16)&65535)<<16)&4294967295,h=3266489909*(65535&(h^=h>>>13))+((3266489909*(h>>>16)&65535)<<16)&4294967295,(h^=h>>>16)>>>0};var xf=Uc.exports,mE={exports:{}};mE.exports=function(i,n){for(var o,u=i.length,h=n^u,m=0;u>=4;)o=1540483477*(65535&(o=255&i.charCodeAt(m)|(255&i.charCodeAt(++m))<<8|(255&i.charCodeAt(++m))<<16|(255&i.charCodeAt(++m))<<24))+((1540483477*(o>>>16)&65535)<<16),h=1540483477*(65535&h)+((1540483477*(h>>>16)&65535)<<16)^(o=1540483477*(65535&(o^=o>>>24))+((1540483477*(o>>>16)&65535)<<16)),u-=4,++m;switch(u){case 3:h^=(255&i.charCodeAt(m+2))<<16;case 2:h^=(255&i.charCodeAt(m+1))<<8;case 1:h=1540483477*(65535&(h^=255&i.charCodeAt(m)))+((1540483477*(h>>>16)&65535)<<16)}return h=1540483477*(65535&(h^=h>>>13))+((1540483477*(h>>>16)&65535)<<16),(h^=h>>>15)>>>0};var gE=xf,PL=mE.exports;od.exports=gE,od.exports.murmur3=gE,od.exports.murmur2=PL;var h_=V(od.exports);class fg{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(n,o,u,h){this.ids.push(vE(n)),this.positions.push(o,u,h)}getPositions(n){const o=vE(n);let u=0,h=this.ids.length-1;for(;u<h;){const v=u+h>>1;this.ids[v]>=o?h=v:u=v+1}const m=[];for(;this.ids[u]===o;)m.push({index:this.positions[3*u],start:this.positions[3*u+1],end:this.positions[3*u+2]}),u++;return m}static serialize(n,o){const u=new Float64Array(n.ids),h=new Uint32Array(n.positions);return f_(u,h,0,u.length-1),o&&o.push(u.buffer,h.buffer),{ids:u,positions:h}}static deserialize(n){const o=new fg;return o.ids=n.ids,o.positions=n.positions,o.indexed=!0,o}}function vE(i){const n=+i;return!isNaN(n)&&Number.MIN_SAFE_INTEGER<=n&&n<=Number.MAX_SAFE_INTEGER?n:h_(String(i))}function f_(i,n,o,u){for(;o<u;){const h=i[o+u>>1];let m=o-1,v=u+1;for(;;){do m++;while(i[m]<h);do v--;while(i[v]>h);if(m>=v)break;pg(i,m,v),pg(n,3*m,3*v),pg(n,3*m+1,3*v+1),pg(n,3*m+2,3*v+2)}v-o<u-v?(f_(i,n,o,v),o=v+1):(f_(i,n,v+1,u),u=v)}}function pg(i,n,o){const u=i[n];i[n]=i[o],i[o]=u}Jt(fg,"FeaturePositionMap");class Ks{constructor(n){this.gl=n.gl,this.initialized=!1}fetchUniformLocation(n,o){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(n,o),this.initialized=!0),!!this.location}}class mg extends Ks{constructor(n){super(n),this.current=0}set(n,o,u){this.fetchUniformLocation(n,o)&&this.current!==u&&(this.current=u,this.gl.uniform1f(this.location,u))}}class yE extends Ks{constructor(n){super(n),this.current=[0,0,0,0]}set(n,o,u){this.fetchUniformLocation(n,o)&&(u[0]===this.current[0]&&u[1]===this.current[1]&&u[2]===this.current[2]&&u[3]===this.current[3]||(this.current=u,this.gl.uniform4f(this.location,u[0],u[1],u[2],u[3])))}}class _E extends Ks{constructor(n){super(n),this.current=Nr.transparent}set(n,o,u){this.fetchUniformLocation(n,o)&&(u.r===this.current.r&&u.g===this.current.g&&u.b===this.current.b&&u.a===this.current.a||(this.current=u,this.gl.uniform4f(this.location,u.r,u.g,u.b,u.a)))}}const AL=new Float32Array(16),RL=new Float32Array(9),OL=new Float32Array(4);function p_(i){return[Re(255*i.r,255*i.g),Re(255*i.b,255*i.a)]}class bf{constructor(n,o,u){this.value=n,this.uniformNames=o.map(h=>`u_${h}`),this.type=u}setUniform(n,o,u,h,m){o.set(n,m,h.constantOr(this.value))}getBinding(n,o){return this.type==="color"?new _E(n):new mg(n)}}class ad{constructor(n,o){this.uniformNames=o.map(u=>`u_${u}`),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(n){this.pixelRatio=n.pixelRatio||1,this.pattern=n.tl.concat(n.br)}setUniform(n,o,u,h,m){const v=m==="u_pattern"||m==="u_dash"?this.pattern:m==="u_pixel_ratio"?this.pixelRatio:null;v&&o.set(n,m,v)}getBinding(n,o){return o==="u_pattern"||o==="u_dash"?new yE(n):new mg(n)}}class Ys{constructor(n,o,u,h){this.expression=n,this.type=u,this.maxValue=0,this.paintVertexAttributes=o.map(m=>({name:`a_${m}`,type:"Float32",components:u==="color"?2:1,offset:0})),this.paintVertexArray=new h}populatePaintArray(n,o,u,h,m,v){const x=this.paintVertexArray.length,S=this.expression.evaluate(new O(0),o,{},m,h,v);this.paintVertexArray.resize(n),this._setPaintValue(x,n,S)}updatePaintArray(n,o,u,h,m){const v=this.expression.evaluate({zoom:0},u,h,void 0,m);this._setPaintValue(n,o,v)}_setPaintValue(n,o,u){if(this.type==="color"){const h=p_(u);for(let m=n;m<o;m++)this.paintVertexArray.emplace(m,h[0],h[1])}else{for(let h=n;h<o;h++)this.paintVertexArray.emplace(h,u);this.maxValue=Math.max(this.maxValue,Math.abs(u))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class qa{constructor(n,o,u,h,m,v){this.expression=n,this.uniformNames=o.map(x=>`u_${x}_t`),this.type=u,this.useIntegerZoom=h,this.zoom=m,this.maxValue=0,this.paintVertexAttributes=o.map(x=>({name:`a_${x}`,type:"Float32",components:u==="color"?4:2,offset:0})),this.paintVertexArray=new v}populatePaintArray(n,o,u,h,m,v){const x=this.expression.evaluate(new O(this.zoom),o,{},m,h,v),S=this.expression.evaluate(new O(this.zoom+1),o,{},m,h,v),E=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValue(E,n,x,S)}updatePaintArray(n,o,u,h,m){const v=this.expression.evaluate({zoom:this.zoom},u,h,void 0,m),x=this.expression.evaluate({zoom:this.zoom+1},u,h,void 0,m);this._setPaintValue(n,o,v,x)}_setPaintValue(n,o,u,h){if(this.type==="color"){const m=p_(u),v=p_(h);for(let x=n;x<o;x++)this.paintVertexArray.emplace(x,m[0],m[1],v[0],v[1])}else{for(let m=n;m<o;m++)this.paintVertexArray.emplace(m,u,h);this.maxValue=Math.max(this.maxValue,Math.abs(u),Math.abs(h))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(n,o,u,h,m){const v=this.useIntegerZoom?Math.floor(u.zoom):u.zoom,x=pe(this.expression.interpolationFactor(v,this.zoom,this.zoom+1),0,1);o.set(n,m,x)}getBinding(n,o){return new mg(n)}}class Fl{constructor(n,o,u,h,m){this.expression=n,this.layerId=m,this.paintVertexAttributes=(u==="array"?Xs:Es).members;for(let v=0;v<o.length;++v);this.paintVertexArray=new h}populatePaintArray(n,o,u){const h=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValues(h,n,o.patterns&&o.patterns[this.layerId],u)}updatePaintArray(n,o,u,h,m,v){this._setPaintValues(n,o,u.patterns&&u.patterns[this.layerId],v)}_setPaintValues(n,o,u,h){if(!h||!u)return;const m=h[u];if(!m)return;const{tl:v,br:x,pixelRatio:S}=m;for(let E=n;E<o;E++)this.paintVertexArray.emplace(E,v[0],v[1],x[0],x[1],S)}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Bl{constructor(n,o,u=()=>!0){this.binders={},this._buffers=[];const h=[];for(const m in n.paint._values){if(!u(m))continue;const v=n.paint.get(m);if(!(v instanceof ue&&Al(v.property.specification)))continue;const x=kL(m,n.type),S=v.value,E=v.property.specification.type,R=!!v.property.useIntegerZoom,z=m==="line-dasharray"||m.endsWith("pattern"),L=m==="line-dasharray"&&n.layout.get("line-cap").value.kind!=="constant";if(S.kind!=="constant"||L)if(S.kind==="source"||L||z){const H=xE(m,E,"source");this.binders[m]=z?new Fl(S,x,E,H,n.id):new Ys(S,x,E,H),h.push(`/a_${m}`)}else{const H=xE(m,E,"composite");this.binders[m]=new qa(S,x,E,R,o,H),h.push(`/z_${m}`)}else this.binders[m]=z?new ad(S.value,x):new bf(S.value,x,E),h.push(`/u_${m}`)}this.cacheKey=h.sort().join("")}getMaxValue(n){const o=this.binders[n];return o instanceof Ys||o instanceof qa?o.maxValue:0}populatePaintArrays(n,o,u,h,m,v){for(const x in this.binders){const S=this.binders[x];(S instanceof Ys||S instanceof qa||S instanceof Fl)&&S.populatePaintArray(n,o,u,h,m,v)}}setConstantPatternPositions(n){for(const o in this.binders){const u=this.binders[o];u instanceof ad&&u.setConstantPatternPositions(n)}}updatePaintArrays(n,o,u,h,m,v){let x=!1;for(const S in n){const E=o.getPositions(S);for(const R of E){const z=u.feature(R.index);for(const L in this.binders){const H=this.binders[L];if((H instanceof Ys||H instanceof qa||H instanceof Fl)&&H.expression.isStateDependent===!0){const G=h.paint.get(L);H.expression=G.value,H.updatePaintArray(R.start,R.end,z,n[S],m,v),x=!0}}}}return x}defines(){const n=[];for(const o in this.binders){const u=this.binders[o];(u instanceof bf||u instanceof ad)&&n.push(...u.uniformNames.map(h=>`#define HAS_UNIFORM_${h}`))}return n}getBinderAttributes(){const n=[];for(const o in this.binders){const u=this.binders[o];if(u instanceof Ys||u instanceof qa||u instanceof Fl)for(let h=0;h<u.paintVertexAttributes.length;h++)n.push(u.paintVertexAttributes[h].name)}return n}getBinderUniforms(){const n=[];for(const o in this.binders){const u=this.binders[o];if(u instanceof bf||u instanceof ad||u instanceof qa)for(const h of u.uniformNames)n.push(h)}return n}getPaintVertexBuffers(){return this._buffers}getUniforms(n){const o=[];for(const u in this.binders){const h=this.binders[u];if(h instanceof bf||h instanceof ad||h instanceof qa)for(const m of h.uniformNames)o.push({name:m,property:u,binding:h.getBinding(n,m)})}return o}setUniforms(n,o,u,h,m){for(const{name:v,property:x,binding:S}of u)this.binders[x].setUniform(n,S,m,h.get(x),v)}updatePaintBuffers(){this._buffers=[];for(const n in this.binders){const o=this.binders[n];(o instanceof Ys||o instanceof qa||o instanceof Fl)&&o.paintVertexBuffer&&this._buffers.push(o.paintVertexBuffer)}}upload(n){for(const o in this.binders){const u=this.binders[o];(u instanceof Ys||u instanceof qa||u instanceof Fl)&&u.upload(n)}this.updatePaintBuffers()}destroy(){for(const n in this.binders){const o=this.binders[n];(o instanceof Ys||o instanceof qa||o instanceof Fl)&&o.destroy()}}}class Vc{constructor(n,o,u=()=>!0){this.programConfigurations={};for(const h of n)this.programConfigurations[h.id]=new Bl(h,o,u);this.needsUpload=!1,this._featureMap=new fg,this._bufferOffset=0}populatePaintArrays(n,o,u,h,m,v,x){for(const S in this.programConfigurations)this.programConfigurations[S].populatePaintArrays(n,o,h,m,v,x);o.id!==void 0&&this._featureMap.add(o.id,u,this._bufferOffset,n),this._bufferOffset=n,this.needsUpload=!0}updatePaintArrays(n,o,u,h,m){for(const v of u)this.needsUpload=this.programConfigurations[v.id].updatePaintArrays(n,this._featureMap,o,v,h,m)||this.needsUpload}get(n){return this.programConfigurations[n]}upload(n){if(this.needsUpload){for(const o in this.programConfigurations)this.programConfigurations[o].upload(n);this.needsUpload=!1}}destroy(){for(const n in this.programConfigurations)this.programConfigurations[n].destroy()}}const zL={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function kL(i,n){return zL[i]||[i.replace(`${n}-`,"").replace(/-/g,"_")]}const LL={"line-pattern":{source:Xe,composite:Xe},"fill-pattern":{source:Xe,composite:Xe},"fill-extrusion-pattern":{source:Xe,composite:Xe},"line-dasharray":{source:dt,composite:dt}},DL={color:{source:wa,composite:Et},number:{source:yr,composite:wa}};function xE(i,n,o){const u=LL[i];return u&&u[o]||DL[n][o]}Jt(bf,"ConstantBinder"),Jt(ad,"PatternConstantBinder"),Jt(Ys,"SourceExpressionBinder"),Jt(Fl,"PatternCompositeBinder"),Jt(qa,"CompositeExpressionBinder"),Jt(Bl,"ProgramConfiguration",{omit:["_buffers"]}),Jt(Vc,"ProgramConfigurationSet");const bE="-transition";class Za extends Oi{constructor(n,o){if(super(),this.id=n.id,this.type=n.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,n.type!=="custom"&&(this.metadata=n.metadata,this.minzoom=n.minzoom,this.maxzoom=n.maxzoom,n.type!=="background"&&n.type!=="sky"&&(this.source=n.source,this.sourceLayer=n["source-layer"],this.filter=n.filter),o.layout&&(this._unevaluatedLayout=new he(o.layout)),o.paint)){this._transitionablePaint=new Z(o.paint);for(const u in n.paint)this.setPaintProperty(u,n.paint[u],{validate:!1});for(const u in n.layout)this.setLayoutProperty(u,n.layout[u],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new ge(o.paint)}}getLayoutProperty(n){return n==="visibility"?this.visibility:this._unevaluatedLayout.getValue(n)}setLayoutProperty(n,o,u={}){o!=null&&this._validate(s_,`layers.${this.id}.layout.${n}`,n,o,u)||(n!=="visibility"?this._unevaluatedLayout.setValue(n,o):this.visibility=o)}getPaintProperty(n){return Tt(n,bE)?this._transitionablePaint.getTransition(n.slice(0,-11)):this._transitionablePaint.getValue(n)}setPaintProperty(n,o,u={}){if(o!=null&&this._validate(a_,`layers.${this.id}.paint.${n}`,n,o,u))return!1;if(Tt(n,bE))return this._transitionablePaint.setTransition(n.slice(0,-11),o||void 0),!1;{const h=this._transitionablePaint._values[n],m=h.value.isDataDriven(),v=h.value;this._transitionablePaint.setValue(n,o),this._handleSpecialPaintPropertyUpdate(n);const x=this._transitionablePaint._values[n].value,S=x.isDataDriven(),E=Tt(n,"pattern")||n==="line-dasharray";return S||m||E||this._handleOverridablePaintPropertyUpdate(n,v,x)}}_handleSpecialPaintPropertyUpdate(n){}getProgramIds(){return null}getProgramConfiguration(n){return null}_handleOverridablePaintPropertyUpdate(n,o,u){return!1}isHidden(n){return!!(this.minzoom&&n<this.minzoom)||!!(this.maxzoom&&n>=this.maxzoom)||this.visibility==="none"}updateTransitions(n){this._transitioningPaint=this._transitionablePaint.transitioned(n,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(n,o){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(n,void 0,o)),this.paint=this._transitioningPaint.possiblyEvaluate(n,void 0,o)}serialize(){const n={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(n.layout=n.layout||{},n.layout.visibility=this.visibility),yt(n,(o,u)=>!(o===void 0||u==="layout"&&!Object.keys(o).length||u==="paint"&&!Object.keys(o).length))}_validate(n,o,u,h,m={}){return(!m||m.validate!==!1)&&cg(this,n.call(lg,{key:o,layerType:this.type,objectKey:u,value:h,styleSpec:nt,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const n in this.paint._values){const o=this.paint.get(n);if(o instanceof ue&&Al(o.property.specification)&&(o.value.kind==="source"||o.value.kind==="composite")&&o.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=ed(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}const $L=Ue([{name:"a_pos",components:2,type:"Int16"}],4),FL=Ue([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class si{constructor(n=[]){this.segments=n}prepareSegment(n,o,u,h){let m=this.segments[this.segments.length-1];return n>si.MAX_VERTEX_ARRAY_LENGTH&&Ct(`Max vertices per segment is ${si.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${n}`),(!m||m.vertexLength+n>si.MAX_VERTEX_ARRAY_LENGTH||m.sortKey!==h)&&(m={vertexOffset:o.length,primitiveOffset:u.length,vertexLength:0,primitiveLength:0},h!==void 0&&(m.sortKey=h),this.segments.push(m)),m}get(){return this.segments}destroy(){for(const n of this.segments)for(const o in n.vaos)n.vaos[o].destroy()}static simpleSegment(n,o,u,h){return new si([{vertexOffset:n,primitiveOffset:o,vertexLength:u,primitiveLength:h,vaos:{},sortKey:0}])}}si.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Jt(si,"SegmentVector");var gn=8192;class Nl{constructor(n,o){n&&(o?this.setSouthWest(n).setNorthEast(o):n.length===4?this.setSouthWest([n[0],n[1]]).setNorthEast([n[2],n[3]]):this.setSouthWest(n[0]).setNorthEast(n[1]))}setNorthEast(n){return this._ne=n instanceof br?new br(n.lng,n.lat):br.convert(n),this}setSouthWest(n){return this._sw=n instanceof br?new br(n.lng,n.lat):br.convert(n),this}extend(n){const o=this._sw,u=this._ne;let h,m;if(n instanceof br)h=n,m=n;else{if(!(n instanceof Nl))return Array.isArray(n)?n.length===4||n.every(Array.isArray)?this.extend(Nl.convert(n)):this.extend(br.convert(n)):typeof n=="object"&&n!==null&&n.hasOwnProperty("lat")&&(n.hasOwnProperty("lon")||n.hasOwnProperty("lng"))?this.extend(br.convert(n)):this;if(h=n._sw,m=n._ne,!h||!m)return this}return o||u?(o.lng=Math.min(h.lng,o.lng),o.lat=Math.min(h.lat,o.lat),u.lng=Math.max(m.lng,u.lng),u.lat=Math.max(m.lat,u.lat)):(this._sw=new br(h.lng,h.lat),this._ne=new br(m.lng,m.lat)),this}getCenter(){return new br((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new br(this.getWest(),this.getNorth())}getSouthEast(){return new br(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(n){const{lng:o,lat:u}=br.convert(n);let h=this._sw.lng<=o&&o<=this._ne.lng;return this._sw.lng>this._ne.lng&&(h=this._sw.lng>=o&&o>=this._ne.lng),this._sw.lat<=u&&u<=this._ne.lat&&h}static convert(n){return!n||n instanceof Nl?n:new Nl(n)}}var gg=1e-6,Do=typeof Float32Array<"u"?Float32Array:Array;function wE(){var i=new Do(9);return Do!=Float32Array&&(i[1]=0,i[2]=0,i[3]=0,i[5]=0,i[6]=0,i[7]=0),i[0]=1,i[4]=1,i[8]=1,i}function SE(i,n,o){var u=n[0],h=n[1],m=n[2],v=n[3],x=n[4],S=n[5],E=n[6],R=n[7],z=n[8],L=o[0],H=o[1],G=o[2],Y=o[3],ae=o[4],ve=o[5],Ce=o[6],ye=o[7],Ee=o[8];return i[0]=L*u+H*v+G*E,i[1]=L*h+H*x+G*R,i[2]=L*m+H*S+G*z,i[3]=Y*u+ae*v+ve*E,i[4]=Y*h+ae*x+ve*R,i[5]=Y*m+ae*S+ve*z,i[6]=Ce*u+ye*v+Ee*E,i[7]=Ce*h+ye*x+Ee*R,i[8]=Ce*m+ye*S+Ee*z,i}function Xa(i){return i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}function m_(i,n){var o=n[0],u=n[1],h=n[2],m=n[3],v=n[4],x=n[5],S=n[6],E=n[7],R=n[8],z=n[9],L=n[10],H=n[11],G=n[12],Y=n[13],ae=n[14],ve=n[15],Ce=o*x-u*v,ye=o*S-h*v,Ee=o*E-m*v,Ae=u*S-h*x,Pe=u*E-m*x,Ye=h*E-m*S,Ze=R*Y-z*G,at=R*ae-L*G,At=R*ve-H*G,tt=z*ae-L*Y,pt=z*ve-H*Y,mt=L*ve-H*ae,_t=Ce*mt-ye*pt+Ee*tt+Ae*At-Pe*at+Ye*Ze;return _t?(i[0]=(x*mt-S*pt+E*tt)*(_t=1/_t),i[1]=(h*pt-u*mt-m*tt)*_t,i[2]=(Y*Ye-ae*Pe+ve*Ae)*_t,i[3]=(L*Pe-z*Ye-H*Ae)*_t,i[4]=(S*At-v*mt-E*at)*_t,i[5]=(o*mt-h*At+m*at)*_t,i[6]=(ae*Ee-G*Ye-ve*ye)*_t,i[7]=(R*Ye-L*Ee+H*ye)*_t,i[8]=(v*pt-x*At+E*Ze)*_t,i[9]=(u*At-o*pt-m*Ze)*_t,i[10]=(G*Pe-Y*Ee+ve*Ce)*_t,i[11]=(z*Ee-R*Pe-H*Ce)*_t,i[12]=(x*at-v*tt-S*Ze)*_t,i[13]=(o*tt-u*at+h*Ze)*_t,i[14]=(Y*ye-G*Ae-ae*Ce)*_t,i[15]=(R*Ae-z*ye+L*Ce)*_t,i):null}function Hc(i,n,o){var u=n[0],h=n[1],m=n[2],v=n[3],x=n[4],S=n[5],E=n[6],R=n[7],z=n[8],L=n[9],H=n[10],G=n[11],Y=n[12],ae=n[13],ve=n[14],Ce=n[15],ye=o[0],Ee=o[1],Ae=o[2],Pe=o[3];return i[0]=ye*u+Ee*x+Ae*z+Pe*Y,i[1]=ye*h+Ee*S+Ae*L+Pe*ae,i[2]=ye*m+Ee*E+Ae*H+Pe*ve,i[3]=ye*v+Ee*R+Ae*G+Pe*Ce,i[4]=(ye=o[4])*u+(Ee=o[5])*x+(Ae=o[6])*z+(Pe=o[7])*Y,i[5]=ye*h+Ee*S+Ae*L+Pe*ae,i[6]=ye*m+Ee*E+Ae*H+Pe*ve,i[7]=ye*v+Ee*R+Ae*G+Pe*Ce,i[8]=(ye=o[8])*u+(Ee=o[9])*x+(Ae=o[10])*z+(Pe=o[11])*Y,i[9]=ye*h+Ee*S+Ae*L+Pe*ae,i[10]=ye*m+Ee*E+Ae*H+Pe*ve,i[11]=ye*v+Ee*R+Ae*G+Pe*Ce,i[12]=(ye=o[12])*u+(Ee=o[13])*x+(Ae=o[14])*z+(Pe=o[15])*Y,i[13]=ye*h+Ee*S+Ae*L+Pe*ae,i[14]=ye*m+Ee*E+Ae*H+Pe*ve,i[15]=ye*v+Ee*R+Ae*G+Pe*Ce,i}function wf(i,n,o){var u,h,m,v,x,S,E,R,z,L,H,G,Y=o[0],ae=o[1],ve=o[2];return n===i?(i[12]=n[0]*Y+n[4]*ae+n[8]*ve+n[12],i[13]=n[1]*Y+n[5]*ae+n[9]*ve+n[13],i[14]=n[2]*Y+n[6]*ae+n[10]*ve+n[14],i[15]=n[3]*Y+n[7]*ae+n[11]*ve+n[15]):(h=n[1],m=n[2],v=n[3],x=n[4],S=n[5],E=n[6],R=n[7],z=n[8],L=n[9],H=n[10],G=n[11],i[0]=u=n[0],i[1]=h,i[2]=m,i[3]=v,i[4]=x,i[5]=S,i[6]=E,i[7]=R,i[8]=z,i[9]=L,i[10]=H,i[11]=G,i[12]=u*Y+x*ae+z*ve+n[12],i[13]=h*Y+S*ae+L*ve+n[13],i[14]=m*Y+E*ae+H*ve+n[14],i[15]=v*Y+R*ae+G*ve+n[15]),i}function Gc(i,n,o){var u=o[0],h=o[1],m=o[2];return i[0]=n[0]*u,i[1]=n[1]*u,i[2]=n[2]*u,i[3]=n[3]*u,i[4]=n[4]*h,i[5]=n[5]*h,i[6]=n[6]*h,i[7]=n[7]*h,i[8]=n[8]*m,i[9]=n[9]*m,i[10]=n[10]*m,i[11]=n[11]*m,i[12]=n[12],i[13]=n[13],i[14]=n[14],i[15]=n[15],i}function g_(i,n,o){var u=Math.sin(o),h=Math.cos(o),m=n[4],v=n[5],x=n[6],S=n[7],E=n[8],R=n[9],z=n[10],L=n[11];return n!==i&&(i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=n[3],i[12]=n[12],i[13]=n[13],i[14]=n[14],i[15]=n[15]),i[4]=m*h+E*u,i[5]=v*h+R*u,i[6]=x*h+z*u,i[7]=S*h+L*u,i[8]=E*h-m*u,i[9]=R*h-v*u,i[10]=z*h-x*u,i[11]=L*h-S*u,i}function vg(i,n,o){var u=Math.sin(o),h=Math.cos(o),m=n[0],v=n[1],x=n[2],S=n[3],E=n[8],R=n[9],z=n[10],L=n[11];return n!==i&&(i[4]=n[4],i[5]=n[5],i[6]=n[6],i[7]=n[7],i[12]=n[12],i[13]=n[13],i[14]=n[14],i[15]=n[15]),i[0]=m*h-E*u,i[1]=v*h-R*u,i[2]=x*h-z*u,i[3]=S*h-L*u,i[8]=m*u+E*h,i[9]=v*u+R*h,i[10]=x*u+z*h,i[11]=S*u+L*h,i}function EE(i,n){return i[0]=n[0],i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=n[1],i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=n[2],i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}function CE(i,n,o){var u,h,m,v=o[0],x=o[1],S=o[2],E=Math.hypot(v,x,S);return E<gg?null:(v*=E=1/E,x*=E,S*=E,u=Math.sin(n),h=Math.cos(n),i[0]=v*v*(m=1-h)+h,i[1]=x*v*m+S*u,i[2]=S*v*m-x*u,i[3]=0,i[4]=v*x*m-S*u,i[5]=x*x*m+h,i[6]=S*x*m+v*u,i[7]=0,i[8]=v*S*m+x*u,i[9]=x*S*m-v*u,i[10]=S*S*m+h,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i)}Math.hypot||(Math.hypot=function(){for(var i=0,n=arguments.length;n--;)i+=arguments[n]*arguments[n];return Math.sqrt(i)});var BL=Hc;function v_(){var i=new Do(3);return Do!=Float32Array&&(i[0]=0,i[1]=0,i[2]=0),i}function TE(i){var n=new Do(3);return n[0]=i[0],n[1]=i[1],n[2]=i[2],n}function Sf(i){return Math.hypot(i[0],i[1],i[2])}function sd(i,n,o){var u=new Do(3);return u[0]=i,u[1]=n,u[2]=o,u}function Js(i,n,o){return i[0]=n[0]+o[0],i[1]=n[1]+o[1],i[2]=n[2]+o[2],i}function y_(i,n,o){return i[0]=n[0]-o[0],i[1]=n[1]-o[1],i[2]=n[2]-o[2],i}function IE(i,n,o){return i[0]=n[0]*o[0],i[1]=n[1]*o[1],i[2]=n[2]*o[2],i}function Ef(i,n,o){return i[0]=Math.min(n[0],o[0]),i[1]=Math.min(n[1],o[1]),i[2]=Math.min(n[2],o[2]),i}function Cf(i,n,o){return i[0]=Math.max(n[0],o[0]),i[1]=Math.max(n[1],o[1]),i[2]=Math.max(n[2],o[2]),i}function Qo(i,n,o){return i[0]=n[0]*o,i[1]=n[1]*o,i[2]=n[2]*o,i}function Tf(i,n,o,u){return i[0]=n[0]+o[0]*u,i[1]=n[1]+o[1]*u,i[2]=n[2]+o[2]*u,i}function so(i,n){var o=n[0],u=n[1],h=n[2],m=o*o+u*u+h*h;return m>0&&(m=1/Math.sqrt(m)),i[0]=n[0]*m,i[1]=n[1]*m,i[2]=n[2]*m,i}function Sa(i,n){return i[0]*n[0]+i[1]*n[1]+i[2]*n[2]}function __(i,n,o){var u=n[0],h=n[1],m=n[2],v=o[0],x=o[1],S=o[2];return i[0]=h*S-m*x,i[1]=m*v-u*S,i[2]=u*x-h*v,i}function ii(i,n,o){var u=n[0],h=n[1],m=n[2],v=o[3]*u+o[7]*h+o[11]*m+o[15];return i[0]=(o[0]*u+o[4]*h+o[8]*m+o[12])/(v=v||1),i[1]=(o[1]*u+o[5]*h+o[9]*m+o[13])/v,i[2]=(o[2]*u+o[6]*h+o[10]*m+o[14])/v,i}function ME(i,n,o){var u=o[0],h=o[1],m=o[2],v=n[0],x=n[1],S=n[2],E=h*S-m*x,R=m*v-u*S,z=u*x-h*v,L=h*z-m*R,H=m*E-u*z,G=u*R-h*E,Y=2*o[3];return R*=Y,z*=Y,H*=2,G*=2,i[0]=v+(E*=Y)+(L*=2),i[1]=x+R+H,i[2]=S+z+G,i}var If,Ka=y_,NL=IE,jL=Sf;function PE(i,n,o){return i[0]=n[0]*o,i[1]=n[1]*o,i[2]=n[2]*o,i[3]=n[3]*o,i}function AE(i,n){var o=n[0],u=n[1],h=n[2],m=n[3],v=o*o+u*u+h*h+m*m;return v>0&&(v=1/Math.sqrt(v)),i[0]=o*v,i[1]=u*v,i[2]=h*v,i[3]=m*v,i}function Wc(i,n,o){var u=n[0],h=n[1],m=n[2],v=n[3];return i[0]=o[0]*u+o[4]*h+o[8]*m+o[12]*v,i[1]=o[1]*u+o[5]*h+o[9]*m+o[13]*v,i[2]=o[2]*u+o[6]*h+o[10]*m+o[14]*v,i[3]=o[3]*u+o[7]*h+o[11]*m+o[15]*v,i}function RE(){var i=new Do(4);return Do!=Float32Array&&(i[0]=0,i[1]=0,i[2]=0),i[3]=1,i}function OE(i){return i[0]=0,i[1]=0,i[2]=0,i[3]=1,i}function zE(i,n,o){o*=.5;var u=n[0],h=n[1],m=n[2],v=n[3],x=Math.sin(o),S=Math.cos(o);return i[0]=u*S+v*x,i[1]=h*S+m*x,i[2]=m*S-h*x,i[3]=v*S-u*x,i}function kE(i,n,o){o*=.5;var u=n[0],h=n[1],m=n[2],v=n[3],x=Math.sin(o),S=Math.cos(o);return i[0]=u*S-m*x,i[1]=h*S+v*x,i[2]=m*S+u*x,i[3]=v*S-h*x,i}v_(),If=new Do(4),Do!=Float32Array&&(If[0]=0,If[1]=0,If[2]=0,If[3]=0);var UL=AE;v_(),sd(1,0,0),sd(0,1,0),RE(),RE(),wE();const VL=Ue([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:LE}=VL,DE=Ue([{name:"a_pos_3",components:3,type:"Int16"}]);var Mf=Ue([{name:"a_pos",type:"Int16",components:2}]);class x_{constructor(n,o){this.pos=n,this.dir=o}intersectsPlane(n,o,u){const h=Sa(o,this.dir);if(Math.abs(h)<1e-6)return!1;const m=((n[0]-this.pos[0])*o[0]+(n[1]-this.pos[1])*o[1]+(n[2]-this.pos[2])*o[2])/h;return u[0]=this.pos[0]+this.dir[0]*m,u[1]=this.pos[1]+this.dir[1]*m,u[2]=this.pos[2]+this.dir[2]*m,!0}closestPointOnSphere(n,o,u){if(function(H,G){var Y=H[0],ae=H[1],ve=H[2],Ce=G[0],ye=G[1],Ee=G[2];return Math.abs(Y-Ce)<=gg*Math.max(1,Math.abs(Y),Math.abs(Ce))&&Math.abs(ae-ye)<=gg*Math.max(1,Math.abs(ae),Math.abs(ye))&&Math.abs(ve-Ee)<=gg*Math.max(1,Math.abs(ve),Math.abs(Ee))}(this.pos,n)||o===0)return u[0]=u[1]=u[2]=0,!1;const[h,m,v]=this.dir,x=this.pos[0]-n[0],S=this.pos[1]-n[1],E=this.pos[2]-n[2],R=h*h+m*m+v*v,z=2*(x*h+S*m+E*v),L=z*z-4*R*(x*x+S*S+E*E-o*o);if(L<0){const H=Math.max(-z/2,0),G=x+h*H,Y=S+m*H,ae=E+v*H,ve=Math.hypot(G,Y,ae);return u[0]=G*o/ve,u[1]=Y*o/ve,u[2]=ae*o/ve,!1}{const H=(-z-Math.sqrt(L))/(2*R);if(H<0){const G=Math.hypot(x,S,E);return u[0]=x*o/G,u[1]=S*o/G,u[2]=E*o/G,!1}return u[0]=x+h*H,u[1]=S+m*H,u[2]=E+v*H,!0}}}class b_{constructor(n,o,u,h,m){this.TL=n,this.TR=o,this.BR=u,this.BL=h,this.horizon=m}static fromInvProjectionMatrix(n,o,u){const h=[-1,1,1],m=[1,1,1],v=[1,-1,1],x=[-1,-1,1],S=ii(h,h,n),E=ii(m,m,n),R=ii(v,v,n),z=ii(x,x,n);return new b_(S,E,R,z,o/u)}}class w_{constructor(n,o){this.points=n,this.planes=o}static fromInvProjectionMatrix(n,o,u,h){const m=Math.pow(2,u),v=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(S=>{const E=Wc([],S,n),R=1/E[3]/o*m;return function(z,L,H){return z[0]=L[0]*H[0],z[1]=L[1]*H[1],z[2]=L[2]*H[2],z[3]=L[3]*H[3],z}(E,E,[R,R,h?1/E[3]:R,R])}),x=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(S=>{const E=so([],__([],Ka([],v[S[0]],v[S[1]]),Ka([],v[S[2]],v[S[1]]))),R=-Sa(E,v[S[1]]);return E.concat(R)});return new w_(v,x)}}class lo{static fromPoints(n){const o=[1/0,1/0,1/0],u=[-1/0,-1/0,-1/0];for(const h of n)Ef(o,o,h),Cf(u,u,h);return new lo(o,u)}static applyTransform(n,o){const u=n.getCorners();for(let h=0;h<u.length;++h)ii(u[h],u[h],o);return lo.fromPoints(u)}constructor(n,o){this.min=n,this.max=o,this.center=Qo([],Js([],this.min,this.max),.5)}quadrant(n){const o=[n%2==0,n<2],u=TE(this.min),h=TE(this.max);for(let m=0;m<o.length;m++)u[m]=o[m]?this.min[m]:this.center[m],h[m]=o[m]?this.center[m]:this.max[m];return h[2]=this.max[2],new lo(u,h)}distanceX(n){return Math.max(Math.min(this.max[0],n[0]),this.min[0])-n[0]}distanceY(n){return Math.max(Math.min(this.max[1],n[1]),this.min[1])-n[1]}distanceZ(n){return Math.max(Math.min(this.max[2],n[2]),this.min[2])-n[2]}getCorners(){const n=this.min,o=this.max;return[[n[0],n[1],n[2]],[o[0],n[1],n[2]],[o[0],o[1],n[2]],[n[0],o[1],n[2]],[n[0],n[1],o[2]],[o[0],n[1],o[2]],[o[0],o[1],o[2]],[n[0],o[1],o[2]]]}intersects(n){const o=this.getCorners();let u=!0;for(let h=0;h<n.planes.length;h++){const m=n.planes[h];let v=0;for(let x=0;x<o.length;x++)v+=Sa(m,o[x])+m[3]>=0;if(v===0)return 0;v!==o.length&&(u=!1)}if(u)return 2;for(let h=0;h<3;h++){let m=Number.MAX_VALUE,v=-Number.MAX_VALUE;for(let x=0;x<n.points.length;x++){const S=n.points[x][h]-this.min[h];m=Math.min(m,S),v=Math.max(v,S)}if(v<0||m>this.max[h]-this.min[h])return 0}return 1}}const S_=5,$E=6,Cs=gn/Math.PI/2,HL=16383,qc=64,Pf=[qc,32,16],Ea=-Cs,Ca=Cs,GL=[new lo([Ea,Ea,Ea],[Ca,Ca,Ca]),new lo([Ea,Ea,Ea],[0,0,Ca]),new lo([0,Ea,Ea],[Ca,0,Ca]),new lo([Ea,0,Ea],[0,Ca,Ca]),new lo([0,0,Ea],[Ca,Ca,Ca])];function yg(i){return i*Cs/Of}function FE(i,n,o,u=!0){const h=Qo([],i._camera.position,i.worldSize),m=[n,o,1,1];Wc(m,m,i.pixelMatrixInverse),PE(m,m,1/m[3]);const v=so([],Ka([],m,h)),x=i.globeMatrix,S=[x[12],x[13],x[14]],E=Ka([],S,h),R=Sf(E),z=so([],E),L=i.worldSize/(2*Math.PI),H=Sa(z,v),G=Math.asin(L/R);if(G<Math.acos(H)){if(!u)return null;const At=[],tt=[];Qo(At,v,R/H),so(tt,Ka(tt,At,E)),so(v,Js(v,E,Qo(v,tt,Math.tan(G)*R)))}const Y=[];new x_(h,v).closestPointOnSphere(S,L,Y);const ae=so([],sn(x,0)),ve=so([],sn(x,1)),Ce=so([],sn(x,2)),ye=Sa(ae,Y),Ee=Sa(ve,Y),Ae=Sa(Ce,Y),Pe=fe(Math.asin(-Ee/L));let Ye=fe(Math.atan2(ye,Ae));Ye=i.center.lng+function(At,tt){const pt=(tt-At+180)%360-180;return pt<-180?pt+360:pt}(i.center.lng,Ye);const Ze=Is(Ye),at=pe(Ms(Pe),0,1);return new dd(Ze,at)}class WL{constructor(n,o,u){this.a=Ka([],n,u),this.b=Ka([],o,u),this.center=u;const h=so([],this.a),m=so([],this.b);this.angle=Math.acos(Sa(h,m))}}function E_(i,n){if(i.angle===0)return null;let o;return o=i.a[n]===0?1/i.angle*.5*Math.PI:1/i.angle*Math.atan(i.b[n]/i.a[n]/Math.sin(i.angle)-1/Math.tan(i.angle)),o<0||o>1?null:function(u,h,m,v){const x=Math.sin(m);return u*(Math.sin((1-v)*m)/x)+h*(Math.sin(v*m)/x)}(i.a[n],i.b[n],i.angle,pe(o,0,1))+i.center[n]}function Ts(i){if(i.z<=1)return GL[i.z+2*i.y+i.x];const n=C_(_g(i));return lo.fromPoints(n)}function Zc(i,n,o){return Qo(i,i,1-o),Tf(i,i,n,o)}function BE(i,n){const o=ud(n.zoom);if(o===0)return Ts(i);const u=_g(i),h=C_(u),m=Is(u.getWest())*n.worldSize,v=Is(u.getEast())*n.worldSize,x=Ms(u.getNorth())*n.worldSize,S=Ms(u.getSouth())*n.worldSize,E=[m,x,0],R=[v,x,0],z=[m,S,0],L=[v,S,0],H=m_([],n.globeMatrix);return ii(E,E,H),ii(R,R,H),ii(z,z,H),ii(L,L,H),h[0]=Zc(h[0],z,o),h[1]=Zc(h[1],L,o),h[2]=Zc(h[2],R,o),h[3]=Zc(h[3],E,o),lo.fromPoints(h)}function NE(i,n,o){for(const u of i)ii(u,u,n),Qo(u,u,o)}function qL(i,n,o){const u=n/i.worldSize,h=i.globeMatrix;if(o.z<=1){const Ze=Ts(o).getCorners();return NE(Ze,h,u),lo.fromPoints(Ze)}const m=_g(o),v=C_(m);NE(v,h,u);const x=Number.MAX_VALUE,S=[-x,-x,-x],E=[x,x,x];if(m.contains(i.center)){for(const At of v)Ef(E,E,At),Cf(S,S,At);S[2]=0;const Ze=i.point,at=[Ze.x*u,Ze.y*u,0];return Ef(E,E,at),Cf(S,S,at),new lo(E,S)}const R=[h[12]*u,h[13]*u,h[14]*u],z=m.getCenter(),L=pe(i.center.lat,-Wi,Wi),H=pe(z.lat,-Wi,Wi),G=Is(i.center.lng),Y=Ms(L);let ae=G-Is(z.lng);const ve=Y-Ms(H);ae>.5?ae-=1:ae<-.5&&(ae+=1);let Ce=0;Math.abs(ae)>Math.abs(ve)?Ce=ae>=0?1:3:(Ce=ve>=0?0:2,Tf(R,R,[h[4]*u,h[5]*u,h[6]*u],-Math.sin(ie(ve>=0?m.getSouth():m.getNorth()))*Cs));const ye=v[Ce],Ee=v[(Ce+1)%4],Ae=new WL(ye,Ee,R),Pe=[E_(Ae,0)||ye[0],E_(Ae,1)||ye[1],E_(Ae,2)||ye[2]],Ye=ud(i.zoom);if(Ye>0){const Ze=function({x:At,y:tt,z:pt},mt,_t,Dt,it){const Wt=1/(1<<pt);let tn=At*Wt,qt=tn+Wt,kn=tt*Wt,Ft=kn+Wt,fn=0;const Ln=(tn+qt)/2-Dt;return Ln>.5?fn=-1:Ln<-.5&&(fn=1),tn=((tn+fn)*mt-(Dt*=mt))*_t+Dt,qt=((qt+fn)*mt-Dt)*_t+Dt,kn=(kn*mt-(it*=mt))*_t+it,Ft=(Ft*mt-it)*_t+it,[[tn,Ft,0],[qt,Ft,0],[qt,kn,0],[tn,kn,0]]}(o,n,i._pixelsPerMercatorPixel,G,Y);for(let At=0;At<v.length;At++)Zc(v[At],Ze[At],Ye);const at=Js([],Ze[Ce],Ze[(Ce+1)%4]);Qo(at,at,.5),Zc(Pe,at,Ye)}for(const Ze of v)Ef(E,E,Ze),Cf(S,S,Ze);return E[2]=Math.min(ye[2],Ee[2]),Ef(E,E,Pe),Cf(S,S,Pe),new lo(E,S)}function _g({x:i,y:n,z:o}){const u=1/(1<<o),h=new br(ea(i*u),Gi((n+1)*u)),m=new br(ea((i+1)*u),Gi(n*u));return new Nl(h,m)}function C_(i){const n=ie(i.getNorth()),o=ie(i.getSouth()),u=Math.cos(n),h=Math.cos(o),m=Math.sin(n),v=Math.sin(o),x=i.getWest(),S=i.getEast();return[ld(h,v,x),ld(h,v,S),ld(u,m,S),ld(u,m,x)]}function ld(i,n,o,u=Cs){return o=ie(o),[i*Math.sin(o)*u,-n*u,i*Math.cos(o)*u]}function cd(i,n,o){return ld(Math.cos(ie(i)),Math.sin(ie(i)),n,o)}function Af(i,n,o,u){const h=1<<o.z,m=(i/gn+o.x)/h;return cd(Gi((n/gn+o.y)/h),ea(m),u)}function xg({min:i,max:n}){return HL/Math.max(n[0]-i[0],n[1]-i[1],n[2]-i[2])}const jE=new Float64Array(16);function Rf(i){const n=xg(i),o=EE(jE,[n,n,n]);return wf(o,o,((u=[])[0]=-(h=i.min)[0],u[1]=-h[1],u[2]=-h[2],u));var u,h}function T_(i){const n=(u=i.min,(o=jE)[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=u[0],o[13]=u[1],o[14]=u[2],o[15]=1,o);var o,u;const h=1/xg(i);return Gc(n,n,[h,h,h])}function UE(i,n,o,u,h){const m=function(S){const E=gn/(2*Math.PI);return S/(2*Math.PI)/E}(o),v=[i,n,-o/(2*Math.PI)],x=Xa(new Float64Array(16));return wf(x,x,v),Gc(x,x,[m,m,m]),g_(x,x,ie(-h)),vg(x,x,ie(-u)),x}function ud(i){return He(S_,$E,i)}function VE(i,n){const o=cd(n.lat,n.lng),u=function(G){const Y=cd(G._center.lat,G._center.lng);let ae=__([],sd(0,1,0),Y);const ve=CE([],-G.angle,Y);ae=ii(ae,ae,ve),CE(ve,-G._pitch,ae);const Ce=so([],Y);return Qo(Ce,Ce,yg(G.cameraToCenterDistance/G.pixelsPerMeter)),ii(Ce,Ce,ve),Js([],Y,Ce)}(i);return v=(h=y_([],u,o))[0],x=h[1],S=h[2],E=(m=o)[0],R=m[1],z=m[2],H=(L=Math.sqrt(v*v+x*x+S*S)*Math.sqrt(E*E+R*R+z*z))&&Sa(h,m)/L,Math.acos(Math.min(Math.max(H,-1),1));var h,m,v,x,S,E,R,z,L,H}function I_(i,n){return VE(i,n)>Math.PI/2*1.01}const HE=ie(85),ZL=Math.cos(HE),XL=Math.sin(HE),Of=63710088e-1,GE=2*Math.PI*Of;class jl{constructor(n,o){if(isNaN(n)||isNaN(o))throw new Error(`Invalid LngLat object: (${n}, ${o})`);if(this.lng=+n,this.lat=+o,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new jl(Be(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(n){const o=Math.PI/180,u=this.lat*o,h=n.lat*o,m=Math.sin(u)*Math.sin(h)+Math.cos(u)*Math.cos(h)*Math.cos((n.lng-this.lng)*o);return Of*Math.acos(Math.min(m,1))}toBounds(n=0){const o=360*n/40075017,u=o/Math.cos(Math.PI/180*this.lat);return new Nl(new jl(this.lng-u,this.lat-o),new jl(this.lng+u,this.lat+o))}toEcef(n){const o=yg(n);return cd(this.lat,this.lng,Cs+o)}static convert(n){if(n instanceof jl)return n;if(Array.isArray(n)&&(n.length===2||n.length===3))return new jl(Number(n[0]),Number(n[1]));if(!Array.isArray(n)&&typeof n=="object"&&n!==null)return new jl(Number("lng"in n?n.lng:n.lon),Number(n.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}var br=jl;function M_(i){return GE*Math.cos(i*Math.PI/180)}function Is(i){return(180+i)/360}function Ms(i){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+i*Math.PI/360)))/360}function Ya(i,n){return i/M_(n)}function ea(i){return 360*i-180}function Gi(i){return 360/Math.PI*Math.atan(Math.exp((180-360*i)*Math.PI/180))-90}function WE(i,n){return i*M_(Gi(n))}const Wi=85.051129;function qE(i){return 1/Math.cos(i*Math.PI/180)}class dd{constructor(n,o,u=0){this.x=+n,this.y=+o,this.z=+u}static fromLngLat(n,o=0){const u=br.convert(n);return new dd(Is(u.lng),Ms(u.lat),Ya(o,u.lat))}toLngLat(){return new br(ea(this.x),Gi(this.y))}toAltitude(){return WE(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/GE*qE(Gi(this.y))}}function P_(i,n,o,u,h,m,v,x,S){const E=(n+u)/2,R=(o+h)/2,z=new ee(E,R);x(z),function(L,H,G,Y,ae,ve){const Ce=G-ae,ye=Y-ve;return Math.abs((Y-H)*Ce-(G-L)*ye)/Math.hypot(Ce,ye)}(z.x,z.y,m.x,m.y,v.x,v.y)>=S?(P_(i,n,o,E,R,m,z,x,S),P_(i,E,R,u,h,z,v,x,S)):i.push(v)}function ZE(i,n,o){let u=i[0],h=u.x,m=u.y;n(u);const v=[u];for(let x=1;x<i.length;x++){const S=i[x],{x:E,y:R}=S;n(S),P_(v,h,m,E,R,u,S,n,o),h=E,m=R,u=S}return v}function A_(i,n,o,u){if(u(n,o)){const h=n.add(o)._mult(.5);A_(i,n,h,u),A_(i,h,o,u)}else i.push(o)}function KL(i,n){let o=i[0];const u=[o];for(let h=1;h<i.length;h++){const m=i[h];A_(u,o,m,n),o=m}return u}const R_=Math.pow(2,14)-1,XE=-R_-1;function YL(i,n){const o=Math.round(i.x*n),u=Math.round(i.y*n);return i.x=pe(o,XE,R_),i.y=pe(u,XE,R_),(o<i.x||o>i.x+1||u<i.y||u>i.y+1)&&Ct("Geometry exceeds allowed extent, reduce your vector tile buffer size"),i}function Qs(i,n,o){const u=i.loadGeometry(),h=i.extent,m=gn/h;if(n&&o&&o.projection.isReprojectedInTileSpace){const v=1<<n.z,{scale:x,x:S,y:E,projection:R}=o,z=L=>{const H=ea((n.x+L.x/h)/v),G=Gi((n.y+L.y/h)/v),Y=R.project(H,G);L.x=(Y.x*x-S)*h,L.y=(Y.y*x-E)*h};for(let L=0;L<u.length;L++)if(i.type!==1)u[L]=ZE(u[L],z,1);else{const H=[];for(const G of u[L])G.x<0||G.x>=h||G.y<0||G.y>=h||(z(G),H.push(G));u[L]=H}}for(const v of u)for(const x of v)YL(x,m);return u}function Xc(i,n){return{type:i.type,id:i.id,properties:i.properties,geometry:n?Qs(i):[]}}function bg(i,n,o,u,h){i.emplaceBack(2*n+(u+1)/2,2*o+(h+1)/2)}function wg(i,n,o){i.emplaceBack(n.x,n.y,n.z,o[0]*16384,o[1]*16384,o[2]*16384)}class O_{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(o=>o.id),this.index=n.index,this.hasPattern=!1,this.projection=n.projection,this.layoutVertexArray=new Pt,this.indexArray=new cn,this.segments=new si,this.programConfigurations=new Vc(n.layers,n.zoom),this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(n,o,u,h){const m=this.layers[0],v=[];let x=null;m.type==="circle"&&(x=m.layout.get("circle-sort-key"));for(const{feature:E,id:R,index:z,sourceLayerIndex:L}of n){const H=this.layers[0]._featureFilter.needGeometry,G=Xc(E,H);if(!this.layers[0]._featureFilter.filter(new O(this.zoom),G,u))continue;const Y=x?x.evaluate(G,{},u):void 0,ae={id:R,properties:E.properties,type:E.type,sourceLayerIndex:L,index:z,geometry:H?G.geometry:Qs(E,u,h),patterns:{},sortKey:Y};v.push(ae)}x&&v.sort((E,R)=>E.sortKey-R.sortKey);let S=null;h.projection.name==="globe"&&(this.globeExtVertexArray=new zt,S=h.projection);for(const E of v){const{geometry:R,index:z,sourceLayerIndex:L}=E,H=n[z].feature;this.addFeature(E,R,z,o.availableImages,u,S),o.featureIndex.insert(H,R,z,L,this.index)}}update(n,o,u,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,o,this.stateDependentLayers,u,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,$L.members),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=n.createVertexBuffer(this.globeExtVertexArray,FL.members))),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(n,o,u,h,m,v){for(const x of o)for(const S of x){const E=S.x,R=S.y;if(E<0||E>=gn||R<0||R>=gn)continue;if(v){const H=v.projectTilePoint(E,R,m),G=v.upVector(m,E,R),Y=this.globeExtVertexArray;wg(Y,H,G),wg(Y,H,G),wg(Y,H,G),wg(Y,H,G)}const z=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,n.sortKey),L=z.vertexLength;bg(this.layoutVertexArray,E,R,-1,-1),bg(this.layoutVertexArray,E,R,1,-1),bg(this.layoutVertexArray,E,R,1,1),bg(this.layoutVertexArray,E,R,-1,1),this.indexArray.emplaceBack(L,L+1,L+2),this.indexArray.emplaceBack(L,L+2,L+3),z.vertexLength+=4,z.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,u,{},h,m)}}function KE(i,n){for(let o=0;o<i.length;o++)if(Kc(n,i[o]))return!0;for(let o=0;o<n.length;o++)if(Kc(i,n[o]))return!0;return!!z_(i,n)}function JL(i,n,o){return!!Kc(i,n)||!!k_(n,i,o)}function YE(i,n){if(i.length===1)return QE(n,i[0]);for(let o=0;o<n.length;o++){const u=n[o];for(let h=0;h<u.length;h++)if(Kc(i,u[h]))return!0}for(let o=0;o<i.length;o++)if(QE(n,i[o]))return!0;for(let o=0;o<n.length;o++)if(z_(i,n[o]))return!0;return!1}function QL(i,n,o){if(i.length>1){if(z_(i,n))return!0;for(let u=0;u<n.length;u++)if(k_(n[u],i,o))return!0}for(let u=0;u<i.length;u++)if(k_(i[u],n,o))return!0;return!1}function z_(i,n){if(i.length===0||n.length===0)return!1;for(let o=0;o<i.length-1;o++){const u=i[o],h=i[o+1];for(let m=0;m<n.length-1;m++)if(eD(u,h,n[m],n[m+1]))return!0}return!1}function eD(i,n,o,u){return Qt(i,o,u)!==Qt(n,o,u)&&Qt(i,n,o)!==Qt(i,n,u)}function k_(i,n,o){const u=o*o;if(n.length===1)return i.distSqr(n[0])<u;for(let h=1;h<n.length;h++)if(JE(i,n[h-1],n[h])<u)return!0;return!1}function JE(i,n,o){const u=n.distSqr(o);if(u===0)return i.distSqr(n);const h=((i.x-n.x)*(o.x-n.x)+(i.y-n.y)*(o.y-n.y))/u;return i.distSqr(h<0?n:h>1?o:o.sub(n)._mult(h)._add(n))}function QE(i,n){let o,u,h,m=!1;for(let v=0;v<i.length;v++){o=i[v];for(let x=0,S=o.length-1;x<o.length;S=x++)u=o[x],h=o[S],u.y>n.y!=h.y>n.y&&n.x<(h.x-u.x)*(n.y-u.y)/(h.y-u.y)+u.x&&(m=!m)}return m}function Kc(i,n){let o=!1;for(let u=0,h=i.length-1;u<i.length;h=u++){const m=i[u],v=i[h];m.y>n.y!=v.y>n.y&&n.x<(v.x-m.x)*(n.y-m.y)/(v.y-m.y)+m.x&&(o=!o)}return o}function eC(i,n,o,u,h){for(const v of i)if(n<=v.x&&o<=v.y&&u>=v.x&&h>=v.y)return!0;const m=[new ee(n,o),new ee(n,h),new ee(u,h),new ee(u,o)];if(i.length>2){for(const v of m)if(Kc(i,v))return!0}for(let v=0;v<i.length-1;v++)if(tD(i[v],i[v+1],m))return!0;return!1}function tD(i,n,o){const u=o[0],h=o[2];if(i.x<u.x&&n.x<u.x||i.x>h.x&&n.x>h.x||i.y<u.y&&n.y<u.y||i.y>h.y&&n.y>h.y)return!1;const m=Qt(i,n,o[0]);return m!==Qt(i,n,o[1])||m!==Qt(i,n,o[2])||m!==Qt(i,n,o[3])}function hd(i,n,o){const u=n.paint.get(i).value;return u.kind==="constant"?u.value:o.programConfigurations.get(n.id).getMaxValue(i)}function Sg(i){return Math.sqrt(i[0]*i[0]+i[1]*i[1])}function tC(i,n,o,u,h){if(!n[0]&&!n[1])return i;const m=ee.convert(n)._mult(h);o==="viewport"&&m._rotate(-u);const v=[];for(let x=0;x<i.length;x++)v.push(i[x].sub(m));return v}function nC(i,n,o,u){const h=ee.convert(i)._mult(u);return n==="viewport"&&h._rotate(-o),h}Jt(O_,"CircleBucket",{omit:["layers"]});const nD=new be({"circle-sort-key":new se(nt.layout_circle["circle-sort-key"])});var rD={paint:new be({"circle-radius":new se(nt.paint_circle["circle-radius"]),"circle-color":new se(nt.paint_circle["circle-color"]),"circle-blur":new se(nt.paint_circle["circle-blur"]),"circle-opacity":new se(nt.paint_circle["circle-opacity"]),"circle-translate":new K(nt.paint_circle["circle-translate"]),"circle-translate-anchor":new K(nt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new K(nt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new K(nt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new se(nt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new se(nt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new se(nt.paint_circle["circle-stroke-opacity"])}),layout:nD};function rC(i,n,o,u,h,m,v,x,S){if(m&&i.queryGeometry.isAboveHorizon)return!1;m&&(S*=i.pixelToTileUnitsFactor);const E=i.tileID.canonical,R=o.projection.upVectorScale(E,o.center.lat,o.worldSize).metersToTile;for(const z of n)for(const L of z){const H=L.add(x),G=h&&o.elevation?o.elevation.exaggeration()*h.getElevationAt(H.x,H.y,!0):0,Y=o.projection.projectTilePoint(H.x,H.y,E);if(G>0){const ye=o.projection.upVector(E,H.x,H.y);Y.x+=ye[0]*R*G,Y.y+=ye[1]*R*G,Y.z+=ye[2]*R*G}const ae=m?H:iD(Y.x,Y.y,Y.z,u),ve=m?i.tilespaceRays.map(ye=>aD(ye,G)):i.queryGeometry.screenGeometry,Ce=Wc([],[Y.x,Y.y,Y.z,1],u);if(!v&&m?S*=Ce[3]/o.cameraToCenterDistance:v&&!m&&(S*=o.cameraToCenterDistance/Ce[3]),m){const ye=Gi((L.y/gn+E.y)/(1<<E.z));S/=o.projection.pixelsPerMeter(ye,1)/Ya(1,ye)}if(JL(ve,ae,S))return!0}return!1}function iD(i,n,o,u){const h=Wc([],[i,n,o,1],u);return new ee(h[0]/h[3],h[1]/h[3])}const iC=sd(0,0,0),oD=sd(0,0,1);function aD(i,n){const o=v_();return iC[2]=n,i.intersectsPlane(iC,oD,o),new ee(o[0],o[1])}class oC extends O_{}function aC(i,{width:n,height:o},u,h){if(h){if(h instanceof Uint8ClampedArray)h=new Uint8Array(h.buffer);else if(h.length!==n*o*u)throw new RangeError("mismatched image size")}else h=new Uint8Array(n*o*u);return i.width=n,i.height=o,i.data=h,i}function sC(i,n,o){const{width:u,height:h}=n;u===i.width&&h===i.height||(L_(i,n,{x:0,y:0},{x:0,y:0},{width:Math.min(i.width,u),height:Math.min(i.height,h)},o),i.width=u,i.height=h,i.data=n.data)}function L_(i,n,o,u,h,m){if(h.width===0||h.height===0)return n;if(h.width>i.width||h.height>i.height||o.x>i.width-h.width||o.y>i.height-h.height)throw new RangeError("out of range source coordinates for image copy");if(h.width>n.width||h.height>n.height||u.x>n.width-h.width||u.y>n.height-h.height)throw new RangeError("out of range destination coordinates for image copy");const v=i.data,x=n.data;for(let S=0;S<h.height;S++){const E=((o.y+S)*i.width+o.x)*m,R=((u.y+S)*n.width+u.x)*m;for(let z=0;z<h.width*m;z++)x[R+z]=v[E+z]}return n}Jt(oC,"HeatmapBucket",{omit:["layers"]});class el{constructor(n,o){aC(this,n,1,o)}resize(n){sC(this,new el(n),1)}clone(){return new el({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,o,u,h,m){L_(n,o,u,h,m,1)}}class $o{constructor(n,o){aC(this,n,4,o)}resize(n){sC(this,new $o(n),4)}replace(n,o){o?this.data.set(n):this.data=n instanceof Uint8ClampedArray?new Uint8Array(n.buffer):n}clone(){return new $o({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,o,u,h,m){L_(n,o,u,h,m,4)}}Jt(el,"AlphaImage"),Jt($o,"RGBAImage");var sD={paint:new be({"heatmap-radius":new se(nt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new se(nt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new K(nt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new xe(nt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new K(nt.paint_heatmap["heatmap-opacity"])})};function D_(i){const n={},o=i.resolution||256,u=i.clips?i.clips.length:1,h=i.image||new $o({width:o,height:u}),m=(v,x,S)=>{n[i.evaluationKey]=S;const E=i.expression.evaluate(n);h.data[v+x+0]=Math.floor(255*E.r/E.a),h.data[v+x+1]=Math.floor(255*E.g/E.a),h.data[v+x+2]=Math.floor(255*E.b/E.a),h.data[v+x+3]=Math.floor(255*E.a)};if(i.clips)for(let v=0,x=0;v<u;++v,x+=4*o)for(let S=0,E=0;S<o;S++,E+=4){const R=S/(o-1),{start:z,end:L}=i.clips[v];m(x,E,z*(1-R)+L*R)}else for(let v=0,x=0;v<o;v++,x+=4)m(0,x,v/(o-1));return h}var lD={paint:new be({"hillshade-illumination-direction":new K(nt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new K(nt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new K(nt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new K(nt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new K(nt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new K(nt.paint_hillshade["hillshade-accent-color"])})};const cD=Ue([{name:"a_pos",components:2,type:"Int16"}],4),{members:uD}=cD;var $_={exports:{}};function Eg(i,n,o){o=o||2;var u,h,m,v,x,S,E,R=n&&n.length,z=R?n[0]*o:i.length,L=lC(i,0,z,o,!0),H=[];if(!L||L.next===L.prev)return H;if(R&&(L=function(Y,ae,ve,Ce){var ye,Ee,Ae,Pe=[];for(ye=0,Ee=ae.length;ye<Ee;ye++)(Ae=lC(Y,ae[ye]*Ce,ye<Ee-1?ae[ye+1]*Ce:Y.length,Ce,!1))===Ae.next&&(Ae.steiner=!0),Pe.push(yD(Ae));for(Pe.sort(mD),ye=0;ye<Pe.length;ye++)ve=gD(Pe[ye],ve);return ve}(i,n,L,o)),i.length>80*o){u=m=i[0],h=v=i[1];for(var G=o;G<z;G+=o)(x=i[G])<u&&(u=x),(S=i[G+1])<h&&(h=S),x>m&&(m=x),S>v&&(v=S);E=(E=Math.max(m-u,v-h))!==0?32767/E:0}return zf(L,H,o,u,h,E,0),H}function lC(i,n,o,u,h){var m,v;if(h===N_(i,n,o,u)>0)for(m=n;m<o;m+=u)v=dC(m,i[m],i[m+1],v);else for(m=o-u;m>=n;m-=u)v=dC(m,i[m],i[m+1],v);return v&&Cg(v,v.next)&&(Lf(v),v=v.next),v}function Yc(i,n){if(!i)return i;n||(n=i);var o,u=i;do if(o=!1,u.steiner||!Cg(u,u.next)&&li(u.prev,u,u.next)!==0)u=u.next;else{if(Lf(u),(u=n=u.prev)===u.next)break;o=!0}while(o||u!==n);return n}function zf(i,n,o,u,h,m,v){if(i){!v&&m&&function(R,z,L,H){var G=R;do G.z===0&&(G.z=F_(G.x,G.y,z,L,H)),G.prevZ=G.prev,G.nextZ=G.next,G=G.next;while(G!==R);G.prevZ.nextZ=null,G.prevZ=null,function(Y){var ae,ve,Ce,ye,Ee,Ae,Pe,Ye,Ze=1;do{for(ve=Y,Y=null,Ee=null,Ae=0;ve;){for(Ae++,Ce=ve,Pe=0,ae=0;ae<Ze&&(Pe++,Ce=Ce.nextZ);ae++);for(Ye=Ze;Pe>0||Ye>0&&Ce;)Pe!==0&&(Ye===0||!Ce||ve.z<=Ce.z)?(ye=ve,ve=ve.nextZ,Pe--):(ye=Ce,Ce=Ce.nextZ,Ye--),Ee?Ee.nextZ=ye:Y=ye,ye.prevZ=Ee,Ee=ye;ve=Ce}Ee.nextZ=null,Ze*=2}while(Ae>1)}(G)}(i,u,h,m);for(var x,S,E=i;i.prev!==i.next;)if(x=i.prev,S=i.next,m?hD(i,u,h,m):dD(i))n.push(x.i/o|0),n.push(i.i/o|0),n.push(S.i/o|0),Lf(i),i=S.next,E=S.next;else if((i=S)===E){v?v===1?zf(i=fD(Yc(i),n,o),n,o,u,h,m,2):v===2&&pD(i,n,o,u,h,m):zf(Yc(i),n,o,u,h,m,1);break}}}function dD(i){var n=i.prev,o=i,u=i.next;if(li(n,o,u)>=0)return!1;for(var h=n.x,m=o.x,v=u.x,x=n.y,S=o.y,E=u.y,R=h<m?h<v?h:v:m<v?m:v,z=x<S?x<E?x:E:S<E?S:E,L=h>m?h>v?h:v:m>v?m:v,H=x>S?x>E?x:E:S>E?S:E,G=u.next;G!==n;){if(G.x>=R&&G.x<=L&&G.y>=z&&G.y<=H&&fd(h,x,m,S,v,E,G.x,G.y)&&li(G.prev,G,G.next)>=0)return!1;G=G.next}return!0}function hD(i,n,o,u){var h=i.prev,m=i,v=i.next;if(li(h,m,v)>=0)return!1;for(var x=h.x,S=m.x,E=v.x,R=h.y,z=m.y,L=v.y,H=x<S?x<E?x:E:S<E?S:E,G=R<z?R<L?R:L:z<L?z:L,Y=x>S?x>E?x:E:S>E?S:E,ae=R>z?R>L?R:L:z>L?z:L,ve=F_(H,G,n,o,u),Ce=F_(Y,ae,n,o,u),ye=i.prevZ,Ee=i.nextZ;ye&&ye.z>=ve&&Ee&&Ee.z<=Ce;){if(ye.x>=H&&ye.x<=Y&&ye.y>=G&&ye.y<=ae&&ye!==h&&ye!==v&&fd(x,R,S,z,E,L,ye.x,ye.y)&&li(ye.prev,ye,ye.next)>=0||(ye=ye.prevZ,Ee.x>=H&&Ee.x<=Y&&Ee.y>=G&&Ee.y<=ae&&Ee!==h&&Ee!==v&&fd(x,R,S,z,E,L,Ee.x,Ee.y)&&li(Ee.prev,Ee,Ee.next)>=0))return!1;Ee=Ee.nextZ}for(;ye&&ye.z>=ve;){if(ye.x>=H&&ye.x<=Y&&ye.y>=G&&ye.y<=ae&&ye!==h&&ye!==v&&fd(x,R,S,z,E,L,ye.x,ye.y)&&li(ye.prev,ye,ye.next)>=0)return!1;ye=ye.prevZ}for(;Ee&&Ee.z<=Ce;){if(Ee.x>=H&&Ee.x<=Y&&Ee.y>=G&&Ee.y<=ae&&Ee!==h&&Ee!==v&&fd(x,R,S,z,E,L,Ee.x,Ee.y)&&li(Ee.prev,Ee,Ee.next)>=0)return!1;Ee=Ee.nextZ}return!0}function fD(i,n,o){var u=i;do{var h=u.prev,m=u.next.next;!Cg(h,m)&&cC(h,u,u.next,m)&&kf(h,m)&&kf(m,h)&&(n.push(h.i/o|0),n.push(u.i/o|0),n.push(m.i/o|0),Lf(u),Lf(u.next),u=i=m),u=u.next}while(u!==i);return Yc(u)}function pD(i,n,o,u,h,m){var v=i;do{for(var x=v.next.next;x!==v.prev;){if(v.i!==x.i&&_D(v,x)){var S=uC(v,x);return v=Yc(v,v.next),S=Yc(S,S.next),zf(v,n,o,u,h,m,0),void zf(S,n,o,u,h,m,0)}x=x.next}v=v.next}while(v!==i)}function mD(i,n){return i.x-n.x}function gD(i,n){var o=function(h,m){var v,x=m,S=h.x,E=h.y,R=-1/0;do{if(E<=x.y&&E>=x.next.y&&x.next.y!==x.y){var z=x.x+(E-x.y)*(x.next.x-x.x)/(x.next.y-x.y);if(z<=S&&z>R&&(R=z,v=x.x<x.next.x?x:x.next,z===S))return v}x=x.next}while(x!==m);if(!v)return null;var L,H=v,G=v.x,Y=v.y,ae=1/0;x=v;do S>=x.x&&x.x>=G&&S!==x.x&&fd(E<Y?S:R,E,G,Y,E<Y?R:S,E,x.x,x.y)&&(L=Math.abs(E-x.y)/(S-x.x),kf(x,h)&&(L<ae||L===ae&&(x.x>v.x||x.x===v.x&&vD(v,x)))&&(v=x,ae=L)),x=x.next;while(x!==H);return v}(i,n);if(!o)return n;var u=uC(o,i);return Yc(u,u.next),Yc(o,o.next)}function vD(i,n){return li(i.prev,i,n.prev)<0&&li(n.next,i,i.next)<0}function F_(i,n,o,u,h){return(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=(i-o)*h|0)|i<<8))|i<<4))|i<<2))|i<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=(n-u)*h|0)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function yD(i){var n=i,o=i;do(n.x<o.x||n.x===o.x&&n.y<o.y)&&(o=n),n=n.next;while(n!==i);return o}function fd(i,n,o,u,h,m,v,x){return(h-v)*(n-x)>=(i-v)*(m-x)&&(i-v)*(u-x)>=(o-v)*(n-x)&&(o-v)*(m-x)>=(h-v)*(u-x)}function _D(i,n){return i.next.i!==n.i&&i.prev.i!==n.i&&!function(o,u){var h=o;do{if(h.i!==o.i&&h.next.i!==o.i&&h.i!==u.i&&h.next.i!==u.i&&cC(h,h.next,o,u))return!0;h=h.next}while(h!==o);return!1}(i,n)&&(kf(i,n)&&kf(n,i)&&function(o,u){var h=o,m=!1,v=(o.x+u.x)/2,x=(o.y+u.y)/2;do h.y>x!=h.next.y>x&&h.next.y!==h.y&&v<(h.next.x-h.x)*(x-h.y)/(h.next.y-h.y)+h.x&&(m=!m),h=h.next;while(h!==o);return m}(i,n)&&(li(i.prev,i,n.prev)||li(i,n.prev,n))||Cg(i,n)&&li(i.prev,i,i.next)>0&&li(n.prev,n,n.next)>0)}function li(i,n,o){return(n.y-i.y)*(o.x-n.x)-(n.x-i.x)*(o.y-n.y)}function Cg(i,n){return i.x===n.x&&i.y===n.y}function cC(i,n,o,u){var h=Ig(li(i,n,o)),m=Ig(li(i,n,u)),v=Ig(li(o,u,i)),x=Ig(li(o,u,n));return h!==m&&v!==x||!(h!==0||!Tg(i,o,n))||!(m!==0||!Tg(i,u,n))||!(v!==0||!Tg(o,i,u))||!(x!==0||!Tg(o,n,u))}function Tg(i,n,o){return n.x<=Math.max(i.x,o.x)&&n.x>=Math.min(i.x,o.x)&&n.y<=Math.max(i.y,o.y)&&n.y>=Math.min(i.y,o.y)}function Ig(i){return i>0?1:i<0?-1:0}function kf(i,n){return li(i.prev,i,i.next)<0?li(i,n,i.next)>=0&&li(i,i.prev,n)>=0:li(i,n,i.prev)<0||li(i,i.next,n)<0}function uC(i,n){var o=new B_(i.i,i.x,i.y),u=new B_(n.i,n.x,n.y),h=i.next,m=n.prev;return i.next=n,n.prev=i,o.next=h,h.prev=o,u.next=o,o.prev=u,m.next=u,u.prev=m,u}function dC(i,n,o,u){var h=new B_(i,n,o);return u?(h.next=u.next,h.prev=u,u.next.prev=h,u.next=h):(h.prev=h,h.next=h),h}function Lf(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function B_(i,n,o){this.i=i,this.x=n,this.y=o,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function N_(i,n,o,u){for(var h=0,m=n,v=o-u;m<o;m+=u)h+=(i[v]-i[m])*(i[m+1]+i[v+1]),v=m;return h}$_.exports=Eg,$_.exports.default=Eg,Eg.deviation=function(i,n,o,u){var h=n&&n.length,m=Math.abs(N_(i,0,h?n[0]*o:i.length,o));if(h)for(var v=0,x=n.length;v<x;v++)m-=Math.abs(N_(i,n[v]*o,v<x-1?n[v+1]*o:i.length,o));var S=0;for(v=0;v<u.length;v+=3){var E=u[v]*o,R=u[v+1]*o,z=u[v+2]*o;S+=Math.abs((i[E]-i[z])*(i[R+1]-i[E+1])-(i[E]-i[R])*(i[z+1]-i[E+1]))}return m===0&&S===0?0:Math.abs((S-m)/m)},Eg.flatten=function(i){for(var n=i[0][0].length,o={vertices:[],holes:[],dimensions:n},u=0,h=0;h<i.length;h++){for(var m=0;m<i[h].length;m++)for(var v=0;v<n;v++)o.vertices.push(i[h][m][v]);h>0&&o.holes.push(u+=i[h-1].length)}return o};var j_=V($_.exports);function xD(i,n,o,u,h){hC(i,n,o||0,u||i.length-1,h||bD)}function hC(i,n,o,u,h){for(;u>o;){if(u-o>600){var m=u-o+1,v=n-o+1,x=Math.log(m),S=.5*Math.exp(2*x/3),E=.5*Math.sqrt(x*S*(m-S)/m)*(v-m/2<0?-1:1);hC(i,n,Math.max(o,Math.floor(n-v*S/m+E)),Math.min(u,Math.floor(n+(m-v)*S/m+E)),h)}var R=i[n],z=o,L=u;for(Df(i,o,n),h(i[u],R)>0&&Df(i,o,u);z<L;){for(Df(i,z,L),z++,L--;h(i[z],R)<0;)z++;for(;h(i[L],R)>0;)L--}h(i[o],R)===0?Df(i,o,L):Df(i,++L,u),L<=n&&(o=L+1),n<=L&&(u=L-1)}}function Df(i,n,o){var u=i[n];i[n]=i[o],i[o]=u}function bD(i,n){return i<n?-1:i>n?1:0}function U_(i,n){const o=i.length;if(o<=1)return[i];const u=[];let h,m;for(let v=0;v<o;v++){const x=Vt(i[v]);x!==0&&(i[v].area=Math.abs(x),m===void 0&&(m=x<0),m===x<0?(h&&u.push(h),h=[i[v]]):h.push(i[v]))}if(h&&u.push(h),n>1)for(let v=0;v<u.length;v++)u[v].length<=n||(xD(u[v],n,1,u[v].length-1,wD),u[v]=u[v].slice(0,n));return u}function wD(i,n){return n.area-i.area}function V_(i,n,o){const u=o.patternDependencies;let h=!1;for(const m of n){const v=m.paint.get(`${i}-pattern`);v.isConstant()||(h=!0);const x=v.constantOr(null);x&&(h=!0,u[x]=!0)}return h}function H_(i,n,o,u,h){const m=h.patternDependencies;for(const v of n){const x=v.paint.get(`${i}-pattern`).value;if(x.kind!=="constant"){let S=x.evaluate({zoom:u},o,{},h.availableImages);S=S&&S.name?S.name:S,m[S]=!0,o.patterns[v.id]=S}}return o}class Mg{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(o=>o.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Pt,this.indexArray=new cn,this.indexArray2=new Ti,this.programConfigurations=new Vc(n.layers,n.zoom),this.segments=new si,this.segments2=new si,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id),this.projection=n.projection}populate(n,o,u,h){this.hasPattern=V_("fill",this.layers,o);const m=this.layers[0].layout.get("fill-sort-key"),v=[];for(const{feature:x,id:S,index:E,sourceLayerIndex:R}of n){const z=this.layers[0]._featureFilter.needGeometry,L=Xc(x,z);if(!this.layers[0]._featureFilter.filter(new O(this.zoom),L,u))continue;const H=m?m.evaluate(L,{},u,o.availableImages):void 0,G={id:S,properties:x.properties,type:x.type,sourceLayerIndex:R,index:E,geometry:z?L.geometry:Qs(x,u,h),patterns:{},sortKey:H};v.push(G)}m&&v.sort((x,S)=>x.sortKey-S.sortKey);for(const x of v){const{geometry:S,index:E,sourceLayerIndex:R}=x;if(this.hasPattern){const z=H_("fill",this.layers,x,this.zoom,o);this.patternFeatures.push(z)}else this.addFeature(x,S,E,u,{},o.availableImages);o.featureIndex.insert(n[E].feature,S,E,R,this.index)}}update(n,o,u,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,o,this.stateDependentLayers,u,h)}addFeatures(n,o,u,h,m){for(const v of this.patternFeatures)this.addFeature(v,v.geometry,v.index,o,u,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,uD),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.indexBuffer2=n.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(n,o,u,h,m,v=[]){for(const x of U_(o,500)){let S=0;for(const G of x)S+=G.length;const E=this.segments.prepareSegment(S,this.layoutVertexArray,this.indexArray),R=E.vertexLength,z=[],L=[];for(const G of x){if(G.length===0)continue;G!==x[0]&&L.push(z.length/2);const Y=this.segments2.prepareSegment(G.length,this.layoutVertexArray,this.indexArray2),ae=Y.vertexLength;this.layoutVertexArray.emplaceBack(G[0].x,G[0].y),this.indexArray2.emplaceBack(ae+G.length-1,ae),z.push(G[0].x),z.push(G[0].y);for(let ve=1;ve<G.length;ve++)this.layoutVertexArray.emplaceBack(G[ve].x,G[ve].y),this.indexArray2.emplaceBack(ae+ve-1,ae+ve),z.push(G[ve].x),z.push(G[ve].y);Y.vertexLength+=G.length,Y.primitiveLength+=G.length}const H=j_(z,L);for(let G=0;G<H.length;G+=3)this.indexArray.emplaceBack(R+H[G],R+H[G+1],R+H[G+2]);E.vertexLength+=S,E.primitiveLength+=H.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,u,m,v,h)}}Jt(Mg,"FillBucket",{omit:["layers","patternFeatures"]});const SD=new be({"fill-sort-key":new se(nt.layout_fill["fill-sort-key"])});var ED={paint:new be({"fill-antialias":new K(nt.paint_fill["fill-antialias"]),"fill-opacity":new se(nt.paint_fill["fill-opacity"]),"fill-color":new se(nt.paint_fill["fill-color"]),"fill-outline-color":new se(nt.paint_fill["fill-outline-color"]),"fill-translate":new K(nt.paint_fill["fill-translate"]),"fill-translate-anchor":new K(nt.paint_fill["fill-translate-anchor"]),"fill-pattern":new se(nt.paint_fill["fill-pattern"])}),layout:SD};const CD=Ue([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),TD=Ue([{name:"a_centroid_pos",components:2,type:"Uint16"}]),ID=Ue([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:MD}=CD;var Pg={},PD=Q,fC=pd;function pd(i,n,o,u,h){this.properties={},this.extent=o,this.type=0,this._pbf=i,this._geometry=-1,this._keys=u,this._values=h,i.readFields(AD,this,n)}function AD(i,n,o){i==1?n.id=o.readVarint():i==2?function(u,h){for(var m=u.readVarint()+u.pos;u.pos<m;){var v=h._keys[u.readVarint()],x=h._values[u.readVarint()];h.properties[v]=x}}(o,n):i==3?n.type=o.readVarint():i==4&&(n._geometry=o.pos)}function RD(i){for(var n,o,u=0,h=0,m=i.length,v=m-1;h<m;v=h++)u+=((o=i[v]).x-(n=i[h]).x)*(n.y+o.y);return u}pd.types=["Unknown","Point","LineString","Polygon"],pd.prototype.loadGeometry=function(){var i=this._pbf;i.pos=this._geometry;for(var n,o=i.readVarint()+i.pos,u=1,h=0,m=0,v=0,x=[];i.pos<o;){if(h<=0){var S=i.readVarint();u=7&S,h=S>>3}if(h--,u===1||u===2)m+=i.readSVarint(),v+=i.readSVarint(),u===1&&(n&&x.push(n),n=[]),n.push(new PD(m,v));else{if(u!==7)throw new Error("unknown command "+u);n&&n.push(n[0].clone())}}return n&&x.push(n),x},pd.prototype.bbox=function(){var i=this._pbf;i.pos=this._geometry;for(var n=i.readVarint()+i.pos,o=1,u=0,h=0,m=0,v=1/0,x=-1/0,S=1/0,E=-1/0;i.pos<n;){if(u<=0){var R=i.readVarint();o=7&R,u=R>>3}if(u--,o===1||o===2)(h+=i.readSVarint())<v&&(v=h),h>x&&(x=h),(m+=i.readSVarint())<S&&(S=m),m>E&&(E=m);else if(o!==7)throw new Error("unknown command "+o)}return[v,S,x,E]},pd.prototype.toGeoJSON=function(i,n,o){var u,h,m=this.extent*Math.pow(2,o),v=this.extent*i,x=this.extent*n,S=this.loadGeometry(),E=pd.types[this.type];function R(H){for(var G=0;G<H.length;G++){var Y=H[G];H[G]=[360*(Y.x+v)/m-180,360/Math.PI*Math.atan(Math.exp((180-360*(Y.y+x)/m)*Math.PI/180))-90]}}switch(this.type){case 1:var z=[];for(u=0;u<S.length;u++)z[u]=S[u][0];R(S=z);break;case 2:for(u=0;u<S.length;u++)R(S[u]);break;case 3:for(S=function(H){var G=H.length;if(G<=1)return[H];for(var Y,ae,ve=[],Ce=0;Ce<G;Ce++){var ye=RD(H[Ce]);ye!==0&&(ae===void 0&&(ae=ye<0),ae===ye<0?(Y&&ve.push(Y),Y=[H[Ce]]):Y.push(H[Ce]))}return Y&&ve.push(Y),ve}(S),u=0;u<S.length;u++)for(h=0;h<S[u].length;h++)R(S[u][h])}S.length===1?S=S[0]:E="Multi"+E;var L={type:"Feature",geometry:{type:E,coordinates:S},properties:this.properties};return"id"in this&&(L.id=this.id),L};var OD=fC,pC=mC;function mC(i,n){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=i,this._keys=[],this._values=[],this._features=[],i.readFields(zD,this,n),this.length=this._features.length}function zD(i,n,o){i===15?n.version=o.readVarint():i===1?n.name=o.readString():i===5?n.extent=o.readVarint():i===2?n._features.push(o.pos):i===3?n._keys.push(o.readString()):i===4&&n._values.push(function(u){for(var h=null,m=u.readVarint()+u.pos;u.pos<m;){var v=u.readVarint()>>3;h=v===1?u.readString():v===2?u.readFloat():v===3?u.readDouble():v===4?u.readVarint64():v===5?u.readVarint():v===6?u.readSVarint():v===7?u.readBoolean():null}return h}(o))}mC.prototype.feature=function(i){if(i<0||i>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[i];var n=this._pbf.readVarint()+this._pbf.pos;return new OD(this._pbf,n,this.extent,this._keys,this._values)};var kD=pC;function LD(i,n,o){if(i===3){var u=new kD(o,o.readVarint()+o.pos);u.length&&(n[u.name]=u)}}var G_=Pg.VectorTile=function(i,n){this.layers=i.readFields(LD,{},n)},Ag=Pg.VectorTileFeature=fC;function Rg(i,n,o,u){const h=[],m=u===0?(v,x,S,E,R,z)=>{v.push(new ee(z,S+(z-x)/(E-x)*(R-S)))}:(v,x,S,E,R,z)=>{v.push(new ee(x+(z-S)/(R-S)*(E-x),z))};for(const v of i){const x=[];for(const S of v){if(S.length<=2)continue;const E=[];for(let L=0;L<S.length-1;L++){const H=S[L].x,G=S[L].y,Y=S[L+1].x,ae=S[L+1].y,ve=u===0?H:G,Ce=u===0?Y:ae;ve<n?Ce>n&&m(E,H,G,Y,ae,n):ve>o?Ce<o&&m(E,H,G,Y,ae,o):E.push(S[L]),Ce<n&&ve>=n&&m(E,H,G,Y,ae,n),Ce>o&&ve<=o&&m(E,H,G,Y,ae,o)}let R=S[S.length-1];const z=u===0?R.x:R.y;z>=n&&z<=o&&E.push(R),E.length&&(R=E[E.length-1],E[0].x===R.x&&E[0].y===R.y||E.push(E[0]),x.push(E))}x.length&&h.push(x)}return h}Pg.VectorTileLayer=pC;const DD=Ag.types,$D=Math.pow(2,13);function $f(i,n,o,u,h,m,v,x){i.emplaceBack((n<<1)+v,(o<<1)+m,(Math.floor(u*$D)<<1)+h,Math.round(x))}function Ff(i,n,o){i.emplaceBack(n.x,n.y,n.z,o[0]*16384,o[1]*16384,o[2]*16384)}class gC{constructor(){this.acc=new ee(0,0),this.polyCount=[]}startRing(n){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new ee(n.x,n.y),this.max=new ee(n.x,n.y))}append(n,o){this.currentPolyCount.edges++,this.acc._add(n);const u=this.min,h=this.max;n.x<u.x?u.x=n.x:n.x>h.x&&(h.x=n.x),n.y<u.y?u.y=n.y:n.y>h.y&&(h.y=n.y),((n.x===0||n.x===gn)&&n.x===o.x)!=((n.y===0||n.y===gn)&&n.y===o.y)&&this.processBorderOverlap(n,o),o.x<0!=n.x<0&&this.addBorderIntersection(0,Jn(o.y,n.y,(0-o.x)/(n.x-o.x))),o.x>gn!=n.x>gn&&this.addBorderIntersection(1,Jn(o.y,n.y,(gn-o.x)/(n.x-o.x))),o.y<0!=n.y<0&&this.addBorderIntersection(2,Jn(o.x,n.x,(0-o.y)/(n.y-o.y))),o.y>gn!=n.y>gn&&this.addBorderIntersection(3,Jn(o.x,n.x,(gn-o.y)/(n.y-o.y)))}addBorderIntersection(n,o){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const u=this.borders[n];o<u[0]&&(u[0]=o),o>u[1]&&(u[1]=o)}processBorderOverlap(n,o){if(n.x===o.x){if(n.y===o.y)return;const u=n.x===0?0:1;this.addBorderIntersection(u,o.y),this.addBorderIntersection(u,n.y)}else{const u=n.y===0?2:3;this.addBorderIntersection(u,o.x),this.addBorderIntersection(u,n.x)}}centroid(){const n=this.polyCount.reduce((o,u)=>o+u.edges,0);return n!==0?this.acc.div(n)._round():new ee(0,0)}span(){return new ee(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce((n,o)=>n+ +(o[0]!==Number.MAX_VALUE),0)}}class Bf{constructor(n){this.zoom=n.zoom,this.canonical=n.canonical,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(o=>o.id),this.index=n.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=n.projection,this.layoutVertexArray=new ht,this.centroidVertexArray=new Wa,this.indexArray=new cn,this.programConfigurations=new Vc(n.layers,n.zoom),this.segments=new si,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id),this.enableTerrain=n.enableTerrain}populate(n,o,u,h){this.features=[],this.hasPattern=V_("fill-extrusion",this.layers,o),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=function(m){const v=Math.exp(Math.PI*(1-m.y/(1<<m.z)*2));return 80150034*v/(v*v+1)/gn/(1<<m.z)}(u),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;for(const{feature:m,id:v,index:x,sourceLayerIndex:S}of n){const E=this.layers[0]._featureFilter.needGeometry,R=Xc(m,E);if(!this.layers[0]._featureFilter.filter(new O(this.zoom),R,u))continue;const z={id:v,sourceLayerIndex:S,index:x,geometry:E?R.geometry:Qs(m,u,h),properties:m.properties,type:m.type,patterns:{}},L=this.layoutVertexArray.length;this.hasPattern?this.features.push(H_("fill-extrusion",this.layers,z,this.zoom,o)):this.addFeature(z,z.geometry,x,u,{},o.availableImages,h),o.featureIndex.insert(m,z.geometry,x,S,this.index,L)}this.sortBorders()}addFeatures(n,o,u,h,m){for(const v of this.features){const{geometry:x}=v;this.addFeature(v,x,v.index,o,u,h,m)}this.sortBorders()}update(n,o,u,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,o,this.stateDependentLayers,u,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,MD),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=n.createVertexBuffer(this.layoutVertexExtArray,ID.members,!0))),this.programConfigurations.upload(n),this.uploaded=!0}uploadCentroid(n){this.centroidVertexArray.length!==0&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=n.createVertexBuffer(this.centroidVertexArray,TD.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(n,o,u,h,m,v,x){const S=[new ee(0,0),new ee(gn,gn)],E=x.projection,R=E.name==="globe",z=this.enableTerrain&&!R?new gC:null,L=DD[n.type]==="Polygon";R&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new zt);const H=U_(o,500);for(let ve=H.length-1;ve>=0;ve--){const Ce=H[ve];(Ce.length===0||(G=Ce[0]).every(ye=>ye.x<=0)||G.every(ye=>ye.x>=gn)||G.every(ye=>ye.y<=0)||G.every(ye=>ye.y>=gn))&&H.splice(ve,1)}var G;let Y;if(R)Y=SC(H,S,h);else{Y=[];for(const ve of H)Y.push({polygon:ve,bounds:S})}const ae=L?this.edgeRadius:0;for(const{polygon:ve,bounds:Ce}of Y){let ye=0,Ee=0;for(const Pe of ve)L&&!Pe[0].equals(Pe[Pe.length-1])&&Pe.push(Pe[0]),Ee+=L?Pe.length-1:Pe.length;const Ae=this.segments.prepareSegment((L?5:4)*Ee,this.layoutVertexArray,this.indexArray);if(L){const Pe=[],Ye=[];ye=Ae.vertexLength;for(const at of ve){let At,tt;at.length&&at!==ve[0]&&Ye.push(Pe.length/2),At=at[1].sub(at[0])._perp()._unit();for(let pt=1;pt<at.length;pt++){const mt=at[pt],_t=at[pt===at.length-1?1:pt+1];let{x:Dt,y:it}=mt;if(ae){tt=_t.sub(mt)._perp()._unit();const Wt=At.add(tt)._unit(),tn=ae*Math.min(4,1/(At.x*Wt.x+At.y*Wt.y));Dt+=tn*Wt.x,it+=tn*Wt.y,At=tt}$f(this.layoutVertexArray,Dt,it,0,0,1,1,0),Ae.vertexLength++,Pe.push(mt.x,mt.y),R&&Ff(this.layoutVertexExtArray,E.projectTilePoint(Dt,it,h),E.upVector(h,Dt,it))}}const Ze=j_(Pe,Ye);for(let at=0;at<Ze.length;at+=3)this.indexArray.emplaceBack(ye+Ze[at],ye+Ze[at+2],ye+Ze[at+1]),Ae.primitiveLength++}for(const Pe of ve){z&&Pe.length&&z.startRing(Pe[0]);let Ye,Ze,at,At=Pe.length>4&&xC(Pe[Pe.length-2],Pe[0],Pe[1]),tt=ae?FD(Pe[Pe.length-2],Pe[0],Pe[1],ae):0;Ze=Pe[1].sub(Pe[0])._perp()._unit();let pt=!0;for(let mt=1,_t=0;mt<Pe.length;mt++){let Dt=Pe[mt-1],it=Pe[mt];const Wt=Pe[mt===Pe.length-1?1:mt+1];if(z&&L&&z.currentPolyCount.top++,_C(it,Dt,Ce)){ae&&(Ze=Wt.sub(it)._perp()._unit(),pt=!pt);continue}z&&z.append(it,Dt);const tn=it.sub(Dt)._perp(),qt=tn.x/(Math.abs(tn.x)+Math.abs(tn.y)),kn=tn.y>0?1:0,Ft=Dt.dist(it);if(_t+Ft>32768&&(_t=0),ae){at=Wt.sub(it)._perp()._unit();let Dn=yC(Dt,it,Wt,vC(Ze,at),ae);isNaN(Dn)&&(Dn=0);const wn=it.sub(Dt)._unit();Dt=Dt.add(wn.mult(tt))._round(),it=it.add(wn.mult(-Dn))._round(),tt=Dn,Ze=at}const fn=Ae.vertexLength,Ln=Pe.length>4&&xC(Dt,it,Wt);let nr=bC(_t,At,pt);if($f(this.layoutVertexArray,Dt.x,Dt.y,qt,kn,0,0,nr),$f(this.layoutVertexArray,Dt.x,Dt.y,qt,kn,0,1,nr),_t+=Ft,nr=bC(_t,Ln,!pt),At=Ln,$f(this.layoutVertexArray,it.x,it.y,qt,kn,0,0,nr),$f(this.layoutVertexArray,it.x,it.y,qt,kn,0,1,nr),Ae.vertexLength+=4,this.indexArray.emplaceBack(fn+0,fn+1,fn+2),this.indexArray.emplaceBack(fn+1,fn+3,fn+2),Ae.primitiveLength+=2,ae){const Dn=ye+(mt===1?Pe.length-2:mt-2),wn=mt===1?ye:Dn+1;if(this.indexArray.emplaceBack(fn+1,Dn,fn+3),this.indexArray.emplaceBack(Dn,wn,fn+3),Ae.primitiveLength+=2,Ye===void 0&&(Ye=fn),!_C(Wt,Pe[mt],Ce)){const Or=mt===Pe.length-1?Ye:Ae.vertexLength;this.indexArray.emplaceBack(fn+2,fn+3,Or),this.indexArray.emplaceBack(fn+3,Or+1,Or),this.indexArray.emplaceBack(fn+3,wn,Or+1),Ae.primitiveLength+=3}pt=!pt}if(R){const Dn=this.layoutVertexExtArray,wn=E.projectTilePoint(Dt.x,Dt.y,h),Or=E.projectTilePoint(it.x,it.y,h),Fn=E.upVector(h,Dt.x,Dt.y),Bn=E.upVector(h,it.x,it.y);Ff(Dn,wn,Fn),Ff(Dn,wn,Fn),Ff(Dn,Or,Bn),Ff(Dn,Or,Bn)}}L&&(ye+=Pe.length-1)}}if(z&&z.polyCount.length>0){if(z.borders){z.vertexArrayOffset=this.centroidVertexArray.length;const ve=z.borders,Ce=this.featuresOnBorder.push(z)-1;for(let ye=0;ye<4;ye++)ve[ye][0]!==Number.MAX_VALUE&&this.borders[ye].push(Ce)}this.encodeCentroid(z.borders?void 0:z.centroid(),z)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,u,m,v,h)}sortBorders(){for(let n=0;n<4;n++)this.borders[n].sort((o,u)=>this.featuresOnBorder[o].borders[n][0]-this.featuresOnBorder[u].borders[n][0])}encodeCentroid(n,o,u=!0){let h,m;if(n)if(n.y!==0){const x=o.span()._mult(this.tileToMeter);h=(Math.max(n.x,1)<<3)+Math.min(7,Math.round(x.x/10)),m=(Math.max(n.y,1)<<3)+Math.min(7,Math.round(x.y/10))}else h=Math.ceil(7*(n.x+450)),m=0;else h=0,m=+u;let v=u?this.centroidVertexArray.length:o.vertexArrayOffset;for(const x of o.polyCount){u&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*x.edges+x.top);for(let S=0;S<x.top;S++)this.centroidVertexArray.emplace(v++,h,m);for(let S=0;S<2*x.edges;S++)this.centroidVertexArray.emplace(v++,0,m),this.centroidVertexArray.emplace(v++,h,m)}}}function vC(i,n){const o=i.add(n)._unit();return i.x*o.x+i.y*o.y}function FD(i,n,o,u){const h=n.sub(i)._perp()._unit(),m=o.sub(n)._perp()._unit();return yC(i,n,o,vC(h,m),u)}function yC(i,n,o,u,h){const m=Math.sqrt(1-u*u);return Math.min(i.dist(n)/3,n.dist(o)/3,h*m/u)}function _C(i,n,o){return i.x<o[0].x&&n.x<o[0].x||i.x>o[1].x&&n.x>o[1].x||i.y<o[0].y&&n.y<o[0].y||i.y>o[1].y&&n.y>o[1].y}function xC(i,n,o){if(i.x<0||i.x>=gn||n.x<0||n.x>=gn||o.x<0||o.x>=gn)return!1;const u=o.sub(n),h=u.perp(),m=i.sub(n);return(u.x*m.x+u.y*m.y)/Math.sqrt((u.x*u.x+u.y*u.y)*(m.x*m.x+m.y*m.y))>-.866&&h.x*m.x+h.y*m.y<0}function bC(i,n,o){const u=n?2|i:-3&i;return o?1|u:-2&u}function wC(){const i=Math.PI/32,n=Math.tan(i),o=Of;return o*Math.sqrt(1+2*n*n)-o}function SC(i,n,o){const u=1<<o.z,h=ea(o.x/u),m=ea((o.x+1)/u),v=Gi(o.y/u),x=Gi((o.y+1)/u);return function(S,E,R,z,L=0,H){const G=[];if(!S.length||!R||!z)return G;const Y=(Pe,Ye)=>{for(const Ze of Pe)G.push({polygon:Ze,bounds:Ye})},ae=Math.ceil(Math.log2(R)),ve=Math.ceil(Math.log2(z)),Ce=ae-ve,ye=[];for(let Pe=0;Pe<Math.abs(Ce);Pe++)ye.push(Ce>0?0:1);for(let Pe=0;Pe<Math.min(ae,ve);Pe++)ye.push(0),ye.push(1);let Ee=S;if(Ee=Rg(Ee,E[0].y-L,E[1].y+L,1),Ee=Rg(Ee,E[0].x-L,E[1].x+L,0),!Ee.length)return G;const Ae=[];for(ye.length?Ae.push({polygons:Ee,bounds:E,depth:0}):Y(Ee,E);Ae.length;){const Pe=Ae.pop(),Ye=Pe.depth,Ze=ye[Ye],at=Pe.bounds[0],At=Pe.bounds[1],tt=Ze===0?at.x:at.y,pt=Ze===0?At.x:At.y,mt=H?H(Ze,tt,pt):.5*(tt+pt),_t=Rg(Pe.polygons,tt-L,mt+L,Ze),Dt=Rg(Pe.polygons,mt-L,pt+L,Ze);if(_t.length){const it=[at,new ee(Ze===0?mt:At.x,Ze===1?mt:At.y)];ye.length>Ye+1?Ae.push({polygons:_t,bounds:it,depth:Ye+1}):Y(_t,it)}if(Dt.length){const it=[new ee(Ze===0?mt:at.x,Ze===1?mt:at.y),At];ye.length>Ye+1?Ae.push({polygons:Dt,bounds:it,depth:Ye+1}):Y(Dt,it)}}return G}(i,n,Math.ceil((m-h)/11.25),Math.ceil((v-x)/11.25),1,(S,E,R)=>{if(S===0)return .5*(E+R);{const z=Gi((o.y+E/gn)/u);return(Ms(.5*(Gi((o.y+R/gn)/u)+z))*u-o.y)*gn}})}Jt(Bf,"FillExtrusionBucket",{omit:["layers","features"]}),Jt(gC,"PartMetadata");const BD=new be({"fill-extrusion-edge-radius":new K(nt["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var ND={paint:new be({"fill-extrusion-opacity":new K(nt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new se(nt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new K(nt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new K(nt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new se(nt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new se(nt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new se(nt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new K(nt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new K(nt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new K(nt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"]),"fill-extrusion-rounded-roof":new K(nt["paint_fill-extrusion"]["fill-extrusion-rounded-roof"])}),layout:BD};function EC(i,n,o){var u=2*Math.PI*6378137/256/Math.pow(2,o);return[i*u-2*Math.PI*6378137/2,n*u-2*Math.PI*6378137/2]}class Og{constructor(n,o,u){this.z=n,this.x=o,this.y=u,this.key=Nf(0,n,n,o,u)}equals(n){return this.z===n.z&&this.x===n.x&&this.y===n.y}url(n,o){const u=function(m,v,x){var S=EC(256*m,256*(v=Math.pow(2,x)-v-1),x),E=EC(256*(m+1),256*(v+1),x);return S[0]+","+S[1]+","+E[0]+","+E[1]}(this.x,this.y,this.z),h=function(m,v,x){let S,E="";for(let R=m;R>0;R--)S=1<<R-1,E+=(v&S?1:0)+(x&S?2:0);return E}(this.z,this.x,this.y);return n[(this.x+this.y)%n.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(o==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",h).replace("{bbox-epsg-3857}",u)}toString(){return`${this.z}/${this.x}/${this.y}`}}class CC{constructor(n,o){this.wrap=n,this.canonical=o,this.key=Nf(n,o.z,o.z,o.x,o.y)}}class co{constructor(n,o,u,h,m){this.overscaledZ=n,this.wrap=o,this.canonical=new Og(u,+h,+m),this.key=o===0&&n===u?this.canonical.key:Nf(o,n,u,h,m)}equals(n){return this.overscaledZ===n.overscaledZ&&this.wrap===n.wrap&&this.canonical.equals(n.canonical)}scaledTo(n){const o=this.canonical.z-n;return n>this.canonical.z?new co(n,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new co(n,this.wrap,n,this.canonical.x>>o,this.canonical.y>>o)}calculateScaledKey(n,o=!0){if(this.overscaledZ===n&&o)return this.key;if(n>this.canonical.z)return Nf(this.wrap*+o,n,this.canonical.z,this.canonical.x,this.canonical.y);{const u=this.canonical.z-n;return Nf(this.wrap*+o,n,n,this.canonical.x>>u,this.canonical.y>>u)}}isChildOf(n){if(n.wrap!==this.wrap)return!1;const o=this.canonical.z-n.canonical.z;return n.overscaledZ===0||n.overscaledZ<this.overscaledZ&&n.canonical.x===this.canonical.x>>o&&n.canonical.y===this.canonical.y>>o}children(n){if(this.overscaledZ>=n)return[new co(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const o=this.canonical.z+1,u=2*this.canonical.x,h=2*this.canonical.y;return[new co(o,this.wrap,o,u,h),new co(o,this.wrap,o,u+1,h),new co(o,this.wrap,o,u,h+1),new co(o,this.wrap,o,u+1,h+1)]}isLessThan(n){return this.wrap<n.wrap||!(this.wrap>n.wrap)&&(this.overscaledZ<n.overscaledZ||!(this.overscaledZ>n.overscaledZ)&&(this.canonical.x<n.canonical.x||!(this.canonical.x>n.canonical.x)&&this.canonical.y<n.canonical.y))}wrapped(){return new co(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(n){return new co(this.overscaledZ,n,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new CC(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function Nf(i,n,o,u,h){const m=1<<Math.min(o,22);let v=m*(h%m)+u%m;return i&&o<22&&(v+=m*m*((i<0?-2*i-1:2*i)%(1<<2*(22-o)))),16*(32*v+o)+(n-o)}Jt(Og,"CanonicalTileID"),Jt(co,"OverscaledTileID",{omit:["projMatrix"]});class md extends ee{constructor(n,o,u){super(n,o),this.z=u}}function jf(i,n){return i.x*n.x+i.y*n.y}function TC(i,n){if(i.length===1){let o=0;const u=n[o++];let h;for(;!h||u.equals(h);)if(h=n[o++],!h)return 1/0;for(;o<n.length;o++){const m=n[o],v=i[0],x=h.sub(u),S=m.sub(u),E=v.sub(u),R=jf(x,x),z=jf(x,S),L=jf(S,S),H=jf(E,x),G=jf(E,S),Y=R*L-z*z,ae=(L*H-z*G)/Y,ve=(R*G-z*H)/Y,Ce=u.z*(1-ae-ve)+h.z*ae+m.z*ve;if(isFinite(Ce))return Ce}return 1/0}{let o=1/0;for(const u of n)o=Math.min(o,u.z);return o}}function IC(i,n,o,u,h,m,v,x){const S=v*h.getElevationAt(i,n,!0,!0),E=m[0]!==0,R=E?m[1]===0?v*(m[0]/7-450):v*function(z,L,H){const G=Math.floor(L[0]/8),Y=Math.floor(L[1]/8),ae=10*(L[0]-8*G),ve=10*(L[1]-8*Y),Ce=z.getElevationAt(G,Y,!0,!0),ye=z.getMeterToDEM(H),Ee=Math.floor(.5*(ae*ye-1)),Ae=Math.floor(.5*(ve*ye-1)),Pe=z.tileCoordToPixel(G,Y),Ye=2*Ee+1,Ze=2*Ae+1,at=function(Dt,it,Wt,tn,qt){return[Dt.getElevationAtPixel(it,Wt,!0),Dt.getElevationAtPixel(it+qt,Wt,!0),Dt.getElevationAtPixel(it,Wt+qt,!0),Dt.getElevationAtPixel(it+tn,Wt+qt,!0)]}(z,Pe.x-Ee,Pe.y-Ae,Ye,Ze),At=Math.abs(at[0]-at[1]),tt=Math.abs(at[2]-at[3]),pt=Math.abs(at[0]-at[2])+Math.abs(at[1]-at[3]),mt=Math.min(.25,.5*ye*(At+tt)/Ye),_t=Math.min(.25,.5*ye*pt/Ze);return Ce+Math.max(mt*ae,_t*ve)}(h,m,x):S;return{base:S+(o===0)?-1:o,top:E?Math.max(R+u,S+o+2):S+u}}const jD=Ue([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:UD}=jD,VD=Ue([{name:"a_packed",components:4,type:"Float32"}]),{members:HD}=VD,GD=Ag.types,WD=Math.cos(Math.PI/180*37.5);class zg{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(o=>o.id),this.index=n.index,this.projection=n.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(o=>{this.gradients[o.id]={}}),this.layoutVertexArray=new et,this.layoutVertexArray2=new Et,this.indexArray=new cn,this.programConfigurations=new Vc(n.layers,n.zoom),this.segments=new si,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(n,o,u,h){this.hasPattern=V_("line",this.layers,o);const m=this.layers[0].layout.get("line-sort-key"),v=[];for(const{feature:R,id:z,index:L,sourceLayerIndex:H}of n){const G=this.layers[0]._featureFilter.needGeometry,Y=Xc(R,G);if(!this.layers[0]._featureFilter.filter(new O(this.zoom),Y,u))continue;const ae=m?m.evaluate(Y,{},u):void 0,ve={id:z,properties:R.properties,type:R.type,sourceLayerIndex:H,index:L,geometry:G?Y.geometry:Qs(R,u,h),patterns:{},sortKey:ae};v.push(ve)}m&&v.sort((R,z)=>R.sortKey-z.sortKey);const{lineAtlas:x,featureIndex:S}=o,E=this.addConstantDashes(x);for(const R of v){const{geometry:z,index:L,sourceLayerIndex:H}=R;if(E&&this.addFeatureDashes(R,x),this.hasPattern){const G=H_("line",this.layers,R,this.zoom,o);this.patternFeatures.push(G)}else this.addFeature(R,z,L,u,x.positions,o.availableImages);S.insert(n[L].feature,z,L,H,this.index)}}addConstantDashes(n){let o=!1;for(const u of this.layers){const h=u.paint.get("line-dasharray").value,m=u.layout.get("line-cap").value;if(h.kind!=="constant"||m.kind!=="constant")o=!0;else{const v=m.value,x=h.value;if(!x)continue;n.addDash(x,v)}}return o}addFeatureDashes(n,o){const u=this.zoom;for(const h of this.layers){const m=h.paint.get("line-dasharray").value,v=h.layout.get("line-cap").value;if(m.kind==="constant"&&v.kind==="constant")continue;let x,S;if(m.kind==="constant"){if(x=m.value,!x)continue}else x=m.evaluate({zoom:u},n);S=v.kind==="constant"?v.value:v.evaluate({zoom:u},n),o.addDash(x,S),n.patterns[h.id]=o.getKey(x,S)}}update(n,o,u,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,o,this.stateDependentLayers,u,h)}addFeatures(n,o,u,h,m){for(const v of this.patternFeatures)this.addFeature(v,v.geometry,v.index,o,u,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=n.createVertexBuffer(this.layoutVertexArray2,HD)),this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,UD),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(n){if(n.properties&&n.properties.hasOwnProperty("mapbox_clip_start")&&n.properties.hasOwnProperty("mapbox_clip_end"))return{start:+n.properties.mapbox_clip_start,end:+n.properties.mapbox_clip_end}}addFeature(n,o,u,h,m,v){const x=this.layers[0].layout,S=x.get("line-join").evaluate(n,{}),E=x.get("line-cap").evaluate(n,{}),R=x.get("line-miter-limit"),z=x.get("line-round-limit");this.lineClips=this.lineFeatureClips(n);for(const L of o)this.addLine(L,n,S,E,R,z);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,u,m,v,h)}addLine(n,o,u,h,m,v){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let ve=0;ve<n.length-1;ve++)this.totalDistance+=n[ve].dist(n[ve+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const x=GD[o.type]==="Polygon";let S=n.length;for(;S>=2&&n[S-1].equals(n[S-2]);)S--;let E=0;for(;E<S-1&&n[E].equals(n[E+1]);)E++;if(S<(x?3:2))return;u==="bevel"&&(m=1.05);const R=this.overscaling<=16?15*gn/(512*this.overscaling):0,z=this.segments.prepareSegment(10*S,this.layoutVertexArray,this.indexArray);let L,H,G,Y,ae;this.e1=this.e2=-1,x&&(L=n[S-2],ae=n[E].sub(L)._unit()._perp());for(let ve=E;ve<S;ve++){if(G=ve===S-1?x?n[E+1]:void 0:n[ve+1],G&&n[ve].equals(G))continue;ae&&(Y=ae),L&&(H=L),L=n[ve],ae=G?G.sub(L)._unit()._perp():Y,Y=Y||ae;let Ce=Y.add(ae);Ce.x===0&&Ce.y===0||Ce._unit();const ye=Y.x*ae.x+Y.y*ae.y,Ee=Ce.x*ae.x+Ce.y*ae.y,Ae=Ee!==0?1/Ee:1/0,Pe=2*Math.sqrt(2-2*Ee),Ye=Ee<WD&&H&&G,Ze=Y.x*ae.y-Y.y*ae.x>0;if(Ye&&ve>E){const tt=L.dist(H);if(tt>2*R){const pt=L.sub(L.sub(H)._mult(R/tt)._round());this.updateDistance(H,pt),this.addCurrentVertex(pt,Y,0,0,z),H=pt}}const at=H&&G;let At=at?u:x?"butt":h;if(at&&At==="round"&&(Ae<v?At="miter":Ae<=2&&(At="fakeround")),At==="miter"&&Ae>m&&(At="bevel"),At==="bevel"&&(Ae>2&&(At="flipbevel"),Ae<m&&(At="miter")),H&&this.updateDistance(H,L),At==="miter")Ce._mult(Ae),this.addCurrentVertex(L,Ce,0,0,z);else if(At==="flipbevel"){if(Ae>100)Ce=ae.mult(-1);else{const tt=Ae*Y.add(ae).mag()/Y.sub(ae).mag();Ce._perp()._mult(tt*(Ze?-1:1))}this.addCurrentVertex(L,Ce,0,0,z),this.addCurrentVertex(L,Ce.mult(-1),0,0,z)}else if(At==="bevel"||At==="fakeround"){const tt=-Math.sqrt(Ae*Ae-1),pt=Ze?tt:0,mt=Ze?0:tt;if(H&&this.addCurrentVertex(L,Y,pt,mt,z),At==="fakeround"){const _t=Math.round(180*Pe/Math.PI/20);for(let Dt=1;Dt<_t;Dt++){let it=Dt/_t;if(it!==.5){const tn=it-.5;it+=it*tn*(it-1)*((1.0904+ye*(ye*(3.55645-1.43519*ye)-3.2452))*tn*tn+(.848013+ye*(.215638*ye-1.06021)))}const Wt=ae.sub(Y)._mult(it)._add(Y)._unit()._mult(Ze?-1:1);this.addHalfVertex(L,Wt.x,Wt.y,!1,Ze,0,z)}}G&&this.addCurrentVertex(L,ae,-pt,-mt,z)}else if(At==="butt")this.addCurrentVertex(L,Ce,0,0,z);else if(At==="square"){const tt=H?1:-1;H||this.addCurrentVertex(L,Ce,tt,tt,z),this.addCurrentVertex(L,Ce,0,0,z),H&&this.addCurrentVertex(L,Ce,tt,tt,z)}else At==="round"&&(H&&(this.addCurrentVertex(L,Y,0,0,z),this.addCurrentVertex(L,Y,1,1,z,!0)),G&&(this.addCurrentVertex(L,ae,-1,-1,z,!0),this.addCurrentVertex(L,ae,0,0,z)));if(Ye&&ve<S-1){const tt=L.dist(G);if(tt>2*R){const pt=L.add(G.sub(L)._mult(R/tt)._round());this.updateDistance(L,pt),this.addCurrentVertex(pt,ae,0,0,z),L=pt}}}}addCurrentVertex(n,o,u,h,m,v=!1){const x=o.y*h-o.x,S=-o.y-o.x*h;this.addHalfVertex(n,o.x+o.y*u,o.y-o.x*u,v,!1,u,m),this.addHalfVertex(n,x,S,v,!0,-h,m)}addHalfVertex({x:n,y:o},u,h,m,v,x,S){this.layoutVertexArray.emplaceBack((n<<1)+(m?1:0),(o<<1)+(v?1:0),Math.round(63*u)+128,Math.round(63*h)+128,1+(x===0?0:x<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const E=S.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,E),S.primitiveLength++),v?this.e2=E:this.e1=E}updateScaledDistance(){if(this.lineClips){const n=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=n*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(n,o){this.distance+=n.dist(o),this.updateScaledDistance()}}Jt(zg,"LineBucket",{omit:["layers","patternFeatures"]});const qD=new be({"line-cap":new se(nt.layout_line["line-cap"]),"line-join":new se(nt.layout_line["line-join"]),"line-miter-limit":new K(nt.layout_line["line-miter-limit"]),"line-round-limit":new K(nt.layout_line["line-round-limit"]),"line-sort-key":new se(nt.layout_line["line-sort-key"])});var MC={paint:new be({"line-opacity":new se(nt.paint_line["line-opacity"]),"line-color":new se(nt.paint_line["line-color"]),"line-translate":new K(nt.paint_line["line-translate"]),"line-translate-anchor":new K(nt.paint_line["line-translate-anchor"]),"line-width":new se(nt.paint_line["line-width"]),"line-gap-width":new se(nt.paint_line["line-gap-width"]),"line-offset":new se(nt.paint_line["line-offset"]),"line-blur":new se(nt.paint_line["line-blur"]),"line-dasharray":new se(nt.paint_line["line-dasharray"]),"line-pattern":new se(nt.paint_line["line-pattern"]),"line-gradient":new xe(nt.paint_line["line-gradient"]),"line-trim-offset":new K(nt.paint_line["line-trim-offset"])}),layout:qD};const PC=new class extends se{possiblyEvaluate(i,n){return n=new O(Math.floor(n.zoom),{now:n.now,fadeDuration:n.fadeDuration,transition:n.transition}),super.possiblyEvaluate(i,n)}evaluate(i,n,o,u){return n=gt({},n,{zoom:Math.floor(n.zoom)}),super.evaluate(i,n,o,u)}}(MC.paint.properties["line-width"].specification);function AC(i,n){return n>0?n+2*i:i}PC.useIntegerZoom=!0;const ZD=Ue([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),XD=Ue([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),KD=Ue([{name:"a_projected_pos",components:4,type:"Float32"}],4);Ue([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const YD=Ue([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),JD=Ue([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);Ue([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const RC=Ue([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),QD=Ue([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);Ue([{name:"triangle",components:3,type:"Uint16"}]),Ue([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),Ue([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Ue([{type:"Float32",name:"offsetX"}]),Ue([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var ki=24;const Ja=128;function W_(i,n){const{expression:o}=n;if(o.kind==="constant")return{kind:"constant",layoutSize:o.evaluate(new O(i+1))};if(o.kind==="source")return{kind:"source"};{const{zoomStops:u,interpolationType:h}=o;let m=0;for(;m<u.length&&u[m]<=i;)m++;m=Math.max(0,m-1);let v=m;for(;v<u.length&&u[v]<i+1;)v++;v=Math.min(u.length-1,v);const x=u[m],S=u[v];return o.kind==="composite"?{kind:"composite",minZoom:x,maxZoom:S,interpolationType:h}:{kind:"camera",minZoom:x,maxZoom:S,minSize:o.evaluate(new O(x)),maxSize:o.evaluate(new O(S)),interpolationType:h}}}function kg(i,{uSize:n,uSizeT:o},{lowerSize:u,upperSize:h}){return i.kind==="source"?u/Ja:i.kind==="composite"?Jn(u/Ja,h/Ja,o):n}function gd(i,n){let o=0,u=0;if(i.kind==="constant")u=i.layoutSize;else if(i.kind!=="source"){const{interpolationType:h,minZoom:m,maxZoom:v}=i,x=h?pe(xa.interpolationFactor(h,n,m,v),0,1):0;i.kind==="camera"?u=Jn(i.minSize,i.maxSize,x):o=x}return{uSizeT:o,uSize:u}}var e3=Object.freeze({__proto__:null,SIZE_PACK_FACTOR:Ja,evaluateSizeForFeature:kg,evaluateSizeForZoom:gd,getSizeData:W_});function t3(i,n,o){return i.sections.forEach(u=>{u.text=function(h,m,v){const x=m.layout.get("text-transform").evaluate(v,{});return x==="uppercase"?h=h.toLocaleUpperCase():x==="lowercase"&&(h=h.toLocaleLowerCase()),P.applyArabicShaping&&(h=P.applyArabicShaping(h)),h}(u.text,n,o)}),i}const Uf={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂","←":"↑","→":"↓"};function n3(i){return i==="︶"||i==="﹈"||i==="︸"||i==="﹄"||i==="﹂"||i==="︾"||i==="︼"||i==="︺"||i==="︘"||i==="﹀"||i==="︐"||i==="︓"||i==="︔"||i==="｀"||i==="￣"||i==="︑"||i==="︒"}function r3(i){return i==="︵"||i==="﹇"||i==="︷"||i==="﹃"||i==="﹁"||i==="︽"||i==="︻"||i==="︹"||i==="︗"||i==="︿"}var OC=Ir,zC=function(i,n,o,u,h){var m,v,x=8*h-u-1,S=(1<<x)-1,E=S>>1,R=-7,z=o?h-1:0,L=o?-1:1,H=i[n+z];for(z+=L,m=H&(1<<-R)-1,H>>=-R,R+=x;R>0;m=256*m+i[n+z],z+=L,R-=8);for(v=m&(1<<-R)-1,m>>=-R,R+=u;R>0;v=256*v+i[n+z],z+=L,R-=8);if(m===0)m=1-E;else{if(m===S)return v?NaN:1/0*(H?-1:1);v+=Math.pow(2,u),m-=E}return(H?-1:1)*v*Math.pow(2,m-u)},kC=function(i,n,o,u,h,m){var v,x,S,E=8*m-h-1,R=(1<<E)-1,z=R>>1,L=h===23?Math.pow(2,-24)-Math.pow(2,-77):0,H=u?0:m-1,G=u?1:-1,Y=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(x=isNaN(n)?1:0,v=R):(v=Math.floor(Math.log(n)/Math.LN2),n*(S=Math.pow(2,-v))<1&&(v--,S*=2),(n+=v+z>=1?L/S:L*Math.pow(2,1-z))*S>=2&&(v++,S/=2),v+z>=R?(x=0,v=R):v+z>=1?(x=(n*S-1)*Math.pow(2,h),v+=z):(x=n*Math.pow(2,z-1)*Math.pow(2,h),v=0));h>=8;i[o+H]=255&x,H+=G,x/=256,h-=8);for(v=v<<h|x,E+=h;E>0;i[o+H]=255&v,H+=G,v/=256,E-=8);i[o+H-G]|=128*Y};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */function Ir(i){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(i)?i:new Uint8Array(i||0),this.pos=0,this.type=0,this.length=this.buf.length}Ir.Varint=0,Ir.Fixed64=1,Ir.Bytes=2,Ir.Fixed32=5;var q_=4294967296,LC=1/q_,DC=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function tl(i){return i.type===Ir.Bytes?i.readVarint()+i.pos:i.pos+1}function vd(i,n,o){return o?4294967296*n+(i>>>0):4294967296*(n>>>0)+(i>>>0)}function $C(i,n,o){var u=n<=16383?1:n<=2097151?2:n<=268435455?3:Math.floor(Math.log(n)/(7*Math.LN2));o.realloc(u);for(var h=o.pos-1;h>=i;h--)o.buf[h+u]=o.buf[h]}function i3(i,n){for(var o=0;o<i.length;o++)n.writeVarint(i[o])}function o3(i,n){for(var o=0;o<i.length;o++)n.writeSVarint(i[o])}function a3(i,n){for(var o=0;o<i.length;o++)n.writeFloat(i[o])}function s3(i,n){for(var o=0;o<i.length;o++)n.writeDouble(i[o])}function l3(i,n){for(var o=0;o<i.length;o++)n.writeBoolean(i[o])}function c3(i,n){for(var o=0;o<i.length;o++)n.writeFixed32(i[o])}function u3(i,n){for(var o=0;o<i.length;o++)n.writeSFixed32(i[o])}function d3(i,n){for(var o=0;o<i.length;o++)n.writeFixed64(i[o])}function h3(i,n){for(var o=0;o<i.length;o++)n.writeSFixed64(i[o])}function Lg(i,n){return(i[n]|i[n+1]<<8|i[n+2]<<16)+16777216*i[n+3]}function yd(i,n,o){i[o]=n,i[o+1]=n>>>8,i[o+2]=n>>>16,i[o+3]=n>>>24}function FC(i,n){return(i[n]|i[n+1]<<8|i[n+2]<<16)+(i[n+3]<<24)}Ir.prototype={destroy:function(){this.buf=null},readFields:function(i,n,o){for(o=o||this.length;this.pos<o;){var u=this.readVarint(),h=u>>3,m=this.pos;this.type=7&u,i(h,n,this),this.pos===m&&this.skip(u)}return n},readMessage:function(i,n){return this.readFields(i,n,this.readVarint()+this.pos)},readFixed32:function(){var i=Lg(this.buf,this.pos);return this.pos+=4,i},readSFixed32:function(){var i=FC(this.buf,this.pos);return this.pos+=4,i},readFixed64:function(){var i=Lg(this.buf,this.pos)+Lg(this.buf,this.pos+4)*q_;return this.pos+=8,i},readSFixed64:function(){var i=Lg(this.buf,this.pos)+FC(this.buf,this.pos+4)*q_;return this.pos+=8,i},readFloat:function(){var i=zC(this.buf,this.pos,!0,23,4);return this.pos+=4,i},readDouble:function(){var i=zC(this.buf,this.pos,!0,52,8);return this.pos+=8,i},readVarint:function(i){var n,o,u=this.buf;return n=127&(o=u[this.pos++]),o<128?n:(n|=(127&(o=u[this.pos++]))<<7,o<128?n:(n|=(127&(o=u[this.pos++]))<<14,o<128?n:(n|=(127&(o=u[this.pos++]))<<21,o<128?n:function(h,m,v){var x,S,E=v.buf;if(x=(112&(S=E[v.pos++]))>>4,S<128||(x|=(127&(S=E[v.pos++]))<<3,S<128)||(x|=(127&(S=E[v.pos++]))<<10,S<128)||(x|=(127&(S=E[v.pos++]))<<17,S<128)||(x|=(127&(S=E[v.pos++]))<<24,S<128)||(x|=(1&(S=E[v.pos++]))<<31,S<128))return vd(h,x,m);throw new Error("Expected varint not more than 10 bytes")}(n|=(15&(o=u[this.pos]))<<28,i,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var i=this.readVarint();return i%2==1?(i+1)/-2:i/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var i=this.readVarint()+this.pos,n=this.pos;return this.pos=i,i-n>=12&&DC?function(o,u,h){return DC.decode(o.subarray(u,h))}(this.buf,n,i):function(o,u,h){for(var m="",v=u;v<h;){var x,S,E,R=o[v],z=null,L=R>239?4:R>223?3:R>191?2:1;if(v+L>h)break;L===1?R<128&&(z=R):L===2?(192&(x=o[v+1]))==128&&(z=(31&R)<<6|63&x)<=127&&(z=null):L===3?(S=o[v+2],(192&(x=o[v+1]))==128&&(192&S)==128&&((z=(15&R)<<12|(63&x)<<6|63&S)<=2047||z>=55296&&z<=57343)&&(z=null)):L===4&&(S=o[v+2],E=o[v+3],(192&(x=o[v+1]))==128&&(192&S)==128&&(192&E)==128&&((z=(15&R)<<18|(63&x)<<12|(63&S)<<6|63&E)<=65535||z>=1114112)&&(z=null)),z===null?(z=65533,L=1):z>65535&&(z-=65536,m+=String.fromCharCode(z>>>10&1023|55296),z=56320|1023&z),m+=String.fromCharCode(z),v+=L}return m}(this.buf,n,i)},readBytes:function(){var i=this.readVarint()+this.pos,n=this.buf.subarray(this.pos,i);return this.pos=i,n},readPackedVarint:function(i,n){if(this.type!==Ir.Bytes)return i.push(this.readVarint(n));var o=tl(this);for(i=i||[];this.pos<o;)i.push(this.readVarint(n));return i},readPackedSVarint:function(i){if(this.type!==Ir.Bytes)return i.push(this.readSVarint());var n=tl(this);for(i=i||[];this.pos<n;)i.push(this.readSVarint());return i},readPackedBoolean:function(i){if(this.type!==Ir.Bytes)return i.push(this.readBoolean());var n=tl(this);for(i=i||[];this.pos<n;)i.push(this.readBoolean());return i},readPackedFloat:function(i){if(this.type!==Ir.Bytes)return i.push(this.readFloat());var n=tl(this);for(i=i||[];this.pos<n;)i.push(this.readFloat());return i},readPackedDouble:function(i){if(this.type!==Ir.Bytes)return i.push(this.readDouble());var n=tl(this);for(i=i||[];this.pos<n;)i.push(this.readDouble());return i},readPackedFixed32:function(i){if(this.type!==Ir.Bytes)return i.push(this.readFixed32());var n=tl(this);for(i=i||[];this.pos<n;)i.push(this.readFixed32());return i},readPackedSFixed32:function(i){if(this.type!==Ir.Bytes)return i.push(this.readSFixed32());var n=tl(this);for(i=i||[];this.pos<n;)i.push(this.readSFixed32());return i},readPackedFixed64:function(i){if(this.type!==Ir.Bytes)return i.push(this.readFixed64());var n=tl(this);for(i=i||[];this.pos<n;)i.push(this.readFixed64());return i},readPackedSFixed64:function(i){if(this.type!==Ir.Bytes)return i.push(this.readSFixed64());var n=tl(this);for(i=i||[];this.pos<n;)i.push(this.readSFixed64());return i},skip:function(i){var n=7&i;if(n===Ir.Varint)for(;this.buf[this.pos++]>127;);else if(n===Ir.Bytes)this.pos=this.readVarint()+this.pos;else if(n===Ir.Fixed32)this.pos+=4;else{if(n!==Ir.Fixed64)throw new Error("Unimplemented type: "+n);this.pos+=8}},writeTag:function(i,n){this.writeVarint(i<<3|n)},realloc:function(i){for(var n=this.length||16;n<this.pos+i;)n*=2;if(n!==this.length){var o=new Uint8Array(n);o.set(this.buf),this.buf=o,this.length=n}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(i){this.realloc(4),yd(this.buf,i,this.pos),this.pos+=4},writeSFixed32:function(i){this.realloc(4),yd(this.buf,i,this.pos),this.pos+=4},writeFixed64:function(i){this.realloc(8),yd(this.buf,-1&i,this.pos),yd(this.buf,Math.floor(i*LC),this.pos+4),this.pos+=8},writeSFixed64:function(i){this.realloc(8),yd(this.buf,-1&i,this.pos),yd(this.buf,Math.floor(i*LC),this.pos+4),this.pos+=8},writeVarint:function(i){(i=+i||0)>268435455||i<0?function(n,o){var u,h;if(n>=0?(u=n%4294967296|0,h=n/4294967296|0):(h=~(-n/4294967296),4294967295^(u=~(-n%4294967296))?u=u+1|0:(u=0,h=h+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");o.realloc(10),function(m,v,x){x.buf[x.pos++]=127&m|128,m>>>=7,x.buf[x.pos++]=127&m|128,m>>>=7,x.buf[x.pos++]=127&m|128,m>>>=7,x.buf[x.pos++]=127&m|128,x.buf[x.pos]=127&(m>>>=7)}(u,0,o),function(m,v){var x=(7&m)<<4;v.buf[v.pos++]|=x|((m>>>=3)?128:0),m&&(v.buf[v.pos++]=127&m|((m>>>=7)?128:0),m&&(v.buf[v.pos++]=127&m|((m>>>=7)?128:0),m&&(v.buf[v.pos++]=127&m|((m>>>=7)?128:0),m&&(v.buf[v.pos++]=127&m|((m>>>=7)?128:0),m&&(v.buf[v.pos++]=127&m)))))}(h,o)}(i,this):(this.realloc(4),this.buf[this.pos++]=127&i|(i>127?128:0),i<=127||(this.buf[this.pos++]=127&(i>>>=7)|(i>127?128:0),i<=127||(this.buf[this.pos++]=127&(i>>>=7)|(i>127?128:0),i<=127||(this.buf[this.pos++]=i>>>7&127))))},writeSVarint:function(i){this.writeVarint(i<0?2*-i-1:2*i)},writeBoolean:function(i){this.writeVarint(!!i)},writeString:function(i){i=String(i),this.realloc(4*i.length),this.pos++;var n=this.pos;this.pos=function(u,h,m){for(var v,x,S=0;S<h.length;S++){if((v=h.charCodeAt(S))>55295&&v<57344){if(!x){v>56319||S+1===h.length?(u[m++]=239,u[m++]=191,u[m++]=189):x=v;continue}if(v<56320){u[m++]=239,u[m++]=191,u[m++]=189,x=v;continue}v=x-55296<<10|v-56320|65536,x=null}else x&&(u[m++]=239,u[m++]=191,u[m++]=189,x=null);v<128?u[m++]=v:(v<2048?u[m++]=v>>6|192:(v<65536?u[m++]=v>>12|224:(u[m++]=v>>18|240,u[m++]=v>>12&63|128),u[m++]=v>>6&63|128),u[m++]=63&v|128)}return m}(this.buf,i,this.pos);var o=this.pos-n;o>=128&&$C(n,o,this),this.pos=n-1,this.writeVarint(o),this.pos+=o},writeFloat:function(i){this.realloc(4),kC(this.buf,i,this.pos,!0,23,4),this.pos+=4},writeDouble:function(i){this.realloc(8),kC(this.buf,i,this.pos,!0,52,8),this.pos+=8},writeBytes:function(i){var n=i.length;this.writeVarint(n),this.realloc(n);for(var o=0;o<n;o++)this.buf[this.pos++]=i[o]},writeRawMessage:function(i,n){this.pos++;var o=this.pos;i(n,this);var u=this.pos-o;u>=128&&$C(o,u,this),this.pos=o-1,this.writeVarint(u),this.pos+=u},writeMessage:function(i,n,o){this.writeTag(i,Ir.Bytes),this.writeRawMessage(n,o)},writePackedVarint:function(i,n){n.length&&this.writeMessage(i,i3,n)},writePackedSVarint:function(i,n){n.length&&this.writeMessage(i,o3,n)},writePackedBoolean:function(i,n){n.length&&this.writeMessage(i,l3,n)},writePackedFloat:function(i,n){n.length&&this.writeMessage(i,a3,n)},writePackedDouble:function(i,n){n.length&&this.writeMessage(i,s3,n)},writePackedFixed32:function(i,n){n.length&&this.writeMessage(i,c3,n)},writePackedSFixed32:function(i,n){n.length&&this.writeMessage(i,u3,n)},writePackedFixed64:function(i,n){n.length&&this.writeMessage(i,d3,n)},writePackedSFixed64:function(i,n){n.length&&this.writeMessage(i,h3,n)},writeBytesField:function(i,n){this.writeTag(i,Ir.Bytes),this.writeBytes(n)},writeFixed32Field:function(i,n){this.writeTag(i,Ir.Fixed32),this.writeFixed32(n)},writeSFixed32Field:function(i,n){this.writeTag(i,Ir.Fixed32),this.writeSFixed32(n)},writeFixed64Field:function(i,n){this.writeTag(i,Ir.Fixed64),this.writeFixed64(n)},writeSFixed64Field:function(i,n){this.writeTag(i,Ir.Fixed64),this.writeSFixed64(n)},writeVarintField:function(i,n){this.writeTag(i,Ir.Varint),this.writeVarint(n)},writeSVarintField:function(i,n){this.writeTag(i,Ir.Varint),this.writeSVarint(n)},writeStringField:function(i,n){this.writeTag(i,Ir.Bytes),this.writeString(n)},writeFloatField:function(i,n){this.writeTag(i,Ir.Fixed32),this.writeFloat(n)},writeDoubleField:function(i,n){this.writeTag(i,Ir.Fixed64),this.writeDouble(n)},writeBooleanField:function(i,n){this.writeVarintField(i,!!n)}};var Dg=V(OC);const Z_=3;function f3(i,n,o){n.glyphs=[],i===1&&o.readMessage(p3,n)}function p3(i,n,o){if(i===3){const{id:u,bitmap:h,width:m,height:v,left:x,top:S,advance:E}=o.readMessage(m3,{});n.glyphs.push({id:u,bitmap:new el({width:m+2*Z_,height:v+2*Z_},h),metrics:{width:m,height:v,left:x,top:S,advance:E}})}else i===4?n.ascender=o.readSVarint():i===5&&(n.descender=o.readSVarint())}function m3(i,n,o){i===1?n.id=o.readVarint():i===2?n.bitmap=o.readBytes():i===3?n.width=o.readVarint():i===4?n.height=o.readVarint():i===5?n.left=o.readSVarint():i===6?n.top=o.readSVarint():i===7&&(n.advance=o.readVarint())}const BC=Z_;function X_(i){let n=0,o=0;for(const v of i)n+=v.w*v.h,o=Math.max(o,v.w);i.sort((v,x)=>x.h-v.h);const u=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),o),h:1/0}];let h=0,m=0;for(const v of i)for(let x=u.length-1;x>=0;x--){const S=u[x];if(!(v.w>S.w||v.h>S.h)){if(v.x=S.x,v.y=S.y,m=Math.max(m,v.y+v.h),h=Math.max(h,v.x+v.w),v.w===S.w&&v.h===S.h){const E=u.pop();x<u.length&&(u[x]=E)}else v.h===S.h?(S.x+=v.w,S.w-=v.w):v.w===S.w?(S.y+=v.h,S.h-=v.h):(u.push({x:S.x+v.w,y:S.y,w:S.w-v.w,h:v.h}),S.y+=v.h,S.h-=v.h);break}}return{w:h,h:m,fill:n/(h*m)||0}}const wo=1;class K_{constructor(n,{pixelRatio:o,version:u,stretchX:h,stretchY:m,content:v}){this.paddedRect=n,this.pixelRatio=o,this.stretchX=h,this.stretchY=m,this.content=v,this.version=u}get tl(){return[this.paddedRect.x+wo,this.paddedRect.y+wo]}get br(){return[this.paddedRect.x+this.paddedRect.w-wo,this.paddedRect.y+this.paddedRect.h-wo]}get displaySize(){return[(this.paddedRect.w-2*wo)/this.pixelRatio,(this.paddedRect.h-2*wo)/this.pixelRatio]}}class NC{constructor(n,o){const u={},h={};this.haveRenderCallbacks=[];const m=[];this.addImages(n,u,m),this.addImages(o,h,m);const{w:v,h:x}=X_(m),S=new $o({width:v||1,height:x||1});for(const E in n){const R=n[E],z=u[E].paddedRect;$o.copy(R.data,S,{x:0,y:0},{x:z.x+wo,y:z.y+wo},R.data)}for(const E in o){const R=o[E],z=h[E].paddedRect,L=z.x+wo,H=z.y+wo,G=R.data.width,Y=R.data.height;$o.copy(R.data,S,{x:0,y:0},{x:L,y:H},R.data),$o.copy(R.data,S,{x:0,y:Y-1},{x:L,y:H-1},{width:G,height:1}),$o.copy(R.data,S,{x:0,y:0},{x:L,y:H+Y},{width:G,height:1}),$o.copy(R.data,S,{x:G-1,y:0},{x:L-1,y:H},{width:1,height:Y}),$o.copy(R.data,S,{x:0,y:0},{x:L+G,y:H},{width:1,height:Y})}this.image=S,this.iconPositions=u,this.patternPositions=h}addImages(n,o,u){for(const h in n){const m=n[h],v={x:0,y:0,w:m.data.width+2*wo,h:m.data.height+2*wo};u.push(v),o[h]=new K_(v,m),m.hasRenderCallback&&this.haveRenderCallbacks.push(h)}}patchUpdatedImages(n,o){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(u=>n.hasImage(u)),n.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const u in n.updatedImages)this.patchUpdatedImage(this.iconPositions[u],n.getImage(u),o),this.patchUpdatedImage(this.patternPositions[u],n.getImage(u),o)}patchUpdatedImage(n,o,u){if(!n||!o||n.version===o.version)return;n.version=o.version;const[h,m]=n.tl;u.update(o.data,void 0,{x:h,y:m})}}Jt(K_,"ImagePosition"),Jt(NC,"ImageAtlas");const ta={horizontal:1,vertical:2,horizontalOnly:3},jC=-17;class Vf{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(n,o){const u=new Vf;return u.scale=n||1,u.fontStack=o,u}static forImage(n){const o=new Vf;return o.imageName=n,o}}class _d{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(n,o){const u=new _d;for(let h=0;h<n.sections.length;h++){const m=n.sections[h];m.image?u.addImageSection(m):u.addTextSection(m,o)}return u}length(){return this.text.length}getSection(n){return this.sections[this.sectionIndex[n]]}getSections(){return this.sections}getSectionIndex(n){return this.sectionIndex[n]}getCharCode(n){return this.text.charCodeAt(n)}verticalizePunctuation(n){this.text=function(o,u){let h="";for(let m=0;m<o.length;m++){const v=o.charCodeAt(m+1)||null,x=o.charCodeAt(m-1)||null;h+=!u&&(v&&dg(v)&&!Uf[o[m+1]]||x&&dg(x)&&!Uf[o[m-1]])||!Uf[o[m]]?o[m]:Uf[o[m]]}return h}(this.text,n)}trim(){let n=0;for(let u=0;u<this.text.length&&$g[this.text.charCodeAt(u)];u++)n++;let o=this.text.length;for(let u=this.text.length-1;u>=0&&u>=n&&$g[this.text.charCodeAt(u)];u--)o--;this.text=this.text.substring(n,o),this.sectionIndex=this.sectionIndex.slice(n,o)}substring(n,o){const u=new _d;return u.text=this.text.substring(n,o),u.sectionIndex=this.sectionIndex.slice(n,o),u.sections=this.sections,u}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((n,o)=>Math.max(n,this.sections[o].scale),0)}addTextSection(n,o){this.text+=n.text,this.sections.push(Vf.forText(n.scale,n.fontStack||o));const u=this.sections.length-1;for(let h=0;h<n.text.length;++h)this.sectionIndex.push(u)}addImageSection(n){const o=n.image?n.image.name:"";if(o.length===0)return void Ct("Can't add FormattedSection with an empty image.");const u=this.getNextImageSectionCharCode();u?(this.text+=String.fromCharCode(u),this.sections.push(Vf.forImage(o)),this.sectionIndex.push(this.sections.length-1)):Ct("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Y_(i,n,o,u,h,m,v,x,S,E,R,z,L,H,G){const Y=_d.fromFeature(i,h);z===ta.vertical&&Y.verticalizePunctuation(L);let ae=[];const ve=function(Pe,Ye,Ze,at,At,tt){if(!Pe)return[];const pt=[],mt=function(Wt,tn,qt,kn,Ft,fn){let Ln=0;for(let nr=0;nr<Wt.length();nr++){const Dn=Wt.getSection(nr);Ln+=UC(Wt.getCharCode(nr),Dn,kn,Ft,tn,fn)}return Ln/Math.max(1,Math.ceil(Ln/qt))}(Pe,Ye,Ze,at,At,tt),_t=Pe.text.indexOf("​")>=0;let Dt=0;for(let Wt=0;Wt<Pe.length();Wt++){const tn=Pe.getSection(Wt),qt=Pe.getCharCode(Wt);if($g[qt]||(Dt+=UC(qt,tn,at,At,Ye,tt)),Wt<Pe.length()-1){const kn=!((it=qt)<11904||!(Zt["Bopomofo Extended"](it)||Zt.Bopomofo(it)||Zt["CJK Compatibility Forms"](it)||Zt["CJK Compatibility Ideographs"](it)||Zt["CJK Compatibility"](it)||Zt["CJK Radicals Supplement"](it)||Zt["CJK Strokes"](it)||Zt["CJK Symbols and Punctuation"](it)||Zt["CJK Unified Ideographs Extension A"](it)||Zt["CJK Unified Ideographs"](it)||Zt["Enclosed CJK Letters and Months"](it)||Zt["Halfwidth and Fullwidth Forms"](it)||Zt.Hiragana(it)||Zt["Ideographic Description Characters"](it)||Zt["Kangxi Radicals"](it)||Zt["Katakana Phonetic Extensions"](it)||Zt.Katakana(it)||Zt["Vertical Forms"](it)||Zt["Yi Radicals"](it)||Zt["Yi Syllables"](it)));(g3[qt]||kn||tn.imageName)&&pt.push(HC(Wt+1,Dt,mt,pt,v3(qt,Pe.getCharCode(Wt+1),kn&&_t),!1))}}var it;return GC(HC(Pe.length(),Dt,mt,pt,0,!0))}(Y,E,m,n,u,H),{processBidirectionalText:Ce,processStyledBidirectionalText:ye}=P;if(Ce&&Y.sections.length===1){const Pe=Ce(Y.toString(),ve);for(const Ye of Pe){const Ze=new _d;Ze.text=Ye,Ze.sections=Y.sections;for(let at=0;at<Ye.length;at++)Ze.sectionIndex.push(0);ae.push(Ze)}}else if(ye){const Pe=ye(Y.text,Y.sectionIndex,ve);for(const Ye of Pe){const Ze=new _d;Ze.text=Ye[0],Ze.sectionIndex=Ye[1],Ze.sections=Y.sections,ae.push(Ze)}}else ae=function(Pe,Ye){const Ze=[],at=Pe.text;let At=0;for(const tt of Ye)Ze.push(Pe.substring(At,tt)),At=tt;return At<at.length&&Ze.push(Pe.substring(At,at.length)),Ze}(Y,ve);const Ee=[],Ae={positionedLines:Ee,text:Y.toString(),top:R[1],bottom:R[1],left:R[0],right:R[0],writingMode:z,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(Pe,Ye,Ze,at,At,tt,pt,mt,_t,Dt,it,Wt){let tn=0,qt=0,kn=0;const Ft=mt==="right"?1:mt==="left"?0:.5;let fn=!1;for(const Fn of At){const Bn=Fn.getSections();for(const wr of Bn){if(wr.imageName)continue;const Mr=Ye[wr.fontStack];if(Mr&&(fn=Mr.ascender!==void 0&&Mr.descender!==void 0,!fn))break}if(!fn)break}let Ln=0;for(const Fn of At){Fn.trim();const Bn=Fn.getMaxScale(),wr=(Bn-1)*ki,Mr={positionedGlyphs:[],lineOffset:0};Pe.positionedLines[Ln]=Mr;const Pr=Mr.positionedGlyphs;let Sr=0;if(!Fn.length()){qt+=tt,++Ln;continue}let qr=0,ei=0;for(let Er=0;Er<Fn.length();Er++){const gi=Fn.getSection(Er),ui=Fn.getSectionIndex(Er),Yr=Fn.getCharCode(Er);let ir=gi.scale,di=null,Ar=null,uo=null,hi=ki,Li=0;const Ii=!(_t===ta.horizontal||!it&&!gf(Yr)||it&&($g[Yr]||(nr=Yr,Zt.Arabic(nr)||Zt["Arabic Supplement"](nr)||Zt["Arabic Extended-A"](nr)||Zt["Arabic Presentation Forms-A"](nr)||Zt["Arabic Presentation Forms-B"](nr))));if(gi.imageName){const ho=at[gi.imageName];if(!ho)continue;uo=gi.imageName,Pe.iconsInText=Pe.iconsInText||!0,Ar=ho.paddedRect;const Mi=ho.displaySize;ir=ir*ki/Wt,di={width:Mi[0],height:Mi[1],left:wo,top:-BC,advance:Ii?Mi[1]:Mi[0],localGlyph:!1},Li=fn?-di.height*ir:jC+Bn*ki-Mi[1]*ir,hi=di.advance;const ts=(Ii?Mi[0]:Mi[1])*ir-ki*Bn;ts>0&&ts>Sr&&(Sr=ts)}else{const ho=Ze[gi.fontStack];if(!ho)continue;ho[Yr]&&(Ar=ho[Yr]);const Mi=Ye[gi.fontStack];if(!Mi)continue;const ts=Mi.glyphs[Yr];if(!ts)continue;if(di=ts.metrics,hi=Yr!==8203?ki:0,fn){const Td=Mi.ascender!==void 0?Math.abs(Mi.ascender):0,Qf=Mi.descender!==void 0?Math.abs(Mi.descender):0,ep=(Td+Qf)*ir;qr<ep&&(qr=ep,ei=(Td-Qf)/2*ir),Li=-Td*ir}else Li=jC+(Bn-ir)*ki}Ii?(Pe.verticalizable=!0,Pr.push({glyph:Yr,imageName:uo,x:tn,y:qt+Li,vertical:Ii,scale:ir,localGlyph:di.localGlyph,fontStack:gi.fontStack,sectionIndex:ui,metrics:di,rect:Ar}),tn+=hi*ir+Dt):(Pr.push({glyph:Yr,imageName:uo,x:tn,y:qt+Li,vertical:Ii,scale:ir,localGlyph:di.localGlyph,fontStack:gi.fontStack,sectionIndex:ui,metrics:di,rect:Ar}),tn+=di.advance*ir+Dt)}Pr.length!==0&&(kn=Math.max(tn-Dt,kn),fn?WC(Pr,Ft,Sr,ei,tt*Bn/2):WC(Pr,Ft,Sr,0,tt/2)),tn=0;const ci=tt*Bn+Sr;Mr.lineOffset=Math.max(Sr,wr),qt+=ci,++Ln}var nr;const Dn=qt,{horizontalAlign:wn,verticalAlign:Or}=J_(pt);(function(Fn,Bn,wr,Mr,Pr,Sr){const qr=(Bn-wr)*Pr,ei=-Sr*Mr;for(const ci of Fn)for(const Er of ci.positionedGlyphs)Er.x+=qr,Er.y+=ei})(Pe.positionedLines,Ft,wn,Or,kn,Dn),Pe.top+=-Or*Dn,Pe.bottom=Pe.top+Dn,Pe.left+=-wn*kn,Pe.right=Pe.left+kn,Pe.hasBaseline=fn}(Ae,n,o,u,ae,v,x,S,z,E,L,G),!function(Pe){for(const Ye of Pe)if(Ye.positionedGlyphs.length!==0)return!1;return!0}(Ee)&&Ae}const $g={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},g3={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function UC(i,n,o,u,h,m){if(n.imageName){const v=u[n.imageName];return v?v.displaySize[0]*n.scale*ki/m+h:0}{const v=o[n.fontStack],x=v&&v.glyphs[i];return x?x.metrics.advance*n.scale+h:0}}function VC(i,n,o,u){const h=Math.pow(i-n,2);return u?i<n?h/2:2*h:h+Math.abs(o)*o}function v3(i,n,o){let u=0;return i===10&&(u-=1e4),o&&(u+=150),i!==40&&i!==65288||(u+=50),n!==41&&n!==65289||(u+=50),u}function HC(i,n,o,u,h,m){let v=null,x=VC(n,o,h,m);for(const S of u){const E=VC(n-S.x,o,h,m)+S.badness;E<=x&&(v=S,x=E)}return{index:i,x:n,priorBreak:v,badness:x}}function GC(i){return i?GC(i.priorBreak).concat(i.index):[]}function J_(i){let n=.5,o=.5;switch(i){case"right":case"top-right":case"bottom-right":n=1;break;case"left":case"top-left":case"bottom-left":n=0}switch(i){case"bottom":case"bottom-right":case"bottom-left":o=1;break;case"top":case"top-right":case"top-left":o=0}return{horizontalAlign:n,verticalAlign:o}}function WC(i,n,o,u,h){if(!(n||o||u||h))return;const m=i.length-1,v=i[m],x=(v.x+v.metrics.advance*v.scale)*n;for(let S=0;S<=m;S++)i[S].x-=x,i[S].y+=o+u+h}function y3(i,n,o){const{horizontalAlign:u,verticalAlign:h}=J_(o),m=n[0]-i.displaySize[0]*u,v=n[1]-i.displaySize[1]*h;return{image:i,top:v,bottom:v+i.displaySize[1],left:m,right:m+i.displaySize[0]}}function qC(i,n,o,u,h,m){const v=i.image;let x;if(v.content){const ae=v.content,ve=v.pixelRatio||1;x=[ae[0]/ve,ae[1]/ve,v.displaySize[0]-ae[2]/ve,v.displaySize[1]-ae[3]/ve]}const S=n.left*m,E=n.right*m;let R,z,L,H;o==="width"||o==="both"?(H=h[0]+S-u[3],z=h[0]+E+u[1]):(H=h[0]+(S+E-v.displaySize[0])/2,z=H+v.displaySize[0]);const G=n.top*m,Y=n.bottom*m;return o==="height"||o==="both"?(R=h[1]+G-u[0],L=h[1]+Y+u[2]):(R=h[1]+(G+Y-v.displaySize[1])/2,L=R+v.displaySize[1]),{image:v,top:R,right:z,bottom:L,left:H,collisionPadding:x}}class nl extends ee{constructor(n,o,u,h,m){super(n,o),this.angle=h,this.z=u,m!==void 0&&(this.segment=m)}clone(){return new nl(this.x,this.y,this.z,this.angle,this.segment)}}function ZC(i,n,o,u,h){if(n.segment===void 0)return!0;let m=n,v=n.segment+1,x=0;for(;x>-o/2;){if(v--,v<0)return!1;x-=i[v].dist(m),m=i[v]}x+=i[v].dist(i[v+1]),v++;const S=[];let E=0;for(;x<o/2;){const R=i[v],z=i[v+1];if(!z)return!1;let L=i[v-1].angleTo(R)-R.angleTo(z);for(L=Math.abs((L+3*Math.PI)%(2*Math.PI)-Math.PI),S.push({distance:x,angleDelta:L}),E+=L;x-S[0].distance>u;)E-=S.shift().angleDelta;if(E>h)return!1;v++,x+=R.dist(z)}return!0}function XC(i){let n=0;for(let o=0;o<i.length-1;o++)n+=i[o].dist(i[o+1]);return n}function KC(i,n,o){return i?.6*n*o:0}function YC(i,n){return Math.max(i?i.right-i.left:0,n?n.right-n.left:0)}function _3(i,n,o,u,h,m){const v=KC(o,h,m),x=YC(o,u)*m;let S=0;const E=XC(i)/2;for(let R=0;R<i.length-1;R++){const z=i[R],L=i[R+1],H=z.dist(L);if(S+H>E){const G=(E-S)/H,Y=Jn(z.x,L.x,G),ae=Jn(z.y,L.y,G),ve=new nl(Y,ae,0,L.angleTo(z),R);return!v||ZC(i,ve,x,v,n)?ve:void 0}S+=H}}function x3(i,n,o,u,h,m,v,x,S){const E=KC(u,m,v),R=YC(u,h),z=R*v,L=i[0].x===0||i[0].x===S||i[0].y===0||i[0].y===S;return n-z<n/4&&(n=z+n/4),JC(i,L?n/2*x%n:(R/2+2*m)*v*x%n,n,E,o,z,L,!1,S)}function JC(i,n,o,u,h,m,v,x,S){const E=m/2,R=XC(i);let z=0,L=n-o,H=[];for(let G=0;G<i.length-1;G++){const Y=i[G],ae=i[G+1],ve=Y.dist(ae),Ce=ae.angleTo(Y);for(;L+o<z+ve;){L+=o;const ye=(L-z)/ve,Ee=Jn(Y.x,ae.x,ye),Ae=Jn(Y.y,ae.y,ye);if(Ee>=0&&Ee<S&&Ae>=0&&Ae<S&&L-E>=0&&L+E<=R){const Pe=new nl(Ee,Ae,0,Ce,G);Pe._round(),u&&!ZC(i,Pe,m,u,h)||H.push(Pe)}}z+=ve}return x||H.length||v||(H=JC(i,z/2,o,u,h,m,v,!0,S)),H}function QC(i,n,o,u,h){const m=[];for(let v=0;v<i.length;v++){const x=i[v];let S;for(let E=0;E<x.length-1;E++){let R=x[E],z=x[E+1];R.x<n&&z.x<n||(R.x<n?R=new ee(n,R.y+(n-R.x)/(z.x-R.x)*(z.y-R.y))._round():z.x<n&&(z=new ee(n,R.y+(n-R.x)/(z.x-R.x)*(z.y-R.y))._round()),R.y<o&&z.y<o||(R.y<o?R=new ee(R.x+(o-R.y)/(z.y-R.y)*(z.x-R.x),o)._round():z.y<o&&(z=new ee(R.x+(o-R.y)/(z.y-R.y)*(z.x-R.x),o)._round()),R.x>=u&&z.x>=u||(R.x>=u?R=new ee(u,R.y+(u-R.x)/(z.x-R.x)*(z.y-R.y))._round():z.x>=u&&(z=new ee(u,R.y+(u-R.x)/(z.x-R.x)*(z.y-R.y))._round()),R.y>=h&&z.y>=h||(R.y>=h?R=new ee(R.x+(h-R.y)/(z.y-R.y)*(z.x-R.x),h)._round():z.y>=h&&(z=new ee(R.x+(h-R.y)/(z.y-R.y)*(z.x-R.x),h)._round()),S&&R.equals(S[S.length-1])||(S=[R],m.push(S)),S.push(z)))))}}return m}Jt(nl,"Anchor");const Hf=1e20;function e2(i,n,o,u,h,m,v,x,S){for(let E=n;E<n+u;E++)t2(i,o*m+E,m,h,v,x,S);for(let E=o;E<o+h;E++)t2(i,E*m+n,1,u,v,x,S)}function t2(i,n,o,u,h,m,v){m[0]=0,v[0]=-Hf,v[1]=Hf,h[0]=i[n];for(let x=1,S=0,E=0;x<u;x++){h[x]=i[n+x*o];const R=x*x;do{const z=m[S];E=(h[x]-h[z]+R-z*z)/(x-z)/2}while(E<=v[S]&&--S>-1);S++,m[S]=x,v[S]=E,v[S+1]=Hf}for(let x=0,S=0;x<u;x++){for(;v[S+1]<x;)S++;const E=m[S],R=x-E;i[n+x*o]=h[E]+R*R}}const Qa=2,Q_={none:0,ideographs:1,all:2};class xd{constructor(n,o,u){this.requestManager=n,this.localGlyphMode=o,this.localFontFamily=u,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(n){this.url=n}getGlyphs(n,o){const u=[];for(const h in n)for(const m of n[h])u.push({stack:h,id:m});Ge(u,({stack:h,id:m},v)=>{let x=this.entries[h];x||(x=this.entries[h]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let S=x.glyphs[m];if(S!==void 0)return void v(null,{stack:h,id:m,glyph:S});if(S=this._tinySDF(x,h,m),S)return x.glyphs[m]=S,void v(null,{stack:h,id:m,glyph:S});const E=Math.floor(m/256);if(256*E>65535)return void v(new Error("glyphs > 65535 not supported"));if(x.ranges[E])return void v(null,{stack:h,id:m,glyph:S});let R=x.requests[E];R||(R=x.requests[E]=[],xd.loadGlyphRange(h,E,this.url,this.requestManager,(z,L)=>{if(L){x.ascender=L.ascender,x.descender=L.descender;for(const H in L.glyphs)this._doesCharSupportLocalGlyph(+H)||(x.glyphs[+H]=L.glyphs[+H]);x.ranges[E]=!0}for(const H of R)H(z,L);delete x.requests[E]})),R.push((z,L)=>{z?v(z):L&&v(null,{stack:h,id:m,glyph:L.glyphs[m]||null})})},(h,m)=>{if(h)o(h);else if(m){const v={};for(const{stack:x,id:S,glyph:E}of m)v[x]===void 0&&(v[x]={}),v[x].glyphs===void 0&&(v[x].glyphs={}),v[x].glyphs[S]=E&&{id:E.id,bitmap:E.bitmap.clone(),metrics:E.metrics},v[x].ascender=this.entries[x].ascender,v[x].descender=this.entries[x].descender;o(null,v)}})}_doesCharSupportLocalGlyph(n){return this.localGlyphMode!==Q_.none&&(this.localGlyphMode===Q_.all?!!this.localFontFamily:!!this.localFontFamily&&(Zt["CJK Unified Ideographs"](n)||Zt["Hangul Syllables"](n)||Zt.Hiragana(n)||Zt.Katakana(n)||Zt["CJK Symbols and Punctuation"](n)))}_tinySDF(n,o,u){const h=this.localFontFamily;if(!h||!this._doesCharSupportLocalGlyph(u))return;let m=n.tinySDF;if(!m){let Y="400";/bold/i.test(o)?Y="900":/medium/i.test(o)?Y="500":/light/i.test(o)&&(Y="200"),m=n.tinySDF=new xd.TinySDF({fontFamily:h,fontWeight:Y,fontSize:24*Qa,buffer:3*Qa,radius:8*Qa}),m.fontWeight=Y}if(this.localGlyphs[m.fontWeight][u])return this.localGlyphs[m.fontWeight][u];const v=String.fromCharCode(u),{data:x,width:S,height:E,glyphWidth:R,glyphHeight:z,glyphLeft:L,glyphTop:H,glyphAdvance:G}=m.draw(v);return this.localGlyphs[m.fontWeight][u]={id:u,bitmap:new el({width:S,height:E},x),metrics:{width:R/Qa,height:z/Qa,left:L/Qa,top:H/Qa-27,advance:G/Qa,localGlyph:!0}}}}xd.loadGlyphRange=function(i,n,o,u,h){const m=256*n,v=m+255,x=u.transformRequest(u.normalizeGlyphsURL(o).replace("{fontstack}",i).replace("{range}",`${m}-${v}`),jn.Glyphs);Qn(x,(S,E)=>{if(S)h(S);else if(E){const R={},z=function(L){return new Dg(L).readFields(f3,{})}(E);for(const L of z.glyphs)R[L.id]=L;h(null,{glyphs:R,ascender:z.ascender,descender:z.descender})}})},xd.TinySDF=class{constructor({fontSize:i=24,buffer:n=3,radius:o=8,cutoff:u=.25,fontFamily:h="sans-serif",fontWeight:m="normal",fontStyle:v="normal"}={}){this.buffer=n,this.cutoff=u,this.radius=o;const x=this.size=i+4*n,S=this._createCanvas(x),E=this.ctx=S.getContext("2d",{willReadFrequently:!0});E.font=`${v} ${m} ${i}px ${h}`,E.textBaseline="alphabetic",E.textAlign="left",E.fillStyle="black",this.gridOuter=new Float64Array(x*x),this.gridInner=new Float64Array(x*x),this.f=new Float64Array(x),this.z=new Float64Array(x+1),this.v=new Uint16Array(x)}_createCanvas(i){const n=document.createElement("canvas");return n.width=n.height=i,n}draw(i){const{width:n,actualBoundingBoxAscent:o,actualBoundingBoxDescent:u,actualBoundingBoxLeft:h,actualBoundingBoxRight:m}=this.ctx.measureText(i),v=Math.ceil(o),x=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(m-h))),S=Math.min(this.size-this.buffer,v+Math.ceil(u)),E=x+2*this.buffer,R=S+2*this.buffer,z=Math.max(E*R,0),L=new Uint8ClampedArray(z),H={data:L,width:E,height:R,glyphWidth:x,glyphHeight:S,glyphTop:v,glyphLeft:0,glyphAdvance:n};if(x===0||S===0)return H;const{ctx:G,buffer:Y,gridInner:ae,gridOuter:ve}=this;G.clearRect(Y,Y,x,S),G.fillText(i,Y,Y+v);const Ce=G.getImageData(Y,Y,x,S);ve.fill(Hf,0,z),ae.fill(0,0,z);for(let ye=0;ye<S;ye++)for(let Ee=0;Ee<x;Ee++){const Ae=Ce.data[4*(ye*x+Ee)+3]/255;if(Ae===0)continue;const Pe=(ye+Y)*E+Ee+Y;if(Ae===1)ve[Pe]=0,ae[Pe]=Hf;else{const Ye=.5-Ae;ve[Pe]=Ye>0?Ye*Ye:0,ae[Pe]=Ye<0?Ye*Ye:0}}e2(ve,0,0,E,R,E,this.f,this.v,this.z),e2(ae,Y,Y,x,S,E,this.f,this.v,this.z);for(let ye=0;ye<z;ye++){const Ee=Math.sqrt(ve[ye])-Math.sqrt(ae[ye]);L[ye]=Math.round(255-255*(Ee/this.radius+this.cutoff))}return H}};const bd=wo;function n2(i,n,o,u){const h=[],m=i.image,v=m.pixelRatio,x=m.paddedRect.w-2*bd,S=m.paddedRect.h-2*bd,E=i.right-i.left,R=i.bottom-i.top,z=m.stretchX||[[0,x]],L=m.stretchY||[[0,S]],H=(tt,pt)=>tt+pt[1]-pt[0],G=z.reduce(H,0),Y=L.reduce(H,0),ae=x-G,ve=S-Y;let Ce=0,ye=G,Ee=0,Ae=Y,Pe=0,Ye=ae,Ze=0,at=ve;if(m.content&&u){const tt=m.content;Ce=Fg(z,0,tt[0]),Ee=Fg(L,0,tt[1]),ye=Fg(z,tt[0],tt[2]),Ae=Fg(L,tt[1],tt[3]),Pe=tt[0]-Ce,Ze=tt[1]-Ee,Ye=tt[2]-tt[0]-ye,at=tt[3]-tt[1]-Ae}const At=(tt,pt,mt,_t)=>{const Dt=Bg(tt.stretch-Ce,ye,E,i.left),it=Ng(tt.fixed-Pe,Ye,tt.stretch,G),Wt=Bg(pt.stretch-Ee,Ae,R,i.top),tn=Ng(pt.fixed-Ze,at,pt.stretch,Y),qt=Bg(mt.stretch-Ce,ye,E,i.left),kn=Ng(mt.fixed-Pe,Ye,mt.stretch,G),Ft=Bg(_t.stretch-Ee,Ae,R,i.top),fn=Ng(_t.fixed-Ze,at,_t.stretch,Y),Ln=new ee(Dt,Wt),nr=new ee(qt,Wt),Dn=new ee(qt,Ft),wn=new ee(Dt,Ft),Or=new ee(it/v,tn/v),Fn=new ee(kn/v,fn/v),Bn=n*Math.PI/180;if(Bn){const Pr=Math.sin(Bn),Sr=Math.cos(Bn),qr=[Sr,-Pr,Pr,Sr];Ln._matMult(qr),nr._matMult(qr),wn._matMult(qr),Dn._matMult(qr)}const wr=tt.stretch+tt.fixed,Mr=pt.stretch+pt.fixed;return{tl:Ln,tr:nr,bl:wn,br:Dn,tex:{x:m.paddedRect.x+bd+wr,y:m.paddedRect.y+bd+Mr,w:mt.stretch+mt.fixed-wr,h:_t.stretch+_t.fixed-Mr},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Or,pixelOffsetBR:Fn,minFontScaleX:Ye/v/E,minFontScaleY:at/v/R,isSDF:o}};if(u&&(m.stretchX||m.stretchY)){const tt=r2(z,ae,G),pt=r2(L,ve,Y);for(let mt=0;mt<tt.length-1;mt++){const _t=tt[mt],Dt=tt[mt+1];for(let it=0;it<pt.length-1;it++)h.push(At(_t,pt[it],Dt,pt[it+1]))}}else h.push(At({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:x+1},{fixed:0,stretch:S+1}));return h}function Fg(i,n,o){let u=0;for(const h of i)u+=Math.max(n,Math.min(o,h[1]))-Math.max(n,Math.min(o,h[0]));return u}function r2(i,n,o){const u=[{fixed:-bd,stretch:0}];for(const[h,m]of i){const v=u[u.length-1];u.push({fixed:h-v.stretch,stretch:v.stretch}),u.push({fixed:h-v.stretch,stretch:v.stretch+(m-h)})}return u.push({fixed:n+bd,stretch:o}),u}function Bg(i,n,o,u){return i/n*o+u}function Ng(i,n,o,u){return i-n*o/u}function b3(i,n,o,u){const h=n+i.positionedLines[u].lineOffset;return u===0?o+h/2:o+(h+(n+i.positionedLines[u-1].lineOffset))/2}class w3{constructor(n=[],o=S3){if(this.data=n,this.length=this.data.length,this.compare=o,this.length>0)for(let u=(this.length>>1)-1;u>=0;u--)this._down(u)}push(n){this.data.push(n),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const n=this.data[0],o=this.data.pop();return this.length--,this.length>0&&(this.data[0]=o,this._down(0)),n}peek(){return this.data[0]}_up(n){const{data:o,compare:u}=this,h=o[n];for(;n>0;){const m=n-1>>1,v=o[m];if(u(h,v)>=0)break;o[n]=v,n=m}o[n]=h}_down(n){const{data:o,compare:u}=this,h=this.length>>1,m=o[n];for(;n<h;){let v=1+(n<<1),x=o[v];const S=v+1;if(S<this.length&&u(o[S],x)<0&&(v=S,x=o[S]),u(x,m)>=0)break;o[n]=x,n=v}o[n]=m}}function S3(i,n){return i<n?-1:i>n?1:0}function E3(i,n=1,o=!1){let u=1/0,h=1/0,m=-1/0,v=-1/0;const x=i[0];for(let H=0;H<x.length;H++){const G=x[H];(!H||G.x<u)&&(u=G.x),(!H||G.y<h)&&(h=G.y),(!H||G.x>m)&&(m=G.x),(!H||G.y>v)&&(v=G.y)}const S=Math.min(m-u,v-h);let E=S/2;const R=new w3([],C3);if(S===0)return new ee(u,h);for(let H=u;H<m;H+=S)for(let G=h;G<v;G+=S)R.push(new wd(H+E,G+E,E,i));let z=function(H){let G=0,Y=0,ae=0;const ve=H[0];for(let Ce=0,ye=ve.length,Ee=ye-1;Ce<ye;Ee=Ce++){const Ae=ve[Ce],Pe=ve[Ee],Ye=Ae.x*Pe.y-Pe.x*Ae.y;Y+=(Ae.x+Pe.x)*Ye,ae+=(Ae.y+Pe.y)*Ye,G+=3*Ye}return new wd(Y/G,ae/G,0,H)}(i),L=R.length;for(;R.length;){const H=R.pop();(H.d>z.d||!z.d)&&(z=H,o&&console.log("found best %d after %d probes",Math.round(1e4*H.d)/1e4,L)),H.max-z.d<=n||(E=H.h/2,R.push(new wd(H.p.x-E,H.p.y-E,E,i)),R.push(new wd(H.p.x+E,H.p.y-E,E,i)),R.push(new wd(H.p.x-E,H.p.y+E,E,i)),R.push(new wd(H.p.x+E,H.p.y+E,E,i)),L+=4)}return o&&(console.log(`num probes: ${L}`),console.log(`best distance: ${z.d}`)),z.p}function C3(i,n){return n.max-i.max}class wd{constructor(n,o,u,h){this.p=new ee(n,o),this.h=u,this.d=function(m,v){let x=!1,S=1/0;for(let E=0;E<v.length;E++){const R=v[E];for(let z=0,L=R.length,H=L-1;z<L;H=z++){const G=R[z],Y=R[H];G.y>m.y!=Y.y>m.y&&m.x<(Y.x-G.x)*(m.y-G.y)/(Y.y-G.y)+G.x&&(x=!x),S=Math.min(S,JE(m,G,Y))}}return(x?1:-1)*Math.sqrt(S)}(this.p,h),this.max=this.d+this.h*Math.SQRT2}}const Sd=7,ex=Number.POSITIVE_INFINITY,T3=Math.sqrt(2);function i2(i,[n,o]){let u=0,h=0;if(o===ex){n<0&&(n=0);const m=n/T3;switch(i){case"top-right":case"top-left":h=m-Sd;break;case"bottom-right":case"bottom-left":h=-m+Sd;break;case"bottom":h=-n+Sd;break;case"top":h=n-Sd}switch(i){case"top-right":case"bottom-right":u=-m;break;case"top-left":case"bottom-left":u=m;break;case"left":u=n;break;case"right":u=-n}}else{switch(n=Math.abs(n),o=Math.abs(o),i){case"top-right":case"top-left":case"top":h=o-Sd;break;case"bottom-right":case"bottom-left":case"bottom":h=-o+Sd}switch(i){case"top-right":case"bottom-right":case"right":u=-n;break;case"top-left":case"bottom-left":case"left":u=n}}return[u,h]}function I3(i,n,o,u,h,m,v,x,S,E){i.createArrays(),i.tilePixelRatio=gn/(512*i.overscaling),i.compareText={},i.iconsNeedLinear=!1;const R=i.layers[0].layout,z=i.layers[0]._unevaluatedLayout._values,L={};if(i.textSizeData.kind==="composite"){const{minZoom:Y,maxZoom:ae}=i.textSizeData;L.compositeTextSizes=[z["text-size"].possiblyEvaluate(new O(Y),x),z["text-size"].possiblyEvaluate(new O(ae),x)]}if(i.iconSizeData.kind==="composite"){const{minZoom:Y,maxZoom:ae}=i.iconSizeData;L.compositeIconSizes=[z["icon-size"].possiblyEvaluate(new O(Y),x),z["icon-size"].possiblyEvaluate(new O(ae),x)]}L.layoutTextSize=z["text-size"].possiblyEvaluate(new O(S+1),x),L.layoutIconSize=z["icon-size"].possiblyEvaluate(new O(S+1),x),L.textMaxSize=z["text-size"].possiblyEvaluate(new O(18),x);const H=R.get("text-rotation-alignment")==="map"&&R.get("symbol-placement")!=="point",G=R.get("text-size");for(const Y of i.features){const ae=R.get("text-font").evaluate(Y,{},x).join(","),ve=G.evaluate(Y,{},x),Ce=L.layoutTextSize.evaluate(Y,{},x),ye=(L.layoutIconSize.evaluate(Y,{},x),{horizontal:{},vertical:void 0}),Ee=Y.text;let Ae,Pe=[0,0];if(Ee){const at=Ee.toString(),At=R.get("text-letter-spacing").evaluate(Y,{},x)*ki,tt=R.get("text-line-height").evaluate(Y,{},x)*ki,pt=c_(at)?At:0,mt=R.get("text-anchor").evaluate(Y,{},x),_t=R.get("text-variable-anchor");if(!_t){const qt=R.get("text-radial-offset").evaluate(Y,{},x);Pe=qt?i2(mt,[qt*ki,ex]):R.get("text-offset").evaluate(Y,{},x).map(kn=>kn*ki)}let Dt=H?"center":R.get("text-justify").evaluate(Y,{},x);const it=R.get("symbol-placement")==="point",Wt=it?R.get("text-max-width").evaluate(Y,{},x)*ki:1/0,tn=qt=>{i.allowVerticalPlacement&&mf(at)&&(ye.vertical=Y_(Ee,n,o,h,ae,Wt,tt,mt,qt,pt,Pe,ta.vertical,!0,Ce,ve))};if(!H&&_t){const qt=Dt==="auto"?_t.map(Ft=>tx(Ft)):[Dt];let kn=!1;for(let Ft=0;Ft<qt.length;Ft++){const fn=qt[Ft];if(!ye.horizontal[fn])if(kn)ye.horizontal[fn]=ye.horizontal[0];else{const Ln=Y_(Ee,n,o,h,ae,Wt,tt,"center",fn,pt,Pe,ta.horizontal,!1,Ce,ve);Ln&&(ye.horizontal[fn]=Ln,kn=Ln.positionedLines.length===1)}}tn("left")}else{if(Dt==="auto"&&(Dt=tx(mt)),it||R.get("text-writing-mode").indexOf("horizontal")>=0||!mf(at)){const qt=Y_(Ee,n,o,h,ae,Wt,tt,mt,Dt,pt,Pe,ta.horizontal,!1,Ce,ve);qt&&(ye.horizontal[Dt]=qt)}tn(it?"left":Dt)}}let Ye=!1;if(Y.icon&&Y.icon.name){const at=u[Y.icon.name];at&&(Ae=y3(h[Y.icon.name],R.get("icon-offset").evaluate(Y,{},x),R.get("icon-anchor").evaluate(Y,{},x)),Ye=at.sdf,i.sdfIcons===void 0?i.sdfIcons=at.sdf:i.sdfIcons!==at.sdf&&Ct("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(at.pixelRatio!==i.pixelRatio||R.get("icon-rotate").constantOr(1)!==0)&&(i.iconsNeedLinear=!0))}const Ze=a2(ye.horizontal)||ye.vertical;i.iconsInText||(i.iconsInText=!!Ze&&Ze.iconsInText),(Ze||Ae)&&M3(i,Y,ye,Ae,u,L,Ce,0,Pe,Ye,v,x,E)}m&&i.generateCollisionDebugBuffers(S,i.collisionBoxArray)}function tx(i){switch(i){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function M3(i,n,o,u,h,m,v,x,S,E,R,z,L){let H=m.textMaxSize.evaluate(n,{},z);H===void 0&&(H=v);const G=i.layers[0].layout,Y=G.get("icon-offset").evaluate(n,{},z),ae=a2(o.horizontal)||o.vertical,ve=L.name==="globe",Ce=ki,ye=v/Ce,Ee=i.tilePixelRatio*H/Ce,Ae=(mt=i.overscaling,i.zoom>18&&mt>2&&(mt>>=1),Math.max(gn/(512*mt),1)*G.get("symbol-spacing")),Pe=G.get("text-padding")*i.tilePixelRatio,Ye=G.get("icon-padding")*i.tilePixelRatio,Ze=ie(G.get("text-max-angle")),at=G.get("text-rotation-alignment")==="map"&&G.get("symbol-placement")!=="point",At=G.get("icon-rotation-alignment")==="map"&&G.get("symbol-placement")!=="point",tt=G.get("symbol-placement"),pt=Ae/2;var mt;const _t=G.get("icon-text-fit");let Dt;u&&_t!=="none"&&(i.allowVerticalPlacement&&o.vertical&&(Dt=qC(u,o.vertical,_t,G.get("icon-text-fit-padding"),Y,ye)),ae&&(u=qC(u,ae,_t,G.get("icon-text-fit-padding"),Y,ye)));const it=(Wt,tn,qt)=>{if(tn.x<0||tn.x>=gn||tn.y<0||tn.y>=gn)return;let kn=null;if(ve){const{x:Ft,y:fn,z:Ln}=L.projectTilePoint(tn.x,tn.y,qt);kn={anchor:new nl(Ft,fn,Ln,0,void 0),up:L.upVector(qt,tn.x,tn.y)}}(function(Ft,fn,Ln,nr,Dn,wn,Or,Fn,Bn,wr,Mr,Pr,Sr,qr,ei,ci,Er,gi,ui,Yr,ir,di,Ar,uo,hi){const Li=Ft.addToLineVertexArray(fn,nr);let Ii,ho,Mi,ts,Td,Qf,ep,B2=0,N2=0,j2=0,U2=0,gx=-1,vx=-1;const Os={};let V2=h_("");const eu=Ln?Ln.anchor:fn;let yx=0,_x=0;if(Bn._unevaluatedLayout.getValue("text-radial-offset")===void 0?[yx,_x]=Bn.layout.get("text-offset").evaluate(ir,{},hi).map(Fo=>Fo*ki):(yx=Bn.layout.get("text-radial-offset").evaluate(ir,{},hi)*ki,_x=ex),Ft.allowVerticalPlacement&&Dn.vertical){const Fo=Dn.vertical;if(ei)Qf=nx(Fo),Fn&&(ep=nx(Fn));else{const Bo=Bn.layout.get("text-rotate").evaluate(ir,{},hi)+90;Mi=jg(wr,eu,fn,Mr,Pr,Sr,Fo,qr,Bo,ci),Fn&&(ts=jg(wr,eu,fn,Mr,Pr,Sr,Fn,gi,Bo))}}if(wn){const Fo=Bn.layout.get("icon-rotate").evaluate(ir,{},hi),Bo=Bn.layout.get("icon-text-fit")!=="none",tp=n2(wn,Fo,Ar,Bo),bx=Fn?n2(Fn,Fo,Ar,Bo):void 0;ho=jg(wr,eu,fn,Mr,Pr,Sr,wn,gi,Fo),B2=4*tp.length;const H2=Ft.iconSizeData;let tu=null;H2.kind==="source"?(tu=[Ja*Bn.layout.get("icon-size").evaluate(ir,{},hi)],tu[0]>Ul&&Ct(`${Ft.layerIds[0]}: Value for "icon-size" is >= ${Gf}. Reduce your "icon-size".`)):H2.kind==="composite"&&(tu=[Ja*di.compositeIconSizes[0].evaluate(ir,{},hi),Ja*di.compositeIconSizes[1].evaluate(ir,{},hi)],(tu[0]>Ul||tu[1]>Ul)&&Ct(`${Ft.layerIds[0]}: Value for "icon-size" is >= ${Gf}. Reduce your "icon-size".`)),Ft.addSymbols(Ft.icon,tp,tu,Yr,ui,ir,!1,Ln,fn,Li.lineStartIndex,Li.lineLength,-1,uo,hi),gx=Ft.icon.placedSymbolArray.length-1,bx&&(N2=4*bx.length,Ft.addSymbols(Ft.icon,bx,tu,Yr,ui,ir,ta.vertical,Ln,fn,Li.lineStartIndex,Li.lineLength,-1,uo,hi),vx=Ft.icon.placedSymbolArray.length-1)}for(const Fo in Dn.horizontal){const Bo=Dn.horizontal[Fo];Ii||(V2=h_(Bo.text),ei?Td=nx(Bo):Ii=jg(wr,eu,fn,Mr,Pr,Sr,Bo,qr,Bn.layout.get("text-rotate").evaluate(ir,{},hi),ci));const tp=Bo.positionedLines.length===1;if(j2+=o2(Ft,Ln,fn,Bo,Or,Bn,ei,ir,ci,Li,Dn.vertical?ta.horizontal:ta.horizontalOnly,tp?Object.keys(Dn.horizontal):[Fo],Os,gx,di,uo,hi),tp)break}Dn.vertical&&(U2+=o2(Ft,Ln,fn,Dn.vertical,Or,Bn,ei,ir,ci,Li,ta.vertical,["vertical"],Os,vx,di,uo,hi));let Zl=-1;const xx=(Fo,Bo)=>Fo?Math.max(Fo,Bo):Bo;Zl=xx(Td,Zl),Zl=xx(Qf,Zl),Zl=xx(ep,Zl);const n$=Zl>-1?1:0;Ft.glyphOffsetArray.length>=Hl.MAX_GLYPHS&&Ct("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),ir.sortKey!==void 0&&Ft.addToSortKeyRanges(Ft.symbolInstances.length,ir.sortKey),Ft.symbolInstances.emplaceBack(eu.x,eu.y,eu.z,fn.x,fn.y,Os.right>=0?Os.right:-1,Os.center>=0?Os.center:-1,Os.left>=0?Os.left:-1,Os.vertical>=0?Os.vertical:-1,gx,vx,V2,Ii!==void 0?Ii:Ft.collisionBoxArray.length,Ii!==void 0?Ii+1:Ft.collisionBoxArray.length,Mi!==void 0?Mi:Ft.collisionBoxArray.length,Mi!==void 0?Mi+1:Ft.collisionBoxArray.length,ho!==void 0?ho:Ft.collisionBoxArray.length,ho!==void 0?ho+1:Ft.collisionBoxArray.length,ts||Ft.collisionBoxArray.length,ts?ts+1:Ft.collisionBoxArray.length,Mr,j2,U2,B2,N2,n$,0,yx,_x,Zl)})(i,tn,kn,Wt,o,u,h,Dt,i.layers[0],i.collisionBoxArray,n.index,n.sourceLayerIndex,i.index,Pe,at,S,0,Ye,At,Y,n,m,E,R,z)};if(tt==="line")for(const Wt of QC(n.geometry,0,0,gn,gn)){const tn=x3(Wt,Ae,Ze,o.vertical||ae,u,Ce,Ee,i.overscaling,gn);for(const qt of tn)ae&&P3(i,ae.text,pt,qt)||it(Wt,qt,z)}else if(tt==="line-center"){for(const Wt of n.geometry)if(Wt.length>1){const tn=_3(Wt,Ze,o.vertical||ae,u,Ce,Ee);tn&&it(Wt,tn,z)}}else if(n.type==="Polygon")for(const Wt of U_(n.geometry,0)){const tn=E3(Wt,16);it(Wt[0],new nl(tn.x,tn.y,0,0,void 0),z)}else if(n.type==="LineString")for(const Wt of n.geometry)it(Wt,new nl(Wt[0].x,Wt[0].y,0,0,void 0),z);else if(n.type==="Point")for(const Wt of n.geometry)for(const tn of Wt)it([tn],new nl(tn.x,tn.y,0,0,void 0),z)}const Gf=255,Ul=Gf*Ja;function o2(i,n,o,u,h,m,v,x,S,E,R,z,L,H,G,Y,ae){const ve=function(Ee,Ae,Pe,Ye,Ze,at,At,tt){const pt=[];if(Ae.positionedLines.length===0)return pt;const mt=Ye.layout.get("text-rotate").evaluate(at,{})*Math.PI/180,_t=function(qt){const kn=qt[0],Ft=qt[1],fn=kn*Ft;return fn>0?[kn,-Ft]:fn<0?[-kn,Ft]:kn===0?[Ft,kn]:[Ft,-kn]}(Pe);let Dt=Math.abs(Ae.top-Ae.bottom);for(const qt of Ae.positionedLines)Dt-=qt.lineOffset;const it=Ae.positionedLines.length,Wt=Dt/it;let tn=Ae.top-Pe[1];for(let qt=0;qt<it;++qt){const kn=Ae.positionedLines[qt];tn=b3(Ae,Wt,tn,qt);for(const Ft of kn.positionedGlyphs){if(!Ft.rect)continue;const fn=Ft.rect||{};let Ln=BC+1,nr=!0,Dn=1,wn=0;if(Ft.imageName){const Ar=At[Ft.imageName];if(!Ar)continue;if(Ar.sdf){Ct("SDF images are not supported in formatted text and will be ignored.");continue}nr=!1,Dn=Ar.pixelRatio,Ln=wo/Dn}const Or=(Ze||tt)&&Ft.vertical,Fn=Ft.metrics.advance*Ft.scale/2,Bn=Ft.metrics,wr=Ft.rect;if(wr===null)continue;tt&&Ae.verticalizable&&(wn=Ft.imageName?Fn-Ft.metrics.width*Ft.scale/2:0);const Mr=Ze?[Ft.x+Fn,Ft.y]:[0,0];let Pr=[0,0],Sr=[0,0],qr=!1;Ze||(Or?(Sr=[Ft.x+Fn+_t[0],Ft.y+_t[1]-wn],qr=!0):Pr=[Ft.x+Fn+Pe[0],Ft.y+Pe[1]-wn]);const ei=wr.w*Ft.scale/(Dn*(Ft.localGlyph?Qa:1)),ci=wr.h*Ft.scale/(Dn*(Ft.localGlyph?Qa:1));let Er,gi,ui,Yr;if(Or){const Ar=Ft.y-tn,uo=new ee(-Fn,Fn-Ar),hi=-Math.PI/2,Li=new ee(...Sr);Er=new ee(-Fn+Pr[0],Pr[1]),Er._rotateAround(hi,uo)._add(Li),Er.x+=-Ar+Fn,Er.y-=(Bn.left-Ln)*Ft.scale;const Ii=Ft.imageName?Bn.advance*Ft.scale:ki*Ft.scale,ho=String.fromCharCode(Ft.glyph);n3(ho)?Er.x+=(1-Ln)*Ft.scale:r3(ho)?Er.x+=Ii-Bn.height*Ft.scale+(-Ln-1)*Ft.scale:Er.x+=Ft.imageName||Bn.width+2*Ln===wr.w&&Bn.height+2*Ln===wr.h?(Ii-ci)/2:(Ii-(Bn.height+2*Ln)*Ft.scale)/2,gi=new ee(Er.x,Er.y-ei),ui=new ee(Er.x+ci,Er.y),Yr=new ee(Er.x+ci,Er.y-ei)}else{const Ar=(Bn.left-Ln)*Ft.scale-Fn+Pr[0],uo=(-Bn.top-Ln)*Ft.scale+Pr[1],hi=Ar+ei,Li=uo+ci;Er=new ee(Ar,uo),gi=new ee(hi,uo),ui=new ee(Ar,Li),Yr=new ee(hi,Li)}if(mt){let Ar;Ar=Ze?new ee(0,0):qr?new ee(_t[0],_t[1]):new ee(Pe[0],Pe[1]),Er._rotateAround(mt,Ar),gi._rotateAround(mt,Ar),ui._rotateAround(mt,Ar),Yr._rotateAround(mt,Ar)}const ir=new ee(0,0),di=new ee(0,0);pt.push({tl:Er,tr:gi,bl:ui,br:Yr,tex:fn,writingMode:Ae.writingMode,glyphOffset:Mr,sectionIndex:Ft.sectionIndex,isSDF:nr,pixelOffsetTL:ir,pixelOffsetBR:di,minFontScaleX:0,minFontScaleY:0})}}return pt}(0,u,S,m,v,x,h,i.allowVerticalPlacement),Ce=i.textSizeData;let ye=null;Ce.kind==="source"?(ye=[Ja*m.layout.get("text-size").evaluate(x,{},ae)],ye[0]>Ul&&Ct(`${i.layerIds[0]}: Value for "text-size" is >= ${Gf}. Reduce your "text-size".`)):Ce.kind==="composite"&&(ye=[Ja*G.compositeTextSizes[0].evaluate(x,{},ae),Ja*G.compositeTextSizes[1].evaluate(x,{},ae)],(ye[0]>Ul||ye[1]>Ul)&&Ct(`${i.layerIds[0]}: Value for "text-size" is >= ${Gf}. Reduce your "text-size".`)),i.addSymbols(i.text,ve,ye,S,v,x,R,n,o,E.lineStartIndex,E.lineLength,H,Y,ae);for(const Ee of z)L[Ee]=i.text.placedSymbolArray.length-1;return 4*ve.length}function a2(i){for(const n in i)return i[n];return null}function jg(i,n,o,u,h,m,v,x,S,E){let R=v.top,z=v.bottom,L=v.left,H=v.right;const G=v.collisionPadding;if(G&&(L-=G[0],R-=G[1],H+=G[2],z+=G[3]),S){const Y=new ee(L,R),ae=new ee(H,R),ve=new ee(L,z),Ce=new ee(H,z),ye=ie(S);let Ee=new ee(0,0);E&&(Ee=new ee(E[0],E[1])),Y._rotateAround(ye,Ee),ae._rotateAround(ye,Ee),ve._rotateAround(ye,Ee),Ce._rotateAround(ye,Ee),L=Math.min(Y.x,ae.x,ve.x,Ce.x),H=Math.max(Y.x,ae.x,ve.x,Ce.x),R=Math.min(Y.y,ae.y,ve.y,Ce.y),z=Math.max(Y.y,ae.y,ve.y,Ce.y)}return i.emplaceBack(n.x,n.y,n.z,o.x,o.y,L,R,H,z,x,u,h,m),i.length-1}function nx(i){i.collisionPadding&&(i.top-=i.collisionPadding[1],i.bottom+=i.collisionPadding[3]);const n=i.bottom-i.top;return n>0?Math.max(10,n):null}function P3(i,n,o,u){const h=i.compareText;if(n in h){const m=h[n];for(let v=m.length-1;v>=0;v--)if(u.dist(m[v])<o)return!0}else h[n]=[];return h[n].push(u),!1}function s2(i,n){const o=i.fovAboveCenter,u=i.elevation?i.elevation.getMinElevationBelowMSL()*n:0,h=(i._camera.position[2]*i.worldSize-u)/Math.cos(i._pitch),m=Math.sin(o)*h/Math.sin(Math.max(Math.PI/2-i._pitch-o,.01)),v=Math.sin(i._pitch)*m+h;return Math.min(1.01*v,h*(1/i._horizonShift))}function Jc(i,n){if(!n.isReprojectedInTileSpace)return{scale:1<<i.z,x:i.x,y:i.y,x2:i.x+1,y2:i.y+1,projection:n};const o=Math.pow(2,-i.z),u=i.x*o,h=(i.x+1)*o,m=i.y*o,v=(i.y+1)*o,x=ea(u),S=ea(h),E=Gi(m),R=Gi(v),z=n.project(x,E),L=n.project(S,E),H=n.project(S,R),G=n.project(x,R);let Y=Math.min(z.x,L.x,H.x,G.x),ae=Math.min(z.y,L.y,H.y,G.y),ve=Math.max(z.x,L.x,H.x,G.x),Ce=Math.max(z.y,L.y,H.y,G.y);const ye=o/16;function Ee(Pe,Ye,Ze,at,At,tt){const pt=(Ze+At)/2,mt=(at+tt)/2,_t=n.project(ea(pt),Gi(mt)),Dt=Math.max(0,Y-_t.x,ae-_t.y,_t.x-ve,_t.y-Ce);Y=Math.min(Y,_t.x),ve=Math.max(ve,_t.x),ae=Math.min(ae,_t.y),Ce=Math.max(Ce,_t.y),Dt>ye&&(Ee(Pe,_t,Ze,at,pt,mt),Ee(_t,Ye,pt,mt,At,tt))}Ee(z,L,u,m,h,m),Ee(L,H,h,m,h,v),Ee(H,G,h,v,u,v),Ee(G,z,u,v,u,m),Y-=ye,ae-=ye,ve+=ye,Ce+=ye;const Ae=1/Math.max(ve-Y,Ce-ae);return{scale:Ae,x:Y*Ae,y:ae*Ae,x2:ve*Ae,y2:Ce*Ae,projection:n}}const A3=Xa(new Float32Array(16));class Vl{constructor(n){this.spec=n,this.name=n.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(n,o){return{x:0,y:0,z:0}}unproject(n,o){return new br(0,0)}projectTilePoint(n,o,u){return{x:n,y:o,z:0}}locationPoint(n,o,u=!0){return n._coordinatePoint(n.locationCoordinate(o),u)}pixelsPerMeter(n,o){return Ya(1,n)*o}pixelSpaceConversion(n,o,u){return 1}farthestPixelDistance(n){return s2(n,n.pixelsPerMeter)}pointCoordinate(n,o,u,h){const m=n.horizonLineFromTop(!1),v=new ee(o,Math.max(m,u));return n.rayIntersectionCoordinate(n.pointRayIntersection(v,h))}pointCoordinate3D(n,o,u){const h=new ee(o,u);if(n.elevation)return n.elevation.pointCoordinate(h);{const m=this.pointCoordinate(n,h.x,h.y,0);return[m.x,m.y,m.z]}}isPointAboveHorizon(n,o){if(n.elevation)return!this.pointCoordinate3D(n,o.x,o.y);const u=n.horizonLineFromTop();return o.y<u}createInversionMatrix(n,o){return A3}createTileMatrix(n,o,u){let h,m,v;const x=u.canonical,S=Xa(new Float64Array(16));if(this.isReprojectedInTileSpace){const E=Jc(x,this);h=1,m=E.x+u.wrap*E.scale,v=E.y,Gc(S,S,[h/E.scale,h/E.scale,n.pixelsPerMeter/o])}else h=o/n.zoomScale(x.z),m=(x.x+Math.pow(2,x.z)*u.wrap)*h,v=x.y*h;return wf(S,S,[m,v,0]),Gc(S,S,[h/gn,h/gn,1]),S}upVector(n,o,u){return[0,0,1]}upVectorScale(n,o,u){return{metersToTile:1}}}class R3 extends Vl{constructor(n){super(n),this.range=[4,7],this.center=n.center||[-96,37.5];const[o,u]=this.parallels=n.parallels||[29.5,45.5],h=Math.sin(ie(o));this.n=(h+Math.sin(ie(u)))/2,this.c=1+h*(2*this.n-h),this.r0=Math.sqrt(this.c)/this.n}project(n,o){const{n:u,c:h,r0:m}=this,v=ie(n-this.center[0]),x=ie(o),S=Math.sqrt(h-2*u*Math.sin(x))/u;return{x:S*Math.sin(v*u),y:S*Math.cos(v*u)-m,z:0}}unproject(n,o){const{n:u,c:h,r0:m}=this,v=m+o;let x=Math.atan2(n,Math.abs(v))*Math.sign(v);v*u<0&&(x-=Math.PI*Math.sign(n)*Math.sign(v));const S=ie(this.center[0])*u;x=Be(x,-Math.PI-S,Math.PI-S);const E=pe(fe(x/u)+this.center[0],-180,180),R=Math.asin(pe((h-(n*n+v*v)*u*u)/(2*u),-1,1)),z=pe(fe(R),-Wi,Wi);return new br(E,z)}}const Wf=1.340264,qf=-.081106,Zf=893e-6,Xf=.003796,Ug=Math.sqrt(3)/2;class O3 extends Vl{project(n,o){o=o/180*Math.PI,n=n/180*Math.PI;const u=Math.asin(Ug*Math.sin(o)),h=u*u,m=h*h*h;return{x:.5*(n*Math.cos(u)/(Ug*(Wf+3*qf*h+m*(7*Zf+9*Xf*h)))/Math.PI+.5),y:1-.5*(u*(Wf+qf*h+m*(Zf+Xf*h))/Math.PI+1),z:0}}unproject(n,o){n=(2*n-.5)*Math.PI;let u=o=(2*(1-o)-1)*Math.PI,h=u*u,m=h*h*h;for(let R,z,L,H=0;H<12&&(z=u*(Wf+qf*h+m*(Zf+Xf*h))-o,L=Wf+3*qf*h+m*(7*Zf+9*Xf*h),R=z/L,u=pe(u-R,-Math.PI/3,Math.PI/3),h=u*u,m=h*h*h,!(Math.abs(R)<1e-12));++H);const v=Ug*n*(Wf+3*qf*h+m*(7*Zf+9*Xf*h))/Math.cos(u),x=Math.asin(Math.sin(u)/Ug),S=pe(180*v/Math.PI,-180,180),E=pe(180*x/Math.PI,-Wi,Wi);return new br(S,E)}}class z3 extends Vl{constructor(n){super(n),this.wrap=!0,this.supportsWorldCopies=!0}project(n,o){return{x:.5+n/360,y:.5-o/360,z:0}}unproject(n,o){const u=360*(n-.5),h=pe(360*(.5-o),-Wi,Wi);return new br(u,h)}}const Ed=Math.PI/2;function Vg(i){return Math.tan((Ed+i)/2)}class k3 extends Vl{constructor(n){super(n),this.center=n.center||[0,30];const[o,u]=this.parallels=n.parallels||[30,30];let h=ie(o),m=ie(u);this.southernCenter=h+m<0,this.southernCenter&&(h=-h,m=-m);const v=Math.cos(h),x=Vg(h);this.n=h===m?Math.sin(h):Math.log(v/Math.cos(m))/Math.log(Vg(m)/x),this.f=v*Math.pow(Vg(h),this.n)/this.n}project(n,o){o=ie(o),this.southernCenter&&(o=-o),n=ie(n-this.center[0]);const u=1e-6,{n:h,f:m}=this;m>0?o<-Ed+u&&(o=-Ed+u):o>Ed-u&&(o=Ed-u);const v=m/Math.pow(Vg(o),h);let x=v*Math.sin(h*n),S=m-v*Math.cos(h*n);return x=.5*(x/Math.PI+.5),S=.5*(S/Math.PI+.5),{x,y:this.southernCenter?S:1-S,z:0}}unproject(n,o){n=(2*n-.5)*Math.PI,this.southernCenter&&(o=1-o),o=(2*(1-o)-.5)*Math.PI;const{n:u,f:h}=this,m=h-o,v=Math.sign(m),x=Math.sign(u)*Math.sqrt(n*n+m*m);let S=Math.atan2(n,Math.abs(m))*v;m*u<0&&(S-=Math.PI*Math.sign(n)*v);const E=pe(fe(S/u)+this.center[0],-180,180),R=pe(fe(2*Math.atan(Math.pow(h/x,1/u))-Ed),-Wi,Wi);return new br(E,this.southernCenter?-R:R)}}class l2 extends Vl{constructor(n){super(n),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(n,o){return{x:Is(n),y:Ms(o),z:0}}unproject(n,o){const u=ea(n),h=Gi(o);return new br(u,h)}}const c2=ie(Wi);class L3 extends Vl{project(n,o){const u=(o=ie(o))*o,h=u*u;return{x:.5*((n=ie(n))*(.8707-.131979*u+h*(h*(.003971*u-.001529*h)-.013791))/Math.PI+.5),y:1-.5*(o*(1.007226+u*(.015085+h*(.028874*u-.044475-.005916*h)))/Math.PI+1),z:0}}unproject(n,o){n=(2*n-.5)*Math.PI;let u=o=(2*(1-o)-1)*Math.PI,h=25,m=0,v=u*u;do{v=u*u;const E=v*v;m=(u*(1.007226+v*(.015085+E*(.028874*v-.044475-.005916*E)))-o)/(1.007226+v*(.045255+E*(.259866*v-.311325-.005916*11*E))),u=pe(u-m,-c2,c2)}while(Math.abs(m)>1e-6&&--h>0);v=u*u;const x=pe(fe(n/(.8707+v*(v*(v*v*v*(.003971-.001529*v)-.013791)-.131979))),-180,180),S=fe(u);return new br(x,S)}}const u2=ie(Wi);class D3 extends Vl{project(n,o){o=ie(o),n=ie(n);const u=Math.cos(o),h=2/Math.PI,m=Math.acos(u*Math.cos(n/2)),v=Math.sin(m)/m,x=.5*(n*h+2*u*Math.sin(n/2)/v)||0,S=.5*(o+Math.sin(o)/v)||0;return{x:.5*(x/Math.PI+.5),y:1-.5*(S/Math.PI+1),z:0}}unproject(n,o){let u=n=(2*n-.5)*Math.PI,h=o=(2*(1-o)-1)*Math.PI,m=25;const v=1e-6;let x=0,S=0;do{const E=Math.cos(h),R=Math.sin(h),z=2*R*E,L=R*R,H=E*E,G=Math.cos(u/2),Y=Math.sin(u/2),ae=2*G*Y,ve=Y*Y,Ce=1-H*G*G,ye=Ce?1/Ce:0,Ee=Ce?Math.acos(E*G)*Math.sqrt(1/Ce):0,Ae=.5*(2*Ee*E*Y+2*u/Math.PI)-n,Pe=.5*(Ee*R+h)-o,Ye=.5*ye*(H*ve+Ee*E*G*L)+1/Math.PI,Ze=ye*(ae*z/4-Ee*R*Y),at=.125*ye*(z*Y-Ee*R*H*ae),At=.5*ye*(L*G+Ee*ve*E)+.5,tt=Ze*at-At*Ye;x=(Pe*Ze-Ae*At)/tt,S=(Ae*at-Pe*Ye)/tt,u=pe(u-x,-Math.PI,Math.PI),h=pe(h-S,-u2,u2)}while((Math.abs(x)>v||Math.abs(S)>v)&&--m>0);return new br(fe(u),fe(h))}}class d2 extends Vl{constructor(n){super(n),this.center=n.center||[0,0],this.parallels=n.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(ie(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(n,o){const{scale:u,cosPhi:h}=this;return{x:ie(n)*h*u+.5,y:-Math.sin(ie(o))/h*u+.5,z:0}}unproject(n,o){const{scale:u,cosPhi:h}=this,m=-(o-.5)/u,v=pe(fe((n-.5)/u)/h,-180,180),x=Math.asin(pe(m*h,-1,1)),S=pe(fe(x),-Wi,Wi);return new br(v,S)}}class $3 extends l2{constructor(n){super(n),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(n,o,u){const h=Af(n,o,u);return ii(h,h,Rf(Ts(u))),{x:h[0],y:h[1],z:h[2]}}locationPoint(n,o){const u=cd(o.lat,o.lng),h=so([],u),m=n.elevation?n.elevation.getAtPointOrZero(n.locationCoordinate(o),n._centerAltitude):n._centerAltitude;Tf(u,u,h,Ya(1,0)*gn*m);const v=Xa(new Float64Array(16));return Hc(v,n.pixelMatrix,n.globeMatrix),ii(u,u,v),new ee(u[0],u[1])}pixelsPerMeter(n,o){return Ya(1,0)*o}pixelSpaceConversion(n,o,u){const h=Ya(1,n)*o,m=Jn(Ya(1,45)*o,h,u);return this.pixelsPerMeter(n,o)/m}createTileMatrix(n,o,u){const h=T_(Ts(u.canonical));return Hc(new Float64Array(16),n.globeMatrix,h)}createInversionMatrix(n,o){const{center:u}=n,h=Rf(Ts(o));return vg(h,h,ie(u.lng)),g_(h,h,ie(u.lat)),Gc(h,h,[n._pixelsPerMercatorPixel,n._pixelsPerMercatorPixel,1]),Float32Array.from(h)}pointCoordinate(n,o,u,h){return FE(n,o,u,!0)||new dd(0,0)}pointCoordinate3D(n,o,u){const h=this.pointCoordinate(n,o,u,0);return[h.x,h.y,h.z]}isPointAboveHorizon(n,o){return!FE(n,o.x,o.y,!1)}farthestPixelDistance(n){const o=function(h,m){const v=h.cameraToCenterDistance,x=h._centerAltitude*m,S=h._camera,E=h._camera.forward(),R=Js([],Qo([],E,-v),[0,0,x]),z=h.worldSize/(2*Math.PI),L=[0,0,-z],H=h.width/h.height,G=Math.tan(h.fovAboveCenter),Y=Qo([],S.up(),G),ae=Qo([],S.right(),G*H),ve=so([],Js([],Js([],E,Y),ae)),Ce=[];let ye;if(new x_(R,ve).closestPointOnSphere(L,z,Ce)){const Ee=Js([],Ce,L),Ae=Ka([],Ee,R);ye=Math.cos(h.fovAboveCenter)*Sf(Ae)}else{const Ee=Ka([],R,L),Ae=Ka([],L,R);so(Ae,Ae);const Pe=Sf(Ee)-z;ye=Math.sqrt(Pe*(Pe+2*z));const Ye=Math.acos(ye/(z+Pe))-Math.acos(Sa(E,Ae));ye*=Math.cos(Ye)}return 1.01*ye}(n,this.pixelsPerMeter(n.center.lat,n.worldSize)),u=ud(n.zoom);if(u>0){const h=s2(n,Ya(1,n.center.lat)*n.worldSize),m=n.worldSize/(2*Math.PI),v=Math.max(n.width,n.height)/n.worldSize*Math.PI;return Jn(o,h+m*(1-Math.cos(v)),Math.pow(u,10))}return o}upVector(n,o,u){return Af(o,u,n,1)}upVectorScale(n){return{metersToTile:yg(xg(Ts(n)))}}}function h2(i){const n=i.parallels,o=!!n&&Math.abs(n[0]+n[1])<.01;switch(i.name){case"mercator":return new l2(i);case"equirectangular":return new z3(i);case"naturalEarth":return new L3(i);case"equalEarth":return new O3(i);case"winkelTripel":return new D3(i);case"albers":return o?new d2(i):new R3(i);case"lambertConformalConic":return o?new d2(i):new k3(i);case"globe":return new $3(i)}throw new Error(`Invalid projection name: ${i.name}`)}const F3=Ag.types,B3=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Hg(i,n,o,u,h,m,v,x,S,E,R,z,L){const H=x?Math.min(Ul,Math.round(x[0])):0,G=x?Math.min(Ul,Math.round(x[1])):0;i.emplaceBack(n,o,Math.round(32*u),Math.round(32*h),m,v,(H<<1)+(S?1:0),G,16*E,16*R,256*z,256*L)}function Gg(i,n,o,u,h,m,v){i.emplaceBack(n,o,u,h,m,v)}function Wg(i,n,o,u,h){i.emplaceBack(n,o,u,h),i.emplaceBack(n,o,u,h),i.emplaceBack(n,o,u,h),i.emplaceBack(n,o,u,h)}function N3(i){for(const n of i.sections)if(d_(n.text))return!0;return!1}class rx{constructor(n){this.layoutVertexArray=new vt,this.indexArray=new cn,this.programConfigurations=n,this.segments=new si,this.dynamicLayoutVertexArray=new Et,this.opacityVertexArray=new dn,this.placedSymbolArray=new ai,this.globeExtVertexArray=new kt}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(n,o,u,h){this.isEmpty()||(u&&(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,ZD.members),this.indexBuffer=n.createIndexBuffer(this.indexArray,o),this.dynamicLayoutVertexBuffer=n.createVertexBuffer(this.dynamicLayoutVertexArray,KD.members,!0),this.opacityVertexBuffer=n.createVertexBuffer(this.opacityVertexArray,B3,!0),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=n.createVertexBuffer(this.globeExtVertexArray,XD.members,!0)),this.opacityVertexBuffer.itemSize=1),(u||h)&&this.programConfigurations.upload(n))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}}Jt(rx,"SymbolBuffers");class ix{constructor(n,o,u){this.layoutVertexArray=new n,this.layoutAttributes=o,this.indexArray=new u,this.segments=new si,this.collisionVertexArray=new Hn,this.collisionVertexArrayExt=new Un}upload(n){this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=n.createVertexBuffer(this.collisionVertexArray,YD.members,!0),this.collisionVertexBufferExt=n.createVertexBuffer(this.collisionVertexArrayExt,JD.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}Jt(ix,"CollisionBuffers");class Hl{constructor(n){this.collisionBoxArray=n.collisionBoxArray,this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(v=>v.id),this.index=n.index,this.pixelRatio=n.pixelRatio,this.sourceLayerIndex=n.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Xa([]),this.placementViewportMatrix=Xa([]);const o=this.layers[0]._unevaluatedLayout._values;this.textSizeData=W_(this.zoom,o["text-size"]),this.iconSizeData=W_(this.zoom,o["icon-size"]);const u=this.layers[0].layout,h=u.get("symbol-sort-key"),m=u.get("symbol-z-order");this.canOverlap=u.get("text-allow-overlap")||u.get("icon-allow-overlap")||u.get("text-ignore-placement")||u.get("icon-ignore-placement"),this.sortFeaturesByKey=m!=="viewport-y"&&h.constantOr(1)!==void 0,this.sortFeaturesByY=(m==="viewport-y"||m==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=u.get("text-writing-mode").map(v=>ta[v]),this.stateDependentLayerIds=this.layers.filter(v=>v.isStateDependent()).map(v=>v.id),this.sourceID=n.sourceID,this.projection=n.projection}createArrays(){this.text=new rx(new Vc(this.layers,this.zoom,n=>/^text/.test(n))),this.icon=new rx(new Vc(this.layers,this.zoom,n=>/^icon/.test(n))),this.glyphOffsetArray=new ao,this.lineVertexArray=new id,this.symbolInstances=new kr}calculateGlyphDependencies(n,o,u,h,m){for(let v=0;v<n.length;v++)if(o[n.charCodeAt(v)]=!0,h&&m){const x=Uf[n.charAt(v)];x&&(o[x.charCodeAt(0)]=!0)}}populate(n,o,u,h){const m=this.layers[0],v=m.layout,x=this.projection.name==="globe",S=v.get("text-font"),E=v.get("text-field"),R=v.get("icon-image"),z=(E.value.kind!=="constant"||E.value.value instanceof Yn&&!E.value.value.isEmpty()||E.value.value.toString().length>0)&&(S.value.kind!=="constant"||S.value.value.length>0),L=R.value.kind!=="constant"||!!R.value.value||Object.keys(R.parameters).length>0,H=v.get("symbol-sort-key");if(this.features=[],!z&&!L)return;const G=o.iconDependencies,Y=o.glyphDependencies,ae=o.availableImages,ve=new O(this.zoom);for(const{feature:Ce,id:ye,index:Ee,sourceLayerIndex:Ae}of n){const Pe=m._featureFilter.needGeometry,Ye=Xc(Ce,Pe);if(!m._featureFilter.filter(ve,Ye,u))continue;if(Pe||(Ye.geometry=Qs(Ce,u,h)),x&&Ce.type!==1&&u.z<=5){const tt=Ye.geometry,pt=.98078528056,mt=(_t,Dt)=>Sa(Af(_t.x,_t.y,u,1),Af(Dt.x,Dt.y,u,1))<pt;for(let _t=0;_t<tt.length;_t++)tt[_t]=KL(tt[_t],mt)}let Ze,at;if(z){const tt=m.getValueAndResolveTokens("text-field",Ye,u,ae),pt=Yn.factory(tt);N3(pt)&&(this.hasRTLText=!0),(!this.hasRTLText||b()==="unavailable"||this.hasRTLText&&P.isParsed())&&(Ze=t3(pt,m,Ye))}if(L){const tt=m.getValueAndResolveTokens("icon-image",Ye,u,ae);at=tt instanceof dr?tt:dr.fromString(tt)}if(!Ze&&!at)continue;const At=this.sortFeaturesByKey?H.evaluate(Ye,{},u):void 0;if(this.features.push({id:ye,text:Ze,icon:at,index:Ee,sourceLayerIndex:Ae,geometry:Ye.geometry,properties:Ce.properties,type:F3[Ce.type],sortKey:At}),at&&(G[at.name]=!0),Ze){const tt=S.evaluate(Ye,{},u).join(","),pt=v.get("text-rotation-alignment")==="map"&&v.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(ta.vertical)>=0;for(const mt of Ze.sections)if(mt.image)G[mt.image.name]=!0;else{const _t=mf(Ze.toString()),Dt=mt.fontStack||tt,it=Y[Dt]=Y[Dt]||{};this.calculateGlyphDependencies(mt.text,it,pt,this.allowVerticalPlacement,_t)}}}v.get("symbol-placement")==="line"&&(this.features=function(Ce){const ye={},Ee={},Ae=[];let Pe=0;function Ye(tt){Ae.push(Ce[tt]),Pe++}function Ze(tt,pt,mt){const _t=Ee[tt];return delete Ee[tt],Ee[pt]=_t,Ae[_t].geometry[0].pop(),Ae[_t].geometry[0]=Ae[_t].geometry[0].concat(mt[0]),_t}function at(tt,pt,mt){const _t=ye[pt];return delete ye[pt],ye[tt]=_t,Ae[_t].geometry[0].shift(),Ae[_t].geometry[0]=mt[0].concat(Ae[_t].geometry[0]),_t}function At(tt,pt,mt){const _t=mt?pt[0][pt[0].length-1]:pt[0][0];return`${tt}:${_t.x}:${_t.y}`}for(let tt=0;tt<Ce.length;tt++){const pt=Ce[tt],mt=pt.geometry,_t=pt.text?pt.text.toString():null;if(!_t){Ye(tt);continue}const Dt=At(_t,mt),it=At(_t,mt,!0);if(Dt in Ee&&it in ye&&Ee[Dt]!==ye[it]){const Wt=at(Dt,it,mt),tn=Ze(Dt,it,Ae[Wt].geometry);delete ye[Dt],delete Ee[it],Ee[At(_t,Ae[tn].geometry,!0)]=tn,Ae[Wt].geometry=null}else Dt in Ee?Ze(Dt,it,mt):it in ye?at(Dt,it,mt):(Ye(tt),ye[Dt]=Pe-1,Ee[it]=Pe-1)}return Ae.filter(tt=>tt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Ce,ye)=>Ce.sortKey-ye.sortKey)}update(n,o,u,h){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(n,o,this.layers,u,h),this.icon.programConfigurations.updatePaintArrays(n,o,this.layers,u,h))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(n){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(n),this.iconCollisionBox.upload(n)),this.text.upload(n,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(n,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=h2(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(n,o){const u=this.lineVertexArray.length;if(n.segment!==void 0)for(const{x:h,y:m}of o)this.lineVertexArray.emplaceBack(h,m);return{lineStartIndex:u,lineLength:this.lineVertexArray.length-u}}addSymbols(n,o,u,h,m,v,x,S,E,R,z,L,H,G){const Y=n.indexArray,ae=n.layoutVertexArray,ve=n.globeExtVertexArray,Ce=n.segments.prepareSegment(4*o.length,ae,Y,this.canOverlap?v.sortKey:void 0),ye=this.glyphOffsetArray.length,Ee=Ce.vertexLength,Ae=this.allowVerticalPlacement&&x===ta.vertical?Math.PI/2:0,Pe=v.text&&v.text.sections;for(let Ze=0;Ze<o.length;Ze++){const{tl:at,tr:At,bl:tt,br:pt,tex:mt,pixelOffsetTL:_t,pixelOffsetBR:Dt,minFontScaleX:it,minFontScaleY:Wt,glyphOffset:tn,isSDF:qt,sectionIndex:kn}=o[Ze],Ft=Ce.vertexLength,fn=tn[1];if(Hg(ae,E.x,E.y,at.x,fn+at.y,mt.x,mt.y,u,qt,_t.x,_t.y,it,Wt),Hg(ae,E.x,E.y,At.x,fn+At.y,mt.x+mt.w,mt.y,u,qt,Dt.x,_t.y,it,Wt),Hg(ae,E.x,E.y,tt.x,fn+tt.y,mt.x,mt.y+mt.h,u,qt,_t.x,Dt.y,it,Wt),Hg(ae,E.x,E.y,pt.x,fn+pt.y,mt.x+mt.w,mt.y+mt.h,u,qt,Dt.x,Dt.y,it,Wt),S){const{x:Ln,y:nr,z:Dn}=S.anchor,[wn,Or,Fn]=S.up;Gg(ve,Ln,nr,Dn,wn,Or,Fn),Gg(ve,Ln,nr,Dn,wn,Or,Fn),Gg(ve,Ln,nr,Dn,wn,Or,Fn),Gg(ve,Ln,nr,Dn,wn,Or,Fn),Wg(n.dynamicLayoutVertexArray,Ln,nr,Dn,Ae)}else Wg(n.dynamicLayoutVertexArray,E.x,E.y,E.z,Ae);Y.emplaceBack(Ft,Ft+1,Ft+2),Y.emplaceBack(Ft+1,Ft+2,Ft+3),Ce.vertexLength+=4,Ce.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(tn[0]),Ze!==o.length-1&&kn===o[Ze+1].sectionIndex||n.programConfigurations.populatePaintArrays(ae.length,v,v.index,{},H,G,Pe&&Pe[kn])}const Ye=S?S.anchor:E;n.placedSymbolArray.emplaceBack(Ye.x,Ye.y,Ye.z,E.x,E.y,ye,this.glyphOffsetArray.length-ye,Ee,R,z,E.segment,u?u[0]:0,u?u[1]:0,h[0],h[1],x,0,!1,0,L,0)}_commitLayoutVertex(n,o,u,h,m,v,x){n.emplaceBack(o,u,h,m,v,Math.round(x.x),Math.round(x.y))}_addCollisionDebugVertices(n,o,u,h,m,v,x){const S=u.segments.prepareSegment(4,u.layoutVertexArray,u.indexArray),E=S.vertexLength,R=x.tileAnchorX,z=x.tileAnchorY;for(let H=0;H<4;H++)u.collisionVertexArray.emplaceBack(0,0,0,0);u.collisionVertexArrayExt.emplaceBack(o,-n.padding,-n.padding),u.collisionVertexArrayExt.emplaceBack(o,n.padding,-n.padding),u.collisionVertexArrayExt.emplaceBack(o,n.padding,n.padding),u.collisionVertexArrayExt.emplaceBack(o,-n.padding,n.padding),this._commitLayoutVertex(u.layoutVertexArray,h,m,v,R,z,new ee(n.x1,n.y1)),this._commitLayoutVertex(u.layoutVertexArray,h,m,v,R,z,new ee(n.x2,n.y1)),this._commitLayoutVertex(u.layoutVertexArray,h,m,v,R,z,new ee(n.x2,n.y2)),this._commitLayoutVertex(u.layoutVertexArray,h,m,v,R,z,new ee(n.x1,n.y2)),S.vertexLength+=4;const L=u.indexArray;L.emplaceBack(E,E+1),L.emplaceBack(E+1,E+2),L.emplaceBack(E+2,E+3),L.emplaceBack(E+3,E),S.primitiveLength+=4}_addTextDebugCollisionBoxes(n,o,u,h,m,v){for(let x=h;x<m;x++){const S=u.get(x),E=this.getSymbolInstanceTextSize(n,v,o,x);this._addCollisionDebugVertices(S,E,this.textCollisionBox,S.projectedAnchorX,S.projectedAnchorY,S.projectedAnchorZ,v)}}_addIconDebugCollisionBoxes(n,o,u,h,m,v){for(let x=h;x<m;x++){const S=u.get(x),E=this.getSymbolInstanceIconSize(n,o,v.placedIconSymbolIndex);this._addCollisionDebugVertices(S,E,this.iconCollisionBox,S.projectedAnchorX,S.projectedAnchorY,S.projectedAnchorZ,v)}}generateCollisionDebugBuffers(n,o){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new ix(en,RC.members,Ti),this.iconCollisionBox=new ix(en,RC.members,Ti);const u=gd(this.iconSizeData,n),h=gd(this.textSizeData,n);for(let m=0;m<this.symbolInstances.length;m++){const v=this.symbolInstances.get(m);this._addTextDebugCollisionBoxes(h,n,o,v.textBoxStartIndex,v.textBoxEndIndex,v),this._addTextDebugCollisionBoxes(h,n,o,v.verticalTextBoxStartIndex,v.verticalTextBoxEndIndex,v),this._addIconDebugCollisionBoxes(u,n,o,v.iconBoxStartIndex,v.iconBoxEndIndex,v),this._addIconDebugCollisionBoxes(u,n,o,v.verticalIconBoxStartIndex,v.verticalIconBoxEndIndex,v)}}getSymbolInstanceTextSize(n,o,u,h){const m=this.text.placedSymbolArray.get(o.rightJustifiedTextSymbolIndex>=0?o.rightJustifiedTextSymbolIndex:o.centerJustifiedTextSymbolIndex>=0?o.centerJustifiedTextSymbolIndex:o.leftJustifiedTextSymbolIndex>=0?o.leftJustifiedTextSymbolIndex:o.verticalPlacedTextSymbolIndex>=0?o.verticalPlacedTextSymbolIndex:h),v=kg(this.textSizeData,n,m)/ki;return this.tilePixelRatio*v}getSymbolInstanceIconSize(n,o,u){const h=this.icon.placedSymbolArray.get(u),m=kg(this.iconSizeData,n,h);return this.tilePixelRatio*m}_commitDebugCollisionVertexUpdate(n,o,u){n.emplaceBack(o,-u,-u),n.emplaceBack(o,u,-u),n.emplaceBack(o,u,u),n.emplaceBack(o,-u,u)}_updateTextDebugCollisionBoxes(n,o,u,h,m,v){for(let x=h;x<m;x++){const S=u.get(x),E=this.getSymbolInstanceTextSize(n,v,o,x);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,E,S.padding)}}_updateIconDebugCollisionBoxes(n,o,u,h,m,v){for(let x=h;x<m;x++){const S=u.get(x),E=this.getSymbolInstanceIconSize(n,o,v);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,E,S.padding)}}updateCollisionDebugBuffers(n,o){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const u=gd(this.iconSizeData,n),h=gd(this.textSizeData,n);for(let m=0;m<this.symbolInstances.length;m++){const v=this.symbolInstances.get(m);this._updateTextDebugCollisionBoxes(h,n,o,v.textBoxStartIndex,v.textBoxEndIndex,v),this._updateTextDebugCollisionBoxes(h,n,o,v.verticalTextBoxStartIndex,v.verticalTextBoxEndIndex,v),this._updateIconDebugCollisionBoxes(u,n,o,v.iconBoxStartIndex,v.iconBoxEndIndex,v.placedIconSymbolIndex),this._updateIconDebugCollisionBoxes(u,n,o,v.verticalIconBoxStartIndex,v.verticalIconBoxEndIndex,v.placedIconSymbolIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(n,o,u,h,m,v,x,S,E){const R={};if(o<u){const{x1:z,y1:L,x2:H,y2:G,padding:Y,projectedAnchorX:ae,projectedAnchorY:ve,projectedAnchorZ:Ce,tileAnchorX:ye,tileAnchorY:Ee,featureIndex:Ae}=n.get(o);R.textBox={x1:z,y1:L,x2:H,y2:G,padding:Y,projectedAnchorX:ae,projectedAnchorY:ve,projectedAnchorZ:Ce,tileAnchorX:ye,tileAnchorY:Ee},R.textFeatureIndex=Ae}if(h<m){const{x1:z,y1:L,x2:H,y2:G,padding:Y,projectedAnchorX:ae,projectedAnchorY:ve,projectedAnchorZ:Ce,tileAnchorX:ye,tileAnchorY:Ee,featureIndex:Ae}=n.get(h);R.verticalTextBox={x1:z,y1:L,x2:H,y2:G,padding:Y,projectedAnchorX:ae,projectedAnchorY:ve,projectedAnchorZ:Ce,tileAnchorX:ye,tileAnchorY:Ee},R.verticalTextFeatureIndex=Ae}if(v<x){const{x1:z,y1:L,x2:H,y2:G,padding:Y,projectedAnchorX:ae,projectedAnchorY:ve,projectedAnchorZ:Ce,tileAnchorX:ye,tileAnchorY:Ee,featureIndex:Ae}=n.get(v);R.iconBox={x1:z,y1:L,x2:H,y2:G,padding:Y,projectedAnchorX:ae,projectedAnchorY:ve,projectedAnchorZ:Ce,tileAnchorX:ye,tileAnchorY:Ee},R.iconFeatureIndex=Ae}if(S<E){const{x1:z,y1:L,x2:H,y2:G,padding:Y,projectedAnchorX:ae,projectedAnchorY:ve,projectedAnchorZ:Ce,tileAnchorX:ye,tileAnchorY:Ee,featureIndex:Ae}=n.get(S);R.verticalIconBox={x1:z,y1:L,x2:H,y2:G,padding:Y,projectedAnchorX:ae,projectedAnchorY:ve,projectedAnchorZ:Ce,tileAnchorX:ye,tileAnchorY:Ee},R.verticalIconFeatureIndex=Ae}return R}deserializeCollisionBoxes(n){this.collisionArrays=[];for(let o=0;o<this.symbolInstances.length;o++){const u=this.symbolInstances.get(o);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(n,u.textBoxStartIndex,u.textBoxEndIndex,u.verticalTextBoxStartIndex,u.verticalTextBoxEndIndex,u.iconBoxStartIndex,u.iconBoxEndIndex,u.verticalIconBoxStartIndex,u.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(n,o){const u=n.placedSymbolArray.get(o),h=u.vertexStartIndex+4*u.numGlyphs;for(let m=u.vertexStartIndex;m<h;m+=4)n.indexArray.emplaceBack(m,m+1,m+2),n.indexArray.emplaceBack(m+1,m+2,m+3)}getSortedSymbolIndexes(n){if(this.sortedAngle===n&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const o=Math.sin(n),u=Math.cos(n),h=[],m=[],v=[];for(let x=0;x<this.symbolInstances.length;++x){v.push(x);const S=this.symbolInstances.get(x);h.push(0|Math.round(o*S.tileAnchorX+u*S.tileAnchorY)),m.push(S.featureIndex)}return v.sort((x,S)=>h[x]-h[S]||m[S]-m[x]),v}addToSortKeyRanges(n,o){const u=this.sortKeyRanges[this.sortKeyRanges.length-1];u&&u.sortKey===o?u.symbolInstanceEnd=n+1:this.sortKeyRanges.push({sortKey:o,symbolInstanceStart:n,symbolInstanceEnd:n+1})}sortFeatures(n){if(this.sortFeaturesByY&&this.sortedAngle!==n&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(n),this.sortedAngle=n,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const o of this.symbolInstanceIndexes){const u=this.symbolInstances.get(o);this.featureSortOrder.push(u.featureIndex);const{rightJustifiedTextSymbolIndex:h,centerJustifiedTextSymbolIndex:m,leftJustifiedTextSymbolIndex:v,verticalPlacedTextSymbolIndex:x,placedIconSymbolIndex:S,verticalPlacedIconSymbolIndex:E}=u;h>=0&&this.addIndicesForPlacedSymbol(this.text,h),m>=0&&m!==h&&this.addIndicesForPlacedSymbol(this.text,m),v>=0&&v!==m&&v!==h&&this.addIndicesForPlacedSymbol(this.text,v),x>=0&&this.addIndicesForPlacedSymbol(this.text,x),S>=0&&this.addIndicesForPlacedSymbol(this.icon,S),E>=0&&this.addIndicesForPlacedSymbol(this.icon,E)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}Jt(Hl,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),Hl.MAX_GLYPHS=65535,Hl.addDynamicAttributes=Wg;const j3=new be({"symbol-placement":new K(nt.layout_symbol["symbol-placement"]),"symbol-spacing":new K(nt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new K(nt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new se(nt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new K(nt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new K(nt.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new K(nt.layout_symbol["icon-ignore-placement"]),"icon-optional":new K(nt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new K(nt.layout_symbol["icon-rotation-alignment"]),"icon-size":new se(nt.layout_symbol["icon-size"]),"icon-text-fit":new K(nt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new K(nt.layout_symbol["icon-text-fit-padding"]),"icon-image":new se(nt.layout_symbol["icon-image"]),"icon-rotate":new se(nt.layout_symbol["icon-rotate"]),"icon-padding":new K(nt.layout_symbol["icon-padding"]),"icon-keep-upright":new K(nt.layout_symbol["icon-keep-upright"]),"icon-offset":new se(nt.layout_symbol["icon-offset"]),"icon-anchor":new se(nt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new K(nt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new K(nt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new K(nt.layout_symbol["text-rotation-alignment"]),"text-field":new se(nt.layout_symbol["text-field"]),"text-font":new se(nt.layout_symbol["text-font"]),"text-size":new se(nt.layout_symbol["text-size"]),"text-max-width":new se(nt.layout_symbol["text-max-width"]),"text-line-height":new se(nt.layout_symbol["text-line-height"]),"text-letter-spacing":new se(nt.layout_symbol["text-letter-spacing"]),"text-justify":new se(nt.layout_symbol["text-justify"]),"text-radial-offset":new se(nt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new K(nt.layout_symbol["text-variable-anchor"]),"text-anchor":new se(nt.layout_symbol["text-anchor"]),"text-max-angle":new K(nt.layout_symbol["text-max-angle"]),"text-writing-mode":new K(nt.layout_symbol["text-writing-mode"]),"text-rotate":new se(nt.layout_symbol["text-rotate"]),"text-padding":new K(nt.layout_symbol["text-padding"]),"text-keep-upright":new K(nt.layout_symbol["text-keep-upright"]),"text-transform":new se(nt.layout_symbol["text-transform"]),"text-offset":new se(nt.layout_symbol["text-offset"]),"text-allow-overlap":new K(nt.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new K(nt.layout_symbol["text-ignore-placement"]),"text-optional":new K(nt.layout_symbol["text-optional"])});var ox={paint:new be({"icon-opacity":new se(nt.paint_symbol["icon-opacity"]),"icon-color":new se(nt.paint_symbol["icon-color"]),"icon-halo-color":new se(nt.paint_symbol["icon-halo-color"]),"icon-halo-width":new se(nt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new se(nt.paint_symbol["icon-halo-blur"]),"icon-translate":new K(nt.paint_symbol["icon-translate"]),"icon-translate-anchor":new K(nt.paint_symbol["icon-translate-anchor"]),"text-opacity":new se(nt.paint_symbol["text-opacity"]),"text-color":new se(nt.paint_symbol["text-color"],{runtimeType:Qr,getOverride:i=>i.textColor,hasOverride:i=>!!i.textColor}),"text-halo-color":new se(nt.paint_symbol["text-halo-color"]),"text-halo-width":new se(nt.paint_symbol["text-halo-width"]),"text-halo-blur":new se(nt.paint_symbol["text-halo-blur"]),"text-translate":new K(nt.paint_symbol["text-translate"]),"text-translate-anchor":new K(nt.paint_symbol["text-translate-anchor"])}),layout:j3};class f2{constructor(n){this.type=n.property.overrides?n.property.overrides.runtimeType:Gr,this.defaultValue=n}evaluate(n){if(n.formattedSection){const o=this.defaultValue.property.overrides;if(o&&o.hasOverride(n.formattedSection))return o.getOverride(n.formattedSection)}return n.feature&&n.featureState?this.defaultValue.evaluate(n.feature,n.featureState):this.defaultValue.property.specification.default}eachChild(n){this.defaultValue.isConstant()||n(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Jt(f2,"FormatSectionOverride",{omit:["defaultValue"]});class qg extends Za{constructor(n){super(n,ox)}recalculate(n,o){super.recalculate(n,o),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const u=this.layout.get("text-writing-mode");if(u){const h=[];for(const m of u)h.indexOf(m)<0&&h.push(m);this.layout._values["text-writing-mode"]=h}else this.layout._values["text-writing-mode"]=this.layout.get("symbol-placement")==="point"?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(n,o,u,h){const m=this.layout.get(n).evaluate(o,{},u,h),v=this._unevaluatedLayout._values[n];return v.isDataDriven()||Ol(v.value)||!m?m:function(x,S){return S.replace(/{([^{}]+)}/g,(E,R)=>R in x?String(x[R]):"")}(o.properties,m)}createBucket(n){return new Hl(n)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const n of ox.paint.overridableProperties){if(!qg.hasPaintOverride(this.layout,n))continue;const o=this.paint.get(n),u=new f2(o),h=new Ku(u,o.property.specification);let m=null;m=o.value.kind==="constant"||o.value.kind==="source"?new rf("source",h):new kc("composite",h,o.value.zoomStops,o.value._interpolationType),this.paint._values[n]=new ue(o.property,m,o.parameters)}}_handleOverridablePaintPropertyUpdate(n,o,u){return!(!this.layout||o.isDataDriven()||u.isDataDriven())&&qg.hasPaintOverride(this.layout,n)}static hasPaintOverride(n,o){const u=n.get("text-field"),h=ox.paint.properties[o];let m=!1;const v=x=>{for(const S of x)if(h.overrides&&h.overrides.hasOverride(S))return void(m=!0)};if(u.value.kind==="constant"&&u.value.value instanceof Yn)v(u.value.value.sections);else if(u.value.kind==="source"){const x=E=>{m||(E instanceof js&&zr(E.value)===Ao?v(E.value.sections):E instanceof ws?v(E.sections):E.eachChild(x))},S=u.value;S._styleExpression&&x(S._styleExpression.expression)}return m}getProgramConfiguration(n){return new Bl(this,n)}}var U3={paint:new be({"background-color":new K(nt.paint_background["background-color"]),"background-pattern":new K(nt.paint_background["background-pattern"]),"background-opacity":new K(nt.paint_background["background-opacity"])})},V3={paint:new be({"raster-opacity":new K(nt.paint_raster["raster-opacity"]),"raster-hue-rotate":new K(nt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new K(nt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new K(nt.paint_raster["raster-brightness-max"]),"raster-saturation":new K(nt.paint_raster["raster-saturation"]),"raster-contrast":new K(nt.paint_raster["raster-contrast"]),"raster-resampling":new K(nt.paint_raster["raster-resampling"]),"raster-fade-duration":new K(nt.paint_raster["raster-fade-duration"])})};class H3 extends Za{constructor(n){super(n,{}),this.implementation=n}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}isLayerDraped(){return this.implementation.renderToTile!==void 0}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(n){this.implementation.onAdd&&this.implementation.onAdd(n,n.painter.context.gl)}onRemove(n){this.implementation.onRemove&&this.implementation.onRemove(n,n.painter.context.gl)}}var G3={paint:new be({"sky-type":new K(nt.paint_sky["sky-type"]),"sky-atmosphere-sun":new K(nt.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new K(nt.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new K(nt.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new K(nt.paint_sky["sky-gradient-radius"]),"sky-gradient":new xe(nt.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new K(nt.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new K(nt.paint_sky["sky-atmosphere-color"]),"sky-opacity":new K(nt.paint_sky["sky-opacity"])})};function ax(i,n,o){const u=[0,0,1],h=OE([]);return kE(h,h,o?-ie(i)+Math.PI:ie(i)),zE(h,h,-ie(n)),ME(u,u,h),so(u,u)}const W3={circle:class extends Za{constructor(i){super(i,rD)}createBucket(i){return new O_(i)}queryRadius(i){const n=i;return hd("circle-radius",this,n)+hd("circle-stroke-width",this,n)+Sg(this.paint.get("circle-translate"))}queryIntersectsFeature(i,n,o,u,h,m,v,x){const S=nC(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),m.angle,i.pixelToTileUnitsFactor),E=this.paint.get("circle-radius").evaluate(n,o)+this.paint.get("circle-stroke-width").evaluate(n,o);return rC(i,u,m,v,x,this.paint.get("circle-pitch-alignment")==="map",this.paint.get("circle-pitch-scale")==="map",S,E)}getProgramIds(){return["circle"]}getProgramConfiguration(i){return new Bl(this,i)}},heatmap:class extends Za{createBucket(i){return new oC(i)}constructor(i){super(i,sD),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(i){i==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=D_({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(i){return hd("heatmap-radius",this,i)}queryIntersectsFeature(i,n,o,u,h,m,v,x){const S=this.paint.get("heatmap-radius").evaluate(n,o);return rC(i,u,m,v,x,!0,!0,new ee(0,0),S)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(i){return new Bl(this,i)}},hillshade:class extends Za{constructor(i){super(i,lD)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}getProgramIds(){return["hillshade","hillshadePrepare"]}},fill:class extends Za{constructor(i){super(i,ED)}getProgramIds(){const i=this.paint.get("fill-pattern"),n=i&&i.constantOr(1),o=[n?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&o.push(n&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),o}getProgramConfiguration(i){return new Bl(this,i)}recalculate(i,n){super.recalculate(i,n);const o=this.paint._values["fill-outline-color"];o.value.kind==="constant"&&o.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(i){return new Mg(i)}queryRadius(){return Sg(this.paint.get("fill-translate"))}queryIntersectsFeature(i,n,o,u,h,m){return!i.queryGeometry.isAboveHorizon&&YE(tC(i.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),m.angle,i.pixelToTileUnitsFactor),u)}isTileClipped(){return!0}},"fill-extrusion":class extends Za{constructor(i){super(i,ND)}createBucket(i){return new Bf(i)}queryRadius(){return Sg(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(i){return new Bl(this,i)}queryIntersectsFeature(i,n,o,u,h,m,v,x,S){const E=nC(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),m.angle,i.pixelToTileUnitsFactor),R=this.paint.get("fill-extrusion-height").evaluate(n,o),z=this.paint.get("fill-extrusion-base").evaluate(n,o),L=[0,0],H=x&&m.elevation,G=m.elevation?m.elevation.exaggeration():1,Y=i.tile.getBucket(this);if(H&&Y instanceof Bf){const Ee=Y.centroidVertexArray,Ae=S+1;Ae<Ee.length&&(L[0]=Ee.geta_centroid_pos0(Ae),L[1]=Ee.geta_centroid_pos1(Ae))}if(L[0]===0&&L[1]===1)return!1;m.projection.name==="globe"&&(u=SC([u],[new ee(0,0),new ee(gn,gn)],i.tileID.canonical).map(Ee=>Ee.polygon).flat());const ae=H?x:null,[ve,Ce]=function(Ee,Ae,Pe,Ye,Ze,at,At,tt,pt,mt,_t){return Ee.projection.name==="globe"?function(Dt,it,Wt,tn,qt,kn,Ft,fn,Ln,nr,Dn){const wn=[],Or=[],Fn=Dt.projection.upVectorScale(Dn,Dt.center.lat,Dt.worldSize).metersToTile,Bn=[0,0,0,1],wr=[0,0,0,1],Mr=(Sr,qr,ei,ci)=>{Sr[0]=qr,Sr[1]=ei,Sr[2]=ci,Sr[3]=1},Pr=wC();Wt>0&&(Wt+=Pr),tn+=Pr;for(const Sr of it){const qr=[],ei=[];for(const ci of Sr){const Er=ci.x+qt.x,gi=ci.y+qt.y,ui=Dt.projection.projectTilePoint(Er,gi,Dn),Yr=Dt.projection.upVector(Dn,ci.x,ci.y);let ir=Wt,di=tn;if(Ft){const Ar=IC(Er,gi,Wt,tn,Ft,fn,Ln,nr);ir+=Ar.base,di+=Ar.top}Wt!==0?Mr(Bn,ui.x+Yr[0]*Fn*ir,ui.y+Yr[1]*Fn*ir,ui.z+Yr[2]*Fn*ir):Mr(Bn,ui.x,ui.y,ui.z),Mr(wr,ui.x+Yr[0]*Fn*di,ui.y+Yr[1]*Fn*di,ui.z+Yr[2]*Fn*di),ii(Bn,Bn,kn),ii(wr,wr,kn),qr.push(new md(Bn[0],Bn[1],Bn[2])),ei.push(new md(wr[0],wr[1],wr[2]))}wn.push(qr),Or.push(ei)}return[wn,Or]}(Ee,Ae,Pe,Ye,Ze,at,At,tt,pt,mt,_t):At?function(Dt,it,Wt,tn,qt,kn,Ft,fn,Ln){const nr=[],Dn=[],wn=[0,0,0,1];for(const Or of Dt){const Fn=[],Bn=[];for(const wr of Or){const Mr=wr.x+tn.x,Pr=wr.y+tn.y,Sr=IC(Mr,Pr,it,Wt,kn,Ft,fn,Ln);wn[0]=Mr,wn[1]=Pr,wn[2]=Sr.base,wn[3]=1,Wc(wn,wn,qt),wn[3]=Math.max(wn[3],1e-5);const qr=new md(wn[0]/wn[3],wn[1]/wn[3],wn[2]/wn[3]);wn[0]=Mr,wn[1]=Pr,wn[2]=Sr.top,wn[3]=1,Wc(wn,wn,qt),wn[3]=Math.max(wn[3],1e-5);const ei=new md(wn[0]/wn[3],wn[1]/wn[3],wn[2]/wn[3]);Fn.push(qr),Bn.push(ei)}nr.push(Fn),Dn.push(Bn)}return[nr,Dn]}(Ae,Pe,Ye,Ze,at,At,tt,pt,mt):function(Dt,it,Wt,tn,qt){const kn=[],Ft=[],fn=qt[8]*it,Ln=qt[9]*it,nr=qt[10]*it,Dn=qt[11]*it,wn=qt[8]*Wt,Or=qt[9]*Wt,Fn=qt[10]*Wt,Bn=qt[11]*Wt;for(const wr of Dt){const Mr=[],Pr=[];for(const Sr of wr){const qr=Sr.x+tn.x,ei=Sr.y+tn.y,ci=qt[0]*qr+qt[4]*ei+qt[12],Er=qt[1]*qr+qt[5]*ei+qt[13],gi=qt[2]*qr+qt[6]*ei+qt[14],ui=qt[3]*qr+qt[7]*ei+qt[15],Yr=ci+fn,ir=Er+Ln,di=gi+nr,Ar=Math.max(ui+Dn,1e-5),uo=ci+wn,hi=Er+Or,Li=gi+Fn,Ii=Math.max(ui+Bn,1e-5);Mr.push(new md(Yr/Ar,ir/Ar,di/Ar)),Pr.push(new md(uo/Ii,hi/Ii,Li/Ii))}kn.push(Mr),Ft.push(Pr)}return[kn,Ft]}(Ae,Pe,Ye,Ze,at)}(m,u,z,R,E,v,ae,L,G,m.center.lat,i.tileID.canonical),ye=i.queryGeometry;return function(Ee,Ae,Pe){let Ye=1/0;YE(Pe,Ae)&&(Ye=TC(Pe,Ae[0]));for(let Ze=0;Ze<Ae.length;Ze++){const at=Ae[Ze],At=Ee[Ze];for(let tt=0;tt<at.length-1;tt++){const pt=at[tt],mt=[pt,at[tt+1],At[tt+1],At[tt],pt];KE(Pe,mt)&&(Ye=Math.min(Ye,TC(Pe,mt)))}}return Ye!==1/0&&Ye}(ve,Ce,ye.isPointQuery()?ye.screenBounds:ye.screenGeometry)}},line:class extends Za{constructor(i){super(i,MC),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(i){if(i==="line-gradient"){const n=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=n._styleExpression&&n._styleExpression.expression instanceof Hh,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(i,n){super.recalculate(i,n),this.paint._values["line-floorwidth"]=PC.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,i)}createBucket(i){return new zg(i)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration(i){return new Bl(this,i)}queryRadius(i){const n=i,o=AC(hd("line-width",this,n),hd("line-gap-width",this,n)),u=hd("line-offset",this,n);return o/2+Math.abs(u)+Sg(this.paint.get("line-translate"))}queryIntersectsFeature(i,n,o,u,h,m){if(i.queryGeometry.isAboveHorizon)return!1;const v=tC(i.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),m.angle,i.pixelToTileUnitsFactor),x=i.pixelToTileUnitsFactor/2*AC(this.paint.get("line-width").evaluate(n,o),this.paint.get("line-gap-width").evaluate(n,o)),S=this.paint.get("line-offset").evaluate(n,o);return S&&(u=function(E,R){const z=[],L=new ee(0,0);for(let H=0;H<E.length;H++){const G=E[H],Y=[];for(let ae=0;ae<G.length;ae++){const ve=G[ae],Ce=G[ae+1],ye=ae===0?L:ve.sub(G[ae-1])._unit()._perp(),Ee=ae===G.length-1?L:Ce.sub(ve)._unit()._perp(),Ae=ye._add(Ee)._unit();Ae._mult(1/(Ae.x*Ee.x+Ae.y*Ee.y)),Y.push(Ae._mult(R)._add(ve))}z.push(Y)}return z}(u,S*i.pixelToTileUnitsFactor)),function(E,R,z){for(let L=0;L<R.length;L++){const H=R[L];if(E.length>=3){for(let G=0;G<H.length;G++)if(Kc(E,H[G]))return!0}if(QL(E,H,z))return!0}return!1}(v,u,x)}isTileClipped(){return!0}},symbol:qg,background:class extends Za{constructor(i){super(i,U3)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends Za{constructor(i){super(i,V3)}getProgramIds(){return["raster"]}},sky:class extends Za{constructor(i){super(i,G3),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(i){i==="sky-gradient"?this._updateColorRamp():i!=="sky-atmosphere-sun"&&i!=="sky-atmosphere-halo-color"&&i!=="sky-atmosphere-color"&&i!=="sky-atmosphere-sun-intensity"||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=D_({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(i){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const n=i.style.light.properties.get("position");return this._lightPosition.azimuthal!==n.azimuthal||this._lightPosition.polar!==n.polar}return!1}getCenter(i,n){if(this.paint.get("sky-type")==="atmosphere"){const u=this.paint.get("sky-atmosphere-sun"),h=!u,m=i.style.light,v=m.properties.get("position");return h&&m.properties.get("anchor")==="viewport"&&Ct("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),h?ax(v.azimuthal,90-v.polar,n):ax(u[0],90-u[1],n)}const o=this.paint.get("sky-gradient-center");return ax(o[0],90-o[1],n)}is3D(){return!1}isSky(){return!0}markSkyboxValid(i){this._skyboxInvalidated=!1,this._lightPosition=i.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const i=this.paint.get("sky-type");return i==="atmosphere"?["skyboxCapture","skybox"]:i==="gradient"?["skyboxGradient"]:null}}};class Kf{constructor(n,o,u,h){this.context=n,this.format=u,this.texture=n.gl.createTexture(),this.update(o,h)}update(n,o,u){const{width:h,height:m}=n,{context:v}=this,{gl:x}=v,{HTMLImageElement:S,HTMLCanvasElement:E,HTMLVideoElement:R,ImageData:z,ImageBitmap:L}=w;if(x.bindTexture(x.TEXTURE_2D,this.texture),v.pixelStoreUnpackFlipY.set(!1),v.pixelStoreUnpack.set(1),v.pixelStoreUnpackPremultiplyAlpha.set(this.format===x.RGBA&&(!o||o.premultiply!==!1)),u||this.size&&this.size[0]===h&&this.size[1]===m){const{x:H,y:G}=u||{x:0,y:0};n instanceof S||n instanceof E||n instanceof R||n instanceof z||L&&n instanceof L?x.texSubImage2D(x.TEXTURE_2D,0,H,G,x.RGBA,x.UNSIGNED_BYTE,n):x.texSubImage2D(x.TEXTURE_2D,0,H,G,h,m,x.RGBA,x.UNSIGNED_BYTE,n.data)}else this.size=[h,m],n instanceof S||n instanceof E||n instanceof R||n instanceof z||L&&n instanceof L?x.texImage2D(x.TEXTURE_2D,0,this.format,this.format,x.UNSIGNED_BYTE,n):x.texImage2D(x.TEXTURE_2D,0,this.format,h,m,0,this.format,x.UNSIGNED_BYTE,n.data);this.useMipmap=!!(o&&o.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&x.generateMipmap(x.TEXTURE_2D)}bind(n,o){const{context:u}=this,{gl:h}=u;h.bindTexture(h.TEXTURE_2D,this.texture),n!==this.filter&&(h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,n),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,this.useMipmap?n===h.NEAREST?h.NEAREST_MIPMAP_NEAREST:h.LINEAR_MIPMAP_NEAREST:n),this.filter=n),o!==this.wrap&&(h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,o),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,o),this.wrap=o)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:n}=this.context;n.deleteTexture(this.texture),this.texture=null}}class q3{constructor(n){this._callback=n,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class Z3{constructor(){this.tasks={},this.taskQueue=[],ut(["process"],this),this.invoker=new q3(this.process),this.nextId=0}add(n,o){const u=this.nextId++,h=function({type:m,isSymbolTile:v,zoom:x}){return x=x||0,m==="message"?0:m!=="maybePrepare"||v?m!=="parseTile"||v?m==="parseTile"&&v?300-x:m==="maybePrepare"&&v?400-x:500:200-x:100-x}(o);if(h===0){Bt();try{n()}finally{}return{cancel:()=>{}}}return this.tasks[u]={fn:n,metadata:o,priority:h,id:u},this.taskQueue.push(u),this.invoker.trigger(),{cancel:()=>{delete this.tasks[u]}}}process(){Bt();try{if(this.taskQueue=this.taskQueue.filter(u=>!!this.tasks[u]),!this.taskQueue.length)return;const n=this.pick();if(n===null)return;const o=this.tasks[n];if(delete this.tasks[n],this.taskQueue.length&&this.invoker.trigger(),!o)return;o.fn()}finally{}}pick(){let n=null,o=1/0;for(let h=0;h<this.taskQueue.length;h++){const m=this.tasks[this.taskQueue[h]];m.priority<o&&(o=m.priority,n=h)}if(n===null)return null;const u=this.taskQueue[n];return this.taskQueue.splice(n,1),u}remove(){this.invoker.remove()}}class p2{constructor(n){this._stringToNumber={},this._numberToString=[];for(let o=0;o<n.length;o++){const u=n[o];this._stringToNumber[u]=o,this._numberToString[o]=u}}encode(n){return this._stringToNumber[n]}decode(n){return this._numberToString[n]}}const X3=["tile","layer","source","sourceLayer","state"];class m2{constructor(n,o,u,h,m){this.type="Feature",this._vectorTileFeature=n,this._z=o,this._x=u,this._y=h,this.properties=n.properties,this.id=m}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(n){this._geometry=n}toJSON(){const n={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};this.id!==void 0&&(n.id=this.id);for(const o of X3)this[o]!==void 0&&(n[o]=this[o]);return n}}const Ta=32,Ps=33,Gl=new Uint16Array(8184);for(let i=0;i<2046;i++){let n=i+2,o=0,u=0,h=0,m=0,v=0,x=0;for(1&n?h=m=v=Ta:o=u=x=Ta;(n>>=1)>1;){const E=o+h>>1,R=u+m>>1;1&n?(h=o,m=u,o=v,u=x):(o=h,u=m,h=v,m=x),v=E,x=R}const S=4*i;Gl[S+0]=o,Gl[S+1]=u,Gl[S+2]=h,Gl[S+3]=m}const As=new Uint16Array(2178),Wl=new Uint8Array(1089),Zg=new Uint16Array(1089);function g2(i){return i===0?-.03125:i===32?.03125:0}var v2=Ue([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const y2={type:2,extent:gn,loadGeometry:()=>[[new ee(0,0),new ee(gn+1,0),new ee(gn+1,gn+1),new ee(0,gn+1),new ee(0,0)]]};class sx{constructor(n,o,u,h,m){this.tileID=n,this.uid=xt(),this.uses=0,this.tileSize=o,this.tileZoom=u,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=m,this.expiredRequestCount=0,this.state="loading",h&&h.transform&&(this.projection=h.transform.projection)}registerFadeDuration(n){const o=n+this.timeAdded;o<ji.now()||this.fadeEndTime&&o<this.fadeEndTime||(this.fadeEndTime=o)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}get tileTransform(){return this._tileTransform||(this._tileTransform=Jc(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(n,o,u){if(this.unloadVectorData(),this.state="loaded",n){n.featureIndex&&(this.latestFeatureIndex=n.featureIndex,n.rawTileData?(this.latestRawTileData=n.rawTileData,this.latestFeatureIndex.rawTileData=n.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=n.collisionBoxArray,this.buckets=function(h,m){const v={};if(!m)return v;for(const x of h){const S=x.layerIds.map(E=>m.getLayer(E)).filter(Boolean);if(S.length!==0){x.layers=S,x.stateDependentLayerIds&&(x.stateDependentLayers=x.stateDependentLayerIds.map(E=>S.filter(R=>R.id===E)[0]));for(const E of S)v[E.id]=x}}return v}(n.buckets,o.style),this.hasSymbolBuckets=!1;for(const h in this.buckets){const m=this.buckets[h];if(m instanceof Hl){if(this.hasSymbolBuckets=!0,!u)break;m.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const h in this.buckets){const m=this.buckets[h];if(m instanceof Hl&&m.hasRTLText){this.hasRTLText=!0,P.isLoading()||P.isLoaded()||b()!=="deferred"||I();break}}this.queryPadding=0;for(const h in this.buckets){const m=this.buckets[h];this.queryPadding=Math.max(this.queryPadding,o.style.getLayer(h).queryRadius(m))}n.imageAtlas&&(this.imageAtlas=n.imageAtlas),n.glyphAtlasImage&&(this.glyphAtlasImage=n.glyphAtlasImage),n.lineAtlas&&(this.lineAtlas=n.lineAtlas)}else this.collisionBoxArray=new xr}unloadVectorData(){if(this.hasData()){for(const n in this.buckets)this.buckets[n].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(n){return this.buckets[n.id]}upload(n){for(const u in this.buckets){const h=this.buckets[u];h.uploadPending()&&h.upload(n)}const o=n.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Kf(n,this.imageAtlas.image,o.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Kf(n,this.glyphAtlasImage,o.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new Kf(n,this.lineAtlas.image,o.ALPHA),this.lineAtlas.uploaded=!0)}prepare(n){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(n,this.imageAtlasTexture)}queryRenderedFeatures(n,o,u,h,m,v,x,S){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:h,pixelPosMatrix:x,transform:v,params:m,tileTransform:this.tileTransform},n,o,u):{}}querySourceFeatures(n,o){const u=this.latestFeatureIndex;if(!u||!u.rawTileData)return;const h=u.loadVTLayers(),m=o?o.sourceLayer:"",v=h._geojsonTileLayer||h[m];if(!v)return;const x=ed(o&&o.filter),{z:S,x:E,y:R}=this.tileID.canonical,z={z:S,x:E,y:R};for(let L=0;L<v.length;L++){const H=v.feature(L);if(x.needGeometry){const ae=Xc(H,!0);if(!x.filter(new O(this.tileID.overscaledZ),ae,this.tileID.canonical))continue}else if(!x.filter(new O(this.tileID.overscaledZ),H))continue;const G=u.getId(H,m),Y=new m2(H,S,E,R,G);Y.tile=z,n.push(Y)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(n){const o=this.expirationTime;if(n.cacheControl){const u=ot(n.cacheControl);u["max-age"]&&(this.expirationTime=Date.now()+1e3*u["max-age"])}else n.expires&&(this.expirationTime=new Date(n.expires).getTime());if(this.expirationTime){const u=Date.now();let h=!1;if(this.expirationTime>u)h=!1;else if(o)if(this.expirationTime<o)h=!0;else{const m=this.expirationTime-o;m?this.expirationTime=u+Math.max(m,3e4):h=!0}else h=!0;h?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(n,o){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(n).length===0||!o)return;const u=this.latestFeatureIndex.loadVTLayers(),h=o.style.listImages();for(const m in this.buckets){if(!o.style.hasLayer(m))continue;const v=this.buckets[m],x=v.layers[0].sourceLayer||"_geojsonTileLayer",S=u[x],E=n[x];if(!S||!E||Object.keys(E).length===0)continue;if(v.update(E,S,h,this.imageAtlas&&this.imageAtlas.patternPositions||{}),v instanceof zg||v instanceof Mg){const z=o.style._getSourceCache(v.layers[0].source);o._terrain&&o._terrain.enabled&&z&&v.programConfigurations.needsUpload&&o._terrain._clearRenderCacheForTile(z.id,this.tileID)}const R=o&&o.style&&o.style.getLayer(m);R&&(this.queryPadding=Math.max(this.queryPadding,R.queryRadius(v)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<ji.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(n){this.symbolFadeHoldUntil=ji.now()+n}setTexture(n,o){const u=o.context,h=u.gl;this.texture=this.texture||o.getTileTexture(n.width),this.texture?this.texture.update(n,{useMipmap:!0}):(this.texture=new Kf(u,n,h.RGBA,{useMipmap:!0}),this.texture.bind(h.LINEAR,h.CLAMP_TO_EDGE))}setDependencies(n,o){const u={};for(const h of o)u[h]=!0;this.dependencies[n]=u}hasDependency(n,o){for(const u of n){const h=this.dependencies[u];if(h){for(const m of o)if(h[m])return!0}}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(n,o){if(!o||o.name==="mercator"||this._tileDebugBuffer)return;const u=Qs(y2,this.tileID.canonical,this.tileTransform)[0],h=new Pt,m=new Lo;for(let v=0;v<u.length;v++){const{x,y:S}=u[v];h.emplaceBack(x,S),m.emplaceBack(v)}m.emplaceBack(0),this._tileDebugIndexBuffer=n.createIndexBuffer(m),this._tileDebugBuffer=n.createVertexBuffer(h,Mf.members),this._tileDebugSegments=si.simpleSegment(0,0,h.length,m.length)}_makeTileBoundsBuffers(n,o){if(this._tileBoundsBuffer||!o||o.name==="mercator")return;const u=Qs(y2,this.tileID.canonical,this.tileTransform)[0];let h,m;if(this.isRaster){const v=function(x,S){const E=Jc(x,S),R=Math.pow(2,x.z);for(let ae=0;ae<Ps;ae++)for(let ve=0;ve<Ps;ve++){const Ce=ea((x.x+(ve+g2(ve))/Ta)/R),ye=Gi((x.y+(ae+g2(ae))/Ta)/R),Ee=S.project(Ce,ye),Ae=ae*Ps+ve;As[2*Ae+0]=Math.round((Ee.x*E.scale-E.x)*gn),As[2*Ae+1]=Math.round((Ee.y*E.scale-E.y)*gn)}Wl.fill(0),Zg.fill(0);for(let ae=2045;ae>=0;ae--){const ve=4*ae,Ce=Gl[ve+0],ye=Gl[ve+1],Ee=Gl[ve+2],Ae=Gl[ve+3],Pe=Ce+Ee>>1,Ye=ye+Ae>>1,Ze=Pe+Ye-ye,at=Ye+Ce-Pe,At=ye*Ps+Ce,tt=Ae*Ps+Ee,pt=Ye*Ps+Pe,mt=Math.hypot((As[2*At+0]+As[2*tt+0])/2-As[2*pt+0],(As[2*At+1]+As[2*tt+1])/2-As[2*pt+1])>=16;Wl[pt]=Wl[pt]||(mt?1:0),ae<1022&&(Wl[pt]=Wl[pt]||Wl[(ye+at>>1)*Ps+(Ce+Ze>>1)]||Wl[(Ae+at>>1)*Ps+(Ee+Ze>>1)])}const z=new ht,L=new cn;let H=0;function G(ae,ve){const Ce=ve*Ps+ae;return Zg[Ce]===0&&(z.emplaceBack(As[2*Ce+0],As[2*Ce+1],ae*gn/Ta,ve*gn/Ta),Zg[Ce]=++H),Zg[Ce]-1}function Y(ae,ve,Ce,ye,Ee,Ae){const Pe=ae+Ce>>1,Ye=ve+ye>>1;if(Math.abs(ae-Ee)+Math.abs(ve-Ae)>1&&Wl[Ye*Ps+Pe])Y(Ee,Ae,ae,ve,Pe,Ye),Y(Ce,ye,Ee,Ae,Pe,Ye);else{const Ze=G(ae,ve),at=G(Ce,ye),At=G(Ee,Ae);L.emplaceBack(Ze,at,At)}}return Y(0,0,Ta,Ta,Ta,0),Y(Ta,Ta,0,0,0,Ta),{vertices:z,indices:L}}(this.tileID.canonical,o);h=v.vertices,m=v.indices}else{h=new ht,m=new cn;for(const{x,y:S}of u)h.emplaceBack(x,S,0,0);const v=j_(h.int16,void 0,4);for(let x=0;x<v.length;x+=3)m.emplaceBack(v[x],v[x+1],v[x+2])}this._tileBoundsBuffer=n.createVertexBuffer(h,v2.members),this._tileBoundsIndexBuffer=n.createIndexBuffer(m),this._tileBoundsSegments=si.simpleSegment(0,0,h.length,m.length)}_makeGlobeTileDebugBuffers(n,o){const u=o.projection;if(!u||u.name!=="globe"||o.freezeTileCoverage)return;const h=this.tileID.canonical,m=Rf(BE(h,o)),v=ud(o.zoom);let x;v>0&&(x=m_(new Float64Array(16),o.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(n,h,o,m,x,v),this._makeGlobeTileDebugTextBuffer(n,h,o,m,x,v)}_globePoint(n,o,u,h,m,v,x){let S=Af(n,o,u);if(v){const E=1<<u.z,R=Is(h.center.lng),z=Ms(h.center.lat),L=(u.x+.5)/E-R;let H=0;L>.5?H=-1:L<-.5&&(H=1);let G=(n/gn+u.x)/E+H,Y=(o/gn+u.y)/E;G=(G-R)*h._pixelsPerMercatorPixel+R,Y=(Y-z)*h._pixelsPerMercatorPixel+z;const ae=[G*h.worldSize,Y*h.worldSize,0];ii(ae,ae,v),S=Zc(S,ae,x)}return ii(S,S,m)}_makeGlobeTileDebugBorderBuffer(n,o,u,h,m,v){const x=new Pt,S=new Lo,E=new qe,R=(L,H,G,Y,ae)=>{const ve=(G-L)/(ae-1),Ce=(Y-H)/(ae-1),ye=x.length;for(let Ee=0;Ee<ae;Ee++){const Ae=L+Ee*ve,Pe=H+Ee*Ce;x.emplaceBack(Ae,Pe);const Ye=this._globePoint(Ae,Pe,o,u,h,m,v);E.emplaceBack(Ye[0],Ye[1],Ye[2]),S.emplaceBack(ye+Ee)}},z=gn;R(0,0,z,0,16),R(z,0,z,z,16),R(z,z,0,z,16),R(0,z,0,0,16),this._tileDebugIndexBuffer=n.createIndexBuffer(S),this._tileDebugBuffer=n.createVertexBuffer(x,Mf.members),this._globeTileDebugBorderBuffer=n.createVertexBuffer(E,DE.members),this._tileDebugSegments=si.simpleSegment(0,0,x.length,S.length)}_makeGlobeTileDebugTextBuffer(n,o,u,h,m,v){const x=gn/4,S=new Pt,E=new cn,R=new qe,z=25;E.reserve(32),S.reserve(z),R.reserve(z);const L=(H,G)=>z*H+G;for(let H=0;H<z;H++){const G=H*x;for(let Y=0;Y<z;Y++){const ae=Y*x;S.emplaceBack(ae,G);const ve=this._globePoint(ae,G,o,u,h,m,v);R.emplaceBack(ve[0],ve[1],ve[2])}}for(let H=0;H<4;H++)for(let G=0;G<4;G++){const Y=L(H,G),ae=L(H,G+1),ve=L(H+1,G),Ce=L(H+1,G+1);E.emplaceBack(Y,ae,ve),E.emplaceBack(ve,ae,Ce)}this._tileDebugTextIndexBuffer=n.createIndexBuffer(E),this._tileDebugTextBuffer=n.createVertexBuffer(S,Mf.members),this._globeTileDebugTextBuffer=n.createVertexBuffer(R,DE.members),this._tileDebugTextSegments=si.simpleSegment(0,0,z,32)}}class K3{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(n,o,u){const h=String(o);if(this.stateChanges[n]=this.stateChanges[n]||{},this.stateChanges[n][h]=this.stateChanges[n][h]||{},gt(this.stateChanges[n][h],u),this.deletedStates[n]===null){this.deletedStates[n]={};for(const m in this.state[n])m!==h&&(this.deletedStates[n][m]=null)}else if(this.deletedStates[n]&&this.deletedStates[n][h]===null){this.deletedStates[n][h]={};for(const m in this.state[n][h])u[m]||(this.deletedStates[n][h][m]=null)}else for(const m in u)this.deletedStates[n]&&this.deletedStates[n][h]&&this.deletedStates[n][h][m]===null&&delete this.deletedStates[n][h][m]}removeFeatureState(n,o,u){if(this.deletedStates[n]===null)return;const h=String(o);if(this.deletedStates[n]=this.deletedStates[n]||{},u&&o!==void 0)this.deletedStates[n][h]!==null&&(this.deletedStates[n][h]=this.deletedStates[n][h]||{},this.deletedStates[n][h][u]=null);else if(o!==void 0)if(this.stateChanges[n]&&this.stateChanges[n][h])for(u in this.deletedStates[n][h]={},this.stateChanges[n][h])this.deletedStates[n][h][u]=null;else this.deletedStates[n][h]=null;else this.deletedStates[n]=null}getState(n,o){const u=String(o),h=gt({},(this.state[n]||{})[u],(this.stateChanges[n]||{})[u]);if(this.deletedStates[n]===null)return{};if(this.deletedStates[n]){const m=this.deletedStates[n][o];if(m===null)return{};for(const v in m)delete h[v]}return h}initializeTileState(n,o){n.setFeatureState(this.state,o)}coalesceChanges(n,o){const u={};for(const h in this.stateChanges){this.state[h]=this.state[h]||{};const m={};for(const v in this.stateChanges[h])this.state[h][v]||(this.state[h][v]={}),gt(this.state[h][v],this.stateChanges[h][v]),m[v]=this.state[h][v];u[h]=m}for(const h in this.deletedStates){this.state[h]=this.state[h]||{};const m={};if(this.deletedStates[h]===null)for(const v in this.state[h])m[v]={},this.state[h][v]={};else for(const v in this.deletedStates[h]){if(this.deletedStates[h][v]===null)this.state[h][v]={};else if(this.state[h][v])for(const x of Object.keys(this.deletedStates[h][v]))delete this.state[h][v][x];m[v]=this.state[h][v]}u[h]=u[h]||{},gt(u[h],m)}if(this.stateChanges={},this.deletedStates={},Object.keys(u).length!==0)for(const h in n)n[h].setFeatureState(u,o)}}class _2{constructor(n){this.size=n,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(n,o){const u=this.toIdx(n,o);return{min:this.minimums[u],max:this.maximums[u]}}isLeaf(n,o){return this.leaves[this.toIdx(n,o)]}toIdx(n,o){return o*this.size+n}}function x2(i,n,o,u){let h=0,m=Number.MAX_VALUE;for(let v=0;v<3;v++)if(Math.abs(u[v])<1e-15){if(o[v]<i[v]||o[v]>n[v])return null}else{const x=1/u[v];let S=(i[v]-o[v])*x,E=(n[v]-o[v])*x;if(S>E){const R=S;S=E,E=R}if(S>h&&(h=S),E<m&&(m=E),h>m)return null}return h}function b2(i,n,o,u,h,m,v,x,S,E,R){const z=u-i,L=h-n,H=m-o,G=v-i,Y=x-n,ae=S-o,ve=R[1]*ae-R[2]*Y,Ce=R[2]*G-R[0]*ae,ye=R[0]*Y-R[1]*G,Ee=z*ve+L*Ce+H*ye;if(Math.abs(Ee)<1e-15)return null;const Ae=1/Ee,Pe=E[0]-i,Ye=E[1]-n,Ze=E[2]-o,at=(Pe*ve+Ye*Ce+Ze*ye)*Ae;if(at<0||at>1)return null;const At=Ye*H-Ze*L,tt=Ze*z-Pe*H,pt=Pe*L-Ye*z,mt=(R[0]*At+R[1]*tt+R[2]*pt)*Ae;return mt<0||at+mt>1?null:(G*At+Y*tt+ae*pt)*Ae}function w2(i,n,o){return(i-n)/(o-n)}function S2(i,n,o,u,h,m,v,x,S){const E=1<<o,R=m-u,z=v-h,L=(i+1)/E*R+u,H=(n+0)/E*z+h,G=(n+1)/E*z+h;x[0]=(i+0)/E*R+u,x[1]=H,S[0]=L,S[1]=G}class E2{constructor(n){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=n,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const o=function(m){const v=Math.ceil(Math.log2(m.dim/8)),x=[];let S=Math.ceil(Math.pow(2,v));const E=1/S,R=(H,G,Y,ae,ve)=>{const Ce=ae?1:0,ye=(H+1)*Y-Ce,Ee=G*Y,Ae=(G+1)*Y-Ce;ve[0]=H*Y,ve[1]=Ee,ve[2]=ye,ve[3]=Ae};let z=new _2(S);const L=[];for(let H=0;H<S*S;H++){R(H%S,Math.floor(H/S),E,!1,L);const G=ql(L[0],L[1],m),Y=ql(L[2],L[1],m),ae=ql(L[2],L[3],m),ve=ql(L[0],L[3],m);z.minimums.push(Math.min(G,Y,ae,ve)),z.maximums.push(Math.max(G,Y,ae,ve)),z.leaves.push(1)}for(x.push(z),S/=2;S>=1;S/=2){const H=x[x.length-1];z=new _2(S);for(let G=0;G<S*S;G++){R(G%S,Math.floor(G/S),2,!0,L);const Y=H.getElevation(L[0],L[1]),ae=H.getElevation(L[2],L[1]),ve=H.getElevation(L[2],L[3]),Ce=H.getElevation(L[0],L[3]),ye=H.isLeaf(L[0],L[1]),Ee=H.isLeaf(L[2],L[1]),Ae=H.isLeaf(L[2],L[3]),Pe=H.isLeaf(L[0],L[3]),Ye=Math.min(Y.min,ae.min,ve.min,Ce.min),Ze=Math.max(Y.max,ae.max,ve.max,Ce.max),at=ye&&Ee&&Ae&&Pe;z.maximums.push(Ze),z.minimums.push(Ye),z.leaves.push(Ze-Ye<=5&&at?1:0)}x.push(z)}return x}(this.dem),u=o.length-1,h=o[u];this._addNode(h.minimums[0],h.maximums[0],h.leaves[0]),this._construct(o,0,0,u,0)}raycastRoot(n,o,u,h,m,v,x=1){return x2([n,o,-100],[u,h,this.maximums[0]*x],m,v)}raycast(n,o,u,h,m,v,x=1){if(!this.nodeCount)return null;const S=this.raycastRoot(n,o,u,h,m,v,x);if(S==null)return null;const E=[],R=[],z=[],L=[],H=[{idx:0,t:S,nodex:0,nodey:0,depth:0}];for(;H.length>0;){const{idx:G,t:Y,nodex:ae,nodey:ve,depth:Ce}=H.pop();if(this.leaves[G]){S2(ae,ve,Ce,n,o,u,h,z,L);const Ee=1<<Ce,Ae=(ae+0)/Ee,Pe=(ae+1)/Ee,Ye=(ve+0)/Ee,Ze=(ve+1)/Ee,at=ql(Ae,Ye,this.dem)*x,At=ql(Pe,Ye,this.dem)*x,tt=ql(Pe,Ze,this.dem)*x,pt=ql(Ae,Ze,this.dem)*x,mt=b2(z[0],z[1],at,L[0],z[1],At,L[0],L[1],tt,m,v),_t=b2(L[0],L[1],tt,z[0],L[1],pt,z[0],z[1],at,m,v),Dt=Math.min(mt!==null?mt:Number.MAX_VALUE,_t!==null?_t:Number.MAX_VALUE);if(Dt!==Number.MAX_VALUE)return Dt;{const it=Tf([],m,v,Y);if(C2(at,At,pt,tt,w2(it[0],z[0],L[0]),w2(it[1],z[1],L[1]))>=it[2])return Y}continue}let ye=0;for(let Ee=0;Ee<this._siblingOffset.length;Ee++){S2((ae<<1)+this._siblingOffset[Ee][0],(ve<<1)+this._siblingOffset[Ee][1],Ce+1,n,o,u,h,z,L),z[2]=-100,L[2]=this.maximums[this.childOffsets[G]+Ee]*x;const Ae=x2(z,L,m,v);if(Ae!=null){const Pe=Ae;E[Ee]=Pe;let Ye=!1;for(let Ze=0;Ze<ye&&!Ye;Ze++)Pe>=E[R[Ze]]&&(R.splice(Ze,0,Ee),Ye=!0);Ye||(R[ye]=Ee),ye++}}for(let Ee=0;Ee<ye;Ee++){const Ae=R[Ee];H.push({idx:this.childOffsets[G]+Ae,t:E[Ae],nodex:(ae<<1)+this._siblingOffset[Ae][0],nodey:(ve<<1)+this._siblingOffset[Ae][1],depth:Ce+1})}}return null}_addNode(n,o,u){return this.minimums.push(n),this.maximums.push(o),this.leaves.push(u),this.childOffsets.push(0),this.nodeCount++}_construct(n,o,u,h,m){if(n[h].isLeaf(o,u)===1)return;this.childOffsets[m]||(this.childOffsets[m]=this.nodeCount);const v=h-1,x=n[v];let S=0,E=0;for(let R=0;R<this._siblingOffset.length;R++){const z=2*o+this._siblingOffset[R][0],L=2*u+this._siblingOffset[R][1],H=x.getElevation(z,L),G=x.isLeaf(z,L),Y=this._addNode(H.min,H.max,G);G&&(S|=1<<R),E||(E=Y)}for(let R=0;R<this._siblingOffset.length;R++)S&1<<R||this._construct(n,2*o+this._siblingOffset[R][0],2*u+this._siblingOffset[R][1],v,E+R)}}function C2(i,n,o,u,h,m){return Jn(Jn(i,o,m),Jn(n,u,m),h)}function ql(i,n,o){const u=o.dim,h=pe(i*u-.5,0,u-1),m=pe(n*u-.5,0,u-1),v=Math.floor(h),x=Math.floor(m),S=Math.min(v+1,u-1),E=Math.min(x+1,u-1);return C2(o.get(v,x),o.get(S,x),o.get(v,E),o.get(S,E),h-v,m-x)}const T2={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function Y3(i,n,o){return(256*i*256+256*n+o)/10-1e4}function J3(i,n,o){return 256*i+n+o/256-32768}class Xg{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(n,o,u,h=!1,m=!1){if(this.uid=n,o.height!==o.width)throw new RangeError("DEM tiles must be square");if(u&&u!=="mapbox"&&u!=="terrarium")return Ct(`"${u}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=o.height;const v=this.dim=o.height-2,x=new Uint32Array(o.data.buffer);if(this.pixels=new Uint8Array(o.data.buffer),this.encoding=u||"mapbox",this.borderReady=h,!h){for(let S=0;S<v;S++)x[this._idx(-1,S)]=x[this._idx(0,S)],x[this._idx(v,S)]=x[this._idx(v-1,S)],x[this._idx(S,-1)]=x[this._idx(S,0)],x[this._idx(S,v)]=x[this._idx(S,v-1)];x[this._idx(-1,-1)]=x[this._idx(0,0)],x[this._idx(v,-1)]=x[this._idx(v-1,0)],x[this._idx(-1,v)]=x[this._idx(0,v-1)],x[this._idx(v,v)]=x[this._idx(v-1,v-1)],m&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new E2(this)}get(n,o,u=!1){u&&(n=pe(n,-1,this.dim),o=pe(o,-1,this.dim));const h=4*this._idx(n,o);return(this.encoding==="terrarium"?J3:Y3)(this.pixels[h],this.pixels[h+1],this.pixels[h+2])}static getUnpackVector(n){return T2[n]}get unpackVector(){return T2[this.encoding]}_idx(n,o){if(n<-1||n>=this.dim+1||o<-1||o>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(o+1)*this.stride+(n+1)}static pack(n,o){const u=[0,0,0,0],h=Xg.getUnpackVector(o);let m=Math.floor((n+h[3])/h[2]);return u[2]=m%256,m=Math.floor(m/256),u[1]=m%256,m=Math.floor(m/256),u[0]=m,u}getPixels(){return new $o({width:this.stride,height:this.stride},this.pixels)}backfillBorder(n,o,u){if(this.dim!==n.dim)throw new Error("dem dimension mismatch");let h=o*this.dim,m=o*this.dim+this.dim,v=u*this.dim,x=u*this.dim+this.dim;switch(o){case-1:h=m-1;break;case 1:m=h+1}switch(u){case-1:v=x-1;break;case 1:x=v+1}const S=-o*this.dim,E=-u*this.dim;for(let R=v;R<x;R++)for(let z=h;z<m;z++){const L=4*this._idx(z,R),H=4*this._idx(z+S,R+E);this.pixels[L+0]=n.pixels[H+0],this.pixels[L+1]=n.pixels[H+1],this.pixels[L+2]=n.pixels[H+2],this.pixels[L+3]=n.pixels[H+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}Jt(Xg,"DEMData"),Jt(E2,"DemMinMaxQuadTree",{omit:["dem"]});class Q3{constructor(n,o){this.max=n,this.onRemove=o,this.reset()}reset(){for(const n in this.data)for(const o of this.data[n])o.timeout&&clearTimeout(o.timeout),this.onRemove(o.value);return this.data={},this.order=[],this}add(n,o,u){const h=n.wrapped().key;this.data[h]===void 0&&(this.data[h]=[]);const m={value:o,timeout:void 0};if(u!==void 0&&(m.timeout=setTimeout(()=>{this.remove(n,m)},u)),this.data[h].push(m),this.order.push(h),this.order.length>this.max){const v=this._getAndRemoveByKey(this.order[0]);v&&this.onRemove(v)}return this}has(n){return n.wrapped().key in this.data}getAndRemove(n){return this.has(n)?this._getAndRemoveByKey(n.wrapped().key):null}_getAndRemoveByKey(n){const o=this.data[n].shift();return o.timeout&&clearTimeout(o.timeout),this.data[n].length===0&&delete this.data[n],this.order.splice(this.order.indexOf(n),1),o.value}getByKey(n){const o=this.data[n];return o?o[0].value:null}get(n){return this.has(n)?this.data[n.wrapped().key][0].value:null}remove(n,o){if(!this.has(n))return this;const u=n.wrapped().key,h=o===void 0?0:this.data[u].indexOf(o),m=this.data[u][h];return this.data[u].splice(h,1),m.timeout&&clearTimeout(m.timeout),this.data[u].length===0&&delete this.data[u],this.onRemove(m.value),this.order.splice(this.order.indexOf(u),1),this}setMaxSize(n){for(this.max=n;this.order.length>this.max;){const o=this._getAndRemoveByKey(this.order[0]);o&&this.onRemove(o)}return this}filter(n){const o=[];for(const u in this.data)for(const h of this.data[u])n(h.value)||o.push(h);for(const u of o)this.remove(u.value.tileID,u)}}class Cd{constructor(n,o,u){this.func=n,this.mask=o,this.range=u}}Cd.ReadOnly=!1,Cd.ReadWrite=!0,Cd.disabled=new Cd(519,Cd.ReadOnly,[0,1]);const lx=7680;class cx{constructor(n,o,u,h,m,v){this.test=n,this.ref=o,this.mask=u,this.fail=h,this.depthFail=m,this.pass=v}}cx.disabled=new cx({func:519,mask:0},0,0,lx,lx,lx);class Rs{constructor(n,o,u){this.blendFunction=n,this.blendColor=o,this.mask=u}}Rs.Replace=[1,0],Rs.disabled=new Rs(Rs.Replace,Nr.transparent,[!1,!1,!1,!1]),Rs.unblended=new Rs(Rs.Replace,Nr.transparent,[!0,!0,!0,!0]),Rs.alphaBlended=new Rs([1,771],Nr.transparent,[!0,!0,!0,!0]);const ux=1029,dx=2305;class es{constructor(n,o,u){this.enable=n,this.mode=o,this.frontFace=u}}es.disabled=new es(!1,ux,dx),es.backCCW=new es(!0,ux,dx),es.backCW=new es(!0,ux,2304),es.frontCW=new es(!0,1028,2304),es.frontCCW=new es(!0,1028,dx);class Qc extends Oi{constructor(n,o,u){super(),this.id=n,this._onlySymbols=u,o.on("data",h=>{h.dataType==="source"&&h.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&h.dataType==="source"&&h.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))}),o.on("error",()=>{this._sourceErrored=!0}),this._source=o,this._tiles={},this._cache=new Q3(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=o.minTileCacheSize,this._maxTileCacheSize=o.maxTileCacheSize,this._loadedParentTiles={},this._coveredTiles={},this._state=new K3,this._isRaster=this._source.type==="raster"||this._source.type==="raster-dem"||this._source.type==="custom"&&this._source._dataType==="raster"}onAdd(n){this.map=n,this._minTileCacheSize=this._minTileCacheSize===void 0&&n?n._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=this._maxTileCacheSize===void 0&&n?n._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const n in this._tiles){const o=this._tiles[n];if(o.state!=="loaded"&&o.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const n=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,n&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(n,o){return n.isSymbolTile=this._onlySymbols,this._source.loadTile(n,o)}_unloadTile(n){if(this._source.unloadTile)return this._source.unloadTile(n,()=>{})}_abortTile(n){if(this._source.abortTile)return this._source.abortTile(n,()=>{})}serialize(){return this._source.serialize()}prepare(n){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const o in this._tiles){const u=this._tiles[o];u.upload(n),u.prepare(this.map.style.imageManager)}}getIds(){return Qe(this._tiles).map(n=>n.tileID).sort(I2).map(n=>n.key)}getRenderableIds(n){const o=[];for(const u in this._tiles)this._isIdRenderable(+u,n)&&o.push(this._tiles[u]);return n?o.sort((u,h)=>{const m=u.tileID,v=h.tileID,x=new ee(m.canonical.x,m.canonical.y)._rotate(this.transform.angle),S=new ee(v.canonical.x,v.canonical.y)._rotate(this.transform.angle);return m.overscaledZ-v.overscaledZ||S.y-x.y||S.x-x.x}).map(u=>u.tileID.key):o.map(u=>u.tileID).sort(I2).map(u=>u.key)}hasRenderableParent(n){const o=this.findLoadedParent(n,0);return!!o&&this._isIdRenderable(o.tileID.key)}_isIdRenderable(n,o){return this._tiles[n]&&this._tiles[n].hasData()&&!this._coveredTiles[n]&&(o||!this._tiles[n].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const n in this._tiles)this._tiles[n].state!=="errored"&&this._reloadTile(+n,"reloading")}}_reloadTile(n,o){const u=this._tiles[n];u&&(u.state!=="loading"&&(u.state=o),this._loadTile(u,this._tileLoaded.bind(this,u,n,o)))}_tileLoaded(n,o,u,h){if(h)if(n.state="errored",h.status!==404)this._source.fire(new _i(h,{tile:n}));else if(this._source.type==="raster-dem"&&this.usedForTerrain&&this.map.painter.terrain){const m=this.map.painter.terrain;this.update(this.transform,m.getScaledDemTileSize(),!0),m.resetTileLookupCache(this.id)}else this.update(this.transform);else n.timeAdded=ji.now(),u==="expired"&&(n.refreshedUponExpiration=!0),this._setTileReloadTimer(o,n),this._source.type==="raster-dem"&&n.dem&&this._backfillDEM(n),this._state.initializeTileState(n,this.map?this.map.painter:null),this._source.fire(new oo("data",{dataType:"source",tile:n,coord:n.tileID,sourceCacheId:this.id}))}_backfillDEM(n){const o=this.getRenderableIds();for(let h=0;h<o.length;h++){const m=o[h];if(n.neighboringTiles&&n.neighboringTiles[m]){const v=this.getTileByID(m);u(n,v),u(v,n)}}function u(h,m){if(!h.dem||h.dem.borderReady)return;h.needsHillshadePrepare=!0,h.needsDEMTextureUpload=!0;let v=m.tileID.canonical.x-h.tileID.canonical.x;const x=m.tileID.canonical.y-h.tileID.canonical.y,S=Math.pow(2,h.tileID.canonical.z),E=m.tileID.key;v===0&&x===0||Math.abs(x)>1||(Math.abs(v)>1&&(Math.abs(v+S)===1?v+=S:Math.abs(v-S)===1&&(v-=S)),m.dem&&h.dem&&(h.dem.backfillBorder(m.dem,v,x),h.neighboringTiles&&h.neighboringTiles[E]&&(h.neighboringTiles[E].backfilled=!0)))}}getTile(n){return this.getTileByID(n.key)}getTileByID(n){return this._tiles[n]}_retainLoadedChildren(n,o,u,h){for(const m in this._tiles){let v=this._tiles[m];if(h[m]||!v.hasData()||v.tileID.overscaledZ<=o||v.tileID.overscaledZ>u)continue;let x=v.tileID;for(;v&&v.tileID.overscaledZ>o+1;){const E=v.tileID.scaledTo(v.tileID.overscaledZ-1);v=this._tiles[E.key],v&&v.hasData()&&(x=E)}let S=x;for(;S.overscaledZ>o;)if(S=S.scaledTo(S.overscaledZ-1),n[S.key]){h[x.key]=x;break}}}findLoadedParent(n,o){if(n.key in this._loadedParentTiles){const u=this._loadedParentTiles[n.key];return u&&u.tileID.overscaledZ>=o?u:null}for(let u=n.overscaledZ-1;u>=o;u--){const h=n.scaledTo(u),m=this._getLoadedTile(h);if(m)return m}}_getLoadedTile(n){const o=this._tiles[n.key];return o&&o.hasData()?o:this._cache.getByKey(this._source.reparseOverscaled?n.wrapped().key:n.canonical.key)}updateCacheSize(n,o){o=o||this._source.tileSize;const u=Math.ceil(n.width/o)+1,h=Math.ceil(n.height/o)+1,m=Math.floor(u*h*5),v=typeof this._minTileCacheSize=="number"?Math.max(this._minTileCacheSize,m):m,x=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,v):v;this._cache.setMaxSize(x)}handleWrapJump(n){const o=Math.round((n-(this._prevLng===void 0?n:this._prevLng))/360);if(this._prevLng=n,o){const u={};for(const h in this._tiles){const m=this._tiles[h];m.tileID=m.tileID.unwrapTo(m.tileID.wrap+o),u[m.tileID.key]=m}this._tiles=u;for(const h in this._timers)clearTimeout(this._timers[h]),delete this._timers[h];for(const h in this._tiles)this._setTileReloadTimer(+h,this._tiles[h])}}update(n,o,u){if(this.transform=n,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!u)return;let h;this.updateCacheSize(n,o),this.transform.projection.name!=="globe"&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?h=n.getVisibleUnwrappedCoordinates(this._source.tileID).map(x=>new co(x.canonical.z,x.wrap,x.canonical.z,x.canonical.x,x.canonical.y)):(h=n.coveringTiles({tileSize:o||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!u,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(h=h.filter(x=>this._source.hasTile(x)))):h=[];const m=this._updateRetainedTiles(h);if(M2(this._source.type)&&h.length!==0){const x={},S={},E=Object.keys(m);for(const z of E){const L=m[z],H=this._tiles[z];if(!H||H.fadeEndTime&&H.fadeEndTime<=ji.now())continue;const G=this.findLoadedParent(L,Math.max(L.overscaledZ-Qc.maxOverzooming,this._source.minzoom));G&&(this._addTile(G.tileID),x[G.tileID.key]=G.tileID),S[z]=L}const R=h[h.length-1].overscaledZ;for(const z in this._tiles){const L=this._tiles[z];if(m[z]||!L.hasData())continue;let H=L.tileID;for(;H.overscaledZ>R;){H=H.scaledTo(H.overscaledZ-1);const G=this._tiles[H.key];if(G&&G.hasData()&&S[H.key]){m[z]=L.tileID;break}}}for(const z in x)m[z]||(this._coveredTiles[z]=!0,m[z]=x[z])}for(const x in m)this._tiles[x].clearFadeHold();const v=function(x,S){const E=[];for(const R in x)R in S||E.push(R);return E}(this._tiles,m);for(const x of v){const S=this._tiles[x];S.hasSymbolBuckets&&!S.holdingForFade()?S.setHoldDuration(this.map._fadeDuration):S.hasSymbolBuckets&&!S.symbolFadeFinished()||this._removeTile(+x)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const n in this._tiles)this._tiles[n].holdingForFade()&&this._removeTile(+n)}_updateRetainedTiles(n){const o={};if(n.length===0)return o;const u={},h=n.reduce((E,R)=>Math.min(E,R.overscaledZ),1/0),m=n[0].overscaledZ,v=Math.max(m-Qc.maxOverzooming,this._source.minzoom),x=Math.max(m+Qc.maxUnderzooming,this._source.minzoom),S={};for(const E of n){const R=this._addTile(E);o[E.key]=E,R.hasData()||h<this._source.maxzoom&&(S[E.key]=E)}this._retainLoadedChildren(S,h,x,o);for(const E of n){let R=this._tiles[E.key];if(R.hasData())continue;if(E.canonical.z>=this._source.maxzoom){const L=E.children(this._source.maxzoom)[0],H=this.getTile(L);if(H&&H.hasData()){o[L.key]=L;continue}}else{const L=E.children(this._source.maxzoom);if(o[L[0].key]&&o[L[1].key]&&o[L[2].key]&&o[L[3].key])continue}let z=R.wasRequested();for(let L=E.overscaledZ-1;L>=v;--L){const H=E.scaledTo(L);if(u[H.key]||(u[H.key]=!0,R=this.getTile(H),!R&&z&&(R=this._addTile(H)),R&&(o[H.key]=H,z=R.wasRequested(),R.hasData())))break}}return o}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const n in this._tiles){const o=[];let u,h=this._tiles[n].tileID;for(;h.overscaledZ>0;){if(h.key in this._loadedParentTiles){u=this._loadedParentTiles[h.key];break}o.push(h.key);const m=h.scaledTo(h.overscaledZ-1);if(u=this._getLoadedTile(m),u)break;h=m}for(const m of o)this._loadedParentTiles[m]=u}}_addTile(n){let o=this._tiles[n.key];if(o)return o;o=this._cache.getAndRemove(n),o&&(this._setTileReloadTimer(n.key,o),o.tileID=n,this._state.initializeTileState(o,this.map?this.map.painter:null),this._cacheTimers[n.key]&&(clearTimeout(this._cacheTimers[n.key]),delete this._cacheTimers[n.key],this._setTileReloadTimer(n.key,o)));const u=!!o;if(!u){const h=this.map?this.map.painter:null;o=new sx(n,this._source.tileSize*n.overscaleFactor(),this.transform.tileZoom,h,this._isRaster),this._loadTile(o,this._tileLoaded.bind(this,o,n.key,o.state))}return o?(o.uses++,this._tiles[n.key]=o,u||this._source.fire(new oo("dataloading",{tile:o,coord:o.tileID,dataType:"source"})),o):null}_setTileReloadTimer(n,o){n in this._timers&&(clearTimeout(this._timers[n]),delete this._timers[n]);const u=o.getExpiryTimeout();u&&(this._timers[n]=setTimeout(()=>{this._reloadTile(n,"expired"),delete this._timers[n]},u))}_removeTile(n){const o=this._tiles[n];o&&(o.uses--,delete this._tiles[n],this._timers[n]&&(clearTimeout(this._timers[n]),delete this._timers[n]),o.uses>0||(o.hasData()&&o.state!=="reloading"?this._cache.add(o.tileID,o,o.getExpiryTimeout()):(o.aborted=!0,this._abortTile(o),this._unloadTile(o))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const n in this._tiles)this._removeTile(+n);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(n,o,u){const h=[],m=this.transform;if(!m)return h;const v=m.projection.name==="globe",x=Is(m.center.lng);for(const S in this._tiles){const E=this._tiles[S];if(u&&E.clearQueryDebugViz(),E.holdingForFade())continue;let R;if(v){const z=E.tileID.canonical;if(z.z===0){const L=[Math.abs(pe(x,...Yf(z,-1))-x),Math.abs(pe(x,...Yf(z,1))-x)];R=[0,2*L.indexOf(Math.min(...L))-1]}else{const L=[Math.abs(pe(x,...Yf(z,-1))-x),Math.abs(pe(x,...Yf(z,0))-x),Math.abs(pe(x,...Yf(z,1))-x)];R=[L.indexOf(Math.min(...L))-1]}}else R=[0];for(const z of R){const L=n.containsTile(E,m,o,z);L&&h.push(L)}}return h}getVisibleCoordinates(n){const o=this.getRenderableIds(n).map(u=>this._tiles[u].tileID);for(const u of o)u.projMatrix=this.transform.calculateProjMatrix(u.toUnwrapped());return o}hasTransition(){if(this._source.hasTransition())return!0;if(M2(this._source.type))for(const n in this._tiles){const o=this._tiles[n];if(o.fadeEndTime!==void 0&&o.fadeEndTime>=ji.now())return!0}return!1}setFeatureState(n,o,u){this._state.updateState(n=n||"_geojsonTileLayer",o,u)}removeFeatureState(n,o,u){this._state.removeFeatureState(n=n||"_geojsonTileLayer",o,u)}getFeatureState(n,o){return this._state.getState(n=n||"_geojsonTileLayer",o)}setDependencies(n,o,u){const h=this._tiles[n];h&&h.setDependencies(o,u)}reloadTilesForDependencies(n,o){for(const u in this._tiles)this._tiles[u].hasDependency(n,o)&&this._reloadTile(+u,"reloading");this._cache.filter(u=>!u.hasDependency(n,o))}_preloadTiles(n,o){if(!this._sourceLoaded){const x=()=>{this._sourceLoaded&&(this._source.off("data",x),this._preloadTiles(n,o))};return void this._source.on("data",x)}const u=new Map,h=Array.isArray(n)?n:[n],m=this.map.painter.terrain,v=this.usedForTerrain&&m?m.getScaledDemTileSize():this._source.tileSize;for(const x of h){const S=x.coveringTiles({tileSize:v,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const E of S)u.set(E.key,E);this.usedForTerrain&&x.updateElevation(!1)}Ge(Array.from(u.values()),(x,S)=>{const E=new sx(x,this._source.tileSize*x.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(E,R=>{this._source.type==="raster-dem"&&E.dem&&this._backfillDEM(E),S(R,E)})},o)}}function I2(i,n){const o=Math.abs(2*i.wrap)-+(i.wrap<0),u=Math.abs(2*n.wrap)-+(n.wrap<0);return i.overscaledZ-n.overscaledZ||u-o||n.canonical.y-i.canonical.y||n.canonical.x-i.canonical.x}function M2(i){return i==="raster"||i==="image"||i==="video"||i==="custom"}function Yf(i,n){const o=1<<i.z;return[i.x/o+n,(i.x+1)/o+n]}Qc.maxOverzooming=10,Qc.maxUnderzooming=3;class Kg{constructor(n,o,u){this._demTile=n,this._dem=this._demTile.dem,this._scale=o,this._offset=u}static create(n,o,u){const h=u||n.findDEMTileFor(o);if(!h||!h.dem)return;const m=h.dem,v=h.tileID,x=1<<o.canonical.z-v.canonical.z;return new Kg(h,h.tileSize/gn/x,[(o.canonical.x/x-v.canonical.x)*m.dim,(o.canonical.y/x-v.canonical.y)*m.dim])}tileCoordToPixel(n,o){const u=o*this._scale+this._offset[1],h=Math.floor(n*this._scale+this._offset[0]),m=Math.floor(u);return new ee(h,m)}getElevationAt(n,o,u,h){const m=n*this._scale+this._offset[0],v=o*this._scale+this._offset[1],x=Math.floor(m),S=Math.floor(v),E=this._dem;return h=!!h,u?Jn(Jn(E.get(x,S,h),E.get(x,S+1,h),v-S),Jn(E.get(x+1,S,h),E.get(x+1,S+1,h),v-S),m-x):E.get(x,S,h)}getElevationAtPixel(n,o,u){return this._dem.get(n,o,!!u)}getMeterToDEM(n){return(1<<this._demTile.tileID.canonical.z)*Ya(1,n)*this._dem.stride}}class P2{constructor(n,o){this.tileID=n,this.x=n.canonical.x,this.y=n.canonical.y,this.z=n.canonical.z,this.grid=new Ws(gn,16,0),this.featureIndexArray=new jc,this.promoteId=o}insert(n,o,u,h,m,v=0){const x=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(u,h,m,v);const S=this.grid;for(let E=0;E<o.length;E++){const R=o[E],z=[1/0,1/0,-1/0,-1/0];for(let L=0;L<R.length;L++){const H=R[L];z[0]=Math.min(z[0],H.x),z[1]=Math.min(z[1],H.y),z[2]=Math.max(z[2],H.x),z[3]=Math.max(z[3],H.y)}z[0]<gn&&z[1]<gn&&z[2]>=0&&z[3]>=0&&S.insert(x,z[0],z[1],z[2],z[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new G_(new Dg(this.rawTileData)).layers,this.sourceLayerCoder=new p2(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const n in this.vtLayers)this.vtFeatures[n]=[]}return this.vtLayers}query(n,o,u,h){this.loadVTLayers();const m=n.params||{},v=ed(m.filter),x=n.tileResult,S=n.transform,E=x.bufferedTilespaceBounds,R=this.grid.query(E.min.x,E.min.y,E.max.x,E.max.y,(G,Y,ae,ve)=>eC(x.bufferedTilespaceGeometry,G,Y,ae,ve));R.sort(e$);let z=null;S.elevation&&R.length>0&&(z=Kg.create(S.elevation,this.tileID));const L={};let H;for(let G=0;G<R.length;G++){const Y=R[G];if(Y===H)continue;H=Y;const ae=this.featureIndexArray.get(Y);let ve=null;this.loadMatchingFeature(L,ae,v,m.layers,m.availableImages,o,u,h,(Ce,ye,Ee,Ae=0)=>(ve||(ve=Qs(Ce,this.tileID.canonical,n.tileTransform)),ye.queryIntersectsFeature(x,Ce,Ee,ve,this.z,n.transform,n.pixelPosMatrix,z,Ae)))}return L}loadMatchingFeature(n,o,u,h,m,v,x,S,E){const{featureIndex:R,bucketIndex:z,sourceLayerIndex:L,layoutVertexArrayOffset:H}=o,G=this.bucketLayerIDs[z];if(h&&!function(Ce,ye){for(let Ee=0;Ee<Ce.length;Ee++)if(ye.indexOf(Ce[Ee])>=0)return!0;return!1}(h,G))return;const Y=this.sourceLayerCoder.decode(L),ae=this.vtLayers[Y].feature(R);if(u.needGeometry){const Ce=Xc(ae,!0);if(!u.filter(new O(this.tileID.overscaledZ),Ce,this.tileID.canonical))return}else if(!u.filter(new O(this.tileID.overscaledZ),ae))return;const ve=this.getId(ae,Y);for(let Ce=0;Ce<G.length;Ce++){const ye=G[Ce];if(h&&h.indexOf(ye)<0)continue;const Ee=v[ye];if(!Ee)continue;let Ae={};ve!==void 0&&S&&(Ae=S.getState(Ee.sourceLayer||"_geojsonTileLayer",ve));const Pe=gt({},x[ye]);Pe.paint=A2(Pe.paint,Ee.paint,ae,Ae,m),Pe.layout=A2(Pe.layout,Ee.layout,ae,Ae,m);const Ye=!E||E(ae,Ee,Ae,H);if(!Ye)continue;const Ze=new m2(ae,this.z,this.x,this.y,ve);Ze.layer=Pe;let at=n[ye];at===void 0&&(at=n[ye]=[]),at.push({featureIndex:R,feature:Ze,intersectionZ:Ye})}}lookupSymbolFeatures(n,o,u,h,m,v,x,S){const E={};this.loadVTLayers();const R=ed(m);for(const z of n)this.loadMatchingFeature(E,{bucketIndex:u,sourceLayerIndex:h,featureIndex:z,layoutVertexArrayOffset:0},R,v,x,S,o);return E}loadFeature(n){const{featureIndex:o,sourceLayerIndex:u}=n;this.loadVTLayers();const h=this.sourceLayerCoder.decode(u),m=this.vtFeatures[h];if(m[o])return m[o];const v=this.vtLayers[h].feature(o);return m[o]=v,v}hasLayer(n){for(const o of this.bucketLayerIDs)for(const u of o)if(n===u)return!0;return!1}getId(n,o){let u=n.id;if(this.promoteId){const h=typeof this.promoteId=="string"?this.promoteId:this.promoteId[o];h!=null&&(u=n.properties[h]),typeof u=="boolean"&&(u=Number(u))}return u}}function A2(i,n,o,u,h){return ft(i,(m,v)=>{const x=n instanceof ge?n.get(v):null;return x&&x.evaluate?x.evaluate(o,u,h):x})}function e$(i,n){return n-i}Jt(P2,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});class R2{constructor(n,o){this.width=n,this.height=o,this.nextRow=0,this.image=new el({width:n,height:o}),this.positions={},this.uploaded=!1}getDash(n,o){const u=this.getKey(n,o);return this.positions[u]}trim(){const n=this.width,o=this.height=jt(this.nextRow);this.image.resize({width:n,height:o})}getKey(n,o){return n.join(",")+o}getDashRanges(n,o,u){const h=[];let m=n.length%2==1?-n[n.length-1]*u:0,v=n[0]*u,x=!0;h.push({left:m,right:v,isDash:x,zeroLength:n[0]===0});let S=n[0];for(let E=1;E<n.length;E++){x=!x;const R=n[E];m=S*u,S+=R,v=S*u,h.push({left:m,right:v,isDash:x,zeroLength:R===0})}return h}addRoundDash(n,o,u){const h=o/2;for(let m=-u;m<=u;m++){const v=this.width*(this.nextRow+u+m);let x=0,S=n[x];for(let E=0;E<this.width;E++){E/S.right>1&&(S=n[++x]);const R=Math.abs(E-S.left),z=Math.abs(E-S.right),L=Math.min(R,z);let H;const G=m/u*(h+1);if(S.isDash){const Y=h-Math.abs(G);H=Math.sqrt(L*L+Y*Y)}else H=h-Math.sqrt(L*L+G*G);this.image.data[v+E]=Math.max(0,Math.min(255,H+128))}}}addRegularDash(n,o){for(let S=n.length-1;S>=0;--S){const E=n[S],R=n[S+1];E.zeroLength?n.splice(S,1):R&&R.isDash===E.isDash&&(R.left=E.left,n.splice(S,1))}const u=n[0],h=n[n.length-1];u.isDash===h.isDash&&(u.left=h.left-this.width,h.right=u.right+this.width);const m=this.width*this.nextRow;let v=0,x=n[v];for(let S=0;S<this.width;S++){S/x.right>1&&(x=n[++v]);const E=Math.abs(S-x.left),R=Math.abs(S-x.right),z=Math.min(E,R);this.image.data[m+S]=Math.max(0,Math.min(255,(x.isDash?z:-z)+o+128))}}addDash(n,o){const u=this.getKey(n,o);if(this.positions[u])return this.positions[u];const h=o==="round",m=h?7:0,v=2*m+1;if(this.nextRow+v>this.height)return Ct("LineAtlas out of space"),null;n.length===0&&n.push(1);let x=0;for(let R=0;R<n.length;R++)n[R]<0&&(Ct("Negative value is found in line dasharray, replacing values with 0"),n[R]=0),x+=n[R];if(x!==0){const R=this.width/x,z=this.getDashRanges(n,this.width,R);h?this.addRoundDash(z,R,m):this.addRegularDash(z,o==="square"?.5*R:0)}const S=this.nextRow+m;this.nextRow+=v;const E={tl:[S,m],br:[x,0]};return this.positions[u]=E,E}}Jt(R2,"LineAtlas");const O2=1*Qa;class z2{constructor(n){const o={},u=[];for(const x in n){const S=n[x],E=o[x]={};for(const R in S.glyphs){const z=S.glyphs[+R];if(!z||z.bitmap.width===0||z.bitmap.height===0)continue;const L=z.metrics.localGlyph?O2:1,H={x:0,y:0,w:z.bitmap.width+2*L,h:z.bitmap.height+2*L};u.push(H),E[R]=H}}const{w:h,h:m}=X_(u),v=new el({width:h||1,height:m||1});for(const x in n){const S=n[x];for(const E in S.glyphs){const R=S.glyphs[+E];if(!R||R.bitmap.width===0||R.bitmap.height===0)continue;const z=o[x][E],L=R.metrics.localGlyph?O2:1;el.copy(R.bitmap,v,{x:0,y:0},{x:z.x+L,y:z.y+L},R.bitmap)}}this.image=v,this.positions=o}}Jt(z2,"GlyphAtlas");class t${constructor(n){this.tileID=new co(n.tileID.overscaledZ,n.tileID.wrap,n.tileID.canonical.z,n.tileID.canonical.x,n.tileID.canonical.y),this.tileZoom=n.tileZoom,this.uid=n.uid,this.zoom=n.zoom,this.canonical=n.tileID.canonical,this.pixelRatio=n.pixelRatio,this.tileSize=n.tileSize,this.source=n.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=n.showCollisionBoxes,this.collectResourceTiming=!!n.collectResourceTiming,this.returnDependencies=!!n.returnDependencies,this.promoteId=n.promoteId,this.enableTerrain=!!n.enableTerrain,this.isSymbolTile=n.isSymbolTile,this.tileTransform=Jc(n.tileID.canonical,n.projection),this.projection=n.projection}parse(n,o,u,h,m){this.status="parsing",this.data=n,this.collisionBoxArray=new xr;const v=new p2(Object.keys(n.layers).sort()),x=new P2(this.tileID,this.promoteId);x.bucketLayerIDs=[];const S={},E=new R2(256,256),R={featureIndex:x,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:E,availableImages:u},z=o.familiesBySource[this.source];for(const Ae in z){const Pe=n.layers[Ae];if(!Pe)continue;let Ye=!1,Ze=!1;for(const tt of z[Ae])tt[0].type==="symbol"?Ye=!0:Ze=!0;if(this.isSymbolTile===!0&&!Ye||this.isSymbolTile===!1&&!Ze)continue;Pe.version===1&&Ct(`Vector tile source "${this.source}" layer "${Ae}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const at=v.encode(Ae),At=[];for(let tt=0;tt<Pe.length;tt++){const pt=Pe.feature(tt),mt=x.getId(pt,Ae);At.push({feature:pt,id:mt,index:tt,sourceLayerIndex:at})}for(const tt of z[Ae]){const pt=tt[0];this.isSymbolTile!==void 0&&pt.type==="symbol"!==this.isSymbolTile||pt.minzoom&&this.zoom<Math.floor(pt.minzoom)||pt.maxzoom&&this.zoom>=pt.maxzoom||pt.visibility!=="none"&&(hx(tt,this.zoom,u),(S[pt.id]=pt.createBucket({index:x.bucketLayerIDs.length,layers:tt,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:at,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.spec,availableImages:u})).populate(At,R,this.tileID.canonical,this.tileTransform),x.bucketLayerIDs.push(tt.map(mt=>mt.id)))}}let L,H,G,Y;E.trim();const ae={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},ve=()=>{if(L)return m(L);if(H&&G&&Y){const Ae=new z2(H),Pe=new NC(G,Y);for(const Ye in S){const Ze=S[Ye];Ze instanceof Hl?(hx(Ze.layers,this.zoom,u),I3(Ze,H,Ae.positions,G,Pe.iconPositions,this.showCollisionBoxes,u,this.tileID.canonical,this.tileZoom,this.projection)):Ze.hasPattern&&(Ze instanceof zg||Ze instanceof Mg||Ze instanceof Bf)&&(hx(Ze.layers,this.zoom,u),Ze.addFeatures(R,this.tileID.canonical,Pe.patternPositions,u,this.tileTransform))}this.status="done",m(null,{buckets:Qe(S).filter(Ye=>!Ye.isEmpty()),featureIndex:x,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Ae.image,lineAtlas:E,imageAtlas:Pe,glyphMap:this.returnDependencies?H:null,iconMap:this.returnDependencies?G:null,glyphPositions:this.returnDependencies?Ae.positions:null})}},Ce=ft(R.glyphDependencies,Ae=>Object.keys(Ae).map(Number));Object.keys(Ce).length?h.send("getGlyphs",{uid:this.uid,stacks:Ce},(Ae,Pe)=>{L||(L=Ae,H=Pe,ve())},void 0,!1,ae):H={};const ye=Object.keys(R.iconDependencies);ye.length?h.send("getImages",{icons:ye,source:this.source,tileID:this.tileID,type:"icons"},(Ae,Pe)=>{L||(L=Ae,G=Pe,ve())},void 0,!1,ae):G={};const Ee=Object.keys(R.patternDependencies);Ee.length?h.send("getImages",{icons:Ee,source:this.source,tileID:this.tileID,type:"patterns"},(Ae,Pe)=>{L||(L=Ae,Y=Pe,ve())},void 0,!1,ae):Y={},ve()}}function hx(i,n,o){const u=new O(n);for(const h of i)h.recalculate(u,o)}class k2{constructor(n){this.entries={},this.scheduler=n}request(n,o,u,h){const m=this.entries[n]=this.entries[n]||{callbacks:[]};if(m.result){const[v,x]=m.result;return this.scheduler?this.scheduler.add(()=>{h(v,x)},o):h(v,x),()=>{}}return m.callbacks.push(h),m.cancel||(m.cancel=u((v,x)=>{m.result=[v,x];for(const S of m.callbacks)this.scheduler?this.scheduler.add(()=>{S(v,x)},o):S(v,x);setTimeout(()=>delete this.entries[n],3e3)})),()=>{m.result||(m.callbacks=m.callbacks.filter(v=>v!==h),m.callbacks.length||(m.cancel(),delete this.entries[n]))}}}function L2(i,n,o){const u=JSON.stringify(i.request);return i.data&&(this.deduped.entries[u]={result:[null,i.data]}),this.deduped.request(u,{type:"parseTile",isSymbolTile:i.isSymbolTile,zoom:i.tileZoom},h=>{const m=Qn(i.request,(v,x,S,E)=>{v?h(v):x&&h(null,{vectorTile:o?void 0:new G_(new Dg(x)),rawData:x,cacheControl:S,expires:E})});return()=>{m.cancel(),h()}},n)}const D2=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class fx{static from(n){if(!(n instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[o,u]=new Uint8Array(n,0,2);if(o!==219)throw new Error("Data does not appear to be in a KDBush format.");const h=u>>4;if(h!==1)throw new Error(`Got v${h} data when expected v1.`);const m=D2[15&u];if(!m)throw new Error("Unrecognized array type.");const[v]=new Uint16Array(n,2,1),[x]=new Uint32Array(n,4,1);return new fx(x,v,m,n)}constructor(n,o=64,u=Float64Array,h){if(isNaN(n)||n<0)throw new Error(`Unpexpected numItems value: ${n}.`);this.numItems=+n,this.nodeSize=Math.min(Math.max(+o,2),65535),this.ArrayType=u,this.IndexArrayType=n<65536?Uint16Array:Uint32Array;const m=D2.indexOf(this.ArrayType),v=2*n*this.ArrayType.BYTES_PER_ELEMENT,x=n*this.IndexArrayType.BYTES_PER_ELEMENT,S=(8-x%8)%8;if(m<0)throw new Error(`Unexpected typed array class: ${u}.`);h&&h instanceof ArrayBuffer?(this.data=h,this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+x+S,2*n),this._pos=2*n,this._finished=!0):(this.data=new ArrayBuffer(8+v+x+S),this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+x+S,2*n),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+m]),new Uint16Array(this.data,2,1)[0]=o,new Uint32Array(this.data,4,1)[0]=n)}add(n,o){const u=this._pos>>1;return this.ids[u]=u,this.coords[this._pos++]=n,this.coords[this._pos++]=o,u}finish(){const n=this._pos>>1;if(n!==this.numItems)throw new Error(`Added ${n} items when expected ${this.numItems}.`);return px(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(n,o,u,h){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:m,coords:v,nodeSize:x}=this,S=[0,m.length-1,0],E=[];for(;S.length;){const R=S.pop()||0,z=S.pop()||0,L=S.pop()||0;if(z-L<=x){for(let ae=L;ae<=z;ae++){const ve=v[2*ae],Ce=v[2*ae+1];ve>=n&&ve<=u&&Ce>=o&&Ce<=h&&E.push(m[ae])}continue}const H=L+z>>1,G=v[2*H],Y=v[2*H+1];G>=n&&G<=u&&Y>=o&&Y<=h&&E.push(m[H]),(R===0?n<=G:o<=Y)&&(S.push(L),S.push(H-1),S.push(1-R)),(R===0?u>=G:h>=Y)&&(S.push(H+1),S.push(z),S.push(1-R))}return E}within(n,o,u){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:h,coords:m,nodeSize:v}=this,x=[0,h.length-1,0],S=[],E=u*u;for(;x.length;){const R=x.pop()||0,z=x.pop()||0,L=x.pop()||0;if(z-L<=v){for(let ae=L;ae<=z;ae++)F2(m[2*ae],m[2*ae+1],n,o)<=E&&S.push(h[ae]);continue}const H=L+z>>1,G=m[2*H],Y=m[2*H+1];F2(G,Y,n,o)<=E&&S.push(h[H]),(R===0?n-u<=G:o-u<=Y)&&(x.push(L),x.push(H-1),x.push(1-R)),(R===0?n+u>=G:o+u>=Y)&&(x.push(H+1),x.push(z),x.push(1-R))}return S}}function px(i,n,o,u,h,m){if(h-u<=o)return;const v=u+h>>1;$2(i,n,v,u,h,m),px(i,n,o,u,v-1,1-m),px(i,n,o,v+1,h,1-m)}function $2(i,n,o,u,h,m){for(;h>u;){if(h-u>600){const E=h-u+1,R=o-u+1,z=Math.log(E),L=.5*Math.exp(2*z/3),H=.5*Math.sqrt(z*L*(E-L)/E)*(R-E/2<0?-1:1);$2(i,n,o,Math.max(u,Math.floor(o-R*L/E+H)),Math.min(h,Math.floor(o+(E-R)*L/E+H)),m)}const v=n[2*o+m];let x=u,S=h;for(Jf(i,n,u,o),n[2*h+m]>v&&Jf(i,n,u,h);x<S;){for(Jf(i,n,x,S),x++,S--;n[2*x+m]<v;)x++;for(;n[2*S+m]>v;)S--}n[2*u+m]===v?Jf(i,n,u,S):(S++,Jf(i,n,S,h)),S<=o&&(u=S+1),o<=S&&(h=S-1)}}function Jf(i,n,o,u){mx(i,o,u),mx(n,2*o,2*u),mx(n,2*o+1,2*u+1)}function mx(i,n,o){const u=i[n];i[n]=i[o],i[o]=u}function F2(i,n,o,u){const h=i-o,m=n-u;return h*h+m*m}l.ARRAY_TYPE=Do,l.AUTH_ERR_MSG=Se,l.Aabb=lo,l.Actor=class{constructor(i,n,o){this.target=i,this.parent=n,this.mapId=o,this.callbacks={},this.cancelCallbacks={},ut(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=Bt()?i:w,this.scheduler=new Z3}send(i,n,o,u,h=!1,m){const v=Math.round(1e18*Math.random()).toString(36).substring(0,10);o&&(o.metadata=m,this.callbacks[v]=o);const x=Lt(this.globalScope)?void 0:[];return this.target.postMessage({id:v,type:i,hasCallback:!!o,targetMapId:u,mustQueue:h,sourceMapId:this.mapId,data:Dl(n,x)},x),{cancel:()=>{o&&delete this.callbacks[v],this.target.postMessage({id:v,type:"<cancel>",targetMapId:u,sourceMapId:this.mapId})}}}receive(i){const n=i.data,o=n.id;if(o&&(!n.targetMapId||this.mapId===n.targetMapId))if(n.type==="<cancel>"){const u=this.cancelCallbacks[o];delete this.cancelCallbacks[o],u&&u.cancel()}else if(n.mustQueue||Bt()){const u=this.callbacks[o];this.cancelCallbacks[o]=this.scheduler.add(()=>this.processTask(o,n),u&&u.metadata||{type:"message"})}else this.processTask(o,n)}processTask(i,n){if(n.type==="<response>"){const o=this.callbacks[i];delete this.callbacks[i],o&&(n.error?o(qs(n.error)):o(null,qs(n.data)))}else{const o=Lt(this.globalScope)?void 0:[],u=n.hasCallback?(m,v)=>{delete this.cancelCallbacks[i],this.target.postMessage({id:i,type:"<response>",sourceMapId:this.mapId,error:m?Dl(m):null,data:Dl(v,o)},o)}:m=>{},h=qs(n.data);if(this.parent[n.type])this.parent[n.type](n.sourceMapId,h,u);else if(this.parent.getWorkerSource){const m=n.type.split(".");this.parent.getWorkerSource(n.sourceMapId,m[0],h.source)[m[1]](h,u)}else u(new Error(`Could not find function ${n.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},l.CanonicalTileID=Og,l.Color=Nr,l.ColorMode=Rs,l.CullFaceMode=es,l.DEMData=Xg,l.DataConstantProperty=K,l.DedupedRequest=k2,l.DepthMode=Cd,l.EXTENT=gn,l.Elevation=class{isDataAvailableAtPoint(i){const n=this._source();if(this.isUsingMockSource()||!n||i.y<0||i.y>1)return!1;const o=n.getSource().maxzoom,u=1<<o,h=Math.floor(i.x),m=Math.floor((i.x-h)*u),v=Math.floor(i.y*u),x=this.findDEMTileFor(new co(o,h,o,m,v));return!(!x||!x.dem)}getAtPointOrZero(i,n=0){return this.getAtPoint(i,n)||0}getAtPoint(i,n,o=!0){if(this.isUsingMockSource())return null;n==null&&(n=null);const u=this._source();if(!u||i.y<0||i.y>1)return n;const h=u.getSource().maxzoom,m=1<<h,v=Math.floor(i.x),x=i.x-v,S=new co(h,v,h,Math.floor(x*m),Math.floor(i.y*m)),E=this.findDEMTileFor(S);if(!E||!E.dem)return n;const R=E.dem,z=1<<E.tileID.canonical.z,L=(x*z-E.tileID.canonical.x)*R.dim,H=(i.y*z-E.tileID.canonical.y)*R.dim,G=Math.floor(L),Y=Math.floor(H);return(o?this.exaggeration():1)*Jn(Jn(R.get(G,Y),R.get(G,Y+1),H-Y),Jn(R.get(G+1,Y),R.get(G+1,Y+1),H-Y),L-G)}getAtTileOffset(i,n,o){const u=1<<i.canonical.z;return this.getAtPointOrZero(new dd(i.wrap+(i.canonical.x+n/gn)/u,(i.canonical.y+o/gn)/u))}getAtTileOffsetFunc(i,n,o,u){return h=>{const m=this.getAtTileOffset(i,h.x,h.y),v=u.upVector(i.canonical,h.x,h.y);return Qo(v,v,m*u.upVectorScale(i.canonical,n,o).metersToTile),v}}getForTilePoints(i,n,o,u){if(this.isUsingMockSource())return!1;const h=Kg.create(this,i,u);return!!h&&(n.forEach(m=>{m[2]=this.exaggeration()*h.getElevationAt(m[0],m[1],o)}),!0)}getMinMaxForTile(i){if(this.isUsingMockSource())return null;const n=this.findDEMTileFor(i);if(!n||!n.dem)return null;const o=n.dem.tree,u=n.tileID,h=1<<i.canonical.z-u.canonical.z;let m=i.canonical.x/h-u.canonical.x,v=i.canonical.y/h-u.canonical.y,x=0;for(let S=0;S<i.canonical.z-u.canonical.z&&!o.leaves[x];S++){m*=2,v*=2;const E=2*Math.floor(v)+Math.floor(m);x=o.childOffsets[x]+E,m%=1,v%=1}return{min:this.exaggeration()*o.minimums[x],max:this.exaggeration()*o.maximums[x]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(i,n,o){throw new Error("Pure virtual method called.")}pointCoordinate(i){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(i){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},l.ErrorEvent=_i,l.EvaluationParameters=O,l.Event=oo,l.Evented=Oi,l.FillExtrusionBucket=Bf,l.Frustum=w_,l.FrustumCorners=b_,l.GLOBE_RADIUS=Cs,l.GLOBE_SCALE_MATCH_LATITUDE=45,l.GLOBE_ZOOM_THRESHOLD_MAX=$E,l.GLOBE_ZOOM_THRESHOLD_MIN=S_,l.GlobeSharedBuffers=class{constructor(i){this._createGrid(i),this._createPoles(i)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const i of this._poleSegments)i.destroy();for(const i of this._gridSegments)i.withSkirts.destroy(),i.withoutSkirts.destroy();if(this._wireframeIndexBuffer){this._wireframeIndexBuffer.destroy();for(const i of this._wireframeSegments)i.destroy()}}_fillGridMeshWithLods(i,n){const o=new Pt,u=new cn,h=[],m=i+1+2,v=n[0]+1,x=n[0]+1+(1+n.length),S=(E,R,z)=>{let L=E===m-1?E-2:E===0?E:E-1;return L+=z?24575:0,[L,R]};for(let E=0;E<m;++E)o.emplaceBack(...S(E,0,!0));for(let E=0;E<v;++E)for(let R=0;R<m;++R)o.emplaceBack(...S(R,E,(R===0||R===m-1)&&!0));for(let E=0;E<n.length;++E){const R=n[E];for(let z=0;z<m;++z)o.emplaceBack(...S(z,R,!0))}for(let E=0;E<n.length;++E){const R=u.length,z=n[E]+1+2,L=new cn;for(let Y=0;Y<z-1;Y++){const ae=Y===z-2,ve=ae?m*(x-n.length+E-Y):m;for(let Ce=0;Ce<m-1;Ce++){const ye=Y*m+Ce;Y===0||ae||Ce===0||Ce===m-2?(L.emplaceBack(ye+1,ye,ye+ve),L.emplaceBack(ye+ve,ye+ve+1,ye+1)):(u.emplaceBack(ye+1,ye,ye+ve),u.emplaceBack(ye+ve,ye+ve+1,ye+1))}}const H=si.simpleSegment(0,R,o.length,u.length-R);for(let Y=0;Y<L.uint16.length;Y+=3)u.emplaceBack(L.uint16[Y],L.uint16[Y+1],L.uint16[Y+2]);const G=si.simpleSegment(0,R,o.length,u.length-R);h.push({withoutSkirts:H,withSkirts:G})}return{vertices:o,indices:u,segments:h}}_createGrid(i){const n=this._fillGridMeshWithLods(qc,Pf);this._gridSegments=n.segments,this._gridBuffer=i.createVertexBuffer(n.vertices,Mf.members),this._gridIndexBuffer=i.createIndexBuffer(n.indices,!0)}_createPoles(i){const n=new cn;for(let h=0;h<=qc;h++)n.emplaceBack(0,h+1,h+2);this._poleIndexBuffer=i.createIndexBuffer(n,!0);const o=new _r,u=new _r;this._poleSegments=[];for(let h=0,m=0;h<S_;h++){const v=360/(1<<h);o.emplaceBack(0,-Cs,0,.5,0),u.emplaceBack(0,-Cs,0,.5,1);for(let x=0;x<=qc;x++){const S=x/qc,E=Jn(0,v,S),[R,z,L]=ld(ZL,XL,E,Cs);o.emplaceBack(R,z,L,S,0),u.emplaceBack(R,z,L,S,1)}this._poleSegments.push(si.simpleSegment(m,0,66,64)),m+=66}this._poleNorthVertexBuffer=i.createVertexBuffer(o,LE,!1),this._poleSouthVertexBuffer=i.createVertexBuffer(u,LE,!1)}getGridBuffers(i,n){return[this._gridBuffer,this._gridIndexBuffer,n?this._gridSegments[i].withSkirts:this._gridSegments[i].withoutSkirts]}getPoleBuffers(i){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[i]]}getWirefameBuffers(i,n){if(!this._wireframeSegments){const o=new Ti,u=qc,h=u+1+2,m=1;this._wireframeSegments=[];for(let v=0,x=0;v<Pf.length;v++){const S=Pf[v];for(let R=m;R<S+m;R++)for(let z=m;z<u+m;z++){const L=R*h+z;o.emplaceBack(L,L+1),o.emplaceBack(L,L+h),o.emplaceBack(L,L+h+1)}const E=S*u*3;this._wireframeSegments.push(si.simpleSegment(0,x,(S+1)*h,E)),x+=E}this._wireframeIndexBuffer=i.createIndexBuffer(o)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments[n]]}},l.GlyphManager=xd,l.ImagePosition=K_,l.KDBush=fx,l.LivePerformanceUtils=Tr,l.LngLat=br,l.LngLatBounds=Nl,l.LocalGlyphMode=Q_,l.MAX_MERCATOR_LATITUDE=Wi,l.MercatorCoordinate=dd,l.ONE_EM=ki,l.OverscaledTileID=co,l.PerformanceMarkers=Sn,l.Point=ee,l.Properties=be,l.RGBAImage=$o,l.Ray=x_,l.RequestManager=class{constructor(i,n,o){this._transformRequestFn=i,this._customAccessToken=n,this._silenceAuthErrors=!!o,this._createSkuToken()}_createSkuToken(){const i=function(){let n="";for(let o=0;o<10;o++)n+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",j,n].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=i.token,this._skuTokenExpiresAt=i.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(i,n){return this._transformRequestFn&&this._transformRequestFn(i,n)||{url:i}}normalizeStyleURL(i,n){if(!Ie(i))return i;const o=Je(i);return o.path=`/styles/v1${o.path}`,this._makeAPIURL(o,this._customAccessToken||n)}normalizeGlyphsURL(i,n){if(!Ie(i))return i;const o=Je(i);return o.path=`/fonts/v1${o.path}`,this._makeAPIURL(o,this._customAccessToken||n)}normalizeSourceURL(i,n,o,u){if(!Ie(i))return i;const h=Je(i);return h.path=`/v4/${h.authority}.json`,h.params.push("secure"),o&&h.params.push(`language=${o}`),u&&h.params.push(`worldview=${u}`),this._makeAPIURL(h,this._customAccessToken||n)}normalizeSpriteURL(i,n,o,u){const h=Je(i);return Ie(i)?(h.path=`/styles/v1${h.path}/sprite${n}${o}`,this._makeAPIURL(h,this._customAccessToken||u)):(h.path+=`${n}${o}`,We(h))}normalizeTileURL(i,n,o){if(this._isSkuTokenExpired()&&this._createSkuToken(),i&&!Ie(i))return i;const u=Je(i);u.path=u.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${n||o&&u.authority!=="raster"&&o===512?"@2x":""}${k.supported?".webp":"$1"}`),u.authority==="raster"?u.path=`/${M.RASTER_URL_PREFIX}${u.path}`:(u.path=u.path.replace(/^.+\/v4\//,"/"),u.path=`/${M.TILE_URL_VERSION}${u.path}`);const h=this._customAccessToken||function(m){for(const v of m){const x=v.match(/^access_token=(.*)$/);if(x)return x[1]}return null}(u.params)||M.ACCESS_TOKEN;return M.REQUIRE_ACCESS_TOKEN&&h&&this._skuToken&&u.params.push(`sku=${this._skuToken}`),this._makeAPIURL(u,h)}canonicalizeTileURL(i,n){const o=Je(i);if(!o.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!o.path.match(/\.[\w]+$/))return i;let u="mapbox://";o.path.match(/^\/raster\/v1\//)?u+=`raster/${o.path.replace(`/${M.RASTER_URL_PREFIX}/`,"")}`:u+=`tiles/${o.path.replace(`/${M.TILE_URL_VERSION}/`,"")}`;let h=o.params;return n&&(h=h.filter(m=>!m.match(/^access_token=/))),h.length&&(u+=`?${h.join("&")}`),u}canonicalizeTileset(i,n){const o=!!n&&Ie(n),u=[];for(const h of i.tiles||[])Me(h)?u.push(this.canonicalizeTileURL(h,o)):u.push(h);return u}_makeAPIURL(i,n){const o="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",u=Je(M.API_URL);if(i.protocol=u.protocol,i.authority=u.authority,i.protocol==="http"){const h=i.params.indexOf("secure");h>=0&&i.params.splice(h,1)}if(u.path!=="/"&&(i.path=`${u.path}${i.path}`),!M.REQUIRE_ACCESS_TOKEN)return We(i);if(n=n||M.ACCESS_TOKEN,!this._silenceAuthErrors){if(!n)throw new Error(`An API access token is required to use Mapbox GL. ${o}`);if(n[0]==="s")throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${o}`)}return i.params=i.params.filter(h=>h.indexOf("access_token")===-1),i.params.push(`access_token=${n||""}`),We(i)}},l.ResourceType=jn,l.SegmentVector=si,l.SourceCache=Qc,l.StencilMode=cx,l.StructArrayLayout1ui2=Lo,l.StructArrayLayout2f1f2i16=_n,l.StructArrayLayout2i4=Pt,l.StructArrayLayout2ui4=Ti,l.StructArrayLayout3f12=Un,l.StructArrayLayout3ui6=cn,l.StructArrayLayout4i8=ht,l.StructArrayLayout5f20=_r,l.Texture=Kf,l.Tile=sx,l.Transitionable=Z,l.Uniform1f=mg,l.Uniform1i=class extends Ks{constructor(i){super(i),this.current=0}set(i,n,o){this.fetchUniformLocation(i,n)&&this.current!==o&&(this.current=o,this.gl.uniform1i(this.location,o))}},l.Uniform2f=class extends Ks{constructor(i){super(i),this.current=[0,0]}set(i,n,o){this.fetchUniformLocation(i,n)&&(o[0]===this.current[0]&&o[1]===this.current[1]||(this.current=o,this.gl.uniform2f(this.location,o[0],o[1])))}},l.Uniform3f=class extends Ks{constructor(i){super(i),this.current=[0,0,0]}set(i,n,o){this.fetchUniformLocation(i,n)&&(o[0]===this.current[0]&&o[1]===this.current[1]&&o[2]===this.current[2]||(this.current=o,this.gl.uniform3f(this.location,o[0],o[1],o[2])))}},l.Uniform4f=yE,l.UniformColor=_E,l.UniformMatrix2f=class extends Ks{constructor(i){super(i),this.current=OL}set(i,n,o){if(this.fetchUniformLocation(i,n)){for(let u=0;u<4;u++)if(o[u]!==this.current[u]){this.current=o,this.gl.uniformMatrix2fv(this.location,!1,o);break}}}},l.UniformMatrix3f=class extends Ks{constructor(i){super(i),this.current=RL}set(i,n,o){if(this.fetchUniformLocation(i,n)){for(let u=0;u<9;u++)if(o[u]!==this.current[u]){this.current=o,this.gl.uniformMatrix3fv(this.location,!1,o);break}}}},l.UniformMatrix4f=class extends Ks{constructor(i){super(i),this.current=AL}set(i,n,o){if(this.fetchUniformLocation(i,n)){if(o[12]!==this.current[12]||o[0]!==this.current[0])return this.current=o,void this.gl.uniformMatrix4fv(this.location,!1,o);for(let u=1;u<16;u++)if(o[u]!==this.current[u]){this.current=o,this.gl.uniformMatrix4fv(this.location,!1,o);break}}}},l.UnwrappedTileID=CC,l.ValidationError=Kt,l.VectorTileFeature=Ag,l.VectorTileWorkerSource=class extends Oi{constructor(i,n,o,u,h){super(),this.actor=i,this.layerIndex=n,this.availableImages=o,this.loadVectorData=h||L2,this.loading={},this.loaded={},this.deduped=new k2(i.scheduler),this.isSpriteLoaded=u,this.scheduler=i.scheduler}loadTile(i,n){const o=i.uid,u=i&&i.request,h=u&&u.collectResourceTiming,m=this.loading[o]=new t$(i);m.abort=this.loadVectorData(i,(v,x)=>{const S=!this.loading[o];if(delete this.loading[o],S||v||!x)return m.status="done",S||(this.loaded[o]=m),n(v);const E=x.rawData,R={};x.expires&&(R.expires=x.expires),x.cacheControl&&(R.cacheControl=x.cacheControl),m.vectorTile=x.vectorTile||new G_(new Dg(E));const z=()=>{m.parse(m.vectorTile,this.layerIndex,this.availableImages,this.actor,(L,H)=>{if(L||!H)return n(L);const G={};if(h){const Y=Ni(u);Y.length>0&&(G.resourceTiming=JSON.parse(JSON.stringify(Y)))}n(null,gt({rawTileData:E.slice(0)},H,R,G))})};this.isSpriteLoaded?z():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(z,{type:"parseTile",isSymbolTile:i.isSymbolTile,zoom:i.tileZoom}):z()}),this.loaded=this.loaded||{},this.loaded[o]=m})}reloadTile(i,n){const o=this.loaded,u=i.uid,h=this;if(o&&o[u]){const m=o[u];m.showCollisionBoxes=i.showCollisionBoxes,m.enableTerrain=!!i.enableTerrain,m.projection=i.projection,m.tileTransform=Jc(i.tileID.canonical,i.projection);const v=(x,S)=>{const E=m.reloadCallback;E&&(delete m.reloadCallback,m.parse(m.vectorTile,h.layerIndex,this.availableImages,h.actor,E)),n(x,S)};m.status==="parsing"?m.reloadCallback=v:m.status==="done"&&(m.vectorTile?m.parse(m.vectorTile,this.layerIndex,this.availableImages,this.actor,v):v())}}abortTile(i,n){const o=i.uid,u=this.loading[o];u&&(u.abort&&u.abort(),delete this.loading[o]),n()}removeTile(i,n){const o=this.loaded,u=i.uid;o&&o[u]&&delete o[u],n()}},l.WritingMode=ta,l.ZoomDependentExpression=kc,l.add=Js,l.addDynamicAttributes=Wg,l.adjoint=function(i,n){var o=n[0],u=n[1],h=n[2],m=n[3],v=n[4],x=n[5],S=n[6],E=n[7],R=n[8];return i[0]=v*R-x*E,i[1]=h*E-u*R,i[2]=u*x-h*v,i[3]=x*S-m*R,i[4]=o*R-h*S,i[5]=h*m-o*x,i[6]=m*E-v*S,i[7]=u*S-o*E,i[8]=o*v-u*m,i},l.asyncAll=Ge,l.bezier=Fe,l.bindAll=ut,l.boundsAttributes=v2,l.bufferConvexPolygon=function(i,n){const o=[];for(let u=0;u<i.length;u++){const h=Be(u-1,-1,i.length-1),m=Be(u+1,-1,i.length-1),v=i[u],x=i[m],S=i[h].sub(v).unit(),E=x.sub(v).unit(),R=E.angleWithSep(S.x,S.y),z=S.add(E).unit().mult(-1*n/Math.sin(R/2));o.push(v.add(z))}return o},l.cacheEntryPossiblyAdded=function(i){Wn++,Wn>on&&(i.getActor().send("enforceCacheSizeLimit",Mn),Wn=0)},l.calculateGlobeLabelMatrix=function(i,n){const{x:o,y:u}=i.point,h=UE(o,u,i.worldSize/i._pixelsPerMercatorPixel,0,0);return Hc(h,h,T_(Ts(n)))},l.calculateGlobeMatrix=function(i){const{x:n,y:o}=i.point,{lng:u,lat:h}=i._center;return UE(n,o,i.worldSize,u,h)},l.calculateGlobeMercatorMatrix=function(i){const n=i.pixelsPerMeter,o=n/Ya(1,i.center.lat),u=Xa(new Float64Array(16));return wf(u,u,[i.point.x,i.point.y,0]),Gc(u,u,[o,o,n]),Float32Array.from(u)},l.circumferenceAtLatitude=M_,l.clamp=pe,l.clearTileCache=function(i){if(!zn())return;const n=w.caches.delete(An);i&&n.catch(i).then(()=>i())},l.clipLine=QC,l.clone=function(i){var n=new Do(16);return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],n[9]=i[9],n[10]=i[10],n[11]=i[11],n[12]=i[12],n[13]=i[13],n[14]=i[14],n[15]=i[15],n},l.clone$1=ct,l.collisionCircleLayout=QD,l.config=M,l.conjugate=function(i,n){return i[0]=-n[0],i[1]=-n[1],i[2]=-n[2],i[3]=n[3],i},l.create=function(){var i=new Do(16);return Do!=Float32Array&&(i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[11]=0,i[12]=0,i[13]=0,i[14]=0),i[0]=1,i[5]=1,i[10]=1,i[15]=1,i},l.create$1=wE,l.createExpression=zl,l.createLayout=Ue,l.createStyleLayer=function(i){return i.type==="custom"?new H3(i):new W3[i.type](i)},l.cross=__,l.degToRad=ie,l.distance=function(i,n){return Math.hypot(n[0]-i[0],n[1]-i[1],n[2]-i[2])},l.div=function(i,n,o){return i[0]=n[0]/o[0],i[1]=n[1]/o[1],i[2]=n[2]/o[2],i},l.dot=Sa,l.earthRadius=Of,l.ease=Ne,l.easeCubicInOut=$e,l.ecefToLatLng=function([i,n,o]){const u=Math.hypot(i,n,o),h=Math.atan2(i,o),m=.5*Math.PI-Math.acos(-n/u);return new br(fe(h),fe(m))},l.emitValidationErrors=cg,l.endsWith=Tt,l.enforceCacheSizeLimit=function(i){yn(),Vn&&Vn.then(n=>{n.keys().then(o=>{for(let u=0;u<o.length-i;u++)n.delete(o[u])})})},l.evaluateSizeForFeature=kg,l.evaluateSizeForZoom=gd,l.evaluateVariableOffset=i2,l.evented=_,l.exactEquals=function(i,n){return i[0]===n[0]&&i[1]===n[1]&&i[2]===n[2]&&i[3]===n[3]},l.exactEquals$1=function(i,n){return i[0]===n[0]&&i[1]===n[1]&&i[2]===n[2]},l.exported=ji,l.exported$1=k,l.extend=gt,l.extend$1=Si,l.fillExtrusionHeightLift=wC,l.filterObject=yt,l.fromMat4=function(i,n){return i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=n[4],i[4]=n[5],i[5]=n[6],i[6]=n[8],i[7]=n[9],i[8]=n[10],i},l.fromQuat=function(i,n){var o=n[0],u=n[1],h=n[2],m=n[3],v=o+o,x=u+u,S=h+h,E=o*v,R=u*v,z=u*x,L=h*v,H=h*x,G=h*S,Y=m*v,ae=m*x,ve=m*S;return i[0]=1-z-G,i[1]=R+ve,i[2]=L-ae,i[3]=0,i[4]=R-ve,i[5]=1-E-G,i[6]=H+Y,i[7]=0,i[8]=L+ae,i[9]=H-Y,i[10]=1-E-z,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i},l.fromRotation=function(i,n){var o=Math.sin(n),u=Math.cos(n);return i[0]=u,i[1]=o,i[2]=0,i[3]=-o,i[4]=u,i[5]=0,i[6]=0,i[7]=0,i[8]=1,i},l.fromScaling=EE,l.furthestTileCorner=function(i){const n=Math.round((i+45+360)%360/90)%4;return Te[n]},l.getAABBPointSquareDist=function(i,n,o){let u=0;for(let h=0;h<2;++h){const m=o?o[h]:0;i[h]>m&&(u+=(i[h]-m)*(i[h]-m)),n[h]<m&&(u+=(m-n[h])*(m-n[h]))}return u},l.getAnchorAlignment=J_,l.getAnchorJustification=tx,l.getBounds=function(i){let n=1/0,o=1/0,u=-1/0,h=-1/0;for(const m of i)n=Math.min(n,m.x),o=Math.min(o,m.y),u=Math.max(u,m.x),h=Math.max(h,m.y);return{min:new ee(n,o),max:new ee(u,h)}},l.getColumn=sn,l.getDefaultExportFromCjs=V,l.getGridMatrix=function(i,n,o,u){const h=n.getNorth(),m=n.getSouth(),v=n.getWest(),x=n.getEast(),S=1<<i.z,E=x-v,R=h-m,z=E/qc,L=-R/Pf[o],H=[0,z,0,L,0,0,h,v,0];if(i.z>0){const G=180/u;SE(H,H,[G/E+1,0,0,0,G/R+1,0,-.5*G/z,.5*G/L,1])}return H[2]=S,H[5]=i.x,H[8]=i.y,H},l.getImage=de,l.getJSON=function(i,n){return qn(gt(i,{type:"json"}),n)},l.getLatitudinalLod=function(i){const n=Wi-5;i=pe(i,-n,n)/n*90;const o=Math.pow(Math.abs(Math.sin(ie(i))),3);return Math.round(o*(Pf.length-1))},l.getMapSessionAPI=an,l.getPerformanceMeasurement=Ni,l.getProjection=h2,l.getRTLTextPluginStatus=b,l.getReferrer=or,l.getTilePoint=function(i,{x:n,y:o},u=0){return new ee(((n-u)*i.scale-i.x)*gn,(o*i.scale-i.y)*gn)},l.getTileVec3=function(i,n,o=0){return sd(((n.x-o)*i.scale-i.x)*gn,(n.y*i.scale-i.y)*gn,WE(n.z,n.y))},l.getVideo=function(i,n){const o=w.document.createElement("video");o.muted=!0,o.onloadstart=function(){n(null,o)};for(let u=0;u<i.length;u++){const h=w.document.createElement("source");Rr(i[u])||(o.crossOrigin="Anonymous"),h.src=i[u],o.appendChild(h)}return{cancel:()=>{}}},l.globeCenterToScreenPoint=function(i){const n=[0,0,0],o=Xa(new Float64Array(16));return Hc(o,i.pixelMatrix,i.globeMatrix),ii(n,n,o),new ee(n[0],n[1])},l.globeDenormalizeECEF=T_,l.globeECEFOrigin=function(i,n){const o=[0,0,0];return ii(o,o,Rf(Ts(n.canonical))),ii(o,o,i),o},l.globeMetersToEcef=yg,l.globeNormalizeECEF=Rf,l.globePixelsToTileUnits=function(i,n){return gn/(512*Math.pow(2,i))*xg(Ts(n))},l.globePoleMatrixForTile=function(i,n,o){const u=Xa(new Float64Array(16)),h=(n/(1<<i)-.5)*Math.PI*2;return vg(u,o.globeMatrix,h),Float32Array.from(u)},l.globeTileBounds=Ts,l.globeTiltAtLngLat=VE,l.globeToMercatorTransition=ud,l.globeUseCustomAntiAliasing=function(i,n,o){const u=ud(o.zoom),h=i.style.map._antialias,m=!!n.extStandardDerivatives,v=n.extStandardDerivativesForceOff||i.terrain&&i.terrain.exaggeration()>0;return u===0&&!h&&!v&&m},l.identity=Xa,l.identity$1=OE,l.invert=m_,l.isFullscreen=function(){return!!w.document.fullscreenElement||!!w.document.webkitFullscreenElement},l.isLngLatBehindGlobe=I_,l.isMapAuthenticated=function(i){return nn.has(i)},l.isMapboxURL=Ie,l.isSafariWithAntialiasingBug=function(i){const n=i.navigator?i.navigator.userAgent:null;return!!Lt(i)&&n&&(n.match("Version/15.4")||n.match("Version/15.5")||n.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},l.latFromMercatorY=Gi,l.latLngToECEF=cd,l.len=jL,l.length=Sf,l.length$1=function(i){return Math.hypot(i[0],i[1],i[2],i[3])},l.lngFromMercatorX=ea,l.loadVectorTile=L2,l.makeRequest=qn,l.mapValue=function(i,n,o,u,h){return pe((i-n)/(o-n)*(h-u)+u,u,h)},l.mercatorScale=qE,l.mercatorXfromLng=Is,l.mercatorYfromLat=Ms,l.mercatorZfromAltitude=Ya,l.mul=BL,l.mul$1=NL,l.multiply=Hc,l.multiply$1=SE,l.multiply$2=IE,l.nextPowerOfTwo=jt,l.normalize=so,l.normalize$1=UL,l.normalize$2=AE,l.number=Jn,l.ortho=function(i,n,o,u,h,m,v){var x=1/(n-o),S=1/(u-h),E=1/(m-v);return i[0]=-2*x,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=-2*S,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=2*E,i[11]=0,i[12]=(n+o)*x,i[13]=(h+u)*S,i[14]=(v+m)*E,i[15]=1,i},l.pbf=OC,l.perspective=function(i,n,o,u,h){var m,v=1/Math.tan(n/2);return i[0]=v/o,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=v,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[11]=-1,i[12]=0,i[13]=0,i[15]=0,h!=null&&h!==1/0?(i[10]=(h+u)*(m=1/(u-h)),i[14]=2*h*u*m):(i[10]=-1,i[14]=-2*u),i},l.pick=function(i,n){const o={};for(let u=0;u<n.length;u++){const h=n[u];h in i&&(o[h]=i[h])}return o},l.plugin=P,l.pointGeometry=Q,l.polesInViewport=function(i){const n=Xa(new Float64Array(16));Hc(n,i.pixelMatrix,i.globeMatrix);const o=[0,Ea,0],u=[0,Ca,0];return ii(o,o,n),ii(u,u,n),[o[0]>0&&o[0]<=i.width&&o[1]>0&&o[1]<=i.height&&!I_(i,new br(i.center.lat,90)),u[0]>0&&u[0]<=i.width&&u[1]>0&&u[1]<=i.height&&!I_(i,new br(i.center.lat,-90))]},l.polygonContainsPoint=Kc,l.polygonIntersectsBox=eC,l.polygonIntersectsPolygon=KE,l.polygonizeBounds=function(i,n,o=0,u=!0){const h=new ee(o,o),m=i.sub(h),v=n.add(h),x=[m,new ee(v.x,m.y),v,new ee(m.x,v.y)];return u&&x.push(m.clone()),x},l.posAttributes=Mf,l.postMapLoadEvent=On,l.postPerformanceEvent=Zn,l.postTurnstileEvent=ln,l.potpack=X_,l.prevPowerOfTwo=function(i){return i<=1?1:Math.pow(2,Math.floor(Math.log(i)/Math.LN2))},l.radToDeg=fe,l.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],l.registerForPluginStateChange=function(i){return i({pluginStatus:p,pluginURL:s}),_.on("pluginStateChange",i),i},l.removeAuthState=function(i){nn.delete(i)},l.renderColorRamp=D_,l.resample=ZE,l.rotateX=g_,l.rotateX$1=zE,l.rotateY=vg,l.rotateY$1=kE,l.rotateZ=function(i,n,o){var u=Math.sin(o),h=Math.cos(o),m=n[0],v=n[1],x=n[2],S=n[3],E=n[4],R=n[5],z=n[6],L=n[7];return n!==i&&(i[8]=n[8],i[9]=n[9],i[10]=n[10],i[11]=n[11],i[12]=n[12],i[13]=n[13],i[14]=n[14],i[15]=n[15]),i[0]=m*h+E*u,i[1]=v*h+R*u,i[2]=x*h+z*u,i[3]=S*h+L*u,i[4]=E*h-m*u,i[5]=R*h-v*u,i[6]=z*h-x*u,i[7]=L*h-S*u,i},l.rotateZ$1=function(i,n,o){o*=.5;var u=n[0],h=n[1],m=n[2],v=n[3],x=Math.sin(o),S=Math.cos(o);return i[0]=u*S+h*x,i[1]=h*S-u*x,i[2]=m*S+v*x,i[3]=v*S-m*x,i},l.scale=Gc,l.scale$1=PE,l.scale$2=Qo,l.scaleAndAdd=Tf,l.set=function(i,n,o,u){return i[0]=n,i[1]=o,i[2]=u,i},l.setCacheLimits=function(i,n){Mn=i,on=n},l.setColumn=function(i,n,o){i[4*n+0]=o[0],i[4*n+1]=o[1],i[4*n+2]=o[2],i[4*n+3]=o[3]},l.setRTLTextPlugin=function(i,n,o=!1){if(p===vf||p===yf||p===_f)throw new Error("setRTLTextPlugin cannot be called multiple times.");s=ji.resolveURL(i),p=vf,$l=n,g(),o||I()},l.smoothstep=He,l.spec=nt,l.squaredLength=function(i){var n=i[0],o=i[1],u=i[2];return n*n+o*o+u*u},l.storeAuthState=function(i,n){n?nn.add(i):nn.delete(i)},l.sub=Ka,l.subtract=y_,l.symbolSize=e3,l.tileAABB=function(i,n,o,u,h,m,v,x,S){if(S.name==="globe")return qL(i,n,new Og(o,u,h));const E=Jc({z:o,x:u,y:h},S);return new lo([(m+E.x/E.scale)*n,n*(E.y/E.scale),v],[(m+E.x2/E.scale)*n,n*(E.y2/E.scale),x])},l.tileCornersToBounds=_g,l.tileTransform=Jc,l.transformMat3=function(i,n,o){var u=n[0],h=n[1],m=n[2];return i[0]=u*o[0]+h*o[3]+m*o[6],i[1]=u*o[1]+h*o[4]+m*o[7],i[2]=u*o[2]+h*o[5]+m*o[8],i},l.transformMat4=ii,l.transformMat4$1=Wc,l.transformQuat=ME,l.transitionTileAABBinECEF=BE,l.translate=wf,l.transpose=function(i,n){if(i===n){var o=n[1],u=n[2],h=n[5];i[1]=n[3],i[2]=n[6],i[3]=o,i[5]=n[7],i[6]=u,i[7]=h}else i[0]=n[0],i[1]=n[3],i[2]=n[6],i[3]=n[1],i[4]=n[4],i[5]=n[7],i[6]=n[2],i[7]=n[5],i[8]=n[8];return i},l.triggerPluginCompletionEvent=d,l.uniqueId=xt,l.updateGlobeVertexNormal=function(i,n,o,u,h){const m=5*n+2;i.float32[m+0]=o,i.float32[m+1]=u,i.float32[m+2]=h},l.validateCustomStyleLayer=function(i){const n=[],o=i.id;return o===void 0&&n.push({message:`layers.${o}: missing required property "id"`}),i.render===void 0&&n.push({message:`layers.${o}: missing required method "render"`}),i.renderingMode&&i.renderingMode!=="2d"&&i.renderingMode!=="3d"&&n.push({message:`layers.${o}: property "renderingMode" must be either "2d" or "3d"`}),n},l.validateFilter=i=>ko(Bc(i)),l.validateFog=i=>ko(ag(i)),l.validateLayer=i=>ko(ng(i)),l.validateLight=i=>ko(og(i)),l.validateSource=i=>ko(ig(i)),l.validateStyle=lg,l.validateTerrain=i=>ko(hf(i)),l.values=Qe,l.vectorTile=Pg,l.version=C,l.warnOnce=Ct,l.window=w,l.wrap=Be}),f(["./shared"],function(l){function w(_e){if(typeof _e=="number"||typeof _e=="boolean"||typeof _e=="string"||_e==null)return JSON.stringify(_e);if(Array.isArray(_e)){let J="[";for(const de of _e)J+=`${w(de)},`;return`${J}]`}let W="{";for(const J of Object.keys(_e).sort())W+=`${J}:${w(_e[J])},`;return`${W}}`}function C(_e){let W="";for(const J of l.refProperties)W+=`/${w(_e[J])}`;return W}class A{constructor(W){this.keyCache={},W&&this.replace(W)}replace(W){this._layerConfigs={},this._layers={},this.update(W,[])}update(W,J){for(const Se of W)this._layerConfigs[Se.id]=Se,(this._layers[Se.id]=l.createStyleLayer(Se)).compileFilter(),this.keyCache[Se.id]&&delete this.keyCache[Se.id];for(const Se of J)delete this.keyCache[Se],delete this._layerConfigs[Se],delete this._layers[Se];this.familiesBySource={};const de=function(Se,Ie){const Me={};for(let we=0;we<Se.length;we++){const Le=Ie&&Ie[Se[we].id]||C(Se[we]);Ie&&(Ie[Se[we].id]=Le);let je=Me[Le];je||(je=Me[Le]=[]),je.push(Se[we])}const ke=[];for(const we in Me)ke.push(Me[we]);return ke}(l.values(this._layerConfigs),this.keyCache);for(const Se of de){const Ie=Se.map(Je=>this._layers[Je.id]),Me=Ie[0];if(Me.visibility==="none")continue;const ke=Me.source||"";let we=this.familiesBySource[ke];we||(we=this.familiesBySource[ke]={});const Le=Me.sourceLayer||"_geojsonTileLayer";let je=we[Le];je||(je=we[Le]=[]),je.push(Ie)}}}class M{loadTile(W,J){const{uid:de,encoding:Se,rawImageData:Ie,padding:Me,buildQuadTree:ke}=W,we=l.window.ImageBitmap&&Ie instanceof l.window.ImageBitmap?this.getImageData(Ie,Me):Ie;J(null,new l.DEMData(de,we,Se,Me<1,ke))}getImageData(W,J){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(W.width,W.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=W.width,this.offscreenCanvas.height=W.height,this.offscreenCanvasContext.drawImage(W,0,0,W.width,W.height);const de=this.offscreenCanvasContext.getImageData(-J,-J,W.width+2*J,W.height+2*J);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),de}}function k(_e,W){if(_e.length!==0){N(_e[0],W);for(var J=1;J<_e.length;J++)N(_e[J],!W)}}function N(_e,W){for(var J=0,de=0,Se=0,Ie=_e.length,Me=Ie-1;Se<Ie;Me=Se++){var ke=(_e[Se][0]-_e[Me][0])*(_e[Me][1]+_e[Se][1]),we=J+ke;de+=Math.abs(J)>=Math.abs(ke)?J-we+ke:ke-we+J,J=we}J+de>=0!=!!W&&_e.reverse()}var D=l.getDefaultExportFromCjs(function _e(W,J){var de,Se=W&&W.type;if(Se==="FeatureCollection")for(de=0;de<W.features.length;de++)_e(W.features[de],J);else if(Se==="GeometryCollection")for(de=0;de<W.geometries.length;de++)_e(W.geometries[de],J);else if(Se==="Feature")_e(W.geometry,J);else if(Se==="Polygon")k(W.coordinates,J);else if(Se==="MultiPolygon")for(de=0;de<W.coordinates.length;de++)k(W.coordinates[de],J);return W});const U=l.VectorTileFeature.prototype.toGeoJSON;var q={exports:{}},F=l.pointGeometry,j=l.vectorTile.VectorTileFeature,V=X;function X(_e,W){this.options=W||{},this.features=_e,this.length=_e.length}function te(_e,W){this.id=typeof _e.id=="number"?_e.id:void 0,this.type=_e.type,this.rawGeometry=_e.type===1?[_e.geometry]:_e.geometry,this.properties=_e.tags,this.extent=W||4096}X.prototype.feature=function(_e){return new te(this.features[_e],this.options.extent)},te.prototype.loadGeometry=function(){var _e=this.rawGeometry;this.geometry=[];for(var W=0;W<_e.length;W++){for(var J=_e[W],de=[],Se=0;Se<J.length;Se++)de.push(new F(J[Se][0],J[Se][1]));this.geometry.push(de)}return this.geometry},te.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var _e=this.geometry,W=1/0,J=-1/0,de=1/0,Se=-1/0,Ie=0;Ie<_e.length;Ie++)for(var Me=_e[Ie],ke=0;ke<Me.length;ke++){var we=Me[ke];W=Math.min(W,we.x),J=Math.max(J,we.x),de=Math.min(de,we.y),Se=Math.max(Se,we.y)}return[W,de,J,Se]},te.prototype.toGeoJSON=j.prototype.toGeoJSON;var re=l.pbf,Q=V;function ne(_e){var W=new re;return function(J,de){for(var Se in J.layers)de.writeMessage(3,ee,J.layers[Se])}(_e,W),W.finish()}function ee(_e,W){var J;W.writeVarintField(15,_e.version||1),W.writeStringField(1,_e.name||""),W.writeVarintField(5,_e.extent||4096);var de={keys:[],values:[],keycache:{},valuecache:{}};for(J=0;J<_e.length;J++)de.feature=_e.feature(J),W.writeMessage(2,me,de);var Se=de.keys;for(J=0;J<Se.length;J++)W.writeStringField(3,Se[J]);var Ie=de.values;for(J=0;J<Ie.length;J++)W.writeMessage(4,$e,Ie[J])}function me(_e,W){var J=_e.feature;J.id!==void 0&&W.writeVarintField(1,J.id),W.writeMessage(2,ce,_e),W.writeVarintField(3,J.type),W.writeMessage(4,Te,J)}function ce(_e,W){var J=_e.feature,de=_e.keys,Se=_e.values,Ie=_e.keycache,Me=_e.valuecache;for(var ke in J.properties){var we=J.properties[ke],Le=Ie[ke];if(we!==null){Le===void 0&&(de.push(ke),Ie[ke]=Le=de.length-1),W.writeVarint(Le);var je=typeof we;je!=="string"&&je!=="boolean"&&je!=="number"&&(we=JSON.stringify(we));var Je=je+":"+we,We=Me[Je];We===void 0&&(Se.push(we),Me[Je]=We=Se.length-1),W.writeVarint(We)}}}function ie(_e,W){return(W<<3)+(7&_e)}function fe(_e){return _e<<1^_e>>31}function Te(_e,W){for(var J=_e.loadGeometry(),de=_e.type,Se=0,Ie=0,Me=J.length,ke=0;ke<Me;ke++){var we=J[ke],Le=1;de===1&&(Le=we.length),W.writeVarint(ie(1,Le));for(var je=de===3?we.length-1:we.length,Je=0;Je<je;Je++){Je===1&&de!==1&&W.writeVarint(ie(2,je-1));var We=we[Je].x-Se,wt=we[Je].y-Ie;W.writeVarint(fe(We)),W.writeVarint(fe(wt)),Se+=We,Ie+=wt}de===3&&W.writeVarint(ie(7,1))}}function $e(_e,W){var J=typeof _e;J==="string"?W.writeStringField(1,_e):J==="boolean"?W.writeBooleanField(7,_e):J==="number"&&(_e%1!=0?W.writeDoubleField(3,_e):_e<0?W.writeSVarintField(6,_e):W.writeVarintField(5,_e))}q.exports=ne,q.exports.fromVectorTileJs=ne,q.exports.fromGeojsonVt=function(_e,W){W=W||{};var J={};for(var de in _e)J[de]=new Q(_e[de].features,W),J[de].name=de,J[de].version=W.version,J[de].extent=W.extent;return ne({layers:J})},q.exports.GeoJSONWrapper=Q;var Fe=l.getDefaultExportFromCjs(q.exports);const Ne={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:_e=>_e},pe=Math.fround||(He=new Float32Array(1),_e=>(He[0]=+_e,He[0]));var He;const Be=3,Ge=5,Qe=6;class gt{constructor(W){this.options=Object.assign(Object.create(Ne),W),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(W){const{log:J,minZoom:de,maxZoom:Se}=this.options;J&&console.time("total time");const Ie=`prepare ${W.length} points`;J&&console.time(Ie),this.points=W;const Me=[];for(let we=0;we<W.length;we++){const Le=W[we];if(!Le.geometry)continue;const[je,Je]=Le.geometry.coordinates,We=pe(Nt(je)),wt=pe(jt(Je));Me.push(We,wt,1/0,we,-1,1),this.options.reduce&&Me.push(0)}let ke=this.trees[Se+1]=this._createTree(Me);J&&console.timeEnd(Ie);for(let we=Se;we>=de;we--){const Le=+Date.now();ke=this.trees[we]=this._createTree(this._cluster(ke,we)),J&&console.log("z%d: %d clusters in %dms",we,ke.numItems,+Date.now()-Le)}return J&&console.timeEnd("total time"),this}getClusters(W,J){let de=((W[0]+180)%360+360)%360-180;const Se=Math.max(-90,Math.min(90,W[1]));let Ie=W[2]===180?180:((W[2]+180)%360+360)%360-180;const Me=Math.max(-90,Math.min(90,W[3]));if(W[2]-W[0]>=360)de=-180,Ie=180;else if(de>Ie){const Je=this.getClusters([de,Se,180,Me],J),We=this.getClusters([-180,Se,Ie,Me],J);return Je.concat(We)}const ke=this.trees[this._limitZoom(J)],we=ke.range(Nt(de),jt(Me),Nt(Ie),jt(Se)),Le=ke.data,je=[];for(const Je of we){const We=this.stride*Je;je.push(Le[We+Ge]>1?St(Le,We,this.clusterProps):this.points[Le[We+Be]])}return je}getChildren(W){const J=this._getOriginId(W),de=this._getOriginZoom(W),Se="No cluster with the specified id.",Ie=this.trees[de];if(!Ie)throw new Error(Se);const Me=Ie.data;if(J*this.stride>=Me.length)throw new Error(Se);const ke=this.options.radius/(this.options.extent*Math.pow(2,de-1)),we=Ie.within(Me[J*this.stride],Me[J*this.stride+1],ke),Le=[];for(const je of we){const Je=je*this.stride;Me[Je+4]===W&&Le.push(Me[Je+Ge]>1?St(Me,Je,this.clusterProps):this.points[Me[Je+Be]])}if(Le.length===0)throw new Error(Se);return Le}getLeaves(W,J,de){const Se=[];return this._appendLeaves(Se,W,J=J||10,de=de||0,0),Se}getTile(W,J,de){const Se=this.trees[this._limitZoom(W)],Ie=Math.pow(2,W),{extent:Me,radius:ke}=this.options,we=ke/Me,Le=(de-we)/Ie,je=(de+1+we)/Ie,Je={features:[]};return this._addTileFeatures(Se.range((J-we)/Ie,Le,(J+1+we)/Ie,je),Se.data,J,de,Ie,Je),J===0&&this._addTileFeatures(Se.range(1-we/Ie,Le,1,je),Se.data,Ie,de,Ie,Je),J===Ie-1&&this._addTileFeatures(Se.range(0,Le,we/Ie,je),Se.data,-1,de,Ie,Je),Je.features.length?Je:null}getClusterExpansionZoom(W){let J=this._getOriginZoom(W)-1;for(;J<=this.options.maxZoom;){const de=this.getChildren(W);if(J++,de.length!==1)break;W=de[0].properties.cluster_id}return J}_appendLeaves(W,J,de,Se,Ie){const Me=this.getChildren(J);for(const ke of Me){const we=ke.properties;if(we&&we.cluster?Ie+we.point_count<=Se?Ie+=we.point_count:Ie=this._appendLeaves(W,we.cluster_id,de,Se,Ie):Ie<Se?Ie++:W.push(ke),W.length===de)break}return Ie}_createTree(W){const J=new l.KDBush(W.length/this.stride|0,this.options.nodeSize,Float32Array);for(let de=0;de<W.length;de+=this.stride)J.add(W[de],W[de+1]);return J.finish(),J.data=W,J}_addTileFeatures(W,J,de,Se,Ie,Me){for(const ke of W){const we=ke*this.stride,Le=J[we+Ge]>1;let je,Je,We;if(Le)je=xt(J,we,this.clusterProps),Je=J[we],We=J[we+1];else{const Xt=this.points[J[we+Be]];je=Xt.properties;const[un,ln]=Xt.geometry.coordinates;Je=Nt(un),We=jt(ln)}const wt={type:1,geometry:[[Math.round(this.options.extent*(Je*Ie-de)),Math.round(this.options.extent*(We*Ie-Se))]],tags:je};let Yt;Yt=Le||this.options.generateId?J[we+Be]:this.points[J[we+Be]].id,Yt!==void 0&&(wt.id=Yt),Me.features.push(wt)}}_limitZoom(W){return Math.max(this.options.minZoom,Math.min(Math.floor(+W),this.options.maxZoom+1))}_cluster(W,J){const{radius:de,extent:Se,reduce:Ie,minPoints:Me}=this.options,ke=de/(Se*Math.pow(2,J)),we=W.data,Le=[],je=this.stride;for(let Je=0;Je<we.length;Je+=je){if(we[Je+2]<=J)continue;we[Je+2]=J;const We=we[Je],wt=we[Je+1],Yt=W.within(we[Je],we[Je+1],ke),Xt=we[Je+Ge];let un=Xt;for(const ln of Yt){const Gn=ln*je;we[Gn+2]>J&&(un+=we[Gn+Ge])}if(un>Xt&&un>=Me){let ln,Gn=We*Xt,On=wt*Xt,er=-1;const Zn=((Je/je|0)<<5)+(J+1)+this.points.length;for(const Zr of Yt){const an=Zr*je;if(we[an+2]<=J)continue;we[an+2]=J;const nn=we[an+Ge];Gn+=we[an]*nn,On+=we[an+1]*nn,we[an+4]=Zn,Ie&&(ln||(ln=this._map(we,Je,!0),er=this.clusterProps.length,this.clusterProps.push(ln)),Ie(ln,this._map(we,an)))}we[Je+4]=Zn,Le.push(Gn/un,On/un,1/0,Zn,-1,un),Ie&&Le.push(er)}else{for(let ln=0;ln<je;ln++)Le.push(we[Je+ln]);if(un>1)for(const ln of Yt){const Gn=ln*je;if(!(we[Gn+2]<=J)){we[Gn+2]=J;for(let On=0;On<je;On++)Le.push(we[Gn+On])}}}}return Le}_getOriginId(W){return W-this.points.length>>5}_getOriginZoom(W){return(W-this.points.length)%32}_map(W,J,de){if(W[J+Ge]>1){const Me=this.clusterProps[W[J+Qe]];return de?Object.assign({},Me):Me}const Se=this.points[W[J+Be]].properties,Ie=this.options.map(Se);return de&&Ie===Se?Object.assign({},Ie):Ie}}function St(_e,W,J){return{type:"Feature",id:_e[W+Be],properties:xt(_e,W,J),geometry:{type:"Point",coordinates:[(de=_e[W],360*(de-.5)),bt(_e[W+1])]}};var de}function xt(_e,W,J){const de=_e[W+Ge],Se=de>=1e4?`${Math.round(de/1e3)}k`:de>=1e3?Math.round(de/100)/10+"k":de,Ie=_e[W+Qe],Me=Ie===-1?{}:Object.assign({},J[Ie]);return Object.assign(Me,{cluster:!0,cluster_id:_e[W+Be],point_count:de,point_count_abbreviated:Se})}function Nt(_e){return _e/360+.5}function jt(_e){const W=Math.sin(_e*Math.PI/180),J=.5-.25*Math.log((1+W)/(1-W))/Math.PI;return J<0?0:J>1?1:J}function bt(_e){const W=(180-360*_e)*Math.PI/180;return 360*Math.atan(Math.exp(W))/Math.PI-90}function ut(_e,W,J,de){for(var Se,Ie=de,Me=J-W>>1,ke=J-W,we=_e[W],Le=_e[W+1],je=_e[J],Je=_e[J+1],We=W+3;We<J;We+=3){var wt=Tt(_e[We],_e[We+1],we,Le,je,Je);if(wt>Ie)Se=We,Ie=wt;else if(wt===Ie){var Yt=Math.abs(We-Me);Yt<ke&&(Se=We,ke=Yt)}}Ie>de&&(Se-W>3&&ut(_e,W,Se,de),_e[Se+2]=Ie,J-Se>3&&ut(_e,Se,J,de))}function Tt(_e,W,J,de,Se,Ie){var Me=Se-J,ke=Ie-de;if(Me!==0||ke!==0){var we=((_e-J)*Me+(W-de)*ke)/(Me*Me+ke*ke);we>1?(J=Se,de=Ie):we>0&&(J+=Me*we,de+=ke*we)}return(Me=_e-J)*Me+(ke=W-de)*ke}function ft(_e,W,J,de){var Se={id:_e===void 0?null:_e,type:W,geometry:J,tags:de,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Ie){var Me=Ie.geometry,ke=Ie.type;if(ke==="Point"||ke==="MultiPoint"||ke==="LineString")yt(Ie,Me);else if(ke==="Polygon"||ke==="MultiLineString")for(var we=0;we<Me.length;we++)yt(Ie,Me[we]);else if(ke==="MultiPolygon")for(we=0;we<Me.length;we++)for(var Le=0;Le<Me[we].length;Le++)yt(Ie,Me[we][Le])}(Se),Se}function yt(_e,W){for(var J=0;J<W.length;J+=3)_e.minX=Math.min(_e.minX,W[J]),_e.minY=Math.min(_e.minY,W[J+1]),_e.maxX=Math.max(_e.maxX,W[J]),_e.maxY=Math.max(_e.maxY,W[J+1])}function ct(_e,W,J,de){if(W.geometry){var Se=W.geometry.coordinates,Ie=W.geometry.type,Me=Math.pow(J.tolerance/((1<<J.maxZoom)*J.extent),2),ke=[],we=W.id;if(J.promoteId?we=W.properties[J.promoteId]:J.generateId&&(we=de||0),Ie==="Point")It(Se,ke);else if(Ie==="MultiPoint")for(var Le=0;Le<Se.length;Le++)It(Se[Le],ke);else if(Ie==="LineString")Ct(Se,ke,Me,!1);else if(Ie==="MultiLineString"){if(J.lineMetrics){for(Le=0;Le<Se.length;Le++)Ct(Se[Le],ke=[],Me,!1),_e.push(ft(we,"LineString",ke,W.properties));return}Qt(Se,ke,Me,!1)}else if(Ie==="Polygon")Qt(Se,ke,Me,!0);else{if(Ie!=="MultiPolygon"){if(Ie==="GeometryCollection"){for(Le=0;Le<W.geometry.geometries.length;Le++)ct(_e,{id:we,geometry:W.geometry.geometries[Le],properties:W.properties},J,de);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Le=0;Le<Se.length;Le++){var je=[];Qt(Se[Le],je,Me,!0),ke.push(je)}}_e.push(ft(we,Ie,ke,W.properties))}}function It(_e,W){W.push(Vt(_e[0])),W.push(Bt(_e[1])),W.push(0)}function Ct(_e,W,J,de){for(var Se,Ie,Me=0,ke=0;ke<_e.length;ke++){var we=Vt(_e[ke][0]),Le=Bt(_e[ke][1]);W.push(we),W.push(Le),W.push(0),ke>0&&(Me+=de?(Se*Le-we*Ie)/2:Math.sqrt(Math.pow(we-Se,2)+Math.pow(Le-Ie,2))),Se=we,Ie=Le}var je=W.length-3;W[2]=1,ut(W,0,je,J),W[je+2]=1,W.size=Math.abs(Me),W.start=0,W.end=W.size}function Qt(_e,W,J,de){for(var Se=0;Se<_e.length;Se++){var Ie=[];Ct(_e[Se],Ie,J,de),W.push(Ie)}}function Vt(_e){return _e/360+.5}function Bt(_e){var W=Math.sin(_e*Math.PI/180),J=.5-.25*Math.log((1+W)/(1-W))/Math.PI;return J<0?0:J>1?1:J}function ot(_e,W,J,de,Se,Ie,Me,ke){if(de/=W,Ie>=(J/=W)&&Me<de)return _e;if(Me<J||Ie>=de)return null;for(var we=[],Le=0;Le<_e.length;Le++){var je=_e[Le],Je=je.geometry,We=je.type,wt=Se===0?je.minX:je.minY,Yt=Se===0?je.maxX:je.maxY;if(wt>=J&&Yt<de)we.push(je);else if(!(Yt<J||wt>=de)){var Xt=[];if(We==="Point"||We==="MultiPoint")rt(Je,Xt,J,de,Se);else if(We==="LineString")Lt(Je,Xt,J,de,Se,!1,ke.lineMetrics);else if(We==="MultiLineString")sn(Je,Xt,J,de,Se,!1);else if(We==="Polygon")sn(Je,Xt,J,de,Se,!0);else if(We==="MultiPolygon")for(var un=0;un<Je.length;un++){var ln=[];sn(Je[un],ln,J,de,Se,!0),ln.length&&Xt.push(ln)}if(Xt.length){if(ke.lineMetrics&&We==="LineString"){for(un=0;un<Xt.length;un++)we.push(ft(je.id,We,Xt[un],je.tags));continue}We!=="LineString"&&We!=="MultiLineString"||(Xt.length===1?(We="LineString",Xt=Xt[0]):We="MultiLineString"),We!=="Point"&&We!=="MultiPoint"||(We=Xt.length===3?"Point":"MultiPoint"),we.push(ft(je.id,We,Xt,je.tags))}}}return we.length?we:null}function rt(_e,W,J,de,Se){for(var Ie=0;Ie<_e.length;Ie+=3){var Me=_e[Ie+Se];Me>=J&&Me<=de&&(W.push(_e[Ie]),W.push(_e[Ie+1]),W.push(_e[Ie+2]))}}function Lt(_e,W,J,de,Se,Ie,Me){for(var ke,we,Le=Mt(_e),je=Se===0?Mn:on,Je=_e.start,We=0;We<_e.length-3;We+=3){var wt=_e[We],Yt=_e[We+1],Xt=_e[We+2],un=_e[We+3],ln=_e[We+4],Gn=Se===0?wt:Yt,On=Se===0?un:ln,er=!1;Me&&(ke=Math.sqrt(Math.pow(wt-un,2)+Math.pow(Yt-ln,2))),Gn<J?On>J&&(we=je(Le,wt,Yt,un,ln,J),Me&&(Le.start=Je+ke*we)):Gn>de?On<de&&(we=je(Le,wt,Yt,un,ln,de),Me&&(Le.start=Je+ke*we)):An(Le,wt,Yt,Xt),On<J&&Gn>=J&&(we=je(Le,wt,Yt,un,ln,J),er=!0),On>de&&Gn<=de&&(we=je(Le,wt,Yt,un,ln,de),er=!0),!Ie&&er&&(Me&&(Le.end=Je+ke*we),W.push(Le),Le=Mt(_e)),Me&&(Je+=ke)}var Zn=_e.length-3;wt=_e[Zn],Yt=_e[Zn+1],Xt=_e[Zn+2],(Gn=Se===0?wt:Yt)>=J&&Gn<=de&&An(Le,wt,Yt,Xt),Zn=Le.length-3,Ie&&Zn>=3&&(Le[Zn]!==Le[0]||Le[Zn+1]!==Le[1])&&An(Le,Le[0],Le[1],Le[2]),Le.length&&W.push(Le)}function Mt(_e){var W=[];return W.size=_e.size,W.start=_e.start,W.end=_e.end,W}function sn(_e,W,J,de,Se,Ie){for(var Me=0;Me<_e.length;Me++)Lt(_e[Me],W,J,de,Se,Ie,!1)}function An(_e,W,J,de){_e.push(W),_e.push(J),_e.push(de)}function Mn(_e,W,J,de,Se,Ie){var Me=(Ie-W)/(de-W);return _e.push(Ie),_e.push(J+(Se-J)*Me),_e.push(1),Me}function on(_e,W,J,de,Se,Ie){var Me=(Ie-J)/(Se-J);return _e.push(W+(de-W)*Me),_e.push(Ie),_e.push(1),Me}function Vn(_e,W){for(var J=[],de=0;de<_e.length;de++){var Se,Ie=_e[de],Me=Ie.type;if(Me==="Point"||Me==="MultiPoint"||Me==="LineString")Se=Nn(Ie.geometry,W);else if(Me==="MultiLineString"||Me==="Polygon"){Se=[];for(var ke=0;ke<Ie.geometry.length;ke++)Se.push(Nn(Ie.geometry[ke],W))}else if(Me==="MultiPolygon")for(Se=[],ke=0;ke<Ie.geometry.length;ke++){for(var we=[],Le=0;Le<Ie.geometry[ke].length;Le++)we.push(Nn(Ie.geometry[ke][Le],W));Se.push(we)}J.push(ft(Ie.id,Me,Se,Ie.tags))}return J}function Nn(_e,W){var J=[];J.size=_e.size,_e.start!==void 0&&(J.start=_e.start,J.end=_e.end);for(var de=0;de<_e.length;de+=3)J.push(_e[de]+W,_e[de+1],_e[de+2]);return J}function zn(_e,W){if(_e.transformed)return _e;var J,de,Se,Ie=1<<_e.z,Me=_e.x,ke=_e.y;for(J=0;J<_e.features.length;J++){var we=_e.features[J],Le=we.geometry,je=we.type;if(we.geometry=[],je===1)for(de=0;de<Le.length;de+=2)we.geometry.push(yn(Le[de],Le[de+1],W,Ie,Me,ke));else for(de=0;de<Le.length;de++){var Je=[];for(Se=0;Se<Le[de].length;Se+=2)Je.push(yn(Le[de][Se],Le[de][Se+1],W,Ie,Me,ke));we.geometry.push(Je)}}return _e.transformed=!0,_e}function yn(_e,W,J,de,Se,Ie){return[Math.round(J*(_e*de-Se)),Math.round(J*(W*de-Ie))]}function rn(_e,W,J,de,Se){for(var Ie=W===Se.maxZoom?0:Se.tolerance/((1<<W)*Se.extent),Me={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:J,y:de,z:W,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},ke=0;ke<_e.length;ke++){Me.numFeatures++,Wn(Me,_e[ke],Ie,Se);var we=_e[ke].minX,Le=_e[ke].minY,je=_e[ke].maxX,Je=_e[ke].maxY;we<Me.minX&&(Me.minX=we),Le<Me.minY&&(Me.minY=Le),je>Me.maxX&&(Me.maxX=je),Je>Me.maxY&&(Me.maxY=Je)}return Me}function Wn(_e,W,J,de){var Se=W.geometry,Ie=W.type,Me=[];if(Ie==="Point"||Ie==="MultiPoint")for(var ke=0;ke<Se.length;ke+=3)Me.push(Se[ke]),Me.push(Se[ke+1]),_e.numPoints++,_e.numSimplified++;else if(Ie==="LineString")jn(Me,Se,_e,J,!1,!1);else if(Ie==="MultiLineString"||Ie==="Polygon")for(ke=0;ke<Se.length;ke++)jn(Me,Se[ke],_e,J,Ie==="Polygon",ke===0);else if(Ie==="MultiPolygon")for(var we=0;we<Se.length;we++){var Le=Se[we];for(ke=0;ke<Le.length;ke++)jn(Me,Le[ke],_e,J,!0,ke===0)}if(Me.length){var je=W.tags||null;if(Ie==="LineString"&&de.lineMetrics){for(var Je in je={},W.tags)je[Je]=W.tags[Je];je.mapbox_clip_start=Se.start/Se.size,je.mapbox_clip_end=Se.end/Se.size}var We={geometry:Me,type:Ie==="Polygon"||Ie==="MultiPolygon"?3:Ie==="LineString"||Ie==="MultiLineString"?2:1,tags:je};W.id!==null&&(We.id=W.id),_e.features.push(We)}}function jn(_e,W,J,de,Se,Ie){var Me=de*de;if(de>0&&W.size<(Se?Me:de))J.numPoints+=W.length/3;else{for(var ke=[],we=0;we<W.length;we+=3)(de===0||W[we+2]>Me)&&(J.numSimplified++,ke.push(W[we]),ke.push(W[we+1])),J.numPoints++;Se&&function(Le,je){for(var Je=0,We=0,wt=Le.length,Yt=wt-2;We<wt;Yt=We,We+=2)Je+=(Le[We]-Le[Yt])*(Le[We+1]+Le[Yt+1]);if(Je>0===je)for(We=0,wt=Le.length;We<wt/2;We+=2){var Xt=Le[We],un=Le[We+1];Le[We]=Le[wt-2-We],Le[We+1]=Le[wt-1-We],Le[wt-2-We]=Xt,Le[wt-1-We]=un}}(ke,Ie),_e.push(ke)}}function fr(_e,W){var J=(W=this.options=function(Se,Ie){for(var Me in Ie)Se[Me]=Ie[Me];return Se}(Object.create(this.options),W)).debug;if(J&&console.time("preprocess data"),W.maxZoom<0||W.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(W.promoteId&&W.generateId)throw new Error("promoteId and generateId cannot be used together.");var de=function(Se,Ie){var Me=[];if(Se.type==="FeatureCollection")for(var ke=0;ke<Se.features.length;ke++)ct(Me,Se.features[ke],Ie,ke);else ct(Me,Se.type==="Feature"?Se:{geometry:Se},Ie);return Me}(_e,W);this.tiles={},this.tileCoords=[],J&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",W.indexMaxZoom,W.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),de=function(Se,Ie){var Me=Ie.buffer/Ie.extent,ke=Se,we=ot(Se,1,-1-Me,Me,0,-1,2,Ie),Le=ot(Se,1,1-Me,2+Me,0,-1,2,Ie);return(we||Le)&&(ke=ot(Se,1,-Me,1+Me,0,-1,2,Ie)||[],we&&(ke=Vn(we,1).concat(ke)),Le&&(ke=ke.concat(Vn(Le,-1)))),ke}(de,W),de.length&&this.splitTile(de,0,0,0),J&&(de.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function or(_e,W,J){return 32*((1<<_e)*J+W)+_e}function qn(_e,W){const J=_e.tileID.canonical;if(!this._geoJSONIndex)return W(null,null);const de=this._geoJSONIndex.getTile(J.z,J.x,J.y);if(!de)return W(null,null);const Se=new class{constructor(Me){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=l.EXTENT,this.length=Me.length,this._features=Me}feature(Me){return new class{constructor(ke){this._feature=ke,this.extent=l.EXTENT,this.type=ke.type,this.properties=ke.tags,"id"in ke&&!isNaN(ke.id)&&(this.id=parseInt(ke.id,10))}loadGeometry(){if(this._feature.type===1){const ke=[];for(const we of this._feature.geometry)ke.push([new l.Point(we[0],we[1])]);return ke}{const ke=[];for(const we of this._feature.geometry){const Le=[];for(const je of we)Le.push(new l.Point(je[0],je[1]));ke.push(Le)}return ke}}toGeoJSON(ke,we,Le){return U.call(this,ke,we,Le)}}(this._features[Me])}}(de.features);let Ie=Fe(Se);Ie.byteOffset===0&&Ie.byteLength===Ie.buffer.byteLength||(Ie=new Uint8Array(Ie)),W(null,{vectorTile:Se,rawData:Ie.buffer})}fr.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},fr.prototype.splitTile=function(_e,W,J,de,Se,Ie,Me){for(var ke=[_e,W,J,de],we=this.options,Le=we.debug;ke.length;){de=ke.pop(),J=ke.pop(),W=ke.pop(),_e=ke.pop();var je=1<<W,Je=or(W,J,de),We=this.tiles[Je];if(!We&&(Le>1&&console.time("creation"),We=this.tiles[Je]=rn(_e,W,J,de,we),this.tileCoords.push({z:W,x:J,y:de}),Le)){Le>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",W,J,de,We.numFeatures,We.numPoints,We.numSimplified),console.timeEnd("creation"));var wt="z"+W;this.stats[wt]=(this.stats[wt]||0)+1,this.total++}if(We.source=_e,Se){if(W===we.maxZoom||W===Se)continue;var Yt=1<<Se-W;if(J!==Math.floor(Ie/Yt)||de!==Math.floor(Me/Yt))continue}else if(W===we.indexMaxZoom||We.numPoints<=we.indexMaxPoints)continue;if(We.source=null,_e.length!==0){Le>1&&console.time("clipping");var Xt,un,ln,Gn,On,er,Zn=.5*we.buffer/we.extent,Zr=.5-Zn,an=.5+Zn,nn=1+Zn;Xt=un=ln=Gn=null,On=ot(_e,je,J-Zn,J+an,0,We.minX,We.maxX,we),er=ot(_e,je,J+Zr,J+nn,0,We.minX,We.maxX,we),_e=null,On&&(Xt=ot(On,je,de-Zn,de+an,1,We.minY,We.maxY,we),un=ot(On,je,de+Zr,de+nn,1,We.minY,We.maxY,we),On=null),er&&(ln=ot(er,je,de-Zn,de+an,1,We.minY,We.maxY,we),Gn=ot(er,je,de+Zr,de+nn,1,We.minY,We.maxY,we),er=null),Le>1&&console.timeEnd("clipping"),ke.push(Xt||[],W+1,2*J,2*de),ke.push(un||[],W+1,2*J,2*de+1),ke.push(ln||[],W+1,2*J+1,2*de),ke.push(Gn||[],W+1,2*J+1,2*de+1)}}},fr.prototype.getTile=function(_e,W,J){var de=this.options,Se=de.extent,Ie=de.debug;if(_e<0||_e>24)return null;var Me=1<<_e,ke=or(_e,W=(W%Me+Me)%Me,J);if(this.tiles[ke])return zn(this.tiles[ke],Se);Ie>1&&console.log("drilling down to z%d-%d-%d",_e,W,J);for(var we,Le=_e,je=W,Je=J;!we&&Le>0;)Le--,je=Math.floor(je/2),Je=Math.floor(Je/2),we=this.tiles[or(Le,je,Je)];return we&&we.source?(Ie>1&&console.log("found parent tile z%d-%d-%d",Le,je,Je),Ie>1&&console.time("drilling down"),this.splitTile(we.source,Le,je,Je,_e,W,J),Ie>1&&console.timeEnd("drilling down"),this.tiles[ke]?zn(this.tiles[ke],Se):null):null};class Qn extends l.VectorTileWorkerSource{constructor(W,J,de,Se,Ie){super(W,J,de,Se,qn),Ie&&(this.loadGeoJSON=Ie)}loadData(W,J){const de=W&&W.request,Se=de&&de.collectResourceTiming;this.loadGeoJSON(W,(Ie,Me)=>{if(Ie||!Me)return J(Ie);if(typeof Me!="object")return J(new Error(`Input data given to '${W.source}' is not a valid GeoJSON object.`));{D(Me,!0);try{if(W.filter){const we=l.createExpression(W.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(we.result==="error")throw new Error(we.value.map(je=>`${je.key}: ${je.message}`).join(", "));Me={type:"FeatureCollection",features:Me.features.filter(je=>we.value.evaluate({zoom:0},je))}}this._geoJSONIndex=W.cluster?new gt(function({superclusterOptions:we,clusterProperties:Le}){if(!Le||!we)return we;const je={},Je={},We={accumulated:null,zoom:0},wt={properties:null},Yt=Object.keys(Le);for(const Xt of Yt){const[un,ln]=Le[Xt],Gn=l.createExpression(ln),On=l.createExpression(typeof un=="string"?[un,["accumulated"],["get",Xt]]:un);je[Xt]=Gn.value,Je[Xt]=On.value}return we.map=Xt=>{wt.properties=Xt;const un={};for(const ln of Yt)un[ln]=je[ln].evaluate(We,wt);return un},we.reduce=(Xt,un)=>{wt.properties=un;for(const ln of Yt)We.accumulated=Xt[ln],Xt[ln]=Je[ln].evaluate(We,wt)},we}(W)).load(Me.features):function(we,Le){return new fr(we,Le)}(Me,W.geojsonVtOptions)}catch(we){return J(we)}this.loaded={};const ke={};if(Se){const we=l.getPerformanceMeasurement(de);we&&(ke.resourceTiming={},ke.resourceTiming[W.source]=JSON.parse(JSON.stringify(we)))}J(null,ke)}})}reloadTile(W,J){const de=this.loaded;return de&&de[W.uid]?super.reloadTile(W,J):this.loadTile(W,J)}loadGeoJSON(W,J){if(W.request)l.getJSON(W.request,J);else{if(typeof W.data!="string")return J(new Error(`Input data given to '${W.source}' is not a valid GeoJSON object.`));try{return J(null,JSON.parse(W.data))}catch{return J(new Error(`Input data given to '${W.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(W,J){try{J(null,this._geoJSONIndex.getClusterExpansionZoom(W.clusterId))}catch(de){J(de)}}getClusterChildren(W,J){try{J(null,this._geoJSONIndex.getChildren(W.clusterId))}catch(de){J(de)}}getClusterLeaves(W,J){try{J(null,this._geoJSONIndex.getLeaves(W.clusterId,W.limit,W.offset))}catch(de){J(de)}}}class Rr{constructor(W){this.self=W,this.actor=new l.Actor(W,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=l.getProjection({name:"mercator"}),this.workerSourceTypes={vector:l.VectorTileWorkerSource,geojson:Qn},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(J,de)=>{if(this.workerSourceTypes[J])throw new Error(`Worker source with name "${J}" already registered.`);this.workerSourceTypes[J]=de},this.self.registerRTLTextPlugin=J=>{if(l.plugin.isParsed())throw new Error("RTL text plugin already registered.");l.plugin.applyArabicShaping=J.applyArabicShaping,l.plugin.processBidirectionalText=J.processBidirectionalText,l.plugin.processStyledBidirectionalText=J.processStyledBidirectionalText}}clearCaches(W,J,de){delete this.layerIndexes[W],delete this.availableImages[W],delete this.workerSources[W],delete this.demWorkerSources[W],de()}checkIfReady(W,J,de){de()}setReferrer(W,J){this.referrer=J}spriteLoaded(W,J){this.isSpriteLoaded[W]=J;for(const de in this.workerSources[W]){const Se=this.workerSources[W][de];for(const Ie in Se)Se[Ie]instanceof l.VectorTileWorkerSource&&(Se[Ie].isSpriteLoaded=J,Se[Ie].fire(new l.Event("isSpriteLoaded")))}}setImages(W,J,de){this.availableImages[W]=J;for(const Se in this.workerSources[W]){const Ie=this.workerSources[W][Se];for(const Me in Ie)Ie[Me].availableImages=J}de()}enableTerrain(W,J,de){this.terrain=J,de()}setProjection(W,J){this.projections[W]=l.getProjection(J)}setLayers(W,J,de){this.getLayerIndex(W).replace(J),de()}updateLayers(W,J,de){this.getLayerIndex(W).update(J.layers,J.removedIds),de()}loadTile(W,J,de){const Se=this.enableTerrain?l.extend({enableTerrain:this.terrain},J):J;Se.projection=this.projections[W]||this.defaultProjection,this.getWorkerSource(W,J.type,J.source).loadTile(Se,de)}loadDEMTile(W,J,de){const Se=this.enableTerrain?l.extend({buildQuadTree:this.terrain},J):J;this.getDEMWorkerSource(W,J.source).loadTile(Se,de)}reloadTile(W,J,de){const Se=this.enableTerrain?l.extend({enableTerrain:this.terrain},J):J;Se.projection=this.projections[W]||this.defaultProjection,this.getWorkerSource(W,J.type,J.source).reloadTile(Se,de)}abortTile(W,J,de){this.getWorkerSource(W,J.type,J.source).abortTile(J,de)}removeTile(W,J,de){this.getWorkerSource(W,J.type,J.source).removeTile(J,de)}removeSource(W,J,de){if(!this.workerSources[W]||!this.workerSources[W][J.type]||!this.workerSources[W][J.type][J.source])return;const Se=this.workerSources[W][J.type][J.source];delete this.workerSources[W][J.type][J.source],Se.removeSource!==void 0?Se.removeSource(J,de):de()}loadWorkerSource(W,J,de){try{this.self.importScripts(J.url),de()}catch(Se){de(Se.toString())}}syncRTLPluginState(W,J,de){try{l.plugin.setState(J);const Se=l.plugin.getPluginURL();if(l.plugin.isLoaded()&&!l.plugin.isParsed()&&Se!=null){this.self.importScripts(Se);const Ie=l.plugin.isParsed();de(Ie?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Se}`),Ie)}}catch(Se){de(Se.toString())}}getAvailableImages(W){let J=this.availableImages[W];return J||(J=[]),J}getLayerIndex(W){let J=this.layerIndexes[W];return J||(J=this.layerIndexes[W]=new A),J}getWorkerSource(W,J,de){if(this.workerSources[W]||(this.workerSources[W]={}),this.workerSources[W][J]||(this.workerSources[W][J]={}),!this.workerSources[W][J][de]){const Se={send:(Ie,Me,ke,we,Le,je)=>{this.actor.send(Ie,Me,ke,W,Le,je)},scheduler:this.actor.scheduler};this.workerSources[W][J][de]=new this.workerSourceTypes[J](Se,this.getLayerIndex(W),this.getAvailableImages(W),this.isSpriteLoaded[W])}return this.workerSources[W][J][de]}getDEMWorkerSource(W,J){return this.demWorkerSources[W]||(this.demWorkerSources[W]={}),this.demWorkerSources[W][J]||(this.demWorkerSources[W][J]=new M),this.demWorkerSources[W][J]}enforceCacheSizeLimit(W,J){l.enforceCacheSizeLimit(J)}getWorkerPerformanceMetrics(W,J,de){de(void 0,void 0)}}return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new Rr(self)),Rr}),f(["./shared"],function(l){function w(p,s){if(Array.isArray(p)){if(!Array.isArray(s)||p.length!==s.length)return!1;for(let d=0;d<p.length;d++)if(!w(p[d],s[d]))return!1;return!0}if(typeof p=="object"&&p!==null&&s!==null){if(typeof s!="object"||Object.keys(p).length!==Object.keys(s).length)return!1;for(const d in p)if(!w(p[d],s[d]))return!1;return!0}return p===s}var C=A;function A(p){return!function(s){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var g,_,b=new Blob([""],{type:"text/javascript"}),I=URL.createObjectURL(b);try{_=new Worker(I),g=!0}catch{g=!1}return _&&_.terminate(),URL.revokeObjectURL(I),g}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var g=document.createElement("canvas");g.width=g.height=1;var _=g.getContext("2d");if(!_)return!1;var b=_.getImageData(0,0,1,1);return b&&b.width===g.width}()?(M[d=s&&s.failIfMajorPerformanceCaveat]===void 0&&(M[d]=function(g){var _,b=function(I){var P=document.createElement("canvas"),O=Object.create(A.webGLContextAttributes);return O.failIfMajorPerformanceCaveat=I,P.getContext("webgl",O)||P.getContext("experimental-webgl",O)}(g);if(!b)return!1;try{_=b.createShader(b.VERTEX_SHADER)}catch{return!1}return!(!_||b.isContextLost())&&(b.shaderSource(_,"void main() {}"),b.compileShader(_),b.getShaderParameter(_,b.COMPILE_STATUS)===!0)}(d)),M[d]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var d}(p)}var M={};function k(p,s,d){const g=l.window.document.createElement(p);return s!==void 0&&(g.className=s),d&&d.appendChild(g),g}function N(p,s,d){const g=l.window.document.createElementNS("http://www.w3.org/2000/svg",p);for(const _ of Object.keys(s))g.setAttributeNS(null,_,s[_]);return d&&d.appendChild(g),g}A.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const D=l.window.document&&l.window.document.documentElement.style,U=D&&D.userSelect!==void 0?"userSelect":"WebkitUserSelect";let q;function F(){D&&U&&(q=D[U],D[U]="none")}function j(){D&&U&&(D[U]=q)}function V(p){p.preventDefault(),p.stopPropagation(),l.window.removeEventListener("click",V,!0)}function X(){l.window.addEventListener("click",V,!0),l.window.setTimeout(()=>{l.window.removeEventListener("click",V,!0)},0)}function te(p,s){const d=p.getBoundingClientRect();return ne(p,d,s)}function re(p,s){const d=p.getBoundingClientRect(),g=[];for(let _=0;_<s.length;_++)g.push(ne(p,d,s[_]));return g}function Q(p){return l.window.InstallTrigger!==void 0&&p.button===2&&p.ctrlKey&&l.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:p.button}function ne(p,s,d){const g=p.offsetWidth===s.width?1:p.offsetWidth/s.width;return new l.Point((d.clientX-s.left)*g,(d.clientY-s.top)*g)}function ee(p,s){var d=s[0],g=s[1],_=s[2],b=s[3],I=d*b-_*g;return I?(p[0]=b*(I=1/I),p[1]=-g*I,p[2]=-_*I,p[3]=d*I,p):null}function me(p){const{userImage:s}=p;return!!(s&&s.render&&s.render())&&(p.data.replace(new Uint8Array(s.data.buffer)),!0)}class ce extends l.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new l.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(s){if(this.loaded!==s&&(this.loaded=s,s)){for(const{ids:d,callback:g}of this.requestors)this._notify(d,g);this.requestors=[]}}hasImage(s){return!!this.getImage(s)}getImage(s){return this.images[s]}addImage(s,d){this._validate(s,d)&&(this.images[s]=d)}_validate(s,d){let g=!0;return this._validateStretch(d.stretchX,d.data&&d.data.width)||(this.fire(new l.ErrorEvent(new Error(`Image "${s}" has invalid "stretchX" value`))),g=!1),this._validateStretch(d.stretchY,d.data&&d.data.height)||(this.fire(new l.ErrorEvent(new Error(`Image "${s}" has invalid "stretchY" value`))),g=!1),this._validateContent(d.content,d)||(this.fire(new l.ErrorEvent(new Error(`Image "${s}" has invalid "content" value`))),g=!1),g}_validateStretch(s,d){if(!s)return!0;let g=0;for(const _ of s){if(_[0]<g||_[1]<_[0]||d<_[1])return!1;g=_[1]}return!0}_validateContent(s,d){return!(s&&(s.length!==4||s[0]<0||d.data.width<s[0]||s[1]<0||d.data.height<s[1]||s[2]<0||d.data.width<s[2]||s[3]<0||d.data.height<s[3]||s[2]<s[0]||s[3]<s[1]))}updateImage(s,d){d.version=this.images[s].version+1,this.images[s]=d,this.updatedImages[s]=!0}removeImage(s){const d=this.images[s];delete this.images[s],delete this.patterns[s],d.userImage&&d.userImage.onRemove&&d.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(s,d){let g=!0;if(!this.isLoaded())for(const _ of s)this.images[_]||(g=!1);this.isLoaded()||g?this._notify(s,d):this.requestors.push({ids:s,callback:d})}_notify(s,d){const g={};for(const _ of s){this.images[_]||this.fire(new l.Event("styleimagemissing",{id:_}));const b=this.images[_];b?g[_]={data:b.data.clone(),pixelRatio:b.pixelRatio,sdf:b.sdf,version:b.version,stretchX:b.stretchX,stretchY:b.stretchY,content:b.content,hasRenderCallback:!!(b.userImage&&b.userImage.render)}:l.warnOnce(`Image "${_}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}d(null,g)}getPixelSize(){const{width:s,height:d}=this.atlasImage;return{width:s,height:d}}getPattern(s){const d=this.patterns[s],g=this.getImage(s);if(!g)return null;if(d&&d.position.version===g.version)return d.position;if(d)d.position.version=g.version;else{const _={w:g.data.width+2,h:g.data.height+2,x:0,y:0},b=new l.ImagePosition(_,g);this.patterns[s]={bin:_,position:b}}return this._updatePatternAtlas(),this.patterns[s].position}bind(s){const d=s.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new l.Texture(s,this.atlasImage,d.RGBA),this.atlasTexture&&this.atlasTexture.bind(d.LINEAR,d.CLAMP_TO_EDGE)}_updatePatternAtlas(){const s=[];for(const b in this.patterns)s.push(this.patterns[b].bin);const{w:d,h:g}=l.potpack(s),_=this.atlasImage;_.resize({width:d||1,height:g||1});for(const b in this.patterns){const{bin:I}=this.patterns[b],P=I.x+1,O=I.y+1,B=this.images[b].data,$=B.width,Z=B.height;l.RGBAImage.copy(B,_,{x:0,y:0},{x:P,y:O},{width:$,height:Z}),l.RGBAImage.copy(B,_,{x:0,y:Z-1},{x:P,y:O-1},{width:$,height:1}),l.RGBAImage.copy(B,_,{x:0,y:0},{x:P,y:O+Z},{width:$,height:1}),l.RGBAImage.copy(B,_,{x:$-1,y:0},{x:P-1,y:O},{width:1,height:Z}),l.RGBAImage.copy(B,_,{x:0,y:0},{x:P+$,y:O},{width:1,height:Z})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(s){for(const d of s){if(this.callbackDispatchedThisFrame[d])continue;this.callbackDispatchedThisFrame[d]=!0;const g=this.images[d];me(g)&&this.updateImage(d,g)}}}const ie=new l.Properties({anchor:new l.DataConstantProperty(l.spec.light.anchor),position:new class{constructor(){this.specification=l.spec.light.position}possiblyEvaluate(p,s){return function([d,g,_]){const b=l.degToRad(g+90),I=l.degToRad(_);return{x:d*Math.cos(b)*Math.sin(I),y:d*Math.sin(b)*Math.sin(I),z:d*Math.cos(I),azimuthal:g,polar:_}}(p.expression.evaluate(s))}interpolate(p,s,d){return{x:l.number(p.x,s.x,d),y:l.number(p.y,s.y,d),z:l.number(p.z,s.z,d),azimuthal:l.number(p.azimuthal,s.azimuthal,d),polar:l.number(p.polar,s.polar,d)}}},color:new l.DataConstantProperty(l.spec.light.color),intensity:new l.DataConstantProperty(l.spec.light.intensity)});class fe extends l.Evented{constructor(s){super(),this._transitionable=new l.Transitionable(ie),this.setLight(s),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(s,d={}){if(!this._validate(l.validateLight,s,d))for(const g in s){const _=s[g];l.endsWith(g,"-transition")?this._transitionable.setTransition(g.slice(0,-11),_):this._transitionable.setValue(g,_)}}updateTransitions(s){this._transitioning=this._transitionable.transitioned(s,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(s){this.properties=this._transitioning.possiblyEvaluate(s)}_validate(s,d,g){return(!g||g.validate!==!1)&&l.emitValidationErrors(this,s.call(l.validateStyle,l.extend({value:d,style:{glyphs:!0,sprite:!0},styleSpec:l.spec})))}}const Te=new l.Properties({source:new l.DataConstantProperty(l.spec.terrain.source),exaggeration:new l.DataConstantProperty(l.spec.terrain.exaggeration)});let $e=class extends l.Evented{constructor(p,s){super(),this._transitionable=new l.Transitionable(Te),this.set(p),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=s}get(){return this._transitionable.serialize()}set(p){for(const s in p){const d=p[s];l.endsWith(s,"-transition")?this._transitionable.setTransition(s.slice(0,-11),d):this._transitionable.setValue(s,d)}}updateTransitions(p){this._transitioning=this._transitionable.transitioned(p,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(p){this.properties=this._transitioning.possiblyEvaluate(p)}};function Fe(p,s,d,g){const _=l.smoothstep(45,65,d),[b,I]=Ne(p,g),P=l.length(s);let O=1-Math.min(1,Math.exp((P-b)/(I-b)*-6));return O*=O*O,O=Math.min(1,1.00747*O),O*_*p.alpha}function Ne(p,s){const d=.5/Math.tan(.5*s);return[p.range[0]+d,p.range[1]+d]}const pe=new l.Properties({range:new l.DataConstantProperty(l.spec.fog.range),color:new l.DataConstantProperty(l.spec.fog.color),"high-color":new l.DataConstantProperty(l.spec.fog["high-color"]),"space-color":new l.DataConstantProperty(l.spec.fog["space-color"]),"horizon-blend":new l.DataConstantProperty(l.spec.fog["horizon-blend"]),"star-intensity":new l.DataConstantProperty(l.spec.fog["star-intensity"])});class He extends l.Evented{constructor(s,d){super(),this._transitionable=new l.Transitionable(pe),this.set(s),this._transitioning=this._transitionable.untransitioned(),this._transform=d}get state(){const s=this._transform,d=s.projection.name==="globe",g=l.globeToMercatorTransition(s.zoom),_=this.properties.get("range"),b=[.5,3];return{range:d?[l.number(b[0],_[0],g),l.number(b[1],_[1],g)]:_,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(s,d={}){if(!this._validate(l.validateFog,s,d)){for(const g of Object.keys(l.spec.fog))s&&s[g]===void 0&&(s[g]=l.spec.fog[g].default);for(const g in s){const _=s[g];l.endsWith(g,"-transition")?this._transitionable.setTransition(g.slice(0,-11),_):this._transitionable.setValue(g,_)}}}getOpacity(s){if(!this._transform.projection.supportsFog)return 0;const d=this.properties&&this.properties.get("color")||1;return(this._transform.projection.name==="globe"?1:l.smoothstep(45,65,s))*d.a}getOpacityAtLatLng(s,d){return this._transform.projection.supportsFog?function(g,_,b){const I=l.MercatorCoordinate.fromLngLat(_),P=b.elevation?b.elevation.getAtPointOrZero(I):0,O=[I.x,I.y,P];return l.transformMat4(O,O,b.mercatorFogMatrix),Fe(g,O,b.pitch,b._fov)}(this.state,s,d):0}getFovAdjustedRange(s){return this._transform.projection.supportsFog?Ne(this.state,s):[0,1]}updateTransitions(s){this._transitioning=this._transitionable.transitioned(s,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(s){this.properties=this._transitioning.possiblyEvaluate(s)}_validate(s,d,g){return(!g||g.validate!==!1)&&l.emitValidationErrors(this,s.call(l.validateStyle,l.extend({value:d,style:{glyphs:!0,sprite:!0},styleSpec:l.spec})))}}class Be{constructor(s,d){this.workerPool=s,this.actors=[],this.currentActor=0,this.id=l.uniqueId();const g=this.workerPool.acquire(this.id);for(let _=0;_<g.length;_++){const b=new Be.Actor(g[_],d,this.id);b.name=`Worker ${_}`,this.actors.push(b)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(s,d,g){l.asyncAll(this.actors,(_,b)=>{_.send(s,d,b)},g=g||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(s=>{s.remove()}),this.actors=[],this.workerPool.release(this.id)}}function Ge(p,s,d){return s*(l.EXTENT/(p.tileSize*Math.pow(2,d-p.tileID.overscaledZ)))}Be.Actor=l.Actor;class Qe{constructor(s,d,g,_){this.screenBounds=s,this.cameraPoint=d,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=g,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,_)}static createFromScreenPoints(s,d){let g,_;if(s instanceof l.Point||typeof s[0]=="number"){const b=l.Point.convert(s);g=[b],_=d.isPointAboveHorizon(b)}else{const b=l.Point.convert(s[0]),I=l.Point.convert(s[1]);g=[b,I],_=l.polygonizeBounds(b,I).every(P=>d.isPointAboveHorizon(P))}return new Qe(g,d.getCameraPoint(),_,d)}isPointQuery(){return this.screenBounds.length===1}bufferedScreenGeometry(s){return l.polygonizeBounds(this.screenBounds[0],this.screenBounds.length===1?this.screenBounds[0]:this.screenBounds[1],s)}bufferedCameraGeometry(s){const d=this.screenBounds[0],g=this.screenBounds.length===1?this.screenBounds[0].add(new l.Point(1,1)):this.screenBounds[1],_=l.polygonizeBounds(d,g,0,!1);return this.cameraPoint.y>g.y&&(this.cameraPoint.x>d.x&&this.cameraPoint.x<g.x?_.splice(3,0,this.cameraPoint):this.cameraPoint.x>=g.x?_[2]=this.cameraPoint:this.cameraPoint.x<=d.x&&(_[3]=this.cameraPoint)),l.bufferConvexPolygon(_,s)}bufferedCameraGeometryGlobe(s){const d=this.screenBounds[0],g=this.screenBounds.length===1?this.screenBounds[0].add(new l.Point(1,1)):this.screenBounds[1],_=l.polygonizeBounds(d,g,s),b=this.cameraPoint.clone();switch(3*((b.y>d.y)+(b.y>g.y))+((b.x>d.x)+(b.x>g.x))){case 0:_[0]=b,_[4]=b.clone();break;case 1:_.splice(1,0,b);break;case 2:_[1]=b;break;case 3:_.splice(4,0,b);break;case 5:_.splice(2,0,b);break;case 6:_[3]=b;break;case 7:_.splice(3,0,b);break;case 8:_[2]=b}return _}containsTile(s,d,g,_=0){const b=s.queryPadding/d._pixelsPerMercatorPixel+1,I=g?this._bufferedCameraMercator(b,d):this._bufferedScreenMercator(b,d);let P=s.tileID.wrap+(I.unwrapped?_:0);const O=I.polygon.map(ge=>l.getTilePoint(s.tileTransform,ge,P));if(!l.polygonIntersectsBox(O,0,0,l.EXTENT,l.EXTENT))return;P=s.tileID.wrap+(this.screenGeometryMercator.unwrapped?_:0);const B=this.screenGeometryMercator.polygon.map(ge=>l.getTileVec3(s.tileTransform,ge,P)),$=B.map(ge=>new l.Point(ge[0],ge[1])),Z=d.getFreeCameraOptions().position||new l.MercatorCoordinate(0,0,0),oe=l.getTileVec3(s.tileTransform,Z,P),le=B.map(ge=>{const K=l.sub(ge,ge,oe);return l.normalize(K,K),new l.Ray(oe,K)}),he=Ge(s,1,d.zoom)*d._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:$,tilespaceRays:le,bufferedTilespaceGeometry:O,bufferedTilespaceBounds:(ue=l.getBounds(O),ue.min.x=l.clamp(ue.min.x,0,l.EXTENT),ue.min.y=l.clamp(ue.min.y,0,l.EXTENT),ue.max.x=l.clamp(ue.max.x,0,l.EXTENT),ue.max.y=l.clamp(ue.max.y,0,l.EXTENT),ue),tile:s,tileID:s.tileID,pixelToTileUnitsFactor:he};var ue}_bufferedScreenMercator(s,d){const g=xt(s);if(this._screenRaycastCache[g])return this._screenRaycastCache[g];{let _;return _=d.projection.name==="globe"?this._projectAndResample(this.bufferedScreenGeometry(s),d):{polygon:this.bufferedScreenGeometry(s).map(b=>d.pointCoordinate3D(b)),unwrapped:!0},this._screenRaycastCache[g]=_,_}}_bufferedCameraMercator(s,d){const g=xt(s);if(this._cameraRaycastCache[g])return this._cameraRaycastCache[g];{let _;return _=d.projection.name==="globe"?this._projectAndResample(this.bufferedCameraGeometryGlobe(s),d):{polygon:this.bufferedCameraGeometry(s).map(b=>d.pointCoordinate3D(b)),unwrapped:!0},this._cameraRaycastCache[g]=_,_}}_projectAndResample(s,d){const g=function(b,I){const P=l.multiply([],I.pixelMatrix,I.globeMatrix),O=[0,-l.GLOBE_RADIUS,0,1],B=[0,l.GLOBE_RADIUS,0,1],$=[0,0,0,1];l.transformMat4$1(O,O,P),l.transformMat4$1(B,B,P),l.transformMat4$1($,$,P);const Z=new l.Point(O[0]/O[3],O[1]/O[3]),oe=new l.Point(B[0]/B[3],B[1]/B[3]),le=l.polygonContainsPoint(b,Z)&&O[3]<$[3],he=l.polygonContainsPoint(b,oe)&&B[3]<$[3];if(!le&&!he)return null;const ue=function(Oe,Ve,Ue){for(let Ke=1;Ke<Oe.length;Ke++){const Pt=St(Ve.pointCoordinate3D(Oe[Ke-1]).x),qe=St(Ve.pointCoordinate3D(Oe[Ke]).x);if(Ue<0){if(Pt<qe)return{idx:Ke,t:-Pt/(qe-1-Pt)}}else if(qe<Pt)return{idx:Ke,t:(1-Pt)/(qe+1-Pt)}}return null}(b,I,le?-1:1);if(!ue)return null;const{idx:ge,t:K}=ue;let se=ge>1?gt(b.slice(0,ge),I):[],xe=ge<b.length?gt(b.slice(ge),I):[];se=se.map(Oe=>new l.Point(St(Oe.x),Oe.y)),xe=xe.map(Oe=>new l.Point(St(Oe.x),Oe.y));const be=[...se];be.length===0&&be.push(xe[xe.length-1]);const Re=l.number(be[be.length-1].y,(xe.length===0?se[0]:xe[0]).y,K);let ze;return ze=le?[new l.Point(0,Re),new l.Point(0,0),new l.Point(1,0),new l.Point(1,Re)]:[new l.Point(1,Re),new l.Point(1,1),new l.Point(0,1),new l.Point(0,Re)],be.push(...ze),xe.length===0?be.push(se[0]):be.push(...xe),{polygon:be.map(Oe=>new l.MercatorCoordinate(Oe.x,Oe.y)),unwrapped:!1}}(s,d);if(g)return g;const _=function(b,I){let P=!1,O=-1/0,B=0;for(let Z=0;Z<b.length-1;Z++)b[Z].x>O&&(O=b[Z].x,B=Z);for(let Z=0;Z<b.length-1;Z++){const oe=(B+Z)%(b.length-1),le=b[oe],he=b[oe+1];Math.abs(le.x-he.x)>.5&&(le.x<he.x?(le.x+=1,oe===0&&(b[b.length-1].x+=1)):(he.x+=1,oe+1===b.length-1&&(b[0].x+=1)),P=!0)}const $=l.mercatorXfromLng(I.center.lng);return P&&$<Math.abs($-1)&&b.forEach(Z=>{Z.x-=1}),{polygon:b,unwrapped:P}}(gt(s,d).map(b=>new l.Point(St(b.x),b.y)),d);return{polygon:_.polygon.map(b=>new l.MercatorCoordinate(b.x,b.y)),unwrapped:_.unwrapped}}}function gt(p,s){return l.resample(p,d=>{const g=s.pointCoordinate3D(d);d.x=g.x,d.y=g.y},1/256)}function St(p){return p<0?1+p%1:p%1}function xt(p){return 100*p|0}function Nt(p,s,d,g,_){const b=function(I,P){if(I)return _(I);if(P){p.url&&P.tiles&&p.tiles&&delete p.tiles;const O=l.pick(l.extend(P,p),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);P.vector_layers&&(O.vectorLayers=P.vector_layers,O.vectorLayerIds=O.vectorLayers.map(B=>B.id)),O.tiles=s.canonicalizeTileset(O,p.url),_(null,O)}};return p.url?l.getJSON(s.transformRequest(s.normalizeSourceURL(p.url,null,d,g),l.ResourceType.Source),b):l.exported.frame(()=>b(null,p))}class jt{constructor(s,d,g){this.bounds=l.LngLatBounds.convert(this.validateBounds(s)),this.minzoom=d||0,this.maxzoom=g||24}validateBounds(s){return Array.isArray(s)&&s.length===4?[Math.max(-180,s[0]),Math.max(-90,s[1]),Math.min(180,s[2]),Math.min(90,s[3])]:[-180,-90,180,90]}contains(s){const d=Math.pow(2,s.z),g=Math.floor(l.mercatorXfromLng(this.bounds.getWest())*d),_=Math.floor(l.mercatorYfromLat(this.bounds.getNorth())*d),b=Math.ceil(l.mercatorXfromLng(this.bounds.getEast())*d),I=Math.ceil(l.mercatorYfromLat(this.bounds.getSouth())*d);return s.x>=g&&s.x<b&&s.y>=_&&s.y<I}}class bt{constructor(s,d,g){this.context=s;const _=s.gl;this.buffer=_.createBuffer(),this.dynamicDraw=!!g,this.context.unbindVAO(),s.bindElementBuffer.set(this.buffer),_.bufferData(_.ELEMENT_ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?_.DYNAMIC_DRAW:_.STATIC_DRAW),this.dynamicDraw||d.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(s){const d=this.context.gl;this.context.unbindVAO(),this.bind(),d.bufferSubData(d.ELEMENT_ARRAY_BUFFER,0,s.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const ut={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Tt{constructor(s,d,g,_){this.length=d.length,this.attributes=g,this.itemSize=d.bytesPerElement,this.dynamicDraw=_,this.context=s;const b=s.gl;this.buffer=b.createBuffer(),s.bindVertexBuffer.set(this.buffer),b.bufferData(b.ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?b.DYNAMIC_DRAW:b.STATIC_DRAW),this.dynamicDraw||d.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(s){const d=this.context.gl;this.bind(),d.bufferSubData(d.ARRAY_BUFFER,0,s.arrayBuffer)}enableAttributes(s,d){for(let g=0;g<this.attributes.length;g++){const _=d.attributes[this.attributes[g].name];_!==void 0&&s.enableVertexAttribArray(_)}}setVertexAttribPointers(s,d,g){for(let _=0;_<this.attributes.length;_++){const b=this.attributes[_],I=d.attributes[b.name];I!==void 0&&s.vertexAttribPointer(I,b.components,s[ut[b.type]],!1,this.itemSize,b.offset+this.itemSize*(g||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class ft{constructor(s){this.gl=s.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(s){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class yt extends ft{getDefault(){return l.Color.transparent}set(s){const d=this.current;(s.r!==d.r||s.g!==d.g||s.b!==d.b||s.a!==d.a||this.dirty)&&(this.gl.clearColor(s.r,s.g,s.b,s.a),this.current=s,this.dirty=!1)}}class ct extends ft{getDefault(){return 1}set(s){(s!==this.current||this.dirty)&&(this.gl.clearDepth(s),this.current=s,this.dirty=!1)}}class It extends ft{getDefault(){return 0}set(s){(s!==this.current||this.dirty)&&(this.gl.clearStencil(s),this.current=s,this.dirty=!1)}}class Ct extends ft{getDefault(){return[!0,!0,!0,!0]}set(s){const d=this.current;(s[0]!==d[0]||s[1]!==d[1]||s[2]!==d[2]||s[3]!==d[3]||this.dirty)&&(this.gl.colorMask(s[0],s[1],s[2],s[3]),this.current=s,this.dirty=!1)}}class Qt extends ft{getDefault(){return!0}set(s){(s!==this.current||this.dirty)&&(this.gl.depthMask(s),this.current=s,this.dirty=!1)}}class Vt extends ft{getDefault(){return 255}set(s){(s!==this.current||this.dirty)&&(this.gl.stencilMask(s),this.current=s,this.dirty=!1)}}class Bt extends ft{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(s){const d=this.current;(s.func!==d.func||s.ref!==d.ref||s.mask!==d.mask||this.dirty)&&(this.gl.stencilFunc(s.func,s.ref,s.mask),this.current=s,this.dirty=!1)}}class ot extends ft{getDefault(){const s=this.gl;return[s.KEEP,s.KEEP,s.KEEP]}set(s){const d=this.current;(s[0]!==d[0]||s[1]!==d[1]||s[2]!==d[2]||this.dirty)&&(this.gl.stencilOp(s[0],s[1],s[2]),this.current=s,this.dirty=!1)}}class rt extends ft{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;s?d.enable(d.STENCIL_TEST):d.disable(d.STENCIL_TEST),this.current=s,this.dirty=!1}}class Lt extends ft{getDefault(){return[0,1]}set(s){const d=this.current;(s[0]!==d[0]||s[1]!==d[1]||this.dirty)&&(this.gl.depthRange(s[0],s[1]),this.current=s,this.dirty=!1)}}class Mt extends ft{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;s?d.enable(d.DEPTH_TEST):d.disable(d.DEPTH_TEST),this.current=s,this.dirty=!1}}class sn extends ft{getDefault(){return this.gl.LESS}set(s){(s!==this.current||this.dirty)&&(this.gl.depthFunc(s),this.current=s,this.dirty=!1)}}class An extends ft{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;s?d.enable(d.BLEND):d.disable(d.BLEND),this.current=s,this.dirty=!1}}class Mn extends ft{getDefault(){const s=this.gl;return[s.ONE,s.ZERO]}set(s){const d=this.current;(s[0]!==d[0]||s[1]!==d[1]||this.dirty)&&(this.gl.blendFunc(s[0],s[1]),this.current=s,this.dirty=!1)}}class on extends ft{getDefault(){return l.Color.transparent}set(s){const d=this.current;(s.r!==d.r||s.g!==d.g||s.b!==d.b||s.a!==d.a||this.dirty)&&(this.gl.blendColor(s.r,s.g,s.b,s.a),this.current=s,this.dirty=!1)}}class Vn extends ft{getDefault(){return this.gl.FUNC_ADD}set(s){(s!==this.current||this.dirty)&&(this.gl.blendEquation(s),this.current=s,this.dirty=!1)}}class Nn extends ft{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;s?d.enable(d.CULL_FACE):d.disable(d.CULL_FACE),this.current=s,this.dirty=!1}}class zn extends ft{getDefault(){return this.gl.BACK}set(s){(s!==this.current||this.dirty)&&(this.gl.cullFace(s),this.current=s,this.dirty=!1)}}class yn extends ft{getDefault(){return this.gl.CCW}set(s){(s!==this.current||this.dirty)&&(this.gl.frontFace(s),this.current=s,this.dirty=!1)}}let rn,Wn=class extends ft{getDefault(){return null}set(p){(p!==this.current||this.dirty)&&(this.gl.useProgram(p),this.current=p,this.dirty=!1)}};class jn extends ft{getDefault(){return this.gl.TEXTURE0}set(s){(s!==this.current||this.dirty)&&(this.gl.activeTexture(s),this.current=s,this.dirty=!1)}}class fr extends ft{getDefault(){const s=this.gl;return[0,0,s.drawingBufferWidth,s.drawingBufferHeight]}set(s){const d=this.current;(s[0]!==d[0]||s[1]!==d[1]||s[2]!==d[2]||s[3]!==d[3]||this.dirty)&&(this.gl.viewport(s[0],s[1],s[2],s[3]),this.current=s,this.dirty=!1)}}class or extends ft{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;d.bindFramebuffer(d.FRAMEBUFFER,s),this.current=s,this.dirty=!1}}class qn extends ft{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;d.bindRenderbuffer(d.RENDERBUFFER,s),this.current=s,this.dirty=!1}}class Qn extends ft{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;d.bindTexture(d.TEXTURE_2D,s),this.current=s,this.dirty=!1}}class Rr extends ft{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;d.bindBuffer(d.ARRAY_BUFFER,s),this.current=s,this.dirty=!1}}class _e extends ft{getDefault(){return null}set(s){const d=this.gl;d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,s),this.current=s,this.dirty=!1}}class W extends ft{constructor(s){super(s),this.vao=s.extVertexArrayObject}getDefault(){return null}set(s){this.vao&&(s!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(s),this.current=s,this.dirty=!1)}}class J extends ft{getDefault(){return 4}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_ALIGNMENT,s),this.current=s,this.dirty=!1}}class de extends ft{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s),this.current=s,this.dirty=!1}}class Se extends ft{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,s),this.current=s,this.dirty=!1}}class Ie extends ft{constructor(s,d){super(s),this.context=s,this.parent=d}getDefault(){return null}}class Me extends Ie{setDirty(){this.dirty=!0}set(s){if(s===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,s,0),this.current=s,this.dirty=!1}}class ke extends Ie{attachment(){return this.gl.DEPTH_ATTACHMENT}set(s){if(s===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferRenderbuffer(d.FRAMEBUFFER,this.attachment(),d.RENDERBUFFER,s),this.current=s,this.dirty=!1}}class we extends ke{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class Le{constructor(s,d,g,_){this.context=s,this.width=d,this.height=g;const b=this.framebuffer=s.gl.createFramebuffer();this.colorAttachment=new Me(s,b),_&&(this.depthAttachment=new ke(s,b))}destroy(){const s=this.context.gl,d=this.colorAttachment.get();if(d&&s.deleteTexture(d),this.depthAttachment){const g=this.depthAttachment.get();g&&s.deleteRenderbuffer(g)}s.deleteFramebuffer(this.framebuffer)}}class je{constructor(s,d=!1){if(this.gl=s,this.isWebGL2=d,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),d){const g=s;this.extVertexArrayObject={createVertexArrayOES:g.createVertexArray.bind(s),deleteVertexArrayOES:g.deleteVertexArray.bind(s),bindVertexArrayOES:g.bindVertexArray.bind(s)}}this.clearColor=new yt(this),this.clearDepth=new ct(this),this.clearStencil=new It(this),this.colorMask=new Ct(this),this.depthMask=new Qt(this),this.stencilMask=new Vt(this),this.stencilFunc=new Bt(this),this.stencilOp=new ot(this),this.stencilTest=new rt(this),this.depthRange=new Lt(this),this.depthTest=new Mt(this),this.depthFunc=new sn(this),this.blend=new An(this),this.blendFunc=new Mn(this),this.blendColor=new on(this),this.blendEquation=new Vn(this),this.cullFace=new Nn(this),this.cullFaceSide=new zn(this),this.frontFace=new yn(this),this.program=new Wn(this),this.activeTexture=new jn(this),this.viewport=new fr(this),this.bindFramebuffer=new or(this),this.bindRenderbuffer=new qn(this),this.bindTexture=new Qn(this),this.bindVertexBuffer=new Rr(this),this.bindElementBuffer=new _e(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new W(this),this.pixelStoreUnpack=new J(this),this.pixelStoreUnpackPremultiplyAlpha=new de(this),this.pixelStoreUnpackFlipY=new Se(this),this.extTextureFilterAnisotropic=s.getExtension("EXT_texture_filter_anisotropic")||s.getExtension("MOZ_EXT_texture_filter_anisotropic")||s.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=s.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extStandardDerivativesForceOff=!1,this.extDebugRendererInfo=s.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=s.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=s.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),d||(this.extTextureHalfFloat=s.getExtension("OES_texture_half_float")),(d||this.extTextureHalfFloat&&s.getExtension("OES_texture_half_float_linear"))&&(this.extRenderToTextureHalfFloat=s.getExtension("EXT_color_buffer_half_float")),this.extStandardDerivatives=d||s.getExtension("OES_standard_derivatives"),this.extTimerQuery=s.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=s.getParameter(s.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(s,d){return new bt(this,s,d)}createVertexBuffer(s,d,g){return new Tt(this,s,d,g)}createRenderbuffer(s,d,g){const _=this.gl,b=_.createRenderbuffer();return this.bindRenderbuffer.set(b),_.renderbufferStorage(_.RENDERBUFFER,s,d,g),this.bindRenderbuffer.set(null),b}createFramebuffer(s,d,g){return new Le(this,s,d,g)}clear({color:s,depth:d,stencil:g}){const _=this.gl;let b=0;s&&(b|=_.COLOR_BUFFER_BIT,this.clearColor.set(s),this.colorMask.set([!0,!0,!0,!0])),d!==void 0&&(b|=_.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(d),this.depthMask.set(!0)),g!==void 0&&(b|=_.STENCIL_BUFFER_BIT,this.clearStencil.set(g),this.stencilMask.set(255)),_.clear(b)}setCullFace(s){s.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(s.mode),this.frontFace.set(s.frontFace))}setDepthMode(s){s.func!==this.gl.ALWAYS||s.mask?(this.depthTest.set(!0),this.depthFunc.set(s.func),this.depthMask.set(s.mask),this.depthRange.set(s.range)):this.depthTest.set(!1)}setStencilMode(s){s.test.func!==this.gl.ALWAYS||s.mask?(this.stencilTest.set(!0),this.stencilMask.set(s.mask),this.stencilOp.set([s.fail,s.depthFail,s.pass]),this.stencilFunc.set({func:s.test.func,ref:s.ref,mask:s.test.mask})):this.stencilTest.set(!1)}setColorMode(s){w(s.blendFunction,l.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(s.blendFunction),this.blendColor.set(s.blendColor)),this.colorMask.set(s.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class Je extends l.Evented{constructor(s,d,g,_){if(super(),this.id=s,this.dispatcher=g,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,l.extend(this,l.pick(d,["url","scheme","tileSize","promoteId"])),this._options=l.extend({type:"vector"},d),this._collectResourceTiming=d.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(_),this._tileWorkers={},this._deduped=new l.DedupedRequest}load(s){this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"}));const d=Array.isArray(this.map._language)?this.map._language.join():this.map._language,g=this.map._worldview;this._tileJSONRequest=Nt(this._options,this.map._requestManager,d,g,(_,b)=>{this._tileJSONRequest=null,this._loaded=!0,_?(d&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${d}`),g&&g.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${g}`),this.fire(new l.ErrorEvent(_))):b&&(l.extend(this,b),b.bounds&&(this.tileBounds=new jt(b.bounds,this.minzoom,this.maxzoom)),l.postTurnstileEvent(b.tiles,this.map._requestManager._customAccessToken),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"}))),s&&s(_)})}loaded(){return this._loaded}hasTile(s){return!this.tileBounds||this.tileBounds.contains(s.canonical)}onAdd(s){this.map=s,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(s){return this._options.tiles=s,this.reload(),this}setUrl(s){return this.url=s,this._options.url=s,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return l.extend({},this._options)}loadTile(s,d){const g=this.map._requestManager.normalizeTileURL(s.tileID.canonical.url(this.tiles,this.scheme)),_={request:this.map._requestManager.transformRequest(g,l.ResourceType.Tile),data:void 0,uid:s.uid,tileID:s.tileID,tileZoom:s.tileZoom,zoom:s.tileID.overscaledZ,tileSize:this.tileSize*s.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:l.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:s.isSymbolTile};if(_.request.collectResourceTiming=this._collectResourceTiming,s.actor&&s.state!=="expired")s.state==="loading"?s.reloadCallback=d:s.request=s.actor.send("reloadTile",_,b.bind(this));else if(s.actor=this._tileWorkers[g]=this._tileWorkers[g]||this.dispatcher.getActor(),this.dispatcher.ready)s.request=s.actor.send("loadTile",_,b.bind(this),void 0,!0);else{const I=l.loadVectorTile.call({deduped:this._deduped},_,(P,O)=>{P||!O?b.call(this,P):(_.data={cacheControl:O.cacheControl,expires:O.expires,rawData:O.rawData.slice(0)},s.actor&&s.actor.send("loadTile",_,b.bind(this),void 0,!0))},!0);s.request={cancel:I}}function b(I,P){return delete s.request,s.aborted?d(null):I&&I.status!==404?d(I):(P&&P.resourceTiming&&(s.resourceTiming=P.resourceTiming),this.map._refreshExpiredTiles&&P&&s.setExpiryData(P),s.loadVectorData(P,this.map.painter),l.cacheEntryPossiblyAdded(this.dispatcher),d(null),void(s.reloadCallback&&(this.loadTile(s,s.reloadCallback),s.reloadCallback=null)))}}abortTile(s){s.request&&(s.request.cancel(),delete s.request),s.actor&&s.actor.send("abortTile",{uid:s.uid,type:this.type,source:this.id})}unloadTile(s){s.unloadVectorData(),s.actor&&s.actor.send("removeTile",{uid:s.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class We extends l.Evented{constructor(s,d,g,_){super(),this.id=s,this.dispatcher=g,this.setEventedParent(_),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=l.extend({type:"raster"},d),l.extend(this,l.pick(d,["url","scheme","tileSize"]))}load(s){this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Nt(this._options,this.map._requestManager,null,null,(d,g)=>{this._tileJSONRequest=null,this._loaded=!0,d?this.fire(new l.ErrorEvent(d)):g&&(l.extend(this,g),g.bounds&&(this.tileBounds=new jt(g.bounds,this.minzoom,this.maxzoom)),l.postTurnstileEvent(g.tiles),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"}))),s&&s(d)})}loaded(){return this._loaded}onAdd(s){this.map=s,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(s){return this._options.tiles=s,this.reload(),this}setUrl(s){return this.url=s,this._options.url=s,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return l.extend({},this._options)}hasTile(s){return!this.tileBounds||this.tileBounds.contains(s.canonical)}loadTile(s,d){const g=l.exported.devicePixelRatio>=2,_=this.map._requestManager.normalizeTileURL(s.tileID.canonical.url(this.tiles,this.scheme),g,this.tileSize);s.request=l.getImage(this.map._requestManager.transformRequest(_,l.ResourceType.Tile),(b,I,P,O)=>(delete s.request,s.aborted?(s.state="unloaded",d(null)):b?(s.state="errored",d(b)):I?(this.map._refreshExpiredTiles&&s.setExpiryData({cacheControl:P,expires:O}),s.setTexture(I,this.map.painter),s.state="loaded",l.cacheEntryPossiblyAdded(this.dispatcher),void d(null)):d(null)))}static loadTileData(s,d,g){s.setTexture(d,g)}static unloadTileData(s,d){s.texture&&d.saveTileTexture(s.texture)}abortTile(s,d){s.request&&(s.request.cancel(),delete s.request),d()}unloadTile(s,d){s.texture&&this.map.painter.saveTileTexture(s.texture),d()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}function wt(p,s,d,g,_,b,I,P){const O=[p,d,_,s,g,b,1,1,1],B=[I,P,1],$=l.adjoint([],O),[Z,oe,le]=l.transformMat3(B,B,l.transpose($,$));return l.multiply$1(O,[Z,0,0,0,oe,0,0,0,le],O)}class Yt extends l.Evented{constructor(s,d,g,_){super(),this.id=s,this.dispatcher=g,this.coordinates=d.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(_),this.options=d,this._dirty=!1}load(s,d){this._loaded=d||!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._imageRequest=l.getImage(this.map._requestManager.transformRequest(this.url,l.ResourceType.Image),(g,_)=>{if(this._imageRequest=null,this._loaded=!0,g)this.fire(new l.ErrorEvent(g));else if(_){const{HTMLImageElement:b}=l.window;this.image=_ instanceof b?l.exported.getImageData(_):_,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,s&&(this.coordinates=s),this._finishLoading()}})}loaded(){return this._loaded}updateImage(s){return this.image&&s.url?(this._imageRequest&&s.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=s.url,this.load(s.coordinates,this._loaded),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(s){this.map=s,this.load()}onRemove(){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),this.texture&&this.texture.destroy()}setCoordinates(s){this.coordinates=s,this._boundsArray=void 0;const d=s.map(l.MercatorCoordinate.fromLngLat);return this.tileID=function(g){let _=1/0,b=1/0,I=-1/0,P=-1/0;for(const Z of g)_=Math.min(_,Z.x),b=Math.min(b,Z.y),I=Math.max(I,Z.x),P=Math.max(P,Z.y);const O=Math.max(I-_,P-b),B=Math.max(0,Math.floor(-Math.log(O)/Math.LN2)),$=Math.pow(2,B);return new l.CanonicalTileID(B,Math.floor((_+I)/2*$),Math.floor((b+P)/2*$))}(d),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0}_prepareData(s){for(const O in this.tiles){const B=this.tiles[O];B.state!=="loaded"&&(B.state="loaded",B.texture=this.texture)}if(this._boundsArray)return;const d=l.tileTransform(this.tileID,this.map.transform.projection),[g,_,b,I]=this.coordinates.map(O=>{const B=d.projection.project(O[0],O[1]);return l.getTilePoint(d,B)._round()});this.perspectiveTransform=function(O,B,$,Z,oe,le,he,ue,ge,K){const se=wt(0,0,O,0,0,B,O,B),xe=wt($,Z,oe,le,he,ue,ge,K);return l.multiply$1(xe,l.adjoint(se,se),xe),[xe[6]/xe[8]*O/l.EXTENT,xe[7]/xe[8]*B/l.EXTENT]}(this.width,this.height,g.x,g.y,_.x,_.y,I.x,I.y,b.x,b.y);const P=this._boundsArray=new l.StructArrayLayout4i8;P.emplaceBack(g.x,g.y,0,0),P.emplaceBack(_.x,_.y,l.EXTENT,0),P.emplaceBack(I.x,I.y,0,l.EXTENT),P.emplaceBack(b.x,b.y,l.EXTENT,l.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=s.createVertexBuffer(P,l.boundsAttributes.members),this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const s=this.map.painter.context,d=s.gl;this._dirty&&(this.texture?this.texture.update(this.image):(this.texture=new l.Texture(s,this.image,d.RGBA),this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE)),this._dirty=!1),this._prepareData(s)}loadTile(s,d){this.tileID&&this.tileID.equals(s.tileID.canonical)?(this.tiles[String(s.tileID.wrap)]=s,s.buckets={},d(null)):(s.state="errored",d(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const Xt={vector:Je,raster:We,"raster-dem":class extends We{constructor(p,s,d,g){super(p,s,d,g),this.type="raster-dem",this.maxzoom=22,this._options=l.extend({type:"raster-dem"},s),this.encoding=s.encoding||"mapbox"}loadTile(p,s){const d=this.map._requestManager.normalizeTileURL(p.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function g(_,b){_&&(p.state="errored",s(_)),b&&(p.dem=b,p.dem.onDeserialize(),p.needsHillshadePrepare=!0,p.needsDEMTextureUpload=!0,p.state="loaded",s(null))}p.request=l.getImage(this.map._requestManager.transformRequest(d,l.ResourceType.Tile),(function(_,b,I,P){if(delete p.request,p.aborted)p.state="unloaded",s(null);else if(_)p.state="errored",s(_);else if(b){this.map._refreshExpiredTiles&&p.setExpiryData({cacheControl:I,expires:P});const O=l.window.ImageBitmap&&b instanceof l.window.ImageBitmap&&(rn==null&&(rn=l.window.OffscreenCanvas&&new l.window.OffscreenCanvas(1,1).getContext("2d")&&typeof l.window.createImageBitmap=="function"),rn),B=1-(b.width-l.prevPowerOfTwo(b.width))/2;B<1||p.neighboringTiles||(p.neighboringTiles=this._getNeighboringTiles(p.tileID));const $=O?b:l.exported.getImageData(b,B),Z={uid:p.uid,coord:p.tileID,source:this.id,rawImageData:$,encoding:this.encoding,padding:B};p.actor&&p.state!=="expired"||(p.actor=this.dispatcher.getActor(),p.actor.send("loadDEMTile",Z,g.bind(this),void 0,!0))}}).bind(this))}_getNeighboringTiles(p){const s=p.canonical,d=Math.pow(2,s.z),g=(s.x-1+d)%d,_=s.x===0?p.wrap-1:p.wrap,b=(s.x+1+d)%d,I=s.x+1===d?p.wrap+1:p.wrap,P={};return P[new l.OverscaledTileID(p.overscaledZ,_,s.z,g,s.y).key]={backfilled:!1},P[new l.OverscaledTileID(p.overscaledZ,I,s.z,b,s.y).key]={backfilled:!1},s.y>0&&(P[new l.OverscaledTileID(p.overscaledZ,_,s.z,g,s.y-1).key]={backfilled:!1},P[new l.OverscaledTileID(p.overscaledZ,p.wrap,s.z,s.x,s.y-1).key]={backfilled:!1},P[new l.OverscaledTileID(p.overscaledZ,I,s.z,b,s.y-1).key]={backfilled:!1}),s.y+1<d&&(P[new l.OverscaledTileID(p.overscaledZ,_,s.z,g,s.y+1).key]={backfilled:!1},P[new l.OverscaledTileID(p.overscaledZ,p.wrap,s.z,s.x,s.y+1).key]={backfilled:!1},P[new l.OverscaledTileID(p.overscaledZ,I,s.z,b,s.y+1).key]={backfilled:!1}),P}unloadTile(p){p.demTexture&&this.map.painter.saveTileTexture(p.demTexture),p.fbo&&(p.fbo.destroy(),delete p.fbo),p.dem&&delete p.dem,delete p.neighboringTiles,p.state="unloaded"}},geojson:class extends l.Evented{constructor(p,s,d,g){super(),this.id=p,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=d.getActor(),this.setEventedParent(g),this._data=s.data,this._options=l.extend({},s),this._collectResourceTiming=s.collectResourceTiming,s.maxzoom!==void 0&&(this.maxzoom=s.maxzoom),s.type&&(this.type=s.type),s.attribution&&(this.attribution=s.attribution),this.promoteId=s.promoteId;const _=l.EXTENT/this.tileSize;this.workerOptions=l.extend({source:this.id,cluster:s.cluster||!1,geojsonVtOptions:{buffer:(s.buffer!==void 0?s.buffer:128)*_,tolerance:(s.tolerance!==void 0?s.tolerance:.375)*_,extent:l.EXTENT,maxZoom:this.maxzoom,lineMetrics:s.lineMetrics||!1,generateId:s.generateId||!1},superclusterOptions:{maxZoom:s.clusterMaxZoom!==void 0?s.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,s.clusterMinPoints||2),extent:l.EXTENT,radius:(s.clusterRadius!==void 0?s.clusterRadius:50)*_,log:!1,generateId:s.generateId||!1},clusterProperties:s.clusterProperties,filter:s.filter},s.workerOptions)}onAdd(p){this.map=p,this.setData(this._data)}setData(p){return this._data=p,this._updateWorkerData(),this}getClusterExpansionZoom(p,s){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:p,source:this.id},s),this}getClusterChildren(p,s){return this.actor.send("geojson.getClusterChildren",{clusterId:p,source:this.id},s),this}getClusterLeaves(p,s,d,g){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:p,limit:s,offset:d},g),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new l.Event("dataloading",{dataType:"source"})),this._loaded=!1;const p=l.extend({},this.workerOptions),s=this._data;typeof s=="string"?(p.request=this.map._requestManager.transformRequest(l.exported.resolveURL(s),l.ResourceType.Source),p.request.collectResourceTiming=this._collectResourceTiming):p.data=JSON.stringify(s),this._pendingLoad=this.actor.send(`${this.type}.loadData`,p,(d,g)=>{if(this._loaded=!0,this._pendingLoad=null,d)this.fire(new l.ErrorEvent(d));else{const _={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&g&&g.resourceTiming&&g.resourceTiming[this.id]&&(_.resourceTiming=g.resourceTiming[this.id]),this.fire(new l.Event("data",_)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(p,s){const d=p.actor?"reloadTile":"loadTile";p.actor=this.actor,p.request=this.actor.send(d,{type:this.type,uid:p.uid,tileID:p.tileID,tileZoom:p.tileZoom,zoom:p.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:l.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(g,_)=>(delete p.request,p.unloadVectorData(),p.aborted?s(null):g?s(g):(p.loadVectorData(_,this.map.painter,d==="reloadTile"),s(null))),void 0,d==="loadTile")}abortTile(p){p.request&&(p.request.cancel(),delete p.request),p.aborted=!0}unloadTile(p){p.unloadVectorData(),this.actor.send("removeTile",{uid:p.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return l.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends Yt{constructor(p,s,d,g){super(p,s,d,g),this.roundZoom=!0,this.type="video",this.options=s}load(){this._loaded=!1;const p=this.options;this.urls=[];for(const s of p.urls)this.urls.push(this.map._requestManager.transformRequest(s,l.ResourceType.Source).url);l.getVideo(this.urls,(s,d)=>{this._loaded=!0,s?this.fire(new l.ErrorEvent(s)):d&&(this.video=d,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(p){if(this.video){const s=this.video.seekable;p<s.start(0)||p>s.end(0)?this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${s.start(0)} and ${s.end(0)}-second mark.`))):this.video.currentTime=p}}getVideo(){return this.video}onAdd(p){this.map||(this.map=p,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const p=this.map.painter.context,s=p.gl;this.texture?this.video.paused||(this.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE),s.texSubImage2D(s.TEXTURE_2D,0,0,0,s.RGBA,s.UNSIGNED_BYTE,this.video)):(this.texture=new l.Texture(p,this.video,s.RGBA),this.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(p)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:Yt,canvas:class extends Yt{constructor(p,s,d,g){super(p,s,d,g),s.coordinates?Array.isArray(s.coordinates)&&s.coordinates.length===4&&!s.coordinates.some(_=>!Array.isArray(_)||_.length!==2||_.some(b=>typeof b!="number"))||this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${p}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${p}`,null,'missing required property "coordinates"'))),s.animate&&typeof s.animate!="boolean"&&this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${p}`,null,'optional "animate" property must be a boolean value'))),s.canvas?typeof s.canvas=="string"||s.canvas instanceof l.window.HTMLCanvasElement||this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${p}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${p}`,null,'missing required property "canvas"'))),this.options=s,this.animate=s.animate===void 0||s.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof l.window.HTMLCanvasElement?this.options.canvas:l.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new l.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(p){this.map=p,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let p=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,p=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,p=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const s=this.map.painter.context;this.texture?(p||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new l.Texture(s,this.canvas,s.gl.RGBA,{premultiply:!0}),this._prepareData(s)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const p of[this.canvas.width,this.canvas.height])if(isNaN(p)||p<=0)return!0;return!1}},custom:class extends l.Evented{constructor(p,s,d,g){super(),this.id=p,this.type="custom",this._dataType="raster",this._dispatcher=d,this._implementation=s,this.setEventedParent(g),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new l.ErrorEvent(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new l.ErrorEvent(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new jt(this._implementation.bounds,this.minzoom,this.maxzoom)),s.update=this._update.bind(this),s.clearTiles=this._clearTiles.bind(this),s.coveringTiles=this._coveringTiles.bind(this),l.extend(this,l.pick(s,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return l.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(p){this._map=p,this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(p),this.load()}onRemove(p){this._implementation.onRemove&&this._implementation.onRemove(p)}hasTile(p){if(this._implementation.hasTile){const{x:s,y:d,z:g}=p.canonical;return this._implementation.hasTile({x:s,y:d,z:g})}return!this.tileBounds||this.tileBounds.contains(p.canonical)}loadTile(p,s){const{x:d,y:g,z:_}=p.tileID.canonical,b=new l.window.AbortController;p.request=Promise.resolve(this._implementation.loadTile({x:d,y:g,z:_},{signal:b.signal})).then((function(I){return delete p.request,p.aborted?(p.state="unloaded",s(null)):I===void 0?(p.state="errored",s(null)):I===null?(this.loadTileData(p,{width:this.tileSize,height:this.tileSize,data:null}),p.state="loaded",s(null)):function(P){return P instanceof l.window.ImageData||P instanceof l.window.HTMLCanvasElement||P instanceof l.window.ImageBitmap||P instanceof l.window.HTMLImageElement}(I)?(this.loadTileData(p,I),p.state="loaded",void s(null)):(p.state="errored",s(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)))}).bind(this)).catch(I=>{I.code!==20&&(p.state="errored",s(I))}),p.request.cancel=()=>b.abort()}loadTileData(p,s){We.loadTileData(p,s,this._map.painter)}unloadTileData(p){We.unloadTileData(p,this._map.painter)}unloadTile(p,s){if(this.unloadTileData(p),this._implementation.unloadTile){const{x:d,y:g,z:_}=p.tileID.canonical;this._implementation.unloadTile({x:d,y:g,z:_})}s()}abortTile(p,s){p.request&&p.request.cancel&&(p.request.cancel(),delete p.request),s()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(p=>({x:p.canonical.x,y:p.canonical.y,z:p.canonical.z}))}_clearTiles(){this._map.style._clearSource(this.id)}_update(){this.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"}))}}},un=function(p,s,d,g){const _=new Xt[s.type](p,s,d,g);if(_.id!==p)throw new Error(`Expected Source id to be ${p} instead of ${_.id}`);return l.bindAll(["load","abort","unload","serialize","prepare"],_),_};function ln(p,s){const d=l.identity([]);return l.scale(d,d,[.5*p.width,.5*-p.height,1]),l.translate(d,d,[1,-1,0]),l.multiply(d,d,p.calculateProjMatrix(s.toUnwrapped())),Float32Array.from(d)}function Gn(p,s,d,g,_,b,I,P=!1){const O=p.tilesIn(g,I,P);O.sort(er);const B=[];for(const Z of O)B.push({wrappedTileID:Z.tile.tileID.wrapped().key,queryResults:Z.tile.queryRenderedFeatures(s,d,p._state,Z,_,b,ln(p.transform,Z.tile.tileID),P)});const $=function(Z){const oe={},le={};for(const he of Z){const ue=he.queryResults,ge=he.wrappedTileID,K=le[ge]=le[ge]||{};for(const se in ue){const xe=ue[se],be=K[se]=K[se]||{},Re=oe[se]=oe[se]||[];for(const ze of xe)be[ze.featureIndex]||(be[ze.featureIndex]=!0,Re.push(ze))}}return oe}(B);for(const Z in $)$[Z].forEach(oe=>{const le=oe.feature,he=le.layer;he&&he.type!=="background"&&he.type!=="sky"&&(le.source=he.source,he["source-layer"]&&(le.sourceLayer=he["source-layer"]),le.state=le.id!==void 0?p.getFeatureState(he["source-layer"],le.id):{})});return $}function On(p,s){const d=p.getRenderableIds().map(b=>p.getTileByID(b)),g=[],_={};for(let b=0;b<d.length;b++){const I=d[b],P=I.tileID.canonical.key;_[P]||(_[P]=!0,I.querySourceFeatures(g,s))}return g}function er(p,s){const d=p.tileID,g=s.tileID;return d.overscaledZ-g.overscaledZ||d.canonical.y-g.canonical.y||d.wrap-g.wrap||d.canonical.x-g.canonical.x}function Zn(){return $l.workerClass!=null?new $l.workerClass:new l.window.Worker($l.workerUrl)}const Zr="mapboxgl_preloaded_worker_pool";class an{constructor(){this.active={}}acquire(s){if(!this.workers)for(this.workers=[];this.workers.length<an.workerCount;)this.workers.push(new Zn);return this.active[s]=!0,this.workers.slice()}release(s){delete this.active[s],this.numActive()===0&&(this.workers.forEach(d=>{d.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Zr]}numActive(){return Object.keys(this.active).length}}let nn;function Sn(){return nn||(nn=new an),nn}function Tr(p,s){const d={};for(const g in p)g!=="ref"&&(d[g]=p[g]);return l.refProperties.forEach(g=>{g in s&&(d[g]=s[g])}),d}function ri(p){p=p.slice();const s=Object.create(null);for(let d=0;d<p.length;d++)s[p[d].id]=p[d];for(let d=0;d<p.length;d++)"ref"in p[d]&&(p[d]=Tr(p[d],s[p[d].ref]));return p}an.workerCount=2;const En={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function Ni(p,s,d){d.push({command:En.addSource,args:[p,s[p]]})}function xo(p,s,d){s.push({command:En.removeSource,args:[p]}),d[p]=!0}function Po(p,s,d,g){xo(p,d,g),Ni(p,s,d)}function ro(p,s,d){let g;for(g in p[d])if(p[d].hasOwnProperty(g)&&g!=="data"&&!w(p[d][g],s[d][g]))return!1;for(g in s[d])if(s[d].hasOwnProperty(g)&&g!=="data"&&!w(p[d][g],s[d][g]))return!1;return!0}function Hr(p,s,d,g,_,b){let I;for(I in s=s||{},p=p||{})p.hasOwnProperty(I)&&(w(p[I],s[I])||d.push({command:b,args:[g,I,s[I],_]}));for(I in s)s.hasOwnProperty(I)&&!p.hasOwnProperty(I)&&(w(p[I],s[I])||d.push({command:b,args:[g,I,s[I],_]}))}function ji(p){return p.id}function pa(p,s){return p[s.id]=s,p}class io{constructor(s,d){this.reset(s,d)}reset(s,d){this.points=s||[],this._distances=[0];for(let g=1;g<this.points.length;g++)this._distances[g]=this._distances[g-1]+this.points[g].dist(this.points[g-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(d||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(s){if(this.points.length===1)return this.points[0];s=l.clamp(s,0,1);let d=1,g=this._distances[d];const _=s*this.paddedLength+this.padding;for(;g<_&&d<this._distances.length;)g=this._distances[++d];const b=d-1,I=this._distances[b],P=g-I,O=P>0?(_-I)/P:0;return this.points[b].mult(1-O).add(this.points[d].mult(O))}}class oo{constructor(s,d,g){const _=this.boxCells=[],b=this.circleCells=[];this.xCellCount=Math.ceil(s/g),this.yCellCount=Math.ceil(d/g);for(let I=0;I<this.xCellCount*this.yCellCount;I++)_.push([]),b.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=s,this.height=d,this.xScale=this.xCellCount/s,this.yScale=this.yCellCount/d,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(s,d,g,_,b){this._forEachCell(d,g,_,b,this._insertBoxCell,this.boxUid++),this.boxKeys.push(s),this.bboxes.push(d),this.bboxes.push(g),this.bboxes.push(_),this.bboxes.push(b)}insertCircle(s,d,g,_){this._forEachCell(d-_,g-_,d+_,g+_,this._insertCircleCell,this.circleUid++),this.circleKeys.push(s),this.circles.push(d),this.circles.push(g),this.circles.push(_)}_insertBoxCell(s,d,g,_,b,I){this.boxCells[b].push(I)}_insertCircleCell(s,d,g,_,b,I){this.circleCells[b].push(I)}_query(s,d,g,_,b,I){if(g<0||s>this.width||_<0||d>this.height)return!b&&[];const P=[];if(s<=0&&d<=0&&this.width<=g&&this.height<=_){if(b)return!0;for(let O=0;O<this.boxKeys.length;O++)P.push({key:this.boxKeys[O],x1:this.bboxes[4*O],y1:this.bboxes[4*O+1],x2:this.bboxes[4*O+2],y2:this.bboxes[4*O+3]});for(let O=0;O<this.circleKeys.length;O++){const B=this.circles[3*O],$=this.circles[3*O+1],Z=this.circles[3*O+2];P.push({key:this.circleKeys[O],x1:B-Z,y1:$-Z,x2:B+Z,y2:$+Z})}return I?P.filter(I):P}return this._forEachCell(s,d,g,_,this._queryCell,P,{hitTest:b,seenUids:{box:{},circle:{}}},I),b?P.length>0:P}_queryCircle(s,d,g,_,b){const I=s-g,P=s+g,O=d-g,B=d+g;if(P<0||I>this.width||B<0||O>this.height)return!_&&[];const $=[];return this._forEachCell(I,O,P,B,this._queryCellCircle,$,{hitTest:_,circle:{x:s,y:d,radius:g},seenUids:{box:{},circle:{}}},b),_?$.length>0:$}query(s,d,g,_,b){return this._query(s,d,g,_,!1,b)}hitTest(s,d,g,_,b){return this._query(s,d,g,_,!0,b)}hitTestCircle(s,d,g,_){return this._queryCircle(s,d,g,!0,_)}_queryCell(s,d,g,_,b,I,P,O){const B=P.seenUids,$=this.boxCells[b];if($!==null){const oe=this.bboxes;for(const le of $)if(!B.box[le]){B.box[le]=!0;const he=4*le;if(s<=oe[he+2]&&d<=oe[he+3]&&g>=oe[he+0]&&_>=oe[he+1]&&(!O||O(this.boxKeys[le]))){if(P.hitTest)return I.push(!0),!0;I.push({key:this.boxKeys[le],x1:oe[he],y1:oe[he+1],x2:oe[he+2],y2:oe[he+3]})}}}const Z=this.circleCells[b];if(Z!==null){const oe=this.circles;for(const le of Z)if(!B.circle[le]){B.circle[le]=!0;const he=3*le;if(this._circleAndRectCollide(oe[he],oe[he+1],oe[he+2],s,d,g,_)&&(!O||O(this.circleKeys[le]))){if(P.hitTest)return I.push(!0),!0;{const ue=oe[he],ge=oe[he+1],K=oe[he+2];I.push({key:this.circleKeys[le],x1:ue-K,y1:ge-K,x2:ue+K,y2:ge+K})}}}}}_queryCellCircle(s,d,g,_,b,I,P,O){const B=P.circle,$=P.seenUids,Z=this.boxCells[b];if(Z!==null){const le=this.bboxes;for(const he of Z)if(!$.box[he]){$.box[he]=!0;const ue=4*he;if(this._circleAndRectCollide(B.x,B.y,B.radius,le[ue+0],le[ue+1],le[ue+2],le[ue+3])&&(!O||O(this.boxKeys[he])))return I.push(!0),!0}}const oe=this.circleCells[b];if(oe!==null){const le=this.circles;for(const he of oe)if(!$.circle[he]){$.circle[he]=!0;const ue=3*he;if(this._circlesCollide(le[ue],le[ue+1],le[ue+2],B.x,B.y,B.radius)&&(!O||O(this.circleKeys[he])))return I.push(!0),!0}}}_forEachCell(s,d,g,_,b,I,P,O){const B=this._convertToXCellCoord(s),$=this._convertToYCellCoord(d),Z=this._convertToXCellCoord(g),oe=this._convertToYCellCoord(_);for(let le=B;le<=Z;le++)for(let he=$;he<=oe;he++)if(b.call(this,s,d,g,_,this.xCellCount*he+le,I,P,O))return}_convertToXCellCoord(s){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(s*this.xScale)))}_convertToYCellCoord(s){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(s*this.yScale)))}_circlesCollide(s,d,g,_,b,I){const P=_-s,O=b-d,B=g+I;return B*B>P*P+O*O}_circleAndRectCollide(s,d,g,_,b,I,P){const O=(I-_)/2,B=Math.abs(s-(_+O));if(B>O+g)return!1;const $=(P-b)/2,Z=Math.abs(d-(b+$));if(Z>$+g)return!1;if(B<=O||Z<=$)return!0;const oe=B-O,le=Z-$;return oe*oe+le*le<=g*g}}const _i={unknown:0,flipRequired:1,flipNotRequired:2},Oi=Math.tan(85*Math.PI/180);function nt(p,s,d,g,_,b,I){const P=l.create();if(d)if(b.name==="globe"){const O=l.calculateGlobeLabelMatrix(_,s);l.multiply(P,P,O)}else{const O=ee([],I);P[0]=O[0],P[1]=O[1],P[4]=O[2],P[5]=O[3],g||l.rotateZ(P,P,_.angle)}else l.multiply(P,_.labelPlaneMatrix,p);return P}function Si(p,s,d,g,_,b,I){const P=nt(p,s,d,g,_,b,I);return b.name==="globe"&&d||(P[2]=P[6]=P[10]=P[14]=0),P}function gr(p,s,d,g,_,b,I){if(d){if(b.name==="globe"){const P=nt(p,s,d,g,_,b,I);return l.invert(P,P),l.multiply(P,p,P),P}{const P=l.clone(p),O=l.identity([]);return O[0]=I[0],O[1]=I[1],O[4]=I[2],O[5]=I[3],l.multiply(P,P,O),g||l.rotateZ(P,P,-_.angle),P}}return _.glCoordMatrix}function pr(p,s,d,g){const _=[p,s,d,1];d?l.transformMat4$1(_,_,g):In(_,_,g);const b=_[3];return _[0]/=b,_[1]/=b,_[2]/=b,_}function Xo(p,s){return Math.min(.5+p/s*.5,1.5)}function Tn(p,s){const d=p[0]/p[3],g=p[1]/p[3];return d>=-s[0]&&d<=s[0]&&g>=-s[1]&&g<=s[1]}function Pn(p,s,d,g,_,b,I,P,O,B){const $=d.transform,Z=g?p.textSizeData:p.iconSizeData,oe=l.evaluateSizeForZoom(Z,d.transform.zoom),le=$.projection.name==="globe",he=[256/d.width*2+1,256/d.height*2+1],ue=g?p.text.dynamicLayoutVertexArray:p.icon.dynamicLayoutVertexArray;ue.clear();let ge=null;le&&(ge=g?p.text.globeExtVertexArray:p.icon.globeExtVertexArray);const K=p.lineVertexArray,se=g?p.text.placedSymbolArray:p.icon.placedSymbolArray,xe=d.transform.width/d.transform.height;let be,Re=!1;for(let ze=0;ze<se.length;ze++){const Oe=se.get(ze),{numGlyphs:Ve,writingMode:Ue}=Oe;if(Ue!==l.WritingMode.vertical||Re||be===l.WritingMode.horizontal||(Re=!0),be=Ue,(Oe.hidden||Ue===l.WritingMode.vertical)&&!Re){Kr(Ve,ue);continue}Re=!1;const Ke=new l.Point(Oe.tileAnchorX,Oe.tileAnchorY);let{x:Pt,y:qe,z:ht}=$.projection.projectTilePoint(Ke.x,Ke.y,B.canonical);if(O){const[Rn,en,_n]=O(Ke);Pt+=Rn,qe+=en,ht+=_n}const et=[Pt,qe,ht,1];if(l.transformMat4$1(et,et,s),!Tn(et,he)){Kr(Ve,ue);continue}const Et=Xo(d.transform.cameraToCenterDistance,et[3]),Xe=l.evaluateSizeForFeature(Z,oe,Oe),dt=I?Xe/Et:Xe*Et,zt=pr(Pt,qe,ht,_);if(zt[3]<=0){Kr(Ve,ue);continue}let vt={};const kt=I?null:O,dn=Ot(Oe,dt,!1,P,s,_,b,p.glyphOffsetArray,K,ue,ge,zt,Ke,vt,xe,kt,$.projection,B,I);Re=dn.useVertical,kt&&dn.needsFlipping&&(vt={}),(dn.notEnoughRoom||Re||dn.needsFlipping&&Ot(Oe,dt,!0,P,s,_,b,p.glyphOffsetArray,K,ue,ge,zt,Ke,vt,xe,kt,$.projection,B,I).notEnoughRoom)&&Kr(Ve,ue)}g?(p.text.dynamicLayoutVertexBuffer.updateData(ue),ge&&p.text.globeExtVertexBuffer.updateData(ge)):(p.icon.dynamicLayoutVertexBuffer.updateData(ue),ge&&p.icon.globeExtVertexBuffer.updateData(ge))}function Xr(p,s,d,g,_,b,I,P,O,B,$,Z,oe,le,he,ue){const{lineStartIndex:ge,glyphStartIndex:K,segment:se}=P,xe=K+P.numGlyphs,be=ge+P.lineLength,Re=s.getoffsetX(K),ze=s.getoffsetX(xe-1),Oe=Qr(p*Re,d,g,_,b,I,se,ge,be,O,B,$,Z,oe,!0,le,he,ue);if(!Oe)return null;const Ve=Qr(p*ze,d,g,_,b,I,se,ge,be,O,B,$,Z,oe,!0,le,he,ue);return Ve?{first:Oe,last:Ve}:null}function Gr(p,s,d,g){return p===l.WritingMode.horizontal&&Math.abs(g)>Math.abs(d)?{useVertical:!0}:p===l.WritingMode.vertical?g>0?{needsFlipping:!0}:null:s!==_i.unknown&&function(_,b){return _===0||Math.abs(b/_)>Oi}(d,g)?s===_i.flipRequired?{needsFlipping:!0}:null:d<0?{needsFlipping:!0}:null}function Ot(p,s,d,g,_,b,I,P,O,B,$,Z,oe,le,he,ue,ge,K,se){const xe=s/24,be=p.lineOffsetX*xe,Re=p.lineOffsetY*xe,{lineStartIndex:ze,glyphStartIndex:Oe,numGlyphs:Ve,segment:Ue,writingMode:Ke,flipState:Pt}=p,qe=ze+p.lineLength,ht=et=>{if($){const[zt,vt,kt]=et.up,dn=B.length;l.updateGlobeVertexNormal($,dn+0,zt,vt,kt),l.updateGlobeVertexNormal($,dn+1,zt,vt,kt),l.updateGlobeVertexNormal($,dn+2,zt,vt,kt),l.updateGlobeVertexNormal($,dn+3,zt,vt,kt)}const[Et,Xe,dt]=et.point;l.addDynamicAttributes(B,Et,Xe,dt,et.angle)};if(Ve>1){const et=Xr(xe,P,be,Re,d,Z,oe,p,O,b,le,ue,!1,ge,K,se);if(!et)return{notEnoughRoom:!0};if(g&&!d){let[Et,Xe,dt]=et.first.point,[zt,vt,kt]=et.last.point;[Et,Xe]=pr(Et,Xe,dt,I),[zt,vt]=pr(zt,vt,kt,I);const dn=Gr(Ke,Pt,(zt-Et)*he,vt-Xe);if(p.flipState=dn&&dn.needsFlipping?_i.flipRequired:_i.flipNotRequired,dn)return dn}ht(et.first);for(let Et=Oe+1;Et<Oe+Ve-1;Et++){const Xe=Qr(xe*P.getoffsetX(Et),be,Re,d,Z,oe,Ue,ze,qe,O,b,le,ue,!1,!1,ge,K,se);if(!Xe)return B.length-=4*(Et-Oe),{notEnoughRoom:!0};ht(Xe)}ht(et.last)}else{if(g&&!d){const Et=pr(oe.x,oe.y,0,_),Xe=ze+Ue+1,dt=new l.Point(O.getx(Xe),O.gety(Xe)),zt=pr(dt.x,dt.y,0,_),vt=zt[3]>0?zt:bn(oe,dt,Et,1,_,void 0,ge,K.canonical),kt=Gr(Ke,Pt,(vt[0]-Et[0])*he,vt[1]-Et[1]);if(p.flipState=kt&&kt.needsFlipping?_i.flipRequired:_i.flipNotRequired,kt)return kt}const et=Qr(xe*P.getoffsetX(Oe),be,Re,d,Z,oe,Ue,ze,qe,O,b,le,ue,!1,!1,ge,K,se);if(!et)return{notEnoughRoom:!0};ht(et)}return{}}function xn(p,s,d,g,_){const{x:b,y:I,z:P}=g.projectTilePoint(p.x,p.y,s);if(!_)return pr(b,I,P,d);const[O,B,$]=_(p);return pr(b+O,I+B,P+$,d)}function bn(p,s,d,g,_,b,I,P){const O=xn(p.sub(s)._unit()._add(p),P,_,I,b);return l.sub(O,d,O),l.normalize(O,O),l.scaleAndAdd(O,d,O,g)}function Qr(p,s,d,g,_,b,I,P,O,B,$,Z,oe,le,he,ue,ge,K){const se=g?p-s:p+s;let xe=se>0?1:-1,be=0;g&&(xe*=-1,be=Math.PI),xe<0&&(be+=Math.PI);let Re=P+I+(xe>0?0:1)|0,ze=_,Oe=_,Ve=0,Ue=0;const Ke=Math.abs(se),Pt=[],qe=[];let ht=b,et=ht;const Et=()=>bn(et,ht,Oe,Ke-Ve+1,$,oe,ue,ge.canonical);for(;Ve+Ue<=Ke;){if(Re+=xe,Re<P||Re>=O)return null;if(Oe=ze,et=ht,Pt.push(Oe),le&&qe.push(et),ht=new l.Point(B.getx(Re),B.gety(Re)),ze=Z[Re],!ze){const _n=xn(ht,ge.canonical,$,ue,oe);ze=_n[3]>0?Z[Re]=_n:Et()}Ve+=Ue,Ue=l.distance(Oe,ze)}he&&oe&&(Z[Re]&&(ze=Et(),Ue=l.distance(Oe,ze)),Z[Re]=ze);const Xe=(Ke-Ve)/Ue,dt=ht.sub(et)._mult(Xe)._add(et),zt=l.sub([],ze,Oe),vt=l.scaleAndAdd([],Oe,zt,Xe);let kt=[0,0,1],dn=zt[0],Rn=zt[1];if(K&&(kt=ue.upVector(ge.canonical,dt.x,dt.y),kt[0]!==0||kt[1]!==0||kt[2]!==1)){const _n=[kt[2],0,-kt[0]],Hn=l.cross([],kt,_n);l.normalize(_n,_n),l.normalize(Hn,Hn),dn=l.dot(zt,_n),Rn=l.dot(zt,Hn)}if(d){const _n=l.cross([],kt,zt);l.normalize(_n,_n),l.scaleAndAdd(vt,vt,_n,d*xe)}const en=be+Math.atan2(Rn,dn);return Pt.push(vt),le&&qe.push(dt),{point:vt,angle:en,path:Pt,tilePath:qe,up:kt}}function Kr(p,s){const d=s.length,g=d+4*p;s.resize(g),s.float32.fill(-1/0,4*d,4*g)}function In(p,s,d){const g=s[0],_=s[1];return p[0]=d[0]*g+d[4]*_+d[12],p[1]=d[1]*g+d[5]*_+d[13],p[3]=d[3]*g+d[7]*_+d[15],p}const Br=100;class Ao{constructor(s,d,g=new oo(s.width+200,s.height+200,25),_=new oo(s.width+200,s.height+200,25)){this.transform=s,this.grid=g,this.ignoredGrid=_,this.pitchfactor=Math.cos(s._pitch)*s.cameraToCenterDistance,this.screenRightBoundary=s.width+Br,this.screenBottomBoundary=s.height+Br,this.gridRightBoundary=s.width+200,this.gridBottomBoundary=s.height+200,this.fogState=d}placeCollisionBox(s,d,g,_,b,I,P,O){let B=g.projectedAnchorX,$=g.projectedAnchorY,Z=g.projectedAnchorZ;const oe=g.elevation,le=g.tileID,he=s.getProjection();if(oe&&le){const[ze,Oe,Ve]=he.upVector(le.canonical,g.tileAnchorX,g.tileAnchorY),Ue=he.upVectorScale(le.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;B+=ze*oe*Ue,$+=Oe*oe*Ue,Z+=Ve*oe*Ue}const ue=this.projectAndGetPerspectiveRatio(P,B,$,Z,g.tileID,he.name==="globe"||!!oe||this.transform.pitch>0,he),ge=I*ue.perspectiveRatio,K=(g.x1*d+_.x-g.padding)*ge+ue.point.x,se=(g.y1*d+_.y-g.padding)*ge+ue.point.y,xe=(g.x2*d+_.x+g.padding)*ge+ue.point.x,be=(g.y2*d+_.y+g.padding)*ge+ue.point.y,Re=ue.perspectiveRatio<=.55||ue.occluded;return!this.isInsideGrid(K,se,xe,be)||!b&&this.grid.hitTest(K,se,xe,be,O)||Re?{box:[],offscreen:!1,occluded:ue.occluded}:{box:[K,se,xe,be],offscreen:this.isOffscreen(K,se,xe,be),occluded:!1}}placeCollisionCircles(s,d,g,_,b,I,P,O,B,$,Z,oe,le,he,ue){const ge=[],K=this.transform.elevation,se=s.getProjection(),xe=K?K.getAtTileOffsetFunc(ue,this.transform.center.lat,this.transform.worldSize,se):null,be=new l.Point(g.tileAnchorX,g.tileAnchorY);let{x:Re,y:ze,z:Oe}=se.projectTilePoint(be.x,be.y,ue.canonical);if(xe){const[dt,zt,vt]=xe(be);Re+=dt,ze+=zt,Oe+=vt}const Ve=se.name==="globe",Ue=this.projectAndGetPerspectiveRatio(P,Re,ze,Oe,ue,Ve||!!K||this.transform.pitch>0,se),{perspectiveRatio:Ke}=Ue,Pt=(Z?I/Ke:I*Ke)/l.ONE_EM,qe=pr(Re,ze,Oe,O),ht=Ue.signedDistanceFromCamera>0?Xr(Pt,b,g.lineOffsetX*Pt,g.lineOffsetY*Pt,!1,qe,be,g,_,O,{},K&&!Z?xe:null,Z&&!!K,se,ue,Z):null;let et=!1,Et=!1,Xe=!0;if(ht&&!Ue.occluded){const dt=.5*le*Ke+he,zt=new l.Point(-100,-100),vt=new l.Point(this.screenRightBoundary,this.screenBottomBoundary),kt=new io,{first:dn,last:Rn}=ht,en=dn.path.length;let _n=[];for(let cn=en-1;cn>=1;cn--)_n.push(dn.path[cn]);for(let cn=1;cn<Rn.path.length;cn++)_n.push(Rn.path[cn]);const Hn=2.5*dt;B&&(_n=_n.map(([cn,ur,vr],yr)=>(xe&&!Ve&&(vr=xe(yr<en-1?dn.tilePath[en-1-yr]:Rn.tilePath[yr-en+2])[2]),pr(cn,ur,vr,B))),_n.some(cn=>cn[3]<=0)&&(_n=[]));let Un=[];if(_n.length>0){let cn=1/0,ur=-1/0,vr=1/0,yr=-1/0;for(const _r of _n)cn=Math.min(cn,_r[0]),vr=Math.min(vr,_r[1]),ur=Math.max(ur,_r[0]),yr=Math.max(yr,_r[1]);ur>=zt.x&&cn<=vt.x&&yr>=zt.y&&vr<=vt.y&&(Un=[_n.map(_r=>new l.Point(_r[0],_r[1]))],(cn<zt.x||ur>vt.x||vr<zt.y||yr>vt.y)&&(Un=l.clipLine(Un,zt.x,zt.y,vt.x,vt.y)))}for(const cn of Un){kt.reset(cn,.25*dt);let ur=0;ur=kt.length<=.5*dt?1:Math.ceil(kt.paddedLength/Hn)+1;for(let vr=0;vr<ur;vr++){const yr=vr/Math.max(ur-1,1),_r=kt.lerp(yr),Hi=_r.x+Br,Ti=_r.y+Br;ge.push(Hi,Ti,dt,0);const Lo=Hi-dt,wa=Ti-dt,jr=Hi+dt,xr=Ti+dt;if(Xe=Xe&&this.isOffscreen(Lo,wa,jr,xr),Et=Et||this.isInsideGrid(Lo,wa,jr,xr),!d&&this.grid.hitTestCircle(Hi,Ti,dt,oe)&&(et=!0,!$))return{circles:[],offscreen:!1,collisionDetected:et,occluded:!1}}}}return{circles:!$&&et||!Et?[]:ge,offscreen:Xe,collisionDetected:et,occluded:Ue.occluded}}queryRenderedSymbols(s){if(s.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const d=[];let g=1/0,_=1/0,b=-1/0,I=-1/0;for(const $ of s){const Z=new l.Point($.x+Br,$.y+Br);g=Math.min(g,Z.x),_=Math.min(_,Z.y),b=Math.max(b,Z.x),I=Math.max(I,Z.y),d.push(Z)}const P=this.grid.query(g,_,b,I).concat(this.ignoredGrid.query(g,_,b,I)),O={},B={};for(const $ of P){const Z=$.key;if(O[Z.bucketInstanceId]===void 0&&(O[Z.bucketInstanceId]={}),O[Z.bucketInstanceId][Z.featureIndex])continue;const oe=[new l.Point($.x1,$.y1),new l.Point($.x2,$.y1),new l.Point($.x2,$.y2),new l.Point($.x1,$.y2)];l.polygonIntersectsPolygon(d,oe)&&(O[Z.bucketInstanceId][Z.featureIndex]=!0,B[Z.bucketInstanceId]===void 0&&(B[Z.bucketInstanceId]=[]),B[Z.bucketInstanceId].push(Z.featureIndex))}return B}insertCollisionBox(s,d,g,_,b){(d?this.ignoredGrid:this.grid).insert({bucketInstanceId:g,featureIndex:_,collisionGroupID:b},s[0],s[1],s[2],s[3])}insertCollisionCircles(s,d,g,_,b){const I=d?this.ignoredGrid:this.grid,P={bucketInstanceId:g,featureIndex:_,collisionGroupID:b};for(let O=0;O<s.length;O+=4)I.insertCircle(P,s[O],s[O+1],s[O+2])}projectAndGetPerspectiveRatio(s,d,g,_,b,I,P){const O=[d,g,_,1];let B=!1;_||this.transform.pitch>0?(l.transformMat4$1(O,O,s),this.fogState&&b&&P.name!=="globe"&&(B=function(oe,le,he,ue,ge,K){const se=K.calculateFogTileMatrix(ge),xe=[le,he,ue];return l.transformMat4(xe,xe,se),Fe(oe,xe,K.pitch,K._fov)}(this.fogState,d,g,_,b.toUnwrapped(),this.transform)>.9)):In(O,O,s);const $=O[3];return{point:new l.Point((O[0]/$+1)/2*this.transform.width+Br,(-O[1]/$+1)/2*this.transform.height+Br),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(P)/$*.5,1.5),signedDistanceFromCamera:$,occluded:I&&O[2]>$||B}}isOffscreen(s,d,g,_){return g<Br||s>=this.screenRightBoundary||_<Br||d>this.screenBottomBoundary}isInsideGrid(s,d,g,_){return g>=0&&s<this.gridRightBoundary&&_>=0&&d<this.gridBottomBoundary}getViewportMatrix(){const s=l.identity([]);return l.translate(s,s,[-100,-100,0]),s}}function Ro(p,s,d){const g=s.createTileMatrix(p,p.worldSize,d.toUnwrapped());return l.multiply(new Float32Array(16),p.projMatrix,g)}function Ui(p,s,d){if(s.projection.name===d.projection.name)return p.projMatrix;const g=d.clone();return g.setProjection(s.projection),Ro(g,s.getProjection(),p)}function Xn(p,s,d){return s.name===d.projection.name?p.projMatrix:Ro(d,s,p)}class Ns{constructor(s,d,g,_){this.opacity=s?Math.max(0,Math.min(1,s.opacity+(s.placed?d:-d))):_&&g?1:0,this.placed=g}isHidden(){return this.opacity===0&&!this.placed}}class xi{constructor(s,d,g,_,b,I=!1){this.text=new Ns(s?s.text:null,d,g,b),this.icon=new Ns(s?s.icon:null,d,_,b),this.clipped=I}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class bo{constructor(s,d,g,_=!1){this.text=s,this.icon=d,this.skipFade=g,this.clipped=_}}class Oo{constructor(){this.invProjMatrix=l.create(),this.viewportMatrix=l.create(),this.circles=[]}}class ma{constructor(s,d,g,_,b){this.bucketInstanceId=s,this.featureIndex=d,this.sourceLayerIndex=g,this.bucketIndex=_,this.tileID=b}}class ys{constructor(s){this.crossSourceCollisions=s,this.maxGroupID=0,this.collisionGroups={}}get(s){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[s]){const d=++this.maxGroupID;this.collisionGroups[s]={ID:d,predicate:g=>g.collisionGroupID===d}}return this.collisionGroups[s]}}function Ko(p,s,d,g,_){const{horizontalAlign:b,verticalAlign:I}=l.getAnchorAlignment(p),P=-(b-.5)*s,O=-(I-.5)*d,B=l.evaluateVariableOffset(p,g);return new l.Point(P+B[0]*_,O+B[1]*_)}function ga(p,s,d,g,_){const b=new l.Point(p,s);return d&&b._rotate(g?_:-_),b}class _s{constructor(s,d,g,_,b){this.transform=s.clone(),this.projection=s.projection.name,this.collisionIndex=new Ao(this.transform,b),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=d,this.retainedQueryData={},this.collisionGroups=new ys(g),this.collisionCircleArrays={},this.prevPlacement=_,_&&(_.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(s,d,g,_){const b=g.getBucket(d),I=g.latestFeatureIndex;if(!b||!I||d.id!==b.layerIds[0])return;const P=b.layers[0].layout,O=g.collisionBoxArray,B=Math.pow(2,this.transform.zoom-g.tileID.overscaledZ),$=g.tileSize/l.EXTENT,Z=g.tileID.toUnwrapped();this.transform.setProjection(b.projection);const oe=(le=g.tileID,he=b.getProjection(),ue=this.transform,he.name===this.projection?ue.calculateProjMatrix(le.toUnwrapped()):Ro(ue,he,le));var le,he,ue;const ge=P.get("text-pitch-alignment")==="map",K=P.get("text-rotation-alignment")==="map";d.compileFilter();const se=d.dynamicFilter(),xe=d.dynamicFilterNeedsFeature(),be=this.transform.calculatePixelsToTileUnitsMatrix(g),Re=Si(oe,g.tileID.canonical,ge,K,this.transform,b.getProjection(),be);let ze=null;if(ge){const Ue=gr(oe,g.tileID.canonical,ge,K,this.transform,b.getProjection(),be);ze=l.multiply([],this.transform.labelPlaneMatrix,Ue)}let Oe=null;se&&g.latestFeatureIndex&&(Oe={unwrappedTileID:Z,dynamicFilter:se,dynamicFilterNeedsFeature:xe,featureIndex:g.latestFeatureIndex}),this.retainedQueryData[b.bucketInstanceId]=new ma(b.bucketInstanceId,I,b.sourceLayerIndex,b.index,g.tileID);const Ve={bucket:b,layout:P,posMatrix:oe,textLabelPlaneMatrix:Re,labelToScreenMatrix:ze,clippingData:Oe,scale:B,textPixelRatio:$,holdingForFade:g.holdingForFade(),collisionBoxArray:O,partiallyEvaluatedTextSize:l.evaluateSizeForZoom(b.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:l.evaluateSizeForZoom(b.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(b.sourceID)};if(_)for(const Ue of b.sortKeyRanges){const{sortKey:Ke,symbolInstanceStart:Pt,symbolInstanceEnd:qe}=Ue;s.push({sortKey:Ke,symbolInstanceStart:Pt,symbolInstanceEnd:qe,parameters:Ve})}else s.push({symbolInstanceStart:0,symbolInstanceEnd:b.symbolInstances.length,parameters:Ve})}attemptAnchorPlacement(s,d,g,_,b,I,P,O,B,$,Z,oe,le,he,ue,ge,K,se){const{textOffset0:xe,textOffset1:be,crossTileID:Re}=oe,ze=[xe,be],Oe=Ko(s,g,_,ze,b),Ve=this.collisionIndex.placeCollisionBox(he,b,d,ga(Oe.x,Oe.y,I,P,this.transform.angle),Z,O,B,$.predicate);if(ge){const Ue=he.getSymbolInstanceIconSize(se,this.transform.zoom,oe.placedIconSymbolIndex);if(this.collisionIndex.placeCollisionBox(he,Ue,ge,ga(Oe.x,Oe.y,I,P,this.transform.angle),Z,O,B,$.predicate).box.length===0)return}if(Ve.box.length>0){let Ue;return this.prevPlacement&&this.prevPlacement.variableOffsets[Re]&&this.prevPlacement.placements[Re]&&this.prevPlacement.placements[Re].text&&(Ue=this.prevPlacement.variableOffsets[Re].anchor),this.variableOffsets[Re]={textOffset:ze,width:g,height:_,anchor:s,textScale:b,prevAnchor:Ue},this.markUsedJustification(he,s,oe,ue),he.allowVerticalPlacement&&(this.markUsedOrientation(he,ue,oe),this.placedOrientations[Re]=ue),{shift:Oe,placedGlyphBoxes:Ve}}}placeLayerBucketPart(s,d,g,_){const{bucket:b,layout:I,posMatrix:P,textLabelPlaneMatrix:O,labelToScreenMatrix:B,clippingData:$,textPixelRatio:Z,holdingForFade:oe,collisionBoxArray:le,partiallyEvaluatedTextSize:he,partiallyEvaluatedIconSize:ue,collisionGroup:ge}=s.parameters,K=I.get("text-optional"),se=I.get("icon-optional"),xe=I.get("text-allow-overlap"),be=I.get("icon-allow-overlap"),Re=I.get("text-rotation-alignment")==="map",ze=I.get("text-pitch-alignment")==="map",Oe=I.get("icon-text-fit")!=="none",Ve=I.get("symbol-z-order")==="viewport-y";this.transform.setProjection(b.projection);let Ue=xe&&(be||!b.hasIconData()||se),Ke=be&&(xe||!b.hasTextData()||K);!b.collisionArrays&&le&&b.deserializeCollisionBoxes(le),g&&_&&b.updateCollisionDebugBuffers(this.transform.zoom,le);const Pt=(qe,ht,et)=>{const{crossTileID:Et,numVerticalGlyphVertices:Xe}=qe;if($){const jr={zoom:this.transform.zoom,pitch:this.transform.pitch};let xr=null;if($.dynamicFilterNeedsFeature){const rr=this.retainedQueryData[b.bucketInstanceId];xr=$.featureIndex.loadFeature({featureIndex:qe.featureIndex,bucketIndex:rr.bucketIndex,sourceLayerIndex:rr.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,$.dynamicFilter)(jr,xr,this.retainedQueryData[b.bucketInstanceId].tileID.canonical,new l.Point(qe.tileAnchorX,qe.tileAnchorY),this.transform.calculateDistanceTileData($.unwrappedTileID)))return this.placements[Et]=new bo(!1,!1,!1,!0),void d.add(Et)}if(d.has(Et))return;if(oe)return void(this.placements[Et]=new bo(!1,!1,!1));let dt=!1,zt=!1,vt=!0,kt=!1,dn=!1,Rn=null,en={box:null,offscreen:null,occluded:null},_n={box:null,offscreen:null,occluded:null},Hn=null,Un=null,cn=null,ur=0,vr=0,yr=0;et.textFeatureIndex?ur=et.textFeatureIndex:qe.useRuntimeCollisionCircles&&(ur=qe.featureIndex),et.verticalTextFeatureIndex&&(vr=et.verticalTextFeatureIndex);const _r=jr=>{jr.tileID=this.retainedQueryData[b.bucketInstanceId].tileID;const xr=this.transform.elevation;(xr||jr.elevation)&&(jr.elevation=xr?xr.getAtTileOffset(jr.tileID,jr.tileAnchorX,jr.tileAnchorY):0)},Hi=et.textBox;if(Hi){_r(Hi);const jr=rr=>{let ai=l.WritingMode.horizontal;if(b.allowVerticalPlacement&&!rr&&this.prevPlacement){const Ki=this.prevPlacement.placedOrientations[Et];Ki&&(this.placedOrientations[Et]=Ki,ai=Ki,this.markUsedOrientation(b,ai,qe))}return ai},xr=(rr,ai)=>{if(b.allowVerticalPlacement&&Xe>0&&et.verticalTextBox){for(const Ki of b.writingModes)if(Ki===l.WritingMode.vertical?(en=ai(),_n=en):en=rr(),en&&en.box&&en.box.length)break}else en=rr()};if(I.get("text-variable-anchor")){let rr=I.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[Et]){const kr=this.prevPlacement.variableOffsets[Et];rr.indexOf(kr.anchor)>0&&(rr=rr.filter(ao=>ao!==kr.anchor),rr.unshift(kr.anchor))}const ai=(kr,ao,id)=>{const Zs=b.getSymbolInstanceTextSize(he,qe,this.transform.zoom,ht),jc=(kr.x2-kr.x1)*Zs+2*kr.padding,Wa=(kr.y2-kr.y1)*Zs+2*kr.padding,Es=Oe&&!be?ao:null;Es&&_r(Es);let Xs={box:[],offscreen:!1,occluded:!1};const od=xe?2*rr.length:rr.length;for(let Uc=0;Uc<od;++Uc){const xf=this.attemptAnchorPlacement(rr[Uc%rr.length],kr,jc,Wa,Zs,Re,ze,Z,P,ge,Uc>=rr.length,qe,ht,b,id,Es,he,ue);if(xf&&(Xs=xf.placedGlyphBoxes,Xs&&Xs.box&&Xs.box.length)){dt=!0,Rn=xf.shift;break}}return Xs};xr(()=>ai(Hi,et.iconBox,l.WritingMode.horizontal),()=>{const kr=et.verticalTextBox;return kr&&_r(kr),b.allowVerticalPlacement&&!(en&&en.box&&en.box.length)&&Xe>0&&kr?ai(kr,et.verticalIconBox,l.WritingMode.vertical):{box:null,offscreen:null,occluded:null}}),en&&(dt=en.box,vt=en.offscreen,kt=en.occluded);const Ki=jr(!(!en||!en.box));if(!dt&&this.prevPlacement){const kr=this.prevPlacement.variableOffsets[Et];kr&&(this.variableOffsets[Et]=kr,this.markUsedJustification(b,kr.anchor,qe,Ki))}}else{const rr=(ai,Ki)=>{const kr=b.getSymbolInstanceTextSize(he,qe,this.transform.zoom,ht),ao=this.collisionIndex.placeCollisionBox(b,kr,ai,new l.Point(0,0),xe,Z,P,ge.predicate);return ao&&ao.box&&ao.box.length&&(this.markUsedOrientation(b,Ki,qe),this.placedOrientations[Et]=Ki),ao};xr(()=>rr(Hi,l.WritingMode.horizontal),()=>{const ai=et.verticalTextBox;return b.allowVerticalPlacement&&Xe>0&&ai?(_r(ai),rr(ai,l.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}}),jr(!!(en&&en.box&&en.box.length))}}if(Hn=en,dt=Hn&&Hn.box&&Hn.box.length>0,vt=Hn&&Hn.offscreen,kt=Hn&&Hn.occluded,qe.useRuntimeCollisionCircles){const jr=b.text.placedSymbolArray.get(qe.centerJustifiedTextSymbolIndex>=0?qe.centerJustifiedTextSymbolIndex:qe.verticalPlacedTextSymbolIndex),xr=l.evaluateSizeForFeature(b.textSizeData,he,jr),rr=I.get("text-padding");Un=this.collisionIndex.placeCollisionCircles(b,xe,jr,b.lineVertexArray,b.glyphOffsetArray,xr,P,O,B,g,ze,ge.predicate,qe.collisionCircleDiameter*xr/l.ONE_EM,rr,this.retainedQueryData[b.bucketInstanceId].tileID),dt=xe||Un.circles.length>0&&!Un.collisionDetected,vt=vt&&Un.offscreen,kt=Un.occluded}if(et.iconFeatureIndex&&(yr=et.iconFeatureIndex),et.iconBox){const jr=xr=>{_r(xr);const rr=Oe&&Rn?ga(Rn.x,Rn.y,Re,ze,this.transform.angle):new l.Point(0,0),ai=b.getSymbolInstanceIconSize(ue,this.transform.zoom,qe.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(b,ai,xr,rr,be,Z,P,ge.predicate)};_n&&_n.box&&_n.box.length&&et.verticalIconBox?(cn=jr(et.verticalIconBox),zt=cn.box.length>0):(cn=jr(et.iconBox),zt=cn.box.length>0),vt=vt&&cn.offscreen,dn=cn.occluded}const Ti=K||qe.numHorizontalGlyphVertices===0&&Xe===0,Lo=se||qe.numIconVertices===0;if(Ti||Lo?Lo?Ti||(zt=zt&&dt):dt=zt&&dt:zt=dt=zt&&dt,dt&&Hn&&Hn.box&&this.collisionIndex.insertCollisionBox(Hn.box,I.get("text-ignore-placement"),b.bucketInstanceId,_n&&_n.box&&vr?vr:ur,ge.ID),zt&&cn&&this.collisionIndex.insertCollisionBox(cn.box,I.get("icon-ignore-placement"),b.bucketInstanceId,yr,ge.ID),Un&&(dt&&this.collisionIndex.insertCollisionCircles(Un.circles,I.get("text-ignore-placement"),b.bucketInstanceId,ur,ge.ID),g)){const jr=b.bucketInstanceId;let xr=this.collisionCircleArrays[jr];xr===void 0&&(xr=this.collisionCircleArrays[jr]=new Oo);for(let rr=0;rr<Un.circles.length;rr+=4)xr.circles.push(Un.circles[rr+0]),xr.circles.push(Un.circles[rr+1]),xr.circles.push(Un.circles[rr+2]),xr.circles.push(Un.collisionDetected?1:0)}const wa=b.projection.name!=="globe";Ue=Ue&&(wa||!kt),Ke=Ke&&(wa||!dn),this.placements[Et]=new bo(dt||Ue,zt||Ke,vt||b.justReloaded),d.add(Et)};if(Ve){const qe=b.getSortedSymbolIndexes(this.transform.angle);for(let ht=qe.length-1;ht>=0;--ht){const et=qe[ht];Pt(b.symbolInstances.get(et),et,b.collisionArrays[et])}}else for(let qe=s.symbolInstanceStart;qe<s.symbolInstanceEnd;qe++)Pt(b.symbolInstances.get(qe),qe,b.collisionArrays[qe]);if(g&&b.bucketInstanceId in this.collisionCircleArrays){const qe=this.collisionCircleArrays[b.bucketInstanceId];l.invert(qe.invProjMatrix,P),qe.viewportMatrix=this.collisionIndex.getViewportMatrix()}b.justReloaded=!1}markUsedJustification(s,d,g,_){const{leftJustifiedTextSymbolIndex:b,centerJustifiedTextSymbolIndex:I,rightJustifiedTextSymbolIndex:P,verticalPlacedTextSymbolIndex:O,crossTileID:B}=g,$=l.getAnchorJustification(d),Z=_===l.WritingMode.vertical?O:$==="left"?b:$==="center"?I:$==="right"?P:-1;b>=0&&(s.text.placedSymbolArray.get(b).crossTileID=Z>=0&&b!==Z?0:B),I>=0&&(s.text.placedSymbolArray.get(I).crossTileID=Z>=0&&I!==Z?0:B),P>=0&&(s.text.placedSymbolArray.get(P).crossTileID=Z>=0&&P!==Z?0:B),O>=0&&(s.text.placedSymbolArray.get(O).crossTileID=Z>=0&&O!==Z?0:B)}markUsedOrientation(s,d,g){const _=d===l.WritingMode.horizontal||d===l.WritingMode.horizontalOnly?d:0,b=d===l.WritingMode.vertical?d:0,{leftJustifiedTextSymbolIndex:I,centerJustifiedTextSymbolIndex:P,rightJustifiedTextSymbolIndex:O,verticalPlacedTextSymbolIndex:B}=g,$=s.text.placedSymbolArray;I>=0&&($.get(I).placedOrientation=_),P>=0&&($.get(P).placedOrientation=_),O>=0&&($.get(O).placedOrientation=_),B>=0&&($.get(B).placedOrientation=b)}commit(s){this.commitTime=s,this.zoomAtLastRecencyCheck=this.transform.zoom;const d=this.prevPlacement;let g=!1;this.prevZoomAdjustment=d?d.zoomAdjustment(this.transform.zoom):0;const _=d?d.symbolFadeChange(s):1,b=d?d.opacities:{},I=d?d.variableOffsets:{},P=d?d.placedOrientations:{};for(const O in this.placements){const B=this.placements[O],$=b[O];$?(this.opacities[O]=new xi($,_,B.text,B.icon,null,B.clipped),g=g||B.text!==$.text.placed||B.icon!==$.icon.placed):(this.opacities[O]=new xi(null,_,B.text,B.icon,B.skipFade,B.clipped),g=g||B.text||B.icon)}for(const O in b){const B=b[O];if(!this.opacities[O]){const $=new xi(B,_,!1,!1);$.isHidden()||(this.opacities[O]=$,g=g||B.text.placed||B.icon.placed)}}for(const O in I)this.variableOffsets[O]||!this.opacities[O]||this.opacities[O].isHidden()||(this.variableOffsets[O]=I[O]);for(const O in P)this.placedOrientations[O]||!this.opacities[O]||this.opacities[O].isHidden()||(this.placedOrientations[O]=P[O]);g?this.lastPlacementChangeTime=s:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=d?d.lastPlacementChangeTime:s)}updateLayerOpacities(s,d){const g=new Set;for(const _ of d){const b=_.getBucket(s);b&&_.latestFeatureIndex&&s.id===b.layerIds[0]&&this.updateBucketOpacities(b,g,_.collisionBoxArray)}}updateBucketOpacities(s,d,g){s.hasTextData()&&s.text.opacityVertexArray.clear(),s.hasIconData()&&s.icon.opacityVertexArray.clear(),s.hasIconCollisionBoxData()&&s.iconCollisionBox.collisionVertexArray.clear(),s.hasTextCollisionBoxData()&&s.textCollisionBox.collisionVertexArray.clear();const _=s.layers[0].layout,b=!!s.layers[0].dynamicFilter(),I=new xi(null,0,!1,!1,!0),P=_.get("text-allow-overlap"),O=_.get("icon-allow-overlap"),B=_.get("text-variable-anchor"),$=_.get("text-rotation-alignment")==="map",Z=_.get("text-pitch-alignment")==="map",oe=_.get("icon-text-fit")!=="none",le=new xi(null,0,P&&(O||!s.hasIconData()||_.get("icon-optional")),O&&(P||!s.hasTextData()||_.get("text-optional")),!0);!s.collisionArrays&&g&&(s.hasIconCollisionBoxData()||s.hasTextCollisionBoxData())&&s.deserializeCollisionBoxes(g);const he=(ge,K,se)=>{for(let xe=0;xe<K/4;xe++)ge.opacityVertexArray.emplaceBack(se)};let ue=0;for(let ge=0;ge<s.symbolInstances.length;ge++){const K=s.symbolInstances.get(ge),{numHorizontalGlyphVertices:se,numVerticalGlyphVertices:xe,crossTileID:be,numIconVertices:Re}=K,ze=d.has(be);let Oe=this.opacities[be];ze?Oe=I:Oe||(Oe=le,this.opacities[be]=Oe),d.add(be);const Ve=se>0||xe>0,Ue=Re>0,Ke=this.placedOrientations[be],Pt=Ke===l.WritingMode.vertical,qe=Ke===l.WritingMode.horizontal||Ke===l.WritingMode.horizontalOnly;if(!Ve&&!Ue||Oe.isHidden()||ue++,Ve){const ht=ya(Oe.text);he(s.text,se,Pt?zr:ht),he(s.text,xe,qe?zr:ht);const et=Oe.text.isHidden(),{leftJustifiedTextSymbolIndex:Et,centerJustifiedTextSymbolIndex:Xe,rightJustifiedTextSymbolIndex:dt,verticalPlacedTextSymbolIndex:zt}=K,vt=s.text.placedSymbolArray,kt=et||Pt?1:0;Et>=0&&(vt.get(Et).hidden=kt),Xe>=0&&(vt.get(Xe).hidden=kt),dt>=0&&(vt.get(dt).hidden=kt),zt>=0&&(vt.get(zt).hidden=et||qe?1:0);const dn=this.variableOffsets[be];dn&&this.markUsedJustification(s,dn.anchor,K,Ke);const Rn=this.placedOrientations[be];Rn&&(this.markUsedJustification(s,"left",K,Rn),this.markUsedOrientation(s,Rn,K))}if(Ue){const ht=ya(Oe.icon),{placedIconSymbolIndex:et,verticalPlacedIconSymbolIndex:Et}=K,Xe=s.icon.placedSymbolArray,dt=Oe.icon.isHidden()?1:0;et>=0&&(he(s.icon,Re,Pt?zr:ht),Xe.get(et).hidden=dt),Et>=0&&(he(s.icon,K.numVerticalIconVertices,qe?zr:ht),Xe.get(Et).hidden=dt)}if(s.hasIconCollisionBoxData()||s.hasTextCollisionBoxData()){const ht=s.collisionArrays[ge];if(ht){let et=new l.Point(0,0),Et=!0;if(ht.textBox||ht.verticalTextBox){if(B){const dt=this.variableOffsets[be];dt?(et=Ko(dt.anchor,dt.width,dt.height,dt.textOffset,dt.textScale),$&&et._rotate(Z?this.transform.angle:-this.transform.angle)):Et=!1}b&&(Et=!Oe.clipped),ht.textBox&&va(s.textCollisionBox.collisionVertexArray,Oe.text.placed,!Et||Pt,et.x,et.y),ht.verticalTextBox&&va(s.textCollisionBox.collisionVertexArray,Oe.text.placed,!Et||qe,et.x,et.y)}const Xe=Et&&!!(!qe&&ht.verticalIconBox);ht.iconBox&&va(s.iconCollisionBox.collisionVertexArray,Oe.icon.placed,Xe,oe?et.x:0,oe?et.y:0),ht.verticalIconBox&&va(s.iconCollisionBox.collisionVertexArray,Oe.icon.placed,!Xe,oe?et.x:0,oe?et.y:0)}}}if(s.fullyClipped=ue===0,s.sortFeatures(this.transform.angle),this.retainedQueryData[s.bucketInstanceId]&&(this.retainedQueryData[s.bucketInstanceId].featureSortOrder=s.featureSortOrder),s.hasTextData()&&s.text.opacityVertexBuffer&&s.text.opacityVertexBuffer.updateData(s.text.opacityVertexArray),s.hasIconData()&&s.icon.opacityVertexBuffer&&s.icon.opacityVertexBuffer.updateData(s.icon.opacityVertexArray),s.hasIconCollisionBoxData()&&s.iconCollisionBox.collisionVertexBuffer&&s.iconCollisionBox.collisionVertexBuffer.updateData(s.iconCollisionBox.collisionVertexArray),s.hasTextCollisionBoxData()&&s.textCollisionBox.collisionVertexBuffer&&s.textCollisionBox.collisionVertexBuffer.updateData(s.textCollisionBox.collisionVertexArray),s.bucketInstanceId in this.collisionCircleArrays){const ge=this.collisionCircleArrays[s.bucketInstanceId];s.placementInvProjMatrix=ge.invProjMatrix,s.placementViewportMatrix=ge.viewportMatrix,s.collisionCircleArray=ge.circles,delete this.collisionCircleArrays[s.bucketInstanceId]}}symbolFadeChange(s){return this.fadeDuration===0?1:(s-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(s){return Math.max(0,(this.transform.zoom-s)/1.5)}hasTransitions(s){return this.stale||s-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(s,d){const g=this.zoomAtLastRecencyCheck===d?1-this.zoomAdjustment(d):1;return this.zoomAtLastRecencyCheck=d,this.commitTime+this.fadeDuration*g>s}setStale(){this.stale=!0}}function va(p,s,d,g,_){p.emplaceBack(s?1:0,d?1:0,g||0,_||0),p.emplaceBack(s?1:0,d?1:0,g||0,_||0),p.emplaceBack(s?1:0,d?1:0,g||0,_||0),p.emplaceBack(s?1:0,d?1:0,g||0,_||0)}const Ei=Math.pow(2,25),Nr=Math.pow(2,24),hn=Math.pow(2,17),$n=Math.pow(2,16),Yn=Math.pow(2,9),dr=Math.pow(2,8),Wr=Math.pow(2,1);function ya(p){if(p.opacity===0&&!p.placed)return 0;if(p.opacity===1&&p.placed)return 4294967295;const s=p.placed?1:0,d=Math.floor(127*p.opacity);return d*Ei+s*Nr+d*hn+s*$n+d*Yn+s*dr+d*Wr+s}const zr=0;class xs{constructor(s){this._sortAcrossTiles=s.layout.get("symbol-z-order")!=="viewport-y"&&s.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs=new Set,this._bucketParts=[]}continuePlacement(s,d,g,_,b){const I=this._bucketParts;for(;this._currentTileIndex<s.length;)if(d.getBucketParts(I,_,s[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,b())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,I.sort((P,O)=>P.sortKey-O.sortKey));this._currentPartIndex<I.length;){const P=I[this._currentPartIndex];if(d.placeLayerBucketPart(P,this._seenCrossTileIDs,g,P.symbolInstanceStart===0),this._currentPartIndex++,b())return!0}return!1}}class bs{constructor(s,d,g,_,b,I,P,O){this.placement=new _s(s,b,I,P,O),this._currentPlacementIndex=d.length-1,this._forceFullPlacement=g,this._showCollisionBoxes=_,this._done=!1}isDone(){return this._done}continuePlacement(s,d,g){const _=l.exported.now(),b=()=>{const I=l.exported.now()-_;return!this._forceFullPlacement&&I>2};for(;this._currentPlacementIndex>=0;){const I=d[s[this._currentPlacementIndex]],P=this.placement.collisionIndex.transform.zoom;if(I.type==="symbol"&&(!I.minzoom||I.minzoom<=P)&&(!I.maxzoom||I.maxzoom>P)){if(this._inProgressLayer||(this._inProgressLayer=new xs(I)),this._inProgressLayer.continuePlacement(g[I.source],this.placement,this._showCollisionBoxes,I,b))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(s){return this.placement.commit(s),this.placement}}const js=512/l.EXTENT/2;class zi{constructor(s,d,g){this.tileID=s,this.bucketInstanceId=g,this.index=new l.KDBush(d.length,16,Int32Array),this.keys=[],this.crossTileIDs=[];const _=s.canonical.x*l.EXTENT,b=s.canonical.y*l.EXTENT;for(let I=0;I<d.length;I++){const{key:P,crossTileID:O,tileAnchorX:B,tileAnchorY:$}=d.get(I),Z=Math.floor((_+B)*js),oe=Math.floor((b+$)*js);this.index.add(Z,oe),this.keys.push(P),this.crossTileIDs.push(O)}this.index.finish()}findMatches(s,d,g){const _=this.tileID.canonical.z<d.canonical.z?1:Math.pow(2,this.tileID.canonical.z-d.canonical.z),b=js/Math.pow(2,d.canonical.z-this.tileID.canonical.z),I=d.canonical.x*l.EXTENT,P=d.canonical.y*l.EXTENT;for(let O=0;O<s.length;O++){const B=s.get(O);if(B.crossTileID)continue;const{key:$,tileAnchorX:Z,tileAnchorY:oe}=B,le=Math.floor((I+Z)*b),he=Math.floor((P+oe)*b),ue=this.index.range(le-_,he-_,le+_,he+_);for(const ge of ue){const K=this.crossTileIDs[ge];if(this.keys[ge]===$&&!g.has(K)){g.add(K),B.crossTileID=K;break}}}}}class zh{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class kh{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(s){const d=Math.round((s-this.lng)/360);if(d!==0)for(const g in this.indexes){const _=this.indexes[g],b={};for(const I in _){const P=_[I];P.tileID=P.tileID.unwrapTo(P.tileID.wrap+d),b[P.tileID.key]=P}this.indexes[g]=b}this.lng=s}addBucket(s,d,g){if(this.indexes[s.overscaledZ]&&this.indexes[s.overscaledZ][s.key]){if(this.indexes[s.overscaledZ][s.key].bucketInstanceId===d.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(s.overscaledZ,this.indexes[s.overscaledZ][s.key])}for(let b=0;b<d.symbolInstances.length;b++)d.symbolInstances.get(b).crossTileID=0;this.usedCrossTileIDs[s.overscaledZ]||(this.usedCrossTileIDs[s.overscaledZ]=new Set);const _=this.usedCrossTileIDs[s.overscaledZ];for(const b in this.indexes){const I=this.indexes[b];if(Number(b)>s.overscaledZ)for(const P in I){const O=I[P];O.tileID.isChildOf(s)&&O.findMatches(d.symbolInstances,s,_)}else{const P=I[s.scaledTo(Number(b)).key];P&&P.findMatches(d.symbolInstances,s,_)}}for(let b=0;b<d.symbolInstances.length;b++){const I=d.symbolInstances.get(b);I.crossTileID||(I.crossTileID=g.generate(),_.add(I.crossTileID))}return this.indexes[s.overscaledZ]===void 0&&(this.indexes[s.overscaledZ]={}),this.indexes[s.overscaledZ][s.key]=new zi(s,d.symbolInstances,d.bucketInstanceId),!0}removeBucketCrossTileIDs(s,d){for(const g of d.crossTileIDs)this.usedCrossTileIDs[s].delete(g)}removeStaleBuckets(s){let d=!1;for(const g in this.indexes){const _=this.indexes[g];for(const b in _)s[_[b].bucketInstanceId]||(this.removeBucketCrossTileIDs(g,_[b]),delete _[b],d=!0)}return d}}class Na{constructor(){this.layerIndexes={},this.crossTileIDs=new zh,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(s,d,g,_){let b=this.layerIndexes[s.id];b===void 0&&(b=this.layerIndexes[s.id]=new kh);let I=!1;const P={};_.name!=="globe"&&b.handleWrapJump(g);for(const O of d){const B=O.getBucket(s);B&&s.id===B.layerIds[0]&&(B.bucketInstanceId||(B.bucketInstanceId=++this.maxBucketInstanceId),b.addBucket(O.tileID,B,this.crossTileIDs)&&(I=!0),P[B.bucketInstanceId]=!0)}return b.removeStaleBuckets(P)&&(I=!0),I}pruneUnusedLayers(s){const d={};s.forEach(g=>{d[g]=!0});for(const g in this.layerIndexes)d[g]||delete this.layerIndexes[g]}}const ws=(p,s)=>l.emitValidationErrors(p,s&&s.filter(d=>d.identifier!=="source.canvas")),Ou=l.pick(En,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),H0=l.pick(En,["setCenter","setZoom","setBearing","setPitch"]),Lh={version:8,layers:[],sources:{}},wl={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class _a extends l.Evented{constructor(s,d={}){super(),this.map=s,this.dispatcher=new Be(Sn(),this),this.imageManager=new ce,this.imageManager.setEventedParent(this),this.glyphManager=new l.GlyphManager(s._requestManager,d.localFontFamily?l.LocalGlyphMode.all:d.localIdeographFontFamily?l.LocalGlyphMode.ideographs:l.LocalGlyphMode.none,d.localFontFamily||d.localIdeographFontFamily),this.crossTileSymbolIndex=new Na,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",l.getReferrer());const g=this;this._rtlTextPluginCallback=_a.registerForPluginStateChange(_=>{g.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:_.pluginStatus,pluginURL:_.pluginURL},(b,I)=>{if(l.triggerPluginCompletionEvent(b),I&&I.every(P=>P))for(const P in g._sourceCaches){const O=g._sourceCaches[P],B=O.getSource().type;B!=="vector"&&B!=="geojson"||O.reload()}})}),this.on("data",_=>{if(_.dataType!=="source"||_.sourceDataType!=="metadata")return;const b=this.getSource(_.sourceId);if(b&&b.vectorLayerIds)for(const I in this._layers){const P=this._layers[I];P.source===b.id&&this._validateLayer(P)}})}loadURL(s,d={}){this.fire(new l.Event("dataloading",{dataType:"style"}));const g=typeof d.validate=="boolean"?d.validate:!l.isMapboxURL(s);s=this.map._requestManager.normalizeStyleURL(s,d.accessToken);const _=this.map._requestManager.transformRequest(s,l.ResourceType.Style);this._request=l.getJSON(_,(b,I)=>{this._request=null,b?this.fire(new l.ErrorEvent(b)):I&&this._load(I,g)})}loadJSON(s,d={}){this.fire(new l.Event("dataloading",{dataType:"style"})),this._request=l.exported.frame(()=>{this._request=null,this._load(s,d.validate!==!1)})}loadEmpty(){this.fire(new l.Event("dataloading",{dataType:"style"})),this._load(Lh,!1)}_updateLayerCount(s,d){const g=d?1:-1;s.is3D()&&(this._num3DLayers+=g),s.type==="circle"&&(this._numCircleLayers+=g),s.type==="symbol"&&(this._numSymbolLayers+=g)}_load(s,d){if(d&&ws(this,l.validateStyle(s)))return;this._loaded=!0,this.stylesheet=l.clone$1(s),this._updateMapProjection();for(const _ in s.sources)this.addSource(_,s.sources[_],{validate:!1});this._changed=!1,s.sprite?this._loadSprite(s.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(s.glyphs);const g=ri(this.stylesheet.layers);this._order=g.map(_=>_.id),this._layers={},this._serializedLayers={};for(const _ of g){const b=l.createStyleLayer(_);b.setEventedParent(this,{layer:{id:b.id}}),this._layers[b.id]=b,this._serializedLayers[b.id]=b.serialize(),this._updateLayerCount(b,!0)}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new fe(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new l.Event("data",{dataType:"style"})),this.fire(new l.Event("style.load"))}terrainSetForDrapingOnly(){return!!this.terrain&&this.terrain.drapeRenderMode===0}setProjection(s){s?this.stylesheet.projection=s:delete this.stylesheet.projection,this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}_updateMapProjection(){this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.stylesheet.projection)}_loadSprite(s){this._spriteRequest=function(d,g,_){let b,I,P;const O=l.exported.devicePixelRatio>1?"@2x":"";let B=l.getJSON(g.transformRequest(g.normalizeSpriteURL(d,O,".json"),l.ResourceType.SpriteJSON),(oe,le)=>{B=null,P||(P=oe,b=le,Z())}),$=l.getImage(g.transformRequest(g.normalizeSpriteURL(d,O,".png"),l.ResourceType.SpriteImage),(oe,le)=>{$=null,P||(P=oe,I=le,Z())});function Z(){if(P)_(P);else if(b&&I){const oe=l.exported.getImageData(I),le={};for(const he in b){const{width:ue,height:ge,x:K,y:se,sdf:xe,pixelRatio:be,stretchX:Re,stretchY:ze,content:Oe}=b[he],Ve=new l.RGBAImage({width:ue,height:ge});l.RGBAImage.copy(oe,Ve,{x:K,y:se},{x:0,y:0},{width:ue,height:ge}),le[he]={data:Ve,pixelRatio:be,sdf:xe,stretchX:Re,stretchY:ze,content:Oe}}_(null,le)}}return{cancel(){B&&(B.cancel(),B=null),$&&($.cancel(),$=null)}}}(s,this.map._requestManager,(d,g)=>{if(this._spriteRequest=null,d)this.fire(new l.ErrorEvent(d));else if(g)for(const _ in g)this.imageManager.addImage(_,g[_]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new l.Event("data",{dataType:"style"}))})}_validateLayer(s){const d=this.getSource(s.source);if(!d)return;const g=s.sourceLayer;g&&(d.type==="geojson"||d.vectorLayerIds&&d.vectorLayerIds.indexOf(g)===-1)&&this.fire(new l.ErrorEvent(new Error(`Source layer "${g}" does not exist on source "${d.id}" as specified by style layer "${s.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const s in this._sourceCaches)if(!this._sourceCaches[s].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(s){const d=[];for(const g of s){const _=this._layers[g];_.type!=="custom"&&d.push(_.serialize())}return d}hasTransitions(){if(this.light&&this.light.hasTransition()||this.fog&&this.fog.hasTransition())return!0;for(const s in this._sourceCaches)if(this._sourceCaches[s].hasTransition())return!0;for(const s in this._layers)if(this._layers[s].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(s){return!!this.terrain&&(typeof s.isLayerDraped=="function"?s.isLayerDraped():wl[s.type])}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(s){if(!this._loaded)return;const d=this._changed;if(this._changed){const _=Object.keys(this._updatedLayers),b=Object.keys(this._removedLayers);(_.length||b.length)&&this._updateWorkerLayers(_,b);for(const I in this._updatedSources){const P=this._updatedSources[I];P==="reload"?this._reloadSource(I):P==="clear"&&this._clearSource(I)}this._updateTilesForChangedImages();for(const I in this._updatedPaintProps)this._layers[I].updateTransitions(s);this.light.updateTransitions(s),this.fog&&this.fog.updateTransitions(s),this._resetUpdates()}const g={};for(const _ in this._sourceCaches){const b=this._sourceCaches[_];g[_]=b.used,b.used=!1}for(const _ of this._order){const b=this._layers[_];if(b.recalculate(s,this._availableImages),!b.isHidden(s.zoom)){const P=this._getLayerSourceCache(b);P&&(P.used=!0)}const I=this.map.painter;if(I){const P=b.getProgramIds();if(!P)continue;const O=b.getProgramConfiguration(s.zoom);for(const B of P)I.useProgram(B,O)}}for(const _ in g){const b=this._sourceCaches[_];g[_]!==b.used&&b.getSource().fire(new l.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:b.getSource().id}))}this.light.recalculate(s),this.terrain&&this.terrain.recalculate(s),this.fog&&this.fog.recalculate(s),this.z=s.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),d&&this.fire(new l.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const s=Object.keys(this._changedImages);if(s.length){for(const d in this._sourceCaches)this._sourceCaches[d].reloadTilesForDependencies(["icons","patterns"],s);this._changedImages={}}}_updateWorkerLayers(s,d){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(s),removedIds:d})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(s){if(this._checkLoaded(),ws(this,l.validateStyle(s)))return!1;(s=l.clone$1(s)).layers=ri(s.layers);const d=function(_,b){if(!_)return[{command:En.setStyle,args:[b]}];let I=[];try{if(!w(_.version,b.version))return[{command:En.setStyle,args:[b]}];w(_.center,b.center)||I.push({command:En.setCenter,args:[b.center]}),w(_.zoom,b.zoom)||I.push({command:En.setZoom,args:[b.zoom]}),w(_.bearing,b.bearing)||I.push({command:En.setBearing,args:[b.bearing]}),w(_.pitch,b.pitch)||I.push({command:En.setPitch,args:[b.pitch]}),w(_.sprite,b.sprite)||I.push({command:En.setSprite,args:[b.sprite]}),w(_.glyphs,b.glyphs)||I.push({command:En.setGlyphs,args:[b.glyphs]}),w(_.transition,b.transition)||I.push({command:En.setTransition,args:[b.transition]}),w(_.light,b.light)||I.push({command:En.setLight,args:[b.light]}),w(_.fog,b.fog)||I.push({command:En.setFog,args:[b.fog]}),w(_.projection,b.projection)||I.push({command:En.setProjection,args:[b.projection]});const P={},O=[];(function(Z,oe,le,he){let ue;for(ue in oe=oe||{},Z=Z||{})Z.hasOwnProperty(ue)&&(oe.hasOwnProperty(ue)||xo(ue,le,he));for(ue in oe){if(!oe.hasOwnProperty(ue))continue;const ge=oe[ue];Z.hasOwnProperty(ue)?w(Z[ue],ge)||(Z[ue].type==="geojson"&&ge.type==="geojson"&&ro(Z,oe,ue)?le.push({command:En.setGeoJSONSourceData,args:[ue,ge.data]}):Po(ue,oe,le,he)):Ni(ue,oe,le)}})(_.sources,b.sources,O,P);const B=[];_.layers&&_.layers.forEach(Z=>{Z.source&&P[Z.source]?I.push({command:En.removeLayer,args:[Z.id]}):B.push(Z)});let $=_.terrain;$&&P[$.source]&&(I.push({command:En.setTerrain,args:[void 0]}),$=void 0),I=I.concat(O),w($,b.terrain)||I.push({command:En.setTerrain,args:[b.terrain]}),function(Z,oe,le){oe=oe||[];const he=(Z=Z||[]).map(ji),ue=oe.map(ji),ge=Z.reduce(pa,{}),K=oe.reduce(pa,{}),se=he.slice(),xe=Object.create(null);let be,Re,ze,Oe,Ve,Ue,Ke;for(be=0,Re=0;be<he.length;be++)ze=he[be],K.hasOwnProperty(ze)?Re++:(le.push({command:En.removeLayer,args:[ze]}),se.splice(se.indexOf(ze,Re),1));for(be=0,Re=0;be<ue.length;be++)ze=ue[ue.length-1-be],se[se.length-1-be]!==ze&&(ge.hasOwnProperty(ze)?(le.push({command:En.removeLayer,args:[ze]}),se.splice(se.lastIndexOf(ze,se.length-Re),1)):Re++,Ue=se[se.length-be],le.push({command:En.addLayer,args:[K[ze],Ue]}),se.splice(se.length-be,0,ze),xe[ze]=!0);for(be=0;be<ue.length;be++)if(ze=ue[be],Oe=ge[ze],Ve=K[ze],!xe[ze]&&!w(Oe,Ve))if(w(Oe.source,Ve.source)&&w(Oe["source-layer"],Ve["source-layer"])&&w(Oe.type,Ve.type)){for(Ke in Hr(Oe.layout,Ve.layout,le,ze,null,En.setLayoutProperty),Hr(Oe.paint,Ve.paint,le,ze,null,En.setPaintProperty),w(Oe.filter,Ve.filter)||le.push({command:En.setFilter,args:[ze,Ve.filter]}),w(Oe.minzoom,Ve.minzoom)&&w(Oe.maxzoom,Ve.maxzoom)||le.push({command:En.setLayerZoomRange,args:[ze,Ve.minzoom,Ve.maxzoom]}),Oe)Oe.hasOwnProperty(Ke)&&Ke!=="layout"&&Ke!=="paint"&&Ke!=="filter"&&Ke!=="metadata"&&Ke!=="minzoom"&&Ke!=="maxzoom"&&(Ke.indexOf("paint.")===0?Hr(Oe[Ke],Ve[Ke],le,ze,Ke.slice(6),En.setPaintProperty):w(Oe[Ke],Ve[Ke])||le.push({command:En.setLayerProperty,args:[ze,Ke,Ve[Ke]]}));for(Ke in Ve)Ve.hasOwnProperty(Ke)&&!Oe.hasOwnProperty(Ke)&&Ke!=="layout"&&Ke!=="paint"&&Ke!=="filter"&&Ke!=="metadata"&&Ke!=="minzoom"&&Ke!=="maxzoom"&&(Ke.indexOf("paint.")===0?Hr(Oe[Ke],Ve[Ke],le,ze,Ke.slice(6),En.setPaintProperty):w(Oe[Ke],Ve[Ke])||le.push({command:En.setLayerProperty,args:[ze,Ke,Ve[Ke]]}))}else le.push({command:En.removeLayer,args:[ze]}),Ue=se[se.lastIndexOf(ze)+1],le.push({command:En.addLayer,args:[Ve,Ue]})}(B,b.layers,I)}catch(P){console.warn("Unable to compute style diff:",P),I=[{command:En.setStyle,args:[b]}]}return I}(this.serialize(),s).filter(_=>!(_.command in H0));if(d.length===0)return!1;const g=d.filter(_=>!(_.command in Ou));if(g.length>0)throw new Error(`Unimplemented: ${g.map(_=>_.command).join(", ")}.`);return d.forEach(_=>{_.command!=="setTransition"&&_.command!=="setProjection"&&this[_.command].apply(this,_.args)}),this.stylesheet=s,this._updateMapProjection(),!0}addImage(s,d){return this.getImage(s)?this.fire(new l.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(s,d),this._afterImageUpdated(s),this)}updateImage(s,d){this.imageManager.updateImage(s,d)}getImage(s){return this.imageManager.getImage(s)}removeImage(s){return this.getImage(s)?(this.imageManager.removeImage(s),this._afterImageUpdated(s),this):this.fire(new l.ErrorEvent(new Error("No image with this name exists.")))}_afterImageUpdated(s){this._availableImages=this.imageManager.listImages(),this._changedImages[s]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addSource(s,d,g={}){if(this._checkLoaded(),this.getSource(s)!==void 0)throw new Error("There is already a source with this ID");if(!d.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(d).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(d.type)>=0&&this._validate(l.validateSource,`sources.${s}`,d,null,g))return;this.map&&this.map._collectResourceTiming&&(d.collectResourceTiming=!0);const _=un(s,d,this.dispatcher,this);_.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(s),source:_.serialize(),sourceId:s}));const b=I=>{const P=(I?"symbol:":"other:")+s,O=this._sourceCaches[P]=new l.SourceCache(P,_,I);(I?this._symbolSourceCaches:this._otherSourceCaches)[s]=O,O.style=this,O.onAdd(this.map)};b(!1),d.type!=="vector"&&d.type!=="geojson"||b(!0),_.onAdd&&_.onAdd(this.map),this._changed=!0}removeSource(s){this._checkLoaded();const d=this.getSource(s);if(!d)throw new Error("There is no source with this ID");for(const _ in this._layers)if(this._layers[_].source===s)return this.fire(new l.ErrorEvent(new Error(`Source "${s}" cannot be removed while layer "${_}" is using it.`)));if(this.terrain&&this.terrain.get().source===s)return this.fire(new l.ErrorEvent(new Error(`Source "${s}" cannot be removed while terrain is using it.`)));const g=this._getSourceCaches(s);for(const _ of g)delete this._sourceCaches[_.id],delete this._updatedSources[_.id],_.fire(new l.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:_.getSource().id})),_.setEventedParent(null),_.clearTiles();return delete this._otherSourceCaches[s],delete this._symbolSourceCaches[s],d.setEventedParent(null),d.onRemove&&d.onRemove(this.map),this._changed=!0,this}setGeoJSONSourceData(s,d){this._checkLoaded(),this.getSource(s).setData(d),this._changed=!0}getSource(s){const d=this._getSourceCache(s);return d&&d.getSource()}_getSources(){const s=[];for(const d in this._otherSourceCaches){const g=this._getSourceCache(d);g&&s.push(g.getSource())}return s}addLayer(s,d,g={}){this._checkLoaded();const _=s.id;if(this.getLayer(_))return void this.fire(new l.ErrorEvent(new Error(`Layer with id "${_}" already exists on this map`)));let b;if(s.type==="custom"){if(ws(this,l.validateCustomStyleLayer(s)))return;b=l.createStyleLayer(s)}else{if(typeof s.source=="object"&&(this.addSource(_,s.source),s=l.clone$1(s),s=l.extend(s,{source:_})),this._validate(l.validateLayer,`layers.${_}`,s,{arrayIndex:-1},g))return;b=l.createStyleLayer(s),this._validateLayer(b),b.setEventedParent(this,{layer:{id:_}}),this._serializedLayers[b.id]=b.serialize(),this._updateLayerCount(b,!0)}const I=d?this._order.indexOf(d):this._order.length;if(d&&I===-1)return void this.fire(new l.ErrorEvent(new Error(`Layer with id "${d}" does not exist on this map.`)));this._order.splice(I,0,_),this._layerOrderChanged=!0,this._layers[_]=b;const P=this._getLayerSourceCache(b);if(this._removedLayers[_]&&b.source&&P&&b.type!=="custom"){const O=this._removedLayers[_];delete this._removedLayers[_],O.type!==b.type?this._updatedSources[b.source]="clear":(this._updatedSources[b.source]="reload",P.pause())}this._updateLayer(b),b.onAdd&&b.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(s,d){if(this._checkLoaded(),this._changed=!0,!this._layers[s])return void this.fire(new l.ErrorEvent(new Error(`The layer '${s}' does not exist in the map's style and cannot be moved.`)));if(s===d)return;const g=this._order.indexOf(s);this._order.splice(g,1);const _=d?this._order.indexOf(d):this._order.length;d&&_===-1?this.fire(new l.ErrorEvent(new Error(`Layer with id "${d}" does not exist on this map.`))):(this._order.splice(_,0,s),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(s){this._checkLoaded();const d=this._layers[s];if(!d)return void this.fire(new l.ErrorEvent(new Error(`The layer '${s}' does not exist in the map's style and cannot be removed.`)));d.setEventedParent(null),this._updateLayerCount(d,!1);const g=this._order.indexOf(s);this._order.splice(g,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[s]=d,delete this._layers[s],delete this._serializedLayers[s],delete this._updatedLayers[s],delete this._updatedPaintProps[s],d.onRemove&&d.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(s){return this._layers[s]}hasLayer(s){return s in this._layers}hasLayerType(s){for(const d in this._layers)if(this._layers[d].type===s)return!0;return!1}setLayerZoomRange(s,d,g){this._checkLoaded();const _=this.getLayer(s);_?_.minzoom===d&&_.maxzoom===g||(d!=null&&(_.minzoom=d),g!=null&&(_.maxzoom=g),this._updateLayer(_)):this.fire(new l.ErrorEvent(new Error(`The layer '${s}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(s,d,g={}){this._checkLoaded();const _=this.getLayer(s);if(_){if(!w(_.filter,d))return d==null?(_.filter=void 0,void this._updateLayer(_)):void(this._validate(l.validateFilter,`layers.${_.id}.filter`,d,{layerType:_.type},g)||(_.filter=l.clone$1(d),this._updateLayer(_)))}else this.fire(new l.ErrorEvent(new Error(`The layer '${s}' does not exist in the map's style and cannot be filtered.`)))}getFilter(s){const d=this.getLayer(s);return d&&l.clone$1(d.filter)}setLayoutProperty(s,d,g,_={}){this._checkLoaded();const b=this.getLayer(s);b?w(b.getLayoutProperty(d),g)||(b.setLayoutProperty(d,g,_),this._updateLayer(b)):this.fire(new l.ErrorEvent(new Error(`The layer '${s}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(s,d){const g=this.getLayer(s);if(g)return g.getLayoutProperty(d);this.fire(new l.ErrorEvent(new Error(`The layer '${s}' does not exist in the map's style.`)))}setPaintProperty(s,d,g,_={}){this._checkLoaded();const b=this.getLayer(s);b?w(b.getPaintProperty(d),g)||(b.setPaintProperty(d,g,_)&&this._updateLayer(b),this._changed=!0,this._updatedPaintProps[s]=!0):this.fire(new l.ErrorEvent(new Error(`The layer '${s}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(s,d){const g=this.getLayer(s);return g&&g.getPaintProperty(d)}setFeatureState(s,d){this._checkLoaded();const g=s.source,_=s.sourceLayer,b=this.getSource(g);if(!b)return void this.fire(new l.ErrorEvent(new Error(`The source '${g}' does not exist in the map's style.`)));const I=b.type;if(I==="geojson"&&_)return void this.fire(new l.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if(I==="vector"&&!_)return void this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));s.id===void 0&&this.fire(new l.ErrorEvent(new Error("The feature id parameter must be provided.")));const P=this._getSourceCaches(g);for(const O of P)O.setFeatureState(_,s.id,d)}removeFeatureState(s,d){this._checkLoaded();const g=s.source,_=this.getSource(g);if(!_)return void this.fire(new l.ErrorEvent(new Error(`The source '${g}' does not exist in the map's style.`)));const b=_.type,I=b==="vector"?s.sourceLayer:void 0;if(b==="vector"&&!I)return void this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(d&&typeof s.id!="string"&&typeof s.id!="number")return void this.fire(new l.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const P=this._getSourceCaches(g);for(const O of P)O.removeFeatureState(I,s.id,d)}getFeatureState(s){this._checkLoaded();const d=s.source,g=s.sourceLayer,_=this.getSource(d);if(_){if(_.type!=="vector"||g)return s.id===void 0&&this.fire(new l.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(d)[0].getFeatureState(g,s.id);this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new l.ErrorEvent(new Error(`The source '${d}' does not exist in the map's style.`)))}getTransition(){return l.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const s={};for(const d in this._sourceCaches){const g=this._sourceCaches[d].getSource();s[g.id]||(s[g.id]=g.serialize())}return l.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.getTerrain()||void 0,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:s,layers:this._serializeLayers(this._order)},d=>d!==void 0)}_updateLayer(s){this._updatedLayers[s.id]=!0;const d=this._getLayerSourceCache(s);s.source&&!this._updatedSources[s.source]&&d&&d.getSource().type!=="raster"&&(this._updatedSources[s.source]="reload",d.pause()),this._changed=!0,s.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(s){const d=I=>this._layers[I].type==="fill-extrusion",g={},_=[];for(let I=this._order.length-1;I>=0;I--){const P=this._order[I];if(d(P)){g[P]=I;for(const O of s){const B=O[P];if(B)for(const $ of B)_.push($)}}}_.sort((I,P)=>P.intersectionZ-I.intersectionZ);const b=[];for(let I=this._order.length-1;I>=0;I--){const P=this._order[I];if(d(P))for(let O=_.length-1;O>=0;O--){const B=_[O].feature;if(g[B.layer.id]<I)break;b.push(B),_.pop()}else for(const O of s){const B=O[P];if(B)for(const $ of B)b.push($.feature)}}return b}queryRenderedFeatures(s,d,g){d&&d.filter&&this._validate(l.validateFilter,"queryRenderedFeatures.filter",d.filter,null,d);const _={};if(d&&d.layers){if(!Array.isArray(d.layers))return this.fire(new l.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const O of d.layers){const B=this._layers[O];if(!B)return this.fire(new l.ErrorEvent(new Error(`The layer '${O}' does not exist in the map's style and cannot be queried for features.`))),[];_[B.source]=!0}}const b=[];d.availableImages=this._availableImages;const I=d&&d.layers?d.layers.some(O=>{const B=this.getLayer(O);return B&&B.is3D()}):this.has3DLayers(),P=Qe.createFromScreenPoints(s,g);for(const O in this._sourceCaches){const B=this._sourceCaches[O].getSource().id;d.layers&&!_[B]||b.push(Gn(this._sourceCaches[O],this._layers,this._serializedLayers,P,d,g,I,!!this.map._showQueryGeometry))}return this.placement&&b.push(function(O,B,$,Z,oe,le,he){const ue={},ge=le.queryRenderedSymbols(Z),K=[];for(const se of Object.keys(ge).map(Number))K.push(he[se]);K.sort(er);for(const se of K){const xe=se.featureIndex.lookupSymbolFeatures(ge[se.bucketInstanceId],B,se.bucketIndex,se.sourceLayerIndex,oe.filter,oe.layers,oe.availableImages,O);for(const be in xe){const Re=ue[be]=ue[be]||[],ze=xe[be];ze.sort((Oe,Ve)=>{const Ue=se.featureSortOrder;if(Ue){const Ke=Ue.indexOf(Oe.featureIndex);return Ue.indexOf(Ve.featureIndex)-Ke}return Ve.featureIndex-Oe.featureIndex});for(const Oe of ze)Re.push(Oe)}}for(const se in ue)ue[se].forEach(xe=>{const be=xe.feature,Re=$(O[se]);if(!Re)return;const ze=Re.getFeatureState(be.layer["source-layer"],be.id);be.source=be.layer.source,be.layer["source-layer"]&&(be.sourceLayer=be.layer["source-layer"]),be.state=ze});return ue}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),P.screenGeometry,d,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(b)}querySourceFeatures(s,d){d&&d.filter&&this._validate(l.validateFilter,"querySourceFeatures.filter",d.filter,null,d);const g=this._getSourceCaches(s);let _=[];for(const b of g)_=_.concat(On(b,d));return _}addSourceType(s,d,g){return _a.getSourceType(s)?g(new Error(`A source type called "${s}" already exists.`)):(_a.setSourceType(s,d),d.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:s,url:d.workerSourceURL},g):g(null,null))}getLight(){return this.light.getLight()}setLight(s,d={}){this._checkLoaded();const g=this.light.getLight();let _=!1;for(const I in s)if(!w(s[I],g[I])){_=!0;break}if(!_)return;const b=this._setTransitionParameters({duration:300,delay:0});this.light.setLight(s,d),this.light.updateTransitions(b)}getTerrain(){return this.terrain&&this.terrain.drapeRenderMode===1?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(s,d=1){if(this._checkLoaded(),!s)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);let g=s;if(d===1){if(typeof g.source=="object"){const _="terrain-dem-src";this.addSource(_,g.source),g=l.clone$1(g),g=l.extend(g,{source:_})}if(this._validate(l.validateTerrain,"terrain",g))return}if(!this.terrain||this.terrain&&d!==this.terrain.drapeRenderMode){if(!g)return;this._createTerrain(g,d)}else{const _=this.terrain,b=_.get();for(const I of Object.keys(l.spec.terrain))!g.hasOwnProperty(I)&&l.spec.terrain[I].default&&(g[I]=l.spec.terrain[I].default);for(const I in g)if(!w(g[I],b[I])){_.set(g),this.stylesheet.terrain=g;const P=this._setTransitionParameters({duration:0});_.updateTransitions(P);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(s){const d=this.fog=new He(s,this.map.transform);this.stylesheet.fog=s;const g=this._setTransitionParameters({duration:0});d.updateTransitions(g)}_updateMarkersOpacity(){this.map._markers.length!==0&&this.map._requestDomTask(()=>{for(const s of this.map._markers)s._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(s){if(this._checkLoaded(),!s)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const d=this.fog,g=d.get();Object.keys(s).length===0&&d.set(s);for(const _ in s)if(!w(s[_],g[_])){d.set(s),this.stylesheet.fog=s;const b=this._setTransitionParameters({duration:0});d.updateTransitions(b);break}}else this._createFog(s);this._markersNeedUpdate=!0}_setTransitionParameters(s){return{now:l.exported.now(),transition:l.extend(s,this.stylesheet.transition)}}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const s=this._order.filter(g=>this.isLayerDraped(this._layers[g])),d=this._order.filter(g=>!this.isLayerDraped(this._layers[g]));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...s),this._drapedFirstOrder.push(...d)}_createTerrain(s,d){const g=this.terrain=new $e(s,d);this.stylesheet.terrain=s,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();const _=this._setTransitionParameters({duration:0});g.updateTransitions(_)}_force3DLayerUpdate(){for(const s in this._layers){const d=this._layers[s];d.type==="fill-extrusion"&&this._updateLayer(d)}}_forceSymbolLayerUpdate(){for(const s in this._layers){const d=this._layers[s];d.type==="symbol"&&this._updateLayer(d)}}_validate(s,d,g,_,b={}){return(!b||b.validate!==!1)&&ws(this,s.call(l.validateStyle,l.extend({key:d,style:this.serialize(),value:g,styleSpec:l.spec},_)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),l.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const s in this._layers)this._layers[s].setEventedParent(null);for(const s in this._sourceCaches)this._sourceCaches[s].clearTiles(),this._sourceCaches[s].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(s){const d=this._getSourceCaches(s);for(const g of d)g.clearTiles()}_reloadSource(s){const d=this._getSourceCaches(s);for(const g of d)g.resume(),g.reload()}_reloadSources(){for(const s of this._getSources())s.reload&&s.reload()}_updateSources(s){for(const d in this._sourceCaches)this._sourceCaches[d].update(s)}_generateCollisionBoxes(){for(const s in this._sourceCaches){const d=this._sourceCaches[s];d.resume(),d.reload()}}_updatePlacement(s,d,g,_,b=!1){let I=!1,P=!1;const O={};for(const B of this._order){const $=this._layers[B];if($.type!=="symbol")continue;if(!O[$.source]){const oe=this._getLayerSourceCache($);if(!oe)continue;O[$.source]=oe.getRenderableIds(!0).map(le=>oe.getTileByID(le)).sort((le,he)=>he.tileID.overscaledZ-le.tileID.overscaledZ||(le.tileID.isLessThan(he.tileID)?-1:1))}const Z=this.crossTileSymbolIndex.addLayer($,O[$.source],s.center.lng,s.projection);I=I||Z}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),b=b||this._layerOrderChanged||g===0,this._layerOrderChanged&&this.fire(new l.Event("neworder")),(b||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(l.exported.now(),s.zoom))&&(this.pauseablePlacement=new bs(s,this._order,b,d,g,_,this.placement,this.fog&&s.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,O),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(l.exported.now()),P=!0),I&&this.pauseablePlacement.placement.setStale()),P||I)for(const B of this._order){const $=this._layers[B];$.type==="symbol"&&this.placement.updateLayerOpacities($,O[$.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(l.exported.now())}_releaseSymbolFadeTiles(){for(const s in this._sourceCaches)this._sourceCaches[s].releaseSymbolFadeTiles()}getImages(s,d,g){this.imageManager.getImages(d.icons,g),this._updateTilesForChangedImages();const _=b=>{b&&b.setDependencies(d.tileID.key,d.type,d.icons)};_(this._otherSourceCaches[d.source]),_(this._symbolSourceCaches[d.source])}getGlyphs(s,d,g){this.glyphManager.getGlyphs(d.stacks,g)}getResource(s,d,g){return l.makeRequest(d,g)}_getSourceCache(s){return this._otherSourceCaches[s]}_getLayerSourceCache(s){return s.type==="symbol"?this._symbolSourceCaches[s.source]:this._otherSourceCaches[s.source]}_getSourceCaches(s){const d=[];return this._otherSourceCaches[s]&&d.push(this._otherSourceCaches[s]),this._symbolSourceCaches[s]&&d.push(this._symbolSourceCaches[s]),d}_isSourceCacheLoaded(s){const d=this._getSourceCaches(s);return d.length===0?(this.fire(new l.ErrorEvent(new Error(`There is no source with ID '${s}'`))),!1):d.every(g=>g.loaded())}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}_a.getSourceType=function(p){return Xt[p]},_a.setSourceType=function(p,s){Xt[p]=s},_a.registerForPluginStateChange=l.registerForPluginStateChange;var Dh=`
#define EPSILON 0.0000001
#define PI 3.141592653589793
#define EXTENT 8192.0
#define HALF_PI PI/2.0
#define QUARTER_PI PI/4.0
#define RAD_TO_DEG 180.0/PI
#define DEG_TO_RAD PI/180.0
#define GLOBE_RADIUS EXTENT/PI/2.0`,Us="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",ja=`
#define ELEVATION_SCALE 7.0
#define ELEVATION_OFFSET 450.0
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(
mix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}
#else
vec3 elevationVector(vec2 pos) { return vec3(0,0,1); }
#endif
const float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)
{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}
#ifdef TERRAIN
#ifdef TERRAIN_DEM_FLOAT_FORMAT
uniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;
#else
uniform sampler2D u_dem;uniform sampler2D u_dem_prev;
#endif
uniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));
#ifdef TERRAIN_DEM_NEAREST_FILTER
return u_exaggeration*tl;
#endif
float tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}float prevElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}
#ifdef TERRAIN_VERTEX_MORPHING
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}
#else
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
return currentElevation(apos);}
#endif
highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(
unpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))
);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
float tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;
#else
vec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);
#endif
return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}
#else
float elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }
#endif`,Ec=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}
#endif`,Ua=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump float u_fog_temporal_offset;varying vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}
#endif`;let zu={},Sl={};const Cc=[];El(Dh,Cc),El(ja,Cc),El(Ec,Cc),El(Ua,Cc),zu=ar("",ja),Sl=ar(Ua,Ec);const Om=ar(`
#if __VERSION__ >=300
#define varying in
#define gl_FragColor glFragColor
#define texture2D texture
#define textureCube texture
out vec4 glFragColor;
#endif
highp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}`,`
#if __VERSION__ >=300
#define attribute in
#define varying out
#define texture2D texture
#endif
float wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {
#ifndef PROJECTED_POS_ON_VIEWPORT
float tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;
#else
return vec3(0.0);
#endif
}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(
unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered.`),ku=Dh,$h=`
#ifdef GL_ES
precision mediump float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`;var Fh={background:ar(`uniform vec4 u_color;uniform float u_opacity;
#ifdef LIGHTING_3D_MODE
varying vec4 v_color;
#endif
void main() {vec4 out_color;
#ifdef LIGHTING_3D_MODE
out_color=v_color;
#else
out_color=u_color;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#ifdef LIGHTING_3D_MODE
uniform vec4 u_color;varying vec4 v_color;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting(u_color);
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),backgroundPattern:ar(`uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos;void main() {vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),circle:ar(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(
antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)
);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_apply_premultiplied(out_color,v_fog_pos);
#endif
gl_FragColor=out_color*(v_visibility*opacity_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`#define NUM_VISIBILITY_RINGS 2
#define INV_SQRT2 0.70710678
#define ELEVATION_BIAS 0.0001
#define NUM_SAMPLES_PER_RING 16
uniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
vec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {
#if defined(TERRAIN)
return elevation(pos)+ELEVATION_BIAS;
#else
return 0.0;
#endif
}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);
#ifdef PITCH_WITH_MAP
#ifdef PROJECTION_GLOBE_VIEW
return u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );
#else
return u_matrix*( world_center+vec4(sample_offset,0,0) );
#endif
#else
return projected_center+vec4(sample_offset,0,0);
#endif
}float get_sample_step() {
#ifdef PITCH_WITH_MAP
return 2.0*PI/float(NUM_SAMPLES_PER_RING);
#else
return PI/float(NUM_SAMPLES_PER_RING);
#endif
}void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);
#else 
surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);
#endif
vec4 projected_center=u_matrix*world_center;float view_scale=0.0;
#ifdef PITCH_WITH_MAP
#ifdef SCALE_WITH_MAP
view_scale=1.0;
#else
view_scale=projected_center.w/u_camera_to_center_distance;
#endif
#else
#ifdef SCALE_WITH_MAP
view_scale=u_camera_to_center_distance;
#else
view_scale=projected_center.w;
#endif
#endif
gl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;
#ifdef TERRAIN
float step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;
#ifdef PITCH_WITH_MAP
float cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;
#else
occlusion_world_center=world_center;occlusion_projected_center=projected_center;
#endif
for(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);
#else
visibility=1.0;
#endif
#ifdef PROJECTION_GLOBE_VIEW
visibility=1.0;
#endif
v_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);
#ifdef FOG
v_fog_pos=fog_position(world_center.xyz);
#endif
}`),clippingMask:ar("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:ar(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef FOG
if (u_is_globe==0) {gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#else
pos=vec3(tilePos+extrude,elevation(tilePos));
#endif
gl_Position=u_matrix*vec4(pos,1);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),heatmapTexture:ar(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:ar("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}",`attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}`),collisionCircle:ar("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}",`attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(
mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}`),debug:ar("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}",`attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;
#endif
varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
gl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);
#else
gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);
#endif
}`),fill:ar(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
vec4 out_color=color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutline:ar(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutlinePattern:ar(`uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;varying vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;varying vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillPattern:ar(`uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillExtrusion:ar(`varying vec4 v_color;
#ifdef RENDER_SHADOWS
varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef ZERO_ROOF_RADIUS
varying vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
varying highp vec3 v_normal;
#endif
void main() {
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
vec3 normal=v_normal;
#endif
float z;vec4 color;
#ifdef ZERO_ROOF_RADIUS
z=float(normal.z > 0.00001);color=mix(v_color,v_roof_color,z);
#else
color=v_color;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;
#ifdef ZERO_ROOF_RADIUS
concave*=(1.0-z);
#endif
float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);color.rgb=color.rgb*shade;
#endif
#ifdef RENDER_SHADOWS
#ifdef ZERO_ROOF_RADIUS
normal=mix(normal,vec3(0.0,0.0,1.0),z);
#endif
color.xyz=shadowed_color_normal(color.xyz,normalize(normal),v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec4 v_color;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;
#endif
#ifdef ZERO_ROOF_RADIUS
varying vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
varying highp vec3 v_normal;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
v_normal=normal;
#endif
base=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=0.0;float c_ele;vec3 pos;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);
#else
h=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);
#ifdef RENDER_SHADOWS
v_pos_light_view_0=u_light_matrix_0*vec4(pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1);v_depth=gl_Position.w;
#endif
float NdotL=0.0;float colorvalue=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}v_color=vec4(0.0,0.0,0.0,1.0);
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting(color,NdotL);
#else
v_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));
#endif
v_color*=u_opacity;
#ifdef ZERO_ROOF_RADIUS
v_roof_color=vec4(0.0,0.0,0.0,1.0);
#ifdef LIGHTING_3D_MODE
v_roof_color=apply_lighting(color,calculate_NdotL(vec3(0.0,0.0,1.0)));
#else
float roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));
#endif
v_roof_color*=u_opacity;
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),fillExtrusionPattern:ar(`uniform vec2 u_texsize;uniform sampler2D u_image;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
varying float v_NdotL;
#endif
varying vec2 v_pos;varying vec4 v_lighting;uniform lowp float u_opacity;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color,v_NdotL)*u_opacity;
#else
out_color=out_color*v_lighting;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec2 v_pos;varying vec4 v_lighting;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
varying float v_NdotL;
#endif
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=z;vec3 p;float c_ele;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);
#else
p=vec3(pos_nx.xy,z);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0
? pos_nx.xy
: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_NdotL=NdotL;
#else
v_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;
#endif 
#ifdef FOG
v_fog_pos=fog_position(p);
#endif
}`),hillshadePrepare:ar(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
return texture2D(u_image,coord).a/4.0;
#else
vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;
#endif
}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(
(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)
)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(
deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:ar(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef LIGHTING_3D_MODE
gl_FragColor=apply_lighting(gl_FragColor);
#endif
#ifdef FOG
gl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),line:ar(`uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform sampler2D u_dash_image;varying vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform sampler2D u_gradient_image;
#endif
uniform float u_border_width;uniform vec4 u_border_color;float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
float linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);
#ifdef RENDER_LINE_DASH
float sdfdist=texture2D(u_dash_image,v_tex).a;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;alpha*=linearstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);
#endif
highp vec4 out_color;
#ifdef RENDER_LINE_GRADIENT
out_color=texture2D(u_gradient_image,v_uv.xy);
#else
out_color=color;
#endif
float trimmed=1.0;
#ifdef RENDER_LINE_TRIM_OFFSET
highp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);trimmed=0.0;}}
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
#ifdef RENDER_LINE_ALPHA_DISCARD
if (alpha < u_alpha_discard_threshold) {discard;}
#endif
#ifdef RENDER_LINE_BORDER
float edgeBlur=(u_border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);
#ifdef RENDER_LINE_BORDER_AUTO
float Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}
#else
out_color.rgb=mix(u_border_color.rgb*u_border_color.a*trimmed,out_color.rgb,smoothAlpha);
#endif
}
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define EXTRUDE_SCALE 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
attribute highp vec4 a_packed;
#endif
#ifdef RENDER_LINE_DASH
attribute float a_linesofar;
#endif
uniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;varying vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform float u_image_height;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
float a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];
#ifdef RENDER_LINE_GRADIENT
highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);
#else
v_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);
#endif
#endif
#ifdef RENDER_LINE_DASH
float scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/floorwidth,(-normal.y*height+dash.x+0.5)/u_texsize.y);
#endif
v_width2=vec2(outset,inset);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),linePattern:ar(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;vec2 pattern_size=vec2(display_size.x/u_tile_units_to_pixels,display_size.y);float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x=mod(v_linesofar/pattern_size.x*aspect,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));vec4 color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
color=apply_lighting(color);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),raster:ar(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(
dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply(out_color,v_fog_pos));
#endif
gl_FragColor=vec4(out_color*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),symbolIcon:ar(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}`),symbolSDF:ar(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}`),symbolTextAndIcon:ar(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}`),terrainRaster:ar(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
void main() {vec4 color=texture2D(u_image0,v_pos0);
#ifdef RENDER_SHADOWS
color.xyz=shadowed_color(color.xyz,v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
#ifdef ZERO_EXAGGERATION
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#else
color=fog_dither(fog_apply_from_vert(color,v_fog_opacity));
#endif
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
const float wireframeOffset=0.00015;void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;
#ifdef TERRAIN_WIREFRAME
elevation+=wireframeOffset;
#endif
v_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);
#ifdef FOG
#ifdef ZERO_EXAGGERATION
v_fog_pos=fog_position(decodedPos);
#else
v_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));
#endif
#endif
#ifdef RENDER_SHADOWS
vec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);v_depth=gl_Position.w;
#endif
}`),terrainDepth:ar(`#ifdef GL_ES
precision highp float;
#endif
varying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}`,"uniform mat4 u_matrix;attribute vec2 a_pos;varying float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:ar(`
varying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(
cos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;
#ifdef FOG
sky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);
#endif
sky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Us),skyboxGradient:ar(`varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));
#ifdef FOG
color.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;
#endif
color*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Us),skyboxCapture:ar(`
varying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;
#ifdef GL_ES
precision highp float;
#endif
#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)
#define BETA_M                  vec3(21e-6,21e-6,21e-6)
#define MIE_G                   0.76
#define DENSITY_HEIGHT_SCALE_R  8000.0
#define DENSITY_HEIGHT_SCALE_M  1200.0
#define PLANET_RADIUS           6360e3
#define ATMOSPHERE_RADIUS       6420e3
#define SAMPLE_STEPS            10
#define DENSITY_STEPS           4
float ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}`,"attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:ar(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifndef FOG
uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;
#endif
void main() {vec4 color;
#ifdef CUSTOM_ANTIALIASING
vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture2D(u_image0,v_pos0);color=vec4(raster.rgb*antialias,raster.a*antialias);
#else
color=texture2D(u_image0,v_pos0);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;
#ifdef GLOBE_POLES
attribute vec3 a_globe_pos;attribute vec2 a_uv;
#else
attribute vec2 a_pos;
#endif
varying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;vec2 uv=a_uv;
#else
float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);
#endif
v_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;
#ifdef GLOBE_POLES
vec3 up_vector=globe_derived_up_vector;
#else
vec3 up_vector=elevationVector(tile_pos);
#endif
float height=elevation(tile_pos);
#ifdef TERRAIN_WIREFRAME
height+=wireframeOffset;
#endif
globe_pos+=up_vector*height;
#ifndef GLOBE_POLES
globe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;
#endif
#ifdef GLOBE_POLES
vec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);
#else
vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);
#endif
gl_Position=u_proj_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
}`),globeAtmosphere:ar(`uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec3 u_start_color;uniform vec4 u_color;uniform vec4 u_space_color;uniform vec4 u_high_color;uniform float u_star_intensity;uniform float u_star_size;uniform float u_star_density;uniform float u_horizon_angle;uniform mat4 u_rotation_matrix;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;highp float random(highp vec3 p) {p=fract(p*vec3(23.2342,97.1231,91.2342));p+=dot(p.zxy,p.yxz+123.1234);return fract(p.x*p.y);}float stars(vec3 p,float scale,vec2 offset) {vec2 uv_scale=(u_viewport/u_star_size)*scale;vec3 position=vec3(p.xy*uv_scale+offset*u_viewport,p.z);vec3 q=fract(position)-0.5;vec3 id=floor(position);float random_visibility=step(random(id),u_star_density);float circle=smoothstep(0.5+u_star_intensity,0.5,length(q));return circle*random_visibility;}void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;
#ifdef PROJECTION_GLOBE_VIEW
globe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {discard;return;}
#endif
highp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?
0.0 : max(acos(dot(dir,horizon_dir)),0.0);float horizon_angle;
#ifdef PROJECTION_GLOBE_VIEW
highp vec3 closest_point=globe_pos_dot_dir*dir;float closest_point_to_center=length(closest_point-u_globe_pos);float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?
PI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);
#else
horizon_angle=horizon_angle_mercator;
#endif
horizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c =mix(color_stop_2,c2,t);float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);vec2 uv=gl_FragCoord.xy/u_viewport-0.5;float aspect_ratio=u_viewport.x/u_viewport.y;vec4 uv_dir=vec4(normalize(vec3(uv.x*aspect_ratio,uv.y,1.0)),1.0);uv_dir=u_rotation_matrix*uv_dir;vec3 n=abs(uv_dir.xyz);vec2 uv_remap=(n.x > n.y && n.x > n.z) ? uv_dir.yz/uv_dir.x:
(n.y > n.x && n.y > n.z) ? uv_dir.zx/uv_dir.y:
uv_dir.xy/uv_dir.z;uv_remap.x/=aspect_ratio;vec3 D=vec3(uv_remap,1.0);highp float star_field=0.0;if (u_star_intensity > 0.0) {star_field+=stars(D,1.2,vec2(0.0,0.0));star_field+=stars(D,1.0,vec2(1.0,0.0));star_field+=stars(D,0.8,vec2(0.0,1.0));star_field+=stars(D,0.6,vec2(1.0,1.0));star_field*=(1.0-pow(t,0.25+(1.0-u_high_color.a)*0.75));c+=star_field*alpha_2;}c=dither(c,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=vec4(c,a);}`,`attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(
mix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}`)};function El(p,s){const d=p.replace(/\s*\/\/[^\n]*\n/g,`
`).split(`
`);for(let g of d)if(g=g.trim(),g[0]==="#"&&g.includes("if")&&!g.includes("endif")){g=g.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const _=g.split(" ");for(const b of _)s.includes(b)||s.push(b)}}function ar(p,s){const d=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,g=s.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),_={},b=[...Cc];return El(p,b),El(s,b),{fragmentSource:p=p.replace(d,(I,P,O,B,$)=>(_[$]=!0,P==="define"?`
#ifndef HAS_UNIFORM_u_${$}
varying ${O} ${B} ${$};
#else
uniform ${O} ${B} u_${$};
#endif
`:`
#ifdef HAS_UNIFORM_u_${$}
    ${O} ${B} ${$} = u_${$};
#endif
`)),vertexSource:s=s.replace(d,(I,P,O,B,$)=>{const Z=B==="float"?"vec2":"vec4",oe=$.match(/color/)?"color":Z;return _[$]?P==="define"?`
#ifndef HAS_UNIFORM_u_${$}
uniform lowp float u_${$}_t;
attribute ${O} ${Z} a_${$};
varying ${O} ${B} ${$};
#else
uniform ${O} ${B} u_${$};
#endif
`:oe==="vec4"?`
#ifndef HAS_UNIFORM_u_${$}
    ${$} = a_${$};
#else
    ${O} ${B} ${$} = u_${$};
#endif
`:`
#ifndef HAS_UNIFORM_u_${$}
    ${$} = unpack_mix_${oe}(a_${$}, u_${$}_t);
#else
    ${O} ${B} ${$} = u_${$};
#endif
`:P==="define"?`
#ifndef HAS_UNIFORM_u_${$}
uniform lowp float u_${$}_t;
attribute ${O} ${Z} a_${$};
#else
uniform ${O} ${B} u_${$};
#endif
`:oe==="vec4"?`
#ifndef HAS_UNIFORM_u_${$}
    ${O} ${B} ${$} = a_${$};
#else
    ${O} ${B} ${$} = u_${$};
#endif
`:`
#ifndef HAS_UNIFORM_u_${$}
    ${O} ${B} ${$} = unpack_mix_${oe}(a_${$}, u_${$}_t);
#else
    ${O} ${B} ${$} = u_${$};
#endif
`}),staticAttributes:g,usedDefines:b}}class G0{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(s,d,g,_,b,I,P){this.context=s;let O=this.boundPaintVertexBuffers.length!==_.length;for(let $=0;!O&&$<_.length;$++)this.boundPaintVertexBuffers[$]!==_[$]&&(O=!0);let B=this.boundDynamicVertexBuffers.length!==P.length;for(let $=0;!B&&$<P.length;$++)this.boundDynamicVertexBuffers[$]!==P[$]&&(B=!0);if(!s.extVertexArrayObject||!this.vao||this.boundProgram!==d||this.boundLayoutVertexBuffer!==g||O||B||this.boundIndexBuffer!==b||this.boundVertexOffset!==I)this.freshBind(d,g,_,b,I,P);else{s.bindVertexArrayOES.set(this.vao);for(const $ of P)$&&$.bind();b&&b.dynamicDraw&&b.bind()}}freshBind(s,d,g,_,b,I){let P;const O=s.numAttributes,B=this.context,$=B.gl;if(B.extVertexArrayObject)this.vao&&this.destroy(),this.vao=B.extVertexArrayObject.createVertexArrayOES(),B.bindVertexArrayOES.set(this.vao),P=0,this.boundProgram=s,this.boundLayoutVertexBuffer=d,this.boundPaintVertexBuffers=g,this.boundIndexBuffer=_,this.boundVertexOffset=b,this.boundDynamicVertexBuffers=I;else{P=B.currentNumAttributes||0;for(let Z=O;Z<P;Z++)$.disableVertexAttribArray(Z)}d.enableAttributes($,s),d.bind(),d.setVertexAttribPointers($,s,b);for(const Z of g)Z.enableAttributes($,s),Z.bind(),Z.setVertexAttribPointers($,s,b);for(const Z of I)Z&&(Z.enableAttributes($,s),Z.bind(),Z.setVertexAttribPointers($,s,b));_&&_.bind(),B.currentNumAttributes=O}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function Bh(p,s){const d=Math.pow(2,s.canonical.z),g=s.canonical.y;return[new l.MercatorCoordinate(0,g/d).toLngLat().lat,new l.MercatorCoordinate(0,(g+1)/d).toLngLat().lat]}function zm(p,s,d,g,_,b,I){const P=p.context,O=P.gl,B=d.fbo;if(!B)return;p.prepareDrawTile();const $=p.useProgram("hillshade");P.activeTexture.set(O.TEXTURE0),O.bindTexture(O.TEXTURE_2D,B.colorAttachment.get());const Z=((ue,ge,K,se)=>{const xe=K.paint.get("hillshade-shadow-color"),be=K.paint.get("hillshade-highlight-color"),Re=K.paint.get("hillshade-accent-color");let ze=K.paint.get("hillshade-illumination-direction")*(Math.PI/180);K.paint.get("hillshade-illumination-anchor")==="viewport"&&(ze-=ue.transform.angle);const Oe=!ue.options.moving;return{u_matrix:se||ue.transform.calculateProjMatrix(ge.tileID.toUnwrapped(),Oe),u_image:0,u_latrange:Bh(0,ge.tileID),u_light:[K.paint.get("hillshade-exaggeration"),ze],u_shadow:xe,u_highlight:be,u_accent:Re}})(p,d,g,p.terrain?s.projMatrix:null);p.prepareDrawProgram(P,$,s.toUnwrapped());const{tileBoundsBuffer:oe,tileBoundsIndexBuffer:le,tileBoundsSegments:he}=p.getTileBoundsBuffers(d);$.draw(P,O.TRIANGLES,_,b,I,l.CullFaceMode.disabled,Z,g.id,oe,le,he)}function Nh(p,s,d){if(!s.needsDEMTextureUpload)return;const g=p.context,_=g.gl;g.pixelStoreUnpackPremultiplyAlpha.set(!1),s.demTexture=s.demTexture||p.getTileTexture(d.stride);const b=d.getPixels();s.demTexture?s.demTexture.update(b,{premultiply:!1}):s.demTexture=new l.Texture(g,b,_.RGBA,{premultiply:!1}),s.needsDEMTextureUpload=!1}function km(p,s,d,g,_,b){const I=p.context,P=I.gl;if(!s.dem)return;const O=s.dem;if(I.activeTexture.set(P.TEXTURE1),Nh(p,s,O),!s.demTexture)return;s.demTexture.bind(P.NEAREST,P.CLAMP_TO_EDGE);const B=O.dim;I.activeTexture.set(P.TEXTURE0);let $=s.fbo;if(!$){const he=new l.Texture(I,{width:B,height:B,data:null},P.RGBA);he.bind(P.LINEAR,P.CLAMP_TO_EDGE),$=s.fbo=I.createFramebuffer(B,B,!0),$.colorAttachment.set(he.texture)}I.bindFramebuffer.set($.framebuffer),I.viewport.set([0,0,B,B]);const{tileBoundsBuffer:Z,tileBoundsIndexBuffer:oe,tileBoundsSegments:le}=p.getMercatorTileBoundsBuffers();p.useProgram("hillshadePrepare").draw(I,P.TRIANGLES,g,_,b,l.CullFaceMode.disabled,((he,ue)=>{const ge=ue.stride,K=l.create();return l.ortho(K,0,l.EXTENT,-l.EXTENT,0,0,1),l.translate(K,K,[0,-l.EXTENT,0]),{u_matrix:K,u_image:1,u_dimension:[ge,ge],u_zoom:he.overscaledZ,u_unpack:ue.unpackVector}})(s.tileID,O),d.id,Z,oe,le),s.needsHillshadePrepare=!1}const jh=p=>({u_matrix:new l.UniformMatrix4f(p),u_image0:new l.Uniform1i(p),u_skirt_height:new l.Uniform1f(p)}),Cl=(p,s)=>({u_matrix:p,u_image0:0,u_skirt_height:s}),Lu=(p,s,d,g,_,b,I,P,O,B,$,Z,oe,le,he)=>({u_proj_matrix:Float32Array.from(p),u_globe_matrix:s,u_normalize_matrix:Float32Array.from(g),u_merc_matrix:d,u_zoom_transition:_,u_merc_center:b,u_image0:0,u_frustum_tl:I,u_frustum_tr:P,u_frustum_br:O,u_frustum_bl:B,u_globe_pos:$,u_globe_radius:Z,u_viewport:oe,u_grid_matrix:he?Float32Array.from(he):new Float32Array(9),u_skirt_height:le});function Tl(p,s){return p!=null&&s!=null&&!(!p.hasData()||!s.hasData())&&p.demTexture!=null&&s.demTexture!=null&&p.tileID.key!==s.tileID.key}const Va=new class{constructor(){this.operations={}}newMorphing(p,s,d,g,_){if(p in this.operations){const b=this.operations[p];b.to.tileID.key!==d.tileID.key&&(b.queued=d)}else this.operations[p]={startTime:g,phase:0,duration:_,from:s,to:d,queued:null}}getMorphValuesForProxy(p){if(!(p in this.operations))return null;const s=this.operations[p];return{from:s.from,to:s.to,phase:s.phase}}update(p){for(const s in this.operations){const d=this.operations[s];for(d.phase=(p-d.startTime)/d.duration;d.phase>=1||!this._validOp(d);)if(!this._nextOp(d,p)){delete this.operations[s];break}}}_nextOp(p,s){return!!p.queued&&(p.from=p.to,p.to=p.queued,p.queued=null,p.phase=0,p.startTime=s,!0)}_validOp(p){return p.from.hasData()&&p.to.hasData()}},Vs={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function Du(p){return 6*Math.pow(1.5,22-p)}function Lm(p,s){const d=1<<p.z;return!s&&(p.x===0||p.x===d-1)||p.y===0||p.y===d-1}const Tc=p=>({u_matrix:p});function Uh(p,s,d,g,_){if(_>0){const b=l.exported.now(),I=(b-p.timeAdded)/_,P=s?(b-s.timeAdded)/_:-1,O=d.getSource(),B=g.coveringZoomLevel({tileSize:O.tileSize,roundZoom:O.roundZoom}),$=!s||Math.abs(s.tileID.overscaledZ-B)>Math.abs(p.tileID.overscaledZ-B),Z=$&&p.refreshedUponExpiration?1:l.clamp($?I:1-P,0,1);return p.refreshedUponExpiration&&I>=1&&(p.refreshedUponExpiration=!1),s?{opacity:1,mix:1-Z}:{opacity:Z,mix:0}}return{opacity:1,mix:0}}class Vh extends l.SourceCache{constructor(s){const d={type:"raster-dem",maxzoom:s.transform.maxZoom},g=new Be(Sn(),null),_=un("mock-dem",d,g,s.style);super("mock-dem",_,!1),_.setEventedParent(this),this._sourceLoaded=!0}_loadTile(s,d){s.state="loaded",d(null)}}class $u extends l.SourceCache{constructor(s){const d=un("proxy",{type:"geojson",maxzoom:s.transform.maxZoom},new Be(Sn(),null),s.style);super("proxy",d,!1),d.setEventedParent(this),this.map=this.getSource().map=s,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(s,d,g){if(s.freezeTileCoverage)return;this.transform=s;const _=s.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((b,I)=>{if(b[I.key]="",!this._tiles[I.key]){const P=new l.Tile(I,this._source.tileSize*I.overscaleFactor(),s.tileZoom);P.state="loaded",this._tiles[I.key]=P}return b},{});for(const b in this._tiles)b in _||(this.freeFBO(b),this._tiles[b].unloadVectorData(),delete this._tiles[b])}freeFBO(s){const d=this.proxyCachedFBO[s];if(d!==void 0){const g=Object.values(d);this.renderCachePool.push(...g),delete this.proxyCachedFBO[s]}}deallocRenderCache(){this.renderCache.forEach(s=>s.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class Fu extends l.OverscaledTileID{constructor(s,d,g){super(s.overscaledZ,s.wrap,s.canonical.z,s.canonical.x,s.canonical.y),this.proxyTileKey=d,this.projMatrix=g}}class Hh extends l.Elevation{constructor(s,d){super(),this.painter=s,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[g,_,b]=function(O){const B=new l.StructArrayLayout2i4,$=new l.StructArrayLayout3ui6,Z=131;B.reserve(17161),$.reserve(33800);const oe=l.EXTENT/128,le=l.EXTENT+oe/2,he=le+oe;for(let ge=-oe;ge<he;ge+=oe)for(let K=-oe;K<he;K+=oe){const se=K<0||K>le||ge<0||ge>le?24575:0,xe=l.clamp(Math.round(K),0,l.EXTENT),be=l.clamp(Math.round(ge),0,l.EXTENT);B.emplaceBack(xe+se,be)}const ue=(ge,K)=>{const se=K*Z+ge;$.emplaceBack(se+1,se,se+Z),$.emplaceBack(se+Z,se+Z+1,se+1)};for(let ge=1;ge<129;ge++)for(let K=1;K<129;K++)ue(K,ge);return[0,129].forEach(ge=>{for(let K=0;K<130;K++)ue(K,ge),ue(ge,K)}),[B,$,32768]}(),I=s.context;this.gridBuffer=I.createVertexBuffer(g,l.posAttributes.members),this.gridIndexBuffer=I.createIndexBuffer(_),this.gridSegments=l.SegmentVector.simpleSegment(0,0,g.length,_.length),this.gridNoSkirtSegments=l.SegmentVector.simpleSegment(0,0,g.length,b),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new $u(d.map),this.orthoMatrix=l.create(),l.ortho(this.orthoMatrix,this.painter.transform.projection.name==="globe"?.015:0,l.EXTENT,0,l.EXTENT,0,1);const P=I.gl;this._overlapStencilMode=new l.StencilMode({func:P.GEQUAL,mask:255},0,255,P.KEEP,P.KEEP,P.REPLACE),this._previousZoom=s.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=d,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new Vh(d.map)}set style(s){s.on("data",this._onStyleDataEvent.bind(this)),s.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=s,this._checkRenderCacheEfficiency(),this._style.map.on("moveend",()=>{this._clearLineLayersFromRenderCache()})}update(s,d,g){if(s&&s.terrain){this._style!==s&&(this.style=s),this.enabled=!0;const _=s.terrain.properties;this.sourceCache=s.terrain.drapeRenderMode===0?this._mockSourceCache:s._getSourceCache(_.get("source")),this._exaggeration=_.get("exaggeration");const b=()=>{this.sourceCache.used&&l.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.
This leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const I=this.getScaledDemTileSize();this.sourceCache.update(d,I,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,b(),this._initializing=!0),b(),d.updateElevation(!0,g),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(d),this._emptyDEMTextureDirty=!0}else this._disable()}resetTileLookupCache(s){this._findCoveringTileCache[s]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_checkRenderCacheEfficiency(){const s=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||s.efficiency!==100&&l.warnOnce(`Terrain render cache efficiency is not optimal (${s.efficiency}%) and performance
                may be affected negatively, consider placing all background, fill and line layers before layer
                with id '${s.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(s){s.coord&&s.dataType==="source"?this._clearRenderCacheForTile(s.sourceCacheId,s.coord):s.dataType==="style"&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const s in this._style._sourceCaches)this._style._sourceCaches[s].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach(s=>s.fb.destroy()),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const s=2*this.proxySourceCache.getSource().tileSize;return[s,s]}set useVertexMorphing(s){this._useVertexMorphing=s}updateTileBinding(s){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const d=this.proxySourceCache,g=this.painter.transform;this._initializing&&(this._initializing=g._centerAltitude===0&&this.getAtPointOrZero(l.MercatorCoordinate.fromLngLat(g.center),-1)===-1,this._emptyDEMTextureDirty=!this._initializing);const _=this.proxyCoords=d.getIds().map(O=>{const B=d.getTileByID(O).tileID;return B.projMatrix=g.calculateProjMatrix(B.toUnwrapped()),B});(function(O,B){const $=B.transform.pointCoordinate(B.transform.getCameraPoint()),Z=new l.Point($.x,$.y);O.sort((oe,le)=>{if(le.overscaledZ-oe.overscaledZ)return le.overscaledZ-oe.overscaledZ;const he=new l.Point(oe.canonical.x+(1<<oe.canonical.z)*oe.wrap,oe.canonical.y),ue=new l.Point(le.canonical.x+(1<<le.canonical.z)*le.wrap,le.canonical.y),ge=Z.mult(1<<oe.canonical.z);return ge.x-=.5,ge.y-=.5,ge.distSqr(he)-ge.distSqr(ue)})})(_,this.painter),this._previousZoom=g.zoom;const b=this.proxyToSource||{};this.proxyToSource={},_.forEach(O=>{this.proxyToSource[O.key]={}}),this.terrainTileForTile={};const I=this._style._sourceCaches;for(const O in I){const B=I[O];if(!B.used||(B!==this.sourceCache&&this.resetTileLookupCache(B.id),this._setupProxiedCoordsForOrtho(B,s[O],b),B.usedForTerrain))continue;const $=s[O];B.getSource().reparseOverscaled&&this._assignTerrainTiles($)}this.proxiedCoords[d.id]=_.map(O=>new Fu(O,O.key,this.orthoMatrix)),this._assignTerrainTiles(_),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(b),this.renderingToTexture=!1,this._updateTimestamp=l.exported.now();const P={};this._visibleDemTiles=[];for(const O of this.proxyCoords){const B=this.terrainTileForTile[O.key];if(!B)continue;const $=B.tileID.key;$ in P||(this._visibleDemTiles.push(B),P[$]=$)}}_assignTerrainTiles(s){this._initializing||s.forEach(d=>{if(this.terrainTileForTile[d.key])return;const g=this._findTileCoveringTileID(d,this.sourceCache);g&&(this.terrainTileForTile[d.key]=g)})}_prepareDEMTextures(){const s=this.painter.context,d=s.gl;for(const g in this.terrainTileForTile){const _=this.terrainTileForTile[g],b=_.dem;!b||_.demTexture&&!_.needsDEMTextureUpload||(s.activeTexture.set(d.TEXTURE1),Nh(this.painter,_,b))}}_prepareDemTileUniforms(s,d,g,_){if(!d||d.demTexture==null)return!1;const b=s.tileID.canonical,I=Math.pow(2,d.tileID.canonical.z-b.z),P=_||"";return g[`u_dem_tl${P}`]=[b.x*I%1,b.y*I%1],g[`u_dem_scale${P}`]=I,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const s=this.painter.context,d=s.gl;if(!this._emptyDepthBufferTexture){const g=new l.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new l.Texture(s,g,d.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let s=0;const d=this._visibleDemTiles.reduce((g,_)=>{if(!_.dem)return g;const b=_.dem.tree.minimums[0];return b>0&&s++,g+b},0);return s?d/s:0}_updateEmptyDEMTexture(){const s=this.painter.context,d=s.gl;s.activeTexture.set(d.TEXTURE2);const g=this._getLoadedAreaMinimum(),_=new l.RGBAImage({width:1,height:1},new Uint8Array(l.DEMData.pack(g,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;let b=this._emptyDEMTexture;return b?b.update(_,{premultiply:!1}):b=this._emptyDEMTexture=new l.Texture(s,_,d.RGBA,{premultiply:!1}),b}setupElevationDraw(s,d,g){const _=this.painter.context,b=_.gl,I=(P=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:l.DEMData.getUnpackVector(P),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});var P;I.u_dem_size=this.sourceCache.getSource().tileSize,I.u_exaggeration=this.exaggeration();let O=null,B=null,$=1;if(g&&g.morphing&&this._useVertexMorphing){const Z=g.morphing.srcDemTile,oe=g.morphing.dstDemTile;$=g.morphing.phase,Z&&oe&&(this._prepareDemTileUniforms(s,Z,I,"_prev")&&(B=Z),this._prepareDemTileUniforms(s,oe,I)&&(O=oe))}if(B&&O?(_.activeTexture.set(b.TEXTURE2),O.demTexture.bind(b.NEAREST,b.CLAMP_TO_EDGE,b.NEAREST),_.activeTexture.set(b.TEXTURE4),B.demTexture.bind(b.NEAREST,b.CLAMP_TO_EDGE,b.NEAREST),I.u_dem_lerp=$):(O=this.terrainTileForTile[s.tileID.key],_.activeTexture.set(b.TEXTURE2),(this._prepareDemTileUniforms(s,O,I)?O.demTexture:this.emptyDEMTexture).bind(b.NEAREST,b.CLAMP_TO_EDGE)),_.activeTexture.set(b.TEXTURE3),g&&g.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(b.NEAREST,b.CLAMP_TO_EDGE),this._depthFBO&&(I.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(b.NEAREST,b.CLAMP_TO_EDGE),I.u_depth_size_inv=[1,1]),g&&g.useMeterToDem&&O){const Z=(1<<O.tileID.canonical.z)*l.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;I.u_meter_to_dem=Z}if(g&&g.labelPlaneMatrixInv&&(I.u_label_plane_matrix_inv=g.labelPlaneMatrixInv),d.setTerrainUniformValues(_,I),this.painter.transform.projection.name==="globe"){const Z=this.globeUniformValues(this.painter.transform,s.tileID.canonical,g&&g.useDenormalizedUpVectorScale);d.setGlobeUniformValues(_,Z)}}globeUniformValues(s,d,g){const _=s.projection;return{u_tile_tl_up:_.upVector(d,0,0),u_tile_tr_up:_.upVector(d,l.EXTENT,0),u_tile_br_up:_.upVector(d,l.EXTENT,l.EXTENT),u_tile_bl_up:_.upVector(d,0,l.EXTENT),u_tile_up_scale:g?l.globeMetersToEcef(1):_.upVectorScale(d,s.center.lat,s.worldSize).metersToTile}}renderToBackBuffer(s){const d=this.painter,g=this.painter.context;s.length!==0&&(g.bindFramebuffer.set(null),g.viewport.set([0,0,d.width,d.height]),d.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(_,b,I,P,O){if(_.transform.projection.name==="globe")(function(B,$,Z,oe,le){const he=B.context,ue=he.gl;let ge,K;const se=B.options.showTerrainWireframe?2:0,xe=B.transform,be=l.globeUseCustomAntiAliasing(B,he,xe),Re=(Et,Xe)=>{if(K===Et)return;const dt=[Vs[Et],"PROJECTION_GLOBE_VIEW"];be&&dt.push("CUSTOM_ANTIALIASING"),Xe&&dt.push(Vs[se]),ge=B.useProgram("globeRaster",null,dt),K=Et},ze=B.colorModeForRenderPass(),Oe=new l.DepthMode(ue.LEQUAL,l.DepthMode.ReadWrite,B.depthRangeFor3D);Va.update(le);const Ve=l.calculateGlobeMercatorMatrix(xe),Ue=[l.mercatorXfromLng(xe.center.lng),l.mercatorYfromLat(xe.center.lat)],Ke=se?[!1,!0]:[!1],Pt=B.globeSharedBuffers,qe=[xe.width*l.exported.devicePixelRatio,xe.height*l.exported.devicePixelRatio],ht=Float32Array.from(xe.globeMatrix),et={useDenormalizedUpVectorScale:!0};if(Ke.forEach(Et=>{const Xe=B.transform,dt=Du(Xe.zoom)*$.exaggeration();K=-1;const zt=Et?ue.LINES:ue.TRIANGLES;for(const vt of oe){const kt=Z.getTile(vt),dn=l.StencilMode.disabled,Rn=$.prevTerrainTileForTile[vt.key],en=$.terrainTileForTile[vt.key];Tl(Rn,en)&&Va.newMorphing(vt.key,Rn,en,le,250),he.activeTexture.set(ue.TEXTURE0),kt.texture.bind(ue.LINEAR,ue.CLAMP_TO_EDGE);const _n=Va.getMorphValuesForProxy(vt.key),Hn=_n?1:0;_n&&l.extend$1(et,{morphing:{srcDemTile:_n.from,dstDemTile:_n.to,phase:l.easeCubicInOut(_n.phase)}});const Un=l.tileCornersToBounds(vt.canonical),cn=l.getLatitudinalLod(Un.getCenter().lat),ur=l.getGridMatrix(vt.canonical,Un,cn,Xe.worldSize/Xe._pixelsPerMercatorPixel),vr=l.globeNormalizeECEF(l.globeTileBounds(vt.canonical)),yr=Lu(Xe.projMatrix,ht,Ve,vr,l.globeToMercatorTransition(Xe.zoom),Ue,Xe.frustumCorners.TL,Xe.frustumCorners.TR,Xe.frustumCorners.BR,Xe.frustumCorners.BL,Xe.globeCenterInViewSpace,Xe.globeRadius,qe,dt,ur);if(Re(Hn,Et),$.setupElevationDraw(kt,ge,et),B.prepareDrawProgram(he,ge,vt.toUnwrapped()),Pt){const[_r,Hi,Ti]=Et?Pt.getWirefameBuffers(B.context,cn):Pt.getGridBuffers(cn,dt!==0);ge.draw(he,zt,Oe,dn,ze,l.CullFaceMode.backCCW,yr,"globe_raster",_r,Hi,Ti)}}}),Pt){const Et=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];be&&Et.push("CUSTOM_ANTIALIASING"),ge=B.useProgram("globeRaster",null,Et);for(const Xe of oe){const{x:dt,y:zt,z:vt}=Xe.canonical,kt=zt===0,dn=zt===(1<<vt)-1,[Rn,en,_n,Hn]=Pt.getPoleBuffers(vt);if(Hn&&(kt||dn)){const Un=Z.getTile(Xe);he.activeTexture.set(ue.TEXTURE0),Un.texture.bind(ue.LINEAR,ue.CLAMP_TO_EDGE);let cn=l.globePoleMatrixForTile(vt,dt,xe);const ur=l.globeNormalizeECEF(l.globeTileBounds(Xe.canonical)),vr=(yr,_r)=>yr.draw(he,ue.TRIANGLES,Oe,l.StencilMode.disabled,ze,l.CullFaceMode.disabled,Lu(xe.projMatrix,cn,cn,ur,0,Ue,xe.frustumCorners.TL,xe.frustumCorners.TR,xe.frustumCorners.BR,xe.frustumCorners.BL,xe.globeCenterInViewSpace,xe.globeRadius,qe,0),"globe_pole_raster",_r,_n,Hn);$.setupElevationDraw(Un,ge,et),B.prepareDrawProgram(he,ge,Xe.toUnwrapped()),kt&&vr(ge,Rn),dn&&(cn=l.scale(l.create(),cn,[1,-1,1]),vr(ge,en))}}}})(_,b,I,P,O);else{const B=_.context,$=B.gl;let Z,oe;const le=_.options.showTerrainWireframe?2:0,he=(xe,be)=>{if(oe===xe)return;const Re=[Vs[xe]];be&&Re.push(Vs[le]),Z=_.useProgram("terrainRaster",null,Re),oe=xe},ue=_.colorModeForRenderPass(),ge=new l.DepthMode($.LEQUAL,l.DepthMode.ReadWrite,_.depthRangeFor3D);Va.update(O);const K=_.transform,se=Du(K.zoom)*b.exaggeration();(le?[!1,!0]:[!1]).forEach(xe=>{oe=-1;const be=xe?$.LINES:$.TRIANGLES,[Re,ze]=xe?b.getWirefameBuffer():[b.gridIndexBuffer,b.gridSegments];for(const Oe of P){const Ve=I.getTile(Oe),Ue=l.StencilMode.disabled,Ke=b.prevTerrainTileForTile[Oe.key],Pt=b.terrainTileForTile[Oe.key];Tl(Ke,Pt)&&Va.newMorphing(Oe.key,Ke,Pt,O,250),B.activeTexture.set($.TEXTURE0),Ve.texture.bind($.LINEAR,$.CLAMP_TO_EDGE,$.LINEAR_MIPMAP_NEAREST);const qe=Va.getMorphValuesForProxy(Oe.key),ht=qe?1:0;let et;qe&&(et={morphing:{srcDemTile:qe.from,dstDemTile:qe.to,phase:l.easeCubicInOut(qe.phase)}});const Et=Cl(Oe.projMatrix,Lm(Oe.canonical,K.renderWorldCopies)?se/10:se);he(ht,xe),b.setupElevationDraw(Ve,Z,et),_.prepareDrawProgram(B,Z,Oe.toUnwrapped()),Z.draw(B,be,ge,Ue,ue,l.CullFaceMode.backCCW,Et,"terrain_raster",b.gridBuffer,Re,ze)}})}}(d,this,this.proxySourceCache,s,this._updateTimestamp),this.renderingToTexture=!0,d.gpuTimingDeferredRenderEnd(),s.splice(0,s.length))}renderBatch(s){if(this._drapedRenderBatches.length===0)return s+1;this.renderingToTexture=!0;const d=this.painter,g=this.painter.context,_=this.proxySourceCache,b=this.proxiedCoords[_.id],I=this._drapedRenderBatches.shift(),P=[],O=d.style.order;let B=0;for(const $ of b){const Z=_.getTileByID($.proxyTileKey),oe=_.proxyCachedFBO[$.key]?_.proxyCachedFBO[$.key][s]:void 0,le=oe!==void 0?_.renderCache[oe]:this.pool[B++],he=oe!==void 0;if(Z.texture=le.tex,he&&!le.dirty){P.push(Z.tileID);continue}let ue;g.bindFramebuffer.set(le.fb.framebuffer),this.renderedToTile=!1,le.dirty&&(g.clear({color:l.Color.transparent,stencil:0}),le.dirty=!1);for(let ge=I.start;ge<=I.end;++ge){const K=d.style._layers[O[ge]];if(K.isHidden(d.transform.zoom))continue;const se=d.style._getLayerSourceCache(K),xe=se?this.proxyToSource[$.key][se.id]:[$];if(!xe)continue;const be=xe;g.viewport.set([0,0,le.fb.width,le.fb.height]),ue!==(se?se.id:null)&&(this._setupStencil(le,xe,K,se),ue=se?se.id:null),d.renderLayer(d,se,K,be)}this.renderedToTile?(le.dirty=!0,P.push(Z.tileID)):he||--B,B===5&&(B=0,this.renderToBackBuffer(P))}return this.renderToBackBuffer(P),this.renderingToTexture=!1,g.bindFramebuffer.set(null),g.viewport.set([0,0,d.width,d.height]),I.end+1}postRender(){}renderCacheEfficiency(s){const d=s.order.length;if(d===0)return{efficiency:100};let g,_=0,b=0,I=!1;for(let P=0;P<d;++P){const O=s._layers[s.order[P]];this._style.isLayerDraped(O)?(I&&++_,++b):I||(I=!0,g=O.id)}return b===0?{efficiency:100}:{efficiency:100*(1-_/b),firstUndrapedLayer:g}}getMinElevationBelowMSL(){let s=0;return this._visibleDemTiles.filter(d=>d.dem).forEach(d=>{s=Math.min(s,d.dem.tree.minimums[0])}),s===0?s:(s-30)*this._exaggeration}raycast(s,d,g){if(!this._visibleDemTiles)return null;const _=this._visibleDemTiles.filter(b=>b.dem).map(b=>{const I=b.tileID,P=1<<I.overscaledZ,{x:O,y:B}=I.canonical,$=O/P,Z=(O+1)/P,oe=B/P,le=(B+1)/P;return{minx:$,miny:oe,maxx:Z,maxy:le,t:b.dem.tree.raycastRoot($,oe,Z,le,s,d,g),tile:b}});_.sort((b,I)=>(b.t!==null?b.t:Number.MAX_VALUE)-(I.t!==null?I.t:Number.MAX_VALUE));for(const b of _){if(b.t==null)return null;const I=b.tile.dem.tree.raycast(b.minx,b.miny,b.maxx,b.maxy,s,d,g);if(I!=null)return I}return null}_createFBO(){const s=this.painter.context,d=s.gl,g=this.drapeBufferSize;s.activeTexture.set(d.TEXTURE0);const _=new l.Texture(s,{width:g[0],height:g[1],data:null},d.RGBA);_.bind(d.LINEAR,d.CLAMP_TO_EDGE);const b=s.createFramebuffer(g[0],g[1],!1);return b.colorAttachment.set(_.texture),b.depthAttachment=new we(s,b.framebuffer),this._sharedDepthStencil===void 0?(this._sharedDepthStencil=s.createRenderbuffer(s.gl.DEPTH_STENCIL,g[0],g[1]),this._stencilRef=0,b.depthAttachment.set(this._sharedDepthStencil),s.clear({stencil:0})):b.depthAttachment.set(this._sharedDepthStencil),s.extTextureFilterAnisotropic&&!s.extTextureFilterAnisotropicForceOff&&d.texParameterf(d.TEXTURE_2D,s.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,s.extTextureFilterAnisotropicMax),{fb:b,tex:_,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const s in this._style._sourceCaches)if(this._style._sourceCaches[s].hasTransition())return!0;return this._style.order.some(s=>{const d=this._style._layers[s],g=d.isHidden(this.painter.transform.zoom);return d.type==="custom"?!g&&d.shouldRedrape():!g&&d.hasTransition()})}_clearLineLayersFromRenderCache(){let s=!1;for(const g of this._style._getSources())if(g instanceof Je){s=!0;break}if(!s)return;const d={};for(let g=0;g<this._style.order.length;++g){const _=this._style._layers[this._style.order[g]],b=this._style._getLayerSourceCache(_);if(b&&!d[b.id]&&!_.isHidden(this.painter.transform.zoom)&&_.type==="line"&&_.widthExpression()instanceof l.ZoomDependentExpression){d[b.id]=!0;for(const I of this.proxyCoords){const P=this.proxyToSource[I.key][b.id];if(P)for(const O of P)this._clearRenderCacheForTile(b.id,O)}}}}_clearRasterLayersFromRenderCache(){let s=!1;for(const g in this._style._sourceCaches)if(this._style._sourceCaches[g]._source instanceof We){s=!0;break}if(!s)return;const d={};for(let g=0;g<this._style.order.length;++g){const _=this._style._layers[this._style.order[g]],b=this._style._getLayerSourceCache(_);if(!b||d[b.id]||_.isHidden(this.painter.transform.zoom)||_.type!=="raster")continue;const I=_.paint.get("raster-fade-duration");for(const P of this.proxyCoords){const O=this.proxyToSource[P.key][b.id];if(O)for(const B of O){const $=Uh(b.getTile(B),b.findLoadedParent(B,0),b,this.painter.transform,I);($.opacity!==1||$.mix!==0)&&this._clearRenderCacheForTile(b.id,B)}}}}_setupDrapedRenderBatches(){const s=this._style.order,d=s.length;if(d===0)return;const g=[];let _,b=0,I=this._style._layers[s[b]];for(;!this._style.isLayerDraped(I)&&I.isHidden(this.painter.transform.zoom)&&++b<d;)I=this._style._layers[s[b]];for(;b<d;++b){const P=this._style._layers[s[b]];P.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(P)?_===void 0&&(_=b):_!==void 0&&(g.push({start:_,end:b-1}),_=void 0))}_!==void 0&&g.push({start:_,end:b-1}),this._drapedRenderBatches=g}_setupRenderCache(s){const d=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,d.renderCache.length>d.renderCachePool.length){const I=Object.values(d.proxyCachedFBO);d.proxyCachedFBO={};for(let P=0;P<I.length;++P){const O=Object.values(I[P]);d.renderCachePool.push(...O)}}return}this._clearRasterLayersFromRenderCache();const g=this.proxyCoords,_=this._tilesDirty;for(let I=g.length-1;I>=0;I--){const P=g[I];if(d.getTileByID(P.key),d.proxyCachedFBO[P.key]!==void 0){const O=s[P.key],B=this.proxyToSource[P.key];let $=0;for(const Z in B){const oe=B[Z],le=O[Z];if(!le||le.length!==oe.length||oe.some((he,ue)=>he!==le[ue]||_[Z]&&_[Z].hasOwnProperty(he.key))){$=-1;break}++$}for(const Z in d.proxyCachedFBO[P.key])d.renderCache[d.proxyCachedFBO[P.key][Z]].dirty=$<0||$!==Object.values(O).length}}const b=[...this._drapedRenderBatches];b.sort((I,P)=>P.end-P.start-(I.end-I.start));for(const I of b)for(const P of g){if(d.proxyCachedFBO[P.key])continue;let O=d.renderCachePool.pop();O===void 0&&d.renderCache.length<50&&(O=d.renderCache.length,d.renderCache.push(this._createFBO())),O!==void 0&&(d.proxyCachedFBO[P.key]={},d.proxyCachedFBO[P.key][I.start]=O,d.renderCache[O].dirty=!0)}this._tilesDirty={}}_setupStencil(s,d,g,_){if(!_||!this._sourceTilesOverlap[_.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const b=this.painter.context,I=b.gl;if(d.length<=1)return void(this._overlapStencilType=!1);let P;if(g.isTileClipped())P=d.length,this._overlapStencilMode.test={func:I.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(d[0].overscaledZ>d[d.length-1].overscaledZ))return void(this._overlapStencilType=!1);P=1,this._overlapStencilMode.test={func:I.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+P>255&&(b.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=P,this._overlapStencilMode.ref=this._stencilRef,g.isTileClipped()&&this._renderTileClippingMasks(d,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return this._overlapStencilType==="Clip"||this._overlapStencilType==="Mask"}stencilModeForRTTOverlap(s){return this.renderingToTexture&&this._overlapStencilType?(this._overlapStencilType==="Clip"&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[s.key]),this._overlapStencilMode):l.StencilMode.disabled}_renderTileClippingMasks(s,d){const g=this.painter,_=this.painter.context,b=_.gl;g._tileClippingMaskIDs={},_.setColorMode(l.ColorMode.disabled),_.setDepthMode(l.DepthMode.disabled);const I=g.useProgram("clippingMask");for(const P of s){const O=g._tileClippingMaskIDs[P.key]=--d;I.draw(_,b.TRIANGLES,l.DepthMode.disabled,new l.StencilMode({func:b.ALWAYS,mask:0},O,255,b.KEEP,b.KEEP,b.REPLACE),l.ColorMode.disabled,l.CullFaceMode.disabled,Tc(P.projMatrix),"$clipping",g.tileExtentBuffer,g.quadTriangleIndexBuffer,g.tileExtentSegments)}}pointCoordinate(s){const d=this.painter.transform;if(s.x<0||s.x>d.width||s.y<0||s.y>d.height)return null;const g=[s.x,s.y,1,1];l.transformMat4$1(g,g,d.pixelMatrixInverse),l.scale$1(g,g,1/g[3]),g[0]/=d.worldSize,g[1]/=d.worldSize;const _=d._camera.position,b=l.mercatorZfromAltitude(1,d.center.lat),I=[_[0],_[1],_[2]/b,0],P=l.subtract([],g.slice(0,3),I);l.normalize(P,P);const O=this.raycast(I,P,this._exaggeration);return O!==null&&O?(l.scaleAndAdd(I,I,P,O),I[3]=I[2],I[2]*=b,I):null}drawDepth(){const s=this.painter,d=s.context,g=this.proxySourceCache,_=Math.ceil(s.width),b=Math.ceil(s.height);if(!this._depthFBO||this._depthFBO.width===_&&this._depthFBO.height===b||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const I=d.gl,P=d.createFramebuffer(_,b,!0);d.activeTexture.set(I.TEXTURE0);const O=new l.Texture(d,{width:_,height:b,data:null},I.RGBA);O.bind(I.NEAREST,I.CLAMP_TO_EDGE),P.colorAttachment.set(O.texture);const B=d.createRenderbuffer(d.gl.DEPTH_COMPONENT16,_,b);P.depthAttachment.set(B),this._depthFBO=P,this._depthTexture=O}d.bindFramebuffer.set(this._depthFBO.framebuffer),d.viewport.set([0,0,_,b]),function(I,P,O,B){if(I.transform.projection.name==="globe")return;const $=I.context,Z=$.gl;$.clear({depth:1});const oe=I.useProgram("terrainDepth"),le=new l.DepthMode(Z.LESS,l.DepthMode.ReadWrite,I.depthRangeFor3D);for(const he of B){const ue=O.getTile(he),ge=Cl(he.projMatrix,0);P.setupElevationDraw(ue,oe),oe.draw($,Z.TRIANGLES,le,l.StencilMode.disabled,l.ColorMode.unblended,l.CullFaceMode.backCCW,ge,"terrain_depth",P.gridBuffer,P.gridIndexBuffer,P.gridNoSkirtSegments)}}(s,this,g,this.proxyCoords)}_setupProxiedCoordsForOrtho(s,d,g){if(s.getSource()instanceof Yt)return this._setupProxiedCoordsForImageSource(s,d,g);this._findCoveringTileCache[s.id]=this._findCoveringTileCache[s.id]||{};const _=this.proxiedCoords[s.id]=[],b=this.proxyCoords;for(let P=0;P<b.length;P++){const O=b[P],B=this._findTileCoveringTileID(O,s);if(B){const $=this._createProxiedId(O,B,g[O.key]&&g[O.key][s.id]);_.push($),this.proxyToSource[O.key][s.id]=[$]}}let I=!1;for(let P=0;P<d.length;P++){const O=s.getTile(d[P]);if(!O||!O.hasData())continue;const B=this._findTileCoveringTileID(O.tileID,this.proxySourceCache);if(B&&B.tileID.canonical.z!==O.tileID.canonical.z){const $=this.proxyToSource[B.tileID.key][s.id],Z=this._createProxiedId(B.tileID,O,g[B.tileID.key]&&g[B.tileID.key][s.id]);$?$.splice($.length-1,0,Z):this.proxyToSource[B.tileID.key][s.id]=[Z],_.push(Z),I=!0}}this._sourceTilesOverlap[s.id]=I}_setupProxiedCoordsForImageSource(s,d,g){if(!s.getSource().loaded())return;const _=this.proxiedCoords[s.id]=[],b=this.proxyCoords,I=s.getSource(),P=new l.Point(I.tileID.x,I.tileID.y)._div(1<<I.tileID.z),O=I.coordinates.map(l.MercatorCoordinate.fromLngLat).reduce(($,Z)=>($.min.x=Math.min($.min.x,Z.x-P.x),$.min.y=Math.min($.min.y,Z.y-P.y),$.max.x=Math.max($.max.x,Z.x-P.x),$.max.y=Math.max($.max.y,Z.y-P.y),$),{min:new l.Point(Number.MAX_VALUE,Number.MAX_VALUE),max:new l.Point(-Number.MAX_VALUE,-Number.MAX_VALUE)}),B=($,Z)=>{const oe=$.wrap+$.canonical.x/(1<<$.canonical.z),le=$.canonical.y/(1<<$.canonical.z),he=l.EXTENT/(1<<$.canonical.z),ue=Z.wrap+Z.canonical.x/(1<<Z.canonical.z),ge=Z.canonical.y/(1<<Z.canonical.z);return oe+he<ue+O.min.x||oe>ue+O.max.x||le+he<ge+O.min.y||le>ge+O.max.y};for(let $=0;$<b.length;$++){const Z=b[$];for(let oe=0;oe<d.length;oe++){const le=s.getTile(d[oe]);if(!le||!le.hasData()||B(Z,le.tileID))continue;const he=this._createProxiedId(Z,le,g[Z.key]&&g[Z.key][s.id]),ue=this.proxyToSource[Z.key][s.id];ue?ue.push(he):this.proxyToSource[Z.key][s.id]=[he],_.push(he)}}}_createProxiedId(s,d,g){let _=this.orthoMatrix;if(g){const b=g.find(I=>I.key===d.tileID.key);if(b)return b}if(d.tileID.key!==s.key){const b=s.canonical.z-d.tileID.canonical.z;let I,P,O;_=l.create();const B=d.tileID.wrap-s.wrap<<s.overscaledZ;b>0?(I=l.EXTENT>>b,P=I*((d.tileID.canonical.x<<b)-s.canonical.x+B),O=I*((d.tileID.canonical.y<<b)-s.canonical.y)):(I=l.EXTENT<<-b,P=l.EXTENT*(d.tileID.canonical.x-(s.canonical.x+B<<-b)),O=l.EXTENT*(d.tileID.canonical.y-(s.canonical.y<<-b))),l.ortho(_,0,I,0,I,0,1),l.translate(_,_,[P,O,0])}return new Fu(d.tileID,s.key,_)}_findTileCoveringTileID(s,d){let g=d.getTile(s);if(g&&g.hasData())return g;const _=this._findCoveringTileCache[d.id],b=_[s.key];if(g=b?d.getTileByID(b):null,g&&g.hasData()||b===null)return g;let I=g?g.tileID:s,P=I.overscaledZ;const O=d.getSource().minzoom,B=[];if(!b){const Z=d.getSource().maxzoom;if(s.canonical.z>=Z){const oe=s.canonical.z-Z;d.getSource().reparseOverscaled?(P=Math.max(s.canonical.z+2,d.transform.tileZoom),I=new l.OverscaledTileID(P,s.wrap,Z,s.canonical.x>>oe,s.canonical.y>>oe)):oe!==0&&(P=Z,I=new l.OverscaledTileID(P,s.wrap,Z,s.canonical.x>>oe,s.canonical.y>>oe))}I.key!==s.key&&(B.push(I.key),g=d.getTile(I))}const $=Z=>{B.forEach(oe=>{_[oe]=Z}),B.length=0};for(P-=1;P>=O&&(!g||!g.hasData());P--){g&&$(g.tileID.key);const Z=I.calculateScaledKey(P);if(g=d.getTileByID(Z),g&&g.hasData())break;const oe=_[Z];if(oe===null)break;oe===void 0?B.push(Z):g=d.getTileByID(oe)}return $(g?g.tileID.key:null),g&&g.hasData()?g:null}findDEMTileFor(s){return this.enabled?this._findTileCoveringTileID(s,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(s,d){let g=this._tilesDirty[s];g||(g=this._tilesDirty[s]={}),g[d.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const s=function(d){let g=0;const _=new l.StructArrayLayout2ui4,b=131;for(let I=1;I<129;I++){for(let P=1;P<129;P++)g=I*b+P,_.emplaceBack(g,g+1),_.emplaceBack(g,g+b),_.emplaceBack(g+1,g+b),I===128&&_.emplaceBack(g+b,g+b+1);_.emplaceBack(g+1,g+1+b)}return _}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(s),this.wireframeSegments=l.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,s.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}class Jn{static cacheKey(s,d,g,_){let b=`${d}${_?_.cacheKey:""}`;for(const I of g)s.usedDefines.includes(I)&&(b+=`/${I}`);return b}constructor(s,d,g,_,b,I){const P=s.gl;this.program=P.createProgram();const O=function(K){const se=[];for(let xe=0;xe<K.length;xe++){if(K[xe]===null)continue;const be=K[xe].split(" ");se.push(be.pop())}return se}(g.staticAttributes),B=_?_.getBinderAttributes():[],$=O.concat(B);let Z=_?_.defines():[];Z=Z.concat(I.map(K=>`#define ${K}`));const oe=s.isWebGL2?`#version 300 es
`:"",le=oe+Z.concat(s.extStandardDerivatives&&oe.length===0?`#extension GL_OES_standard_derivatives : enable
`.concat($h):$h,$h,ku,Om.fragmentSource,Sl.fragmentSource,g.fragmentSource).join(`
`),he=oe+Z.concat(`
#ifdef GL_ES
precision highp float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`,ku,Om.vertexSource,Sl.vertexSource,zu.vertexSource,g.vertexSource).join(`
`),ue=P.createShader(P.FRAGMENT_SHADER);if(P.isContextLost())return void(this.failedToCreate=!0);P.shaderSource(ue,le),P.compileShader(ue),P.attachShader(this.program,ue);const ge=P.createShader(P.VERTEX_SHADER);if(P.isContextLost())this.failedToCreate=!0;else{P.shaderSource(ge,he),P.compileShader(ge),P.attachShader(this.program,ge),this.attributes={},this.numAttributes=$.length;for(let K=0;K<this.numAttributes;K++)$[K]&&(P.bindAttribLocation(this.program,K,$[K]),this.attributes[$[K]]=K);P.linkProgram(this.program),P.deleteShader(ge),P.deleteShader(ue),this.fixedUniforms=b(s),this.binderUniforms=_?_.getUniforms(s):[],I.includes("TERRAIN")&&(this.terrainUniforms=(K=>({u_dem:new l.Uniform1i(K),u_dem_prev:new l.Uniform1i(K),u_dem_unpack:new l.Uniform4f(K),u_dem_tl:new l.Uniform2f(K),u_dem_scale:new l.Uniform1f(K),u_dem_tl_prev:new l.Uniform2f(K),u_dem_scale_prev:new l.Uniform1f(K),u_dem_size:new l.Uniform1f(K),u_dem_lerp:new l.Uniform1f(K),u_exaggeration:new l.Uniform1f(K),u_depth:new l.Uniform1i(K),u_depth_size_inv:new l.Uniform2f(K),u_meter_to_dem:new l.Uniform1f(K),u_label_plane_matrix_inv:new l.UniformMatrix4f(K)}))(s)),I.includes("GLOBE")&&(this.globeUniforms=(K=>({u_tile_tl_up:new l.Uniform3f(K),u_tile_tr_up:new l.Uniform3f(K),u_tile_br_up:new l.Uniform3f(K),u_tile_bl_up:new l.Uniform3f(K),u_tile_up_scale:new l.Uniform1f(K)}))(s)),I.includes("FOG")&&(this.fogUniforms=(K=>({u_fog_matrix:new l.UniformMatrix4f(K),u_fog_range:new l.Uniform2f(K),u_fog_color:new l.Uniform4f(K),u_fog_horizon_blend:new l.Uniform1f(K),u_fog_temporal_offset:new l.Uniform1f(K),u_frustum_tl:new l.Uniform3f(K),u_frustum_tr:new l.Uniform3f(K),u_frustum_br:new l.Uniform3f(K),u_frustum_bl:new l.Uniform3f(K),u_globe_pos:new l.Uniform3f(K),u_globe_radius:new l.Uniform1f(K),u_globe_transition:new l.Uniform1f(K),u_is_globe:new l.Uniform1i(K),u_viewport:new l.Uniform2f(K)}))(s))}}setTerrainUniformValues(s,d){if(!this.terrainUniforms)return;const g=this.terrainUniforms;if(!this.failedToCreate){s.program.set(this.program);for(const _ in d)g[_]&&g[_].set(this.program,_,d[_])}}setGlobeUniformValues(s,d){if(!this.globeUniforms)return;const g=this.globeUniforms;if(!this.failedToCreate){s.program.set(this.program);for(const _ in d)g[_]&&g[_].set(this.program,_,d[_])}}setFogUniformValues(s,d){if(!this.fogUniforms)return;const g=this.fogUniforms;if(!this.failedToCreate){s.program.set(this.program);for(const _ in d)g[_].set(this.program,_,d[_])}}draw(s,d,g,_,b,I,P,O,B,$,Z,oe,le,he,ue){const ge=s.gl;if(this.failedToCreate)return;s.program.set(this.program),s.setDepthMode(g),s.setStencilMode(_),s.setColorMode(b),s.setCullFace(I);for(const se of Object.keys(this.fixedUniforms))this.fixedUniforms[se].set(this.program,se,P[se]);he&&he.setUniforms(this.program,s,this.binderUniforms,oe,{zoom:le});const K={[ge.LINES]:2,[ge.TRIANGLES]:3,[ge.LINE_STRIP]:1}[d];for(const se of Z.get()){const xe=se.vaos||(se.vaos={});(xe[O]||(xe[O]=new G0)).bind(s,this,B,he?he.getPaintVertexBuffers():[],$,se.vertexOffset,ue||[]),ge.drawElements(d,se.primitiveLength*K,ge.UNSIGNED_SHORT,se.primitiveOffset*K*2)}}}function Ic(p,s){const d=Math.pow(2,s.tileID.overscaledZ),g=s.tileSize*Math.pow(2,p.transform.tileZoom)/d,_=g*(s.tileID.canonical.x+s.tileID.wrap*d),b=g*s.tileID.canonical.y;return{u_image:0,u_texsize:s.imageAtlasTexture.size,u_tile_units_to_pixels:1/Ge(s,1,p.transform.tileZoom),u_pixel_coord_upper:[_>>16,b>>16],u_pixel_coord_lower:[65535&_,65535&b]}}const Dm=l.create(),Gh=(p,s,d,g,_,b,I,P,O,B,$)=>{const Z=s.style.light,oe=Z.properties.get("position"),le=[oe.x,oe.y,oe.z],he=l.create$1();Z.properties.get("anchor")==="viewport"&&(l.fromRotation(he,-s.transform.angle),l.transformMat3(le,le,he));const ue=Z.properties.get("color"),ge=s.transform,K={u_matrix:p,u_lightpos:le,u_lightintensity:Z.properties.get("intensity"),u_lightcolor:[ue.r,ue.g,ue.b],u_vertical_gradient:+d,u_opacity:g,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Dm,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:_,u_edge_radius:b};return ge.projection.name==="globe"&&(K.u_tile_id=[I.canonical.x,I.canonical.y,1<<I.canonical.z],K.u_zoom_transition=O,K.u_inv_rot_matrix=$,K.u_merc_center=B,K.u_up_dir=ge.projection.upVector(new l.CanonicalTileID(0,0,0),B[0]*l.EXTENT,B[1]*l.EXTENT),K.u_height_lift=P),K},$m=(p,s,d,g,_,b,I,P,O,B,$,Z)=>{const oe=Gh(p,s,d,g,_,b,I,O,B,$,Z),le={u_height_factor:-Math.pow(2,I.overscaledZ)/P.tileSize/8};return l.extend(oe,Ic(s,P),le)},Hs=p=>({u_matrix:p}),Wh=(p,s,d)=>l.extend(Hs(p),Ic(s,d)),W0=(p,s)=>({u_matrix:p,u_world:s}),q0=(p,s,d,g)=>l.extend(Wh(p,s,d),{u_world:g}),Z0=l.create(),qh=(p,s,d,g,_,b)=>{const I=p.transform,P=I.projection.name==="globe";let O;if(b.paint.get("circle-pitch-alignment")==="map")if(P){const $=l.globePixelsToTileUnits(I.zoom,s.canonical)*I._pixelsPerMercatorPixel;O=Float32Array.from([$,0,0,$])}else O=I.calculatePixelsToTileUnitsMatrix(d);else O=new Float32Array([I.pixelsToGLUnits[0],0,0,I.pixelsToGLUnits[1]]);const B={u_camera_to_center_distance:I.cameraToCenterDistance,u_matrix:p.translatePosMatrix(s.projMatrix,d,b.paint.get("circle-translate"),b.paint.get("circle-translate-anchor")),u_device_pixel_ratio:l.exported.devicePixelRatio,u_extrude_scale:O,u_inv_rot_matrix:Z0,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(P){B.u_inv_rot_matrix=g,B.u_merc_center=_,B.u_tile_id=[s.canonical.x,s.canonical.y,1<<s.canonical.z],B.u_zoom_transition=l.globeToMercatorTransition(I.zoom);const $=_[0]*l.EXTENT,Z=_[1]*l.EXTENT;B.u_up_dir=I.projection.upVector(new l.CanonicalTileID(0,0,0),$,Z)}return B},Zh=p=>{const s=[];return p.paint.get("circle-pitch-alignment")==="map"&&s.push("PITCH_WITH_MAP"),p.paint.get("circle-pitch-scale")==="map"&&s.push("SCALE_WITH_MAP"),s},Xh=(p,s,d,g)=>{const _=l.EXTENT/d.tileSize;return{u_matrix:p,u_camera_to_center_distance:s.getCameraToCenterDistance(g),u_extrude_scale:[s.pixelsToGLUnits[0]/_,s.pixelsToGLUnits[1]/_]}},Bu=(p,s,d=1)=>({u_matrix:p,u_color:s,u_overlay:0,u_overlay_scale:d}),Fm=l.create(),Bm=(p,s,d,g,_,b,I)=>{const P=p.transform,O=P.projection.name==="globe",B=O?l.globePixelsToTileUnits(P.zoom,s.canonical)*P._pixelsPerMercatorPixel:Ge(d,1,b),$={u_matrix:s.projMatrix,u_extrude_scale:B,u_intensity:I,u_inv_rot_matrix:Fm,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(O){$.u_inv_rot_matrix=g,$.u_merc_center=_,$.u_tile_id=[s.canonical.x,s.canonical.y,1<<s.canonical.z],$.u_zoom_transition=l.globeToMercatorTransition(P.zoom);const Z=_[0]*l.EXTENT,oe=_[1]*l.EXTENT;$.u_up_dir=P.projection.upVector(new l.CanonicalTileID(0,0,0),Z,oe)}return $},X0=(p,s,d,g,_,b,I)=>{const P=p.transform,O=P.calculatePixelsToTileUnitsMatrix(s);return{u_matrix:Kh(p,s,d,g),u_pixels_to_tile_units:O,u_device_pixel_ratio:b,u_units_to_pixels:[1/P.pixelsToGLUnits[0],1/P.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:_,u_texsize:Pc(d)?s.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:Il(s,p.transform),u_alpha_discard_threshold:0,u_trim_offset:I}},Mc=(p,s,d,g,_)=>{const b=p.transform;return{u_matrix:Kh(p,s,d,g),u_texsize:s.imageAtlasTexture.size,u_pixels_to_tile_units:b.calculatePixelsToTileUnitsMatrix(s),u_device_pixel_ratio:_,u_image:0,u_tile_units_to_pixels:Il(s,b),u_units_to_pixels:[1/b.pixelsToGLUnits[0],1/b.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function Il(p,s){return 1/Ge(p,1,s.tileZoom)}function Kh(p,s,d,g){return p.translatePosMatrix(g||s.tileID.projMatrix,s,d.paint.get("line-translate"),d.paint.get("line-translate-anchor"))}function Pc(p){const s=p.paint.get("line-dasharray").value;return s.value||s.kind!=="constant"}const Yh=(p,s,d,g,_,b)=>{return{u_matrix:p,u_tl_parent:s,u_scale_parent:d,u_fade_t:g.mix,u_opacity:g.opacity*_.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:_.paint.get("raster-brightness-min"),u_brightness_high:_.paint.get("raster-brightness-max"),u_saturation_factor:(P=_.paint.get("raster-saturation"),P>0?1-1/(1.001-P):-P),u_contrast_factor:(I=_.paint.get("raster-contrast"),I>0?1/(1-I):1+I),u_spin_weights:xa(_.paint.get("raster-hue-rotate")),u_perspective_transform:b};var I,P};function xa(p){p*=Math.PI/180;const s=Math.sin(p),d=Math.cos(p);return[(2*d+1)/3,(-Math.sqrt(3)*s-d+1)/3,(Math.sqrt(3)*s-d+1)/3]}const Nu=l.create(),Jh=(p,s,d,g,_,b,I,P,O,B,$,Z,oe,le,he,ue)=>{const ge=_.transform,K={u_is_size_zoom_constant:+(p==="constant"||p==="source"),u_is_size_feature_constant:+(p==="constant"||p==="camera"),u_size_t:s?s.uSizeT:0,u_size:s?s.uSize:0,u_camera_to_center_distance:ge.cameraToCenterDistance,u_rotate_symbol:+d,u_aspect_ratio:ge.width/ge.height,u_fade_change:_.options.fadeDuration?_.symbolFadeChange:1,u_matrix:b,u_label_plane_matrix:I,u_coord_matrix:P,u_is_text:+O,u_pitch_with_map:+g,u_texsize:B,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Nu,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:Nu,u_up_vector:[0,-1,0]};return ue.name==="globe"&&(K.u_tile_id=[$.canonical.x,$.canonical.y,1<<$.canonical.z],K.u_zoom_transition=Z,K.u_inv_rot_matrix=le,K.u_merc_center=oe,K.u_camera_forward=ge._camera.forward(),K.u_ecef_origin=l.globeECEFOrigin(ge.globeMatrix,$.toUnwrapped()),K.u_tile_matrix=Float32Array.from(ge.globeMatrix),K.u_up_vector=he),K},ju=(p,s,d,g,_,b,I,P,O,B,$,Z,oe,le,he,ue,ge)=>l.extend(Jh(p,s,d,g,_,b,I,P,O,B,Z,oe,le,he,ue,ge),{u_gamma_scale:g?_.transform.cameraToCenterDistance*Math.cos(_.terrain?0:_.transform._pitch):1,u_device_pixel_ratio:l.exported.devicePixelRatio,u_is_halo:+$}),Nm=(p,s,d,g,_,b,I,P,O,B,$,Z,oe,le,he,ue)=>l.extend(ju(p,s,d,g,_,b,I,P,!0,O,!0,$,Z,oe,le,he,ue),{u_texsize_icon:B,u_texture_icon:1}),Qh=(p,s,d)=>({u_matrix:p,u_opacity:s,u_color:d}),K0=(p,s,d,g,_)=>l.extend(function(b,I,P){const O=I.imageManager.getPattern(b.toString()),{width:B,height:$}=I.imageManager.getPixelSize(),Z=Math.pow(2,P.tileID.overscaledZ),oe=P.tileSize*Math.pow(2,I.transform.tileZoom)/Z,le=oe*(P.tileID.canonical.x+P.tileID.wrap*Z),he=oe*P.tileID.canonical.y;return{u_image:0,u_pattern_tl:O.tl,u_pattern_br:O.br,u_texsize:[B,$],u_pattern_size:O.displaySize,u_tile_units_to_pixels:1/Ge(P,1,I.transform.tileZoom),u_pixel_coord_upper:[le>>16,he>>16],u_pixel_coord_lower:[65535&le,65535&he]}}(g,d,_),{u_matrix:p,u_opacity:s}),ef={fillExtrusion:p=>({u_matrix:new l.UniformMatrix4f(p),u_lightpos:new l.Uniform3f(p),u_lightintensity:new l.Uniform1f(p),u_lightcolor:new l.Uniform3f(p),u_vertical_gradient:new l.Uniform1f(p),u_opacity:new l.Uniform1f(p),u_edge_radius:new l.Uniform1f(p),u_ao:new l.Uniform2f(p),u_tile_id:new l.Uniform3f(p),u_zoom_transition:new l.Uniform1f(p),u_inv_rot_matrix:new l.UniformMatrix4f(p),u_merc_center:new l.Uniform2f(p),u_up_dir:new l.Uniform3f(p),u_height_lift:new l.Uniform1f(p)}),fillExtrusionPattern:p=>({u_matrix:new l.UniformMatrix4f(p),u_lightpos:new l.Uniform3f(p),u_lightintensity:new l.Uniform1f(p),u_lightcolor:new l.Uniform3f(p),u_vertical_gradient:new l.Uniform1f(p),u_height_factor:new l.Uniform1f(p),u_edge_radius:new l.Uniform1f(p),u_ao:new l.Uniform2f(p),u_tile_id:new l.Uniform3f(p),u_zoom_transition:new l.Uniform1f(p),u_inv_rot_matrix:new l.UniformMatrix4f(p),u_merc_center:new l.Uniform2f(p),u_up_dir:new l.Uniform3f(p),u_height_lift:new l.Uniform1f(p),u_image:new l.Uniform1i(p),u_texsize:new l.Uniform2f(p),u_pixel_coord_upper:new l.Uniform2f(p),u_pixel_coord_lower:new l.Uniform2f(p),u_tile_units_to_pixels:new l.Uniform1f(p),u_opacity:new l.Uniform1f(p)}),fill:p=>({u_matrix:new l.UniformMatrix4f(p)}),fillPattern:p=>({u_matrix:new l.UniformMatrix4f(p),u_image:new l.Uniform1i(p),u_texsize:new l.Uniform2f(p),u_pixel_coord_upper:new l.Uniform2f(p),u_pixel_coord_lower:new l.Uniform2f(p),u_tile_units_to_pixels:new l.Uniform1f(p)}),fillOutline:p=>({u_matrix:new l.UniformMatrix4f(p),u_world:new l.Uniform2f(p)}),fillOutlinePattern:p=>({u_matrix:new l.UniformMatrix4f(p),u_world:new l.Uniform2f(p),u_image:new l.Uniform1i(p),u_texsize:new l.Uniform2f(p),u_pixel_coord_upper:new l.Uniform2f(p),u_pixel_coord_lower:new l.Uniform2f(p),u_tile_units_to_pixels:new l.Uniform1f(p)}),circle:p=>({u_camera_to_center_distance:new l.Uniform1f(p),u_extrude_scale:new l.UniformMatrix2f(p),u_device_pixel_ratio:new l.Uniform1f(p),u_matrix:new l.UniformMatrix4f(p),u_inv_rot_matrix:new l.UniformMatrix4f(p),u_merc_center:new l.Uniform2f(p),u_tile_id:new l.Uniform3f(p),u_zoom_transition:new l.Uniform1f(p),u_up_dir:new l.Uniform3f(p)}),collisionBox:p=>({u_matrix:new l.UniformMatrix4f(p),u_camera_to_center_distance:new l.Uniform1f(p),u_extrude_scale:new l.Uniform2f(p)}),collisionCircle:p=>({u_matrix:new l.UniformMatrix4f(p),u_inv_matrix:new l.UniformMatrix4f(p),u_camera_to_center_distance:new l.Uniform1f(p),u_viewport_size:new l.Uniform2f(p)}),debug:p=>({u_color:new l.UniformColor(p),u_matrix:new l.UniformMatrix4f(p),u_overlay:new l.Uniform1i(p),u_overlay_scale:new l.Uniform1f(p)}),clippingMask:p=>({u_matrix:new l.UniformMatrix4f(p)}),heatmap:p=>({u_extrude_scale:new l.Uniform1f(p),u_intensity:new l.Uniform1f(p),u_matrix:new l.UniformMatrix4f(p),u_inv_rot_matrix:new l.UniformMatrix4f(p),u_merc_center:new l.Uniform2f(p),u_tile_id:new l.Uniform3f(p),u_zoom_transition:new l.Uniform1f(p),u_up_dir:new l.Uniform3f(p)}),heatmapTexture:p=>({u_image:new l.Uniform1i(p),u_color_ramp:new l.Uniform1i(p),u_opacity:new l.Uniform1f(p)}),hillshade:p=>({u_matrix:new l.UniformMatrix4f(p),u_image:new l.Uniform1i(p),u_latrange:new l.Uniform2f(p),u_light:new l.Uniform2f(p),u_shadow:new l.UniformColor(p),u_highlight:new l.UniformColor(p),u_accent:new l.UniformColor(p)}),hillshadePrepare:p=>({u_matrix:new l.UniformMatrix4f(p),u_image:new l.Uniform1i(p),u_dimension:new l.Uniform2f(p),u_zoom:new l.Uniform1f(p),u_unpack:new l.Uniform4f(p)}),line:p=>({u_matrix:new l.UniformMatrix4f(p),u_pixels_to_tile_units:new l.UniformMatrix2f(p),u_device_pixel_ratio:new l.Uniform1f(p),u_units_to_pixels:new l.Uniform2f(p),u_dash_image:new l.Uniform1i(p),u_gradient_image:new l.Uniform1i(p),u_image_height:new l.Uniform1f(p),u_texsize:new l.Uniform2f(p),u_tile_units_to_pixels:new l.Uniform1f(p),u_alpha_discard_threshold:new l.Uniform1f(p),u_trim_offset:new l.Uniform2f(p)}),linePattern:p=>({u_matrix:new l.UniformMatrix4f(p),u_texsize:new l.Uniform2f(p),u_pixels_to_tile_units:new l.UniformMatrix2f(p),u_device_pixel_ratio:new l.Uniform1f(p),u_image:new l.Uniform1i(p),u_units_to_pixels:new l.Uniform2f(p),u_tile_units_to_pixels:new l.Uniform1f(p),u_alpha_discard_threshold:new l.Uniform1f(p)}),raster:p=>({u_matrix:new l.UniformMatrix4f(p),u_tl_parent:new l.Uniform2f(p),u_scale_parent:new l.Uniform1f(p),u_fade_t:new l.Uniform1f(p),u_opacity:new l.Uniform1f(p),u_image0:new l.Uniform1i(p),u_image1:new l.Uniform1i(p),u_brightness_low:new l.Uniform1f(p),u_brightness_high:new l.Uniform1f(p),u_saturation_factor:new l.Uniform1f(p),u_contrast_factor:new l.Uniform1f(p),u_spin_weights:new l.Uniform3f(p),u_perspective_transform:new l.Uniform2f(p)}),symbolIcon:p=>({u_is_size_zoom_constant:new l.Uniform1i(p),u_is_size_feature_constant:new l.Uniform1i(p),u_size_t:new l.Uniform1f(p),u_size:new l.Uniform1f(p),u_camera_to_center_distance:new l.Uniform1f(p),u_rotate_symbol:new l.Uniform1i(p),u_aspect_ratio:new l.Uniform1f(p),u_fade_change:new l.Uniform1f(p),u_matrix:new l.UniformMatrix4f(p),u_label_plane_matrix:new l.UniformMatrix4f(p),u_coord_matrix:new l.UniformMatrix4f(p),u_is_text:new l.Uniform1i(p),u_pitch_with_map:new l.Uniform1i(p),u_texsize:new l.Uniform2f(p),u_tile_id:new l.Uniform3f(p),u_zoom_transition:new l.Uniform1f(p),u_inv_rot_matrix:new l.UniformMatrix4f(p),u_merc_center:new l.Uniform2f(p),u_camera_forward:new l.Uniform3f(p),u_tile_matrix:new l.UniformMatrix4f(p),u_up_vector:new l.Uniform3f(p),u_ecef_origin:new l.Uniform3f(p),u_texture:new l.Uniform1i(p)}),symbolSDF:p=>({u_is_size_zoom_constant:new l.Uniform1i(p),u_is_size_feature_constant:new l.Uniform1i(p),u_size_t:new l.Uniform1f(p),u_size:new l.Uniform1f(p),u_camera_to_center_distance:new l.Uniform1f(p),u_rotate_symbol:new l.Uniform1i(p),u_aspect_ratio:new l.Uniform1f(p),u_fade_change:new l.Uniform1f(p),u_matrix:new l.UniformMatrix4f(p),u_label_plane_matrix:new l.UniformMatrix4f(p),u_coord_matrix:new l.UniformMatrix4f(p),u_is_text:new l.Uniform1i(p),u_pitch_with_map:new l.Uniform1i(p),u_texsize:new l.Uniform2f(p),u_texture:new l.Uniform1i(p),u_gamma_scale:new l.Uniform1f(p),u_device_pixel_ratio:new l.Uniform1f(p),u_tile_id:new l.Uniform3f(p),u_zoom_transition:new l.Uniform1f(p),u_inv_rot_matrix:new l.UniformMatrix4f(p),u_merc_center:new l.Uniform2f(p),u_camera_forward:new l.Uniform3f(p),u_tile_matrix:new l.UniformMatrix4f(p),u_up_vector:new l.Uniform3f(p),u_ecef_origin:new l.Uniform3f(p),u_is_halo:new l.Uniform1i(p)}),symbolTextAndIcon:p=>({u_is_size_zoom_constant:new l.Uniform1i(p),u_is_size_feature_constant:new l.Uniform1i(p),u_size_t:new l.Uniform1f(p),u_size:new l.Uniform1f(p),u_camera_to_center_distance:new l.Uniform1f(p),u_rotate_symbol:new l.Uniform1i(p),u_aspect_ratio:new l.Uniform1f(p),u_fade_change:new l.Uniform1f(p),u_matrix:new l.UniformMatrix4f(p),u_label_plane_matrix:new l.UniformMatrix4f(p),u_coord_matrix:new l.UniformMatrix4f(p),u_is_text:new l.Uniform1i(p),u_pitch_with_map:new l.Uniform1i(p),u_texsize:new l.Uniform2f(p),u_texsize_icon:new l.Uniform2f(p),u_texture:new l.Uniform1i(p),u_texture_icon:new l.Uniform1i(p),u_gamma_scale:new l.Uniform1f(p),u_device_pixel_ratio:new l.Uniform1f(p),u_is_halo:new l.Uniform1i(p)}),background:p=>({u_matrix:new l.UniformMatrix4f(p),u_opacity:new l.Uniform1f(p),u_color:new l.UniformColor(p)}),backgroundPattern:p=>({u_matrix:new l.UniformMatrix4f(p),u_opacity:new l.Uniform1f(p),u_image:new l.Uniform1i(p),u_pattern_tl:new l.Uniform2f(p),u_pattern_br:new l.Uniform2f(p),u_texsize:new l.Uniform2f(p),u_pattern_size:new l.Uniform2f(p),u_pixel_coord_upper:new l.Uniform2f(p),u_pixel_coord_lower:new l.Uniform2f(p),u_tile_units_to_pixels:new l.Uniform1f(p)}),terrainRaster:jh,terrainDepth:jh,skybox:p=>({u_matrix:new l.UniformMatrix4f(p),u_sun_direction:new l.Uniform3f(p),u_cubemap:new l.Uniform1i(p),u_opacity:new l.Uniform1f(p),u_temporal_offset:new l.Uniform1f(p)}),skyboxGradient:p=>({u_matrix:new l.UniformMatrix4f(p),u_color_ramp:new l.Uniform1i(p),u_center_direction:new l.Uniform3f(p),u_radius:new l.Uniform1f(p),u_opacity:new l.Uniform1f(p),u_temporal_offset:new l.Uniform1f(p)}),skyboxCapture:p=>({u_matrix_3f:new l.UniformMatrix3f(p),u_sun_direction:new l.Uniform3f(p),u_sun_intensity:new l.Uniform1f(p),u_color_tint_r:new l.Uniform4f(p),u_color_tint_m:new l.Uniform4f(p),u_luminance:new l.Uniform1f(p)}),globeRaster:p=>({u_proj_matrix:new l.UniformMatrix4f(p),u_globe_matrix:new l.UniformMatrix4f(p),u_normalize_matrix:new l.UniformMatrix4f(p),u_merc_matrix:new l.UniformMatrix4f(p),u_zoom_transition:new l.Uniform1f(p),u_merc_center:new l.Uniform2f(p),u_image0:new l.Uniform1i(p),u_grid_matrix:new l.UniformMatrix3f(p),u_skirt_height:new l.Uniform1f(p),u_frustum_tl:new l.Uniform3f(p),u_frustum_tr:new l.Uniform3f(p),u_frustum_br:new l.Uniform3f(p),u_frustum_bl:new l.Uniform3f(p),u_globe_pos:new l.Uniform3f(p),u_globe_radius:new l.Uniform1f(p),u_viewport:new l.Uniform2f(p)}),globeAtmosphere:p=>({u_frustum_tl:new l.Uniform3f(p),u_frustum_tr:new l.Uniform3f(p),u_frustum_br:new l.Uniform3f(p),u_frustum_bl:new l.Uniform3f(p),u_horizon:new l.Uniform1f(p),u_transition:new l.Uniform1f(p),u_fadeout_range:new l.Uniform1f(p),u_color:new l.Uniform4f(p),u_high_color:new l.Uniform4f(p),u_space_color:new l.Uniform4f(p),u_star_intensity:new l.Uniform1f(p),u_star_density:new l.Uniform1f(p),u_star_size:new l.Uniform1f(p),u_temporal_offset:new l.Uniform1f(p),u_horizon_angle:new l.Uniform1f(p),u_rotation_matrix:new l.UniformMatrix4f(p)})};let Uu;function Ac(p,s,d,g,_,b,I){const P=p.context,O=P.gl,B=p.transform,$=p.useProgram("collisionBox"),Z=[];let oe=0,le=0;for(let be=0;be<g.length;be++){const Re=g[be],ze=s.getTile(Re),Oe=ze.getBucket(d);if(!Oe)continue;const Ve=Ui(Re,Oe,B);let Ue=Ve;_[0]===0&&_[1]===0||(Ue=p.translatePosMatrix(Ve,ze,_,b));const Ke=I?Oe.textCollisionBox:Oe.iconCollisionBox,Pt=Oe.collisionCircleArray;if(Pt.length>0){const qe=l.create(),ht=Ue;l.mul(qe,Oe.placementInvProjMatrix,B.glCoordMatrix),l.mul(qe,qe,Oe.placementViewportMatrix),Z.push({circleArray:Pt,circleOffset:le,transform:ht,invTransform:qe,projection:Oe.getProjection()}),oe+=Pt.length/4,le=oe}Ke&&(p.terrain&&p.terrain.setupElevationDraw(ze,$),$.draw(P,O.LINES,l.DepthMode.disabled,l.StencilMode.disabled,p.colorModeForRenderPass(),l.CullFaceMode.disabled,Xh(Ue,B,ze,Oe.getProjection()),d.id,Ke.layoutVertexBuffer,Ke.indexBuffer,Ke.segments,null,B.zoom,null,[Ke.collisionVertexBuffer,Ke.collisionVertexBufferExt]))}if(!I||!Z.length)return;const he=p.useProgram("collisionCircle"),ue=new l.StructArrayLayout2f1f2i16;ue.resize(4*oe),ue._trim();let ge=0;for(const be of Z)for(let Re=0;Re<be.circleArray.length/4;Re++){const ze=4*Re,Oe=be.circleArray[ze+0],Ve=be.circleArray[ze+1],Ue=be.circleArray[ze+2],Ke=be.circleArray[ze+3];ue.emplace(ge++,Oe,Ve,Ue,Ke,0),ue.emplace(ge++,Oe,Ve,Ue,Ke,1),ue.emplace(ge++,Oe,Ve,Ue,Ke,2),ue.emplace(ge++,Oe,Ve,Ue,Ke,3)}(!Uu||Uu.length<2*oe)&&(Uu=function(be){const Re=2*be,ze=new l.StructArrayLayout3ui6;ze.resize(Re),ze._trim();for(let Oe=0;Oe<Re;Oe++){const Ve=6*Oe;ze.uint16[Ve+0]=4*Oe+0,ze.uint16[Ve+1]=4*Oe+1,ze.uint16[Ve+2]=4*Oe+2,ze.uint16[Ve+3]=4*Oe+2,ze.uint16[Ve+4]=4*Oe+3,ze.uint16[Ve+5]=4*Oe+0}return ze}(oe));const K=P.createIndexBuffer(Uu,!0),se=P.createVertexBuffer(ue,l.collisionCircleLayout.members,!0);for(const be of Z){const Re={u_matrix:be.transform,u_inv_matrix:be.invTransform,u_camera_to_center_distance:(xe=B).getCameraToCenterDistance(be.projection),u_viewport_size:[xe.width,xe.height]};he.draw(P,O.TRIANGLES,l.DepthMode.disabled,l.StencilMode.disabled,p.colorModeForRenderPass(),l.CullFaceMode.disabled,Re,d.id,se,K,l.SegmentVector.simpleSegment(0,2*be.circleOffset,be.circleArray.length,be.circleArray.length/2),null,B.zoom)}var xe;se.destroy(),K.destroy()}const jm=l.create();function tf({width:p,height:s,anchor:d,textOffset:g,textScale:_},b){const{horizontalAlign:I,verticalAlign:P}=l.getAnchorAlignment(d),O=-(I-.5)*p,B=-(P-.5)*s,$=l.evaluateVariableOffset(d,g);return new l.Point((O/_+$[0])*b,(B/_+$[1])*b)}function Y0(p,s,d,g,_,b,I,P,O,B,$){const Z=p.text.placedSymbolArray,oe=p.text.dynamicLayoutVertexArray,le=p.icon.dynamicLayoutVertexArray,he={},ue=p.getProjection(),ge=Xn(P,ue,b),K=b.elevation,se=ue.upVectorScale(P.canonical,b.center.lat,b.worldSize).metersToTile;oe.clear();for(let xe=0;xe<Z.length;xe++){const be=Z.get(xe),{tileAnchorX:Re,tileAnchorY:ze,numGlyphs:Oe}=be,Ve=be.hidden||!be.crossTileID||p.allowVerticalPlacement&&!be.placedOrientation?null:g[be.crossTileID];if(Ve){let Ue=0,Ke=0,Pt=0;if(K){const kt=K?K.getAtTileOffset(P,Re,ze):0,[dn,Rn,en]=ue.upVector(P.canonical,Re,ze);Ue=kt*dn*se,Ke=kt*Rn*se,Pt=kt*en*se}let[qe,ht,et,Et]=pr(be.projectedAnchorX+Ue,be.projectedAnchorY+Ke,be.projectedAnchorZ+Pt,d?ge:I);const Xe=Xo(b.getCameraToCenterDistance(ue),Et);let dt=_.evaluateSizeForFeature(p.textSizeData,B,be)*Xe/l.ONE_EM;d&&(dt*=p.tilePixelRatio/O);const zt=tf(Ve,dt);d?({x:qe,y:ht,z:et}=ue.projectTilePoint(Re+zt.x,ze+zt.y,P.canonical),[qe,ht,et]=pr(qe+Ue,ht+Ke,et+Pt,I)):(s&&zt._rotate(-b.angle),qe+=zt.x,ht+=zt.y,et=0);const vt=p.allowVerticalPlacement&&be.placedOrientation===l.WritingMode.vertical?Math.PI/2:0;for(let kt=0;kt<Oe;kt++)l.addDynamicAttributes(oe,qe,ht,et,vt);$&&be.associatedIconIndex>=0&&(he[be.associatedIconIndex]={x:qe,y:ht,z:et,angle:vt})}else Kr(Oe,oe)}if($){le.clear();const xe=p.icon.placedSymbolArray;for(let be=0;be<xe.length;be++){const Re=xe.get(be),{numGlyphs:ze}=Re,Oe=he[be];if(Re.hidden||!Oe)Kr(ze,le);else{const{x:Ve,y:Ue,z:Ke,angle:Pt}=Oe;for(let qe=0;qe<ze;qe++)l.addDynamicAttributes(le,Ve,Ue,Ke,Pt)}}p.icon.dynamicLayoutVertexBuffer.updateData(le)}p.text.dynamicLayoutVertexBuffer.updateData(oe)}function nf(p,s,d){return d.iconsInText&&s?"symbolTextAndIcon":p?"symbolSDF":"symbolIcon"}function Um(p,s,d,g,_,b,I,P,O,B,$,Z){const oe=p.context,le=oe.gl,he=p.transform,ue=P==="map",ge=O==="map",K=ue&&d.layout.get("symbol-placement")!=="point",se=ue&&!ge&&!K,xe=d.layout.get("symbol-sort-key").constantOr(1)!==void 0;let be=!1;const Re=p.depthModeForSublayer(0,l.DepthMode.ReadOnly),ze=[l.mercatorXfromLng(he.center.lng),l.mercatorYfromLat(he.center.lat)],Oe=d.layout.get("text-variable-anchor"),Ve=he.projection.name==="globe",Ue=[],Ke=[0,-1,0];let Pt=Ke;!Ve&&!he.mercatorFromTransition||ue||(Pt=function(qe){const ht=qe._camera.getWorldToCamera(qe.worldSize,1),et=l.multiply([],ht,qe.globeMatrix);l.invert(et,et);const Et=[0,0,0],Xe=[0,1,0,0];return l.transformMat4$1(Xe,Xe,et),Et[0]=Xe[0],Et[1]=Xe[1],Et[2]=Xe[2],l.normalize(Et,Et),Et}(he));for(const qe of g){const ht=s.getTile(qe),et=ht.getBucket(d);if(!et||et.projection.name==="mercator"&&Ve)continue;const Et=_?et.text:et.icon;if(!Et||et.fullyClipped||!Et.segments.get().length)continue;const Xe=Et.programConfigurations.get(d.id),dt=_||et.sdfIcons,zt=_?et.textSizeData:et.iconSizeData,vt=ge||he.pitch!==0,kt=l.evaluateSizeForZoom(zt,he.zoom);let dn,Rn,en,_n,Hn=[0,0],Un=null;if(_)Rn=ht.glyphAtlasTexture,en=le.LINEAR,dn=ht.glyphAtlasTexture.size,et.iconsInText&&(Hn=ht.imageAtlasTexture.size,Un=ht.imageAtlasTexture,_n=vt||p.options.rotating||p.options.zooming||zt.kind==="composite"||zt.kind==="camera"?le.LINEAR:le.NEAREST);else{const Wa=d.layout.get("icon-size").constantOr(0)!==1||et.iconsNeedLinear;Rn=ht.imageAtlasTexture,en=dt||p.options.rotating||p.options.zooming||Wa||vt?le.LINEAR:le.NEAREST,dn=ht.imageAtlasTexture.size}const cn=et.projection.name==="globe",ur=cn?Pt:Ke,vr=cn?l.globeToMercatorTransition(he.zoom):0,yr=Xn(qe,et.getProjection(),he),_r=he.calculatePixelsToTileUnitsMatrix(ht),Hi=nt(yr,ht.tileID.canonical,ge,ue,he,et.getProjection(),_r),Ti=p.terrain&&ge&&K?l.invert(l.create(),Hi):jm,Lo=gr(yr,ht.tileID.canonical,ge,ue,he,et.getProjection(),_r),wa=Oe&&et.hasTextData(),jr=d.layout.get("icon-text-fit")!=="none"&&wa&&et.hasIconData();if(K){const Wa=he.elevation,Es=Wa?Wa.getAtTileOffsetFunc(qe,he.center.lat,he.worldSize,et.getProjection()):null,Xs=Si(yr,ht.tileID.canonical,ge,ue,he,et.getProjection(),_r);Pn(et,yr,p,_,Xs,Lo,ge,B,Es,qe)}const xr=K||_&&Oe||jr,rr=p.translatePosMatrix(yr,ht,b,I),ai=xr?jm:Hi,Ki=p.translatePosMatrix(Lo,ht,b,I,!0),kr=et.getProjection().createInversionMatrix(he,qe.canonical),ao=[];p.terrainRenderModeElevated()&&ge&&ao.push("PITCH_WITH_MAP_TERRAIN"),cn&&ao.push("PROJECTION_GLOBE_VIEW"),xr&&ao.push("PROJECTED_POS_ON_VIEWPORT");const id=dt&&d.paint.get(_?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Zs;Zs=dt?et.iconsInText?Nm(zt.kind,kt,se,ge,p,rr,ai,Ki,dn,Hn,qe,vr,ze,kr,ur,et.getProjection()):ju(zt.kind,kt,se,ge,p,rr,ai,Ki,_,dn,!0,qe,vr,ze,kr,ur,et.getProjection()):Jh(zt.kind,kt,se,ge,p,rr,ai,Ki,_,dn,qe,vr,ze,kr,ur,et.getProjection());const jc={program:p.useProgram(nf(dt,_,et),Xe,ao),buffers:Et,uniformValues:Zs,atlasTexture:Rn,atlasTextureIcon:Un,atlasInterpolation:en,atlasInterpolationIcon:_n,isSDF:dt,hasHalo:id,tile:ht,labelPlaneMatrixInv:Ti};if(xe&&et.canOverlap){be=!0;const Wa=Et.segments.get();for(const Es of Wa)Ue.push({segments:new l.SegmentVector([Es]),sortKey:Es.sortKey,state:jc})}else Ue.push({segments:Et.segments,sortKey:0,state:jc})}be&&Ue.sort((qe,ht)=>qe.sortKey-ht.sortKey);for(const qe of Ue){const ht=qe.state;if(p.terrain&&p.terrain.setupElevationDraw(ht.tile,ht.program,{useDepthForOcclusion:!Ve,labelPlaneMatrixInv:ht.labelPlaneMatrixInv}),oe.activeTexture.set(le.TEXTURE0),ht.atlasTexture.bind(ht.atlasInterpolation,le.CLAMP_TO_EDGE),ht.atlasTextureIcon&&(oe.activeTexture.set(le.TEXTURE1),ht.atlasTextureIcon&&ht.atlasTextureIcon.bind(ht.atlasInterpolationIcon,le.CLAMP_TO_EDGE)),ht.isSDF){const et=ht.uniformValues;ht.hasHalo&&(et.u_is_halo=1,Rc(ht.buffers,qe.segments,d,p,ht.program,Re,$,Z,et)),et.u_is_halo=0}Rc(ht.buffers,qe.segments,d,p,ht.program,Re,$,Z,ht.uniformValues)}}function Rc(p,s,d,g,_,b,I,P,O){const B=g.context,$=[p.dynamicLayoutVertexBuffer,p.opacityVertexBuffer,p.globeExtVertexBuffer];_.draw(B,B.gl.TRIANGLES,b,I,P,l.CullFaceMode.disabled,O,d.id,p.layoutVertexBuffer,p.indexBuffer,s,d.paint,g.transform.zoom,p.programConfigurations.get(d.id),$)}function Vm(p,s,d,g,_,b,I){const P=p.context.gl,O=d.paint.get("fill-pattern"),B=O&&O.constantOr(1);let $,Z,oe,le,he;I?(Z=B&&!d.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",$=P.LINES):(Z=B?"fillPattern":"fill",$=P.TRIANGLES);for(const ue of g){const ge=s.getTile(ue);if(B&&!ge.patternsLoaded())continue;const K=ge.getBucket(d);if(!K)continue;p.prepareDrawTile();const se=K.programConfigurations.get(d.id),xe=p.useProgram(Z,se);B&&(p.context.activeTexture.set(P.TEXTURE0),ge.imageAtlasTexture.bind(P.LINEAR,P.CLAMP_TO_EDGE),se.updatePaintBuffers());const be=O.constantOr(null);if(be&&ge.imageAtlas){const ze=ge.imageAtlas.patternPositions[be.toString()];ze&&se.setConstantPatternPositions(ze)}const Re=p.translatePosMatrix(ue.projMatrix,ge,d.paint.get("fill-translate"),d.paint.get("fill-translate-anchor"));if(I){le=K.indexBuffer2,he=K.segments2;const ze=p.terrain&&p.terrain.renderingToTexture?p.terrain.drapeBufferSize:[P.drawingBufferWidth,P.drawingBufferHeight];oe=Z==="fillOutlinePattern"&&B?q0(Re,p,ge,ze):W0(Re,ze)}else le=K.indexBuffer,he=K.segments,oe=B?Wh(Re,p,ge):Hs(Re);p.prepareDrawProgram(p.context,xe,ue.toUnwrapped()),xe.draw(p.context,$,_,p.stencilModeForClipping(ue),b,l.CullFaceMode.disabled,oe,d.id,K.layoutVertexBuffer,le,he,d.paint,p.transform.zoom,se)}}function Vu(p,s,d,g,_,b,I){const P=p.context,O=P.gl,B=p.transform,$=d.paint.get("fill-extrusion-pattern"),Z=$.constantOr(1),oe=d.paint.get("fill-extrusion-opacity"),le=[d.paint.get("fill-extrusion-ambient-occlusion-intensity"),d.paint.get("fill-extrusion-ambient-occlusion-radius")],he=d.layout.get("fill-extrusion-edge-radius"),ue=he>0&&!d.paint.get("fill-extrusion-rounded-roof"),ge=ue?0:he,K=B.projection.name==="globe"?l.fillExtrusionHeightLift():0,se=B.projection.name==="globe",xe=se?l.globeToMercatorTransition(B.zoom):0,be=[l.mercatorXfromLng(B.center.lng),l.mercatorYfromLat(B.center.lat)],Re=[];se&&Re.push("PROJECTION_GLOBE_VIEW"),le[0]>0&&Re.push("FAUX_AO"),ue&&Re.push("ZERO_ROOF_RADIUS");for(const ze of g){const Oe=s.getTile(ze),Ve=Oe.getBucket(d);if(!Ve||Ve.projection.name!==B.projection.name)continue;const Ue=Ve.programConfigurations.get(d.id),Ke=p.useProgram(Z?"fillExtrusionPattern":"fillExtrusion",Ue,Re);if(p.terrain){const dt=p.terrain;if(p.style.terrainSetForDrapingOnly())dt.setupElevationDraw(Oe,Ke,{useMeterToDem:!0});else{if(!Ve.enableTerrain)continue;if(dt.setupElevationDraw(Oe,Ke,{useMeterToDem:!0}),Hm(P,s,ze,Ve,d,dt),!Ve.centroidVertexBuffer){const zt=Ke.attributes.a_centroid_pos;zt!==void 0&&O.vertexAttrib2f(zt,0,0)}}}Z&&(p.context.activeTexture.set(O.TEXTURE0),Oe.imageAtlasTexture.bind(O.LINEAR,O.CLAMP_TO_EDGE),Ue.updatePaintBuffers());const Pt=$.constantOr(null);if(Pt&&Oe.imageAtlas){const dt=Oe.imageAtlas.patternPositions[Pt.toString()];dt&&Ue.setConstantPatternPositions(dt)}const qe=p.translatePosMatrix(ze.projMatrix,Oe,d.paint.get("fill-extrusion-translate"),d.paint.get("fill-extrusion-translate-anchor")),ht=B.projection.createInversionMatrix(B,ze.canonical),et=d.paint.get("fill-extrusion-vertical-gradient"),Et=Z?$m(qe,p,et,oe,le,ge,ze,Oe,K,xe,be,ht):Gh(qe,p,et,oe,le,ge,ze,K,xe,be,ht);p.prepareDrawProgram(P,Ke,ze.toUnwrapped());const Xe=[];p.terrain&&Xe.push(Ve.centroidVertexBuffer),se&&Xe.push(Ve.layoutVertexExtBuffer),Ke.draw(P,P.gl.TRIANGLES,_,b,I,l.CullFaceMode.backCCW,Et,d.id,Ve.layoutVertexBuffer,Ve.indexBuffer,Ve.segments,d.paint,p.transform.zoom,Ue,Xe)}}function Hm(p,s,d,g,_,b){const I=[K=>{let se=K.canonical.x-1,xe=K.wrap;return se<0&&(se=(1<<K.canonical.z)-1,xe--),new l.OverscaledTileID(K.overscaledZ,xe,K.canonical.z,se,K.canonical.y)},K=>{let se=K.canonical.x+1,xe=K.wrap;return se===1<<K.canonical.z&&(se=0,xe++),new l.OverscaledTileID(K.overscaledZ,xe,K.canonical.z,se,K.canonical.y)},K=>new l.OverscaledTileID(K.overscaledZ,K.wrap,K.canonical.z,K.canonical.x,(K.canonical.y===0?1<<K.canonical.z:K.canonical.y)-1),K=>new l.OverscaledTileID(K.overscaledZ,K.wrap,K.canonical.z,K.canonical.x,K.canonical.y===(1<<K.canonical.z)-1?0:K.canonical.y+1)],P=K=>{const se=s.getSource().minzoom,xe=Re=>{const ze=s.getTileByID(Re);if(ze&&ze.hasData())return ze.getBucket(_)},be=[0,-1,1];for(const Re of be){if(K.overscaledZ+Re<se)continue;const ze=xe(K.calculateScaledKey(K.overscaledZ+Re));if(ze)return ze}},O=[0,0,0],B=(K,se)=>(O[0]=Math.min(K.min.y,se.min.y),O[1]=Math.max(K.max.y,se.max.y),O[2]=l.EXTENT-se.min.x>K.max.x?se.min.x-l.EXTENT:K.max.x,O),$=(K,se)=>(O[0]=Math.min(K.min.x,se.min.x),O[1]=Math.max(K.max.x,se.max.x),O[2]=l.EXTENT-se.min.y>K.max.y?se.min.y-l.EXTENT:K.max.y,O),Z=[(K,se)=>B(K,se),(K,se)=>B(se,K),(K,se)=>$(K,se),(K,se)=>$(se,K)],oe=new l.Point(0,0);let le,he,ue;const ge=(K,se,xe,be,Re)=>{const ze=[[be?xe:K,be?K:xe,0],[be?xe:se,be?se:xe,0]],Oe=Re<0?l.EXTENT+Re:Re,Ve=[be?Oe:(K+se)/2,be?(K+se)/2:Oe,0];return xe===0&&Re<0||xe!==0&&Re>0?b.getForTilePoints(ue,[Ve],!0,he):ze.push(Ve),b.getForTilePoints(d,ze,!0,le),Math.max(ze[0][2],ze[1][2],Ve[2])/b.exaggeration()};for(let K=0;K<4;K++){const se=(K<2?1:5)-K,xe=g.borders[K];if(xe.length===0)continue;const be=ue=I[K](d),Re=P(be);if(!(Re&&Re instanceof l.FillExtrusionBucket&&Re.enableTerrain)||g.borderDoneWithNeighborZ[K]===Re.canonical.z&&Re.borderDoneWithNeighborZ[se]===g.canonical.z||(he=b.findDEMTileFor(be),!he||!he.dem))continue;if(!le){const Ue=b.findDEMTileFor(d);if(!Ue||!Ue.dem)return;le=Ue}const ze=Re.borders[se];let Oe=0;const Ve=Re.borderDoneWithNeighborZ[se]!==g.canonical.z;if(g.canonical.z===Re.canonical.z){for(let Ue=0;Ue<xe.length;Ue++){const Ke=g.featuresOnBorder[xe[Ue]],Pt=Ke.borders[K];let qe;for(;Oe<ze.length&&(qe=Re.featuresOnBorder[ze[Oe]],!(qe.borders[se][1]>Pt[0]+3));)Ve&&Re.encodeCentroid(void 0,qe,!1),Oe++;if(qe&&Oe<ze.length){const ht=Oe;let et=0;for(;!(qe.borders[se][0]>Pt[1]-3)&&(et++,++Oe!==ze.length);)qe=Re.featuresOnBorder[ze[Oe]];if(qe=Re.featuresOnBorder[ze[ht]],Ke.intersectsCount()>1||qe.intersectsCount()>1||et!==1){et!==1&&(Oe=ht),g.encodeCentroid(void 0,Ke,!1),Ve&&Re.encodeCentroid(void 0,qe,!1);continue}const Et=Z[K](Ke,qe),Xe=K%2?l.EXTENT-1:0;oe.x=ge(Et[0],Math.min(l.EXTENT-1,Et[1]),Xe,K<2,Et[2]),oe.y=0,g.encodeCentroid(oe,Ke,!1),Ve&&Re.encodeCentroid(oe,qe,!1)}else g.encodeCentroid(void 0,Ke,!1)}g.borderDoneWithNeighborZ[K]=Re.canonical.z,g.needsCentroidUpdate=!0,Ve&&(Re.borderDoneWithNeighborZ[se]=g.canonical.z,Re.needsCentroidUpdate=!0)}else{for(const Ue of xe)g.encodeCentroid(void 0,g.featuresOnBorder[Ue],!1);if(Ve){for(const Ue of ze)Re.encodeCentroid(void 0,Re.featuresOnBorder[Ue],!1);Re.borderDoneWithNeighborZ[se]=g.canonical.z,Re.needsCentroidUpdate=!0}g.borderDoneWithNeighborZ[K]=Re.canonical.z,g.needsCentroidUpdate=!0}}(g.needsCentroidUpdate||!g.centroidVertexBuffer&&g.centroidVertexArray.length!==0)&&g.uploadCentroid(p)}const Ml=new l.Color(1,0,0,1),J0=new l.Color(0,1,0,1),Q0=new l.Color(0,0,1,1),e_=new l.Color(1,0,1,1),t_=new l.Color(0,1,1,1);function n_(p,s,d){const g=p.context,_=p.transform,b=g.gl,I=_.projection.name==="globe",P=I?["PROJECTION_GLOBE_VIEW"]:null;let O=d.projMatrix;if(I&&l.globeToMercatorTransition(_.zoom)>0){const Ke=l.transitionTileAABBinECEF(d.canonical,_),Pt=l.globeDenormalizeECEF(Ke);O=l.multiply(new Float32Array(16),_.globeMatrix,Pt),l.multiply(O,_.projMatrix,O)}const B=p.useProgram("debug",null,P),$=s.getTileByID(d.key);p.terrain&&p.terrain.setupElevationDraw($,B);const Z=l.DepthMode.disabled,oe=l.StencilMode.disabled,le=p.colorModeForRenderPass(),he="$debug";g.activeTexture.set(b.TEXTURE0),p.emptyTexture.bind(b.LINEAR,b.CLAMP_TO_EDGE),I?$._makeGlobeTileDebugBuffers(p.context,_):$._makeDebugTileBoundsBuffers(p.context,_.projection);const ue=$._tileDebugBuffer||p.debugBuffer,ge=$._tileDebugIndexBuffer||p.debugIndexBuffer,K=$._tileDebugSegments||p.debugSegments;B.draw(g,b.LINE_STRIP,Z,oe,le,l.CullFaceMode.disabled,Bu(O,l.Color.red),he,ue,ge,K,null,null,null,[$._globeTileDebugBorderBuffer]);const se=$.latestRawTileData,xe=Math.floor((se&&se.byteLength||0)/1024),be=s.getTile(d).tileSize,Re=512/Math.min(be,512)*(d.overscaledZ/_.zoom)*.5;let ze=d.canonical.toString();d.overscaledZ!==d.canonical.z&&(ze+=` => ${d.overscaledZ}`),ze+=` ${xe}kb`,function(Ke,Pt){Ke.initDebugOverlayCanvas();const qe=Ke.debugOverlayCanvas,ht=Ke.context.gl,et=Ke.debugOverlayCanvas.getContext("2d");et.clearRect(0,0,qe.width,qe.height),et.shadowColor="white",et.shadowBlur=2,et.lineWidth=1.5,et.strokeStyle="white",et.textBaseline="top",et.font="bold 36px Open Sans, sans-serif",et.fillText(Pt,5,5),et.strokeText(Pt,5,5),Ke.debugOverlayTexture.update(qe),Ke.debugOverlayTexture.bind(ht.LINEAR,ht.CLAMP_TO_EDGE)}(p,ze);const Oe=$._tileDebugTextBuffer||p.debugBuffer,Ve=$._tileDebugTextIndexBuffer||p.quadTriangleIndexBuffer,Ue=$._tileDebugTextSegments||p.debugSegments;B.draw(g,b.TRIANGLES,Z,oe,l.ColorMode.alphaBlended,l.CullFaceMode.disabled,Bu(O,l.Color.transparent,Re),he,Oe,Ve,Ue,null,null,null,[$._globeTileDebugTextBuffer])}function Gm(p,s,d,g){Pl(p,0,s+d/2,p.transform.width,d,g)}function Hu(p,s,d,g){Pl(p,s-d/2,0,d,p.transform.height,g)}function Pl(p,s,d,g,_,b){const I=p.context,P=I.gl;P.enable(P.SCISSOR_TEST),P.scissor(s*l.exported.devicePixelRatio,d*l.exported.devicePixelRatio,g*l.exported.devicePixelRatio,_*l.exported.devicePixelRatio),I.clear({color:b}),P.disable(P.SCISSOR_TEST)}const Wm=l.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:qm}=Wm;function Ha(p,s,d,g){p.emplaceBack(s,d,g)}class Gu{constructor(s){this.vertexArray=new l.StructArrayLayout3f12,this.indices=new l.StructArrayLayout3ui6,Ha(this.vertexArray,-1,-1,1),Ha(this.vertexArray,1,-1,1),Ha(this.vertexArray,-1,1,1),Ha(this.vertexArray,1,1,1),Ha(this.vertexArray,-1,-1,-1),Ha(this.vertexArray,1,-1,-1),Ha(this.vertexArray,-1,1,-1),Ha(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=s.createVertexBuffer(this.vertexArray,qm),this.indexBuffer=s.createIndexBuffer(this.indices),this.segment=l.SegmentVector.simpleSegment(0,0,36,12)}}function zo(p,s,d,g,_,b){const I=p.gl,P=s.paint.get("sky-atmosphere-color"),O=s.paint.get("sky-atmosphere-halo-color"),B=s.paint.get("sky-atmosphere-sun-intensity"),$=((Z,oe,le,he,ue)=>({u_matrix_3f:Z,u_sun_direction:oe,u_sun_intensity:le,u_color_tint_r:[he.r,he.g,he.b,he.a],u_color_tint_m:[ue.r,ue.g,ue.b,ue.a],u_luminance:5e-5}))(l.fromMat4(l.create$1(),g),_,B,P,O);I.framebufferTexture2D(I.FRAMEBUFFER,I.COLOR_ATTACHMENT0,I.TEXTURE_CUBE_MAP_POSITIVE_X+b,s.skyboxTexture,0),d.draw(p,I.TRIANGLES,l.DepthMode.disabled,l.StencilMode.disabled,l.ColorMode.unblended,l.CullFaceMode.frontCW,$,"skyboxCapture",s.skyboxGeometry.vertexBuffer,s.skyboxGeometry.indexBuffer,s.skyboxGeometry.segment)}const Oc=l.createLayout([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class Zm{constructor(s){const d=new l.StructArrayLayout5f20;d.emplaceBack(-1,1,1,0,0),d.emplaceBack(1,1,1,1,0),d.emplaceBack(1,-1,1,1,1),d.emplaceBack(-1,-1,1,0,1);const g=new l.StructArrayLayout3ui6;g.emplaceBack(0,1,2),g.emplaceBack(2,3,0),this.vertexBuffer=s.createVertexBuffer(d,Oc.members),this.indexBuffer=s.createIndexBuffer(g),this.segments=l.SegmentVector.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const Gs={symbol:function(p,s,d,g,_){if(p.renderPass!=="translucent")return;const b=l.StencilMode.disabled,I=p.colorModeForRenderPass();d.layout.get("text-variable-anchor")&&function(P,O,B,$,Z,oe,le){const he=O.transform,ue=Z==="map",ge=oe==="map";for(const K of P){const se=$.getTile(K),xe=se.getBucket(B);if(!xe||!xe.text||!xe.text.segments.get().length)continue;const be=l.evaluateSizeForZoom(xe.textSizeData,he.zoom),Re=Xn(K,xe.getProjection(),he),ze=he.calculatePixelsToTileUnitsMatrix(se),Oe=nt(Re,se.tileID.canonical,ge,ue,he,xe.getProjection(),ze),Ve=B.layout.get("icon-text-fit")!=="none"&&xe.hasIconData();if(be){const Ue=Math.pow(2,he.zoom-se.tileID.overscaledZ);Y0(xe,ue,ge,le,l.symbolSize,he,Oe,K,Ue,be,Ve)}}}(g,p,d,s,d.layout.get("text-rotation-alignment"),d.layout.get("text-pitch-alignment"),_),d.paint.get("icon-opacity").constantOr(1)!==0&&Um(p,s,d,g,!1,d.paint.get("icon-translate"),d.paint.get("icon-translate-anchor"),d.layout.get("icon-rotation-alignment"),d.layout.get("icon-pitch-alignment"),d.layout.get("icon-keep-upright"),b,I),d.paint.get("text-opacity").constantOr(1)!==0&&Um(p,s,d,g,!0,d.paint.get("text-translate"),d.paint.get("text-translate-anchor"),d.layout.get("text-rotation-alignment"),d.layout.get("text-pitch-alignment"),d.layout.get("text-keep-upright"),b,I),s.map.showCollisionBoxes&&(Ac(p,s,d,g,d.paint.get("text-translate"),d.paint.get("text-translate-anchor"),!0),Ac(p,s,d,g,d.paint.get("icon-translate"),d.paint.get("icon-translate-anchor"),!1))},circle:function(p,s,d,g){if(p.renderPass!=="translucent")return;const _=d.paint.get("circle-opacity"),b=d.paint.get("circle-stroke-width"),I=d.paint.get("circle-stroke-opacity"),P=d.layout.get("circle-sort-key").constantOr(1)!==void 0;if(_.constantOr(1)===0&&(b.constantOr(1)===0||I.constantOr(1)===0))return;const O=p.context,B=O.gl,$=p.transform,Z=p.depthModeForSublayer(0,l.DepthMode.ReadOnly),oe=l.StencilMode.disabled,le=p.colorModeForRenderPass(),he=$.projection.name==="globe",ue=[l.mercatorXfromLng($.center.lng),l.mercatorYfromLat($.center.lat)],ge=[];for(let se=0;se<g.length;se++){const xe=g[se],be=s.getTile(xe),Re=be.getBucket(d);if(!Re||Re.projection.name!==$.projection.name)continue;const ze=Re.programConfigurations.get(d.id),Oe=Zh(d);he&&Oe.push("PROJECTION_GLOBE_VIEW");const Ve=p.useProgram("circle",ze,Oe),Ue=Re.layoutVertexBuffer,Ke=Re.globeExtVertexBuffer,Pt=Re.indexBuffer,qe=$.projection.createInversionMatrix($,xe.canonical),ht={programConfiguration:ze,program:Ve,layoutVertexBuffer:Ue,globeExtVertexBuffer:Ke,indexBuffer:Pt,uniformValues:qh(p,xe,be,qe,ue,d),tile:be};if(P){const et=Re.segments.get();for(const Et of et)ge.push({segments:new l.SegmentVector([Et]),sortKey:Et.sortKey,state:ht})}else ge.push({segments:Re.segments,sortKey:0,state:ht})}P&&ge.sort((se,xe)=>se.sortKey-xe.sortKey);const K={useDepthForOcclusion:!he};for(const se of ge){const{programConfiguration:xe,program:be,layoutVertexBuffer:Re,globeExtVertexBuffer:ze,indexBuffer:Oe,uniformValues:Ve,tile:Ue}=se.state,Ke=se.segments;p.terrain&&p.terrain.setupElevationDraw(Ue,be,K),p.prepareDrawProgram(O,be,Ue.tileID.toUnwrapped()),be.draw(O,B.TRIANGLES,Z,oe,le,l.CullFaceMode.disabled,Ve,d.id,Re,Oe,Ke,d.paint,$.zoom,xe,[ze])}},heatmap:function(p,s,d,g){if(d.paint.get("heatmap-opacity")!==0)if(p.renderPass==="offscreen"){const _=p.context,b=_.gl,I=l.StencilMode.disabled,P=new l.ColorMode([b.ONE,b.ONE],l.Color.transparent,[!0,!0,!0,!0]);(function(le,he,ue,ge){const K=le.gl,se=he.width*ge,xe=he.height*ge;le.activeTexture.set(K.TEXTURE1),le.viewport.set([0,0,se,xe]);let be=ue.heatmapFbo;if(!be||be&&(be.width!==se||be.height!==xe)){be&&be.destroy();const Re=K.createTexture();K.bindTexture(K.TEXTURE_2D,Re),K.texParameteri(K.TEXTURE_2D,K.TEXTURE_WRAP_S,K.CLAMP_TO_EDGE),K.texParameteri(K.TEXTURE_2D,K.TEXTURE_WRAP_T,K.CLAMP_TO_EDGE),K.texParameteri(K.TEXTURE_2D,K.TEXTURE_MIN_FILTER,K.LINEAR),K.texParameteri(K.TEXTURE_2D,K.TEXTURE_MAG_FILTER,K.LINEAR),be=ue.heatmapFbo=le.createFramebuffer(se,xe,!1),function(ze,Oe,Ve,Ue,Ke,Pt){const qe=ze.gl;qe.texImage2D(qe.TEXTURE_2D,0,ze.isWebGL2&&ze.extRenderToTextureHalfFloat?qe.RGBA16F:qe.RGBA,Ke,Pt,0,qe.RGBA,ze.extRenderToTextureHalfFloat?ze.isWebGL2?qe.HALF_FLOAT:ze.extTextureHalfFloat.HALF_FLOAT_OES:qe.UNSIGNED_BYTE,null),Ue.colorAttachment.set(Ve)}(le,0,Re,be,se,xe)}else K.bindTexture(K.TEXTURE_2D,be.colorAttachment.get()),le.bindFramebuffer.set(be.framebuffer)})(_,p,d,p.transform.projection.name==="globe"?.5:.25),_.clear({color:l.Color.transparent});const O=p.transform,B=O.projection.name==="globe",$=B?["PROJECTION_GLOBE_VIEW"]:null,Z=B?l.CullFaceMode.frontCCW:l.CullFaceMode.disabled,oe=[l.mercatorXfromLng(O.center.lng),l.mercatorYfromLat(O.center.lat)];for(let le=0;le<g.length;le++){const he=g[le];if(s.hasRenderableParent(he))continue;const ue=s.getTile(he),ge=ue.getBucket(d);if(!ge||ge.projection.name!==O.projection.name)continue;const K=ge.programConfigurations.get(d.id),se=p.useProgram("heatmap",K,$),{zoom:xe}=p.transform;p.terrain&&p.terrain.setupElevationDraw(ue,se),p.prepareDrawProgram(_,se,he.toUnwrapped());const be=O.projection.createInversionMatrix(O,he.canonical);se.draw(_,b.TRIANGLES,l.DepthMode.disabled,I,P,Z,Bm(p,he,ue,be,oe,xe,d.paint.get("heatmap-intensity")),d.id,ge.layoutVertexBuffer,ge.indexBuffer,ge.segments,d.paint,p.transform.zoom,K,B?[ge.globeExtVertexBuffer]:null)}_.viewport.set([0,0,p.width,p.height])}else p.renderPass==="translucent"&&(p.context.setColorMode(p.colorModeForRenderPass()),function(_,b){const I=_.context,P=I.gl,O=b.heatmapFbo;if(!O)return;I.activeTexture.set(P.TEXTURE0),P.bindTexture(P.TEXTURE_2D,O.colorAttachment.get()),I.activeTexture.set(P.TEXTURE1);let B=b.colorRampTexture;B||(B=b.colorRampTexture=new l.Texture(I,b.colorRamp,P.RGBA)),B.bind(P.LINEAR,P.CLAMP_TO_EDGE),_.useProgram("heatmapTexture").draw(I,P.TRIANGLES,l.DepthMode.disabled,l.StencilMode.disabled,_.colorModeForRenderPass(),l.CullFaceMode.disabled,(($,Z,oe,le)=>({u_image:0,u_color_ramp:1,u_opacity:Z.paint.get("heatmap-opacity")}))(0,b),b.id,_.viewportBuffer,_.quadTriangleIndexBuffer,_.viewportSegments,b.paint,_.transform.zoom)}(p,d))},line:function(p,s,d,g){if(p.renderPass!=="translucent")return;const _=d.paint.get("line-opacity"),b=d.paint.get("line-width");if(_.constantOr(1)===0||b.constantOr(1)===0)return;const I=p.depthModeForSublayer(0,l.DepthMode.ReadOnly),P=p.colorModeForRenderPass(),O=p.terrain&&p.terrain.renderingToTexture?1:l.exported.devicePixelRatio,B=d.paint.get("line-dasharray"),$=B.constantOr(1),Z=d.layout.get("line-cap"),oe=d.paint.get("line-pattern"),le=oe.constantOr(1),he=d.paint.get("line-gradient"),ue=le?"linePattern":"line",ge=p.context,K=ge.gl,se=(be=>{const Re=[];Pc(be)&&Re.push("RENDER_LINE_DASH"),be.paint.get("line-gradient")&&Re.push("RENDER_LINE_GRADIENT");const ze=be.paint.get("line-trim-offset");ze[0]===0&&ze[1]===0||Re.push("RENDER_LINE_TRIM_OFFSET");const Oe=be.paint.get("line-pattern").constantOr(1),Ve=be.paint.get("line-opacity").constantOr(1)!==1;return!Oe&&Ve&&Re.push("RENDER_LINE_ALPHA_DISCARD"),Re})(d);let xe=se.includes("RENDER_LINE_ALPHA_DISCARD");p.terrain&&p.terrain.clipOrMaskOverlapStencilType()&&(xe=!1);for(const be of g){const Re=s.getTile(be);if(le&&!Re.patternsLoaded())continue;const ze=Re.getBucket(d);if(!ze)continue;p.prepareDrawTile();const Oe=ze.programConfigurations.get(d.id),Ve=p.useProgram(ue,Oe,se),Ue=oe.constantOr(null);if(Ue&&Re.imageAtlas){const dt=Re.imageAtlas.patternPositions[Ue.toString()];dt&&Oe.setConstantPatternPositions(dt)}const Ke=B.constantOr(null),Pt=Z.constantOr(null);if(!le&&Ke&&Pt&&Re.lineAtlas){const dt=Re.lineAtlas.getDash(Ke,Pt);dt&&Oe.setConstantPatternPositions(dt)}let[qe,ht]=d.paint.get("line-trim-offset");(Pt==="round"||Pt==="square")&&qe!==ht&&(qe===0&&(qe-=1),ht===1&&(ht+=1));const et=p.terrain?be.projMatrix:null,Et=le?Mc(p,Re,d,et,O):X0(p,Re,d,et,ze.lineClipsArray.length,O,[qe,ht]);if(he){const dt=ze.gradients[d.id];let zt=dt.texture;if(d.gradientVersion!==dt.version){let vt=256;if(d.stepInterpolant){const kt=s.getSource().maxzoom,dn=be.canonical.z===kt?Math.ceil(1<<p.transform.maxZoom-be.canonical.z):1;vt=l.clamp(l.nextPowerOfTwo(ze.maxLineLength/l.EXTENT*1024*dn),256,ge.maxTextureSize)}dt.gradient=l.renderColorRamp({expression:d.gradientExpression(),evaluationKey:"lineProgress",resolution:vt,image:dt.gradient||void 0,clips:ze.lineClipsArray}),dt.texture?dt.texture.update(dt.gradient):dt.texture=new l.Texture(ge,dt.gradient,K.RGBA),dt.version=d.gradientVersion,zt=dt.texture}ge.activeTexture.set(K.TEXTURE1),zt.bind(d.stepInterpolant?K.NEAREST:K.LINEAR,K.CLAMP_TO_EDGE)}$&&(ge.activeTexture.set(K.TEXTURE0),Re.lineAtlasTexture.bind(K.LINEAR,K.REPEAT),Oe.updatePaintBuffers()),le&&(ge.activeTexture.set(K.TEXTURE0),Re.imageAtlasTexture.bind(K.LINEAR,K.CLAMP_TO_EDGE),Oe.updatePaintBuffers()),p.prepareDrawProgram(ge,Ve,be.toUnwrapped());const Xe=dt=>{Ve.draw(ge,K.TRIANGLES,I,dt,P,l.CullFaceMode.disabled,Et,d.id,ze.layoutVertexBuffer,ze.indexBuffer,ze.segments,d.paint,p.transform.zoom,Oe,[ze.layoutVertexBuffer2])};if(xe){const dt=p.stencilModeForClipping(be).ref;dt===0&&p.terrain&&ge.clear({stencil:0});const zt={func:K.EQUAL,mask:255};Et.u_alpha_discard_threshold=.8,Xe(new l.StencilMode(zt,dt,255,K.KEEP,K.KEEP,K.INVERT)),Et.u_alpha_discard_threshold=0,Xe(new l.StencilMode(zt,dt,255,K.KEEP,K.KEEP,K.KEEP))}else Xe(p.stencilModeForClipping(be))}xe&&(p.resetStencilClippingMasks(),p.terrain&&ge.clear({stencil:0}))},fill:function(p,s,d,g){const _=d.paint.get("fill-color"),b=d.paint.get("fill-opacity");if(b.constantOr(1)===0)return;const I=p.colorModeForRenderPass(),P=d.paint.get("fill-pattern"),O=p.opaquePassEnabledForLayer()&&!P.constantOr(1)&&_.constantOr(l.Color.transparent).a===1&&b.constantOr(0)===1?"opaque":"translucent";if(p.renderPass===O){const B=p.depthModeForSublayer(1,p.renderPass==="opaque"?l.DepthMode.ReadWrite:l.DepthMode.ReadOnly);Vm(p,s,d,g,B,I,!1)}if(p.renderPass==="translucent"&&d.paint.get("fill-antialias")){const B=p.depthModeForSublayer(d.getPaintProperty("fill-outline-color")?2:0,l.DepthMode.ReadOnly);Vm(p,s,d,g,B,I,!0)}},"fill-extrusion":function(p,s,d,g){const _=d.paint.get("fill-extrusion-opacity");if(_!==0&&p.renderPass==="translucent"){const b=new l.DepthMode(p.context.gl.LEQUAL,l.DepthMode.ReadWrite,p.depthRangeFor3D);if(_!==1||d.paint.get("fill-extrusion-pattern").constantOr(1))Vu(p,s,d,g,b,l.StencilMode.disabled,l.ColorMode.disabled),Vu(p,s,d,g,b,p.stencilModeFor3D(),p.colorModeForRenderPass()),p.resetStencilClippingMasks();else{const I=p.colorModeForRenderPass();Vu(p,s,d,g,b,l.StencilMode.disabled,I)}}},hillshade:function(p,s,d,g){if(p.renderPass!=="offscreen"&&p.renderPass!=="translucent")return;const _=p.context,b=p.depthModeForSublayer(0,l.DepthMode.ReadOnly),I=p.colorModeForRenderPass(),P=p.terrain&&p.terrain.renderingToTexture,[O,B]=p.renderPass!=="translucent"||P?[{},g]:p.stencilConfigForOverlap(g);for(const $ of B){const Z=s.getTile($);if(Z.needsHillshadePrepare&&p.renderPass==="offscreen")km(p,Z,d,b,l.StencilMode.disabled,I);else if(p.renderPass==="translucent"){const oe=P&&p.terrain?p.terrain.stencilModeForRTTOverlap($):O[$.overscaledZ];zm(p,$,Z,d,b,oe,I)}}_.viewport.set([0,0,p.width,p.height]),p.resetStencilClippingMasks()},raster:function(p,s,d,g,_,b){if(p.renderPass!=="translucent"||d.paint.get("raster-opacity")===0||!g.length)return;const I=p.context,P=I.gl,O=s.getSource(),B=p.useProgram("raster"),$=p.colorModeForRenderPass(),Z=p.terrain&&p.terrain.renderingToTexture,[oe,le]=O instanceof Yt||Z?[{},g]:p.stencilConfigForOverlap(g),he=le[le.length-1].overscaledZ,ue=!p.options.moving;for(const ge of le){const K=Z?l.DepthMode.disabled:p.depthModeForSublayer(ge.overscaledZ-he,d.paint.get("raster-opacity")===1?l.DepthMode.ReadWrite:l.DepthMode.ReadOnly,P.LESS),se=ge.toUnwrapped(),xe=s.getTile(ge);if(Z&&(!xe||!xe.hasData()))continue;const be=Z?ge.projMatrix:p.transform.calculateProjMatrix(se,ue),Re=p.terrain&&Z?p.terrain.stencilModeForRTTOverlap(ge):oe[ge.overscaledZ],ze=b?0:d.paint.get("raster-fade-duration");xe.registerFadeDuration(ze);const Oe=s.findLoadedParent(ge,0),Ve=Uh(xe,Oe,s,p.transform,ze);let Ue,Ke;p.terrain&&p.terrain.prepareDrawTile();const Pt=d.paint.get("raster-resampling")==="nearest"?P.NEAREST:P.LINEAR;I.activeTexture.set(P.TEXTURE0),xe.texture.bind(Pt,P.CLAMP_TO_EDGE),I.activeTexture.set(P.TEXTURE1),Oe?(Oe.texture.bind(Pt,P.CLAMP_TO_EDGE),Ue=Math.pow(2,Oe.tileID.overscaledZ-xe.tileID.overscaledZ),Ke=[xe.tileID.canonical.x*Ue%1,xe.tileID.canonical.y*Ue%1]):xe.texture.bind(Pt,P.CLAMP_TO_EDGE),xe.texture.useMipmap&&I.extTextureFilterAnisotropic&&p.transform.pitch>20&&P.texParameterf(P.TEXTURE_2D,I.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,I.extTextureFilterAnisotropicMax);const qe=Yh(be,Ke||[0,0],Ue||1,Ve,d,O instanceof Yt?O.perspectiveTransform:[0,0]);if(p.prepareDrawProgram(I,B,se),O instanceof Yt)O.boundsBuffer&&O.boundsSegments&&B.draw(I,P.TRIANGLES,K,l.StencilMode.disabled,$,l.CullFaceMode.disabled,qe,d.id,O.boundsBuffer,p.quadTriangleIndexBuffer,O.boundsSegments);else{const{tileBoundsBuffer:ht,tileBoundsIndexBuffer:et,tileBoundsSegments:Et}=p.getTileBoundsBuffers(xe);B.draw(I,P.TRIANGLES,K,Re,$,l.CullFaceMode.disabled,qe,d.id,ht,et,Et)}}p.resetStencilClippingMasks()},background:function(p,s,d,g){const _=d.paint.get("background-color"),b=d.paint.get("background-opacity");if(b===0)return;const I=p.context,P=I.gl,O=p.transform,B=O.tileSize,$=d.paint.get("background-pattern");if(p.isPatternMissing($))return;const Z=!$&&_.a===1&&b===1&&p.opaquePassEnabledForLayer()?"opaque":"translucent";if(p.renderPass!==Z)return;const oe=l.StencilMode.disabled,le=p.depthModeForSublayer(0,Z==="opaque"?l.DepthMode.ReadWrite:l.DepthMode.ReadOnly),he=p.colorModeForRenderPass(),ue=p.useProgram($?"backgroundPattern":"background");let ge,K=g;K||(ge=p.getBackgroundTiles(),K=Object.values(ge).map(se=>se.tileID)),$&&(I.activeTexture.set(P.TEXTURE0),p.imageManager.bind(p.context));for(const se of K){const xe=se.toUnwrapped(),be=g?se.projMatrix:p.transform.calculateProjMatrix(xe);p.prepareDrawTile();const Re=s?s.getTile(se):ge?ge[se.key]:new l.Tile(se,B,O.zoom,p),ze=$?K0(be,b,p,$,{tileID:se,tileSize:B}):Qh(be,b,_);p.prepareDrawProgram(I,ue,xe);const{tileBoundsBuffer:Oe,tileBoundsIndexBuffer:Ve,tileBoundsSegments:Ue}=p.getTileBoundsBuffers(Re);ue.draw(I,P.TRIANGLES,le,oe,he,l.CullFaceMode.disabled,ze,d.id,Oe,Ve,Ue)}},sky:function(p,s,d){const g=p.transform,_=g.projection.name==="mercator"||g.projection.name==="globe"?1:l.smoothstep(7,8,g.zoom),b=d.paint.get("sky-opacity")*_;if(b===0)return;const I=p.context,P=d.paint.get("sky-type"),O=new l.DepthMode(I.gl.LEQUAL,l.DepthMode.ReadOnly,[0,1]),B=p.frameCounter/1e3%1;P==="atmosphere"?p.renderPass==="offscreen"?d.needsSkyboxCapture(p)&&(function($,Z,oe,le){const he=$.context,ue=he.gl;let ge=Z.skyboxFbo;if(!ge){ge=Z.skyboxFbo=he.createFramebuffer(32,32,!1),Z.skyboxGeometry=new Gu(he),Z.skyboxTexture=he.gl.createTexture(),ue.bindTexture(ue.TEXTURE_CUBE_MAP,Z.skyboxTexture),ue.texParameteri(ue.TEXTURE_CUBE_MAP,ue.TEXTURE_WRAP_S,ue.CLAMP_TO_EDGE),ue.texParameteri(ue.TEXTURE_CUBE_MAP,ue.TEXTURE_WRAP_T,ue.CLAMP_TO_EDGE),ue.texParameteri(ue.TEXTURE_CUBE_MAP,ue.TEXTURE_MIN_FILTER,ue.LINEAR),ue.texParameteri(ue.TEXTURE_CUBE_MAP,ue.TEXTURE_MAG_FILTER,ue.LINEAR);for(let be=0;be<6;++be)ue.texImage2D(ue.TEXTURE_CUBE_MAP_POSITIVE_X+be,0,ue.RGBA,32,32,0,ue.RGBA,ue.UNSIGNED_BYTE,null)}he.bindFramebuffer.set(ge.framebuffer),he.viewport.set([0,0,32,32]);const K=Z.getCenter($,!0),se=$.useProgram("skyboxCapture"),xe=new Float64Array(16);l.identity(xe),l.rotateY(xe,xe,.5*-Math.PI),zo(he,Z,se,xe,K,0),l.identity(xe),l.rotateY(xe,xe,.5*Math.PI),zo(he,Z,se,xe,K,1),l.identity(xe),l.rotateX(xe,xe,.5*-Math.PI),zo(he,Z,se,xe,K,2),l.identity(xe),l.rotateX(xe,xe,.5*Math.PI),zo(he,Z,se,xe,K,3),l.identity(xe),zo(he,Z,se,xe,K,4),l.identity(xe),l.rotateY(xe,xe,Math.PI),zo(he,Z,se,xe,K,5),he.viewport.set([0,0,$.width,$.height])}(p,d),d.markSkyboxValid(p)):p.renderPass==="sky"&&function($,Z,oe,le,he){const ue=$.context,ge=ue.gl,K=$.transform,se=$.useProgram("skybox");ue.activeTexture.set(ge.TEXTURE0),ge.bindTexture(ge.TEXTURE_CUBE_MAP,Z.skyboxTexture);const xe=((be,Re,ze,Oe,Ve)=>({u_matrix:be,u_sun_direction:Re,u_cubemap:0,u_opacity:Oe,u_temporal_offset:Ve}))(K.skyboxMatrix,Z.getCenter($,!1),0,le,he);$.prepareDrawProgram(ue,se),se.draw(ue,ge.TRIANGLES,oe,l.StencilMode.disabled,$.colorModeForRenderPass(),l.CullFaceMode.backCW,xe,"skybox",Z.skyboxGeometry.vertexBuffer,Z.skyboxGeometry.indexBuffer,Z.skyboxGeometry.segment)}(p,d,O,b,B):P==="gradient"&&p.renderPass==="sky"&&function($,Z,oe,le,he){const ue=$.context,ge=ue.gl,K=$.transform,se=$.useProgram("skyboxGradient");Z.skyboxGeometry||(Z.skyboxGeometry=new Gu(ue)),ue.activeTexture.set(ge.TEXTURE0);let xe=Z.colorRampTexture;xe||(xe=Z.colorRampTexture=new l.Texture(ue,Z.colorRamp,ge.RGBA)),xe.bind(ge.LINEAR,ge.CLAMP_TO_EDGE);const be=((Re,ze,Oe,Ve,Ue)=>({u_matrix:Re,u_color_ramp:0,u_center_direction:ze,u_radius:l.degToRad(Oe),u_opacity:Ve,u_temporal_offset:Ue}))(K.skyboxMatrix,Z.getCenter($,!1),Z.paint.get("sky-gradient-radius"),le,he);$.prepareDrawProgram(ue,se),se.draw(ue,ge.TRIANGLES,oe,l.StencilMode.disabled,$.colorModeForRenderPass(),l.CullFaceMode.backCW,be,"skyboxGradient",Z.skyboxGeometry.vertexBuffer,Z.skyboxGeometry.indexBuffer,Z.skyboxGeometry.segment)}(p,d,O,b,B)},debug:function(p,s,d){for(let g=0;g<d.length;g++)n_(p,s,d[g])},custom:function(p,s,d,g){const _=p.context,b=d.implementation;if(!p.transform.projection.unsupportedLayers||!p.transform.projection.unsupportedLayers.includes("custom")||p.terrain&&(p.terrain.renderingToTexture||p.renderPass==="offscreen")&&d.isLayerDraped()){if(p.renderPass==="offscreen"){const I=b.prerender;if(I){if(p.setCustomLayerDefaults(),_.setColorMode(p.colorModeForRenderPass()),p.transform.projection.name==="globe"){const P=p.transform.pointMerc;I.call(b,_.gl,p.transform.customLayerMatrix(),p.transform.getProjection(),p.transform.globeToMercatorMatrix(),l.globeToMercatorTransition(p.transform.zoom),[P.x,P.y],p.transform.pixelsPerMeterRatio)}else I.call(b,_.gl,p.transform.customLayerMatrix());_.setDirty(),p.setBaseState()}}else if(p.renderPass==="translucent"){if(p.terrain&&p.terrain.renderingToTexture){const P=b.renderToTile;if(P){const O=g[0].canonical,B=new l.MercatorCoordinate(O.x+g[0].wrap*(1<<O.z),O.y,O.z);_.setDepthMode(l.DepthMode.disabled),_.setStencilMode(l.StencilMode.disabled),_.setColorMode(p.colorModeForRenderPass()),p.setCustomLayerDefaults(),P.call(b,_.gl,B),_.setDirty(),p.setBaseState()}return}p.setCustomLayerDefaults(),_.setColorMode(p.colorModeForRenderPass()),_.setStencilMode(l.StencilMode.disabled);const I=b.renderingMode==="3d"?new l.DepthMode(p.context.gl.LEQUAL,l.DepthMode.ReadWrite,p.depthRangeFor3D):p.depthModeForSublayer(0,l.DepthMode.ReadOnly);if(_.setDepthMode(I),p.transform.projection.name==="globe"){const P=p.transform.pointMerc;b.render(_.gl,p.transform.customLayerMatrix(),p.transform.getProjection(),p.transform.globeToMercatorMatrix(),l.globeToMercatorTransition(p.transform.zoom),[P.x,P.y],p.transform.pixelsPerMeterRatio)}else b.render(_.gl,p.transform.customLayerMatrix());_.setDirty(),p.setBaseState(),_.bindFramebuffer.set(null)}}else l.warnOnce("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")}};class Al{constructor(s,d,g=!1){this.context=new je(s,g),this.transform=d,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=l.SourceCache.maxUnderzooming+l.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}updateTerrain(s,d){const g=!!s&&!!s.terrain&&this.transform.projection.supportsTerrain;if(!(g||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new Hh(this,s));const _=this._terrain;this.transform.elevation=g?_:null,_.update(s,this.transform,d)}_updateFog(s){const d=s.fog;if(!d||this.transform.projection.name==="globe"||d.getOpacity(this.transform.pitch)<1||d.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[g,_]=d.getFovAdjustedRange(this.transform._fov);if(g>_)return void(this.transform.fogCullDistSq=null);const b=g+.78*(_-g);this.transform.fogCullDistSq=b*b}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}resize(s,d){if(this.width=s*l.exported.devicePixelRatio,this.height=d*l.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const g of this.style.order)this.style._layers[g].resize()}setup(){const s=this.context,d=new l.StructArrayLayout2i4;d.emplaceBack(0,0),d.emplaceBack(l.EXTENT,0),d.emplaceBack(0,l.EXTENT),d.emplaceBack(l.EXTENT,l.EXTENT),this.tileExtentBuffer=s.createVertexBuffer(d,l.posAttributes.members),this.tileExtentSegments=l.SegmentVector.simpleSegment(0,0,4,2);const g=new l.StructArrayLayout2i4;g.emplaceBack(0,0),g.emplaceBack(l.EXTENT,0),g.emplaceBack(0,l.EXTENT),g.emplaceBack(l.EXTENT,l.EXTENT),this.debugBuffer=s.createVertexBuffer(g,l.posAttributes.members),this.debugSegments=l.SegmentVector.simpleSegment(0,0,4,5);const _=new l.StructArrayLayout2i4;_.emplaceBack(-1,-1),_.emplaceBack(1,-1),_.emplaceBack(-1,1),_.emplaceBack(1,1),this.viewportBuffer=s.createVertexBuffer(_,l.posAttributes.members),this.viewportSegments=l.SegmentVector.simpleSegment(0,0,4,2);const b=new l.StructArrayLayout4i8;b.emplaceBack(0,0,0,0),b.emplaceBack(l.EXTENT,0,l.EXTENT,0),b.emplaceBack(0,l.EXTENT,0,l.EXTENT),b.emplaceBack(l.EXTENT,l.EXTENT,l.EXTENT,l.EXTENT),this.mercatorBoundsBuffer=s.createVertexBuffer(b,l.boundsAttributes.members),this.mercatorBoundsSegments=l.SegmentVector.simpleSegment(0,0,4,2);const I=new l.StructArrayLayout3ui6;I.emplaceBack(0,1,2),I.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=s.createIndexBuffer(I);const P=new l.StructArrayLayout1ui2;for(const B of[0,1,3,2,0])P.emplaceBack(B);this.debugIndexBuffer=s.createIndexBuffer(P),this.emptyTexture=new l.Texture(s,new l.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),s.gl.RGBA),this.identityMat=l.create();const O=this.context.gl;this.stencilClearMode=new l.StencilMode({func:O.ALWAYS,mask:0},0,255,O.ZERO,O.ZERO,O.ZERO),this.loadTimeStamps.push(l.window.performance.now()),this.atmosphereBuffer=new Zm(this.context)}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(s){return s._makeTileBoundsBuffers(this.context,this.transform.projection),s._tileBoundsBuffer?{tileBoundsBuffer:s._tileBoundsBuffer,tileBoundsIndexBuffer:s._tileBoundsIndexBuffer,tileBoundsSegments:s._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const s=this.context,d=s.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(s,d.TRIANGLES,l.DepthMode.disabled,this.stencilClearMode,l.ColorMode.disabled,l.CullFaceMode.disabled,Tc(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(s,d,g){if(!d||this.currentStencilSource===d.id||!s.isTileClipped()||!g||g.length===0)return;if(this._tileClippingMaskIDs&&!this.terrain){let P=!1;for(const O of g)if(this._tileClippingMaskIDs[O.key]===void 0){P=!0;break}if(!P)return}this.currentStencilSource=d.id;const _=this.context,b=_.gl;this.nextStencilID+g.length>256&&this.clearStencil(),_.setColorMode(l.ColorMode.disabled),_.setDepthMode(l.DepthMode.disabled);const I=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const P of g){const O=d.getTile(P),B=this._tileClippingMaskIDs[P.key]=this.nextStencilID++,{tileBoundsBuffer:$,tileBoundsIndexBuffer:Z,tileBoundsSegments:oe}=this.getTileBoundsBuffers(O);I.draw(_,b.TRIANGLES,l.DepthMode.disabled,new l.StencilMode({func:b.ALWAYS,mask:0},B,255,b.KEEP,b.KEEP,b.REPLACE),l.ColorMode.disabled,l.CullFaceMode.disabled,Tc(P.projMatrix),"$clipping",$,Z,oe)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const s=this.nextStencilID++,d=this.context.gl;return new l.StencilMode({func:d.NOTEQUAL,mask:255},s,255,d.KEEP,d.KEEP,d.REPLACE)}stencilModeForClipping(s){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(s);const d=this.context.gl;return new l.StencilMode({func:d.EQUAL,mask:255},this._tileClippingMaskIDs[s.key],0,d.KEEP,d.KEEP,d.REPLACE)}stencilConfigForOverlap(s){const d=this.context.gl,g=s.sort((I,P)=>P.overscaledZ-I.overscaledZ),_=g[g.length-1].overscaledZ,b=g[0].overscaledZ-_+1;if(b>1){this.currentStencilSource=void 0,this.nextStencilID+b>256&&this.clearStencil();const I={};for(let P=0;P<b;P++)I[P+_]=new l.StencilMode({func:d.GEQUAL,mask:255},P+this.nextStencilID,255,d.KEEP,d.KEEP,d.REPLACE);return this.nextStencilID+=b,[I,g]}return[{[_]:l.StencilMode.disabled},g]}colorModeForRenderPass(){const s=this.context.gl;return this._showOverdrawInspector?new l.ColorMode([s.CONSTANT_COLOR,s.ONE],new l.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?l.ColorMode.unblended:l.ColorMode.alphaBlended}depthModeForSublayer(s,d,g){if(!this.opaquePassEnabledForLayer())return l.DepthMode.disabled;const _=1-((1+this.currentLayer)*this.numSublayers+s)*this.depthEpsilon;return new l.DepthMode(g||this.context.gl.LEQUAL,d,[_,_])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(s,d){this.style=s,this.options=d,this.imageManager=s.imageManager,this.glyphManager=s.glyphManager,this.symbolFadeChange=s.placement.symbolFadeChange(l.exported.now()),this.imageManager.beginFrame();const g=this.style.order,_=this.style._sourceCaches;for(const B in _){const $=_[B];$.used&&$.prepare(this.context)}const b={},I={},P={};for(const B in _){const $=_[B];b[B]=$.getVisibleCoordinates(),I[B]=b[B].slice().reverse(),P[B]=$.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let B=0;B<g.length;B++)if(this.style._layers[g[B]].is3D()){this.opaquePassCutoff=B;break}if(this.terrain&&(this.terrain.updateTileBinding(P),this.opaquePassCutoff=0),this.transform.projection.name!=="globe"||this.globeSharedBuffers||(this.globeSharedBuffers=new l.GlobeSharedBuffers(this.context)),!l.isMapAuthenticated(this.context.gl))return;this.renderPass="offscreen";for(const B of g){const $=this.style._layers[B],Z=s._getLayerSourceCache($);if(!$.hasOffscreenPass()||$.isHidden(this.transform.zoom))continue;const oe=Z?I[Z.id]:void 0;($.type==="custom"||$.isSky()||oe&&oe.length)&&this.renderLayer(this,Z,$,oe)}this.depthRangeFor3D=[0,1-(s.order.length+2)*this.numSublayers*this.depthEpsilon];const O=this.terrain;if(O&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&O.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:d.showOverdrawInspector?l.Color.black:l.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=d.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=g.length-1;this.currentLayer>=0;this.currentLayer--){const B=this.style._layers[g[this.currentLayer]],$=s._getLayerSourceCache(B);if(B.isSky())continue;const Z=$?I[$.id]:void 0;this._renderTileClippingMasks(B,$,Z),this.renderLayer(this,$,B,Z)}if(this.style.fog&&this.transform.projection.supportsFog&&function(B,$){const Z=B.context,oe=Z.gl,le=B.transform,he=new l.DepthMode(oe.LEQUAL,l.DepthMode.ReadOnly,[0,1]),ue=B.useProgram("globeAtmosphere",null,le.projection.name==="globe"?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"]),ge=l.globeToMercatorTransition(le.zoom),K=$.properties.get("color").toArray01(),se=$.properties.get("high-color").toArray01(),xe=$.properties.get("space-color").toArray01PremultipliedAlpha(),be=l.identity$1([]);l.rotateY$1(be,be,-l.degToRad(le._center.lng)),l.rotateX$1(be,be,l.degToRad(le._center.lat)),l.rotateZ$1(be,be,le.angle),l.rotateX$1(be,be,-le._pitch);const Re=l.fromQuat(new Float32Array(16),be),ze=l.mapValue($.properties.get("star-intensity"),0,1,0,.25),Oe=5e-4,Ve=l.mapValue($.properties.get("horizon-blend"),0,1,Oe,.25),Ue=l.globeUseCustomAntiAliasing(B,Z,le)&&Ve===Oe?le.worldSize/(2*Math.PI*1.025)-1:le.globeRadius,Ke=B.frameCounter/1e3%1,Pt=l.length(le.globeCenterInViewSpace),qe=Math.sqrt(Math.pow(Pt,2)-Math.pow(Ue,2)),ht=Math.acos(qe/Pt),et=((Xe,dt,zt,vt,kt,dn,Rn,en,_n,Hn,Un,cn,ur,vr)=>({u_frustum_tl:Xe,u_frustum_tr:dt,u_frustum_br:zt,u_frustum_bl:vt,u_horizon:kt,u_transition:dn,u_fadeout_range:Rn,u_color:en,u_high_color:_n,u_space_color:Hn,u_star_intensity:Un,u_star_size:5*l.exported.devicePixelRatio,u_star_density:0,u_temporal_offset:cn,u_horizon_angle:ur,u_rotation_matrix:vr}))(le.frustumCorners.TL,le.frustumCorners.TR,le.frustumCorners.BR,le.frustumCorners.BL,le.frustumCorners.horizon,ge,Ve,K,se,xe,ze,Ke,ht,Re);B.prepareDrawProgram(Z,ue);const Et=B.atmosphereBuffer;Et&&ue.draw(Z,oe.TRIANGLES,he,l.StencilMode.disabled,l.ColorMode.alphaBlended,l.CullFaceMode.backCW,et,"skybox",Et.vertexBuffer,Et.indexBuffer,Et.segments)}(this,this.style.fog),this.renderPass="sky",(l.globeToMercatorTransition(this.transform.zoom)>0||this.transform.projection.name!=="globe")&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<g.length;this.currentLayer++){const B=this.style._layers[g[this.currentLayer]],$=s._getLayerSourceCache(B);B.isSky()&&this.renderLayer(this,$,B,$?I[$.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<g.length;){const B=this.style._layers[g[this.currentLayer]],$=s._getLayerSourceCache(B);if(B.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(B)){if(B.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const Z=$?(B.type==="symbol"?P:I)[$.id]:void 0;this._renderTileClippingMasks(B,$,$?b[$.id]:void 0),this.renderLayer(this,$,B,Z),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let B=null;l.values(this.style._layers).forEach($=>{const Z=s._getLayerSourceCache($);Z&&!$.isHidden(this.transform.zoom)&&(!B||B.getSource().maxzoom<Z.getSource().maxzoom)&&(B=Z)}),B&&this.options.showTileBoundaries&&Gs.debug(this,B,B.getVisibleCoordinates())}this.options.showPadding&&function(B){const $=B.transform.padding;Gm(B,B.transform.height-($.top||0),3,Ml),Gm(B,$.bottom||0,3,J0),Hu(B,$.left||0,3,Q0),Hu(B,B.transform.width-($.right||0),3,e_);const Z=B.transform.centerPoint;(function(oe,le,he,ue){Pl(oe,le-1,he-10,2,20,ue),Pl(oe,le-10,he-1,20,2,ue)})(B,Z.x,B.transform.height-Z.y,t_)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(l.window.performance.now()),this.saveCanvasCopy())}renderLayer(s,d,g,_){g.isHidden(this.transform.zoom)||(g.type==="background"||g.type==="sky"||g.type==="custom"||_&&_.length)&&(this.id=g.id,this.gpuTimingStart(g),(!s.transform.projection.unsupportedLayers||!s.transform.projection.unsupportedLayers.includes(g.type)||s.terrain&&g.type==="custom")&&Gs[g.type](s,d,g,_,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(s){if(!this.options.gpuTiming)return;const d=this.context.extTimerQuery;let g=this.gpuTimers[s.id];g||(g=this.gpuTimers[s.id]={calls:0,cpuTime:0,query:d.createQueryEXT()}),g.calls++,d.beginQueryEXT(d.TIME_ELAPSED_EXT,g.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const s=this.context.extTimerQuery,d=s.createQueryEXT();this.deferredRenderGpuTimeQueries.push(d),s.beginQueryEXT(s.TIME_ELAPSED_EXT,d)}}gpuTimingDeferredRenderEnd(){if(!this.options.gpuTimingDeferredRender)return;const s=this.context.extTimerQuery;s.endQueryEXT(s.TIME_ELAPSED_EXT)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const s=this.context.extTimerQuery;s.endQueryEXT(s.TIME_ELAPSED_EXT)}collectGpuTimers(){const s=this.gpuTimers;return this.gpuTimers={},s}collectDeferredRenderGpuQueries(){const s=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],s}queryGpuTimers(s){const d={};for(const g in s){const _=s[g],b=this.context.extTimerQuery,I=b.getQueryObjectEXT(_.query,b.QUERY_RESULT_EXT)/1e6;b.deleteQueryEXT(_.query),d[g]=I}return d}queryGpuTimeDeferredRender(s){if(!this.options.gpuTimingDeferredRender)return 0;const d=this.context.extTimerQuery;let g=0;for(const _ of s)g+=d.getQueryObjectEXT(_,d.QUERY_RESULT_EXT)/1e6,d.deleteQueryEXT(_);return g}translatePosMatrix(s,d,g,_,b){if(!g[0]&&!g[1])return s;const I=b?_==="map"?this.transform.angle:0:_==="viewport"?-this.transform.angle:0;if(I){const B=Math.sin(I),$=Math.cos(I);g=[g[0]*$-g[1]*B,g[0]*B+g[1]*$]}const P=[b?g[0]:Ge(d,g[0],this.transform.zoom),b?g[1]:Ge(d,g[1],this.transform.zoom),0],O=new Float32Array(16);return l.translate(O,s,P),O}saveTileTexture(s){const d=this._tileTextures[s.size[0]];d?d.push(s):this._tileTextures[s.size[0]]=[s]}getTileTexture(s){const d=this._tileTextures[s];return d&&d.length>0?d.pop():null}isPatternMissing(s){return s===null||s!==void 0&&!this.imageManager.getPattern(s.toString())}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture}currentGlobalDefines(){const s=this.terrain&&this.terrain.renderingToTexture,d=this.terrain&&this.terrain.exaggeration()===0,g=this.style&&this.style.fog,_=[];return this.terrainRenderModeElevated()&&_.push("TERRAIN"),this.transform.projection.name==="globe"&&_.push("GLOBE"),d&&_.push("ZERO_EXAGGERATION"),g&&!s&&g.getOpacity(this.transform.pitch)!==0&&_.push("FOG"),s&&_.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&_.push("OVERDRAW_INSPECTOR"),_}useProgram(s,d,g){this.cache=this.cache||{};const _=g||[],b=this.currentGlobalDefines().concat(_),I=Jn.cacheKey(Fh[s],s,b,d);return this.cache[I]||(this.cache[I]=new Jn(this.context,s,Fh[s],d,ef[s],b)),this.cache[I]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const s=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(s.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=l.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new l.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.atmosphereBuffer&&this.atmosphereBuffer.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}prepareDrawProgram(s,d,g){if(this.terrain&&this.terrain.renderingToTexture)return;const _=this.style.fog;if(_){const b=_.getOpacity(this.transform.pitch),I=((P,O,B,$,Z,oe,le,he,ue,ge,K)=>{const se=P.transform,xe=O.properties.get("color").toArray01();xe[3]=$;const be=P.frameCounter/1e3%1;return{u_fog_matrix:B?se.calculateFogTileMatrix(B):P.identityMat,u_fog_range:O.getFovAdjustedRange(se._fov),u_fog_color:xe,u_fog_horizon_blend:O.properties.get("horizon-blend"),u_fog_temporal_offset:be,u_frustum_tl:Z,u_frustum_tr:oe,u_frustum_br:le,u_frustum_bl:he,u_globe_pos:ue,u_globe_radius:ge,u_viewport:K,u_globe_transition:l.globeToMercatorTransition(se.zoom),u_is_globe:+(se.projection.name==="globe")}})(this,_,g,b,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*l.exported.devicePixelRatio,this.transform.height*l.exported.devicePixelRatio]);d.setFogUniformValues(s,I)}}setTileLoadedFlag(s){this.tileLoaded=s}saveCanvasCopy(){const s=this.canvasCopy();s&&(this.frameCopies.push(s),this.tileLoaded=!1)}canvasCopy(){const s=this.context.gl,d=s.createTexture();return s.bindTexture(s.TEXTURE_2D,d),s.copyTexImage2D(s.TEXTURE_2D,0,s.RGBA,0,0,s.drawingBufferWidth,s.drawingBufferHeight,0),d}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const s=this.style&&this.style.fog;return!!s&&s.getOpacity(this.transform.pitch)!==0}getBackgroundTiles(){const s=this._backgroundTiles,d=this._backgroundTiles={},g=this.transform.coveringTiles({tileSize:512});for(const _ of g)d[_.key]=s[_.key]||new l.Tile(_,512,this.transform.tileZoom,this);return d}clearBackgroundTiles(){this._backgroundTiles={}}}class Wu{constructor(s=0,d=0,g=0,_=0){if(isNaN(s)||s<0||isNaN(d)||d<0||isNaN(g)||g<0||isNaN(_)||_<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=s,this.bottom=d,this.left=g,this.right=_}interpolate(s,d,g){return d.top!=null&&s.top!=null&&(this.top=l.number(s.top,d.top,g)),d.bottom!=null&&s.bottom!=null&&(this.bottom=l.number(s.bottom,d.bottom,g)),d.left!=null&&s.left!=null&&(this.left=l.number(s.left,d.left,g)),d.right!=null&&s.right!=null&&(this.right=l.number(s.right,d.right,g)),this}getCenter(s,d){const g=l.clamp((this.left+s-this.right)/2,0,s),_=l.clamp((this.top+d-this.bottom)/2,0,d);return new l.Point(g,_)}equals(s){return this.top===s.top&&this.bottom===s.bottom&&this.left===s.left&&this.right===s.right}clone(){return new Wu(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function qu(p,s){const d=l.getColumn(p,3);l.fromQuat(p,s),l.setColumn(p,3,d)}function tr(p,s){const d=l.identity$1([]);return l.rotateZ$1(d,d,-s),l.rotateX$1(d,d,-p),d}function zc(p,s){const d=[p[0],p[1],0],g=[s[0],s[1],0];if(l.length(d)>=1e-15){const I=l.normalize([],d);l.scale$2(g,I,l.dot(g,I)),s[0]=g[0],s[1]=g[1]}const _=l.cross([],s,p);if(l.len(_)<1e-15)return null;const b=Math.atan2(-_[1],_[0]);return tr(Math.atan2(Math.sqrt(p[0]*p[0]+p[1]*p[1]),-p[2]),b)}class Xm{constructor(s,d){this.position=s,this.orientation=d}get position(){return this._position}set position(s){if(s){const d=s instanceof l.MercatorCoordinate?s:new l.MercatorCoordinate(s[0],s[1],s[2]);this._renderWorldCopies&&(d.x=l.wrap(d.x,0,1)),this._position=d}else this._position=null}lookAtPoint(s,d){if(this.orientation=null,!this.position)return;const g=this.position,_=this._elevation?this._elevation.getAtPointOrZero(l.MercatorCoordinate.fromLngLat(s)):0,b=l.MercatorCoordinate.fromLngLat(s,_),I=[b.x-g.x,b.y-g.y,b.z-g.z];d||(d=[0,0,1]),d[2]=Math.abs(d[2]),this.orientation=zc(I,d)}setPitchBearing(s,d){this.orientation=tr(l.degToRad(s),l.degToRad(-d))}}class Zu{constructor(s,d){this._transform=l.identity([]),this.orientation=d,this.position=s}get mercatorPosition(){const s=this.position;return new l.MercatorCoordinate(s[0],s[1],s[2])}get position(){const s=l.getColumn(this._transform,3);return[s[0],s[1],s[2]]}set position(s){var d;s&&l.setColumn(this._transform,3,[(d=s)[0],d[1],d[2],1])}get orientation(){return this._orientation}set orientation(s){this._orientation=s||l.identity$1([]),s&&qu(this._transform,this._orientation)}getPitchBearing(){const s=this.forward(),d=this.right();return{bearing:Math.atan2(-d[1],d[0]),pitch:Math.atan2(Math.sqrt(s[0]*s[0]+s[1]*s[1]),-s[2])}}setPitchBearing(s,d){this._orientation=tr(s,d),qu(this._transform,this._orientation)}forward(){const s=l.getColumn(this._transform,2);return[-s[0],-s[1],-s[2]]}up(){const s=l.getColumn(this._transform,1);return[-s[0],-s[1],-s[2]]}right(){const s=l.getColumn(this._transform,0);return[s[0],s[1],s[2]]}getCameraToWorld(s,d){const g=new Float64Array(16);return l.invert(g,this.getWorldToCamera(s,d)),g}getWorldToCameraPosition(s,d,g){const _=this.position;l.scale$2(_,_,-s);const b=new Float64Array(16);return l.fromScaling(b,[g,g,g]),l.translate(b,b,_),b[10]*=d,b}getWorldToCamera(s,d){const g=new Float64Array(16),_=new Float64Array(4),b=this.position;return l.conjugate(_,this._orientation),l.scale$2(b,b,-s),l.fromQuat(g,_),l.translate(g,g,b),g[1]*=-1,g[5]*=-1,g[9]*=-1,g[13]*=-1,g[8]*=d,g[9]*=d,g[10]*=d,g[11]*=d,g}getCameraToClipPerspective(s,d,g,_){const b=new Float64Array(16);return l.perspective(b,s,d,g,_),b}getDistanceToElevation(s,d=!1){const g=s===0?0:l.mercatorZfromAltitude(s,d?l.latFromMercatorY(this.position[1]):this.position[1]),_=this.forward();return(g-this.position[2])/_[2]}clone(){return new Zu([...this.position],[...this.orientation])}}function Rl(p,s){const d=Xu(p.projection,p.zoom,p.width,p.height),g=function(b,I,P,O,B){const $=new l.LngLat(P.lng-180*Ga,P.lat),Z=new l.LngLat(P.lng+180*Ga,P.lat),oe=b.project($.lng,$.lat),le=b.project(Z.lng,Z.lat),he=-Math.atan2(le.y-oe.y,le.x-oe.x),ue=l.MercatorCoordinate.fromLngLat(P);ue.y=l.clamp(ue.y,-1+Ga,1-Ga);const ge=ue.toLngLat(),K=b.project(ge.lng,ge.lat),se=l.MercatorCoordinate.fromLngLat(ge);se.x+=Ga;const xe=se.toLngLat(),be=b.project(xe.lng,xe.lat),Re=Ku(be.x-K.x,be.y-K.y,he),ze=l.MercatorCoordinate.fromLngLat(ge);ze.y+=Ga;const Oe=ze.toLngLat(),Ve=b.project(Oe.lng,Oe.lat),Ue=Ku(Ve.x-K.x,Ve.y-K.y,he),Ke=Math.abs(Re.x)/Math.abs(Ue.y),Pt=l.identity([]);l.rotateZ(Pt,Pt,-he*(1-(B?0:O)));const qe=l.identity([]);return l.scale(qe,qe,[1,1-(1-Ke)*O,1]),qe[4]=-Ue.x/Ue.y*O,l.rotateZ(qe,qe,he),l.multiply(qe,Pt,qe),qe}(p.projection,0,p.center,d,s),_=Km(p);return l.scale(g,g,[_,_,1]),g}function Km(p){const s=p.projection,d=Xu(p.projection,p.zoom,p.width,p.height),g=Ym(s,p.center),_=Ym(s,l.LngLat.convert(s.center));return Math.pow(2,g*d+(1-d)*_)}function Xu(p,s,d,g,_=1/0){const b=p.range;if(!b)return 0;const I=Math.min(_,Math.max(d,g)),P=Math.log(I/1024)/Math.LN2;return l.smoothstep(b[0]+P,b[1]+P,s)}const Ga=1/4e4;function Ym(p,s){const d=l.clamp(s.lat,-l.MAX_MERCATOR_LATITUDE,l.MAX_MERCATOR_LATITUDE),g=new l.LngLat(s.lng-180*Ga,d),_=new l.LngLat(s.lng+180*Ga,d),b=p.project(g.lng,d),I=p.project(_.lng,d),P=l.MercatorCoordinate.fromLngLat(g),O=l.MercatorCoordinate.fromLngLat(_),B=I.x-b.x,$=I.y-b.y,Z=O.x-P.x,oe=O.y-P.y,le=Math.sqrt((Z*Z+oe*oe)/(B*B+$*$));return Math.log(le)/Math.LN2}function Ku(p,s,d){const g=Math.cos(d),_=Math.sin(d);return{x:p*g-s*_,y:p*_+s*g}}class Ol{constructor(s,d,g,_,b,I,P){this.tileSize=512,this._renderWorldCopies=b===void 0||b,this._minZoom=s||0,this._maxZoom=d||22,this._minPitch=g??0,this._maxPitch=_??60,this.setProjection(I),this.setMaxBounds(P),this.width=0,this.height=0,this._center=new l.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new Wu,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new Zu,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1}clone(){const s=new Ol(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return s._elevation=this._elevation,s._centerAltitude=this._centerAltitude,s._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,s.tileSize=this.tileSize,s.mercatorFromTransition=this.mercatorFromTransition,s.width=this.width,s.height=this.height,s.cameraElevationReference=this.cameraElevationReference,s._center=this._center,s._setZoom(this.zoom),s._seaLevelZoom=this._seaLevelZoom,s.angle=this.angle,s._fov=this._fov,s._pitch=this._pitch,s._nearZ=this._nearZ,s._farZ=this._farZ,s._averageElevation=this._averageElevation,s._unmodified=this._unmodified,s._edgeInsets=this._edgeInsets.clone(),s._camera=this._camera.clone(),s._calcMatrices(),s.freezeTileCoverage=this.freezeTileCoverage,s.frustumCorners=this.frustumCorners,s}get elevation(){return this._elevation}set elevation(s){this._elevation!==s&&(this._elevation=s,this._updateCameraOnTerrain(),this._calcMatrices())}updateElevation(s,d=!1){const g=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(this._seaLevelZoom==null||g)&&this._updateCameraOnTerrain(),(s||g)&&this._constrainCamera(d),this._calcMatrices()}getProjection(){return l.pick(this.projection,["name","center","parallels"])}setProjection(s){this.projectionOptions=s||{name:"mercator"};const d=this.projection?this.getProjection():void 0;this.projection=l.getProjection(this.projectionOptions);const g=!w(d,this.getProjection());return g&&this._calcMatrices(),this.mercatorFromTransition=!1,g}setMercatorFromTransition(){const s=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=l.getProjection({name:"mercator"});const d=s!==this.projection.name;return d&&this._calcMatrices(),d}get minZoom(){return this._minZoom}set minZoom(s){this._minZoom!==s&&(this._minZoom=s,this.zoom=Math.max(this.zoom,s))}get maxZoom(){return this._maxZoom}set maxZoom(s){this._maxZoom!==s&&(this._maxZoom=s,this.zoom=Math.min(this.zoom,s))}get minPitch(){return this._minPitch}set minPitch(s){this._minPitch!==s&&(this._minPitch=s,this.pitch=Math.max(this.pitch,s))}get maxPitch(){return this._maxPitch}set maxPitch(s){this._maxPitch!==s&&(this._maxPitch=s,this.pitch=Math.min(this.pitch,s))}get renderWorldCopies(){return this._renderWorldCopies&&this.projection.supportsWorldCopies===!0}set renderWorldCopies(s){s===void 0?s=!0:s===null&&(s=!1),this._renderWorldCopies=s}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const s=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(s))}get cameraWorldSize(){const s=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(s))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return l.mercatorZfromAltitude(this.center.lat,this.cameraWorldSizeForFog)}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new l.Point(this.width,this.height)}get bearing(){return l.wrap(this.rotation,-180,180)}set bearing(s){this.rotation=s}get rotation(){return-this.angle/Math.PI*180}set rotation(s){const d=-s*Math.PI/180;var g;this.angle!==d&&(this._unmodified=!1,this.angle=d,this._calcMatrices(),this.rotationMatrix=(g=new l.ARRAY_TYPE(4),l.ARRAY_TYPE!=Float32Array&&(g[1]=0,g[2]=0),g[0]=1,g[3]=1,g),function(_,b,I){var P=b[0],O=b[1],B=b[2],$=b[3],Z=Math.sin(I),oe=Math.cos(I);_[0]=P*oe+B*Z,_[1]=O*oe+$*Z,_[2]=P*-Z+B*oe,_[3]=O*-Z+$*oe}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(s){const d=l.clamp(s,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==d&&(this._unmodified=!1,this._pitch=d,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}get fovX(){return this._fov}get fovY(){const s=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/s)}set fov(s){s=Math.max(.01,Math.min(60,s)),this._fov!==s&&(this._unmodified=!1,this._fov=l.degToRad(s),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(s){this._averageElevation=s,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(s){const d=Math.min(Math.max(s,this.minZoom),this.maxZoom);this._zoom!==d&&(this._unmodified=!1,this._setZoom(d),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(s){this._zoom=s,this.scale=this.zoomScale(s),this.tileZoom=Math.floor(s),this.zoomFraction=s-this.tileZoom}_updateCameraOnTerrain(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const s=this._elevation;this._centerAltitude=s.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=s.exaggeration(),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){this._centerAltitudeValidForExaggeration!==void 0&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const s=this._elevation,d=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],g=this.horizonLineFromTop();let _=0,b=0;for(let I=0;I<d.length;I++){const P=new l.Point(d[I][0]*this.width,g+d[I][1]*(this.height-g)),O=s.pointCoordinate(P);if(!O)continue;const B=1/Math.hypot(O[0]-this._camera.position[0],O[1]-this._camera.position[1]);_+=O[3]*B,b+=B}return b===0?NaN:_/b}get center(){return this._center}set center(s){s.lat===this._center.lat&&s.lng===this._center.lng||(this._unmodified=!1,this._center=s,this._terrainEnabled()&&(this.cameraElevationReference==="ground"?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(this._seaLevelZoom==null||!this._elevation)return;const s=this._seaLevelZoom,d=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),g=this.pixelsPerMeter/this.worldSize*d,_=this._mercatorZfromZoom(s),b=this._mercatorZfromZoom(this._maxZoom),I=Math.max(_-g,b);this._setZoom(this._zoomFromMercatorZ(I))}get padding(){return this._edgeInsets.toJSON()}set padding(s){this._edgeInsets.equals(s)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,s,1),this._calcMatrices())}computeZoomRelativeTo(s){const d=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,s.toAltitude()));let g;g=s.z<this._camera.position[2]?[d.x,d.y,d.z]:[s.x,s.y,s.z];const _=l.length(l.sub([],this._camera.position,g));return l.clamp(this._zoomFromMercatorZ(_),this._minZoom,this._maxZoom)}setFreeCameraOptions(s){if(!this.height||!s.position&&!s.orientation)return;this._updateCameraState();let d=!1;if(s.orientation&&!l.exactEquals(s.orientation,this._camera.orientation)&&(d=this._setCameraOrientation(s.orientation)),s.position){const g=[s.position.x,s.position.y,s.position.z];l.exactEquals$1(g,this._camera.position)||(this._setCameraPosition(g),d=!0)}d&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const s=this._camera.position,d=new Xm;return d.position=new l.MercatorCoordinate(s[0],s[1],s[2]),d.orientation=this._camera.orientation,d._elevation=this.elevation,d._renderWorldCopies=this.renderWorldCopies,d}_setCameraOrientation(s){if(!l.length$1(s))return!1;l.normalize$1(s,s);const d=l.transformQuat([],[0,0,-1],s),g=l.transformQuat([],[0,-1,0],s);if(g[2]<0)return!1;const _=zc(d,g);return!!_&&(this._camera.orientation=_,!0)}_setCameraPosition(s){const d=this.zoomScale(this.minZoom)*this.tileSize,g=this.zoomScale(this.maxZoom)*this.tileSize,_=this.cameraToCenterDistance;s[2]=l.clamp(s[2],_/g,_/d),this._camera.position=s}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(s){return this._edgeInsets.equals(s)}interpolatePadding(s,d,g){this._unmodified=!1,this._edgeInsets.interpolate(s,d,g),this._constrain(),this._calcMatrices()}coveringZoomLevel(s){const d=(s.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/s.tileSize));return Math.max(0,d)}getVisibleUnwrappedCoordinates(s){const d=[new l.UnwrappedTileID(0,s)];if(this.renderWorldCopies){const g=this.pointCoordinate(new l.Point(0,0)),_=this.pointCoordinate(new l.Point(this.width,0)),b=this.pointCoordinate(new l.Point(this.width,this.height)),I=this.pointCoordinate(new l.Point(0,this.height)),P=Math.floor(Math.min(g.x,_.x,b.x,I.x)),O=Math.floor(Math.max(g.x,_.x,b.x,I.x)),B=1;for(let $=P-B;$<=O+B;$++)$!==0&&d.push(new l.UnwrappedTileID($,s))}return d}coveringTiles(s){let d=this.coveringZoomLevel(s);const g=d,_=this.elevation&&!s.isTerrainDEM,b=this.projection.name==="mercator";if(s.minzoom!==void 0&&d<s.minzoom)return[];s.maxzoom!==void 0&&d>s.maxzoom&&(d=s.maxzoom);const I=this.locationCoordinate(this.center),P=this.center.lat,O=1<<d,B=[O*I.x,O*I.y,0],$=this.projection.name==="globe",Z=!$,oe=l.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,d,Z),le=$?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),he=O*l.mercatorZfromAltitude(1,this.center.lat),ue=this._camera.position[2]/l.mercatorZfromAltitude(1,this.center.lat),ge=[O*le.x,O*le.y,ue*(Z?1:he)],K=this.cameraToCenterDistance/s.tileSize*(s.roundZoom?1:.502),se=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?d:0,xe=s.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,be=s.isTerrainDEM?-xe:this._elevation?this._elevation.getMinElevationBelowMSL():0,Re=this.projection.isReprojectedInTileSpace?Km(this):1,ze=Xe=>{const zt=new l.MercatorCoordinate(Xe.x+25e-6,Xe.y,Xe.z),vt=new l.MercatorCoordinate(Xe.x,Xe.y+25e-6,Xe.z),kt=Xe.toLngLat(),dn=zt.toLngLat(),Rn=vt.toLngLat(),en=this.locationCoordinate(kt),_n=this.locationCoordinate(dn),Hn=this.locationCoordinate(Rn),Un=Math.hypot(_n.x-en.x,_n.y-en.y),cn=Math.hypot(Hn.x-en.x,Hn.y-en.y);return Math.sqrt(Un*cn)*Re/25e-6},Oe=Xe=>{const dt=xe,zt=be;return{aabb:l.tileAABB(this,O,0,0,0,Xe,zt,dt,this.projection),zoom:0,x:0,y:0,minZ:zt,maxZ:dt,wrap:Xe,fullyVisible:!1}},Ve=[];let Ue=[];const Ke=d,Pt=s.reparseOverscaled?g:d,qe=Xe=>Xe*Xe,ht=qe((ue-this._centerAltitude)*he),et=Xe=>{if(!this._elevation||!Xe.tileID||!b)return;const dt=this._elevation.getMinMaxForTile(Xe.tileID),zt=Xe.aabb;dt?(zt.min[2]=dt.min,zt.max[2]=dt.max,zt.center[2]=(zt.min[2]+zt.max[2])/2):(Xe.shouldSplit=Et(Xe),Xe.shouldSplit||(zt.min[2]=zt.max[2]=zt.center[2]=this._centerAltitude))},Et=Xe=>{if(Xe.zoom<se)return!0;if(Xe.zoom===Ke)return!1;if(Xe.shouldSplit!=null)return Xe.shouldSplit;const dt=Xe.aabb.distanceX(ge),zt=Xe.aabb.distanceY(ge);let vt=ht,kt=1;if($){vt=qe(Xe.aabb.distanceZ(ge));const en=Math.pow(2,Xe.zoom),_n=l.latFromMercatorY((Xe.y+1)/en),Hn=l.latFromMercatorY(Xe.y/en),Un=Math.min(Math.max(P,_n),Hn),cn=l.circumferenceAtLatitude(Un)/l.circumferenceAtLatitude(P);if(kt=Un===P?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,cn/this._mercatorScaleRatio),this.zoom<=l.GLOBE_ZOOM_THRESHOLD_MIN&&Xe.zoom===Ke-1&&cn>=.9)return!0}else if(_&&(vt=qe(Xe.aabb.distanceZ(ge)*he)),this.projection.isReprojectedInTileSpace&&g<=5){const en=Math.pow(2,Xe.zoom),_n=ze(new l.MercatorCoordinate((Xe.x+.5)/en,(Xe.y+.5)/en));kt=_n>.85?1:_n}const dn=dt*dt+zt*zt+vt,Rn=qe((1<<Ke-Xe.zoom)*K*kt*((en,_n)=>{if(_n*qe(.707)<en)return 1;const Hn=Math.sqrt(_n/en);return Hn/(1.4144271570014144+(Math.pow(1.1,Hn-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(vt,ht),dn));return dn<Rn};if(this.renderWorldCopies)for(let Xe=1;Xe<=3;Xe++)Ve.push(Oe(-Xe)),Ve.push(Oe(Xe));for(Ve.push(Oe(0));Ve.length>0;){const Xe=Ve.pop(),dt=Xe.x,zt=Xe.y;let vt=Xe.fullyVisible;if(!vt){const kt=Xe.aabb.intersects(oe);if(kt===0)continue;vt=kt===2}if(Xe.zoom!==Ke&&Et(Xe))for(let kt=0;kt<4;kt++){const dn=(dt<<1)+kt%2,Rn=(zt<<1)+(kt>>1),en={aabb:b?Xe.aabb.quadrant(kt):l.tileAABB(this,O,Xe.zoom+1,dn,Rn,Xe.wrap,Xe.minZ,Xe.maxZ,this.projection),zoom:Xe.zoom+1,x:dn,y:Rn,wrap:Xe.wrap,fullyVisible:vt,tileID:void 0,shouldSplit:void 0,minZ:Xe.minZ,maxZ:Xe.maxZ};_&&!$&&(en.tileID=new l.OverscaledTileID(Xe.zoom+1===Ke?Pt:Xe.zoom+1,Xe.wrap,Xe.zoom+1,dn,Rn),et(en)),Ve.push(en)}else{const kt=Xe.zoom===Ke?Pt:Xe.zoom;if(s.minzoom&&s.minzoom>kt)continue;const dn=B[0]-(.5+dt+(Xe.wrap<<Xe.zoom))*(1<<d-Xe.zoom),Rn=B[1]-.5-zt,en=Xe.tileID?Xe.tileID:new l.OverscaledTileID(kt,Xe.wrap,Xe.zoom,dt,zt);Ue.push({tileID:en,distanceSq:dn*dn+Rn*Rn})}}if(this.fogCullDistSq){const Xe=this.fogCullDistSq,dt=this.horizonLineFromTop();Ue=Ue.filter(zt=>{const vt=[0,0,0,1],kt=[l.EXTENT,l.EXTENT,0,1],dn=this.calculateFogTileMatrix(zt.tileID.toUnwrapped());l.transformMat4$1(vt,vt,dn),l.transformMat4$1(kt,kt,dn);const Rn=l.getAABBPointSquareDist(vt,kt);if(Rn===0)return!0;let en=!1;const _n=this._elevation;if(_n&&Rn>Xe&&dt!==0){const Hn=this.calculateProjMatrix(zt.tileID.toUnwrapped());let Un;s.isTerrainDEM||(Un=_n.getMinMaxForTile(zt.tileID)),Un||(Un={min:be,max:xe});const cn=l.furthestTileCorner(this.rotation),ur=[cn[0]*l.EXTENT,cn[1]*l.EXTENT,Un.max];l.transformMat4(ur,ur,Hn),en=(1-ur[1])*this.height*.5<dt}return Rn<Xe||en})}return Ue.sort((Xe,dt)=>Xe.distanceSq-dt.distanceSq).map(Xe=>Xe.tileID)}resize(s,d){this.width=s,this.height=d,this.pixelsToGLUnits=[2/s,-2/d],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(s){return Math.pow(2,s)}scaleZoom(s){return Math.log(s)/Math.LN2}project(s){const d=l.clamp(s.lat,-l.MAX_MERCATOR_LATITUDE,l.MAX_MERCATOR_LATITUDE),g=this.projection.project(s.lng,d);return new l.Point(g.x*this.worldSize,g.y*this.worldSize)}unproject(s){return this.projection.unproject(s.x/this.worldSize,s.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/l.mercatorZfromAltitude(1,this.center.lat)/this.worldSize}setLocationAtPoint(s,d){let g,_;const b=this.centerPoint;if(this.projection.name==="globe"){const P=this.worldSize;g=(d.x-b.x)/P,_=(d.y-b.y)/P}else{const P=this.pointCoordinate(d),O=this.pointCoordinate(b);g=P.x-O.x,_=P.y-O.y}const I=this.locationCoordinate(s);this.setLocation(new l.MercatorCoordinate(I.x-g,I.y-_))}setLocation(s){this.center=this.coordinateLocation(s),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(s){return this.projection.locationPoint(this,s)}locationPoint3D(s){return this.projection.locationPoint(this,s,!0)}pointLocation(s){return this.coordinateLocation(this.pointCoordinate(s))}pointLocation3D(s){return this.coordinateLocation(this.pointCoordinate3D(s))}locationCoordinate(s,d){const g=d?l.mercatorZfromAltitude(d,s.lat):void 0,_=this.projection.project(s.lng,s.lat);return new l.MercatorCoordinate(_.x,_.y,g)}coordinateLocation(s){return this.projection.unproject(s.x,s.y)}pointRayIntersection(s,d){const g=d??this._centerAltitude,_=[s.x,s.y,0,1],b=[s.x,s.y,1,1];l.transformMat4$1(_,_,this.pixelMatrixInverse),l.transformMat4$1(b,b,this.pixelMatrixInverse);const I=b[3];l.scale$1(_,_,1/_[3]),l.scale$1(b,b,1/I);const P=_[2],O=b[2];return{p0:_,p1:b,t:P===O?0:(g-P)/(O-P)}}screenPointToMercatorRay(s){const d=[s.x,s.y,0,1],g=[s.x,s.y,1,1];return l.transformMat4$1(d,d,this.pixelMatrixInverse),l.transformMat4$1(g,g,this.pixelMatrixInverse),l.scale$1(d,d,1/d[3]),l.scale$1(g,g,1/g[3]),d[2]=l.mercatorZfromAltitude(d[2],this._center.lat)*this.worldSize,g[2]=l.mercatorZfromAltitude(g[2],this._center.lat)*this.worldSize,l.scale$1(d,d,1/this.worldSize),l.scale$1(g,g,1/this.worldSize),new l.Ray([d[0],d[1],d[2]],l.normalize([],l.sub([],g,d)))}rayIntersectionCoordinate(s){const{p0:d,p1:g,t:_}=s,b=l.mercatorZfromAltitude(d[2],this._center.lat),I=l.mercatorZfromAltitude(g[2],this._center.lat);return new l.MercatorCoordinate(l.number(d[0],g[0],_)/this.worldSize,l.number(d[1],g[1],_)/this.worldSize,l.number(b,I,_))}pointCoordinate(s,d=this._centerAltitude){return this.projection.pointCoordinate(this,s.x,s.y,d)}pointCoordinate3D(s){if(!this.elevation)return this.pointCoordinate(s);let d=this.projection.pointCoordinate3D(this,s.x,s.y);if(d)return new l.MercatorCoordinate(d[0],d[1],d[2]);let g=0,_=this.horizonLineFromTop();if(s.y>_)return this.pointCoordinate(s);const b=.02*_,I=s.clone();for(let P=0;P<10&&_-g>b;P++){I.y=l.number(g,_,.66);const O=this.projection.pointCoordinate3D(this,I.x,I.y);O?(_=I.y,d=O):g=I.y}return d?new l.MercatorCoordinate(d[0],d[1],d[2]):this.pointCoordinate(s)}isPointAboveHorizon(s){return this.projection.isPointAboveHorizon(this,s)}isPointOnSurface(s){if(s.y<0||s.y>this.height||s.x<0||s.x>this.width)return!1;if(this.elevation||this.zoom>=l.GLOBE_ZOOM_THRESHOLD_MAX)return!this.isPointAboveHorizon(s);const d=this.pointCoordinate(s);return d.y>=0&&d.y<=1}_coordinatePoint(s,d){const g=d&&this.elevation?this.elevation.getAtPointOrZero(s,this._centerAltitude):this._centerAltitude,_=[s.x*this.worldSize,s.y*this.worldSize,g+s.toAltitude(),1];return l.transformMat4$1(_,_,this.pixelMatrix),_[3]>0?new l.Point(_[0]/_[3],_[1]/_[3]):new l.Point(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:s,left:d}=this._edgeInsets,g=this.height-this._edgeInsets.bottom,_=this.width-this._edgeInsets.right,b=this.pointLocation3D(new l.Point(d,s)),I=this.pointLocation3D(new l.Point(_,s)),P=this.pointLocation3D(new l.Point(_,g)),O=this.pointLocation3D(new l.Point(d,g));let B=Math.min(b.lng,I.lng,P.lng,O.lng),$=Math.max(b.lng,I.lng,P.lng,O.lng),Z=Math.min(b.lat,I.lat,P.lat,O.lat),oe=Math.max(b.lat,I.lat,P.lat,O.lat);const le=Math.pow(2,-this.zoom)/16*270,he=this.projection.name==="globe"?1:4,ue=(ge,K,se,xe,be)=>{const Re=(ge+se)/2,ze=(K+xe)/2,Oe=new l.Point(Re,ze),{lng:Ve,lat:Ue}=this.pointLocation3D(Oe),Ke=Math.max(0,B-Ve,Z-Ue,Ve-$,Ue-oe);B=Math.min(B,Ve),$=Math.max($,Ve),Z=Math.min(Z,Ue),oe=Math.max(oe,Ue),(be<he||Ke>le)&&(ue(ge,K,Re,ze,be+1),ue(Re,ze,se,xe,be+1))};if(ue(d,s,_,s,1),ue(_,s,_,g,1),ue(_,g,d,g,1),ue(d,g,d,s,1),this.projection.name==="globe"){const[ge,K]=l.polesInViewport(this);ge?(oe=90,$=180,B=-180):K&&(Z=-90,$=180,B=-180)}return new l.LngLatBounds(new l.LngLat(B,Z),new l.LngLat($,oe))}_getBoundsRectangular(s,d){const{top:g,left:_}=this._edgeInsets,b=this.height-this._edgeInsets.bottom,I=this.width-this._edgeInsets.right,P=new l.Point(_,g),O=new l.Point(I,g),B=new l.Point(I,b),$=new l.Point(_,b);let Z=this.pointCoordinate(P,s),oe=this.pointCoordinate(O,s);const le=this.pointCoordinate(B,d),he=this.pointCoordinate($,d),ue=(ge,K)=>(K.y-ge.y)/(K.x-ge.x);return Z.y>1&&oe.y>=0?Z=new l.MercatorCoordinate((1-he.y)/ue(he,Z)+he.x,1):Z.y<0&&oe.y<=1&&(Z=new l.MercatorCoordinate(-he.y/ue(he,Z)+he.x,0)),oe.y>1&&Z.y>=0?oe=new l.MercatorCoordinate((1-le.y)/ue(le,oe)+le.x,1):oe.y<0&&Z.y<=1&&(oe=new l.MercatorCoordinate(-le.y/ue(le,oe)+le.x,0)),new l.LngLatBounds().extend(this.coordinateLocation(Z)).extend(this.coordinateLocation(oe)).extend(this.coordinateLocation(he)).extend(this.coordinateLocation(le))}_getBoundsRectangularTerrain(){const s=this.elevation;if(!s.visibleDemTiles.length||s.isUsingMockSource())return this._getBoundsRectangular(0,0);const d=s.visibleDemTiles.reduce((g,_)=>{if(_.dem){const b=_.dem.tree;g.min=Math.min(g.min,b.minimums[0]),g.max=Math.max(g.max,b.maximums[0])}return g},{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(d.min*s.exaggeration(),d.max*s.exaggeration())}getBounds(){return this.projection.name==="mercator"||this.projection.name==="equirectangular"?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(s=!0){const d=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,g=this.height/2-d*(1-this._horizonShift);return s?Math.max(0,g):g}getMaxBounds(){return this.maxBounds}setMaxBounds(s){this.maxBounds=s,this.minLat=-l.MAX_MERCATOR_LATITUDE,this.maxLat=l.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,s&&(this.minLat=s.getSouth(),this.maxLat=s.getNorth(),this.minLng=s.getWest(),this.maxLng=s.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=l.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=l.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=l.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=l.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(s,d){return this.projection.createTileMatrix(this,d,s)}calculateDistanceTileData(s){const d=s.key,g=this._distanceTileDataCache;if(g[d])return g[d];const _=s.canonical,b=1/this.height,I=this.cameraWorldSize,P=I/this.zoomScale(_.z),O=(_.x+Math.pow(2,_.z)*s.wrap)*P,B=_.y*P,$=this.point;$.x*=I/this.worldSize,$.y*=I/this.worldSize;const Z=this.angle,oe=Math.sin(-Z),le=-Math.cos(-Z);return g[d]={bearing:[oe,le],center:[($.x-O)*b,($.y-B)*b],scale:P/l.EXTENT*b},g[d]}calculateFogTileMatrix(s){const d=s.key,g=this._fogTileMatrixCache;if(g[d])return g[d];const _=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,s);return l.multiply(_,this.worldToFogMatrix,_),g[d]=new Float32Array(_),g[d]}calculateProjMatrix(s,d=!1){const g=s.key,_=d?this._alignedProjMatrixCache:this._projMatrixCache;if(_[g])return _[g];const b=this.calculatePosMatrix(s,this.worldSize);return l.multiply(b,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:d?this.alignedProjMatrix:this.projMatrix,b),_[g]=new Float32Array(b),_[g]}calculatePixelsToTileUnitsMatrix(s){const d=s.tileID.key,g=this._pixelsToTileUnitsCache;if(g[d])return g[d];const _=function(b,I){const{scale:P}=b.tileTransform,O=P*l.EXTENT/(b.tileSize*Math.pow(2,I.zoom-b.tileID.overscaledZ+b.tileID.canonical.z));return B=new Float32Array(4),oe=($=I.inverseAdjustmentMatrix)[1],le=$[2],he=$[3],ge=(Z=[O,O])[1],B[0]=$[0]*(ue=Z[0]),B[1]=oe*ue,B[2]=le*ge,B[3]=he*ge,B;var B,$,Z,oe,le,he,ue,ge}(s,this);return g[d]=_,g[d]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if(this.projection.name==="globe"){const s=1/this.worldSize,d=l.fromScaling([],[s,s,s]);return l.multiply(d,d,this.globeMatrix),d}}recenterOnTerrain(){if(!this._elevation||this.projection.name==="globe")return;const s=this._elevation;this._updateCameraState();const d=l.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,g=this._computeCameraPosition(d),_=this._camera.forward(),b=l.mercatorZfromAltitude(1,this._center.lat);g[2]/=b,_[2]/=b,l.normalize(_,_);const I=s.raycast(g,_,s.exaggeration());if(I){const P=l.scaleAndAdd([],g,_,I),O=new l.MercatorCoordinate(P[0],P[1],l.mercatorZfromAltitude(P[2],l.latFromMercatorY(P[1]))),B=(O.z+l.length([O.x-g[0],O.y-g[1],O.z-g[2]*b]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(B),this._centerAltitude=O.toAltitude(),this._center=this.coordinateLocation(O),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(s=!1){if(!this._elevation)return;const d=this._elevation,g=l.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,_=this._computeCameraPosition(g),b=d.getAtPointOrZero(new l.MercatorCoordinate(..._)),I=this.pixelsPerMeter/this.worldSize*b,P=this._minimumHeightOverTerrain(),O=_[2]-I;if(O<=P)if(O<0||s){const B=this.locationCoordinate(this._center,this._centerAltitude),$=[_[0],_[1],B.z-_[2]],Z=l.length($);$[2]-=(P-O)/this._pixelsPerMercatorPixel;const oe=l.length($);if(oe===0)return;l.scale$2($,$,Z/oe*this._pixelsPerMercatorPixel),this._camera.position=[_[0],_[1],B.z*this._pixelsPerMercatorPixel-$[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const s=this.projection.name==="globe"||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||s){const oe=this.center;return oe.lat=l.clamp(oe.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!s)&&(oe.lng=l.clamp(oe.lng,this.minLng,this.maxLng)),this.center=oe,void(this._constraining=!1)}const d=this._unmodified,{x:g,y:_}=this.point;let b=0,I=g,P=_;const O=this.width/2,B=this.height/2,$=this.worldMinY*this.scale,Z=this.worldMaxY*this.scale;if(_-B<$&&(P=$+B),_+B>Z&&(P=Z-B),Z-$<this.height&&(b=Math.max(b,this.height/(Z-$)),P=(Z+$)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const oe=this.worldMinX*this.scale,le=this.worldMaxX*this.scale,he=this.worldSize/2-(oe+le)/2;I=(g+he+this.worldSize)%this.worldSize-he,I-O<oe&&(I=oe+O),I+O>le&&(I=le-O),le-oe<this.width&&(b=Math.max(b,this.width/(le-oe)),I=(le+oe)/2)}I===g&&P===_||(this.center=this.unproject(new l.Point(I,P))),b&&(this.zoom+=this.scaleZoom(b)),this._constrainCamera(),this._unmodified=d,this._constraining=!1}_minZoomForBounds(){let s=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(s=Math.max(s,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),s}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const s=this.centerOffset,d=this.pixelsPerMeter;this.projection.name==="globe"&&(this._mercatorScaleRatio=l.mercatorZfromAltitude(1,this.center.lat)/l.mercatorZfromAltitude(1,l.GLOBE_SCALE_MATCH_LATITUDE));const g=Xu(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,g),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const _=this.projection.zAxisUnit==="meters"?d:1,b=this._camera.getWorldToCamera(this.worldSize,_),I=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);I[8]=2*-s.x/this.width,I[9]=2*s.y/this.height;let P=l.mul([],I,b);if(this.projection.isReprojectedInTileSpace){const ze=this.locationCoordinate(this.center),Oe=l.identity([]);l.translate(Oe,Oe,[ze.x*this.worldSize,ze.y*this.worldSize,0]),l.multiply(Oe,Oe,Rl(this)),l.translate(Oe,Oe,[-ze.x*this.worldSize,-ze.y*this.worldSize,0]),l.multiply(P,P,Oe),this.inverseAdjustmentMatrix=function(Ve){const Ue=Rl(Ve,!0);return ee([],[Ue[0],Ue[1],Ue[4],Ue[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=l.scale([],P,[this.worldSize,this.worldSize,this.worldSize/_,1]),this.projMatrix=P,this.invProjMatrix=l.invert(new Float64Array(16),this.projMatrix);const O=l.invert([],I);this.frustumCorners=l.FrustumCorners.fromInvProjectionMatrix(O,this.horizonLineFromTop(),this.height);const B=new Float32Array(16);l.identity(B),l.scale(B,B,[1,-1,1]),l.rotateX(B,B,this._pitch),l.rotateZ(B,B,this.angle);const $=l.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),Z=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;$[8]=2*-s.x/this.width,$[9]=2*(s.y+Z)/this.height,this.skyboxMatrix=l.multiply(B,$,B);const oe=this.point,le=oe.x,he=oe.y,ue=this.width%2/2,ge=this.height%2/2,K=Math.cos(this.angle),se=Math.sin(this.angle),xe=le-Math.round(le)+K*ue+se*ge,be=he-Math.round(he)+K*ge+se*ue,Re=new Float64Array(P);if(l.translate(Re,Re,[xe>.5?xe-1:xe,be>.5?be-1:be,0]),this.alignedProjMatrix=Re,P=l.create(),l.scale(P,P,[this.width/2,-this.height/2,1]),l.translate(P,P,[1,-1,0]),this.labelPlaneMatrix=P,P=l.create(),l.scale(P,P,[1,-1,1]),l.translate(P,P,[-1,-1,0]),l.scale(P,P,[2/this.width,2/this.height,1]),this.glCoordMatrix=P,this.pixelMatrix=l.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},P=l.invert(new Float64Array(16),this.pixelMatrix),!P)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=P,this.projection.name==="globe"||this.mercatorFromTransition){this.globeMatrix=l.calculateGlobeMatrix(this);const ze=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=l.transformMat4(ze,ze,b),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=P;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const s=this.cameraWorldSizeForFog,d=this.cameraPixelsPerMeter,g=this._camera.position,_=1/this.height/this._pixelsPerMercatorPixel,b=[s,s,d];l.scale$2(b,b,_),l.scale$2(g,g,-1),l.multiply$2(g,g,b);const I=l.create();l.translate(I,I,g),l.scale(I,I,b),this.mercatorFogMatrix=I,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(s,d,_)}_computeCameraPosition(s){const d=(s=s||this.pixelsPerMeter)/this.pixelsPerMeter,g=this._camera.forward(),_=this.point,b=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*d-s/this.worldSize*this._centerAltitude;return[_.x/this.worldSize-g[0]*b,_.y/this.worldSize-g[1]*b,s/this.worldSize*this._centerAltitude-g[2]*b]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(s){const d=this._maxCameraBoundsDistance()*Math.cos(this._pitch),g=this._camera.position[2],_=s[2];let b=1;this.projection.wrap&&(this.center=this.center.wrap()),_>0&&(b=Math.min((d-g)/_,1)),this._camera.position=l.scaleAndAdd([],this._camera.position,s,b),this._updateStateFromCamera()}_updateStateFromCamera(){const s=this._camera.position,d=this._camera.forward(),{pitch:g,bearing:_}=this._camera.getPitchBearing(),b=l.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,I=this._mercatorZfromZoom(this._maxZoom)*Math.cos(l.degToRad(this._maxPitch)),P=Math.max((s[2]-b)/Math.cos(g),I),O=this._zoomFromMercatorZ(P);l.scaleAndAdd(s,s,d,P),this._pitch=l.clamp(g,l.degToRad(this.minPitch),l.degToRad(this.maxPitch)),this.angle=l.wrap(_,-Math.PI,Math.PI),this._setZoom(l.clamp(O,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new l.MercatorCoordinate(s[0],s[1],s[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(s){return Math.pow(2,s)*this.tileSize}_mercatorZfromZoom(s){return this.cameraToCenterDistance/this._worldSizeFromZoom(s)}_minimumHeightOverTerrain(){const s=Math.min((this._seaLevelZoom!=null?this._seaLevelZoom:this._zoom)+4,this._maxZoom);return this._mercatorZfromZoom(s)}_zoomFromMercatorZ(s){return this.scaleZoom(this.cameraToCenterDistance/(s*this.tileSize))}zoomFromMercatorZAdjusted(s){let d=0,g=l.GLOBE_ZOOM_THRESHOLD_MAX,_=0,b=1/0;for(;g-d>1e-6&&g>d;){const I=d+.5*(g-d),P=this.tileSize*Math.pow(2,I),O=this.getCameraToCenterDistance(this.projection,I,P),B=this.scaleZoom(O/(s*this.tileSize)),$=Math.abs(I-B);$<b&&(b=$,_=I),I<B?d=I:g=I}return _}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(l.warnOnce("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(s,d){const g=Math.min(s.x,d.x),_=Math.max(s.x,d.x),b=Math.min(s.y,d.y),I=Math.max(s.y,d.y);if(b<this.horizonLineFromTop(!1))return!0;if(this.projection.name!=="mercator")return!1;const P=[new l.Point(g,b),new l.Point(_,I),new l.Point(g,I),new l.Point(_,b)],O=this.renderWorldCopies?-3:0,B=this.renderWorldCopies?4:1;for(const $ of P){const Z=this.pointRayIntersection($);if(Z.t<0)return!0;const oe=this.rayIntersectionCoordinate(Z);if(oe.x<O||oe.y<0||oe.x>B||oe.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+l.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new l.Point(0,0),new l.Point(this.width,this.height))}zoomDeltaToMovement(s,d){const g=l.length(l.sub([],this._camera.position,s)),_=this._zoomFromMercatorZ(g)+d;return g-this._mercatorZfromZoom(_)}getCameraPoint(){if(this.projection.name==="globe"){const s=function([d,g,_],b){const I=[d,g,_,1];l.transformMat4$1(I,I,b);const P=I[3]=Math.max(I[3],1e-6);return I[0]/=P,I[1]/=P,I[2]/=P,I}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new l.Point(s[0],s[1])}{const s=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new l.Point(0,s))}}getCameraToCenterDistance(s,d=this.zoom,g=this.worldSize){const _=Xu(s,d,this.width,this.height,1024),b=s.pixelSpaceConversion(this.center.lat,g,_);return .5/Math.tan(.5*this._fov)*this.height*b}getWorldToCameraMatrix(){const s=this._camera.getWorldToCamera(this.worldSize,this.projection.zAxisUnit==="meters"?this.pixelsPerMeter:1);return this.projection.name==="globe"&&l.multiply(s,s,this.globeMatrix),s}}function zl(p,s){let d=!1,g=null;const _=()=>{g=null,d&&(p(),g=setTimeout(_,s),d=!1)};return()=>(d=!0,g||_(),g)}class rf{constructor(s){this._hashName=s&&encodeURIComponent(s),l.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=zl(this._updateHashUnthrottled.bind(this),300)}addTo(s){return this._map=s,l.window.addEventListener("hashchange",this._onHashChange,!1),s.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),l.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const s=this._map;if(!s)return"";const d=kc(s);if(this._hashName){const g=this._hashName;let _=!1;const b=l.window.location.hash.slice(1).split("&").map(I=>{const P=I.split("=")[0];return P===g?(_=!0,`${P}=${d}`):I}).filter(I=>I);return _||b.push(`${g}=${d}`),`#${b.join("&")}`}return`#${d}`}_getCurrentHash(){const s=l.window.location.hash.replace("#","");if(this._hashName){let d;return s.split("&").map(g=>g.split("=")).forEach(g=>{g[0]===this._hashName&&(d=g)}),(d&&d[1]||"").split("/")}return s.split("/")}_onHashChange(){const s=this._map;if(!s)return!1;const d=this._getCurrentHash();if(d.length>=3&&!d.some(g=>isNaN(g))){const g=s.dragRotate.isEnabled()&&s.touchZoomRotate.isEnabled()?+(d[3]||0):s.getBearing();return s.jumpTo({center:[+d[2],+d[1]],zoom:+d[0],bearing:g,pitch:+(d[4]||0)}),!0}return!1}_updateHashUnthrottled(){const s=l.window.location.href.replace(/(#.+)?$/,this.getHashString());l.window.history.replaceState(l.window.history.state,null,s)}}function kc(p,s){const d=p.getCenter(),g=Math.round(100*p.getZoom())/100,_=Math.ceil((g*Math.LN2+Math.log(512/360/.5))/Math.LN10),b=Math.pow(10,_),I=Math.round(d.lng*b)/b,P=Math.round(d.lat*b)/b,O=p.getBearing(),B=p.getPitch();let $=s?`/${I}/${P}/${g}`:`${g}/${P}/${I}`;return(O||B)&&($+="/"+Math.round(10*O)/10),B&&($+=`/${Math.round(B)}`),$}const Lc={linearity:.3,easing:l.bezier(0,0,.3,1)},Yu=l.extend({deceleration:2500,maxSpeed:1400},Lc),Ju=l.extend({deceleration:20,maxSpeed:1400},Lc),Kt=l.extend({deceleration:1e3,maxSpeed:360},Lc),Yo=l.extend({deceleration:1e3,maxSpeed:90},Lc);class Jm{constructor(s){this._map=s,this.clear()}clear(){this._inertiaBuffer=[]}record(s){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:l.exported.now(),settings:s})}_drainInertiaBuffer(){const s=this._inertiaBuffer,d=l.exported.now();for(;s.length>0&&d-s[0].time>160;)s.shift()}_onMoveEnd(s){if(this._map._prefersReducedMotion()||(this._drainInertiaBuffer(),this._inertiaBuffer.length<2))return;const d={zoom:0,bearing:0,pitch:0,pan:new l.Point(0,0),pinchAround:void 0,around:void 0};for(const{settings:b}of this._inertiaBuffer)d.zoom+=b.zoomDelta||0,d.bearing+=b.bearingDelta||0,d.pitch+=b.pitchDelta||0,b.panDelta&&d.pan._add(b.panDelta),b.around&&(d.around=b.around),b.pinchAround&&(d.pinchAround=b.pinchAround);const g=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,_={};if(d.pan.mag()){const b=$c(d.pan.mag(),g,l.extend({},Yu,s||{}));_.offset=d.pan.mult(b.amount/d.pan.mag()),_.center=this._map.transform.center,Dc(_,b)}if(d.zoom){const b=$c(d.zoom,g,Ju);_.zoom=this._map.transform.zoom+b.amount,Dc(_,b)}if(d.bearing){const b=$c(d.bearing,g,Kt);_.bearing=this._map.transform.bearing+l.clamp(b.amount,-179,179),Dc(_,b)}if(d.pitch){const b=$c(d.pitch,g,Yo);_.pitch=this._map.transform.pitch+b.amount,Dc(_,b)}if(_.zoom||_.bearing){const b=d.pinchAround===void 0?d.around:d.pinchAround;_.around=b?this._map.unproject(b):this._map.getCenter()}return this.clear(),_.noMoveStart=!0,_}}function Dc(p,s){(!p.duration||p.duration<s.duration)&&(p.duration=s.duration,p.easing=s.easing)}function $c(p,s,d){const{maxSpeed:g,linearity:_,deceleration:b}=d,I=l.clamp(p*_/(s/1e3),-g,g),P=Math.abs(I)/(b*_);return{easing:d.easing,duration:1e3*P,amount:I*(P/2)}}class Ci extends l.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,d,g,_={}){const b=te(d.getCanvasContainer(),g),I=d.unproject(b);super(s,l.extend({point:b,lngLat:I,originalEvent:g},_)),this._defaultPrevented=!1,this.target=d}}class Fc extends l.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,d,g){const _=s==="touchend"?g.changedTouches:g.touches,b=re(d.getCanvasContainer(),_),I=b.map(O=>d.unproject(O)),P=b.reduce((O,B,$,Z)=>O.add(B.div(Z.length)),new l.Point(0,0));super(s,{points:b,point:P,lngLats:I,lngLat:d.unproject(P),originalEvent:g}),this._defaultPrevented=!1}}class Qu extends l.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,d,g){super(s,{originalEvent:g}),this._defaultPrevented=!1}}class of{constructor(s,d){this._map=s,this._clickTolerance=d.clickTolerance}reset(){this._mousedownPos=void 0}wheel(s){return this._firePreventable(new Qu(s.type,this._map,s))}mousedown(s,d){return this._mousedownPos=d,this._firePreventable(new Ci(s.type,this._map,s))}mouseup(s){this._map.fire(new Ci(s.type,this._map,s))}preclick(s){const d=l.extend({},s);d.type="preclick",this._map.fire(new Ci(d.type,this._map,d))}click(s,d){this._mousedownPos&&this._mousedownPos.dist(d)>=this._clickTolerance||(this.preclick(s),this._map.fire(new Ci(s.type,this._map,s)))}dblclick(s){return this._firePreventable(new Ci(s.type,this._map,s))}mouseover(s){this._map.fire(new Ci(s.type,this._map,s))}mouseout(s){this._map.fire(new Ci(s.type,this._map,s))}touchstart(s){return this._firePreventable(new Fc(s.type,this._map,s))}touchmove(s){this._map.fire(new Fc(s.type,this._map,s))}touchend(s){this._map.fire(new Fc(s.type,this._map,s))}touchcancel(s){this._map.fire(new Fc(s.type,this._map,s))}_firePreventable(s){if(this._map.fire(s),s.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class ed{constructor(s){this._map=s}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(s){this._map.fire(new Ci(s.type,this._map,s))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Ci("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(s){this._delayContextMenu?this._contextMenuEvent=s:this._map.fire(new Ci(s.type,this._map,s)),this._map.listens("contextmenu")&&s.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Qm{constructor(s,d){this._map=s,this._el=s.getCanvasContainer(),this._container=s.getContainer(),this._clickTolerance=d.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(s,d){this.isEnabled()&&s.shiftKey&&s.button===0&&(F(),this._startPos=this._lastPos=d,this._active=!0)}mousemoveWindow(s,d){if(!this._active)return;const g=d,_=this._startPos,b=this._lastPos;if(!_||!b||b.equals(g)||!this._box&&g.dist(_)<this._clickTolerance)return;this._lastPos=g,this._box||(this._box=k("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",s));const I=Math.min(_.x,g.x),P=Math.max(_.x,g.x),O=Math.min(_.y,g.y),B=Math.max(_.y,g.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${I}px,${O}px)`,this._box.style.width=P-I+"px",this._box.style.height=B-O+"px")})}mouseupWindow(s,d){if(!this._active)return;const g=this._startPos,_=d;if(g&&s.button===0){if(this.reset(),X(),g.x!==_.x||g.y!==_.y)return this._map.fire(new l.Event("boxzoomend",{originalEvent:s})),{cameraAnimation:b=>b.fitScreenCoordinates(g,_,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",s)}}keydown(s){this._active&&s.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",s))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),j(),delete this._startPos,delete this._lastPos}_fireEvent(s,d){return this._map.fire(new l.Event(s,{originalEvent:d}))}}function td(p,s){const d={};for(let g=0;g<p.length;g++)d[p[g].identifier]=s[g];return d}class kl{constructor(s){this.reset(),this.numTouches=s.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(s,d,g){(this.centroid||g.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===0&&(this.startTime=s.timeStamp),g.length===this.numTouches&&(this.centroid=function(_){const b=new l.Point(0,0);for(const I of _)b._add(I);return b.div(_.length)}(d),this.touches=td(g,d)))}touchmove(s,d,g){if(this.aborted||!this.centroid)return;const _=td(g,d);for(const b in this.touches){const I=_[b];(!I||I.dist(this.touches[b])>30)&&(this.aborted=!0)}}touchend(s,d,g){if((!this.centroid||s.timeStamp-this.startTime>500)&&(this.aborted=!0),g.length===0){const _=!this.aborted&&this.centroid;if(this.reset(),_)return _}}}class af{constructor(s){this.singleTap=new kl(s),this.numTaps=s.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(s,d,g){this.singleTap.touchstart(s,d,g)}touchmove(s,d,g){this.singleTap.touchmove(s,d,g)}touchend(s,d,g){const _=this.singleTap.touchend(s,d,g);if(_){const b=s.timeStamp-this.lastTime<500,I=!this.lastTap||this.lastTap.dist(_)<30;if(b&&I||this.reset(),this.count++,this.lastTime=s.timeStamp,this.lastTap=_,this.count===this.numTaps)return this.reset(),_}}}class r_{constructor(){this._zoomIn=new af({numTouches:1,numTaps:2}),this._zoomOut=new af({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(s,d,g){this._zoomIn.touchstart(s,d,g),this._zoomOut.touchstart(s,d,g)}touchmove(s,d,g){this._zoomIn.touchmove(s,d,g),this._zoomOut.touchmove(s,d,g)}touchend(s,d,g){const _=this._zoomIn.touchend(s,d,g),b=this._zoomOut.touchend(s,d,g);return _?(this._active=!0,s.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:I=>I.easeTo({duration:300,zoom:I.getZoom()+1,around:I.unproject(_)},{originalEvent:s})}):b?(this._active=!0,s.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:I=>I.easeTo({duration:300,zoom:I.getZoom()-1,around:I.unproject(b)},{originalEvent:s})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const eg={0:1,2:2};class Ll{constructor(s){this.reset(),this._clickTolerance=s.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(s,d){return!1}_move(s,d){return{}}mousedown(s,d){if(this._lastPoint)return;const g=Q(s);this._correctButton(s,g)&&(this._lastPoint=d,this._eventButton=g)}mousemoveWindow(s,d){const g=this._lastPoint;if(g){if(s.preventDefault(),this._eventButton!=null&&function(_,b){const I=eg[b];return _.buttons===void 0||(_.buttons&I)!==I}(s,this._eventButton))this.reset();else if(this._moved||!(d.dist(g)<this._clickTolerance))return this._moved=!0,this._lastPoint=d,this._move(g,d)}}mouseupWindow(s){this._lastPoint&&Q(s)===this._eventButton&&(this._moved&&X(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class sf extends Ll{mousedown(s,d){super.mousedown(s,d),this._lastPoint&&(this._active=!0)}_correctButton(s,d){return d===0&&!s.ctrlKey}_move(s,d){return{around:d,panDelta:d.sub(s)}}}class lf extends Ll{_correctButton(s,d){return d===0&&s.ctrlKey||d===2}_move(s,d){const g=.8*(d.x-s.x);if(g)return this._active=!0,{bearingDelta:g}}contextmenu(s){s.preventDefault()}}class cf extends Ll{_correctButton(s,d){return d===0&&s.ctrlKey||d===2}_move(s,d){const g=-.5*(d.y-s.y);if(g)return this._active=!0,{pitchDelta:g}}contextmenu(s){s.preventDefault()}}class nd{constructor(s,d){this._map=s,this._el=s.getCanvasContainer(),this._minTouches=1,this._clickTolerance=d.clickTolerance||1,this.reset(),l.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new l.Point(0,0)}touchstart(s,d,g){return this._calculateTransform(s,d,g)}touchmove(s,d,g){if(this._active&&!(g.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(g.length===1&&!l.isFullscreen())return void this._showTouchPanBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return s.cancelable&&s.preventDefault(),this._calculateTransform(s,d,g)}}touchend(s,d,g){this._calculateTransform(s,d,g),this._active&&g.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(s,d,g){g.length>0&&(this._active=!0);const _=td(g,d),b=new l.Point(0,0),I=new l.Point(0,0);let P=0;for(const B in _){const $=_[B],Z=this._touches[B];Z&&(b._add($),I._add($.sub(Z)),P++,_[B]=$)}if(this._touches=_,P<this._minTouches||!I.mag())return;const O=I.div(P);return this._sum._add(O),this._sum.mag()<this._clickTolerance?void 0:{around:b.div(P),panDelta:O}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=k("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","null")},500)}}class Bc{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(s){}_move(s,d,g){return{}}touchstart(s,d,g){this._firstTwoTouches||g.length<2||(this._firstTwoTouches=[g[0].identifier,g[1].identifier],this._start([d[0],d[1]]))}touchmove(s,d,g){const _=this._firstTwoTouches;if(!_)return;s.preventDefault();const[b,I]=_,P=Nc(g,d,b),O=Nc(g,d,I);if(!P||!O)return;const B=this._aroundCenter?null:P.add(O).div(2);return this._move([P,O],B,s)}touchend(s,d,g){if(!this._firstTwoTouches)return;const[_,b]=this._firstTwoTouches,I=Nc(g,d,_),P=Nc(g,d,b);I&&P||(this._active&&X(),this.reset())}touchcancel(){this.reset()}enable(s){this._enabled=!0,this._aroundCenter=!!s&&s.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Nc(p,s,d){for(let g=0;g<p.length;g++)if(p[g].identifier===d)return s[g]}function uf(p,s){return Math.log(p/s)/Math.LN2}class tg extends Bc{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(s){this._startDistance=this._distance=s[0].dist(s[1])}_move(s,d){const g=this._distance;if(this._distance=s[0].dist(s[1]),this._active||!(Math.abs(uf(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:uf(this._distance,g),pinchAround:d}}}function df(p,s){return 180*p.angleWith(s)/Math.PI}class ng extends Bc{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(s){this._startVector=this._vector=s[0].sub(s[1]),this._minDiameter=s[0].dist(s[1])}_move(s,d){const g=this._vector;if(this._vector=s[0].sub(s[1]),g&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:df(this._vector,g),pinchAround:d}}_isBelowThreshold(s){this._minDiameter=Math.min(this._minDiameter,s.mag());const d=25/(Math.PI*this._minDiameter)*360,g=this._startVector;if(!g)return!1;const _=df(s,g);return Math.abs(_)<d}}function Ss(p){return Math.abs(p.y)>Math.abs(p.x)}class rg extends Bc{constructor(s){super(),this._map=s}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(s){this._lastPoints=s,Ss(s[0].sub(s[1]))&&(this._valid=!1)}_move(s,d,g){const _=this._lastPoints;if(!_)return;const b=s[0].sub(_[0]),I=s[1].sub(_[1]);return this._map._cooperativeGestures&&!l.isFullscreen()&&g.touches.length<3||(this._valid=this.gestureBeginsVertically(b,I,g.timeStamp),!this._valid)?void 0:(this._lastPoints=s,this._active=!0,{pitchDelta:(b.y+I.y)/2*-.5})}gestureBeginsVertically(s,d,g){if(this._valid!==void 0)return this._valid;const _=s.mag()>=2,b=d.mag()>=2;if(!_&&!b)return;if(!_||!b)return this._firstMove==null&&(this._firstMove=g),g-this._firstMove<100&&void 0;const I=s.y>0==d.y>0;return Ss(s)&&Ss(d)&&I}}const ig={panStep:100,bearingStep:15,pitchStep:10};class i_{constructor(){const s=ig;this._panStep=s.panStep,this._bearingStep=s.bearingStep,this._pitchStep=s.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(s){if(s.altKey||s.ctrlKey||s.metaKey)return;let d=0,g=0,_=0,b=0,I=0;switch(s.keyCode){case 61:case 107:case 171:case 187:d=1;break;case 189:case 109:case 173:d=-1;break;case 37:s.shiftKey?g=-1:(s.preventDefault(),b=-1);break;case 39:s.shiftKey?g=1:(s.preventDefault(),b=1);break;case 38:s.shiftKey?_=1:(s.preventDefault(),I=-1);break;case 40:s.shiftKey?_=-1:(s.preventDefault(),I=1);break;default:return}return this._rotationDisabled&&(g=0,_=0),{cameraAnimation:P=>{const O=P.getZoom();P.easeTo({duration:300,easeId:"keyboardHandler",easing:og,zoom:d?Math.round(O)+d*(s.shiftKey?2:1):O,bearing:P.getBearing()+g*this._bearingStep,pitch:P.getPitch()+_*this._pitchStep,offset:[-b*this._panStep,-I*this._panStep],center:P.getCenter()},{originalEvent:s})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function og(p){return p*(2-p)}const hf=4.000244140625;class ag{constructor(s,d){this._map=s,this._el=s.getCanvasContainer(),this._handler=d,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,l.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(s){this._defaultZoomRate=s}setWheelZoomRate(s){this._wheelZoomRate=s}isEnabled(){return!!this._enabled}isActive(){return this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(s){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!s&&s.around==="center",this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(s){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(s.ctrlKey||s.metaKey||this.isZooming()||l.isFullscreen()))return void this._showBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let d=s.deltaMode===l.window.WheelEvent.DOM_DELTA_LINE?40*s.deltaY:s.deltaY;const g=l.exported.now(),_=g-(this._lastWheelEventTime||0);this._lastWheelEventTime=g,d!==0&&d%hf==0?this._type="wheel":d!==0&&Math.abs(d)<4?this._type="trackpad":_>400?(this._type=null,this._lastValue=d,this._timeout=setTimeout(this._onTimeout,40,s)):this._type||(this._type=Math.abs(_*d)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,d+=this._lastValue)),s.shiftKey&&d&&(d/=4),this._type&&(this._lastWheelEvent=s,this._delta-=d,this._active||this._start(s)),s.preventDefault()}_onTimeout(s){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(s)}_start(s){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const d=te(this._el,s);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:d,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const s=this._map.transform;this._type==="wheel"&&s.projection.wrap&&(s._center.lng>=180||s._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const d=()=>s._terrainEnabled()&&this._aroundCoord?s.computeZoomRelativeTo(this._aroundCoord):s.zoom;if(this._delta!==0){const O=this._type==="wheel"&&Math.abs(this._delta)>hf?this._wheelZoomRate:this._defaultZoomRate;let B=2/(1+Math.exp(-Math.abs(this._delta*O)));this._delta<0&&B!==0&&(B=1/B);const $=d(),Z=Math.pow(2,$),oe=typeof this._targetZoom=="number"?s.zoomScale(this._targetZoom):Z;this._targetZoom=Math.min(s.maxZoom,Math.max(s.minZoom,s.scaleZoom(oe*B))),this._type==="wheel"&&(this._startZoom=$,this._easing=this._smoothOutEasing(200)),this._delta=0}const g=typeof this._targetZoom=="number"?this._targetZoom:d(),_=this._startZoom,b=this._easing;let I,P=!1;if(this._type==="wheel"&&_&&b){const O=Math.min((l.exported.now()-this._lastWheelEventTime)/200,1),B=b(O);I=l.number(_,g,B),O<1?this._frameId||(this._frameId=!0):P=!0}else I=g,P=!0;return this._active=!0,P&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!P,zoomDelta:I-d(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(s){let d=l.ease;if(this._prevEase){const g=this._prevEase,_=(l.exported.now()-g.start)/g.duration,b=g.easing(_+.01)-g.easing(_),I=.27/Math.sqrt(b*b+1e-4)*.01,P=Math.sqrt(.0729-I*I);d=l.bezier(I,P,.25,1)}return this._prevEase={start:l.exported.now(),duration:s,easing:d},d}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=k("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(l.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","null")},200)}}class sg{constructor(s,d){this._clickZoom=s,this._tapZoom=d}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Vi{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(s,d){return s.preventDefault(),{cameraAnimation:g=>{g.easeTo({duration:300,zoom:g.getZoom()+(s.shiftKey?-1:1),around:g.unproject(d)},{originalEvent:s})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class o_{constructor(){this._tap=new af({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(s,d,g){this._swipePoint||(this._tapTime&&s.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?g.length>0&&(this._swipePoint=d[0],this._swipeTouch=g[0].identifier):this._tap.touchstart(s,d,g))}touchmove(s,d,g){if(this._tapTime){if(this._swipePoint){if(g[0].identifier!==this._swipeTouch)return;const _=d[0],b=_.y-this._swipePoint.y;return this._swipePoint=_,s.preventDefault(),this._active=!0,{zoomDelta:b/128}}}else this._tap.touchmove(s,d,g)}touchend(s,d,g){this._tapTime?this._swipePoint&&g.length===0&&this.reset():this._tap.touchend(s,d,g)&&(this._tapTime=s.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class lg{constructor(s,d,g){this._el=s,this._mousePan=d,this._touchPan=g}enable(s){this._inertiaOptions=s||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class a_{constructor(s,d,g){this._pitchWithRotate=s.pitchWithRotate,this._mouseRotate=d,this._mousePitch=g}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class s_{constructor(s,d,g,_){this._el=s,this._touchZoom=d,this._touchRotate=g,this._tapDragZoom=_,this._rotationDisabled=!1,this._enabled=!0}enable(s){this._touchZoom.enable(s),this._rotationDisabled||this._touchRotate.enable(s),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const ko=p=>p.zoom||p.drag||p.pitch||p.rotate;class cg extends l.Event{}class l_{constructor(){this.constants=[1,1,.01],this.radius=0}setup(s,d){const g=l.sub([],d,s);this.radius=l.length(g[2]<0?l.div([],g,this.constants):[g[0],g[1],0])}projectRay(s){l.div(s,s,this.constants),l.normalize(s,s),l.mul$1(s,s,this.constants);const d=l.scale$2([],s,this.radius);if(d[2]>0){const g=l.scale$2([],[0,0,1],l.dot(d,[0,0,1])),_=l.scale$2([],l.normalize([],[d[0],d[1],0]),this.radius),b=l.add([],d,l.scale$2([],l.sub([],l.add([],_,g),d),2));d[0]=b[0],d[1]=b[1]}return d}}function Jo(p){return p.panDelta&&p.panDelta.mag()||p.zoomDelta||p.bearingDelta||p.pitchDelta}class ba{constructor(s,d){this._map=s,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Jm(s),this._bearingSnap=d.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new l_,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(d),l.bindAll(["handleEvent","handleWindowEvent"],this);const g=this._el;this._listeners=[[g,"touchstart",{passive:!0}],[g,"touchmove",{passive:!1}],[g,"touchend",void 0],[g,"touchcancel",void 0],[g,"mousedown",void 0],[g,"mousemove",void 0],[g,"mouseup",void 0],[l.window.document,"mousemove",{capture:!0}],[l.window.document,"mouseup",void 0],[g,"mouseover",void 0],[g,"mouseout",void 0],[g,"dblclick",void 0],[g,"click",void 0],[g,"keydown",{capture:!1}],[g,"keyup",void 0],[g,"wheel",{passive:!1}],[g,"contextmenu",void 0],[l.window,"blur",void 0]];for(const[_,b,I]of this._listeners)_.addEventListener(b,_===l.window.document?this.handleWindowEvent:this.handleEvent,I)}destroy(){for(const[s,d,g]of this._listeners)s.removeEventListener(d,s===l.window.document?this.handleWindowEvent:this.handleEvent,g)}_addDefaultHandlers(s){const d=this._map,g=d.getCanvasContainer();this._add("mapEvent",new of(d,s));const _=d.boxZoom=new Qm(d,s);this._add("boxZoom",_);const b=new r_,I=new Vi;d.doubleClickZoom=new sg(I,b),this._add("tapZoom",b),this._add("clickZoom",I);const P=new o_;this._add("tapDragZoom",P);const O=d.touchPitch=new rg(d);this._add("touchPitch",O);const B=new lf(s),$=new cf(s);d.dragRotate=new a_(s,B,$),this._add("mouseRotate",B,["mousePitch"]),this._add("mousePitch",$,["mouseRotate"]);const Z=new sf(s),oe=new nd(d,s);d.dragPan=new lg(g,Z,oe),this._add("mousePan",Z),this._add("touchPan",oe,["touchZoom","touchRotate"]);const le=new ng,he=new tg;d.touchZoomRotate=new s_(g,he,le,P),this._add("touchRotate",le,["touchPan","touchZoom"]),this._add("touchZoom",he,["touchPan","touchRotate"]),this._add("blockableMapEvent",new ed(d));const ue=d.scrollZoom=new ag(d,this);this._add("scrollZoom",ue,["mousePan"]);const ge=d.keyboard=new i_;this._add("keyboard",ge);for(const K of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])s.interactive&&s[K]&&d[K].enable(s[K])}_add(s,d,g){this._handlers.push({handlerName:s,handler:d,allowed:g}),this._handlersById[s]=d}stop(s){if(!this._updatingCamera){for(const{handler:d}of this._handlers)d.reset();this._inertia.clear(),this._fireEvents({},{},s),this._changes=[]}}isActive(){for(const{handler:s}of this._handlers)if(s.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!ko(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(s,d,g){for(const _ in s)if(_!==g&&(!d||d.indexOf(_)<0))return!0;return!1}handleWindowEvent(s){this.handleEvent(s,`${s.type}Window`)}_getMapTouches(s){const d=[];for(const g of s)this._el.contains(g.target)&&d.push(g);return d}handleEvent(s,d){this._updatingCamera=!0;const g=s.type==="renderFrame",_=g?void 0:s,b={needsRenderFrame:!1},I={},P={},O=s.touches?this._getMapTouches(s.touches):void 0,B=O?re(this._el,O):g?void 0:te(this._el,s);for(const{handlerName:oe,handler:le,allowed:he}of this._handlers){if(!le.isEnabled())continue;let ue;this._blockedByActive(P,he,oe)?le.reset():le[d||s.type]&&(ue=le[d||s.type](s,B,O),this.mergeHandlerResult(b,I,ue,oe,_),ue&&ue.needsRenderFrame&&this._triggerRenderFrame()),(ue||le.isActive())&&(P[oe]=le)}const $={};for(const oe in this._previousActiveHandlers)P[oe]||($[oe]=_);this._previousActiveHandlers=P,(Object.keys($).length||Jo(b))&&(this._changes.push([b,I,$]),this._triggerRenderFrame()),(Object.keys(P).length||Jo(b))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Z}=b;Z&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Z(this._map))}mergeHandlerResult(s,d,g,_,b){if(!g)return;l.extend(s,g);const I={handlerName:_,originalEvent:g.originalEvent||b};g.zoomDelta!==void 0&&(d.zoom=I),g.panDelta!==void 0&&(d.drag=I),g.pitchDelta!==void 0&&(d.pitch=I),g.bearingDelta!==void 0&&(d.rotate=I)}_applyChanges(){const s={},d={},g={};for(const[_,b,I]of this._changes)_.panDelta&&(s.panDelta=(s.panDelta||new l.Point(0,0))._add(_.panDelta)),_.zoomDelta&&(s.zoomDelta=(s.zoomDelta||0)+_.zoomDelta),_.bearingDelta&&(s.bearingDelta=(s.bearingDelta||0)+_.bearingDelta),_.pitchDelta&&(s.pitchDelta=(s.pitchDelta||0)+_.pitchDelta),_.around!==void 0&&(s.around=_.around),_.aroundCoord!==void 0&&(s.aroundCoord=_.aroundCoord),_.pinchAround!==void 0&&(s.pinchAround=_.pinchAround),_.noInertia&&(s.noInertia=_.noInertia),l.extend(d,b),l.extend(g,I);this._updateMapTransform(s,d,g),this._changes=[]}_updateMapTransform(s,d,g){const _=this._map,b=_.transform,I=se=>[se.x,se.y,se.z];if((se=>{const xe=this._eventsInProgress.drag;return xe&&!this._handlersById[xe.handlerName].isActive()})()&&!Jo(s)){const se=b.zoom;b.cameraElevationReference="sea",b.recenterOnTerrain(),b.cameraElevationReference="ground",se!==b.zoom&&this._map._update(!0)}if(b._isCameraConstrained&&_._stop(!0),!Jo(s))return void this._fireEvents(d,g,!0);let{panDelta:P,zoomDelta:O,bearingDelta:B,pitchDelta:$,around:Z,aroundCoord:oe,pinchAround:le}=s;b._isCameraConstrained&&(O>0&&(O=0),b._isCameraConstrained=!1),le!==void 0&&(Z=le),(O||(se=>d[se]&&!this._eventsInProgress[se])("drag"))&&Z&&(this._dragOrigin=I(b.pointCoordinate3D(Z)),this._trackingEllipsoid.setup(b._camera.position,this._dragOrigin)),b.cameraElevationReference="sea",_._stop(!0),Z=Z||_.transform.centerPoint,B&&(b.bearing+=B),$&&(b.pitch+=$),b._updateCameraState();const he=[0,0,0];if(P)if(b.projection.name==="mercator"){const se=this._trackingEllipsoid.projectRay(b.screenPointToMercatorRay(Z).dir),xe=this._trackingEllipsoid.projectRay(b.screenPointToMercatorRay(Z.sub(P)).dir);he[0]=xe[0]-se[0],he[1]=xe[1]-se[1]}else{const se=b.pointCoordinate(Z);if(b.projection.name==="globe"){P=P.rotate(-b.angle);const xe=b._pixelsPerMercatorPixel/b.worldSize;he[0]=-P.x*l.mercatorScale(l.latFromMercatorY(se.y))*xe,he[1]=-P.y*l.mercatorScale(b.center.lat)*xe}else{const xe=b.pointCoordinate(Z.sub(P));se&&xe&&(he[0]=xe.x-se.x,he[1]=xe.y-se.y)}}const ue=b.zoom,ge=[0,0,0];if(O){const se=I(oe||b.pointCoordinate3D(Z)),xe={dir:l.normalize([],l.sub([],se,b._camera.position))};if(xe.dir[2]<0){const be=b.zoomDeltaToMovement(se,O);l.scale$2(ge,xe.dir,be)}}const K=l.add(he,he,ge);b._translateCameraConstrained(K),O&&Math.abs(b.zoom-ue)>1e-4&&b.recenterOnTerrain(),b.cameraElevationReference="ground",this._map._update(),s.noInertia||this._inertia.record(s),this._fireEvents(d,g,!0)}_fireEvents(s,d,g){const _=ko(this._eventsInProgress),b=ko(s),I={};for(const $ in s){const{originalEvent:Z}=s[$];this._eventsInProgress[$]||(I[`${$}start`]=Z),this._eventsInProgress[$]=s[$]}!_&&b&&this._fireEvent("movestart",b.originalEvent);for(const $ in I)this._fireEvent($,I[$]);b&&this._fireEvent("move",b.originalEvent);for(const $ in s){const{originalEvent:Z}=s[$];this._fireEvent($,Z)}const P={};let O;for(const $ in this._eventsInProgress){const{handlerName:Z,originalEvent:oe}=this._eventsInProgress[$];this._handlersById[Z].isActive()||(delete this._eventsInProgress[$],O=d[Z]||oe,P[`${$}end`]=O)}for(const $ in P)this._fireEvent($,P[$]);const B=ko(this._eventsInProgress);if(g&&(_||b)&&!B){this._updatingCamera=!0;const $=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Z=oe=>oe!==0&&-this._bearingSnap<oe&&oe<this._bearingSnap;$?(Z($.bearing||this._map.getBearing())&&($.bearing=0),this._map.easeTo($,{originalEvent:O})):(this._map.fire(new l.Event("moveend",{originalEvent:O})),Z(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(s,d){this._map.fire(new l.Event(s,d?{originalEvent:d}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(s=>{this._frameId=void 0,this.handleEvent(new cg("renderFrame",{timeStamp:s})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const Ws="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class rd extends l.Evented{constructor(s,d){super(),this._moving=!1,this._zooming=!1,this.transform=s,this._bearingSnap=d.bearingSnap,this._respectPrefersReducedMotion=d.respectPrefersReducedMotion!==!1,l.bindAll(["_renderFrameCallback"],this)}getCenter(){return new l.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(s,d){return this.jumpTo({center:s},d)}panBy(s,d,g){return s=l.Point.convert(s).mult(-1),this.panTo(this.transform.center,l.extend({offset:s},d),g)}panTo(s,d,g){return this.easeTo(l.extend({center:s},d),g)}getZoom(){return this.transform.zoom}setZoom(s,d){return this.jumpTo({zoom:s},d),this}zoomTo(s,d,g){return this.easeTo(l.extend({zoom:s},d),g)}zoomIn(s,d){return this.zoomTo(this.getZoom()+1,s,d),this}zoomOut(s,d){return this.zoomTo(this.getZoom()-1,s,d),this}getBearing(){return this.transform.bearing}setBearing(s,d){return this.jumpTo({bearing:s},d),this}getPadding(){return this.transform.padding}setPadding(s,d){return this.jumpTo({padding:s},d),this}rotateTo(s,d,g){return this.easeTo(l.extend({bearing:s},d),g)}resetNorth(s,d){return this.rotateTo(0,l.extend({duration:1e3},s),d),this}resetNorthPitch(s,d){return this.easeTo(l.extend({bearing:0,pitch:0,duration:1e3},s),d),this}snapToNorth(s,d){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(s,d):this}getPitch(){return this.transform.pitch}setPitch(s,d){return this.jumpTo({pitch:s},d),this}cameraForBounds(s,d){s=l.LngLatBounds.convert(s);const g=d&&d.bearing||0,_=d&&d.pitch||0,b=s.getNorthWest(),I=s.getSouthEast();return this._cameraForBounds(this.transform,b,I,g,_,d)}_extendCameraOptions(s){const d={top:0,bottom:0,right:0,left:0};if(typeof(s=l.extend({padding:d,offset:[0,0],maxZoom:this.transform.maxZoom},s)).padding=="number"){const g=s.padding;s.padding={top:g,bottom:g,right:g,left:g}}return s.padding=l.extend(d,s.padding),s}_minimumAABBFrustumDistance(s,d){const g=d.max[0]-d.min[0],_=d.max[1]-d.min[1];return g/_>s.aspect?g/(2*Math.tan(.5*s.fovX)*s.aspect):_/(2*Math.tan(.5*s.fovY)*s.aspect)}_cameraForBoundsOnGlobe(s,d,g,_,b,I){const P=s.clone(),O=this._extendCameraOptions(I);P.bearing=_,P.pitch=b;const B=l.LngLat.convert(d),$=l.LngLat.convert(g),Z=.5*(B.lat+$.lat),oe=.5*(B.lng+$.lng),le=l.latLngToECEF(Z,oe),he=l.normalize([],le),ue=l.normalize([],l.cross([],he,[0,1,0])),ge=l.cross([],ue,he),K=[ue[0],ue[1],ue[2],0,ge[0],ge[1],ge[2],0,he[0],he[1],he[2],0,0,0,0,1],se=[le,l.latLngToECEF(B.lat,B.lng),l.latLngToECEF($.lat,B.lng),l.latLngToECEF($.lat,$.lng),l.latLngToECEF(B.lat,$.lng),l.latLngToECEF(Z,B.lng),l.latLngToECEF(Z,$.lng),l.latLngToECEF(B.lat,oe),l.latLngToECEF($.lat,oe)];let xe=l.Aabb.fromPoints(se.map(vt=>[l.dot(ue,vt),l.dot(ge,vt),l.dot(he,vt)]));const be=l.transformMat4([],xe.center,K);l.squaredLength(be)===0&&l.set(be,0,0,1),l.normalize(be,be),l.scale$2(be,be,l.GLOBE_RADIUS),P.center=l.ecefToLatLng(be);const Re=P.getWorldToCameraMatrix(),ze=l.invert(new Float64Array(16),Re);xe=l.Aabb.applyTransform(xe,l.multiply([],Re,K)),l.transformMat4(be,be,Re);const Oe=.5*(xe.max[2]-xe.min[2]),Ve=this._minimumAABBFrustumDistance(P,xe),Ue=l.scale$2([],[0,0,1],Oe),Ke=l.add(Ue,be,Ue),Pt=Ve+(P.pitch===0?0:l.distance(be,Ke)),qe=P.globeCenterInViewSpace,ht=l.sub([],be,[qe[0],qe[1],qe[2]]);l.normalize(ht,ht),l.scale$2(ht,ht,Pt);const et=l.add([],be,ht);l.transformMat4(et,et,ze);const Et=l.earthRadius/l.GLOBE_RADIUS,Xe=l.length(et),dt=l.mercatorZfromAltitude(Math.max(Xe*Et-l.earthRadius,Number.EPSILON),0),zt=Math.min(P.zoomFromMercatorZAdjusted(dt),O.maxZoom);return zt>.5*(l.GLOBE_ZOOM_THRESHOLD_MIN+l.GLOBE_ZOOM_THRESHOLD_MAX)?(P.setProjection({name:"mercator"}),P.zoom=zt,this._cameraForBounds(P,d,g,_,b,I)):{center:P.center,zoom:zt,bearing:_,pitch:b}}queryTerrainElevation(s,d){const g=this.transform.elevation;return g?(d=l.extend({},{exaggerated:!0},d),g.getAtPoint(l.MercatorCoordinate.fromLngLat(s),null,d.exaggerated)):null}_cameraForBounds(s,d,g,_,b,I){if(s.projection.name==="globe")return this._cameraForBoundsOnGlobe(s,d,g,_,b,I);const P=s.clone(),O=this._extendCameraOptions(I),B=P.padding;P.bearing=_,P.pitch=b;const $=l.LngLat.convert(d),Z=l.LngLat.convert(g),oe=new l.LngLat($.lng,Z.lat),le=new l.LngLat(Z.lng,$.lat),he=P.project($),ue=P.project(Z),ge=this.queryTerrainElevation($),K=this.queryTerrainElevation(Z),se=this.queryTerrainElevation(oe),xe=this.queryTerrainElevation(le),be=[[he.x,he.y,Math.min(ge||0,K||0,se||0,xe||0)],[ue.x,ue.y,Math.max(ge||0,K||0,se||0,xe||0)]];let Re=l.Aabb.fromPoints(be);const ze=P.getWorldToCameraMatrix(),Oe=l.invert(new Float64Array(16),ze);Re=l.Aabb.applyTransform(Re,ze);const Ve=l.sub([],Re.max,Re.min),Ue=B.left||0,Ke=B.right||0,Pt=B.bottom||0,qe=B.top||0,{left:ht,right:et,top:Et,bottom:Xe}=O.padding,dt=.5*(Ue+Ke),zt=.5*(qe+Pt),vt=Math.min(P.scaleZoom(P.scale*Math.min((P.width-(Ue+Ke+ht+et))/Ve[0],(P.height-(Pt+qe+Xe+Et))/Ve[1])),O.maxZoom),kt=P.scale/P.zoomScale(vt);Re=new l.Aabb([Re.min[0]-(ht+dt)*kt,Re.min[1]-(Xe+zt)*kt,Re.min[2]],[Re.max[0]+(et+dt)*kt,Re.max[1]+(Et+zt)*kt,Re.max[2]]);const dn=.5*Ve[2],Rn=this._minimumAABBFrustumDistance(P,Re),en=[0,0,1,0];l.transformMat4$1(en,en,ze),l.normalize$2(en,en);const _n=l.scale$2([],en,Rn+dn),Hn=l.add([],Re.center,_n),Un=(typeof O.offset.x=="number"&&typeof O.offset.y=="number"?new l.Point(O.offset.x,O.offset.y):l.Point.convert(O.offset)).rotate(-l.degToRad(_));Re.center[0]-=Un.x*kt,Re.center[1]+=Un.y*kt,l.transformMat4(Re.center,Re.center,Oe),l.transformMat4(Hn,Hn,Oe);const cn=[Re.center[0],Re.center[1],Hn[2]*P.pixelsPerMeter];l.scale$2(cn,cn,1/P.worldSize);const ur=l.lngFromMercatorX(cn[0]),vr=l.latFromMercatorY(cn[1]),yr=Math.min(P._zoomFromMercatorZ(cn[2]),O.maxZoom),_r=new l.LngLat(ur,vr);return P.mercatorFromTransition&&yr<.5*(l.GLOBE_ZOOM_THRESHOLD_MIN+l.GLOBE_ZOOM_THRESHOLD_MAX)?(P.setProjection({name:"globe"}),P.zoom=yr,this._cameraForBounds(P,d,g,_,b,I)):{center:_r,zoom:yr,bearing:_,pitch:b}}fitBounds(s,d,g){const _=this.cameraForBounds(s,d);return this._fitInternal(_,d,g)}fitScreenCoordinates(s,d,g,_,b){const I=l.Point.convert(s),P=l.Point.convert(d),O=new l.Point(Math.min(I.x,P.x),Math.min(I.y,P.y)),B=new l.Point(Math.max(I.x,P.x),Math.max(I.y,P.y));if(this.transform.projection.name==="mercator"&&this.transform.anyCornerOffEdge(I,P))return this;const $=this.transform.pointLocation3D(O),Z=this.transform.pointLocation3D(B),oe=this.transform.pointLocation3D(new l.Point(O.x,B.y)),le=this.transform.pointLocation3D(new l.Point(B.x,O.y)),he=[Math.min($.lng,Z.lng,oe.lng,le.lng),Math.min($.lat,Z.lat,oe.lat,le.lat)],ue=[Math.max($.lng,Z.lng,oe.lng,le.lng),Math.max($.lat,Z.lat,oe.lat,le.lat)],ge=_&&_.pitch?_.pitch:this.getPitch(),K=this._cameraForBounds(this.transform,he,ue,g,ge,_);return this._fitInternal(K,_,b)}_fitInternal(s,d,g){return s?(delete(d=l.extend(s,d)).padding,d.linear?this.easeTo(d,g):this.flyTo(d,g)):this}jumpTo(s,d){this.stop();const g=s.preloadOnly?this.transform.clone():this.transform;let _=!1,b=!1,I=!1;return"zoom"in s&&g.zoom!==+s.zoom&&(_=!0,g.zoom=+s.zoom),s.center!==void 0&&(g.center=l.LngLat.convert(s.center)),"bearing"in s&&g.bearing!==+s.bearing&&(b=!0,g.bearing=+s.bearing),"pitch"in s&&g.pitch!==+s.pitch&&(I=!0,g.pitch=+s.pitch),s.padding==null||g.isPaddingEqual(s.padding)||(g.padding=s.padding),s.preloadOnly?(this._preloadTiles(g),this):(this.fire(new l.Event("movestart",d)).fire(new l.Event("move",d)),_&&this.fire(new l.Event("zoomstart",d)).fire(new l.Event("zoom",d)).fire(new l.Event("zoomend",d)),b&&this.fire(new l.Event("rotatestart",d)).fire(new l.Event("rotate",d)).fire(new l.Event("rotateend",d)),I&&this.fire(new l.Event("pitchstart",d)).fire(new l.Event("pitch",d)).fire(new l.Event("pitchend",d)),this.fire(new l.Event("moveend",d)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||l.warnOnce(Ws),this.transform.getFreeCameraOptions()}setFreeCameraOptions(s,d){const g=this.transform;if(!g.projection.supportsFreeCamera)return l.warnOnce(Ws),this;this.stop();const _=g.zoom,b=g.pitch,I=g.bearing;g.setFreeCameraOptions(s);const P=_!==g.zoom,O=b!==g.pitch,B=I!==g.bearing;return this.fire(new l.Event("movestart",d)).fire(new l.Event("move",d)),P&&this.fire(new l.Event("zoomstart",d)).fire(new l.Event("zoom",d)).fire(new l.Event("zoomend",d)),B&&this.fire(new l.Event("rotatestart",d)).fire(new l.Event("rotate",d)).fire(new l.Event("rotateend",d)),O&&this.fire(new l.Event("pitchstart",d)).fire(new l.Event("pitch",d)).fire(new l.Event("pitchend",d)),this.fire(new l.Event("moveend",d)),this}easeTo(s,d){this._stop(!1,s.easeId),((s=l.extend({offset:[0,0],duration:500,easing:l.ease},s)).animate===!1||this._prefersReducedMotion(s))&&(s.duration=0);const g=this.transform,_=this.getZoom(),b=this.getBearing(),I=this.getPitch(),P=this.getPadding(),O="zoom"in s?+s.zoom:_,B="bearing"in s?this._normalizeBearing(s.bearing,b):b,$="pitch"in s?+s.pitch:I,Z="padding"in s?s.padding:g.padding,oe=l.Point.convert(s.offset);let le,he,ue;if(g.projection.name==="globe"){const Ue=l.MercatorCoordinate.fromLngLat(g.center),Ke=oe.rotate(-g.angle);Ue.x+=Ke.x/g.worldSize,Ue.y+=Ke.y/g.worldSize;const Pt=Ue.toLngLat(),qe=l.LngLat.convert(s.center||Pt);this._normalizeCenter(qe),le=g.centerPoint.add(Ke),he=new l.Point(Ue.x,Ue.y).mult(g.worldSize),ue=new l.Point(l.mercatorXfromLng(qe.lng),l.mercatorYfromLat(qe.lat)).mult(g.worldSize).sub(he)}else{le=g.centerPoint.add(oe);const Ue=g.pointLocation(le),Ke=l.LngLat.convert(s.center||Ue);this._normalizeCenter(Ke),he=g.project(Ue),ue=g.project(Ke).sub(he)}const ge=g.zoomScale(O-_);let K,se;s.around&&(K=l.LngLat.convert(s.around),se=g.locationPoint(K));const xe=this._zooming||O!==_,be=this._rotating||b!==B,Re=this._pitching||$!==I,ze=!g.isPaddingEqual(Z),Oe=Ue=>Ke=>{if(xe&&(Ue.zoom=l.number(_,O,Ke)),be&&(Ue.bearing=l.number(b,B,Ke)),Re&&(Ue.pitch=l.number(I,$,Ke)),ze&&(Ue.interpolatePadding(P,Z,Ke),le=Ue.centerPoint.add(oe)),K)Ue.setLocationAtPoint(K,se);else{const Pt=Ue.zoomScale(Ue.zoom-_),qe=O>_?Math.min(2,ge):Math.max(.5,ge),ht=Math.pow(qe,1-Ke),et=Ue.unproject(he.add(ue.mult(Ke*ht)).mult(Pt));Ue.setLocationAtPoint(Ue.renderWorldCopies?et.wrap():et,le)}return s.preloadOnly||this._fireMoveEvents(d),Ue};if(s.preloadOnly){const Ue=this._emulate(Oe,s.duration,g);return this._preloadTiles(Ue),this}const Ve={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=xe,this._rotating=be,this._pitching=Re,this._padding=ze,this._easeId=s.easeId,this._prepareEase(d,s.noMoveStart,Ve),this._ease(Oe(g),Ue=>{g.recenterOnTerrain(),this._afterEase(d,Ue)},s),this}_prepareEase(s,d,g={}){this._moving=!0,this.transform.cameraElevationReference="sea",d||g.moving||this.fire(new l.Event("movestart",s)),this._zooming&&!g.zooming&&this.fire(new l.Event("zoomstart",s)),this._rotating&&!g.rotating&&this.fire(new l.Event("rotatestart",s)),this._pitching&&!g.pitching&&this.fire(new l.Event("pitchstart",s))}_fireMoveEvents(s){this.fire(new l.Event("move",s)),this._zooming&&this.fire(new l.Event("zoom",s)),this._rotating&&this.fire(new l.Event("rotate",s)),this._pitching&&this.fire(new l.Event("pitch",s))}_afterEase(s,d){if(this._easeId&&d&&this._easeId===d)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const g=this._zooming,_=this._rotating,b=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,g&&this.fire(new l.Event("zoomend",s)),_&&this.fire(new l.Event("rotateend",s)),b&&this.fire(new l.Event("pitchend",s)),this.fire(new l.Event("moveend",s))}flyTo(s,d){if(this._prefersReducedMotion(s)){const vt=l.pick(s,["center","zoom","bearing","pitch","around"]);return this.jumpTo(vt,d)}this.stop(),s=l.extend({offset:[0,0],speed:1.2,curve:1.42,easing:l.ease},s);const g=this.transform,_=this.getZoom(),b=this.getBearing(),I=this.getPitch(),P=this.getPadding(),O="zoom"in s?l.clamp(+s.zoom,g.minZoom,g.maxZoom):_,B="bearing"in s?this._normalizeBearing(s.bearing,b):b,$="pitch"in s?+s.pitch:I,Z="padding"in s?s.padding:g.padding,oe=g.zoomScale(O-_),le=l.Point.convert(s.offset);let he=g.centerPoint.add(le);const ue=g.pointLocation(he),ge=l.LngLat.convert(s.center||ue);this._normalizeCenter(ge);const K=g.project(ue),se=g.project(ge).sub(K);let xe=s.curve;const be=Math.max(g.width,g.height),Re=be/oe,ze=se.mag();if("minZoom"in s){const vt=l.clamp(Math.min(s.minZoom,_,O),g.minZoom,g.maxZoom),kt=be/g.zoomScale(vt-_);xe=Math.sqrt(kt/ze*2)}const Oe=xe*xe;function Ve(vt){const kt=(Re*Re-be*be+(vt?-1:1)*Oe*Oe*ze*ze)/(2*(vt?Re:be)*Oe*ze);return Math.log(Math.sqrt(kt*kt+1)-kt)}function Ue(vt){return(Math.exp(vt)-Math.exp(-vt))/2}function Ke(vt){return(Math.exp(vt)+Math.exp(-vt))/2}const Pt=Ve(0);let qe=function(vt){return Ke(Pt)/Ke(Pt+xe*vt)},ht=function(vt){return be*((Ke(Pt)*(Ue(kt=Pt+xe*vt)/Ke(kt))-Ue(Pt))/Oe)/ze;var kt},et=(Ve(1)-Pt)/xe;if(Math.abs(ze)<1e-6||!isFinite(et)){if(Math.abs(be-Re)<1e-6)return this.easeTo(s,d);const vt=Re<be?-1:1;et=Math.abs(Math.log(Re/be))/xe,ht=function(){return 0},qe=function(kt){return Math.exp(vt*xe*kt)}}s.duration="duration"in s?+s.duration:1e3*et/("screenSpeed"in s?+s.screenSpeed/xe:+s.speed),s.maxDuration&&s.duration>s.maxDuration&&(s.duration=0);const Et=b!==B,Xe=$!==I,dt=!g.isPaddingEqual(Z),zt=vt=>kt=>{const dn=kt*et,Rn=1/qe(dn);vt.zoom=kt===1?O:_+vt.scaleZoom(Rn),Et&&(vt.bearing=l.number(b,B,kt)),Xe&&(vt.pitch=l.number(I,$,kt)),dt&&(vt.interpolatePadding(P,Z,kt),he=vt.centerPoint.add(le));const en=kt===1?ge:vt.unproject(K.add(se.mult(ht(dn))).mult(Rn));return vt.setLocationAtPoint(vt.renderWorldCopies?en.wrap():en,he),vt._updateCameraOnTerrain(),s.preloadOnly||this._fireMoveEvents(d),vt};if(s.preloadOnly){const vt=this._emulate(zt,s.duration,g);return this._preloadTiles(vt),this}return this._zooming=!0,this._rotating=Et,this._pitching=Xe,this._padding=dt,this._prepareEase(d,!1),this._ease(zt(g),()=>this._afterEase(d),s),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(s,d){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const g=this._onEaseEnd;this._onEaseEnd=void 0,g.call(this,d)}if(!s){const g=this.handlers;g&&g.stop(!1)}return this}_ease(s,d,g){g.animate===!1||g.duration===0?(s(1),d()):(this._easeStart=l.exported.now(),this._easeOptions=g,this._onEaseFrame=s,this._onEaseEnd=d,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const s=Math.min((l.exported.now()-this._easeStart)/this._easeOptions.duration,1),d=this._onEaseFrame;d&&d(this._easeOptions.easing(s)),s<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(s,d){s=l.wrap(s,-180,180);const g=Math.abs(s-d);return Math.abs(s-360-d)<g&&(s-=360),Math.abs(s+360-d)<g&&(s+=360),s}_normalizeCenter(s){const d=this.transform;if(!d.renderWorldCopies||d.maxBounds)return;const g=s.lng-d.center.lng;s.lng+=g>180?-360:g<-180?360:0}_prefersReducedMotion(s){return this._respectPrefersReducedMotion&&l.exported.prefersReducedMotion&&!(s&&s.essential)}_emulate(s,d,g){const _=Math.ceil(15*d/1e3),b=[],I=s(g.clone());for(let P=0;P<=_;P++){const O=I(P/_);b.push(O.clone())}return b}}class Jt{constructor(s={}){this.options=s,l.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(s){const d=this.options&&this.options.compact;return this._map=s,this._container=k("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=k("button","mapboxgl-ctrl-attrib-button",this._container),k("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=k("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),d&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),d===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(s,d){const g=this._map._getUIString(`AttributionControl.${d}`);s.setAttribute("aria-label",g),s.removeAttribute("title"),s.firstElementChild&&s.firstElementChild.setAttribute("title",g)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let s=this._editLink;s||(s=this._editLink=this._container.querySelector(".mapbox-improve-map"));const d=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||l.config.ACCESS_TOKEN}];if(s){const g=d.reduce((_,b,I)=>(b.value&&(_+=`${b.key}=${b.value}${I<d.length-1?"&":""}`),_),"?");s.href=`${l.config.FEEDBACK_URL}/${g}#${kc(this._map,!0)}`,s.rel="noopener nofollow",this._setElementTitle(s,"MapFeedback")}}_updateData(s){!s||s.sourceDataType!=="metadata"&&s.sourceDataType!=="visibility"&&s.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let s=[];if(this._map.style.stylesheet){const _=this._map.style.stylesheet;this.styleOwner=_.owner,this.styleId=_.id}const d=this._map.style._sourceCaches;for(const _ in d){const b=d[_];if(b.used){const I=b.getSource();I.attribution&&s.indexOf(I.attribution)<0&&s.push(I.attribution)}}s.sort((_,b)=>_.length-b.length),s=s.filter((_,b)=>{for(let I=b+1;I<s.length;I++)if(s[I].indexOf(_)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?s=[...this.options.customAttribution,...s]:s.unshift(this.options.customAttribution));const g=s.join(" | ");g!==this._attribHTML&&(this._attribHTML=g,s.length?(this._innerContainer.innerHTML=g,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class ff{constructor(){l.bindAll(["_updateLogo","_updateCompact"],this)}onAdd(s){this._map=s,this._container=k("div","mapboxgl-ctrl");const d=k("a","mapboxgl-ctrl-logo");return d.target="_blank",d.rel="noopener nofollow",d.href="https://www.mapbox.com/",d.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),d.setAttribute("rel","noopener nofollow"),this._container.appendChild(d),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(s){s&&s.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const s=this._map.style._sourceCaches;if(Object.entries(s).length===0)return!0;for(const d in s){const g=s[d].getSource();if(g.hasOwnProperty("mapbox_logo")&&!g.mapbox_logo)return!1}return!0}_updateCompact(){const s=this._container.children;if(s.length){const d=s[0];this._map.getCanvasContainer().offsetWidth<250?d.classList.add("mapboxgl-compact"):d.classList.remove("mapboxgl-compact")}}}class pf{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(s){const d=++this._id;return this._queue.push({callback:s,id:d,cancelled:!1}),d}remove(s){const d=this._currentlyRunning,g=d?this._queue.concat(d):this._queue;for(const _ of g)if(_.id===s)return void(_.cancelled=!0)}run(s=0){const d=this._currentlyRunning=this._queue;this._queue=[];for(const g of d)if(!g.cancelled&&(g.callback(s),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function Dl(p,s,d){if(p=new l.LngLat(p.lng,p.lat),s){const g=new l.LngLat(p.lng-360,p.lat),_=new l.LngLat(p.lng+360,p.lat),b=360*Math.ceil(Math.abs(p.lng-d.center.lng)/360),I=d.locationPoint(p).distSqr(s),P=s.x<0||s.y<0||s.x>d.width||s.y>d.height;d.locationPoint(g).distSqr(s)<I&&(P||Math.abs(g.lng-d.center.lng)<b)?p=g:d.locationPoint(_).distSqr(s)<I&&(P||Math.abs(_.lng-d.center.lng)<b)&&(p=_)}for(;Math.abs(p.lng-d.center.lng)>180;){const g=d.locationPoint(p);if(g.x>=0&&g.y>=0&&g.x<=d.width&&g.y<=d.height)break;p.lng>d.center.lng?p.lng-=360:p.lng+=360}return p}const qs={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class Zt extends l.Evented{constructor(s,d){if(super(),(s instanceof l.window.HTMLElement||d)&&(s=l.extend({element:s},d)),l.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=s&&s.anchor||"center",this._color=s&&s.color||"#3FB1CE",this._scale=s&&s.scale||1,this._draggable=s&&s.draggable||!1,this._clickTolerance=s&&s.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=s&&s.rotation||0,this._rotationAlignment=s&&s.rotationAlignment||"auto",this._pitchAlignment=s&&s.pitchAlignment&&s.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=s&&s.occludedOpacity||.2,s&&s.element)this._element=s.element,this._offset=l.Point.convert(s&&s.offset||[0,0]);else{this._defaultMarker=!0,this._element=k("div");const _=41,b=27,I=N("svg",{display:"block",height:_*this._scale+"px",width:b*this._scale+"px",viewBox:`0 0 ${b} ${_}`},this._element),P=N("radialGradient",{id:"shadowGradient"},N("defs",{},I));N("stop",{offset:"10%","stop-opacity":.4},P),N("stop",{offset:"100%","stop-opacity":.05},P),N("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},I),N("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},I),N("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},I),N("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},I),this._offset=l.Point.convert(s&&s.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",_=>{_.preventDefault()}),this._element.addEventListener("mousedown",_=>{_.preventDefault()});const g=this._element.classList;for(const _ in qs)g.remove(`mapboxgl-marker-anchor-${_}`);g.add(`mapboxgl-marker-anchor-${this._anchor}`),this._popup=null}addTo(s){return s===this._map||(this.remove(),this._map=s,s.getCanvasContainer().appendChild(this._element),s.on("move",this._updateMoving),s.on("moveend",this._update),s.on("remove",this._clearFadeTimer),s._addMarker(this),this.setDraggable(this._draggable),this._update(),s.on("click",this._onMapClick)),this}remove(){const s=this._map;return s&&(s.off("click",this._onMapClick),s.off("move",this._updateMoving),s.off("moveend",this._update),s.off("mousedown",this._addDragHandler),s.off("touchstart",this._addDragHandler),s.off("mouseup",this._onUp),s.off("touchend",this._onUp),s.off("mousemove",this._onMove),s.off("touchmove",this._onMove),s.off("remove",this._clearFadeTimer),s._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(s){return this._lngLat=l.LngLat.convert(s),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(s){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),s){if(!("offset"in s.options)){const _=Math.sqrt(Math.pow(13.5,2)/2);s.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[_,-1*(38.1-13.5+_)],"bottom-right":[-_,-1*(38.1-13.5+_)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=s,s._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(s){const d=s.code,g=s.charCode||s.keyCode;d!=="Space"&&d!=="Enter"&&g!==32&&g!==13||this.togglePopup()}_onMapClick(s){const d=s.originalEvent.target,g=this._element;this._popup&&(d===g||g.contains(d))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const s=this._popup;return s?(s.isOpen()?(s.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(s.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const s=this._map,d=this._pos;if(!s||!d)return!1;const g=s.unproject(d),_=s.getFreeCameraOptions();if(!_.position)return!1;const b=_.position.toLngLat();return b.distanceTo(g)<.9*b.distanceTo(this._lngLat)}_evaluateOpacity(){const s=this._map;if(!s)return;const d=this._pos;if(!d||d.x<0||d.x>s.transform.width||d.y<0||d.y>s.transform.height)return void this._clearFadeTimer();const g=s.unproject(d);let _;s._showingGlobe()&&l.isLngLatBehindGlobe(s.transform,this._lngLat)?_=0:(_=1-s._queryFogOpacity(g),s.transform._terrainEnabled()&&s.getTerrain()&&this._behindTerrain()&&(_*=this._occludedOpacity)),this._element.style.opacity=`${_}`,this._element.style.pointerEvents=_>0?"auto":"none",this._popup&&this._popup._setOpacity(_),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const s=this._pos;if(!s||!this._map)return;const d=this._offset.mult(this._scale);this._element.style.transform=`
            translate(${s.x}px,${s.y}px)
            ${qs[this._anchor]}
            ${this._calculateXYTransform()} ${this._calculateZTransform()}
            translate(${d.x}px,${d.y}px)
        `}_calculateXYTransform(){const s=this._pos,d=this._map,g=this.getPitchAlignment();if(!d||!s||g!=="map")return"";if(!d._showingGlobe()){const O=d.getPitch();return O?`rotateX(${O}deg)`:""}const _=l.radToDeg(l.globeTiltAtLngLat(d.transform,this._lngLat)),b=s.sub(l.globeCenterToScreenPoint(d.transform)),I=Math.abs(b.x)+Math.abs(b.y);if(I===0)return"";const P=_/I;return`rotateX(${-b.y*P}deg) rotateY(${b.x*P}deg)`}_calculateZTransform(){const s=this._pos,d=this._map;if(!d||!s)return"";let g=0;const _=this.getRotationAlignment();if(_==="map")if(d._showingGlobe()){const b=d.project(new l.LngLat(this._lngLat.lng,this._lngLat.lat+.001)),I=d.project(new l.LngLat(this._lngLat.lng,this._lngLat.lat-.001)).sub(b);g=l.radToDeg(Math.atan2(I.y,I.x))-90}else g=-d.getBearing();else if(_==="horizon"){const b=l.smoothstep(4,6,d.getZoom()),I=l.globeCenterToScreenPoint(d.transform);I.y+=b*d.transform.height;const P=s.sub(I),O=l.radToDeg(Math.atan2(P.y,P.x));g=(O>90?O-270:O+90)*(1-b)}return g+=this._rotation,g?`rotateZ(${g}deg)`:""}_update(s){l.window.cancelAnimationFrame(this._updateFrameId);const d=this._map;d&&(d.transform.renderWorldCopies&&(this._lngLat=Dl(this._lngLat,this._pos,d.transform)),this._pos=d.project(this._lngLat),s===!0?this._updateFrameId=l.window.requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),d._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(d._showingGlobe()||d.getTerrain()||d.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(s){return this._offset=l.Point.convert(s),this._update(),this}_onMove(s){const d=this._map;if(!d)return;const g=this._pointerdownPos,_=this._positionDelta;if(g&&_){if(!this._isDragging){const b=this._clickTolerance||d._clickTolerance;if(s.point.dist(g)<b)return;this._isDragging=!0}this._pos=s.point.sub(_),this._lngLat=d.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new l.Event("dragstart"))),this.fire(new l.Event("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const s=this._map;s&&(s.off("mousemove",this._onMove),s.off("touchmove",this._onMove)),this._state==="active"&&this.fire(new l.Event("dragend")),this._state="inactive"}_addDragHandler(s){const d=this._map,g=this._pos;d&&g&&this._element.contains(s.originalEvent.target)&&(s.preventDefault(),this._positionDelta=s.point.sub(g),this._pointerdownPos=s.point,this._state="pending",d.on("mousemove",this._onMove),d.on("touchmove",this._onMove),d.once("mouseup",this._onUp),d.once("touchend",this._onUp))}setDraggable(s){this._draggable=!!s;const d=this._map;return d&&(s?(d.on("mousedown",this._addDragHandler),d.on("touchstart",this._addDragHandler)):(d.off("mousedown",this._addDragHandler),d.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(s){return this._rotation=s||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(s){return this._rotationAlignment=s||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment==="auto"||this._rotationAlignment==="horizon"&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(s){return this._pitchAlignment=s||"auto",this._update(),this}getPitchAlignment(){return this._pitchAlignment==="auto"?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(s){return this._occludedOpacity=s||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const mf={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},c_=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function ug(p=new l.Point(0,0),s="bottom"){if(typeof p=="number"){const d=Math.round(Math.sqrt(.5*Math.pow(p,2)));switch(s){case"top":return new l.Point(0,p);case"top-left":return new l.Point(d,d);case"top-right":return new l.Point(-d,d);case"bottom":return new l.Point(0,-p);case"bottom-left":return new l.Point(d,-d);case"bottom-right":return new l.Point(-d,-d);case"left":return new l.Point(p,0);case"right":return new l.Point(-p,0)}return new l.Point(0,0)}return p instanceof l.Point||Array.isArray(p)?l.Point.convert(p):l.Point.convert(p[s]||[0,0])}class gf{constructor(s){this.jumpTo(s)}getValue(s){if(s<=this._startTime)return this._start;if(s>=this._endTime)return this._end;const d=l.easeCubicInOut((s-this._startTime)/(this._endTime-this._startTime));return this._start*(1-d)+this._end*d}isEasing(s){return s>=this._startTime&&s<=this._endTime}jumpTo(s){this._startTime=-1/0,this._endTime=-1/0,this._start=s,this._end=s}easeTo(s,d,g){this._start=this.getValue(d),this._end=s,this._startTime=d,this._endTime=d+g}}const dg={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use ⌘ + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},hg={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,respectPrefersReducedMotion:!0,crossSourceCollisions:!0},u_={showCompass:!0,showZoom:!0,visualizePitch:!1};class d_{constructor(s,d,g=!1){this._clickTolerance=10,this.element=d,this.mouseRotate=new lf({clickTolerance:s.dragRotate._mouseRotate._clickTolerance}),this.map=s,g&&(this.mousePitch=new cf({clickTolerance:s.dragRotate._mousePitch._clickTolerance})),l.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),d.addEventListener("mousedown",this.mousedown),d.addEventListener("touchstart",this.touchstart,{passive:!1}),d.addEventListener("touchmove",this.touchmove),d.addEventListener("touchend",this.touchend),d.addEventListener("touchcancel",this.reset)}down(s,d){this.mouseRotate.mousedown(s,d),this.mousePitch&&this.mousePitch.mousedown(s,d),F()}move(s,d){const g=this.map,_=this.mouseRotate.mousemoveWindow(s,d),b=_&&_.bearingDelta;if(b&&g.setBearing(g.getBearing()+b),this.mousePitch){const I=this.mousePitch.mousemoveWindow(s,d),P=I&&I.pitchDelta;P&&g.setPitch(g.getPitch()+P)}}off(){const s=this.element;s.removeEventListener("mousedown",this.mousedown),s.removeEventListener("touchstart",this.touchstart,{passive:!1}),s.removeEventListener("touchmove",this.touchmove),s.removeEventListener("touchend",this.touchend),s.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){j(),l.window.removeEventListener("mousemove",this.mousemove),l.window.removeEventListener("mouseup",this.mouseup)}mousedown(s){this.down(l.extend({},s,{ctrlKey:!0,preventDefault:()=>s.preventDefault()}),te(this.element,s)),l.window.addEventListener("mousemove",this.mousemove),l.window.addEventListener("mouseup",this.mouseup)}mousemove(s){this.move(s,te(this.element,s))}mouseup(s){this.mouseRotate.mouseupWindow(s),this.mousePitch&&this.mousePitch.mouseupWindow(s),this.offTemp()}touchstart(s){s.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=re(this.element,s.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>s.preventDefault()},this._startPos))}touchmove(s){s.targetTouches.length!==1?this.reset():(this._lastPos=re(this.element,s.targetTouches)[0],this.move({preventDefault:()=>s.preventDefault()},this._lastPos))}touchend(s){s.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const vf={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},yf={maxWidth:100,unit:"metric"},_f={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"},$l={version:l.version,supported:C,setRTLTextPlugin:l.setRTLTextPlugin,getRTLTextPluginStatus:l.getRTLTextPluginStatus,Map:class extends rd{constructor(p){if(l.LivePerformanceUtils.mark(l.PerformanceMarkers.create),(p=l.extend({},hg,p)).minZoom!=null&&p.maxZoom!=null&&p.minZoom>p.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(p.minPitch!=null&&p.maxPitch!=null&&p.minPitch>p.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(p.minPitch!=null&&p.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(p.maxPitch!=null&&p.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(p.antialias&&l.isSafariWithAntialiasingBug(l.window)&&(p.antialias=!1,l.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new Ol(p.minZoom,p.maxZoom,p.minPitch,p.maxPitch,p.renderWorldCopies),p),this._interactive=p.interactive,this._minTileCacheSize=p.minTileCacheSize,this._maxTileCacheSize=p.maxTileCacheSize,this._failIfMajorPerformanceCaveat=p.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=p.preserveDrawingBuffer,this._antialias=p.antialias,this._useWebGL2=p.useWebGL2,this._trackResize=p.trackResize,this._bearingSnap=p.bearingSnap,this._refreshExpiredTiles=p.refreshExpiredTiles,this._fadeDuration=p.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=p.crossSourceCollisions,this._collectResourceTiming=p.collectResourceTiming,this._optimizeForTerrain=p.optimizeForTerrain,this._language=this._parseLanguage(p.language),this._worldview=p.worldview,this._renderTaskQueue=new pf,this._domRenderTaskQueue=new pf,this._controls=[],this._markers=[],this._popups=[],this._mapId=l.uniqueId(),this._locale=l.extend({},dg,p.locale),this._clickTolerance=p.clickTolerance,this._cooperativeGestures=p.cooperativeGestures,this._performanceMetricsCollection=p.performanceMetricsCollection,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new gf(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._requestManager=new l.RequestManager(p.transformRequest,p.accessToken,p.testMode),this._silenceAuthErrors=!!p.testMode,typeof p.container=="string"){if(this._container=l.window.document.getElementById(p.container),!this._container)throw new Error(`Container '${p.container}' not found.`)}else{if(!(p.container instanceof l.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=p.container}if(this._container.childNodes.length>0&&l.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),p.maxBounds&&this.setMaxBounds(p.maxBounds),l.bindAll(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),l.window!==void 0&&(l.window.addEventListener("online",this._onWindowOnline,!1),l.window.addEventListener("resize",this._onWindowResize,!1),l.window.addEventListener("orientationchange",this._onWindowResize,!1),l.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1),l.window.addEventListener("visibilitychange",this._onVisibilityChange,!1)),this.handlers=new ba(this,p),this._localFontFamily=p.localFontFamily,this._localIdeographFontFamily=p.localIdeographFontFamily,p.style&&this.setStyle(p.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),p.projection&&this.setProjection(p.projection),this._hash=p.hash&&new rf(typeof p.hash=="string"&&p.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:p.center,zoom:p.zoom,bearing:p.bearing,pitch:p.pitch}),p.bounds&&(this.resize(),this.fitBounds(p.bounds,l.extend({},p.fitBoundsOptions,{duration:0})))),this.resize(),p.attributionControl&&this.addControl(new Jt({customAttribution:p.customAttribution})),this._logoControl=new ff,this.addControl(this._logoControl,p.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",s=>{this._update(s.dataType==="style"),this.fire(new l.Event(`${s.dataType}data`,s))}),this.on("dataloading",s=>{this.fire(new l.Event(`${s.dataType}dataloading`,s))})}_getMapId(){return this._mapId}addControl(p,s){if(s===void 0&&(s=p.getDefaultPosition?p.getDefaultPosition():"top-right"),!p||!p.onAdd)return this.fire(new l.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const d=p.onAdd(this);this._controls.push(p);const g=this._controlPositions[s];return s.indexOf("bottom")!==-1?g.insertBefore(d,g.firstChild):g.appendChild(d),this}removeControl(p){if(!p||!p.onRemove)return this.fire(new l.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const s=this._controls.indexOf(p);return s>-1&&this._controls.splice(s,1),p.onRemove(this),this}hasControl(p){return this._controls.indexOf(p)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(p){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const s=!this._moving;return s&&this.fire(new l.Event("movestart",p)).fire(new l.Event("move",p)),this.fire(new l.Event("resize",p)),s&&this.fire(new l.Event("moveend",p)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(p){return this.transform.setMaxBounds(l.LngLatBounds.convert(p)),this._update()}setMinZoom(p){if((p=p??-2)>=-2&&p<=this.transform.maxZoom)return this.transform.minZoom=p,this._update(),this.getZoom()<p?this.setZoom(p):this.fire(new l.Event("zoomstart")).fire(new l.Event("zoom")).fire(new l.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(p){if((p=p??22)>=this.transform.minZoom)return this.transform.maxZoom=p,this._update(),this.getZoom()>p?this.setZoom(p):this.fire(new l.Event("zoomstart")).fire(new l.Event("zoom")).fire(new l.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(p){if((p=p??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(p>=0&&p<=this.transform.maxPitch)return this.transform.minPitch=p,this._update(),this.getPitch()<p?this.setPitch(p):this.fire(new l.Event("pitchstart")).fire(new l.Event("pitch")).fire(new l.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(p){if((p=p??85)>85)throw new Error("maxPitch must be less than or equal to 85");if(p>=this.transform.minPitch)return this.transform.maxPitch=p,this._update(),this.getPitch()>p?this.setPitch(p):this.fire(new l.Event("pitchstart")).fire(new l.Event("pitch")).fire(new l.Event("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(p){return this.transform.renderWorldCopies=p,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(p){return p==="auto"?l.window.navigator.language:Array.isArray(p)?p.length===0?void 0:p.map(s=>s==="auto"?l.window.navigator.language:s):p}setLanguage(p){const s=this._parseLanguage(p);if(!this.style||s===this._language)return this;this._language=s,this.style._reloadSources();for(const d of this._controls)d._setLanguage&&d._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(p){return this.style&&p!==this._worldview?(this._worldview=p,this.style._reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return this.transform.projection.name==="globe"}setProjection(p){return this._lazyInitEmptyStyle(),p?typeof p=="string"&&(p={name:p}):p=null,this._useExplicitProjection=!!p,this._prioritizeAndUpdateProjection(p,this.style.stylesheet?this.style.stylesheet.projection:null)}_updateProjectionTransition(){if(this.getProjection().name!=="globe")return;const p=this.transform,s=p.projection.name;let d;s==="globe"&&p.zoom>=l.GLOBE_ZOOM_THRESHOLD_MAX?(p.setMercatorFromTransition(),d=!0):s==="mercator"&&p.zoom<l.GLOBE_ZOOM_THRESHOLD_MAX&&(p.setProjection({name:"globe"}),d=!0),d&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(p,s){return this._updateProjection(p||s||{name:"mercator"})}_updateProjection(p){let s;if(s=p.name==="globe"&&this.transform.zoom>=l.GLOBE_ZOOM_THRESHOLD_MAX?this.transform.setMercatorFromTransition():this.transform.setProjection(p),this.style.applyProjectionUpdate(),s){this.painter.clearBackgroundTiles();for(const d in this.style._sourceCaches)this.style._sourceCaches[d].clearTiles();this._update(!0),this._forceMarkerAndPopupUpdate(!0)}return this}project(p){return this.transform.locationPoint3D(l.LngLat.convert(p))}unproject(p){return this.transform.pointLocation3D(l.Point.convert(p))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(p,s,d){if(p==="mouseenter"||p==="mouseover"){let g=!1;const _=I=>{const P=s.filter(B=>this.getLayer(B)),O=P.length?this.queryRenderedFeatures(I.point,{layers:P}):[];O.length?g||(g=!0,d.call(this,new Ci(p,this,I.originalEvent,{features:O}))):g=!1},b=()=>{g=!1};return{layers:new Set(s),listener:d,delegates:{mousemove:_,mouseout:b}}}if(p==="mouseleave"||p==="mouseout"){let g=!1;const _=I=>{const P=s.filter(O=>this.getLayer(O));(P.length?this.queryRenderedFeatures(I.point,{layers:P}):[]).length?g=!0:g&&(g=!1,d.call(this,new Ci(p,this,I.originalEvent)))},b=I=>{g&&(g=!1,d.call(this,new Ci(p,this,I.originalEvent)))};return{layers:new Set(s),listener:d,delegates:{mousemove:_,mouseout:b}}}{const g=_=>{const b=s.filter(P=>this.getLayer(P)),I=b.length?this.queryRenderedFeatures(_.point,{layers:b}):[];I.length&&(_.features=I,d.call(this,_),delete _.features)};return{layers:new Set(s),listener:d,delegates:{[p]:g}}}}on(p,s,d){if(d===void 0)return super.on(p,s);Array.isArray(s)||(s=[s]);const g=this._createDelegatedListener(p,s,d);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[p]=this._delegatedListeners[p]||[],this._delegatedListeners[p].push(g);for(const _ in g.delegates)this.on(_,g.delegates[_]);return this}once(p,s,d){if(d===void 0)return super.once(p,s);Array.isArray(s)||(s=[s]);const g=this._createDelegatedListener(p,s,d);for(const _ in g.delegates)this.once(_,g.delegates[_]);return this}off(p,s,d){if(d===void 0)return super.off(p,s);s=new Set(Array.isArray(s)?s:[s]);const g=(b,I)=>{if(b.size!==I.size)return!1;for(const P of b)if(!I.has(P))return!1;return!0},_=this._delegatedListeners?this._delegatedListeners[p]:void 0;return _&&(b=>{for(let I=0;I<b.length;I++){const P=b[I];if(P.listener===d&&g(P.layers,s)){for(const O in P.delegates)this.off(O,P.delegates[O]);return b.splice(I,1),this}}})(_),this}queryRenderedFeatures(p,s){return this.style?(s!==void 0||p===void 0||p instanceof l.Point||Array.isArray(p)||(s=p,p=void 0),this.style.queryRenderedFeatures(p=p||[[0,0],[this.transform.width,this.transform.height]],s=s||{},this.transform)):[]}querySourceFeatures(p,s){return this.style.querySourceFeatures(p,s)}isPointOnSurface(p){const{name:s}=this.transform.projection;return s!=="globe"&&s!=="mercator"&&l.warnOnce(`${s} projection does not support isPointOnSurface, this API may behave unexpectedly.`),this.transform.isPointOnSurface(l.Point.convert(p))}setStyle(p,s){return(s=l.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},s)).diff!==!1&&s.localIdeographFontFamily===this._localIdeographFontFamily&&s.localFontFamily===this._localFontFamily&&this.style&&p?(this._diffStyle(p,s),this):(this._localIdeographFontFamily=s.localIdeographFontFamily,this._localFontFamily=s.localFontFamily,this._updateStyle(p,s))}_getUIString(p){const s=this._locale[p];if(s==null)throw new Error(`Missing UI string '${p}'`);return s}_updateStyle(p,s){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),p&&(this.style=new _a(this,s||{}),this.style.setEventedParent(this,{style:this.style}),typeof p=="string"?this.style.loadURL(p):this.style.loadJSON(p)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new _a(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(p,s){if(typeof p=="string"){const d=this._requestManager.normalizeStyleURL(p),g=this._requestManager.transformRequest(d,l.ResourceType.Style);l.getJSON(g,(_,b)=>{_?this.fire(new l.ErrorEvent(_)):b&&this._updateDiff(b,s)})}else typeof p=="object"&&this._updateDiff(p,s)}_updateDiff(p,s){try{this.style.setState(p)&&this._update(!0)}catch(d){l.warnOnce(`Unable to perform style diff: ${d.message||d.error||d}.  Rebuilding the style from scratch.`),this._updateStyle(p,s)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(l.warnOnce("There is no style added to the map."),!1)}addSource(p,s){return this._lazyInitEmptyStyle(),this.style.addSource(p,s),this._update(!0)}isSourceLoaded(p){return!!this.style&&this.style._isSourceCacheLoaded(p)}areTilesLoaded(){const p=this.style&&this.style._sourceCaches;for(const s in p){const d=p[s]._tiles;for(const g in d){const _=d[g];if(_.state!=="loaded"&&_.state!=="errored")return!1}}return!0}addSourceType(p,s,d){this._lazyInitEmptyStyle(),this.style.addSourceType(p,s,d)}removeSource(p){return this.style.removeSource(p),this._updateTerrain(),this._update(!0)}getSource(p){return this.style.getSource(p)}addImage(p,s,{pixelRatio:d=1,sdf:g=!1,stretchX:_,stretchY:b,content:I}={}){if(this._lazyInitEmptyStyle(),s instanceof l.window.HTMLImageElement||l.window.ImageBitmap&&s instanceof l.window.ImageBitmap){const{width:P,height:O,data:B}=l.exported.getImageData(s);this.style.addImage(p,{data:new l.RGBAImage({width:P,height:O},B),pixelRatio:d,stretchX:_,stretchY:b,content:I,sdf:g,version:0})}else if(s.width===void 0||s.height===void 0)this.fire(new l.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:P,height:O}=s,B=s;this.style.addImage(p,{data:new l.RGBAImage({width:P,height:O},new Uint8Array(B.data)),pixelRatio:d,stretchX:_,stretchY:b,content:I,sdf:g,version:0,userImage:B}),B.onAdd&&B.onAdd(this,p)}}updateImage(p,s){const d=this.style.getImage(p);if(!d)return void this.fire(new l.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const g=s instanceof l.window.HTMLImageElement||l.window.ImageBitmap&&s instanceof l.window.ImageBitmap?l.exported.getImageData(s):s,{width:_,height:b}=g;_!==void 0&&b!==void 0?_===d.data.width&&b===d.data.height?(d.data.replace(g.data,!(s instanceof l.window.HTMLImageElement||l.window.ImageBitmap&&s instanceof l.window.ImageBitmap)),this.style.updateImage(p,d)):this.fire(new l.ErrorEvent(new Error(`The width and height of the updated image (${_}, ${b})
                must be that same as the previous version of the image
                (${d.data.width}, ${d.data.height})`))):this.fire(new l.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}hasImage(p){return p?!!this.style.getImage(p):(this.fire(new l.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(p){this.style.removeImage(p)}loadImage(p,s){l.getImage(this._requestManager.transformRequest(p,l.ResourceType.Image),(d,g)=>{s(d,g instanceof l.window.HTMLImageElement?l.exported.getImageData(g):g)})}listImages(){return this.style.listImages()}addLayer(p,s){return this._lazyInitEmptyStyle(),this.style.addLayer(p,s),this._update(!0)}moveLayer(p,s){return this.style.moveLayer(p,s),this._update(!0)}removeLayer(p){return this.style.removeLayer(p),this._update(!0)}getLayer(p){return this.style.getLayer(p)}setLayerZoomRange(p,s,d){return this.style.setLayerZoomRange(p,s,d),this._update(!0)}setFilter(p,s,d={}){return this.style.setFilter(p,s,d),this._update(!0)}getFilter(p){return this.style.getFilter(p)}setPaintProperty(p,s,d,g={}){return this.style.setPaintProperty(p,s,d,g),this._update(!0)}getPaintProperty(p,s){return this.style.getPaintProperty(p,s)}setLayoutProperty(p,s,d,g={}){return this.style.setLayoutProperty(p,s,d,g),this._update(!0)}getLayoutProperty(p,s){return this.style.getLayoutProperty(p,s)}setLight(p,s={}){return this._lazyInitEmptyStyle(),this.style.setLight(p,s),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(p){return this._lazyInitEmptyStyle(),!p&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(p),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(p){return this._lazyInitEmptyStyle(),this.style.setFog(p),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(p){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(l.LngLat.convert(p),this.transform):0}setFeatureState(p,s){return this.style.setFeatureState(p,s),this._update()}removeFeatureState(p,s){return this.style.removeFeatureState(p,s),this._update()}getFeatureState(p){return this.style.getFeatureState(p)}_updateContainerDimensions(){if(!this._container)return;const p=this._container.getBoundingClientRect().width||400,s=this._container.getBoundingClientRect().height||300;let d,g,_,b=this._container;for(;b&&(!g||!_);){const I=l.window.getComputedStyle(b).transform;I&&I!=="none"&&(d=I.match(/matrix.*\((.+)\)/)[1].split(", "),d[0]&&d[0]!=="0"&&d[0]!=="1"&&(g=d[0]),d[3]&&d[3]!=="0"&&d[3]!=="1"&&(_=d[3])),b=b.parentElement}this._containerWidth=g?Math.abs(p/g):p,this._containerHeight=_?Math.abs(s/_):s}_detectMissingCSS(){l.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&l.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const p=this._container;p.classList.add("mapboxgl-map"),(this._missingCSSCanary=k("div","mapboxgl-canary",p)).style.visibility="hidden",this._detectMissingCSS();const s=this._canvasContainer=k("div","mapboxgl-canvas-container",p);this._interactive&&s.classList.add("mapboxgl-interactive"),this._canvas=k("canvas","mapboxgl-canvas",s),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const d=this._controlContainer=k("div","mapboxgl-control-container",p),g=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(_=>{g[_]=k("div",`mapboxgl-ctrl-${_}`,d)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(p,s){const d=l.exported.devicePixelRatio||1;this._canvas.width=d*Math.ceil(p),this._canvas.height=d*Math.ceil(s),this._canvas.style.width=`${p}px`,this._canvas.style.height=`${s}px`}_addMarker(p){this._markers.push(p)}_removeMarker(p){const s=this._markers.indexOf(p);s!==-1&&this._markers.splice(s,1)}_addPopup(p){this._popups.push(p)}_removePopup(p){const s=this._popups.indexOf(p);s!==-1&&this._popups.splice(s,1)}_setupPainter(){const p=l.extend({},C.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),s=this._useWebGL2&&this._canvas.getContext("webgl2",p),d=s||this._canvas.getContext("webgl",p)||this._canvas.getContext("experimental-webgl",p);d?(this._useWebGL2&&!s&&l.warnOnce("Failed to create WebGL 2 context. Using WebGL 1."),l.storeAuthState(d,!0),this.painter=new Al(d,this.transform,!!s),this.on("data",g=>{g.dataType==="source"&&this.painter.setTileLoadedFlag(!0)}),l.exported$1.testSupport(d)):this.fire(new l.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(p){p.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new l.Event("webglcontextlost",{originalEvent:p}))}_contextRestored(p){this._setupPainter(),this.resize(),this._update(),this.fire(new l.Event("webglcontextrestored",{originalEvent:p}))}_onMapScroll(p){if(p.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(p){return this.style?(this._styleDirty=this._styleDirty||p,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(p){return this._update(),this._renderTaskQueue.add(p)}_cancelRenderFrame(p){this._renderTaskQueue.remove(p)}_requestDomTask(p){!this.loaded()||this.loaded()&&!this.isMoving()?p():this._domRenderTaskQueue.add(p)}_render(p){let s;const d=this.painter.context.extTimerQuery,g=l.exported.now();if(this.listens("gpu-timing-frame")&&(s=d.createQueryEXT(),d.beginQueryEXT(d.TIME_ELAPSED_EXT,s)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],l.window.performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],l.window.performance.now())),this._renderTaskQueue.run(p),this._domRenderTaskQueue.run(p),this._removed)return;this._updateProjectionTransition();const _=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const P=this.transform.zoom,O=this.transform.pitch,B=l.exported.now(),$=new l.EvaluationParameters(P,{now:B,fadeDuration:_,pitch:O,transition:this.style.getTransition()});this.style.update($)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let b=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),b=this._updateAverageElevation(g),this.style._updateSources(this.transform),this._forceMarkerAndPopupUpdate()):b=this._updateAverageElevation(g),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,_,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:_,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new l.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new l.Event("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),s){const P=l.exported.now()-g;d.endQueryEXT(d.TIME_ELAPSED_EXT,s),setTimeout(()=>{const O=d.getQueryObjectEXT(s,d.QUERY_RESULT_EXT)/1e6;d.deleteQueryEXT(s),this.fire(new l.Event("gpu-timing-frame",{cpuTime:P,gpuTime:O})),l.window.performance.mark("frame-gpu",{startTime:g,detail:{gpuTime:O}})},50)}if(this.listens("gpu-timing-layer")){const P=this.painter.collectGpuTimers();setTimeout(()=>{const O=this.painter.queryGpuTimers(P);this.fire(new l.Event("gpu-timing-layer",{layerTimes:O}))},50)}if(this.listens("gpu-timing-deferred-render")){const P=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const O=this.painter.queryGpuTimeDeferredRender(P);this.fire(new l.Event("gpu-timing-deferred-render",{gpuTime:O}))},50)}const I=this._sourcesDirty||this._styleDirty||this._placementDirty||b;if(I||this._repaint)this.triggerRepaint();else{const P=!this.isMoving()&&this.loaded();if(P&&(b=this._updateAverageElevation(g,!0)),b)this.triggerRepaint();else if(this._triggerFrame(!1),P&&(this.fire(new l.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const O=this._calculateSpeedIndex();this.fire(new l.Event("speedindexcompleted",{speedIndex:O})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||I||(this._fullyLoaded=!0,l.LivePerformanceUtils.mark(l.PerformanceMarkers.fullLoad),this._performanceMetricsCollection&&l.postPerformanceEvent(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(p){for(const s of this._markers)p&&!this.getRenderWorldCopies()&&(s._lngLat=s._lngLat.wrap()),s._update();for(const s of this._popups)!p||this.getRenderWorldCopies()||s._trackPointer||(s._lngLat=s._lngLat.wrap()),s._update()}_updateAverageElevation(p,s=!1){const d=g=>(this.transform.averageElevation=g,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return this.transform.averageElevation!==0&&d(0);if((s||p-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(p)){const g=this.transform.averageElevation;let _=this.transform.sampleAverageElevation(),b=!1;this.transform.elevation&&(b=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(_)?_=0:this._averageElevationLastSampledAt=p;const I=Math.abs(g-_);if(I>1){if(this._isInitialLoad||b)return this._averageElevation.jumpTo(_),d(_);this._averageElevation.easeTo(_,p,300)}else if(I>1e-4)return this._averageElevation.jumpTo(_),d(_)}return!!this._averageElevation.isEasing(p)&&d(this._averageElevation.getValue(p))}_authenticate(){l.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,p=>{if(p&&(p.message===l.AUTH_ERR_MSG||p.status===401)){const s=this.painter.context.gl;l.storeAuthState(s,!1),this._logoControl instanceof ff&&this._logoControl._updateLogo(),s&&s.clear(s.DEPTH_BUFFER_BIT|s.COLOR_BUFFER_BIT|s.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new l.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),l.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_updateTerrain(){const p=this._isDragging();this.painter.updateTerrain(this.style,p)}_calculateSpeedIndex(){const p=this.painter.canvasCopy(),s=this.painter.getCanvasCopiesAndTimestamps();s.timeStamps.push(performance.now());const d=this.painter.context.gl,g=d.createFramebuffer();function _(b){d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,b,0);const I=new Uint8Array(d.drawingBufferWidth*d.drawingBufferHeight*4);return d.readPixels(0,0,d.drawingBufferWidth,d.drawingBufferHeight,d.RGBA,d.UNSIGNED_BYTE,I),I}return d.bindFramebuffer(d.FRAMEBUFFER,g),this._canvasPixelComparison(_(p),s.canvasCopies.map(_),s.timeStamps)}_canvasPixelComparison(p,s,d){let g=d[1]-d[0];const _=p.length/4;for(let b=0;b<s.length;b++){const I=s[b];let P=0;for(let O=0;O<I.length;O+=4)I[O]===p[O]&&I[O+1]===p[O+1]&&I[O+2]===p[O+2]&&I[O+3]===p[O+3]&&(P+=1);g+=(d[b+2]-d[b+1])*(1-P/_)}return g}remove(){this._hash&&this._hash.remove();for(const s of this._controls)s.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),l.window!==void 0&&(l.window.removeEventListener("resize",this._onWindowResize,!1),l.window.removeEventListener("orientationchange",this._onWindowResize,!1),l.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),l.window.removeEventListener("online",this._onWindowOnline,!1),l.window.removeEventListener("visibilitychange",this._onVisibilityChange,!1));const p=this.painter.context.gl.getExtension("WEBGL_lose_context");p&&p.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),l.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new l.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(p){this._renderNextFrame=this._renderNextFrame||p,this.style&&!this._frame&&(this._frame=l.exported.frame(s=>{const d=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,d&&this._render(s)}))}_preloadTiles(p){const s=this.style?Object.values(this.style._sourceCaches):[];return l.asyncAll(s,(d,g)=>d._preloadTiles(p,g),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(p){this._trackResize&&this.resize({originalEvent:p})._update()}_onVisibilityChange(){l.window.document.visibilityState==="hidden"&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(p){this._showTileBoundaries!==p&&(this._showTileBoundaries=p,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(p){this._showTerrainWireframe!==p&&(this._showTerrainWireframe=p,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(p){this._speedIndexTiming!==p&&(this._speedIndexTiming=p,this._update())}get showPadding(){return!!this._showPadding}set showPadding(p){this._showPadding!==p&&(this._showPadding=p,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(p){this._showCollisionBoxes!==p&&(this._showCollisionBoxes=p,p?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(p){this._showOverdrawInspector!==p&&(this._showOverdrawInspector=p,this._update())}get repaint(){return!!this._repaint}set repaint(p){this._repaint!==p&&(this._repaint=p,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(p){this._vertices=p,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(p){this._showTileAABBs!==p&&(this._showTileAABBs=p,p&&this._update())}_setCacheLimits(p,s){l.setCacheLimits(p,s)}get version(){return l.version}},NavigationControl:class{constructor(p){this.options=l.extend({},u_,p),this._container=k("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",s=>s.preventDefault()),this.options.showZoom&&(l.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",s=>{this._map&&this._map.zoomIn({},{originalEvent:s})}),k("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",s=>{this._map&&this._map.zoomOut({},{originalEvent:s})}),k("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(l.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",s=>{const d=this._map;d&&(this.options.visualizePitch?d.resetNorthPitch({},{originalEvent:s}):d.resetNorth({},{originalEvent:s}))}),this._compassIcon=k("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const p=this._map;if(!p)return;const s=p.getZoom(),d=s===p.getMaxZoom(),g=s===p.getMinZoom();this._zoomInButton.disabled=d,this._zoomOutButton.disabled=g,this._zoomInButton.setAttribute("aria-disabled",d.toString()),this._zoomOutButton.setAttribute("aria-disabled",g.toString())}_rotateCompassArrow(){const p=this._map;if(!p)return;const s=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(p.transform.pitch*(Math.PI/180)),.5)}) rotateX(${p.transform.pitch}deg) rotateZ(${p.transform.angle*(180/Math.PI)}deg)`:`rotate(${p.transform.angle*(180/Math.PI)}deg)`;p._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=s)})}onAdd(p){return this._map=p,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),p.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&p.on("pitch",this._rotateCompassArrow),p.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new d_(p,this._compass,this.options.visualizePitch)),this._container}onRemove(){const p=this._map;p&&(this._container.remove(),this.options.showZoom&&p.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&p.off("pitch",this._rotateCompassArrow),p.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(p,s){const d=k("button",p,this._container);return d.type="button",d.addEventListener("click",s),d}_setButtonTitle(p,s){if(!this._map)return;const d=this._map._getUIString(`NavigationControl.${s}`);p.setAttribute("aria-label",d),p.firstElementChild&&p.firstElementChild.setAttribute("title",d)}},GeolocateControl:class extends l.Evented{constructor(p){super(),this.options=l.extend({geolocation:l.window.navigator.geolocation},vf,p),l.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=zl(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(p){return this._map=p,this._container=k("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(p){const s=(d=!!this.options.geolocation)=>{this._supportsGeolocation=d,p(d)};this._supportsGeolocation!==void 0?p(this._supportsGeolocation):l.window.navigator.permissions!==void 0?l.window.navigator.permissions.query({name:"geolocation"}).then(d=>s(d.state!=="denied")).catch(()=>s()):s()}_isOutOfMapMaxBounds(p){const s=this._map.getMaxBounds(),d=p.coords;return!!s&&(d.longitude<s.getWest()||d.longitude>s.getEast()||d.latitude<s.getSouth()||d.latitude>s.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(p){if(this._map){if(this._isOutOfMapMaxBounds(p))return this._setErrorState(),this.fire(new l.Event("outofmaxbounds",p)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=p,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(p),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(p),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new l.Event("geolocate",p)),this._finish()}}_updateCamera(p){const s=new l.LngLat(p.coords.longitude,p.coords.latitude),d=p.coords.accuracy,g=this._map.getBearing(),_=l.extend({bearing:g},this.options.fitBoundsOptions);this._map.fitBounds(s.toBounds(d),_,{geolocateSource:!0})}_updateMarker(p){if(p){const s=new l.LngLat(p.coords.longitude,p.coords.latitude);this._accuracyCircleMarker.setLngLat(s).addTo(this._map),this._userLocationDotMarker.setLngLat(s).addTo(this._map),this._accuracy=p.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const p=this._map.transform,s=l.mercatorZfromAltitude(1,p._center.lat)*p.worldSize,d=Math.ceil(2*this._accuracy*s);this._circleElement.style.width=`${d}px`,this._circleElement.style.height=`${d}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&typeof this._heading=="number"?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(p){if(this._map){if(this.options.trackUserLocation)if(p.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const s=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",s),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",s),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(p.code===3&&this._noTimeout)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new l.Event("error",p)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(p){if(this._map!==void 0){if(this._container.addEventListener("contextmenu",s=>s.preventDefault()),this._geolocateButton=k("button","mapboxgl-ctrl-geolocate",this._container),k("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",p===!1){l.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const s=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",s),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",s)}else{const s=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",s),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",s)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=k("div","mapboxgl-user-location"),this._dotElement.appendChild(k("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(k("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new Zt({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=k("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Zt({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",s=>{s.geolocateSource||this._watchState!=="ACTIVE_LOCK"||s.originalEvent&&s.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new l.Event("trackuserlocationend")))})}}_onDeviceOrientation(p){this._userLocationDotMarker&&(p.webkitCompassHeading?this._heading=p.webkitCompassHeading:p.absolute===!0&&(this._heading=-1*p.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return l.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new l.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new l.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new l.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let p;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(p={maximumAge:6e5,timeout:0},this._noTimeout=!0):(p=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,p),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const p=()=>{l.window.addEventListener("ondeviceorientationabsolute"in l.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientation)};l.window.DeviceMotionEvent!==void 0&&typeof l.window.DeviceMotionEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(s=>{s==="granted"&&p()}).catch(console.error):p()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),l.window.removeEventListener("deviceorientation",this._onDeviceOrientation),l.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:Jt,ScaleControl:class{constructor(p){this.options=l.extend({},yf,p),this._isNumberFormatSupported=function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"short",unit:"meter"}),!0}catch{return!1}}(),l.bindAll(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const p=this.options.maxWidth||100,s=this._map,d=s._containerHeight/2,g=s._containerWidth/2-p/2,_=s.unproject([g,d]),b=s.unproject([g+p,d]),I=_.distanceTo(b);if(this.options.unit==="imperial"){const P=3.2808*I;P>5280?this._setScale(p,P/5280,"mile"):this._setScale(p,P,"foot")}else this.options.unit==="nautical"?this._setScale(p,I/1852,"nautical-mile"):I>=1e3?this._setScale(p,I/1e3,"kilometer"):this._setScale(p,I,"meter")}_setScale(p,s,d){this._map._requestDomTask(()=>{const g=function(b){const I=Math.pow(10,`${Math.floor(b)}`.length-1);let P=b/I;return P=P>=10?10:P>=5?5:P>=3?3:P>=2?2:P>=1?1:function(O){const B=Math.pow(10,Math.ceil(-Math.log(O)/Math.LN10));return Math.round(O*B)/B}(P),I*P}(s),_=g/s;this._container.innerHTML=this._isNumberFormatSupported&&d!=="nautical-mile"?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"short",unit:d}).format(g):`${g}&nbsp;${_f[d]}`,this._container.style.width=p*_+"px"})}onAdd(p){return this._map=p,this._language=p.getLanguage(),this._container=k("div","mapboxgl-ctrl mapboxgl-ctrl-scale",p.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(p){this._language=p,this._update()}setUnit(p){this.options.unit=p,this._update()}},FullscreenControl:class{constructor(p){this._fullscreen=!1,p&&p.container&&(p.container instanceof l.window.HTMLElement?this._container=p.container:l.warnOnce("Full screen control 'container' must be a DOM element.")),l.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in l.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in l.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(p){return this._map=p,this._container||(this._container=this._map.getContainer()),this._controlContainer=k("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",l.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,l.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!l.window.document.fullscreenEnabled&&!l.window.document.webkitFullscreenEnabled)}_setupUI(){const p=this._fullscreenButton=k("button","mapboxgl-ctrl-fullscreen",this._controlContainer);k("span","mapboxgl-ctrl-icon",p).setAttribute("aria-hidden","true"),p.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),l.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const p=this._getTitle();this._fullscreenButton.setAttribute("aria-label",p),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",p)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(l.window.document.fullscreenElement||l.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?l.window.document.exitFullscreen?l.window.document.exitFullscreen():l.window.document.webkitCancelFullScreen&&l.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends l.Evented{constructor(p){super(),this.options=l.extend(Object.create(mf),p),l.bindAll(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(p&&p.className?p.className.trim().split(/\s+/):[])}addTo(p){return this._map&&this.remove(),this._map=p,this.options.closeOnClick&&p.on("preclick",this._onClose),this.options.closeOnMove&&p.on("move",this._onClose),p.on("remove",this.remove),this._update(),p._addPopup(this),this._focusFirstElement(),this._trackPointer?(p.on("mousemove",this._onMouseEvent),p.on("mouseup",this._onMouseEvent),p._canvasContainer.classList.add("mapboxgl-track-pointer")):p.on("move",this._update),this.fire(new l.Event("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const p=this._map;return p&&(p.off("move",this._update),p.off("move",this._onClose),p.off("preclick",this._onClose),p.off("click",this._onClose),p.off("remove",this.remove),p.off("mousemove",this._onMouseEvent),p.off("mouseup",this._onMouseEvent),p.off("drag",this._onMouseEvent),p._canvasContainer&&p._canvasContainer.classList.remove("mapboxgl-track-pointer"),p._removePopup(this),this._map=void 0),this.fire(new l.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(p){this._lngLat=l.LngLat.convert(p),this._pos=null,this._trackPointer=!1,this._update();const s=this._map;return s&&(s.on("move",this._update),s.off("mousemove",this._onMouseEvent),s._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const p=this._map;return p&&(p.off("move",this._update),p.on("mousemove",this._onMouseEvent),p.on("drag",this._onMouseEvent),p._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(p){return this.setDOMContent(l.window.document.createTextNode(p))}setHTML(p){const s=l.window.document.createDocumentFragment(),d=l.window.document.createElement("body");let g;for(d.innerHTML=p;g=d.firstChild,g;)s.appendChild(g);return this.setDOMContent(s)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(p){return this.options.maxWidth=p,this._update(),this}setDOMContent(p){let s=this._content;if(s)for(;s.hasChildNodes();)s.firstChild&&s.removeChild(s.firstChild);else s=this._content=k("div","mapboxgl-popup-content",this._container||void 0);if(s.appendChild(p),this.options.closeButton){const d=this._closeButton=k("button","mapboxgl-popup-close-button",s);d.type="button",d.setAttribute("aria-label","Close popup"),d.setAttribute("aria-hidden","true"),d.innerHTML="&#215;",d.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(p){return this._classList.add(p),this._updateClassList(),this}removeClassName(p){return this._classList.delete(p),this._updateClassList(),this}setOffset(p){return this.options.offset=p,this._update(),this}toggleClassName(p){let s;return this._classList.delete(p)?s=!1:(this._classList.add(p),s=!0),this._updateClassList(),s}_onMouseEvent(p){this._update(p.point)}_getAnchor(p){if(this.options.anchor)return this.options.anchor;const s=this._map,d=this._container,g=this._pos;if(!s||!d||!g)return"bottom";const _=d.offsetWidth,b=d.offsetHeight,I=g.x<_/2,P=g.x>s.transform.width-_/2;if(g.y+p<b)return I?"top-left":P?"top-right":"top";if(g.y>s.transform.height-b){if(I)return"bottom-left";if(P)return"bottom-right"}return I?"left":P?"right":"bottom"}_updateClassList(){const p=this._container;if(!p)return;const s=[...this._classList];s.push("mapboxgl-popup"),this._anchor&&s.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&s.push("mapboxgl-popup-track-pointer"),p.className=s.join(" ")}_update(p){const s=this._map,d=this._content;if(!s||!this._lngLat&&!this._trackPointer||!d)return;let g=this._container;if(g||(g=this._container=k("div","mapboxgl-popup",s.getContainer()),this._tip=k("div","mapboxgl-popup-tip",g),g.appendChild(d)),this.options.maxWidth&&g.style.maxWidth!==this.options.maxWidth&&(g.style.maxWidth=this.options.maxWidth),s.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Dl(this._lngLat,this._pos,s.transform)),!this._trackPointer||p){const _=this._pos=this._trackPointer&&p?p:s.project(this._lngLat),b=ug(this.options.offset),I=this._anchor=this._getAnchor(b.y),P=ug(this.options.offset,I),O=_.add(P).round();s._requestDomTask(()=>{this._container&&I&&(this._container.style.transform=`${qs[I]} translate(${O.x}px,${O.y}px)`)})}if(!this._marker&&s._showingGlobe()){const _=l.isLngLatBehindGlobe(s.transform,this._lngLat)?0:1;this._setOpacity(_)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const p=this._container.querySelector(c_);p&&p.focus()}_onClose(){this.remove()}_setOpacity(p){this._container&&(this._container.style.opacity=`${p}`),this._content&&(this._content.style.pointerEvents=p?"auto":"none")}},Marker:Zt,Style:_a,LngLat:l.LngLat,LngLatBounds:l.LngLatBounds,Point:l.Point,MercatorCoordinate:l.MercatorCoordinate,FreeCameraOptions:Xm,Evented:l.Evented,config:l.config,prewarm:function(){Sn().acquire(Zr)},clearPrewarmedResources:function(){const p=nn;p&&(p.isPreloaded()&&p.numActive()===1?(p.release(Zr),nn=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return l.config.ACCESS_TOKEN},set accessToken(p){l.config.ACCESS_TOKEN=p},get baseApiUrl(){return l.config.API_URL},set baseApiUrl(p){l.config.API_URL=p},get workerCount(){return an.workerCount},set workerCount(p){an.workerCount=p},get maxParallelImageRequests(){return l.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(p){l.config.MAX_PARALLEL_IMAGE_REQUESTS=p},clearStorage(p){l.clearTileCache(p)},workerUrl:"",workerClass:null,setNow:l.exported.setNow,restoreNow:l.exported.restoreNow};return $l});var y=c;return y})})(qk);var jq=qk.exports;const Uq=_c(jq);var Vq=Object.defineProperty,Hq=(e,t,r)=>t in e?Vq(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Gq=(e,t,r)=>(Hq(e,typeof t!="symbol"?t+"":t,r),r);let AY=class extends Uq.Map{constructor(t){super(t),Gq(this,"_groupLayers",new Map)}getGroupLayer(t){return this._groupLayers.get(t)}addGroupLayer(t,r){if(this.getGroupLayer(t))throw new Error(`The groupLayer '${t}' has already existed.`);const{sources:a={},layers:c=[],bounds:f,fitBoundsOptions:y={padding:{top:20,bottom:20,left:20,right:20}},flyToOptions:l}=r;for(const w in a)Object.prototype.hasOwnProperty.call(a,w)&&(this.getSource(w)?console.warn(`The source '${w}' has already existed.`):this.addSource(w,a[w]));for(const w of c){if(this.getLayer(w.id))throw new Error(`The layer '${w.id}' has already existed.`);{const C=w.metadata||{},A=C.before?this._getBeforeLayerId(w.id,C.before):void 0;w.metadata={...C,grouplayer:t},this.addLayer(w,A),this._setLayerCursor(w)}}return f?this.fitBounds(f,y):l&&this.flyTo(l),this._groupLayers.set(t,r),this}removeGroupLayer(t,r=!0){const a=this.getGroupLayer(t);if(a){const{sources:c={},layers:f=[]}=a;for(const y of f){const l=y.id;this.getLayer(l)&&this.removeLayer(l),y.source&&typeof y.source=="object"&&r&&this.getSource(l)&&this.removeSource(l)}r&&Object.keys(c).map(y=>{this.getSource(y)&&this.removeSource(y)}),this._groupLayers.delete(t)}return this}removeGroupLayers(t=!0){return this._groupLayers.forEach((r,a)=>{this.removeGroupLayer(a,t)}),this}setBasemapStyle(t,r=!0,a){this.setStyle(t,a);const c=r?new Map(this._groupLayers):void 0;this._groupLayers.clear(),c&&this.once("styledata",()=>{c.forEach((f,y)=>{this.addGroupLayer(y,f)})})}_getBeforeLayerIdByString(t){const r=this.getGroupLayer(t);return r&&r.layers.length>0?r.layers[0].id:this.getLayer(t)?t:void 0}_getBeforeLayerId(t,r){let a;if(typeof r=="string")a=this._getBeforeLayerIdByString(r);else if(Array.isArray(r)){for(const c of r)if(a=this._getBeforeLayerIdByString(c),a)break}return a||console.warn(`Layer with id "${r}" does not exist on this map. The layer with id "${t}" will be appended to the end of the layers array and appear visually above all other layers.`),a}_setLayerCursor(t){const r=t.metadata||{},a=t.id;r&&r.cursor&&(this.on("mouseenter",a,()=>{this.getCanvas().style.cursor=r.cursor}),this.on("mouseleave",a,()=>{this.getCanvas().style.cursor=""}))}};const rP=e=>{let t;const r=new Set,a=(w,C)=>{const A=typeof w=="function"?w(t):w;if(!Object.is(A,t)){const M=t;t=C??typeof A!="object"?A:Object.assign({},t,A),r.forEach(k=>k(t,M))}},c=()=>t,l={setState:a,getState:c,subscribe:w=>(r.add(w),()=>r.delete(w)),destroy:()=>{r.clear()}};return t=e(a,c,l),l},Wq=e=>e?rP(e):rP;var Xk={exports:{}},Kk={},Yk={exports:{}},Jk={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sh=T;function qq(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Zq=typeof Object.is=="function"?Object.is:qq,Xq=Sh.useState,Kq=Sh.useEffect,Yq=Sh.useLayoutEffect,Jq=Sh.useDebugValue;function Qq(e,t){var r=t(),a=Xq({inst:{value:r,getSnapshot:t}}),c=a[0].inst,f=a[1];return Yq(function(){c.value=r,c.getSnapshot=t,M1(c)&&f({inst:c})},[e,r,t]),Kq(function(){return M1(c)&&f({inst:c}),e(function(){M1(c)&&f({inst:c})})},[e]),Jq(r),r}function M1(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Zq(e,r)}catch{return!0}}function eZ(e,t){return t()}var tZ=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?eZ:Qq;Jk.useSyncExternalStore=Sh.useSyncExternalStore!==void 0?Sh.useSyncExternalStore:tZ;Yk.exports=Jk;var nZ=Yk.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L0=T,rZ=nZ;function iZ(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var oZ=typeof Object.is=="function"?Object.is:iZ,aZ=rZ.useSyncExternalStore,sZ=L0.useRef,lZ=L0.useEffect,cZ=L0.useMemo,uZ=L0.useDebugValue;Kk.useSyncExternalStoreWithSelector=function(e,t,r,a,c){var f=sZ(null);if(f.current===null){var y={hasValue:!1,value:null};f.current=y}else y=f.current;f=cZ(function(){function w(N){if(!C){if(C=!0,A=N,N=a(N),c!==void 0&&y.hasValue){var D=y.value;if(c(D,N))return M=D}return M=N}if(D=M,oZ(A,N))return D;var U=a(N);return c!==void 0&&c(D,U)?D:(A=N,M=U)}var C=!1,A,M,k=r===void 0?null:r;return[function(){return w(t())},k===null?void 0:function(){return w(k())}]},[t,r,a,c]);var l=aZ(e,f[0],f[1]);return lZ(function(){y.hasValue=!0,y.value=l},[l]),uZ(l),l};Xk.exports=Kk;var dZ=Xk.exports;const hZ=_c(dZ),{useDebugValue:fZ}=st,{useSyncExternalStoreWithSelector:pZ}=hZ;function mZ(e,t=e.getState,r){const a=pZ(e.subscribe,e.getState,e.getServerState||e.getState,t,r);return fZ(a),a}const iP=e=>{const t=typeof e=="function"?Wq(e):e,r=(a,c)=>mZ(t,a,c);return Object.assign(r,t),r},OY=e=>e?iP(e):iP;var gZ=function(e){return function(t,r){var a=T.useRef(!1);e(function(){return function(){a.current=!1}},[]),e(function(){if(!a.current)a.current=!0;else return t()},r)}},cs=function(){return cs=Object.assign||function(t){for(var r,a=1,c=arguments.length;a<c;a++){r=arguments[a];for(var f in r)Object.prototype.hasOwnProperty.call(r,f)&&(t[f]=r[f])}return t},cs.apply(this,arguments)};function Qk(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(r[a[c]]=e[a[c]]);return r}function vZ(e,t,r,a){function c(f){return f instanceof r?f:new r(function(y){y(f)})}return new(r||(r=Promise))(function(f,y){function l(A){try{C(a.next(A))}catch(M){y(M)}}function w(A){try{C(a.throw(A))}catch(M){y(M)}}function C(A){A.done?f(A.value):c(A.value).then(l,w)}C((a=a.apply(e,t||[])).next())})}function yZ(e,t){var r={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},a,c,f,y;return y={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function l(C){return function(A){return w([C,A])}}function w(C){if(a)throw new TypeError("Generator is already executing.");for(;y&&(y=0,C[0]&&(r=0)),r;)try{if(a=1,c&&(f=C[0]&2?c.return:C[0]?c.throw||((f=c.return)&&f.call(c),0):c.next)&&!(f=f.call(c,C[1])).done)return f;switch(c=0,f&&(C=[C[0]&2,f.value]),C[0]){case 0:case 1:f=C;break;case 4:return r.label++,{value:C[1],done:!1};case 5:r.label++,c=C[1],C=[0];continue;case 7:C=r.ops.pop(),r.trys.pop();continue;default:if(f=r.trys,!(f=f.length>0&&f[f.length-1])&&(C[0]===6||C[0]===2)){r=0;continue}if(C[0]===3&&(!f||C[1]>f[0]&&C[1]<f[3])){r.label=C[1];break}if(C[0]===6&&r.label<f[1]){r.label=f[1],f=C;break}if(f&&r.label<f[2]){r.label=f[2],r.ops.push(C);break}f[2]&&r.ops.pop(),r.trys.pop();continue}C=t.call(e,r)}catch(A){C=[6,A],c=0}finally{a=f=0}if(C[0]&5)throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}}function go(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var a=r.call(e),c,f=[],y;try{for(;(t===void 0||t-- >0)&&!(c=a.next()).done;)f.push(c.value)}catch(l){y={error:l}}finally{try{c&&!c.done&&(r=a.return)&&r.call(a)}finally{if(y)throw y.error}}return f}function vo(e,t,r){if(r||arguments.length===2)for(var a=0,c=t.length,f;a<c;a++)(f||!(a in t))&&(f||(f=Array.prototype.slice.call(t,0,a)),f[a]=t[a]);return e.concat(f||Array.prototype.slice.call(t))}var D0=function(e){return typeof e=="function"},_Z=!1;const $0=_Z;function $d(e){$0&&(D0(e)||console.error("useMemoizedFn expected parameter is a function, got ".concat(typeof e)));var t=T.useRef(e);t.current=T.useMemo(function(){return e},[e]);var r=T.useRef();return r.current||(r.current=function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];return t.current.apply(this,a)}),r.current}const bw=gZ(T.useEffect);var eL=function(e,t){var r=t.manual,a=t.ready,c=a===void 0?!0:a,f=t.defaultParams,y=f===void 0?[]:f,l=t.refreshDeps,w=l===void 0?[]:l,C=t.refreshDepsAction,A=T.useRef(!1);return A.current=!1,bw(function(){!r&&c&&(A.current=!0,e.run.apply(e,vo([],go(y),!1)))},[c]),bw(function(){A.current||r||(A.current=!0,C?C():e.refresh())},vo([],go(w),!1)),{onBefore:function(){if(!c)return{stopNow:!0}}}};eL.onInit=function(e){var t=e.ready,r=t===void 0?!0:t,a=e.manual;return{loading:!a&&r}};const xZ=eL;function bZ(e,t){if(e===t)return!0;for(var r=0;r<e.length;r++)if(!Object.is(e[r],t[r]))return!1;return!0}function tL(e,t){var r=T.useRef({deps:t,obj:void 0,initialized:!1}).current;return(r.initialized===!1||!bZ(r.deps,t))&&(r.deps=t,r.obj=e(),r.initialized=!0),r.obj}function nL(e){var t=T.useRef(e);return t.current=e,t}var wZ=function(e){$0&&(D0(e)||console.error("useUnmount expected parameter is a function, got ".concat(typeof e)));var t=nL(e);T.useEffect(function(){return function(){t.current()}},[])};const aE=wZ;var qv=new Map,SZ=function(e,t,r){var a=qv.get(e);a!=null&&a.timer&&clearTimeout(a.timer);var c=void 0;t>-1&&(c=setTimeout(function(){qv.delete(e)},t)),qv.set(e,cs(cs({},r),{timer:c}))},EZ=function(e){return qv.get(e)},Zv=new Map,CZ=function(e){return Zv.get(e)},TZ=function(e,t){Zv.set(e,t),t.then(function(r){return Zv.delete(e),r}).catch(function(){Zv.delete(e)})},su={},IZ=function(e,t){su[e]&&su[e].forEach(function(r){return r(t)})},P1=function(e,t){return su[e]||(su[e]=[]),su[e].push(t),function(){var a=su[e].indexOf(t);su[e].splice(a,1)}},MZ=function(e,t){var r=t.cacheKey,a=t.cacheTime,c=a===void 0?5*60*1e3:a,f=t.staleTime,y=f===void 0?0:f,l=t.setCache,w=t.getCache,C=T.useRef(),A=T.useRef(),M=function(N,D){l?l(D):SZ(N,c,D),IZ(N,D.data)},k=function(N,D){return D===void 0&&(D=[]),w?w(D):EZ(N)};return tL(function(){if(r){var N=k(r);N&&Object.hasOwnProperty.call(N,"data")&&(e.state.data=N.data,e.state.params=N.params,(y===-1||new Date().getTime()-N.time<=y)&&(e.state.loading=!1)),C.current=P1(r,function(D){e.setState({data:D})})}},[]),aE(function(){var N;(N=C.current)===null||N===void 0||N.call(C)}),r?{onBefore:function(N){var D=k(r,N);return!D||!Object.hasOwnProperty.call(D,"data")?{}:y===-1||new Date().getTime()-D.time<=y?{loading:!1,data:D==null?void 0:D.data,error:void 0,returnNow:!0}:{data:D==null?void 0:D.data,error:void 0}},onRequest:function(N,D){var U=CZ(r);return U&&U!==A.current?{servicePromise:U}:(U=N.apply(void 0,vo([],go(D),!1)),A.current=U,TZ(r,U),{servicePromise:U})},onSuccess:function(N,D){var U;r&&((U=C.current)===null||U===void 0||U.call(C),M(r,{data:N,params:D,time:new Date().getTime()}),C.current=P1(r,function(q){e.setState({data:q})}))},onMutate:function(N){var D;r&&((D=C.current)===null||D===void 0||D.call(C),M(r,{data:N,params:e.state.params,time:new Date().getTime()}),C.current=P1(r,function(U){e.setState({data:U})}))}}:{}};const PZ=MZ;function AZ(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var sE=AZ,RZ=typeof vp=="object"&&vp&&vp.Object===Object&&vp,OZ=RZ,zZ=OZ,kZ=typeof self=="object"&&self&&self.Object===Object&&self,LZ=zZ||kZ||Function("return this")(),rL=LZ,DZ=rL,$Z=function(){return DZ.Date.now()},FZ=$Z,BZ=/\s/;function NZ(e){for(var t=e.length;t--&&BZ.test(e.charAt(t)););return t}var jZ=NZ,UZ=jZ,VZ=/^\s+/;function HZ(e){return e&&e.slice(0,UZ(e)+1).replace(VZ,"")}var GZ=HZ,WZ=rL,qZ=WZ.Symbol,iL=qZ,oP=iL,oL=Object.prototype,ZZ=oL.hasOwnProperty,XZ=oL.toString,mp=oP?oP.toStringTag:void 0;function KZ(e){var t=ZZ.call(e,mp),r=e[mp];try{e[mp]=void 0;var a=!0}catch{}var c=XZ.call(e);return a&&(t?e[mp]=r:delete e[mp]),c}var YZ=KZ,JZ=Object.prototype,QZ=JZ.toString;function eX(e){return QZ.call(e)}var tX=eX,aP=iL,nX=YZ,rX=tX,iX="[object Null]",oX="[object Undefined]",sP=aP?aP.toStringTag:void 0;function aX(e){return e==null?e===void 0?oX:iX:sP&&sP in Object(e)?nX(e):rX(e)}var sX=aX;function lX(e){return e!=null&&typeof e=="object"}var cX=lX,uX=sX,dX=cX,hX="[object Symbol]";function fX(e){return typeof e=="symbol"||dX(e)&&uX(e)==hX}var pX=fX,mX=GZ,lP=sE,gX=pX,cP=0/0,vX=/^[-+]0x[0-9a-f]+$/i,yX=/^0b[01]+$/i,_X=/^0o[0-7]+$/i,xX=parseInt;function bX(e){if(typeof e=="number")return e;if(gX(e))return cP;if(lP(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=lP(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=mX(e);var r=yX.test(e);return r||_X.test(e)?xX(e.slice(2),r?2:8):vX.test(e)?cP:+e}var wX=bX,SX=sE,A1=FZ,uP=wX,EX="Expected a function",CX=Math.max,TX=Math.min;function IX(e,t,r){var a,c,f,y,l,w,C=0,A=!1,M=!1,k=!0;if(typeof e!="function")throw new TypeError(EX);t=uP(t)||0,SX(r)&&(A=!!r.leading,M="maxWait"in r,f=M?CX(uP(r.maxWait)||0,t):f,k="trailing"in r?!!r.trailing:k);function N(re){var Q=a,ne=c;return a=c=void 0,C=re,y=e.apply(ne,Q),y}function D(re){return C=re,l=setTimeout(F,t),A?N(re):y}function U(re){var Q=re-w,ne=re-C,ee=t-Q;return M?TX(ee,f-ne):ee}function q(re){var Q=re-w,ne=re-C;return w===void 0||Q>=t||Q<0||M&&ne>=f}function F(){var re=A1();if(q(re))return j(re);l=setTimeout(F,U(re))}function j(re){return l=void 0,k&&a?N(re):(a=c=void 0,y)}function V(){l!==void 0&&clearTimeout(l),C=0,a=w=c=l=void 0}function X(){return l===void 0?y:j(A1())}function te(){var re=A1(),Q=q(re);if(a=arguments,c=this,w=re,Q){if(l===void 0)return D(w);if(M)return clearTimeout(l),l=setTimeout(F,t),N(w)}return l===void 0&&(l=setTimeout(F,t)),y}return te.cancel=V,te.flush=X,te}var aL=IX;const MX=_c(aL);var PX=function(e,t){var r=t.debounceWait,a=t.debounceLeading,c=t.debounceTrailing,f=t.debounceMaxWait,y=T.useRef(),l=T.useMemo(function(){var w={};return a!==void 0&&(w.leading=a),c!==void 0&&(w.trailing=c),f!==void 0&&(w.maxWait=f),w},[a,c,f]);return T.useEffect(function(){if(r){var w=e.runAsync.bind(e);return y.current=MX(function(C){C()},r,l),e.runAsync=function(){for(var C=[],A=0;A<arguments.length;A++)C[A]=arguments[A];return new Promise(function(M,k){var N;(N=y.current)===null||N===void 0||N.call(y,function(){w.apply(void 0,vo([],go(C),!1)).then(M).catch(k)})})},function(){var C;(C=y.current)===null||C===void 0||C.cancel(),e.runAsync=w}}},[r,l]),r?{onCancel:function(){var w;(w=y.current)===null||w===void 0||w.cancel()}}:{}};const AX=PX;var RX=function(e,t){var r=t.loadingDelay,a=t.ready,c=T.useRef();if(!r)return{};var f=function(){c.current&&clearTimeout(c.current)};return{onBefore:function(){return f(),a!==!1&&(c.current=setTimeout(function(){e.setState({loading:!0})},r)),{loading:!1}},onFinally:function(){f()},onCancel:function(){f()}}};const OX=RX;var zX=!!(typeof window<"u"&&window.document&&window.document.createElement);const F0=zX;function lE(){return F0?document.visibilityState!=="hidden":!0}var Fp=[];function kX(e){return Fp.push(e),function(){var r=Fp.indexOf(e);Fp.splice(r,1)}}if(F0){var LX=function(){if(lE())for(var e=0;e<Fp.length;e++){var t=Fp[e];t()}};window.addEventListener("visibilitychange",LX,!1)}var DX=function(e,t){var r=t.pollingInterval,a=t.pollingWhenHidden,c=a===void 0?!0:a,f=t.pollingErrorRetryCount,y=f===void 0?-1:f,l=T.useRef(),w=T.useRef(),C=T.useRef(0),A=function(){var M;l.current&&clearTimeout(l.current),(M=w.current)===null||M===void 0||M.call(w)};return bw(function(){r||A()},[r]),r?{onBefore:function(){A()},onError:function(){C.current+=1},onSuccess:function(){C.current=0},onFinally:function(){y===-1||y!==-1&&C.current<=y?l.current=setTimeout(function(){!c&&!lE()?w.current=kX(function(){e.refresh()}):e.refresh()},r):C.current=0},onCancel:function(){A()}}:{}};const $X=DX;function FX(e,t){var r=!1;return function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];r||(r=!0,e.apply(void 0,vo([],go(a),!1)),setTimeout(function(){r=!1},t))}}function BX(){return F0&&typeof navigator.onLine<"u"?navigator.onLine:!0}var Bp=[];function NX(e){return Bp.push(e),function(){var r=Bp.indexOf(e);r>-1&&Bp.splice(r,1)}}if(F0){var dP=function(){if(!(!lE()||!BX()))for(var e=0;e<Bp.length;e++){var t=Bp[e];t()}};window.addEventListener("visibilitychange",dP,!1),window.addEventListener("focus",dP,!1)}var jX=function(e,t){var r=t.refreshOnWindowFocus,a=t.focusTimespan,c=a===void 0?5e3:a,f=T.useRef(),y=function(){var l;(l=f.current)===null||l===void 0||l.call(f)};return T.useEffect(function(){if(r){var l=FX(e.refresh.bind(e),c);f.current=NX(function(){l()})}return function(){y()}},[r,c]),aE(function(){y()}),{}};const UX=jX;var VX=function(e,t){var r=t.retryInterval,a=t.retryCount,c=T.useRef(),f=T.useRef(0),y=T.useRef(!1);return a?{onBefore:function(){y.current||(f.current=0),y.current=!1,c.current&&clearTimeout(c.current)},onSuccess:function(){f.current=0},onError:function(){if(f.current+=1,a===-1||f.current<=a){var l=r??Math.min(1e3*Math.pow(2,f.current),3e4);c.current=setTimeout(function(){y.current=!0,e.refresh()},l)}else f.current=0},onCancel:function(){f.current=0,c.current&&clearTimeout(c.current)}}:{}};const HX=VX;var GX=aL,WX=sE,qX="Expected a function";function ZX(e,t,r){var a=!0,c=!0;if(typeof e!="function")throw new TypeError(qX);return WX(r)&&(a="leading"in r?!!r.leading:a,c="trailing"in r?!!r.trailing:c),GX(e,t,{leading:a,maxWait:t,trailing:c})}var XX=ZX;const KX=_c(XX);var YX=function(e,t){var r=t.throttleWait,a=t.throttleLeading,c=t.throttleTrailing,f=T.useRef(),y={};return a!==void 0&&(y.leading=a),c!==void 0&&(y.trailing=c),T.useEffect(function(){if(r){var l=e.runAsync.bind(e);return f.current=KX(function(w){w()},r,y),e.runAsync=function(){for(var w=[],C=0;C<arguments.length;C++)w[C]=arguments[C];return new Promise(function(A,M){var k;(k=f.current)===null||k===void 0||k.call(f,function(){l.apply(void 0,vo([],go(w),!1)).then(A).catch(M)})})},function(){var w;e.runAsync=l,(w=f.current)===null||w===void 0||w.cancel()}}},[r,a,c]),r?{onCancel:function(){var l;(l=f.current)===null||l===void 0||l.cancel()}}:{}};const JX=YX;var QX=function(e){$0&&(D0(e)||console.error('useMount: parameter `fn` expected to be a function, but got "'.concat(typeof e,'".'))),T.useEffect(function(){e==null||e()},[])};const eK=QX;var tK=function(){var e=go(T.useState({}),2),t=e[1];return T.useCallback(function(){return t({})},[])};const nK=tK;var rK=function(){function e(t,r,a,c){c===void 0&&(c={}),this.serviceRef=t,this.options=r,this.subscribe=a,this.initState=c,this.count=0,this.state={loading:!1,params:void 0,data:void 0,error:void 0},this.state=cs(cs(cs({},this.state),{loading:!r.manual}),c)}return e.prototype.setState=function(t){t===void 0&&(t={}),this.state=cs(cs({},this.state),t),this.subscribe()},e.prototype.runPluginHandler=function(t){for(var r=[],a=1;a<arguments.length;a++)r[a-1]=arguments[a];var c=this.pluginImpls.map(function(f){var y;return(y=f[t])===null||y===void 0?void 0:y.call.apply(y,vo([f],go(r),!1))}).filter(Boolean);return Object.assign.apply(Object,vo([{}],go(c),!1))},e.prototype.runAsync=function(){for(var t,r,a,c,f,y,l,w,C,A,M=[],k=0;k<arguments.length;k++)M[k]=arguments[k];return vZ(this,void 0,void 0,function(){var N,D,U,q,F,j,V,X,te,re,Q;return yZ(this,function(ne){switch(ne.label){case 0:if(this.count+=1,N=this.count,D=this.runPluginHandler("onBefore",M),U=D.stopNow,q=U===void 0?!1:U,F=D.returnNow,j=F===void 0?!1:F,V=Qk(D,["stopNow","returnNow"]),q)return[2,new Promise(function(){})];if(this.setState(cs({loading:!0,params:M},V)),j)return[2,Promise.resolve(V.data)];(r=(t=this.options).onBefore)===null||r===void 0||r.call(t,M),ne.label=1;case 1:return ne.trys.push([1,3,,4]),X=this.runPluginHandler("onRequest",this.serviceRef.current,M).servicePromise,X||(X=(Q=this.serviceRef).current.apply(Q,vo([],go(M),!1))),[4,X];case 2:return te=ne.sent(),N!==this.count?[2,new Promise(function(){})]:(this.setState({data:te,error:void 0,loading:!1}),(c=(a=this.options).onSuccess)===null||c===void 0||c.call(a,te,M),this.runPluginHandler("onSuccess",te,M),(y=(f=this.options).onFinally)===null||y===void 0||y.call(f,M,te,void 0),N===this.count&&this.runPluginHandler("onFinally",M,te,void 0),[2,te]);case 3:if(re=ne.sent(),N!==this.count)return[2,new Promise(function(){})];throw this.setState({error:re,loading:!1}),(w=(l=this.options).onError)===null||w===void 0||w.call(l,re,M),this.runPluginHandler("onError",re,M),(A=(C=this.options).onFinally)===null||A===void 0||A.call(C,M,void 0,re),N===this.count&&this.runPluginHandler("onFinally",M,void 0,re),re;case 4:return[2]}})})},e.prototype.run=function(){for(var t=this,r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];this.runAsync.apply(this,vo([],go(r),!1)).catch(function(c){t.options.onError||console.error(c)})},e.prototype.cancel=function(){this.count+=1,this.setState({loading:!1}),this.runPluginHandler("onCancel")},e.prototype.refresh=function(){this.run.apply(this,vo([],go(this.state.params||[]),!1))},e.prototype.refreshAsync=function(){return this.runAsync.apply(this,vo([],go(this.state.params||[]),!1))},e.prototype.mutate=function(t){var r=D0(t)?t(this.state.data):t;this.runPluginHandler("onMutate",r),this.setState({data:r})},e}();const iK=rK;function oK(e,t,r){t===void 0&&(t={}),r===void 0&&(r=[]);var a=t.manual,c=a===void 0?!1:a,f=Qk(t,["manual"]);$0&&t.defaultParams&&!Array.isArray(t.defaultParams)&&console.warn("expected defaultParams is array, got ".concat(typeof t.defaultParams));var y=cs({manual:c},f),l=nL(e),w=nK(),C=tL(function(){var A=r.map(function(M){var k;return(k=M==null?void 0:M.onInit)===null||k===void 0?void 0:k.call(M,y)}).filter(Boolean);return new iK(l,y,w,Object.assign.apply(Object,vo([{}],go(A),!1)))},[]);return C.options=y,C.pluginImpls=r.map(function(A){return A(C,y)}),eK(function(){if(!c){var A=C.state.params||t.defaultParams||[];C.run.apply(C,vo([],go(A),!1))}}),aE(function(){C.cancel()}),{loading:C.state.loading,data:C.state.data,error:C.state.error,params:C.state.params||[],cancel:$d(C.cancel.bind(C)),refresh:$d(C.refresh.bind(C)),refreshAsync:$d(C.refreshAsync.bind(C)),run:$d(C.run.bind(C)),runAsync:$d(C.runAsync.bind(C)),mutate:$d(C.mutate.bind(C))}}function zY(e,t,r){return oK(e,t,vo(vo([],go(r||[]),!1),[AX,OX,$X,UX,JX,xZ,PZ,HX],!1))}function sL(e,t){return function(){return e.apply(t,arguments)}}const{toString:aK}=Object.prototype,{getPrototypeOf:cE}=Object,B0=(e=>t=>{const r=aK.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),Bs=e=>(e=e.toLowerCase(),t=>B0(t)===e),N0=e=>t=>typeof t===e,{isArray:Oh}=Array,fm=N0("undefined");function sK(e){return e!==null&&!fm(e)&&e.constructor!==null&&!fm(e.constructor)&&La(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const lL=Bs("ArrayBuffer");function lK(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&lL(e.buffer),t}const cK=N0("string"),La=N0("function"),cL=N0("number"),j0=e=>e!==null&&typeof e=="object",uK=e=>e===!0||e===!1,Xv=e=>{if(B0(e)!=="object")return!1;const t=cE(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},dK=Bs("Date"),hK=Bs("File"),fK=Bs("Blob"),pK=Bs("FileList"),mK=e=>j0(e)&&La(e.pipe),gK=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||La(e.append)&&((t=B0(e))==="formdata"||t==="object"&&La(e.toString)&&e.toString()==="[object FormData]"))},vK=Bs("URLSearchParams"),yK=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Am(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let a,c;if(typeof e!="object"&&(e=[e]),Oh(e))for(a=0,c=e.length;a<c;a++)t.call(null,e[a],a,e);else{const f=r?Object.getOwnPropertyNames(e):Object.keys(e),y=f.length;let l;for(a=0;a<y;a++)l=f[a],t.call(null,e[l],l,e)}}function uL(e,t){t=t.toLowerCase();const r=Object.keys(e);let a=r.length,c;for(;a-- >0;)if(c=r[a],t===c.toLowerCase())return c;return null}const dL=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),hL=e=>!fm(e)&&e!==dL;function ww(){const{caseless:e}=hL(this)&&this||{},t={},r=(a,c)=>{const f=e&&uL(t,c)||c;Xv(t[f])&&Xv(a)?t[f]=ww(t[f],a):Xv(a)?t[f]=ww({},a):Oh(a)?t[f]=a.slice():t[f]=a};for(let a=0,c=arguments.length;a<c;a++)arguments[a]&&Am(arguments[a],r);return t}const _K=(e,t,r,{allOwnKeys:a}={})=>(Am(t,(c,f)=>{r&&La(c)?e[f]=sL(c,r):e[f]=c},{allOwnKeys:a}),e),xK=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),bK=(e,t,r,a)=>{e.prototype=Object.create(t.prototype,a),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},wK=(e,t,r,a)=>{let c,f,y;const l={};if(t=t||{},e==null)return t;do{for(c=Object.getOwnPropertyNames(e),f=c.length;f-- >0;)y=c[f],(!a||a(y,e,t))&&!l[y]&&(t[y]=e[y],l[y]=!0);e=r!==!1&&cE(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},SK=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const a=e.indexOf(t,r);return a!==-1&&a===r},EK=e=>{if(!e)return null;if(Oh(e))return e;let t=e.length;if(!cL(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},CK=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&cE(Uint8Array)),TK=(e,t)=>{const a=(e&&e[Symbol.iterator]).call(e);let c;for(;(c=a.next())&&!c.done;){const f=c.value;t.call(e,f[0],f[1])}},IK=(e,t)=>{let r;const a=[];for(;(r=e.exec(t))!==null;)a.push(r);return a},MK=Bs("HTMLFormElement"),PK=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,a,c){return a.toUpperCase()+c}),hP=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),AK=Bs("RegExp"),fL=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),a={};Am(r,(c,f)=>{let y;(y=t(c,f,e))!==!1&&(a[f]=y||c)}),Object.defineProperties(e,a)},RK=e=>{fL(e,(t,r)=>{if(La(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const a=e[r];if(La(a)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},OK=(e,t)=>{const r={},a=c=>{c.forEach(f=>{r[f]=!0})};return Oh(e)?a(e):a(String(e).split(t)),r},zK=()=>{},kK=(e,t)=>(e=+e,Number.isFinite(e)?e:t),R1="abcdefghijklmnopqrstuvwxyz",fP="0123456789",pL={DIGIT:fP,ALPHA:R1,ALPHA_DIGIT:R1+R1.toUpperCase()+fP},LK=(e=16,t=pL.ALPHA_DIGIT)=>{let r="";const{length:a}=t;for(;e--;)r+=t[Math.random()*a|0];return r};function DK(e){return!!(e&&La(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const $K=e=>{const t=new Array(10),r=(a,c)=>{if(j0(a)){if(t.indexOf(a)>=0)return;if(!("toJSON"in a)){t[c]=a;const f=Oh(a)?[]:{};return Am(a,(y,l)=>{const w=r(y,c+1);!fm(w)&&(f[l]=w)}),t[c]=void 0,f}}return a};return r(e,0)},FK=Bs("AsyncFunction"),BK=e=>e&&(j0(e)||La(e))&&La(e.then)&&La(e.catch),Rt={isArray:Oh,isArrayBuffer:lL,isBuffer:sK,isFormData:gK,isArrayBufferView:lK,isString:cK,isNumber:cL,isBoolean:uK,isObject:j0,isPlainObject:Xv,isUndefined:fm,isDate:dK,isFile:hK,isBlob:fK,isRegExp:AK,isFunction:La,isStream:mK,isURLSearchParams:vK,isTypedArray:CK,isFileList:pK,forEach:Am,merge:ww,extend:_K,trim:yK,stripBOM:xK,inherits:bK,toFlatObject:wK,kindOf:B0,kindOfTest:Bs,endsWith:SK,toArray:EK,forEachEntry:TK,matchAll:IK,isHTMLForm:MK,hasOwnProperty:hP,hasOwnProp:hP,reduceDescriptors:fL,freezeMethods:RK,toObjectSet:OK,toCamelCase:PK,noop:zK,toFiniteNumber:kK,findKey:uL,global:dL,isContextDefined:hL,ALPHABET:pL,generateString:LK,isSpecCompliantForm:DK,toJSONObject:$K,isAsyncFn:FK,isThenable:BK};function hr(e,t,r,a,c){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),a&&(this.request=a),c&&(this.response=c)}Rt.inherits(hr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Rt.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const mL=hr.prototype,gL={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{gL[e]={value:e}});Object.defineProperties(hr,gL);Object.defineProperty(mL,"isAxiosError",{value:!0});hr.from=(e,t,r,a,c,f)=>{const y=Object.create(mL);return Rt.toFlatObject(e,y,function(w){return w!==Error.prototype},l=>l!=="isAxiosError"),hr.call(y,e.message,t,r,a,c),y.cause=e,y.name=e.name,f&&Object.assign(y,f),y};const NK=null;function Sw(e){return Rt.isPlainObject(e)||Rt.isArray(e)}function vL(e){return Rt.endsWith(e,"[]")?e.slice(0,-2):e}function pP(e,t,r){return e?e.concat(t).map(function(c,f){return c=vL(c),!r&&f?"["+c+"]":c}).join(r?".":""):t}function jK(e){return Rt.isArray(e)&&!e.some(Sw)}const UK=Rt.toFlatObject(Rt,{},null,function(t){return/^is[A-Z]/.test(t)});function U0(e,t,r){if(!Rt.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=Rt.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(U,q){return!Rt.isUndefined(q[U])});const a=r.metaTokens,c=r.visitor||A,f=r.dots,y=r.indexes,w=(r.Blob||typeof Blob<"u"&&Blob)&&Rt.isSpecCompliantForm(t);if(!Rt.isFunction(c))throw new TypeError("visitor must be a function");function C(D){if(D===null)return"";if(Rt.isDate(D))return D.toISOString();if(!w&&Rt.isBlob(D))throw new hr("Blob is not supported. Use a Buffer instead.");return Rt.isArrayBuffer(D)||Rt.isTypedArray(D)?w&&typeof Blob=="function"?new Blob([D]):Buffer.from(D):D}function A(D,U,q){let F=D;if(D&&!q&&typeof D=="object"){if(Rt.endsWith(U,"{}"))U=a?U:U.slice(0,-2),D=JSON.stringify(D);else if(Rt.isArray(D)&&jK(D)||(Rt.isFileList(D)||Rt.endsWith(U,"[]"))&&(F=Rt.toArray(D)))return U=vL(U),F.forEach(function(V,X){!(Rt.isUndefined(V)||V===null)&&t.append(y===!0?pP([U],X,f):y===null?U:U+"[]",C(V))}),!1}return Sw(D)?!0:(t.append(pP(q,U,f),C(D)),!1)}const M=[],k=Object.assign(UK,{defaultVisitor:A,convertValue:C,isVisitable:Sw});function N(D,U){if(!Rt.isUndefined(D)){if(M.indexOf(D)!==-1)throw Error("Circular reference detected in "+U.join("."));M.push(D),Rt.forEach(D,function(F,j){(!(Rt.isUndefined(F)||F===null)&&c.call(t,F,Rt.isString(j)?j.trim():j,U,k))===!0&&N(F,U?U.concat(j):[j])}),M.pop()}}if(!Rt.isObject(e))throw new TypeError("data must be an object");return N(e),t}function mP(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(a){return t[a]})}function uE(e,t){this._pairs=[],e&&U0(e,this,t)}const yL=uE.prototype;yL.append=function(t,r){this._pairs.push([t,r])};yL.toString=function(t){const r=t?function(a){return t.call(this,a,mP)}:mP;return this._pairs.map(function(c){return r(c[0])+"="+r(c[1])},"").join("&")};function VK(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function _L(e,t,r){if(!t)return e;const a=r&&r.encode||VK,c=r&&r.serialize;let f;if(c?f=c(t,r):f=Rt.isURLSearchParams(t)?t.toString():new uE(t,r).toString(a),f){const y=e.indexOf("#");y!==-1&&(e=e.slice(0,y)),e+=(e.indexOf("?")===-1?"?":"&")+f}return e}class HK{constructor(){this.handlers=[]}use(t,r,a){return this.handlers.push({fulfilled:t,rejected:r,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){Rt.forEach(this.handlers,function(a){a!==null&&t(a)})}}const gP=HK,xL={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},GK=typeof URLSearchParams<"u"?URLSearchParams:uE,WK=typeof FormData<"u"?FormData:null,qK=typeof Blob<"u"?Blob:null,ZK={isBrowser:!0,classes:{URLSearchParams:GK,FormData:WK,Blob:qK},protocols:["http","https","file","blob","url","data"]},bL=typeof window<"u"&&typeof document<"u",XK=(e=>bL&&["ReactNative","NativeScript","NS"].indexOf(e)<0)(typeof navigator<"u"&&navigator.product),KK=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),YK=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:bL,hasStandardBrowserEnv:XK,hasStandardBrowserWebWorkerEnv:KK},Symbol.toStringTag,{value:"Module"})),Ds={...YK,...ZK};function JK(e,t){return U0(e,new Ds.classes.URLSearchParams,Object.assign({visitor:function(r,a,c,f){return Ds.isNode&&Rt.isBuffer(r)?(this.append(a,r.toString("base64")),!1):f.defaultVisitor.apply(this,arguments)}},t))}function QK(e){return Rt.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function eY(e){const t={},r=Object.keys(e);let a;const c=r.length;let f;for(a=0;a<c;a++)f=r[a],t[f]=e[f];return t}function wL(e){function t(r,a,c,f){let y=r[f++];const l=Number.isFinite(+y),w=f>=r.length;return y=!y&&Rt.isArray(c)?c.length:y,w?(Rt.hasOwnProp(c,y)?c[y]=[c[y],a]:c[y]=a,!l):((!c[y]||!Rt.isObject(c[y]))&&(c[y]=[]),t(r,a,c[y],f)&&Rt.isArray(c[y])&&(c[y]=eY(c[y])),!l)}if(Rt.isFormData(e)&&Rt.isFunction(e.entries)){const r={};return Rt.forEachEntry(e,(a,c)=>{t(QK(a),c,r,0)}),r}return null}function tY(e,t,r){if(Rt.isString(e))try{return(t||JSON.parse)(e),Rt.trim(e)}catch(a){if(a.name!=="SyntaxError")throw a}return(r||JSON.stringify)(e)}const dE={transitional:xL,adapter:["xhr","http"],transformRequest:[function(t,r){const a=r.getContentType()||"",c=a.indexOf("application/json")>-1,f=Rt.isObject(t);if(f&&Rt.isHTMLForm(t)&&(t=new FormData(t)),Rt.isFormData(t))return c&&c?JSON.stringify(wL(t)):t;if(Rt.isArrayBuffer(t)||Rt.isBuffer(t)||Rt.isStream(t)||Rt.isFile(t)||Rt.isBlob(t))return t;if(Rt.isArrayBufferView(t))return t.buffer;if(Rt.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let l;if(f){if(a.indexOf("application/x-www-form-urlencoded")>-1)return JK(t,this.formSerializer).toString();if((l=Rt.isFileList(t))||a.indexOf("multipart/form-data")>-1){const w=this.env&&this.env.FormData;return U0(l?{"files[]":t}:t,w&&new w,this.formSerializer)}}return f||c?(r.setContentType("application/json",!1),tY(t)):t}],transformResponse:[function(t){const r=this.transitional||dE.transitional,a=r&&r.forcedJSONParsing,c=this.responseType==="json";if(t&&Rt.isString(t)&&(a&&!this.responseType||c)){const y=!(r&&r.silentJSONParsing)&&c;try{return JSON.parse(t)}catch(l){if(y)throw l.name==="SyntaxError"?hr.from(l,hr.ERR_BAD_RESPONSE,this,null,this.response):l}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ds.classes.FormData,Blob:Ds.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Rt.forEach(["delete","get","head","post","put","patch"],e=>{dE.headers[e]={}});const hE=dE,nY=Rt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),rY=e=>{const t={};let r,a,c;return e&&e.split(`
`).forEach(function(y){c=y.indexOf(":"),r=y.substring(0,c).trim().toLowerCase(),a=y.substring(c+1).trim(),!(!r||t[r]&&nY[r])&&(r==="set-cookie"?t[r]?t[r].push(a):t[r]=[a]:t[r]=t[r]?t[r]+", "+a:a)}),t},vP=Symbol("internals");function gp(e){return e&&String(e).trim().toLowerCase()}function Kv(e){return e===!1||e==null?e:Rt.isArray(e)?e.map(Kv):String(e)}function iY(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let a;for(;a=r.exec(e);)t[a[1]]=a[2];return t}const oY=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function O1(e,t,r,a,c){if(Rt.isFunction(a))return a.call(this,t,r);if(c&&(t=r),!!Rt.isString(t)){if(Rt.isString(a))return t.indexOf(a)!==-1;if(Rt.isRegExp(a))return a.test(t)}}function aY(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,a)=>r.toUpperCase()+a)}function sY(e,t){const r=Rt.toCamelCase(" "+t);["get","set","has"].forEach(a=>{Object.defineProperty(e,a+r,{value:function(c,f,y){return this[a].call(this,t,c,f,y)},configurable:!0})})}class V0{constructor(t){t&&this.set(t)}set(t,r,a){const c=this;function f(l,w,C){const A=gp(w);if(!A)throw new Error("header name must be a non-empty string");const M=Rt.findKey(c,A);(!M||c[M]===void 0||C===!0||C===void 0&&c[M]!==!1)&&(c[M||w]=Kv(l))}const y=(l,w)=>Rt.forEach(l,(C,A)=>f(C,A,w));return Rt.isPlainObject(t)||t instanceof this.constructor?y(t,r):Rt.isString(t)&&(t=t.trim())&&!oY(t)?y(rY(t),r):t!=null&&f(r,t,a),this}get(t,r){if(t=gp(t),t){const a=Rt.findKey(this,t);if(a){const c=this[a];if(!r)return c;if(r===!0)return iY(c);if(Rt.isFunction(r))return r.call(this,c,a);if(Rt.isRegExp(r))return r.exec(c);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=gp(t),t){const a=Rt.findKey(this,t);return!!(a&&this[a]!==void 0&&(!r||O1(this,this[a],a,r)))}return!1}delete(t,r){const a=this;let c=!1;function f(y){if(y=gp(y),y){const l=Rt.findKey(a,y);l&&(!r||O1(a,a[l],l,r))&&(delete a[l],c=!0)}}return Rt.isArray(t)?t.forEach(f):f(t),c}clear(t){const r=Object.keys(this);let a=r.length,c=!1;for(;a--;){const f=r[a];(!t||O1(this,this[f],f,t,!0))&&(delete this[f],c=!0)}return c}normalize(t){const r=this,a={};return Rt.forEach(this,(c,f)=>{const y=Rt.findKey(a,f);if(y){r[y]=Kv(c),delete r[f];return}const l=t?aY(f):String(f).trim();l!==f&&delete r[f],r[l]=Kv(c),a[l]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return Rt.forEach(this,(a,c)=>{a!=null&&a!==!1&&(r[c]=t&&Rt.isArray(a)?a.join(", "):a)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const a=new this(t);return r.forEach(c=>a.set(c)),a}static accessor(t){const a=(this[vP]=this[vP]={accessors:{}}).accessors,c=this.prototype;function f(y){const l=gp(y);a[l]||(sY(c,y),a[l]=!0)}return Rt.isArray(t)?t.forEach(f):f(t),this}}V0.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Rt.reduceDescriptors(V0.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(a){this[r]=a}}});Rt.freezeMethods(V0);const dl=V0;function z1(e,t){const r=this||hE,a=t||r,c=dl.from(a.headers);let f=a.data;return Rt.forEach(e,function(l){f=l.call(r,f,c.normalize(),t?t.status:void 0)}),c.normalize(),f}function SL(e){return!!(e&&e.__CANCEL__)}function Rm(e,t,r){hr.call(this,e??"canceled",hr.ERR_CANCELED,t,r),this.name="CanceledError"}Rt.inherits(Rm,hr,{__CANCEL__:!0});function lY(e,t,r){const a=r.config.validateStatus;!r.status||!a||a(r.status)?e(r):t(new hr("Request failed with status code "+r.status,[hr.ERR_BAD_REQUEST,hr.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}const cY=Ds.hasStandardBrowserEnv?{write(e,t,r,a,c,f){const y=[e+"="+encodeURIComponent(t)];Rt.isNumber(r)&&y.push("expires="+new Date(r).toGMTString()),Rt.isString(a)&&y.push("path="+a),Rt.isString(c)&&y.push("domain="+c),f===!0&&y.push("secure"),document.cookie=y.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function uY(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function dY(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}function EL(e,t){return e&&!uY(t)?dY(e,t):t}const hY=Ds.hasStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");let a;function c(f){let y=f;return t&&(r.setAttribute("href",y),y=r.href),r.setAttribute("href",y),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return a=c(window.location.href),function(y){const l=Rt.isString(y)?c(y):y;return l.protocol===a.protocol&&l.host===a.host}}():function(){return function(){return!0}}();function fY(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function pY(e,t){e=e||10;const r=new Array(e),a=new Array(e);let c=0,f=0,y;return t=t!==void 0?t:1e3,function(w){const C=Date.now(),A=a[f];y||(y=C),r[c]=w,a[c]=C;let M=f,k=0;for(;M!==c;)k+=r[M++],M=M%e;if(c=(c+1)%e,c===f&&(f=(f+1)%e),C-y<t)return;const N=A&&C-A;return N?Math.round(k*1e3/N):void 0}}function yP(e,t){let r=0;const a=pY(50,250);return c=>{const f=c.loaded,y=c.lengthComputable?c.total:void 0,l=f-r,w=a(l),C=f<=y;r=f;const A={loaded:f,total:y,progress:y?f/y:void 0,bytes:l,rate:w||void 0,estimated:w&&y&&C?(y-f)/w:void 0,event:c};A[t?"download":"upload"]=!0,e(A)}}const mY=typeof XMLHttpRequest<"u",gY=mY&&function(e){return new Promise(function(r,a){let c=e.data;const f=dl.from(e.headers).normalize();let{responseType:y,withXSRFToken:l}=e,w;function C(){e.cancelToken&&e.cancelToken.unsubscribe(w),e.signal&&e.signal.removeEventListener("abort",w)}let A;if(Rt.isFormData(c)){if(Ds.hasStandardBrowserEnv||Ds.hasStandardBrowserWebWorkerEnv)f.setContentType(!1);else if((A=f.getContentType())!==!1){const[U,...q]=A?A.split(";").map(F=>F.trim()).filter(Boolean):[];f.setContentType([U||"multipart/form-data",...q].join("; "))}}let M=new XMLHttpRequest;if(e.auth){const U=e.auth.username||"",q=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";f.set("Authorization","Basic "+btoa(U+":"+q))}const k=EL(e.baseURL,e.url);M.open(e.method.toUpperCase(),_L(k,e.params,e.paramsSerializer),!0),M.timeout=e.timeout;function N(){if(!M)return;const U=dl.from("getAllResponseHeaders"in M&&M.getAllResponseHeaders()),F={data:!y||y==="text"||y==="json"?M.responseText:M.response,status:M.status,statusText:M.statusText,headers:U,config:e,request:M};lY(function(V){r(V),C()},function(V){a(V),C()},F),M=null}if("onloadend"in M?M.onloadend=N:M.onreadystatechange=function(){!M||M.readyState!==4||M.status===0&&!(M.responseURL&&M.responseURL.indexOf("file:")===0)||setTimeout(N)},M.onabort=function(){M&&(a(new hr("Request aborted",hr.ECONNABORTED,e,M)),M=null)},M.onerror=function(){a(new hr("Network Error",hr.ERR_NETWORK,e,M)),M=null},M.ontimeout=function(){let q=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const F=e.transitional||xL;e.timeoutErrorMessage&&(q=e.timeoutErrorMessage),a(new hr(q,F.clarifyTimeoutError?hr.ETIMEDOUT:hr.ECONNABORTED,e,M)),M=null},Ds.hasStandardBrowserEnv&&(l&&Rt.isFunction(l)&&(l=l(e)),l||l!==!1&&hY(k))){const U=e.xsrfHeaderName&&e.xsrfCookieName&&cY.read(e.xsrfCookieName);U&&f.set(e.xsrfHeaderName,U)}c===void 0&&f.setContentType(null),"setRequestHeader"in M&&Rt.forEach(f.toJSON(),function(q,F){M.setRequestHeader(F,q)}),Rt.isUndefined(e.withCredentials)||(M.withCredentials=!!e.withCredentials),y&&y!=="json"&&(M.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&M.addEventListener("progress",yP(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&M.upload&&M.upload.addEventListener("progress",yP(e.onUploadProgress)),(e.cancelToken||e.signal)&&(w=U=>{M&&(a(!U||U.type?new Rm(null,e,M):U),M.abort(),M=null)},e.cancelToken&&e.cancelToken.subscribe(w),e.signal&&(e.signal.aborted?w():e.signal.addEventListener("abort",w)));const D=fY(k);if(D&&Ds.protocols.indexOf(D)===-1){a(new hr("Unsupported protocol "+D+":",hr.ERR_BAD_REQUEST,e));return}M.send(c||null)})},Ew={http:NK,xhr:gY};Rt.forEach(Ew,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const _P=e=>`- ${e}`,vY=e=>Rt.isFunction(e)||e===null||e===!1,CL={getAdapter:e=>{e=Rt.isArray(e)?e:[e];const{length:t}=e;let r,a;const c={};for(let f=0;f<t;f++){r=e[f];let y;if(a=r,!vY(r)&&(a=Ew[(y=String(r)).toLowerCase()],a===void 0))throw new hr(`Unknown adapter '${y}'`);if(a)break;c[y||"#"+f]=a}if(!a){const f=Object.entries(c).map(([l,w])=>`adapter ${l} `+(w===!1?"is not supported by the environment":"is not available in the build"));let y=t?f.length>1?`since :
`+f.map(_P).join(`
`):" "+_P(f[0]):"as no adapter specified";throw new hr("There is no suitable adapter to dispatch the request "+y,"ERR_NOT_SUPPORT")}return a},adapters:Ew};function k1(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Rm(null,e)}function xP(e){return k1(e),e.headers=dl.from(e.headers),e.data=z1.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),CL.getAdapter(e.adapter||hE.adapter)(e).then(function(a){return k1(e),a.data=z1.call(e,e.transformResponse,a),a.headers=dl.from(a.headers),a},function(a){return SL(a)||(k1(e),a&&a.response&&(a.response.data=z1.call(e,e.transformResponse,a.response),a.response.headers=dl.from(a.response.headers))),Promise.reject(a)})}const bP=e=>e instanceof dl?e.toJSON():e;function Eh(e,t){t=t||{};const r={};function a(C,A,M){return Rt.isPlainObject(C)&&Rt.isPlainObject(A)?Rt.merge.call({caseless:M},C,A):Rt.isPlainObject(A)?Rt.merge({},A):Rt.isArray(A)?A.slice():A}function c(C,A,M){if(Rt.isUndefined(A)){if(!Rt.isUndefined(C))return a(void 0,C,M)}else return a(C,A,M)}function f(C,A){if(!Rt.isUndefined(A))return a(void 0,A)}function y(C,A){if(Rt.isUndefined(A)){if(!Rt.isUndefined(C))return a(void 0,C)}else return a(void 0,A)}function l(C,A,M){if(M in t)return a(C,A);if(M in e)return a(void 0,C)}const w={url:f,method:f,data:f,baseURL:y,transformRequest:y,transformResponse:y,paramsSerializer:y,timeout:y,timeoutMessage:y,withCredentials:y,withXSRFToken:y,adapter:y,responseType:y,xsrfCookieName:y,xsrfHeaderName:y,onUploadProgress:y,onDownloadProgress:y,decompress:y,maxContentLength:y,maxBodyLength:y,beforeRedirect:y,transport:y,httpAgent:y,httpsAgent:y,cancelToken:y,socketPath:y,responseEncoding:y,validateStatus:l,headers:(C,A)=>c(bP(C),bP(A),!0)};return Rt.forEach(Object.keys(Object.assign({},e,t)),function(A){const M=w[A]||c,k=M(e[A],t[A],A);Rt.isUndefined(k)&&M!==l||(r[A]=k)}),r}const TL="1.6.2",fE={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{fE[e]=function(a){return typeof a===e||"a"+(t<1?"n ":" ")+e}});const wP={};fE.transitional=function(t,r,a){function c(f,y){return"[Axios v"+TL+"] Transitional option '"+f+"'"+y+(a?". "+a:"")}return(f,y,l)=>{if(t===!1)throw new hr(c(y," has been removed"+(r?" in "+r:"")),hr.ERR_DEPRECATED);return r&&!wP[y]&&(wP[y]=!0,console.warn(c(y," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(f,y,l):!0}};function yY(e,t,r){if(typeof e!="object")throw new hr("options must be an object",hr.ERR_BAD_OPTION_VALUE);const a=Object.keys(e);let c=a.length;for(;c-- >0;){const f=a[c],y=t[f];if(y){const l=e[f],w=l===void 0||y(l,f,e);if(w!==!0)throw new hr("option "+f+" must be "+w,hr.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new hr("Unknown option "+f,hr.ERR_BAD_OPTION)}}const Cw={assertOptions:yY,validators:fE},Jl=Cw.validators;class By{constructor(t){this.defaults=t,this.interceptors={request:new gP,response:new gP}}request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=Eh(this.defaults,r);const{transitional:a,paramsSerializer:c,headers:f}=r;a!==void 0&&Cw.assertOptions(a,{silentJSONParsing:Jl.transitional(Jl.boolean),forcedJSONParsing:Jl.transitional(Jl.boolean),clarifyTimeoutError:Jl.transitional(Jl.boolean)},!1),c!=null&&(Rt.isFunction(c)?r.paramsSerializer={serialize:c}:Cw.assertOptions(c,{encode:Jl.function,serialize:Jl.function},!0)),r.method=(r.method||this.defaults.method||"get").toLowerCase();let y=f&&Rt.merge(f.common,f[r.method]);f&&Rt.forEach(["delete","get","head","post","put","patch","common"],D=>{delete f[D]}),r.headers=dl.concat(y,f);const l=[];let w=!0;this.interceptors.request.forEach(function(U){typeof U.runWhen=="function"&&U.runWhen(r)===!1||(w=w&&U.synchronous,l.unshift(U.fulfilled,U.rejected))});const C=[];this.interceptors.response.forEach(function(U){C.push(U.fulfilled,U.rejected)});let A,M=0,k;if(!w){const D=[xP.bind(this),void 0];for(D.unshift.apply(D,l),D.push.apply(D,C),k=D.length,A=Promise.resolve(r);M<k;)A=A.then(D[M++],D[M++]);return A}k=l.length;let N=r;for(M=0;M<k;){const D=l[M++],U=l[M++];try{N=D(N)}catch(q){U.call(this,q);break}}try{A=xP.call(this,N)}catch(D){return Promise.reject(D)}for(M=0,k=C.length;M<k;)A=A.then(C[M++],C[M++]);return A}getUri(t){t=Eh(this.defaults,t);const r=EL(t.baseURL,t.url);return _L(r,t.params,t.paramsSerializer)}}Rt.forEach(["delete","get","head","options"],function(t){By.prototype[t]=function(r,a){return this.request(Eh(a||{},{method:t,url:r,data:(a||{}).data}))}});Rt.forEach(["post","put","patch"],function(t){function r(a){return function(f,y,l){return this.request(Eh(l||{},{method:t,headers:a?{"Content-Type":"multipart/form-data"}:{},url:f,data:y}))}}By.prototype[t]=r(),By.prototype[t+"Form"]=r(!0)});const Yv=By;class pE{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(f){r=f});const a=this;this.promise.then(c=>{if(!a._listeners)return;let f=a._listeners.length;for(;f-- >0;)a._listeners[f](c);a._listeners=null}),this.promise.then=c=>{let f;const y=new Promise(l=>{a.subscribe(l),f=l}).then(c);return y.cancel=function(){a.unsubscribe(f)},y},t(function(f,y,l){a.reason||(a.reason=new Rm(f,y,l),r(a.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}static source(){let t;return{token:new pE(function(c){t=c}),cancel:t}}}const _Y=pE;function xY(e){return function(r){return e.apply(null,r)}}function bY(e){return Rt.isObject(e)&&e.isAxiosError===!0}const Tw={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Tw).forEach(([e,t])=>{Tw[t]=e});const wY=Tw;function IL(e){const t=new Yv(e),r=sL(Yv.prototype.request,t);return Rt.extend(r,Yv.prototype,t,{allOwnKeys:!0}),Rt.extend(r,t,null,{allOwnKeys:!0}),r.create=function(c){return IL(Eh(e,c))},r}const Ri=IL(hE);Ri.Axios=Yv;Ri.CanceledError=Rm;Ri.CancelToken=_Y;Ri.isCancel=SL;Ri.VERSION=TL;Ri.toFormData=U0;Ri.AxiosError=hr;Ri.Cancel=Ri.CanceledError;Ri.all=function(t){return Promise.all(t)};Ri.spread=xY;Ri.isAxiosError=bY;Ri.mergeConfig=Eh;Ri.AxiosHeaders=dl;Ri.formToJSON=e=>wL(Rt.isHTMLForm(e)?new FormData(e):e);Ri.getAdapter=CL.getAdapter;Ri.HttpStatusCode=wY;Ri.default=Ri;const kY=Ri;function ML(e,t,r){if(e!==null)for(var a,c,f,y,l,w,C,A=0,M=0,k,N=e.type,D=N==="FeatureCollection",U=N==="Feature",q=D?e.features.length:1,F=0;F<q;F++){C=D?e.features[F].geometry:U?e.geometry:e,k=C?C.type==="GeometryCollection":!1,l=k?C.geometries.length:1;for(var j=0;j<l;j++){var V=0,X=0;if(y=k?C.geometries[j]:C,y!==null){w=y.coordinates;var te=y.type;switch(A=r&&(te==="Polygon"||te==="MultiPolygon")?1:0,te){case null:break;case"Point":if(t(w,M,F,V,X)===!1)return!1;M++,V++;break;case"LineString":case"MultiPoint":for(a=0;a<w.length;a++){if(t(w[a],M,F,V,X)===!1)return!1;M++,te==="MultiPoint"&&V++}te==="LineString"&&V++;break;case"Polygon":case"MultiLineString":for(a=0;a<w.length;a++){for(c=0;c<w[a].length-A;c++){if(t(w[a][c],M,F,V,X)===!1)return!1;M++}te==="MultiLineString"&&V++,te==="Polygon"&&X++}te==="Polygon"&&V++;break;case"MultiPolygon":for(a=0;a<w.length;a++){for(X=0,c=0;c<w[a].length;c++){for(f=0;f<w[a][c].length-A;f++){if(t(w[a][c][f],M,F,V,X)===!1)return!1;M++}X++}V++}break;case"GeometryCollection":for(a=0;a<y.geometries.length;a++)if(ML(y.geometries[a],t,r)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function SP(e){var t=[1/0,1/0,-1/0,-1/0];return ML(e,function(r){t[0]>r[0]&&(t[0]=r[0]),t[1]>r[1]&&(t[1]=r[1]),t[2]<r[0]&&(t[2]=r[0]),t[3]<r[1]&&(t[3]=r[1])}),t}SP.default=SP;export{YO as C,CY as I,oW as L,EY as R,TY as S,MY as T,PY as W,AY as a,jq as b,OY as c,kY as d,IY as e,SP as f,Nq as g,tP as h,kq as i,SY as j,Uq as m,T as r,zY as u};
