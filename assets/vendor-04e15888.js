function yP(e,t){for(var r=0;r<t.length;r++){const a=t[r];if(typeof a!="string"&&!Array.isArray(a)){for(const c in a)if(c!=="default"&&!(c in e)){const f=Object.getOwnPropertyDescriptor(a,c);f&&Object.defineProperty(e,c,f.get?f:{enumerable:!0,get:()=>a[c]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}var vp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function _c(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var _P={exports:{}},Ny={},xP={exports:{}},lr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pm=Symbol.for("react.element"),Z3=Symbol.for("react.portal"),X3=Symbol.for("react.fragment"),K3=Symbol.for("react.strict_mode"),Y3=Symbol.for("react.profiler"),J3=Symbol.for("react.provider"),Q3=Symbol.for("react.context"),e$=Symbol.for("react.forward_ref"),t$=Symbol.for("react.suspense"),n$=Symbol.for("react.memo"),r$=Symbol.for("react.lazy"),H2=Symbol.iterator;function i$(e){return e===null||typeof e!="object"?null:(e=H2&&e[H2]||e["@@iterator"],typeof e=="function"?e:null)}var bP={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},wP=Object.assign,SP={};function Sh(e,t,r){this.props=e,this.context=t,this.refs=SP,this.updater=r||bP}Sh.prototype.isReactComponent={};Sh.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Sh.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function EP(){}EP.prototype=Sh.prototype;function Tw(e,t,r){this.props=e,this.context=t,this.refs=SP,this.updater=r||bP}var Iw=Tw.prototype=new EP;Iw.constructor=Tw;wP(Iw,Sh.prototype);Iw.isPureReactComponent=!0;var G2=Array.isArray,CP=Object.prototype.hasOwnProperty,Mw={current:null},TP={key:!0,ref:!0,__self:!0,__source:!0};function IP(e,t,r){var a,c={},f=null,y=null;if(t!=null)for(a in t.ref!==void 0&&(y=t.ref),t.key!==void 0&&(f=""+t.key),t)CP.call(t,a)&&!TP.hasOwnProperty(a)&&(c[a]=t[a]);var l=arguments.length-2;if(l===1)c.children=r;else if(1<l){for(var w=Array(l),C=0;C<l;C++)w[C]=arguments[C+2];c.children=w}if(e&&e.defaultProps)for(a in l=e.defaultProps,l)c[a]===void 0&&(c[a]=l[a]);return{$$typeof:pm,type:e,key:f,ref:y,props:c,_owner:Mw.current}}function o$(e,t){return{$$typeof:pm,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Pw(e){return typeof e=="object"&&e!==null&&e.$$typeof===pm}function a$(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var W2=/\/+/g;function wx(e,t){return typeof e=="object"&&e!==null&&e.key!=null?a$(""+e.key):t.toString(36)}function Mv(e,t,r,a,c){var f=typeof e;(f==="undefined"||f==="boolean")&&(e=null);var y=!1;if(e===null)y=!0;else switch(f){case"string":case"number":y=!0;break;case"object":switch(e.$$typeof){case pm:case Z3:y=!0}}if(y)return y=e,c=c(y),e=a===""?"."+wx(y,0):a,G2(c)?(r="",e!=null&&(r=e.replace(W2,"$&/")+"/"),Mv(c,t,r,"",function(C){return C})):c!=null&&(Pw(c)&&(c=o$(c,r+(!c.key||y&&y.key===c.key?"":(""+c.key).replace(W2,"$&/")+"/")+e)),t.push(c)),1;if(y=0,a=a===""?".":a+":",G2(e))for(var l=0;l<e.length;l++){f=e[l];var w=a+wx(f,l);y+=Mv(f,t,r,w,c)}else if(w=i$(e),typeof w=="function")for(e=w.call(e),l=0;!(f=e.next()).done;)f=f.value,w=a+wx(f,l++),y+=Mv(f,t,r,w,c);else if(f==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return y}function Yg(e,t,r){if(e==null)return e;var a=[],c=0;return Mv(e,a,"","",function(f){return t.call(r,f,c++)}),a}function s$(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Io={current:null},Pv={transition:null},l$={ReactCurrentDispatcher:Io,ReactCurrentBatchConfig:Pv,ReactCurrentOwner:Mw};lr.Children={map:Yg,forEach:function(e,t,r){Yg(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Yg(e,function(){t++}),t},toArray:function(e){return Yg(e,function(t){return t})||[]},only:function(e){if(!Pw(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};lr.Component=Sh;lr.Fragment=X3;lr.Profiler=Y3;lr.PureComponent=Tw;lr.StrictMode=K3;lr.Suspense=t$;lr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=l$;lr.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=wP({},e.props),c=e.key,f=e.ref,y=e._owner;if(t!=null){if(t.ref!==void 0&&(f=t.ref,y=Mw.current),t.key!==void 0&&(c=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(w in t)CP.call(t,w)&&!TP.hasOwnProperty(w)&&(a[w]=t[w]===void 0&&l!==void 0?l[w]:t[w])}var w=arguments.length-2;if(w===1)a.children=r;else if(1<w){l=Array(w);for(var C=0;C<w;C++)l[C]=arguments[C+2];a.children=l}return{$$typeof:pm,type:e.type,key:c,ref:f,props:a,_owner:y}};lr.createContext=function(e){return e={$$typeof:Q3,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:J3,_context:e},e.Consumer=e};lr.createElement=IP;lr.createFactory=function(e){var t=IP.bind(null,e);return t.type=e,t};lr.createRef=function(){return{current:null}};lr.forwardRef=function(e){return{$$typeof:e$,render:e}};lr.isValidElement=Pw;lr.lazy=function(e){return{$$typeof:r$,_payload:{_status:-1,_result:e},_init:s$}};lr.memo=function(e,t){return{$$typeof:n$,type:e,compare:t===void 0?null:t}};lr.startTransition=function(e){var t=Pv.transition;Pv.transition={};try{e()}finally{Pv.transition=t}};lr.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};lr.useCallback=function(e,t){return Io.current.useCallback(e,t)};lr.useContext=function(e){return Io.current.useContext(e)};lr.useDebugValue=function(){};lr.useDeferredValue=function(e){return Io.current.useDeferredValue(e)};lr.useEffect=function(e,t){return Io.current.useEffect(e,t)};lr.useId=function(){return Io.current.useId()};lr.useImperativeHandle=function(e,t,r){return Io.current.useImperativeHandle(e,t,r)};lr.useInsertionEffect=function(e,t){return Io.current.useInsertionEffect(e,t)};lr.useLayoutEffect=function(e,t){return Io.current.useLayoutEffect(e,t)};lr.useMemo=function(e,t){return Io.current.useMemo(e,t)};lr.useReducer=function(e,t,r){return Io.current.useReducer(e,t,r)};lr.useRef=function(e){return Io.current.useRef(e)};lr.useState=function(e){return Io.current.useState(e)};lr.useSyncExternalStore=function(e,t,r){return Io.current.useSyncExternalStore(e,t,r)};lr.useTransition=function(){return Io.current.useTransition()};lr.version="18.2.0";xP.exports=lr;var T=xP.exports;const pt=_c(T),jy=yP({__proto__:null,default:pt},[T]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c$=T,u$=Symbol.for("react.element"),d$=Symbol.for("react.fragment"),h$=Object.prototype.hasOwnProperty,f$=c$.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$={key:!0,ref:!0,__self:!0,__source:!0};function MP(e,t,r){var a,c={},f=null,y=null;r!==void 0&&(f=""+r),t.key!==void 0&&(f=""+t.key),t.ref!==void 0&&(y=t.ref);for(a in t)h$.call(t,a)&&!p$.hasOwnProperty(a)&&(c[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps,t)c[a]===void 0&&(c[a]=t[a]);return{$$typeof:u$,type:e,key:f,ref:y,props:c,_owner:f$.current}}Ny.Fragment=d$;Ny.jsx=MP;Ny.jsxs=MP;_P.exports=Ny;var eY=_P.exports,PP={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function r(){for(var a=[],c=0;c<arguments.length;c++){var f=arguments[c];if(f){var y=typeof f;if(y==="string"||y==="number")a.push(f);else if(Array.isArray(f)){if(f.length){var l=r.apply(null,f);l&&a.push(l)}}else if(y==="object"){if(f.toString!==Object.prototype.toString&&!f.toString.toString().includes("[native code]")){a.push(f.toString());continue}for(var w in f)t.call(f,w)&&f[w]&&a.push(w)}}}return a.join(" ")}e.exports?(r.default=r,e.exports=r):window.classNames=r})()})(PP);var m$=PP.exports;const kt=_c(m$);function Cn(){return Cn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Cn.apply(this,arguments)}var AP={exports:{}},Fr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Aw=Symbol.for("react.element"),Rw=Symbol.for("react.portal"),Uy=Symbol.for("react.fragment"),Vy=Symbol.for("react.strict_mode"),Hy=Symbol.for("react.profiler"),Gy=Symbol.for("react.provider"),Wy=Symbol.for("react.context"),g$=Symbol.for("react.server_context"),qy=Symbol.for("react.forward_ref"),Zy=Symbol.for("react.suspense"),Xy=Symbol.for("react.suspense_list"),Ky=Symbol.for("react.memo"),Yy=Symbol.for("react.lazy"),v$=Symbol.for("react.offscreen"),RP;RP=Symbol.for("react.module.reference");function Ba(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Aw:switch(e=e.type,e){case Uy:case Hy:case Vy:case Zy:case Xy:return e;default:switch(e=e&&e.$$typeof,e){case g$:case Wy:case qy:case Yy:case Ky:case Gy:return e;default:return t}}case Rw:return t}}}Fr.ContextConsumer=Wy;Fr.ContextProvider=Gy;Fr.Element=Aw;Fr.ForwardRef=qy;Fr.Fragment=Uy;Fr.Lazy=Yy;Fr.Memo=Ky;Fr.Portal=Rw;Fr.Profiler=Hy;Fr.StrictMode=Vy;Fr.Suspense=Zy;Fr.SuspenseList=Xy;Fr.isAsyncMode=function(){return!1};Fr.isConcurrentMode=function(){return!1};Fr.isContextConsumer=function(e){return Ba(e)===Wy};Fr.isContextProvider=function(e){return Ba(e)===Gy};Fr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Aw};Fr.isForwardRef=function(e){return Ba(e)===qy};Fr.isFragment=function(e){return Ba(e)===Uy};Fr.isLazy=function(e){return Ba(e)===Yy};Fr.isMemo=function(e){return Ba(e)===Ky};Fr.isPortal=function(e){return Ba(e)===Rw};Fr.isProfiler=function(e){return Ba(e)===Hy};Fr.isStrictMode=function(e){return Ba(e)===Vy};Fr.isSuspense=function(e){return Ba(e)===Zy};Fr.isSuspenseList=function(e){return Ba(e)===Xy};Fr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Uy||e===Hy||e===Vy||e===Zy||e===Xy||e===v$||typeof e=="object"&&e!==null&&(e.$$typeof===Yy||e.$$typeof===Ky||e.$$typeof===Gy||e.$$typeof===Wy||e.$$typeof===qy||e.$$typeof===RP||e.getModuleId!==void 0)};Fr.typeOf=Ba;AP.exports=Fr;var OP=AP.exports;function hl(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=[];return pt.Children.forEach(e,function(a){a==null&&!t.keepEmpty||(Array.isArray(a)?r=r.concat(hl(a)):OP.isFragment(a)&&a.props?r=r.concat(hl(a.props.children,t)):r.push(a))}),r}var D1={},y$=function(t){};function _$(e,t){}function x$(e,t){}function b$(){D1={}}function zP(e,t,r){!t&&!D1[r]&&(e(!1,r),D1[r]=!0)}function Uo(e,t){zP(_$,e,t)}function w$(e,t){zP(x$,e,t)}Uo.preMessage=y$;Uo.resetWarned=b$;Uo.noteOnce=w$;function Kn(e){"@babel/helpers - typeof";return Kn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kn(e)}function S$(e,t){if(Kn(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(Kn(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function DP(e){var t=S$(e,"string");return Kn(t)==="symbol"?t:String(t)}function ke(e,t,r){return t=DP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function q2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),r.push.apply(r,a)}return r}function st(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?q2(Object(r),!0).forEach(function(a){ke(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q2(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}var LP={exports:{}},ua={},kP={exports:{}},$P={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(pe,He){var Be=pe.length;pe.push(He);e:for(;0<Be;){var Ze=Be-1>>>1,nt=pe[Ze];if(0<c(nt,He))pe[Ze]=He,pe[Be]=nt,Be=Ze;else break e}}function r(pe){return pe.length===0?null:pe[0]}function a(pe){if(pe.length===0)return null;var He=pe[0],Be=pe.pop();if(Be!==He){pe[0]=Be;e:for(var Ze=0,nt=pe.length,yt=nt>>>1;Ze<yt;){var Ot=2*(Ze+1)-1,Mt=pe[Ot],Ft=Ot+1,Nt=pe[Ft];if(0>c(Mt,Be))Ft<nt&&0>c(Nt,Mt)?(pe[Ze]=Nt,pe[Ft]=Be,Ze=Ft):(pe[Ze]=Mt,pe[Ot]=Be,Ze=Ot);else if(Ft<nt&&0>c(Nt,Be))pe[Ze]=Nt,pe[Ft]=Be,Ze=Ft;else break e}}return He}function c(pe,He){var Be=pe.sortIndex-He.sortIndex;return Be!==0?Be:pe.id-He.id}if(typeof performance=="object"&&typeof performance.now=="function"){var f=performance;e.unstable_now=function(){return f.now()}}else{var y=Date,l=y.now();e.unstable_now=function(){return y.now()-l}}var w=[],C=[],P=1,A=null,D=3,N=!1,F=!1,U=!1,Z=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function H(pe){for(var He=r(C);He!==null;){if(He.callback===null)a(C);else if(He.startTime<=pe)a(C),He.sortIndex=He.expirationTime,t(w,He);else break;He=r(C)}}function Y(pe){if(U=!1,H(pe),!F)if(r(w)!==null)F=!0,$e(ne);else{var He=r(C);He!==null&&je(Y,He.startTime-pe)}}function ne(pe,He){F=!1,U&&(U=!1,j(te),te=-1),N=!0;var Be=D;try{for(H(He),A=r(w);A!==null&&(!(A.expirationTime>He)||pe&&!he());){var Ze=A.callback;if(typeof Ze=="function"){A.callback=null,D=A.priorityLevel;var nt=Ze(A.expirationTime<=He);He=e.unstable_now(),typeof nt=="function"?A.callback=nt:A===r(w)&&a(w),H(He)}else a(w);A=r(w)}if(A!==null)var yt=!0;else{var Ot=r(C);Ot!==null&&je(Y,Ot.startTime-He),yt=!1}return yt}finally{A=null,D=Be,N=!1}}var re=!1,Q=null,te=-1,ee=5,ve=-1;function he(){return!(e.unstable_now()-ve<ee)}function oe(){if(Q!==null){var pe=e.unstable_now();ve=pe;var He=!0;try{He=Q(!0,pe)}finally{He?fe():(re=!1,Q=null)}}else re=!1}var fe;if(typeof B=="function")fe=function(){B(oe)};else if(typeof MessageChannel<"u"){var Te=new MessageChannel,Fe=Te.port2;Te.port1.onmessage=oe,fe=function(){Fe.postMessage(null)}}else fe=function(){Z(oe,0)};function $e(pe){Q=pe,re||(re=!0,fe())}function je(pe,He){te=Z(function(){pe(e.unstable_now())},He)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(pe){pe.callback=null},e.unstable_continueExecution=function(){F||N||(F=!0,$e(ne))},e.unstable_forceFrameRate=function(pe){0>pe||125<pe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ee=0<pe?Math.floor(1e3/pe):5},e.unstable_getCurrentPriorityLevel=function(){return D},e.unstable_getFirstCallbackNode=function(){return r(w)},e.unstable_next=function(pe){switch(D){case 1:case 2:case 3:var He=3;break;default:He=D}var Be=D;D=He;try{return pe()}finally{D=Be}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(pe,He){switch(pe){case 1:case 2:case 3:case 4:case 5:break;default:pe=3}var Be=D;D=pe;try{return He()}finally{D=Be}},e.unstable_scheduleCallback=function(pe,He,Be){var Ze=e.unstable_now();switch(typeof Be=="object"&&Be!==null?(Be=Be.delay,Be=typeof Be=="number"&&0<Be?Ze+Be:Ze):Be=Ze,pe){case 1:var nt=-1;break;case 2:nt=250;break;case 5:nt=1073741823;break;case 4:nt=1e4;break;default:nt=5e3}return nt=Be+nt,pe={id:P++,callback:He,priorityLevel:pe,startTime:Be,expirationTime:nt,sortIndex:-1},Be>Ze?(pe.sortIndex=Be,t(C,pe),r(w)===null&&pe===r(C)&&(U?(j(te),te=-1):U=!0,je(Y,Be-Ze))):(pe.sortIndex=nt,t(w,pe),F||N||(F=!0,$e(ne))),pe},e.unstable_shouldYield=he,e.unstable_wrapCallback=function(pe){var He=D;return function(){var Be=D;D=He;try{return pe.apply(this,arguments)}finally{D=Be}}}})($P);kP.exports=$P;var E$=kP.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FP=T,la=E$;function Ht(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var BP=new Set,Np={};function Iu(e,t){lh(e,t),lh(e+"Capture",t)}function lh(e,t){for(Np[e]=t,e=0;e<t.length;e++)BP.add(t[e])}var fl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),L1=Object.prototype.hasOwnProperty,C$=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Z2={},X2={};function T$(e){return L1.call(X2,e)?!0:L1.call(Z2,e)?!1:C$.test(e)?X2[e]=!0:(Z2[e]=!0,!1)}function I$(e,t,r,a){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return a?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function M$(e,t,r,a){if(t===null||typeof t>"u"||I$(e,t,r,a))return!0;if(a)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Mo(e,t,r,a,c,f,y){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=a,this.attributeNamespace=c,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=f,this.removeEmptyString=y}var to={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){to[e]=new Mo(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];to[t]=new Mo(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){to[e]=new Mo(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){to[e]=new Mo(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){to[e]=new Mo(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){to[e]=new Mo(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){to[e]=new Mo(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){to[e]=new Mo(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){to[e]=new Mo(e,5,!1,e.toLowerCase(),null,!1,!1)});var Ow=/[\-:]([a-z])/g;function zw(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Ow,zw);to[t]=new Mo(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Ow,zw);to[t]=new Mo(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Ow,zw);to[t]=new Mo(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){to[e]=new Mo(e,1,!1,e.toLowerCase(),null,!1,!1)});to.xlinkHref=new Mo("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){to[e]=new Mo(e,1,!1,e.toLowerCase(),null,!0,!0)});function Dw(e,t,r,a){var c=to.hasOwnProperty(t)?to[t]:null;(c!==null?c.type!==0:a||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(M$(t,r,c,a)&&(r=null),a||c===null?T$(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):c.mustUseProperty?e[c.propertyName]=r===null?c.type===3?!1:"":r:(t=c.attributeName,a=c.attributeNamespace,r===null?e.removeAttribute(t):(c=c.type,r=c===3||c===4&&r===!0?"":""+r,a?e.setAttributeNS(a,t,r):e.setAttribute(t,r))))}var _l=FP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Jg=Symbol.for("react.element"),$d=Symbol.for("react.portal"),Fd=Symbol.for("react.fragment"),Lw=Symbol.for("react.strict_mode"),k1=Symbol.for("react.profiler"),NP=Symbol.for("react.provider"),jP=Symbol.for("react.context"),kw=Symbol.for("react.forward_ref"),$1=Symbol.for("react.suspense"),F1=Symbol.for("react.suspense_list"),$w=Symbol.for("react.memo"),Ql=Symbol.for("react.lazy"),UP=Symbol.for("react.offscreen"),K2=Symbol.iterator;function np(e){return e===null||typeof e!="object"?null:(e=K2&&e[K2]||e["@@iterator"],typeof e=="function"?e:null)}var mi=Object.assign,Sx;function yp(e){if(Sx===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Sx=t&&t[1]||""}return`
`+Sx+e}var Ex=!1;function Cx(e,t){if(!e||Ex)return"";Ex=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(C){var a=C}Reflect.construct(e,[],t)}else{try{t.call()}catch(C){a=C}e.call(t.prototype)}else{try{throw Error()}catch(C){a=C}e()}}catch(C){if(C&&a&&typeof C.stack=="string"){for(var c=C.stack.split(`
`),f=a.stack.split(`
`),y=c.length-1,l=f.length-1;1<=y&&0<=l&&c[y]!==f[l];)l--;for(;1<=y&&0<=l;y--,l--)if(c[y]!==f[l]){if(y!==1||l!==1)do if(y--,l--,0>l||c[y]!==f[l]){var w=`
`+c[y].replace(" at new "," at ");return e.displayName&&w.includes("<anonymous>")&&(w=w.replace("<anonymous>",e.displayName)),w}while(1<=y&&0<=l);break}}}finally{Ex=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?yp(e):""}function P$(e){switch(e.tag){case 5:return yp(e.type);case 16:return yp("Lazy");case 13:return yp("Suspense");case 19:return yp("SuspenseList");case 0:case 2:case 15:return e=Cx(e.type,!1),e;case 11:return e=Cx(e.type.render,!1),e;case 1:return e=Cx(e.type,!0),e;default:return""}}function B1(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Fd:return"Fragment";case $d:return"Portal";case k1:return"Profiler";case Lw:return"StrictMode";case $1:return"Suspense";case F1:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case jP:return(e.displayName||"Context")+".Consumer";case NP:return(e._context.displayName||"Context")+".Provider";case kw:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case $w:return t=e.displayName||null,t!==null?t:B1(e.type)||"Memo";case Ql:t=e._payload,e=e._init;try{return B1(e(t))}catch{}}return null}function A$(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B1(t);case 8:return t===Lw?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function mc(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function VP(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function R$(e){var t=VP(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var c=r.get,f=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(y){a=""+y,f.call(this,y)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return a},setValue:function(y){a=""+y},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Qg(e){e._valueTracker||(e._valueTracker=R$(e))}function HP(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),a="";return e&&(a=VP(e)?e.checked?"true":"false":e.value),e=a,e!==r?(t.setValue(e),!0):!1}function Jv(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function N1(e,t){var r=t.checked;return mi({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Y2(e,t){var r=t.defaultValue==null?"":t.defaultValue,a=t.checked!=null?t.checked:t.defaultChecked;r=mc(t.value!=null?t.value:r),e._wrapperState={initialChecked:a,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function GP(e,t){t=t.checked,t!=null&&Dw(e,"checked",t,!1)}function j1(e,t){GP(e,t);var r=mc(t.value),a=t.type;if(r!=null)a==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?U1(e,t.type,r):t.hasOwnProperty("defaultValue")&&U1(e,t.type,mc(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function J2(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!(a!=="submit"&&a!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function U1(e,t,r){(t!=="number"||Jv(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var _p=Array.isArray;function Qd(e,t,r,a){if(e=e.options,t){t={};for(var c=0;c<r.length;c++)t["$"+r[c]]=!0;for(r=0;r<e.length;r++)c=t.hasOwnProperty("$"+e[r].value),e[r].selected!==c&&(e[r].selected=c),c&&a&&(e[r].defaultSelected=!0)}else{for(r=""+mc(r),t=null,c=0;c<e.length;c++){if(e[c].value===r){e[c].selected=!0,a&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function V1(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Ht(91));return mi({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Q2(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(Ht(92));if(_p(r)){if(1<r.length)throw Error(Ht(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:mc(r)}}function WP(e,t){var r=mc(t.value),a=mc(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),a!=null&&(e.defaultValue=""+a)}function eT(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function qP(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function H1(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?qP(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ev,ZP=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,a,c){MSApp.execUnsafeLocalFunction(function(){return e(t,r,a,c)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ev=ev||document.createElement("div"),ev.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ev.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function jp(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Sp={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},O$=["Webkit","ms","Moz","O"];Object.keys(Sp).forEach(function(e){O$.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Sp[t]=Sp[e]})});function XP(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Sp.hasOwnProperty(e)&&Sp[e]?(""+t).trim():t+"px"}function KP(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var a=r.indexOf("--")===0,c=XP(r,t[r],a);r==="float"&&(r="cssFloat"),a?e.setProperty(r,c):e[r]=c}}var z$=mi({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function G1(e,t){if(t){if(z$[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Ht(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Ht(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Ht(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Ht(62))}}function W1(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var q1=null;function Fw(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Z1=null,eh=null,th=null;function tT(e){if(e=vm(e)){if(typeof Z1!="function")throw Error(Ht(280));var t=e.stateNode;t&&(t=n0(t),Z1(e.stateNode,e.type,t))}}function YP(e){eh?th?th.push(e):th=[e]:eh=e}function JP(){if(eh){var e=eh,t=th;if(th=eh=null,tT(e),t)for(e=0;e<t.length;e++)tT(t[e])}}function QP(e,t){return e(t)}function eA(){}var Tx=!1;function tA(e,t,r){if(Tx)return e(t,r);Tx=!0;try{return QP(e,t,r)}finally{Tx=!1,(eh!==null||th!==null)&&(eA(),JP())}}function Up(e,t){var r=e.stateNode;if(r===null)return null;var a=n0(r);if(a===null)return null;r=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(Ht(231,t,typeof r));return r}var X1=!1;if(fl)try{var rp={};Object.defineProperty(rp,"passive",{get:function(){X1=!0}}),window.addEventListener("test",rp,rp),window.removeEventListener("test",rp,rp)}catch{X1=!1}function D$(e,t,r,a,c,f,y,l,w){var C=Array.prototype.slice.call(arguments,3);try{t.apply(r,C)}catch(P){this.onError(P)}}var Ep=!1,Qv=null,ey=!1,K1=null,L$={onError:function(e){Ep=!0,Qv=e}};function k$(e,t,r,a,c,f,y,l,w){Ep=!1,Qv=null,D$.apply(L$,arguments)}function $$(e,t,r,a,c,f,y,l,w){if(k$.apply(this,arguments),Ep){if(Ep){var C=Qv;Ep=!1,Qv=null}else throw Error(Ht(198));ey||(ey=!0,K1=C)}}function Mu(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function nA(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function nT(e){if(Mu(e)!==e)throw Error(Ht(188))}function F$(e){var t=e.alternate;if(!t){if(t=Mu(e),t===null)throw Error(Ht(188));return t!==e?null:e}for(var r=e,a=t;;){var c=r.return;if(c===null)break;var f=c.alternate;if(f===null){if(a=c.return,a!==null){r=a;continue}break}if(c.child===f.child){for(f=c.child;f;){if(f===r)return nT(c),e;if(f===a)return nT(c),t;f=f.sibling}throw Error(Ht(188))}if(r.return!==a.return)r=c,a=f;else{for(var y=!1,l=c.child;l;){if(l===r){y=!0,r=c,a=f;break}if(l===a){y=!0,a=c,r=f;break}l=l.sibling}if(!y){for(l=f.child;l;){if(l===r){y=!0,r=f,a=c;break}if(l===a){y=!0,a=f,r=c;break}l=l.sibling}if(!y)throw Error(Ht(189))}}if(r.alternate!==a)throw Error(Ht(190))}if(r.tag!==3)throw Error(Ht(188));return r.stateNode.current===r?e:t}function rA(e){return e=F$(e),e!==null?iA(e):null}function iA(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=iA(e);if(t!==null)return t;e=e.sibling}return null}var oA=la.unstable_scheduleCallback,rT=la.unstable_cancelCallback,B$=la.unstable_shouldYield,N$=la.unstable_requestPaint,wi=la.unstable_now,j$=la.unstable_getCurrentPriorityLevel,Bw=la.unstable_ImmediatePriority,aA=la.unstable_UserBlockingPriority,ty=la.unstable_NormalPriority,U$=la.unstable_LowPriority,sA=la.unstable_IdlePriority,Jy=null,ks=null;function V$(e){if(ks&&typeof ks.onCommitFiberRoot=="function")try{ks.onCommitFiberRoot(Jy,e,void 0,(e.current.flags&128)===128)}catch{}}var ds=Math.clz32?Math.clz32:W$,H$=Math.log,G$=Math.LN2;function W$(e){return e>>>=0,e===0?32:31-(H$(e)/G$|0)|0}var tv=64,nv=4194304;function xp(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ny(e,t){var r=e.pendingLanes;if(r===0)return 0;var a=0,c=e.suspendedLanes,f=e.pingedLanes,y=r&268435455;if(y!==0){var l=y&~c;l!==0?a=xp(l):(f&=y,f!==0&&(a=xp(f)))}else y=r&~c,y!==0?a=xp(y):f!==0&&(a=xp(f));if(a===0)return 0;if(t!==0&&t!==a&&!(t&c)&&(c=a&-a,f=t&-t,c>=f||c===16&&(f&4194240)!==0))return t;if(a&4&&(a|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=a;0<t;)r=31-ds(t),c=1<<r,a|=e[r],t&=~c;return a}function q$(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Z$(e,t){for(var r=e.suspendedLanes,a=e.pingedLanes,c=e.expirationTimes,f=e.pendingLanes;0<f;){var y=31-ds(f),l=1<<y,w=c[y];w===-1?(!(l&r)||l&a)&&(c[y]=q$(l,t)):w<=t&&(e.expiredLanes|=l),f&=~l}}function Y1(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function lA(){var e=tv;return tv<<=1,!(tv&4194240)&&(tv=64),e}function Ix(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function mm(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ds(t),e[t]=r}function X$(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<r;){var c=31-ds(r),f=1<<c;t[c]=0,a[c]=-1,e[c]=-1,r&=~f}}function Nw(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var a=31-ds(r),c=1<<a;c&t|e[a]&t&&(e[a]|=t),r&=~c}}var kr=0;function cA(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var uA,jw,dA,hA,fA,J1=!1,rv=[],sc=null,lc=null,cc=null,Vp=new Map,Hp=new Map,tc=[],K$="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function iT(e,t){switch(e){case"focusin":case"focusout":sc=null;break;case"dragenter":case"dragleave":lc=null;break;case"mouseover":case"mouseout":cc=null;break;case"pointerover":case"pointerout":Vp.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hp.delete(t.pointerId)}}function ip(e,t,r,a,c,f){return e===null||e.nativeEvent!==f?(e={blockedOn:t,domEventName:r,eventSystemFlags:a,nativeEvent:f,targetContainers:[c]},t!==null&&(t=vm(t),t!==null&&jw(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function Y$(e,t,r,a,c){switch(t){case"focusin":return sc=ip(sc,e,t,r,a,c),!0;case"dragenter":return lc=ip(lc,e,t,r,a,c),!0;case"mouseover":return cc=ip(cc,e,t,r,a,c),!0;case"pointerover":var f=c.pointerId;return Vp.set(f,ip(Vp.get(f)||null,e,t,r,a,c)),!0;case"gotpointercapture":return f=c.pointerId,Hp.set(f,ip(Hp.get(f)||null,e,t,r,a,c)),!0}return!1}function pA(e){var t=lu(e.target);if(t!==null){var r=Mu(t);if(r!==null){if(t=r.tag,t===13){if(t=nA(r),t!==null){e.blockedOn=t,fA(e.priority,function(){dA(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Av(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Q1(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var a=new r.constructor(r.type,r);q1=a,r.target.dispatchEvent(a),q1=null}else return t=vm(r),t!==null&&jw(t),e.blockedOn=r,!1;t.shift()}return!0}function oT(e,t,r){Av(e)&&r.delete(t)}function J$(){J1=!1,sc!==null&&Av(sc)&&(sc=null),lc!==null&&Av(lc)&&(lc=null),cc!==null&&Av(cc)&&(cc=null),Vp.forEach(oT),Hp.forEach(oT)}function op(e,t){e.blockedOn===t&&(e.blockedOn=null,J1||(J1=!0,la.unstable_scheduleCallback(la.unstable_NormalPriority,J$)))}function Gp(e){function t(c){return op(c,e)}if(0<rv.length){op(rv[0],e);for(var r=1;r<rv.length;r++){var a=rv[r];a.blockedOn===e&&(a.blockedOn=null)}}for(sc!==null&&op(sc,e),lc!==null&&op(lc,e),cc!==null&&op(cc,e),Vp.forEach(t),Hp.forEach(t),r=0;r<tc.length;r++)a=tc[r],a.blockedOn===e&&(a.blockedOn=null);for(;0<tc.length&&(r=tc[0],r.blockedOn===null);)pA(r),r.blockedOn===null&&tc.shift()}var nh=_l.ReactCurrentBatchConfig,ry=!0;function Q$(e,t,r,a){var c=kr,f=nh.transition;nh.transition=null;try{kr=1,Uw(e,t,r,a)}finally{kr=c,nh.transition=f}}function eF(e,t,r,a){var c=kr,f=nh.transition;nh.transition=null;try{kr=4,Uw(e,t,r,a)}finally{kr=c,nh.transition=f}}function Uw(e,t,r,a){if(ry){var c=Q1(e,t,r,a);if(c===null)$x(e,t,a,iy,r),iT(e,a);else if(Y$(c,e,t,r,a))a.stopPropagation();else if(iT(e,a),t&4&&-1<K$.indexOf(e)){for(;c!==null;){var f=vm(c);if(f!==null&&uA(f),f=Q1(e,t,r,a),f===null&&$x(e,t,a,iy,r),f===c)break;c=f}c!==null&&a.stopPropagation()}else $x(e,t,a,null,r)}}var iy=null;function Q1(e,t,r,a){if(iy=null,e=Fw(a),e=lu(e),e!==null)if(t=Mu(e),t===null)e=null;else if(r=t.tag,r===13){if(e=nA(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return iy=e,null}function mA(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(j$()){case Bw:return 1;case aA:return 4;case ty:case U$:return 16;case sA:return 536870912;default:return 16}default:return 16}}var rc=null,Vw=null,Rv=null;function gA(){if(Rv)return Rv;var e,t=Vw,r=t.length,a,c="value"in rc?rc.value:rc.textContent,f=c.length;for(e=0;e<r&&t[e]===c[e];e++);var y=r-e;for(a=1;a<=y&&t[r-a]===c[f-a];a++);return Rv=c.slice(e,1<a?1-a:void 0)}function Ov(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function iv(){return!0}function aT(){return!1}function da(e){function t(r,a,c,f,y){this._reactName=r,this._targetInst=c,this.type=a,this.nativeEvent=f,this.target=y,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(f):f[l]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?iv:aT,this.isPropagationStopped=aT,this}return mi(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=iv)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=iv)},persist:function(){},isPersistent:iv}),t}var Eh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Hw=da(Eh),gm=mi({},Eh,{view:0,detail:0}),tF=da(gm),Mx,Px,ap,Qy=mi({},gm,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gw,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ap&&(ap&&e.type==="mousemove"?(Mx=e.screenX-ap.screenX,Px=e.screenY-ap.screenY):Px=Mx=0,ap=e),Mx)},movementY:function(e){return"movementY"in e?e.movementY:Px}}),sT=da(Qy),nF=mi({},Qy,{dataTransfer:0}),rF=da(nF),iF=mi({},gm,{relatedTarget:0}),Ax=da(iF),oF=mi({},Eh,{animationName:0,elapsedTime:0,pseudoElement:0}),aF=da(oF),sF=mi({},Eh,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),lF=da(sF),cF=mi({},Eh,{data:0}),lT=da(cF),uF={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dF={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hF={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fF(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=hF[e])?!!t[e]:!1}function Gw(){return fF}var pF=mi({},gm,{key:function(e){if(e.key){var t=uF[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ov(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?dF[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gw,charCode:function(e){return e.type==="keypress"?Ov(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ov(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),mF=da(pF),gF=mi({},Qy,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cT=da(gF),vF=mi({},gm,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gw}),yF=da(vF),_F=mi({},Eh,{propertyName:0,elapsedTime:0,pseudoElement:0}),xF=da(_F),bF=mi({},Qy,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),wF=da(bF),SF=[9,13,27,32],Ww=fl&&"CompositionEvent"in window,Cp=null;fl&&"documentMode"in document&&(Cp=document.documentMode);var EF=fl&&"TextEvent"in window&&!Cp,vA=fl&&(!Ww||Cp&&8<Cp&&11>=Cp),uT=String.fromCharCode(32),dT=!1;function yA(e,t){switch(e){case"keyup":return SF.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _A(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Bd=!1;function CF(e,t){switch(e){case"compositionend":return _A(t);case"keypress":return t.which!==32?null:(dT=!0,uT);case"textInput":return e=t.data,e===uT&&dT?null:e;default:return null}}function TF(e,t){if(Bd)return e==="compositionend"||!Ww&&yA(e,t)?(e=gA(),Rv=Vw=rc=null,Bd=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return vA&&t.locale!=="ko"?null:t.data;default:return null}}var IF={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hT(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!IF[e.type]:t==="textarea"}function xA(e,t,r,a){YP(a),t=oy(t,"onChange"),0<t.length&&(r=new Hw("onChange","change",null,r,a),e.push({event:r,listeners:t}))}var Tp=null,Wp=null;function MF(e){RA(e,0)}function e0(e){var t=Ud(e);if(HP(t))return e}function PF(e,t){if(e==="change")return t}var bA=!1;if(fl){var Rx;if(fl){var Ox="oninput"in document;if(!Ox){var fT=document.createElement("div");fT.setAttribute("oninput","return;"),Ox=typeof fT.oninput=="function"}Rx=Ox}else Rx=!1;bA=Rx&&(!document.documentMode||9<document.documentMode)}function pT(){Tp&&(Tp.detachEvent("onpropertychange",wA),Wp=Tp=null)}function wA(e){if(e.propertyName==="value"&&e0(Wp)){var t=[];xA(t,Wp,e,Fw(e)),tA(MF,t)}}function AF(e,t,r){e==="focusin"?(pT(),Tp=t,Wp=r,Tp.attachEvent("onpropertychange",wA)):e==="focusout"&&pT()}function RF(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return e0(Wp)}function OF(e,t){if(e==="click")return e0(t)}function zF(e,t){if(e==="input"||e==="change")return e0(t)}function DF(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ps=typeof Object.is=="function"?Object.is:DF;function qp(e,t){if(ps(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),a=Object.keys(t);if(r.length!==a.length)return!1;for(a=0;a<r.length;a++){var c=r[a];if(!L1.call(t,c)||!ps(e[c],t[c]))return!1}return!0}function mT(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function gT(e,t){var r=mT(e);e=0;for(var a;r;){if(r.nodeType===3){if(a=e+r.textContent.length,e<=t&&a>=t)return{node:r,offset:t-e};e=a}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=mT(r)}}function SA(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?SA(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function EA(){for(var e=window,t=Jv();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Jv(e.document)}return t}function qw(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function LF(e){var t=EA(),r=e.focusedElem,a=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&SA(r.ownerDocument.documentElement,r)){if(a!==null&&qw(r)){if(t=a.start,e=a.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var c=r.textContent.length,f=Math.min(a.start,c);a=a.end===void 0?f:Math.min(a.end,c),!e.extend&&f>a&&(c=a,a=f,f=c),c=gT(r,f);var y=gT(r,a);c&&y&&(e.rangeCount!==1||e.anchorNode!==c.node||e.anchorOffset!==c.offset||e.focusNode!==y.node||e.focusOffset!==y.offset)&&(t=t.createRange(),t.setStart(c.node,c.offset),e.removeAllRanges(),f>a?(e.addRange(t),e.extend(y.node,y.offset)):(t.setEnd(y.node,y.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var kF=fl&&"documentMode"in document&&11>=document.documentMode,Nd=null,eb=null,Ip=null,tb=!1;function vT(e,t,r){var a=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;tb||Nd==null||Nd!==Jv(a)||(a=Nd,"selectionStart"in a&&qw(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Ip&&qp(Ip,a)||(Ip=a,a=oy(eb,"onSelect"),0<a.length&&(t=new Hw("onSelect","select",null,t,r),e.push({event:t,listeners:a}),t.target=Nd)))}function ov(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var jd={animationend:ov("Animation","AnimationEnd"),animationiteration:ov("Animation","AnimationIteration"),animationstart:ov("Animation","AnimationStart"),transitionend:ov("Transition","TransitionEnd")},zx={},CA={};fl&&(CA=document.createElement("div").style,"AnimationEvent"in window||(delete jd.animationend.animation,delete jd.animationiteration.animation,delete jd.animationstart.animation),"TransitionEvent"in window||delete jd.transitionend.transition);function t0(e){if(zx[e])return zx[e];if(!jd[e])return e;var t=jd[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in CA)return zx[e]=t[r];return e}var TA=t0("animationend"),IA=t0("animationiteration"),MA=t0("animationstart"),PA=t0("transitionend"),AA=new Map,yT="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function xc(e,t){AA.set(e,t),Iu(t,[e])}for(var Dx=0;Dx<yT.length;Dx++){var Lx=yT[Dx],$F=Lx.toLowerCase(),FF=Lx[0].toUpperCase()+Lx.slice(1);xc($F,"on"+FF)}xc(TA,"onAnimationEnd");xc(IA,"onAnimationIteration");xc(MA,"onAnimationStart");xc("dblclick","onDoubleClick");xc("focusin","onFocus");xc("focusout","onBlur");xc(PA,"onTransitionEnd");lh("onMouseEnter",["mouseout","mouseover"]);lh("onMouseLeave",["mouseout","mouseover"]);lh("onPointerEnter",["pointerout","pointerover"]);lh("onPointerLeave",["pointerout","pointerover"]);Iu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Iu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Iu("onBeforeInput",["compositionend","keypress","textInput","paste"]);Iu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Iu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Iu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var bp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),BF=new Set("cancel close invalid load scroll toggle".split(" ").concat(bp));function _T(e,t,r){var a=e.type||"unknown-event";e.currentTarget=r,$$(a,t,void 0,e),e.currentTarget=null}function RA(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var a=e[r],c=a.event;a=a.listeners;e:{var f=void 0;if(t)for(var y=a.length-1;0<=y;y--){var l=a[y],w=l.instance,C=l.currentTarget;if(l=l.listener,w!==f&&c.isPropagationStopped())break e;_T(c,l,C),f=w}else for(y=0;y<a.length;y++){if(l=a[y],w=l.instance,C=l.currentTarget,l=l.listener,w!==f&&c.isPropagationStopped())break e;_T(c,l,C),f=w}}}if(ey)throw e=K1,ey=!1,K1=null,e}function ti(e,t){var r=t[ab];r===void 0&&(r=t[ab]=new Set);var a=e+"__bubble";r.has(a)||(OA(t,e,2,!1),r.add(a))}function kx(e,t,r){var a=0;t&&(a|=4),OA(r,e,a,t)}var av="_reactListening"+Math.random().toString(36).slice(2);function Zp(e){if(!e[av]){e[av]=!0,BP.forEach(function(r){r!=="selectionchange"&&(BF.has(r)||kx(r,!1,e),kx(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[av]||(t[av]=!0,kx("selectionchange",!1,t))}}function OA(e,t,r,a){switch(mA(t)){case 1:var c=Q$;break;case 4:c=eF;break;default:c=Uw}r=c.bind(null,t,r,e),c=void 0,!X1||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),a?c!==void 0?e.addEventListener(t,r,{capture:!0,passive:c}):e.addEventListener(t,r,!0):c!==void 0?e.addEventListener(t,r,{passive:c}):e.addEventListener(t,r,!1)}function $x(e,t,r,a,c){var f=a;if(!(t&1)&&!(t&2)&&a!==null)e:for(;;){if(a===null)return;var y=a.tag;if(y===3||y===4){var l=a.stateNode.containerInfo;if(l===c||l.nodeType===8&&l.parentNode===c)break;if(y===4)for(y=a.return;y!==null;){var w=y.tag;if((w===3||w===4)&&(w=y.stateNode.containerInfo,w===c||w.nodeType===8&&w.parentNode===c))return;y=y.return}for(;l!==null;){if(y=lu(l),y===null)return;if(w=y.tag,w===5||w===6){a=f=y;continue e}l=l.parentNode}}a=a.return}tA(function(){var C=f,P=Fw(r),A=[];e:{var D=AA.get(e);if(D!==void 0){var N=Hw,F=e;switch(e){case"keypress":if(Ov(r)===0)break e;case"keydown":case"keyup":N=mF;break;case"focusin":F="focus",N=Ax;break;case"focusout":F="blur",N=Ax;break;case"beforeblur":case"afterblur":N=Ax;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":N=sT;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":N=rF;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":N=yF;break;case TA:case IA:case MA:N=aF;break;case PA:N=xF;break;case"scroll":N=tF;break;case"wheel":N=wF;break;case"copy":case"cut":case"paste":N=lF;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":N=cT}var U=(t&4)!==0,Z=!U&&e==="scroll",j=U?D!==null?D+"Capture":null:D;U=[];for(var B=C,H;B!==null;){H=B;var Y=H.stateNode;if(H.tag===5&&Y!==null&&(H=Y,j!==null&&(Y=Up(B,j),Y!=null&&U.push(Xp(B,Y,H)))),Z)break;B=B.return}0<U.length&&(D=new N(D,F,null,r,P),A.push({event:D,listeners:U}))}}if(!(t&7)){e:{if(D=e==="mouseover"||e==="pointerover",N=e==="mouseout"||e==="pointerout",D&&r!==q1&&(F=r.relatedTarget||r.fromElement)&&(lu(F)||F[pl]))break e;if((N||D)&&(D=P.window===P?P:(D=P.ownerDocument)?D.defaultView||D.parentWindow:window,N?(F=r.relatedTarget||r.toElement,N=C,F=F?lu(F):null,F!==null&&(Z=Mu(F),F!==Z||F.tag!==5&&F.tag!==6)&&(F=null)):(N=null,F=C),N!==F)){if(U=sT,Y="onMouseLeave",j="onMouseEnter",B="mouse",(e==="pointerout"||e==="pointerover")&&(U=cT,Y="onPointerLeave",j="onPointerEnter",B="pointer"),Z=N==null?D:Ud(N),H=F==null?D:Ud(F),D=new U(Y,B+"leave",N,r,P),D.target=Z,D.relatedTarget=H,Y=null,lu(P)===C&&(U=new U(j,B+"enter",F,r,P),U.target=H,U.relatedTarget=Z,Y=U),Z=Y,N&&F)t:{for(U=N,j=F,B=0,H=U;H;H=Cd(H))B++;for(H=0,Y=j;Y;Y=Cd(Y))H++;for(;0<B-H;)U=Cd(U),B--;for(;0<H-B;)j=Cd(j),H--;for(;B--;){if(U===j||j!==null&&U===j.alternate)break t;U=Cd(U),j=Cd(j)}U=null}else U=null;N!==null&&xT(A,D,N,U,!1),F!==null&&Z!==null&&xT(A,Z,F,U,!0)}}e:{if(D=C?Ud(C):window,N=D.nodeName&&D.nodeName.toLowerCase(),N==="select"||N==="input"&&D.type==="file")var ne=PF;else if(hT(D))if(bA)ne=zF;else{ne=RF;var re=AF}else(N=D.nodeName)&&N.toLowerCase()==="input"&&(D.type==="checkbox"||D.type==="radio")&&(ne=OF);if(ne&&(ne=ne(e,C))){xA(A,ne,r,P);break e}re&&re(e,D,C),e==="focusout"&&(re=D._wrapperState)&&re.controlled&&D.type==="number"&&U1(D,"number",D.value)}switch(re=C?Ud(C):window,e){case"focusin":(hT(re)||re.contentEditable==="true")&&(Nd=re,eb=C,Ip=null);break;case"focusout":Ip=eb=Nd=null;break;case"mousedown":tb=!0;break;case"contextmenu":case"mouseup":case"dragend":tb=!1,vT(A,r,P);break;case"selectionchange":if(kF)break;case"keydown":case"keyup":vT(A,r,P)}var Q;if(Ww)e:{switch(e){case"compositionstart":var te="onCompositionStart";break e;case"compositionend":te="onCompositionEnd";break e;case"compositionupdate":te="onCompositionUpdate";break e}te=void 0}else Bd?yA(e,r)&&(te="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(te="onCompositionStart");te&&(vA&&r.locale!=="ko"&&(Bd||te!=="onCompositionStart"?te==="onCompositionEnd"&&Bd&&(Q=gA()):(rc=P,Vw="value"in rc?rc.value:rc.textContent,Bd=!0)),re=oy(C,te),0<re.length&&(te=new lT(te,e,null,r,P),A.push({event:te,listeners:re}),Q?te.data=Q:(Q=_A(r),Q!==null&&(te.data=Q)))),(Q=EF?CF(e,r):TF(e,r))&&(C=oy(C,"onBeforeInput"),0<C.length&&(P=new lT("onBeforeInput","beforeinput",null,r,P),A.push({event:P,listeners:C}),P.data=Q))}RA(A,t)})}function Xp(e,t,r){return{instance:e,listener:t,currentTarget:r}}function oy(e,t){for(var r=t+"Capture",a=[];e!==null;){var c=e,f=c.stateNode;c.tag===5&&f!==null&&(c=f,f=Up(e,r),f!=null&&a.unshift(Xp(e,f,c)),f=Up(e,t),f!=null&&a.push(Xp(e,f,c))),e=e.return}return a}function Cd(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function xT(e,t,r,a,c){for(var f=t._reactName,y=[];r!==null&&r!==a;){var l=r,w=l.alternate,C=l.stateNode;if(w!==null&&w===a)break;l.tag===5&&C!==null&&(l=C,c?(w=Up(r,f),w!=null&&y.unshift(Xp(r,w,l))):c||(w=Up(r,f),w!=null&&y.push(Xp(r,w,l)))),r=r.return}y.length!==0&&e.push({event:t,listeners:y})}var NF=/\r\n?/g,jF=/\u0000|\uFFFD/g;function bT(e){return(typeof e=="string"?e:""+e).replace(NF,`
`).replace(jF,"")}function sv(e,t,r){if(t=bT(t),bT(e)!==t&&r)throw Error(Ht(425))}function ay(){}var nb=null,rb=null;function ib(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ob=typeof setTimeout=="function"?setTimeout:void 0,UF=typeof clearTimeout=="function"?clearTimeout:void 0,wT=typeof Promise=="function"?Promise:void 0,VF=typeof queueMicrotask=="function"?queueMicrotask:typeof wT<"u"?function(e){return wT.resolve(null).then(e).catch(HF)}:ob;function HF(e){setTimeout(function(){throw e})}function Fx(e,t){var r=t,a=0;do{var c=r.nextSibling;if(e.removeChild(r),c&&c.nodeType===8)if(r=c.data,r==="/$"){if(a===0){e.removeChild(c),Gp(t);return}a--}else r!=="$"&&r!=="$?"&&r!=="$!"||a++;r=c}while(r);Gp(t)}function uc(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function ST(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Ch=Math.random().toString(36).slice(2),Ds="__reactFiber$"+Ch,Kp="__reactProps$"+Ch,pl="__reactContainer$"+Ch,ab="__reactEvents$"+Ch,GF="__reactListeners$"+Ch,WF="__reactHandles$"+Ch;function lu(e){var t=e[Ds];if(t)return t;for(var r=e.parentNode;r;){if(t=r[pl]||r[Ds]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=ST(e);e!==null;){if(r=e[Ds])return r;e=ST(e)}return t}e=r,r=e.parentNode}return null}function vm(e){return e=e[Ds]||e[pl],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ud(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Ht(33))}function n0(e){return e[Kp]||null}var sb=[],Vd=-1;function bc(e){return{current:e}}function ni(e){0>Vd||(e.current=sb[Vd],sb[Vd]=null,Vd--)}function Jr(e,t){Vd++,sb[Vd]=e.current,e.current=t}var gc={},vo=bc(gc),Vo=bc(!1),xu=gc;function ch(e,t){var r=e.type.contextTypes;if(!r)return gc;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var c={},f;for(f in r)c[f]=t[f];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=c),c}function Ho(e){return e=e.childContextTypes,e!=null}function sy(){ni(Vo),ni(vo)}function ET(e,t,r){if(vo.current!==gc)throw Error(Ht(168));Jr(vo,t),Jr(Vo,r)}function zA(e,t,r){var a=e.stateNode;if(t=t.childContextTypes,typeof a.getChildContext!="function")return r;a=a.getChildContext();for(var c in a)if(!(c in t))throw Error(Ht(108,A$(e)||"Unknown",c));return mi({},r,a)}function ly(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||gc,xu=vo.current,Jr(vo,e),Jr(Vo,Vo.current),!0}function CT(e,t,r){var a=e.stateNode;if(!a)throw Error(Ht(169));r?(e=zA(e,t,xu),a.__reactInternalMemoizedMergedChildContext=e,ni(Vo),ni(vo),Jr(vo,e)):ni(Vo),Jr(Vo,r)}var al=null,r0=!1,Bx=!1;function DA(e){al===null?al=[e]:al.push(e)}function qF(e){r0=!0,DA(e)}function wc(){if(!Bx&&al!==null){Bx=!0;var e=0,t=kr;try{var r=al;for(kr=1;e<r.length;e++){var a=r[e];do a=a(!0);while(a!==null)}al=null,r0=!1}catch(c){throw al!==null&&(al=al.slice(e+1)),oA(Bw,wc),c}finally{kr=t,Bx=!1}}return null}var Hd=[],Gd=0,cy=null,uy=0,Ra=[],Oa=0,bu=null,ll=1,cl="";function nu(e,t){Hd[Gd++]=uy,Hd[Gd++]=cy,cy=e,uy=t}function LA(e,t,r){Ra[Oa++]=ll,Ra[Oa++]=cl,Ra[Oa++]=bu,bu=e;var a=ll;e=cl;var c=32-ds(a)-1;a&=~(1<<c),r+=1;var f=32-ds(t)+c;if(30<f){var y=c-c%5;f=(a&(1<<y)-1).toString(32),a>>=y,c-=y,ll=1<<32-ds(t)+c|r<<c|a,cl=f+e}else ll=1<<f|r<<c|a,cl=e}function Zw(e){e.return!==null&&(nu(e,1),LA(e,1,0))}function Xw(e){for(;e===cy;)cy=Hd[--Gd],Hd[Gd]=null,uy=Hd[--Gd],Hd[Gd]=null;for(;e===bu;)bu=Ra[--Oa],Ra[Oa]=null,cl=Ra[--Oa],Ra[Oa]=null,ll=Ra[--Oa],Ra[Oa]=null}var sa=null,oa=null,oi=!1,ls=null;function kA(e,t){var r=za(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function TT(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,sa=e,oa=uc(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,sa=e,oa=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=bu!==null?{id:ll,overflow:cl}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=za(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,sa=e,oa=null,!0):!1;default:return!1}}function lb(e){return(e.mode&1)!==0&&(e.flags&128)===0}function cb(e){if(oi){var t=oa;if(t){var r=t;if(!TT(e,t)){if(lb(e))throw Error(Ht(418));t=uc(r.nextSibling);var a=sa;t&&TT(e,t)?kA(a,r):(e.flags=e.flags&-4097|2,oi=!1,sa=e)}}else{if(lb(e))throw Error(Ht(418));e.flags=e.flags&-4097|2,oi=!1,sa=e}}}function IT(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;sa=e}function lv(e){if(e!==sa)return!1;if(!oi)return IT(e),oi=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!ib(e.type,e.memoizedProps)),t&&(t=oa)){if(lb(e))throw $A(),Error(Ht(418));for(;t;)kA(e,t),t=uc(t.nextSibling)}if(IT(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Ht(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){oa=uc(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}oa=null}}else oa=sa?uc(e.stateNode.nextSibling):null;return!0}function $A(){for(var e=oa;e;)e=uc(e.nextSibling)}function uh(){oa=sa=null,oi=!1}function Kw(e){ls===null?ls=[e]:ls.push(e)}var ZF=_l.ReactCurrentBatchConfig;function is(e,t){if(e&&e.defaultProps){t=mi({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}var dy=bc(null),hy=null,Wd=null,Yw=null;function Jw(){Yw=Wd=hy=null}function Qw(e){var t=dy.current;ni(dy),e._currentValue=t}function ub(e,t,r){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===r)break;e=e.return}}function rh(e,t){hy=e,Yw=Wd=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(jo=!0),e.firstContext=null)}function ka(e){var t=e._currentValue;if(Yw!==e)if(e={context:e,memoizedValue:t,next:null},Wd===null){if(hy===null)throw Error(Ht(308));Wd=e,hy.dependencies={lanes:0,firstContext:e}}else Wd=Wd.next=e;return t}var cu=null;function eS(e){cu===null?cu=[e]:cu.push(e)}function FA(e,t,r,a){var c=t.interleaved;return c===null?(r.next=r,eS(t)):(r.next=c.next,c.next=r),t.interleaved=r,ml(e,a)}function ml(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var ec=!1;function tS(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function BA(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ul(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function dc(e,t,r){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,mr&2){var c=a.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),a.pending=t,ml(e,r)}return c=a.interleaved,c===null?(t.next=t,eS(a)):(t.next=c.next,c.next=t),a.interleaved=t,ml(e,r)}function zv(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var a=t.lanes;a&=e.pendingLanes,r|=a,t.lanes=r,Nw(e,r)}}function MT(e,t){var r=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,r===a)){var c=null,f=null;if(r=r.firstBaseUpdate,r!==null){do{var y={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};f===null?c=f=y:f=f.next=y,r=r.next}while(r!==null);f===null?c=f=t:f=f.next=t}else c=f=t;r={baseState:a.baseState,firstBaseUpdate:c,lastBaseUpdate:f,shared:a.shared,effects:a.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function fy(e,t,r,a){var c=e.updateQueue;ec=!1;var f=c.firstBaseUpdate,y=c.lastBaseUpdate,l=c.shared.pending;if(l!==null){c.shared.pending=null;var w=l,C=w.next;w.next=null,y===null?f=C:y.next=C,y=w;var P=e.alternate;P!==null&&(P=P.updateQueue,l=P.lastBaseUpdate,l!==y&&(l===null?P.firstBaseUpdate=C:l.next=C,P.lastBaseUpdate=w))}if(f!==null){var A=c.baseState;y=0,P=C=w=null,l=f;do{var D=l.lane,N=l.eventTime;if((a&D)===D){P!==null&&(P=P.next={eventTime:N,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var F=e,U=l;switch(D=t,N=r,U.tag){case 1:if(F=U.payload,typeof F=="function"){A=F.call(N,A,D);break e}A=F;break e;case 3:F.flags=F.flags&-65537|128;case 0:if(F=U.payload,D=typeof F=="function"?F.call(N,A,D):F,D==null)break e;A=mi({},A,D);break e;case 2:ec=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,D=c.effects,D===null?c.effects=[l]:D.push(l))}else N={eventTime:N,lane:D,tag:l.tag,payload:l.payload,callback:l.callback,next:null},P===null?(C=P=N,w=A):P=P.next=N,y|=D;if(l=l.next,l===null){if(l=c.shared.pending,l===null)break;D=l,l=D.next,D.next=null,c.lastBaseUpdate=D,c.shared.pending=null}}while(1);if(P===null&&(w=A),c.baseState=w,c.firstBaseUpdate=C,c.lastBaseUpdate=P,t=c.shared.interleaved,t!==null){c=t;do y|=c.lane,c=c.next;while(c!==t)}else f===null&&(c.shared.lanes=0);Su|=y,e.lanes=y,e.memoizedState=A}}function PT(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var a=e[t],c=a.callback;if(c!==null){if(a.callback=null,a=r,typeof c!="function")throw Error(Ht(191,c));c.call(a)}}}var NA=new FP.Component().refs;function db(e,t,r,a){t=e.memoizedState,r=r(a,t),r=r==null?t:mi({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var i0={isMounted:function(e){return(e=e._reactInternals)?Mu(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var a=Co(),c=fc(e),f=ul(a,c);f.payload=t,r!=null&&(f.callback=r),t=dc(e,f,c),t!==null&&(hs(t,e,c,a),zv(t,e,c))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var a=Co(),c=fc(e),f=ul(a,c);f.tag=1,f.payload=t,r!=null&&(f.callback=r),t=dc(e,f,c),t!==null&&(hs(t,e,c,a),zv(t,e,c))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Co(),a=fc(e),c=ul(r,a);c.tag=2,t!=null&&(c.callback=t),t=dc(e,c,a),t!==null&&(hs(t,e,a,r),zv(t,e,a))}};function AT(e,t,r,a,c,f,y){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,f,y):t.prototype&&t.prototype.isPureReactComponent?!qp(r,a)||!qp(c,f):!0}function jA(e,t,r){var a=!1,c=gc,f=t.contextType;return typeof f=="object"&&f!==null?f=ka(f):(c=Ho(t)?xu:vo.current,a=t.contextTypes,f=(a=a!=null)?ch(e,c):gc),t=new t(r,f),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=i0,e.stateNode=t,t._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=c,e.__reactInternalMemoizedMaskedChildContext=f),t}function RT(e,t,r,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,a),t.state!==e&&i0.enqueueReplaceState(t,t.state,null)}function hb(e,t,r,a){var c=e.stateNode;c.props=r,c.state=e.memoizedState,c.refs=NA,tS(e);var f=t.contextType;typeof f=="object"&&f!==null?c.context=ka(f):(f=Ho(t)?xu:vo.current,c.context=ch(e,f)),c.state=e.memoizedState,f=t.getDerivedStateFromProps,typeof f=="function"&&(db(e,t,f,r),c.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(t=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),t!==c.state&&i0.enqueueReplaceState(c,c.state,null),fy(e,r,c,a),c.state=e.memoizedState),typeof c.componentDidMount=="function"&&(e.flags|=4194308)}function sp(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Ht(309));var a=r.stateNode}if(!a)throw Error(Ht(147,e));var c=a,f=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===f?t.ref:(t=function(y){var l=c.refs;l===NA&&(l=c.refs={}),y===null?delete l[f]:l[f]=y},t._stringRef=f,t)}if(typeof e!="string")throw Error(Ht(284));if(!r._owner)throw Error(Ht(290,e))}return e}function cv(e,t){throw e=Object.prototype.toString.call(t),Error(Ht(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function OT(e){var t=e._init;return t(e._payload)}function UA(e){function t(j,B){if(e){var H=j.deletions;H===null?(j.deletions=[B],j.flags|=16):H.push(B)}}function r(j,B){if(!e)return null;for(;B!==null;)t(j,B),B=B.sibling;return null}function a(j,B){for(j=new Map;B!==null;)B.key!==null?j.set(B.key,B):j.set(B.index,B),B=B.sibling;return j}function c(j,B){return j=pc(j,B),j.index=0,j.sibling=null,j}function f(j,B,H){return j.index=H,e?(H=j.alternate,H!==null?(H=H.index,H<B?(j.flags|=2,B):H):(j.flags|=2,B)):(j.flags|=1048576,B)}function y(j){return e&&j.alternate===null&&(j.flags|=2),j}function l(j,B,H,Y){return B===null||B.tag!==6?(B=Wx(H,j.mode,Y),B.return=j,B):(B=c(B,H),B.return=j,B)}function w(j,B,H,Y){var ne=H.type;return ne===Fd?P(j,B,H.props.children,Y,H.key):B!==null&&(B.elementType===ne||typeof ne=="object"&&ne!==null&&ne.$$typeof===Ql&&OT(ne)===B.type)?(Y=c(B,H.props),Y.ref=sp(j,B,H),Y.return=j,Y):(Y=Bv(H.type,H.key,H.props,null,j.mode,Y),Y.ref=sp(j,B,H),Y.return=j,Y)}function C(j,B,H,Y){return B===null||B.tag!==4||B.stateNode.containerInfo!==H.containerInfo||B.stateNode.implementation!==H.implementation?(B=qx(H,j.mode,Y),B.return=j,B):(B=c(B,H.children||[]),B.return=j,B)}function P(j,B,H,Y,ne){return B===null||B.tag!==7?(B=gu(H,j.mode,Y,ne),B.return=j,B):(B=c(B,H),B.return=j,B)}function A(j,B,H){if(typeof B=="string"&&B!==""||typeof B=="number")return B=Wx(""+B,j.mode,H),B.return=j,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case Jg:return H=Bv(B.type,B.key,B.props,null,j.mode,H),H.ref=sp(j,null,B),H.return=j,H;case $d:return B=qx(B,j.mode,H),B.return=j,B;case Ql:var Y=B._init;return A(j,Y(B._payload),H)}if(_p(B)||np(B))return B=gu(B,j.mode,H,null),B.return=j,B;cv(j,B)}return null}function D(j,B,H,Y){var ne=B!==null?B.key:null;if(typeof H=="string"&&H!==""||typeof H=="number")return ne!==null?null:l(j,B,""+H,Y);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case Jg:return H.key===ne?w(j,B,H,Y):null;case $d:return H.key===ne?C(j,B,H,Y):null;case Ql:return ne=H._init,D(j,B,ne(H._payload),Y)}if(_p(H)||np(H))return ne!==null?null:P(j,B,H,Y,null);cv(j,H)}return null}function N(j,B,H,Y,ne){if(typeof Y=="string"&&Y!==""||typeof Y=="number")return j=j.get(H)||null,l(B,j,""+Y,ne);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case Jg:return j=j.get(Y.key===null?H:Y.key)||null,w(B,j,Y,ne);case $d:return j=j.get(Y.key===null?H:Y.key)||null,C(B,j,Y,ne);case Ql:var re=Y._init;return N(j,B,H,re(Y._payload),ne)}if(_p(Y)||np(Y))return j=j.get(H)||null,P(B,j,Y,ne,null);cv(B,Y)}return null}function F(j,B,H,Y){for(var ne=null,re=null,Q=B,te=B=0,ee=null;Q!==null&&te<H.length;te++){Q.index>te?(ee=Q,Q=null):ee=Q.sibling;var ve=D(j,Q,H[te],Y);if(ve===null){Q===null&&(Q=ee);break}e&&Q&&ve.alternate===null&&t(j,Q),B=f(ve,B,te),re===null?ne=ve:re.sibling=ve,re=ve,Q=ee}if(te===H.length)return r(j,Q),oi&&nu(j,te),ne;if(Q===null){for(;te<H.length;te++)Q=A(j,H[te],Y),Q!==null&&(B=f(Q,B,te),re===null?ne=Q:re.sibling=Q,re=Q);return oi&&nu(j,te),ne}for(Q=a(j,Q);te<H.length;te++)ee=N(Q,j,te,H[te],Y),ee!==null&&(e&&ee.alternate!==null&&Q.delete(ee.key===null?te:ee.key),B=f(ee,B,te),re===null?ne=ee:re.sibling=ee,re=ee);return e&&Q.forEach(function(he){return t(j,he)}),oi&&nu(j,te),ne}function U(j,B,H,Y){var ne=np(H);if(typeof ne!="function")throw Error(Ht(150));if(H=ne.call(H),H==null)throw Error(Ht(151));for(var re=ne=null,Q=B,te=B=0,ee=null,ve=H.next();Q!==null&&!ve.done;te++,ve=H.next()){Q.index>te?(ee=Q,Q=null):ee=Q.sibling;var he=D(j,Q,ve.value,Y);if(he===null){Q===null&&(Q=ee);break}e&&Q&&he.alternate===null&&t(j,Q),B=f(he,B,te),re===null?ne=he:re.sibling=he,re=he,Q=ee}if(ve.done)return r(j,Q),oi&&nu(j,te),ne;if(Q===null){for(;!ve.done;te++,ve=H.next())ve=A(j,ve.value,Y),ve!==null&&(B=f(ve,B,te),re===null?ne=ve:re.sibling=ve,re=ve);return oi&&nu(j,te),ne}for(Q=a(j,Q);!ve.done;te++,ve=H.next())ve=N(Q,j,te,ve.value,Y),ve!==null&&(e&&ve.alternate!==null&&Q.delete(ve.key===null?te:ve.key),B=f(ve,B,te),re===null?ne=ve:re.sibling=ve,re=ve);return e&&Q.forEach(function(oe){return t(j,oe)}),oi&&nu(j,te),ne}function Z(j,B,H,Y){if(typeof H=="object"&&H!==null&&H.type===Fd&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case Jg:e:{for(var ne=H.key,re=B;re!==null;){if(re.key===ne){if(ne=H.type,ne===Fd){if(re.tag===7){r(j,re.sibling),B=c(re,H.props.children),B.return=j,j=B;break e}}else if(re.elementType===ne||typeof ne=="object"&&ne!==null&&ne.$$typeof===Ql&&OT(ne)===re.type){r(j,re.sibling),B=c(re,H.props),B.ref=sp(j,re,H),B.return=j,j=B;break e}r(j,re);break}else t(j,re);re=re.sibling}H.type===Fd?(B=gu(H.props.children,j.mode,Y,H.key),B.return=j,j=B):(Y=Bv(H.type,H.key,H.props,null,j.mode,Y),Y.ref=sp(j,B,H),Y.return=j,j=Y)}return y(j);case $d:e:{for(re=H.key;B!==null;){if(B.key===re)if(B.tag===4&&B.stateNode.containerInfo===H.containerInfo&&B.stateNode.implementation===H.implementation){r(j,B.sibling),B=c(B,H.children||[]),B.return=j,j=B;break e}else{r(j,B);break}else t(j,B);B=B.sibling}B=qx(H,j.mode,Y),B.return=j,j=B}return y(j);case Ql:return re=H._init,Z(j,B,re(H._payload),Y)}if(_p(H))return F(j,B,H,Y);if(np(H))return U(j,B,H,Y);cv(j,H)}return typeof H=="string"&&H!==""||typeof H=="number"?(H=""+H,B!==null&&B.tag===6?(r(j,B.sibling),B=c(B,H),B.return=j,j=B):(r(j,B),B=Wx(H,j.mode,Y),B.return=j,j=B),y(j)):r(j,B)}return Z}var dh=UA(!0),VA=UA(!1),ym={},$s=bc(ym),Yp=bc(ym),Jp=bc(ym);function uu(e){if(e===ym)throw Error(Ht(174));return e}function nS(e,t){switch(Jr(Jp,t),Jr(Yp,e),Jr($s,ym),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:H1(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=H1(t,e)}ni($s),Jr($s,t)}function hh(){ni($s),ni(Yp),ni(Jp)}function HA(e){uu(Jp.current);var t=uu($s.current),r=H1(t,e.type);t!==r&&(Jr(Yp,e),Jr($s,r))}function rS(e){Yp.current===e&&(ni($s),ni(Yp))}var fi=bc(0);function py(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Nx=[];function iS(){for(var e=0;e<Nx.length;e++)Nx[e]._workInProgressVersionPrimary=null;Nx.length=0}var Dv=_l.ReactCurrentDispatcher,jx=_l.ReactCurrentBatchConfig,wu=0,pi=null,$i=null,qi=null,my=!1,Mp=!1,Qp=0,XF=0;function ho(){throw Error(Ht(321))}function oS(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!ps(e[r],t[r]))return!1;return!0}function aS(e,t,r,a,c,f){if(wu=f,pi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Dv.current=e===null||e.memoizedState===null?QF:eB,e=r(a,c),Mp){f=0;do{if(Mp=!1,Qp=0,25<=f)throw Error(Ht(301));f+=1,qi=$i=null,t.updateQueue=null,Dv.current=tB,e=r(a,c)}while(Mp)}if(Dv.current=gy,t=$i!==null&&$i.next!==null,wu=0,qi=$i=pi=null,my=!1,t)throw Error(Ht(300));return e}function sS(){var e=Qp!==0;return Qp=0,e}function zs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qi===null?pi.memoizedState=qi=e:qi=qi.next=e,qi}function $a(){if($i===null){var e=pi.alternate;e=e!==null?e.memoizedState:null}else e=$i.next;var t=qi===null?pi.memoizedState:qi.next;if(t!==null)qi=t,$i=e;else{if(e===null)throw Error(Ht(310));$i=e,e={memoizedState:$i.memoizedState,baseState:$i.baseState,baseQueue:$i.baseQueue,queue:$i.queue,next:null},qi===null?pi.memoizedState=qi=e:qi=qi.next=e}return qi}function em(e,t){return typeof t=="function"?t(e):t}function Ux(e){var t=$a(),r=t.queue;if(r===null)throw Error(Ht(311));r.lastRenderedReducer=e;var a=$i,c=a.baseQueue,f=r.pending;if(f!==null){if(c!==null){var y=c.next;c.next=f.next,f.next=y}a.baseQueue=c=f,r.pending=null}if(c!==null){f=c.next,a=a.baseState;var l=y=null,w=null,C=f;do{var P=C.lane;if((wu&P)===P)w!==null&&(w=w.next={lane:0,action:C.action,hasEagerState:C.hasEagerState,eagerState:C.eagerState,next:null}),a=C.hasEagerState?C.eagerState:e(a,C.action);else{var A={lane:P,action:C.action,hasEagerState:C.hasEagerState,eagerState:C.eagerState,next:null};w===null?(l=w=A,y=a):w=w.next=A,pi.lanes|=P,Su|=P}C=C.next}while(C!==null&&C!==f);w===null?y=a:w.next=l,ps(a,t.memoizedState)||(jo=!0),t.memoizedState=a,t.baseState=y,t.baseQueue=w,r.lastRenderedState=a}if(e=r.interleaved,e!==null){c=e;do f=c.lane,pi.lanes|=f,Su|=f,c=c.next;while(c!==e)}else c===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Vx(e){var t=$a(),r=t.queue;if(r===null)throw Error(Ht(311));r.lastRenderedReducer=e;var a=r.dispatch,c=r.pending,f=t.memoizedState;if(c!==null){r.pending=null;var y=c=c.next;do f=e(f,y.action),y=y.next;while(y!==c);ps(f,t.memoizedState)||(jo=!0),t.memoizedState=f,t.baseQueue===null&&(t.baseState=f),r.lastRenderedState=f}return[f,a]}function GA(){}function WA(e,t){var r=pi,a=$a(),c=t(),f=!ps(a.memoizedState,c);if(f&&(a.memoizedState=c,jo=!0),a=a.queue,lS(XA.bind(null,r,a,e),[e]),a.getSnapshot!==t||f||qi!==null&&qi.memoizedState.tag&1){if(r.flags|=2048,tm(9,ZA.bind(null,r,a,c,t),void 0,null),Zi===null)throw Error(Ht(349));wu&30||qA(r,t,c)}return c}function qA(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=pi.updateQueue,t===null?(t={lastEffect:null,stores:null},pi.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function ZA(e,t,r,a){t.value=r,t.getSnapshot=a,KA(t)&&YA(e)}function XA(e,t,r){return r(function(){KA(t)&&YA(e)})}function KA(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!ps(e,r)}catch{return!0}}function YA(e){var t=ml(e,1);t!==null&&hs(t,e,1,-1)}function zT(e){var t=zs();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:em,lastRenderedState:e},t.queue=e,e=e.dispatch=JF.bind(null,pi,e),[t.memoizedState,e]}function tm(e,t,r,a){return e={tag:e,create:t,destroy:r,deps:a,next:null},t=pi.updateQueue,t===null?(t={lastEffect:null,stores:null},pi.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(a=r.next,r.next=e,e.next=a,t.lastEffect=e)),e}function JA(){return $a().memoizedState}function Lv(e,t,r,a){var c=zs();pi.flags|=e,c.memoizedState=tm(1|t,r,void 0,a===void 0?null:a)}function o0(e,t,r,a){var c=$a();a=a===void 0?null:a;var f=void 0;if($i!==null){var y=$i.memoizedState;if(f=y.destroy,a!==null&&oS(a,y.deps)){c.memoizedState=tm(t,r,f,a);return}}pi.flags|=e,c.memoizedState=tm(1|t,r,f,a)}function DT(e,t){return Lv(8390656,8,e,t)}function lS(e,t){return o0(2048,8,e,t)}function QA(e,t){return o0(4,2,e,t)}function eR(e,t){return o0(4,4,e,t)}function tR(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function nR(e,t,r){return r=r!=null?r.concat([e]):null,o0(4,4,tR.bind(null,t,e),r)}function cS(){}function rR(e,t){var r=$a();t=t===void 0?null:t;var a=r.memoizedState;return a!==null&&t!==null&&oS(t,a[1])?a[0]:(r.memoizedState=[e,t],e)}function iR(e,t){var r=$a();t=t===void 0?null:t;var a=r.memoizedState;return a!==null&&t!==null&&oS(t,a[1])?a[0]:(e=e(),r.memoizedState=[e,t],e)}function oR(e,t,r){return wu&21?(ps(r,t)||(r=lA(),pi.lanes|=r,Su|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,jo=!0),e.memoizedState=r)}function KF(e,t){var r=kr;kr=r!==0&&4>r?r:4,e(!0);var a=jx.transition;jx.transition={};try{e(!1),t()}finally{kr=r,jx.transition=a}}function aR(){return $a().memoizedState}function YF(e,t,r){var a=fc(e);if(r={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null},sR(e))lR(t,r);else if(r=FA(e,t,r,a),r!==null){var c=Co();hs(r,e,a,c),cR(r,t,a)}}function JF(e,t,r){var a=fc(e),c={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null};if(sR(e))lR(t,c);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=t.lastRenderedReducer,f!==null))try{var y=t.lastRenderedState,l=f(y,r);if(c.hasEagerState=!0,c.eagerState=l,ps(l,y)){var w=t.interleaved;w===null?(c.next=c,eS(t)):(c.next=w.next,w.next=c),t.interleaved=c;return}}catch{}finally{}r=FA(e,t,c,a),r!==null&&(c=Co(),hs(r,e,a,c),cR(r,t,a))}}function sR(e){var t=e.alternate;return e===pi||t!==null&&t===pi}function lR(e,t){Mp=my=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function cR(e,t,r){if(r&4194240){var a=t.lanes;a&=e.pendingLanes,r|=a,t.lanes=r,Nw(e,r)}}var gy={readContext:ka,useCallback:ho,useContext:ho,useEffect:ho,useImperativeHandle:ho,useInsertionEffect:ho,useLayoutEffect:ho,useMemo:ho,useReducer:ho,useRef:ho,useState:ho,useDebugValue:ho,useDeferredValue:ho,useTransition:ho,useMutableSource:ho,useSyncExternalStore:ho,useId:ho,unstable_isNewReconciler:!1},QF={readContext:ka,useCallback:function(e,t){return zs().memoizedState=[e,t===void 0?null:t],e},useContext:ka,useEffect:DT,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Lv(4194308,4,tR.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Lv(4194308,4,e,t)},useInsertionEffect:function(e,t){return Lv(4,2,e,t)},useMemo:function(e,t){var r=zs();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var a=zs();return t=r!==void 0?r(t):t,a.memoizedState=a.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},a.queue=e,e=e.dispatch=YF.bind(null,pi,e),[a.memoizedState,e]},useRef:function(e){var t=zs();return e={current:e},t.memoizedState=e},useState:zT,useDebugValue:cS,useDeferredValue:function(e){return zs().memoizedState=e},useTransition:function(){var e=zT(!1),t=e[0];return e=KF.bind(null,e[1]),zs().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var a=pi,c=zs();if(oi){if(r===void 0)throw Error(Ht(407));r=r()}else{if(r=t(),Zi===null)throw Error(Ht(349));wu&30||qA(a,t,r)}c.memoizedState=r;var f={value:r,getSnapshot:t};return c.queue=f,DT(XA.bind(null,a,f,e),[e]),a.flags|=2048,tm(9,ZA.bind(null,a,f,r,t),void 0,null),r},useId:function(){var e=zs(),t=Zi.identifierPrefix;if(oi){var r=cl,a=ll;r=(a&~(1<<32-ds(a)-1)).toString(32)+r,t=":"+t+"R"+r,r=Qp++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=XF++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},eB={readContext:ka,useCallback:rR,useContext:ka,useEffect:lS,useImperativeHandle:nR,useInsertionEffect:QA,useLayoutEffect:eR,useMemo:iR,useReducer:Ux,useRef:JA,useState:function(){return Ux(em)},useDebugValue:cS,useDeferredValue:function(e){var t=$a();return oR(t,$i.memoizedState,e)},useTransition:function(){var e=Ux(em)[0],t=$a().memoizedState;return[e,t]},useMutableSource:GA,useSyncExternalStore:WA,useId:aR,unstable_isNewReconciler:!1},tB={readContext:ka,useCallback:rR,useContext:ka,useEffect:lS,useImperativeHandle:nR,useInsertionEffect:QA,useLayoutEffect:eR,useMemo:iR,useReducer:Vx,useRef:JA,useState:function(){return Vx(em)},useDebugValue:cS,useDeferredValue:function(e){var t=$a();return $i===null?t.memoizedState=e:oR(t,$i.memoizedState,e)},useTransition:function(){var e=Vx(em)[0],t=$a().memoizedState;return[e,t]},useMutableSource:GA,useSyncExternalStore:WA,useId:aR,unstable_isNewReconciler:!1};function fh(e,t){try{var r="",a=t;do r+=P$(a),a=a.return;while(a);var c=r}catch(f){c=`
Error generating stack: `+f.message+`
`+f.stack}return{value:e,source:t,stack:c,digest:null}}function Hx(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function fb(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var nB=typeof WeakMap=="function"?WeakMap:Map;function uR(e,t,r){r=ul(-1,r),r.tag=3,r.payload={element:null};var a=t.value;return r.callback=function(){yy||(yy=!0,Sb=a),fb(e,t)},r}function dR(e,t,r){r=ul(-1,r),r.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var c=t.value;r.payload=function(){return a(c)},r.callback=function(){fb(e,t)}}var f=e.stateNode;return f!==null&&typeof f.componentDidCatch=="function"&&(r.callback=function(){fb(e,t),typeof a!="function"&&(hc===null?hc=new Set([this]):hc.add(this));var y=t.stack;this.componentDidCatch(t.value,{componentStack:y!==null?y:""})}),r}function LT(e,t,r){var a=e.pingCache;if(a===null){a=e.pingCache=new nB;var c=new Set;a.set(t,c)}else c=a.get(t),c===void 0&&(c=new Set,a.set(t,c));c.has(r)||(c.add(r),e=gB.bind(null,e,t,r),t.then(e,e))}function kT(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function $T(e,t,r,a,c){return e.mode&1?(e.flags|=65536,e.lanes=c,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=ul(-1,1),t.tag=2,dc(r,t,1))),r.lanes|=1),e)}var rB=_l.ReactCurrentOwner,jo=!1;function So(e,t,r,a){t.child=e===null?VA(t,null,r,a):dh(t,e.child,r,a)}function FT(e,t,r,a,c){r=r.render;var f=t.ref;return rh(t,c),a=aS(e,t,r,a,f,c),r=sS(),e!==null&&!jo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,gl(e,t,c)):(oi&&r&&Zw(t),t.flags|=1,So(e,t,a,c),t.child)}function BT(e,t,r,a,c){if(e===null){var f=r.type;return typeof f=="function"&&!vS(f)&&f.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=f,hR(e,t,f,a,c)):(e=Bv(r.type,null,a,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(f=e.child,!(e.lanes&c)){var y=f.memoizedProps;if(r=r.compare,r=r!==null?r:qp,r(y,a)&&e.ref===t.ref)return gl(e,t,c)}return t.flags|=1,e=pc(f,a),e.ref=t.ref,e.return=t,t.child=e}function hR(e,t,r,a,c){if(e!==null){var f=e.memoizedProps;if(qp(f,a)&&e.ref===t.ref)if(jo=!1,t.pendingProps=a=f,(e.lanes&c)!==0)e.flags&131072&&(jo=!0);else return t.lanes=e.lanes,gl(e,t,c)}return pb(e,t,r,a,c)}function fR(e,t,r){var a=t.pendingProps,c=a.children,f=e!==null?e.memoizedState:null;if(a.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Jr(Zd,ra),ra|=r;else{if(!(r&1073741824))return e=f!==null?f.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Jr(Zd,ra),ra|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=f!==null?f.baseLanes:r,Jr(Zd,ra),ra|=a}else f!==null?(a=f.baseLanes|r,t.memoizedState=null):a=r,Jr(Zd,ra),ra|=a;return So(e,t,c,r),t.child}function pR(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function pb(e,t,r,a,c){var f=Ho(r)?xu:vo.current;return f=ch(t,f),rh(t,c),r=aS(e,t,r,a,f,c),a=sS(),e!==null&&!jo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,gl(e,t,c)):(oi&&a&&Zw(t),t.flags|=1,So(e,t,r,c),t.child)}function NT(e,t,r,a,c){if(Ho(r)){var f=!0;ly(t)}else f=!1;if(rh(t,c),t.stateNode===null)kv(e,t),jA(t,r,a),hb(t,r,a,c),a=!0;else if(e===null){var y=t.stateNode,l=t.memoizedProps;y.props=l;var w=y.context,C=r.contextType;typeof C=="object"&&C!==null?C=ka(C):(C=Ho(r)?xu:vo.current,C=ch(t,C));var P=r.getDerivedStateFromProps,A=typeof P=="function"||typeof y.getSnapshotBeforeUpdate=="function";A||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(l!==a||w!==C)&&RT(t,y,a,C),ec=!1;var D=t.memoizedState;y.state=D,fy(t,a,y,c),w=t.memoizedState,l!==a||D!==w||Vo.current||ec?(typeof P=="function"&&(db(t,r,P,a),w=t.memoizedState),(l=ec||AT(t,r,l,a,D,w,C))?(A||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(t.flags|=4194308)):(typeof y.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=w),y.props=a,y.state=w,y.context=C,a=l):(typeof y.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{y=t.stateNode,BA(e,t),l=t.memoizedProps,C=t.type===t.elementType?l:is(t.type,l),y.props=C,A=t.pendingProps,D=y.context,w=r.contextType,typeof w=="object"&&w!==null?w=ka(w):(w=Ho(r)?xu:vo.current,w=ch(t,w));var N=r.getDerivedStateFromProps;(P=typeof N=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(l!==A||D!==w)&&RT(t,y,a,w),ec=!1,D=t.memoizedState,y.state=D,fy(t,a,y,c);var F=t.memoizedState;l!==A||D!==F||Vo.current||ec?(typeof N=="function"&&(db(t,r,N,a),F=t.memoizedState),(C=ec||AT(t,r,C,a,D,F,w)||!1)?(P||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(a,F,w),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(a,F,w)),typeof y.componentDidUpdate=="function"&&(t.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof y.componentDidUpdate!="function"||l===e.memoizedProps&&D===e.memoizedState||(t.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&D===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=F),y.props=a,y.state=F,y.context=w,a=C):(typeof y.componentDidUpdate!="function"||l===e.memoizedProps&&D===e.memoizedState||(t.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&D===e.memoizedState||(t.flags|=1024),a=!1)}return mb(e,t,r,a,f,c)}function mb(e,t,r,a,c,f){pR(e,t);var y=(t.flags&128)!==0;if(!a&&!y)return c&&CT(t,r,!1),gl(e,t,f);a=t.stateNode,rB.current=t;var l=y&&typeof r.getDerivedStateFromError!="function"?null:a.render();return t.flags|=1,e!==null&&y?(t.child=dh(t,e.child,null,f),t.child=dh(t,null,l,f)):So(e,t,l,f),t.memoizedState=a.state,c&&CT(t,r,!0),t.child}function mR(e){var t=e.stateNode;t.pendingContext?ET(e,t.pendingContext,t.pendingContext!==t.context):t.context&&ET(e,t.context,!1),nS(e,t.containerInfo)}function jT(e,t,r,a,c){return uh(),Kw(c),t.flags|=256,So(e,t,r,a),t.child}var gb={dehydrated:null,treeContext:null,retryLane:0};function vb(e){return{baseLanes:e,cachePool:null,transitions:null}}function gR(e,t,r){var a=t.pendingProps,c=fi.current,f=!1,y=(t.flags&128)!==0,l;if((l=y)||(l=e!==null&&e.memoizedState===null?!1:(c&2)!==0),l?(f=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(c|=1),Jr(fi,c&1),e===null)return cb(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(y=a.children,e=a.fallback,f?(a=t.mode,f=t.child,y={mode:"hidden",children:y},!(a&1)&&f!==null?(f.childLanes=0,f.pendingProps=y):f=l0(y,a,0,null),e=gu(e,a,r,null),f.return=t,e.return=t,f.sibling=e,t.child=f,t.child.memoizedState=vb(r),t.memoizedState=gb,e):uS(t,y));if(c=e.memoizedState,c!==null&&(l=c.dehydrated,l!==null))return iB(e,t,y,a,l,c,r);if(f){f=a.fallback,y=t.mode,c=e.child,l=c.sibling;var w={mode:"hidden",children:a.children};return!(y&1)&&t.child!==c?(a=t.child,a.childLanes=0,a.pendingProps=w,t.deletions=null):(a=pc(c,w),a.subtreeFlags=c.subtreeFlags&14680064),l!==null?f=pc(l,f):(f=gu(f,y,r,null),f.flags|=2),f.return=t,a.return=t,a.sibling=f,t.child=a,a=f,f=t.child,y=e.child.memoizedState,y=y===null?vb(r):{baseLanes:y.baseLanes|r,cachePool:null,transitions:y.transitions},f.memoizedState=y,f.childLanes=e.childLanes&~r,t.memoizedState=gb,a}return f=e.child,e=f.sibling,a=pc(f,{mode:"visible",children:a.children}),!(t.mode&1)&&(a.lanes=r),a.return=t,a.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=a,t.memoizedState=null,a}function uS(e,t){return t=l0({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function uv(e,t,r,a){return a!==null&&Kw(a),dh(t,e.child,null,r),e=uS(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function iB(e,t,r,a,c,f,y){if(r)return t.flags&256?(t.flags&=-257,a=Hx(Error(Ht(422))),uv(e,t,y,a)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(f=a.fallback,c=t.mode,a=l0({mode:"visible",children:a.children},c,0,null),f=gu(f,c,y,null),f.flags|=2,a.return=t,f.return=t,a.sibling=f,t.child=a,t.mode&1&&dh(t,e.child,null,y),t.child.memoizedState=vb(y),t.memoizedState=gb,f);if(!(t.mode&1))return uv(e,t,y,null);if(c.data==="$!"){if(a=c.nextSibling&&c.nextSibling.dataset,a)var l=a.dgst;return a=l,f=Error(Ht(419)),a=Hx(f,a,void 0),uv(e,t,y,a)}if(l=(y&e.childLanes)!==0,jo||l){if(a=Zi,a!==null){switch(y&-y){case 4:c=2;break;case 16:c=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:c=32;break;case 536870912:c=268435456;break;default:c=0}c=c&(a.suspendedLanes|y)?0:c,c!==0&&c!==f.retryLane&&(f.retryLane=c,ml(e,c),hs(a,e,c,-1))}return gS(),a=Hx(Error(Ht(421))),uv(e,t,y,a)}return c.data==="$?"?(t.flags|=128,t.child=e.child,t=vB.bind(null,e),c._reactRetry=t,null):(e=f.treeContext,oa=uc(c.nextSibling),sa=t,oi=!0,ls=null,e!==null&&(Ra[Oa++]=ll,Ra[Oa++]=cl,Ra[Oa++]=bu,ll=e.id,cl=e.overflow,bu=t),t=uS(t,a.children),t.flags|=4096,t)}function UT(e,t,r){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),ub(e.return,t,r)}function Gx(e,t,r,a,c){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:r,tailMode:c}:(f.isBackwards=t,f.rendering=null,f.renderingStartTime=0,f.last=a,f.tail=r,f.tailMode=c)}function vR(e,t,r){var a=t.pendingProps,c=a.revealOrder,f=a.tail;if(So(e,t,a.children,r),a=fi.current,a&2)a=a&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&UT(e,r,t);else if(e.tag===19)UT(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(Jr(fi,a),!(t.mode&1))t.memoizedState=null;else switch(c){case"forwards":for(r=t.child,c=null;r!==null;)e=r.alternate,e!==null&&py(e)===null&&(c=r),r=r.sibling;r=c,r===null?(c=t.child,t.child=null):(c=r.sibling,r.sibling=null),Gx(t,!1,c,r,f);break;case"backwards":for(r=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&py(e)===null){t.child=c;break}e=c.sibling,c.sibling=r,r=c,c=e}Gx(t,!0,r,null,f);break;case"together":Gx(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function kv(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function gl(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Su|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Ht(153));if(t.child!==null){for(e=t.child,r=pc(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=pc(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function oB(e,t,r){switch(t.tag){case 3:mR(t),uh();break;case 5:HA(t);break;case 1:Ho(t.type)&&ly(t);break;case 4:nS(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,c=t.memoizedProps.value;Jr(dy,a._currentValue),a._currentValue=c;break;case 13:if(a=t.memoizedState,a!==null)return a.dehydrated!==null?(Jr(fi,fi.current&1),t.flags|=128,null):r&t.child.childLanes?gR(e,t,r):(Jr(fi,fi.current&1),e=gl(e,t,r),e!==null?e.sibling:null);Jr(fi,fi.current&1);break;case 19:if(a=(r&t.childLanes)!==0,e.flags&128){if(a)return vR(e,t,r);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),Jr(fi,fi.current),a)break;return null;case 22:case 23:return t.lanes=0,fR(e,t,r)}return gl(e,t,r)}var yR,yb,_R,xR;yR=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};yb=function(){};_R=function(e,t,r,a){var c=e.memoizedProps;if(c!==a){e=t.stateNode,uu($s.current);var f=null;switch(r){case"input":c=N1(e,c),a=N1(e,a),f=[];break;case"select":c=mi({},c,{value:void 0}),a=mi({},a,{value:void 0}),f=[];break;case"textarea":c=V1(e,c),a=V1(e,a),f=[];break;default:typeof c.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=ay)}G1(r,a);var y;r=null;for(C in c)if(!a.hasOwnProperty(C)&&c.hasOwnProperty(C)&&c[C]!=null)if(C==="style"){var l=c[C];for(y in l)l.hasOwnProperty(y)&&(r||(r={}),r[y]="")}else C!=="dangerouslySetInnerHTML"&&C!=="children"&&C!=="suppressContentEditableWarning"&&C!=="suppressHydrationWarning"&&C!=="autoFocus"&&(Np.hasOwnProperty(C)?f||(f=[]):(f=f||[]).push(C,null));for(C in a){var w=a[C];if(l=c!=null?c[C]:void 0,a.hasOwnProperty(C)&&w!==l&&(w!=null||l!=null))if(C==="style")if(l){for(y in l)!l.hasOwnProperty(y)||w&&w.hasOwnProperty(y)||(r||(r={}),r[y]="");for(y in w)w.hasOwnProperty(y)&&l[y]!==w[y]&&(r||(r={}),r[y]=w[y])}else r||(f||(f=[]),f.push(C,r)),r=w;else C==="dangerouslySetInnerHTML"?(w=w?w.__html:void 0,l=l?l.__html:void 0,w!=null&&l!==w&&(f=f||[]).push(C,w)):C==="children"?typeof w!="string"&&typeof w!="number"||(f=f||[]).push(C,""+w):C!=="suppressContentEditableWarning"&&C!=="suppressHydrationWarning"&&(Np.hasOwnProperty(C)?(w!=null&&C==="onScroll"&&ti("scroll",e),f||l===w||(f=[])):(f=f||[]).push(C,w))}r&&(f=f||[]).push("style",r);var C=f;(t.updateQueue=C)&&(t.flags|=4)}};xR=function(e,t,r,a){r!==a&&(t.flags|=4)};function lp(e,t){if(!oi)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function fo(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,a=0;if(t)for(var c=e.child;c!==null;)r|=c.lanes|c.childLanes,a|=c.subtreeFlags&14680064,a|=c.flags&14680064,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)r|=c.lanes|c.childLanes,a|=c.subtreeFlags,a|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=a,e.childLanes=r,t}function aB(e,t,r){var a=t.pendingProps;switch(Xw(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return fo(t),null;case 1:return Ho(t.type)&&sy(),fo(t),null;case 3:return a=t.stateNode,hh(),ni(Vo),ni(vo),iS(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(lv(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ls!==null&&(Tb(ls),ls=null))),yb(e,t),fo(t),null;case 5:rS(t);var c=uu(Jp.current);if(r=t.type,e!==null&&t.stateNode!=null)_R(e,t,r,a,c),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(t.stateNode===null)throw Error(Ht(166));return fo(t),null}if(e=uu($s.current),lv(t)){a=t.stateNode,r=t.type;var f=t.memoizedProps;switch(a[Ds]=t,a[Kp]=f,e=(t.mode&1)!==0,r){case"dialog":ti("cancel",a),ti("close",a);break;case"iframe":case"object":case"embed":ti("load",a);break;case"video":case"audio":for(c=0;c<bp.length;c++)ti(bp[c],a);break;case"source":ti("error",a);break;case"img":case"image":case"link":ti("error",a),ti("load",a);break;case"details":ti("toggle",a);break;case"input":Y2(a,f),ti("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!f.multiple},ti("invalid",a);break;case"textarea":Q2(a,f),ti("invalid",a)}G1(r,f),c=null;for(var y in f)if(f.hasOwnProperty(y)){var l=f[y];y==="children"?typeof l=="string"?a.textContent!==l&&(f.suppressHydrationWarning!==!0&&sv(a.textContent,l,e),c=["children",l]):typeof l=="number"&&a.textContent!==""+l&&(f.suppressHydrationWarning!==!0&&sv(a.textContent,l,e),c=["children",""+l]):Np.hasOwnProperty(y)&&l!=null&&y==="onScroll"&&ti("scroll",a)}switch(r){case"input":Qg(a),J2(a,f,!0);break;case"textarea":Qg(a),eT(a);break;case"select":case"option":break;default:typeof f.onClick=="function"&&(a.onclick=ay)}a=c,t.updateQueue=a,a!==null&&(t.flags|=4)}else{y=c.nodeType===9?c:c.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=qP(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=y.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=y.createElement(r,{is:a.is}):(e=y.createElement(r),r==="select"&&(y=e,a.multiple?y.multiple=!0:a.size&&(y.size=a.size))):e=y.createElementNS(e,r),e[Ds]=t,e[Kp]=a,yR(e,t,!1,!1),t.stateNode=e;e:{switch(y=W1(r,a),r){case"dialog":ti("cancel",e),ti("close",e),c=a;break;case"iframe":case"object":case"embed":ti("load",e),c=a;break;case"video":case"audio":for(c=0;c<bp.length;c++)ti(bp[c],e);c=a;break;case"source":ti("error",e),c=a;break;case"img":case"image":case"link":ti("error",e),ti("load",e),c=a;break;case"details":ti("toggle",e),c=a;break;case"input":Y2(e,a),c=N1(e,a),ti("invalid",e);break;case"option":c=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},c=mi({},a,{value:void 0}),ti("invalid",e);break;case"textarea":Q2(e,a),c=V1(e,a),ti("invalid",e);break;default:c=a}G1(r,c),l=c;for(f in l)if(l.hasOwnProperty(f)){var w=l[f];f==="style"?KP(e,w):f==="dangerouslySetInnerHTML"?(w=w?w.__html:void 0,w!=null&&ZP(e,w)):f==="children"?typeof w=="string"?(r!=="textarea"||w!=="")&&jp(e,w):typeof w=="number"&&jp(e,""+w):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(Np.hasOwnProperty(f)?w!=null&&f==="onScroll"&&ti("scroll",e):w!=null&&Dw(e,f,w,y))}switch(r){case"input":Qg(e),J2(e,a,!1);break;case"textarea":Qg(e),eT(e);break;case"option":a.value!=null&&e.setAttribute("value",""+mc(a.value));break;case"select":e.multiple=!!a.multiple,f=a.value,f!=null?Qd(e,!!a.multiple,f,!1):a.defaultValue!=null&&Qd(e,!!a.multiple,a.defaultValue,!0);break;default:typeof c.onClick=="function"&&(e.onclick=ay)}switch(r){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return fo(t),null;case 6:if(e&&t.stateNode!=null)xR(e,t,e.memoizedProps,a);else{if(typeof a!="string"&&t.stateNode===null)throw Error(Ht(166));if(r=uu(Jp.current),uu($s.current),lv(t)){if(a=t.stateNode,r=t.memoizedProps,a[Ds]=t,(f=a.nodeValue!==r)&&(e=sa,e!==null))switch(e.tag){case 3:sv(a.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&sv(a.nodeValue,r,(e.mode&1)!==0)}f&&(t.flags|=4)}else a=(r.nodeType===9?r:r.ownerDocument).createTextNode(a),a[Ds]=t,t.stateNode=a}return fo(t),null;case 13:if(ni(fi),a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(oi&&oa!==null&&t.mode&1&&!(t.flags&128))$A(),uh(),t.flags|=98560,f=!1;else if(f=lv(t),a!==null&&a.dehydrated!==null){if(e===null){if(!f)throw Error(Ht(318));if(f=t.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(Ht(317));f[Ds]=t}else uh(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;fo(t),f=!1}else ls!==null&&(Tb(ls),ls=null),f=!0;if(!f)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(a=a!==null,a!==(e!==null&&e.memoizedState!==null)&&a&&(t.child.flags|=8192,t.mode&1&&(e===null||fi.current&1?Fi===0&&(Fi=3):gS())),t.updateQueue!==null&&(t.flags|=4),fo(t),null);case 4:return hh(),yb(e,t),e===null&&Zp(t.stateNode.containerInfo),fo(t),null;case 10:return Qw(t.type._context),fo(t),null;case 17:return Ho(t.type)&&sy(),fo(t),null;case 19:if(ni(fi),f=t.memoizedState,f===null)return fo(t),null;if(a=(t.flags&128)!==0,y=f.rendering,y===null)if(a)lp(f,!1);else{if(Fi!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(y=py(e),y!==null){for(t.flags|=128,lp(f,!1),a=y.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=r,r=t.child;r!==null;)f=r,e=a,f.flags&=14680066,y=f.alternate,y===null?(f.childLanes=0,f.lanes=e,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=y.childLanes,f.lanes=y.lanes,f.child=y.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=y.memoizedProps,f.memoizedState=y.memoizedState,f.updateQueue=y.updateQueue,f.type=y.type,e=y.dependencies,f.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Jr(fi,fi.current&1|2),t.child}e=e.sibling}f.tail!==null&&wi()>ph&&(t.flags|=128,a=!0,lp(f,!1),t.lanes=4194304)}else{if(!a)if(e=py(y),e!==null){if(t.flags|=128,a=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),lp(f,!0),f.tail===null&&f.tailMode==="hidden"&&!y.alternate&&!oi)return fo(t),null}else 2*wi()-f.renderingStartTime>ph&&r!==1073741824&&(t.flags|=128,a=!0,lp(f,!1),t.lanes=4194304);f.isBackwards?(y.sibling=t.child,t.child=y):(r=f.last,r!==null?r.sibling=y:t.child=y,f.last=y)}return f.tail!==null?(t=f.tail,f.rendering=t,f.tail=t.sibling,f.renderingStartTime=wi(),t.sibling=null,r=fi.current,Jr(fi,a?r&1|2:r&1),t):(fo(t),null);case 22:case 23:return mS(),a=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==a&&(t.flags|=8192),a&&t.mode&1?ra&1073741824&&(fo(t),t.subtreeFlags&6&&(t.flags|=8192)):fo(t),null;case 24:return null;case 25:return null}throw Error(Ht(156,t.tag))}function sB(e,t){switch(Xw(t),t.tag){case 1:return Ho(t.type)&&sy(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return hh(),ni(Vo),ni(vo),iS(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return rS(t),null;case 13:if(ni(fi),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Ht(340));uh()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ni(fi),null;case 4:return hh(),null;case 10:return Qw(t.type._context),null;case 22:case 23:return mS(),null;case 24:return null;default:return null}}var dv=!1,po=!1,lB=typeof WeakSet=="function"?WeakSet:Set,pn=null;function qd(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(a){vi(e,t,a)}else r.current=null}function _b(e,t,r){try{r()}catch(a){vi(e,t,a)}}var VT=!1;function cB(e,t){if(nb=ry,e=EA(),qw(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var a=r.getSelection&&r.getSelection();if(a&&a.rangeCount!==0){r=a.anchorNode;var c=a.anchorOffset,f=a.focusNode;a=a.focusOffset;try{r.nodeType,f.nodeType}catch{r=null;break e}var y=0,l=-1,w=-1,C=0,P=0,A=e,D=null;t:for(;;){for(var N;A!==r||c!==0&&A.nodeType!==3||(l=y+c),A!==f||a!==0&&A.nodeType!==3||(w=y+a),A.nodeType===3&&(y+=A.nodeValue.length),(N=A.firstChild)!==null;)D=A,A=N;for(;;){if(A===e)break t;if(D===r&&++C===c&&(l=y),D===f&&++P===a&&(w=y),(N=A.nextSibling)!==null)break;A=D,D=A.parentNode}A=N}r=l===-1||w===-1?null:{start:l,end:w}}else r=null}r=r||{start:0,end:0}}else r=null;for(rb={focusedElem:e,selectionRange:r},ry=!1,pn=t;pn!==null;)if(t=pn,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,pn=e;else for(;pn!==null;){t=pn;try{var F=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(F!==null){var U=F.memoizedProps,Z=F.memoizedState,j=t.stateNode,B=j.getSnapshotBeforeUpdate(t.elementType===t.type?U:is(t.type,U),Z);j.__reactInternalSnapshotBeforeUpdate=B}break;case 3:var H=t.stateNode.containerInfo;H.nodeType===1?H.textContent="":H.nodeType===9&&H.documentElement&&H.removeChild(H.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ht(163))}}catch(Y){vi(t,t.return,Y)}if(e=t.sibling,e!==null){e.return=t.return,pn=e;break}pn=t.return}return F=VT,VT=!1,F}function Pp(e,t,r){var a=t.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var c=a=a.next;do{if((c.tag&e)===e){var f=c.destroy;c.destroy=void 0,f!==void 0&&_b(t,r,f)}c=c.next}while(c!==a)}}function a0(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var a=r.create;r.destroy=a()}r=r.next}while(r!==t)}}function xb(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function bR(e){var t=e.alternate;t!==null&&(e.alternate=null,bR(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ds],delete t[Kp],delete t[ab],delete t[GF],delete t[WF])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function wR(e){return e.tag===5||e.tag===3||e.tag===4}function HT(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||wR(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function bb(e,t,r){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=ay));else if(a!==4&&(e=e.child,e!==null))for(bb(e,t,r),e=e.sibling;e!==null;)bb(e,t,r),e=e.sibling}function wb(e,t,r){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(wb(e,t,r),e=e.sibling;e!==null;)wb(e,t,r),e=e.sibling}var Yi=null,os=!1;function Xl(e,t,r){for(r=r.child;r!==null;)SR(e,t,r),r=r.sibling}function SR(e,t,r){if(ks&&typeof ks.onCommitFiberUnmount=="function")try{ks.onCommitFiberUnmount(Jy,r)}catch{}switch(r.tag){case 5:po||qd(r,t);case 6:var a=Yi,c=os;Yi=null,Xl(e,t,r),Yi=a,os=c,Yi!==null&&(os?(e=Yi,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Yi.removeChild(r.stateNode));break;case 18:Yi!==null&&(os?(e=Yi,r=r.stateNode,e.nodeType===8?Fx(e.parentNode,r):e.nodeType===1&&Fx(e,r),Gp(e)):Fx(Yi,r.stateNode));break;case 4:a=Yi,c=os,Yi=r.stateNode.containerInfo,os=!0,Xl(e,t,r),Yi=a,os=c;break;case 0:case 11:case 14:case 15:if(!po&&(a=r.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){c=a=a.next;do{var f=c,y=f.destroy;f=f.tag,y!==void 0&&(f&2||f&4)&&_b(r,t,y),c=c.next}while(c!==a)}Xl(e,t,r);break;case 1:if(!po&&(qd(r,t),a=r.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=r.memoizedProps,a.state=r.memoizedState,a.componentWillUnmount()}catch(l){vi(r,t,l)}Xl(e,t,r);break;case 21:Xl(e,t,r);break;case 22:r.mode&1?(po=(a=po)||r.memoizedState!==null,Xl(e,t,r),po=a):Xl(e,t,r);break;default:Xl(e,t,r)}}function GT(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new lB),t.forEach(function(a){var c=yB.bind(null,e,a);r.has(a)||(r.add(a),a.then(c,c))})}}function ns(e,t){var r=t.deletions;if(r!==null)for(var a=0;a<r.length;a++){var c=r[a];try{var f=e,y=t,l=y;e:for(;l!==null;){switch(l.tag){case 5:Yi=l.stateNode,os=!1;break e;case 3:Yi=l.stateNode.containerInfo,os=!0;break e;case 4:Yi=l.stateNode.containerInfo,os=!0;break e}l=l.return}if(Yi===null)throw Error(Ht(160));SR(f,y,c),Yi=null,os=!1;var w=c.alternate;w!==null&&(w.return=null),c.return=null}catch(C){vi(c,t,C)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)ER(t,e),t=t.sibling}function ER(e,t){var r=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ns(t,e),Os(e),a&4){try{Pp(3,e,e.return),a0(3,e)}catch(U){vi(e,e.return,U)}try{Pp(5,e,e.return)}catch(U){vi(e,e.return,U)}}break;case 1:ns(t,e),Os(e),a&512&&r!==null&&qd(r,r.return);break;case 5:if(ns(t,e),Os(e),a&512&&r!==null&&qd(r,r.return),e.flags&32){var c=e.stateNode;try{jp(c,"")}catch(U){vi(e,e.return,U)}}if(a&4&&(c=e.stateNode,c!=null)){var f=e.memoizedProps,y=r!==null?r.memoizedProps:f,l=e.type,w=e.updateQueue;if(e.updateQueue=null,w!==null)try{l==="input"&&f.type==="radio"&&f.name!=null&&GP(c,f),W1(l,y);var C=W1(l,f);for(y=0;y<w.length;y+=2){var P=w[y],A=w[y+1];P==="style"?KP(c,A):P==="dangerouslySetInnerHTML"?ZP(c,A):P==="children"?jp(c,A):Dw(c,P,A,C)}switch(l){case"input":j1(c,f);break;case"textarea":WP(c,f);break;case"select":var D=c._wrapperState.wasMultiple;c._wrapperState.wasMultiple=!!f.multiple;var N=f.value;N!=null?Qd(c,!!f.multiple,N,!1):D!==!!f.multiple&&(f.defaultValue!=null?Qd(c,!!f.multiple,f.defaultValue,!0):Qd(c,!!f.multiple,f.multiple?[]:"",!1))}c[Kp]=f}catch(U){vi(e,e.return,U)}}break;case 6:if(ns(t,e),Os(e),a&4){if(e.stateNode===null)throw Error(Ht(162));c=e.stateNode,f=e.memoizedProps;try{c.nodeValue=f}catch(U){vi(e,e.return,U)}}break;case 3:if(ns(t,e),Os(e),a&4&&r!==null&&r.memoizedState.isDehydrated)try{Gp(t.containerInfo)}catch(U){vi(e,e.return,U)}break;case 4:ns(t,e),Os(e);break;case 13:ns(t,e),Os(e),c=e.child,c.flags&8192&&(f=c.memoizedState!==null,c.stateNode.isHidden=f,!f||c.alternate!==null&&c.alternate.memoizedState!==null||(fS=wi())),a&4&&GT(e);break;case 22:if(P=r!==null&&r.memoizedState!==null,e.mode&1?(po=(C=po)||P,ns(t,e),po=C):ns(t,e),Os(e),a&8192){if(C=e.memoizedState!==null,(e.stateNode.isHidden=C)&&!P&&e.mode&1)for(pn=e,P=e.child;P!==null;){for(A=pn=P;pn!==null;){switch(D=pn,N=D.child,D.tag){case 0:case 11:case 14:case 15:Pp(4,D,D.return);break;case 1:qd(D,D.return);var F=D.stateNode;if(typeof F.componentWillUnmount=="function"){a=D,r=D.return;try{t=a,F.props=t.memoizedProps,F.state=t.memoizedState,F.componentWillUnmount()}catch(U){vi(a,r,U)}}break;case 5:qd(D,D.return);break;case 22:if(D.memoizedState!==null){qT(A);continue}}N!==null?(N.return=D,pn=N):qT(A)}P=P.sibling}e:for(P=null,A=e;;){if(A.tag===5){if(P===null){P=A;try{c=A.stateNode,C?(f=c.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none"):(l=A.stateNode,w=A.memoizedProps.style,y=w!=null&&w.hasOwnProperty("display")?w.display:null,l.style.display=XP("display",y))}catch(U){vi(e,e.return,U)}}}else if(A.tag===6){if(P===null)try{A.stateNode.nodeValue=C?"":A.memoizedProps}catch(U){vi(e,e.return,U)}}else if((A.tag!==22&&A.tag!==23||A.memoizedState===null||A===e)&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===e)break e;for(;A.sibling===null;){if(A.return===null||A.return===e)break e;P===A&&(P=null),A=A.return}P===A&&(P=null),A.sibling.return=A.return,A=A.sibling}}break;case 19:ns(t,e),Os(e),a&4&&GT(e);break;case 21:break;default:ns(t,e),Os(e)}}function Os(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(wR(r)){var a=r;break e}r=r.return}throw Error(Ht(160))}switch(a.tag){case 5:var c=a.stateNode;a.flags&32&&(jp(c,""),a.flags&=-33);var f=HT(e);wb(e,f,c);break;case 3:case 4:var y=a.stateNode.containerInfo,l=HT(e);bb(e,l,y);break;default:throw Error(Ht(161))}}catch(w){vi(e,e.return,w)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function uB(e,t,r){pn=e,CR(e)}function CR(e,t,r){for(var a=(e.mode&1)!==0;pn!==null;){var c=pn,f=c.child;if(c.tag===22&&a){var y=c.memoizedState!==null||dv;if(!y){var l=c.alternate,w=l!==null&&l.memoizedState!==null||po;l=dv;var C=po;if(dv=y,(po=w)&&!C)for(pn=c;pn!==null;)y=pn,w=y.child,y.tag===22&&y.memoizedState!==null?ZT(c):w!==null?(w.return=y,pn=w):ZT(c);for(;f!==null;)pn=f,CR(f),f=f.sibling;pn=c,dv=l,po=C}WT(e)}else c.subtreeFlags&8772&&f!==null?(f.return=c,pn=f):WT(e)}}function WT(e){for(;pn!==null;){var t=pn;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:po||a0(5,t);break;case 1:var a=t.stateNode;if(t.flags&4&&!po)if(r===null)a.componentDidMount();else{var c=t.elementType===t.type?r.memoizedProps:is(t.type,r.memoizedProps);a.componentDidUpdate(c,r.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var f=t.updateQueue;f!==null&&PT(t,f,a);break;case 3:var y=t.updateQueue;if(y!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}PT(t,y,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var w=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":w.autoFocus&&r.focus();break;case"img":w.src&&(r.src=w.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var C=t.alternate;if(C!==null){var P=C.memoizedState;if(P!==null){var A=P.dehydrated;A!==null&&Gp(A)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ht(163))}po||t.flags&512&&xb(t)}catch(D){vi(t,t.return,D)}}if(t===e){pn=null;break}if(r=t.sibling,r!==null){r.return=t.return,pn=r;break}pn=t.return}}function qT(e){for(;pn!==null;){var t=pn;if(t===e){pn=null;break}var r=t.sibling;if(r!==null){r.return=t.return,pn=r;break}pn=t.return}}function ZT(e){for(;pn!==null;){var t=pn;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{a0(4,t)}catch(w){vi(t,r,w)}break;case 1:var a=t.stateNode;if(typeof a.componentDidMount=="function"){var c=t.return;try{a.componentDidMount()}catch(w){vi(t,c,w)}}var f=t.return;try{xb(t)}catch(w){vi(t,f,w)}break;case 5:var y=t.return;try{xb(t)}catch(w){vi(t,y,w)}}}catch(w){vi(t,t.return,w)}if(t===e){pn=null;break}var l=t.sibling;if(l!==null){l.return=t.return,pn=l;break}pn=t.return}}var dB=Math.ceil,vy=_l.ReactCurrentDispatcher,dS=_l.ReactCurrentOwner,Da=_l.ReactCurrentBatchConfig,mr=0,Zi=null,Ai=null,Qi=0,ra=0,Zd=bc(0),Fi=0,nm=null,Su=0,s0=0,hS=0,Ap=null,No=null,fS=0,ph=1/0,ol=null,yy=!1,Sb=null,hc=null,hv=!1,ic=null,_y=0,Rp=0,Eb=null,$v=-1,Fv=0;function Co(){return mr&6?wi():$v!==-1?$v:$v=wi()}function fc(e){return e.mode&1?mr&2&&Qi!==0?Qi&-Qi:ZF.transition!==null?(Fv===0&&(Fv=lA()),Fv):(e=kr,e!==0||(e=window.event,e=e===void 0?16:mA(e.type)),e):1}function hs(e,t,r,a){if(50<Rp)throw Rp=0,Eb=null,Error(Ht(185));mm(e,r,a),(!(mr&2)||e!==Zi)&&(e===Zi&&(!(mr&2)&&(s0|=r),Fi===4&&nc(e,Qi)),Go(e,a),r===1&&mr===0&&!(t.mode&1)&&(ph=wi()+500,r0&&wc()))}function Go(e,t){var r=e.callbackNode;Z$(e,t);var a=ny(e,e===Zi?Qi:0);if(a===0)r!==null&&rT(r),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(r!=null&&rT(r),t===1)e.tag===0?qF(XT.bind(null,e)):DA(XT.bind(null,e)),VF(function(){!(mr&6)&&wc()}),r=null;else{switch(cA(a)){case 1:r=Bw;break;case 4:r=aA;break;case 16:r=ty;break;case 536870912:r=sA;break;default:r=ty}r=zR(r,TR.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function TR(e,t){if($v=-1,Fv=0,mr&6)throw Error(Ht(327));var r=e.callbackNode;if(ih()&&e.callbackNode!==r)return null;var a=ny(e,e===Zi?Qi:0);if(a===0)return null;if(a&30||a&e.expiredLanes||t)t=xy(e,a);else{t=a;var c=mr;mr|=2;var f=MR();(Zi!==e||Qi!==t)&&(ol=null,ph=wi()+500,mu(e,t));do try{pB();break}catch(l){IR(e,l)}while(1);Jw(),vy.current=f,mr=c,Ai!==null?t=0:(Zi=null,Qi=0,t=Fi)}if(t!==0){if(t===2&&(c=Y1(e),c!==0&&(a=c,t=Cb(e,c))),t===1)throw r=nm,mu(e,0),nc(e,a),Go(e,wi()),r;if(t===6)nc(e,a);else{if(c=e.current.alternate,!(a&30)&&!hB(c)&&(t=xy(e,a),t===2&&(f=Y1(e),f!==0&&(a=f,t=Cb(e,f))),t===1))throw r=nm,mu(e,0),nc(e,a),Go(e,wi()),r;switch(e.finishedWork=c,e.finishedLanes=a,t){case 0:case 1:throw Error(Ht(345));case 2:ru(e,No,ol);break;case 3:if(nc(e,a),(a&130023424)===a&&(t=fS+500-wi(),10<t)){if(ny(e,0)!==0)break;if(c=e.suspendedLanes,(c&a)!==a){Co(),e.pingedLanes|=e.suspendedLanes&c;break}e.timeoutHandle=ob(ru.bind(null,e,No,ol),t);break}ru(e,No,ol);break;case 4:if(nc(e,a),(a&4194240)===a)break;for(t=e.eventTimes,c=-1;0<a;){var y=31-ds(a);f=1<<y,y=t[y],y>c&&(c=y),a&=~f}if(a=c,a=wi()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*dB(a/1960))-a,10<a){e.timeoutHandle=ob(ru.bind(null,e,No,ol),a);break}ru(e,No,ol);break;case 5:ru(e,No,ol);break;default:throw Error(Ht(329))}}}return Go(e,wi()),e.callbackNode===r?TR.bind(null,e):null}function Cb(e,t){var r=Ap;return e.current.memoizedState.isDehydrated&&(mu(e,t).flags|=256),e=xy(e,t),e!==2&&(t=No,No=r,t!==null&&Tb(t)),e}function Tb(e){No===null?No=e:No.push.apply(No,e)}function hB(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var a=0;a<r.length;a++){var c=r[a],f=c.getSnapshot;c=c.value;try{if(!ps(f(),c))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function nc(e,t){for(t&=~hS,t&=~s0,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-ds(t),a=1<<r;e[r]=-1,t&=~a}}function XT(e){if(mr&6)throw Error(Ht(327));ih();var t=ny(e,0);if(!(t&1))return Go(e,wi()),null;var r=xy(e,t);if(e.tag!==0&&r===2){var a=Y1(e);a!==0&&(t=a,r=Cb(e,a))}if(r===1)throw r=nm,mu(e,0),nc(e,t),Go(e,wi()),r;if(r===6)throw Error(Ht(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ru(e,No,ol),Go(e,wi()),null}function pS(e,t){var r=mr;mr|=1;try{return e(t)}finally{mr=r,mr===0&&(ph=wi()+500,r0&&wc())}}function Eu(e){ic!==null&&ic.tag===0&&!(mr&6)&&ih();var t=mr;mr|=1;var r=Da.transition,a=kr;try{if(Da.transition=null,kr=1,e)return e()}finally{kr=a,Da.transition=r,mr=t,!(mr&6)&&wc()}}function mS(){ra=Zd.current,ni(Zd)}function mu(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,UF(r)),Ai!==null)for(r=Ai.return;r!==null;){var a=r;switch(Xw(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&sy();break;case 3:hh(),ni(Vo),ni(vo),iS();break;case 5:rS(a);break;case 4:hh();break;case 13:ni(fi);break;case 19:ni(fi);break;case 10:Qw(a.type._context);break;case 22:case 23:mS()}r=r.return}if(Zi=e,Ai=e=pc(e.current,null),Qi=ra=t,Fi=0,nm=null,hS=s0=Su=0,No=Ap=null,cu!==null){for(t=0;t<cu.length;t++)if(r=cu[t],a=r.interleaved,a!==null){r.interleaved=null;var c=a.next,f=r.pending;if(f!==null){var y=f.next;f.next=c,a.next=y}r.pending=a}cu=null}return e}function IR(e,t){do{var r=Ai;try{if(Jw(),Dv.current=gy,my){for(var a=pi.memoizedState;a!==null;){var c=a.queue;c!==null&&(c.pending=null),a=a.next}my=!1}if(wu=0,qi=$i=pi=null,Mp=!1,Qp=0,dS.current=null,r===null||r.return===null){Fi=1,nm=t,Ai=null;break}e:{var f=e,y=r.return,l=r,w=t;if(t=Qi,l.flags|=32768,w!==null&&typeof w=="object"&&typeof w.then=="function"){var C=w,P=l,A=P.tag;if(!(P.mode&1)&&(A===0||A===11||A===15)){var D=P.alternate;D?(P.updateQueue=D.updateQueue,P.memoizedState=D.memoizedState,P.lanes=D.lanes):(P.updateQueue=null,P.memoizedState=null)}var N=kT(y);if(N!==null){N.flags&=-257,$T(N,y,l,f,t),N.mode&1&&LT(f,C,t),t=N,w=C;var F=t.updateQueue;if(F===null){var U=new Set;U.add(w),t.updateQueue=U}else F.add(w);break e}else{if(!(t&1)){LT(f,C,t),gS();break e}w=Error(Ht(426))}}else if(oi&&l.mode&1){var Z=kT(y);if(Z!==null){!(Z.flags&65536)&&(Z.flags|=256),$T(Z,y,l,f,t),Kw(fh(w,l));break e}}f=w=fh(w,l),Fi!==4&&(Fi=2),Ap===null?Ap=[f]:Ap.push(f),f=y;do{switch(f.tag){case 3:f.flags|=65536,t&=-t,f.lanes|=t;var j=uR(f,w,t);MT(f,j);break e;case 1:l=w;var B=f.type,H=f.stateNode;if(!(f.flags&128)&&(typeof B.getDerivedStateFromError=="function"||H!==null&&typeof H.componentDidCatch=="function"&&(hc===null||!hc.has(H)))){f.flags|=65536,t&=-t,f.lanes|=t;var Y=dR(f,l,t);MT(f,Y);break e}}f=f.return}while(f!==null)}AR(r)}catch(ne){t=ne,Ai===r&&r!==null&&(Ai=r=r.return);continue}break}while(1)}function MR(){var e=vy.current;return vy.current=gy,e===null?gy:e}function gS(){(Fi===0||Fi===3||Fi===2)&&(Fi=4),Zi===null||!(Su&268435455)&&!(s0&268435455)||nc(Zi,Qi)}function xy(e,t){var r=mr;mr|=2;var a=MR();(Zi!==e||Qi!==t)&&(ol=null,mu(e,t));do try{fB();break}catch(c){IR(e,c)}while(1);if(Jw(),mr=r,vy.current=a,Ai!==null)throw Error(Ht(261));return Zi=null,Qi=0,Fi}function fB(){for(;Ai!==null;)PR(Ai)}function pB(){for(;Ai!==null&&!B$();)PR(Ai)}function PR(e){var t=OR(e.alternate,e,ra);e.memoizedProps=e.pendingProps,t===null?AR(e):Ai=t,dS.current=null}function AR(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=sB(r,t),r!==null){r.flags&=32767,Ai=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Fi=6,Ai=null;return}}else if(r=aB(r,t,ra),r!==null){Ai=r;return}if(t=t.sibling,t!==null){Ai=t;return}Ai=t=e}while(t!==null);Fi===0&&(Fi=5)}function ru(e,t,r){var a=kr,c=Da.transition;try{Da.transition=null,kr=1,mB(e,t,r,a)}finally{Da.transition=c,kr=a}return null}function mB(e,t,r,a){do ih();while(ic!==null);if(mr&6)throw Error(Ht(327));r=e.finishedWork;var c=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(Ht(177));e.callbackNode=null,e.callbackPriority=0;var f=r.lanes|r.childLanes;if(X$(e,f),e===Zi&&(Ai=Zi=null,Qi=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||hv||(hv=!0,zR(ty,function(){return ih(),null})),f=(r.flags&15990)!==0,r.subtreeFlags&15990||f){f=Da.transition,Da.transition=null;var y=kr;kr=1;var l=mr;mr|=4,dS.current=null,cB(e,r),ER(r,e),LF(rb),ry=!!nb,rb=nb=null,e.current=r,uB(r),N$(),mr=l,kr=y,Da.transition=f}else e.current=r;if(hv&&(hv=!1,ic=e,_y=c),f=e.pendingLanes,f===0&&(hc=null),V$(r.stateNode),Go(e,wi()),t!==null)for(a=e.onRecoverableError,r=0;r<t.length;r++)c=t[r],a(c.value,{componentStack:c.stack,digest:c.digest});if(yy)throw yy=!1,e=Sb,Sb=null,e;return _y&1&&e.tag!==0&&ih(),f=e.pendingLanes,f&1?e===Eb?Rp++:(Rp=0,Eb=e):Rp=0,wc(),null}function ih(){if(ic!==null){var e=cA(_y),t=Da.transition,r=kr;try{if(Da.transition=null,kr=16>e?16:e,ic===null)var a=!1;else{if(e=ic,ic=null,_y=0,mr&6)throw Error(Ht(331));var c=mr;for(mr|=4,pn=e.current;pn!==null;){var f=pn,y=f.child;if(pn.flags&16){var l=f.deletions;if(l!==null){for(var w=0;w<l.length;w++){var C=l[w];for(pn=C;pn!==null;){var P=pn;switch(P.tag){case 0:case 11:case 15:Pp(8,P,f)}var A=P.child;if(A!==null)A.return=P,pn=A;else for(;pn!==null;){P=pn;var D=P.sibling,N=P.return;if(bR(P),P===C){pn=null;break}if(D!==null){D.return=N,pn=D;break}pn=N}}}var F=f.alternate;if(F!==null){var U=F.child;if(U!==null){F.child=null;do{var Z=U.sibling;U.sibling=null,U=Z}while(U!==null)}}pn=f}}if(f.subtreeFlags&2064&&y!==null)y.return=f,pn=y;else e:for(;pn!==null;){if(f=pn,f.flags&2048)switch(f.tag){case 0:case 11:case 15:Pp(9,f,f.return)}var j=f.sibling;if(j!==null){j.return=f.return,pn=j;break e}pn=f.return}}var B=e.current;for(pn=B;pn!==null;){y=pn;var H=y.child;if(y.subtreeFlags&2064&&H!==null)H.return=y,pn=H;else e:for(y=B;pn!==null;){if(l=pn,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:a0(9,l)}}catch(ne){vi(l,l.return,ne)}if(l===y){pn=null;break e}var Y=l.sibling;if(Y!==null){Y.return=l.return,pn=Y;break e}pn=l.return}}if(mr=c,wc(),ks&&typeof ks.onPostCommitFiberRoot=="function")try{ks.onPostCommitFiberRoot(Jy,e)}catch{}a=!0}return a}finally{kr=r,Da.transition=t}}return!1}function KT(e,t,r){t=fh(r,t),t=uR(e,t,1),e=dc(e,t,1),t=Co(),e!==null&&(mm(e,1,t),Go(e,t))}function vi(e,t,r){if(e.tag===3)KT(e,e,r);else for(;t!==null;){if(t.tag===3){KT(t,e,r);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(hc===null||!hc.has(a))){e=fh(r,e),e=dR(t,e,1),t=dc(t,e,1),e=Co(),t!==null&&(mm(t,1,e),Go(t,e));break}}t=t.return}}function gB(e,t,r){var a=e.pingCache;a!==null&&a.delete(t),t=Co(),e.pingedLanes|=e.suspendedLanes&r,Zi===e&&(Qi&r)===r&&(Fi===4||Fi===3&&(Qi&130023424)===Qi&&500>wi()-fS?mu(e,0):hS|=r),Go(e,t)}function RR(e,t){t===0&&(e.mode&1?(t=nv,nv<<=1,!(nv&130023424)&&(nv=4194304)):t=1);var r=Co();e=ml(e,t),e!==null&&(mm(e,t,r),Go(e,r))}function vB(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),RR(e,r)}function yB(e,t){var r=0;switch(e.tag){case 13:var a=e.stateNode,c=e.memoizedState;c!==null&&(r=c.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(Ht(314))}a!==null&&a.delete(t),RR(e,r)}var OR;OR=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Vo.current)jo=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return jo=!1,oB(e,t,r);jo=!!(e.flags&131072)}else jo=!1,oi&&t.flags&1048576&&LA(t,uy,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;kv(e,t),e=t.pendingProps;var c=ch(t,vo.current);rh(t,r),c=aS(null,t,a,e,c,r);var f=sS();return t.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ho(a)?(f=!0,ly(t)):f=!1,t.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,tS(t),c.updater=i0,t.stateNode=c,c._reactInternals=t,hb(t,a,e,r),t=mb(null,t,a,!0,f,r)):(t.tag=0,oi&&f&&Zw(t),So(null,t,c,r),t=t.child),t;case 16:a=t.elementType;e:{switch(kv(e,t),e=t.pendingProps,c=a._init,a=c(a._payload),t.type=a,c=t.tag=xB(a),e=is(a,e),c){case 0:t=pb(null,t,a,e,r);break e;case 1:t=NT(null,t,a,e,r);break e;case 11:t=FT(null,t,a,e,r);break e;case 14:t=BT(null,t,a,is(a.type,e),r);break e}throw Error(Ht(306,a,""))}return t;case 0:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:is(a,c),pb(e,t,a,c,r);case 1:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:is(a,c),NT(e,t,a,c,r);case 3:e:{if(mR(t),e===null)throw Error(Ht(387));a=t.pendingProps,f=t.memoizedState,c=f.element,BA(e,t),fy(t,a,null,r);var y=t.memoizedState;if(a=y.element,f.isDehydrated)if(f={element:a,isDehydrated:!1,cache:y.cache,pendingSuspenseBoundaries:y.pendingSuspenseBoundaries,transitions:y.transitions},t.updateQueue.baseState=f,t.memoizedState=f,t.flags&256){c=fh(Error(Ht(423)),t),t=jT(e,t,a,r,c);break e}else if(a!==c){c=fh(Error(Ht(424)),t),t=jT(e,t,a,r,c);break e}else for(oa=uc(t.stateNode.containerInfo.firstChild),sa=t,oi=!0,ls=null,r=VA(t,null,a,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(uh(),a===c){t=gl(e,t,r);break e}So(e,t,a,r)}t=t.child}return t;case 5:return HA(t),e===null&&cb(t),a=t.type,c=t.pendingProps,f=e!==null?e.memoizedProps:null,y=c.children,ib(a,c)?y=null:f!==null&&ib(a,f)&&(t.flags|=32),pR(e,t),So(e,t,y,r),t.child;case 6:return e===null&&cb(t),null;case 13:return gR(e,t,r);case 4:return nS(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=dh(t,null,a,r):So(e,t,a,r),t.child;case 11:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:is(a,c),FT(e,t,a,c,r);case 7:return So(e,t,t.pendingProps,r),t.child;case 8:return So(e,t,t.pendingProps.children,r),t.child;case 12:return So(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(a=t.type._context,c=t.pendingProps,f=t.memoizedProps,y=c.value,Jr(dy,a._currentValue),a._currentValue=y,f!==null)if(ps(f.value,y)){if(f.children===c.children&&!Vo.current){t=gl(e,t,r);break e}}else for(f=t.child,f!==null&&(f.return=t);f!==null;){var l=f.dependencies;if(l!==null){y=f.child;for(var w=l.firstContext;w!==null;){if(w.context===a){if(f.tag===1){w=ul(-1,r&-r),w.tag=2;var C=f.updateQueue;if(C!==null){C=C.shared;var P=C.pending;P===null?w.next=w:(w.next=P.next,P.next=w),C.pending=w}}f.lanes|=r,w=f.alternate,w!==null&&(w.lanes|=r),ub(f.return,r,t),l.lanes|=r;break}w=w.next}}else if(f.tag===10)y=f.type===t.type?null:f.child;else if(f.tag===18){if(y=f.return,y===null)throw Error(Ht(341));y.lanes|=r,l=y.alternate,l!==null&&(l.lanes|=r),ub(y,r,t),y=f.sibling}else y=f.child;if(y!==null)y.return=f;else for(y=f;y!==null;){if(y===t){y=null;break}if(f=y.sibling,f!==null){f.return=y.return,y=f;break}y=y.return}f=y}So(e,t,c.children,r),t=t.child}return t;case 9:return c=t.type,a=t.pendingProps.children,rh(t,r),c=ka(c),a=a(c),t.flags|=1,So(e,t,a,r),t.child;case 14:return a=t.type,c=is(a,t.pendingProps),c=is(a.type,c),BT(e,t,a,c,r);case 15:return hR(e,t,t.type,t.pendingProps,r);case 17:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:is(a,c),kv(e,t),t.tag=1,Ho(a)?(e=!0,ly(t)):e=!1,rh(t,r),jA(t,a,c),hb(t,a,c,r),mb(null,t,a,!0,e,r);case 19:return vR(e,t,r);case 22:return fR(e,t,r)}throw Error(Ht(156,t.tag))};function zR(e,t){return oA(e,t)}function _B(e,t,r,a){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function za(e,t,r,a){return new _B(e,t,r,a)}function vS(e){return e=e.prototype,!(!e||!e.isReactComponent)}function xB(e){if(typeof e=="function")return vS(e)?1:0;if(e!=null){if(e=e.$$typeof,e===kw)return 11;if(e===$w)return 14}return 2}function pc(e,t){var r=e.alternate;return r===null?(r=za(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Bv(e,t,r,a,c,f){var y=2;if(a=e,typeof e=="function")vS(e)&&(y=1);else if(typeof e=="string")y=5;else e:switch(e){case Fd:return gu(r.children,c,f,t);case Lw:y=8,c|=8;break;case k1:return e=za(12,r,t,c|2),e.elementType=k1,e.lanes=f,e;case $1:return e=za(13,r,t,c),e.elementType=$1,e.lanes=f,e;case F1:return e=za(19,r,t,c),e.elementType=F1,e.lanes=f,e;case UP:return l0(r,c,f,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case NP:y=10;break e;case jP:y=9;break e;case kw:y=11;break e;case $w:y=14;break e;case Ql:y=16,a=null;break e}throw Error(Ht(130,e==null?e:typeof e,""))}return t=za(y,r,t,c),t.elementType=e,t.type=a,t.lanes=f,t}function gu(e,t,r,a){return e=za(7,e,a,t),e.lanes=r,e}function l0(e,t,r,a){return e=za(22,e,a,t),e.elementType=UP,e.lanes=r,e.stateNode={isHidden:!1},e}function Wx(e,t,r){return e=za(6,e,null,t),e.lanes=r,e}function qx(e,t,r){return t=za(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function bB(e,t,r,a,c){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ix(0),this.expirationTimes=Ix(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ix(0),this.identifierPrefix=a,this.onRecoverableError=c,this.mutableSourceEagerHydrationData=null}function yS(e,t,r,a,c,f,y,l,w){return e=new bB(e,t,r,l,w),t===1?(t=1,f===!0&&(t|=8)):t=0,f=za(3,null,null,t),e.current=f,f.stateNode=e,f.memoizedState={element:a,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},tS(f),e}function wB(e,t,r){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$d,key:a==null?null:""+a,children:e,containerInfo:t,implementation:r}}function DR(e){if(!e)return gc;e=e._reactInternals;e:{if(Mu(e)!==e||e.tag!==1)throw Error(Ht(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ho(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Ht(171))}if(e.tag===1){var r=e.type;if(Ho(r))return zA(e,r,t)}return t}function LR(e,t,r,a,c,f,y,l,w){return e=yS(r,a,!0,e,c,f,y,l,w),e.context=DR(null),r=e.current,a=Co(),c=fc(r),f=ul(a,c),f.callback=t??null,dc(r,f,c),e.current.lanes=c,mm(e,c,a),Go(e,a),e}function c0(e,t,r,a){var c=t.current,f=Co(),y=fc(c);return r=DR(r),t.context===null?t.context=r:t.pendingContext=r,t=ul(f,y),t.payload={element:e},a=a===void 0?null:a,a!==null&&(t.callback=a),e=dc(c,t,y),e!==null&&(hs(e,c,y,f),zv(e,c,y)),y}function by(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function YT(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function _S(e,t){YT(e,t),(e=e.alternate)&&YT(e,t)}function SB(){return null}var kR=typeof reportError=="function"?reportError:function(e){console.error(e)};function xS(e){this._internalRoot=e}u0.prototype.render=xS.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Ht(409));c0(e,t,null,null)};u0.prototype.unmount=xS.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Eu(function(){c0(null,e,null,null)}),t[pl]=null}};function u0(e){this._internalRoot=e}u0.prototype.unstable_scheduleHydration=function(e){if(e){var t=hA();e={blockedOn:null,target:e,priority:t};for(var r=0;r<tc.length&&t!==0&&t<tc[r].priority;r++);tc.splice(r,0,e),r===0&&pA(e)}};function bS(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function d0(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function JT(){}function EB(e,t,r,a,c){if(c){if(typeof a=="function"){var f=a;a=function(){var C=by(y);f.call(C)}}var y=LR(t,a,e,0,null,!1,!1,"",JT);return e._reactRootContainer=y,e[pl]=y.current,Zp(e.nodeType===8?e.parentNode:e),Eu(),y}for(;c=e.lastChild;)e.removeChild(c);if(typeof a=="function"){var l=a;a=function(){var C=by(w);l.call(C)}}var w=yS(e,0,!1,null,null,!1,!1,"",JT);return e._reactRootContainer=w,e[pl]=w.current,Zp(e.nodeType===8?e.parentNode:e),Eu(function(){c0(t,w,r,a)}),w}function h0(e,t,r,a,c){var f=r._reactRootContainer;if(f){var y=f;if(typeof c=="function"){var l=c;c=function(){var w=by(y);l.call(w)}}c0(t,y,e,c)}else y=EB(r,t,e,c,a);return by(y)}uA=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=xp(t.pendingLanes);r!==0&&(Nw(t,r|1),Go(t,wi()),!(mr&6)&&(ph=wi()+500,wc()))}break;case 13:Eu(function(){var a=ml(e,1);if(a!==null){var c=Co();hs(a,e,1,c)}}),_S(e,1)}};jw=function(e){if(e.tag===13){var t=ml(e,134217728);if(t!==null){var r=Co();hs(t,e,134217728,r)}_S(e,134217728)}};dA=function(e){if(e.tag===13){var t=fc(e),r=ml(e,t);if(r!==null){var a=Co();hs(r,e,t,a)}_S(e,t)}};hA=function(){return kr};fA=function(e,t){var r=kr;try{return kr=e,t()}finally{kr=r}};Z1=function(e,t,r){switch(t){case"input":if(j1(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var a=r[t];if(a!==e&&a.form===e.form){var c=n0(a);if(!c)throw Error(Ht(90));HP(a),j1(a,c)}}}break;case"textarea":WP(e,r);break;case"select":t=r.value,t!=null&&Qd(e,!!r.multiple,t,!1)}};QP=pS;eA=Eu;var CB={usingClientEntryPoint:!1,Events:[vm,Ud,n0,YP,JP,pS]},cp={findFiberByHostInstance:lu,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},TB={bundleType:cp.bundleType,version:cp.version,rendererPackageName:cp.rendererPackageName,rendererConfig:cp.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_l.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=rA(e),e===null?null:e.stateNode},findFiberByHostInstance:cp.findFiberByHostInstance||SB,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fv.isDisabled&&fv.supportsFiber)try{Jy=fv.inject(TB),ks=fv}catch{}}ua.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=CB;ua.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!bS(t))throw Error(Ht(200));return wB(e,t,null,r)};ua.createRoot=function(e,t){if(!bS(e))throw Error(Ht(299));var r=!1,a="",c=kR;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onRecoverableError!==void 0&&(c=t.onRecoverableError)),t=yS(e,1,!1,null,null,r,!1,a,c),e[pl]=t.current,Zp(e.nodeType===8?e.parentNode:e),new xS(t)};ua.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Ht(188)):(e=Object.keys(e).join(","),Error(Ht(268,e)));return e=rA(t),e=e===null?null:e.stateNode,e};ua.flushSync=function(e){return Eu(e)};ua.hydrate=function(e,t,r){if(!d0(t))throw Error(Ht(200));return h0(null,e,t,!0,r)};ua.hydrateRoot=function(e,t,r){if(!bS(e))throw Error(Ht(405));var a=r!=null&&r.hydratedSources||null,c=!1,f="",y=kR;if(r!=null&&(r.unstable_strictMode===!0&&(c=!0),r.identifierPrefix!==void 0&&(f=r.identifierPrefix),r.onRecoverableError!==void 0&&(y=r.onRecoverableError)),t=LR(t,null,e,1,r??null,c,!1,f,y),e[pl]=t.current,Zp(e),a)for(e=0;e<a.length;e++)r=a[e],c=r._getVersion,c=c(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,c]:t.mutableSourceEagerHydrationData.push(r,c);return new u0(t)};ua.render=function(e,t,r){if(!d0(t))throw Error(Ht(200));return h0(null,e,t,!1,r)};ua.unmountComponentAtNode=function(e){if(!d0(e))throw Error(Ht(40));return e._reactRootContainer?(Eu(function(){h0(null,null,e,!1,function(){e._reactRootContainer=null,e[pl]=null})}),!0):!1};ua.unstable_batchedUpdates=pS;ua.unstable_renderSubtreeIntoContainer=function(e,t,r,a){if(!d0(r))throw Error(Ht(200));if(e==null||e._reactInternals===void 0)throw Error(Ht(38));return h0(e,t,r,!1,a)};ua.version="18.2.0-next-9e3b772b8-20220608";function $R(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE($R)}catch(e){console.error(e)}}$R(),LP.exports=ua;var vc=LP.exports;const FR=_c(vc),IB=yP({__proto__:null,default:FR},[vc]);function wy(e){return e instanceof HTMLElement||e instanceof SVGElement}function Op(e){return wy(e)?e:e instanceof pt.Component?FR.findDOMNode(e):null}function f0(e,t,r){var a=T.useRef({});return(!("value"in a.current)||r(a.current.condition,t))&&(a.current.value=e(),a.current.condition=t),a.current.value}function wS(e,t){typeof e=="function"?e(t):Kn(e)==="object"&&e&&"current"in e&&(e.current=t)}function gs(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var a=t.filter(function(c){return c});return a.length<=1?a[0]:function(c){t.forEach(function(f){wS(f,c)})}}function p0(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return f0(function(){return gs.apply(void 0,t)},t,function(a,c){return a.length!==c.length||a.every(function(f,y){return f!==c[y]})})}function _m(e){var t,r,a=OP.isMemo(e)?e.type.type:e.type;return!(typeof a=="function"&&!((t=a.prototype)!==null&&t!==void 0&&t.render)||typeof e=="function"&&!((r=e.prototype)!==null&&r!==void 0&&r.render))}var Ib=T.createContext(null);function MB(e){var t=e.children,r=e.onBatchResize,a=T.useRef(0),c=T.useRef([]),f=T.useContext(Ib),y=T.useCallback(function(l,w,C){a.current+=1;var P=a.current;c.current.push({size:l,element:w,data:C}),Promise.resolve().then(function(){P===a.current&&(r==null||r(c.current),c.current=[])}),f==null||f(l,w,C)},[r,f]);return T.createElement(Ib.Provider,{value:y},t)}var BR=function(){if(typeof Map<"u")return Map;function e(t,r){var a=-1;return t.some(function(c,f){return c[0]===r?(a=f,!0):!1}),a}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(r){var a=e(this.__entries__,r),c=this.__entries__[a];return c&&c[1]},t.prototype.set=function(r,a){var c=e(this.__entries__,r);~c?this.__entries__[c][1]=a:this.__entries__.push([r,a])},t.prototype.delete=function(r){var a=this.__entries__,c=e(a,r);~c&&a.splice(c,1)},t.prototype.has=function(r){return!!~e(this.__entries__,r)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(r,a){a===void 0&&(a=null);for(var c=0,f=this.__entries__;c<f.length;c++){var y=f[c];r.call(a,y[1],y[0])}},t}()}(),Mb=typeof window<"u"&&typeof document<"u"&&window.document===document,Sy=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),PB=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(Sy):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)}}(),AB=2;function RB(e,t){var r=!1,a=!1,c=0;function f(){r&&(r=!1,e()),a&&l()}function y(){PB(f)}function l(){var w=Date.now();if(r){if(w-c<AB)return;a=!0}else r=!0,a=!1,setTimeout(y,t);c=w}return l}var OB=20,zB=["top","right","bottom","left","width","height","size","weight"],DB=typeof MutationObserver<"u",LB=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=RB(this.refresh.bind(this),OB)}return e.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},e.prototype.removeObserver=function(t){var r=this.observers_,a=r.indexOf(t);~a&&r.splice(a,1),!r.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){var t=this.updateObservers_();t&&this.refresh()},e.prototype.updateObservers_=function(){var t=this.observers_.filter(function(r){return r.gatherActive(),r.hasActive()});return t.forEach(function(r){return r.broadcastActive()}),t.length>0},e.prototype.connect_=function(){!Mb||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),DB?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){!Mb||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(t){var r=t.propertyName,a=r===void 0?"":r,c=zB.some(function(f){return!!~a.indexOf(f)});c&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),NR=function(e,t){for(var r=0,a=Object.keys(t);r<a.length;r++){var c=a[r];Object.defineProperty(e,c,{value:t[c],enumerable:!1,writable:!1,configurable:!0})}return e},mh=function(e){var t=e&&e.ownerDocument&&e.ownerDocument.defaultView;return t||Sy},jR=m0(0,0,0,0);function Ey(e){return parseFloat(e)||0}function QT(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return t.reduce(function(a,c){var f=e["border-"+c+"-width"];return a+Ey(f)},0)}function kB(e){for(var t=["top","right","bottom","left"],r={},a=0,c=t;a<c.length;a++){var f=c[a],y=e["padding-"+f];r[f]=Ey(y)}return r}function $B(e){var t=e.getBBox();return m0(0,0,t.width,t.height)}function FB(e){var t=e.clientWidth,r=e.clientHeight;if(!t&&!r)return jR;var a=mh(e).getComputedStyle(e),c=kB(a),f=c.left+c.right,y=c.top+c.bottom,l=Ey(a.width),w=Ey(a.height);if(a.boxSizing==="border-box"&&(Math.round(l+f)!==t&&(l-=QT(a,"left","right")+f),Math.round(w+y)!==r&&(w-=QT(a,"top","bottom")+y)),!NB(e)){var C=Math.round(l+f)-t,P=Math.round(w+y)-r;Math.abs(C)!==1&&(l-=C),Math.abs(P)!==1&&(w-=P)}return m0(c.left,c.top,l,w)}var BB=function(){return typeof SVGGraphicsElement<"u"?function(e){return e instanceof mh(e).SVGGraphicsElement}:function(e){return e instanceof mh(e).SVGElement&&typeof e.getBBox=="function"}}();function NB(e){return e===mh(e).document.documentElement}function jB(e){return Mb?BB(e)?$B(e):FB(e):jR}function UB(e){var t=e.x,r=e.y,a=e.width,c=e.height,f=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,y=Object.create(f.prototype);return NR(y,{x:t,y:r,width:a,height:c,top:r,right:t+a,bottom:c+r,left:t}),y}function m0(e,t,r,a){return{x:e,y:t,width:r,height:a}}var VB=function(){function e(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=m0(0,0,0,0),this.target=t}return e.prototype.isActive=function(){var t=jB(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},e}(),HB=function(){function e(t,r){var a=UB(r);NR(this,{target:t,contentRect:a})}return e}(),GB=function(){function e(t,r,a){if(this.activeObservations_=[],this.observations_=new BR,typeof t!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=r,this.callbackCtx_=a}return e.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(t instanceof mh(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var r=this.observations_;r.has(t)||(r.set(t,new VB(t)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(t instanceof mh(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var r=this.observations_;r.has(t)&&(r.delete(t),r.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(r){r.isActive()&&t.activeObservations_.push(r)})},e.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,r=this.activeObservations_.map(function(a){return new HB(a.target,a.broadcastRect())});this.callback_.call(t,r,t),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),UR=typeof WeakMap<"u"?new WeakMap:new BR,VR=function(){function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var r=LB.getInstance(),a=new GB(t,r,this);UR.set(this,a)}return e}();["observe","unobserve","disconnect"].forEach(function(e){VR.prototype[e]=function(){var t;return(t=UR.get(this))[e].apply(t,arguments)}});var WB=function(){return typeof Sy.ResizeObserver<"u"?Sy.ResizeObserver:VR}(),oc=new Map;function qB(e){e.forEach(function(t){var r,a=t.target;(r=oc.get(a))===null||r===void 0||r.forEach(function(c){return c(a)})})}var HR=new WB(qB);function ZB(e,t){oc.has(e)||(oc.set(e,new Set),HR.observe(e)),oc.get(e).add(t)}function XB(e,t){oc.has(e)&&(oc.get(e).delete(t),oc.get(e).size||(HR.unobserve(e),oc.delete(e)))}function ha(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function eI(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,DP(a.key),a)}}function fa(e,t,r){return t&&eI(e.prototype,t),r&&eI(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Pb(e,t){return Pb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,c){return a.__proto__=c,a},Pb(e,t)}function Th(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Pb(e,t)}function Cy(e){return Cy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Cy(e)}function KB(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function gn(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function YB(e,t){if(t&&(Kn(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gn(e)}function Ih(e){var t=KB();return function(){var a=Cy(e),c;if(t){var f=Cy(this).constructor;c=Reflect.construct(a,arguments,f)}else c=a.apply(this,arguments);return YB(this,c)}}var JB=function(e){Th(r,e);var t=Ih(r);function r(){return ha(this,r),t.apply(this,arguments)}return fa(r,[{key:"render",value:function(){return this.props.children}}]),r}(T.Component);function QB(e,t){var r=e.children,a=e.disabled,c=T.useRef(null),f=T.useRef(null),y=T.useContext(Ib),l=typeof r=="function",w=l?r(c):r,C=T.useRef({width:-1,height:-1,offsetWidth:-1,offsetHeight:-1}),P=!l&&T.isValidElement(w)&&_m(w),A=P?w.ref:null,D=p0(A,c),N=function(){var j;return Op(c.current)||(c.current&&Kn(c.current)==="object"?Op((j=c.current)===null||j===void 0?void 0:j.nativeElement):null)||Op(f.current)};T.useImperativeHandle(t,function(){return N()});var F=T.useRef(e);F.current=e;var U=T.useCallback(function(Z){var j=F.current,B=j.onResize,H=j.data,Y=Z.getBoundingClientRect(),ne=Y.width,re=Y.height,Q=Z.offsetWidth,te=Z.offsetHeight,ee=Math.floor(ne),ve=Math.floor(re);if(C.current.width!==ee||C.current.height!==ve||C.current.offsetWidth!==Q||C.current.offsetHeight!==te){var he={width:ee,height:ve,offsetWidth:Q,offsetHeight:te};C.current=he;var oe=Q===Math.round(ne)?ne:Q,fe=te===Math.round(re)?re:te,Te=st(st({},he),{},{offsetWidth:oe,offsetHeight:fe});y==null||y(Te,Z,H),B&&Promise.resolve().then(function(){B(Te,Z)})}},[]);return T.useEffect(function(){var Z=N();return Z&&!a&&ZB(Z,U),function(){return XB(Z,U)}},[c.current,a]),T.createElement(JB,{ref:f},P?T.cloneElement(w,{ref:D}):w)}var e4=T.forwardRef(QB),t4="rc-observer-key";function n4(e,t){var r=e.children,a=typeof r=="function"?[r]:hl(r);return a.map(function(c,f){var y=(c==null?void 0:c.key)||"".concat(t4,"-").concat(f);return T.createElement(e4,Cn({},e,{key:y,ref:f===0?t:void 0}),c)})}var xl=T.forwardRef(n4);xl.Collection=MB;function Sc(e,t){var r=st({},e);return Array.isArray(t)&&t.forEach(function(a){delete r[a]}),r}function Ab(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function r4(e){if(Array.isArray(e))return Ab(e)}function GR(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function SS(e,t){if(e){if(typeof e=="string")return Ab(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ab(e,t)}}function i4(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _n(e){return r4(e)||GR(e)||SS(e)||i4()}var WR=function(t){return+setTimeout(t,16)},qR=function(t){return clearTimeout(t)};typeof window<"u"&&"requestAnimationFrame"in window&&(WR=function(t){return window.requestAnimationFrame(t)},qR=function(t){return window.cancelAnimationFrame(t)});var tI=0,ES=new Map;function ZR(e){ES.delete(e)}var yi=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;tI+=1;var a=tI;function c(f){if(f===0)ZR(a),t();else{var y=WR(function(){c(f-1)});ES.set(a,y)}}return c(r),a};yi.cancel=function(e){var t=ES.get(e);return ZR(e),qR(t)};function CS(e){for(var t=0,r,a=0,c=e.length;c>=4;++a,c-=4)r=e.charCodeAt(a)&255|(e.charCodeAt(++a)&255)<<8|(e.charCodeAt(++a)&255)<<16|(e.charCodeAt(++a)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,t=(r&65535)*1540483477+((r>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(c){case 3:t^=(e.charCodeAt(a+2)&255)<<16;case 2:t^=(e.charCodeAt(a+1)&255)<<8;case 1:t^=e.charCodeAt(a)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}function o4(e,t){if(e==null)return{};var r={},a=Object.keys(e),c,f;for(f=0;f<a.length;f++)c=a[f],!(t.indexOf(c)>=0)&&(r[c]=e[c]);return r}function Vr(e,t){if(e==null)return{};var r=o4(e,t),a,c;if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(e);for(c=0;c<f.length;c++)a=f[c],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function XR(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=new Set;function c(f,y){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,w=a.has(f);if(Uo(!w,"Warning: There may be circular references"),w)return!1;if(f===y)return!0;if(r&&l>1)return!1;a.add(f);var C=l+1;if(Array.isArray(f)){if(!Array.isArray(y)||f.length!==y.length)return!1;for(var P=0;P<f.length;P++)if(!c(f[P],y[P],C))return!1;return!0}if(f&&y&&Kn(f)==="object"&&Kn(y)==="object"){var A=Object.keys(f);return A.length!==Object.keys(y).length?!1:A.every(function(D){return c(f[D],y[D],C)})}return!1}return c(e,t)}var nI="%",a4=function(){function e(t){ha(this,e),ke(this,"instanceId",void 0),ke(this,"cache",new Map),this.instanceId=t}return fa(e,[{key:"get",value:function(r){return this.cache.get(r.join(nI))||null}},{key:"update",value:function(r,a){var c=r.join(nI),f=this.cache.get(c),y=a(f);y===null?this.cache.delete(c):this.cache.set(c,y)}}]),e}(),Rb="data-token-hash",vu="data-css-hash",Xd="__cssinjs_instance__";function s4(){var e=Math.random().toString(12).slice(2);if(typeof document<"u"&&document.head&&document.body){var t=document.body.querySelectorAll("style[".concat(vu,"]"))||[],r=document.head.firstChild;Array.from(t).forEach(function(c){c[Xd]=c[Xd]||e,c[Xd]===e&&document.head.insertBefore(c,r)});var a={};Array.from(document.querySelectorAll("style[".concat(vu,"]"))).forEach(function(c){var f=c.getAttribute(vu);if(a[f]){if(c[Xd]===e){var y;(y=c.parentNode)===null||y===void 0||y.removeChild(c)}}else a[f]=!0})}return new a4(e)}var TS=T.createContext({hashPriority:"low",cache:s4(),defaultCache:!0});function yo(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function l4(e,t){if(!e)return!1;if(e.contains)return e.contains(t);for(var r=t;r;){if(r===e)return!0;r=r.parentNode}return!1}var rI="data-rc-order",iI="data-rc-priority",c4="rc-util-key",Ob=new Map;function KR(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.mark;return t?t.startsWith("data-")?t:"data-".concat(t):c4}function g0(e){if(e.attachTo)return e.attachTo;var t=document.querySelector("head");return t||document.body}function u4(e){return e==="queue"?"prependQueue":e?"prepend":"append"}function YR(e){return Array.from((Ob.get(e)||e).children).filter(function(t){return t.tagName==="STYLE"})}function JR(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!yo())return null;var r=t.csp,a=t.prepend,c=t.priority,f=c===void 0?0:c,y=u4(a),l=y==="prependQueue",w=document.createElement("style");w.setAttribute(rI,y),l&&f&&w.setAttribute(iI,"".concat(f)),r!=null&&r.nonce&&(w.nonce=r==null?void 0:r.nonce),w.innerHTML=e;var C=g0(t),P=C.firstChild;if(a){if(l){var A=YR(C).filter(function(D){if(!["prepend","prependQueue"].includes(D.getAttribute(rI)))return!1;var N=Number(D.getAttribute(iI)||0);return f>=N});if(A.length)return C.insertBefore(w,A[A.length-1].nextSibling),w}C.insertBefore(w,P)}else C.appendChild(w);return w}function QR(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=g0(t);return YR(r).find(function(a){return a.getAttribute(KR(t))===e})}function Ty(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=QR(e,t);if(r){var a=g0(t);a.removeChild(r)}}function d4(e,t){var r=Ob.get(e);if(!r||!l4(document,r)){var a=JR("",t),c=a.parentNode;Ob.set(e,c),e.removeChild(a)}}function gh(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=g0(r);d4(a,r);var c=QR(t,r);if(c){var f,y;if((f=r.csp)!==null&&f!==void 0&&f.nonce&&c.nonce!==((y=r.csp)===null||y===void 0?void 0:y.nonce)){var l;c.nonce=(l=r.csp)===null||l===void 0?void 0:l.nonce}return c.innerHTML!==e&&(c.innerHTML=e),c}var w=JR(e,r);return w.setAttribute(KR(r),t),w}function eO(e){if(Array.isArray(e))return e}function h4(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,c,f,y,l=[],w=!0,C=!1;try{if(f=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;w=!1}else for(;!(w=(a=f.call(r)).done)&&(l.push(a.value),l.length!==t);w=!0);}catch(P){C=!0,c=P}finally{try{if(!w&&r.return!=null&&(y=r.return(),Object(y)!==y))return}finally{if(C)throw c}}return l}}function tO(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $t(e,t){return eO(e)||h4(e,t)||SS(e,t)||tO()}function f4(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}var IS=function(){function e(){ha(this,e),ke(this,"cache",void 0),ke(this,"keys",void 0),ke(this,"cacheCallTimes",void 0),this.cache=new Map,this.keys=[],this.cacheCallTimes=0}return fa(e,[{key:"size",value:function(){return this.keys.length}},{key:"internalGet",value:function(r){var a,c,f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,y={map:this.cache};return r.forEach(function(l){if(!y)y=void 0;else{var w,C;y=(w=y)===null||w===void 0||(C=w.map)===null||C===void 0?void 0:C.get(l)}}),(a=y)!==null&&a!==void 0&&a.value&&f&&(y.value[1]=this.cacheCallTimes++),(c=y)===null||c===void 0?void 0:c.value}},{key:"get",value:function(r){var a;return(a=this.internalGet(r,!0))===null||a===void 0?void 0:a[0]}},{key:"has",value:function(r){return!!this.internalGet(r)}},{key:"set",value:function(r,a){var c=this;if(!this.has(r)){if(this.size()+1>e.MAX_CACHE_SIZE+e.MAX_CACHE_OFFSET){var f=this.keys.reduce(function(C,P){var A=$t(C,2),D=A[1];return c.internalGet(P)[1]<D?[P,c.internalGet(P)[1]]:C},[this.keys[0],this.cacheCallTimes]),y=$t(f,1),l=y[0];this.delete(l)}this.keys.push(r)}var w=this.cache;r.forEach(function(C,P){if(P===r.length-1)w.set(C,{value:[a,c.cacheCallTimes++]});else{var A=w.get(C);A?A.map||(A.map=new Map):w.set(C,{map:new Map}),w=w.get(C).map}})}},{key:"deleteByPath",value:function(r,a){var c=r.get(a[0]);if(a.length===1){var f;return c.map?r.set(a[0],{map:c.map}):r.delete(a[0]),(f=c.value)===null||f===void 0?void 0:f[0]}var y=this.deleteByPath(c.map,a.slice(1));return(!c.map||c.map.size===0)&&!c.value&&r.delete(a[0]),y}},{key:"delete",value:function(r){if(this.has(r))return this.keys=this.keys.filter(function(a){return!f4(a,r)}),this.deleteByPath(this.cache,r)}}]),e}();ke(IS,"MAX_CACHE_SIZE",20);ke(IS,"MAX_CACHE_OFFSET",5);var oI=0,nO=function(){function e(t){ha(this,e),ke(this,"derivatives",void 0),ke(this,"id",void 0),this.derivatives=Array.isArray(t)?t:[t],this.id=oI,t.length===0&&(t.length>0,void 0),oI+=1}return fa(e,[{key:"getDerivativeToken",value:function(r){return this.derivatives.reduce(function(a,c){return c(r,a)},void 0)}}]),e}(),Zx=new IS;function zb(e){var t=Array.isArray(e)?e:[e];return Zx.has(t)||Zx.set(t,new nO(t)),Zx.get(t)}var p4=new WeakMap,Xx={};function m4(e,t){for(var r=p4,a=0;a<t.length;a+=1){var c=t[a];r.has(c)||r.set(c,new WeakMap),r=r.get(c)}return r.has(Xx)||r.set(Xx,e()),r.get(Xx)}var aI=new WeakMap;function Iy(e){var t=aI.get(e)||"";return t||(Object.keys(e).forEach(function(r){var a=e[r];t+=r,a instanceof nO?t+=a.id:a&&Kn(a)==="object"?t+=Iy(a):t+=a}),aI.set(e,t)),t}function g4(e,t){return CS("".concat(t,"_").concat(Iy(e)))}var zp="random-".concat(Date.now(),"-").concat(Math.random()).replace(/\./g,""),rO="_bAmBoO_";function v4(e,t,r){if(yo()){var a,c;gh(e,zp);var f=document.createElement("div");f.style.position="fixed",f.style.left="0",f.style.top="0",t==null||t(f),document.body.appendChild(f);var y=r?r(f):(a=getComputedStyle(f).content)===null||a===void 0?void 0:a.includes(rO);return(c=f.parentNode)===null||c===void 0||c.removeChild(f),Ty(zp),y}return!1}var Kx=void 0;function y4(){return Kx===void 0&&(Kx=v4("@layer ".concat(zp," { .").concat(zp,' { content: "').concat(rO,'"!important; } }'),function(e){e.className=zp})),Kx}var sI=yo()?T.useLayoutEffect:T.useEffect,Lr=function(t,r){var a=T.useRef(!0);sI(function(){return t(a.current)},r),sI(function(){return a.current=!1,function(){a.current=!0}},[])},lI=function(t,r){Lr(function(a){if(!a)return t()},r)},_4=st({},jy),cI=_4.useInsertionEffect,x4=function(t,r,a){T.useMemo(t,a),Lr(function(){return r(!0)},a)},b4=cI?function(e,t,r){return cI(function(){return e(),t()},r)}:x4,w4=st({},jy),S4=w4.useInsertionEffect,E4=function(t){var r=[],a=!1;function c(f){a||r.push(f)}return T.useEffect(function(){return a=!1,function(){a=!0,r.length&&r.forEach(function(f){return f()})}},t),c},C4=function(){return function(t){t()}},T4=typeof S4<"u"?E4:C4;function iO(e,t,r,a,c){var f=T.useContext(TS),y=f.cache,l=[e].concat(_n(t)),w=l.join("_"),C=T4([w]),P=function(F){y.update(l,function(U){var Z=U||[],j=$t(Z,2),B=j[0],H=B===void 0?0:B,Y=j[1],ne=Y,re=ne||r(),Q=[H,re];return F?F(Q):Q})};T.useMemo(function(){P()},[w]);var A=y.get(l),D=A[1];return b4(function(){c==null||c(D)},function(N){return P(function(F){var U=$t(F,2),Z=U[0],j=U[1];return N&&Z===0&&(c==null||c(D)),[Z+1,j]}),function(){y.update(l,function(F){var U=F||[],Z=$t(U,2),j=Z[0],B=j===void 0?0:j,H=Z[1],Y=B-1;return Y===0?(C(function(){return a==null?void 0:a(H,!1)}),null):[B-1,H]})}},[w]),D}var I4={},M4="css",au=new Map;function P4(e){au.set(e,(au.get(e)||0)+1)}function A4(e,t){if(typeof document<"u"){var r=document.querySelectorAll("style[".concat(Rb,'="').concat(e,'"]'));r.forEach(function(a){if(a[Xd]===t){var c;(c=a.parentNode)===null||c===void 0||c.removeChild(a)}})}}var R4=0;function O4(e,t){au.set(e,(au.get(e)||0)-1);var r=Array.from(au.keys()),a=r.filter(function(c){var f=au.get(c)||0;return f<=0});r.length-a.length>R4&&a.forEach(function(c){A4(c,t),au.delete(c)})}var z4=function(t,r,a,c){var f=a.getDerivativeToken(t),y=st(st({},f),r);return c&&(y=c(y)),y};function D4(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=T.useContext(TS),c=a.cache.instanceId,f=r.salt,y=f===void 0?"":f,l=r.override,w=l===void 0?I4:l,C=r.formatToken,P=r.getComputedToken,A=m4(function(){return Object.assign.apply(Object,[{}].concat(_n(t)))},t),D=Iy(A),N=Iy(w),F=iO("token",[y,e.id,D,N],function(){var U=P?P(A,w,e):z4(A,w,e,C),Z=g4(U,y);U._tokenKey=Z,P4(Z);var j="".concat(M4,"-").concat(CS(Z));return U._hashId=j,[U,j]},function(U){O4(U[0]._tokenKey,c)});return F}var L4={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},oO="comm",aO="rule",sO="decl",k4="@import",$4="@keyframes",F4="@layer",B4=Math.abs,MS=String.fromCharCode;function lO(e){return e.trim()}function Nv(e,t,r){return e.replace(t,r)}function N4(e,t){return e.indexOf(t)}function rm(e,t){return e.charCodeAt(t)|0}function im(e,t,r){return e.slice(t,r)}function sl(e){return e.length}function j4(e){return e.length}function pv(e,t){return t.push(e),e}var v0=1,vh=1,cO=0,Fa=0,Pi=0,Mh="";function PS(e,t,r,a,c,f,y,l){return{value:e,root:t,parent:r,type:a,props:c,children:f,line:v0,column:vh,length:y,return:"",siblings:l}}function U4(){return Pi}function V4(){return Pi=Fa>0?rm(Mh,--Fa):0,vh--,Pi===10&&(vh=1,v0--),Pi}function fs(){return Pi=Fa<cO?rm(Mh,Fa++):0,vh++,Pi===10&&(vh=1,v0++),Pi}function yu(){return rm(Mh,Fa)}function jv(){return Fa}function y0(e,t){return im(Mh,e,t)}function Db(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function H4(e){return v0=vh=1,cO=sl(Mh=e),Fa=0,[]}function G4(e){return Mh="",e}function Yx(e){return lO(y0(Fa-1,Lb(e===91?e+2:e===40?e+1:e)))}function W4(e){for(;(Pi=yu())&&Pi<33;)fs();return Db(e)>2||Db(Pi)>3?"":" "}function q4(e,t){for(;--t&&fs()&&!(Pi<48||Pi>102||Pi>57&&Pi<65||Pi>70&&Pi<97););return y0(e,jv()+(t<6&&yu()==32&&fs()==32))}function Lb(e){for(;fs();)switch(Pi){case e:return Fa;case 34:case 39:e!==34&&e!==39&&Lb(Pi);break;case 40:e===41&&Lb(e);break;case 92:fs();break}return Fa}function Z4(e,t){for(;fs()&&e+Pi!==47+10;)if(e+Pi===42+42&&yu()===47)break;return"/*"+y0(t,Fa-1)+"*"+MS(e===47?e:fs())}function X4(e){for(;!Db(yu());)fs();return y0(e,Fa)}function K4(e){return G4(Uv("",null,null,null,[""],e=H4(e),0,[0],e))}function Uv(e,t,r,a,c,f,y,l,w){for(var C=0,P=0,A=y,D=0,N=0,F=0,U=1,Z=1,j=1,B=0,H="",Y=c,ne=f,re=a,Q=H;Z;)switch(F=B,B=fs()){case 40:if(F!=108&&rm(Q,A-1)==58){N4(Q+=Nv(Yx(B),"&","&\f"),"&\f")!=-1&&(j=-1);break}case 34:case 39:case 91:Q+=Yx(B);break;case 9:case 10:case 13:case 32:Q+=W4(F);break;case 92:Q+=q4(jv()-1,7);continue;case 47:switch(yu()){case 42:case 47:pv(Y4(Z4(fs(),jv()),t,r,w),w);break;default:Q+="/"}break;case 123*U:l[C++]=sl(Q)*j;case 125*U:case 59:case 0:switch(B){case 0:case 125:Z=0;case 59+P:j==-1&&(Q=Nv(Q,/\f/g,"")),N>0&&sl(Q)-A&&pv(N>32?dI(Q+";",a,r,A-1,w):dI(Nv(Q," ","")+";",a,r,A-2,w),w);break;case 59:Q+=";";default:if(pv(re=uI(Q,t,r,C,P,c,l,H,Y=[],ne=[],A,f),f),B===123)if(P===0)Uv(Q,t,re,re,Y,f,A,l,ne);else switch(D===99&&rm(Q,3)===110?100:D){case 100:case 108:case 109:case 115:Uv(e,re,re,a&&pv(uI(e,re,re,0,0,c,l,H,c,Y=[],A,ne),ne),c,ne,A,l,a?Y:ne);break;default:Uv(Q,re,re,re,[""],ne,0,l,ne)}}C=P=N=0,U=j=1,H=Q="",A=y;break;case 58:A=1+sl(Q),N=F;default:if(U<1){if(B==123)--U;else if(B==125&&U++==0&&V4()==125)continue}switch(Q+=MS(B),B*U){case 38:j=P>0?1:(Q+="\f",-1);break;case 44:l[C++]=(sl(Q)-1)*j,j=1;break;case 64:yu()===45&&(Q+=Yx(fs())),D=yu(),P=A=sl(H=Q+=X4(jv())),B++;break;case 45:F===45&&sl(Q)==2&&(U=0)}}return f}function uI(e,t,r,a,c,f,y,l,w,C,P,A){for(var D=c-1,N=c===0?f:[""],F=j4(N),U=0,Z=0,j=0;U<a;++U)for(var B=0,H=im(e,D+1,D=B4(Z=y[U])),Y=e;B<F;++B)(Y=lO(Z>0?N[B]+" "+H:Nv(H,/&\f/g,N[B])))&&(w[j++]=Y);return PS(e,t,r,c===0?aO:l,w,C,P,A)}function Y4(e,t,r,a){return PS(e,t,r,oO,MS(U4()),im(e,2,-2),0,a)}function dI(e,t,r,a,c){return PS(e,t,r,sO,im(e,0,a),im(e,a+1,-1),a,c)}function kb(e,t){for(var r="",a=0;a<e.length;a++)r+=t(e[a],a,e,t)||"";return r}function J4(e,t,r,a){switch(e.type){case F4:if(e.children.length)break;case k4:case sO:return e.return=e.return||e.value;case oO:return"";case $4:return e.return=e.value+"{"+kb(e.children,a)+"}";case aO:if(!sl(e.value=e.props.join(",")))return""}return sl(r=kb(e.children,a))?e.return=e.value+"{"+r+"}":""}var hI="data-ant-cssinjs-cache-path",uO="_FILE_STYLE__",_u,dO=!0;function Q4(){if(!_u&&(_u={},yo())){var e=document.createElement("div");e.className=hI,e.style.position="fixed",e.style.visibility="hidden",e.style.top="-9999px",document.body.appendChild(e);var t=getComputedStyle(e).content||"";t=t.replace(/^"/,"").replace(/"$/,""),t.split(";").forEach(function(c){var f=c.split(":"),y=$t(f,2),l=y[0],w=y[1];_u[l]=w});var r=document.querySelector("style[".concat(hI,"]"));if(r){var a;dO=!1,(a=r.parentNode)===null||a===void 0||a.removeChild(r)}document.body.removeChild(e)}}function e5(e){return Q4(),!!_u[e]}function t5(e){var t=_u[e],r=null;if(t&&yo())if(dO)r=uO;else{var a=document.querySelector("style[".concat(vu,'="').concat(_u[e],'"]'));a?r=a.innerHTML:delete _u[e]}return[r,t]}var fI=yo(),n5="_skip_check_",hO="_multi_value_";function pI(e){var t=kb(K4(e),J4);return t.replace(/\{%%%\:[^;];}/g,";")}function r5(e){return Kn(e)==="object"&&e&&(n5 in e||hO in e)}function i5(e,t,r){if(!t)return e;var a=".".concat(t),c=r==="low"?":where(".concat(a,")"):a,f=e.split(",").map(function(y){var l,w=y.trim().split(/\s+/),C=w[0]||"",P=((l=C.match(/^\w+/))===null||l===void 0?void 0:l[0])||"";return C="".concat(P).concat(c).concat(C.slice(P.length)),[C].concat(_n(w.slice(1))).join(" ")});return f.join(",")}var o5=function e(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{root:!0,parentSelectors:[]},c=a.root,f=a.injectHash,y=a.parentSelectors,l=r.hashId,w=r.layer;r.path;var C=r.hashPriority,P=r.transformers,A=P===void 0?[]:P;r.linters;var D="",N={};function F(H){var Y=H.getName(l);if(!N[Y]){var ne=e(H.style,r,{root:!1,parentSelectors:y}),re=$t(ne,1),Q=re[0];N[Y]="@keyframes ".concat(H.getName(l)).concat(Q)}}function U(H){var Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return H.forEach(function(ne){Array.isArray(ne)?U(ne,Y):ne&&Y.push(ne)}),Y}var Z=U(Array.isArray(t)?t:[t]);if(Z.forEach(function(H){var Y=typeof H=="string"&&!c?{}:H;if(typeof Y=="string")D+="".concat(Y,`
`);else if(Y._keyframe)F(Y);else{var ne=A.reduce(function(re,Q){var te;return(Q==null||(te=Q.visit)===null||te===void 0?void 0:te.call(Q,re))||re},Y);Object.keys(ne).forEach(function(re){var Q=ne[re];if(Kn(Q)==="object"&&Q&&(re!=="animationName"||!Q._keyframe)&&!r5(Q)){var te=!1,ee=re.trim(),ve=!1;(c||f)&&l?ee.startsWith("@")?te=!0:ee=i5(re,l,C):c&&!l&&(ee==="&"||ee==="")&&(ee="",ve=!0);var he=e(Q,r,{root:ve,injectHash:te,parentSelectors:[].concat(_n(y),[ee])}),oe=$t(he,2),fe=oe[0],Te=oe[1];N=st(st({},N),Te),D+="".concat(ee).concat(fe)}else{let je=function(pe,He){var Be=pe.replace(/[A-Z]/g,function(nt){return"-".concat(nt.toLowerCase())}),Ze=He;!L4[pe]&&typeof Ze=="number"&&Ze!==0&&(Ze="".concat(Ze,"px")),pe==="animationName"&&He!==null&&He!==void 0&&He._keyframe&&(F(He),Ze=He.getName(l)),D+="".concat(Be,":").concat(Ze,";")};var Fe,$e=(Fe=Q==null?void 0:Q.value)!==null&&Fe!==void 0?Fe:Q;Kn(Q)==="object"&&Q!==null&&Q!==void 0&&Q[hO]&&Array.isArray($e)?$e.forEach(function(pe){je(re,pe)}):je(re,$e)}})}}),!c)D="{".concat(D,"}");else if(w&&y4()){var j=w.split(","),B=j[j.length-1].trim();D="@layer ".concat(B," {").concat(D,"}"),j.length>1&&(D="@layer ".concat(w,"{%%%:%}").concat(D))}return[D,N]};function a5(e,t){return CS("".concat(e.join("%")).concat(t))}function s5(){return null}function $b(e,t){var r=e.token,a=e.path,c=e.hashId,f=e.layer,y=e.nonce,l=e.clientOnly,w=e.order,C=w===void 0?0:w,P=T.useContext(TS),A=P.autoClear;P.mock;var D=P.defaultCache,N=P.hashPriority,F=P.container,U=P.ssrInline,Z=P.transformers,j=P.linters,B=P.cache,H=r._tokenKey,Y=[H].concat(_n(a)),ne=fI,re=iO("style",Y,function(){var he=Y.join("|");if(e5(he)){var oe=t5(he),fe=$t(oe,2),Te=fe[0],Fe=fe[1];if(Te)return[Te,H,Fe,{},l,C]}var $e=t(),je=o5($e,{hashId:c,hashPriority:N,layer:f,path:a.join("-"),transformers:Z,linters:j}),pe=$t(je,2),He=pe[0],Be=pe[1],Ze=pI(He),nt=a5(Y,Ze);return[Ze,H,nt,Be,l,C]},function(he,oe){var fe=$t(he,3),Te=fe[2];(oe||A)&&fI&&Ty(Te,{mark:vu})},function(he){var oe=$t(he,4),fe=oe[0];oe[1];var Te=oe[2],Fe=oe[3];if(ne&&fe!==uO){var $e={mark:vu,prepend:"queue",attachTo:F,priority:C},je=typeof y=="function"?y():y;je&&($e.csp={nonce:je});var pe=gh(fe,Te,$e);pe[Xd]=B.instanceId,pe.setAttribute(Rb,H),Object.keys(Fe).forEach(function(He){gh(pI(Fe[He]),"_effect-".concat(He),$e)})}}),Q=$t(re,3),te=Q[0],ee=Q[1],ve=Q[2];return function(he){var oe;if(!U||ne||!D)oe=T.createElement(s5,null);else{var fe;oe=T.createElement("style",Cn({},(fe={},ke(fe,Rb,ee),ke(fe,vu,ve),fe),{dangerouslySetInnerHTML:{__html:te}}))}return T.createElement(T.Fragment,null,oe,he)}}var Cr=function(){function e(t,r){ha(this,e),ke(this,"name",void 0),ke(this,"style",void 0),ke(this,"_keyframe",!0),this.name=t,this.style=r}return fa(e,[{key:"getName",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return r?"".concat(r,"-").concat(this.name):this.name}}]),e}();function Td(e){return e.notSplit=!0,e}Td(["borderTop","borderBottom"]),Td(["borderTop"]),Td(["borderBottom"]),Td(["borderLeft","borderRight"]),Td(["borderLeft"]),Td(["borderRight"]);var l5=T.createContext({});const AS=l5;function fO(e){return eO(e)||GR(e)||SS(e)||tO()}function us(e,t){for(var r=e,a=0;a<t.length;a+=1){if(r==null)return;r=r[t[a]]}return r}function pO(e,t,r,a){if(!t.length)return r;var c=fO(t),f=c[0],y=c.slice(1),l;return!e&&typeof f=="number"?l=[]:Array.isArray(e)?l=_n(e):l=st({},e),a&&r===void 0&&y.length===1?delete l[f][y[0]]:l[f]=pO(l[f],y,r,a),l}function as(e,t,r){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return t.length&&a&&r===void 0&&!us(e,t.slice(0,-1))?e:pO(e,t,r,a)}function c5(e){return Kn(e)==="object"&&e!==null&&Object.getPrototypeOf(e)===Object.prototype}function mI(e){return Array.isArray(e)?[]:{}}var u5=typeof Reflect>"u"?Object.keys:Reflect.ownKeys;function Kd(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var a=mI(t[0]);return t.forEach(function(c){function f(y,l){var w=new Set(l),C=us(c,y),P=Array.isArray(C);if(P||c5(C)){if(!w.has(C)){w.add(C);var A=us(a,y);P?a=as(a,y,[]):(!A||Kn(A)!=="object")&&(a=as(a,y,mI(C))),u5(C).forEach(function(D){f([].concat(_n(y),[D]),w)})}}else a=as(a,y,C)}f([])}),a}function d5(){}const h5=T.createContext({}),mO=()=>{const e=()=>{};return e.deprecated=d5,e},f5=T.createContext(void 0),gO={items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"Page",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages",page_size:"Page Size"};var p5={locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"OK",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",yearFormat:"YYYY",dateFormat:"M/D/YYYY",dayFormat:"D",dateTimeFormat:"M/D/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"};const m5={placeholder:"Select time",rangePlaceholder:["Start time","End time"]},vO=m5,g5={lang:Object.assign({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeQuarterPlaceholder:["Start quarter","End quarter"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},p5),timePickerLocale:Object.assign({},vO)},gI=g5,Qo="${label} is not a valid ${type}",v5={locale:"en",Pagination:gO,DatePicker:gI,TimePicker:vO,Calendar:gI,global:{placeholder:"Please select"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",filterCheckall:"Select all items",filterSearchPlaceholder:"Search in filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Tour:{Next:"Next",Previous:"Previous",Finish:"Finish"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand"},PageHeader:{back:"Back"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:Qo,method:Qo,array:Qo,object:Qo,number:Qo,date:Qo,boolean:Qo,integer:Qo,float:Qo,regexp:Qo,email:Qo,url:Qo,hex:Qo},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"},QRCode:{expired:"QR code expired",refresh:"Refresh"},ColorPicker:{presetEmpty:"Empty"}},yh=v5;Object.assign({},yh.Modal);let Vv=[];const vI=()=>Vv.reduce((e,t)=>Object.assign(Object.assign({},e),t),yh.Modal);function y5(e){if(e){const t=Object.assign({},e);return Vv.push(t),vI(),()=>{Vv=Vv.filter(r=>r!==t),vI()}}Object.assign({},yh.Modal)}const _5=T.createContext(void 0),RS=_5,x5=(e,t)=>{const r=T.useContext(RS),a=T.useMemo(()=>{var f;const y=t||yh[e],l=(f=r==null?void 0:r[e])!==null&&f!==void 0?f:{};return Object.assign(Object.assign({},typeof y=="function"?y():y),l||{})},[e,t,r]),c=T.useMemo(()=>{const f=r==null?void 0:r.locale;return r!=null&&r.exist&&!f?yh.locale:f},[r]);return[a,c]},OS=x5,b5="internalMark",w5=e=>{const{locale:t={},children:r,_ANT_MARK__:a}=e;T.useEffect(()=>y5(t&&t.Modal),[t]);const c=T.useMemo(()=>Object.assign(Object.assign({},t),{exist:!0}),[t]);return T.createElement(RS.Provider,{value:c},r)},S5=w5;function eo(e,t){E5(e)&&(e="100%");var r=C5(e);return e=t===360?e:Math.min(t,Math.max(0,parseFloat(e))),r&&(e=parseInt(String(e*t),10)/100),Math.abs(e-t)<1e-6?1:(t===360?e=(e<0?e%t+t:e%t)/parseFloat(String(t)):e=e%t/parseFloat(String(t)),e)}function mv(e){return Math.min(1,Math.max(0,e))}function E5(e){return typeof e=="string"&&e.indexOf(".")!==-1&&parseFloat(e)===1}function C5(e){return typeof e=="string"&&e.indexOf("%")!==-1}function yO(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function gv(e){return e<=1?"".concat(Number(e)*100,"%"):e}function du(e){return e.length===1?"0"+e:String(e)}function T5(e,t,r){return{r:eo(e,255)*255,g:eo(t,255)*255,b:eo(r,255)*255}}function yI(e,t,r){e=eo(e,255),t=eo(t,255),r=eo(r,255);var a=Math.max(e,t,r),c=Math.min(e,t,r),f=0,y=0,l=(a+c)/2;if(a===c)y=0,f=0;else{var w=a-c;switch(y=l>.5?w/(2-a-c):w/(a+c),a){case e:f=(t-r)/w+(t<r?6:0);break;case t:f=(r-e)/w+2;break;case r:f=(e-t)/w+4;break}f/=6}return{h:f,s:y,l}}function Jx(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*(6*r):r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function I5(e,t,r){var a,c,f;if(e=eo(e,360),t=eo(t,100),r=eo(r,100),t===0)c=r,f=r,a=r;else{var y=r<.5?r*(1+t):r+t-r*t,l=2*r-y;a=Jx(l,y,e+1/3),c=Jx(l,y,e),f=Jx(l,y,e-1/3)}return{r:a*255,g:c*255,b:f*255}}function Fb(e,t,r){e=eo(e,255),t=eo(t,255),r=eo(r,255);var a=Math.max(e,t,r),c=Math.min(e,t,r),f=0,y=a,l=a-c,w=a===0?0:l/a;if(a===c)f=0;else{switch(a){case e:f=(t-r)/l+(t<r?6:0);break;case t:f=(r-e)/l+2;break;case r:f=(e-t)/l+4;break}f/=6}return{h:f,s:w,v:y}}function M5(e,t,r){e=eo(e,360)*6,t=eo(t,100),r=eo(r,100);var a=Math.floor(e),c=e-a,f=r*(1-t),y=r*(1-c*t),l=r*(1-(1-c)*t),w=a%6,C=[r,y,f,f,l,r][w],P=[l,r,r,y,f,f][w],A=[f,f,l,r,r,y][w];return{r:C*255,g:P*255,b:A*255}}function Bb(e,t,r,a){var c=[du(Math.round(e).toString(16)),du(Math.round(t).toString(16)),du(Math.round(r).toString(16))];return a&&c[0].startsWith(c[0].charAt(1))&&c[1].startsWith(c[1].charAt(1))&&c[2].startsWith(c[2].charAt(1))?c[0].charAt(0)+c[1].charAt(0)+c[2].charAt(0):c.join("")}function P5(e,t,r,a,c){var f=[du(Math.round(e).toString(16)),du(Math.round(t).toString(16)),du(Math.round(r).toString(16)),du(A5(a))];return c&&f[0].startsWith(f[0].charAt(1))&&f[1].startsWith(f[1].charAt(1))&&f[2].startsWith(f[2].charAt(1))&&f[3].startsWith(f[3].charAt(1))?f[0].charAt(0)+f[1].charAt(0)+f[2].charAt(0)+f[3].charAt(0):f.join("")}function A5(e){return Math.round(parseFloat(e)*255).toString(16)}function _I(e){return na(e)/255}function na(e){return parseInt(e,16)}function R5(e){return{r:e>>16,g:(e&65280)>>8,b:e&255}}var Nb={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function kd(e){var t={r:0,g:0,b:0},r=1,a=null,c=null,f=null,y=!1,l=!1;return typeof e=="string"&&(e=D5(e)),typeof e=="object"&&(rl(e.r)&&rl(e.g)&&rl(e.b)?(t=T5(e.r,e.g,e.b),y=!0,l=String(e.r).substr(-1)==="%"?"prgb":"rgb"):rl(e.h)&&rl(e.s)&&rl(e.v)?(a=gv(e.s),c=gv(e.v),t=M5(e.h,a,c),y=!0,l="hsv"):rl(e.h)&&rl(e.s)&&rl(e.l)&&(a=gv(e.s),f=gv(e.l),t=I5(e.h,a,f),y=!0,l="hsl"),Object.prototype.hasOwnProperty.call(e,"a")&&(r=e.a)),r=yO(r),{ok:y,format:e.format||l,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:r}}var O5="[-\\+]?\\d+%?",z5="[-\\+]?\\d*\\.\\d+%?",ac="(?:".concat(z5,")|(?:").concat(O5,")"),Qx="[\\s|\\(]+(".concat(ac,")[,|\\s]+(").concat(ac,")[,|\\s]+(").concat(ac,")\\s*\\)?"),e1="[\\s|\\(]+(".concat(ac,")[,|\\s]+(").concat(ac,")[,|\\s]+(").concat(ac,")[,|\\s]+(").concat(ac,")\\s*\\)?"),rs={CSS_UNIT:new RegExp(ac),rgb:new RegExp("rgb"+Qx),rgba:new RegExp("rgba"+e1),hsl:new RegExp("hsl"+Qx),hsla:new RegExp("hsla"+e1),hsv:new RegExp("hsv"+Qx),hsva:new RegExp("hsva"+e1),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function D5(e){if(e=e.trim().toLowerCase(),e.length===0)return!1;var t=!1;if(Nb[e])e=Nb[e],t=!0;else if(e==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var r=rs.rgb.exec(e);return r?{r:r[1],g:r[2],b:r[3]}:(r=rs.rgba.exec(e),r?{r:r[1],g:r[2],b:r[3],a:r[4]}:(r=rs.hsl.exec(e),r?{h:r[1],s:r[2],l:r[3]}:(r=rs.hsla.exec(e),r?{h:r[1],s:r[2],l:r[3],a:r[4]}:(r=rs.hsv.exec(e),r?{h:r[1],s:r[2],v:r[3]}:(r=rs.hsva.exec(e),r?{h:r[1],s:r[2],v:r[3],a:r[4]}:(r=rs.hex8.exec(e),r?{r:na(r[1]),g:na(r[2]),b:na(r[3]),a:_I(r[4]),format:t?"name":"hex8"}:(r=rs.hex6.exec(e),r?{r:na(r[1]),g:na(r[2]),b:na(r[3]),format:t?"name":"hex"}:(r=rs.hex4.exec(e),r?{r:na(r[1]+r[1]),g:na(r[2]+r[2]),b:na(r[3]+r[3]),a:_I(r[4]+r[4]),format:t?"name":"hex8"}:(r=rs.hex3.exec(e),r?{r:na(r[1]+r[1]),g:na(r[2]+r[2]),b:na(r[3]+r[3]),format:t?"name":"hex"}:!1)))))))))}function rl(e){return!!rs.CSS_UNIT.exec(String(e))}var Ji=function(){function e(t,r){t===void 0&&(t=""),r===void 0&&(r={});var a;if(t instanceof e)return t;typeof t=="number"&&(t=R5(t)),this.originalInput=t;var c=kd(t);this.originalInput=t,this.r=c.r,this.g=c.g,this.b=c.b,this.a=c.a,this.roundA=Math.round(100*this.a)/100,this.format=(a=r.format)!==null&&a!==void 0?a:c.format,this.gradientType=r.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=c.ok}return e.prototype.isDark=function(){return this.getBrightness()<128},e.prototype.isLight=function(){return!this.isDark()},e.prototype.getBrightness=function(){var t=this.toRgb();return(t.r*299+t.g*587+t.b*114)/1e3},e.prototype.getLuminance=function(){var t=this.toRgb(),r,a,c,f=t.r/255,y=t.g/255,l=t.b/255;return f<=.03928?r=f/12.92:r=Math.pow((f+.055)/1.055,2.4),y<=.03928?a=y/12.92:a=Math.pow((y+.055)/1.055,2.4),l<=.03928?c=l/12.92:c=Math.pow((l+.055)/1.055,2.4),.2126*r+.7152*a+.0722*c},e.prototype.getAlpha=function(){return this.a},e.prototype.setAlpha=function(t){return this.a=yO(t),this.roundA=Math.round(100*this.a)/100,this},e.prototype.isMonochrome=function(){var t=this.toHsl().s;return t===0},e.prototype.toHsv=function(){var t=Fb(this.r,this.g,this.b);return{h:t.h*360,s:t.s,v:t.v,a:this.a}},e.prototype.toHsvString=function(){var t=Fb(this.r,this.g,this.b),r=Math.round(t.h*360),a=Math.round(t.s*100),c=Math.round(t.v*100);return this.a===1?"hsv(".concat(r,", ").concat(a,"%, ").concat(c,"%)"):"hsva(".concat(r,", ").concat(a,"%, ").concat(c,"%, ").concat(this.roundA,")")},e.prototype.toHsl=function(){var t=yI(this.r,this.g,this.b);return{h:t.h*360,s:t.s,l:t.l,a:this.a}},e.prototype.toHslString=function(){var t=yI(this.r,this.g,this.b),r=Math.round(t.h*360),a=Math.round(t.s*100),c=Math.round(t.l*100);return this.a===1?"hsl(".concat(r,", ").concat(a,"%, ").concat(c,"%)"):"hsla(".concat(r,", ").concat(a,"%, ").concat(c,"%, ").concat(this.roundA,")")},e.prototype.toHex=function(t){return t===void 0&&(t=!1),Bb(this.r,this.g,this.b,t)},e.prototype.toHexString=function(t){return t===void 0&&(t=!1),"#"+this.toHex(t)},e.prototype.toHex8=function(t){return t===void 0&&(t=!1),P5(this.r,this.g,this.b,this.a,t)},e.prototype.toHex8String=function(t){return t===void 0&&(t=!1),"#"+this.toHex8(t)},e.prototype.toHexShortString=function(t){return t===void 0&&(t=!1),this.a===1?this.toHexString(t):this.toHex8String(t)},e.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},e.prototype.toRgbString=function(){var t=Math.round(this.r),r=Math.round(this.g),a=Math.round(this.b);return this.a===1?"rgb(".concat(t,", ").concat(r,", ").concat(a,")"):"rgba(".concat(t,", ").concat(r,", ").concat(a,", ").concat(this.roundA,")")},e.prototype.toPercentageRgb=function(){var t=function(r){return"".concat(Math.round(eo(r,255)*100),"%")};return{r:t(this.r),g:t(this.g),b:t(this.b),a:this.a}},e.prototype.toPercentageRgbString=function(){var t=function(r){return Math.round(eo(r,255)*100)};return this.a===1?"rgb(".concat(t(this.r),"%, ").concat(t(this.g),"%, ").concat(t(this.b),"%)"):"rgba(".concat(t(this.r),"%, ").concat(t(this.g),"%, ").concat(t(this.b),"%, ").concat(this.roundA,")")},e.prototype.toName=function(){if(this.a===0)return"transparent";if(this.a<1)return!1;for(var t="#"+Bb(this.r,this.g,this.b,!1),r=0,a=Object.entries(Nb);r<a.length;r++){var c=a[r],f=c[0],y=c[1];if(t===y)return f}return!1},e.prototype.toString=function(t){var r=!!t;t=t??this.format;var a=!1,c=this.a<1&&this.a>=0,f=!r&&c&&(t.startsWith("hex")||t==="name");return f?t==="name"&&this.a===0?this.toName():this.toRgbString():(t==="rgb"&&(a=this.toRgbString()),t==="prgb"&&(a=this.toPercentageRgbString()),(t==="hex"||t==="hex6")&&(a=this.toHexString()),t==="hex3"&&(a=this.toHexString(!0)),t==="hex4"&&(a=this.toHex8String(!0)),t==="hex8"&&(a=this.toHex8String()),t==="name"&&(a=this.toName()),t==="hsl"&&(a=this.toHslString()),t==="hsv"&&(a=this.toHsvString()),a||this.toHexString())},e.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},e.prototype.clone=function(){return new e(this.toString())},e.prototype.lighten=function(t){t===void 0&&(t=10);var r=this.toHsl();return r.l+=t/100,r.l=mv(r.l),new e(r)},e.prototype.brighten=function(t){t===void 0&&(t=10);var r=this.toRgb();return r.r=Math.max(0,Math.min(255,r.r-Math.round(255*-(t/100)))),r.g=Math.max(0,Math.min(255,r.g-Math.round(255*-(t/100)))),r.b=Math.max(0,Math.min(255,r.b-Math.round(255*-(t/100)))),new e(r)},e.prototype.darken=function(t){t===void 0&&(t=10);var r=this.toHsl();return r.l-=t/100,r.l=mv(r.l),new e(r)},e.prototype.tint=function(t){return t===void 0&&(t=10),this.mix("white",t)},e.prototype.shade=function(t){return t===void 0&&(t=10),this.mix("black",t)},e.prototype.desaturate=function(t){t===void 0&&(t=10);var r=this.toHsl();return r.s-=t/100,r.s=mv(r.s),new e(r)},e.prototype.saturate=function(t){t===void 0&&(t=10);var r=this.toHsl();return r.s+=t/100,r.s=mv(r.s),new e(r)},e.prototype.greyscale=function(){return this.desaturate(100)},e.prototype.spin=function(t){var r=this.toHsl(),a=(r.h+t)%360;return r.h=a<0?360+a:a,new e(r)},e.prototype.mix=function(t,r){r===void 0&&(r=50);var a=this.toRgb(),c=new e(t).toRgb(),f=r/100,y={r:(c.r-a.r)*f+a.r,g:(c.g-a.g)*f+a.g,b:(c.b-a.b)*f+a.b,a:(c.a-a.a)*f+a.a};return new e(y)},e.prototype.analogous=function(t,r){t===void 0&&(t=6),r===void 0&&(r=30);var a=this.toHsl(),c=360/r,f=[this];for(a.h=(a.h-(c*t>>1)+720)%360;--t;)a.h=(a.h+c)%360,f.push(new e(a));return f},e.prototype.complement=function(){var t=this.toHsl();return t.h=(t.h+180)%360,new e(t)},e.prototype.monochromatic=function(t){t===void 0&&(t=6);for(var r=this.toHsv(),a=r.h,c=r.s,f=r.v,y=[],l=1/t;t--;)y.push(new e({h:a,s:c,v:f})),f=(f+l)%1;return y},e.prototype.splitcomplement=function(){var t=this.toHsl(),r=t.h;return[this,new e({h:(r+72)%360,s:t.s,l:t.l}),new e({h:(r+216)%360,s:t.s,l:t.l})]},e.prototype.onBackground=function(t){var r=this.toRgb(),a=new e(t).toRgb(),c=r.a+a.a*(1-r.a);return new e({r:(r.r*r.a+a.r*a.a*(1-r.a))/c,g:(r.g*r.a+a.g*a.a*(1-r.a))/c,b:(r.b*r.a+a.b*a.a*(1-r.a))/c,a:c})},e.prototype.triad=function(){return this.polyad(3)},e.prototype.tetrad=function(){return this.polyad(4)},e.prototype.polyad=function(t){for(var r=this.toHsl(),a=r.h,c=[this],f=360/t,y=1;y<t;y++)c.push(new e({h:(a+y*f)%360,s:r.s,l:r.l}));return c},e.prototype.equals=function(t){return this.toRgbString()===new e(t).toRgbString()},e}(),vv=2,xI=.16,L5=.05,k5=.05,$5=.15,_O=5,xO=4,F5=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function bI(e){var t=e.r,r=e.g,a=e.b,c=Fb(t,r,a);return{h:c.h*360,s:c.s,v:c.v}}function yv(e){var t=e.r,r=e.g,a=e.b;return"#".concat(Bb(t,r,a,!1))}function B5(e,t,r){var a=r/100,c={r:(t.r-e.r)*a+e.r,g:(t.g-e.g)*a+e.g,b:(t.b-e.b)*a+e.b};return c}function wI(e,t,r){var a;return Math.round(e.h)>=60&&Math.round(e.h)<=240?a=r?Math.round(e.h)-vv*t:Math.round(e.h)+vv*t:a=r?Math.round(e.h)+vv*t:Math.round(e.h)-vv*t,a<0?a+=360:a>=360&&(a-=360),a}function SI(e,t,r){if(e.h===0&&e.s===0)return e.s;var a;return r?a=e.s-xI*t:t===xO?a=e.s+xI:a=e.s+L5*t,a>1&&(a=1),r&&t===_O&&a>.1&&(a=.1),a<.06&&(a=.06),Number(a.toFixed(2))}function EI(e,t,r){var a;return r?a=e.v+k5*t:a=e.v-$5*t,a>1&&(a=1),Number(a.toFixed(2))}function Cu(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=[],a=kd(e),c=_O;c>0;c-=1){var f=bI(a),y=yv(kd({h:wI(f,c,!0),s:SI(f,c,!0),v:EI(f,c,!0)}));r.push(y)}r.push(yv(a));for(var l=1;l<=xO;l+=1){var w=bI(a),C=yv(kd({h:wI(w,l),s:SI(w,l),v:EI(w,l)}));r.push(C)}return t.theme==="dark"?F5.map(function(P){var A=P.index,D=P.opacity,N=yv(B5(kd(t.backgroundColor||"#141414"),kd(r[A]),D*100));return N}):r}var t1={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1677FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},Dp={},n1={};Object.keys(t1).forEach(function(e){Dp[e]=Cu(t1[e]),Dp[e].primary=Dp[e][5],n1[e]=Cu(t1[e],{theme:"dark",backgroundColor:"#141414"}),n1[e].primary=n1[e][5]});var N5=Dp.gold,j5=Dp.blue;const U5=e=>{const{controlHeight:t}=e;return{controlHeightSM:t*.75,controlHeightXS:t*.5,controlHeightLG:t*1.25}},V5=U5;function H5(e){const{sizeUnit:t,sizeStep:r}=e;return{sizeXXL:t*(r+8),sizeXL:t*(r+4),sizeLG:t*(r+2),sizeMD:t*(r+1),sizeMS:t*r,size:t*r,sizeSM:t*(r-1),sizeXS:t*(r-2),sizeXXS:t*(r-3)}}const bO={blue:"#1677ff",purple:"#722ED1",cyan:"#13C2C2",green:"#52C41A",magenta:"#EB2F96",pink:"#eb2f96",red:"#F5222D",orange:"#FA8C16",yellow:"#FADB14",volcano:"#FA541C",geekblue:"#2F54EB",gold:"#FAAD14",lime:"#A0D911"},G5=Object.assign(Object.assign({},bO),{colorPrimary:"#1677ff",colorSuccess:"#52c41a",colorWarning:"#faad14",colorError:"#ff4d4f",colorInfo:"#1677ff",colorLink:"",colorTextBase:"",colorBgBase:"",fontFamily:`-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial,
'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',
'Noto Color Emoji'`,fontFamilyCode:"'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace",fontSize:14,lineWidth:1,lineType:"solid",motionUnit:.1,motionBase:0,motionEaseOutCirc:"cubic-bezier(0.08, 0.82, 0.17, 1)",motionEaseInOutCirc:"cubic-bezier(0.78, 0.14, 0.15, 0.86)",motionEaseOut:"cubic-bezier(0.215, 0.61, 0.355, 1)",motionEaseInOut:"cubic-bezier(0.645, 0.045, 0.355, 1)",motionEaseOutBack:"cubic-bezier(0.12, 0.4, 0.29, 1.46)",motionEaseInBack:"cubic-bezier(0.71, -0.46, 0.88, 0.6)",motionEaseInQuint:"cubic-bezier(0.755, 0.05, 0.855, 0.06)",motionEaseOutQuint:"cubic-bezier(0.23, 1, 0.32, 1)",borderRadius:6,sizeUnit:4,sizeStep:4,sizePopupArrow:16,controlHeight:32,zIndexBase:0,zIndexPopupBase:1e3,opacityImage:1,wireframe:!1,motion:!0}),om=G5;function W5(e,t){let{generateColorPalettes:r,generateNeutralColorPalettes:a}=t;const{colorSuccess:c,colorWarning:f,colorError:y,colorInfo:l,colorPrimary:w,colorBgBase:C,colorTextBase:P}=e,A=r(w),D=r(c),N=r(f),F=r(y),U=r(l),Z=a(C,P),j=e.colorLink||e.colorInfo,B=r(j);return Object.assign(Object.assign({},Z),{colorPrimaryBg:A[1],colorPrimaryBgHover:A[2],colorPrimaryBorder:A[3],colorPrimaryBorderHover:A[4],colorPrimaryHover:A[5],colorPrimary:A[6],colorPrimaryActive:A[7],colorPrimaryTextHover:A[8],colorPrimaryText:A[9],colorPrimaryTextActive:A[10],colorSuccessBg:D[1],colorSuccessBgHover:D[2],colorSuccessBorder:D[3],colorSuccessBorderHover:D[4],colorSuccessHover:D[4],colorSuccess:D[6],colorSuccessActive:D[7],colorSuccessTextHover:D[8],colorSuccessText:D[9],colorSuccessTextActive:D[10],colorErrorBg:F[1],colorErrorBgHover:F[2],colorErrorBorder:F[3],colorErrorBorderHover:F[4],colorErrorHover:F[5],colorError:F[6],colorErrorActive:F[7],colorErrorTextHover:F[8],colorErrorText:F[9],colorErrorTextActive:F[10],colorWarningBg:N[1],colorWarningBgHover:N[2],colorWarningBorder:N[3],colorWarningBorderHover:N[4],colorWarningHover:N[4],colorWarning:N[6],colorWarningActive:N[7],colorWarningTextHover:N[8],colorWarningText:N[9],colorWarningTextActive:N[10],colorInfoBg:U[1],colorInfoBgHover:U[2],colorInfoBorder:U[3],colorInfoBorderHover:U[4],colorInfoHover:U[4],colorInfo:U[6],colorInfoActive:U[7],colorInfoTextHover:U[8],colorInfoText:U[9],colorInfoTextActive:U[10],colorLinkHover:B[4],colorLink:B[6],colorLinkActive:B[7],colorBgMask:new Ji("#000").setAlpha(.45).toRgbString(),colorWhite:"#fff"})}const q5=e=>{let t=e,r=e,a=e,c=e;return e<6&&e>=5?t=e+1:e<16&&e>=6?t=e+2:e>=16&&(t=16),e<7&&e>=5?r=4:e<8&&e>=7?r=5:e<14&&e>=8?r=6:e<16&&e>=14?r=7:e>=16&&(r=8),e<6&&e>=2?a=1:e>=6&&(a=2),e>4&&e<8?c=4:e>=8&&(c=6),{borderRadius:e,borderRadiusXS:a,borderRadiusSM:r,borderRadiusLG:t,borderRadiusOuter:c}},Z5=q5;function X5(e){const{motionUnit:t,motionBase:r,borderRadius:a,lineWidth:c}=e;return Object.assign({motionDurationFast:`${(r+t).toFixed(1)}s`,motionDurationMid:`${(r+t*2).toFixed(1)}s`,motionDurationSlow:`${(r+t*3).toFixed(1)}s`,lineWidthBold:c+1},Z5(a))}const il=(e,t)=>new Ji(e).setAlpha(t).toRgbString(),up=(e,t)=>new Ji(e).darken(t).toHexString(),K5=e=>{const t=Cu(e);return{1:t[0],2:t[1],3:t[2],4:t[3],5:t[4],6:t[5],7:t[6],8:t[4],9:t[5],10:t[6]}},Y5=(e,t)=>{const r=e||"#fff",a=t||"#000";return{colorBgBase:r,colorTextBase:a,colorText:il(a,.88),colorTextSecondary:il(a,.65),colorTextTertiary:il(a,.45),colorTextQuaternary:il(a,.25),colorFill:il(a,.15),colorFillSecondary:il(a,.06),colorFillTertiary:il(a,.04),colorFillQuaternary:il(a,.02),colorBgLayout:up(r,4),colorBgContainer:up(r,0),colorBgElevated:up(r,0),colorBgSpotlight:il(a,.85),colorBgBlur:"transparent",colorBorder:up(r,15),colorBorderSecondary:up(r,6)}};function J5(e){const t=new Array(10).fill(null).map((r,a)=>{const c=a-1,f=e*Math.pow(2.71828,c/5),y=a>1?Math.floor(f):Math.ceil(f);return Math.floor(y/2)*2});return t[1]=e,t.map(r=>{const a=r+8;return{size:r,lineHeight:a/r}})}const Q5=e=>{const t=J5(e),r=t.map(c=>c.size),a=t.map(c=>c.lineHeight);return{fontSizeSM:r[0],fontSize:r[1],fontSizeLG:r[2],fontSizeXL:r[3],fontSizeHeading1:r[6],fontSizeHeading2:r[5],fontSizeHeading3:r[4],fontSizeHeading4:r[3],fontSizeHeading5:r[2],lineHeight:a[1],lineHeightLG:a[2],lineHeightSM:a[0],lineHeightHeading1:a[6],lineHeightHeading2:a[5],lineHeightHeading3:a[4],lineHeightHeading4:a[3],lineHeightHeading5:a[2]}},eN=Q5;function tN(e){const t=Object.keys(bO).map(r=>{const a=Cu(e[r]);return new Array(10).fill(1).reduce((c,f,y)=>(c[`${r}-${y+1}`]=a[y],c[`${r}${y+1}`]=a[y],c),{})}).reduce((r,a)=>(r=Object.assign(Object.assign({},r),a),r),{});return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},e),t),W5(e,{generateColorPalettes:K5,generateNeutralColorPalettes:Y5})),eN(e.fontSize)),H5(e)),V5(e)),X5(e))}const wO=zb(tN),SO={token:om,override:{override:om},hashed:!0},EO=pt.createContext(SO),zS="anticon",nN=(e,t)=>t||(e?`ant-${e}`:"ant"),cr=T.createContext({getPrefixCls:nN,iconPrefixCls:zS}),rN=`-ant-${Date.now()}-${Math.random()}`;function iN(e,t){const r={},a=(y,l)=>{let w=y.clone();return w=(l==null?void 0:l(w))||w,w.toRgbString()},c=(y,l)=>{const w=new Ji(y),C=Cu(w.toRgbString());r[`${l}-color`]=a(w),r[`${l}-color-disabled`]=C[1],r[`${l}-color-hover`]=C[4],r[`${l}-color-active`]=C[6],r[`${l}-color-outline`]=w.clone().setAlpha(.2).toRgbString(),r[`${l}-color-deprecated-bg`]=C[0],r[`${l}-color-deprecated-border`]=C[2]};if(t.primaryColor){c(t.primaryColor,"primary");const y=new Ji(t.primaryColor),l=Cu(y.toRgbString());l.forEach((C,P)=>{r[`primary-${P+1}`]=C}),r["primary-color-deprecated-l-35"]=a(y,C=>C.lighten(35)),r["primary-color-deprecated-l-20"]=a(y,C=>C.lighten(20)),r["primary-color-deprecated-t-20"]=a(y,C=>C.tint(20)),r["primary-color-deprecated-t-50"]=a(y,C=>C.tint(50)),r["primary-color-deprecated-f-12"]=a(y,C=>C.setAlpha(C.getAlpha()*.12));const w=new Ji(l[0]);r["primary-color-active-deprecated-f-30"]=a(w,C=>C.setAlpha(C.getAlpha()*.3)),r["primary-color-active-deprecated-d-02"]=a(w,C=>C.darken(2))}return t.successColor&&c(t.successColor,"success"),t.warningColor&&c(t.warningColor,"warning"),t.errorColor&&c(t.errorColor,"error"),t.infoColor&&c(t.infoColor,"info"),`
  :root {
    ${Object.keys(r).map(y=>`--${e}-${y}: ${r[y]};`).join(`
`)}
  }
  `.trim()}function oN(e,t){const r=iN(e,t);yo()&&gh(r,`${rN}-dynamic-theme`)}const jb=T.createContext(!1),aN=e=>{let{children:t,disabled:r}=e;const a=T.useContext(jb);return T.createElement(jb.Provider,{value:r??a},t)},Ph=jb,Ub=T.createContext(void 0),sN=e=>{let{children:t,size:r}=e;const a=T.useContext(Ub);return T.createElement(Ub.Provider,{value:r||a},t)},_0=Ub;function lN(){const e=T.useContext(Ph),t=T.useContext(_0);return{componentDisabled:e,componentSize:t}}const My=["blue","purple","cyan","green","magenta","pink","red","orange","yellow","volcano","geekblue","lime","gold"],cN="5.11.1";function r1(e){return e>=0&&e<=255}function _v(e,t){const{r,g:a,b:c,a:f}=new Ji(e).toRgb();if(f<1)return e;const{r:y,g:l,b:w}=new Ji(t).toRgb();for(let C=.01;C<=1;C+=.01){const P=Math.round((r-y*(1-C))/C),A=Math.round((a-l*(1-C))/C),D=Math.round((c-w*(1-C))/C);if(r1(P)&&r1(A)&&r1(D))return new Ji({r:P,g:A,b:D,a:Math.round(C*100)/100}).toRgbString()}return new Ji({r,g:a,b:c,a:1}).toRgbString()}var uN=globalThis&&globalThis.__rest||function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(r[a[c]]=e[a[c]]);return r};function CO(e){const{override:t}=e,r=uN(e,["override"]),a=Object.assign({},t);Object.keys(om).forEach(D=>{delete a[D]});const c=Object.assign(Object.assign({},r),a),f=480,y=576,l=768,w=992,C=1200,P=1600;if(c.motion===!1){const D="0s";c.motionDurationFast=D,c.motionDurationMid=D,c.motionDurationSlow=D}return Object.assign(Object.assign(Object.assign({},c),{colorFillContent:c.colorFillSecondary,colorFillContentHover:c.colorFill,colorFillAlter:c.colorFillQuaternary,colorBgContainerDisabled:c.colorFillTertiary,colorBorderBg:c.colorBgContainer,colorSplit:_v(c.colorBorderSecondary,c.colorBgContainer),colorTextPlaceholder:c.colorTextQuaternary,colorTextDisabled:c.colorTextQuaternary,colorTextHeading:c.colorText,colorTextLabel:c.colorTextSecondary,colorTextDescription:c.colorTextTertiary,colorTextLightSolid:c.colorWhite,colorHighlight:c.colorError,colorBgTextHover:c.colorFillSecondary,colorBgTextActive:c.colorFill,colorIcon:c.colorTextTertiary,colorIconHover:c.colorText,colorErrorOutline:_v(c.colorErrorBg,c.colorBgContainer),colorWarningOutline:_v(c.colorWarningBg,c.colorBgContainer),fontSizeIcon:c.fontSizeSM,lineWidthFocus:c.lineWidth*4,lineWidth:c.lineWidth,controlOutlineWidth:c.lineWidth*2,controlInteractiveSize:c.controlHeight/2,controlItemBgHover:c.colorFillTertiary,controlItemBgActive:c.colorPrimaryBg,controlItemBgActiveHover:c.colorPrimaryBgHover,controlItemBgActiveDisabled:c.colorFill,controlTmpOutline:c.colorFillQuaternary,controlOutline:_v(c.colorPrimaryBg,c.colorBgContainer),lineType:c.lineType,borderRadius:c.borderRadius,borderRadiusXS:c.borderRadiusXS,borderRadiusSM:c.borderRadiusSM,borderRadiusLG:c.borderRadiusLG,fontWeightStrong:600,opacityLoading:.65,linkDecoration:"none",linkHoverDecoration:"none",linkFocusDecoration:"none",controlPaddingHorizontal:12,controlPaddingHorizontalSM:8,paddingXXS:c.sizeXXS,paddingXS:c.sizeXS,paddingSM:c.sizeSM,padding:c.size,paddingMD:c.sizeMD,paddingLG:c.sizeLG,paddingXL:c.sizeXL,paddingContentHorizontalLG:c.sizeLG,paddingContentVerticalLG:c.sizeMS,paddingContentHorizontal:c.sizeMS,paddingContentVertical:c.sizeSM,paddingContentHorizontalSM:c.size,paddingContentVerticalSM:c.sizeXS,marginXXS:c.sizeXXS,marginXS:c.sizeXS,marginSM:c.sizeSM,margin:c.size,marginMD:c.sizeMD,marginLG:c.sizeLG,marginXL:c.sizeXL,marginXXL:c.sizeXXL,boxShadow:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowSecondary:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTertiary:`
      0 1px 2px 0 rgba(0, 0, 0, 0.03),
      0 1px 6px -1px rgba(0, 0, 0, 0.02),
      0 2px 4px 0 rgba(0, 0, 0, 0.02)
    `,screenXS:f,screenXSMin:f,screenXSMax:y-1,screenSM:y,screenSMMin:y,screenSMMax:l-1,screenMD:l,screenMDMin:l,screenMDMax:w-1,screenLG:w,screenLGMin:w,screenLGMax:C-1,screenXL:C,screenXLMin:C,screenXLMax:P-1,screenXXL:P,screenXXLMin:P,boxShadowPopoverArrow:"2px 2px 5px rgba(0, 0, 0, 0.05)",boxShadowCard:`
      0 1px 2px -2px ${new Ji("rgba(0, 0, 0, 0.16)").toRgbString()},
      0 3px 6px 0 ${new Ji("rgba(0, 0, 0, 0.12)").toRgbString()},
      0 5px 12px 4px ${new Ji("rgba(0, 0, 0, 0.09)").toRgbString()}
    `,boxShadowDrawerRight:`
      -6px 0 16px 0 rgba(0, 0, 0, 0.08),
      -3px 0 6px -4px rgba(0, 0, 0, 0.12),
      -9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerLeft:`
      6px 0 16px 0 rgba(0, 0, 0, 0.08),
      3px 0 6px -4px rgba(0, 0, 0, 0.12),
      9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerUp:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerDown:`
      0 -6px 16px 0 rgba(0, 0, 0, 0.08),
      0 -3px 6px -4px rgba(0, 0, 0, 0.12),
      0 -9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTabsOverflowLeft:"inset 10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowRight:"inset -10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowTop:"inset 0 10px 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowBottom:"inset 0 -10px 8px -8px rgba(0, 0, 0, 0.08)"}),a)}var CI=globalThis&&globalThis.__rest||function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(r[a[c]]=e[a[c]]);return r};const TO=(e,t,r)=>{const a=r.getDerivativeToken(e),{override:c}=t,f=CI(t,["override"]);let y=Object.assign(Object.assign({},a),{override:c});return y=CO(y),f&&Object.entries(f).forEach(l=>{let[w,C]=l;const{theme:P}=C,A=CI(C,["theme"]);let D=A;P&&(D=TO(Object.assign(Object.assign({},y),A),{override:A},P)),y[w]=D}),y};function Fs(){const{token:e,hashed:t,theme:r,override:a}=pt.useContext(EO),c=`${cN}-${t||""}`,f=r||wO,[y,l]=D4(f,[om,e],{salt:c,override:a,getComputedToken:TO,formatToken:CO});return[f,y,t?l:""]}function ia(e){var t=T.useRef();t.current=e;var r=T.useCallback(function(){for(var a,c=arguments.length,f=new Array(c),y=0;y<c;y++)f[y]=arguments[y];return(a=t.current)===null||a===void 0?void 0:a.call.apply(a,[t].concat(f))},[]);return r}function oh(e){var t=T.useRef(!1),r=T.useState(e),a=$t(r,2),c=a[0],f=a[1];T.useEffect(function(){return t.current=!1,function(){t.current=!0}},[]);function y(l,w){w&&t.current||f(l)}return[c,y]}function i1(e){return e!==void 0}function ms(e,t){var r=t||{},a=r.defaultValue,c=r.value,f=r.onChange,y=r.postState,l=oh(function(){return i1(c)?c:i1(a)?typeof a=="function"?a():a:typeof e=="function"?e():e}),w=$t(l,2),C=w[0],P=w[1],A=c!==void 0?c:C,D=y?y(A):A,N=ia(f),F=oh([A]),U=$t(F,2),Z=U[0],j=U[1];lI(function(){var H=Z[0];C!==H&&N(C,H)},[Z]),lI(function(){i1(c)||P(c)},[c]);var B=ia(function(H,Y){P(H,Y),j([A],Y)});return[D,B]}const IO=e=>({color:e.colorLink,textDecoration:"none",outline:"none",cursor:"pointer",transition:`color ${e.motionDurationSlow}`,"&:focus, &:hover":{color:e.colorLinkHover},"&:active":{color:e.colorLinkActive}}),dN=(e,t,r,a,c)=>{const f=e/2,y=0,l=f,w=r*1/Math.sqrt(2),C=f-r*(1-1/Math.sqrt(2)),P=f-t*(1/Math.sqrt(2)),A=r*(Math.sqrt(2)-1)+t*(1/Math.sqrt(2)),D=2*f-P,N=A,F=2*f-w,U=C,Z=2*f-y,j=l,B=f*Math.sqrt(2)+r*(Math.sqrt(2)-2),H=r*(Math.sqrt(2)-1);return{pointerEvents:"none",width:e,height:e,overflow:"hidden","&::before":{position:"absolute",bottom:0,insetInlineStart:0,width:e,height:e/2,background:a,clipPath:{_multi_value_:!0,value:[`polygon(${H}px 100%, 50% ${H}px, ${2*f-H}px 100%, ${H}px 100%)`,`path('M ${y} ${l} A ${r} ${r} 0 0 0 ${w} ${C} L ${P} ${A} A ${t} ${t} 0 0 1 ${D} ${N} L ${F} ${U} A ${r} ${r} 0 0 0 ${Z} ${j} Z')`]},content:'""'},"&::after":{content:'""',position:"absolute",width:B,height:B,bottom:0,insetInline:0,margin:"auto",borderRadius:{_skip_check_:!0,value:`0 0 ${t}px 0`},transform:"translateY(50%) rotate(-135deg)",boxShadow:c,zIndex:0,background:"transparent"}}},Vb={overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},ca=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return{boxSizing:"border-box",margin:0,padding:0,color:e.colorText,fontSize:e.fontSize,lineHeight:e.lineHeight,listStyle:"none",fontFamily:t?"inherit":e.fontFamily}},DS=()=>({display:"inline-flex",alignItems:"center",color:"inherit",fontStyle:"normal",lineHeight:0,textAlign:"center",textTransform:"none",verticalAlign:"-0.125em",textRendering:"optimizeLegibility","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale","> *":{lineHeight:1},svg:{display:"inline-block"}}),hN=()=>({"&::before":{display:"table",content:'""'},"&::after":{display:"table",clear:"both",content:'""'}}),fN=e=>({a:{color:e.colorLink,textDecoration:e.linkDecoration,backgroundColor:"transparent",outline:"none",cursor:"pointer",transition:`color ${e.motionDurationSlow}`,"-webkit-text-decoration-skip":"objects","&:hover":{color:e.colorLinkHover},"&:active":{color:e.colorLinkActive},"&:active,\n  &:hover":{textDecoration:e.linkHoverDecoration,outline:0},"&:focus":{textDecoration:e.linkFocusDecoration,outline:0},"&[disabled]":{color:e.colorTextDisabled,cursor:"not-allowed"}}}),pN=(e,t)=>{const{fontFamily:r,fontSize:a}=e,c=`[class^="${t}"], [class*=" ${t}"]`;return{[c]:{fontFamily:r,fontSize:a,boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"},[c]:{boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"}}}}},am=e=>({outline:`${e.lineWidthFocus}px solid ${e.colorPrimaryBorder}`,outlineOffset:1,transition:"outline-offset 0s, outline 0s"}),MO=e=>({"&:focus-visible":Object.assign({},am(e))}),PO=typeof CSSINJS_STATISTIC<"u";let Hb=!0;function $r(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(!PO)return Object.assign.apply(Object,[{}].concat(t));Hb=!1;const a={};return t.forEach(c=>{Object.keys(c).forEach(y=>{Object.defineProperty(a,y,{configurable:!0,enumerable:!0,get:()=>c[y]})})}),Hb=!0,a}const TI={};function mN(){}function gN(e){let t,r=e,a=mN;return PO&&typeof Proxy<"u"&&(t=new Set,r=new Proxy(e,{get(c,f){return Hb&&t.add(f),c[f]}}),a=(c,f)=>{var y;TI[c]={global:Array.from(t),component:Object.assign(Object.assign({},(y=TI[c])===null||y===void 0?void 0:y.component),f)}}),{token:r,keys:t,flush:a}}const vN=(e,t)=>{const[r,a]=Fs();return $b({theme:r,token:a,hashId:"",path:["ant-design-icons",e],nonce:()=>t==null?void 0:t.nonce},()=>[{[`.${e}`]:Object.assign(Object.assign({},DS()),{[`.${e} .${e}-icon`]:{display:"block"}})}])},AO=vN;function _o(e,t,r){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const c=Array.isArray(e)?e:[e,e],[f]=c,y=c.join("-");return l=>{const[w,C,P]=Fs(),{getPrefixCls:A,iconPrefixCls:D,csp:N}=T.useContext(cr),F=A(),U={theme:w,token:C,hashId:P,nonce:()=>N==null?void 0:N.nonce,clientOnly:a.clientOnly,order:a.order||-999};return $b(Object.assign(Object.assign({},U),{clientOnly:!1,path:["Shared",F]}),()=>[{"&":fN(C)}]),AO(D,N),[$b(Object.assign(Object.assign({},U),{path:[y,l,D]}),()=>{const{token:Z,flush:j}=gN(C),B=Object.assign({},C[f]);if(a.deprecatedTokens){const{deprecatedTokens:te}=a;te.forEach(ee=>{let[ve,he]=ee;var oe;(B!=null&&B[ve]||B!=null&&B[he])&&((oe=B[he])!==null&&oe!==void 0||(B[he]=B==null?void 0:B[ve]))})}const H=typeof r=="function"?r($r(Z,B??{})):r,Y=Object.assign(Object.assign({},H),B),ne=`.${l}`,re=$r(Z,{componentCls:ne,prefixCls:l,iconCls:`.${D}`,antCls:`.${F}`},Y),Q=t(re,{hashId:P,prefixCls:l,rootPrefixCls:F,iconPrefixCls:D,overrideComponentToken:B});return j(f,Y),[a.resetStyle===!1?null:pN(re,l),Q]}),P]}}const yN=(e,t,r,a)=>{const c=_o(e,t,r,Object.assign({resetStyle:!1,order:-998},a));return y=>{let{prefixCls:l}=y;return c(l),null}};function _N(e,t){return My.reduce((r,a)=>{const c=e[`${a}1`],f=e[`${a}3`],y=e[`${a}6`],l=e[`${a}7`];return Object.assign(Object.assign({},r),t(a,{lightColor:c,lightBorderColor:f,darkColor:y,textColor:l}))},{})}function xN(e,t){const r=e||{},a=r.inherit===!1||!t?SO:t;return f0(()=>{if(!e)return t;const c=Object.assign({},a.components);return Object.keys(e.components||{}).forEach(f=>{c[f]=Object.assign(Object.assign({},c[f]),e.components[f])}),Object.assign(Object.assign(Object.assign({},a),r),{token:Object.assign(Object.assign({},a.token),r.token),components:c})},[r,a],(c,f)=>c.some((y,l)=>{const w=f[l];return!XR(y,w,!0)}))}var bN=["children"],RO=T.createContext({});function wN(e){var t=e.children,r=Vr(e,bN);return T.createElement(RO.Provider,{value:r},t)}var SN=function(e){Th(r,e);var t=Ih(r);function r(){return ha(this,r),t.apply(this,arguments)}return fa(r,[{key:"render",value:function(){return this.props.children}}]),r}(T.Component),iu="none",xv="appear",bv="enter",wv="leave",II="none",ss="prepare",Yd="start",Jd="active",LS="end",OO="prepared";function MI(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit".concat(e)]="webkit".concat(t),r["Moz".concat(e)]="moz".concat(t),r["ms".concat(e)]="MS".concat(t),r["O".concat(e)]="o".concat(t.toLowerCase()),r}function EN(e,t){var r={animationend:MI("Animation","AnimationEnd"),transitionend:MI("Transition","TransitionEnd")};return e&&("AnimationEvent"in t||delete r.animationend.animation,"TransitionEvent"in t||delete r.transitionend.transition),r}var CN=EN(yo(),typeof window<"u"?window:{}),zO={};if(yo()){var TN=document.createElement("div");zO=TN.style}var Sv={};function DO(e){if(Sv[e])return Sv[e];var t=CN[e];if(t)for(var r=Object.keys(t),a=r.length,c=0;c<a;c+=1){var f=r[c];if(Object.prototype.hasOwnProperty.call(t,f)&&f in zO)return Sv[e]=t[f],Sv[e]}return""}var LO=DO("animationend"),kO=DO("transitionend"),$O=!!(LO&&kO),PI=LO||"animationend",AI=kO||"transitionend";function RI(e,t){if(!e)return null;if(Kn(e)==="object"){var r=t.replace(/-\w/g,function(a){return a[1].toUpperCase()});return e[r]}return"".concat(e,"-").concat(t)}const IN=function(e){var t=T.useRef(),r=T.useRef(e);r.current=e;var a=T.useCallback(function(y){r.current(y)},[]);function c(y){y&&(y.removeEventListener(AI,a),y.removeEventListener(PI,a))}function f(y){t.current&&t.current!==y&&c(t.current),y&&y!==t.current&&(y.addEventListener(AI,a),y.addEventListener(PI,a),t.current=y)}return T.useEffect(function(){return function(){c(t.current)}},[]),[f,c]};var FO=yo()?T.useLayoutEffect:T.useEffect;const MN=function(){var e=T.useRef(null);function t(){yi.cancel(e.current)}function r(a){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;t();var f=yi(function(){c<=1?a({isCanceled:function(){return f!==e.current}}):r(a,c-1)});e.current=f}return T.useEffect(function(){return function(){t()}},[]),[r,t]};var PN=[ss,Yd,Jd,LS],AN=[ss,OO],BO=!1,RN=!0;function NO(e){return e===Jd||e===LS}const ON=function(e,t,r){var a=oh(II),c=$t(a,2),f=c[0],y=c[1],l=MN(),w=$t(l,2),C=w[0],P=w[1];function A(){y(ss,!0)}var D=t?AN:PN;return FO(function(){if(f!==II&&f!==LS){var N=D.indexOf(f),F=D[N+1],U=r(f);U===BO?y(F,!0):F&&C(function(Z){function j(){Z.isCanceled()||y(F,!0)}U===!0?j():Promise.resolve(U).then(j)})}},[e,f]),T.useEffect(function(){return function(){P()}},[]),[A,f]};function zN(e,t,r,a){var c=a.motionEnter,f=c===void 0?!0:c,y=a.motionAppear,l=y===void 0?!0:y,w=a.motionLeave,C=w===void 0?!0:w,P=a.motionDeadline,A=a.motionLeaveImmediately,D=a.onAppearPrepare,N=a.onEnterPrepare,F=a.onLeavePrepare,U=a.onAppearStart,Z=a.onEnterStart,j=a.onLeaveStart,B=a.onAppearActive,H=a.onEnterActive,Y=a.onLeaveActive,ne=a.onAppearEnd,re=a.onEnterEnd,Q=a.onLeaveEnd,te=a.onVisibleChanged,ee=oh(),ve=$t(ee,2),he=ve[0],oe=ve[1],fe=oh(iu),Te=$t(fe,2),Fe=Te[0],$e=Te[1],je=oh(null),pe=$t(je,2),He=pe[0],Be=pe[1],Ze=T.useRef(!1),nt=T.useRef(null);function yt(){return r()}var Ot=T.useRef(!1);function Mt(){$e(iu,!0),Be(null,!0)}function Ft(at){var it=yt();if(!(at&&!at.deadline&&at.target!==it)){var Rt=Ot.current,bt;Fe===xv&&Rt?bt=ne==null?void 0:ne(it,at):Fe===bv&&Rt?bt=re==null?void 0:re(it,at):Fe===wv&&Rt&&(bt=Q==null?void 0:Q(it,at)),Fe!==iu&&Rt&&bt!==!1&&Mt()}}var Nt=IN(Ft),Ct=$t(Nt,1),ut=Ct[0],At=function(it){var Rt,bt,sn;switch(it){case xv:return Rt={},ke(Rt,ss,D),ke(Rt,Yd,U),ke(Rt,Jd,B),Rt;case bv:return bt={},ke(bt,ss,N),ke(bt,Yd,Z),ke(bt,Jd,H),bt;case wv:return sn={},ke(sn,ss,F),ke(sn,Yd,j),ke(sn,Jd,Y),sn;default:return{}}},dt=T.useMemo(function(){return At(Fe)},[Fe]),Bt=ON(Fe,!e,function(at){if(at===ss){var it=dt[ss];return it?it(yt()):BO}if(zt in dt){var Rt;Be(((Rt=dt[zt])===null||Rt===void 0?void 0:Rt.call(dt,yt(),null))||null)}return zt===Jd&&(ut(yt()),P>0&&(clearTimeout(nt.current),nt.current=setTimeout(function(){Ft({deadline:!0})},P))),zt===OO&&Mt(),RN}),gt=$t(Bt,2),jt=gt[0],zt=gt[1],an=NO(zt);Ot.current=an,FO(function(){oe(t);var at=Ze.current;Ze.current=!0;var it;!at&&t&&l&&(it=xv),at&&t&&f&&(it=bv),(at&&!t&&C||!at&&A&&!t&&C)&&(it=wv);var Rt=At(it);it&&(e||Rt[ss])?($e(it),jt()):$e(iu)},[t]),T.useEffect(function(){(Fe===xv&&!l||Fe===bv&&!f||Fe===wv&&!C)&&$e(iu)},[l,f,C]),T.useEffect(function(){return function(){Ze.current=!1,clearTimeout(nt.current)}},[]);var Kt=T.useRef(!1);T.useEffect(function(){he&&(Kt.current=!0),he!==void 0&&Fe===iu&&((Kt.current||he)&&(te==null||te(he)),Kt.current=!0)},[he,Fe]);var Ut=He;return dt[ss]&&zt===Yd&&(Ut=st({transition:"none"},Ut)),[Fe,zt,Ut,he??t]}function DN(e){var t=e;Kn(e)==="object"&&(t=e.transitionSupport);function r(c,f){return!!(c.motionName&&t&&f!==!1)}var a=T.forwardRef(function(c,f){var y=c.visible,l=y===void 0?!0:y,w=c.removeOnLeave,C=w===void 0?!0:w,P=c.forceRender,A=c.children,D=c.motionName,N=c.leavedClassName,F=c.eventProps,U=T.useContext(RO),Z=U.motion,j=r(c,Z),B=T.useRef(),H=T.useRef();function Y(){try{return B.current instanceof HTMLElement?B.current:Op(H.current)}catch{return null}}var ne=zN(j,l,Y,c),re=$t(ne,4),Q=re[0],te=re[1],ee=re[2],ve=re[3],he=T.useRef(ve);ve&&(he.current=!0);var oe=T.useCallback(function(Be){B.current=Be,wS(f,Be)},[f]),fe,Te=st(st({},F),{},{visible:l});if(!A)fe=null;else if(Q===iu)ve?fe=A(st({},Te),oe):!C&&he.current&&N?fe=A(st(st({},Te),{},{className:N}),oe):P||!C&&!N?fe=A(st(st({},Te),{},{style:{display:"none"}}),oe):fe=null;else{var Fe,$e;te===ss?$e="prepare":NO(te)?$e="active":te===Yd&&($e="start");var je=RI(D,"".concat(Q,"-").concat($e));fe=A(st(st({},Te),{},{className:kt(RI(D,Q),(Fe={},ke(Fe,je,je&&$e),ke(Fe,D,typeof D=="string"),Fe)),style:ee}),oe)}if(T.isValidElement(fe)&&_m(fe)){var pe=fe,He=pe.ref;He||(fe=T.cloneElement(fe,{ref:oe}))}return T.createElement(SN,{ref:H},fe)});return a.displayName="CSSMotion",a}const xm=DN($O);var Gb="add",Wb="keep",qb="remove",o1="removed";function LN(e){var t;return e&&Kn(e)==="object"&&"key"in e?t=e:t={key:e},st(st({},t),{},{key:String(t.key)})}function Zb(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return e.map(LN)}function kN(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=[],a=0,c=t.length,f=Zb(e),y=Zb(t);f.forEach(function(C){for(var P=!1,A=a;A<c;A+=1){var D=y[A];if(D.key===C.key){a<A&&(r=r.concat(y.slice(a,A).map(function(N){return st(st({},N),{},{status:Gb})})),a=A),r.push(st(st({},D),{},{status:Wb})),a+=1,P=!0;break}}P||r.push(st(st({},C),{},{status:qb}))}),a<c&&(r=r.concat(y.slice(a).map(function(C){return st(st({},C),{},{status:Gb})})));var l={};r.forEach(function(C){var P=C.key;l[P]=(l[P]||0)+1});var w=Object.keys(l).filter(function(C){return l[C]>1});return w.forEach(function(C){r=r.filter(function(P){var A=P.key,D=P.status;return A!==C||D!==qb}),r.forEach(function(P){P.key===C&&(P.status=Wb)})}),r}var $N=["component","children","onVisibleChanged","onAllRemoved"],FN=["status"],BN=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearPrepare","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];function NN(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:xm,r=function(a){Th(f,a);var c=Ih(f);function f(){var y;ha(this,f);for(var l=arguments.length,w=new Array(l),C=0;C<l;C++)w[C]=arguments[C];return y=c.call.apply(c,[this].concat(w)),ke(gn(y),"state",{keyEntities:[]}),ke(gn(y),"removeKey",function(P){var A=y.state.keyEntities,D=A.map(function(N){return N.key!==P?N:st(st({},N),{},{status:o1})});return y.setState({keyEntities:D}),D.filter(function(N){var F=N.status;return F!==o1}).length}),y}return fa(f,[{key:"render",value:function(){var l=this,w=this.state.keyEntities,C=this.props,P=C.component,A=C.children,D=C.onVisibleChanged,N=C.onAllRemoved,F=Vr(C,$N),U=P||T.Fragment,Z={};return BN.forEach(function(j){Z[j]=F[j],delete F[j]}),delete F.keys,T.createElement(U,F,w.map(function(j,B){var H=j.status,Y=Vr(j,FN),ne=H===Gb||H===Wb;return T.createElement(t,Cn({},Z,{key:Y.key,visible:ne,eventProps:Y,onVisibleChanged:function(Q){if(D==null||D(Q,{key:Y.key}),!Q){var te=l.removeKey(Y.key);te===0&&N&&N()}}}),function(re,Q){return A(st(st({},re),{},{index:B}),Q)})}))}}],[{key:"getDerivedStateFromProps",value:function(l,w){var C=l.keys,P=w.keyEntities,A=Zb(C),D=kN(P,A);return{keyEntities:D.filter(function(N){var F=P.find(function(U){var Z=U.key;return N.key===Z});return!(F&&F.status===o1&&N.status===qb)})}}}]),f}(T.Component);return ke(r,"defaultProps",{component:"div"}),r}const jN=NN($O);function UN(e){const{children:t}=e,[,r]=Fs(),{motion:a}=r,c=T.useRef(!1);return c.current=c.current||a===!1,c.current?T.createElement(wN,{motion:a},t):t}const VN=()=>null;var HN=globalThis&&globalThis.__rest||function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(r[a[c]]=e[a[c]]);return r};const GN=["getTargetContainer","getPopupContainer","renderEmpty","pageHeader","input","pagination","form","select","button"],WN="ant";let Py,jO,UO;function Hv(){return Py||WN}function qN(){return jO||zS}function ZN(e){return Object.keys(e).some(t=>t.endsWith("Color"))}const XN=e=>{let{prefixCls:t,iconPrefixCls:r,theme:a}=e;t!==void 0&&(Py=t),r!==void 0&&(jO=r),a&&(ZN(a)?oN(Hv(),a):UO=a)},VO=()=>({getPrefixCls:(e,t)=>t||(e?`${Hv()}-${e}`:Hv()),getIconPrefixCls:qN,getRootPrefixCls:()=>Py||Hv(),getTheme:()=>UO}),KN=e=>{const{children:t,csp:r,autoInsertSpaceInButton:a,alert:c,anchor:f,form:y,locale:l,componentSize:w,direction:C,space:P,virtual:A,dropdownMatchSelectWidth:D,popupMatchSelectWidth:N,popupOverflow:F,legacyLocale:U,parentContext:Z,iconPrefixCls:j,theme:B,componentDisabled:H,segmented:Y,statistic:ne,spin:re,calendar:Q,carousel:te,cascader:ee,collapse:ve,typography:he,checkbox:oe,descriptions:fe,divider:Te,drawer:Fe,skeleton:$e,steps:je,image:pe,layout:He,list:Be,mentions:Ze,modal:nt,progress:yt,result:Ot,slider:Mt,breadcrumb:Ft,menu:Nt,pagination:Ct,input:ut,empty:At,badge:dt,radio:Bt,rate:gt,switch:jt,transfer:zt,avatar:an,message:Kt,tag:Ut,table:at,card:it,tabs:Rt,timeline:bt,timePicker:sn,upload:An,notification:Mn,tree:rn,colorPicker:Vn,datePicker:Nn,rangePicker:zn,flex:vn,wave:nn,dropdown:Wn,warning:jn}=e,fr=T.useCallback((Me,De)=>{const{prefixCls:we}=e;if(De)return De;const Le=we||Z.getPrefixCls("");return Me?`${Le}-${Me}`:Le},[Z.getPrefixCls,e.prefixCls]),or=j||Z.iconPrefixCls||zS,qn=r||Z.csp;AO(or,qn);const Qn=xN(B,Z.theme),Rr={csp:qn,autoInsertSpaceInButton:a,alert:c,anchor:f,locale:l||U,direction:C,space:P,virtual:A,popupMatchSelectWidth:N??D,popupOverflow:F,getPrefixCls:fr,iconPrefixCls:or,theme:Qn,segmented:Y,statistic:ne,spin:re,calendar:Q,carousel:te,cascader:ee,collapse:ve,typography:he,checkbox:oe,descriptions:fe,divider:Te,drawer:Fe,skeleton:$e,steps:je,image:pe,input:ut,layout:He,list:Be,mentions:Ze,modal:nt,progress:yt,result:Ot,slider:Mt,breadcrumb:Ft,menu:Nt,pagination:Ct,empty:At,badge:dt,radio:Bt,rate:gt,switch:jt,transfer:zt,avatar:an,message:Kt,tag:Ut,table:at,card:it,tabs:Rt,timeline:bt,timePicker:sn,upload:An,notification:Mn,tree:rn,colorPicker:Vn,datePicker:Nn,rangePicker:zn,flex:vn,wave:nn,dropdown:Wn,warning:jn},_e=Object.assign({},Z);Object.keys(Rr).forEach(Me=>{Rr[Me]!==void 0&&(_e[Me]=Rr[Me])}),GN.forEach(Me=>{const De=e[Me];De&&(_e[Me]=De)});const W=f0(()=>_e,_e,(Me,De)=>{const we=Object.keys(Me),Le=Object.keys(De);return we.length!==Le.length||we.some(Ne=>Me[Ne]!==De[Ne])}),J=T.useMemo(()=>({prefixCls:or,csp:qn}),[or,qn]);let ue=T.createElement(T.Fragment,null,T.createElement(VN,{dropdownMatchSelectWidth:D}),t);const Se=T.useMemo(()=>{var Me,De,we,Le;return Kd(((Me=yh.Form)===null||Me===void 0?void 0:Me.defaultValidateMessages)||{},((we=(De=W.locale)===null||De===void 0?void 0:De.Form)===null||we===void 0?void 0:we.defaultValidateMessages)||{},((Le=W.form)===null||Le===void 0?void 0:Le.validateMessages)||{},(y==null?void 0:y.validateMessages)||{})},[W,y==null?void 0:y.validateMessages]);Object.keys(Se).length>0&&(ue=T.createElement(f5.Provider,{value:Se},ue)),l&&(ue=T.createElement(S5,{locale:l,_ANT_MARK__:b5},ue)),(or||qn)&&(ue=T.createElement(AS.Provider,{value:J},ue)),w&&(ue=T.createElement(sN,{size:w},ue)),ue=T.createElement(UN,null,ue);const Ie=T.useMemo(()=>{const Me=Qn||{},{algorithm:De,token:we,components:Le}=Me,Ne=HN(Me,["algorithm","token","components"]),Je=De&&(!Array.isArray(De)||De.length>0)?zb(De):wO,Ge={};Object.entries(Le||{}).forEach(Yt=>{let[Zt,un]=Yt;const ln=Object.assign({},un);"algorithm"in ln&&(ln.algorithm===!0?ln.theme=Je:(Array.isArray(ln.algorithm)||typeof ln.algorithm=="function")&&(ln.theme=zb(ln.algorithm)),delete ln.algorithm),Ge[Zt]=ln});const _t=Object.assign(Object.assign({},om),we);return Object.assign(Object.assign({},Ne),{theme:Je,token:_t,components:Ge,override:Object.assign({override:_t},Ge)})},[Qn]);return B&&(ue=T.createElement(EO.Provider,{value:Ie},ue)),W.warning&&(ue=T.createElement(h5.Provider,{value:W.warning},ue)),H!==void 0&&(ue=T.createElement(aN,{disabled:H},ue)),T.createElement(cr.Provider,{value:W},ue)},Ah=e=>{const t=T.useContext(cr),r=T.useContext(RS);return T.createElement(KN,Object.assign({parentContext:t,legacyLocale:r},e))};Ah.ConfigContext=cr;Ah.SizeContext=_0;Ah.config=XN;Ah.useConfig=lN;Object.defineProperty(Ah,"SizeContext",{get:()=>_0});const HO=Ah;var YN={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z"}}]},name:"check-circle",theme:"filled"};const JN=YN;function GO(e){var t;return e==null||(t=e.getRootNode)===null||t===void 0?void 0:t.call(e)}function QN(e){return GO(e)instanceof ShadowRoot}function Ay(e){return QN(e)?GO(e):null}function e6(e){return e.replace(/-(.)/g,function(t,r){return r.toUpperCase()})}function t6(e,t){Uo(e,"[@ant-design/icons] ".concat(t))}function OI(e){return Kn(e)==="object"&&typeof e.name=="string"&&typeof e.theme=="string"&&(Kn(e.icon)==="object"||typeof e.icon=="function")}function zI(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.keys(e).reduce(function(t,r){var a=e[r];switch(r){case"class":t.className=a,delete t.class;break;default:delete t[r],t[e6(r)]=a}return t},{})}function Xb(e,t,r){return r?pt.createElement(e.tag,st(st({key:t},zI(e.attrs)),r),(e.children||[]).map(function(a,c){return Xb(a,"".concat(t,"-").concat(e.tag,"-").concat(c))})):pt.createElement(e.tag,st({key:t},zI(e.attrs)),(e.children||[]).map(function(a,c){return Xb(a,"".concat(t,"-").concat(e.tag,"-").concat(c))}))}function WO(e){return Cu(e)[0]}function qO(e){return e?Array.isArray(e)?e:[e]:[]}var n6=`
.anticon {
  display: inline-block;
  color: inherit;
  font-style: normal;
  line-height: 0;
  text-align: center;
  text-transform: none;
  vertical-align: -0.125em;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.anticon > * {
  line-height: 1;
}

.anticon svg {
  display: inline-block;
}

.anticon::before {
  display: none;
}

.anticon .anticon-icon {
  display: block;
}

.anticon[tabindex] {
  cursor: pointer;
}

.anticon-spin::before,
.anticon-spin {
  display: inline-block;
  -webkit-animation: loadingCircle 1s infinite linear;
  animation: loadingCircle 1s infinite linear;
}

@-webkit-keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
`,r6=function(t){var r=T.useContext(AS),a=r.csp,c=r.prefixCls,f=n6;c&&(f=f.replace(/anticon/g,c)),T.useEffect(function(){var y=t.current,l=Ay(y);gh(f,"@ant-design-icons",{prepend:!0,csp:a,attachTo:l})},[])},i6=["icon","className","onClick","style","primaryColor","secondaryColor"],Lp={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};function o6(e){var t=e.primaryColor,r=e.secondaryColor;Lp.primaryColor=t,Lp.secondaryColor=r||WO(t),Lp.calculated=!!r}function a6(){return st({},Lp)}var x0=function(t){var r=t.icon,a=t.className,c=t.onClick,f=t.style,y=t.primaryColor,l=t.secondaryColor,w=Vr(t,i6),C=T.useRef(),P=Lp;if(y&&(P={primaryColor:y,secondaryColor:l||WO(y)}),r6(C),t6(OI(r),"icon should be icon definiton, but got ".concat(r)),!OI(r))return null;var A=r;return A&&typeof A.icon=="function"&&(A=st(st({},A),{},{icon:A.icon(P.primaryColor,P.secondaryColor)})),Xb(A.icon,"svg-".concat(A.name),st(st({className:a,onClick:c,style:f,"data-icon":A.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},w),{},{ref:C}))};x0.displayName="IconReact";x0.getTwoToneColors=a6;x0.setTwoToneColors=o6;const kS=x0;function ZO(e){var t=qO(e),r=$t(t,2),a=r[0],c=r[1];return kS.setTwoToneColors({primaryColor:a,secondaryColor:c})}function s6(){var e=kS.getTwoToneColors();return e.calculated?[e.primaryColor,e.secondaryColor]:e.primaryColor}var l6=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];ZO(j5.primary);var b0=T.forwardRef(function(e,t){var r,a=e.className,c=e.icon,f=e.spin,y=e.rotate,l=e.tabIndex,w=e.onClick,C=e.twoToneColor,P=Vr(e,l6),A=T.useContext(AS),D=A.prefixCls,N=D===void 0?"anticon":D,F=A.rootClassName,U=kt(F,N,(r={},ke(r,"".concat(N,"-").concat(c.name),!!c.name),ke(r,"".concat(N,"-spin"),!!f||c.name==="loading"),r),a),Z=l;Z===void 0&&w&&(Z=-1);var j=y?{msTransform:"rotate(".concat(y,"deg)"),transform:"rotate(".concat(y,"deg)")}:void 0,B=qO(C),H=$t(B,2),Y=H[0],ne=H[1];return T.createElement("span",Cn({role:"img","aria-label":c.name},P,{ref:t,tabIndex:Z,onClick:w,className:U}),T.createElement(kS,{icon:c,primaryColor:Y,secondaryColor:ne,style:j}))});b0.displayName="AntdIcon";b0.getTwoToneColor=s6;b0.setTwoToneColor=ZO;const Xi=b0;var c6=function(t,r){return T.createElement(Xi,Cn({},t,{ref:r,icon:JN}))};const u6=T.forwardRef(c6);var d6={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm127.98 274.82h-.04l-.08.06L512 466.75 384.14 338.88c-.04-.05-.06-.06-.08-.06a.12.12 0 00-.07 0c-.03 0-.05.01-.09.05l-45.02 45.02a.2.2 0 00-.05.09.12.12 0 000 .07v.02a.27.27 0 00.06.06L466.75 512 338.88 639.86c-.05.04-.06.06-.06.08a.12.12 0 000 .07c0 .03.01.05.05.09l45.02 45.02a.2.2 0 00.09.05.12.12 0 00.07 0c.02 0 .04-.01.08-.05L512 557.25l127.86 127.87c.04.04.06.05.08.05a.12.12 0 00.07 0c.03 0 .05-.01.09-.05l45.02-45.02a.2.2 0 00.05-.09.12.12 0 000-.07v-.02a.27.27 0 00-.05-.06L557.25 512l127.87-127.86c.04-.04.05-.06.05-.08a.12.12 0 000-.07c0-.03-.01-.05-.05-.09l-45.02-45.02a.2.2 0 00-.09-.05.12.12 0 00-.07 0z"}}]},name:"close-circle",theme:"filled"};const h6=d6;var f6=function(t,r){return T.createElement(Xi,Cn({},t,{ref:r,icon:h6}))};const w0=T.forwardRef(f6);var p6={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M799.86 166.31c.02 0 .04.02.08.06l57.69 57.7c.04.03.05.05.06.08a.12.12 0 010 .06c0 .03-.02.05-.06.09L569.93 512l287.7 287.7c.04.04.05.06.06.09a.12.12 0 010 .07c0 .02-.02.04-.06.08l-57.7 57.69c-.03.04-.05.05-.07.06a.12.12 0 01-.07 0c-.03 0-.05-.02-.09-.06L512 569.93l-287.7 287.7c-.04.04-.06.05-.09.06a.12.12 0 01-.07 0c-.02 0-.04-.02-.08-.06l-57.69-57.7c-.04-.03-.05-.05-.06-.07a.12.12 0 010-.07c0-.03.02-.05.06-.09L454.07 512l-287.7-287.7c-.04-.04-.05-.06-.06-.09a.12.12 0 010-.07c0-.02.02-.04.06-.08l57.7-57.69c.03-.04.05-.05.07-.06a.12.12 0 01.07 0c.03 0 .05.02.09.06L512 454.07l287.7-287.7c.04-.04.06-.05.09-.06a.12.12 0 01.07 0z"}}]},name:"close",theme:"outlined"};const m6=p6;var g6=function(t,r){return T.createElement(Xi,Cn({},t,{ref:r,icon:m6}))};const XO=T.forwardRef(g6);var v6={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm-32 232c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V296zm32 440a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"exclamation-circle",theme:"filled"};const y6=v6;var _6=function(t,r){return T.createElement(Xi,Cn({},t,{ref:r,icon:y6}))};const x6=T.forwardRef(_6);var b6={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm32 664c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272zm-32-344a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"info-circle",theme:"filled"};const w6=b6;var S6=function(t,r){return T.createElement(Xi,Cn({},t,{ref:r,icon:w6}))};const E6=T.forwardRef(S6);var C6=`accept acceptCharset accessKey action allowFullScreen allowTransparency
    alt async autoComplete autoFocus autoPlay capture cellPadding cellSpacing challenge
    charSet checked classID className colSpan cols content contentEditable contextMenu
    controls coords crossOrigin data dateTime default defer dir disabled download draggable
    encType form formAction formEncType formMethod formNoValidate formTarget frameBorder
    headers height hidden high href hrefLang htmlFor httpEquiv icon id inputMode integrity
    is keyParams keyType kind label lang list loop low manifest marginHeight marginWidth max maxLength media
    mediaGroup method min minLength multiple muted name noValidate nonce open
    optimum pattern placeholder poster preload radioGroup readOnly rel required
    reversed role rowSpan rows sandbox scope scoped scrolling seamless selected
    shape size sizes span spellCheck src srcDoc srcLang srcSet start step style
    summary tabIndex target title type useMap value width wmode wrap`,T6=`onCopy onCut onPaste onCompositionEnd onCompositionStart onCompositionUpdate onKeyDown
    onKeyPress onKeyUp onFocus onBlur onChange onInput onSubmit onClick onContextMenu onDoubleClick
    onDrag onDragEnd onDragEnter onDragExit onDragLeave onDragOver onDragStart onDrop onMouseDown
    onMouseEnter onMouseLeave onMouseMove onMouseOut onMouseOver onMouseUp onSelect onTouchCancel
    onTouchEnd onTouchMove onTouchStart onScroll onWheel onAbort onCanPlay onCanPlayThrough
    onDurationChange onEmptied onEncrypted onEnded onError onLoadedData onLoadedMetadata
    onLoadStart onPause onPlay onPlaying onProgress onRateChange onSeeked onSeeking onStalled onSuspend onTimeUpdate onVolumeChange onWaiting onLoad onError`,I6="".concat(C6," ").concat(T6).split(/[\s\n]+/),M6="aria-",P6="data-";function DI(e,t){return e.indexOf(t)===0}function _h(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r;t===!1?r={aria:!0,data:!0,attr:!0}:t===!0?r={aria:!0}:r=st({},t);var a={};return Object.keys(e).forEach(function(c){(r.aria&&(c==="role"||DI(c,M6))||r.data&&DI(c,P6)||r.attr&&I6.includes(c))&&(a[c]=e[c])}),a}const{isValidElement:sm}=jy;function KO(e){return e&&sm(e)&&e.type===T.Fragment}function A6(e,t,r){return sm(e)?T.cloneElement(e,typeof r=="function"?r(e.props||{}):r):t}function vl(e,t){return A6(e,e,t)}var Vt={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(t){var r=t.keyCode;if(t.altKey&&!t.ctrlKey||t.metaKey||r>=Vt.F1&&r<=Vt.F12)return!1;switch(r){case Vt.ALT:case Vt.CAPS_LOCK:case Vt.CONTEXT_MENU:case Vt.CTRL:case Vt.DOWN:case Vt.END:case Vt.ESC:case Vt.HOME:case Vt.INSERT:case Vt.LEFT:case Vt.MAC_FF_META:case Vt.META:case Vt.NUMLOCK:case Vt.NUM_CENTER:case Vt.PAGE_DOWN:case Vt.PAGE_UP:case Vt.PAUSE:case Vt.PRINT_SCREEN:case Vt.RIGHT:case Vt.SHIFT:case Vt.UP:case Vt.WIN_KEY:case Vt.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(t){if(t>=Vt.ZERO&&t<=Vt.NINE||t>=Vt.NUM_ZERO&&t<=Vt.NUM_MULTIPLY||t>=Vt.A&&t<=Vt.Z||window.navigator.userAgent.indexOf("WebKit")!==-1&&t===0)return!0;switch(t){case Vt.SPACE:case Vt.QUESTION_MARK:case Vt.NUM_PLUS:case Vt.NUM_MINUS:case Vt.NUM_PERIOD:case Vt.NUM_DIVISION:case Vt.SEMICOLON:case Vt.DASH:case Vt.EQUALS:case Vt.COMMA:case Vt.PERIOD:case Vt.SLASH:case Vt.APOSTROPHE:case Vt.SINGLE_QUOTE:case Vt.OPEN_SQUARE_BRACKET:case Vt.BACKSLASH:case Vt.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}},YO=T.forwardRef(function(e,t){var r=e.prefixCls,a=e.style,c=e.className,f=e.duration,y=f===void 0?4.5:f,l=e.eventKey,w=e.content,C=e.closable,P=e.closeIcon,A=P===void 0?"x":P,D=e.props,N=e.onClick,F=e.onNoticeClose,U=e.times,Z=e.hovering,j=T.useState(!1),B=$t(j,2),H=B[0],Y=B[1],ne=Z||H,re=function(){F(l)},Q=function(ve){(ve.key==="Enter"||ve.code==="Enter"||ve.keyCode===Vt.ENTER)&&re()};T.useEffect(function(){if(!ne&&y>0){var ee=setTimeout(function(){re()},y*1e3);return function(){clearTimeout(ee)}}},[y,ne,U]);var te="".concat(r,"-notice");return T.createElement("div",Cn({},D,{ref:t,className:kt(te,c,ke({},"".concat(te,"-closable"),C)),style:a,onMouseEnter:function(ve){var he;Y(!0),D==null||(he=D.onMouseEnter)===null||he===void 0||he.call(D,ve)},onMouseLeave:function(ve){var he;Y(!1),D==null||(he=D.onMouseLeave)===null||he===void 0||he.call(D,ve)},onClick:N}),T.createElement("div",{className:"".concat(te,"-content")},w),C&&T.createElement("a",{tabIndex:0,className:"".concat(te,"-close"),onKeyDown:Q,onClick:function(ve){ve.preventDefault(),ve.stopPropagation(),re()}},A))}),JO=pt.createContext({}),R6=function(t){var r=t.children,a=t.classNames;return pt.createElement(JO.Provider,{value:{classNames:a}},r)},LI=8,kI=3,$I=16,O6=function(t){var r={offset:LI,threshold:kI,gap:$I};if(t&&Kn(t)==="object"){var a,c,f;r.offset=(a=t.offset)!==null&&a!==void 0?a:LI,r.threshold=(c=t.threshold)!==null&&c!==void 0?c:kI,r.gap=(f=t.gap)!==null&&f!==void 0?f:$I}return[!!t,r]},z6=["className","style","classNames","styles"],D6=function(t){var r,a=t.configList,c=t.placement,f=t.prefixCls,y=t.className,l=t.style,w=t.motion,C=t.onAllNoticeRemoved,P=t.onNoticeClose,A=t.stack,D=T.useContext(JO),N=D.classNames,F=T.useRef({}),U=T.useState(null),Z=$t(U,2),j=Z[0],B=Z[1],H=T.useState([]),Y=$t(H,2),ne=Y[0],re=Y[1],Q=a.map(function(je){return{config:je,key:String(je.key)}}),te=O6(A),ee=$t(te,2),ve=ee[0],he=ee[1],oe=he.offset,fe=he.threshold,Te=he.gap,Fe=ve&&(ne.length>0||Q.length<=fe),$e=typeof w=="function"?w(c):w;return T.useEffect(function(){ve&&ne.length>1&&re(function(je){return je.filter(function(pe){return Q.some(function(He){var Be=He.key;return pe===Be})})})},[ne,Q,ve]),T.useEffect(function(){var je;if(ve&&F.current[(je=Q[Q.length-1])===null||je===void 0?void 0:je.key]){var pe;B(F.current[(pe=Q[Q.length-1])===null||pe===void 0?void 0:pe.key])}},[Q,ve]),pt.createElement(jN,Cn({key:c,className:kt(f,"".concat(f,"-").concat(c),N==null?void 0:N.list,y,(r={},ke(r,"".concat(f,"-stack"),!!ve),ke(r,"".concat(f,"-stack-expanded"),Fe),r)),style:l,keys:Q,motionAppear:!0},$e,{onAllRemoved:function(){C(c)}}),function(je,pe){var He=je.config,Be=je.className,Ze=je.style,nt=je.index,yt=He,Ot=yt.key,Mt=yt.times,Ft=String(Ot),Nt=He,Ct=Nt.className,ut=Nt.style,At=Nt.classNames,dt=Nt.styles,Bt=Vr(Nt,z6),gt=Q.findIndex(function(Mn){return Mn.key===Ft}),jt={};if(ve){var zt=Q.length-1-(gt>-1?gt:nt-1),an=c==="top"||c==="bottom"?"-50%":"0";if(zt>0){var Kt,Ut,at;jt.height=Fe?(Kt=F.current[Ft])===null||Kt===void 0?void 0:Kt.offsetHeight:j==null?void 0:j.offsetHeight;for(var it=0,Rt=0;Rt<zt;Rt++){var bt;it+=((bt=F.current[Q[Q.length-1-Rt].key])===null||bt===void 0?void 0:bt.offsetHeight)+Te}var sn=(Fe?it:zt*oe)*(c.startsWith("top")?1:-1),An=!Fe&&j!==null&&j!==void 0&&j.offsetWidth&&(Ut=F.current[Ft])!==null&&Ut!==void 0&&Ut.offsetWidth?((j==null?void 0:j.offsetWidth)-oe*2*(zt<3?zt:3))/((at=F.current[Ft])===null||at===void 0?void 0:at.offsetWidth):1;jt.transform="translate3d(".concat(an,", ").concat(sn,"px, 0) scaleX(").concat(An,")")}else jt.transform="translate3d(".concat(an,", 0, 0)")}return pt.createElement("div",{ref:pe,className:kt("".concat(f,"-notice-wrapper"),Be,At==null?void 0:At.wrapper),style:st(st(st({},Ze),jt),dt==null?void 0:dt.wrapper),onMouseEnter:function(){return re(function(rn){return rn.includes(Ft)?rn:[].concat(_n(rn),[Ft])})},onMouseLeave:function(){return re(function(rn){return rn.filter(function(Vn){return Vn!==Ft})})}},pt.createElement(YO,Cn({},Bt,{ref:function(rn){gt>-1?F.current[Ft]=rn:delete F.current[Ft]},prefixCls:f,classNames:At,styles:dt,className:kt(Ct,N==null?void 0:N.notice),style:ut,times:Mt,key:Ot,eventKey:Ot,onNoticeClose:P,hovering:ve&&ne.length>0})))})},L6=T.forwardRef(function(e,t){var r=e.prefixCls,a=r===void 0?"rc-notification":r,c=e.container,f=e.motion,y=e.maxCount,l=e.className,w=e.style,C=e.onAllRemoved,P=e.stack,A=e.renderNotifications,D=T.useState([]),N=$t(D,2),F=N[0],U=N[1],Z=function(ee){var ve,he=F.find(function(oe){return oe.key===ee});he==null||(ve=he.onClose)===null||ve===void 0||ve.call(he),U(function(oe){return oe.filter(function(fe){return fe.key!==ee})})};T.useImperativeHandle(t,function(){return{open:function(ee){U(function(ve){var he=_n(ve),oe=he.findIndex(function(Fe){return Fe.key===ee.key}),fe=st({},ee);if(oe>=0){var Te;fe.times=(((Te=ve[oe])===null||Te===void 0?void 0:Te.times)||0)+1,he[oe]=fe}else fe.times=0,he.push(fe);return y>0&&he.length>y&&(he=he.slice(-y)),he})},close:function(ee){Z(ee)},destroy:function(){U([])}}});var j=T.useState({}),B=$t(j,2),H=B[0],Y=B[1];T.useEffect(function(){var te={};F.forEach(function(ee){var ve=ee.placement,he=ve===void 0?"topRight":ve;he&&(te[he]=te[he]||[],te[he].push(ee))}),Object.keys(H).forEach(function(ee){te[ee]=te[ee]||[]}),Y(te)},[F]);var ne=function(ee){Y(function(ve){var he=st({},ve),oe=he[ee]||[];return oe.length||delete he[ee],he})},re=T.useRef(!1);if(T.useEffect(function(){Object.keys(H).length>0?re.current=!0:re.current&&(C==null||C(),re.current=!1)},[H]),!c)return null;var Q=Object.keys(H);return vc.createPortal(T.createElement(T.Fragment,null,Q.map(function(te){var ee=H[te],ve=T.createElement(D6,{key:te,configList:ee,placement:te,prefixCls:a,className:l==null?void 0:l(te),style:w==null?void 0:w(te),motion:f,onNoticeClose:Z,onAllNoticeRemoved:ne,stack:P});return A?A(ve,{prefixCls:a,key:te}):ve})),c)}),k6=["getContainer","motion","prefixCls","maxCount","className","style","onAllRemoved","stack","renderNotifications"],$6=function(){return document.body},FI=0;function F6(){for(var e={},t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return r.forEach(function(c){c&&Object.keys(c).forEach(function(f){var y=c[f];y!==void 0&&(e[f]=y)})}),e}function B6(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.getContainer,r=t===void 0?$6:t,a=e.motion,c=e.prefixCls,f=e.maxCount,y=e.className,l=e.style,w=e.onAllRemoved,C=e.stack,P=e.renderNotifications,A=Vr(e,k6),D=T.useState(),N=$t(D,2),F=N[0],U=N[1],Z=T.useRef(),j=T.createElement(L6,{container:F,ref:Z,prefixCls:c,motion:a,maxCount:f,className:y,style:l,onAllRemoved:w,stack:C,renderNotifications:P}),B=T.useState([]),H=$t(B,2),Y=H[0],ne=H[1],re=T.useMemo(function(){return{open:function(te){var ee=F6(A,te);(ee.key===null||ee.key===void 0)&&(ee.key="rc-notification-".concat(FI),FI+=1),ne(function(ve){return[].concat(_n(ve),[{type:"open",config:ee}])})},close:function(te){ne(function(ee){return[].concat(_n(ee),[{type:"close",key:te}])})},destroy:function(){ne(function(te){return[].concat(_n(te),[{type:"destroy"}])})}}},[]);return T.useEffect(function(){U(r())}),T.useEffect(function(){Z.current&&Y.length&&(Y.forEach(function(Q){switch(Q.type){case"open":Z.current.open(Q.config);break;case"close":Z.current.close(Q.key);break;case"destroy":Z.current.destroy();break}}),ne(function(Q){return Q.filter(function(te){return!Y.includes(te)})}))},[Y]),[re,j]}var N6={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"}}]},name:"loading",theme:"outlined"};const j6=N6;var U6=function(t,r){return T.createElement(Xi,Cn({},t,{ref:r,icon:j6}))};const $S=T.forwardRef(U6),V6=e=>{const{componentCls:t,iconCls:r,boxShadow:a,colorText:c,colorSuccess:f,colorError:y,colorWarning:l,colorInfo:w,fontSizeLG:C,motionEaseInOutCirc:P,motionDurationSlow:A,marginXS:D,paddingXS:N,borderRadiusLG:F,zIndexPopup:U,contentPadding:Z,contentBg:j}=e,B=`${t}-notice`,H=new Cr("MessageMoveIn",{"0%":{padding:0,transform:"translateY(-100%)",opacity:0},"100%":{padding:N,transform:"translateY(0)",opacity:1}}),Y=new Cr("MessageMoveOut",{"0%":{maxHeight:e.height,padding:N,opacity:1},"100%":{maxHeight:0,padding:0,opacity:0}}),ne={padding:N,textAlign:"center",[`${t}-custom-content > ${r}`]:{verticalAlign:"text-bottom",marginInlineEnd:D,fontSize:C},[`${B}-content`]:{display:"inline-block",padding:Z,background:j,borderRadius:F,boxShadow:a,pointerEvents:"all"},[`${t}-success > ${r}`]:{color:f},[`${t}-error > ${r}`]:{color:y},[`${t}-warning > ${r}`]:{color:l},[`${t}-info > ${r},
      ${t}-loading > ${r}`]:{color:w}};return[{[t]:Object.assign(Object.assign({},ca(e)),{color:c,position:"fixed",top:D,width:"100%",pointerEvents:"none",zIndex:U,[`${t}-move-up`]:{animationFillMode:"forwards"},[`
        ${t}-move-up-appear,
        ${t}-move-up-enter
      `]:{animationName:H,animationDuration:A,animationPlayState:"paused",animationTimingFunction:P},[`
        ${t}-move-up-appear${t}-move-up-appear-active,
        ${t}-move-up-enter${t}-move-up-enter-active
      `]:{animationPlayState:"running"},[`${t}-move-up-leave`]:{animationName:Y,animationDuration:A,animationPlayState:"paused",animationTimingFunction:P},[`${t}-move-up-leave${t}-move-up-leave-active`]:{animationPlayState:"running"},"&-rtl":{direction:"rtl",span:{direction:"rtl"}}})},{[t]:{[`${B}-wrapper`]:Object.assign({},ne)}},{[`${t}-notice-pure-panel`]:Object.assign(Object.assign({},ne),{padding:0,textAlign:"start"})}]},QO=_o("Message",e=>{const t=$r(e,{height:150});return[V6(t)]},e=>({zIndexPopup:e.zIndexPopupBase+10,contentBg:e.colorBgElevated,contentPadding:`${(e.controlHeightLG-e.fontSize*e.lineHeight)/2}px ${e.paddingSM}px`}));var H6=globalThis&&globalThis.__rest||function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(r[a[c]]=e[a[c]]);return r};const G6={info:T.createElement(E6,null),success:T.createElement(u6,null),error:T.createElement(w0,null),warning:T.createElement(x6,null),loading:T.createElement($S,null)},ez=e=>{let{prefixCls:t,type:r,icon:a,children:c}=e;return T.createElement("div",{className:kt(`${t}-custom-content`,`${t}-${r}`)},a||G6[r],T.createElement("span",null,c))},W6=e=>{const{prefixCls:t,className:r,type:a,icon:c,content:f}=e,y=H6(e,["prefixCls","className","type","icon","content"]),{getPrefixCls:l}=T.useContext(cr),w=t||l("message"),[,C]=QO(w);return T.createElement(YO,Object.assign({},y,{prefixCls:w,className:kt(r,C,`${w}-notice-pure-panel`),eventKey:"pure",duration:null,content:T.createElement(ez,{prefixCls:w,type:a,icon:c},f)}))},q6=W6;function Z6(e,t){return{motionName:t??`${e}-move-up`}}function FS(e){let t;const r=new Promise(c=>{t=e(()=>{c(!0)})}),a=()=>{t==null||t()};return a.then=(c,f)=>r.then(c,f),a.promise=r,a}var X6=globalThis&&globalThis.__rest||function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(r[a[c]]=e[a[c]]);return r};const K6=8,Y6=3,J6=e=>{let{children:t,prefixCls:r}=e;const[,a]=QO(r);return T.createElement(R6,{classNames:{list:a,notice:a}},t)},Q6=(e,t)=>{let{prefixCls:r,key:a}=t;return T.createElement(J6,{prefixCls:r,key:a},e)},ej=T.forwardRef((e,t)=>{const{top:r,prefixCls:a,getContainer:c,maxCount:f,duration:y=Y6,rtl:l,transitionName:w,onAllRemoved:C}=e,{getPrefixCls:P,getPopupContainer:A,message:D}=T.useContext(cr),N=a||P("message"),F=()=>({left:"50%",transform:"translateX(-50%)",top:r??K6}),U=()=>kt({[`${N}-rtl`]:l}),Z=()=>Z6(N,w),j=T.createElement("span",{className:`${N}-close-x`},T.createElement(XO,{className:`${N}-close-icon`})),[B,H]=B6({prefixCls:N,style:F,className:U,motion:Z,closable:!1,closeIcon:j,duration:y,getContainer:()=>(c==null?void 0:c())||(A==null?void 0:A())||document.body,maxCount:f,onAllRemoved:C,renderNotifications:Q6});return T.useImperativeHandle(t,()=>Object.assign(Object.assign({},B),{prefixCls:N,message:D})),H});let BI=0;function tz(e){const t=T.useRef(null);return mO(),[T.useMemo(()=>{const a=w=>{var C;(C=t.current)===null||C===void 0||C.close(w)},c=w=>{if(!t.current){const re=()=>{};return re.then=()=>{},re}const{open:C,prefixCls:P,message:A}=t.current,D=`${P}-notice`,{content:N,icon:F,type:U,key:Z,className:j,style:B,onClose:H}=w,Y=X6(w,["content","icon","type","key","className","style","onClose"]);let ne=Z;return ne==null&&(BI+=1,ne=`antd-message-${BI}`),FS(re=>(C(Object.assign(Object.assign({},Y),{key:ne,content:T.createElement(ez,{prefixCls:P,type:U,icon:F},N),placement:"top",className:kt(U&&`${D}-${U}`,j,A==null?void 0:A.className),style:Object.assign(Object.assign({},A==null?void 0:A.style),B),onClose:()=>{H==null||H(),re()}})),()=>{a(ne)}))},y={open:c,destroy:w=>{var C;w!==void 0?a(w):(C=t.current)===null||C===void 0||C.destroy()}};return["info","success","warning","error","loading"].forEach(w=>{const C=(P,A,D)=>{let N;P&&typeof P=="object"&&"content"in P?N=P:N={content:P};let F,U;typeof A=="function"?U=A:(F=A,U=D);const Z=Object.assign(Object.assign({onClose:U,duration:F},N),{type:w});return c(Z)};y[w]=C}),y},[]),T.createElement(ej,Object.assign({key:"message-holder"},e,{ref:t}))]}function tj(e){return tz(e)}function To(){To=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,a=Object.defineProperty||function(he,oe,fe){he[oe]=fe.value},c=typeof Symbol=="function"?Symbol:{},f=c.iterator||"@@iterator",y=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function w(he,oe,fe){return Object.defineProperty(he,oe,{value:fe,enumerable:!0,configurable:!0,writable:!0}),he[oe]}try{w({},"")}catch{w=function(fe,Te,Fe){return fe[Te]=Fe}}function C(he,oe,fe,Te){var Fe=oe&&oe.prototype instanceof D?oe:D,$e=Object.create(Fe.prototype),je=new ee(Te||[]);return a($e,"_invoke",{value:ne(he,fe,je)}),$e}function P(he,oe,fe){try{return{type:"normal",arg:he.call(oe,fe)}}catch(Te){return{type:"throw",arg:Te}}}e.wrap=C;var A={};function D(){}function N(){}function F(){}var U={};w(U,f,function(){return this});var Z=Object.getPrototypeOf,j=Z&&Z(Z(ve([])));j&&j!==t&&r.call(j,f)&&(U=j);var B=F.prototype=D.prototype=Object.create(U);function H(he){["next","throw","return"].forEach(function(oe){w(he,oe,function(fe){return this._invoke(oe,fe)})})}function Y(he,oe){function fe(Fe,$e,je,pe){var He=P(he[Fe],he,$e);if(He.type!=="throw"){var Be=He.arg,Ze=Be.value;return Ze&&Kn(Ze)=="object"&&r.call(Ze,"__await")?oe.resolve(Ze.__await).then(function(nt){fe("next",nt,je,pe)},function(nt){fe("throw",nt,je,pe)}):oe.resolve(Ze).then(function(nt){Be.value=nt,je(Be)},function(nt){return fe("throw",nt,je,pe)})}pe(He.arg)}var Te;a(this,"_invoke",{value:function($e,je){function pe(){return new oe(function(He,Be){fe($e,je,He,Be)})}return Te=Te?Te.then(pe,pe):pe()}})}function ne(he,oe,fe){var Te="suspendedStart";return function(Fe,$e){if(Te==="executing")throw new Error("Generator is already running");if(Te==="completed"){if(Fe==="throw")throw $e;return{value:void 0,done:!0}}for(fe.method=Fe,fe.arg=$e;;){var je=fe.delegate;if(je){var pe=re(je,fe);if(pe){if(pe===A)continue;return pe}}if(fe.method==="next")fe.sent=fe._sent=fe.arg;else if(fe.method==="throw"){if(Te==="suspendedStart")throw Te="completed",fe.arg;fe.dispatchException(fe.arg)}else fe.method==="return"&&fe.abrupt("return",fe.arg);Te="executing";var He=P(he,oe,fe);if(He.type==="normal"){if(Te=fe.done?"completed":"suspendedYield",He.arg===A)continue;return{value:He.arg,done:fe.done}}He.type==="throw"&&(Te="completed",fe.method="throw",fe.arg=He.arg)}}}function re(he,oe){var fe=oe.method,Te=he.iterator[fe];if(Te===void 0)return oe.delegate=null,fe==="throw"&&he.iterator.return&&(oe.method="return",oe.arg=void 0,re(he,oe),oe.method==="throw")||fe!=="return"&&(oe.method="throw",oe.arg=new TypeError("The iterator does not provide a '"+fe+"' method")),A;var Fe=P(Te,he.iterator,oe.arg);if(Fe.type==="throw")return oe.method="throw",oe.arg=Fe.arg,oe.delegate=null,A;var $e=Fe.arg;return $e?$e.done?(oe[he.resultName]=$e.value,oe.next=he.nextLoc,oe.method!=="return"&&(oe.method="next",oe.arg=void 0),oe.delegate=null,A):$e:(oe.method="throw",oe.arg=new TypeError("iterator result is not an object"),oe.delegate=null,A)}function Q(he){var oe={tryLoc:he[0]};1 in he&&(oe.catchLoc=he[1]),2 in he&&(oe.finallyLoc=he[2],oe.afterLoc=he[3]),this.tryEntries.push(oe)}function te(he){var oe=he.completion||{};oe.type="normal",delete oe.arg,he.completion=oe}function ee(he){this.tryEntries=[{tryLoc:"root"}],he.forEach(Q,this),this.reset(!0)}function ve(he){if(he||he===""){var oe=he[f];if(oe)return oe.call(he);if(typeof he.next=="function")return he;if(!isNaN(he.length)){var fe=-1,Te=function Fe(){for(;++fe<he.length;)if(r.call(he,fe))return Fe.value=he[fe],Fe.done=!1,Fe;return Fe.value=void 0,Fe.done=!0,Fe};return Te.next=Te}}throw new TypeError(Kn(he)+" is not iterable")}return N.prototype=F,a(B,"constructor",{value:F,configurable:!0}),a(F,"constructor",{value:N,configurable:!0}),N.displayName=w(F,l,"GeneratorFunction"),e.isGeneratorFunction=function(he){var oe=typeof he=="function"&&he.constructor;return!!oe&&(oe===N||(oe.displayName||oe.name)==="GeneratorFunction")},e.mark=function(he){return Object.setPrototypeOf?Object.setPrototypeOf(he,F):(he.__proto__=F,w(he,l,"GeneratorFunction")),he.prototype=Object.create(B),he},e.awrap=function(he){return{__await:he}},H(Y.prototype),w(Y.prototype,y,function(){return this}),e.AsyncIterator=Y,e.async=function(he,oe,fe,Te,Fe){Fe===void 0&&(Fe=Promise);var $e=new Y(C(he,oe,fe,Te),Fe);return e.isGeneratorFunction(oe)?$e:$e.next().then(function(je){return je.done?je.value:$e.next()})},H(B),w(B,l,"Generator"),w(B,f,function(){return this}),w(B,"toString",function(){return"[object Generator]"}),e.keys=function(he){var oe=Object(he),fe=[];for(var Te in oe)fe.push(Te);return fe.reverse(),function Fe(){for(;fe.length;){var $e=fe.pop();if($e in oe)return Fe.value=$e,Fe.done=!1,Fe}return Fe.done=!0,Fe}},e.values=ve,ee.prototype={constructor:ee,reset:function(oe){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(te),!oe)for(var fe in this)fe.charAt(0)==="t"&&r.call(this,fe)&&!isNaN(+fe.slice(1))&&(this[fe]=void 0)},stop:function(){this.done=!0;var oe=this.tryEntries[0].completion;if(oe.type==="throw")throw oe.arg;return this.rval},dispatchException:function(oe){if(this.done)throw oe;var fe=this;function Te(Be,Ze){return je.type="throw",je.arg=oe,fe.next=Be,Ze&&(fe.method="next",fe.arg=void 0),!!Ze}for(var Fe=this.tryEntries.length-1;Fe>=0;--Fe){var $e=this.tryEntries[Fe],je=$e.completion;if($e.tryLoc==="root")return Te("end");if($e.tryLoc<=this.prev){var pe=r.call($e,"catchLoc"),He=r.call($e,"finallyLoc");if(pe&&He){if(this.prev<$e.catchLoc)return Te($e.catchLoc,!0);if(this.prev<$e.finallyLoc)return Te($e.finallyLoc)}else if(pe){if(this.prev<$e.catchLoc)return Te($e.catchLoc,!0)}else{if(!He)throw new Error("try statement without catch or finally");if(this.prev<$e.finallyLoc)return Te($e.finallyLoc)}}}},abrupt:function(oe,fe){for(var Te=this.tryEntries.length-1;Te>=0;--Te){var Fe=this.tryEntries[Te];if(Fe.tryLoc<=this.prev&&r.call(Fe,"finallyLoc")&&this.prev<Fe.finallyLoc){var $e=Fe;break}}$e&&(oe==="break"||oe==="continue")&&$e.tryLoc<=fe&&fe<=$e.finallyLoc&&($e=null);var je=$e?$e.completion:{};return je.type=oe,je.arg=fe,$e?(this.method="next",this.next=$e.finallyLoc,A):this.complete(je)},complete:function(oe,fe){if(oe.type==="throw")throw oe.arg;return oe.type==="break"||oe.type==="continue"?this.next=oe.arg:oe.type==="return"?(this.rval=this.arg=oe.arg,this.method="return",this.next="end"):oe.type==="normal"&&fe&&(this.next=fe),A},finish:function(oe){for(var fe=this.tryEntries.length-1;fe>=0;--fe){var Te=this.tryEntries[fe];if(Te.finallyLoc===oe)return this.complete(Te.completion,Te.afterLoc),te(Te),A}},catch:function(oe){for(var fe=this.tryEntries.length-1;fe>=0;--fe){var Te=this.tryEntries[fe];if(Te.tryLoc===oe){var Fe=Te.completion;if(Fe.type==="throw"){var $e=Fe.arg;te(Te)}return $e}}throw new Error("illegal catch attempt")},delegateYield:function(oe,fe,Te){return this.delegate={iterator:ve(oe),resultName:fe,nextLoc:Te},this.method==="next"&&(this.arg=void 0),A}},e}function NI(e,t,r,a,c,f,y){try{var l=e[f](y),w=l.value}catch(C){r(C);return}l.done?t(w):Promise.resolve(w).then(a,c)}function Pu(e){return function(){var t=this,r=arguments;return new Promise(function(a,c){var f=e.apply(t,r);function y(w){NI(f,a,c,y,l,"next",w)}function l(w){NI(f,a,c,y,l,"throw",w)}y(void 0)})}}var bm=st({},IB),nj=bm.version,rj=bm.render,ij=bm.unmountComponentAtNode,S0;try{var oj=Number((nj||"").split(".")[0]);oj>=18&&(S0=bm.createRoot)}catch{}function jI(e){var t=bm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;t&&Kn(t)==="object"&&(t.usingClientEntryPoint=e)}var Ry="__rc_react_root__";function aj(e,t){jI(!0);var r=t[Ry]||S0(t);jI(!1),r.render(e),t[Ry]=r}function sj(e,t){rj(e,t)}function nz(e,t){if(S0){aj(e,t);return}sj(e,t)}function lj(e){return Kb.apply(this,arguments)}function Kb(){return Kb=Pu(To().mark(function e(t){return To().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",Promise.resolve().then(function(){var c;(c=t[Ry])===null||c===void 0||c.unmount(),delete t[Ry]}));case 1:case"end":return a.stop()}},e)})),Kb.apply(this,arguments)}function cj(e){ij(e)}function uj(e){return Yb.apply(this,arguments)}function Yb(){return Yb=Pu(To().mark(function e(t){return To().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(S0===void 0){a.next=2;break}return a.abrupt("return",lj(t));case 2:cj(t);case 3:case"end":return a.stop()}},e)})),Yb.apply(this,arguments)}const rz=(e,t,r)=>r!==void 0?r:`${e}-${t}`,iz=function(e){if(!e)return!1;if(e instanceof Element){if(e.offsetParent)return!0;if(e.getBBox){var t=e.getBBox(),r=t.width,a=t.height;if(r||a)return!0}if(e.getBoundingClientRect){var c=e.getBoundingClientRect(),f=c.width,y=c.height;if(f||y)return!0}}return!1},dj=e=>{const{componentCls:t,colorPrimary:r}=e;return{[t]:{position:"absolute",background:"transparent",pointerEvents:"none",boxSizing:"border-box",color:`var(--wave-color, ${r})`,boxShadow:"0 0 0 0 currentcolor",opacity:.2,"&.wave-motion-appear":{transition:[`box-shadow 0.4s ${e.motionEaseOutCirc}`,`opacity 2s ${e.motionEaseOutCirc}`].join(","),"&-active":{boxShadow:"0 0 0 6px currentcolor",opacity:0},"&.wave-quick":{transition:[`box-shadow 0.3s ${e.motionEaseInOut}`,`opacity 0.35s ${e.motionEaseInOut}`].join(",")}}}}},hj=_o("Wave",e=>[dj(e)]);function fj(e){const t=(e||"").match(/rgba?\((\d*), (\d*), (\d*)(, [\d.]*)?\)/);return t&&t[1]&&t[2]&&t[3]?!(t[1]===t[2]&&t[2]===t[3]):!0}function a1(e){return e&&e!=="#fff"&&e!=="#ffffff"&&e!=="rgb(255, 255, 255)"&&e!=="rgba(255, 255, 255, 1)"&&fj(e)&&!/rgba\((?:\d*, ){3}0\)/.test(e)&&e!=="transparent"}function pj(e){const{borderTopColor:t,borderColor:r,backgroundColor:a}=getComputedStyle(e);return a1(t)?t:a1(r)?r:a1(a)?a:null}const BS="ant-wave-target";function s1(e){return Number.isNaN(e)?0:e}const mj=e=>{const{className:t,target:r,component:a}=e,c=T.useRef(null),[f,y]=T.useState(null),[l,w]=T.useState([]),[C,P]=T.useState(0),[A,D]=T.useState(0),[N,F]=T.useState(0),[U,Z]=T.useState(0),[j,B]=T.useState(!1),H={left:C,top:A,width:N,height:U,borderRadius:l.map(re=>`${re}px`).join(" ")};f&&(H["--wave-color"]=f);function Y(){const re=getComputedStyle(r);y(pj(r));const Q=re.position==="static",{borderLeftWidth:te,borderTopWidth:ee}=re;P(Q?r.offsetLeft:s1(-parseFloat(te))),D(Q?r.offsetTop:s1(-parseFloat(ee))),F(r.offsetWidth),Z(r.offsetHeight);const{borderTopLeftRadius:ve,borderTopRightRadius:he,borderBottomLeftRadius:oe,borderBottomRightRadius:fe}=re;w([ve,he,fe,oe].map(Te=>s1(parseFloat(Te))))}if(T.useEffect(()=>{if(r){const re=yi(()=>{Y(),B(!0)});let Q;return typeof ResizeObserver<"u"&&(Q=new ResizeObserver(Y),Q.observe(r)),()=>{yi.cancel(re),Q==null||Q.disconnect()}}},[]),!j)return null;const ne=(a==="Checkbox"||a==="Radio")&&(r==null?void 0:r.classList.contains(BS));return T.createElement(xm,{visible:!0,motionAppear:!0,motionName:"wave-motion",motionDeadline:5e3,onAppearEnd:(re,Q)=>{var te;if(Q.deadline||Q.propertyName==="opacity"){const ee=(te=c.current)===null||te===void 0?void 0:te.parentElement;uj(ee).then(()=>{ee==null||ee.remove()})}return!1}},re=>{let{className:Q}=re;return T.createElement("div",{ref:c,className:kt(t,{"wave-quick":ne},Q),style:H})})},gj=(e,t)=>{var r;const{component:a}=t;if(a==="Checkbox"&&!(!((r=e.querySelector("input"))===null||r===void 0)&&r.checked))return;const c=document.createElement("div");c.style.position="absolute",c.style.left="0px",c.style.top="0px",e==null||e.insertBefore(c,e==null?void 0:e.firstChild),nz(T.createElement(mj,Object.assign({},t,{target:e})),c)},vj=gj;function yj(e,t,r){const{wave:a}=T.useContext(cr),[,c,f]=Fs(),y=ia(C=>{const P=e.current;if(a!=null&&a.disabled||!P)return;const A=P.querySelector(`.${BS}`)||P,{showEffect:D}=a||{};(D||vj)(A,{className:t,token:c,component:r,event:C,hashId:f})}),l=T.useRef();return C=>{yi.cancel(l.current),l.current=yi(()=>{y(C)})}}const _j=e=>{const{children:t,disabled:r,component:a}=e,{getPrefixCls:c}=T.useContext(cr),f=T.useRef(null),y=c("wave"),[,l]=hj(y),w=yj(f,kt(y,l),a);if(pt.useEffect(()=>{const P=f.current;if(!P||P.nodeType!==1||r)return;const A=D=>{!iz(D.target)||!P.getAttribute||P.getAttribute("disabled")||P.disabled||P.className.includes("disabled")||P.className.includes("-leave")||w(D)};return P.addEventListener("click",A,!0),()=>{P.removeEventListener("click",A,!0)}},[r]),!pt.isValidElement(t))return t??null;const C=_m(t)?gs(t.ref,f):f;return vl(t,{ref:C})},oz=_j,xj=e=>{const t=pt.useContext(_0);return pt.useMemo(()=>e?typeof e=="string"?e??t:e instanceof Function?e(t):t:t,[e,t])},bl=xj,bj=e=>{const{componentCls:t}=e;return{[t]:{"&-block":{display:"flex",width:"100%"},"&-vertical":{flexDirection:"column"}}}},wj=bj,Sj=e=>{const{componentCls:t}=e;return{[t]:{display:"inline-flex","&-rtl":{direction:"rtl"},"&-vertical":{flexDirection:"column"},"&-align":{flexDirection:"column","&-center":{alignItems:"center"},"&-start":{alignItems:"flex-start"},"&-end":{alignItems:"flex-end"},"&-baseline":{alignItems:"baseline"}},[`${t}-item:empty`]:{display:"none"}}}},Ej=e=>{const{componentCls:t}=e;return{[t]:{"&-gap-row-small":{rowGap:e.spaceGapSmallSize},"&-gap-row-middle":{rowGap:e.spaceGapMiddleSize},"&-gap-row-large":{rowGap:e.spaceGapLargeSize},"&-gap-col-small":{columnGap:e.spaceGapSmallSize},"&-gap-col-middle":{columnGap:e.spaceGapMiddleSize},"&-gap-col-large":{columnGap:e.spaceGapLargeSize}}}},az=_o("Space",e=>{const t=$r(e,{spaceGapSmallSize:e.paddingXS,spaceGapMiddleSize:e.padding,spaceGapLargeSize:e.paddingLG});return[Sj(t),Ej(t),wj(t)]},()=>({}),{resetStyle:!1});var sz=globalThis&&globalThis.__rest||function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(r[a[c]]=e[a[c]]);return r};const E0=T.createContext(null),C0=(e,t)=>{const r=T.useContext(E0),a=T.useMemo(()=>{if(!r)return"";const{compactDirection:c,isFirstItem:f,isLastItem:y}=r,l=c==="vertical"?"-vertical-":"-";return kt(`${e}-compact${l}item`,{[`${e}-compact${l}first-item`]:f,[`${e}-compact${l}last-item`]:y,[`${e}-compact${l}item-rtl`]:t==="rtl"})},[e,t,r]);return{compactSize:r==null?void 0:r.compactSize,compactDirection:r==null?void 0:r.compactDirection,compactItemClassnames:a}},Jb=e=>{let{children:t}=e;return T.createElement(E0.Provider,{value:null},t)},Cj=e=>{var{children:t}=e,r=sz(e,["children"]);return T.createElement(E0.Provider,{value:r},t)},Tj=e=>{const{getPrefixCls:t,direction:r}=T.useContext(cr),{size:a,direction:c,block:f,prefixCls:y,className:l,rootClassName:w,children:C}=e,P=sz(e,["size","direction","block","prefixCls","className","rootClassName","children"]),A=bl(H=>a??H),D=t("space-compact",y),[N,F]=az(D),U=kt(D,F,{[`${D}-rtl`]:r==="rtl",[`${D}-block`]:f,[`${D}-vertical`]:c==="vertical"},l,w),Z=T.useContext(E0),j=hl(C),B=T.useMemo(()=>j.map((H,Y)=>{const ne=H&&H.key||`${D}-item-${Y}`;return T.createElement(Cj,{key:ne,compactSize:A,compactDirection:c,isFirstItem:Y===0&&(!Z||(Z==null?void 0:Z.isFirstItem)),isLastItem:Y===j.length-1&&(!Z||(Z==null?void 0:Z.isLastItem))},H)}),[a,j,Z]);return j.length===0?null:N(T.createElement("div",Object.assign({className:U},P),B))},Ij=Tj;var Mj=globalThis&&globalThis.__rest||function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(r[a[c]]=e[a[c]]);return r};const lz=T.createContext(void 0),Pj=e=>{const{getPrefixCls:t,direction:r}=T.useContext(cr),{prefixCls:a,size:c,className:f}=e,y=Mj(e,["prefixCls","size","className"]),l=t("btn-group",a),[,,w]=Fs();let C="";switch(c){case"large":C="lg";break;case"small":C="sm";break}const P=kt(l,{[`${l}-${C}`]:C,[`${l}-rtl`]:r==="rtl"},f,w);return T.createElement(lz.Provider,{value:c},T.createElement("div",Object.assign({},y,{className:P})))},Aj=Pj,UI=/^[\u4e00-\u9fa5]{2}$/,Qb=UI.test.bind(UI);function VI(e){return typeof e=="string"}function l1(e){return e==="text"||e==="link"}function Rj(e,t){if(e==null)return;const r=t?" ":"";return typeof e!="string"&&typeof e!="number"&&VI(e.type)&&Qb(e.props.children)?vl(e,{children:e.props.children.split("").join(r)}):VI(e)?Qb(e)?pt.createElement("span",null,e.split("").join(r)):pt.createElement("span",null,e):KO(e)?pt.createElement("span",null,e):e}function Oj(e,t){let r=!1;const a=[];return pt.Children.forEach(e,c=>{const f=typeof c,y=f==="string"||f==="number";if(r&&y){const l=a.length-1,w=a[l];a[l]=`${w}${c}`}else a.push(c);r=y}),pt.Children.map(a,c=>Rj(c,t))}const zj=T.forwardRef((e,t)=>{const{className:r,style:a,children:c,prefixCls:f}=e,y=kt(`${f}-icon`,r);return pt.createElement("span",{ref:t,className:y,style:a},c)}),cz=zj,HI=T.forwardRef((e,t)=>{let{prefixCls:r,className:a,style:c,iconClassName:f}=e;const y=kt(`${r}-loading-icon`,a);return pt.createElement(cz,{prefixCls:r,className:y,style:c,ref:t},pt.createElement($S,{className:f}))}),c1=()=>({width:0,opacity:0,transform:"scale(0)"}),u1=e=>({width:e.scrollWidth,opacity:1,transform:"scale(1)"}),Dj=e=>{const{prefixCls:t,loading:r,existIcon:a,className:c,style:f}=e,y=!!r;return a?pt.createElement(HI,{prefixCls:t,className:c,style:f}):pt.createElement(xm,{visible:y,motionName:`${t}-loading-icon-motion`,motionLeave:y,removeOnLeave:!0,onAppearStart:c1,onAppearActive:u1,onEnterStart:c1,onEnterActive:u1,onLeaveStart:u1,onLeaveActive:c1},(l,w)=>{let{className:C,style:P}=l;return pt.createElement(HI,{prefixCls:t,className:c,style:Object.assign(Object.assign({},f),P),ref:w,iconClassName:C})})},Lj=Dj,GI=(e,t)=>({[`> span, > ${e}`]:{"&:not(:last-child)":{[`&, & > ${e}`]:{"&:not(:disabled)":{borderInlineEndColor:t}}},"&:not(:first-child)":{[`&, & > ${e}`]:{"&:not(:disabled)":{borderInlineStartColor:t}}}}}),kj=e=>{const{componentCls:t,fontSize:r,lineWidth:a,groupBorderColor:c,colorErrorHover:f}=e;return{[`${t}-group`]:[{position:"relative",display:"inline-flex",[`> span, > ${t}`]:{"&:not(:last-child)":{[`&, & > ${t}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},"&:not(:first-child)":{marginInlineStart:-a,[`&, & > ${t}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}},[t]:{position:"relative",zIndex:1,"&:hover,\n          &:focus,\n          &:active":{zIndex:2},"&[disabled]":{zIndex:0}},[`${t}-icon-only`]:{fontSize:r}},GI(`${t}-primary`,c),GI(`${t}-danger`,f)]}},$j=kj,Fj=e=>{const{componentCls:t,iconCls:r,fontWeight:a}=e;return{[t]:{outline:"none",position:"relative",display:"inline-block",fontWeight:a,whiteSpace:"nowrap",textAlign:"center",backgroundImage:"none",backgroundColor:"transparent",border:`${e.lineWidth}px ${e.lineType} transparent`,cursor:"pointer",transition:`all ${e.motionDurationMid} ${e.motionEaseInOut}`,userSelect:"none",touchAction:"manipulation",lineHeight:e.lineHeight,color:e.colorText,"&:disabled > *":{pointerEvents:"none"},"> span":{display:"inline-block"},[`${t}-icon`]:{lineHeight:0},[`> ${r} + span, > span + ${r}`]:{marginInlineStart:e.marginXS},[`&:not(${t}-icon-only) > ${t}-icon`]:{[`&${t}-loading-icon, &:not(:last-child)`]:{marginInlineEnd:e.marginXS}},"> a":{color:"currentColor"},"&:not(:disabled)":Object.assign({},MO(e)),[`&${t}-two-chinese-chars::first-letter`]:{letterSpacing:"0.34em"},[`&${t}-two-chinese-chars > *:not(${r})`]:{marginInlineEnd:"-0.34em",letterSpacing:"0.34em"},[`&-icon-only${t}-compact-item`]:{flex:"none"},[`&-compact-item${t}-primary`]:{[`&:not([disabled]) + ${t}-compact-item${t}-primary:not([disabled])`]:{position:"relative","&:before":{position:"absolute",top:-e.lineWidth,insetInlineStart:-e.lineWidth,display:"inline-block",width:e.lineWidth,height:`calc(100% + ${e.lineWidth*2}px)`,backgroundColor:e.colorPrimaryHover,content:'""'}}},"&-compact-vertical-item":{[`&${t}-primary`]:{[`&:not([disabled]) + ${t}-compact-vertical-item${t}-primary:not([disabled])`]:{position:"relative","&:before":{position:"absolute",top:-e.lineWidth,insetInlineStart:-e.lineWidth,display:"inline-block",width:`calc(100% + ${e.lineWidth*2}px)`,height:e.lineWidth,backgroundColor:e.colorPrimaryHover,content:'""'}}}}}}},yl=(e,t,r)=>({[`&:not(:disabled):not(${e}-disabled)`]:{"&:hover":t,"&:active":r}}),Bj=e=>({minWidth:e.controlHeight,paddingInlineStart:0,paddingInlineEnd:0,borderRadius:"50%"}),Nj=e=>({borderRadius:e.controlHeight,paddingInlineStart:e.controlHeight/2,paddingInlineEnd:e.controlHeight/2}),jj=e=>({cursor:"not-allowed",borderColor:e.borderColorDisabled,color:e.colorTextDisabled,backgroundColor:e.colorBgContainerDisabled,boxShadow:"none"}),lm=(e,t,r,a,c,f,y,l)=>({[`&${e}-background-ghost`]:Object.assign(Object.assign({color:r||void 0,backgroundColor:t,borderColor:a||void 0,boxShadow:"none"},yl(e,Object.assign({backgroundColor:t},y),Object.assign({backgroundColor:t},l))),{"&:disabled":{cursor:"not-allowed",color:c||void 0,borderColor:f||void 0}})}),NS=e=>({[`&:disabled, &${e.componentCls}-disabled`]:Object.assign({},jj(e))}),uz=e=>Object.assign({},NS(e)),Oy=e=>({[`&:disabled, &${e.componentCls}-disabled`]:{cursor:"not-allowed",color:e.colorTextDisabled}}),dz=e=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},uz(e)),{backgroundColor:e.defaultBg,borderColor:e.defaultBorderColor,color:e.defaultColor,boxShadow:e.defaultShadow}),yl(e.componentCls,{color:e.colorPrimaryHover,borderColor:e.colorPrimaryHover},{color:e.colorPrimaryActive,borderColor:e.colorPrimaryActive})),lm(e.componentCls,e.ghostBg,e.defaultGhostColor,e.defaultGhostBorderColor,e.colorTextDisabled,e.colorBorder)),{[`&${e.componentCls}-dangerous`]:Object.assign(Object.assign(Object.assign({color:e.colorError,borderColor:e.colorError},yl(e.componentCls,{color:e.colorErrorHover,borderColor:e.colorErrorBorderHover},{color:e.colorErrorActive,borderColor:e.colorErrorActive})),lm(e.componentCls,e.ghostBg,e.colorError,e.colorError,e.colorTextDisabled,e.colorBorder)),NS(e))}),Uj=e=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},uz(e)),{color:e.primaryColor,backgroundColor:e.colorPrimary,boxShadow:e.primaryShadow}),yl(e.componentCls,{color:e.colorTextLightSolid,backgroundColor:e.colorPrimaryHover},{color:e.colorTextLightSolid,backgroundColor:e.colorPrimaryActive})),lm(e.componentCls,e.ghostBg,e.colorPrimary,e.colorPrimary,e.colorTextDisabled,e.colorBorder,{color:e.colorPrimaryHover,borderColor:e.colorPrimaryHover},{color:e.colorPrimaryActive,borderColor:e.colorPrimaryActive})),{[`&${e.componentCls}-dangerous`]:Object.assign(Object.assign(Object.assign({backgroundColor:e.colorError,boxShadow:e.dangerShadow,color:e.dangerColor},yl(e.componentCls,{backgroundColor:e.colorErrorHover},{backgroundColor:e.colorErrorActive})),lm(e.componentCls,e.ghostBg,e.colorError,e.colorError,e.colorTextDisabled,e.colorBorder,{color:e.colorErrorHover,borderColor:e.colorErrorHover},{color:e.colorErrorActive,borderColor:e.colorErrorActive})),NS(e))}),Vj=e=>Object.assign(Object.assign({},dz(e)),{borderStyle:"dashed"}),Hj=e=>Object.assign(Object.assign(Object.assign({color:e.colorLink},yl(e.componentCls,{color:e.colorLinkHover,backgroundColor:e.linkHoverBg},{color:e.colorLinkActive})),Oy(e)),{[`&${e.componentCls}-dangerous`]:Object.assign(Object.assign({color:e.colorError},yl(e.componentCls,{color:e.colorErrorHover},{color:e.colorErrorActive})),Oy(e))}),Gj=e=>Object.assign(Object.assign(Object.assign({},yl(e.componentCls,{color:e.colorText,backgroundColor:e.textHoverBg},{color:e.colorText,backgroundColor:e.colorBgTextActive})),Oy(e)),{[`&${e.componentCls}-dangerous`]:Object.assign(Object.assign({color:e.colorError},Oy(e)),yl(e.componentCls,{color:e.colorErrorHover,backgroundColor:e.colorErrorBg},{color:e.colorErrorHover,backgroundColor:e.colorErrorBg}))}),Wj=e=>{const{componentCls:t}=e;return{[`${t}-default`]:dz(e),[`${t}-primary`]:Uj(e),[`${t}-dashed`]:Vj(e),[`${t}-link`]:Hj(e),[`${t}-text`]:Gj(e),[`${t}-ghost`]:lm(e.componentCls,e.ghostBg,e.colorBgContainer,e.colorBgContainer,e.colorTextDisabled,e.colorBorder)}},jS=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const{componentCls:r,controlHeight:a,fontSize:c,lineHeight:f,lineWidth:y,borderRadius:l,buttonPaddingHorizontal:w,iconCls:C}=e,P=Math.max(0,(a-c*f)/2-y),A=`${r}-icon-only`;return[{[`${r}${t}`]:{fontSize:c,height:a,padding:`${P}px ${w}px`,borderRadius:l,[`&${A}`]:{width:a,paddingInlineStart:0,paddingInlineEnd:0,[`&${r}-round`]:{width:"auto"},[C]:{fontSize:e.buttonIconOnlyFontSize}},[`&${r}-loading`]:{opacity:e.opacityLoading,cursor:"default"},[`${r}-loading-icon`]:{transition:`width ${e.motionDurationSlow} ${e.motionEaseInOut}, opacity ${e.motionDurationSlow} ${e.motionEaseInOut}`}}},{[`${r}${r}-circle${t}`]:Bj(e)},{[`${r}${r}-round${t}`]:Nj(e)}]},qj=e=>jS($r(e,{fontSize:e.contentFontSize})),Zj=e=>{const t=$r(e,{controlHeight:e.controlHeightSM,fontSize:e.contentFontSizeSM,padding:e.paddingXS,buttonPaddingHorizontal:e.paddingInlineSM,borderRadius:e.borderRadiusSM,buttonIconOnlyFontSize:e.onlyIconSizeSM});return jS(t,`${e.componentCls}-sm`)},Xj=e=>{const t=$r(e,{controlHeight:e.controlHeightLG,fontSize:e.contentFontSizeLG,buttonPaddingHorizontal:e.paddingInlineLG,borderRadius:e.borderRadiusLG,buttonIconOnlyFontSize:e.onlyIconSizeLG});return jS(t,`${e.componentCls}-lg`)},Kj=e=>{const{componentCls:t}=e;return{[t]:{[`&${t}-block`]:{width:"100%"}}}},hz=e=>{const{paddingInline:t,onlyIconSize:r}=e;return $r(e,{buttonPaddingHorizontal:t,buttonIconOnlyFontSize:r})},fz=e=>({fontWeight:400,defaultShadow:`0 ${e.controlOutlineWidth}px 0 ${e.controlTmpOutline}`,primaryShadow:`0 ${e.controlOutlineWidth}px 0 ${e.controlOutline}`,dangerShadow:`0 ${e.controlOutlineWidth}px 0 ${e.colorErrorOutline}`,primaryColor:e.colorTextLightSolid,dangerColor:e.colorTextLightSolid,borderColorDisabled:e.colorBorder,defaultGhostColor:e.colorBgContainer,ghostBg:"transparent",defaultGhostBorderColor:e.colorBgContainer,paddingInline:e.paddingContentHorizontal-e.lineWidth,paddingInlineLG:e.paddingContentHorizontal-e.lineWidth,paddingInlineSM:8-e.lineWidth,onlyIconSize:e.fontSizeLG,onlyIconSizeSM:e.fontSizeLG-2,onlyIconSizeLG:e.fontSizeLG+2,groupBorderColor:e.colorPrimaryHover,linkHoverBg:"transparent",textHoverBg:e.colorBgTextHover,defaultColor:e.colorText,defaultBg:e.colorBgContainer,defaultBorderColor:e.colorBorder,defaultBorderColorDisabled:e.colorBorder,contentFontSize:e.fontSize,contentFontSizeSM:e.fontSize,contentFontSizeLG:e.fontSizeLG}),Yj=_o("Button",e=>{const t=hz(e);return[Fj(t),Zj(t),qj(t),Xj(t),Kj(t),Wj(t),$j(t)]},fz);function Jj(e,t,r){const{focusElCls:a,focus:c,borderElCls:f}=r,y=f?"> *":"",l=["hover",c?"focus":null,"active"].filter(Boolean).map(w=>`&:${w} ${y}`).join(",");return{[`&-item:not(${t}-last-item)`]:{marginInlineEnd:-e.lineWidth},"&-item":Object.assign(Object.assign({[l]:{zIndex:2}},a?{[`&${a}`]:{zIndex:2}}:{}),{[`&[disabled] ${y}`]:{zIndex:0}})}}function Qj(e,t,r){const{borderElCls:a}=r,c=a?`> ${a}`:"";return{[`&-item:not(${t}-first-item):not(${t}-last-item) ${c}`]:{borderRadius:0},[`&-item:not(${t}-last-item)${t}-first-item`]:{[`& ${c}, &${e}-sm ${c}, &${e}-lg ${c}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&-item:not(${t}-first-item)${t}-last-item`]:{[`& ${c}, &${e}-sm ${c}, &${e}-lg ${c}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}}}function US(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{focus:!0};const{componentCls:r}=e,a=`${r}-compact`;return{[a]:Object.assign(Object.assign({},Jj(e,a,t)),Qj(r,a,t))}}function e8(e,t){return{[`&-item:not(${t}-last-item)`]:{marginBottom:-e.lineWidth},"&-item":{"&:hover,&:focus,&:active":{zIndex:2},"&[disabled]":{zIndex:0}}}}function t8(e,t){return{[`&-item:not(${t}-first-item):not(${t}-last-item)`]:{borderRadius:0},[`&-item${t}-first-item:not(${t}-last-item)`]:{[`&, &${e}-sm, &${e}-lg`]:{borderEndEndRadius:0,borderEndStartRadius:0}},[`&-item${t}-last-item:not(${t}-first-item)`]:{[`&, &${e}-sm, &${e}-lg`]:{borderStartStartRadius:0,borderStartEndRadius:0}}}}function n8(e){const t=`${e.componentCls}-compact-vertical`;return{[t]:Object.assign(Object.assign({},e8(e,t)),t8(e.componentCls,t))}}const r8=yN(["Button","compact"],e=>{const t=hz(e);return[US(t),n8(t)]},fz);var i8=globalThis&&globalThis.__rest||function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(r[a[c]]=e[a[c]]);return r};function o8(e){if(typeof e=="object"&&e){let t=e==null?void 0:e.delay;return t=!Number.isNaN(t)&&typeof t=="number"?t:0,{loading:t<=0,delay:t}}return{loading:!!e,delay:0}}const a8=(e,t)=>{var r,a;const{loading:c=!1,prefixCls:f,type:y="default",danger:l,shape:w="default",size:C,styles:P,disabled:A,className:D,rootClassName:N,children:F,icon:U,ghost:Z=!1,block:j=!1,htmlType:B="button",classNames:H,style:Y={}}=e,ne=i8(e,["loading","prefixCls","type","danger","shape","size","styles","disabled","className","rootClassName","children","icon","ghost","block","htmlType","classNames","style"]),{getPrefixCls:re,autoInsertSpaceInButton:Q,direction:te,button:ee}=T.useContext(cr),ve=re("btn",f),[he,oe]=Yj(ve),fe=T.useContext(Ph),Te=A??fe,Fe=T.useContext(lz),$e=T.useMemo(()=>o8(c),[c]),[je,pe]=T.useState($e.loading),[He,Be]=T.useState(!1),nt=gs(t,T.createRef()),yt=T.Children.count(F)===1&&!U&&!l1(y);T.useEffect(()=>{let it=null;$e.delay>0?it=setTimeout(()=>{it=null,pe(!0)},$e.delay):pe($e.loading);function Rt(){it&&(clearTimeout(it),it=null)}return Rt},[$e]),T.useEffect(()=>{if(!nt||!nt.current||Q===!1)return;const it=nt.current.textContent;yt&&Qb(it)?He||Be(!0):He&&Be(!1)},[nt]);const Ot=it=>{const{onClick:Rt}=e;if(je||Te){it.preventDefault();return}Rt==null||Rt(it)},Mt=Q!==!1,{compactSize:Ft,compactItemClassnames:Nt}=C0(ve,te),Ct={large:"lg",small:"sm",middle:void 0},ut=bl(it=>{var Rt,bt;return(bt=(Rt=C??Ft)!==null&&Rt!==void 0?Rt:Fe)!==null&&bt!==void 0?bt:it}),At=ut&&Ct[ut]||"",dt=je?"loading":U,Bt=Sc(ne,["navigate"]),gt=kt(ve,oe,{[`${ve}-${w}`]:w!=="default"&&w,[`${ve}-${y}`]:y,[`${ve}-${At}`]:At,[`${ve}-icon-only`]:!F&&F!==0&&!!dt,[`${ve}-background-ghost`]:Z&&!l1(y),[`${ve}-loading`]:je,[`${ve}-two-chinese-chars`]:He&&Mt&&!je,[`${ve}-block`]:j,[`${ve}-dangerous`]:!!l,[`${ve}-rtl`]:te==="rtl"},Nt,D,N,ee==null?void 0:ee.className),jt=Object.assign(Object.assign({},ee==null?void 0:ee.style),Y),zt=kt(H==null?void 0:H.icon,(r=ee==null?void 0:ee.classNames)===null||r===void 0?void 0:r.icon),an=Object.assign(Object.assign({},(P==null?void 0:P.icon)||{}),((a=ee==null?void 0:ee.styles)===null||a===void 0?void 0:a.icon)||{}),Kt=U&&!je?pt.createElement(cz,{prefixCls:ve,className:zt,style:an},U):pt.createElement(Lj,{existIcon:!!U,prefixCls:ve,loading:!!je}),Ut=F||F===0?Oj(F,yt&&Mt):null;if(Bt.href!==void 0)return he(pt.createElement("a",Object.assign({},Bt,{className:kt(gt,{[`${ve}-disabled`]:Te}),style:jt,onClick:Ot,ref:nt}),Kt,Ut));let at=pt.createElement("button",Object.assign({},ne,{type:B,className:gt,style:jt,onClick:Ot,disabled:Te,ref:nt}),Kt,Ut,Nt&&pt.createElement(r8,{key:"compact",prefixCls:ve}));return l1(y)||(at=pt.createElement(oz,{component:"Button",disabled:!!je},at)),he(at)},VS=T.forwardRef(a8);VS.Group=Aj;VS.__ANT_BUTTON=!0;const s8=VS;var pz=T.createContext(null),WI=[];function l8(e,t){var r=T.useState(function(){if(!yo())return null;var F=document.createElement("div");return F}),a=$t(r,1),c=a[0],f=T.useRef(!1),y=T.useContext(pz),l=T.useState(WI),w=$t(l,2),C=w[0],P=w[1],A=y||(f.current?void 0:function(F){P(function(U){var Z=[F].concat(_n(U));return Z})});function D(){c.parentElement||document.body.appendChild(c),f.current=!0}function N(){var F;(F=c.parentElement)===null||F===void 0||F.removeChild(c),f.current=!1}return Lr(function(){return e?y?y(D):D():N(),N},[e]),Lr(function(){C.length&&(C.forEach(function(F){return F()}),P(WI))},[C]),[c,A]}var d1;function c8(e){if(typeof document>"u")return 0;if(e||d1===void 0){var t=document.createElement("div");t.style.width="100%",t.style.height="200px";var r=document.createElement("div"),a=r.style;a.position="absolute",a.top="0",a.left="0",a.pointerEvents="none",a.visibility="hidden",a.width="200px",a.height="150px",a.overflow="hidden",r.appendChild(t),document.body.appendChild(r);var c=t.offsetWidth;r.style.overflow="scroll";var f=t.offsetWidth;c===f&&(f=r.clientWidth),document.body.removeChild(r),d1=c-f}return d1}function qI(e){var t=e.match(/^(.*)px$/),r=Number(t==null?void 0:t[1]);return Number.isNaN(r)?c8():r}function u8(e){if(typeof document>"u"||!e||!(e instanceof Element))return{width:0,height:0};var t=getComputedStyle(e,"::-webkit-scrollbar"),r=t.width,a=t.height;return{width:qI(r),height:qI(a)}}function d8(){return document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth}var h8="rc-util-locker-".concat(Date.now()),ZI=0;function f8(e){var t=!!e,r=T.useState(function(){return ZI+=1,"".concat(h8,"_").concat(ZI)}),a=$t(r,1),c=a[0];Lr(function(){if(t){var f=u8(document.body).width,y=d8();gh(`
html body {
  overflow-y: hidden;
  `.concat(y?"width: calc(100% - ".concat(f,"px);"):"",`
}`),c)}else Ty(c);return function(){Ty(c)}},[t,c])}var XI=!1;function p8(e){return typeof e=="boolean"&&(XI=e),XI}var KI=function(t){return t===!1?!1:!yo()||!t?null:typeof t=="string"?document.querySelector(t):typeof t=="function"?t():t},mz=T.forwardRef(function(e,t){var r=e.open,a=e.autoLock,c=e.getContainer;e.debug;var f=e.autoDestroy,y=f===void 0?!0:f,l=e.children,w=T.useState(r),C=$t(w,2),P=C[0],A=C[1],D=P||r;T.useEffect(function(){(y||r)&&A(r)},[r,y]);var N=T.useState(function(){return KI(c)}),F=$t(N,2),U=F[0],Z=F[1];T.useEffect(function(){var he=KI(c);Z(he??null)});var j=l8(D&&!U),B=$t(j,2),H=B[0],Y=B[1],ne=U??H;f8(a&&r&&yo()&&(ne===H||ne===document.body));var re=null;if(l&&_m(l)&&t){var Q=l;re=Q.ref}var te=p0(re,t);if(!D||!yo()||U===void 0)return null;var ee=ne===!1||p8(),ve=l;return t&&(ve=T.cloneElement(l,{ref:te})),T.createElement(pz.Provider,{value:Y},ee?ve:vc.createPortal(ve,ne))});function m8(){var e=st({},jy);return e.useId}var YI=0,JI=m8();const g8=JI?function(t){var r=JI();return t||r}:function(t){var r=T.useState("ssr-id"),a=$t(r,2),c=a[0],f=a[1];return T.useEffect(function(){var y=YI;YI+=1,f("rc_unique_".concat(y))},[]),t||c};var gz=function(t){if(yo()&&window.document.documentElement){var r=Array.isArray(t)?t:[t],a=window.document.documentElement;return r.some(function(c){return c in a.style})}return!1},v8=function(t,r){if(!gz(t))return!1;var a=document.createElement("div"),c=a.style[t];return a.style[t]=r,a.style[t]!==c};function QI(e,t){return!Array.isArray(e)&&t!==void 0?v8(e,t):gz(e)}const y8=pt.createContext(void 0),vz=y8;var hu="RC_FORM_INTERNAL_HOOKS",Ur=function(){Uo(!1,"Can not find FormContext. Please make sure you wrap Field under Form.")},xh=T.createContext({getFieldValue:Ur,getFieldsValue:Ur,getFieldError:Ur,getFieldWarning:Ur,getFieldsError:Ur,isFieldsTouched:Ur,isFieldTouched:Ur,isFieldValidating:Ur,isFieldsValidating:Ur,resetFields:Ur,setFields:Ur,setFieldValue:Ur,setFieldsValue:Ur,validateFields:Ur,submit:Ur,getInternalHooks:function(){return Ur(),{dispatch:Ur,initEntityValue:Ur,registerField:Ur,useSubscribe:Ur,setInitialValues:Ur,destroyForm:Ur,setCallbacks:Ur,registerWatch:Ur,getFields:Ur,setValidateMessages:Ur,setPreserve:Ur,getInitialValue:Ur}}}),zy=T.createContext(null);function ew(e){return e==null?[]:Array.isArray(e)?e:[e]}function _8(e){return e&&!!e._init}function fu(){return fu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},fu.apply(this,arguments)}function x8(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,cm(e,t)}function tw(e){return tw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},tw(e)}function cm(e,t){return cm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,c){return a.__proto__=c,a},cm(e,t)}function b8(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Gv(e,t,r){return b8()?Gv=Reflect.construct.bind():Gv=function(c,f,y){var l=[null];l.push.apply(l,f);var w=Function.bind.apply(c,l),C=new w;return y&&cm(C,y.prototype),C},Gv.apply(null,arguments)}function w8(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function nw(e){var t=typeof Map=="function"?new Map:void 0;return nw=function(a){if(a===null||!w8(a))return a;if(typeof a!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t<"u"){if(t.has(a))return t.get(a);t.set(a,c)}function c(){return Gv(a,arguments,tw(this).constructor)}return c.prototype=Object.create(a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),cm(c,a)},nw(e)}var S8=/%[sdj%]/g,E8=function(){};typeof process<"u"&&process.env;function rw(e){if(!e||!e.length)return null;var t={};return e.forEach(function(r){var a=r.field;t[a]=t[a]||[],t[a].push(r)}),t}function aa(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];var c=0,f=r.length;if(typeof e=="function")return e.apply(null,r);if(typeof e=="string"){var y=e.replace(S8,function(l){if(l==="%%")return"%";if(c>=f)return l;switch(l){case"%s":return String(r[c++]);case"%d":return Number(r[c++]);case"%j":try{return JSON.stringify(r[c++])}catch{return"[Circular]"}break;default:return l}});return y}return e}function C8(e){return e==="string"||e==="url"||e==="hex"||e==="email"||e==="date"||e==="pattern"}function Bi(e,t){return!!(e==null||t==="array"&&Array.isArray(e)&&!e.length||C8(t)&&typeof e=="string"&&!e)}function T8(e,t,r){var a=[],c=0,f=e.length;function y(l){a.push.apply(a,l||[]),c++,c===f&&r(a)}e.forEach(function(l){t(l,y)})}function eM(e,t,r){var a=0,c=e.length;function f(y){if(y&&y.length){r(y);return}var l=a;a=a+1,l<c?t(e[l],f):r([])}f([])}function I8(e){var t=[];return Object.keys(e).forEach(function(r){t.push.apply(t,e[r]||[])}),t}var tM=function(e){x8(t,e);function t(r,a){var c;return c=e.call(this,"Async Validation Error")||this,c.errors=r,c.fields=a,c}return t}(nw(Error));function M8(e,t,r,a,c){if(t.first){var f=new Promise(function(D,N){var F=function(j){return a(j),j.length?N(new tM(j,rw(j))):D(c)},U=I8(e);eM(U,r,F)});return f.catch(function(D){return D}),f}var y=t.firstFields===!0?Object.keys(e):t.firstFields||[],l=Object.keys(e),w=l.length,C=0,P=[],A=new Promise(function(D,N){var F=function(Z){if(P.push.apply(P,Z),C++,C===w)return a(P),P.length?N(new tM(P,rw(P))):D(c)};l.length||(a(P),D(c)),l.forEach(function(U){var Z=e[U];y.indexOf(U)!==-1?eM(Z,r,F):T8(Z,r,F)})});return A.catch(function(D){return D}),A}function P8(e){return!!(e&&e.message!==void 0)}function A8(e,t){for(var r=e,a=0;a<t.length;a++){if(r==null)return r;r=r[t[a]]}return r}function nM(e,t){return function(r){var a;return e.fullFields?a=A8(t,e.fullFields):a=t[r.field||e.fullField],P8(r)?(r.field=r.field||e.fullField,r.fieldValue=a,r):{message:typeof r=="function"?r():r,fieldValue:a,field:r.field||e.fullField}}}function rM(e,t){if(t){for(var r in t)if(t.hasOwnProperty(r)){var a=t[r];typeof a=="object"&&typeof e[r]=="object"?e[r]=fu({},e[r],a):e[r]=a}}return e}var yz=function(t,r,a,c,f,y){t.required&&(!a.hasOwnProperty(t.field)||Bi(r,y||t.type))&&c.push(aa(f.messages.required,t.fullField))},R8=function(t,r,a,c,f){(/^\s+$/.test(r)||r==="")&&c.push(aa(f.messages.whitespace,t.fullField))},Ev,O8=function(){if(Ev)return Ev;var e="[a-fA-F\\d:]",t=function(Y){return Y&&Y.includeBoundaries?"(?:(?<=\\s|^)(?="+e+")|(?<="+e+")(?=\\s|$))":""},r="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",a="[a-fA-F\\d]{1,4}",c=(`
(?:
(?:`+a+":){7}(?:"+a+`|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:`+a+":){6}(?:"+r+"|:"+a+`|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:`+a+":){5}(?::"+r+"|(?::"+a+`){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:`+a+":){4}(?:(?::"+a+"){0,1}:"+r+"|(?::"+a+`){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:`+a+":){3}(?:(?::"+a+"){0,2}:"+r+"|(?::"+a+`){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:`+a+":){2}(?:(?::"+a+"){0,3}:"+r+"|(?::"+a+`){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:`+a+":){1}(?:(?::"+a+"){0,4}:"+r+"|(?::"+a+`){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::`+a+"){0,5}:"+r+"|(?::"+a+`){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`).replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),f=new RegExp("(?:^"+r+"$)|(?:^"+c+"$)"),y=new RegExp("^"+r+"$"),l=new RegExp("^"+c+"$"),w=function(Y){return Y&&Y.exact?f:new RegExp("(?:"+t(Y)+r+t(Y)+")|(?:"+t(Y)+c+t(Y)+")","g")};w.v4=function(H){return H&&H.exact?y:new RegExp(""+t(H)+r+t(H),"g")},w.v6=function(H){return H&&H.exact?l:new RegExp(""+t(H)+c+t(H),"g")};var C="(?:(?:[a-z]+:)?//)",P="(?:\\S+(?::\\S*)?@)?",A=w.v4().source,D=w.v6().source,N="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",F="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",U="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",Z="(?::\\d{2,5})?",j='(?:[/?#][^\\s"]*)?',B="(?:"+C+"|www\\.)"+P+"(?:localhost|"+A+"|"+D+"|"+N+F+U+")"+Z+j;return Ev=new RegExp("(?:^"+B+"$)","i"),Ev},iM={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},wp={integer:function(t){return wp.number(t)&&parseInt(t,10)===t},float:function(t){return wp.number(t)&&!wp.integer(t)},array:function(t){return Array.isArray(t)},regexp:function(t){if(t instanceof RegExp)return!0;try{return!!new RegExp(t)}catch{return!1}},date:function(t){return typeof t.getTime=="function"&&typeof t.getMonth=="function"&&typeof t.getYear=="function"&&!isNaN(t.getTime())},number:function(t){return isNaN(t)?!1:typeof t=="number"},object:function(t){return typeof t=="object"&&!wp.array(t)},method:function(t){return typeof t=="function"},email:function(t){return typeof t=="string"&&t.length<=320&&!!t.match(iM.email)},url:function(t){return typeof t=="string"&&t.length<=2048&&!!t.match(O8())},hex:function(t){return typeof t=="string"&&!!t.match(iM.hex)}},z8=function(t,r,a,c,f){if(t.required&&r===void 0){yz(t,r,a,c,f);return}var y=["integer","float","array","regexp","object","method","email","number","date","url","hex"],l=t.type;y.indexOf(l)>-1?wp[l](r)||c.push(aa(f.messages.types[l],t.fullField,t.type)):l&&typeof r!==t.type&&c.push(aa(f.messages.types[l],t.fullField,t.type))},D8=function(t,r,a,c,f){var y=typeof t.len=="number",l=typeof t.min=="number",w=typeof t.max=="number",C=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,P=r,A=null,D=typeof r=="number",N=typeof r=="string",F=Array.isArray(r);if(D?A="number":N?A="string":F&&(A="array"),!A)return!1;F&&(P=r.length),N&&(P=r.replace(C,"_").length),y?P!==t.len&&c.push(aa(f.messages[A].len,t.fullField,t.len)):l&&!w&&P<t.min?c.push(aa(f.messages[A].min,t.fullField,t.min)):w&&!l&&P>t.max?c.push(aa(f.messages[A].max,t.fullField,t.max)):l&&w&&(P<t.min||P>t.max)&&c.push(aa(f.messages[A].range,t.fullField,t.min,t.max))},Id="enum",L8=function(t,r,a,c,f){t[Id]=Array.isArray(t[Id])?t[Id]:[],t[Id].indexOf(r)===-1&&c.push(aa(f.messages[Id],t.fullField,t[Id].join(", ")))},k8=function(t,r,a,c,f){if(t.pattern){if(t.pattern instanceof RegExp)t.pattern.lastIndex=0,t.pattern.test(r)||c.push(aa(f.messages.pattern.mismatch,t.fullField,r,t.pattern));else if(typeof t.pattern=="string"){var y=new RegExp(t.pattern);y.test(r)||c.push(aa(f.messages.pattern.mismatch,t.fullField,r,t.pattern))}}},sr={required:yz,whitespace:R8,type:z8,range:D8,enum:L8,pattern:k8},$8=function(t,r,a,c,f){var y=[],l=t.required||!t.required&&c.hasOwnProperty(t.field);if(l){if(Bi(r,"string")&&!t.required)return a();sr.required(t,r,c,y,f,"string"),Bi(r,"string")||(sr.type(t,r,c,y,f),sr.range(t,r,c,y,f),sr.pattern(t,r,c,y,f),t.whitespace===!0&&sr.whitespace(t,r,c,y,f))}a(y)},F8=function(t,r,a,c,f){var y=[],l=t.required||!t.required&&c.hasOwnProperty(t.field);if(l){if(Bi(r)&&!t.required)return a();sr.required(t,r,c,y,f),r!==void 0&&sr.type(t,r,c,y,f)}a(y)},B8=function(t,r,a,c,f){var y=[],l=t.required||!t.required&&c.hasOwnProperty(t.field);if(l){if(r===""&&(r=void 0),Bi(r)&&!t.required)return a();sr.required(t,r,c,y,f),r!==void 0&&(sr.type(t,r,c,y,f),sr.range(t,r,c,y,f))}a(y)},N8=function(t,r,a,c,f){var y=[],l=t.required||!t.required&&c.hasOwnProperty(t.field);if(l){if(Bi(r)&&!t.required)return a();sr.required(t,r,c,y,f),r!==void 0&&sr.type(t,r,c,y,f)}a(y)},j8=function(t,r,a,c,f){var y=[],l=t.required||!t.required&&c.hasOwnProperty(t.field);if(l){if(Bi(r)&&!t.required)return a();sr.required(t,r,c,y,f),Bi(r)||sr.type(t,r,c,y,f)}a(y)},U8=function(t,r,a,c,f){var y=[],l=t.required||!t.required&&c.hasOwnProperty(t.field);if(l){if(Bi(r)&&!t.required)return a();sr.required(t,r,c,y,f),r!==void 0&&(sr.type(t,r,c,y,f),sr.range(t,r,c,y,f))}a(y)},V8=function(t,r,a,c,f){var y=[],l=t.required||!t.required&&c.hasOwnProperty(t.field);if(l){if(Bi(r)&&!t.required)return a();sr.required(t,r,c,y,f),r!==void 0&&(sr.type(t,r,c,y,f),sr.range(t,r,c,y,f))}a(y)},H8=function(t,r,a,c,f){var y=[],l=t.required||!t.required&&c.hasOwnProperty(t.field);if(l){if(r==null&&!t.required)return a();sr.required(t,r,c,y,f,"array"),r!=null&&(sr.type(t,r,c,y,f),sr.range(t,r,c,y,f))}a(y)},G8=function(t,r,a,c,f){var y=[],l=t.required||!t.required&&c.hasOwnProperty(t.field);if(l){if(Bi(r)&&!t.required)return a();sr.required(t,r,c,y,f),r!==void 0&&sr.type(t,r,c,y,f)}a(y)},W8="enum",q8=function(t,r,a,c,f){var y=[],l=t.required||!t.required&&c.hasOwnProperty(t.field);if(l){if(Bi(r)&&!t.required)return a();sr.required(t,r,c,y,f),r!==void 0&&sr[W8](t,r,c,y,f)}a(y)},Z8=function(t,r,a,c,f){var y=[],l=t.required||!t.required&&c.hasOwnProperty(t.field);if(l){if(Bi(r,"string")&&!t.required)return a();sr.required(t,r,c,y,f),Bi(r,"string")||sr.pattern(t,r,c,y,f)}a(y)},X8=function(t,r,a,c,f){var y=[],l=t.required||!t.required&&c.hasOwnProperty(t.field);if(l){if(Bi(r,"date")&&!t.required)return a();if(sr.required(t,r,c,y,f),!Bi(r,"date")){var w;r instanceof Date?w=r:w=new Date(r),sr.type(t,w,c,y,f),w&&sr.range(t,w.getTime(),c,y,f)}}a(y)},K8=function(t,r,a,c,f){var y=[],l=Array.isArray(r)?"array":typeof r;sr.required(t,r,c,y,f,l),a(y)},h1=function(t,r,a,c,f){var y=t.type,l=[],w=t.required||!t.required&&c.hasOwnProperty(t.field);if(w){if(Bi(r,y)&&!t.required)return a();sr.required(t,r,c,l,f,y),Bi(r,y)||sr.type(t,r,c,l,f)}a(l)},Y8=function(t,r,a,c,f){var y=[],l=t.required||!t.required&&c.hasOwnProperty(t.field);if(l){if(Bi(r)&&!t.required)return a();sr.required(t,r,c,y,f)}a(y)},kp={string:$8,method:F8,number:B8,boolean:N8,regexp:j8,integer:U8,float:V8,array:H8,object:G8,enum:q8,pattern:Z8,date:X8,url:h1,hex:h1,email:h1,required:K8,any:Y8};function iw(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var t=JSON.parse(JSON.stringify(this));return t.clone=this.clone,t}}}var ow=iw(),wm=function(){function e(r){this.rules=null,this._messages=ow,this.define(r)}var t=e.prototype;return t.define=function(a){var c=this;if(!a)throw new Error("Cannot configure a schema with no rules");if(typeof a!="object"||Array.isArray(a))throw new Error("Rules must be an object");this.rules={},Object.keys(a).forEach(function(f){var y=a[f];c.rules[f]=Array.isArray(y)?y:[y]})},t.messages=function(a){return a&&(this._messages=rM(iw(),a)),this._messages},t.validate=function(a,c,f){var y=this;c===void 0&&(c={}),f===void 0&&(f=function(){});var l=a,w=c,C=f;if(typeof w=="function"&&(C=w,w={}),!this.rules||Object.keys(this.rules).length===0)return C&&C(null,l),Promise.resolve(l);function P(U){var Z=[],j={};function B(Y){if(Array.isArray(Y)){var ne;Z=(ne=Z).concat.apply(ne,Y)}else Z.push(Y)}for(var H=0;H<U.length;H++)B(U[H]);Z.length?(j=rw(Z),C(Z,j)):C(null,l)}if(w.messages){var A=this.messages();A===ow&&(A=iw()),rM(A,w.messages),w.messages=A}else w.messages=this.messages();var D={},N=w.keys||Object.keys(this.rules);N.forEach(function(U){var Z=y.rules[U],j=l[U];Z.forEach(function(B){var H=B;typeof H.transform=="function"&&(l===a&&(l=fu({},l)),j=l[U]=H.transform(j)),typeof H=="function"?H={validator:H}:H=fu({},H),H.validator=y.getValidationMethod(H),H.validator&&(H.field=U,H.fullField=H.fullField||U,H.type=y.getType(H),D[U]=D[U]||[],D[U].push({rule:H,value:j,source:l,field:U}))})});var F={};return M8(D,w,function(U,Z){var j=U.rule,B=(j.type==="object"||j.type==="array")&&(typeof j.fields=="object"||typeof j.defaultField=="object");B=B&&(j.required||!j.required&&U.value),j.field=U.field;function H(re,Q){return fu({},Q,{fullField:j.fullField+"."+re,fullFields:j.fullFields?[].concat(j.fullFields,[re]):[re]})}function Y(re){re===void 0&&(re=[]);var Q=Array.isArray(re)?re:[re];!w.suppressWarning&&Q.length&&e.warning("async-validator:",Q),Q.length&&j.message!==void 0&&(Q=[].concat(j.message));var te=Q.map(nM(j,l));if(w.first&&te.length)return F[j.field]=1,Z(te);if(!B)Z(te);else{if(j.required&&!U.value)return j.message!==void 0?te=[].concat(j.message).map(nM(j,l)):w.error&&(te=[w.error(j,aa(w.messages.required,j.field))]),Z(te);var ee={};j.defaultField&&Object.keys(U.value).map(function(oe){ee[oe]=j.defaultField}),ee=fu({},ee,U.rule.fields);var ve={};Object.keys(ee).forEach(function(oe){var fe=ee[oe],Te=Array.isArray(fe)?fe:[fe];ve[oe]=Te.map(H.bind(null,oe))});var he=new e(ve);he.messages(w.messages),U.rule.options&&(U.rule.options.messages=w.messages,U.rule.options.error=w.error),he.validate(U.value,U.rule.options||w,function(oe){var fe=[];te&&te.length&&fe.push.apply(fe,te),oe&&oe.length&&fe.push.apply(fe,oe),Z(fe.length?fe:null)})}}var ne;if(j.asyncValidator)ne=j.asyncValidator(j,U.value,Y,U.source,w);else if(j.validator){try{ne=j.validator(j,U.value,Y,U.source,w)}catch(re){console.error==null||console.error(re),w.suppressValidatorError||setTimeout(function(){throw re},0),Y(re.message)}ne===!0?Y():ne===!1?Y(typeof j.message=="function"?j.message(j.fullField||j.field):j.message||(j.fullField||j.field)+" fails"):ne instanceof Array?Y(ne):ne instanceof Error&&Y(ne.message)}ne&&ne.then&&ne.then(function(){return Y()},function(re){return Y(re)})},function(U){P(U)},l)},t.getType=function(a){if(a.type===void 0&&a.pattern instanceof RegExp&&(a.type="pattern"),typeof a.validator!="function"&&a.type&&!kp.hasOwnProperty(a.type))throw new Error(aa("Unknown rule type %s",a.type));return a.type||"string"},t.getValidationMethod=function(a){if(typeof a.validator=="function")return a.validator;var c=Object.keys(a),f=c.indexOf("message");return f!==-1&&c.splice(f,1),c.length===1&&c[0]==="required"?kp.required:kp[this.getType(a)]||void 0},e}();wm.register=function(t,r){if(typeof r!="function")throw new Error("Cannot register a validator by type, validator is not a function");kp[t]=r};wm.warning=E8;wm.messages=ow;wm.validators=kp;var ea="'${name}' is not a valid ${type}",_z={default:"Validation error on field '${name}'",required:"'${name}' is required",enum:"'${name}' must be one of [${enum}]",whitespace:"'${name}' cannot be empty",date:{format:"'${name}' is invalid for format date",parse:"'${name}' could not be parsed as date",invalid:"'${name}' is invalid date"},types:{string:ea,method:ea,array:ea,object:ea,number:ea,date:ea,boolean:ea,integer:ea,float:ea,regexp:ea,email:ea,url:ea,hex:ea},string:{len:"'${name}' must be exactly ${len} characters",min:"'${name}' must be at least ${min} characters",max:"'${name}' cannot be longer than ${max} characters",range:"'${name}' must be between ${min} and ${max} characters"},number:{len:"'${name}' must equal ${len}",min:"'${name}' cannot be less than ${min}",max:"'${name}' cannot be greater than ${max}",range:"'${name}' must be between ${min} and ${max}"},array:{len:"'${name}' must be exactly ${len} in length",min:"'${name}' cannot be less than ${min} in length",max:"'${name}' cannot be greater than ${max} in length",range:"'${name}' must be between ${min} and ${max} in length"},pattern:{mismatch:"'${name}' does not match pattern ${pattern}"}},oM=wm;function J8(e,t){return e.replace(/\$\{\w+\}/g,function(r){var a=r.slice(2,-1);return t[a]})}var aM="CODE_LOGIC_ERROR";function aw(e,t,r,a,c){return sw.apply(this,arguments)}function sw(){return sw=Pu(To().mark(function e(t,r,a,c,f){var y,l,w,C,P,A,D,N,F;return To().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return y=st({},a),delete y.ruleIndex,oM.warning=function(){},y.validator&&(l=y.validator,y.validator=function(){try{return l.apply(void 0,arguments)}catch(j){return console.error(j),Promise.reject(aM)}}),w=null,y&&y.type==="array"&&y.defaultField&&(w=y.defaultField,delete y.defaultField),C=new oM(ke({},t,[y])),P=Kd(_z,c.validateMessages),C.messages(P),A=[],Z.prev=10,Z.next=13,Promise.resolve(C.validate(ke({},t,r),st({},c)));case 13:Z.next=18;break;case 15:Z.prev=15,Z.t0=Z.catch(10),Z.t0.errors&&(A=Z.t0.errors.map(function(j,B){var H=j.message,Y=H===aM?P.default:H;return T.isValidElement(Y)?T.cloneElement(Y,{key:"error_".concat(B)}):Y}));case 18:if(!(!A.length&&w)){Z.next=23;break}return Z.next=21,Promise.all(r.map(function(j,B){return aw("".concat(t,".").concat(B),j,w,c,f)}));case 21:return D=Z.sent,Z.abrupt("return",D.reduce(function(j,B){return[].concat(_n(j),_n(B))},[]));case 23:return N=st(st({},a),{},{name:t,enum:(a.enum||[]).join(", ")},f),F=A.map(function(j){return typeof j=="string"?J8(j,N):j}),Z.abrupt("return",F);case 26:case"end":return Z.stop()}},e,null,[[10,15]])})),sw.apply(this,arguments)}function Q8(e,t,r,a,c,f){var y=e.join("."),l=r.map(function(P,A){var D=P.validator,N=st(st({},P),{},{ruleIndex:A});return D&&(N.validator=function(F,U,Z){var j=!1,B=function(){for(var ne=arguments.length,re=new Array(ne),Q=0;Q<ne;Q++)re[Q]=arguments[Q];Promise.resolve().then(function(){Uo(!j,"Your validator function has already return a promise. `callback` will be ignored."),j||Z.apply(void 0,re)})},H=D(F,U,B);j=H&&typeof H.then=="function"&&typeof H.catch=="function",Uo(j,"`callback` is deprecated. Please return a promise instead."),j&&H.then(function(){Z()}).catch(function(Y){Z(Y||" ")})}),N}).sort(function(P,A){var D=P.warningOnly,N=P.ruleIndex,F=A.warningOnly,U=A.ruleIndex;return!!D==!!F?N-U:D?1:-1}),w;if(c===!0)w=new Promise(function(){var P=Pu(To().mark(function A(D,N){var F,U,Z;return To().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:F=0;case 1:if(!(F<l.length)){B.next=12;break}return U=l[F],B.next=5,aw(y,t,U,a,f);case 5:if(Z=B.sent,!Z.length){B.next=9;break}return N([{errors:Z,rule:U}]),B.abrupt("return");case 9:F+=1,B.next=1;break;case 12:D([]);case 13:case"end":return B.stop()}},A)}));return function(A,D){return P.apply(this,arguments)}}());else{var C=l.map(function(P){return aw(y,t,P,a,f).then(function(A){return{errors:A,rule:P}})});w=(c?tU(C):eU(C)).then(function(P){return Promise.reject(P)})}return w.catch(function(P){return P}),w}function eU(e){return lw.apply(this,arguments)}function lw(){return lw=Pu(To().mark(function e(t){return To().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",Promise.all(t).then(function(c){var f,y=(f=[]).concat.apply(f,_n(c));return y}));case 1:case"end":return a.stop()}},e)})),lw.apply(this,arguments)}function tU(e){return cw.apply(this,arguments)}function cw(){return cw=Pu(To().mark(function e(t){var r;return To().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return r=0,c.abrupt("return",new Promise(function(f){t.forEach(function(y){y.then(function(l){l.errors.length&&f([l]),r+=1,r===t.length&&f([])})})}));case 2:case"end":return c.stop()}},e)})),cw.apply(this,arguments)}function bi(e){return ew(e)}function sM(e,t){var r={};return t.forEach(function(a){var c=us(e,a);r=as(r,a,c)}),r}function ah(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return e&&e.some(function(a){return xz(t,a,r)})}function xz(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return!e||!t||!r&&e.length!==t.length?!1:t.every(function(a,c){return e[c]===a})}function nU(e,t){if(e===t)return!0;if(!e&&t||e&&!t||!e||!t||Kn(e)!=="object"||Kn(t)!=="object")return!1;var r=Object.keys(e),a=Object.keys(t),c=new Set([].concat(r,a));return _n(c).every(function(f){var y=e[f],l=t[f];return typeof y=="function"&&typeof l=="function"?!0:y===l})}function rU(e){var t=arguments.length<=1?void 0:arguments[1];return t&&t.target&&Kn(t.target)==="object"&&e in t.target?t.target[e]:t}function lM(e,t,r){var a=e.length;if(t<0||t>=a||r<0||r>=a)return e;var c=e[t],f=t-r;return f>0?[].concat(_n(e.slice(0,r)),[c],_n(e.slice(r,t)),_n(e.slice(t+1,a))):f<0?[].concat(_n(e.slice(0,t)),_n(e.slice(t+1,r+1)),[c],_n(e.slice(r+1,a))):e}var iU=["name"],Ia=[];function cM(e,t,r,a,c,f){return typeof e=="function"?e(t,r,"source"in f?{source:f.source}:{}):a!==c}var HS=function(e){Th(r,e);var t=Ih(r);function r(a){var c;if(ha(this,r),c=t.call(this,a),ke(gn(c),"state",{resetCount:0}),ke(gn(c),"cancelRegisterFunc",null),ke(gn(c),"mounted",!1),ke(gn(c),"touched",!1),ke(gn(c),"dirty",!1),ke(gn(c),"validatePromise",void 0),ke(gn(c),"prevValidating",void 0),ke(gn(c),"errors",Ia),ke(gn(c),"warnings",Ia),ke(gn(c),"cancelRegister",function(){var w=c.props,C=w.preserve,P=w.isListField,A=w.name;c.cancelRegisterFunc&&c.cancelRegisterFunc(P,C,bi(A)),c.cancelRegisterFunc=null}),ke(gn(c),"getNamePath",function(){var w=c.props,C=w.name,P=w.fieldContext,A=P.prefixName,D=A===void 0?[]:A;return C!==void 0?[].concat(_n(D),_n(C)):[]}),ke(gn(c),"getRules",function(){var w=c.props,C=w.rules,P=C===void 0?[]:C,A=w.fieldContext;return P.map(function(D){return typeof D=="function"?D(A):D})}),ke(gn(c),"refresh",function(){c.mounted&&c.setState(function(w){var C=w.resetCount;return{resetCount:C+1}})}),ke(gn(c),"metaCache",null),ke(gn(c),"triggerMetaEvent",function(w){var C=c.props.onMetaChange;if(C){var P=st(st({},c.getMeta()),{},{destroy:w});XR(c.metaCache,P)||C(P),c.metaCache=P}else c.metaCache=null}),ke(gn(c),"onStoreChange",function(w,C,P){var A=c.props,D=A.shouldUpdate,N=A.dependencies,F=N===void 0?[]:N,U=A.onReset,Z=P.store,j=c.getNamePath(),B=c.getValue(w),H=c.getValue(Z),Y=C&&ah(C,j);switch(P.type==="valueUpdate"&&P.source==="external"&&B!==H&&(c.touched=!0,c.dirty=!0,c.validatePromise=null,c.errors=Ia,c.warnings=Ia,c.triggerMetaEvent()),P.type){case"reset":if(!C||Y){c.touched=!1,c.dirty=!1,c.validatePromise=void 0,c.errors=Ia,c.warnings=Ia,c.triggerMetaEvent(),U==null||U(),c.refresh();return}break;case"remove":{if(D){c.reRender();return}break}case"setField":{var ne=P.data;if(Y){"touched"in ne&&(c.touched=ne.touched),"validating"in ne&&!("originRCField"in ne)&&(c.validatePromise=ne.validating?Promise.resolve([]):null),"errors"in ne&&(c.errors=ne.errors||Ia),"warnings"in ne&&(c.warnings=ne.warnings||Ia),c.dirty=!0,c.triggerMetaEvent(),c.reRender();return}else if("value"in ne&&ah(C,j,!0)){c.reRender();return}if(D&&!j.length&&cM(D,w,Z,B,H,P)){c.reRender();return}break}case"dependenciesUpdate":{var re=F.map(bi);if(re.some(function(Q){return ah(P.relatedFields,Q)})){c.reRender();return}break}default:if(Y||(!F.length||j.length||D)&&cM(D,w,Z,B,H,P)){c.reRender();return}break}D===!0&&c.reRender()}),ke(gn(c),"validateRules",function(w){var C=c.getNamePath(),P=c.getValue(),A=w||{},D=A.triggerName,N=A.validateOnly,F=N===void 0?!1:N,U=Promise.resolve().then(Pu(To().mark(function Z(){var j,B,H,Y,ne,re,Q;return To().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:if(c.mounted){ee.next=2;break}return ee.abrupt("return",[]);case 2:if(j=c.props,B=j.validateFirst,H=B===void 0?!1:B,Y=j.messageVariables,ne=j.validateDebounce,re=c.getRules(),D&&(re=re.filter(function(ve){return ve}).filter(function(ve){var he=ve.validateTrigger;if(!he)return!0;var oe=ew(he);return oe.includes(D)})),!(ne&&D)){ee.next=10;break}return ee.next=8,new Promise(function(ve){setTimeout(ve,ne)});case 8:if(c.validatePromise===U){ee.next=10;break}return ee.abrupt("return",[]);case 10:return Q=Q8(C,P,re,w,H,Y),Q.catch(function(ve){return ve}).then(function(){var ve=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ia;if(c.validatePromise===U){var he;c.validatePromise=null;var oe=[],fe=[];(he=ve.forEach)===null||he===void 0||he.call(ve,function(Te){var Fe=Te.rule.warningOnly,$e=Te.errors,je=$e===void 0?Ia:$e;Fe?fe.push.apply(fe,_n(je)):oe.push.apply(oe,_n(je))}),c.errors=oe,c.warnings=fe,c.triggerMetaEvent(),c.reRender()}}),ee.abrupt("return",Q);case 13:case"end":return ee.stop()}},Z)})));return F||(c.validatePromise=U,c.dirty=!0,c.errors=Ia,c.warnings=Ia,c.triggerMetaEvent(),c.reRender()),U}),ke(gn(c),"isFieldValidating",function(){return!!c.validatePromise}),ke(gn(c),"isFieldTouched",function(){return c.touched}),ke(gn(c),"isFieldDirty",function(){if(c.dirty||c.props.initialValue!==void 0)return!0;var w=c.props.fieldContext,C=w.getInternalHooks(hu),P=C.getInitialValue;return P(c.getNamePath())!==void 0}),ke(gn(c),"getErrors",function(){return c.errors}),ke(gn(c),"getWarnings",function(){return c.warnings}),ke(gn(c),"isListField",function(){return c.props.isListField}),ke(gn(c),"isList",function(){return c.props.isList}),ke(gn(c),"isPreserve",function(){return c.props.preserve}),ke(gn(c),"getMeta",function(){c.prevValidating=c.isFieldValidating();var w={touched:c.isFieldTouched(),validating:c.prevValidating,errors:c.errors,warnings:c.warnings,name:c.getNamePath(),validated:c.validatePromise===null};return w}),ke(gn(c),"getOnlyChild",function(w){if(typeof w=="function"){var C=c.getMeta();return st(st({},c.getOnlyChild(w(c.getControlled(),C,c.props.fieldContext))),{},{isFunction:!0})}var P=hl(w);return P.length!==1||!T.isValidElement(P[0])?{child:P,isFunction:!1}:{child:P[0],isFunction:!1}}),ke(gn(c),"getValue",function(w){var C=c.props.fieldContext.getFieldsValue,P=c.getNamePath();return us(w||C(!0),P)}),ke(gn(c),"getControlled",function(){var w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},C=c.props,P=C.trigger,A=C.validateTrigger,D=C.getValueFromEvent,N=C.normalize,F=C.valuePropName,U=C.getValueProps,Z=C.fieldContext,j=A!==void 0?A:Z.validateTrigger,B=c.getNamePath(),H=Z.getInternalHooks,Y=Z.getFieldsValue,ne=H(hu),re=ne.dispatch,Q=c.getValue(),te=U||function(oe){return ke({},F,oe)},ee=w[P],ve=st(st({},w),te(Q));ve[P]=function(){c.touched=!0,c.dirty=!0,c.triggerMetaEvent();for(var oe,fe=arguments.length,Te=new Array(fe),Fe=0;Fe<fe;Fe++)Te[Fe]=arguments[Fe];D?oe=D.apply(void 0,Te):oe=rU.apply(void 0,[F].concat(Te)),N&&(oe=N(oe,Q,Y(!0))),re({type:"updateValue",namePath:B,value:oe}),ee&&ee.apply(void 0,Te)};var he=ew(j||[]);return he.forEach(function(oe){var fe=ve[oe];ve[oe]=function(){fe&&fe.apply(void 0,arguments);var Te=c.props.rules;Te&&Te.length&&re({type:"validateField",namePath:B,triggerName:oe})}}),ve}),a.fieldContext){var f=a.fieldContext.getInternalHooks,y=f(hu),l=y.initEntityValue;l(gn(c))}return c}return fa(r,[{key:"componentDidMount",value:function(){var c=this.props,f=c.shouldUpdate,y=c.fieldContext;if(this.mounted=!0,y){var l=y.getInternalHooks,w=l(hu),C=w.registerField;this.cancelRegisterFunc=C(this)}f===!0&&this.reRender()}},{key:"componentWillUnmount",value:function(){this.cancelRegister(),this.triggerMetaEvent(!0),this.mounted=!1}},{key:"reRender",value:function(){this.mounted&&this.forceUpdate()}},{key:"render",value:function(){var c=this.state.resetCount,f=this.props.children,y=this.getOnlyChild(f),l=y.child,w=y.isFunction,C;return w?C=l:T.isValidElement(l)?C=T.cloneElement(l,this.getControlled(l.props)):(Uo(!l,"`children` of Field is not validate ReactElement."),C=l),T.createElement(T.Fragment,{key:c},C)}}]),r}(T.Component);ke(HS,"contextType",xh);ke(HS,"defaultProps",{trigger:"onChange",valuePropName:"value"});function bz(e){var t=e.name,r=Vr(e,iU),a=T.useContext(xh),c=T.useContext(zy),f=t!==void 0?bi(t):void 0,y="keep";return r.isListField||(y="_".concat((f||[]).join("_"))),T.createElement(HS,Cn({key:y,name:f,isListField:!!c},r,{fieldContext:a}))}function oU(e){var t=e.name,r=e.initialValue,a=e.children,c=e.rules,f=e.validateTrigger,y=e.isListField,l=T.useContext(xh),w=T.useContext(zy),C=T.useRef({keys:[],id:0}),P=C.current,A=T.useMemo(function(){var U=bi(l.prefixName)||[];return[].concat(_n(U),_n(bi(t)))},[l.prefixName,t]),D=T.useMemo(function(){return st(st({},l),{},{prefixName:A})},[l,A]),N=T.useMemo(function(){return{getKey:function(Z){var j=A.length,B=Z[j];return[P.keys[B],Z.slice(j+1)]}}},[A]);if(typeof a!="function")return Uo(!1,"Form.List only accepts function as children."),null;var F=function(Z,j,B){var H=B.source;return H==="internal"?!1:Z!==j};return T.createElement(zy.Provider,{value:N},T.createElement(xh.Provider,{value:D},T.createElement(bz,{name:[],shouldUpdate:F,rules:c,validateTrigger:f,initialValue:r,isList:!0,isListField:y??!!w},function(U,Z){var j=U.value,B=j===void 0?[]:j,H=U.onChange,Y=l.getFieldValue,ne=function(){var ee=Y(A||[]);return ee||[]},re={add:function(ee,ve){var he=ne();ve>=0&&ve<=he.length?(P.keys=[].concat(_n(P.keys.slice(0,ve)),[P.id],_n(P.keys.slice(ve))),H([].concat(_n(he.slice(0,ve)),[ee],_n(he.slice(ve))))):(P.keys=[].concat(_n(P.keys),[P.id]),H([].concat(_n(he),[ee]))),P.id+=1},remove:function(ee){var ve=ne(),he=new Set(Array.isArray(ee)?ee:[ee]);he.size<=0||(P.keys=P.keys.filter(function(oe,fe){return!he.has(fe)}),H(ve.filter(function(oe,fe){return!he.has(fe)})))},move:function(ee,ve){if(ee!==ve){var he=ne();ee<0||ee>=he.length||ve<0||ve>=he.length||(P.keys=lM(P.keys,ee,ve),H(lM(he,ee,ve)))}}},Q=B||[];return Array.isArray(Q)||(Q=[]),a(Q.map(function(te,ee){var ve=P.keys[ee];return ve===void 0&&(P.keys[ee]=P.id,ve=P.keys[ee],P.id+=1),{name:ee,key:ve,isListField:!0}}),re,Z)})))}function aU(e){var t=!1,r=e.length,a=[];return e.length?new Promise(function(c,f){e.forEach(function(y,l){y.catch(function(w){return t=!0,w}).then(function(w){r-=1,a[l]=w,!(r>0)&&(t&&f(a),c(a))})})}):Promise.resolve([])}var wz="__@field_split__";function f1(e){return e.map(function(t){return"".concat(Kn(t),":").concat(t)}).join(wz)}var Md=function(){function e(){ha(this,e),ke(this,"kvs",new Map)}return fa(e,[{key:"set",value:function(r,a){this.kvs.set(f1(r),a)}},{key:"get",value:function(r){return this.kvs.get(f1(r))}},{key:"update",value:function(r,a){var c=this.get(r),f=a(c);f?this.set(r,f):this.delete(r)}},{key:"delete",value:function(r){this.kvs.delete(f1(r))}},{key:"map",value:function(r){return _n(this.kvs.entries()).map(function(a){var c=$t(a,2),f=c[0],y=c[1],l=f.split(wz);return r({key:l.map(function(w){var C=w.match(/^([^:]*):(.*)$/),P=$t(C,3),A=P[1],D=P[2];return A==="number"?Number(D):D}),value:y})})}},{key:"toJSON",value:function(){var r={};return this.map(function(a){var c=a.key,f=a.value;return r[c.join(".")]=f,null}),r}}]),e}(),sU=["name"],lU=fa(function e(t){var r=this;ha(this,e),ke(this,"formHooked",!1),ke(this,"forceRootUpdate",void 0),ke(this,"subscribable",!0),ke(this,"store",{}),ke(this,"fieldEntities",[]),ke(this,"initialValues",{}),ke(this,"callbacks",{}),ke(this,"validateMessages",null),ke(this,"preserve",null),ke(this,"lastValidatePromise",null),ke(this,"getForm",function(){return{getFieldValue:r.getFieldValue,getFieldsValue:r.getFieldsValue,getFieldError:r.getFieldError,getFieldWarning:r.getFieldWarning,getFieldsError:r.getFieldsError,isFieldsTouched:r.isFieldsTouched,isFieldTouched:r.isFieldTouched,isFieldValidating:r.isFieldValidating,isFieldsValidating:r.isFieldsValidating,resetFields:r.resetFields,setFields:r.setFields,setFieldValue:r.setFieldValue,setFieldsValue:r.setFieldsValue,validateFields:r.validateFields,submit:r.submit,_init:!0,getInternalHooks:r.getInternalHooks}}),ke(this,"getInternalHooks",function(a){return a===hu?(r.formHooked=!0,{dispatch:r.dispatch,initEntityValue:r.initEntityValue,registerField:r.registerField,useSubscribe:r.useSubscribe,setInitialValues:r.setInitialValues,destroyForm:r.destroyForm,setCallbacks:r.setCallbacks,setValidateMessages:r.setValidateMessages,getFields:r.getFields,setPreserve:r.setPreserve,getInitialValue:r.getInitialValue,registerWatch:r.registerWatch}):(Uo(!1,"`getInternalHooks` is internal usage. Should not call directly."),null)}),ke(this,"useSubscribe",function(a){r.subscribable=a}),ke(this,"prevWithoutPreserves",null),ke(this,"setInitialValues",function(a,c){if(r.initialValues=a||{},c){var f,y=Kd(a,r.store);(f=r.prevWithoutPreserves)===null||f===void 0||f.map(function(l){var w=l.key;y=as(y,w,us(a,w))}),r.prevWithoutPreserves=null,r.updateStore(y)}}),ke(this,"destroyForm",function(){var a=new Md;r.getFieldEntities(!0).forEach(function(c){r.isMergedPreserve(c.isPreserve())||a.set(c.getNamePath(),!0)}),r.prevWithoutPreserves=a}),ke(this,"getInitialValue",function(a){var c=us(r.initialValues,a);return a.length?Kd(c):c}),ke(this,"setCallbacks",function(a){r.callbacks=a}),ke(this,"setValidateMessages",function(a){r.validateMessages=a}),ke(this,"setPreserve",function(a){r.preserve=a}),ke(this,"watchList",[]),ke(this,"registerWatch",function(a){return r.watchList.push(a),function(){r.watchList=r.watchList.filter(function(c){return c!==a})}}),ke(this,"notifyWatch",function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];if(r.watchList.length){var c=r.getFieldsValue(),f=r.getFieldsValue(!0);r.watchList.forEach(function(y){y(c,f,a)})}}),ke(this,"timeoutId",null),ke(this,"warningUnhooked",function(){}),ke(this,"updateStore",function(a){r.store=a}),ke(this,"getFieldEntities",function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return a?r.fieldEntities.filter(function(c){return c.getNamePath().length}):r.fieldEntities}),ke(this,"getFieldsMap",function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,c=new Md;return r.getFieldEntities(a).forEach(function(f){var y=f.getNamePath();c.set(y,f)}),c}),ke(this,"getFieldEntitiesForNamePathList",function(a){if(!a)return r.getFieldEntities(!0);var c=r.getFieldsMap(!0);return a.map(function(f){var y=bi(f);return c.get(y)||{INVALIDATE_NAME_PATH:bi(f)}})}),ke(this,"getFieldsValue",function(a,c){r.warningUnhooked();var f,y,l;if(a===!0||Array.isArray(a)?(f=a,y=c):a&&Kn(a)==="object"&&(l=a.strict,y=a.filter),f===!0&&!y)return r.store;var w=r.getFieldEntitiesForNamePathList(Array.isArray(f)?f:null),C=[];return w.forEach(function(P){var A,D,N="INVALIDATE_NAME_PATH"in P?P.INVALIDATE_NAME_PATH:P.getNamePath();if(l){var F,U;if((F=(U=P).isList)!==null&&F!==void 0&&F.call(U))return}else if(!f&&(A=(D=P).isListField)!==null&&A!==void 0&&A.call(D))return;if(!y)C.push(N);else{var Z="getMeta"in P?P.getMeta():null;y(Z)&&C.push(N)}}),sM(r.store,C.map(bi))}),ke(this,"getFieldValue",function(a){r.warningUnhooked();var c=bi(a);return us(r.store,c)}),ke(this,"getFieldsError",function(a){r.warningUnhooked();var c=r.getFieldEntitiesForNamePathList(a);return c.map(function(f,y){return f&&!("INVALIDATE_NAME_PATH"in f)?{name:f.getNamePath(),errors:f.getErrors(),warnings:f.getWarnings()}:{name:bi(a[y]),errors:[],warnings:[]}})}),ke(this,"getFieldError",function(a){r.warningUnhooked();var c=bi(a),f=r.getFieldsError([c])[0];return f.errors}),ke(this,"getFieldWarning",function(a){r.warningUnhooked();var c=bi(a),f=r.getFieldsError([c])[0];return f.warnings}),ke(this,"isFieldsTouched",function(){r.warningUnhooked();for(var a=arguments.length,c=new Array(a),f=0;f<a;f++)c[f]=arguments[f];var y=c[0],l=c[1],w,C=!1;c.length===0?w=null:c.length===1?Array.isArray(y)?(w=y.map(bi),C=!1):(w=null,C=y):(w=y.map(bi),C=l);var P=r.getFieldEntities(!0),A=function(Z){return Z.isFieldTouched()};if(!w)return C?P.every(A):P.some(A);var D=new Md;w.forEach(function(U){D.set(U,[])}),P.forEach(function(U){var Z=U.getNamePath();w.forEach(function(j){j.every(function(B,H){return Z[H]===B})&&D.update(j,function(B){return[].concat(_n(B),[U])})})});var N=function(Z){return Z.some(A)},F=D.map(function(U){var Z=U.value;return Z});return C?F.every(N):F.some(N)}),ke(this,"isFieldTouched",function(a){return r.warningUnhooked(),r.isFieldsTouched([a])}),ke(this,"isFieldsValidating",function(a){r.warningUnhooked();var c=r.getFieldEntities();if(!a)return c.some(function(y){return y.isFieldValidating()});var f=a.map(bi);return c.some(function(y){var l=y.getNamePath();return ah(f,l)&&y.isFieldValidating()})}),ke(this,"isFieldValidating",function(a){return r.warningUnhooked(),r.isFieldsValidating([a])}),ke(this,"resetWithFieldInitialValue",function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},c=new Md,f=r.getFieldEntities(!0);f.forEach(function(w){var C=w.props.initialValue,P=w.getNamePath();if(C!==void 0){var A=c.get(P)||new Set;A.add({entity:w,value:C}),c.set(P,A)}});var y=function(C){C.forEach(function(P){var A=P.props.initialValue;if(A!==void 0){var D=P.getNamePath(),N=r.getInitialValue(D);if(N!==void 0)Uo(!1,"Form already set 'initialValues' with path '".concat(D.join("."),"'. Field can not overwrite it."));else{var F=c.get(D);if(F&&F.size>1)Uo(!1,"Multiple Field with path '".concat(D.join("."),"' set 'initialValue'. Can not decide which one to pick."));else if(F){var U=r.getFieldValue(D),Z=P.isListField();!Z&&(!a.skipExist||U===void 0)&&r.updateStore(as(r.store,D,_n(F)[0].value))}}}})},l;a.entities?l=a.entities:a.namePathList?(l=[],a.namePathList.forEach(function(w){var C=c.get(w);if(C){var P;(P=l).push.apply(P,_n(_n(C).map(function(A){return A.entity})))}})):l=f,y(l)}),ke(this,"resetFields",function(a){r.warningUnhooked();var c=r.store;if(!a){r.updateStore(Kd(r.initialValues)),r.resetWithFieldInitialValue(),r.notifyObservers(c,null,{type:"reset"}),r.notifyWatch();return}var f=a.map(bi);f.forEach(function(y){var l=r.getInitialValue(y);r.updateStore(as(r.store,y,l))}),r.resetWithFieldInitialValue({namePathList:f}),r.notifyObservers(c,f,{type:"reset"}),r.notifyWatch(f)}),ke(this,"setFields",function(a){r.warningUnhooked();var c=r.store,f=[];a.forEach(function(y){var l=y.name,w=Vr(y,sU),C=bi(l);f.push(C),"value"in w&&r.updateStore(as(r.store,C,w.value)),r.notifyObservers(c,[C],{type:"setField",data:y})}),r.notifyWatch(f)}),ke(this,"getFields",function(){var a=r.getFieldEntities(!0),c=a.map(function(f){var y=f.getNamePath(),l=f.getMeta(),w=st(st({},l),{},{name:y,value:r.getFieldValue(y)});return Object.defineProperty(w,"originRCField",{value:!0}),w});return c}),ke(this,"initEntityValue",function(a){var c=a.props.initialValue;if(c!==void 0){var f=a.getNamePath(),y=us(r.store,f);y===void 0&&r.updateStore(as(r.store,f,c))}}),ke(this,"isMergedPreserve",function(a){var c=a!==void 0?a:r.preserve;return c??!0}),ke(this,"registerField",function(a){r.fieldEntities.push(a);var c=a.getNamePath();if(r.notifyWatch([c]),a.props.initialValue!==void 0){var f=r.store;r.resetWithFieldInitialValue({entities:[a],skipExist:!0}),r.notifyObservers(f,[a.getNamePath()],{type:"valueUpdate",source:"internal"})}return function(y,l){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(r.fieldEntities=r.fieldEntities.filter(function(A){return A!==a}),!r.isMergedPreserve(l)&&(!y||w.length>1)){var C=y?void 0:r.getInitialValue(c);if(c.length&&r.getFieldValue(c)!==C&&r.fieldEntities.every(function(A){return!xz(A.getNamePath(),c)})){var P=r.store;r.updateStore(as(P,c,C,!0)),r.notifyObservers(P,[c],{type:"remove"}),r.triggerDependenciesUpdate(P,c)}}r.notifyWatch([c])}}),ke(this,"dispatch",function(a){switch(a.type){case"updateValue":{var c=a.namePath,f=a.value;r.updateValue(c,f);break}case"validateField":{var y=a.namePath,l=a.triggerName;r.validateFields([y],{triggerName:l});break}}}),ke(this,"notifyObservers",function(a,c,f){if(r.subscribable){var y=st(st({},f),{},{store:r.getFieldsValue(!0)});r.getFieldEntities().forEach(function(l){var w=l.onStoreChange;w(a,c,y)})}else r.forceRootUpdate()}),ke(this,"triggerDependenciesUpdate",function(a,c){var f=r.getDependencyChildrenFields(c);return f.length&&r.validateFields(f),r.notifyObservers(a,f,{type:"dependenciesUpdate",relatedFields:[c].concat(_n(f))}),f}),ke(this,"updateValue",function(a,c){var f=bi(a),y=r.store;r.updateStore(as(r.store,f,c)),r.notifyObservers(y,[f],{type:"valueUpdate",source:"internal"}),r.notifyWatch([f]);var l=r.triggerDependenciesUpdate(y,f),w=r.callbacks.onValuesChange;if(w){var C=sM(r.store,[f]);w(C,r.getFieldsValue())}r.triggerOnFieldsChange([f].concat(_n(l)))}),ke(this,"setFieldsValue",function(a){r.warningUnhooked();var c=r.store;if(a){var f=Kd(r.store,a);r.updateStore(f)}r.notifyObservers(c,null,{type:"valueUpdate",source:"external"}),r.notifyWatch()}),ke(this,"setFieldValue",function(a,c){r.setFields([{name:a,value:c}])}),ke(this,"getDependencyChildrenFields",function(a){var c=new Set,f=[],y=new Md;r.getFieldEntities().forEach(function(w){var C=w.props.dependencies;(C||[]).forEach(function(P){var A=bi(P);y.update(A,function(){var D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Set;return D.add(w),D})})});var l=function w(C){var P=y.get(C)||new Set;P.forEach(function(A){if(!c.has(A)){c.add(A);var D=A.getNamePath();A.isFieldDirty()&&D.length&&(f.push(D),w(D))}})};return l(a),f}),ke(this,"triggerOnFieldsChange",function(a,c){var f=r.callbacks.onFieldsChange;if(f){var y=r.getFields();if(c){var l=new Md;c.forEach(function(C){var P=C.name,A=C.errors;l.set(P,A)}),y.forEach(function(C){C.errors=l.get(C.name)||C.errors})}var w=y.filter(function(C){var P=C.name;return ah(a,P)});w.length&&f(w,y)}}),ke(this,"validateFields",function(a,c){r.warningUnhooked();var f,y;Array.isArray(a)||typeof a=="string"||typeof c=="string"?(f=a,y=c):y=a;var l=!!f,w=l?f.map(bi):[],C=[],P=String(Date.now()),A=new Set,D=y||{},N=D.recursive,F=D.dirty;r.getFieldEntities(!0).forEach(function(B){if(l||w.push(B.getNamePath()),!(!B.props.rules||!B.props.rules.length)&&!(F&&!B.isFieldDirty())){var H=B.getNamePath();if(A.add(H.join(P)),!l||ah(w,H,N)){var Y=B.validateRules(st({validateMessages:st(st({},_z),r.validateMessages)},y));C.push(Y.then(function(){return{name:H,errors:[],warnings:[]}}).catch(function(ne){var re,Q=[],te=[];return(re=ne.forEach)===null||re===void 0||re.call(ne,function(ee){var ve=ee.rule.warningOnly,he=ee.errors;ve?te.push.apply(te,_n(he)):Q.push.apply(Q,_n(he))}),Q.length?Promise.reject({name:H,errors:Q,warnings:te}):{name:H,errors:Q,warnings:te}}))}}});var U=aU(C);r.lastValidatePromise=U,U.catch(function(B){return B}).then(function(B){var H=B.map(function(Y){var ne=Y.name;return ne});r.notifyObservers(r.store,H,{type:"validateFinish"}),r.triggerOnFieldsChange(H,B)});var Z=U.then(function(){return r.lastValidatePromise===U?Promise.resolve(r.getFieldsValue(w)):Promise.reject([])}).catch(function(B){var H=B.filter(function(Y){return Y&&Y.errors.length});return Promise.reject({values:r.getFieldsValue(w),errorFields:H,outOfDate:r.lastValidatePromise!==U})});Z.catch(function(B){return B});var j=w.filter(function(B){return A.has(B.join(P))});return r.triggerOnFieldsChange(j),Z}),ke(this,"submit",function(){r.warningUnhooked(),r.validateFields().then(function(a){var c=r.callbacks.onFinish;if(c)try{c(a)}catch(f){console.error(f)}}).catch(function(a){var c=r.callbacks.onFinishFailed;c&&c(a)})}),this.forceRootUpdate=t});function Sz(e){var t=T.useRef(),r=T.useState({}),a=$t(r,2),c=a[1];if(!t.current)if(e)t.current=e;else{var f=function(){c({})},y=new lU(f);t.current=y.getForm()}return[t.current]}var uw=T.createContext({triggerFormChange:function(){},triggerFormFinish:function(){},registerForm:function(){},unregisterForm:function(){}}),cU=function(t){var r=t.validateMessages,a=t.onFormChange,c=t.onFormFinish,f=t.children,y=T.useContext(uw),l=T.useRef({});return T.createElement(uw.Provider,{value:st(st({},y),{},{validateMessages:st(st({},y.validateMessages),r),triggerFormChange:function(C,P){a&&a(C,{changedFields:P,forms:l.current}),y.triggerFormChange(C,P)},triggerFormFinish:function(C,P){c&&c(C,{values:P,forms:l.current}),y.triggerFormFinish(C,P)},registerForm:function(C,P){C&&(l.current=st(st({},l.current),{},ke({},C,P))),y.registerForm(C,P)},unregisterForm:function(C){var P=st({},l.current);delete P[C],l.current=P,y.unregisterForm(C)}})},f)},uU=["name","initialValues","fields","form","preserve","children","component","validateMessages","validateTrigger","onValuesChange","onFieldsChange","onFinish","onFinishFailed"],dU=function(t,r){var a=t.name,c=t.initialValues,f=t.fields,y=t.form,l=t.preserve,w=t.children,C=t.component,P=C===void 0?"form":C,A=t.validateMessages,D=t.validateTrigger,N=D===void 0?"onChange":D,F=t.onValuesChange,U=t.onFieldsChange,Z=t.onFinish,j=t.onFinishFailed,B=Vr(t,uU),H=T.useContext(uw),Y=Sz(y),ne=$t(Y,1),re=ne[0],Q=re.getInternalHooks(hu),te=Q.useSubscribe,ee=Q.setInitialValues,ve=Q.setCallbacks,he=Q.setValidateMessages,oe=Q.setPreserve,fe=Q.destroyForm;T.useImperativeHandle(r,function(){return re}),T.useEffect(function(){return H.registerForm(a,re),function(){H.unregisterForm(a)}},[H,re,a]),he(st(st({},H.validateMessages),A)),ve({onValuesChange:F,onFieldsChange:function(nt){if(H.triggerFormChange(a,nt),U){for(var yt=arguments.length,Ot=new Array(yt>1?yt-1:0),Mt=1;Mt<yt;Mt++)Ot[Mt-1]=arguments[Mt];U.apply(void 0,[nt].concat(Ot))}},onFinish:function(nt){H.triggerFormFinish(a,nt),Z&&Z(nt)},onFinishFailed:j}),oe(l);var Te=T.useRef(null);ee(c,!Te.current),Te.current||(Te.current=!0),T.useEffect(function(){return fe},[]);var Fe,$e=typeof w=="function";if($e){var je=re.getFieldsValue(!0);Fe=w(je,re)}else Fe=w;te(!$e);var pe=T.useRef();T.useEffect(function(){nU(pe.current||[],f||[])||re.setFields(f||[]),pe.current=f},[f,re]);var He=T.useMemo(function(){return st(st({},re),{},{validateTrigger:N})},[re,N]),Be=T.createElement(zy.Provider,{value:null},T.createElement(xh.Provider,{value:He},Fe));return P===!1?Be:T.createElement(P,Cn({},B,{onSubmit:function(nt){nt.preventDefault(),nt.stopPropagation(),re.submit()},onReset:function(nt){var yt;nt.preventDefault(),re.resetFields(),(yt=B.onReset)===null||yt===void 0||yt.call(B,nt)}}),Be)};function uM(e){try{return JSON.stringify(e)}catch{return Math.random()}}function hU(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var a=t[0],c=a===void 0?[]:a,f=t[1],y=f===void 0?{}:f,l=_8(y)?{form:y}:y,w=l.form,C=T.useState(),P=$t(C,2),A=P[0],D=P[1],N=T.useMemo(function(){return uM(A)},[A]),F=T.useRef(N);F.current=N;var U=T.useContext(xh),Z=w||U,j=Z&&Z._init,B=bi(c),H=T.useRef(B);return H.current=B,T.useEffect(function(){if(j){var Y=Z.getFieldsValue,ne=Z.getInternalHooks,re=ne(hu),Q=re.registerWatch,te=Q(function(ve,he){var oe=us(l.preserve?he:ve,H.current),fe=uM(oe);F.current!==fe&&(F.current=fe,D(oe))}),ee=us(l.preserve?Y(!0):Y(),H.current);return A!==ee&&D(ee),te}},[j]),A}var fU=T.forwardRef(dU),Sm=fU;Sm.FormProvider=cU;Sm.Field=bz;Sm.List=oU;Sm.useForm=Sz;Sm.useWatch=hU;const yc=T.createContext({}),dM=e=>{let{children:t,status:r,override:a}=e;const c=T.useContext(yc),f=T.useMemo(()=>{const y=Object.assign({},c);return a&&delete y.isFormItemInput,r&&(delete y.status,delete y.hasFeedback,delete y.feedbackIcon),y},[r,a,c]);return T.createElement(yc.Provider,{value:f},t)},pU=e=>({animationDuration:e,animationFillMode:"both"}),mU=e=>({animationDuration:e,animationFillMode:"both"}),GS=function(e,t,r,a){const f=(arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1)?"&":"";return{[`
      ${f}${e}-enter,
      ${f}${e}-appear
    `]:Object.assign(Object.assign({},pU(a)),{animationPlayState:"paused"}),[`${f}${e}-leave`]:Object.assign(Object.assign({},mU(a)),{animationPlayState:"paused"}),[`
      ${f}${e}-enter${e}-enter-active,
      ${f}${e}-appear${e}-appear-active
    `]:{animationName:t,animationPlayState:"running"},[`${f}${e}-leave${e}-leave-active`]:{animationName:r,animationPlayState:"running",pointerEvents:"none"}}},gU=new Cr("antMoveDownIn",{"0%":{transform:"translate3d(0, 100%, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),vU=new Cr("antMoveDownOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(0, 100%, 0)",transformOrigin:"0 0",opacity:0}}),yU=new Cr("antMoveLeftIn",{"0%":{transform:"translate3d(-100%, 0, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),_U=new Cr("antMoveLeftOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(-100%, 0, 0)",transformOrigin:"0 0",opacity:0}}),xU=new Cr("antMoveRightIn",{"0%":{transform:"translate3d(100%, 0, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),bU=new Cr("antMoveRightOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(100%, 0, 0)",transformOrigin:"0 0",opacity:0}}),wU=new Cr("antMoveUpIn",{"0%":{transform:"translate3d(0, -100%, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),SU=new Cr("antMoveUpOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(0, -100%, 0)",transformOrigin:"0 0",opacity:0}}),EU={"move-up":{inKeyframes:wU,outKeyframes:SU},"move-down":{inKeyframes:gU,outKeyframes:vU},"move-left":{inKeyframes:yU,outKeyframes:_U},"move-right":{inKeyframes:xU,outKeyframes:bU}},hM=(e,t)=>{const{antCls:r}=e,a=`${r}-${t}`,{inKeyframes:c,outKeyframes:f}=EU[t];return[GS(a,c,f,e.motionDurationMid),{[`
        ${a}-enter,
        ${a}-appear
      `]:{opacity:0,animationTimingFunction:e.motionEaseOutCirc},[`${a}-leave`]:{animationTimingFunction:e.motionEaseInOutCirc}}]},Ez=new Cr("antSlideUpIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1}}),Cz=new Cr("antSlideUpOut",{"0%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0}}),Tz=new Cr("antSlideDownIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1}}),Iz=new Cr("antSlideDownOut",{"0%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0}}),CU=new Cr("antSlideLeftIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1}}),TU=new Cr("antSlideLeftOut",{"0%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0}}),IU=new Cr("antSlideRightIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1}}),MU=new Cr("antSlideRightOut",{"0%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0}}),PU={"slide-up":{inKeyframes:Ez,outKeyframes:Cz},"slide-down":{inKeyframes:Tz,outKeyframes:Iz},"slide-left":{inKeyframes:CU,outKeyframes:TU},"slide-right":{inKeyframes:IU,outKeyframes:MU}},fM=(e,t)=>{const{antCls:r}=e,a=`${r}-${t}`,{inKeyframes:c,outKeyframes:f}=PU[t];return[GS(a,c,f,e.motionDurationMid),{[`
      ${a}-enter,
      ${a}-appear
    `]:{transform:"scale(0)",transformOrigin:"0% 0%",opacity:0,animationTimingFunction:e.motionEaseOutQuint,"&-prepare":{transform:"scale(1)"}},[`${a}-leave`]:{animationTimingFunction:e.motionEaseInQuint}}]},AU=new Cr("antZoomIn",{"0%":{transform:"scale(0.2)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),RU=new Cr("antZoomOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.2)",opacity:0}}),pM=new Cr("antZoomBigIn",{"0%":{transform:"scale(0.8)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),mM=new Cr("antZoomBigOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.8)",opacity:0}}),OU=new Cr("antZoomUpIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 0%"}}),zU=new Cr("antZoomUpOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 0%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0}}),DU=new Cr("antZoomLeftIn",{"0%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"0% 50%"}}),LU=new Cr("antZoomLeftOut",{"0%":{transform:"scale(1)",transformOrigin:"0% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0}}),kU=new Cr("antZoomRightIn",{"0%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"100% 50%"}}),$U=new Cr("antZoomRightOut",{"0%":{transform:"scale(1)",transformOrigin:"100% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0}}),FU=new Cr("antZoomDownIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 100%"}}),BU=new Cr("antZoomDownOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 100%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0}}),NU={zoom:{inKeyframes:AU,outKeyframes:RU},"zoom-big":{inKeyframes:pM,outKeyframes:mM},"zoom-big-fast":{inKeyframes:pM,outKeyframes:mM},"zoom-left":{inKeyframes:DU,outKeyframes:LU},"zoom-right":{inKeyframes:kU,outKeyframes:$U},"zoom-up":{inKeyframes:OU,outKeyframes:zU},"zoom-down":{inKeyframes:FU,outKeyframes:BU}},jU=(e,t)=>{const{antCls:r}=e,a=`${r}-${t}`,{inKeyframes:c,outKeyframes:f}=NU[t];return[GS(a,c,f,t==="zoom-big-fast"?e.motionDurationFast:e.motionDurationMid),{[`
        ${a}-enter,
        ${a}-appear
      `]:{transform:"scale(0)",opacity:0,animationTimingFunction:e.motionEaseOutCirc,"&-prepare":{transform:"none"}},[`${a}-leave`]:{animationTimingFunction:e.motionEaseInOutCirc}}]},Mz={Modal:0,Drawer:0,Popover:70,Popconfirm:70,Tooltip:70,Tour:70},UU={SelectLike:50,Dropdown:50,ColorPicker:30,DatePicker:50,Menu:50};function VU(e){return e in Mz}function Pz(e,t){const[,r]=Fs(),a=pt.useContext(vz),c=VU(e);let f=a??0;return c?f+=r.zIndexPopupBase+Mz[e]:f+=UU[e],[a===void 0?t:f,f]}function HU(e){return function(r){return T.createElement(HO,{theme:{token:{motion:!1,zIndexPopupBase:0}}},T.createElement(e,Object.assign({},r)))}}function GU(e,t,r,a){function c(f){const{prefixCls:y,style:l}=f,w=T.useRef(null),[C,P]=T.useState(0),[A,D]=T.useState(0),[N,F]=ms(!1,{value:f.open}),{getPrefixCls:U}=T.useContext(cr),Z=U(t||"select",y);T.useEffect(()=>{if(F(!0),typeof ResizeObserver<"u"){const B=new ResizeObserver(Y=>{const ne=Y[0].target;P(ne.offsetHeight+8),D(ne.offsetWidth)}),H=setInterval(()=>{var Y;const ne=r?`.${r(Z)}`:`.${Z}-dropdown`,re=(Y=w.current)===null||Y===void 0?void 0:Y.querySelector(ne);re&&(clearInterval(H),B.observe(re))},10);return()=>{clearInterval(H),B.disconnect()}}},[]);let j=Object.assign(Object.assign({},f),{style:Object.assign(Object.assign({},l),{margin:0}),open:N,visible:N,getPopupContainer:()=>w.current});return a&&(j=a(j)),T.createElement("div",{ref:w,style:{paddingBottom:C,position:"relative",minWidth:A}},T.createElement(e,Object.assign({},j)))}return HU(c)}const Az=function(){if(typeof navigator>"u"||typeof window>"u")return!1;var e=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(e==null?void 0:e.substr(0,4))};var T0=function(t){var r=t.className,a=t.customizeIcon,c=t.customizeIconProps,f=t.onMouseDown,y=t.onClick,l=t.children,w;return typeof a=="function"?w=a(c):w=a,T.createElement("span",{className:r,onMouseDown:function(P){P.preventDefault(),f&&f(P)},style:{userSelect:"none",WebkitUserSelect:"none"},unselectable:"on",onClick:y,"aria-hidden":!0},w!==void 0?w:T.createElement("span",{className:kt(r.split(/\s+/).map(function(C){return"".concat(C,"-icon")}))},l))};function WU(e,t,r,a,c){var f=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!1,y=arguments.length>6?arguments[6]:void 0,l=arguments.length>7?arguments[7]:void 0,w=pt.useMemo(function(){if(Kn(a)==="object")return a.clearIcon;if(c)return c},[a,c]),C=pt.useMemo(function(){return!!(!f&&a&&(r.length||y)&&!(l==="combobox"&&y===""))},[a,f,r.length,y,l]);return{allowClear:C,clearIcon:pt.createElement(T0,{className:"".concat(e,"-clear"),onMouseDown:t,customizeIcon:w},"×")}}var Rz=T.createContext(null);function qU(){return T.useContext(Rz)}function ZU(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:10,t=T.useState(!1),r=$t(t,2),a=r[0],c=r[1],f=T.useRef(null),y=function(){window.clearTimeout(f.current)};T.useEffect(function(){return y},[]);var l=function(C,P){y(),f.current=window.setTimeout(function(){c(C),P&&P()},e)};return[a,l,y]}function Oz(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:250,t=T.useRef(null),r=T.useRef(null);T.useEffect(function(){return function(){window.clearTimeout(r.current)}},[]);function a(c){(c||t.current===null)&&(t.current=c),window.clearTimeout(r.current),r.current=window.setTimeout(function(){t.current=null},e)}return[function(){return t.current},a]}function XU(e,t,r,a){var c=T.useRef(null);c.current={open:t,triggerOpen:r,customizedTrigger:a},T.useEffect(function(){function f(y){var l;if(!((l=c.current)!==null&&l!==void 0&&l.customizedTrigger)){var w=y.target;w.shadowRoot&&y.composed&&(w=y.composedPath()[0]||w),c.current.open&&e().filter(function(C){return C}).every(function(C){return!C.contains(w)&&C!==w})&&c.current.triggerOpen(!1)}}return window.addEventListener("mousedown",f),function(){return window.removeEventListener("mousedown",f)}},[])}var KU=["prefixCls","invalidate","item","renderItem","responsive","responsiveDisabled","registerSize","itemKey","className","style","children","display","order","component"],Pd=void 0;function YU(e,t){var r=e.prefixCls,a=e.invalidate,c=e.item,f=e.renderItem,y=e.responsive,l=e.responsiveDisabled,w=e.registerSize,C=e.itemKey,P=e.className,A=e.style,D=e.children,N=e.display,F=e.order,U=e.component,Z=U===void 0?"div":U,j=Vr(e,KU),B=y&&!N;function H(te){w(C,te)}T.useEffect(function(){return function(){H(null)}},[]);var Y=f&&c!==Pd?f(c):D,ne;a||(ne={opacity:B?0:1,height:B?0:Pd,overflowY:B?"hidden":Pd,order:y?F:Pd,pointerEvents:B?"none":Pd,position:B?"absolute":Pd});var re={};B&&(re["aria-hidden"]=!0);var Q=T.createElement(Z,Cn({className:kt(!a&&r,P),style:st(st({},ne),A)},re,j,{ref:t}),Y);return y&&(Q=T.createElement(xl,{onResize:function(ee){var ve=ee.offsetWidth;H(ve)},disabled:l},Q)),Q}var $p=T.forwardRef(YU);$p.displayName="Item";function JU(e){if(typeof MessageChannel>"u")yi(e);else{var t=new MessageChannel;t.port1.onmessage=function(){return e()},t.port2.postMessage(void 0)}}function QU(){var e=T.useRef(null),t=function(a){e.current||(e.current=[],JU(function(){vc.unstable_batchedUpdates(function(){e.current.forEach(function(c){c()}),e.current=null})})),e.current.push(a)};return t}function dp(e,t){var r=T.useState(t),a=$t(r,2),c=a[0],f=a[1],y=ia(function(l){e(function(){f(l)})});return[c,y]}var Dy=pt.createContext(null),eV=["component"],tV=["className"],nV=["className"],rV=function(t,r){var a=T.useContext(Dy);if(!a){var c=t.component,f=c===void 0?"div":c,y=Vr(t,eV);return T.createElement(f,Cn({},y,{ref:r}))}var l=a.className,w=Vr(a,tV),C=t.className,P=Vr(t,nV);return T.createElement(Dy.Provider,{value:null},T.createElement($p,Cn({ref:r,className:kt(l,C)},w,P)))},zz=T.forwardRef(rV);zz.displayName="RawItem";var iV=["prefixCls","data","renderItem","renderRawItem","itemKey","itemWidth","ssr","style","className","maxCount","renderRest","renderRawRest","suffix","component","itemComponent","onVisibleChange"],Dz="responsive",Lz="invalidate";function oV(e){return"+ ".concat(e.length," ...")}function aV(e,t){var r=e.prefixCls,a=r===void 0?"rc-overflow":r,c=e.data,f=c===void 0?[]:c,y=e.renderItem,l=e.renderRawItem,w=e.itemKey,C=e.itemWidth,P=C===void 0?10:C,A=e.ssr,D=e.style,N=e.className,F=e.maxCount,U=e.renderRest,Z=e.renderRawRest,j=e.suffix,B=e.component,H=B===void 0?"div":B,Y=e.itemComponent,ne=e.onVisibleChange,re=Vr(e,iV),Q=A==="full",te=QU(),ee=dp(te,null),ve=$t(ee,2),he=ve[0],oe=ve[1],fe=he||0,Te=dp(te,new Map),Fe=$t(Te,2),$e=Fe[0],je=Fe[1],pe=dp(te,0),He=$t(pe,2),Be=He[0],Ze=He[1],nt=dp(te,0),yt=$t(nt,2),Ot=yt[0],Mt=yt[1],Ft=dp(te,0),Nt=$t(Ft,2),Ct=Nt[0],ut=Nt[1],At=T.useState(null),dt=$t(At,2),Bt=dt[0],gt=dt[1],jt=T.useState(null),zt=$t(jt,2),an=zt[0],Kt=zt[1],Ut=T.useMemo(function(){return an===null&&Q?Number.MAX_SAFE_INTEGER:an||0},[an,he]),at=T.useState(!1),it=$t(at,2),Rt=it[0],bt=it[1],sn="".concat(a,"-item"),An=Math.max(Be,Ot),Mn=F===Dz,rn=f.length&&Mn,Vn=F===Lz,Nn=rn||typeof F=="number"&&f.length>F,zn=T.useMemo(function(){var we=f;return rn?he===null&&Q?we=f:we=f.slice(0,Math.min(f.length,fe/P)):typeof F=="number"&&(we=f.slice(0,F)),we},[f,P,he,F,rn]),vn=T.useMemo(function(){return rn?f.slice(Ut+1):f.slice(zn.length)},[f,zn,rn,Ut]),nn=T.useCallback(function(we,Le){var Ne;return typeof w=="function"?w(we):(Ne=w&&(we==null?void 0:we[w]))!==null&&Ne!==void 0?Ne:Le},[w]),Wn=T.useCallback(y||function(we){return we},[y]);function jn(we,Le,Ne){an===we&&(Le===void 0||Le===Bt)||(Kt(we),Ne||(bt(we<f.length-1),ne==null||ne(we)),Le!==void 0&&gt(Le))}function fr(we,Le){oe(Le.clientWidth)}function or(we,Le){je(function(Ne){var Je=new Map(Ne);return Le===null?Je.delete(we):Je.set(we,Le),Je})}function qn(we,Le){Mt(Le),Ze(Ot)}function Qn(we,Le){ut(Le)}function Rr(we){return $e.get(nn(zn[we],we))}Lr(function(){if(fe&&typeof An=="number"&&zn){var we=Ct,Le=zn.length,Ne=Le-1;if(!Le){jn(0,null);return}for(var Je=0;Je<Le;Je+=1){var Ge=Rr(Je);if(Q&&(Ge=Ge||0),Ge===void 0){jn(Je-1,void 0,!0);break}if(we+=Ge,Ne===0&&we<=fe||Je===Ne-1&&we+Rr(Ne)<=fe){jn(Ne,null);break}else if(we+An>fe){jn(Je-1,we-Ge-Ct+Ot);break}}j&&Rr(0)+Ct>fe&&gt(null)}},[fe,$e,Ot,Ct,nn,zn]);var _e=Rt&&!!vn.length,W={};Bt!==null&&rn&&(W={position:"absolute",left:Bt,top:0});var J={prefixCls:sn,responsive:rn,component:Y,invalidate:Vn},ue=l?function(we,Le){var Ne=nn(we,Le);return T.createElement(Dy.Provider,{key:Ne,value:st(st({},J),{},{order:Le,item:we,itemKey:Ne,registerSize:or,display:Le<=Ut})},l(we,Le))}:function(we,Le){var Ne=nn(we,Le);return T.createElement($p,Cn({},J,{order:Le,key:Ne,item:we,renderItem:Wn,itemKey:Ne,registerSize:or,display:Le<=Ut}))},Se,Ie={order:_e?Ut:Number.MAX_SAFE_INTEGER,className:"".concat(sn,"-rest"),registerSize:qn,display:_e};if(Z)Z&&(Se=T.createElement(Dy.Provider,{value:st(st({},J),Ie)},Z(vn)));else{var Me=U||oV;Se=T.createElement($p,Cn({},J,Ie),typeof Me=="function"?Me(vn):Me)}var De=T.createElement(H,Cn({className:kt(!Vn&&a,N),style:D,ref:t},re),zn.map(ue),Nn?Se:null,j&&T.createElement($p,Cn({},J,{responsive:Mn,responsiveDisabled:!rn,order:Ut,className:"".concat(sn,"-suffix"),registerSize:Qn,display:!0,style:W}),j));return Mn&&(De=T.createElement(xl,{onResize:fr,disabled:!rn},De)),De}var Em=T.forwardRef(aV);Em.displayName="Overflow";Em.Item=zz;Em.RESPONSIVE=Dz;Em.INVALIDATE=Lz;var sV=function(t,r){var a,c=t.prefixCls,f=t.id,y=t.inputElement,l=t.disabled,w=t.tabIndex,C=t.autoFocus,P=t.autoComplete,A=t.editable,D=t.activeDescendantId,N=t.value,F=t.maxLength,U=t.onKeyDown,Z=t.onMouseDown,j=t.onChange,B=t.onPaste,H=t.onCompositionStart,Y=t.onCompositionEnd,ne=t.open,re=t.attrs,Q=y||T.createElement("input",null),te=Q,ee=te.ref,ve=te.props,he=ve.onKeyDown,oe=ve.onChange,fe=ve.onMouseDown,Te=ve.onCompositionStart,Fe=ve.onCompositionEnd,$e=ve.style;return"maxLength"in Q.props,Q=T.cloneElement(Q,st(st(st({type:"search"},ve),{},{id:f,ref:gs(r,ee),disabled:l,tabIndex:w,autoComplete:P||"off",autoFocus:C,className:kt("".concat(c,"-selection-search-input"),(a=Q)===null||a===void 0||(a=a.props)===null||a===void 0?void 0:a.className),role:"combobox","aria-expanded":ne||!1,"aria-haspopup":"listbox","aria-owns":"".concat(f,"_list"),"aria-autocomplete":"list","aria-controls":"".concat(f,"_list"),"aria-activedescendant":ne?D:void 0},re),{},{value:A?N:"",maxLength:F,readOnly:!A,unselectable:A?null:"on",style:st(st({},$e),{},{opacity:A?null:0}),onKeyDown:function(pe){U(pe),he&&he(pe)},onMouseDown:function(pe){Z(pe),fe&&fe(pe)},onChange:function(pe){j(pe),oe&&oe(pe)},onCompositionStart:function(pe){H(pe),Te&&Te(pe)},onCompositionEnd:function(pe){Y(pe),Fe&&Fe(pe)},onPaste:B})),Q},WS=T.forwardRef(sV);WS.displayName="Input";function kz(e){return Array.isArray(e)?e:e!==void 0?[e]:[]}var lV=typeof window<"u"&&window.document&&window.document.documentElement,cV=lV;function uV(e){return e!=null}function dV(e){return!e&&e!==0}function gM(e){return["string","number"].includes(Kn(e))}function $z(e){var t=void 0;return e&&(gM(e.title)?t=e.title.toString():gM(e.label)&&(t=e.label.toString())),t}function hV(e,t){cV?T.useLayoutEffect(e,t):T.useEffect(e,t)}function fV(e){var t;return(t=e.key)!==null&&t!==void 0?t:e.value}var vM=function(t){t.preventDefault(),t.stopPropagation()},pV=function(t){var r=t.id,a=t.prefixCls,c=t.values,f=t.open,y=t.searchValue,l=t.autoClearSearchValue,w=t.inputRef,C=t.placeholder,P=t.disabled,A=t.mode,D=t.showSearch,N=t.autoFocus,F=t.autoComplete,U=t.activeDescendantId,Z=t.tabIndex,j=t.removeIcon,B=t.maxTagCount,H=t.maxTagTextLength,Y=t.maxTagPlaceholder,ne=Y===void 0?function(gt){return"+ ".concat(gt.length," ...")}:Y,re=t.tagRender,Q=t.onToggleOpen,te=t.onRemove,ee=t.onInputChange,ve=t.onInputPaste,he=t.onInputKeyDown,oe=t.onInputMouseDown,fe=t.onInputCompositionStart,Te=t.onInputCompositionEnd,Fe=T.useRef(null),$e=T.useState(0),je=$t($e,2),pe=je[0],He=je[1],Be=T.useState(!1),Ze=$t(Be,2),nt=Ze[0],yt=Ze[1],Ot="".concat(a,"-selection"),Mt=f||A==="multiple"&&l===!1||A==="tags"?y:"",Ft=A==="tags"||A==="multiple"&&l===!1||D&&(f||nt);hV(function(){He(Fe.current.scrollWidth)},[Mt]);function Nt(gt,jt,zt,an,Kt){return T.createElement("span",{className:kt("".concat(Ot,"-item"),ke({},"".concat(Ot,"-item-disabled"),zt)),title:$z(gt)},T.createElement("span",{className:"".concat(Ot,"-item-content")},jt),an&&T.createElement(T0,{className:"".concat(Ot,"-item-remove"),onMouseDown:vM,onClick:Kt,customizeIcon:j},"×"))}function Ct(gt,jt,zt,an,Kt){var Ut=function(it){vM(it),Q(!f)};return T.createElement("span",{onMouseDown:Ut},re({label:jt,value:gt,disabled:zt,closable:an,onClose:Kt}))}function ut(gt){var jt=gt.disabled,zt=gt.label,an=gt.value,Kt=!P&&!jt,Ut=zt;if(typeof H=="number"&&(typeof zt=="string"||typeof zt=="number")){var at=String(Ut);at.length>H&&(Ut="".concat(at.slice(0,H),"..."))}var it=function(bt){bt&&bt.stopPropagation(),te(gt)};return typeof re=="function"?Ct(an,Ut,jt,Kt,it):Nt(gt,Ut,jt,Kt,it)}function At(gt){var jt=typeof ne=="function"?ne(gt):ne;return Nt({title:jt},jt,!1)}var dt=T.createElement("div",{className:"".concat(Ot,"-search"),style:{width:pe},onFocus:function(){yt(!0)},onBlur:function(){yt(!1)}},T.createElement(WS,{ref:w,open:f,prefixCls:a,id:r,inputElement:null,disabled:P,autoFocus:N,autoComplete:F,editable:Ft,activeDescendantId:U,value:Mt,onKeyDown:he,onMouseDown:oe,onChange:ee,onPaste:ve,onCompositionStart:fe,onCompositionEnd:Te,tabIndex:Z,attrs:_h(t,!0)}),T.createElement("span",{ref:Fe,className:"".concat(Ot,"-search-mirror"),"aria-hidden":!0},Mt," ")),Bt=T.createElement(Em,{prefixCls:"".concat(Ot,"-overflow"),data:c,renderItem:ut,renderRest:At,suffix:dt,itemKey:fV,maxCount:B});return T.createElement(T.Fragment,null,Bt,!c.length&&!Mt&&T.createElement("span",{className:"".concat(Ot,"-placeholder")},C))},mV=function(t){var r=t.inputElement,a=t.prefixCls,c=t.id,f=t.inputRef,y=t.disabled,l=t.autoFocus,w=t.autoComplete,C=t.activeDescendantId,P=t.mode,A=t.open,D=t.values,N=t.placeholder,F=t.tabIndex,U=t.showSearch,Z=t.searchValue,j=t.activeValue,B=t.maxLength,H=t.onInputKeyDown,Y=t.onInputMouseDown,ne=t.onInputChange,re=t.onInputPaste,Q=t.onInputCompositionStart,te=t.onInputCompositionEnd,ee=t.title,ve=T.useState(!1),he=$t(ve,2),oe=he[0],fe=he[1],Te=P==="combobox",Fe=Te||U,$e=D[0],je=Z||"";Te&&j&&!oe&&(je=j),T.useEffect(function(){Te&&fe(!1)},[Te,j]);var pe=P!=="combobox"&&!A&&!U?!1:!!je,He=ee===void 0?$z($e):ee,Be=function(){if($e)return null;var nt=pe?{visibility:"hidden"}:void 0;return T.createElement("span",{className:"".concat(a,"-selection-placeholder"),style:nt},N)};return T.createElement(T.Fragment,null,T.createElement("span",{className:"".concat(a,"-selection-search")},T.createElement(WS,{ref:f,prefixCls:a,id:c,open:A,inputElement:r,disabled:y,autoFocus:l,autoComplete:w,editable:Fe,activeDescendantId:C,value:je,onKeyDown:H,onMouseDown:Y,onChange:function(nt){fe(!0),ne(nt)},onPaste:re,onCompositionStart:Q,onCompositionEnd:te,tabIndex:F,attrs:_h(t,!0),maxLength:Te?B:void 0})),!Te&&$e?T.createElement("span",{className:"".concat(a,"-selection-item"),title:He,style:pe?{visibility:"hidden"}:void 0},$e.label):null,Be())};function gV(e){return![Vt.ESC,Vt.SHIFT,Vt.BACKSPACE,Vt.TAB,Vt.WIN_KEY,Vt.ALT,Vt.META,Vt.WIN_KEY_RIGHT,Vt.CTRL,Vt.SEMICOLON,Vt.EQUALS,Vt.CAPS_LOCK,Vt.CONTEXT_MENU,Vt.F1,Vt.F2,Vt.F3,Vt.F4,Vt.F5,Vt.F6,Vt.F7,Vt.F8,Vt.F9,Vt.F10,Vt.F11,Vt.F12].includes(e)}var vV=function(t,r){var a=T.useRef(null),c=T.useRef(!1),f=t.prefixCls,y=t.open,l=t.mode,w=t.showSearch,C=t.tokenWithEnter,P=t.autoClearSearchValue,A=t.onSearch,D=t.onSearchSubmit,N=t.onToggleOpen,F=t.onInputKeyDown,U=t.domRef;T.useImperativeHandle(r,function(){return{focus:function(){a.current.focus()},blur:function(){a.current.blur()}}});var Z=Oz(0),j=$t(Z,2),B=j[0],H=j[1],Y=function(je){var pe=je.which;(pe===Vt.UP||pe===Vt.DOWN)&&je.preventDefault(),F&&F(je),pe===Vt.ENTER&&l==="tags"&&!c.current&&!y&&(D==null||D(je.target.value)),gV(pe)&&N(!0)},ne=function(){H(!0)},re=T.useRef(null),Q=function(je){A(je,!0,c.current)!==!1&&N(!0)},te=function(){c.current=!0},ee=function(je){c.current=!1,l!=="combobox"&&Q(je.target.value)},ve=function(je){var pe=je.target.value;if(C&&re.current&&/[\r\n]/.test(re.current)){var He=re.current.replace(/[\r\n]+$/,"").replace(/\r\n/g," ").replace(/[\r\n]/g," ");pe=pe.replace(He,re.current)}re.current=null,Q(pe)},he=function(je){var pe=je.clipboardData,He=pe.getData("text");re.current=He},oe=function(je){var pe=je.target;if(pe!==a.current){var He=document.body.style.msTouchAction!==void 0;He?setTimeout(function(){a.current.focus()}):a.current.focus()}},fe=function(je){var pe=B();je.target!==a.current&&!pe&&l!=="combobox"&&je.preventDefault(),(l!=="combobox"&&(!w||!pe)||!y)&&(y&&P!==!1&&A("",!0,!1),N())},Te={inputRef:a,onInputKeyDown:Y,onInputMouseDown:ne,onInputChange:ve,onInputPaste:he,onInputCompositionStart:te,onInputCompositionEnd:ee},Fe=l==="multiple"||l==="tags"?T.createElement(pV,Cn({},t,Te)):T.createElement(mV,Cn({},t,Te));return T.createElement("div",{ref:U,className:"".concat(f,"-selector"),onClick:oe,onMouseDown:fe},Fe)},Fz=T.forwardRef(vV);Fz.displayName="Selector";function um(e){"@babel/helpers - typeof";return um=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},um(e)}function yV(e,t){if(um(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(um(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _V(e){var t=yV(e,"string");return um(t)==="symbol"?t:String(t)}function xV(e,t,r){return t=_V(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),r.push.apply(r,a)}return r}function Eo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yM(Object(r),!0).forEach(function(a){xV(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yM(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function bV(e){if(Array.isArray(e))return e}function wV(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,c,f,y,l=[],w=!0,C=!1;try{if(f=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;w=!1}else for(;!(w=(a=f.call(r)).done)&&(l.push(a.value),l.length!==t);w=!0);}catch(P){C=!0,c=P}finally{try{if(!w&&r.return!=null&&(y=r.return(),Object(y)!==y))return}finally{if(C)throw c}}return l}}function dw(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function Bz(e,t){if(e){if(typeof e=="string")return dw(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return dw(e,t)}}function SV(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ki(e,t){return bV(e)||wV(e,t)||Bz(e,t)||SV()}function EV(e,t){if(e==null)return{};var r={},a=Object.keys(e),c,f;for(f=0;f<a.length;f++)c=a[f],!(t.indexOf(c)>=0)&&(r[c]=e[c]);return r}function CV(e,t){if(e==null)return{};var r=EV(e,t),a,c;if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(e);for(c=0;c<f.length;c++)a=f[c],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function Ly(){return Ly=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Ly.apply(this,arguments)}function TV(e){var t=e.prefixCls,r=e.align,a=e.arrow,c=e.arrowPos,f=a||{},y=f.className,l=f.content,w=c.x,C=w===void 0?0:w,P=c.y,A=P===void 0?0:P,D=T.useRef();if(!r||!r.points)return null;var N={position:"absolute"};if(r.autoArrow!==!1){var F=r.points[0],U=r.points[1],Z=F[0],j=F[1],B=U[0],H=U[1];Z===B||!["t","b"].includes(Z)?N.top=A:Z==="t"?N.top=0:N.bottom=0,j===H||!["l","r"].includes(j)?N.left=C:j==="l"?N.left=0:N.right=0}return T.createElement("div",{ref:D,className:kt("".concat(t,"-arrow"),y),style:N},l)}function IV(e){var t=e.prefixCls,r=e.open,a=e.zIndex,c=e.mask,f=e.motion;return c?T.createElement(xm,Ly({},f,{motionAppear:!0,visible:r,removeOnLeave:!0}),function(y){var l=y.className;return T.createElement("div",{style:{zIndex:a},className:kt("".concat(t,"-mask"),l)})}):null}var MV=T.memo(function(e){var t=e.children;return t},function(e,t){return t.cache}),PV=T.forwardRef(function(e,t){var r=e.popup,a=e.className,c=e.prefixCls,f=e.style,y=e.target,l=e.onVisibleChanged,w=e.open,C=e.keepDom,P=e.fresh,A=e.onClick,D=e.mask,N=e.arrow,F=e.arrowPos,U=e.align,Z=e.motion,j=e.maskMotion,B=e.forceRender,H=e.getPopupContainer,Y=e.autoDestroy,ne=e.portal,re=e.zIndex,Q=e.onMouseEnter,te=e.onMouseLeave,ee=e.onPointerEnter,ve=e.ready,he=e.offsetX,oe=e.offsetY,fe=e.offsetR,Te=e.offsetB,Fe=e.onAlign,$e=e.onPrepare,je=e.stretch,pe=e.targetWidth,He=e.targetHeight,Be=typeof r=="function"?r():r,Ze=w||C,nt=(H==null?void 0:H.length)>0,yt=T.useState(!H||!nt),Ot=ki(yt,2),Mt=Ot[0],Ft=Ot[1];if(Lr(function(){!Mt&&nt&&y&&Ft(!0)},[Mt,nt,y]),!Mt)return null;var Nt="auto",Ct={left:"-1000vw",top:"-1000vh",right:Nt,bottom:Nt};if(ve||!w){var ut,At=U.points,dt=U.dynamicInset||((ut=U._experimental)===null||ut===void 0?void 0:ut.dynamicInset),Bt=dt&&At[0][1]==="r",gt=dt&&At[0][0]==="b";Bt?(Ct.right=fe,Ct.left=Nt):(Ct.left=he,Ct.right=Nt),gt?(Ct.bottom=Te,Ct.top=Nt):(Ct.top=oe,Ct.bottom=Nt)}var jt={};return je&&(je.includes("height")&&He?jt.height=He:je.includes("minHeight")&&He&&(jt.minHeight=He),je.includes("width")&&pe?jt.width=pe:je.includes("minWidth")&&pe&&(jt.minWidth=pe)),w||(jt.pointerEvents="none"),T.createElement(ne,{open:B||Ze,getContainer:H&&function(){return H(y)},autoDestroy:Y},T.createElement(IV,{prefixCls:c,open:w,zIndex:re,mask:D,motion:j}),T.createElement(xl,{onResize:Fe,disabled:!w},function(zt){return T.createElement(xm,Ly({motionAppear:!0,motionEnter:!0,motionLeave:!0,removeOnLeave:!1,forceRender:B,leavedClassName:"".concat(c,"-hidden")},Z,{onAppearPrepare:$e,onEnterPrepare:$e,visible:w,onVisibleChanged:function(Kt){var Ut;Z==null||(Ut=Z.onVisibleChanged)===null||Ut===void 0||Ut.call(Z,Kt),l(Kt)}}),function(an,Kt){var Ut=an.className,at=an.style,it=kt(c,Ut,a);return T.createElement("div",{ref:gs(zt,t,Kt),className:it,style:Eo(Eo(Eo(Eo({"--arrow-x":"".concat(F.x||0,"px"),"--arrow-y":"".concat(F.y||0,"px")},Ct),jt),at),{},{boxSizing:"border-box",zIndex:re},f),onMouseEnter:Q,onMouseLeave:te,onPointerEnter:ee,onClick:A},N&&T.createElement(TV,{prefixCls:c,arrow:N,arrowPos:F,align:U}),T.createElement(MV,{cache:!w&&!P},Be))})}))}),AV=T.forwardRef(function(e,t){var r=e.children,a=e.getTriggerDOMNode,c=_m(r),f=T.useCallback(function(l){wS(t,a?a(l):l)},[a]),y=p0(f,r.ref);return c?T.cloneElement(r,{ref:y}):r}),_M=T.createContext(null);function xM(e){return e?Array.isArray(e)?e:[e]:[]}function RV(e,t,r,a){return T.useMemo(function(){var c=xM(r??t),f=xM(a??t),y=new Set(c),l=new Set(f);return e&&(y.has("hover")&&(y.delete("hover"),y.add("click")),l.has("hover")&&(l.delete("hover"),l.add("click"))),[y,l]},[e,t,r,a])}function OV(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0;return r?e[0]===t[0]:e[0]===t[0]&&e[1]===t[1]}function zV(e,t,r,a){for(var c=r.points,f=Object.keys(e),y=0;y<f.length;y+=1){var l,w=f[y];if(OV((l=e[w])===null||l===void 0?void 0:l.points,c,a))return"".concat(t,"-placement-").concat(w)}return""}function bM(e,t,r,a){return t||(r?{motionName:"".concat(e,"-").concat(r)}:a?{motionName:a}:null)}function Cm(e){return e.ownerDocument.defaultView}function hw(e){for(var t=[],r=e==null?void 0:e.parentElement,a=["hidden","scroll","clip","auto"];r;){var c=Cm(r).getComputedStyle(r),f=c.overflowX,y=c.overflowY,l=c.overflow;[f,y,l].some(function(w){return a.includes(w)})&&t.push(r),r=r.parentElement}return t}function dm(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return Number.isNaN(e)?t:e}function hp(e){return dm(parseFloat(e),0)}function wM(e,t){var r=Eo({},e);return(t||[]).forEach(function(a){if(!(a instanceof HTMLBodyElement||a instanceof HTMLHtmlElement)){var c=Cm(a).getComputedStyle(a),f=c.overflow,y=c.overflowClipMargin,l=c.borderTopWidth,w=c.borderBottomWidth,C=c.borderLeftWidth,P=c.borderRightWidth,A=a.getBoundingClientRect(),D=a.offsetHeight,N=a.clientHeight,F=a.offsetWidth,U=a.clientWidth,Z=hp(l),j=hp(w),B=hp(C),H=hp(P),Y=dm(Math.round(A.width/F*1e3)/1e3),ne=dm(Math.round(A.height/D*1e3)/1e3),re=(F-U-B-H)*Y,Q=(D-N-Z-j)*ne,te=Z*ne,ee=j*ne,ve=B*Y,he=H*Y,oe=0,fe=0;if(f==="clip"){var Te=hp(y);oe=Te*Y,fe=Te*ne}var Fe=A.x+ve-oe,$e=A.y+te-fe,je=Fe+A.width+2*oe-ve-he-re,pe=$e+A.height+2*fe-te-ee-Q;r.left=Math.max(r.left,Fe),r.top=Math.max(r.top,$e),r.right=Math.min(r.right,je),r.bottom=Math.min(r.bottom,pe)}}),r}function SM(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r="".concat(t),a=r.match(/^(.*)\%$/);return a?e*(parseFloat(a[1])/100):parseFloat(r)}function EM(e,t){var r=t||[],a=ki(r,2),c=a[0],f=a[1];return[SM(e.width,c),SM(e.height,f)]}function CM(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return[e[0],e[1]]}function Ad(e,t){var r=t[0],a=t[1],c,f;return r==="t"?f=e.y:r==="b"?f=e.y+e.height:f=e.y+e.height/2,a==="l"?c=e.x:a==="r"?c=e.x+e.width:c=e.x+e.width/2,{x:c,y:f}}function Kl(e,t){var r={t:"b",b:"t",l:"r",r:"l"};return e.map(function(a,c){return c===t?r[a]||"c":a}).join("")}function DV(e,t,r,a,c,f,y){var l=T.useState({ready:!1,offsetX:0,offsetY:0,offsetR:0,offsetB:0,arrowX:0,arrowY:0,scaleX:1,scaleY:1,align:c[a]||{}}),w=ki(l,2),C=w[0],P=w[1],A=T.useRef(0),D=T.useMemo(function(){return t?hw(t):[]},[t]),N=T.useRef({}),F=function(){N.current={}};e||F();var U=ia(function(){if(t&&r&&e){let Xn=function(xi,bo){var Oo=arguments.length>2&&arguments[2]!==void 0?arguments[2]:it,ma=Be.x+xi,vs=Be.y+bo,qo=ma+ut,ga=vs+Ct,ys=Math.max(ma,Oo.left),va=Math.max(vs,Oo.top),Ei=Math.min(qo,Oo.right),Nr=Math.min(ga,Oo.bottom);return Math.max(0,(Ei-ys)*(Nr-va))},Ns=function(){On=Be.y+Me,er=On+Ct,Zn=Be.x+Ie,Zr=Zn+ut};var B,H,Y=t,ne=Y.ownerDocument,re=Cm(Y),Q=re.getComputedStyle(Y),te=Q.width,ee=Q.height,ve=Q.position,he=Y.style.left,oe=Y.style.top,fe=Y.style.right,Te=Y.style.bottom,Fe=Y.style.overflow,$e=Eo(Eo({},c[a]),f),je=ne.createElement("div");(B=Y.parentElement)===null||B===void 0||B.appendChild(je),je.style.left="".concat(Y.offsetLeft,"px"),je.style.top="".concat(Y.offsetTop,"px"),je.style.position=ve,je.style.height="".concat(Y.offsetHeight,"px"),je.style.width="".concat(Y.offsetWidth,"px"),Y.style.left="0",Y.style.top="0",Y.style.right="auto",Y.style.bottom="auto",Y.style.overflow="hidden";var pe;if(Array.isArray(r))pe={x:r[0],y:r[1],width:0,height:0};else{var He=r.getBoundingClientRect();pe={x:He.x,y:He.y,width:He.width,height:He.height}}var Be=Y.getBoundingClientRect(),Ze=ne.documentElement,nt=Ze.clientWidth,yt=Ze.clientHeight,Ot=Ze.scrollWidth,Mt=Ze.scrollHeight,Ft=Ze.scrollTop,Nt=Ze.scrollLeft,Ct=Be.height,ut=Be.width,At=pe.height,dt=pe.width,Bt={left:0,top:0,right:nt,bottom:yt},gt={left:-Nt,top:-Ft,right:Ot-Nt,bottom:Mt-Ft},jt=$e.htmlRegion,zt="visible",an="visibleFirst";jt!=="scroll"&&jt!==an&&(jt=zt);var Kt=jt===an,Ut=wM(gt,D),at=wM(Bt,D),it=jt===zt?at:Ut,Rt=Kt?at:it;Y.style.left="auto",Y.style.top="auto",Y.style.right="0",Y.style.bottom="0";var bt=Y.getBoundingClientRect();Y.style.left=he,Y.style.top=oe,Y.style.right=fe,Y.style.bottom=Te,Y.style.overflow=Fe,(H=Y.parentElement)===null||H===void 0||H.removeChild(je);var sn=dm(Math.round(ut/parseFloat(te)*1e3)/1e3),An=dm(Math.round(Ct/parseFloat(ee)*1e3)/1e3);if(sn===0||An===0||wy(r)&&!iz(r))return;var Mn=$e.offset,rn=$e.targetOffset,Vn=EM(Be,Mn),Nn=ki(Vn,2),zn=Nn[0],vn=Nn[1],nn=EM(pe,rn),Wn=ki(nn,2),jn=Wn[0],fr=Wn[1];pe.x-=jn,pe.y-=fr;var or=$e.points||[],qn=ki(or,2),Qn=qn[0],Rr=qn[1],_e=CM(Rr),W=CM(Qn),J=Ad(pe,_e),ue=Ad(Be,W),Se=Eo({},$e),Ie=J.x-ue.x+zn,Me=J.y-ue.y+vn,De=Xn(Ie,Me),we=Xn(Ie,Me,at),Le=Ad(pe,["t","l"]),Ne=Ad(Be,["t","l"]),Je=Ad(pe,["b","r"]),Ge=Ad(Be,["b","r"]),_t=$e.overflow||{},Yt=_t.adjustX,Zt=_t.adjustY,un=_t.shiftX,ln=_t.shiftY,Gn=function(bo){return typeof bo=="boolean"?bo:bo>=0},On,er,Zn,Zr;Ns();var on=Gn(Zt),tn=W[0]===_e[0];if(on&&W[0]==="t"&&(er>Rt.bottom||N.current.bt)){var Sn=Me;tn?Sn-=Ct-At:Sn=Le.y-Ge.y-vn;var Tr=Xn(Ie,Sn),ri=Xn(Ie,Sn,at);Tr>De||Tr===De&&(!Kt||ri>=we)?(N.current.bt=!0,Me=Sn,vn=-vn,Se.points=[Kl(W,0),Kl(_e,0)]):N.current.bt=!1}if(on&&W[0]==="b"&&(On<Rt.top||N.current.tb)){var En=Me;tn?En+=Ct-At:En=Je.y-Ne.y-vn;var Ni=Xn(Ie,En),xo=Xn(Ie,En,at);Ni>De||Ni===De&&(!Kt||xo>=we)?(N.current.tb=!0,Me=En,vn=-vn,Se.points=[Kl(W,0),Kl(_e,0)]):N.current.tb=!1}var Po=Gn(Yt),no=W[1]===_e[1];if(Po&&W[1]==="l"&&(Zr>Rt.right||N.current.rl)){var Hr=Ie;no?Hr-=ut-dt:Hr=Le.x-Ge.x-zn;var ji=Xn(Hr,Me),pa=Xn(Hr,Me,at);ji>De||ji===De&&(!Kt||pa>=we)?(N.current.rl=!0,Ie=Hr,zn=-zn,Se.points=[Kl(W,1),Kl(_e,1)]):N.current.rl=!1}if(Po&&W[1]==="r"&&(Zn<Rt.left||N.current.lr)){var ro=Ie;no?ro+=ut-dt:ro=Je.x-Ne.x-zn;var io=Xn(ro,Me),_i=Xn(ro,Me,at);io>De||io===De&&(!Kt||_i>=we)?(N.current.lr=!0,Ie=ro,zn=-zn,Se.points=[Kl(W,1),Kl(_e,1)]):N.current.lr=!1}Ns();var Oi=un===!0?0:un;typeof Oi=="number"&&(Zn<at.left&&(Ie-=Zn-at.left-zn,pe.x+dt<at.left+Oi&&(Ie+=pe.x-at.left+dt-Oi)),Zr>at.right&&(Ie-=Zr-at.right-zn,pe.x>at.right-Oi&&(Ie+=pe.x-at.right+Oi)));var tt=ln===!0?0:ln;typeof tt=="number"&&(On<at.top&&(Me-=On-at.top-vn,pe.y+At<at.top+tt&&(Me+=pe.y-at.top+At-tt)),er>at.bottom&&(Me-=er-at.bottom-vn,pe.y>at.bottom-tt&&(Me+=pe.y-at.bottom+tt)));var Si=Be.x+Ie,gr=Si+ut,pr=Be.y+Me,Wo=pr+Ct,Tn=pe.x,Pn=Tn+dt,Xr=pe.y,Gr=Xr+At,Tt=Math.max(Si,Tn),xn=Math.min(gr,Pn),bn=(Tt+xn)/2,Qr=bn-Si,Kr=Math.max(pr,Xr),In=Math.min(Wo,Gr),Br=(Kr+In)/2,Ao=Br-pr;y==null||y(t,Se);var Ro=bt.right-Be.x-(Ie+Be.width),Ui=bt.bottom-Be.y-(Me+Be.height);P({ready:!0,offsetX:Ie/sn,offsetY:Me/An,offsetR:Ro/sn,offsetB:Ui/An,arrowX:Qr/sn,arrowY:Ao/An,scaleX:sn,scaleY:An,align:Se})}}),Z=function(){A.current+=1;var H=A.current;Promise.resolve().then(function(){A.current===H&&U()})},j=function(){P(function(H){return Eo(Eo({},H),{},{ready:!1})})};return Lr(j,[a]),Lr(function(){e||j()},[e]),[C.ready,C.offsetX,C.offsetY,C.offsetR,C.offsetB,C.arrowX,C.arrowY,C.scaleX,C.scaleY,C.align,Z]}function LV(e){if(Array.isArray(e))return dw(e)}function kV(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function $V(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function TM(e){return LV(e)||kV(e)||Bz(e)||$V()}function FV(e,t,r,a,c){Lr(function(){if(e&&t&&r){let A=function(){a(),c()};var f=t,y=r,l=hw(f),w=hw(y),C=Cm(y),P=new Set([C].concat(TM(l),TM(w)));return P.forEach(function(D){D.addEventListener("scroll",A,{passive:!0})}),C.addEventListener("resize",A,{passive:!0}),a(),function(){P.forEach(function(D){D.removeEventListener("scroll",A),C.removeEventListener("resize",A)})}}},[e,t,r])}function BV(e,t,r,a,c,f,y,l){var w=T.useRef(e),C=T.useRef(!1);w.current!==e&&(C.current=!0,w.current=e),T.useEffect(function(){var P=yi(function(){C.current=!1});return function(){yi.cancel(P)}},[e]),T.useEffect(function(){if(t&&a&&(!c||f)){var P=function(){var re=!1,Q=function(ve){var he=ve.target;re=y(he)},te=function(ve){var he=ve.target;!C.current&&w.current&&!re&&!y(he)&&l(!1)};return[Q,te]},A=P(),D=ki(A,2),N=D[0],F=D[1],U=P(),Z=ki(U,2),j=Z[0],B=Z[1],H=Cm(a);H.addEventListener("mousedown",N,!0),H.addEventListener("click",F,!0),H.addEventListener("contextmenu",F,!0);var Y=Ay(r);return Y&&(Y.addEventListener("mousedown",j,!0),Y.addEventListener("click",B,!0),Y.addEventListener("contextmenu",B,!0)),function(){H.removeEventListener("mousedown",N,!0),H.removeEventListener("click",F,!0),H.removeEventListener("contextmenu",F,!0),Y&&(Y.removeEventListener("mousedown",j,!0),Y.removeEventListener("click",B,!0),Y.removeEventListener("contextmenu",B,!0))}}},[t,r,a,c,f])}var NV=["prefixCls","children","action","showAction","hideAction","popupVisible","defaultPopupVisible","onPopupVisibleChange","afterPopupVisibleChange","mouseEnterDelay","mouseLeaveDelay","focusDelay","blurDelay","mask","maskClosable","getPopupContainer","forceRender","autoDestroy","destroyPopupOnHide","popup","popupClassName","popupStyle","popupPlacement","builtinPlacements","popupAlign","zIndex","stretch","getPopupClassNameFromAlign","fresh","alignPoint","onPopupClick","onPopupAlign","arrow","popupMotion","maskMotion","popupTransitionName","popupAnimation","maskTransitionName","maskAnimation","className","getTriggerDOMNode"];function jV(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:mz,t=T.forwardRef(function(r,a){var c=r.prefixCls,f=c===void 0?"rc-trigger-popup":c,y=r.children,l=r.action,w=l===void 0?"hover":l,C=r.showAction,P=r.hideAction,A=r.popupVisible,D=r.defaultPopupVisible,N=r.onPopupVisibleChange,F=r.afterPopupVisibleChange,U=r.mouseEnterDelay,Z=r.mouseLeaveDelay,j=Z===void 0?.1:Z,B=r.focusDelay,H=r.blurDelay,Y=r.mask,ne=r.maskClosable,re=ne===void 0?!0:ne,Q=r.getPopupContainer,te=r.forceRender,ee=r.autoDestroy,ve=r.destroyPopupOnHide,he=r.popup,oe=r.popupClassName,fe=r.popupStyle,Te=r.popupPlacement,Fe=r.builtinPlacements,$e=Fe===void 0?{}:Fe,je=r.popupAlign,pe=r.zIndex,He=r.stretch,Be=r.getPopupClassNameFromAlign,Ze=r.fresh,nt=r.alignPoint,yt=r.onPopupClick,Ot=r.onPopupAlign,Mt=r.arrow,Ft=r.popupMotion,Nt=r.maskMotion,Ct=r.popupTransitionName,ut=r.popupAnimation,At=r.maskTransitionName,dt=r.maskAnimation,Bt=r.className,gt=r.getTriggerDOMNode,jt=CV(r,NV),zt=ee||ve||!1,an=T.useState(!1),Kt=ki(an,2),Ut=Kt[0],at=Kt[1];Lr(function(){at(Az())},[]);var it=T.useRef({}),Rt=T.useContext(_M),bt=T.useMemo(function(){return{registerSubPopup:function($n,Yn){it.current[$n]=Yn,Rt==null||Rt.registerSubPopup($n,Yn)}}},[Rt]),sn=g8(),An=T.useState(null),Mn=ki(An,2),rn=Mn[0],Vn=Mn[1],Nn=ia(function(hn){wy(hn)&&rn!==hn&&Vn(hn),Rt==null||Rt.registerSubPopup(sn,hn)}),zn=T.useState(null),vn=ki(zn,2),nn=vn[0],Wn=vn[1],jn=T.useRef(null),fr=ia(function(hn){wy(hn)&&nn!==hn&&(Wn(hn),jn.current=hn)}),or=T.Children.only(y),qn=(or==null?void 0:or.props)||{},Qn={},Rr=ia(function(hn){var $n,Yn,dr=nn;return(dr==null?void 0:dr.contains(hn))||(($n=Ay(dr))===null||$n===void 0?void 0:$n.host)===hn||hn===dr||(rn==null?void 0:rn.contains(hn))||((Yn=Ay(rn))===null||Yn===void 0?void 0:Yn.host)===hn||hn===rn||Object.values(it.current).some(function(Wr){return(Wr==null?void 0:Wr.contains(hn))||hn===Wr})}),_e=bM(f,Ft,ut,Ct),W=bM(f,Nt,dt,At),J=T.useState(D||!1),ue=ki(J,2),Se=ue[0],Ie=ue[1],Me=A??Se,De=ia(function(hn){A===void 0&&Ie(hn)});Lr(function(){Ie(A||!1)},[A]);var we=T.useRef(Me);we.current=Me;var Le=T.useRef([]);Le.current=[];var Ne=ia(function(hn){var $n;De(hn),(($n=Le.current[Le.current.length-1])!==null&&$n!==void 0?$n:Me)!==hn&&(Le.current.push(hn),N==null||N(hn))}),Je=T.useRef(),Ge=function(){clearTimeout(Je.current)},_t=function($n){var Yn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;Ge(),Yn===0?Ne($n):Je.current=setTimeout(function(){Ne($n)},Yn*1e3)};T.useEffect(function(){return Ge},[]);var Yt=T.useState(!1),Zt=ki(Yt,2),un=Zt[0],ln=Zt[1];Lr(function(hn){(!hn||Me)&&ln(!0)},[Me]);var Gn=T.useState(null),On=ki(Gn,2),er=On[0],Zn=On[1],Zr=T.useState([0,0]),on=ki(Zr,2),tn=on[0],Sn=on[1],Tr=function($n){Sn([$n.clientX,$n.clientY])},ri=DV(Me,rn,nt?tn:nn,Te,$e,je,Ot),En=ki(ri,11),Ni=En[0],xo=En[1],Po=En[2],no=En[3],Hr=En[4],ji=En[5],pa=En[6],ro=En[7],io=En[8],_i=En[9],Oi=En[10],tt=RV(Ut,w,C,P),Si=ki(tt,2),gr=Si[0],pr=Si[1],Wo=gr.has("click"),Tn=pr.has("click")||pr.has("contextMenu"),Pn=ia(function(){un||Oi()}),Xr=function(){we.current&&nt&&Tn&&_t(!1)};FV(Me,nn,rn,Pn,Xr),Lr(function(){Pn()},[tn,Te]),Lr(function(){Me&&!($e!=null&&$e[Te])&&Pn()},[JSON.stringify(je)]);var Gr=T.useMemo(function(){var hn=zV($e,f,_i,nt);return kt(hn,Be==null?void 0:Be(_i))},[_i,Be,$e,f,nt]);T.useImperativeHandle(a,function(){return{nativeElement:jn.current,forceAlign:Pn}});var Tt=T.useState(0),xn=ki(Tt,2),bn=xn[0],Qr=xn[1],Kr=T.useState(0),In=ki(Kr,2),Br=In[0],Ao=In[1],Ro=function(){if(He&&nn){var $n=nn.getBoundingClientRect();Qr($n.width),Ao($n.height)}},Ui=function(){Ro(),Pn()},Xn=function($n){ln(!1),Oi(),F==null||F($n)},Ns=function(){return new Promise(function($n){Ro(),Zn(function(){return $n})})};Lr(function(){er&&(Oi(),er(),Zn(null))},[er]);function xi(hn,$n,Yn,dr){Qn[hn]=function(Wr){var ya;dr==null||dr(Wr),_t($n,Yn);for(var zr=arguments.length,_s=new Array(zr>1?zr-1:0),xs=1;xs<zr;xs++)_s[xs-1]=arguments[xs];(ya=qn[hn])===null||ya===void 0||ya.call.apply(ya,[qn,Wr].concat(_s))}}(Wo||Tn)&&(Qn.onClick=function(hn){var $n;we.current&&Tn?_t(!1):!we.current&&Wo&&(Tr(hn),_t(!0));for(var Yn=arguments.length,dr=new Array(Yn>1?Yn-1:0),Wr=1;Wr<Yn;Wr++)dr[Wr-1]=arguments[Wr];($n=qn.onClick)===null||$n===void 0||$n.call.apply($n,[qn,hn].concat(dr))}),BV(Me,Tn,nn,rn,Y,re,Rr,_t);var bo=gr.has("hover"),Oo=pr.has("hover"),ma,vs;bo&&(xi("onMouseEnter",!0,U,function(hn){Tr(hn)}),xi("onPointerEnter",!0,U,function(hn){Tr(hn)}),ma=function(){(Me||un)&&_t(!0,U)},nt&&(Qn.onMouseMove=function(hn){var $n;($n=qn.onMouseMove)===null||$n===void 0||$n.call(qn,hn)})),Oo&&(xi("onMouseLeave",!1,j),xi("onPointerLeave",!1,j),vs=function(){_t(!1,j)}),gr.has("focus")&&xi("onFocus",!0,B),pr.has("focus")&&xi("onBlur",!1,H),gr.has("contextMenu")&&(Qn.onContextMenu=function(hn){var $n;we.current&&pr.has("contextMenu")?_t(!1):(Tr(hn),_t(!0)),hn.preventDefault();for(var Yn=arguments.length,dr=new Array(Yn>1?Yn-1:0),Wr=1;Wr<Yn;Wr++)dr[Wr-1]=arguments[Wr];($n=qn.onContextMenu)===null||$n===void 0||$n.call.apply($n,[qn,hn].concat(dr))}),Bt&&(Qn.className=kt(qn.className,Bt));var qo=Eo(Eo({},qn),Qn),ga={},ys=["onContextMenu","onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur"];ys.forEach(function(hn){jt[hn]&&(ga[hn]=function(){for(var $n,Yn=arguments.length,dr=new Array(Yn),Wr=0;Wr<Yn;Wr++)dr[Wr]=arguments[Wr];($n=qo[hn])===null||$n===void 0||$n.call.apply($n,[qo].concat(dr)),jt[hn].apply(jt,dr)})});var va=T.cloneElement(or,Eo(Eo({},qo),ga)),Ei={x:ji,y:pa},Nr=Mt?Eo({},Mt!==!0?Mt:{}):null;return T.createElement(T.Fragment,null,T.createElement(xl,{disabled:!Me,ref:fr,onResize:Ui},T.createElement(AV,{getTriggerDOMNode:gt},va)),T.createElement(_M.Provider,{value:bt},T.createElement(PV,{portal:e,ref:Nn,prefixCls:f,popup:he,className:kt(oe,Gr),style:fe,target:nn,onMouseEnter:ma,onMouseLeave:vs,onPointerEnter:ma,zIndex:pe,open:Me,keepDom:un,fresh:Ze,onClick:yt,mask:Y,motion:_e,maskMotion:W,onVisibleChanged:Xn,onPrepare:Ns,forceRender:te,autoDestroy:zt,getPopupContainer:Q,align:_i,arrow:Nr,arrowPos:Ei,ready:Ni,offsetX:xo,offsetY:Po,offsetR:no,offsetB:Hr,onAlign:Pn,stretch:He,targetWidth:bn/ro,targetHeight:Br/io})))});return t}const Nz=jV(mz);var UV=["prefixCls","disabled","visible","children","popupElement","animation","transitionName","dropdownStyle","dropdownClassName","direction","placement","builtinPlacements","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","getPopupContainer","empty","getTriggerDOMNode","onPopupVisibleChange","onPopupMouseEnter"],VV=function(t){var r=t===!0?0:1;return{bottomLeft:{points:["tl","bl"],offset:[0,4],overflow:{adjustX:r,adjustY:1},htmlRegion:"scroll"},bottomRight:{points:["tr","br"],offset:[0,4],overflow:{adjustX:r,adjustY:1},htmlRegion:"scroll"},topLeft:{points:["bl","tl"],offset:[0,-4],overflow:{adjustX:r,adjustY:1},htmlRegion:"scroll"},topRight:{points:["br","tr"],offset:[0,-4],overflow:{adjustX:r,adjustY:1},htmlRegion:"scroll"}}},HV=function(t,r){var a=t.prefixCls;t.disabled;var c=t.visible,f=t.children,y=t.popupElement,l=t.animation,w=t.transitionName,C=t.dropdownStyle,P=t.dropdownClassName,A=t.direction,D=A===void 0?"ltr":A,N=t.placement,F=t.builtinPlacements,U=t.dropdownMatchSelectWidth,Z=t.dropdownRender,j=t.dropdownAlign,B=t.getPopupContainer,H=t.empty,Y=t.getTriggerDOMNode,ne=t.onPopupVisibleChange,re=t.onPopupMouseEnter,Q=Vr(t,UV),te="".concat(a,"-dropdown"),ee=y;Z&&(ee=Z(y));var ve=T.useMemo(function(){return F||VV(U)},[F,U]),he=l?"".concat(te,"-").concat(l):w,oe=typeof U=="number",fe=T.useMemo(function(){return oe?null:U===!1?"minWidth":"width"},[U,oe]),Te=C;oe&&(Te=st(st({},Te),{},{width:U}));var Fe=T.useRef(null);return T.useImperativeHandle(r,function(){return{getPopupElement:function(){return Fe.current}}}),T.createElement(Nz,Cn({},Q,{showAction:ne?["click"]:[],hideAction:ne?["click"]:[],popupPlacement:N||(D==="rtl"?"bottomRight":"bottomLeft"),builtinPlacements:ve,prefixCls:te,popupTransitionName:he,popup:T.createElement("div",{ref:Fe,onMouseEnter:re},ee),stretch:fe,popupAlign:j,popupVisible:c,getPopupContainer:B,popupClassName:kt(P,ke({},"".concat(te,"-empty"),H)),popupStyle:Te,getTriggerDOMNode:Y,onPopupVisibleChange:ne}),f)},jz=T.forwardRef(HV);jz.displayName="SelectTrigger";function IM(e,t){var r=e.key,a;return"value"in e&&(a=e.value),r??(a!==void 0?a:"rc-index-key-".concat(t))}function Uz(e,t){var r=e||{},a=r.label,c=r.value,f=r.options,y=r.groupLabel,l=a||(t?"children":"label");return{label:l,value:c||"value",options:f||"options",groupLabel:y||l}}function GV(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=t.fieldNames,a=t.childrenAsData,c=[],f=Uz(r,!1),y=f.label,l=f.value,w=f.options,C=f.groupLabel;function P(A,D){A.forEach(function(N){if(D||!(w in N)){var F=N[l];c.push({key:IM(N,c.length),groupOption:D,data:N,label:N[y],value:F})}else{var U=N[C];U===void 0&&a&&(U=N.label),c.push({key:IM(N,c.length),group:!0,data:N,label:U}),P(N[w],!0)}})}return P(e,!1),c}function fw(e){var t=st({},e);return"props"in t||Object.defineProperty(t,"props",{get:function(){return Uo(!1,"Return type is option instead of Option instance. Please read value directly instead of reading from `props`."),t}}),t}function WV(e,t){if(!t||!t.length)return null;var r=!1;function a(f,y){var l=fO(y),w=l[0],C=l.slice(1);if(!w)return[f];var P=f.split(w);return r=r||P.length>1,P.reduce(function(A,D){return[].concat(_n(A),_n(a(D,C)))},[]).filter(function(A){return A})}var c=a(e,t);return r?c:null}var qV=["id","prefixCls","className","showSearch","tagRender","direction","omitDomProps","displayValues","onDisplayValuesChange","emptyOptions","notFoundContent","onClear","mode","disabled","loading","getInputElement","getRawInputElement","open","defaultOpen","onDropdownVisibleChange","activeValue","onActiveValueChange","activeDescendantId","searchValue","autoClearSearchValue","onSearch","onSearchSplit","tokenSeparators","allowClear","suffixIcon","clearIcon","OptionList","animation","transitionName","dropdownStyle","dropdownClassName","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","placement","builtinPlacements","getPopupContainer","showAction","onFocus","onBlur","onKeyUp","onKeyDown","onMouseDown"],ZV=["value","onChange","removeIcon","placeholder","autoFocus","maxTagCount","maxTagTextLength","maxTagPlaceholder","choiceTransitionName","onInputKeyDown","onPopupScroll","tabIndex"];function pw(e){return e==="tags"||e==="multiple"}var XV=T.forwardRef(function(e,t){var r,a,c=e.id,f=e.prefixCls,y=e.className,l=e.showSearch,w=e.tagRender,C=e.direction,P=e.omitDomProps,A=e.displayValues,D=e.onDisplayValuesChange,N=e.emptyOptions,F=e.notFoundContent,U=F===void 0?"Not Found":F,Z=e.onClear,j=e.mode,B=e.disabled,H=e.loading,Y=e.getInputElement,ne=e.getRawInputElement,re=e.open,Q=e.defaultOpen,te=e.onDropdownVisibleChange,ee=e.activeValue,ve=e.onActiveValueChange,he=e.activeDescendantId,oe=e.searchValue,fe=e.autoClearSearchValue,Te=e.onSearch,Fe=e.onSearchSplit,$e=e.tokenSeparators,je=e.allowClear,pe=e.suffixIcon,He=e.clearIcon,Be=e.OptionList,Ze=e.animation,nt=e.transitionName,yt=e.dropdownStyle,Ot=e.dropdownClassName,Mt=e.dropdownMatchSelectWidth,Ft=e.dropdownRender,Nt=e.dropdownAlign,Ct=e.placement,ut=e.builtinPlacements,At=e.getPopupContainer,dt=e.showAction,Bt=dt===void 0?[]:dt,gt=e.onFocus,jt=e.onBlur,zt=e.onKeyUp,an=e.onKeyDown,Kt=e.onMouseDown,Ut=Vr(e,qV),at=pw(j),it=(l!==void 0?l:at)||j==="combobox",Rt=st({},Ut);ZV.forEach(function(Tn){delete Rt[Tn]}),P==null||P.forEach(function(Tn){delete Rt[Tn]});var bt=T.useState(!1),sn=$t(bt,2),An=sn[0],Mn=sn[1];T.useEffect(function(){Mn(Az())},[]);var rn=T.useRef(null),Vn=T.useRef(null),Nn=T.useRef(null),zn=T.useRef(null),vn=T.useRef(null),nn=T.useRef(!1),Wn=ZU(),jn=$t(Wn,3),fr=jn[0],or=jn[1],qn=jn[2];T.useImperativeHandle(t,function(){var Tn,Pn;return{focus:(Tn=zn.current)===null||Tn===void 0?void 0:Tn.focus,blur:(Pn=zn.current)===null||Pn===void 0?void 0:Pn.blur,scrollTo:function(Gr){var Tt;return(Tt=vn.current)===null||Tt===void 0?void 0:Tt.scrollTo(Gr)}}});var Qn=T.useMemo(function(){var Tn;if(j!=="combobox")return oe;var Pn=(Tn=A[0])===null||Tn===void 0?void 0:Tn.value;return typeof Pn=="string"||typeof Pn=="number"?String(Pn):""},[oe,j,A]),Rr=j==="combobox"&&typeof Y=="function"&&Y()||null,_e=typeof ne=="function"&&ne(),W=p0(Vn,_e==null||(r=_e.props)===null||r===void 0?void 0:r.ref),J=T.useState(!1),ue=$t(J,2),Se=ue[0],Ie=ue[1];Lr(function(){Ie(!0)},[]);var Me=ms(!1,{defaultValue:Q,value:re}),De=$t(Me,2),we=De[0],Le=De[1],Ne=Se?we:!1,Je=!U&&N;(B||Je&&Ne&&j==="combobox")&&(Ne=!1);var Ge=Je?!1:Ne,_t=T.useCallback(function(Tn){var Pn=Tn!==void 0?Tn:!Ne;B||(Le(Pn),Ne!==Pn&&(te==null||te(Pn)))},[B,Ne,Le,te]),Yt=T.useMemo(function(){return($e||[]).some(function(Tn){return[`
`,`\r
`].includes(Tn)})},[$e]),Zt=function(Pn,Xr,Gr){var Tt=!0,xn=Pn;ve==null||ve(null);var bn=Gr?null:WV(Pn,$e);return j!=="combobox"&&bn&&(xn="",Fe==null||Fe(bn),_t(!1),Tt=!1),Te&&Qn!==xn&&Te(xn,{source:Xr?"typing":"effect"}),Tt},un=function(Pn){!Pn||!Pn.trim()||Te(Pn,{source:"submit"})};T.useEffect(function(){!Ne&&!at&&j!=="combobox"&&Zt("",!1,!1)},[Ne]),T.useEffect(function(){we&&B&&Le(!1),B&&!nn.current&&or(!1)},[B]);var ln=Oz(),Gn=$t(ln,2),On=Gn[0],er=Gn[1],Zn=function(Pn){var Xr=On(),Gr=Pn.which;if(Gr===Vt.ENTER&&(j!=="combobox"&&Pn.preventDefault(),Ne||_t(!0)),er(!!Qn),Gr===Vt.BACKSPACE&&!Xr&&at&&!Qn&&A.length){for(var Tt=_n(A),xn=null,bn=Tt.length-1;bn>=0;bn-=1){var Qr=Tt[bn];if(!Qr.disabled){Tt.splice(bn,1),xn=Qr;break}}xn&&D(Tt,{type:"remove",values:[xn]})}for(var Kr=arguments.length,In=new Array(Kr>1?Kr-1:0),Br=1;Br<Kr;Br++)In[Br-1]=arguments[Br];if(Ne&&vn.current){var Ao;(Ao=vn.current).onKeyDown.apply(Ao,[Pn].concat(In))}an==null||an.apply(void 0,[Pn].concat(In))},Zr=function(Pn){for(var Xr=arguments.length,Gr=new Array(Xr>1?Xr-1:0),Tt=1;Tt<Xr;Tt++)Gr[Tt-1]=arguments[Tt];if(Ne&&vn.current){var xn;(xn=vn.current).onKeyUp.apply(xn,[Pn].concat(Gr))}zt==null||zt.apply(void 0,[Pn].concat(Gr))},on=function(Pn){var Xr=A.filter(function(Gr){return Gr!==Pn});D(Xr,{type:"remove",values:[Pn]})},tn=T.useRef(!1),Sn=function(){or(!0),B||(gt&&!tn.current&&gt.apply(void 0,arguments),Bt.includes("focus")&&_t(!0)),tn.current=!0},Tr=function(){nn.current=!0,or(!1,function(){tn.current=!1,nn.current=!1,_t(!1)}),!B&&(Qn&&(j==="tags"?Te(Qn,{source:"submit"}):j==="multiple"&&Te("",{source:"blur"})),jt&&jt.apply(void 0,arguments))},ri=[];T.useEffect(function(){return function(){ri.forEach(function(Tn){return clearTimeout(Tn)}),ri.splice(0,ri.length)}},[]);var En=function(Pn){var Xr,Gr=Pn.target,Tt=(Xr=Nn.current)===null||Xr===void 0?void 0:Xr.getPopupElement();if(Tt&&Tt.contains(Gr)){var xn=setTimeout(function(){var In=ri.indexOf(xn);if(In!==-1&&ri.splice(In,1),qn(),!An&&!Tt.contains(document.activeElement)){var Br;(Br=zn.current)===null||Br===void 0||Br.focus()}});ri.push(xn)}for(var bn=arguments.length,Qr=new Array(bn>1?bn-1:0),Kr=1;Kr<bn;Kr++)Qr[Kr-1]=arguments[Kr];Kt==null||Kt.apply(void 0,[Pn].concat(Qr))},Ni=T.useState({}),xo=$t(Ni,2),Po=xo[1];function no(){Po({})}var Hr;_e&&(Hr=function(Pn){_t(Pn)}),XU(function(){var Tn;return[rn.current,(Tn=Nn.current)===null||Tn===void 0?void 0:Tn.getPopupElement()]},Ge,_t,!!_e);var ji=T.useMemo(function(){return st(st({},e),{},{notFoundContent:U,open:Ne,triggerOpen:Ge,id:c,showSearch:it,multiple:at,toggleOpen:_t})},[e,U,Ge,Ne,c,it,at,_t]),pa=!!pe||H,ro;pa&&(ro=T.createElement(T0,{className:kt("".concat(f,"-arrow"),ke({},"".concat(f,"-arrow-loading"),H)),customizeIcon:pe,customizeIconProps:{loading:H,searchValue:Qn,open:Ne,focused:fr,showSearch:it}}));var io=function(){var Pn;Z==null||Z(),(Pn=zn.current)===null||Pn===void 0||Pn.focus(),D([],{type:"clear",values:A}),Zt("",!1,!1)},_i=WU(f,io,A,je,He,B,Qn,j),Oi=_i.allowClear,tt=_i.clearIcon,Si=T.createElement(Be,{ref:vn}),gr=kt(f,y,(a={},ke(a,"".concat(f,"-focused"),fr),ke(a,"".concat(f,"-multiple"),at),ke(a,"".concat(f,"-single"),!at),ke(a,"".concat(f,"-allow-clear"),je),ke(a,"".concat(f,"-show-arrow"),pa),ke(a,"".concat(f,"-disabled"),B),ke(a,"".concat(f,"-loading"),H),ke(a,"".concat(f,"-open"),Ne),ke(a,"".concat(f,"-customize-input"),Rr),ke(a,"".concat(f,"-show-search"),it),a)),pr=T.createElement(jz,{ref:Nn,disabled:B,prefixCls:f,visible:Ge,popupElement:Si,animation:Ze,transitionName:nt,dropdownStyle:yt,dropdownClassName:Ot,direction:C,dropdownMatchSelectWidth:Mt,dropdownRender:Ft,dropdownAlign:Nt,placement:Ct,builtinPlacements:ut,getPopupContainer:At,empty:N,getTriggerDOMNode:function(){return Vn.current},onPopupVisibleChange:Hr,onPopupMouseEnter:no},_e?T.cloneElement(_e,{ref:W}):T.createElement(Fz,Cn({},e,{domRef:Vn,prefixCls:f,inputElement:Rr,ref:zn,id:c,showSearch:it,autoClearSearchValue:fe,mode:j,activeDescendantId:he,tagRender:w,values:A,open:Ne,onToggleOpen:_t,activeValue:ee,searchValue:Qn,onSearch:Zt,onSearchSubmit:un,onRemove:on,tokenWithEnter:Yt}))),Wo;return _e?Wo=pr:Wo=T.createElement("div",Cn({className:gr},Rt,{ref:rn,onMouseDown:En,onKeyDown:Zn,onKeyUp:Zr,onFocus:Sn,onBlur:Tr}),fr&&!Ne&&T.createElement("span",{style:{width:0,height:0,position:"absolute",overflow:"hidden",opacity:0},"aria-live":"polite"},"".concat(A.map(function(Tn){var Pn=Tn.label,Xr=Tn.value;return["number","string"].includes(Kn(Pn))?Pn:Xr}).join(", "))),pr,ro,Oi&&tt),T.createElement(Rz.Provider,{value:ji},Wo)}),qS=function(){return null};qS.isSelectOptGroup=!0;var ZS=function(){return null};ZS.isSelectOption=!0;var Vz=T.forwardRef(function(e,t){var r=e.height,a=e.offsetY,c=e.offsetX,f=e.children,y=e.prefixCls,l=e.onInnerResize,w=e.innerProps,C=e.rtl,P=e.extra,A={},D={display:"flex",flexDirection:"column"};if(a!==void 0){var N;A={height:r,position:"relative",overflow:"hidden"},D=st(st({},D),{},(N={transform:"translateY(".concat(a,"px)")},ke(N,C?"marginRight":"marginLeft",-c),ke(N,"position","absolute"),ke(N,"left",0),ke(N,"right",0),ke(N,"top",0),N))}return T.createElement("div",{style:A},T.createElement(xl,{onResize:function(U){var Z=U.offsetHeight;Z&&l&&l()}},T.createElement("div",Cn({style:D,className:kt(ke({},"".concat(y,"-holder-inner"),y)),ref:t},w),f,P)))});Vz.displayName="Filler";function MM(e,t){var r="touches"in e?e.touches[0]:e;return r[t?"pageX":"pageY"]}var PM=T.forwardRef(function(e,t){var r,a=e.prefixCls,c=e.rtl,f=e.scrollOffset,y=e.scrollRange,l=e.onStartMove,w=e.onStopMove,C=e.onScroll,P=e.horizontal,A=e.spinSize,D=e.containerSize,N=e.style,F=e.thumbStyle,U=T.useState(!1),Z=$t(U,2),j=Z[0],B=Z[1],H=T.useState(null),Y=$t(H,2),ne=Y[0],re=Y[1],Q=T.useState(null),te=$t(Q,2),ee=te[0],ve=te[1],he=!c,oe=T.useRef(),fe=T.useRef(),Te=T.useState(!1),Fe=$t(Te,2),$e=Fe[0],je=Fe[1],pe=T.useRef(),He=function(){clearTimeout(pe.current),je(!0),pe.current=setTimeout(function(){je(!1)},3e3)},Be=y-D||0,Ze=D-A||0,nt=Be>0,yt=T.useMemo(function(){if(f===0||Be===0)return 0;var Bt=f/Be;return Bt*Ze},[f,Be,Ze]),Ot=function(gt){gt.stopPropagation(),gt.preventDefault()},Mt=T.useRef({top:yt,dragging:j,pageY:ne,startTop:ee});Mt.current={top:yt,dragging:j,pageY:ne,startTop:ee};var Ft=function(gt){B(!0),re(MM(gt,P)),ve(Mt.current.top),l(),gt.stopPropagation(),gt.preventDefault()};T.useEffect(function(){var Bt=function(an){an.preventDefault()},gt=oe.current,jt=fe.current;return gt.addEventListener("touchstart",Bt),jt.addEventListener("touchstart",Ft),function(){gt.removeEventListener("touchstart",Bt),jt.removeEventListener("touchstart",Ft)}},[]);var Nt=T.useRef();Nt.current=Be;var Ct=T.useRef();Ct.current=Ze,T.useEffect(function(){if(j){var Bt,gt=function(an){var Kt=Mt.current,Ut=Kt.dragging,at=Kt.pageY,it=Kt.startTop;if(yi.cancel(Bt),Ut){var Rt=MM(an,P)-at,bt=it;!he&&P?bt-=Rt:bt+=Rt;var sn=Nt.current,An=Ct.current,Mn=An?bt/An:0,rn=Math.ceil(Mn*sn);rn=Math.max(rn,0),rn=Math.min(rn,sn),Bt=yi(function(){C(rn,P)})}},jt=function(){B(!1),w()};return window.addEventListener("mousemove",gt),window.addEventListener("touchmove",gt),window.addEventListener("mouseup",jt),window.addEventListener("touchend",jt),function(){window.removeEventListener("mousemove",gt),window.removeEventListener("touchmove",gt),window.removeEventListener("mouseup",jt),window.removeEventListener("touchend",jt),yi.cancel(Bt)}}},[j]),T.useEffect(function(){He()},[f]),T.useImperativeHandle(t,function(){return{delayHidden:He}});var ut="".concat(a,"-scrollbar"),At={position:"absolute",visibility:$e&&nt?null:"hidden"},dt={position:"absolute",background:"rgba(0, 0, 0, 0.5)",borderRadius:99,cursor:"pointer",userSelect:"none"};return P?(At.height=8,At.left=0,At.right=0,At.bottom=0,dt.height="100%",dt.width=A,he?dt.left=yt:dt.right=yt):(At.width=8,At.top=0,At.bottom=0,he?At.right=0:At.left=0,dt.width="100%",dt.height=A,dt.top=yt),T.createElement("div",{ref:oe,className:kt(ut,(r={},ke(r,"".concat(ut,"-horizontal"),P),ke(r,"".concat(ut,"-vertical"),!P),ke(r,"".concat(ut,"-visible"),$e),r)),style:st(st({},At),N),onMouseDown:Ot,onMouseMove:He},T.createElement("div",{ref:fe,className:kt("".concat(ut,"-thumb"),ke({},"".concat(ut,"-thumb-moving"),j)),style:st(st({},dt),F),onMouseDown:Ft}))});function KV(e){var t=e.children,r=e.setRef,a=T.useCallback(function(c){r(c)},[]);return T.cloneElement(t,{ref:a})}function YV(e,t,r,a,c,f,y){var l=y.getKey;return e.slice(t,r+1).map(function(w,C){var P=t+C,A=f(w,P,{style:{width:a}}),D=l(w);return T.createElement(KV,{key:D,setRef:function(F){return c(w,F)}},A)})}var JV=function(){function e(){ha(this,e),this.maps=void 0,this.id=0,this.maps=Object.create(null)}return fa(e,[{key:"set",value:function(r,a){this.maps[r]=a,this.id+=1}},{key:"get",value:function(r){return this.maps[r]}}]),e}();function QV(e,t,r){var a=T.useState(0),c=$t(a,2),f=c[0],y=c[1],l=T.useRef(new Map),w=T.useRef(new JV),C=T.useRef();function P(){yi.cancel(C.current)}function A(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;P();var F=function(){l.current.forEach(function(Z,j){if(Z&&Z.offsetParent){var B=Op(Z),H=B.offsetHeight;w.current.get(j)!==H&&w.current.set(j,B.offsetHeight)}}),y(function(Z){return Z+1})};N?F():C.current=yi(F)}function D(N,F){var U=e(N),Z=l.current.get(U);F?(l.current.set(U,F),A()):l.current.delete(U),!Z!=!F&&(F?t==null||t(N):r==null||r(N))}return T.useEffect(function(){return P},[]),[D,A,w.current,f]}var e9=10;function t9(e,t,r,a,c,f,y,l){var w=T.useRef(),C=T.useState(null),P=$t(C,2),A=P[0],D=P[1];return Lr(function(){if(A&&A.times<e9){if(!e.current){D(function(He){return st({},He)});return}f();var N=A.targetAlign,F=A.originAlign,U=A.index,Z=A.offset,j=e.current.clientHeight,B=!1,H=N,Y=null;if(j){for(var ne=N||F,re=0,Q=0,te=0,ee=Math.min(t.length-1,U),ve=0;ve<=ee;ve+=1){var he=c(t[ve]);Q=re;var oe=r.get(he);te=Q+(oe===void 0?a:oe),re=te}for(var fe=ne==="top"?Z:j-Z,Te=ee;Te>=0;Te-=1){var Fe=c(t[Te]),$e=r.get(Fe);if($e===void 0){B=!0;break}if(fe-=$e,fe<=0)break}switch(ne){case"top":Y=Q-Z;break;case"bottom":Y=te-j+Z;break;default:{var je=e.current.scrollTop,pe=je+j;Q<je?H="top":te>pe&&(H="bottom")}}Y!==null&&y(Y),Y!==A.lastTop&&(B=!0)}B&&D(st(st({},A),{},{times:A.times+1,targetAlign:H,lastTop:Y}))}},[A,e.current]),function(N){if(N==null){l();return}if(yi.cancel(w.current),typeof N=="number")y(N);else if(N&&Kn(N)==="object"){var F,U=N.align;"index"in N?F=N.index:F=t.findIndex(function(B){return c(B)===N.key});var Z=N.offset,j=Z===void 0?0:Z;D({times:0,index:F,offset:j,originAlign:U})}}}function n9(e,t,r){var a=e.length,c=t.length,f,y;if(a===0&&c===0)return null;a<c?(f=e,y=t):(f=t,y=e);var l={__EMPTY_ITEM__:!0};function w(F){return F!==void 0?r(F):l}for(var C=null,P=Math.abs(a-c)!==1,A=0;A<y.length;A+=1){var D=w(f[A]),N=w(y[A]);if(D!==N){C=A,P=P||D!==w(y[A+1]);break}}return C===null?null:{index:C,multiple:P}}function r9(e,t,r){var a=T.useState(e),c=$t(a,2),f=c[0],y=c[1],l=T.useState(null),w=$t(l,2),C=w[0],P=w[1];return T.useEffect(function(){var A=n9(f||[],e||[],t);(A==null?void 0:A.index)!==void 0&&(r==null||r(A.index),P(e[A.index])),y(e)},[e]),[C]}var AM=(typeof navigator>"u"?"undefined":Kn(navigator))==="object"&&/Firefox/i.test(navigator.userAgent);const Hz=function(e,t){var r=T.useRef(!1),a=T.useRef(null);function c(){clearTimeout(a.current),r.current=!0,a.current=setTimeout(function(){r.current=!1},50)}var f=T.useRef({top:e,bottom:t});return f.current.top=e,f.current.bottom=t,function(y){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,w=y<0&&f.current.top||y>0&&f.current.bottom;return l&&w?(clearTimeout(a.current),r.current=!1):(!w||r.current)&&c(),!r.current&&w}};function i9(e,t,r,a,c){var f=T.useRef(0),y=T.useRef(null),l=T.useRef(null),w=T.useRef(!1),C=Hz(t,r);function P(Z,j){yi.cancel(y.current),f.current+=j,l.current=j,!C(j)&&(AM||Z.preventDefault(),y.current=yi(function(){var B=w.current?10:1;c(f.current*B),f.current=0}))}function A(Z,j){c(j,!0),AM||Z.preventDefault()}var D=T.useRef(null),N=T.useRef(null);function F(Z){if(e){yi.cancel(N.current),N.current=yi(function(){D.current=null},2);var j=Z.deltaX,B=Z.deltaY,H=Z.shiftKey,Y=j,ne=B;(D.current==="sx"||!D.current&&H&&B&&!j)&&(Y=B,ne=0,D.current="sx");var re=Math.abs(Y),Q=Math.abs(ne);D.current===null&&(D.current=a&&re>Q?"x":"y"),D.current==="y"?P(Z,ne):A(Z,Y)}}function U(Z){e&&(w.current=Z.detail===l.current)}return[F,U]}var o9=14/15;function a9(e,t,r){var a=T.useRef(!1),c=T.useRef(0),f=T.useRef(null),y=T.useRef(null),l,w=function(D){if(a.current){var N=Math.ceil(D.touches[0].pageY),F=c.current-N;c.current=N,r(F)&&D.preventDefault(),clearInterval(y.current),y.current=setInterval(function(){F*=o9,(!r(F,!0)||Math.abs(F)<=.1)&&clearInterval(y.current)},16)}},C=function(){a.current=!1,l()},P=function(D){l(),D.touches.length===1&&!a.current&&(a.current=!0,c.current=Math.ceil(D.touches[0].pageY),f.current=D.target,f.current.addEventListener("touchmove",w),f.current.addEventListener("touchend",C))};l=function(){f.current&&(f.current.removeEventListener("touchmove",w),f.current.removeEventListener("touchend",C))},Lr(function(){return e&&t.current.addEventListener("touchstart",P),function(){var A;(A=t.current)===null||A===void 0||A.removeEventListener("touchstart",P),l(),clearInterval(y.current)}},[e])}var s9=20;function RM(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=e/t*100;return isNaN(r)&&(r=0),r=Math.max(r,s9),r=Math.min(r,e/2),Math.floor(r)}function l9(e,t,r,a){var c=T.useMemo(function(){return[new Map,[]]},[e,r.id,a]),f=$t(c,2),y=f[0],l=f[1],w=function(P){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:P,D=y.get(P),N=y.get(A);if(D===void 0||N===void 0)for(var F=e.length,U=l.length;U<F;U+=1){var Z,j=e[U],B=t(j);y.set(B,U);var H=(Z=r.get(B))!==null&&Z!==void 0?Z:a;if(l[U]=(l[U-1]||0)+H,B===P&&(D=U),B===A&&(N=U),D!==void 0&&N!==void 0)break}return{top:l[D-1]||0,bottom:l[N]}};return w}var c9=["prefixCls","className","height","itemHeight","fullHeight","style","data","children","itemKey","virtual","direction","scrollWidth","component","onScroll","onVirtualScroll","onVisibleChange","innerProps","extraRender","styles"],u9=[],d9={overflowY:"auto",overflowAnchor:"none"};function h9(e,t){var r=e.prefixCls,a=r===void 0?"rc-virtual-list":r,c=e.className,f=e.height,y=e.itemHeight,l=e.fullHeight,w=l===void 0?!0:l,C=e.style,P=e.data,A=e.children,D=e.itemKey,N=e.virtual,F=e.direction,U=e.scrollWidth,Z=e.component,j=Z===void 0?"div":Z,B=e.onScroll,H=e.onVirtualScroll,Y=e.onVisibleChange,ne=e.innerProps,re=e.extraRender,Q=e.styles,te=Vr(e,c9),ee=!!(N!==!1&&f&&y),ve=ee&&P&&(y*P.length>f||!!U),he=F==="rtl",oe=kt(a,ke({},"".concat(a,"-rtl"),he),c),fe=P||u9,Te=T.useRef(),Fe=T.useRef(),$e=T.useState(0),je=$t($e,2),pe=je[0],He=je[1],Be=T.useState(0),Ze=$t(Be,2),nt=Ze[0],yt=Ze[1],Ot=T.useState(!1),Mt=$t(Ot,2),Ft=Mt[0],Nt=Mt[1],Ct=function(){Nt(!0)},ut=function(){Nt(!1)},At=T.useCallback(function(on){return typeof D=="function"?D(on):on==null?void 0:on[D]},[D]),dt={getKey:At};function Bt(on){He(function(tn){var Sn;typeof on=="function"?Sn=on(tn):Sn=on;var Tr=W(Sn);return Te.current.scrollTop=Tr,Tr})}var gt=T.useRef({start:0,end:fe.length}),jt=T.useRef(),zt=r9(fe,At),an=$t(zt,1),Kt=an[0];jt.current=Kt;var Ut=QV(At,null,null),at=$t(Ut,4),it=at[0],Rt=at[1],bt=at[2],sn=at[3],An=T.useMemo(function(){if(!ee)return{scrollHeight:void 0,start:0,end:fe.length-1,offset:void 0};if(!ve){var on;return{scrollHeight:((on=Fe.current)===null||on===void 0?void 0:on.offsetHeight)||0,start:0,end:fe.length-1,offset:void 0}}for(var tn=0,Sn,Tr,ri,En=fe.length,Ni=0;Ni<En;Ni+=1){var xo=fe[Ni],Po=At(xo),no=bt.get(Po),Hr=tn+(no===void 0?y:no);Hr>=pe&&Sn===void 0&&(Sn=Ni,Tr=tn),Hr>pe+f&&ri===void 0&&(ri=Ni),tn=Hr}return Sn===void 0&&(Sn=0,Tr=0,ri=Math.ceil(f/y)),ri===void 0&&(ri=fe.length-1),ri=Math.min(ri+1,fe.length-1),{scrollHeight:tn,start:Sn,end:ri,offset:Tr}},[ve,ee,pe,fe,sn,f]),Mn=An.scrollHeight,rn=An.start,Vn=An.end,Nn=An.offset;gt.current.start=rn,gt.current.end=Vn;var zn=T.useState({width:0,height:f}),vn=$t(zn,2),nn=vn[0],Wn=vn[1],jn=function(tn){Wn({width:tn.width||tn.offsetWidth,height:tn.height||tn.offsetHeight})},fr=T.useRef(),or=T.useRef(),qn=T.useMemo(function(){return RM(nn.width,U)},[nn.width,U]),Qn=T.useMemo(function(){return RM(nn.height,Mn)},[nn.height,Mn]),Rr=Mn-f,_e=T.useRef(Rr);_e.current=Rr;function W(on){var tn=on;return Number.isNaN(_e.current)||(tn=Math.min(tn,_e.current)),tn=Math.max(tn,0),tn}var J=pe<=0,ue=pe>=Rr,Se=Hz(J,ue),Ie=function(){return{x:he?-nt:nt,y:pe}},Me=T.useRef(Ie()),De=ia(function(){if(H){var on=Ie();(Me.current.x!==on.x||Me.current.y!==on.y)&&(H(on),Me.current=on)}});function we(on,tn){var Sn=on;tn?(vc.flushSync(function(){yt(Sn)}),De()):Bt(Sn)}function Le(on){var tn=on.currentTarget.scrollTop;tn!==pe&&Bt(tn),B==null||B(on),De()}var Ne=function(tn){var Sn=tn,Tr=U-nn.width;return Sn=Math.max(Sn,0),Sn=Math.min(Sn,Tr),Sn},Je=ia(function(on,tn){tn?(vc.flushSync(function(){yt(function(Sn){var Tr=Sn+(he?-on:on);return Ne(Tr)})}),De()):Bt(function(Sn){var Tr=Sn+on;return Tr})}),Ge=i9(ee,J,ue,!!U,Je),_t=$t(Ge,2),Yt=_t[0],Zt=_t[1];a9(ee,Te,function(on,tn){return Se(on,tn)?!1:(Yt({preventDefault:function(){},deltaY:on}),!0)}),Lr(function(){function on(Sn){ee&&Sn.preventDefault()}var tn=Te.current;return tn.addEventListener("wheel",Yt),tn.addEventListener("DOMMouseScroll",Zt),tn.addEventListener("MozMousePixelScroll",on),function(){tn.removeEventListener("wheel",Yt),tn.removeEventListener("DOMMouseScroll",Zt),tn.removeEventListener("MozMousePixelScroll",on)}},[ee]),Lr(function(){U&&yt(function(on){return Ne(on)})},[nn.width,U]);var un=function(){var tn,Sn;(tn=fr.current)===null||tn===void 0||tn.delayHidden(),(Sn=or.current)===null||Sn===void 0||Sn.delayHidden()},ln=t9(Te,fe,bt,y,At,function(){return Rt(!0)},Bt,un);T.useImperativeHandle(t,function(){return{getScrollInfo:Ie,scrollTo:function(tn){function Sn(Tr){return Tr&&Kn(Tr)==="object"&&("left"in Tr||"top"in Tr)}Sn(tn)?(tn.left!==void 0&&yt(Ne(tn.left)),ln(tn.top)):ln(tn)}}}),Lr(function(){if(Y){var on=fe.slice(rn,Vn+1);Y(on,fe)}},[rn,Vn,fe]);var Gn=l9(fe,At,bt,y),On=re==null?void 0:re({start:rn,end:Vn,virtual:ve,offsetX:nt,offsetY:Nn,rtl:he,getSize:Gn}),er=YV(fe,rn,Vn,U,it,A,dt),Zn=null;f&&(Zn=st(ke({},w?"height":"maxHeight",f),d9),ee&&(Zn.overflowY="hidden",U&&(Zn.overflowX="hidden"),Ft&&(Zn.pointerEvents="none")));var Zr={};return he&&(Zr.dir="rtl"),T.createElement("div",Cn({style:st(st({},C),{},{position:"relative"}),className:oe},Zr,te),T.createElement(xl,{onResize:jn},T.createElement(j,{className:"".concat(a,"-holder"),style:Zn,ref:Te,onScroll:Le,onMouseEnter:un},T.createElement(Vz,{prefixCls:a,height:Mn,offsetX:nt,offsetY:Nn,scrollWidth:U,onInnerResize:Rt,ref:Fe,innerProps:ne,rtl:he,extra:On},er))),ve&&Mn>f&&T.createElement(PM,{ref:fr,prefixCls:a,scrollOffset:pe,scrollRange:Mn,rtl:he,onScroll:we,onStartMove:Ct,onStopMove:ut,spinSize:Qn,containerSize:nn.height,style:Q==null?void 0:Q.verticalScrollBar,thumbStyle:Q==null?void 0:Q.verticalScrollBarThumb}),ve&&U&&T.createElement(PM,{ref:or,prefixCls:a,scrollOffset:nt,scrollRange:U,rtl:he,onScroll:we,onStartMove:Ct,onStopMove:ut,spinSize:qn,containerSize:nn.width,horizontal:!0,style:Q==null?void 0:Q.horizontalScrollBar,thumbStyle:Q==null?void 0:Q.horizontalScrollBarThumb}))}var Gz=T.forwardRef(h9);Gz.displayName="List";var Wz=T.createContext(null);function f9(){return/(mac\sos|macintosh)/i.test(navigator.appVersion)}var p9=["disabled","title","children","style","className"];function OM(e){return typeof e=="string"||typeof e=="number"}var m9=function(t,r){var a=qU(),c=a.prefixCls,f=a.id,y=a.open,l=a.multiple,w=a.mode,C=a.searchValue,P=a.toggleOpen,A=a.notFoundContent,D=a.onPopupScroll,N=T.useContext(Wz),F=N.flattenOptions,U=N.onActiveValue,Z=N.defaultActiveFirstOption,j=N.onSelect,B=N.menuItemSelectedIcon,H=N.rawValues,Y=N.fieldNames,ne=N.virtual,re=N.direction,Q=N.listHeight,te=N.listItemHeight,ee=N.optionRender,ve="".concat(c,"-item"),he=f0(function(){return F},[y,F],function(Ct,ut){return ut[0]&&Ct[1]!==ut[1]}),oe=T.useRef(null),fe=function(ut){ut.preventDefault()},Te=function(ut){oe.current&&oe.current.scrollTo(typeof ut=="number"?{index:ut}:ut)},Fe=function(ut){for(var At=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,dt=he.length,Bt=0;Bt<dt;Bt+=1){var gt=(ut+Bt*At+dt)%dt,jt=he[gt],zt=jt.group,an=jt.data;if(!zt&&!an.disabled)return gt}return-1},$e=T.useState(function(){return Fe(0)}),je=$t($e,2),pe=je[0],He=je[1],Be=function(ut){var At=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;He(ut);var dt={source:At?"keyboard":"mouse"},Bt=he[ut];if(!Bt){U(null,-1,dt);return}U(Bt.value,ut,dt)};T.useEffect(function(){Be(Z!==!1?Fe(0):-1)},[he.length,C]);var Ze=T.useCallback(function(Ct){return H.has(Ct)&&w!=="combobox"},[w,_n(H).toString(),H.size]);T.useEffect(function(){var Ct=setTimeout(function(){if(!l&&y&&H.size===1){var At=Array.from(H)[0],dt=he.findIndex(function(Bt){var gt=Bt.data;return gt.value===At});dt!==-1&&(Be(dt),Te(dt))}});if(y){var ut;(ut=oe.current)===null||ut===void 0||ut.scrollTo(void 0)}return function(){return clearTimeout(Ct)}},[y,C]);var nt=function(ut){ut!==void 0&&j(ut,{selected:!H.has(ut)}),l||P(!1)};if(T.useImperativeHandle(r,function(){return{onKeyDown:function(ut){var At=ut.which,dt=ut.ctrlKey;switch(At){case Vt.N:case Vt.P:case Vt.UP:case Vt.DOWN:{var Bt=0;if(At===Vt.UP?Bt=-1:At===Vt.DOWN?Bt=1:f9()&&dt&&(At===Vt.N?Bt=1:At===Vt.P&&(Bt=-1)),Bt!==0){var gt=Fe(pe+Bt,Bt);Te(gt),Be(gt,!0)}break}case Vt.ENTER:{var jt=he[pe];jt&&!jt.data.disabled?nt(jt.value):nt(void 0),y&&ut.preventDefault();break}case Vt.ESC:P(!1),y&&ut.stopPropagation()}},onKeyUp:function(){},scrollTo:function(ut){Te(ut)}}}),he.length===0)return T.createElement("div",{role:"listbox",id:"".concat(f,"_list"),className:"".concat(ve,"-empty"),onMouseDown:fe},A);var yt=Object.keys(Y).map(function(Ct){return Y[Ct]}),Ot=function(ut){return ut.label};function Mt(Ct,ut){var At=Ct.group;return{role:At?"presentation":"option",id:"".concat(f,"_list_").concat(ut)}}var Ft=function(ut){var At=he[ut];if(!At)return null;var dt=At.data||{},Bt=dt.value,gt=At.group,jt=_h(dt,!0),zt=Ot(At);return At?T.createElement("div",Cn({"aria-label":typeof zt=="string"&&!gt?zt:null},jt,{key:ut},Mt(At,ut),{"aria-selected":Ze(Bt)}),Bt):null},Nt={role:"listbox",id:"".concat(f,"_list")};return T.createElement(T.Fragment,null,ne&&T.createElement("div",Cn({},Nt,{style:{height:0,width:0,overflow:"hidden"}}),Ft(pe-1),Ft(pe),Ft(pe+1)),T.createElement(Gz,{itemKey:"key",ref:oe,data:he,height:Q,itemHeight:te,fullHeight:!1,onMouseDown:fe,onScroll:D,virtual:ne,direction:re,innerProps:ne?null:Nt},function(Ct,ut){var At,dt=Ct.group,Bt=Ct.groupOption,gt=Ct.data,jt=Ct.label,zt=Ct.value,an=gt.key;if(dt){var Kt,Ut=(Kt=gt.title)!==null&&Kt!==void 0?Kt:OM(jt)?jt.toString():void 0;return T.createElement("div",{className:kt(ve,"".concat(ve,"-group")),title:Ut},jt!==void 0?jt:an)}var at=gt.disabled,it=gt.title;gt.children;var Rt=gt.style,bt=gt.className,sn=Vr(gt,p9),An=Sc(sn,yt),Mn=Ze(zt),rn="".concat(ve,"-option"),Vn=kt(ve,rn,bt,(At={},ke(At,"".concat(rn,"-grouped"),Bt),ke(At,"".concat(rn,"-active"),pe===ut&&!at),ke(At,"".concat(rn,"-disabled"),at),ke(At,"".concat(rn,"-selected"),Mn),At)),Nn=Ot(Ct),zn=!B||typeof B=="function"||Mn,vn=typeof Nn=="number"?Nn:Nn||zt,nn=OM(vn)?vn.toString():void 0;return it!==void 0&&(nn=it),T.createElement("div",Cn({},_h(An),ne?{}:Mt(Ct,ut),{"aria-selected":Mn,className:Vn,title:nn,onMouseMove:function(){pe===ut||at||Be(ut)},onClick:function(){at||nt(zt)},style:Rt}),T.createElement("div",{className:"".concat(rn,"-content")},typeof ee=="function"?ee(Ct,{index:ut}):vn),T.isValidElement(B)||Mn,zn&&T.createElement(T0,{className:"".concat(ve,"-option-state"),customizeIcon:B,customizeIconProps:{value:zt,disabled:at,isSelected:Mn}},Mn?"✓":null))}))},qz=T.forwardRef(m9);qz.displayName="OptionList";const g9=function(e,t){var r=T.useRef({values:new Map,options:new Map}),a=T.useMemo(function(){var f=r.current,y=f.values,l=f.options,w=e.map(function(A){if(A.label===void 0){var D;return st(st({},A),{},{label:(D=y.get(A.value))===null||D===void 0?void 0:D.label})}return A}),C=new Map,P=new Map;return w.forEach(function(A){C.set(A.value,A),P.set(A.value,t.get(A.value)||l.get(A.value))}),r.current.values=C,r.current.options=P,w},[e,t]),c=T.useCallback(function(f){return t.get(f)||r.current.options.get(f)},[t]);return[a,c]};function p1(e,t){return kz(e).join("").toUpperCase().includes(t)}const v9=function(e,t,r,a,c){return T.useMemo(function(){if(!r||a===!1)return e;var f=t.options,y=t.label,l=t.value,w=[],C=typeof a=="function",P=r.toUpperCase(),A=C?a:function(N,F){return c?p1(F[c],P):F[f]?p1(F[y!=="children"?y:"label"],P):p1(F[l],P)},D=C?function(N){return fw(N)}:function(N){return N};return e.forEach(function(N){if(N[f]){var F=A(r,D(N));if(F)w.push(N);else{var U=N[f].filter(function(Z){return A(r,D(Z))});U.length&&w.push(st(st({},N),{},ke({},f,U)))}return}A(r,D(N))&&w.push(N)}),w},[e,a,c,r,t])};var zM=0,y9=yo();function _9(){var e;return y9?(e=zM,zM+=1):e="TEST_OR_SSR",e}function x9(e){var t=T.useState(),r=$t(t,2),a=r[0],c=r[1];return T.useEffect(function(){c("rc_select_".concat(_9()))},[]),e||a}var b9=["children","value"],w9=["children"];function S9(e){var t=e,r=t.key,a=t.props,c=a.children,f=a.value,y=Vr(a,b9);return st({key:r,value:f!==void 0?f:r,children:c},y)}function Zz(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return hl(e).map(function(r,a){if(!T.isValidElement(r)||!r.type)return null;var c=r,f=c.type.isSelectOptGroup,y=c.key,l=c.props,w=l.children,C=Vr(l,w9);return t||!f?S9(r):st(st({key:"__RC_SELECT_GRP__".concat(y===null?a:y,"__"),label:y},C),{},{options:Zz(w)})}).filter(function(r){return r})}function E9(e,t,r,a,c){return T.useMemo(function(){var f=e,y=!e;y&&(f=Zz(t));var l=new Map,w=new Map,C=function(D,N,F){F&&typeof F=="string"&&D.set(N[F],N)};function P(A){for(var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,N=0;N<A.length;N+=1){var F=A[N];!F[r.options]||D?(l.set(F[r.value],F),C(w,F,r.label),C(w,F,a),C(w,F,c)):P(F[r.options],!0)}}return P(f),{options:f,valueOptions:l,labelOptions:w}},[e,t,r,a,c])}function DM(e){var t=T.useRef();t.current=e;var r=T.useCallback(function(){return t.current.apply(t,arguments)},[]);return r}var C9=["id","mode","prefixCls","backfill","fieldNames","inputValue","searchValue","onSearch","autoClearSearchValue","onSelect","onDeselect","dropdownMatchSelectWidth","filterOption","filterSort","optionFilterProp","optionLabelProp","options","optionRender","children","defaultActiveFirstOption","menuItemSelectedIcon","virtual","direction","listHeight","listItemHeight","value","defaultValue","labelInValue","onChange"],T9=["inputValue"];function I9(e){return!e||Kn(e)!=="object"}var M9=T.forwardRef(function(e,t){var r=e.id,a=e.mode,c=e.prefixCls,f=c===void 0?"rc-select":c,y=e.backfill,l=e.fieldNames,w=e.inputValue,C=e.searchValue,P=e.onSearch,A=e.autoClearSearchValue,D=A===void 0?!0:A,N=e.onSelect,F=e.onDeselect,U=e.dropdownMatchSelectWidth,Z=U===void 0?!0:U,j=e.filterOption,B=e.filterSort,H=e.optionFilterProp,Y=e.optionLabelProp,ne=e.options,re=e.optionRender,Q=e.children,te=e.defaultActiveFirstOption,ee=e.menuItemSelectedIcon,ve=e.virtual,he=e.direction,oe=e.listHeight,fe=oe===void 0?200:oe,Te=e.listItemHeight,Fe=Te===void 0?20:Te,$e=e.value,je=e.defaultValue,pe=e.labelInValue,He=e.onChange,Be=Vr(e,C9),Ze=x9(r),nt=pw(a),yt=!!(!ne&&Q),Ot=T.useMemo(function(){return j===void 0&&a==="combobox"?!1:j},[j,a]),Mt=T.useMemo(function(){return Uz(l,yt)},[JSON.stringify(l),yt]),Ft=ms("",{value:C!==void 0?C:w,postState:function(Je){return Je||""}}),Nt=$t(Ft,2),Ct=Nt[0],ut=Nt[1],At=E9(ne,Q,Mt,H,Y),dt=At.valueOptions,Bt=At.labelOptions,gt=At.options,jt=T.useCallback(function(Ne){var Je=kz(Ne);return Je.map(function(Ge){var _t,Yt,Zt,un,ln;if(I9(Ge))_t=Ge;else{var Gn;Zt=Ge.key,Yt=Ge.label,_t=(Gn=Ge.value)!==null&&Gn!==void 0?Gn:Zt}var On=dt.get(_t);if(On){var er;Yt===void 0&&(Yt=On==null?void 0:On[Y||Mt.label]),Zt===void 0&&(Zt=(er=On==null?void 0:On.key)!==null&&er!==void 0?er:_t),un=On==null?void 0:On.disabled,ln=On==null?void 0:On.title}return{label:Yt,value:_t,key:Zt,disabled:un,title:ln}})},[Mt,Y,dt]),zt=ms(je,{value:$e}),an=$t(zt,2),Kt=an[0],Ut=an[1],at=T.useMemo(function(){var Ne,Je=jt(Kt);return a==="combobox"&&dV((Ne=Je[0])===null||Ne===void 0?void 0:Ne.value)?[]:Je},[Kt,jt,a]),it=g9(at,dt),Rt=$t(it,2),bt=Rt[0],sn=Rt[1],An=T.useMemo(function(){if(!a&&bt.length===1){var Ne=bt[0];if(Ne.value===null&&(Ne.label===null||Ne.label===void 0))return[]}return bt.map(function(Je){var Ge;return st(st({},Je),{},{label:(Ge=Je.label)!==null&&Ge!==void 0?Ge:Je.value})})},[a,bt]),Mn=T.useMemo(function(){return new Set(bt.map(function(Ne){return Ne.value}))},[bt]);T.useEffect(function(){if(a==="combobox"){var Ne,Je=(Ne=bt[0])===null||Ne===void 0?void 0:Ne.value;ut(uV(Je)?String(Je):"")}},[bt]);var rn=DM(function(Ne,Je){var Ge,_t=Je??Ne;return Ge={},ke(Ge,Mt.value,Ne),ke(Ge,Mt.label,_t),Ge}),Vn=T.useMemo(function(){if(a!=="tags")return gt;var Ne=_n(gt),Je=function(_t){return dt.has(_t)};return _n(bt).sort(function(Ge,_t){return Ge.value<_t.value?-1:1}).forEach(function(Ge){var _t=Ge.value;Je(_t)||Ne.push(rn(_t,Ge.label))}),Ne},[rn,gt,dt,bt,a]),Nn=v9(Vn,Mt,Ct,Ot,H),zn=T.useMemo(function(){return a!=="tags"||!Ct||Nn.some(function(Ne){return Ne[H||"value"]===Ct})||Nn.some(function(Ne){return Ne[Mt.value]===Ct})?Nn:[rn(Ct)].concat(_n(Nn))},[rn,H,a,Nn,Ct,Mt]),vn=T.useMemo(function(){return B?_n(zn).sort(function(Ne,Je){return B(Ne,Je)}):zn},[zn,B]),nn=T.useMemo(function(){return GV(vn,{fieldNames:Mt,childrenAsData:yt})},[vn,Mt,yt]),Wn=function(Je){var Ge=jt(Je);if(Ut(Ge),He&&(Ge.length!==bt.length||Ge.some(function(Zt,un){var ln;return((ln=bt[un])===null||ln===void 0?void 0:ln.value)!==(Zt==null?void 0:Zt.value)}))){var _t=pe?Ge:Ge.map(function(Zt){return Zt.value}),Yt=Ge.map(function(Zt){return fw(sn(Zt.value))});He(nt?_t:_t[0],nt?Yt:Yt[0])}},jn=T.useState(null),fr=$t(jn,2),or=fr[0],qn=fr[1],Qn=T.useState(0),Rr=$t(Qn,2),_e=Rr[0],W=Rr[1],J=te!==void 0?te:a!=="combobox",ue=T.useCallback(function(Ne,Je){var Ge=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},_t=Ge.source,Yt=_t===void 0?"keyboard":_t;W(Je),y&&a==="combobox"&&Ne!==null&&Yt==="keyboard"&&qn(String(Ne))},[y,a]),Se=function(Je,Ge,_t){var Yt=function(){var tn,Sn=sn(Je);return[pe?{label:Sn==null?void 0:Sn[Mt.label],value:Je,key:(tn=Sn==null?void 0:Sn.key)!==null&&tn!==void 0?tn:Je}:Je,fw(Sn)]};if(Ge&&N){var Zt=Yt(),un=$t(Zt,2),ln=un[0],Gn=un[1];N(ln,Gn)}else if(!Ge&&F&&_t!=="clear"){var On=Yt(),er=$t(On,2),Zn=er[0],Zr=er[1];F(Zn,Zr)}},Ie=DM(function(Ne,Je){var Ge,_t=nt?Je.selected:!0;_t?Ge=nt?[].concat(_n(bt),[Ne]):[Ne]:Ge=bt.filter(function(Yt){return Yt.value!==Ne}),Wn(Ge),Se(Ne,_t),a==="combobox"?qn(""):(!pw||D)&&(ut(""),qn(""))}),Me=function(Je,Ge){Wn(Je);var _t=Ge.type,Yt=Ge.values;(_t==="remove"||_t==="clear")&&Yt.forEach(function(Zt){Se(Zt.value,!1,_t)})},De=function(Je,Ge){if(ut(Je),qn(null),Ge.source==="submit"){var _t=(Je||"").trim();if(_t){var Yt=Array.from(new Set([].concat(_n(Mn),[_t])));Wn(Yt),Se(_t,!0),ut("")}return}Ge.source!=="blur"&&(a==="combobox"&&Wn(Je),P==null||P(Je))},we=function(Je){var Ge=Je;a!=="tags"&&(Ge=Je.map(function(Yt){var Zt=Bt.get(Yt);return Zt==null?void 0:Zt.value}).filter(function(Yt){return Yt!==void 0}));var _t=Array.from(new Set([].concat(_n(Mn),_n(Ge))));Wn(_t),_t.forEach(function(Yt){Se(Yt,!0)})},Le=T.useMemo(function(){var Ne=ve!==!1&&Z!==!1;return st(st({},At),{},{flattenOptions:nn,onActiveValue:ue,defaultActiveFirstOption:J,onSelect:Ie,menuItemSelectedIcon:ee,rawValues:Mn,fieldNames:Mt,virtual:Ne,direction:he,listHeight:fe,listItemHeight:Fe,childrenAsData:yt,optionRender:re})},[At,nn,ue,J,Ie,ee,Mn,Mt,ve,Z,fe,Fe,yt,re]);return T.createElement(Wz.Provider,{value:Le},T.createElement(XV,Cn({},Be,{id:Ze,prefixCls:f,ref:t,omitDomProps:T9,mode:a,displayValues:An,onDisplayValuesChange:Me,direction:he,searchValue:Ct,onSearch:De,autoClearSearchValue:D,onSearchSplit:we,dropdownMatchSelectWidth:Z,OptionList:qz,emptyOptions:!nn.length,activeValue:or,activeDescendantId:"".concat(Ze,"_list_").concat(_e)})))}),XS=M9;XS.Option=ZS;XS.OptGroup=qS;function sh(e,t,r){return kt({[`${e}-status-success`]:t==="success",[`${e}-status-warning`]:t==="warning",[`${e}-status-error`]:t==="error",[`${e}-status-validating`]:t==="validating",[`${e}-has-feedback`]:r})}const KS=(e,t)=>t||e,P9=()=>{const[,e]=Fs(),r=new Ji(e.colorBgBase).toHsl().l<.5?{opacity:.65}:{};return T.createElement("svg",{style:r,width:"184",height:"152",viewBox:"0 0 184 152",xmlns:"http://www.w3.org/2000/svg"},T.createElement("g",{fill:"none",fillRule:"evenodd"},T.createElement("g",{transform:"translate(24 31.67)"},T.createElement("ellipse",{fillOpacity:".8",fill:"#F5F5F7",cx:"67.797",cy:"106.89",rx:"67.797",ry:"12.668"}),T.createElement("path",{d:"M122.034 69.674L98.109 40.229c-1.148-1.386-2.826-2.225-4.593-2.225h-51.44c-1.766 0-3.444.839-4.592 2.225L13.56 69.674v15.383h108.475V69.674z",fill:"#AEB8C2"}),T.createElement("path",{d:"M101.537 86.214L80.63 61.102c-1.001-1.207-2.507-1.867-4.048-1.867H31.724c-1.54 0-3.047.66-4.048 1.867L6.769 86.214v13.792h94.768V86.214z",fill:"url(#linearGradient-1)",transform:"translate(13.56)"}),T.createElement("path",{d:"M33.83 0h67.933a4 4 0 0 1 4 4v93.344a4 4 0 0 1-4 4H33.83a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4z",fill:"#F5F5F7"}),T.createElement("path",{d:"M42.678 9.953h50.237a2 2 0 0 1 2 2V36.91a2 2 0 0 1-2 2H42.678a2 2 0 0 1-2-2V11.953a2 2 0 0 1 2-2zM42.94 49.767h49.713a2.262 2.262 0 1 1 0 4.524H42.94a2.262 2.262 0 0 1 0-4.524zM42.94 61.53h49.713a2.262 2.262 0 1 1 0 4.525H42.94a2.262 2.262 0 0 1 0-4.525zM121.813 105.032c-.775 3.071-3.497 5.36-6.735 5.36H20.515c-3.238 0-5.96-2.29-6.734-5.36a7.309 7.309 0 0 1-.222-1.79V69.675h26.318c2.907 0 5.25 2.448 5.25 5.42v.04c0 2.971 2.37 5.37 5.277 5.37h34.785c2.907 0 5.277-2.421 5.277-5.393V75.1c0-2.972 2.343-5.426 5.25-5.426h26.318v33.569c0 .617-.077 1.216-.221 1.789z",fill:"#DCE0E6"})),T.createElement("path",{d:"M149.121 33.292l-6.83 2.65a1 1 0 0 1-1.317-1.23l1.937-6.207c-2.589-2.944-4.109-6.534-4.109-10.408C138.802 8.102 148.92 0 161.402 0 173.881 0 184 8.102 184 18.097c0 9.995-10.118 18.097-22.599 18.097-4.528 0-8.744-1.066-12.28-2.902z",fill:"#DCE0E6"}),T.createElement("g",{transform:"translate(149.65 15.383)",fill:"#FFF"},T.createElement("ellipse",{cx:"20.654",cy:"3.167",rx:"2.849",ry:"2.815"}),T.createElement("path",{d:"M5.698 5.63H0L2.898.704zM9.259.704h4.985V5.63H9.259z"}))))},A9=P9,R9=()=>{const[,e]=Fs(),{colorFill:t,colorFillTertiary:r,colorFillQuaternary:a,colorBgContainer:c}=e,{borderColor:f,shadowColor:y,contentColor:l}=T.useMemo(()=>({borderColor:new Ji(t).onBackground(c).toHexShortString(),shadowColor:new Ji(r).onBackground(c).toHexShortString(),contentColor:new Ji(a).onBackground(c).toHexShortString()}),[t,r,a,c]);return T.createElement("svg",{width:"64",height:"41",viewBox:"0 0 64 41",xmlns:"http://www.w3.org/2000/svg"},T.createElement("g",{transform:"translate(0 1)",fill:"none",fillRule:"evenodd"},T.createElement("ellipse",{fill:y,cx:"32",cy:"33",rx:"32",ry:"7"}),T.createElement("g",{fillRule:"nonzero",stroke:f},T.createElement("path",{d:"M55 12.76L44.854 1.258C44.367.474 43.656 0 42.907 0H21.093c-.749 0-1.46.474-1.947 1.257L9 12.761V22h46v-9.24z"}),T.createElement("path",{d:"M41.613 15.931c0-1.605.994-2.93 2.227-2.931H55v18.137C55 33.26 53.68 35 52.05 35h-40.1C10.32 35 9 33.259 9 31.137V13h11.16c1.233 0 2.227 1.323 2.227 2.928v.022c0 1.605 1.005 2.901 2.237 2.901h14.752c1.232 0 2.237-1.308 2.237-2.913v-.007z",fill:l}))))},O9=R9,z9=e=>{const{componentCls:t,margin:r,marginXS:a,marginXL:c,fontSize:f,lineHeight:y}=e;return{[t]:{marginInline:a,fontSize:f,lineHeight:y,textAlign:"center",[`${t}-image`]:{height:e.emptyImgHeight,marginBottom:a,opacity:e.opacityImage,img:{height:"100%"},svg:{maxWidth:"100%",height:"100%",margin:"auto"}},[`${t}-description`]:{color:e.colorText},[`${t}-footer`]:{marginTop:r},"&-normal":{marginBlock:c,color:e.colorTextDisabled,[`${t}-description`]:{color:e.colorTextDisabled},[`${t}-image`]:{height:e.emptyImgHeightMD}},"&-small":{marginBlock:a,color:e.colorTextDisabled,[`${t}-image`]:{height:e.emptyImgHeightSM}}}}},D9=_o("Empty",e=>{const{componentCls:t,controlHeightLG:r}=e,a=$r(e,{emptyImgCls:`${t}-img`,emptyImgHeight:r*2.5,emptyImgHeightMD:r,emptyImgHeightSM:r*.875});return[z9(a)]});var L9=globalThis&&globalThis.__rest||function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(r[a[c]]=e[a[c]]);return r};const Xz=T.createElement(A9,null),Kz=T.createElement(O9,null),YS=e=>{var{className:t,rootClassName:r,prefixCls:a,image:c=Xz,description:f,children:y,imageStyle:l,style:w}=e,C=L9(e,["className","rootClassName","prefixCls","image","description","children","imageStyle","style"]);const{getPrefixCls:P,direction:A,empty:D}=T.useContext(cr),N=P("empty",a),[F,U]=D9(N),[Z]=OS("Empty"),j=typeof f<"u"?f:Z==null?void 0:Z.description,B=typeof j=="string"?j:"empty";let H=null;return typeof c=="string"?H=T.createElement("img",{alt:B,src:c}):H=c,F(T.createElement("div",Object.assign({className:kt(U,N,D==null?void 0:D.className,{[`${N}-normal`]:c===Kz,[`${N}-rtl`]:A==="rtl"},t,r),style:Object.assign(Object.assign({},D==null?void 0:D.style),w)},C),T.createElement("div",{className:`${N}-image`,style:l},H),j&&T.createElement("div",{className:`${N}-description`},j),y&&T.createElement("div",{className:`${N}-footer`},y)))};YS.PRESENTED_IMAGE_DEFAULT=Xz;YS.PRESENTED_IMAGE_SIMPLE=Kz;const fp=YS,k9=e=>{const{componentName:t}=e,{getPrefixCls:r}=T.useContext(cr),a=r("empty");switch(t){case"Table":case"List":return pt.createElement(fp,{image:fp.PRESENTED_IMAGE_SIMPLE});case"Select":case"TreeSelect":case"Cascader":case"Transfer":case"Mentions":return pt.createElement(fp,{image:fp.PRESENTED_IMAGE_SIMPLE,className:`${a}-small`});default:return pt.createElement(fp,null)}},Yz=k9,$9=e=>{const{optionHeight:t,optionFontSize:r,optionLineHeight:a,optionPadding:c}=e;return{position:"relative",display:"block",minHeight:t,padding:c,color:e.colorText,fontWeight:"normal",fontSize:r,lineHeight:a,boxSizing:"border-box"}},F9=e=>{const{antCls:t,componentCls:r}=e,a=`${r}-item`,c=`&${t}-slide-up-enter${t}-slide-up-enter-active`,f=`&${t}-slide-up-appear${t}-slide-up-appear-active`,y=`&${t}-slide-up-leave${t}-slide-up-leave-active`,l=`${r}-dropdown-placement-`;return[{[`${r}-dropdown`]:Object.assign(Object.assign({},ca(e)),{position:"absolute",top:-9999,zIndex:e.zIndexPopup,boxSizing:"border-box",padding:e.paddingXXS,overflow:"hidden",fontSize:e.fontSize,fontVariant:"initial",backgroundColor:e.colorBgElevated,borderRadius:e.borderRadiusLG,outline:"none",boxShadow:e.boxShadowSecondary,[`
          ${c}${l}bottomLeft,
          ${f}${l}bottomLeft
        `]:{animationName:Ez},[`
          ${c}${l}topLeft,
          ${f}${l}topLeft,
          ${c}${l}topRight,
          ${f}${l}topRight
        `]:{animationName:Tz},[`${y}${l}bottomLeft`]:{animationName:Cz},[`
          ${y}${l}topLeft,
          ${y}${l}topRight
        `]:{animationName:Iz},"&-hidden":{display:"none"},[`${a}`]:Object.assign(Object.assign({},$9(e)),{cursor:"pointer",transition:`background ${e.motionDurationSlow} ease`,borderRadius:e.borderRadiusSM,"&-group":{color:e.colorTextDescription,fontSize:e.fontSizeSM,cursor:"default"},"&-option":{display:"flex","&-content":Object.assign({flex:"auto"},Vb),"&-state":{flex:"none",display:"flex",alignItems:"center"},[`&-active:not(${a}-option-disabled)`]:{backgroundColor:e.optionActiveBg},[`&-selected:not(${a}-option-disabled)`]:{color:e.optionSelectedColor,fontWeight:e.optionSelectedFontWeight,backgroundColor:e.optionSelectedBg,[`${a}-option-state`]:{color:e.colorPrimary}},"&-disabled":{[`&${a}-option-selected`]:{backgroundColor:e.colorBgContainerDisabled},color:e.colorTextDisabled,cursor:"not-allowed"},"&-grouped":{paddingInlineStart:e.controlPaddingHorizontal*2}}}),"&-rtl":{direction:"rtl"}})},fM(e,"slide-up"),fM(e,"slide-down"),hM(e,"move-up"),hM(e,"move-down")]},B9=F9,Rd=2,Jz=e=>{let{multipleSelectItemHeight:t,selectHeight:r,lineWidth:a}=e;const c=(r-t)/2-a,f=Math.ceil(c/2);return[c,f]};function m1(e,t){const{componentCls:r,iconCls:a}=e,c=`${r}-selection-overflow`,f=e.multipleSelectItemHeight,[y]=Jz(e),l=t?`${r}-${t}`:"";return{[`${r}-multiple${l}`]:{fontSize:e.fontSize,[c]:{position:"relative",display:"flex",flex:"auto",flexWrap:"wrap",maxWidth:"100%","&-item":{flex:"none",alignSelf:"center",maxWidth:"100%",display:"inline-flex"}},[`${r}-selector`]:{display:"flex",flexWrap:"wrap",alignItems:"center",height:"100%",padding:`${y-Rd}px ${Rd*2}px`,borderRadius:e.borderRadius,[`${r}-show-search&`]:{cursor:"text"},[`${r}-disabled&`]:{background:e.multipleSelectorBgDisabled,cursor:"not-allowed"},"&:after":{display:"inline-block",width:0,margin:`${Rd}px 0`,lineHeight:`${f}px`,visibility:"hidden",content:'"\\a0"'}},[`
        &${r}-show-arrow ${r}-selector,
        &${r}-allow-clear ${r}-selector
      `]:{paddingInlineEnd:e.fontSizeIcon+e.controlPaddingHorizontal},[`${r}-selection-item`]:{display:"flex",alignSelf:"center",flex:"none",boxSizing:"border-box",maxWidth:"100%",height:f,marginTop:Rd,marginBottom:Rd,lineHeight:`${f-e.lineWidth*2}px`,background:e.multipleItemBg,border:`${e.lineWidth}px ${e.lineType} ${e.multipleItemBorderColor}`,borderRadius:e.borderRadiusSM,cursor:"default",transition:`font-size ${e.motionDurationSlow}, line-height ${e.motionDurationSlow}, height ${e.motionDurationSlow}`,marginInlineEnd:Rd*2,paddingInlineStart:e.paddingXS,paddingInlineEnd:e.paddingXS/2,[`${r}-disabled&`]:{color:e.multipleItemColorDisabled,borderColor:e.multipleItemBorderColorDisabled,cursor:"not-allowed"},"&-content":{display:"inline-block",marginInlineEnd:e.paddingXS/2,overflow:"hidden",whiteSpace:"pre",textOverflow:"ellipsis"},"&-remove":Object.assign(Object.assign({},DS()),{display:"inline-flex",alignItems:"center",color:e.colorIcon,fontWeight:"bold",fontSize:10,lineHeight:"inherit",cursor:"pointer",[`> ${a}`]:{verticalAlign:"-0.2em"},"&:hover":{color:e.colorIconHover}})},[`${c}-item + ${c}-item`]:{[`${r}-selection-search`]:{marginInlineStart:0}},[`${c}-item-suffix`]:{height:"100%"},[`${r}-selection-search`]:{display:"inline-flex",position:"relative",maxWidth:"100%",marginInlineStart:e.inputPaddingHorizontalBase-y,"\n          &-input,\n          &-mirror\n        ":{height:f,fontFamily:e.fontFamily,lineHeight:`${f}px`,transition:`all ${e.motionDurationSlow}`},"&-input":{width:"100%",minWidth:4.1},"&-mirror":{position:"absolute",top:0,insetInlineStart:0,insetInlineEnd:"auto",zIndex:999,whiteSpace:"pre",visibility:"hidden"}},[`${r}-selection-placeholder`]:{position:"absolute",top:"50%",insetInlineStart:e.inputPaddingHorizontalBase,insetInlineEnd:e.inputPaddingHorizontalBase,transform:"translateY(-50%)",transition:`all ${e.motionDurationSlow}`}}}}const N9=e=>{const{componentCls:t}=e,r=$r(e,{selectHeight:e.controlHeightSM,multipleSelectItemHeight:e.controlHeightXS,borderRadius:e.borderRadiusSM,borderRadiusSM:e.borderRadiusXS}),a=$r(e,{fontSize:e.fontSizeLG,selectHeight:e.controlHeightLG,multipleSelectItemHeight:e.multipleItemHeightLG,borderRadius:e.borderRadiusLG,borderRadiusSM:e.borderRadius}),[,c]=Jz(e);return[m1(e),m1(r,"sm"),{[`${t}-multiple${t}-sm`]:{[`${t}-selection-placeholder`]:{insetInline:e.controlPaddingHorizontalSM-e.lineWidth},[`${t}-selection-search`]:{marginInlineStart:c}}},m1(a,"lg")]},j9=N9;function g1(e,t){const{componentCls:r,inputPaddingHorizontalBase:a,borderRadius:c}=e,f=e.controlHeight-e.lineWidth*2,y=Math.ceil(e.fontSize*1.25),l=t?`${r}-${t}`:"";return{[`${r}-single${l}`]:{fontSize:e.fontSize,height:e.controlHeight,[`${r}-selector`]:Object.assign(Object.assign({},ca(e,!0)),{display:"flex",borderRadius:c,[`${r}-selection-search`]:{position:"absolute",top:0,insetInlineStart:a,insetInlineEnd:a,bottom:0,"&-input":{width:"100%"}},[`
          ${r}-selection-item,
          ${r}-selection-placeholder
        `]:{padding:0,lineHeight:`${f}px`,transition:`all ${e.motionDurationSlow}, visibility 0s`,alignSelf:"center"},[`${r}-selection-placeholder`]:{transition:"none",pointerEvents:"none"},[["&:after",`${r}-selection-item:empty:after`,`${r}-selection-placeholder:empty:after`].join(",")]:{display:"inline-block",width:0,visibility:"hidden",content:'"\\a0"'}}),[`
        &${r}-show-arrow ${r}-selection-item,
        &${r}-show-arrow ${r}-selection-placeholder
      `]:{paddingInlineEnd:y},[`&${r}-open ${r}-selection-item`]:{color:e.colorTextPlaceholder},[`&:not(${r}-customize-input)`]:{[`${r}-selector`]:{width:"100%",height:"100%",padding:`0 ${a}px`,[`${r}-selection-search-input`]:{height:f},"&:after":{lineHeight:`${f}px`}}},[`&${r}-customize-input`]:{[`${r}-selector`]:{"&:after":{display:"none"},[`${r}-selection-search`]:{position:"static",width:"100%"},[`${r}-selection-placeholder`]:{position:"absolute",insetInlineStart:0,insetInlineEnd:0,padding:`0 ${a}px`,"&:after":{display:"none"}}}}}}}function U9(e){const{componentCls:t}=e,r=e.controlPaddingHorizontalSM-e.lineWidth;return[g1(e),g1($r(e,{controlHeight:e.controlHeightSM,borderRadius:e.borderRadiusSM}),"sm"),{[`${t}-single${t}-sm`]:{[`&:not(${t}-customize-input)`]:{[`${t}-selection-search`]:{insetInlineStart:r,insetInlineEnd:r},[`${t}-selector`]:{padding:`0 ${r}px`},[`&${t}-show-arrow ${t}-selection-search`]:{insetInlineEnd:r+e.fontSize*1.5},[`
            &${t}-show-arrow ${t}-selection-item,
            &${t}-show-arrow ${t}-selection-placeholder
          `]:{paddingInlineEnd:e.fontSize*1.5}}}},g1($r(e,{controlHeight:e.singleItemHeightLG,fontSize:e.fontSizeLG,borderRadius:e.borderRadiusLG}),"lg")]}const V9=e=>{const{componentCls:t,selectorBg:r}=e;return{position:"relative",backgroundColor:r,border:`${e.lineWidth}px ${e.lineType} ${e.colorBorder}`,transition:`all ${e.motionDurationMid} ${e.motionEaseInOut}`,input:{cursor:"pointer"},[`${t}-show-search&`]:{cursor:"text",input:{cursor:"auto",color:"inherit",height:"100%"}},[`${t}-disabled&`]:{color:e.colorTextDisabled,background:e.colorBgContainerDisabled,cursor:"not-allowed",[`${t}-multiple&`]:{background:e.multipleSelectorBgDisabled},input:{cursor:"not-allowed"}}}},v1=function(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const{componentCls:a,borderHoverColor:c,antCls:f,borderActiveColor:y,outlineColor:l,controlOutlineWidth:w}=t,C=r?{[`${a}-selector`]:{borderColor:y}}:{};return{[e]:{[`&:not(${a}-disabled):not(${a}-customize-input):not(${f}-pagination-size-changer)`]:Object.assign(Object.assign({},C),{[`&:hover ${a}-selector`]:{borderColor:c},[`${a}-focused& ${a}-selector`]:{borderColor:y,boxShadow:`0 0 0 ${w}px ${l}`,outline:0}})}}},H9=e=>{const{componentCls:t}=e;return{[`${t}-selection-search-input`]:{margin:0,padding:0,background:"transparent",border:"none",outline:"none",appearance:"none",fontFamily:"inherit","&::-webkit-search-cancel-button":{display:"none","-webkit-appearance":"none"}}}},G9=e=>{const{antCls:t,componentCls:r,inputPaddingHorizontalBase:a,iconCls:c}=e;return{[r]:Object.assign(Object.assign({},ca(e)),{position:"relative",display:"inline-block",cursor:"pointer",[`&:not(${r}-customize-input) ${r}-selector`]:Object.assign(Object.assign({},V9(e)),H9(e)),[`${r}-selection-item`]:Object.assign(Object.assign({flex:1,fontWeight:"normal",position:"relative",userSelect:"none"},Vb),{[`> ${t}-typography`]:{display:"inline"}}),[`${r}-selection-placeholder`]:Object.assign(Object.assign({},Vb),{flex:1,color:e.colorTextPlaceholder,pointerEvents:"none"}),[`${r}-arrow`]:Object.assign(Object.assign({},DS()),{position:"absolute",top:"50%",insetInlineStart:"auto",insetInlineEnd:a,height:e.fontSizeIcon,marginTop:-e.fontSizeIcon/2,color:e.colorTextQuaternary,fontSize:e.fontSizeIcon,lineHeight:1,textAlign:"center",pointerEvents:"none",display:"flex",alignItems:"center",[c]:{verticalAlign:"top",transition:`transform ${e.motionDurationSlow}`,"> svg":{verticalAlign:"top"},[`&:not(${r}-suffix)`]:{pointerEvents:"auto"}},[`${r}-disabled &`]:{cursor:"not-allowed"},"> *:not(:last-child)":{marginInlineEnd:8}}),[`${r}-clear`]:{position:"absolute",top:"50%",insetInlineStart:"auto",insetInlineEnd:a,zIndex:1,display:"inline-block",width:e.fontSizeIcon,height:e.fontSizeIcon,marginTop:-e.fontSizeIcon/2,color:e.colorTextQuaternary,fontSize:e.fontSizeIcon,fontStyle:"normal",lineHeight:1,textAlign:"center",textTransform:"none",background:e.clearBg,cursor:"pointer",opacity:0,transition:`color ${e.motionDurationMid} ease, opacity ${e.motionDurationSlow} ease`,textRendering:"auto","&:before":{display:"block"},"&:hover":{color:e.colorTextTertiary}},"&:hover":{[`${r}-clear`]:{opacity:1}}}),[`${r}-has-feedback`]:{[`${r}-clear`]:{insetInlineEnd:a+e.fontSize+e.paddingXS}}}},W9=e=>{const{componentCls:t}=e;return[{[t]:{[`&-borderless ${t}-selector`]:{backgroundColor:"transparent !important",borderColor:"transparent !important",boxShadow:"none !important"},[`&${t}-in-form-item`]:{width:"100%"}}},G9(e),U9(e),j9(e),B9(e),{[`${t}-rtl`]:{direction:"rtl"}},v1(t,$r(e,{borderHoverColor:e.colorPrimaryHover,borderActiveColor:e.colorPrimary,outlineColor:e.controlOutline})),v1(`${t}-status-error`,$r(e,{borderHoverColor:e.colorErrorHover,borderActiveColor:e.colorError,outlineColor:e.colorErrorOutline}),!0),v1(`${t}-status-warning`,$r(e,{borderHoverColor:e.colorWarningHover,borderActiveColor:e.colorWarning,outlineColor:e.colorWarningOutline}),!0),US(e,{borderElCls:`${t}-selector`,focusElCls:`${t}-focused`})]},q9=_o("Select",(e,t)=>{let{rootPrefixCls:r}=t;const a=$r(e,{rootPrefixCls:r,inputPaddingHorizontalBase:e.paddingSM-1,multipleSelectItemHeight:e.multipleItemHeight,selectHeight:e.controlHeight});return[W9(a)]},e=>{const{fontSize:t,lineHeight:r,controlHeight:a,controlPaddingHorizontal:c,zIndexPopupBase:f,colorText:y,fontWeightStrong:l,controlItemBgActive:w,controlItemBgHover:C,colorBgContainer:P,colorFillSecondary:A,controlHeightLG:D,controlHeightSM:N,colorBgContainerDisabled:F,colorTextDisabled:U}=e;return{zIndexPopup:f+50,optionSelectedColor:y,optionSelectedFontWeight:l,optionSelectedBg:w,optionActiveBg:C,optionPadding:`${(a-t*r)/2}px ${c}px`,optionFontSize:t,optionLineHeight:r,optionHeight:a,selectorBg:P,clearBg:P,singleItemHeightLG:D,multipleItemBg:A,multipleItemBorderColor:"transparent",multipleItemHeight:N,multipleItemHeightLG:a,multipleSelectorBgDisabled:F,multipleItemColorDisabled:U,multipleItemBorderColorDisabled:"transparent"}}),Z9=e=>{const r={overflow:{adjustX:!0,adjustY:!0,shiftY:!0},htmlRegion:e==="scroll"?"scroll":"visible",dynamicInset:!0};return{bottomLeft:Object.assign(Object.assign({},r),{points:["tl","bl"],offset:[0,4]}),bottomRight:Object.assign(Object.assign({},r),{points:["tr","br"],offset:[0,4]}),topLeft:Object.assign(Object.assign({},r),{points:["bl","tl"],offset:[0,-4]}),topRight:Object.assign(Object.assign({},r),{points:["br","tr"],offset:[0,-4]})}};function X9(e,t){return e||Z9(t)}var K9={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"};const Y9=K9;var J9=function(t,r){return T.createElement(Xi,Cn({},t,{ref:r,icon:Y9}))};const Qz=T.forwardRef(J9);var Q9={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"}}]},name:"down",theme:"outlined"};const e7=Q9;var t7=function(t,r){return T.createElement(Xi,Cn({},t,{ref:r,icon:e7}))};const n7=T.forwardRef(t7);var r7={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0011.6 0l43.6-43.5a8.2 8.2 0 000-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z"}}]},name:"search",theme:"outlined"};const i7=r7;var o7=function(t,r){return T.createElement(Xi,Cn({},t,{ref:r,icon:i7}))};const eD=T.forwardRef(o7);function a7(e){let{suffixIcon:t,clearIcon:r,menuItemSelectedIcon:a,removeIcon:c,loading:f,multiple:y,hasFeedback:l,prefixCls:w,showSuffixIcon:C,feedbackIcon:P,showArrow:A,componentName:D}=e;const N=r??T.createElement(w0,null),F=B=>t===null&&!l&&!A?null:T.createElement(T.Fragment,null,C!==!1&&B,l&&P);let U=null;if(t!==void 0)U=F(t);else if(f)U=F(T.createElement($S,{spin:!0}));else{const B=`${w}-suffix`;U=H=>{let{open:Y,showSearch:ne}=H;return F(Y&&ne?T.createElement(eD,{className:B}):T.createElement(n7,{className:B}))}}let Z=null;a!==void 0?Z=a:y?Z=T.createElement(Qz,null):Z=null;let j=null;return c!==void 0?j=c:j=T.createElement(XO,null),{clearIcon:N,suffixIcon:U,itemIcon:Z,removeIcon:j}}function s7(e,t){return t!==void 0?t:e!==null}var l7=globalThis&&globalThis.__rest||function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(r[a[c]]=e[a[c]]);return r};const tD="SECRET_COMBOBOX_MODE_DO_NOT_USE",c7=(e,t)=>{var r,a,{prefixCls:c,bordered:f=!0,className:y,rootClassName:l,getPopupContainer:w,popupClassName:C,dropdownClassName:P,listHeight:A=256,placement:D,listItemHeight:N=24,size:F,disabled:U,notFoundContent:Z,status:j,builtinPlacements:B,dropdownMatchSelectWidth:H,popupMatchSelectWidth:Y,direction:ne,style:re,allowClear:Q}=e,te=l7(e,["prefixCls","bordered","className","rootClassName","getPopupContainer","popupClassName","dropdownClassName","listHeight","placement","listItemHeight","size","disabled","notFoundContent","status","builtinPlacements","dropdownMatchSelectWidth","popupMatchSelectWidth","direction","style","allowClear"]);const{getPopupContainer:ee,getPrefixCls:ve,renderEmpty:he,direction:oe,virtual:fe,popupMatchSelectWidth:Te,popupOverflow:Fe,select:$e}=T.useContext(cr),je=ve("select",c),pe=ve(),He=ne??oe,{compactSize:Be,compactItemClassnames:Ze}=C0(je,He),[nt,yt]=q9(je),Ot=T.useMemo(()=>{const{mode:Nn}=te;if(Nn!=="combobox")return Nn===tD?"combobox":Nn},[te.mode]),Mt=Ot==="multiple"||Ot==="tags",Ft=s7(te.suffixIcon,te.showArrow),Nt=(r=Y??H)!==null&&r!==void 0?r:Te,{status:Ct,hasFeedback:ut,isFormItemInput:At,feedbackIcon:dt}=T.useContext(yc),Bt=KS(Ct,j);let gt;Z!==void 0?gt=Z:Ot==="combobox"?gt=null:gt=(he==null?void 0:he("Select"))||T.createElement(Yz,{componentName:"Select"});const{suffixIcon:jt,itemIcon:zt,removeIcon:an,clearIcon:Kt}=a7(Object.assign(Object.assign({},te),{multiple:Mt,hasFeedback:ut,feedbackIcon:dt,showSuffixIcon:Ft,prefixCls:je,showArrow:te.showArrow,componentName:"Select"})),Ut=Q===!0?{clearIcon:Kt}:Q,at=Sc(te,["suffixIcon","itemIcon"]),it=kt(C||P,{[`${je}-dropdown-${He}`]:He==="rtl"},l,yt),Rt=bl(Nn=>{var zn;return(zn=F??Be)!==null&&zn!==void 0?zn:Nn}),bt=T.useContext(Ph),sn=U??bt,An=kt({[`${je}-lg`]:Rt==="large",[`${je}-sm`]:Rt==="small",[`${je}-rtl`]:He==="rtl",[`${je}-borderless`]:!f,[`${je}-in-form-item`]:At},sh(je,Bt,ut),Ze,$e==null?void 0:$e.className,y,l,yt),Mn=T.useMemo(()=>D!==void 0?D:He==="rtl"?"bottomRight":"bottomLeft",[D,He]),rn=X9(B,Fe),[Vn]=Pz("SelectLike",(a=te.dropdownStyle)===null||a===void 0?void 0:a.zIndex);return nt(T.createElement(XS,Object.assign({ref:t,virtual:fe,showSearch:$e==null?void 0:$e.showSearch},at,{style:Object.assign(Object.assign({},$e==null?void 0:$e.style),re),dropdownMatchSelectWidth:Nt,builtinPlacements:rn,transitionName:rz(pe,"slide-up",te.transitionName),listHeight:A,listItemHeight:N,mode:Ot,prefixCls:je,placement:Mn,direction:He,suffixIcon:jt,menuItemSelectedIcon:zt,removeIcon:an,allowClear:Ut,notFoundContent:gt,className:An,getPopupContainer:w||ee,dropdownClassName:it,disabled:sn,dropdownStyle:Object.assign(Object.assign({},te==null?void 0:te.dropdownStyle),{zIndex:Vn})})))},Rh=T.forwardRef(c7),u7=GU(Rh);Rh.SECRET_COMBOBOX_MODE_DO_NOT_USE=tD;Rh.Option=ZS;Rh.OptGroup=qS;Rh._InternalPanelDoNotUseOrYouWillBeFired=u7;const I0=Rh,Tu=["xxl","xl","lg","md","sm","xs"],d7=e=>({xs:`(max-width: ${e.screenXSMax}px)`,sm:`(min-width: ${e.screenSM}px)`,md:`(min-width: ${e.screenMD}px)`,lg:`(min-width: ${e.screenLG}px)`,xl:`(min-width: ${e.screenXL}px)`,xxl:`(min-width: ${e.screenXXL}px)`}),h7=e=>{const t=e,r=[].concat(Tu).reverse();return r.forEach((a,c)=>{const f=a.toUpperCase(),y=`screen${f}Min`,l=`screen${f}`;if(!(t[y]<=t[l]))throw new Error(`${y}<=${l} fails : !(${t[y]}<=${t[l]})`);if(c<r.length-1){const w=`screen${f}Max`;if(!(t[l]<=t[w]))throw new Error(`${l}<=${w} fails : !(${t[l]}<=${t[w]})`);const P=`screen${r[c+1].toUpperCase()}Min`;if(!(t[w]<=t[P]))throw new Error(`${w}<=${P} fails : !(${t[w]}<=${t[P]})`)}}),e};function nD(){const[,e]=Fs(),t=d7(h7(e));return pt.useMemo(()=>{const r=new Map;let a=-1,c={};return{matchHandlers:{},dispatch(f){return c=f,r.forEach(y=>y(c)),r.size>=1},subscribe(f){return r.size||this.register(),a+=1,r.set(a,f),f(c),a},unsubscribe(f){r.delete(f),r.size||this.unregister()},unregister(){Object.keys(t).forEach(f=>{const y=t[f],l=this.matchHandlers[y];l==null||l.mql.removeListener(l==null?void 0:l.listener)}),r.clear()},register(){Object.keys(t).forEach(f=>{const y=t[f],l=C=>{let{matches:P}=C;this.dispatch(Object.assign(Object.assign({},c),{[f]:P}))},w=window.matchMedia(y);w.addListener(l),this.matchHandlers[y]={mql:w,listener:l},l(w)})},responsiveMap:t}},[e])}function f7(){const[,e]=T.useReducer(t=>t+1,0);return e}function rD(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;const t=T.useRef({}),r=f7(),a=nD();return Lr(()=>{const c=a.subscribe(f=>{t.current=f,e&&r()});return()=>a.unsubscribe(c)},[]),t.current}function iD(e){var t=e.children,r=e.prefixCls,a=e.id,c=e.overlayInnerStyle,f=e.className,y=e.style;return T.createElement("div",{className:kt("".concat(r,"-content"),f),style:y},T.createElement("div",{className:"".concat(r,"-inner"),id:a,role:"tooltip",style:c},typeof t=="function"?t():t))}var Od={shiftX:64,adjustY:1},zd={adjustX:1,shiftY:!0},Ma=[0,0],p7={left:{points:["cr","cl"],overflow:zd,offset:[-4,0],targetOffset:Ma},right:{points:["cl","cr"],overflow:zd,offset:[4,0],targetOffset:Ma},top:{points:["bc","tc"],overflow:Od,offset:[0,-4],targetOffset:Ma},bottom:{points:["tc","bc"],overflow:Od,offset:[0,4],targetOffset:Ma},topLeft:{points:["bl","tl"],overflow:Od,offset:[0,-4],targetOffset:Ma},leftTop:{points:["tr","tl"],overflow:zd,offset:[-4,0],targetOffset:Ma},topRight:{points:["br","tr"],overflow:Od,offset:[0,-4],targetOffset:Ma},rightTop:{points:["tl","tr"],overflow:zd,offset:[4,0],targetOffset:Ma},bottomRight:{points:["tr","br"],overflow:Od,offset:[0,4],targetOffset:Ma},rightBottom:{points:["bl","br"],overflow:zd,offset:[4,0],targetOffset:Ma},bottomLeft:{points:["tl","bl"],overflow:Od,offset:[0,4],targetOffset:Ma},leftBottom:{points:["br","bl"],overflow:zd,offset:[-4,0],targetOffset:Ma}},m7=["overlayClassName","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle","prefixCls","children","onVisibleChange","afterVisibleChange","transitionName","animation","motion","placement","align","destroyTooltipOnHide","defaultVisible","getTooltipContainer","overlayInnerStyle","arrowContent","overlay","id","showArrow"],g7=function(t,r){var a=t.overlayClassName,c=t.trigger,f=c===void 0?["hover"]:c,y=t.mouseEnterDelay,l=y===void 0?0:y,w=t.mouseLeaveDelay,C=w===void 0?.1:w,P=t.overlayStyle,A=t.prefixCls,D=A===void 0?"rc-tooltip":A,N=t.children,F=t.onVisibleChange,U=t.afterVisibleChange,Z=t.transitionName,j=t.animation,B=t.motion,H=t.placement,Y=H===void 0?"right":H,ne=t.align,re=ne===void 0?{}:ne,Q=t.destroyTooltipOnHide,te=Q===void 0?!1:Q,ee=t.defaultVisible,ve=t.getTooltipContainer,he=t.overlayInnerStyle;t.arrowContent;var oe=t.overlay,fe=t.id,Te=t.showArrow,Fe=Te===void 0?!0:Te,$e=Vr(t,m7),je=T.useRef(null);T.useImperativeHandle(r,function(){return je.current});var pe=st({},$e);"visible"in t&&(pe.popupVisible=t.visible);var He=function(){return T.createElement(iD,{key:"content",prefixCls:D,id:fe,overlayInnerStyle:he},oe)};return T.createElement(Nz,Cn({popupClassName:a,prefixCls:D,popup:He,action:f,builtinPlacements:p7,popupPlacement:Y,ref:je,popupAlign:re,getPopupContainer:ve,onPopupVisibleChange:F,afterPopupVisibleChange:U,popupTransitionName:Z,popupAnimation:j,popupMotion:B,defaultPopupVisible:ee,autoDestroy:te,mouseLeaveDelay:C,popupStyle:P,mouseEnterDelay:l,arrow:Fe},pe),N)};const v7=T.forwardRef(g7),oD=8;function aD(e){const t=oD,{contentRadius:r,limitVerticalRadius:a}=e,c=r>12?r+2:12;return{dropdownArrowOffset:c,dropdownArrowOffsetVertical:a?t:c}}function Cv(e,t){return e?t:{}}function y7(e,t){const{componentCls:r,sizePopupArrow:a,borderRadiusXS:c,borderRadiusOuter:f,boxShadowPopoverArrow:y}=e,{colorBg:l,contentRadius:w=e.borderRadiusLG,limitVerticalRadius:C,arrowDistance:P=0,arrowPlacement:A={left:!0,right:!0,top:!0,bottom:!0}}=t,{dropdownArrowOffsetVertical:D,dropdownArrowOffset:N}=aD({contentRadius:w,limitVerticalRadius:C});return{[r]:Object.assign(Object.assign(Object.assign(Object.assign({[`${r}-arrow`]:[Object.assign(Object.assign({position:"absolute",zIndex:1,display:"block"},dN(a,c,f,l,y)),{"&:before":{background:l}})]},Cv(!!A.top,{[[`&-placement-top ${r}-arrow`,`&-placement-topLeft ${r}-arrow`,`&-placement-topRight ${r}-arrow`].join(",")]:{bottom:P,transform:"translateY(100%) rotate(180deg)"},[`&-placement-top ${r}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(100%) rotate(180deg)"},[`&-placement-topLeft ${r}-arrow`]:{left:{_skip_check_:!0,value:N}},[`&-placement-topRight ${r}-arrow`]:{right:{_skip_check_:!0,value:N}}})),Cv(!!A.bottom,{[[`&-placement-bottom ${r}-arrow`,`&-placement-bottomLeft ${r}-arrow`,`&-placement-bottomRight ${r}-arrow`].join(",")]:{top:P,transform:"translateY(-100%)"},[`&-placement-bottom ${r}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(-100%)"},[`&-placement-bottomLeft ${r}-arrow`]:{left:{_skip_check_:!0,value:N}},[`&-placement-bottomRight ${r}-arrow`]:{right:{_skip_check_:!0,value:N}}})),Cv(!!A.left,{[[`&-placement-left ${r}-arrow`,`&-placement-leftTop ${r}-arrow`,`&-placement-leftBottom ${r}-arrow`].join(",")]:{right:{_skip_check_:!0,value:P},transform:"translateX(100%) rotate(90deg)"},[`&-placement-left ${r}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(100%) rotate(90deg)"},[`&-placement-leftTop ${r}-arrow`]:{top:D},[`&-placement-leftBottom ${r}-arrow`]:{bottom:D}})),Cv(!!A.right,{[[`&-placement-right ${r}-arrow`,`&-placement-rightTop ${r}-arrow`,`&-placement-rightBottom ${r}-arrow`].join(",")]:{left:{_skip_check_:!0,value:P},transform:"translateX(-100%) rotate(-90deg)"},[`&-placement-right ${r}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(-100%) rotate(-90deg)"},[`&-placement-rightTop ${r}-arrow`]:{top:D},[`&-placement-rightBottom ${r}-arrow`]:{bottom:D}}))}}function _7(e,t,r,a){if(a===!1)return{adjustX:!1,adjustY:!1};const c=a&&typeof a=="object"?a:{},f={};switch(e){case"top":case"bottom":f.shiftX=t.dropdownArrowOffset*2+r,f.shiftY=!0,f.adjustY=!0;break;case"left":case"right":f.shiftY=t.dropdownArrowOffsetVertical*2+r,f.shiftX=!0,f.adjustX=!0;break}const y=Object.assign(Object.assign({},f),c);return y.shiftX||(y.adjustX=!0),y.shiftY||(y.adjustY=!0),y}const LM={left:{points:["cr","cl"]},right:{points:["cl","cr"]},top:{points:["bc","tc"]},bottom:{points:["tc","bc"]},topLeft:{points:["bl","tl"]},leftTop:{points:["tr","tl"]},topRight:{points:["br","tr"]},rightTop:{points:["tl","tr"]},bottomRight:{points:["tr","br"]},rightBottom:{points:["bl","br"]},bottomLeft:{points:["tl","bl"]},leftBottom:{points:["br","bl"]}},x7={topLeft:{points:["bl","tc"]},leftTop:{points:["tr","cl"]},topRight:{points:["br","tc"]},rightTop:{points:["tl","cr"]},bottomRight:{points:["tr","bc"]},rightBottom:{points:["bl","cr"]},bottomLeft:{points:["tl","bc"]},leftBottom:{points:["br","cl"]}},b7=new Set(["topLeft","topRight","bottomLeft","bottomRight","leftTop","leftBottom","rightTop","rightBottom"]);function w7(e){const{arrowWidth:t,autoAdjustOverflow:r,arrowPointAtCenter:a,offset:c,borderRadius:f,visibleFirst:y}=e,l=t/2,w={};return Object.keys(LM).forEach(C=>{const P=a&&x7[C]||LM[C],A=Object.assign(Object.assign({},P),{offset:[0,0],dynamicInset:!0});switch(w[C]=A,b7.has(C)&&(A.autoArrow=!1),C){case"top":case"topLeft":case"topRight":A.offset[1]=-l-c;break;case"bottom":case"bottomLeft":case"bottomRight":A.offset[1]=l+c;break;case"left":case"leftTop":case"leftBottom":A.offset[0]=-l-c;break;case"right":case"rightTop":case"rightBottom":A.offset[0]=l+c;break}const D=aD({contentRadius:f,limitVerticalRadius:!0});if(a)switch(C){case"topLeft":case"bottomLeft":A.offset[0]=-D.dropdownArrowOffset-l;break;case"topRight":case"bottomRight":A.offset[0]=D.dropdownArrowOffset+l;break;case"leftTop":case"rightTop":A.offset[1]=-D.dropdownArrowOffset-l;break;case"leftBottom":case"rightBottom":A.offset[1]=D.dropdownArrowOffset+l;break}A.overflow=_7(C,D,t,r),y&&(A.htmlRegion="visibleFirst")}),w}const S7=e=>{const{componentCls:t,tooltipMaxWidth:r,tooltipColor:a,tooltipBg:c,tooltipBorderRadius:f,zIndexPopup:y,controlHeight:l,boxShadowSecondary:w,paddingSM:C,paddingXS:P,tooltipRadiusOuter:A}=e;return[{[t]:Object.assign(Object.assign(Object.assign(Object.assign({},ca(e)),{position:"absolute",zIndex:y,display:"block",width:"max-content",maxWidth:r,visibility:"visible",transformOrigin:"var(--arrow-x, 50%) var(--arrow-y, 50%)","&-hidden":{display:"none"},"--antd-arrow-background-color":c,[`${t}-inner`]:{minWidth:l,minHeight:l,padding:`${C/2}px ${P}px`,color:a,textAlign:"start",textDecoration:"none",wordWrap:"break-word",backgroundColor:c,borderRadius:f,boxShadow:w,boxSizing:"border-box"},[["&-placement-left","&-placement-leftTop","&-placement-leftBottom","&-placement-right","&-placement-rightTop","&-placement-rightBottom"].join(",")]:{[`${t}-inner`]:{borderRadius:Math.min(f,oD)}},[`${t}-content`]:{position:"relative"}}),_N(e,(D,N)=>{let{darkColor:F}=N;return{[`&${t}-${D}`]:{[`${t}-inner`]:{backgroundColor:F},[`${t}-arrow`]:{"--antd-arrow-background-color":F}}}})),{"&-rtl":{direction:"rtl"}})},y7($r(e,{borderRadiusOuter:A}),{colorBg:"var(--antd-arrow-background-color)",contentRadius:f,limitVerticalRadius:!0}),{[`${t}-pure`]:{position:"relative",maxWidth:"none",margin:e.sizePopupArrow}}]},sD=(e,t)=>_o("Tooltip",a=>{if(t===!1)return[];const{borderRadius:c,colorTextLightSolid:f,colorBgDefault:y,borderRadiusOuter:l}=a,w=$r(a,{tooltipMaxWidth:250,tooltipColor:f,tooltipBorderRadius:c,tooltipBg:y,tooltipRadiusOuter:l>4?4:l});return[S7(w),jU(a,"zoom-big-fast")]},a=>{let{zIndexPopupBase:c,colorBgSpotlight:f}=a;return{zIndexPopup:c+70,colorBgDefault:f}},{resetStyle:!1})(e),E7=My.map(e=>`${e}-inverse`);function C7(e){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0)?[].concat(_n(E7),_n(My)).includes(e):My.includes(e)}function lD(e,t){const r=C7(t),a=kt({[`${e}-${t}`]:t&&r}),c={},f={};return t&&!r&&(c.background=t,f["--antd-arrow-background-color"]=t),{className:a,overlayStyle:c,arrowStyle:f}}const T7=e=>{const{prefixCls:t,className:r,placement:a="top",title:c,color:f,overlayInnerStyle:y}=e,{getPrefixCls:l}=T.useContext(cr),w=l("tooltip",t),[C,P]=sD(w,!0),A=lD(w,f),D=A.arrowStyle,N=Object.assign(Object.assign({},y),A.overlayStyle),F=kt(P,w,`${w}-pure`,`${w}-placement-${a}`,r,A.className);return C(T.createElement("div",{className:F,style:D},T.createElement("div",{className:`${w}-arrow`}),T.createElement(iD,Object.assign({},e,{className:P,prefixCls:w,overlayInnerStyle:N}),c)))},I7=T7;var M7=globalThis&&globalThis.__rest||function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(r[a[c]]=e[a[c]]);return r};const cD=T.forwardRef((e,t)=>{var r,a;const{prefixCls:c,openClassName:f,getTooltipContainer:y,overlayClassName:l,color:w,overlayInnerStyle:C,children:P,afterOpenChange:A,afterVisibleChange:D,destroyTooltipOnHide:N,arrow:F=!0,title:U,overlay:Z,builtinPlacements:j,arrowPointAtCenter:B=!1,autoAdjustOverflow:H=!0}=e,Y=!!F,[,ne]=Fs(),{getPopupContainer:re,getPrefixCls:Q,direction:te}=T.useContext(cr),ee=mO(),ve=T.useRef(null),he=()=>{var bt;(bt=ve.current)===null||bt===void 0||bt.forceAlign()};T.useImperativeHandle(t,()=>({forceAlign:he,forcePopupAlign:()=>{ee.deprecated(!1,"forcePopupAlign","forceAlign"),he()}}));const[oe,fe]=ms(!1,{value:(r=e.open)!==null&&r!==void 0?r:e.visible,defaultValue:(a=e.defaultOpen)!==null&&a!==void 0?a:e.defaultVisible}),Te=!U&&!Z&&U!==0,Fe=bt=>{var sn,An;fe(Te?!1:bt),Te||((sn=e.onOpenChange)===null||sn===void 0||sn.call(e,bt),(An=e.onVisibleChange)===null||An===void 0||An.call(e,bt))},$e=T.useMemo(()=>{var bt,sn;let An=B;return typeof F=="object"&&(An=(sn=(bt=F.pointAtCenter)!==null&&bt!==void 0?bt:F.arrowPointAtCenter)!==null&&sn!==void 0?sn:B),j||w7({arrowPointAtCenter:An,autoAdjustOverflow:H,arrowWidth:Y?ne.sizePopupArrow:0,borderRadius:ne.borderRadius,offset:ne.marginXXS,visibleFirst:!0})},[B,F,j,ne]),je=T.useMemo(()=>U===0?U:Z||U||"",[Z,U]),pe=T.createElement(Jb,null,typeof je=="function"?je():je),{getPopupContainer:He,placement:Be="top",mouseEnterDelay:Ze=.1,mouseLeaveDelay:nt=.1,overlayStyle:yt,rootClassName:Ot}=e,Mt=M7(e,["getPopupContainer","placement","mouseEnterDelay","mouseLeaveDelay","overlayStyle","rootClassName"]),Ft=Q("tooltip",c),Nt=Q(),Ct=e["data-popover-inject"];let ut=oe;!("open"in e)&&!("visible"in e)&&Te&&(ut=!1);const At=sm(P)&&!KO(P)?P:T.createElement("span",null,P),dt=At.props,Bt=!dt.className||typeof dt.className=="string"?kt(dt.className,f||`${Ft}-open`):dt.className,[gt,jt]=sD(Ft,!Ct),zt=lD(Ft,w),an=zt.arrowStyle,Kt=Object.assign(Object.assign({},C),zt.overlayStyle),Ut=kt(l,{[`${Ft}-rtl`]:te==="rtl"},zt.className,Ot,jt),[at,it]=Pz("Tooltip",Mt.zIndex),Rt=T.createElement(v7,Object.assign({},Mt,{zIndex:Ct?Mt.zIndex:at,showArrow:Y,placement:Be,mouseEnterDelay:Ze,mouseLeaveDelay:nt,prefixCls:Ft,overlayClassName:Ut,overlayStyle:Object.assign(Object.assign({},an),yt),getTooltipContainer:He||y||re,ref:ve,builtinPlacements:$e,overlay:pe,visible:ut,onVisibleChange:Fe,afterVisibleChange:A??D,overlayInnerStyle:Kt,arrowContent:T.createElement("span",{className:`${Ft}-arrow-content`}),motion:{motionName:rz(Nt,"zoom-big-fast",e.transitionName),motionDeadline:1e3},destroyTooltipOnHide:!!N}),ut?vl(At,{className:Bt}):At);return gt(T.createElement(vz.Provider,{value:it},Rt))});cD._InternalPanelDoNotUseOrYouWillBeFired=I7;const mw=cD;var P7={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M765.7 486.8L314.9 134.7A7.97 7.97 0 00302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 000-50.4z"}}]},name:"right",theme:"outlined"};const A7=P7;var R7=function(t,r){return T.createElement(Xi,Cn({},t,{ref:r,icon:A7}))};const kM=T.forwardRef(R7);var O7={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 000 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"}}]},name:"left",theme:"outlined"};const z7=O7;var D7=function(t,r){return T.createElement(Xi,Cn({},t,{ref:r,icon:z7}))};const $M=T.forwardRef(D7),uD=T.createContext(null),L7=uD.Provider,dD=T.createContext(null),k7=dD.Provider;var $7=["prefixCls","className","style","checked","disabled","defaultChecked","type","title","onChange"],F7=T.forwardRef(function(e,t){var r,a=e.prefixCls,c=a===void 0?"rc-checkbox":a,f=e.className,y=e.style,l=e.checked,w=e.disabled,C=e.defaultChecked,P=C===void 0?!1:C,A=e.type,D=A===void 0?"checkbox":A,N=e.title,F=e.onChange,U=Vr(e,$7),Z=T.useRef(null),j=ms(P,{value:l}),B=$t(j,2),H=B[0],Y=B[1];T.useImperativeHandle(t,function(){return{focus:function(){var te;(te=Z.current)===null||te===void 0||te.focus()},blur:function(){var te;(te=Z.current)===null||te===void 0||te.blur()},input:Z.current}});var ne=kt(c,f,(r={},ke(r,"".concat(c,"-checked"),H),ke(r,"".concat(c,"-disabled"),w),r)),re=function(te){w||("checked"in e||Y(te.target.checked),F==null||F({target:st(st({},e),{},{type:D,checked:te.target.checked}),stopPropagation:function(){te.stopPropagation()},preventDefault:function(){te.preventDefault()},nativeEvent:te.nativeEvent}))};return T.createElement("span",{className:ne,title:N,style:y},T.createElement("input",Cn({},U,{className:"".concat(c,"-input"),ref:Z,onChange:re,disabled:w,checked:!!H,type:D})),T.createElement("span",{className:"".concat(c,"-inner")}))});const B7=e=>{const{componentCls:t,antCls:r}=e,a=`${t}-group`;return{[a]:Object.assign(Object.assign({},ca(e)),{display:"inline-block",fontSize:0,[`&${a}-rtl`]:{direction:"rtl"},[`${r}-badge ${r}-badge-count`]:{zIndex:1},[`> ${r}-badge:not(:first-child) > ${r}-button-wrapper`]:{borderInlineStart:"none"}})}},N7=e=>{const{componentCls:t,wrapperMarginInlineEnd:r,colorPrimary:a,radioSize:c,motionDurationSlow:f,motionDurationMid:y,motionEaseInOutCirc:l,colorBgContainer:w,colorBorder:C,lineWidth:P,dotSize:A,colorBgContainerDisabled:D,colorTextDisabled:N,paddingXS:F,dotColorDisabled:U,lineType:Z,radioDotDisabledSize:j,wireframe:B,colorWhite:H}=e,Y=`${t}-inner`;return{[`${t}-wrapper`]:Object.assign(Object.assign({},ca(e)),{display:"inline-flex",alignItems:"baseline",marginInlineStart:0,marginInlineEnd:r,cursor:"pointer",[`&${t}-wrapper-rtl`]:{direction:"rtl"},"&-disabled":{cursor:"not-allowed",color:e.colorTextDisabled},"&::after":{display:"inline-block",width:0,overflow:"hidden",content:'"\\a0"'},[`${t}-checked::after`]:{position:"absolute",insetBlockStart:0,insetInlineStart:0,width:"100%",height:"100%",border:`${P}px ${Z} ${a}`,borderRadius:"50%",visibility:"hidden",content:'""'},[t]:Object.assign(Object.assign({},ca(e)),{position:"relative",display:"inline-block",outline:"none",cursor:"pointer",alignSelf:"center",borderRadius:"50%"}),[`${t}-wrapper:hover &,
        &:hover ${Y}`]:{borderColor:a},[`${t}-input:focus-visible + ${Y}`]:Object.assign({},am(e)),[`${t}:hover::after, ${t}-wrapper:hover &::after`]:{visibility:"visible"},[`${t}-inner`]:{"&::after":{boxSizing:"border-box",position:"absolute",insetBlockStart:"50%",insetInlineStart:"50%",display:"block",width:c,height:c,marginBlockStart:c/-2,marginInlineStart:c/-2,backgroundColor:B?a:H,borderBlockStart:0,borderInlineStart:0,borderRadius:c,transform:"scale(0)",opacity:0,transition:`all ${f} ${l}`,content:'""'},boxSizing:"border-box",position:"relative",insetBlockStart:0,insetInlineStart:0,display:"block",width:c,height:c,backgroundColor:w,borderColor:C,borderStyle:"solid",borderWidth:P,borderRadius:"50%",transition:`all ${y}`},[`${t}-input`]:{position:"absolute",inset:0,zIndex:1,cursor:"pointer",opacity:0},[`${t}-checked`]:{[Y]:{borderColor:a,backgroundColor:B?w:a,"&::after":{transform:`scale(${A/c})`,opacity:1,transition:`all ${f} ${l}`}}},[`${t}-disabled`]:{cursor:"not-allowed",[Y]:{backgroundColor:D,borderColor:C,cursor:"not-allowed","&::after":{backgroundColor:U}},[`${t}-input`]:{cursor:"not-allowed"},[`${t}-disabled + span`]:{color:N,cursor:"not-allowed"},[`&${t}-checked`]:{[Y]:{"&::after":{transform:`scale(${j/c})`}}}},[`span${t} + *`]:{paddingInlineStart:F,paddingInlineEnd:F}})}},j7=e=>{const{buttonColor:t,controlHeight:r,componentCls:a,lineWidth:c,lineType:f,colorBorder:y,motionDurationSlow:l,motionDurationMid:w,buttonPaddingInline:C,fontSize:P,buttonBg:A,fontSizeLG:D,controlHeightLG:N,controlHeightSM:F,paddingXS:U,borderRadius:Z,borderRadiusSM:j,borderRadiusLG:B,buttonCheckedBg:H,buttonSolidCheckedColor:Y,colorTextDisabled:ne,colorBgContainerDisabled:re,buttonCheckedBgDisabled:Q,buttonCheckedColorDisabled:te,colorPrimary:ee,colorPrimaryHover:ve,colorPrimaryActive:he,buttonSolidCheckedBg:oe,buttonSolidCheckedHoverBg:fe,buttonSolidCheckedActiveBg:Te}=e;return{[`${a}-button-wrapper`]:{position:"relative",display:"inline-block",height:r,margin:0,paddingInline:C,paddingBlock:0,color:t,fontSize:P,lineHeight:`${r-c*2}px`,background:A,border:`${c}px ${f} ${y}`,borderBlockStartWidth:c+.02,borderInlineStartWidth:0,borderInlineEndWidth:c,cursor:"pointer",transition:[`color ${w}`,`background ${w}`,`box-shadow ${w}`].join(","),a:{color:t},[`> ${a}-button`]:{position:"absolute",insetBlockStart:0,insetInlineStart:0,zIndex:-1,width:"100%",height:"100%"},"&:not(:first-child)":{"&::before":{position:"absolute",insetBlockStart:-c,insetInlineStart:-c,display:"block",boxSizing:"content-box",width:1,height:"100%",paddingBlock:c,paddingInline:0,backgroundColor:y,transition:`background-color ${l}`,content:'""'}},"&:first-child":{borderInlineStart:`${c}px ${f} ${y}`,borderStartStartRadius:Z,borderEndStartRadius:Z},"&:last-child":{borderStartEndRadius:Z,borderEndEndRadius:Z},"&:first-child:last-child":{borderRadius:Z},[`${a}-group-large &`]:{height:N,fontSize:D,lineHeight:`${N-c*2}px`,"&:first-child":{borderStartStartRadius:B,borderEndStartRadius:B},"&:last-child":{borderStartEndRadius:B,borderEndEndRadius:B}},[`${a}-group-small &`]:{height:F,paddingInline:U-c,paddingBlock:0,lineHeight:`${F-c*2}px`,"&:first-child":{borderStartStartRadius:j,borderEndStartRadius:j},"&:last-child":{borderStartEndRadius:j,borderEndEndRadius:j}},"&:hover":{position:"relative",color:ee},"&:has(:focus-visible)":Object.assign({},am(e)),[`${a}-inner, input[type='checkbox'], input[type='radio']`]:{width:0,height:0,opacity:0,pointerEvents:"none"},[`&-checked:not(${a}-button-wrapper-disabled)`]:{zIndex:1,color:ee,background:H,borderColor:ee,"&::before":{backgroundColor:ee},"&:first-child":{borderColor:ee},"&:hover":{color:ve,borderColor:ve,"&::before":{backgroundColor:ve}},"&:active":{color:he,borderColor:he,"&::before":{backgroundColor:he}}},[`${a}-group-solid &-checked:not(${a}-button-wrapper-disabled)`]:{color:Y,background:oe,borderColor:oe,"&:hover":{color:Y,background:fe,borderColor:fe},"&:active":{color:Y,background:Te,borderColor:Te}},"&-disabled":{color:ne,backgroundColor:re,borderColor:y,cursor:"not-allowed","&:first-child, &:hover":{color:ne,backgroundColor:re,borderColor:y}},[`&-disabled${a}-button-wrapper-checked`]:{color:te,backgroundColor:Q,borderColor:y,boxShadow:"none"}}}},FM=e=>e-4*2,hD=_o("Radio",e=>{const{controlOutline:t,controlOutlineWidth:r,radioSize:a}=e,c=`0 0 0 ${r}px ${t}`,f=c,y=FM(a),l=$r(e,{radioDotDisabledSize:y,radioFocusShadow:c,radioButtonFocusShadow:f});return[B7(l),N7(l),j7(l)]},e=>{const{wireframe:t,padding:r,marginXS:a,lineWidth:c,fontSizeLG:f,colorText:y,colorBgContainer:l,colorTextDisabled:w,controlItemBgActiveDisabled:C,colorTextLightSolid:P,colorPrimary:A,colorPrimaryHover:D,colorPrimaryActive:N}=e,F=4,U=f,Z=t?FM(U):U-(F+c)*2;return{radioSize:U,dotSize:Z,dotColorDisabled:w,buttonSolidCheckedColor:P,buttonSolidCheckedBg:A,buttonSolidCheckedHoverBg:D,buttonSolidCheckedActiveBg:N,buttonBg:l,buttonCheckedBg:l,buttonColor:y,buttonCheckedBgDisabled:C,buttonCheckedColorDisabled:w,buttonPaddingInline:r-c,wrapperMarginInlineEnd:a}});var U7=globalThis&&globalThis.__rest||function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(r[a[c]]=e[a[c]]);return r};const V7=(e,t)=>{var r,a;const c=T.useContext(uD),f=T.useContext(dD),{getPrefixCls:y,direction:l,radio:w}=T.useContext(cr),C=T.useRef(null),P=gs(t,C),{isFormItemInput:A}=T.useContext(yc),D=he=>{var oe,fe;(oe=e.onChange)===null||oe===void 0||oe.call(e,he),(fe=c==null?void 0:c.onChange)===null||fe===void 0||fe.call(c,he)},{prefixCls:N,className:F,rootClassName:U,children:Z,style:j}=e,B=U7(e,["prefixCls","className","rootClassName","children","style"]),H=y("radio",N),Y=((c==null?void 0:c.optionType)||f)==="button",ne=Y?`${H}-button`:H,[re,Q]=hD(H),te=Object.assign({},B),ee=T.useContext(Ph);c&&(te.name=c.name,te.onChange=D,te.checked=e.value===c.value,te.disabled=(r=te.disabled)!==null&&r!==void 0?r:c.disabled),te.disabled=(a=te.disabled)!==null&&a!==void 0?a:ee;const ve=kt(`${ne}-wrapper`,{[`${ne}-wrapper-checked`]:te.checked,[`${ne}-wrapper-disabled`]:te.disabled,[`${ne}-wrapper-rtl`]:l==="rtl",[`${ne}-wrapper-in-form-item`]:A},w==null?void 0:w.className,F,U,Q);return re(T.createElement(oz,{component:"Radio",disabled:te.disabled},T.createElement("label",{className:ve,style:Object.assign(Object.assign({},w==null?void 0:w.style),j),onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave},T.createElement(F7,Object.assign({},te,{className:kt(te.className,!Y&&BS),type:"radio",prefixCls:ne,ref:P})),Z!==void 0?T.createElement("span",null,Z):null)))},H7=T.forwardRef(V7),ky=H7,G7=T.forwardRef((e,t)=>{const{getPrefixCls:r,direction:a}=T.useContext(cr),[c,f]=ms(e.defaultValue,{value:e.value}),y=oe=>{const fe=c,Te=oe.target.value;"value"in e||f(Te);const{onChange:Fe}=e;Fe&&Te!==fe&&Fe(oe)},{prefixCls:l,className:w,rootClassName:C,options:P,buttonStyle:A="outline",disabled:D,children:N,size:F,style:U,id:Z,onMouseEnter:j,onMouseLeave:B,onFocus:H,onBlur:Y}=e,ne=r("radio",l),re=`${ne}-group`,[Q,te]=hD(ne);let ee=N;P&&P.length>0&&(ee=P.map(oe=>typeof oe=="string"||typeof oe=="number"?T.createElement(ky,{key:oe.toString(),prefixCls:ne,disabled:D,value:oe,checked:c===oe},oe):T.createElement(ky,{key:`radio-group-value-options-${oe.value}`,prefixCls:ne,disabled:oe.disabled||D,value:oe.value,checked:c===oe.value,title:oe.title,style:oe.style,id:oe.id},oe.label)));const ve=bl(F),he=kt(re,`${re}-${A}`,{[`${re}-${ve}`]:ve,[`${re}-rtl`]:a==="rtl"},w,C,te);return Q(T.createElement("div",Object.assign({},_h(e,{aria:!0,data:!0}),{className:he,style:U,onMouseEnter:j,onMouseLeave:B,onFocus:H,onBlur:Y,id:Z,ref:t}),T.createElement(L7,{value:{onChange:y,value:c,disabled:e.disabled,name:e.name,optionType:e.optionType}},ee)))}),W7=T.memo(G7);var q7=globalThis&&globalThis.__rest||function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(r[a[c]]=e[a[c]]);return r};const Z7=(e,t)=>{const{getPrefixCls:r}=T.useContext(cr),{prefixCls:a}=e,c=q7(e,["prefixCls"]),f=r("radio",a);return T.createElement(k7,{value:"button"},T.createElement(ky,Object.assign({prefixCls:f},c,{type:"radio",ref:t})))},X7=T.forwardRef(Z7),M0=ky;M0.Button=X7;M0.Group=W7;M0.__ANT_RADIO=!0;const tY=M0,K7=e=>({"&::-moz-placeholder":{opacity:1},"&::placeholder":{color:e,userSelect:"none"},"&:placeholder-shown":{textOverflow:"ellipsis"}}),fD=e=>({borderColor:e.hoverBorderColor,backgroundColor:e.hoverBg}),gw=e=>({borderColor:e.activeBorderColor,boxShadow:e.activeShadow,outline:0,backgroundColor:e.activeBg}),pD=e=>({color:e.colorTextDisabled,backgroundColor:e.colorBgContainerDisabled,borderColor:e.colorBorder,boxShadow:"none",cursor:"not-allowed",opacity:1,"&:hover":Object.assign({},fD($r(e,{hoverBorderColor:e.colorBorder,hoverBg:e.colorBgContainerDisabled})))}),mD=e=>{const{paddingBlockLG:t,fontSizeLG:r,lineHeightLG:a,borderRadiusLG:c,paddingInlineLG:f}=e;return{padding:`${t}px ${f}px`,fontSize:r,lineHeight:a,borderRadius:c}},JS=e=>({padding:`${e.paddingBlockSM}px ${e.paddingInlineSM}px`,borderRadius:e.borderRadiusSM}),gD=(e,t)=>{const{componentCls:r,colorError:a,colorWarning:c,errorActiveShadow:f,warningActiveShadow:y,colorErrorBorderHover:l,colorWarningBorderHover:w}=e;return{[`&-status-error:not(${t}-disabled):not(${t}-borderless)${t}`]:{borderColor:a,"&:hover":{borderColor:l},"&:focus, &:focus-within":Object.assign({},gw($r(e,{activeBorderColor:a,activeShadow:f}))),[`${r}-prefix, ${r}-suffix`]:{color:a}},[`&-status-warning:not(${t}-disabled):not(${t}-borderless)${t}`]:{borderColor:c,"&:hover":{borderColor:w},"&:focus, &:focus-within":Object.assign({},gw($r(e,{activeBorderColor:c,activeShadow:y}))),[`${r}-prefix, ${r}-suffix`]:{color:c}}}},QS=e=>Object.assign(Object.assign({position:"relative",display:"inline-block",width:"100%",minWidth:0,padding:`${e.paddingBlock}px ${e.paddingInline}px`,color:e.colorText,fontSize:e.fontSize,lineHeight:e.lineHeight,backgroundColor:e.colorBgContainer,backgroundImage:"none",borderWidth:e.lineWidth,borderStyle:e.lineType,borderColor:e.colorBorder,borderRadius:e.borderRadius,transition:`all ${e.motionDurationMid}`},K7(e.colorTextPlaceholder)),{"&:hover":Object.assign({},fD(e)),"&:focus, &:focus-within":Object.assign({},gw(e)),"&-disabled, &[disabled]":Object.assign({},pD(e)),"&-borderless":{"&, &:hover, &:focus, &-focused, &-disabled, &[disabled]":{backgroundColor:"transparent",border:"none",boxShadow:"none"}},"textarea&":{maxWidth:"100%",height:"auto",minHeight:e.controlHeight,lineHeight:e.lineHeight,verticalAlign:"bottom",transition:`all ${e.motionDurationSlow}, height 0s`,resize:"vertical"},"&-lg":Object.assign({},mD(e)),"&-sm":Object.assign({},JS(e)),"&-rtl":{direction:"rtl"},"&-textarea-rtl":{direction:"rtl"}}),Y7=e=>{const{componentCls:t,antCls:r}=e;return{position:"relative",display:"table",width:"100%",borderCollapse:"separate",borderSpacing:0,"&[class*='col-']":{paddingInlineEnd:e.paddingXS,"&:last-child":{paddingInlineEnd:0}},[`&-lg ${t}, &-lg > ${t}-group-addon`]:Object.assign({},mD(e)),[`&-sm ${t}, &-sm > ${t}-group-addon`]:Object.assign({},JS(e)),[`&-lg ${r}-select-single ${r}-select-selector`]:{height:e.controlHeightLG},[`&-sm ${r}-select-single ${r}-select-selector`]:{height:e.controlHeightSM},[`> ${t}`]:{display:"table-cell","&:not(:first-child):not(:last-child)":{borderRadius:0}},[`${t}-group`]:{"&-addon, &-wrap":{display:"table-cell",width:1,whiteSpace:"nowrap",verticalAlign:"middle","&:not(:first-child):not(:last-child)":{borderRadius:0}},"&-wrap > *":{display:"block !important"},"&-addon":{position:"relative",padding:`0 ${e.paddingInline}px`,color:e.colorText,fontWeight:"normal",fontSize:e.fontSize,textAlign:"center",backgroundColor:e.addonBg,border:`${e.lineWidth}px ${e.lineType} ${e.colorBorder}`,borderRadius:e.borderRadius,transition:`all ${e.motionDurationSlow}`,lineHeight:1,[`${r}-select`]:{margin:`-${e.paddingBlock+1}px -${e.paddingInline}px`,[`&${r}-select-single:not(${r}-select-customize-input):not(${r}-pagination-size-changer)`]:{[`${r}-select-selector`]:{backgroundColor:"inherit",border:`${e.lineWidth}px ${e.lineType} transparent`,boxShadow:"none"}},"&-open, &-focused":{[`${r}-select-selector`]:{color:e.colorPrimary}}},[`${r}-cascader-picker`]:{margin:`-9px -${e.paddingInline}px`,backgroundColor:"transparent",[`${r}-cascader-input`]:{textAlign:"start",border:0,boxShadow:"none"}}},"&-addon:first-child":{borderInlineEnd:0},"&-addon:last-child":{borderInlineStart:0}},[`${t}`]:{width:"100%",marginBottom:0,textAlign:"inherit","&:focus":{zIndex:1,borderInlineEndWidth:1},"&:hover":{zIndex:1,borderInlineEndWidth:1,[`${t}-search-with-button &`]:{zIndex:0}}},[`> ${t}:first-child, ${t}-group-addon:first-child`]:{borderStartEndRadius:0,borderEndEndRadius:0,[`${r}-select ${r}-select-selector`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`> ${t}-affix-wrapper`]:{[`&:not(:first-child) ${t}`]:{borderStartStartRadius:0,borderEndStartRadius:0},[`&:not(:last-child) ${t}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`> ${t}:last-child, ${t}-group-addon:last-child`]:{borderStartStartRadius:0,borderEndStartRadius:0,[`${r}-select ${r}-select-selector`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`${t}-affix-wrapper`]:{"&:not(:last-child)":{borderStartEndRadius:0,borderEndEndRadius:0,[`${t}-search &`]:{borderStartStartRadius:e.borderRadius,borderEndStartRadius:e.borderRadius}},[`&:not(:first-child), ${t}-search &:not(:first-child)`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`&${t}-group-compact`]:Object.assign(Object.assign({display:"block"},hN()),{[`${t}-group-addon, ${t}-group-wrap, > ${t}`]:{"&:not(:first-child):not(:last-child)":{borderInlineEndWidth:e.lineWidth,"&:hover":{zIndex:1},"&:focus":{zIndex:1}}},"& > *":{display:"inline-block",float:"none",verticalAlign:"top",borderRadius:0},[`
        & > ${t}-affix-wrapper,
        & > ${t}-number-affix-wrapper,
        & > ${r}-picker-range
      `]:{display:"inline-flex"},"& > *:not(:last-child)":{marginInlineEnd:-e.lineWidth,borderInlineEndWidth:e.lineWidth},[`${t}`]:{float:"none"},[`& > ${r}-select > ${r}-select-selector,
      & > ${r}-select-auto-complete ${t},
      & > ${r}-cascader-picker ${t},
      & > ${t}-group-wrapper ${t}`]:{borderInlineEndWidth:e.lineWidth,borderRadius:0,"&:hover":{zIndex:1},"&:focus":{zIndex:1}},[`& > ${r}-select-focused`]:{zIndex:1},[`& > ${r}-select > ${r}-select-arrow`]:{zIndex:1},[`& > *:first-child,
      & > ${r}-select:first-child > ${r}-select-selector,
      & > ${r}-select-auto-complete:first-child ${t},
      & > ${r}-cascader-picker:first-child ${t}`]:{borderStartStartRadius:e.borderRadius,borderEndStartRadius:e.borderRadius},[`& > *:last-child,
      & > ${r}-select:last-child > ${r}-select-selector,
      & > ${r}-cascader-picker:last-child ${t},
      & > ${r}-cascader-picker-focused:last-child ${t}`]:{borderInlineEndWidth:e.lineWidth,borderStartEndRadius:e.borderRadius,borderEndEndRadius:e.borderRadius},[`& > ${r}-select-auto-complete ${t}`]:{verticalAlign:"top"},[`${t}-group-wrapper + ${t}-group-wrapper`]:{marginInlineStart:-e.lineWidth,[`${t}-affix-wrapper`]:{borderRadius:0}},[`${t}-group-wrapper:not(:last-child)`]:{[`&${t}-search > ${t}-group`]:{[`& > ${t}-group-addon > ${t}-search-button`]:{borderRadius:0},[`& > ${t}`]:{borderStartStartRadius:e.borderRadius,borderStartEndRadius:0,borderEndEndRadius:0,borderEndStartRadius:e.borderRadius}}}})}},J7=e=>{const{componentCls:t,controlHeightSM:r,lineWidth:a}=e,c=16,f=(r-a*2-c)/2;return{[t]:Object.assign(Object.assign(Object.assign(Object.assign({},ca(e)),QS(e)),gD(e,t)),{'&[type="color"]':{height:e.controlHeight,[`&${t}-lg`]:{height:e.controlHeightLG},[`&${t}-sm`]:{height:r,paddingTop:f,paddingBottom:f}},'&[type="search"]::-webkit-search-cancel-button, &[type="search"]::-webkit-search-decoration':{"-webkit-appearance":"none"}})}},Q7=e=>{const{componentCls:t}=e;return{[`${t}-clear-icon`]:{margin:0,color:e.colorTextQuaternary,fontSize:e.fontSizeIcon,verticalAlign:-1,cursor:"pointer",transition:`color ${e.motionDurationSlow}`,"&:hover":{color:e.colorTextTertiary},"&:active":{color:e.colorText},"&-hidden":{visibility:"hidden"},"&-has-suffix":{margin:`0 ${e.inputAffixPadding}px`}}}},eH=e=>{const{componentCls:t,inputAffixPadding:r,colorTextDescription:a,motionDurationSlow:c,colorIcon:f,colorIconHover:y,iconCls:l}=e;return{[`${t}-affix-wrapper`]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},QS(e)),{display:"inline-flex",[`&:not(${t}-affix-wrapper-disabled):hover`]:{zIndex:1,[`${t}-search-with-button &`]:{zIndex:0}},"&-focused, &:focus":{zIndex:1},"&-disabled":{[`${t}[disabled]`]:{background:"transparent"}},[`> input${t}`]:{padding:0,fontSize:"inherit",border:"none",borderRadius:0,outline:"none","&::-ms-reveal":{display:"none"},"&:focus":{boxShadow:"none !important"}},"&::before":{display:"inline-block",width:0,visibility:"hidden",content:'"\\a0"'},[`${t}`]:{"&-prefix, &-suffix":{display:"flex",flex:"none",alignItems:"center","> *:not(:last-child)":{marginInlineEnd:e.paddingXS}},"&-show-count-suffix":{color:a},"&-show-count-has-suffix":{marginInlineEnd:e.paddingXXS},"&-prefix":{marginInlineEnd:r},"&-suffix":{marginInlineStart:r}}}),Q7(e)),{[`${l}${t}-password-icon`]:{color:f,cursor:"pointer",transition:`all ${c}`,"&:hover":{color:y}}}),gD(e,`${t}-affix-wrapper`))}},tH=e=>{const{componentCls:t,colorError:r,colorWarning:a,borderRadiusLG:c,borderRadiusSM:f}=e;return{[`${t}-group`]:Object.assign(Object.assign(Object.assign({},ca(e)),Y7(e)),{"&-rtl":{direction:"rtl"},"&-wrapper":{display:"inline-block",width:"100%",textAlign:"start",verticalAlign:"top","&-rtl":{direction:"rtl"},"&-lg":{[`${t}-group-addon`]:{borderRadius:c,fontSize:e.fontSizeLG}},"&-sm":{[`${t}-group-addon`]:{borderRadius:f}},"&-status-error":{[`${t}-group-addon`]:{color:r,borderColor:r}},"&-status-warning":{[`${t}-group-addon`]:{color:a,borderColor:a}},"&-disabled":{[`${t}-group-addon`]:Object.assign({},pD(e))},[`&:not(${t}-compact-first-item):not(${t}-compact-last-item)${t}-compact-item`]:{[`${t}, ${t}-group-addon`]:{borderRadius:0}},[`&:not(${t}-compact-last-item)${t}-compact-first-item`]:{[`${t}, ${t}-group-addon`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&:not(${t}-compact-first-item)${t}-compact-last-item`]:{[`${t}, ${t}-group-addon`]:{borderStartStartRadius:0,borderEndStartRadius:0}}}})}},nH=e=>{const{componentCls:t,antCls:r}=e,a=`${t}-search`;return{[a]:{[`${t}`]:{"&:hover, &:focus":{borderColor:e.colorPrimaryHover,[`+ ${t}-group-addon ${a}-button:not(${r}-btn-primary)`]:{borderInlineStartColor:e.colorPrimaryHover}}},[`${t}-affix-wrapper`]:{borderRadius:0},[`${t}-lg`]:{lineHeight:e.lineHeightLG-2e-4},[`> ${t}-group`]:{[`> ${t}-group-addon:last-child`]:{insetInlineStart:-1,padding:0,border:0,[`${a}-button`]:{paddingTop:0,paddingBottom:0,borderStartStartRadius:0,borderStartEndRadius:e.borderRadius,borderEndEndRadius:e.borderRadius,borderEndStartRadius:0,boxShadow:"none"},[`${a}-button:not(${r}-btn-primary)`]:{color:e.colorTextDescription,"&:hover":{color:e.colorPrimaryHover},"&:active":{color:e.colorPrimaryActive},[`&${r}-btn-loading::before`]:{insetInlineStart:0,insetInlineEnd:0,insetBlockStart:0,insetBlockEnd:0}}}},[`${a}-button`]:{height:e.controlHeight,"&:hover, &:focus":{zIndex:1}},[`&-large ${a}-button`]:{height:e.controlHeightLG},[`&-small ${a}-button`]:{height:e.controlHeightSM},"&-rtl":{direction:"rtl"},[`&${t}-compact-item`]:{[`&:not(${t}-compact-last-item)`]:{[`${t}-group-addon`]:{[`${t}-search-button`]:{marginInlineEnd:-e.lineWidth,borderRadius:0}}},[`&:not(${t}-compact-first-item)`]:{[`${t},${t}-affix-wrapper`]:{borderRadius:0}},[`> ${t}-group-addon ${t}-search-button,
        > ${t},
        ${t}-affix-wrapper`]:{"&:hover,&:focus,&:active":{zIndex:2}},[`> ${t}-affix-wrapper-focused`]:{zIndex:2}}}}},rH=e=>{const{componentCls:t,paddingLG:r}=e,a=`${t}-textarea`;return{[a]:{position:"relative","&-show-count":{[`> ${t}`]:{height:"100%"},[`${t}-data-count`]:{position:"absolute",bottom:-e.fontSize*e.lineHeight,insetInlineEnd:0,color:e.colorTextDescription,whiteSpace:"nowrap",pointerEvents:"none"}},"&-allow-clear":{[`> ${t}`]:{paddingInlineEnd:r}},[`&-affix-wrapper${a}-has-feedback`]:{[`${t}`]:{paddingInlineEnd:r}},[`&-affix-wrapper${t}-affix-wrapper`]:{padding:0,[`> textarea${t}`]:{fontSize:"inherit",border:"none",outline:"none","&:focus":{boxShadow:"none !important"}},[`${t}-suffix`]:{margin:0,"> *:not(:last-child)":{marginInline:0},[`${t}-clear-icon`]:{position:"absolute",insetInlineEnd:e.paddingXS,insetBlockStart:e.paddingXS},[`${a}-suffix`]:{position:"absolute",top:0,insetInlineEnd:e.paddingInline,bottom:0,zIndex:1,display:"inline-flex",alignItems:"center",margin:"auto",pointerEvents:"none"}}}}}},iH=e=>{const{componentCls:t}=e;return{[`${t}-out-of-range`]:{[`&, & input, & textarea, ${t}-show-count-suffix, ${t}-data-count`]:{color:e.colorError}}}};function vD(e){return $r(e,{inputAffixPadding:e.paddingXXS})}const yD=e=>{const{controlHeight:t,fontSize:r,lineHeight:a,lineWidth:c,controlHeightSM:f,controlHeightLG:y,fontSizeLG:l,lineHeightLG:w,paddingSM:C,controlPaddingHorizontalSM:P,controlPaddingHorizontal:A,colorFillAlter:D,colorPrimaryHover:N,colorPrimary:F,controlOutlineWidth:U,controlOutline:Z,colorErrorOutline:j,colorWarningOutline:B}=e;return{paddingBlock:Math.max(Math.round((t-r*a)/2*10)/10-c,0),paddingBlockSM:Math.max(Math.round((f-r*a)/2*10)/10-c,0),paddingBlockLG:Math.ceil((y-l*w)/2*10)/10-c,paddingInline:C-c,paddingInlineSM:P-c,paddingInlineLG:A-c,addonBg:D,activeBorderColor:F,hoverBorderColor:N,activeShadow:`0 0 0 ${U}px ${Z}`,errorActiveShadow:`0 0 0 ${U}px ${j}`,warningActiveShadow:`0 0 0 ${U}px ${B}`,hoverBg:"",activeBg:""}},eE=_o("Input",e=>{const t=$r(e,vD(e));return[J7(t),rH(t),eH(t),tH(t),nH(t),iH(t),US(t)]},yD);function oH(e,t,r){var a=r||{},c=a.noTrailing,f=c===void 0?!1:c,y=a.noLeading,l=y===void 0?!1:y,w=a.debounceMode,C=w===void 0?void 0:w,P,A=!1,D=0;function N(){P&&clearTimeout(P)}function F(Z){var j=Z||{},B=j.upcomingOnly,H=B===void 0?!1:B;N(),A=!H}function U(){for(var Z=arguments.length,j=new Array(Z),B=0;B<Z;B++)j[B]=arguments[B];var H=this,Y=Date.now()-D;if(A)return;function ne(){D=Date.now(),t.apply(H,j)}function re(){P=void 0}!l&&C&&!P&&ne(),N(),C===void 0&&Y>e?l?(D=Date.now(),f||(P=setTimeout(C?re:ne,e))):ne():f!==!0&&(P=setTimeout(C?re:ne,C===void 0?e-Y:e))}return U.cancel=F,U}function aH(e,t,r){var a=r||{},c=a.atBegin,f=c===void 0?!1:c;return oH(e,t,{debounceMode:f!==!1})}const sH=T.createContext({}),_D=sH,lH=e=>{const{componentCls:t}=e;return{[t]:{display:"flex",flexFlow:"row wrap",minWidth:0,"&::before, &::after":{display:"flex"},"&-no-wrap":{flexWrap:"nowrap"},"&-start":{justifyContent:"flex-start"},"&-center":{justifyContent:"center"},"&-end":{justifyContent:"flex-end"},"&-space-between":{justifyContent:"space-between"},"&-space-around":{justifyContent:"space-around"},"&-space-evenly":{justifyContent:"space-evenly"},"&-top":{alignItems:"flex-start"},"&-middle":{alignItems:"center"},"&-bottom":{alignItems:"flex-end"}}}},cH=e=>{const{componentCls:t}=e;return{[t]:{position:"relative",maxWidth:"100%",minHeight:1}}},uH=(e,t)=>{const{componentCls:r,gridColumns:a}=e,c={};for(let f=a;f>=0;f--)f===0?(c[`${r}${t}-${f}`]={display:"none"},c[`${r}-push-${f}`]={insetInlineStart:"auto"},c[`${r}-pull-${f}`]={insetInlineEnd:"auto"},c[`${r}${t}-push-${f}`]={insetInlineStart:"auto"},c[`${r}${t}-pull-${f}`]={insetInlineEnd:"auto"},c[`${r}${t}-offset-${f}`]={marginInlineStart:0},c[`${r}${t}-order-${f}`]={order:0}):(c[`${r}${t}-${f}`]=[{"--ant-display":"block",display:"block"},{display:"var(--ant-display)",flex:`0 0 ${f/a*100}%`,maxWidth:`${f/a*100}%`}],c[`${r}${t}-push-${f}`]={insetInlineStart:`${f/a*100}%`},c[`${r}${t}-pull-${f}`]={insetInlineEnd:`${f/a*100}%`},c[`${r}${t}-offset-${f}`]={marginInlineStart:`${f/a*100}%`},c[`${r}${t}-order-${f}`]={order:f});return c},vw=(e,t)=>uH(e,t),dH=(e,t,r)=>({[`@media (min-width: ${t}px)`]:Object.assign({},vw(e,r))}),hH=_o("Grid",e=>[lH(e)]),fH=_o("Grid",e=>{const t=$r(e,{gridColumns:24}),r={"-sm":t.screenSMMin,"-md":t.screenMDMin,"-lg":t.screenLGMin,"-xl":t.screenXLMin,"-xxl":t.screenXXLMin};return[cH(t),vw(t,""),vw(t,"-xs"),Object.keys(r).map(a=>dH(t,r[a],a)).reduce((a,c)=>Object.assign(Object.assign({},a),c),{})]});var pH=globalThis&&globalThis.__rest||function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(r[a[c]]=e[a[c]]);return r};function mH(e){return typeof e=="number"?`${e} ${e} auto`:/^\d+(\.\d+)?(px|em|rem|%)$/.test(e)?`0 0 ${e}`:e}const gH=["xs","sm","md","lg","xl","xxl"],vH=T.forwardRef((e,t)=>{const{getPrefixCls:r,direction:a}=T.useContext(cr),{gutter:c,wrap:f}=T.useContext(_D),{prefixCls:y,span:l,order:w,offset:C,push:P,pull:A,className:D,children:N,flex:F,style:U}=e,Z=pH(e,["prefixCls","span","order","offset","push","pull","className","children","flex","style"]),j=r("col",y),[B,H]=fH(j);let Y={};gH.forEach(Q=>{let te={};const ee=e[Q];typeof ee=="number"?te.span=ee:typeof ee=="object"&&(te=ee||{}),delete Z[Q],Y=Object.assign(Object.assign({},Y),{[`${j}-${Q}-${te.span}`]:te.span!==void 0,[`${j}-${Q}-order-${te.order}`]:te.order||te.order===0,[`${j}-${Q}-offset-${te.offset}`]:te.offset||te.offset===0,[`${j}-${Q}-push-${te.push}`]:te.push||te.push===0,[`${j}-${Q}-pull-${te.pull}`]:te.pull||te.pull===0,[`${j}-${Q}-flex-${te.flex}`]:te.flex||te.flex==="auto",[`${j}-rtl`]:a==="rtl"})});const ne=kt(j,{[`${j}-${l}`]:l!==void 0,[`${j}-order-${w}`]:w,[`${j}-offset-${C}`]:C,[`${j}-push-${P}`]:P,[`${j}-pull-${A}`]:A},D,Y,H),re={};if(c&&c[0]>0){const Q=c[0]/2;re.paddingLeft=Q,re.paddingRight=Q}return F&&(re.flex=mH(F),f===!1&&!re.minWidth&&(re.minWidth=0)),B(T.createElement("div",Object.assign({},Z,{style:Object.assign(Object.assign({},re),U),className:ne,ref:t}),N))}),yH=vH;var _H=globalThis&&globalThis.__rest||function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(r[a[c]]=e[a[c]]);return r};function BM(e,t){const[r,a]=T.useState(typeof e=="string"?e:""),c=()=>{if(typeof e=="string"&&a(e),typeof e=="object")for(let f=0;f<Tu.length;f++){const y=Tu[f];if(!t[y])continue;const l=e[y];if(l!==void 0){a(l);return}}};return T.useEffect(()=>{c()},[JSON.stringify(e),t]),r}const xH=T.forwardRef((e,t)=>{const{prefixCls:r,justify:a,align:c,className:f,style:y,children:l,gutter:w=0,wrap:C}=e,P=_H(e,["prefixCls","justify","align","className","style","children","gutter","wrap"]),{getPrefixCls:A,direction:D}=T.useContext(cr),[N,F]=T.useState({xs:!0,sm:!0,md:!0,lg:!0,xl:!0,xxl:!0}),[U,Z]=T.useState({xs:!1,sm:!1,md:!1,lg:!1,xl:!1,xxl:!1}),j=BM(c,U),B=BM(a,U),H=T.useRef(w),Y=nD();T.useEffect(()=>{const $e=Y.subscribe(je=>{Z(je);const pe=H.current||0;(!Array.isArray(pe)&&typeof pe=="object"||Array.isArray(pe)&&(typeof pe[0]=="object"||typeof pe[1]=="object"))&&F(je)});return()=>Y.unsubscribe($e)},[]);const ne=()=>{const $e=[void 0,void 0];return(Array.isArray(w)?w:[w,void 0]).forEach((pe,He)=>{if(typeof pe=="object")for(let Be=0;Be<Tu.length;Be++){const Ze=Tu[Be];if(N[Ze]&&pe[Ze]!==void 0){$e[He]=pe[Ze];break}}else $e[He]=pe}),$e},re=A("row",r),[Q,te]=hH(re),ee=ne(),ve=kt(re,{[`${re}-no-wrap`]:C===!1,[`${re}-${B}`]:B,[`${re}-${j}`]:j,[`${re}-rtl`]:D==="rtl"},f,te),he={},oe=ee[0]!=null&&ee[0]>0?ee[0]/-2:void 0;oe&&(he.marginLeft=oe,he.marginRight=oe),[,he.rowGap]=ee;const[fe,Te]=ee,Fe=T.useMemo(()=>({gutter:[fe,Te],wrap:C}),[fe,Te,C]);return Q(T.createElement(_D.Provider,{value:Fe},T.createElement("div",Object.assign({},P,{className:ve,style:Object.assign(Object.assign({},he),y),ref:t}),l)))}),bH=xH;function Dd(e){return!!(e.addonBefore||e.addonAfter)}function y1(e){return!!(e.prefix||e.suffix||e.allowClear)}function $y(e,t,r,a){if(r){var c=t;if(t.type==="click"){var f=e.cloneNode(!0);c=Object.create(t,{target:{value:f},currentTarget:{value:f}}),f.value="",r(c);return}if(a!==void 0){c=Object.create(t,{target:{value:e},currentTarget:{value:e}}),e.type!=="file"&&(e.value=a),r(c);return}r(c)}}function wH(e,t){if(e){e.focus(t);var r=t||{},a=r.cursor;if(a){var c=e.value.length;switch(a){case"start":e.setSelectionRange(0,0);break;case"end":e.setSelectionRange(c,c);break;default:e.setSelectionRange(0,c)}}}}var xD=function(t){var r,a,c=t.inputElement,f=t.prefixCls,y=t.prefix,l=t.suffix,w=t.addonBefore,C=t.addonAfter,P=t.className,A=t.style,D=t.disabled,N=t.readOnly,F=t.focused,U=t.triggerFocus,Z=t.allowClear,j=t.value,B=t.handleReset,H=t.hidden,Y=t.classes,ne=t.classNames,re=t.dataAttrs,Q=t.styles,te=t.components,ee=(te==null?void 0:te.affixWrapper)||"span",ve=(te==null?void 0:te.groupWrapper)||"span",he=(te==null?void 0:te.wrapper)||"span",oe=(te==null?void 0:te.groupAddon)||"span",fe=T.useRef(null),Te=function(Ft){var Nt;(Nt=fe.current)!==null&&Nt!==void 0&&Nt.contains(Ft.target)&&(U==null||U())},Fe=function(){var Ft;if(!Z)return null;var Nt=!D&&!N&&j,Ct="".concat(f,"-clear-icon"),ut=Kn(Z)==="object"&&Z!==null&&Z!==void 0&&Z.clearIcon?Z.clearIcon:"✖";return pt.createElement("span",{onClick:B,onMouseDown:function(dt){return dt.preventDefault()},className:kt(Ct,(Ft={},ke(Ft,"".concat(Ct,"-hidden"),!Nt),ke(Ft,"".concat(Ct,"-has-suffix"),!!l),Ft)),role:"button",tabIndex:-1},ut)},$e=T.cloneElement(c,{value:j,hidden:H,className:kt((r=c.props)===null||r===void 0?void 0:r.className,!y1(t)&&!Dd(t)&&P)||null,style:st(st({},(a=c.props)===null||a===void 0?void 0:a.style),!y1(t)&&!Dd(t)?A:{})});if(y1(t)){var je,pe="".concat(f,"-affix-wrapper"),He=kt(pe,(je={},ke(je,"".concat(pe,"-disabled"),D),ke(je,"".concat(pe,"-focused"),F),ke(je,"".concat(pe,"-readonly"),N),ke(je,"".concat(pe,"-input-with-clear-btn"),l&&Z&&j),je),!Dd(t)&&P,Y==null?void 0:Y.affixWrapper,ne==null?void 0:ne.affixWrapper),Be=(l||Z)&&pt.createElement("span",{className:kt("".concat(f,"-suffix"),ne==null?void 0:ne.suffix),style:Q==null?void 0:Q.suffix},Fe(),l);$e=pt.createElement(ee,Cn({className:He,style:st(st({},Dd(t)?void 0:A),Q==null?void 0:Q.affixWrapper),hidden:!Dd(t)&&H,onClick:Te},re==null?void 0:re.affixWrapper,{ref:fe}),y&&pt.createElement("span",{className:kt("".concat(f,"-prefix"),ne==null?void 0:ne.prefix),style:Q==null?void 0:Q.prefix},y),T.cloneElement(c,{value:j,hidden:null}),Be)}if(Dd(t)){var Ze="".concat(f,"-group"),nt="".concat(Ze,"-addon"),yt=kt("".concat(f,"-wrapper"),Ze,Y==null?void 0:Y.wrapper),Ot=kt("".concat(f,"-group-wrapper"),P,Y==null?void 0:Y.group);return pt.createElement(ve,{className:Ot,style:A,hidden:H},pt.createElement(he,{className:yt},w&&pt.createElement(oe,{className:nt},w),T.cloneElement($e,{hidden:null}),C&&pt.createElement(oe,{className:nt},C)))}return $e},SH=["show"];function bD(e,t){return T.useMemo(function(){var r={};t&&(r.show=Kn(t)==="object"&&t.formatter?t.formatter:!!t),r=st(st({},r),e);var a=r,c=a.show,f=Vr(a,SH);return st(st({},f),{},{show:!!c,showFormatter:typeof c=="function"?c:void 0,strategy:f.strategy||function(y){return y.length}})},[e,t])}var EH=["autoComplete","onChange","onFocus","onBlur","onPressEnter","onKeyDown","prefixCls","disabled","htmlSize","className","maxLength","suffix","showCount","count","type","classes","classNames","styles","onCompositionStart","onCompositionEnd"],CH=T.forwardRef(function(e,t){var r=e.autoComplete,a=e.onChange,c=e.onFocus,f=e.onBlur,y=e.onPressEnter,l=e.onKeyDown,w=e.prefixCls,C=w===void 0?"rc-input":w,P=e.disabled,A=e.htmlSize,D=e.className,N=e.maxLength,F=e.suffix,U=e.showCount,Z=e.count,j=e.type,B=j===void 0?"text":j,H=e.classes,Y=e.classNames,ne=e.styles,re=e.onCompositionStart,Q=e.onCompositionEnd,te=Vr(e,EH),ee=T.useState(!1),ve=$t(ee,2),he=ve[0],oe=ve[1],fe=pt.useRef(!1),Te=T.useRef(null),Fe=function(it){Te.current&&wH(Te.current,it)},$e=ms(e.defaultValue,{value:e.value}),je=$t($e,2),pe=je[0],He=je[1],Be=pe==null?"":String(pe),Ze=pt.useState(null),nt=$t(Ze,2),yt=nt[0],Ot=nt[1],Mt=bD(Z,U),Ft=Mt.max||N,Nt=Mt.strategy(Be),Ct=!!Ft&&Nt>Ft;T.useImperativeHandle(t,function(){return{focus:Fe,blur:function(){var it;(it=Te.current)===null||it===void 0||it.blur()},setSelectionRange:function(it,Rt,bt){var sn;(sn=Te.current)===null||sn===void 0||sn.setSelectionRange(it,Rt,bt)},select:function(){var it;(it=Te.current)===null||it===void 0||it.select()},input:Te.current}}),T.useEffect(function(){oe(function(at){return at&&P?!1:at})},[P]);var ut=function(it,Rt){var bt=Rt;if(!fe.current&&Mt.exceedFormatter&&Mt.max&&Mt.strategy(Rt)>Mt.max&&(bt=Mt.exceedFormatter(Rt,{max:Mt.max}),Rt!==bt)){var sn,An;Ot([((sn=Te.current)===null||sn===void 0?void 0:sn.selectionStart)||0,((An=Te.current)===null||An===void 0?void 0:An.selectionEnd)||0])}He(bt),Te.current&&$y(Te.current,it,a,bt)};pt.useEffect(function(){if(yt){var at;(at=Te.current)===null||at===void 0||at.setSelectionRange.apply(at,_n(yt))}},[yt]);var At=function(it){ut(it,it.target.value)},dt=function(it){fe.current=!1,ut(it,it.currentTarget.value),Q==null||Q(it)},Bt=function(it){y&&it.key==="Enter"&&y(it),l==null||l(it)},gt=function(it){oe(!0),c==null||c(it)},jt=function(it){oe(!1),f==null||f(it)},zt=function(it){He(""),Fe(),Te.current&&$y(Te.current,it,a)},an=Ct&&"".concat(C,"-out-of-range"),Kt=function(){var it=Sc(e,["prefixCls","onPressEnter","addonBefore","addonAfter","prefix","suffix","allowClear","defaultValue","showCount","count","classes","htmlSize","styles","classNames"]);return pt.createElement("input",Cn({autoComplete:r},it,{onChange:At,onFocus:gt,onBlur:jt,onKeyDown:Bt,className:kt(C,ke({},"".concat(C,"-disabled"),P),Y==null?void 0:Y.input),style:ne==null?void 0:ne.input,ref:Te,size:A,type:B,onCompositionStart:function(bt){fe.current=!0,re==null||re(bt)},onCompositionEnd:dt}))},Ut=function(){var it=Number(Ft)>0;if(F||Mt.show){var Rt=Mt.showFormatter?Mt.showFormatter({value:Be,count:Nt,maxLength:Ft}):"".concat(Nt).concat(it?" / ".concat(Ft):"");return pt.createElement(pt.Fragment,null,Mt.show&&pt.createElement("span",{className:kt("".concat(C,"-show-count-suffix"),ke({},"".concat(C,"-show-count-has-suffix"),!!F),Y==null?void 0:Y.count),style:st({},ne==null?void 0:ne.count)},Rt),F)}return null};return pt.createElement(xD,Cn({},te,{prefixCls:C,className:kt(D,an),inputElement:Kt(),handleReset:zt,value:Be,focused:he,triggerFocus:Fe,suffix:Ut(),disabled:P,classes:H,classNames:Y,styles:ne}))});const TH=e=>{const{getPrefixCls:t,direction:r}=T.useContext(cr),{prefixCls:a,className:c}=e,f=t("input-group",a),y=t("input"),[l,w]=eE(y),C=kt(f,{[`${f}-lg`]:e.size==="large",[`${f}-sm`]:e.size==="small",[`${f}-compact`]:e.compact,[`${f}-rtl`]:r==="rtl"},w,c),P=T.useContext(yc),A=T.useMemo(()=>Object.assign(Object.assign({},P),{isFormItemInput:!1}),[P]);return l(T.createElement("span",{className:C,style:e.style,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,onFocus:e.onFocus,onBlur:e.onBlur},T.createElement(yc.Provider,{value:A},e.children)))},IH=TH;function wD(e,t){const r=T.useRef([]),a=()=>{r.current.push(setTimeout(()=>{var c,f,y,l;!((c=e.current)===null||c===void 0)&&c.input&&((f=e.current)===null||f===void 0?void 0:f.input.getAttribute("type"))==="password"&&(!((y=e.current)===null||y===void 0)&&y.input.hasAttribute("value"))&&((l=e.current)===null||l===void 0||l.input.removeAttribute("value"))}))};return T.useEffect(()=>(t&&a(),()=>r.current.forEach(c=>{c&&clearTimeout(c)})),[]),a}function MH(e){return!!(e.prefix||e.suffix||e.allowClear)}var PH=globalThis&&globalThis.__rest||function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(r[a[c]]=e[a[c]]);return r};function AH(e,t){if(!e)return;e.focus(t);const{cursor:r}=t||{};if(r){const a=e.value.length;switch(r){case"start":e.setSelectionRange(0,0);break;case"end":e.setSelectionRange(a,a);break;default:e.setSelectionRange(0,a);break}}}const RH=T.forwardRef((e,t)=>{var r;const{prefixCls:a,bordered:c=!0,status:f,size:y,disabled:l,onBlur:w,onFocus:C,suffix:P,allowClear:A,addonAfter:D,addonBefore:N,className:F,style:U,styles:Z,rootClassName:j,onChange:B,classNames:H}=e,Y=PH(e,["prefixCls","bordered","status","size","disabled","onBlur","onFocus","suffix","allowClear","addonAfter","addonBefore","className","style","styles","rootClassName","onChange","classNames"]),{getPrefixCls:ne,direction:re,input:Q}=pt.useContext(cr),te=ne("input",a),ee=T.useRef(null),[ve,he]=eE(te),{compactSize:oe,compactItemClassnames:fe}=C0(te,re),Te=bl(Ct=>{var ut;return(ut=y??oe)!==null&&ut!==void 0?ut:Ct}),Fe=pt.useContext(Ph),$e=l??Fe,{status:je,hasFeedback:pe,feedbackIcon:He}=T.useContext(yc),Be=KS(je,f),Ze=MH(e)||!!pe;T.useRef(Ze);const nt=wD(ee,!0),yt=Ct=>{nt(),w==null||w(Ct)},Ot=Ct=>{nt(),C==null||C(Ct)},Mt=Ct=>{nt(),B==null||B(Ct)},Ft=(pe||P)&&pt.createElement(pt.Fragment,null,P,pe&&He);let Nt;return typeof A=="object"&&(A!=null&&A.clearIcon)?Nt=A:A&&(Nt={clearIcon:pt.createElement(w0,null)}),ve(pt.createElement(CH,Object.assign({ref:gs(t,ee),prefixCls:te,autoComplete:Q==null?void 0:Q.autoComplete},Y,{disabled:$e,onBlur:yt,onFocus:Ot,style:Object.assign(Object.assign({},Q==null?void 0:Q.style),U),styles:Object.assign(Object.assign({},Q==null?void 0:Q.styles),Z),suffix:Ft,allowClear:Nt,className:kt(F,j,fe,Q==null?void 0:Q.className),onChange:Mt,addonAfter:D&&pt.createElement(Jb,null,pt.createElement(dM,{override:!0,status:!0},D)),addonBefore:N&&pt.createElement(Jb,null,pt.createElement(dM,{override:!0,status:!0},N)),classNames:Object.assign(Object.assign(Object.assign({},H),Q==null?void 0:Q.classNames),{input:kt({[`${te}-sm`]:Te==="small",[`${te}-lg`]:Te==="large",[`${te}-rtl`]:re==="rtl",[`${te}-borderless`]:!c},!Ze&&sh(te,Be),H==null?void 0:H.input,(r=Q==null?void 0:Q.classNames)===null||r===void 0?void 0:r.input,he)}),classes:{affixWrapper:kt({[`${te}-affix-wrapper-sm`]:Te==="small",[`${te}-affix-wrapper-lg`]:Te==="large",[`${te}-affix-wrapper-rtl`]:re==="rtl",[`${te}-affix-wrapper-borderless`]:!c},sh(`${te}-affix-wrapper`,Be,pe),he),wrapper:kt({[`${te}-group-rtl`]:re==="rtl"},he),group:kt({[`${te}-group-wrapper-sm`]:Te==="small",[`${te}-group-wrapper-lg`]:Te==="large",[`${te}-group-wrapper-rtl`]:re==="rtl",[`${te}-group-wrapper-disabled`]:$e},sh(`${te}-group-wrapper`,Be,pe),he)}})))}),tE=RH;var OH={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2Q889.47 375.11 816.7 305l-50.88 50.88C807.31 395.53 843.45 447.4 874.7 512 791.5 684.2 673.4 766 512 766q-72.67 0-133.87-22.38L323 798.75Q408 838 512 838q288.3 0 430.2-300.3a60.29 60.29 0 000-51.5zm-63.57-320.64L836 122.88a8 8 0 00-11.32 0L715.31 232.2Q624.86 186 512 186q-288.3 0-430.2 300.3a60.3 60.3 0 000 51.5q56.69 119.4 136.5 191.41L112.48 835a8 8 0 000 11.31L155.17 889a8 8 0 0011.31 0l712.15-712.12a8 8 0 000-11.32zM149.3 512C232.6 339.8 350.7 258 512 258c54.54 0 104.13 9.36 149.12 28.39l-70.3 70.3a176 176 0 00-238.13 238.13l-83.42 83.42C223.1 637.49 183.3 582.28 149.3 512zm246.7 0a112.11 112.11 0 01146.2-106.69L401.31 546.2A112 112 0 01396 512z"}},{tag:"path",attrs:{d:"M508 624c-3.46 0-6.87-.16-10.25-.47l-52.82 52.82a176.09 176.09 0 00227.42-227.42l-52.82 52.82c.31 3.38.47 6.79.47 10.25a111.94 111.94 0 01-112 112z"}}]},name:"eye-invisible",theme:"outlined"};const zH=OH;var DH=function(t,r){return T.createElement(Xi,Cn({},t,{ref:r,icon:zH}))};const LH=T.forwardRef(DH);var kH={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"}}]},name:"eye",theme:"outlined"};const $H=kH;var FH=function(t,r){return T.createElement(Xi,Cn({},t,{ref:r,icon:$H}))};const BH=T.forwardRef(FH);var NH=globalThis&&globalThis.__rest||function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(r[a[c]]=e[a[c]]);return r};const jH=e=>e?T.createElement(BH,null):T.createElement(LH,null),UH={click:"onClick",hover:"onMouseOver"},VH=T.forwardRef((e,t)=>{const{visibilityToggle:r=!0}=e,a=typeof r=="object"&&r.visible!==void 0,[c,f]=T.useState(()=>a?r.visible:!1),y=T.useRef(null);T.useEffect(()=>{a&&f(r.visible)},[a,r]);const l=wD(y),w=()=>{const{disabled:ne}=e;ne||(c&&l(),f(re=>{var Q;const te=!re;return typeof r=="object"&&((Q=r.onVisibleChange)===null||Q===void 0||Q.call(r,te)),te}))},C=ne=>{const{action:re="click",iconRender:Q=jH}=e,te=UH[re]||"",ee=Q(c),ve={[te]:w,className:`${ne}-icon`,key:"passwordIcon",onMouseDown:he=>{he.preventDefault()},onMouseUp:he=>{he.preventDefault()}};return T.cloneElement(T.isValidElement(ee)?ee:T.createElement("span",null,ee),ve)},{className:P,prefixCls:A,inputPrefixCls:D,size:N}=e,F=NH(e,["className","prefixCls","inputPrefixCls","size"]),{getPrefixCls:U}=T.useContext(cr),Z=U("input",D),j=U("input-password",A),B=r&&C(j),H=kt(j,P,{[`${j}-${N}`]:!!N}),Y=Object.assign(Object.assign({},Sc(F,["suffix","iconRender","visibilityToggle"])),{type:c?"text":"password",className:H,prefixCls:Z,suffix:B});return N&&(Y.size=N),T.createElement(tE,Object.assign({ref:gs(t,y)},Y))}),HH=VH;var GH=globalThis&&globalThis.__rest||function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(r[a[c]]=e[a[c]]);return r};const WH=T.forwardRef((e,t)=>{const{prefixCls:r,inputPrefixCls:a,className:c,size:f,suffix:y,enterButton:l=!1,addonAfter:w,loading:C,disabled:P,onSearch:A,onChange:D,onCompositionStart:N,onCompositionEnd:F}=e,U=GH(e,["prefixCls","inputPrefixCls","className","size","suffix","enterButton","addonAfter","loading","disabled","onSearch","onChange","onCompositionStart","onCompositionEnd"]),{getPrefixCls:Z,direction:j}=T.useContext(cr),B=T.useRef(!1),H=Z("input-search",r),Y=Z("input",a),{compactSize:ne}=C0(H,j),re=bl(Be=>{var Ze;return(Ze=f??ne)!==null&&Ze!==void 0?Ze:Be}),Q=T.useRef(null),te=Be=>{Be&&Be.target&&Be.type==="click"&&A&&A(Be.target.value,Be,{source:"clear"}),D&&D(Be)},ee=Be=>{var Ze;document.activeElement===((Ze=Q.current)===null||Ze===void 0?void 0:Ze.input)&&Be.preventDefault()},ve=Be=>{var Ze,nt;A&&A((nt=(Ze=Q.current)===null||Ze===void 0?void 0:Ze.input)===null||nt===void 0?void 0:nt.value,Be,{source:"input"})},he=Be=>{B.current||C||ve(Be)},oe=typeof l=="boolean"?T.createElement(eD,null):null,fe=`${H}-button`;let Te;const Fe=l||{},$e=Fe.type&&Fe.type.__ANT_BUTTON===!0;$e||Fe.type==="button"?Te=vl(Fe,Object.assign({onMouseDown:ee,onClick:Be=>{var Ze,nt;(nt=(Ze=Fe==null?void 0:Fe.props)===null||Ze===void 0?void 0:Ze.onClick)===null||nt===void 0||nt.call(Ze,Be),ve(Be)},key:"enterButton"},$e?{className:fe,size:re}:{})):Te=T.createElement(s8,{className:fe,type:l?"primary":void 0,size:re,disabled:P,key:"enterButton",onMouseDown:ee,onClick:ve,loading:C,icon:oe},l),w&&(Te=[Te,vl(w,{key:"addonAfter"})]);const je=kt(H,{[`${H}-rtl`]:j==="rtl",[`${H}-${re}`]:!!re,[`${H}-with-button`]:!!l},c),pe=Be=>{B.current=!0,N==null||N(Be)},He=Be=>{B.current=!1,F==null||F(Be)};return T.createElement(tE,Object.assign({ref:gs(Q,t),onPressEnter:he},U,{size:re,onCompositionStart:pe,onCompositionEnd:He,prefixCls:Y,addonAfter:Te,suffix:y,onChange:te,className:je,disabled:P}))}),qH=WH;var ZH=`
  min-height:0 !important;
  max-height:none !important;
  height:0 !important;
  visibility:hidden !important;
  overflow:hidden !important;
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
  pointer-events: none !important;
`,XH=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","font-variant","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing","word-break","white-space"],_1={},Pa;function KH(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=e.getAttribute("id")||e.getAttribute("data-reactid")||e.getAttribute("name");if(t&&_1[r])return _1[r];var a=window.getComputedStyle(e),c=a.getPropertyValue("box-sizing")||a.getPropertyValue("-moz-box-sizing")||a.getPropertyValue("-webkit-box-sizing"),f=parseFloat(a.getPropertyValue("padding-bottom"))+parseFloat(a.getPropertyValue("padding-top")),y=parseFloat(a.getPropertyValue("border-bottom-width"))+parseFloat(a.getPropertyValue("border-top-width")),l=XH.map(function(C){return"".concat(C,":").concat(a.getPropertyValue(C))}).join(";"),w={sizingStyle:l,paddingSize:f,borderSize:y,boxSizing:c};return t&&r&&(_1[r]=w),w}function YH(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;Pa||(Pa=document.createElement("textarea"),Pa.setAttribute("tab-index","-1"),Pa.setAttribute("aria-hidden","true"),document.body.appendChild(Pa)),e.getAttribute("wrap")?Pa.setAttribute("wrap",e.getAttribute("wrap")):Pa.removeAttribute("wrap");var c=KH(e,t),f=c.paddingSize,y=c.borderSize,l=c.boxSizing,w=c.sizingStyle;Pa.setAttribute("style","".concat(w,";").concat(ZH)),Pa.value=e.value||e.placeholder||"";var C=void 0,P=void 0,A,D=Pa.scrollHeight;if(l==="border-box"?D+=y:l==="content-box"&&(D-=f),r!==null||a!==null){Pa.value=" ";var N=Pa.scrollHeight-f;r!==null&&(C=N*r,l==="border-box"&&(C=C+f+y),D=Math.max(C,D)),a!==null&&(P=N*a,l==="border-box"&&(P=P+f+y),A=D>P?"":"hidden",D=Math.min(P,D))}var F={height:D,overflowY:A,resize:"none"};return C&&(F.minHeight=C),P&&(F.maxHeight=P),F}var JH=["prefixCls","onPressEnter","defaultValue","value","autoSize","onResize","className","style","disabled","onChange","onInternalAutoSize"],x1=0,b1=1,w1=2,QH=T.forwardRef(function(e,t){var r=e,a=r.prefixCls;r.onPressEnter;var c=r.defaultValue,f=r.value,y=r.autoSize,l=r.onResize,w=r.className,C=r.style,P=r.disabled,A=r.onChange;r.onInternalAutoSize;var D=Vr(r,JH),N=ms(c,{value:f,postState:function(Ot){return Ot??""}}),F=$t(N,2),U=F[0],Z=F[1],j=function(Ot){Z(Ot.target.value),A==null||A(Ot)},B=T.useRef();T.useImperativeHandle(t,function(){return{textArea:B.current}});var H=T.useMemo(function(){return y&&Kn(y)==="object"?[y.minRows,y.maxRows]:[]},[y]),Y=$t(H,2),ne=Y[0],re=Y[1],Q=!!y,te=function(){try{if(document.activeElement===B.current){var Ot=B.current,Mt=Ot.selectionStart,Ft=Ot.selectionEnd,Nt=Ot.scrollTop;B.current.setSelectionRange(Mt,Ft),B.current.scrollTop=Nt}}catch{}},ee=T.useState(w1),ve=$t(ee,2),he=ve[0],oe=ve[1],fe=T.useState(),Te=$t(fe,2),Fe=Te[0],$e=Te[1],je=function(){oe(x1)};Lr(function(){Q&&je()},[f,ne,re,Q]),Lr(function(){if(he===x1)oe(b1);else if(he===b1){var yt=YH(B.current,!1,ne,re);oe(w1),$e(yt)}else te()},[he]);var pe=T.useRef(),He=function(){yi.cancel(pe.current)},Be=function(Ot){he===w1&&(l==null||l(Ot),y&&(He(),pe.current=yi(function(){je()})))};T.useEffect(function(){return He},[]);var Ze=Q?Fe:null,nt=st(st({},C),Ze);return(he===x1||he===b1)&&(nt.overflowY="hidden",nt.overflowX="hidden"),T.createElement(xl,{onResize:Be,disabled:!(y||l)},T.createElement("textarea",Cn({},D,{ref:B,style:nt,className:kt(a,w,ke({},"".concat(a,"-disabled"),P)),disabled:P,value:U,onChange:j})))}),eG=["defaultValue","value","onFocus","onBlur","onChange","allowClear","maxLength","onCompositionStart","onCompositionEnd","suffix","prefixCls","classes","showCount","count","className","style","disabled","hidden","classNames","styles","onResize"],tG=pt.forwardRef(function(e,t){var r,a,c=e.defaultValue,f=e.value,y=e.onFocus,l=e.onBlur,w=e.onChange,C=e.allowClear,P=e.maxLength,A=e.onCompositionStart,D=e.onCompositionEnd,N=e.suffix,F=e.prefixCls,U=F===void 0?"rc-textarea":F,Z=e.classes,j=e.showCount,B=e.count,H=e.className,Y=e.style,ne=e.disabled,re=e.hidden,Q=e.classNames,te=e.styles,ee=e.onResize,ve=Vr(e,eG),he=ms(c,{value:f,defaultValue:c}),oe=$t(he,2),fe=oe[0],Te=oe[1],Fe=fe==null?"":String(fe),$e=pt.useState(!1),je=$t($e,2),pe=je[0],He=je[1],Be=pt.useRef(!1),Ze=pt.useState(null),nt=$t(Ze,2),yt=nt[0],Ot=nt[1],Mt=T.useRef(null),Ft=function(){var nn;return(nn=Mt.current)===null||nn===void 0?void 0:nn.textArea},Nt=function(){Ft().focus()};T.useImperativeHandle(t,function(){return{resizableTextArea:Mt.current,focus:Nt,blur:function(){Ft().blur()}}}),T.useEffect(function(){He(function(vn){return!ne&&vn})},[ne]);var Ct=pt.useState(null),ut=$t(Ct,2),At=ut[0],dt=ut[1];pt.useEffect(function(){if(At){var vn;(vn=Ft()).setSelectionRange.apply(vn,_n(At))}},[At]);var Bt=bD(B,j),gt=(r=Bt.max)!==null&&r!==void 0?r:P,jt=Number(gt)>0,zt=Bt.strategy(Fe),an=!!gt&&zt>gt,Kt=function(nn,Wn){var jn=Wn;!Be.current&&Bt.exceedFormatter&&Bt.max&&Bt.strategy(Wn)>Bt.max&&(jn=Bt.exceedFormatter(Wn,{max:Bt.max}),Wn!==jn&&dt([Ft().selectionStart||0,Ft().selectionEnd||0])),Te(jn),$y(nn.currentTarget,nn,w,jn)},Ut=function(nn){Be.current=!0,A==null||A(nn)},at=function(nn){Be.current=!1,Kt(nn,nn.currentTarget.value),D==null||D(nn)},it=function(nn){Kt(nn,nn.target.value)},Rt=function(nn){var Wn=ve.onPressEnter,jn=ve.onKeyDown;nn.key==="Enter"&&Wn&&Wn(nn),jn==null||jn(nn)},bt=function(nn){He(!0),y==null||y(nn)},sn=function(nn){He(!1),l==null||l(nn)},An=function(nn){Te(""),Nt(),$y(Ft(),nn,w)},Mn=N,rn;Bt.show&&(Bt.showFormatter?rn=Bt.showFormatter({value:Fe,count:zt,maxLength:gt}):rn="".concat(zt).concat(jt?" / ".concat(gt):""),Mn=pt.createElement(pt.Fragment,null,Mn,pt.createElement("span",{className:kt("".concat(U,"-data-count"),Q==null?void 0:Q.count),style:te==null?void 0:te.count},rn)));var Vn=function(nn){var Wn;ee==null||ee(nn),(Wn=Ft())!==null&&Wn!==void 0&&Wn.style.height&&Ot(!0)},Nn=!ve.autoSize&&!j&&!C,zn=pt.createElement(xD,{value:Fe,allowClear:C,handleReset:An,suffix:Mn,prefixCls:U,classes:{affixWrapper:kt(Z==null?void 0:Z.affixWrapper,(a={},ke(a,"".concat(U,"-show-count"),j),ke(a,"".concat(U,"-textarea-allow-clear"),C),a))},disabled:ne,focused:pe,className:kt(H,an&&"".concat(U,"-out-of-range")),style:st(st({},Y),yt&&!Nn?{height:"auto"}:{}),dataAttrs:{affixWrapper:{"data-count":typeof rn=="string"?rn:void 0}},hidden:re,inputElement:pt.createElement(QH,Cn({},ve,{maxLength:P,onKeyDown:Rt,onChange:it,onFocus:bt,onBlur:sn,onCompositionStart:Ut,onCompositionEnd:at,className:kt(Q==null?void 0:Q.textarea),style:st(st({},te==null?void 0:te.textarea),{},{resize:Y==null?void 0:Y.resize}),disabled:ne,prefixCls:U,onResize:Vn,ref:Mt}))});return zn}),nG=globalThis&&globalThis.__rest||function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(r[a[c]]=e[a[c]]);return r};const rG=T.forwardRef((e,t)=>{var r;const{prefixCls:a,bordered:c=!0,size:f,disabled:y,status:l,allowClear:w,classNames:C,rootClassName:P,className:A}=e,D=nG(e,["prefixCls","bordered","size","disabled","status","allowClear","classNames","rootClassName","className"]),{getPrefixCls:N,direction:F}=T.useContext(cr),U=bl(f),Z=T.useContext(Ph),j=y??Z,{status:B,hasFeedback:H,feedbackIcon:Y}=T.useContext(yc),ne=KS(B,l),re=T.useRef(null);T.useImperativeHandle(t,()=>{var he;return{resizableTextArea:(he=re.current)===null||he===void 0?void 0:he.resizableTextArea,focus:oe=>{var fe,Te;AH((Te=(fe=re.current)===null||fe===void 0?void 0:fe.resizableTextArea)===null||Te===void 0?void 0:Te.textArea,oe)},blur:()=>{var oe;return(oe=re.current)===null||oe===void 0?void 0:oe.blur()}}});const Q=N("input",a);let te;typeof w=="object"&&(w!=null&&w.clearIcon)?te=w:w&&(te={clearIcon:T.createElement(w0,null)});const[ee,ve]=eE(Q);return ee(T.createElement(tG,Object.assign({},D,{disabled:j,allowClear:te,className:kt(A,P),classes:{affixWrapper:kt(`${Q}-textarea-affix-wrapper`,{[`${Q}-affix-wrapper-rtl`]:F==="rtl",[`${Q}-affix-wrapper-borderless`]:!c,[`${Q}-affix-wrapper-sm`]:U==="small",[`${Q}-affix-wrapper-lg`]:U==="large",[`${Q}-textarea-show-count`]:e.showCount||((r=e.count)===null||r===void 0?void 0:r.show)},sh(`${Q}-affix-wrapper`,ne),ve)},classNames:Object.assign(Object.assign({},C),{textarea:kt({[`${Q}-borderless`]:!c,[`${Q}-sm`]:U==="small",[`${Q}-lg`]:U==="large"},sh(Q,ne),ve,C==null?void 0:C.textarea)}),prefixCls:Q,suffix:H&&T.createElement("span",{className:`${Q}-textarea-suffix`},Y),ref:re})))}),SD=rG,Tm=tE;Tm.Group=IH;Tm.Search=qH;Tm.TextArea=SD;Tm.Password=HH;const nY=Tm;function NM(e){return["small","middle","large"].includes(e)}function jM(e){return e?typeof e=="number"&&!Number.isNaN(e):!1}const ED=pt.createContext({latestIndex:0}),iG=ED.Provider,oG=e=>{let{className:t,index:r,children:a,split:c,style:f}=e;const{latestIndex:y}=T.useContext(ED);return a==null?null:T.createElement(T.Fragment,null,T.createElement("div",{className:t,style:f},a),r<y&&c&&T.createElement("span",{className:`${t}-split`},c))},aG=oG;var sG=globalThis&&globalThis.__rest||function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(r[a[c]]=e[a[c]]);return r};const lG=T.forwardRef((e,t)=>{var r,a;const{getPrefixCls:c,space:f,direction:y}=T.useContext(cr),{size:l=(f==null?void 0:f.size)||"small",align:w,className:C,rootClassName:P,children:A,direction:D="horizontal",prefixCls:N,split:F,style:U,wrap:Z=!1,classNames:j,styles:B}=e,H=sG(e,["size","align","className","rootClassName","children","direction","prefixCls","split","style","wrap","classNames","styles"]),[Y,ne]=Array.isArray(l)?l:[l,l],re=NM(ne),Q=NM(Y),te=jM(ne),ee=jM(Y),ve=hl(A,{keepEmpty:!0}),he=w===void 0&&D==="horizontal"?"center":w,oe=c("space",N),[fe,Te]=az(oe),Fe=kt(oe,f==null?void 0:f.className,Te,`${oe}-${D}`,{[`${oe}-rtl`]:y==="rtl",[`${oe}-align-${he}`]:he,[`${oe}-gap-row-${ne}`]:re,[`${oe}-gap-col-${Y}`]:Q},C,P),$e=kt(`${oe}-item`,(r=j==null?void 0:j.item)!==null&&r!==void 0?r:(a=f==null?void 0:f.classNames)===null||a===void 0?void 0:a.item);let je=0;const pe=ve.map((Ze,nt)=>{var yt,Ot;Ze!=null&&(je=nt);const Mt=Ze&&Ze.key||`${$e}-${nt}`;return T.createElement(aG,{className:$e,key:Mt,index:nt,split:F,style:(yt=B==null?void 0:B.item)!==null&&yt!==void 0?yt:(Ot=f==null?void 0:f.styles)===null||Ot===void 0?void 0:Ot.item},Ze)}),He=T.useMemo(()=>({latestIndex:je}),[je]);if(ve.length===0)return null;const Be={};return Z&&(Be.flexWrap="wrap"),!Q&&ee&&(Be.columnGap=Y),!re&&te&&(Be.rowGap=ne),fe(T.createElement("div",Object.assign({ref:t,className:Fe,style:Object.assign(Object.assign(Object.assign({},Be),f==null?void 0:f.style),U)},H),T.createElement(iG,{value:He},pe)))}),CD=lG;CD.Compact=Ij;const rY=CD;function cG(){const e=Object.assign({},arguments.length<=0?void 0:arguments[0]);for(let t=1;t<arguments.length;t++){const r=t<0||arguments.length<=t?void 0:arguments[t];r&&Object.keys(r).forEach(a=>{const c=r[a];c!==void 0&&(e[a]=c)})}return e}var uG={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M272.9 512l265.4-339.1c4.1-5.2.4-12.9-6.3-12.9h-77.3c-4.9 0-9.6 2.3-12.6 6.1L186.8 492.3a31.99 31.99 0 000 39.5l255.3 326.1c3 3.9 7.7 6.1 12.6 6.1H532c6.7 0 10.4-7.7 6.3-12.9L272.9 512zm304 0l265.4-339.1c4.1-5.2.4-12.9-6.3-12.9h-77.3c-4.9 0-9.6 2.3-12.6 6.1L490.8 492.3a31.99 31.99 0 000 39.5l255.3 326.1c3 3.9 7.7 6.1 12.6 6.1H836c6.7 0 10.4-7.7 6.3-12.9L576.9 512z"}}]},name:"double-left",theme:"outlined"};const dG=uG;var hG=function(t,r){return T.createElement(Xi,Cn({},t,{ref:r,icon:dG}))};const UM=T.forwardRef(hG);var fG={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M533.2 492.3L277.9 166.1c-3-3.9-7.7-6.1-12.6-6.1H188c-6.7 0-10.4 7.7-6.3 12.9L447.1 512 181.7 851.1A7.98 7.98 0 00188 864h77.3c4.9 0 9.6-2.3 12.6-6.1l255.3-326.1c9.1-11.7 9.1-27.9 0-39.5zm304 0L581.9 166.1c-3-3.9-7.7-6.1-12.6-6.1H492c-6.7 0-10.4 7.7-6.3 12.9L751.1 512 485.7 851.1A7.98 7.98 0 00492 864h77.3c4.9 0 9.6-2.3 12.6-6.1l255.3-326.1c9.1-11.7 9.1-27.9 0-39.5z"}}]},name:"double-right",theme:"outlined"};const pG=fG;var mG=function(t,r){return T.createElement(Xi,Cn({},t,{ref:r,icon:pG}))};const VM=T.forwardRef(mG);var ou={ZERO:48,NINE:57,NUMPAD_ZERO:96,NUMPAD_NINE:105,BACKSPACE:8,DELETE:46,ENTER:13,ARROW_UP:38,ARROW_DOWN:40};const gG={items_per_page:"条/页",jump_to:"跳至",jump_to_confirm:"确定",page:"页",prev_page:"上一页",next_page:"下一页",prev_5:"向前 5 页",next_5:"向后 5 页",prev_3:"向前 3 页",next_3:"向后 3 页",page_size:"页码"};var yw=function(e){Th(r,e);var t=Ih(r);function r(){var a;ha(this,r);for(var c=arguments.length,f=new Array(c),y=0;y<c;y++)f[y]=arguments[y];return a=t.call.apply(t,[this].concat(f)),ke(gn(a),"state",{goInputText:""}),ke(gn(a),"getValidValue",function(){var l=a.state.goInputText;return!l||Number.isNaN(l)?void 0:Number(l)}),ke(gn(a),"buildOptionText",function(l){return"".concat(l," ").concat(a.props.locale.items_per_page)}),ke(gn(a),"changeSize",function(l){a.props.changeSize(Number(l))}),ke(gn(a),"handleChange",function(l){a.setState({goInputText:l.target.value})}),ke(gn(a),"handleBlur",function(l){var w=a.props,C=w.goButton,P=w.quickGo,A=w.rootPrefixCls,D=a.state.goInputText;C||D===""||(a.setState({goInputText:""}),!(l.relatedTarget&&(l.relatedTarget.className.indexOf("".concat(A,"-item-link"))>=0||l.relatedTarget.className.indexOf("".concat(A,"-item"))>=0))&&P(a.getValidValue()))}),ke(gn(a),"go",function(l){var w=a.state.goInputText;w!==""&&(l.keyCode===ou.ENTER||l.type==="click")&&(a.setState({goInputText:""}),a.props.quickGo(a.getValidValue()))}),a}return fa(r,[{key:"getPageSizeOptions",value:function(){var c=this.props,f=c.pageSize,y=c.pageSizeOptions;return y.some(function(l){return l.toString()===f.toString()})?y:y.concat([f.toString()]).sort(function(l,w){var C=Number.isNaN(Number(l))?0:Number(l),P=Number.isNaN(Number(w))?0:Number(w);return C-P})}},{key:"render",value:function(){var c=this,f=this.props,y=f.pageSize,l=f.locale,w=f.rootPrefixCls,C=f.changeSize,P=f.quickGo,A=f.goButton,D=f.selectComponentClass,N=f.buildOptionText,F=f.selectPrefixCls,U=f.disabled,Z=this.state.goInputText,j="".concat(w,"-options"),B=D,H=null,Y=null,ne=null;if(!C&&!P)return null;var re=this.getPageSizeOptions();if(C&&B){var Q=re.map(function(te,ee){return pt.createElement(B.Option,{key:ee,value:te.toString()},(N||c.buildOptionText)(te))});H=pt.createElement(B,{disabled:U,prefixCls:F,showSearch:!1,className:"".concat(j,"-size-changer"),optionLabelProp:"children",popupMatchSelectWidth:!1,value:(y||re[0]).toString(),onChange:this.changeSize,getPopupContainer:function(ee){return ee.parentNode},"aria-label":l.page_size,defaultOpen:!1},Q)}return P&&(A&&(ne=typeof A=="boolean"?pt.createElement("button",{type:"button",onClick:this.go,onKeyUp:this.go,disabled:U,className:"".concat(j,"-quick-jumper-button")},l.jump_to_confirm):pt.createElement("span",{onClick:this.go,onKeyUp:this.go},A)),Y=pt.createElement("div",{className:"".concat(j,"-quick-jumper")},l.jump_to,pt.createElement("input",{disabled:U,type:"text",value:Z,onChange:this.handleChange,onKeyUp:this.go,onBlur:this.handleBlur,"aria-label":l.page}),l.page,ne)),pt.createElement("li",{className:"".concat(j)},H,Y)}}]),r}(pt.Component);ke(yw,"defaultProps",{pageSizeOptions:["10","20","50","100"]});var pp=function(t){var r,a=t.rootPrefixCls,c=t.page,f=t.active,y=t.className,l=t.showTitle,w=t.onClick,C=t.onKeyPress,P=t.itemRender,A="".concat(a,"-item"),D=kt(A,"".concat(A,"-").concat(c),(r={},ke(r,"".concat(A,"-active"),f),ke(r,"".concat(A,"-disabled"),!c),ke(r,t.className,y),r)),N=function(){w(c)},F=function(j){C(j,w,c)},U=P(c,"page",pt.createElement("a",{rel:"nofollow"},c));return U?pt.createElement("li",{title:l?c.toString():null,className:D,onClick:N,onKeyPress:F,tabIndex:0},U):null};function _w(){}function HM(e){var t=Number(e);return typeof t=="number"&&!Number.isNaN(t)&&isFinite(t)&&Math.floor(t)===t}var vG=function(t,r,a){return a};function Yl(e,t,r){var a=typeof e>"u"?t.pageSize:e;return Math.floor((r.total-1)/a)+1}var TD=function(e){Th(r,e);var t=Ih(r);function r(a){var c;ha(this,r),c=t.call(this,a),ke(gn(c),"paginationNode",pt.createRef()),ke(gn(c),"getJumpPrevPage",function(){return Math.max(1,c.state.current-(c.props.showLessItems?3:5))}),ke(gn(c),"getJumpNextPage",function(){return Math.min(Yl(void 0,c.state,c.props),c.state.current+(c.props.showLessItems?3:5))}),ke(gn(c),"getItemIcon",function(C,P){var A=c.props.prefixCls,D=C||pt.createElement("button",{type:"button","aria-label":P,className:"".concat(A,"-item-link")});return typeof C=="function"&&(D=pt.createElement(C,st({},c.props))),D}),ke(gn(c),"isValid",function(C){var P=c.props.total;return HM(C)&&C!==c.state.current&&HM(P)&&P>0}),ke(gn(c),"shouldDisplayQuickJumper",function(){var C=c.props,P=C.showQuickJumper,A=C.total,D=c.state.pageSize;return A<=D?!1:P}),ke(gn(c),"handleKeyDown",function(C){(C.keyCode===ou.ARROW_UP||C.keyCode===ou.ARROW_DOWN)&&C.preventDefault()}),ke(gn(c),"handleKeyUp",function(C){var P=c.getValidValue(C),A=c.state.currentInputValue;P!==A&&c.setState({currentInputValue:P}),C.keyCode===ou.ENTER?c.handleChange(P):C.keyCode===ou.ARROW_UP?c.handleChange(P-1):C.keyCode===ou.ARROW_DOWN&&c.handleChange(P+1)}),ke(gn(c),"handleBlur",function(C){var P=c.getValidValue(C);c.handleChange(P)}),ke(gn(c),"changePageSize",function(C){var P=c.state.current,A=Yl(C,c.state,c.props);P=P>A?A:P,A===0&&(P=c.state.current),typeof C=="number"&&("pageSize"in c.props||c.setState({pageSize:C}),"current"in c.props||c.setState({current:P,currentInputValue:P})),c.props.onShowSizeChange(P,C),"onChange"in c.props&&c.props.onChange&&c.props.onChange(P,C)}),ke(gn(c),"handleChange",function(C){var P=c.props,A=P.disabled,D=P.onChange,N=c.state,F=N.pageSize,U=N.current,Z=N.currentInputValue;if(c.isValid(C)&&!A){var j=Yl(void 0,c.state,c.props),B=C;return C>j?B=j:C<1&&(B=1),"current"in c.props||c.setState({current:B}),B!==Z&&c.setState({currentInputValue:B}),D(B,F),B}return U}),ke(gn(c),"prev",function(){c.hasPrev()&&c.handleChange(c.state.current-1)}),ke(gn(c),"next",function(){c.hasNext()&&c.handleChange(c.state.current+1)}),ke(gn(c),"jumpPrev",function(){c.handleChange(c.getJumpPrevPage())}),ke(gn(c),"jumpNext",function(){c.handleChange(c.getJumpNextPage())}),ke(gn(c),"hasPrev",function(){return c.state.current>1}),ke(gn(c),"hasNext",function(){return c.state.current<Yl(void 0,c.state,c.props)}),ke(gn(c),"runIfEnter",function(C,P){if(C.key==="Enter"||C.charCode===13){for(var A=arguments.length,D=new Array(A>2?A-2:0),N=2;N<A;N++)D[N-2]=arguments[N];P.apply(void 0,D)}}),ke(gn(c),"runIfEnterPrev",function(C){c.runIfEnter(C,c.prev)}),ke(gn(c),"runIfEnterNext",function(C){c.runIfEnter(C,c.next)}),ke(gn(c),"runIfEnterJumpPrev",function(C){c.runIfEnter(C,c.jumpPrev)}),ke(gn(c),"runIfEnterJumpNext",function(C){c.runIfEnter(C,c.jumpNext)}),ke(gn(c),"handleGoTO",function(C){(C.keyCode===ou.ENTER||C.type==="click")&&c.handleChange(c.state.currentInputValue)}),ke(gn(c),"renderPrev",function(C){var P=c.props,A=P.prevIcon,D=P.itemRender,N=D(C,"prev",c.getItemIcon(A,"prev page")),F=!c.hasPrev();return T.isValidElement(N)?T.cloneElement(N,{disabled:F}):N}),ke(gn(c),"renderNext",function(C){var P=c.props,A=P.nextIcon,D=P.itemRender,N=D(C,"next",c.getItemIcon(A,"next page")),F=!c.hasNext();return T.isValidElement(N)?T.cloneElement(N,{disabled:F}):N});var f=a.onChange!==_w,y="current"in a;y&&!f&&console.warn("Warning: You provided a `current` prop to a Pagination component without an `onChange` handler. This will render a read-only component.");var l=a.defaultCurrent;"current"in a&&(l=a.current);var w=a.defaultPageSize;return"pageSize"in a&&(w=a.pageSize),l=Math.min(l,Yl(w,void 0,a)),c.state={current:l,currentInputValue:l,pageSize:w},c}return fa(r,[{key:"componentDidUpdate",value:function(c,f){var y=this.props.prefixCls;if(f.current!==this.state.current&&this.paginationNode.current){var l=this.paginationNode.current.querySelector(".".concat(y,"-item-").concat(f.current));if(l&&document.activeElement===l){var w;l==null||(w=l.blur)===null||w===void 0||w.call(l)}}}},{key:"getValidValue",value:function(c){var f=c.target.value,y=Yl(void 0,this.state,this.props),l=this.state.currentInputValue,w;return f===""?w=f:Number.isNaN(Number(f))?w=l:f>=y?w=y:w=Number(f),w}},{key:"getShowSizeChanger",value:function(){var c=this.props,f=c.showSizeChanger,y=c.total,l=c.totalBoundaryShowSizeChanger;return typeof f<"u"?f:y>l}},{key:"render",value:function(){var c=this.props,f=c.prefixCls,y=c.className,l=c.style,w=c.disabled,C=c.hideOnSinglePage,P=c.total,A=c.locale,D=c.showQuickJumper,N=c.showLessItems,F=c.showTitle,U=c.showTotal,Z=c.simple,j=c.itemRender,B=c.showPrevNextJumpers,H=c.jumpPrevIcon,Y=c.jumpNextIcon,ne=c.selectComponentClass,re=c.selectPrefixCls,Q=c.pageSizeOptions,te=this.state,ee=te.current,ve=te.pageSize,he=te.currentInputValue;if(C===!0&&P<=ve)return null;var oe=Yl(void 0,this.state,this.props),fe=[],Te=null,Fe=null,$e=null,je=null,pe=null,He=D&&D.goButton,Be=N?1:2,Ze=ee-1>0?ee-1:0,nt=ee+1<oe?ee+1:oe,yt=_h(this.props,{aria:!0,data:!0}),Ot=U&&pt.createElement("li",{className:"".concat(f,"-total-text")},U(P,[P===0?0:(ee-1)*ve+1,ee*ve>P?P:ee*ve]));if(Z){He&&(typeof He=="boolean"?pe=pt.createElement("button",{type:"button",onClick:this.handleGoTO,onKeyUp:this.handleGoTO},A.jump_to_confirm):pe=pt.createElement("span",{onClick:this.handleGoTO,onKeyUp:this.handleGoTO},He),pe=pt.createElement("li",{title:F?"".concat(A.jump_to).concat(ee,"/").concat(oe):null,className:"".concat(f,"-simple-pager")},pe));var Mt=this.renderPrev(Ze);return pt.createElement("ul",Cn({className:kt(f,"".concat(f,"-simple"),ke({},"".concat(f,"-disabled"),w),y),style:l,ref:this.paginationNode},yt),Ot,Mt?pt.createElement("li",{title:F?A.prev_page:null,onClick:this.prev,tabIndex:this.hasPrev()?0:null,onKeyPress:this.runIfEnterPrev,className:kt("".concat(f,"-prev"),ke({},"".concat(f,"-disabled"),!this.hasPrev())),"aria-disabled":!this.hasPrev()},Mt):null,pt.createElement("li",{title:F?"".concat(ee,"/").concat(oe):null,className:"".concat(f,"-simple-pager")},pt.createElement("input",{type:"text",value:he,disabled:w,onKeyDown:this.handleKeyDown,onKeyUp:this.handleKeyUp,onChange:this.handleKeyUp,onBlur:this.handleBlur,size:3}),pt.createElement("span",{className:"".concat(f,"-slash")},"/"),oe),pt.createElement("li",{title:F?A.next_page:null,onClick:this.next,tabIndex:this.hasPrev()?0:null,onKeyPress:this.runIfEnterNext,className:kt("".concat(f,"-next"),ke({},"".concat(f,"-disabled"),!this.hasNext())),"aria-disabled":!this.hasNext()},this.renderNext(nt)),pt.createElement(yw,{disabled:w,locale:A,rootPrefixCls:f,selectComponentClass:ne,selectPrefixCls:re,changeSize:this.getShowSizeChanger()?this.changePageSize:null,current:ee,pageSize:ve,pageSizeOptions:Q,quickGo:this.shouldDisplayQuickJumper()?this.handleChange:null,goButton:pe}))}if(oe<=3+Be*2){var Ft={locale:A,rootPrefixCls:f,onClick:this.handleChange,onKeyPress:this.runIfEnter,showTitle:F,itemRender:j};oe||fe.push(pt.createElement(pp,Cn({},Ft,{key:"noPager",page:1,className:"".concat(f,"-item-disabled")})));for(var Nt=1;Nt<=oe;Nt+=1){var Ct=ee===Nt;fe.push(pt.createElement(pp,Cn({},Ft,{key:Nt,page:Nt,active:Ct})))}}else{var ut=N?A.prev_3:A.prev_5,At=N?A.next_3:A.next_5,dt=j(this.getJumpPrevPage(),"jump-prev",this.getItemIcon(H,"prev page")),Bt=j(this.getJumpNextPage(),"jump-next",this.getItemIcon(Y,"next page"));B&&(Te=dt?pt.createElement("li",{title:F?ut:null,key:"prev",onClick:this.jumpPrev,tabIndex:0,onKeyPress:this.runIfEnterJumpPrev,className:kt("".concat(f,"-jump-prev"),ke({},"".concat(f,"-jump-prev-custom-icon"),!!H))},dt):null,Fe=Bt?pt.createElement("li",{title:F?At:null,key:"next",tabIndex:0,onClick:this.jumpNext,onKeyPress:this.runIfEnterJumpNext,className:kt("".concat(f,"-jump-next"),ke({},"".concat(f,"-jump-next-custom-icon"),!!Y))},Bt):null),je=pt.createElement(pp,{locale:A,last:!0,rootPrefixCls:f,onClick:this.handleChange,onKeyPress:this.runIfEnter,key:oe,page:oe,active:!1,showTitle:F,itemRender:j}),$e=pt.createElement(pp,{locale:A,rootPrefixCls:f,onClick:this.handleChange,onKeyPress:this.runIfEnter,key:1,page:1,active:!1,showTitle:F,itemRender:j});var gt=Math.max(1,ee-Be),jt=Math.min(ee+Be,oe);ee-1<=Be&&(jt=1+Be*2),oe-ee<=Be&&(gt=oe-Be*2);for(var zt=gt;zt<=jt;zt+=1){var an=ee===zt;fe.push(pt.createElement(pp,{locale:A,rootPrefixCls:f,onClick:this.handleChange,onKeyPress:this.runIfEnter,key:zt,page:zt,active:an,showTitle:F,itemRender:j}))}ee-1>=Be*2&&ee!==1+2&&(fe[0]=T.cloneElement(fe[0],{className:"".concat(f,"-item-after-jump-prev")}),fe.unshift(Te)),oe-ee>=Be*2&&ee!==oe-2&&(fe[fe.length-1]=T.cloneElement(fe[fe.length-1],{className:"".concat(f,"-item-before-jump-next")}),fe.push(Fe)),gt!==1&&fe.unshift($e),jt!==oe&&fe.push(je)}var Kt=!this.hasPrev()||!oe,Ut=!this.hasNext()||!oe,at=this.renderPrev(Ze),it=this.renderNext(nt);return pt.createElement("ul",Cn({className:kt(f,y,ke({},"".concat(f,"-disabled"),w)),style:l,ref:this.paginationNode},yt),Ot,at?pt.createElement("li",{title:F?A.prev_page:null,onClick:this.prev,tabIndex:Kt?null:0,onKeyPress:this.runIfEnterPrev,className:kt("".concat(f,"-prev"),ke({},"".concat(f,"-disabled"),Kt)),"aria-disabled":Kt},at):null,fe,it?pt.createElement("li",{title:F?A.next_page:null,onClick:this.next,tabIndex:Ut?null:0,onKeyPress:this.runIfEnterNext,className:kt("".concat(f,"-next"),ke({},"".concat(f,"-disabled"),Ut)),"aria-disabled":Ut},it):null,pt.createElement(yw,{disabled:w,locale:A,rootPrefixCls:f,selectComponentClass:ne,selectPrefixCls:re,changeSize:this.getShowSizeChanger()?this.changePageSize:null,current:ee,pageSize:ve,pageSizeOptions:Q,quickGo:this.shouldDisplayQuickJumper()?this.handleChange:null,goButton:He}))}}],[{key:"getDerivedStateFromProps",value:function(c,f){var y={};if("current"in c&&(y.current=c.current,c.current!==f.current&&(y.currentInputValue=y.current)),"pageSize"in c&&c.pageSize!==f.pageSize){var l=f.current,w=Yl(c.pageSize,f,c);l=l>w?w:l,"current"in c||(y.current=l,y.currentInputValue=l),y.pageSize=c.pageSize}return y}}]),r}(pt.Component);ke(TD,"defaultProps",{defaultCurrent:1,total:0,defaultPageSize:10,onChange:_w,className:"",selectPrefixCls:"rc-select",prefixCls:"rc-pagination",selectComponentClass:null,hideOnSinglePage:!1,showPrevNextJumpers:!0,showQuickJumper:!1,showLessItems:!1,showTitle:!0,onShowSizeChange:_w,locale:gG,style:{},itemRender:vG,totalBoundaryShowSizeChanger:50});const ID=e=>T.createElement(I0,Object.assign({},e,{showSearch:!0,size:"small"})),MD=e=>T.createElement(I0,Object.assign({},e,{showSearch:!0,size:"middle"}));ID.Option=I0.Option;MD.Option=I0.Option;const yG=e=>{const{componentCls:t}=e;return{[`${t}-disabled`]:{"&, &:hover":{cursor:"not-allowed",[`${t}-item-link`]:{color:e.colorTextDisabled,cursor:"not-allowed"}},"&:focus-visible":{cursor:"not-allowed",[`${t}-item-link`]:{color:e.colorTextDisabled,cursor:"not-allowed"}}},[`&${t}-disabled`]:{cursor:"not-allowed",[`${t}-item`]:{cursor:"not-allowed","&:hover, &:active":{backgroundColor:"transparent"},a:{color:e.colorTextDisabled,backgroundColor:"transparent",border:"none",cursor:"not-allowed"},"&-active":{borderColor:e.colorBorder,backgroundColor:e.itemActiveBgDisabled,"&:hover, &:active":{backgroundColor:e.itemActiveBgDisabled},a:{color:e.itemActiveColorDisabled}}},[`${t}-item-link`]:{color:e.colorTextDisabled,cursor:"not-allowed","&:hover, &:active":{backgroundColor:"transparent"},[`${t}-simple&`]:{backgroundColor:"transparent","&:hover, &:active":{backgroundColor:"transparent"}}},[`${t}-simple-pager`]:{color:e.colorTextDisabled},[`${t}-jump-prev, ${t}-jump-next`]:{[`${t}-item-link-icon`]:{opacity:0},[`${t}-item-ellipsis`]:{opacity:1}}},[`&${t}-simple`]:{[`${t}-prev, ${t}-next`]:{[`&${t}-disabled ${t}-item-link`]:{"&:hover, &:active":{backgroundColor:"transparent"}}}}}},_G=e=>{const{componentCls:t}=e;return{[`&${t}-mini ${t}-total-text, &${t}-mini ${t}-simple-pager`]:{height:e.itemSizeSM,lineHeight:`${e.itemSizeSM}px`},[`&${t}-mini ${t}-item`]:{minWidth:e.itemSizeSM,height:e.itemSizeSM,margin:0,lineHeight:`${e.itemSizeSM-2}px`},[`&${t}-mini:not(${t}-disabled) ${t}-item:not(${t}-item-active)`]:{backgroundColor:"transparent",borderColor:"transparent","&:hover":{backgroundColor:e.colorBgTextHover},"&:active":{backgroundColor:e.colorBgTextActive}},[`&${t}-mini ${t}-prev, &${t}-mini ${t}-next`]:{minWidth:e.itemSizeSM,height:e.itemSizeSM,margin:0,lineHeight:`${e.itemSizeSM}px`},[`&${t}-mini:not(${t}-disabled)`]:{[`${t}-prev, ${t}-next`]:{[`&:hover ${t}-item-link`]:{backgroundColor:e.colorBgTextHover},[`&:active ${t}-item-link`]:{backgroundColor:e.colorBgTextActive},[`&${t}-disabled:hover ${t}-item-link`]:{backgroundColor:"transparent"}}},[`
    &${t}-mini ${t}-prev ${t}-item-link,
    &${t}-mini ${t}-next ${t}-item-link
    `]:{backgroundColor:"transparent",borderColor:"transparent","&::after":{height:e.itemSizeSM,lineHeight:`${e.itemSizeSM}px`}},[`&${t}-mini ${t}-jump-prev, &${t}-mini ${t}-jump-next`]:{height:e.itemSizeSM,marginInlineEnd:0,lineHeight:`${e.itemSizeSM}px`},[`&${t}-mini ${t}-options`]:{marginInlineStart:e.paginationMiniOptionsMarginInlineStart,"&-size-changer":{top:e.miniOptionsSizeChangerTop},"&-quick-jumper":{height:e.itemSizeSM,lineHeight:`${e.itemSizeSM}px`,input:Object.assign(Object.assign({},JS(e)),{width:e.paginationMiniQuickJumperInputWidth,height:e.controlHeightSM})}}}},xG=e=>{const{componentCls:t}=e;return{[`
    &${t}-simple ${t}-prev,
    &${t}-simple ${t}-next
    `]:{height:e.itemSizeSM,lineHeight:`${e.itemSizeSM}px`,verticalAlign:"top",[`${t}-item-link`]:{height:e.itemSizeSM,backgroundColor:"transparent",border:0,"&:hover":{backgroundColor:e.colorBgTextHover},"&:active":{backgroundColor:e.colorBgTextActive},"&::after":{height:e.itemSizeSM,lineHeight:`${e.itemSizeSM}px`}}},[`&${t}-simple ${t}-simple-pager`]:{display:"inline-block",height:e.itemSizeSM,marginInlineEnd:e.marginXS,input:{boxSizing:"border-box",height:"100%",marginInlineEnd:e.marginXS,padding:`0 ${e.paginationItemPaddingInline}px`,textAlign:"center",backgroundColor:e.itemInputBg,border:`${e.lineWidth}px ${e.lineType} ${e.colorBorder}`,borderRadius:e.borderRadius,outline:"none",transition:`border-color ${e.motionDurationMid}`,color:"inherit","&:hover":{borderColor:e.colorPrimary},"&:focus":{borderColor:e.colorPrimaryHover,boxShadow:`${e.inputOutlineOffset}px 0 ${e.controlOutlineWidth}px ${e.controlOutline}`},"&[disabled]":{color:e.colorTextDisabled,backgroundColor:e.colorBgContainerDisabled,borderColor:e.colorBorder,cursor:"not-allowed"}}}}},bG=e=>{const{componentCls:t}=e;return{[`${t}-jump-prev, ${t}-jump-next`]:{outline:0,[`${t}-item-container`]:{position:"relative",[`${t}-item-link-icon`]:{color:e.colorPrimary,fontSize:e.fontSizeSM,opacity:0,transition:`all ${e.motionDurationMid}`,"&-svg":{top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,margin:"auto"}},[`${t}-item-ellipsis`]:{position:"absolute",top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,display:"block",margin:"auto",color:e.colorTextDisabled,fontFamily:"Arial, Helvetica, sans-serif",letterSpacing:e.paginationEllipsisLetterSpacing,textAlign:"center",textIndent:e.paginationEllipsisTextIndent,opacity:1,transition:`all ${e.motionDurationMid}`}},"&:hover":{[`${t}-item-link-icon`]:{opacity:1},[`${t}-item-ellipsis`]:{opacity:0}}},[`
    ${t}-prev,
    ${t}-jump-prev,
    ${t}-jump-next
    `]:{marginInlineEnd:e.marginXS},[`
    ${t}-prev,
    ${t}-next,
    ${t}-jump-prev,
    ${t}-jump-next
    `]:{display:"inline-block",minWidth:e.itemSize,height:e.itemSize,color:e.colorText,fontFamily:e.fontFamily,lineHeight:`${e.itemSize}px`,textAlign:"center",verticalAlign:"middle",listStyle:"none",borderRadius:e.borderRadius,cursor:"pointer",transition:`all ${e.motionDurationMid}`},[`${t}-prev, ${t}-next`]:{fontFamily:"Arial, Helvetica, sans-serif",outline:0,button:{color:e.colorText,cursor:"pointer",userSelect:"none"},[`${t}-item-link`]:{display:"block",width:"100%",height:"100%",padding:0,fontSize:e.fontSizeSM,textAlign:"center",backgroundColor:"transparent",border:`${e.lineWidth}px ${e.lineType} transparent`,borderRadius:e.borderRadius,outline:"none",transition:`all ${e.motionDurationMid}`},[`&:hover ${t}-item-link`]:{backgroundColor:e.colorBgTextHover},[`&:active ${t}-item-link`]:{backgroundColor:e.colorBgTextActive},[`&${t}-disabled:hover`]:{[`${t}-item-link`]:{backgroundColor:"transparent"}}},[`${t}-slash`]:{marginInlineEnd:e.paginationSlashMarginInlineEnd,marginInlineStart:e.paginationSlashMarginInlineStart},[`${t}-options`]:{display:"inline-block",marginInlineStart:e.margin,verticalAlign:"middle","&-size-changer.-select":{display:"inline-block",width:"auto"},"&-quick-jumper":{display:"inline-block",height:e.controlHeight,marginInlineStart:e.marginXS,lineHeight:`${e.controlHeight}px`,verticalAlign:"top",input:Object.assign(Object.assign({},QS(e)),{width:e.controlHeightLG*1.25,height:e.controlHeight,boxSizing:"border-box",margin:0,marginInlineStart:e.marginXS,marginInlineEnd:e.marginXS})}}}},wG=e=>{const{componentCls:t}=e;return{[`${t}-item`]:{display:"inline-block",minWidth:e.itemSize,height:e.itemSize,marginInlineEnd:e.marginXS,fontFamily:e.fontFamily,lineHeight:`${e.itemSize-2}px`,textAlign:"center",verticalAlign:"middle",listStyle:"none",backgroundColor:"transparent",border:`${e.lineWidth}px ${e.lineType} transparent`,borderRadius:e.borderRadius,outline:0,cursor:"pointer",userSelect:"none",a:{display:"block",padding:`0 ${e.paginationItemPaddingInline}px`,color:e.colorText,"&:hover":{textDecoration:"none"}},[`&:not(${t}-item-active)`]:{"&:hover":{transition:`all ${e.motionDurationMid}`,backgroundColor:e.colorBgTextHover},"&:active":{backgroundColor:e.colorBgTextActive}},"&-active":{fontWeight:e.fontWeightStrong,backgroundColor:e.itemActiveBg,borderColor:e.colorPrimary,a:{color:e.colorPrimary},"&:hover":{borderColor:e.colorPrimaryHover},"&:hover a":{color:e.colorPrimaryHover}}}}},SG=e=>{const{componentCls:t}=e;return{[t]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},ca(e)),{"ul, ol":{margin:0,padding:0,listStyle:"none"},"&::after":{display:"block",clear:"both",height:0,overflow:"hidden",visibility:"hidden",content:'""'},[`${t}-total-text`]:{display:"inline-block",height:e.itemSize,marginInlineEnd:e.marginXS,lineHeight:`${e.itemSize-2}px`,verticalAlign:"middle"}}),wG(e)),bG(e)),xG(e)),_G(e)),yG(e)),{[`@media only screen and (max-width: ${e.screenLG}px)`]:{[`${t}-item`]:{"&-after-jump-prev, &-before-jump-next":{display:"none"}}},[`@media only screen and (max-width: ${e.screenSM}px)`]:{[`${t}-options`]:{display:"none"}}}),[`&${e.componentCls}-rtl`]:{direction:"rtl"}}},EG=e=>{const{componentCls:t}=e;return{[`${t}${t}-disabled:not(${t}-mini)`]:{"&, &:hover":{[`${t}-item-link`]:{borderColor:e.colorBorder}},"&:focus-visible":{[`${t}-item-link`]:{borderColor:e.colorBorder}},[`${t}-item, ${t}-item-link`]:{backgroundColor:e.colorBgContainerDisabled,borderColor:e.colorBorder,[`&:hover:not(${t}-item-active)`]:{backgroundColor:e.colorBgContainerDisabled,borderColor:e.colorBorder,a:{color:e.colorTextDisabled}},[`&${t}-item-active`]:{backgroundColor:e.itemActiveBgDisabled}},[`${t}-prev, ${t}-next`]:{"&:hover button":{backgroundColor:e.colorBgContainerDisabled,borderColor:e.colorBorder,color:e.colorTextDisabled},[`${t}-item-link`]:{backgroundColor:e.colorBgContainerDisabled,borderColor:e.colorBorder}}},[`${t}:not(${t}-mini)`]:{[`${t}-prev, ${t}-next`]:{"&:hover button":{borderColor:e.colorPrimaryHover,backgroundColor:e.itemBg},[`${t}-item-link`]:{backgroundColor:e.itemLinkBg,borderColor:e.colorBorder},[`&:hover ${t}-item-link`]:{borderColor:e.colorPrimary,backgroundColor:e.itemBg,color:e.colorPrimary},[`&${t}-disabled`]:{[`${t}-item-link`]:{borderColor:e.colorBorder,color:e.colorTextDisabled}}},[`${t}-item`]:{backgroundColor:e.itemBg,border:`${e.lineWidth}px ${e.lineType} ${e.colorBorder}`,[`&:hover:not(${t}-item-active)`]:{borderColor:e.colorPrimary,backgroundColor:e.itemBg,a:{color:e.colorPrimary}},"&-active":{borderColor:e.colorPrimary}}}}},CG=e=>{const{componentCls:t}=e;return{[`${t}:not(${t}-disabled)`]:{[`${t}-item`]:Object.assign({},MO(e)),[`${t}-jump-prev, ${t}-jump-next`]:{"&:focus-visible":Object.assign({[`${t}-item-link-icon`]:{opacity:1},[`${t}-item-ellipsis`]:{opacity:0}},am(e))},[`${t}-prev, ${t}-next`]:{[`&:focus-visible ${t}-item-link`]:Object.assign({},am(e))}}}},TG=_o("Pagination",e=>{const t=$r(e,{inputOutlineOffset:0,paginationMiniOptionsMarginInlineStart:e.marginXXS/2,paginationMiniQuickJumperInputWidth:e.controlHeightLG*1.1,paginationItemPaddingInline:e.marginXXS*1.5,paginationEllipsisLetterSpacing:e.marginXXS/2,paginationSlashMarginInlineStart:e.marginXXS,paginationSlashMarginInlineEnd:e.marginSM,paginationEllipsisTextIndent:"0.13em"},vD(e),yD(e));return[SG(t),CG(t),e.wireframe&&EG(t)]},e=>({itemBg:e.colorBgContainer,itemSize:e.controlHeight,itemSizeSM:e.controlHeightSM,itemActiveBg:e.colorBgContainer,itemLinkBg:e.colorBgContainer,itemActiveColorDisabled:e.colorTextDisabled,itemActiveBgDisabled:e.controlItemBgActiveDisabled,itemInputBg:e.colorBgContainer,miniOptionsSizeChangerTop:0}));var IG=globalThis&&globalThis.__rest||function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(r[a[c]]=e[a[c]]);return r};const MG=e=>{const{prefixCls:t,selectPrefixCls:r,className:a,rootClassName:c,style:f,size:y,locale:l,selectComponentClass:w,responsive:C,showSizeChanger:P}=e,A=IG(e,["prefixCls","selectPrefixCls","className","rootClassName","style","size","locale","selectComponentClass","responsive","showSizeChanger"]),{xs:D}=rD(C),{getPrefixCls:N,direction:F,pagination:U={}}=T.useContext(cr),Z=N("pagination",t),[j,B]=TG(Z),H=P??U.showSizeChanger,Y=T.useMemo(()=>{const oe=T.createElement("span",{className:`${Z}-item-ellipsis`},"•••"),fe=T.createElement("button",{className:`${Z}-item-link`,type:"button",tabIndex:-1},F==="rtl"?T.createElement(kM,null):T.createElement($M,null)),Te=T.createElement("button",{className:`${Z}-item-link`,type:"button",tabIndex:-1},F==="rtl"?T.createElement($M,null):T.createElement(kM,null)),Fe=T.createElement("a",{className:`${Z}-item-link`},T.createElement("div",{className:`${Z}-item-container`},F==="rtl"?T.createElement(VM,{className:`${Z}-item-link-icon`}):T.createElement(UM,{className:`${Z}-item-link-icon`}),oe)),$e=T.createElement("a",{className:`${Z}-item-link`},T.createElement("div",{className:`${Z}-item-container`},F==="rtl"?T.createElement(UM,{className:`${Z}-item-link-icon`}):T.createElement(VM,{className:`${Z}-item-link-icon`}),oe));return{prevIcon:fe,nextIcon:Te,jumpPrevIcon:Fe,jumpNextIcon:$e}},[F,Z]),[ne]=OS("Pagination",gO),re=Object.assign(Object.assign({},ne),l),Q=bl(y),te=Q==="small"||!!(D&&!Q&&C),ee=N("select",r),ve=kt({[`${Z}-mini`]:te,[`${Z}-rtl`]:F==="rtl"},U==null?void 0:U.className,a,c,B),he=Object.assign(Object.assign({},U==null?void 0:U.style),f);return j(T.createElement(TD,Object.assign({},Y,A,{style:he,prefixCls:Z,selectPrefixCls:ee,className:ve,selectComponentClass:w||(te?ID:MD),locale:re,showSizeChanger:H})))},PG=MG,AG=new Cr("antSpinMove",{to:{opacity:1}}),RG=new Cr("antRotate",{to:{transform:"rotate(405deg)"}}),OG=e=>(e.dotSize-e.fontSize)/2+2,zG=e=>({[`${e.componentCls}`]:Object.assign(Object.assign({},ca(e)),{position:"absolute",display:"none",color:e.colorPrimary,fontSize:0,textAlign:"center",verticalAlign:"middle",opacity:0,transition:`transform ${e.motionDurationSlow} ${e.motionEaseInOutCirc}`,"&-spinning":{position:"static",display:"inline-block",opacity:1},[`${e.componentCls}-text`]:{fontSize:e.fontSize,paddingTop:OG(e)},"&-fullscreen":{position:"fixed",width:"100vw",height:"100vh",backgroundColor:e.colorBgMask,zIndex:e.zIndexPopupBase,inset:0,display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"center",pointerEvents:"none",opacity:0,visibility:"hidden",transition:`all ${e.motionDurationMid}`,"&-show":{opacity:1,visibility:"visible"},[`${e.componentCls}-dot ${e.componentCls}-dot-item`]:{backgroundColor:e.colorWhite},[`${e.componentCls}-text`]:{color:e.colorTextLightSolid}},"&-nested-loading":{position:"relative",[`> div > ${e.componentCls}`]:{position:"absolute",top:0,insetInlineStart:0,zIndex:4,display:"block",width:"100%",height:"100%",maxHeight:e.contentHeight,[`${e.componentCls}-dot`]:{position:"absolute",top:"50%",insetInlineStart:"50%",margin:-e.dotSize/2},[`${e.componentCls}-text`]:{position:"absolute",top:"50%",width:"100%",textShadow:`0 1px 2px ${e.colorBgContainer}`},[`&${e.componentCls}-show-text ${e.componentCls}-dot`]:{marginTop:-(e.dotSize/2)-10},"&-sm":{[`${e.componentCls}-dot`]:{margin:-e.dotSizeSM/2},[`${e.componentCls}-text`]:{paddingTop:(e.dotSizeSM-e.fontSize)/2+2},[`&${e.componentCls}-show-text ${e.componentCls}-dot`]:{marginTop:-(e.dotSizeSM/2)-10}},"&-lg":{[`${e.componentCls}-dot`]:{margin:-(e.dotSizeLG/2)},[`${e.componentCls}-text`]:{paddingTop:(e.dotSizeLG-e.fontSize)/2+2},[`&${e.componentCls}-show-text ${e.componentCls}-dot`]:{marginTop:-(e.dotSizeLG/2)-10}}},[`${e.componentCls}-container`]:{position:"relative",transition:`opacity ${e.motionDurationSlow}`,"&::after":{position:"absolute",top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,zIndex:10,width:"100%",height:"100%",background:e.colorBgContainer,opacity:0,transition:`all ${e.motionDurationSlow}`,content:'""',pointerEvents:"none"}},[`${e.componentCls}-blur`]:{clear:"both",opacity:.5,userSelect:"none",pointerEvents:"none","&::after":{opacity:.4,pointerEvents:"auto"}}},"&-tip":{color:e.spinDotDefault},[`${e.componentCls}-dot`]:{position:"relative",display:"inline-block",fontSize:e.dotSize,width:"1em",height:"1em","&-item":{position:"absolute",display:"block",width:(e.dotSize-e.marginXXS/2)/2,height:(e.dotSize-e.marginXXS/2)/2,backgroundColor:e.colorPrimary,borderRadius:"100%",transform:"scale(0.75)",transformOrigin:"50% 50%",opacity:.3,animationName:AG,animationDuration:"1s",animationIterationCount:"infinite",animationTimingFunction:"linear",animationDirection:"alternate","&:nth-child(1)":{top:0,insetInlineStart:0},"&:nth-child(2)":{top:0,insetInlineEnd:0,animationDelay:"0.4s"},"&:nth-child(3)":{insetInlineEnd:0,bottom:0,animationDelay:"0.8s"},"&:nth-child(4)":{bottom:0,insetInlineStart:0,animationDelay:"1.2s"}},"&-spin":{transform:"rotate(45deg)",animationName:RG,animationDuration:"1.2s",animationIterationCount:"infinite",animationTimingFunction:"linear"}},[`&-sm ${e.componentCls}-dot`]:{fontSize:e.dotSizeSM,i:{width:(e.dotSizeSM-e.marginXXS/2)/2,height:(e.dotSizeSM-e.marginXXS/2)/2}},[`&-lg ${e.componentCls}-dot`]:{fontSize:e.dotSizeLG,i:{width:(e.dotSizeLG-e.marginXXS)/2,height:(e.dotSizeLG-e.marginXXS)/2}},[`&${e.componentCls}-show-text ${e.componentCls}-text`]:{display:"block"}})}),DG=_o("Spin",e=>{const t=$r(e,{spinDotDefault:e.colorTextDescription});return[zG(t)]},e=>({contentHeight:400,dotSize:e.controlHeightLG/2,dotSizeSM:e.controlHeightLG*.35,dotSizeLG:e.controlHeight}));var LG=globalThis&&globalThis.__rest||function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(r[a[c]]=e[a[c]]);return r};let Wv=null;function kG(e,t){const{indicator:r}=t,a=`${e}-dot`;return r===null?null:sm(r)?vl(r,{className:kt(r.props.className,a)}):sm(Wv)?vl(Wv,{className:kt(Wv.props.className,a)}):T.createElement("span",{className:kt(a,`${e}-dot-spin`)},T.createElement("i",{className:`${e}-dot-item`,key:1}),T.createElement("i",{className:`${e}-dot-item`,key:2}),T.createElement("i",{className:`${e}-dot-item`,key:3}),T.createElement("i",{className:`${e}-dot-item`,key:4}))}function $G(e,t){return!!e&&!!t&&!isNaN(Number(t))}const FG=e=>{const{spinPrefixCls:t,spinning:r=!0,delay:a=0,className:c,rootClassName:f,size:y="default",tip:l,wrapperClassName:w,style:C,children:P,hashId:A,fullscreen:D}=e,N=LG(e,["spinPrefixCls","spinning","delay","className","rootClassName","size","tip","wrapperClassName","style","children","hashId","fullscreen"]),[F,U]=T.useState(()=>r&&!$G(r,a));T.useEffect(()=>{if(r){const te=aH(a,()=>{U(!0)});return te(),()=>{var ee;(ee=te==null?void 0:te.cancel)===null||ee===void 0||ee.call(te)}}U(!1)},[a,r]);const Z=T.useMemo(()=>typeof P<"u"&&!D,[P,D]),{direction:j,spin:B}=T.useContext(cr),H=kt(t,B==null?void 0:B.className,{[`${t}-sm`]:y==="small",[`${t}-lg`]:y==="large",[`${t}-spinning`]:F,[`${t}-show-text`]:!!l,[`${t}-fullscreen`]:D,[`${t}-fullscreen-show`]:D&&F,[`${t}-rtl`]:j==="rtl"},c,f,A),Y=kt(`${t}-container`,{[`${t}-blur`]:F}),ne=Sc(N,["indicator","prefixCls"]),re=Object.assign(Object.assign({},B==null?void 0:B.style),C),Q=T.createElement("div",Object.assign({},ne,{style:re,className:H,"aria-live":"polite","aria-busy":F}),kG(t,e),l&&(Z||D)?T.createElement("div",{className:`${t}-text`},l):null);return Z?T.createElement("div",Object.assign({},ne,{className:kt(`${t}-nested-loading`,w,A)}),F&&T.createElement("div",{key:"loading"},Q),T.createElement("div",{className:Y,key:"container"},P)):Q},PD=e=>{const{prefixCls:t}=e,{getPrefixCls:r}=T.useContext(cr),a=r("spin",t),[c,f]=DG(a),y=Object.assign(Object.assign({},e),{spinPrefixCls:a,hashId:f});return c(T.createElement(FG,Object.assign({},y)))};PD.setDefaultIndicator=e=>{Wv=e};const BG=PD,nE=pt.createContext({});nE.Consumer;var AD=globalThis&&globalThis.__rest||function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(r[a[c]]=e[a[c]]);return r};const NG=e=>{var{prefixCls:t,className:r,avatar:a,title:c,description:f}=e,y=AD(e,["prefixCls","className","avatar","title","description"]);const{getPrefixCls:l}=T.useContext(cr),w=l("list",t),C=kt(`${w}-item-meta`,r),P=pt.createElement("div",{className:`${w}-item-meta-content`},c&&pt.createElement("h4",{className:`${w}-item-meta-title`},c),f&&pt.createElement("div",{className:`${w}-item-meta-description`},f));return pt.createElement("div",Object.assign({},y,{className:C}),a&&pt.createElement("div",{className:`${w}-item-meta-avatar`},a),(c||f)&&P)},jG=(e,t)=>{var{prefixCls:r,children:a,actions:c,extra:f,className:y,colStyle:l}=e,w=AD(e,["prefixCls","children","actions","extra","className","colStyle"]);const{grid:C,itemLayout:P}=T.useContext(nE),{getPrefixCls:A}=T.useContext(cr),D=()=>{let B;return T.Children.forEach(a,H=>{typeof H=="string"&&(B=!0)}),B&&T.Children.count(a)>1},N=()=>P==="vertical"?!!f:!D(),F=A("list",r),U=c&&c.length>0&&pt.createElement("ul",{className:`${F}-item-action`,key:"actions"},c.map((B,H)=>pt.createElement("li",{key:`${F}-item-action-${H}`},B,H!==c.length-1&&pt.createElement("em",{className:`${F}-item-action-split`})))),Z=C?"div":"li",j=pt.createElement(Z,Object.assign({},w,C?{}:{ref:t},{className:kt(`${F}-item`,{[`${F}-item-no-flex`]:!N()},y)}),P==="vertical"&&f?[pt.createElement("div",{className:`${F}-item-main`,key:"content"},a,U),pt.createElement("div",{className:`${F}-item-extra`,key:"extra"},f)]:[a,U,vl(f,{key:"extra"})]);return C?pt.createElement(yH,{ref:t,flex:1,style:l},j):j},RD=T.forwardRef(jG);RD.Meta=NG;const UG=RD,VG=e=>{const{listBorderedCls:t,componentCls:r,paddingLG:a,margin:c,itemPaddingSM:f,itemPaddingLG:y,marginLG:l,borderRadiusLG:w}=e;return{[`${t}`]:{border:`${e.lineWidth}px ${e.lineType} ${e.colorBorder}`,borderRadius:w,[`${r}-header,${r}-footer,${r}-item`]:{paddingInline:a},[`${r}-pagination`]:{margin:`${c}px ${l}px`}},[`${t}${r}-sm`]:{[`${r}-item,${r}-header,${r}-footer`]:{padding:f}},[`${t}${r}-lg`]:{[`${r}-item,${r}-header,${r}-footer`]:{padding:y}}}},HG=e=>{const{componentCls:t,screenSM:r,screenMD:a,marginLG:c,marginSM:f,margin:y}=e;return{[`@media screen and (max-width:${a})`]:{[`${t}`]:{[`${t}-item`]:{[`${t}-item-action`]:{marginInlineStart:c}}},[`${t}-vertical`]:{[`${t}-item`]:{[`${t}-item-extra`]:{marginInlineStart:c}}}},[`@media screen and (max-width: ${r})`]:{[`${t}`]:{[`${t}-item`]:{flexWrap:"wrap",[`${t}-action`]:{marginInlineStart:f}}},[`${t}-vertical`]:{[`${t}-item`]:{flexWrap:"wrap-reverse",[`${t}-item-main`]:{minWidth:e.contentWidth},[`${t}-item-extra`]:{margin:`auto auto ${y}px`}}}}}},GG=e=>{const{componentCls:t,antCls:r,controlHeight:a,minHeight:c,paddingSM:f,marginLG:y,padding:l,itemPadding:w,colorPrimary:C,itemPaddingSM:P,itemPaddingLG:A,paddingXS:D,margin:N,colorText:F,colorTextDescription:U,motionDurationSlow:Z,lineWidth:j,headerBg:B,footerBg:H,emptyTextPadding:Y,metaMarginBottom:ne,avatarMarginRight:re,titleMarginBottom:Q,descriptionFontSize:te}=e,ee={};return["start","center","end"].forEach(ve=>{ee[`&-align-${ve}`]={textAlign:ve}}),{[`${t}`]:Object.assign(Object.assign({},ca(e)),{position:"relative","*":{outline:"none"},[`${t}-header`]:{background:B},[`${t}-footer`]:{background:H},[`${t}-header, ${t}-footer`]:{paddingBlock:f},[`${t}-pagination`]:Object.assign(Object.assign({marginBlockStart:y},ee),{[`${r}-pagination-options`]:{textAlign:"start"}}),[`${t}-spin`]:{minHeight:c,textAlign:"center"},[`${t}-items`]:{margin:0,padding:0,listStyle:"none"},[`${t}-item`]:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:w,color:F,[`${t}-item-meta`]:{display:"flex",flex:1,alignItems:"flex-start",maxWidth:"100%",[`${t}-item-meta-avatar`]:{marginInlineEnd:re},[`${t}-item-meta-content`]:{flex:"1 0",width:0,color:F},[`${t}-item-meta-title`]:{margin:`0 0 ${e.marginXXS}px 0`,color:F,fontSize:e.fontSize,lineHeight:e.lineHeight,"> a":{color:F,transition:`all ${Z}`,"&:hover":{color:C}}},[`${t}-item-meta-description`]:{color:U,fontSize:te,lineHeight:e.lineHeight}},[`${t}-item-action`]:{flex:"0 0 auto",marginInlineStart:e.marginXXL,padding:0,fontSize:0,listStyle:"none","& > li":{position:"relative",display:"inline-block",padding:`0 ${D}px`,color:U,fontSize:e.fontSize,lineHeight:e.lineHeight,textAlign:"center","&:first-child":{paddingInlineStart:0}},[`${t}-item-action-split`]:{position:"absolute",insetBlockStart:"50%",insetInlineEnd:0,width:j,height:Math.ceil(e.fontSize*e.lineHeight)-e.marginXXS*2,transform:"translateY(-50%)",backgroundColor:e.colorSplit}}},[`${t}-empty`]:{padding:`${l}px 0`,color:U,fontSize:e.fontSizeSM,textAlign:"center"},[`${t}-empty-text`]:{padding:Y,color:e.colorTextDisabled,fontSize:e.fontSize,textAlign:"center"},[`${t}-item-no-flex`]:{display:"block"}}),[`${t}-grid ${r}-col > ${t}-item`]:{display:"block",maxWidth:"100%",marginBlockEnd:N,paddingBlock:0,borderBlockEnd:"none"},[`${t}-vertical ${t}-item`]:{alignItems:"initial",[`${t}-item-main`]:{display:"block",flex:1},[`${t}-item-extra`]:{marginInlineStart:y},[`${t}-item-meta`]:{marginBlockEnd:ne,[`${t}-item-meta-title`]:{marginBlockStart:0,marginBlockEnd:Q,color:F,fontSize:e.fontSizeLG,lineHeight:e.lineHeightLG}},[`${t}-item-action`]:{marginBlockStart:l,marginInlineStart:"auto","> li":{padding:`0 ${l}px`,"&:first-child":{paddingInlineStart:0}}}},[`${t}-split ${t}-item`]:{borderBlockEnd:`${e.lineWidth}px ${e.lineType} ${e.colorSplit}`,"&:last-child":{borderBlockEnd:"none"}},[`${t}-split ${t}-header`]:{borderBlockEnd:`${e.lineWidth}px ${e.lineType} ${e.colorSplit}`},[`${t}-split${t}-empty ${t}-footer`]:{borderTop:`${e.lineWidth}px ${e.lineType} ${e.colorSplit}`},[`${t}-loading ${t}-spin-nested-loading`]:{minHeight:a},[`${t}-split${t}-something-after-last-item ${r}-spin-container > ${t}-items > ${t}-item:last-child`]:{borderBlockEnd:`${e.lineWidth}px ${e.lineType} ${e.colorSplit}`},[`${t}-lg ${t}-item`]:{padding:A},[`${t}-sm ${t}-item`]:{padding:P},[`${t}:not(${t}-vertical)`]:{[`${t}-item-no-flex`]:{[`${t}-item-action`]:{float:"right"}}}}},WG=_o("List",e=>{const t=$r(e,{listBorderedCls:`${e.componentCls}-bordered`,minHeight:e.controlHeightLG});return[GG(t),VG(t),HG(t)]},e=>({contentWidth:220,itemPadding:`${e.paddingContentVertical}px 0`,itemPaddingSM:`${e.paddingContentVerticalSM}px ${e.paddingContentHorizontal}px`,itemPaddingLG:`${e.paddingContentVerticalLG}px ${e.paddingContentHorizontalLG}px`,headerBg:"transparent",footerBg:"transparent",emptyTextPadding:e.padding,metaMarginBottom:e.padding,avatarMarginRight:e.padding,titleMarginBottom:e.paddingSM,descriptionFontSize:e.fontSize}));var qG=globalThis&&globalThis.__rest||function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(r[a[c]]=e[a[c]]);return r};function ZG(e){var t,{pagination:r=!1,prefixCls:a,bordered:c=!1,split:f=!0,className:y,rootClassName:l,style:w,children:C,itemLayout:P,loadMore:A,grid:D,dataSource:N=[],size:F,header:U,footer:Z,loading:j=!1,rowKey:B,renderItem:H,locale:Y}=e,ne=qG(e,["pagination","prefixCls","bordered","split","className","rootClassName","style","children","itemLayout","loadMore","grid","dataSource","size","header","footer","loading","rowKey","renderItem","locale"]);const re=r&&typeof r=="object"?r:{},[Q,te]=T.useState(re.defaultCurrent||1),[ee,ve]=T.useState(re.defaultPageSize||10),{getPrefixCls:he,renderEmpty:oe,direction:fe,list:Te}=T.useContext(cr),Fe={current:1,total:0},$e=it=>(Rt,bt)=>{var sn;te(Rt),ve(bt),r&&r[it]&&((sn=r==null?void 0:r[it])===null||sn===void 0||sn.call(r,Rt,bt))},je=$e("onChange"),pe=$e("onShowSizeChange"),He=(it,Rt)=>{if(!H)return null;let bt;return typeof B=="function"?bt=B(it):B?bt=it[B]:bt=it.key,bt||(bt=`list-item-${Rt}`),T.createElement(T.Fragment,{key:bt},H(it,Rt))},Be=()=>!!(A||r||Z),Ze=he("list",a),[nt,yt]=WG(Ze);let Ot=j;typeof Ot=="boolean"&&(Ot={spinning:Ot});const Mt=Ot&&Ot.spinning,Ft=bl(F);let Nt="";switch(Ft){case"large":Nt="lg";break;case"small":Nt="sm";break}const Ct=kt(Ze,{[`${Ze}-vertical`]:P==="vertical",[`${Ze}-${Nt}`]:Nt,[`${Ze}-split`]:f,[`${Ze}-bordered`]:c,[`${Ze}-loading`]:Mt,[`${Ze}-grid`]:!!D,[`${Ze}-something-after-last-item`]:Be(),[`${Ze}-rtl`]:fe==="rtl"},Te==null?void 0:Te.className,y,l,yt),ut=cG(Fe,{total:N.length,current:Q,pageSize:ee},r||{}),At=Math.ceil(ut.total/ut.pageSize);ut.current>At&&(ut.current=At);const dt=r?T.createElement("div",{className:kt(`${Ze}-pagination`,`${Ze}-pagination-align-${(t=ut==null?void 0:ut.align)!==null&&t!==void 0?t:"end"}`)},T.createElement(PG,Object.assign({},ut,{onChange:je,onShowSizeChange:pe}))):null;let Bt=_n(N);r&&N.length>(ut.current-1)*ut.pageSize&&(Bt=_n(N).splice((ut.current-1)*ut.pageSize,ut.pageSize));const gt=Object.keys(D||{}).some(it=>["xs","sm","md","lg","xl","xxl"].includes(it)),jt=rD(gt),zt=T.useMemo(()=>{for(let it=0;it<Tu.length;it+=1){const Rt=Tu[it];if(jt[Rt])return Rt}},[jt]),an=T.useMemo(()=>{if(!D)return;const it=zt&&D[zt]?D[zt]:D.column;if(it)return{width:`${100/it}%`,maxWidth:`${100/it}%`}},[D==null?void 0:D.column,zt]);let Kt=Mt&&T.createElement("div",{style:{minHeight:53}});if(Bt.length>0){const it=Bt.map((Rt,bt)=>He(Rt,bt));Kt=D?T.createElement(bH,{gutter:D.gutter},T.Children.map(it,Rt=>T.createElement("div",{key:Rt==null?void 0:Rt.key,style:an},Rt))):T.createElement("ul",{className:`${Ze}-items`},it)}else!C&&!Mt&&(Kt=T.createElement("div",{className:`${Ze}-empty-text`},Y&&Y.emptyText||(oe==null?void 0:oe("List"))||T.createElement(Yz,{componentName:"List"})));const Ut=ut.position||"bottom",at=T.useMemo(()=>({grid:D,itemLayout:P}),[JSON.stringify(D),P]);return nt(T.createElement(nE.Provider,{value:at},T.createElement("div",Object.assign({style:Object.assign(Object.assign({},Te==null?void 0:Te.style),w),className:Ct},ne),(Ut==="top"||Ut==="both")&&dt,U&&T.createElement("div",{className:`${Ze}-header`},U),T.createElement(BG,Object.assign({},Ot),Kt,C),Z&&T.createElement("div",{className:`${Ze}-footer`},Z),A||(Ut==="bottom"||Ut==="both")&&dt)))}ZG.Item=UG;let Aa=null,pu=e=>e(),hm=[],Fy={};function GM(){const{prefixCls:e,getContainer:t,duration:r,rtl:a,maxCount:c,top:f}=Fy,y=e??VO().getPrefixCls("message"),l=(t==null?void 0:t())||document.body;return{prefixCls:y,getContainer:()=>l,duration:r,rtl:a,maxCount:c,top:f}}const XG=T.forwardRef((e,t)=>{const[r,a]=T.useState(GM),[c,f]=tz(r),y=VO(),l=y.getRootPrefixCls(),w=y.getIconPrefixCls(),C=y.getTheme(),P=()=>{a(GM)};return T.useEffect(P,[]),T.useImperativeHandle(t,()=>{const A=Object.assign({},c);return Object.keys(A).forEach(D=>{A[D]=function(){return P(),c[D].apply(c,arguments)}}),{instance:A,sync:P}}),T.createElement(HO,{prefixCls:l,iconPrefixCls:w,theme:C},f)});function P0(){if(!Aa){const e=document.createDocumentFragment(),t={fragment:e};Aa=t,pu(()=>{nz(T.createElement(XG,{ref:r=>{const{instance:a,sync:c}=r||{};Promise.resolve().then(()=>{!t.instance&&a&&(t.instance=a,t.sync=c,P0())})}}),e)});return}Aa.instance&&(hm.forEach(e=>{const{type:t,skipped:r}=e;if(!r)switch(t){case"open":{pu(()=>{const a=Aa.instance.open(Object.assign(Object.assign({},Fy),e.config));a==null||a.then(e.resolve),e.setCloseFn(a)});break}case"destroy":pu(()=>{Aa==null||Aa.instance.destroy(e.key)});break;default:pu(()=>{var a;const c=(a=Aa.instance)[t].apply(a,_n(e.args));c==null||c.then(e.resolve),e.setCloseFn(c)})}}),hm=[])}function KG(e){Fy=Object.assign(Object.assign({},Fy),e),pu(()=>{var t;(t=Aa==null?void 0:Aa.sync)===null||t===void 0||t.call(Aa)})}function YG(e){const t=FS(r=>{let a;const c={type:"open",config:e,resolve:r,setCloseFn:f=>{a=f}};return hm.push(c),()=>{a?pu(()=>{a()}):c.skipped=!0}});return P0(),t}function JG(e,t){const r=FS(a=>{let c;const f={type:e,args:t,resolve:a,setCloseFn:y=>{c=y}};return hm.push(f),()=>{c?pu(()=>{c()}):f.skipped=!0}});return P0(),r}function QG(e){hm.push({type:"destroy",key:e}),P0()}const eW=["success","info","warning","error","loading"],tW={open:YG,destroy:QG,config:KG,useMessage:tj,_InternalPanelDoNotUseOrYouWillBeFired:q6},OD=tW;eW.forEach(e=>{OD[e]=function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return JG(e,r)}});const iY=OD;var nW=globalThis&&globalThis.__rest||function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(r[a[c]]=e[a[c]]);return r};const rW={border:0,background:"transparent",padding:0,lineHeight:"inherit",display:"inline-block"},iW=T.forwardRef((e,t)=>{const r=C=>{const{keyCode:P}=C;P===Vt.ENTER&&C.preventDefault()},a=C=>{const{keyCode:P}=C,{onClick:A}=e;P===Vt.ENTER&&A&&A()},{style:c,noStyle:f,disabled:y}=e,l=nW(e,["style","noStyle","disabled"]);let w={};return f||(w=Object.assign({},rW)),y&&(w.pointerEvents="none"),w=Object.assign(Object.assign({},w),c),T.createElement("div",Object.assign({role:"button",tabIndex:0,ref:t},l,{onKeyDown:r,onKeyUp:a,style:w}))}),WM=iW;var oW={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2L263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"}}]},name:"copy",theme:"outlined"};const aW=oW;var sW=function(t,r){return T.createElement(Xi,Cn({},t,{ref:r,icon:aW}))};const lW=T.forwardRef(sW);var cW={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"};const uW=cW;var dW=function(t,r){return T.createElement(Xi,Cn({},t,{ref:r,icon:uW}))};const hW=T.forwardRef(dW);var fW=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,r=[],a=0;a<e.rangeCount;a++)r.push(e.getRangeAt(a));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null;break}return e.removeAllRanges(),function(){e.type==="Caret"&&e.removeAllRanges(),e.rangeCount||r.forEach(function(c){e.addRange(c)}),t&&t.focus()}},pW=fW,qM={"text/plain":"Text","text/html":"Url",default:"Text"},mW="Copy to clipboard: #{key}, Enter";function gW(e){var t=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}function vW(e,t){var r,a,c,f,y,l,w=!1;t||(t={}),r=t.debug||!1;try{c=pW(),f=document.createRange(),y=document.getSelection(),l=document.createElement("span"),l.textContent=e,l.ariaHidden="true",l.style.all="unset",l.style.position="fixed",l.style.top=0,l.style.clip="rect(0, 0, 0, 0)",l.style.whiteSpace="pre",l.style.webkitUserSelect="text",l.style.MozUserSelect="text",l.style.msUserSelect="text",l.style.userSelect="text",l.addEventListener("copy",function(P){if(P.stopPropagation(),t.format)if(P.preventDefault(),typeof P.clipboardData>"u"){r&&console.warn("unable to use e.clipboardData"),r&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var A=qM[t.format]||qM.default;window.clipboardData.setData(A,e)}else P.clipboardData.clearData(),P.clipboardData.setData(t.format,e);t.onCopy&&(P.preventDefault(),t.onCopy(P.clipboardData))}),document.body.appendChild(l),f.selectNodeContents(l),y.addRange(f);var C=document.execCommand("copy");if(!C)throw new Error("copy command was unsuccessful");w=!0}catch(P){r&&console.error("unable to copy using execCommand: ",P),r&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),w=!0}catch(A){r&&console.error("unable to copy using clipboardData: ",A),r&&console.error("falling back to prompt"),a=gW("message"in t?t.message:mW),window.prompt(a,e)}}finally{y&&(typeof y.removeRange=="function"?y.removeRange(f):y.removeAllRanges()),l&&document.body.removeChild(l),c()}return w}var yW=vW;const _W=_c(yW);var xW={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 170h-60c-4.4 0-8 3.6-8 8v518H310v-73c0-6.7-7.8-10.5-13-6.3l-141.9 112a8 8 0 000 12.6l141.9 112c5.3 4.2 13 .4 13-6.3v-75h498c35.3 0 64-28.7 64-64V178c0-4.4-3.6-8-8-8z"}}]},name:"enter",theme:"outlined"};const bW=xW;var wW=function(t,r){return T.createElement(Xi,Cn({},t,{ref:r,icon:bW}))};const SW=T.forwardRef(wW),EW=(e,t,r,a)=>{const{titleMarginBottom:c,fontWeightStrong:f}=a;return{marginBottom:c,color:r,fontWeight:f,fontSize:e,lineHeight:t}},CW=e=>{const t=[1,2,3,4,5],r={};return t.forEach(a=>{r[`
      h${a}&,
      div&-h${a},
      div&-h${a} > textarea,
      h${a}
    `]=EW(e[`fontSizeHeading${a}`],e[`lineHeightHeading${a}`],e.colorTextHeading,e)}),r},TW=e=>{const{componentCls:t}=e;return{"a&, a":Object.assign(Object.assign({},IO(e)),{textDecoration:e.linkDecoration,"&:active, &:hover":{textDecoration:e.linkHoverDecoration},[`&[disabled], &${t}-disabled`]:{color:e.colorTextDisabled,cursor:"not-allowed","&:active, &:hover":{color:e.colorTextDisabled},"&:active":{pointerEvents:"none"}}})}},IW=e=>({code:{margin:"0 0.2em",paddingInline:"0.4em",paddingBlock:"0.2em 0.1em",fontSize:"85%",fontFamily:e.fontFamilyCode,background:"rgba(150, 150, 150, 0.1)",border:"1px solid rgba(100, 100, 100, 0.2)",borderRadius:3},kbd:{margin:"0 0.2em",paddingInline:"0.4em",paddingBlock:"0.15em 0.1em",fontSize:"90%",fontFamily:e.fontFamilyCode,background:"rgba(150, 150, 150, 0.06)",border:"1px solid rgba(100, 100, 100, 0.2)",borderBottomWidth:2,borderRadius:3},mark:{padding:0,backgroundColor:N5[2]},"u, ins":{textDecoration:"underline",textDecorationSkipInk:"auto"},"s, del":{textDecoration:"line-through"},strong:{fontWeight:600},"ul, ol":{marginInline:0,marginBlock:"0 1em",padding:0,li:{marginInline:"20px 0",marginBlock:0,paddingInline:"4px 0",paddingBlock:0}},ul:{listStyleType:"circle",ul:{listStyleType:"disc"}},ol:{listStyleType:"decimal"},"pre, blockquote":{margin:"1em 0"},pre:{padding:"0.4em 0.6em",whiteSpace:"pre-wrap",wordWrap:"break-word",background:"rgba(150, 150, 150, 0.1)",border:"1px solid rgba(100, 100, 100, 0.2)",borderRadius:3,fontFamily:e.fontFamilyCode,code:{display:"inline",margin:0,padding:0,fontSize:"inherit",fontFamily:"inherit",background:"transparent",border:0}},blockquote:{paddingInline:"0.6em 0",paddingBlock:0,borderInlineStart:"4px solid rgba(100, 100, 100, 0.2)",opacity:.85}}),MW=e=>{const{componentCls:t,paddingSM:r}=e,a=r;return{"&-edit-content":{position:"relative","div&":{insetInlineStart:-e.paddingSM,marginTop:-a,marginBottom:`calc(1em - ${a}px)`},[`${t}-edit-content-confirm`]:{position:"absolute",insetInlineEnd:e.marginXS+2,insetBlockEnd:e.marginXS,color:e.colorTextDescription,fontWeight:"normal",fontSize:e.fontSize,fontStyle:"normal",pointerEvents:"none"},textarea:{margin:"0!important",MozTransition:"none",height:"1em"}}}},PW=e=>({"&-copy-success":{"\n    &,\n    &:hover,\n    &:focus":{color:e.colorSuccess}}}),AW=()=>({"\n  a&-ellipsis,\n  span&-ellipsis\n  ":{display:"inline-block",maxWidth:"100%"},"&-single-line":{whiteSpace:"nowrap"},"&-ellipsis-single-line":{overflow:"hidden",textOverflow:"ellipsis","a&, span&":{verticalAlign:"bottom"},"> code":{paddingBlock:0,maxWidth:"calc(100% - 1.2em)",display:"inline-block",overflow:"hidden",textOverflow:"ellipsis",verticalAlign:"bottom"}},"&-ellipsis-multiple-line":{display:"-webkit-box",overflow:"hidden",WebkitLineClamp:3,WebkitBoxOrient:"vertical"}}),RW=e=>{const{componentCls:t,titleMarginTop:r}=e;return{[t]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:e.colorText,wordBreak:"break-word",lineHeight:e.lineHeight,[`&${t}-secondary`]:{color:e.colorTextDescription},[`&${t}-success`]:{color:e.colorSuccess},[`&${t}-warning`]:{color:e.colorWarning},[`&${t}-danger`]:{color:e.colorError,"a&:active, a&:focus":{color:e.colorErrorActive},"a&:hover":{color:e.colorErrorHover}},[`&${t}-disabled`]:{color:e.colorTextDisabled,cursor:"not-allowed",userSelect:"none"},"\n        div&,\n        p\n      ":{marginBottom:"1em"}},CW(e)),{[`
      & + h1${t},
      & + h2${t},
      & + h3${t},
      & + h4${t},
      & + h5${t}
      `]:{marginTop:r},"\n      div,\n      ul,\n      li,\n      p,\n      h1,\n      h2,\n      h3,\n      h4,\n      h5":{"\n        + h1,\n        + h2,\n        + h3,\n        + h4,\n        + h5\n        ":{marginTop:r}}}),IW(e)),TW(e)),{[`
        ${t}-expand,
        ${t}-edit,
        ${t}-copy
      `]:Object.assign(Object.assign({},IO(e)),{marginInlineStart:e.marginXXS})}),MW(e)),PW(e)),AW()),{"&-rtl":{direction:"rtl"}})}},zD=_o("Typography",e=>[RW(e)],()=>({titleMarginTop:"1.2em",titleMarginBottom:"0.5em"})),OW=e=>{const{prefixCls:t,"aria-label":r,className:a,style:c,direction:f,maxLength:y,autoSize:l=!0,value:w,onSave:C,onCancel:P,onEnd:A,component:D,enterIcon:N=T.createElement(SW,null)}=e,F=T.useRef(null),U=T.useRef(!1),Z=T.useRef(),[j,B]=T.useState(w);T.useEffect(()=>{B(w)},[w]),T.useEffect(()=>{if(F.current&&F.current.resizableTextArea){const{textArea:Te}=F.current.resizableTextArea;Te.focus();const{length:Fe}=Te.value;Te.setSelectionRange(Fe,Fe)}},[]);const H=Te=>{let{target:Fe}=Te;B(Fe.value.replace(/[\n\r]/g,""))},Y=()=>{U.current=!0},ne=()=>{U.current=!1},re=Te=>{let{keyCode:Fe}=Te;U.current||(Z.current=Fe)},Q=()=>{C(j.trim())},te=Te=>{let{keyCode:Fe,ctrlKey:$e,altKey:je,metaKey:pe,shiftKey:He}=Te;Z.current===Fe&&!U.current&&!$e&&!je&&!pe&&!He&&(Fe===Vt.ENTER?(Q(),A==null||A()):Fe===Vt.ESC&&P())},ee=()=>{Q()},ve=D?`${t}-${D}`:"",[he,oe]=zD(t),fe=kt(t,`${t}-edit-content`,{[`${t}-rtl`]:f==="rtl"},a,ve,oe);return he(T.createElement("div",{className:fe,style:c},T.createElement(SD,{ref:F,maxLength:y,value:j,onChange:H,onKeyDown:re,onKeyUp:te,onCompositionStart:Y,onCompositionEnd:ne,onBlur:ee,"aria-label":r,rows:1,autoSize:l}),N!==null?vl(N,{className:`${t}-edit-content-confirm`}):null))},zW=OW;var DW=globalThis&&globalThis.__rest||function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(r[a[c]]=e[a[c]]);return r};const LW=T.forwardRef((e,t)=>{const{prefixCls:r,component:a="article",className:c,rootClassName:f,setContentRef:y,children:l,direction:w,style:C}=e,P=DW(e,["prefixCls","component","className","rootClassName","setContentRef","children","direction","style"]),{getPrefixCls:A,direction:D,typography:N}=T.useContext(cr),F=w??D;let U=t;y&&(U=gs(t,y));const Z=A("typography",r),[j,B]=zD(Z),H=kt(Z,N==null?void 0:N.className,{[`${Z}-rtl`]:F==="rtl"},c,f,B),Y=Object.assign(Object.assign({},N==null?void 0:N.style),C);return j(T.createElement(a,Object.assign({className:H,style:Y,ref:U},P),l))}),DD=LW;function S1(e,t){return T.useMemo(()=>{const r=!!e;return[r,Object.assign(Object.assign({},t),r&&typeof e=="object"?e:null)]},[e])}const kW=(e,t)=>{const r=T.useRef(!1);T.useEffect(()=>{r.current?e():r.current=!0},t)},$W=kW;function LD(e){const t=typeof e;return t==="string"||t==="number"}function FW(e){let t=0;return e.forEach(r=>{LD(r)?t+=String(r).length:t+=1}),t}function E1(e,t){let r=0;const a=[];for(let c=0;c<e.length;c+=1){if(r===t)return a;const f=e[c],l=LD(f)?String(f).length:1,w=r+l;if(w>t){const C=t-r;return a.push(String(f).slice(0,C)),a}a.push(f),r=w}return e}const BW=0,Tv=1,ZM=2,C1=3,T1=4,NW=e=>{let{enabledMeasure:t,children:r,text:a,width:c,fontSize:f,rows:y,onEllipsis:l}=e;const[[w,C,P],A]=T.useState([0,0,0]),[D,N]=T.useState(0),[F,U]=T.useState(BW),[Z,j]=T.useState(0),B=T.useRef(null),H=T.useRef(null),Y=T.useMemo(()=>hl(a),[a]),ne=T.useMemo(()=>FW(Y),[Y]),re=T.useMemo(()=>!t||F!==C1?D&&F!==T1&&t?r(E1(Y,D),D<ne):r(Y,!1):r(E1(Y,C),C<ne),[t,F,r,Y,C,ne]);Lr(()=>{t&&c&&f&&ne&&(U(Tv),A([0,Math.ceil(ne/2),ne]))},[t,c,f,a,ne,y]),Lr(()=>{var ve;F===Tv&&j(((ve=B.current)===null||ve===void 0?void 0:ve.offsetHeight)||0)},[F]),Lr(()=>{var ve,he;if(Z){if(F===Tv){const oe=((ve=H.current)===null||ve===void 0?void 0:ve.offsetHeight)||0,fe=y*Z;oe<=fe?(U(T1),l(!1)):U(ZM)}else if(F===ZM)if(w!==P){const oe=((he=H.current)===null||he===void 0?void 0:he.offsetHeight)||0,fe=y*Z;let Te=w,Fe=P;w===P-1?Fe=w:oe<=fe?Te=C:Fe=C;const $e=Math.ceil((Te+Fe)/2);A([Te,$e,Fe])}else U(C1),N(C),l(!0)}},[F,w,P,y,Z]);const Q={width:c,whiteSpace:"normal",margin:0,padding:0},te=(ve,he,oe)=>T.createElement("span",{"aria-hidden":!0,ref:he,style:Object.assign({position:"fixed",display:"block",left:0,top:0,zIndex:-9999,visibility:"hidden",pointerEvents:"none",fontSize:Math.ceil(f/2)*2},oe)},ve),ee=(ve,he)=>{const oe=E1(Y,ve);return te(r(oe,!0),he,Q)};return T.createElement(T.Fragment,null,re,t&&F!==C1&&F!==T1&&T.createElement(T.Fragment,null,te("lg",B,{wordBreak:"keep-all",whiteSpace:"nowrap"}),F===Tv?te(r(Y,!1),H,Q):ee(C,H)))},jW=NW,UW=e=>{let{enabledEllipsis:t,isEllipsis:r,children:a,tooltipProps:c}=e;return!(c!=null&&c.title)||!t?a:T.createElement(mw,Object.assign({open:r?void 0:!1},c),a)},VW=UW;var HW=globalThis&&globalThis.__rest||function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(r[a[c]]=e[a[c]]);return r};function GW(e,t){let{mark:r,code:a,underline:c,delete:f,strong:y,keyboard:l,italic:w}=e,C=t;function P(A,D){D&&(C=T.createElement(A,{},C))}return P("strong",y),P("u",c),P("del",f),P("code",a),P("mark",r),P("kbd",l),P("i",w),C}function Iv(e,t,r){return e===!0||e===void 0?t:e||r&&t}function XM(e){return e===!1?[!1,!1]:Array.isArray(e)?e:[e]}const WW="...",qW=T.forwardRef((e,t)=>{var r,a,c;const{prefixCls:f,className:y,style:l,type:w,disabled:C,children:P,ellipsis:A,editable:D,copyable:N,component:F,title:U}=e,Z=HW(e,["prefixCls","className","style","type","disabled","children","ellipsis","editable","copyable","component","title"]),{getPrefixCls:j,direction:B}=T.useContext(cr),[H]=OS("Text"),Y=T.useRef(null),ne=T.useRef(null),re=j("typography",f),Q=Sc(Z,["mark","code","delete","underline","strong","keyboard","italic"]),[te,ee]=S1(D),[ve,he]=ms(!1,{value:ee.editing}),{triggerType:oe=["icon"]}=ee,fe=W=>{var J;W&&((J=ee.onStart)===null||J===void 0||J.call(ee)),he(W)};$W(()=>{var W;ve||(W=ne.current)===null||W===void 0||W.focus()},[ve]);const Te=W=>{W==null||W.preventDefault(),fe(!0)},Fe=W=>{var J;(J=ee.onChange)===null||J===void 0||J.call(ee,W),fe(!1)},$e=()=>{var W;(W=ee.onCancel)===null||W===void 0||W.call(ee),fe(!1)},[je,pe]=S1(N),[He,Be]=T.useState(!1),Ze=T.useRef(null),nt={};pe.format&&(nt.format=pe.format);const yt=()=>{Ze.current&&clearTimeout(Ze.current)},Ot=W=>{var J;W==null||W.preventDefault(),W==null||W.stopPropagation(),_W(pe.text||String(P)||"",nt),Be(!0),yt(),Ze.current=setTimeout(()=>{Be(!1)},3e3),(J=pe.onCopy)===null||J===void 0||J.call(pe,W)};T.useEffect(()=>yt,[]);const[Mt,Ft]=T.useState(!1),[Nt,Ct]=T.useState(!1),[ut,At]=T.useState(!1),[dt,Bt]=T.useState(!1),[gt,jt]=T.useState(!1),[zt,an]=T.useState(!0),[Kt,Ut]=S1(A,{expandable:!1}),at=Kt&&!ut,{rows:it=1}=Ut,Rt=T.useMemo(()=>!at||Ut.suffix!==void 0||Ut.onEllipsis||Ut.expandable||te||je,[at,Ut,te,je]);Lr(()=>{Kt&&!Rt&&(Ft(QI("webkitLineClamp")),Ct(QI("textOverflow")))},[Rt,Kt]);const bt=T.useMemo(()=>Rt?!1:it===1?Nt:Mt,[Rt,Nt,Mt]),sn=at&&(bt?gt:dt),An=at&&it===1&&bt,Mn=at&&it>1&&bt,rn=W=>{var J;At(!0),(J=Ut.onExpand)===null||J===void 0||J.call(Ut,W)},[Vn,Nn]=T.useState(0),[zn,vn]=T.useState(0),nn=(W,J)=>{let{offsetWidth:ue}=W;var Se;Nn(ue),vn(parseInt((Se=window.getComputedStyle)===null||Se===void 0?void 0:Se.call(window,J).fontSize,10)||0)},Wn=W=>{var J;Bt(W),dt!==W&&((J=Ut.onEllipsis)===null||J===void 0||J.call(Ut,W))};T.useEffect(()=>{const W=Y.current;if(Kt&&bt&&W){const J=Mn?W.offsetHeight<W.scrollHeight:W.offsetWidth<W.scrollWidth;gt!==J&&jt(J)}},[Kt,bt,P,Mn,zt]),T.useEffect(()=>{const W=Y.current;if(typeof IntersectionObserver>"u"||!W||!bt||!at)return;const J=new IntersectionObserver(()=>{an(!!W.offsetParent)});return J.observe(W),()=>{J.disconnect()}},[bt,at]);let jn={};Ut.tooltip===!0?jn={title:(r=ee.text)!==null&&r!==void 0?r:P}:T.isValidElement(Ut.tooltip)?jn={title:Ut.tooltip}:typeof Ut.tooltip=="object"?jn=Object.assign({title:(a=ee.text)!==null&&a!==void 0?a:P},Ut.tooltip):jn={title:Ut.tooltip};const fr=T.useMemo(()=>{const W=J=>["string","number"].includes(typeof J);if(!(!Kt||bt)){if(W(ee.text))return ee.text;if(W(P))return P;if(W(U))return U;if(W(jn.title))return jn.title}},[Kt,bt,U,jn.title,sn]);if(ve)return T.createElement(zW,{value:(c=ee.text)!==null&&c!==void 0?c:typeof P=="string"?P:"",onSave:Fe,onCancel:$e,onEnd:ee.onEnd,prefixCls:re,className:y,style:l,direction:B,component:F,maxLength:ee.maxLength,autoSize:ee.autoSize,enterIcon:ee.enterIcon});const or=()=>{const{expandable:W,symbol:J}=Ut;if(!W)return null;let ue;return J?ue=J:ue=H==null?void 0:H.expand,T.createElement("a",{key:"expand",className:`${re}-expand`,onClick:rn,"aria-label":H==null?void 0:H.expand},ue)},qn=()=>{if(!te)return;const{icon:W,tooltip:J}=ee,ue=hl(J)[0]||(H==null?void 0:H.edit),Se=typeof ue=="string"?ue:"";return oe.includes("icon")?T.createElement(mw,{key:"edit",title:J===!1?"":ue},T.createElement(WM,{ref:ne,className:`${re}-edit`,onClick:Te,"aria-label":Se},W||T.createElement(hW,{role:"button"}))):null},Qn=()=>{if(!je)return;const{tooltips:W,icon:J}=pe,ue=XM(W),Se=XM(J),Ie=He?Iv(ue[1],H==null?void 0:H.copied):Iv(ue[0],H==null?void 0:H.copy),Me=He?H==null?void 0:H.copied:H==null?void 0:H.copy,De=typeof Ie=="string"?Ie:Me;return T.createElement(mw,{key:"copy",title:Ie},T.createElement(WM,{className:kt(`${re}-copy`,He&&`${re}-copy-success`),onClick:Ot,"aria-label":De},He?Iv(Se[1],T.createElement(Qz,null),!0):Iv(Se[0],T.createElement(lW,null),!0)))},Rr=W=>[W&&or(),qn(),Qn()],_e=W=>[W&&T.createElement("span",{"aria-hidden":!0,key:"ellipsis"},WW),Ut.suffix,Rr(W)];return T.createElement(xl,{onResize:nn,disabled:!at||bt},W=>T.createElement(VW,{tooltipProps:jn,enabledEllipsis:at,isEllipsis:sn},T.createElement(DD,Object.assign({className:kt({[`${re}-${w}`]:w,[`${re}-disabled`]:C,[`${re}-ellipsis`]:Kt,[`${re}-single-line`]:at&&it===1,[`${re}-ellipsis-single-line`]:An,[`${re}-ellipsis-multiple-line`]:Mn},y),prefixCls:f,style:Object.assign(Object.assign({},l),{WebkitLineClamp:Mn?it:void 0}),component:F,ref:gs(W,Y,t),direction:B,onClick:oe.includes("text")?Te:void 0,"aria-label":fr==null?void 0:fr.toString(),title:U},Q),T.createElement(jW,{enabledMeasure:at&&!bt,text:P,rows:it,width:Vn,fontSize:zn,onEllipsis:Wn},(J,ue)=>{let Se=J;return J.length&&ue&&fr&&(Se=T.createElement("span",{key:"show-content","aria-hidden":!0},Se)),GW(e,T.createElement(T.Fragment,null,Se,_e(ue)))}))))}),A0=qW;var ZW=globalThis&&globalThis.__rest||function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(r[a[c]]=e[a[c]]);return r};const XW=T.forwardRef((e,t)=>{var{ellipsis:r,rel:a}=e,c=ZW(e,["ellipsis","rel"]);const f=Object.assign(Object.assign({},c),{rel:a===void 0&&c.target==="_blank"?"noopener noreferrer":a});return delete f.navigate,T.createElement(A0,Object.assign({},f,{ref:t,ellipsis:!!r,component:"a"}))}),KW=XW,YW=T.forwardRef((e,t)=>T.createElement(A0,Object.assign({ref:t},e,{component:"div"}))),JW=YW;var QW=globalThis&&globalThis.__rest||function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(r[a[c]]=e[a[c]]);return r};const eq=(e,t)=>{var{ellipsis:r}=e,a=QW(e,["ellipsis"]);const c=T.useMemo(()=>r&&typeof r=="object"?Sc(r,["expandable","rows"]):r,[r]);return T.createElement(A0,Object.assign({ref:t},a,{ellipsis:c,component:"span"}))},tq=T.forwardRef(eq);var nq=globalThis&&globalThis.__rest||function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(r[a[c]]=e[a[c]]);return r};const rq=[1,2,3,4,5],iq=T.forwardRef((e,t)=>{const{level:r=1}=e,a=nq(e,["level"]);let c;return rq.includes(r)?c=`h${r}`:c="h1",T.createElement(A0,Object.assign({ref:t},a,{component:c}))}),oq=iq,Im=DD;Im.Text=tq;Im.Link=KW;Im.Title=oq;Im.Paragraph=JW;const oY=Im;var rE={},kD={exports:{}};(function(e){function t(r){return r&&r.__esModule?r:{default:r}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(kD);var iE=kD.exports,R0={};Object.defineProperty(R0,"__esModule",{value:!0});R0.default=void 0;R0.default={items_per_page:"条/页",jump_to:"跳至",jump_to_confirm:"确定",page:"页",prev_page:"上一页",next_page:"下一页",prev_5:"向前 5 页",next_5:"向后 5 页",prev_3:"向前 3 页",next_3:"向后 3 页",page_size:"页码"};var O0={},Mm={},z0={};Object.defineProperty(z0,"__esModule",{value:!0});z0.default=void 0;var aq={locale:"zh_CN",today:"今天",now:"此刻",backToToday:"返回今天",ok:"确定",timeSelect:"选择时间",dateSelect:"选择日期",weekSelect:"选择周",clear:"清除",month:"月",year:"年",previousMonth:"上个月 (翻页上键)",nextMonth:"下个月 (翻页下键)",monthSelect:"选择月份",yearSelect:"选择年份",decadeSelect:"选择年代",yearFormat:"YYYY年",dayFormat:"D日",dateFormat:"YYYY年M月D日",dateTimeFormat:"YYYY年M月D日 HH时mm分ss秒",previousYear:"上一年 (Control键加左方向键)",nextYear:"下一年 (Control键加右方向键)",previousDecade:"上一年代",nextDecade:"下一年代",previousCentury:"上一世纪",nextCentury:"下一世纪"};z0.default=aq;var Pm={};Object.defineProperty(Pm,"__esModule",{value:!0});Pm.default=void 0;const sq={placeholder:"请选择时间",rangePlaceholder:["开始时间","结束时间"]};Pm.default=sq;var $D=iE.default;Object.defineProperty(Mm,"__esModule",{value:!0});Mm.default=void 0;var lq=$D(z0),cq=$D(Pm);const FD={lang:Object.assign({placeholder:"请选择日期",yearPlaceholder:"请选择年份",quarterPlaceholder:"请选择季度",monthPlaceholder:"请选择月份",weekPlaceholder:"请选择周",rangePlaceholder:["开始日期","结束日期"],rangeYearPlaceholder:["开始年份","结束年份"],rangeMonthPlaceholder:["开始月份","结束月份"],rangeQuarterPlaceholder:["开始季度","结束季度"],rangeWeekPlaceholder:["开始周","结束周"]},lq.default),timePickerLocale:Object.assign({},cq.default)};FD.lang.ok="确定";Mm.default=FD;var uq=iE.default;Object.defineProperty(O0,"__esModule",{value:!0});O0.default=void 0;var dq=uq(Mm);O0.default=dq.default;var D0=iE.default;Object.defineProperty(rE,"__esModule",{value:!0});var hq=rE.default=void 0,fq=D0(R0),pq=D0(O0),mq=D0(Mm),gq=D0(Pm);const ta="${label}不是一个有效的${type}",vq={locale:"zh-cn",Pagination:fq.default,DatePicker:mq.default,TimePicker:gq.default,Calendar:pq.default,global:{placeholder:"请选择"},Table:{filterTitle:"筛选",filterConfirm:"确定",filterReset:"重置",filterEmptyText:"无筛选项",filterCheckall:"全选",filterSearchPlaceholder:"在筛选项中搜索",selectAll:"全选当页",selectInvert:"反选当页",selectNone:"清空所有",selectionAll:"全选所有",sortTitle:"排序",expand:"展开行",collapse:"关闭行",triggerDesc:"点击降序",triggerAsc:"点击升序",cancelSort:"取消排序"},Modal:{okText:"确定",cancelText:"取消",justOkText:"知道了"},Tour:{Next:"下一步",Previous:"上一步",Finish:"结束导览"},Popconfirm:{cancelText:"取消",okText:"确定"},Transfer:{titles:["",""],searchPlaceholder:"请输入搜索内容",itemUnit:"项",itemsUnit:"项",remove:"删除",selectCurrent:"全选当页",removeCurrent:"删除当页",selectAll:"全选所有",removeAll:"删除全部",selectInvert:"反选当页"},Upload:{uploading:"文件上传中",removeFile:"删除文件",uploadError:"上传错误",previewFile:"预览文件",downloadFile:"下载文件"},Empty:{description:"暂无数据"},Icon:{icon:"图标"},Text:{edit:"编辑",copy:"复制",copied:"复制成功",expand:"展开"},PageHeader:{back:"返回"},Form:{optional:"（可选）",defaultValidateMessages:{default:"字段验证错误${label}",required:"请输入${label}",enum:"${label}必须是其中一个[${enum}]",whitespace:"${label}不能为空字符",date:{format:"${label}日期格式无效",parse:"${label}不能转换为日期",invalid:"${label}是一个无效日期"},types:{string:ta,method:ta,array:ta,object:ta,number:ta,date:ta,boolean:ta,integer:ta,float:ta,regexp:ta,email:ta,url:ta,hex:ta},string:{len:"${label}须为${len}个字符",min:"${label}最少${min}个字符",max:"${label}最多${max}个字符",range:"${label}须在${min}-${max}字符之间"},number:{len:"${label}必须等于${len}",min:"${label}最小值为${min}",max:"${label}最大值为${max}",range:"${label}须在${min}-${max}之间"},array:{len:"须为${len}个${label}",min:"最少${min}个${label}",max:"最多${max}个${label}",range:"${label}数量须在${min}-${max}之间"},pattern:{mismatch:"${label}与模式不匹配${pattern}"}}},Image:{preview:"预览"},QRCode:{expired:"二维码过期",refresh:"点击刷新"},ColorPicker:{presetEmpty:"暂无"}};hq=rE.default=vq;var KM={},YM=vc;KM.createRoot=YM.createRoot,KM.hydrateRoot=YM.hydrateRoot;var BD={exports:{}};(function(e,t){(function(r,a){e.exports=a()})(vp,function(){var r,a,c;function f(l,w){if(!r)r=w;else if(!a)a=w;else{var C="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+r+")(sharedChunk); ("+a+")(sharedChunk); self.onerror = null;",P={};r(P),c=w(P),typeof window<"u"&&window&&window.URL&&window.URL.createObjectURL&&(c.workerUrl=window.URL.createObjectURL(new Blob([C],{type:"text/javascript"})))}}f(["exports"],function(l){var w=typeof self<"u"?self:{},C="2.15.0";let P;const A={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(P==null){const i=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{P={}.API_URL_REGEX!=null?new RegExp({}.API_URL_REGEX):i}catch{P=i}}return P},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!A.API_URL)return null;try{const i=new URL(A.API_URL);return i.hostname==="api.mapbox.cn"?"https://events.mapbox.cn/events/v2":i.hostname==="api.mapbox.com"?"https://events.mapbox.com/events/v2":null}catch{return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},D={supported:!1,testSupport:function(i){!U&&F&&(Z?j(i):N=i)}};let N,F,U=!1,Z=!1;function j(i){const n=i.createTexture();i.bindTexture(i.TEXTURE_2D,n);try{if(i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,F),i.isContextLost())return;D.supported=!0}catch{}i.deleteTexture(n),U=!0}w.document&&(F=w.document.createElement("img"),F.onload=function(){N&&j(N),N=null,Z=!0},F.onerror=function(){U=!0,N=null},F.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const B="01";function H(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Y=ne;function ne(i,n,o,u){this.cx=3*i,this.bx=3*(o-i)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(u-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=i,this.p1y=n,this.p2x=o,this.p2y=u}ne.prototype={sampleCurveX:function(i){return((this.ax*i+this.bx)*i+this.cx)*i},sampleCurveY:function(i){return((this.ay*i+this.by)*i+this.cy)*i},sampleCurveDerivativeX:function(i){return(3*this.ax*i+2*this.bx)*i+this.cx},solveCurveX:function(i,n){if(n===void 0&&(n=1e-6),i<0)return 0;if(i>1)return 1;for(var o=i,u=0;u<8;u++){var h=this.sampleCurveX(o)-i;if(Math.abs(h)<n)return o;var m=this.sampleCurveDerivativeX(o);if(Math.abs(m)<1e-6)break;o-=h/m}var v=0,x=1;for(o=i,u=0;u<20&&(h=this.sampleCurveX(o),!(Math.abs(h-i)<n));u++)i>h?v=o:x=o,o=.5*(x-v)+v;return o},solve:function(i,n){return this.sampleCurveY(this.solveCurveX(i,n))}};var re=H(Y),Q=te;function te(i,n){this.x=i,this.y=n}te.prototype={clone:function(){return new te(this.x,this.y)},add:function(i){return this.clone()._add(i)},sub:function(i){return this.clone()._sub(i)},multByPoint:function(i){return this.clone()._multByPoint(i)},divByPoint:function(i){return this.clone()._divByPoint(i)},mult:function(i){return this.clone()._mult(i)},div:function(i){return this.clone()._div(i)},rotate:function(i){return this.clone()._rotate(i)},rotateAround:function(i,n){return this.clone()._rotateAround(i,n)},matMult:function(i){return this.clone()._matMult(i)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(i){return this.x===i.x&&this.y===i.y},dist:function(i){return Math.sqrt(this.distSqr(i))},distSqr:function(i){var n=i.x-this.x,o=i.y-this.y;return n*n+o*o},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(i){return Math.atan2(this.y-i.y,this.x-i.x)},angleWith:function(i){return this.angleWithSep(i.x,i.y)},angleWithSep:function(i,n){return Math.atan2(this.x*n-this.y*i,this.x*i+this.y*n)},_matMult:function(i){var n=i[2]*this.x+i[3]*this.y;return this.x=i[0]*this.x+i[1]*this.y,this.y=n,this},_add:function(i){return this.x+=i.x,this.y+=i.y,this},_sub:function(i){return this.x-=i.x,this.y-=i.y,this},_mult:function(i){return this.x*=i,this.y*=i,this},_div:function(i){return this.x/=i,this.y/=i,this},_multByPoint:function(i){return this.x*=i.x,this.y*=i.y,this},_divByPoint:function(i){return this.x/=i.x,this.y/=i.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var i=this.y;return this.y=this.x,this.x=-i,this},_rotate:function(i){var n=Math.cos(i),o=Math.sin(i),u=o*this.x+n*this.y;return this.x=n*this.x-o*this.y,this.y=u,this},_rotateAround:function(i,n){var o=Math.cos(i),u=Math.sin(i),h=n.y+u*(this.x-n.x)+o*(this.y-n.y);return this.x=n.x+o*(this.x-n.x)-u*(this.y-n.y),this.y=h,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},te.convert=function(i){return i instanceof te?i:Array.isArray(i)?new te(i[0],i[1]):i};var ee=H(Q);const ve=Math.PI/180,he=180/Math.PI;function oe(i){return i*ve}function fe(i){return i*he}const Te=[[0,0],[1,0],[1,1],[0,1]];function Fe(i){if(i<=0)return 0;if(i>=1)return 1;const n=i*i,o=n*i;return 4*(i<.5?o:3*(i-n)+o-.75)}function $e(i,n,o,u){const h=new re(i,n,o,u);return function(m){return h.solve(m)}}const je=$e(.25,.1,.25,1);function pe(i,n,o){return Math.min(o,Math.max(n,i))}function He(i,n,o){return(o=pe((o-i)/(n-i),0,1))*o*(3-2*o)}function Be(i,n,o){const u=o-n,h=((i-n)%u+u)%u+n;return h===n?o:h}function Ze(i,n,o){if(!i.length)return o(null,[]);let u=i.length;const h=new Array(i.length);let m=null;i.forEach((v,x)=>{n(v,(S,E)=>{S&&(m=S),h[x]=E,--u==0&&o(m,h)})})}function nt(i){const n=[];for(const o in i)n.push(i[o]);return n}function yt(i,...n){for(const o of n)for(const u in o)i[u]=o[u];return i}let Ot=1;function Mt(){return Ot++}function Ft(){return function i(n){return n?(n^Math.random()*(16>>n/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,i)}()}function Nt(i){return i<=1?1:Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))}function Ct(i){return!!i&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(i)}function ut(i,n){i.forEach(o=>{n[o]&&(n[o]=n[o].bind(n))})}function At(i,n){return i.indexOf(n,i.length-n.length)!==-1}function dt(i,n,o){const u={};for(const h in i)u[h]=n.call(o||this,i[h],h,i);return u}function Bt(i,n,o){const u={};for(const h in i)n.call(o||this,i[h],h,i)&&(u[h]=i[h]);return u}function gt(i){return Array.isArray(i)?i.map(gt):typeof i=="object"&&i?dt(i,gt):i}const jt={};function zt(i){jt[i]||(typeof console<"u"&&console.warn(i),jt[i]=!0)}function an(i,n,o){return(o.y-i.y)*(n.x-i.x)>(n.y-i.y)*(o.x-i.x)}function Kt(i){let n=0;for(let o,u,h=0,m=i.length,v=m-1;h<m;v=h++)o=i[h],u=i[v],n+=(u.x-o.x)*(o.y+u.y);return n}function Ut(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function at(i){const n={};if(i.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(o,u,h,m)=>{const v=h||m;return n[u]=!v||v.toLowerCase(),""}),n["max-age"]){const o=parseInt(n["max-age"],10);isNaN(o)?delete n["max-age"]:n["max-age"]=o}return n}let it=null;function Rt(i){if(it==null){const n=i.navigator?i.navigator.userAgent:null;it=!!i.safari||!(!n||!(/\b(iPad|iPhone|iPod)\b/.test(n)||n.match("Safari")&&!n.match("Chrome")))}return it}function bt(i){try{const n=w[i];return n.setItem("_mapbox_test_",1),n.removeItem("_mapbox_test_"),!0}catch{return!1}}function sn(i,n){return[i[4*n],i[4*n+1],i[4*n+2],i[4*n+3]]}const An="mapbox-tiles";let Mn=500,rn=50,Vn,Nn;function zn(){try{return w.caches}catch{}}function vn(){zn()&&!Vn&&(Vn=w.caches.open(An))}function nn(i){const n=i.indexOf("?");if(n<0)return i;const o=function(h){const m=h.indexOf("?");return m>0?h.slice(m+1).split("&"):[]}(i),u=o.filter(h=>{const m=h.split("=");return m[0]==="language"||m[0]==="worldview"});return u.length?`${i.slice(0,n)}?${u.join("&")}`:i.slice(0,n)}let Wn=1/0;const jn={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(jn);class fr extends Error{constructor(n,o,u){o===401&&Me(u)&&(n+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(n),this.status=o,this.url=u}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const or=Ut()?()=>self.worker&&self.worker.referrer:()=>(w.location.protocol==="blob:"?w.parent:w).location.href,qn=function(i,n){if(!(/^file:/.test(o=i.url)||/^file:/.test(or())&&!/^\w+:/.test(o))){if(w.fetch&&w.Request&&w.AbortController&&w.Request.prototype.hasOwnProperty("signal"))return function(u,h){const m=new w.AbortController,v=new w.Request(u.url,{method:u.method||"GET",body:u.body,credentials:u.credentials,headers:u.headers,referrer:or(),referrerPolicy:u.referrerPolicy,signal:m.signal});let x=!1,S=!1;const E=(R=v.url).indexOf("sku=")>0&&Me(R);var R;u.type==="json"&&v.headers.set("Accept","application/json");const z=(V,G,K)=>{if(S)return;if(V&&V.message!=="SecurityError"&&zt(V.toString()),G&&K)return L(G);const ae=Date.now();w.fetch(v).then(ge=>{if(ge.ok){const Ce=E?ge.clone():null;return L(ge,Ce,ae)}return h(new fr(ge.statusText,ge.status,u.url))}).catch(ge=>{ge.name!=="AbortError"&&h(new Error(`${ge.message} ${u.url}`))})},L=(V,G,K)=>{(u.type==="arrayBuffer"?V.arrayBuffer():u.type==="json"?V.json():V.text()).then(ae=>{S||(G&&K&&function(ge,Ce,ye){if(vn(),!Vn)return;const Ee={status:Ce.status,statusText:Ce.statusText,headers:new w.Headers};Ce.headers.forEach((Ye,qe)=>Ee.headers.set(qe,Ye));const Ae=at(Ce.headers.get("Cache-Control")||"");if(Ae["no-store"])return;Ae["max-age"]&&Ee.headers.set("Expires",new Date(ye+1e3*Ae["max-age"]).toUTCString());const Pe=Ee.headers.get("Expires");Pe&&(new Date(Pe).getTime()-ye<42e4||function(Ye,qe){if(Nn===void 0)try{new Response(new ReadableStream),Nn=!0}catch{Nn=!1}Nn?qe(Ye.body):Ye.blob().then(qe)}(Ce,Ye=>{const qe=new w.Response(Ye,Ee);vn(),Vn&&Vn.then(ot=>ot.put(nn(ge.url),qe)).catch(ot=>zt(ot.message))}))}(v,G,K),x=!0,h(null,ae,V.headers.get("Cache-Control"),V.headers.get("Expires")))}).catch(ae=>{S||h(new Error(ae.message))})};return E?function(V,G){if(vn(),!Vn)return G(null);const K=nn(V.url);Vn.then(ae=>{ae.match(K).then(ge=>{const Ce=function(ye){if(!ye)return!1;const Ee=new Date(ye.headers.get("Expires")||0),Ae=at(ye.headers.get("Cache-Control")||"");return Ee>Date.now()&&!Ae["no-cache"]}(ge);ae.delete(K),Ce&&ae.put(K,ge.clone()),G(null,ge,Ce)}).catch(G)}).catch(G)}(v,z):z(null,null),{cancel:()=>{S=!0,x||m.abort()}}}(i,n);if(Ut()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",i,n,void 0,!0)}var o;return function(u,h){const m=new w.XMLHttpRequest;m.open(u.method||"GET",u.url,!0),u.type==="arrayBuffer"&&(m.responseType="arraybuffer");for(const v in u.headers)m.setRequestHeader(v,u.headers[v]);return u.type==="json"&&(m.responseType="text",m.setRequestHeader("Accept","application/json")),m.withCredentials=u.credentials==="include",m.onerror=()=>{h(new Error(m.statusText))},m.onload=()=>{if((m.status>=200&&m.status<300||m.status===0)&&m.response!==null){let v=m.response;if(u.type==="json")try{v=JSON.parse(m.response)}catch(x){return h(x)}h(null,v,m.getResponseHeader("Cache-Control"),m.getResponseHeader("Expires"))}else h(new fr(m.statusText,m.status,u.url))},m.send(u.body),{cancel:()=>m.abort()}}(i,n)},Qn=function(i,n){return qn(yt(i,{type:"arrayBuffer"}),n)};function Rr(i){const n=w.document.createElement("a");return n.href=i,n.protocol===w.document.location.protocol&&n.host===w.document.location.host}const _e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let W,J;W=[],J=0;const ue=function(i,n){if(D.supported&&(i.headers||(i.headers={}),i.headers.accept="image/webp,*/*"),J>=A.MAX_PARALLEL_IMAGE_REQUESTS){const m={requestParameters:i,callback:n,cancelled:!1,cancel(){this.cancelled=!0}};return W.push(m),m}J++;let o=!1;const u=()=>{if(!o)for(o=!0,J--;W.length&&J<A.MAX_PARALLEL_IMAGE_REQUESTS;){const m=W.shift(),{requestParameters:v,callback:x,cancelled:S}=m;S||(m.cancel=ue(v,x).cancel)}},h=Qn(i,(m,v,x,S)=>{u(),m?n(m):v&&(w.createImageBitmap?function(E,R){const z=new w.Blob([new Uint8Array(E)],{type:"image/png"});w.createImageBitmap(z).then(L=>{R(null,L)}).catch(L=>{R(new Error(`Could not load image because of ${L.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(v,(E,R)=>n(E,R,x,S)):function(E,R){const z=new w.Image,L=w.URL;z.onload=()=>{R(null,z),L.revokeObjectURL(z.src),z.onload=null,w.requestAnimationFrame(()=>{z.src=_e})},z.onerror=()=>R(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const V=new w.Blob([new Uint8Array(E)],{type:"image/png"});z.src=E.byteLength?L.createObjectURL(V):_e}(v,(E,R)=>n(E,R,x,S)))});return{cancel:()=>{h.cancel(),u()}}},Se="NO_ACCESS_TOKEN";function Ie(i){return i.indexOf("mapbox:")===0}function Me(i){return A.API_URL_REGEX.test(i)}function De(i){return A.API_CDN_URL_REGEX.test(i)}function we(i){return A.API_STYLE_REGEX.test(i)&&!Le(i)}function Le(i){return A.API_SPRITE_REGEX.test(i)}const Ne=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Je(i){const n=i.match(Ne);if(!n)throw new Error("Unable to parse URL object");return{protocol:n[1],authority:n[2],path:n[3]||"/",params:n[4]?n[4].split("&"):[]}}function Ge(i){const n=i.params.length?`?${i.params.join("&")}`:"";return`${i.protocol}://${i.authority}${i.path}${n}`}const _t="mapbox.eventData";function Yt(i){if(!i)return null;const n=i.split(".");if(!n||n.length!==3)return null;try{return JSON.parse(decodeURIComponent(w.atob(n[1]).split("").map(o=>"%"+("00"+o.charCodeAt(0).toString(16)).slice(-2)).join("")))}catch{return null}}class Zt{constructor(n){this.type=n,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(n){const o=Yt(A.ACCESS_TOKEN);let u="";return u=o&&o.u?w.btoa(encodeURIComponent(o.u).replace(/%([0-9A-F]{2})/g,(h,m)=>String.fromCharCode(+("0x"+m)))):A.ACCESS_TOKEN||"",n?`${_t}.${n}:${u}`:`${_t}:${u}`}fetchEventData(){const n=bt("localStorage"),o=this.getStorageKey(),u=this.getStorageKey("uuid");if(n)try{const h=w.localStorage.getItem(o);h&&(this.eventData=JSON.parse(h));const m=w.localStorage.getItem(u);m&&(this.anonId=m)}catch{zt("Unable to read from LocalStorage")}}saveEventData(){const n=bt("localStorage"),o=this.getStorageKey(),u=this.getStorageKey("uuid");if(n)try{w.localStorage.setItem(u,this.anonId),Object.keys(this.eventData).length>=1&&w.localStorage.setItem(o,JSON.stringify(this.eventData))}catch{zt("Unable to write to LocalStorage")}}processRequests(n){}postEvent(n,o,u,h){if(!A.EVENTS_URL)return;const m=Je(A.EVENTS_URL);m.params.push(`access_token=${h||A.ACCESS_TOKEN||""}`);const v={event:this.type,created:new Date(n).toISOString()},x=o?yt(v,o):v,S={url:Ge(m),headers:{"Content-Type":"text/plain"},body:JSON.stringify([x])};this.pendingRequest=function(E,R){return qn(yt(E,{method:"POST"}),R)}(S,E=>{this.pendingRequest=null,u(E),this.saveEventData(),this.processRequests(h)})}queueRequest(n,o){this.queue.push(n),this.processRequests(o)}}const un=new class extends Zt{constructor(i){super("appUserTurnstile"),this._customAccessToken=i}postTurnstileEvent(i,n){A.EVENTS_URL&&A.ACCESS_TOKEN&&Array.isArray(i)&&i.some(o=>Ie(o)||Me(o))&&this.queueRequest(Date.now(),n)}processRequests(i){if(this.pendingRequest||this.queue.length===0)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const n=Yt(A.ACCESS_TOKEN),o=n?n.u:A.ACCESS_TOKEN;let u=o!==this.eventData.tokenU;Ct(this.anonId)||(this.anonId=Ft(),u=!0);const h=this.queue.shift();if(this.eventData.lastSuccess){const m=new Date(this.eventData.lastSuccess),v=new Date(h),x=(h-this.eventData.lastSuccess)/864e5;u=u||x>=1||x<-1||m.getDate()!==v.getDate()}else u=!0;u?this.postEvent(h,{sdkIdentifier:"mapbox-gl-js",sdkVersion:C,skuId:B,"enabled.telemetry":!1,userId:this.anonId},m=>{m||(this.eventData.lastSuccess=h,this.eventData.tokenU=o)},i):this.processRequests()}},ln=un.postTurnstileEvent.bind(un),Gn=new class extends Zt{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(i,n,o,u){this.skuToken=n,this.errorCb=u,A.EVENTS_URL&&(o||A.ACCESS_TOKEN?this.queueRequest({id:i,timestamp:Date.now()},o):this.errorCb(new Error(Se)))}processRequests(i){if(this.pendingRequest||this.queue.length===0)return;const{id:n,timestamp:o}=this.queue.shift();n&&this.success[n]||(this.anonId||this.fetchEventData(),Ct(this.anonId)||(this.anonId=Ft()),this.postEvent(o,{sdkIdentifier:"mapbox-gl-js",sdkVersion:C,skuId:B,skuToken:this.skuToken,userId:this.anonId},u=>{u?this.errorCb(u):n&&(this.success[n]=!0)},i))}},On=Gn.postMapLoadEvent.bind(Gn),er=new class extends Zt{constructor(){super("gljs.performance")}postPerformanceEvent(i,n){A.EVENTS_URL&&(i||A.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:n},i)}processRequests(i){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:n,performanceData:o}=this.queue.shift(),u=function(h){const m=w.performance.getEntriesByType("resource"),v=w.performance.getEntriesByType("mark"),x=function(L){const V={};if(L){for(const G in L)if(G!=="other")for(const K of L[G]){const ae=`${G}ResolveRangeMin`,ge=`${G}ResolveRangeMax`,Ce=`${G}RequestCount`,ye=`${G}RequestCachedCount`;V[ae]=Math.min(V[ae]||1/0,K.startTime),V[ge]=Math.max(V[ge]||-1/0,K.responseEnd);const Ee=Ae=>{V[Ae]===void 0&&(V[Ae]=0),++V[Ae]};K.transferSize!==void 0&&K.transferSize===0&&Ee(ye),Ee(Ce)}}return V}(function(L,V){const G={};if(L)for(const K of L){const ae=V(K);G[ae]===void 0&&(G[ae]=[]),G[ae].push(K)}return G}(m,ri)),S=w.devicePixelRatio,E=w.navigator.connection||w.navigator.mozConnection||w.navigator.webkitConnection,R={counters:[],metadata:[],attributes:[]},z=(L,V,G)=>{G!=null&&L.push({name:V,value:G.toString()})};for(const L in x)z(R.counters,L,x[L]);if(h.interactionRange[0]!==1/0&&h.interactionRange[1]!==-1/0&&(z(R.counters,"interactionRangeMin",h.interactionRange[0]),z(R.counters,"interactionRangeMax",h.interactionRange[1])),v)for(const L of Object.keys(Sn)){const V=Sn[L],G=v.find(K=>K.name===V);G&&z(R.counters,V,G.startTime)}return z(R.counters,"visibilityHidden",h.visibilityHidden),z(R.attributes,"style",function(L){if(L)for(const V of L){const G=V.name.split("?")[0];if(we(G)){const K=G.split("/").slice(-2);if(K.length===2)return`mapbox://styles/${K[0]}/${K[1]}`}}}(m)),z(R.attributes,"terrainEnabled",h.terrainEnabled?"true":"false"),z(R.attributes,"fogEnabled",h.fogEnabled?"true":"false"),z(R.attributes,"projection",h.projection),z(R.attributes,"zoom",h.zoom),z(R.metadata,"devicePixelRatio",S),z(R.metadata,"connectionEffectiveType",E?E.effectiveType:void 0),z(R.metadata,"navigatorUserAgent",w.navigator.userAgent),z(R.metadata,"screenWidth",w.screen.width),z(R.metadata,"screenHeight",w.screen.height),z(R.metadata,"windowWidth",w.innerWidth),z(R.metadata,"windowHeight",w.innerHeight),z(R.metadata,"mapWidth",h.width/S),z(R.metadata,"mapHeight",h.height/S),z(R.metadata,"webglRenderer",h.renderer),z(R.metadata,"webglVendor",h.vendor),z(R.metadata,"sdkVersion",C),z(R.metadata,"sdkIdentifier","mapbox-gl-js"),R}(o);for(const h of u.metadata);for(const h of u.counters);for(const h of u.attributes);this.postEvent(n,u,()=>{},i)}},Zn=er.postPerformanceEvent.bind(er),Zr=new class extends Zt{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(i,n,o,u){if(!A.API_URL||!A.SESSION_PATH)return;const h=Je(A.API_URL+A.SESSION_PATH);h.params.push(`sku=${n||""}`),h.params.push(`access_token=${u||A.ACCESS_TOKEN||""}`);const m={url:Ge(h),headers:{"Content-Type":"text/plain"}};this.pendingRequest=function(v,x){return qn(yt(v,{method:"GET"}),x)}(m,v=>{this.pendingRequest=null,o(v),this.saveEventData(),this.processRequests(u)})}getSessionAPI(i,n,o,u){this.skuToken=n,this.errorCb=u,A.SESSION_PATH&&A.API_URL&&(o||A.ACCESS_TOKEN?this.queueRequest({id:i,timestamp:Date.now()},o):this.errorCb(new Error(Se)))}processRequests(i){if(this.pendingRequest||this.queue.length===0)return;const{id:n,timestamp:o}=this.queue.shift();n&&this.success[n]||this.getSession(o,this.skuToken,u=>{u?this.errorCb(u):n&&(this.success[n]=!0)},i)}},on=Zr.getSessionAPI.bind(Zr),tn=new Set,Sn={create:"create",load:"load",fullLoad:"fullLoad"},Tr={mark(i){w.performance.mark(i)},measure(i,n,o){w.performance.measure(i,n,o)}};function ri(i){const n=i.name.split("?")[0];return De(n)&&n.includes("mapbox-gl.js")?"javascript":De(n)&&n.includes("mapbox-gl.css")?"css":function(o){return A.API_FONTS_REGEX.test(o)}(n)?"fontRange":Le(n)?"sprite":we(n)?"style":function(o){return A.API_TILEJSON_REGEX.test(o)}(n)?"tilejson":"other"}const En=w.performance;function Ni(i){const n=i?i.url.toString():void 0;return En.getEntriesByName(n)}let xo,Po,no,Hr;const ji={now:()=>no!==void 0?no:w.performance.now(),setNow(i){no=i},restoreNow(){no=void 0},frame(i){const n=w.requestAnimationFrame(i);return{cancel:()=>w.cancelAnimationFrame(n)}},getImageData(i,n=0){const{width:o,height:u}=i;Hr||(Hr=w.document.createElement("canvas"));const h=Hr.getContext("2d",{willReadFrequently:!0});if(!h)throw new Error("failed to create canvas 2d context");return(o>Hr.width||u>Hr.height)&&(Hr.width=o,Hr.height=u),h.clearRect(-n,-n,o+2*n,u+2*n),h.drawImage(i,0,0,o,u),h.getImageData(-n,-n,o+2*n,u+2*n)},resolveURL:i=>(xo||(xo=w.document.createElement("a")),xo.href=i,xo.href),get devicePixelRatio(){return w.devicePixelRatio},get prefersReducedMotion(){return!!w.matchMedia&&(Po==null&&(Po=w.matchMedia("(prefers-reduced-motion: reduce)")),Po.matches)}};function pa(i,n,o){o[i]&&o[i].indexOf(n)!==-1||(o[i]=o[i]||[],o[i].push(n))}function ro(i,n,o){if(o&&o[i]){const u=o[i].indexOf(n);u!==-1&&o[i].splice(u,1)}}class io{constructor(n,o={}){yt(this,o),this.type=n}}class _i extends io{constructor(n,o={}){super("error",yt({error:n},o))}}class Oi{on(n,o){return this._listeners=this._listeners||{},pa(n,o,this._listeners),this}off(n,o){return ro(n,o,this._listeners),ro(n,o,this._oneTimeListeners),this}once(n,o){return o?(this._oneTimeListeners=this._oneTimeListeners||{},pa(n,o,this._oneTimeListeners),this):new Promise(u=>this.once(n,u))}fire(n,o){typeof n=="string"&&(n=new io(n,o||{}));const u=n.type;if(this.listens(u)){n.target=this;const h=this._listeners&&this._listeners[u]?this._listeners[u].slice():[];for(const x of h)x.call(this,n);const m=this._oneTimeListeners&&this._oneTimeListeners[u]?this._oneTimeListeners[u].slice():[];for(const x of m)ro(u,x,this._oneTimeListeners),x.call(this,n);const v=this._eventedParent;v&&(yt(n,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),v.fire(n))}else n instanceof _i&&console.error(n.error);return this}listens(n){return!!(this._listeners&&this._listeners[n]&&this._listeners[n].length>0||this._oneTimeListeners&&this._oneTimeListeners[n]&&this._oneTimeListeners[n].length>0||this._eventedParent&&this._eventedParent.listens(n))}setEventedParent(n,o){return this._eventedParent=n,this._eventedParentData=o,this}}var tt=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{},"globe":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["source"]}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["fill-extrusion-edge-radius"]},"fill-extrusion-rounded-roof":{"type":"boolean","default":true,"requires":["fill-extrusion-edge-radius"],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":false,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"transition":false,"requires":[{"source":"geojson","has":{"lineMetrics":true}}],"property-type":"constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function Si(i,...n){for(const o of n)for(const u in o)i[u]=o[u];return i}function gr(i){return i instanceof Number||i instanceof String||i instanceof Boolean?i.valueOf():i}function pr(i){if(Array.isArray(i))return i.map(pr);if(i instanceof Object&&!(i instanceof Number||i instanceof String||i instanceof Boolean)){const n={};for(const o in i)n[o]=pr(i[o]);return n}return gr(i)}class Wo extends Error{constructor(n,o){super(o),this.message=o,this.key=n}}var Tn=Wo;class Pn{constructor(n,o=[]){this.parent=n,this.bindings={};for(const[u,h]of o)this.bindings[u]=h}concat(n){return new Pn(this,n)}get(n){if(this.bindings[n])return this.bindings[n];if(this.parent)return this.parent.get(n);throw new Error(`${n} not found in scope.`)}has(n){return!!this.bindings[n]||!!this.parent&&this.parent.has(n)}}var Xr=Pn;const Gr={kind:"null"},Tt={kind:"number"},xn={kind:"string"},bn={kind:"boolean"},Qr={kind:"color"},Kr={kind:"object"},In={kind:"value"},Br={kind:"collator"},Ao={kind:"formatted"},Ro={kind:"resolvedImage"};function Ui(i,n){return{kind:"array",itemType:i,N:n}}function Xn(i){if(i.kind==="array"){const n=Xn(i.itemType);return typeof i.N=="number"?`array<${n}, ${i.N}>`:i.itemType.kind==="value"?"array":`array<${n}>`}return i.kind}const Ns=[Gr,Tt,xn,bn,Qr,Ao,Kr,Ui(In),Ro];function xi(i,n){if(n.kind==="error")return null;if(i.kind==="array"){if(n.kind==="array"&&(n.N===0&&n.itemType.kind==="value"||!xi(i.itemType,n.itemType))&&(typeof i.N!="number"||i.N===n.N))return null}else{if(i.kind===n.kind)return null;if(i.kind==="value"){for(const o of Ns)if(!xi(o,n))return null}}return`Expected ${Xn(i)} but found ${Xn(n)} instead.`}function bo(i,n){return n.some(o=>o.kind===i.kind)}function Oo(i,n){return n.some(o=>o==="null"?i===null:o==="array"?Array.isArray(i):o==="object"?i&&!Array.isArray(i)&&typeof i=="object":o===typeof i)}var ma,vs={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function qo(i){return(i=Math.round(i))<0?0:i>255?255:i}function ga(i){return qo(i[i.length-1]==="%"?parseFloat(i)/100*255:parseInt(i))}function ys(i){return(n=i[i.length-1]==="%"?parseFloat(i)/100:parseFloat(i))<0?0:n>1?1:n;var n}function va(i,n,o){return o<0?o+=1:o>1&&(o-=1),6*o<1?i+(n-i)*o*6:2*o<1?n:3*o<2?i+(n-i)*(2/3-o)*6:i}try{ma={}.parseCSSColor=function(i){var n,o=i.replace(/ /g,"").toLowerCase();if(o in vs)return vs[o].slice();if(o[0]==="#")return o.length===4?(n=parseInt(o.substr(1),16))>=0&&n<=4095?[(3840&n)>>4|(3840&n)>>8,240&n|(240&n)>>4,15&n|(15&n)<<4,1]:null:o.length===7&&(n=parseInt(o.substr(1),16))>=0&&n<=16777215?[(16711680&n)>>16,(65280&n)>>8,255&n,1]:null;var u=o.indexOf("("),h=o.indexOf(")");if(u!==-1&&h+1===o.length){var m=o.substr(0,u),v=o.substr(u+1,h-(u+1)).split(","),x=1;switch(m){case"rgba":if(v.length!==4)return null;x=ys(v.pop());case"rgb":return v.length!==3?null:[ga(v[0]),ga(v[1]),ga(v[2]),x];case"hsla":if(v.length!==4)return null;x=ys(v.pop());case"hsl":if(v.length!==3)return null;var S=(parseFloat(v[0])%360+360)%360/360,E=ys(v[1]),R=ys(v[2]),z=R<=.5?R*(E+1):R+E-R*E,L=2*R-z;return[qo(255*va(L,z,S+1/3)),qo(255*va(L,z,S)),qo(255*va(L,z,S-1/3)),x];default:return null}}return null}}catch{}class Ei{constructor(n,o,u,h=1){this.r=n,this.g=o,this.b=u,this.a=h}static parse(n){if(!n)return;if(n instanceof Ei)return n;if(typeof n!="string")return;const o=ma(n);return o?new Ei(o[0]/255*o[3],o[1]/255*o[3],o[2]/255*o[3],o[3]):void 0}toString(){const[n,o,u,h]=this.toArray();return`rgba(${Math.round(n)},${Math.round(o)},${Math.round(u)},${h})`}toArray(){const{r:n,g:o,b:u,a:h}=this;return h===0?[0,0,0,0]:[255*n/h,255*o/h,255*u/h,h]}toArray01(){const{r:n,g:o,b:u,a:h}=this;return h===0?[0,0,0,0]:[n/h,o/h,u/h,h]}toArray01PremultipliedAlpha(){const{r:n,g:o,b:u,a:h}=this;return[n,o,u,h]}}Ei.black=new Ei(0,0,0,1),Ei.white=new Ei(1,1,1,1),Ei.transparent=new Ei(0,0,0,0),Ei.red=new Ei(1,0,0,1),Ei.blue=new Ei(0,0,1,1);var Nr=Ei;class hn{constructor(n,o,u){this.sensitivity=n?o?"variant":"case":o?"accent":"base",this.locale=u,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(n,o){return this.collator.compare(n,o)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class $n{constructor(n,o,u,h,m){this.text=n.normalize?n.normalize():n,this.image=o,this.scale=u,this.fontStack=h,this.textColor=m}}class Yn{constructor(n){this.sections=n}static fromString(n){return new Yn([new $n(n,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(n=>n.text.length!==0||n.image&&n.image.name.length!==0)}static factory(n){return n instanceof Yn?n:Yn.fromString(n)}toString(){return this.sections.length===0?"":this.sections.map(n=>n.text).join("")}serialize(){const n=["format"];for(const o of this.sections){if(o.image){n.push(["image",o.image.name]);continue}n.push(o.text);const u={};o.fontStack&&(u["text-font"]=["literal",o.fontStack.split(",")]),o.scale&&(u["font-scale"]=o.scale),o.textColor&&(u["text-color"]=["rgba"].concat(o.textColor.toArray())),n.push(u)}return n}}class dr{constructor(n){this.name=n.name,this.available=n.available}toString(){return this.name}static fromString(n){return n?new dr({name:n,available:!1}):null}serialize(){return["image",this.name]}}function Wr(i,n,o,u){return typeof i=="number"&&i>=0&&i<=255&&typeof n=="number"&&n>=0&&n<=255&&typeof o=="number"&&o>=0&&o<=255?u===void 0||typeof u=="number"&&u>=0&&u<=1?null:`Invalid rgba value [${[i,n,o,u].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof u=="number"?[i,n,o,u]:[i,n,o]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function ya(i){if(i===null||typeof i=="string"||typeof i=="boolean"||typeof i=="number"||i instanceof Nr||i instanceof hn||i instanceof Yn||i instanceof dr)return!0;if(Array.isArray(i)){for(const n of i)if(!ya(n))return!1;return!0}if(typeof i=="object"){for(const n in i)if(!ya(i[n]))return!1;return!0}return!1}function zr(i){if(i===null)return Gr;if(typeof i=="string")return xn;if(typeof i=="boolean")return bn;if(typeof i=="number")return Tt;if(i instanceof Nr)return Qr;if(i instanceof hn)return Br;if(i instanceof Yn)return Ao;if(i instanceof dr)return Ro;if(Array.isArray(i)){const n=i.length;let o;for(const u of i){const h=zr(u);if(o){if(o===h)continue;o=In;break}o=h}return Ui(o||In,n)}return Kr}function _s(i){const n=typeof i;return i===null?"":n==="string"||n==="number"||n==="boolean"?String(i):i instanceof Nr||i instanceof Yn||i instanceof dr?i.toString():JSON.stringify(i)}class xs{constructor(n,o){this.type=n,this.value=o}static parse(n,o){if(n.length!==2)return o.error(`'literal' expression requires exactly one argument, but found ${n.length-1} instead.`);if(!ya(n[1]))return o.error("invalid value");const u=n[1];let h=zr(u);const m=o.expectedType;return h.kind!=="array"||h.N!==0||!m||m.kind!=="array"||typeof m.N=="number"&&m.N!==0||(h=m),new xs(h,u)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Nr?["rgba"].concat(this.value.toArray()):this.value instanceof Yn?this.value.serialize():this.value}}var js=xs,zi=class{constructor(i){this.name="ExpressionEvaluationError",this.message=i}toJSON(){return this.message}};const zh={string:xn,number:Tt,boolean:bn,object:Kr};class Dh{constructor(n,o){this.type=n,this.args=o}static parse(n,o){if(n.length<2)return o.error("Expected at least one argument.");let u,h=1;const m=n[0];if(m==="array"){let x,S;if(n.length>2){const E=n[1];if(typeof E!="string"||!(E in zh)||E==="object")return o.error('The item type argument of "array" must be one of string, number, boolean',1);x=zh[E],h++}else x=In;if(n.length>3){if(n[2]!==null&&(typeof n[2]!="number"||n[2]<0||n[2]!==Math.floor(n[2])))return o.error('The length argument to "array" must be a positive integer literal',2);S=n[2],h++}u=Ui(x,S)}else u=zh[m];const v=[];for(;h<n.length;h++){const x=o.parse(n[h],h,In);if(!x)return null;v.push(x)}return new Dh(u,v)}evaluate(n){for(let o=0;o<this.args.length;o++){const u=this.args[o].evaluate(n);if(!xi(this.type,zr(u)))return u;if(o===this.args.length-1)throw new zi(`Expected value to be of type ${Xn(this.type)}, but found ${Xn(zr(u))} instead.`)}return null}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}serialize(){const n=this.type,o=[n.kind];if(n.kind==="array"){const u=n.itemType;if(u.kind==="string"||u.kind==="number"||u.kind==="boolean"){o.push(u.kind);const h=n.N;(typeof h=="number"||this.args.length>1)&&o.push(h)}}return o.concat(this.args.map(u=>u.serialize()))}}var Na=Dh;class bs{constructor(n){this.type=Ao,this.sections=n}static parse(n,o){if(n.length<2)return o.error("Expected at least one argument.");const u=n[1];if(!Array.isArray(u)&&typeof u=="object")return o.error("First argument must be an image or text section.");const h=[];let m=!1;for(let v=1;v<=n.length-1;++v){const x=n[v];if(m&&typeof x=="object"&&!Array.isArray(x)){m=!1;let S=null;if(x["font-scale"]&&(S=o.parse(x["font-scale"],1,Tt),!S))return null;let E=null;if(x["text-font"]&&(E=o.parse(x["text-font"],1,Ui(xn)),!E))return null;let R=null;if(x["text-color"]&&(R=o.parse(x["text-color"],1,Qr),!R))return null;const z=h[h.length-1];z.scale=S,z.font=E,z.textColor=R}else{const S=o.parse(n[v],1,In);if(!S)return null;const E=S.type.kind;if(E!=="string"&&E!=="value"&&E!=="null"&&E!=="resolvedImage")return o.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");m=!0,h.push({content:S,scale:null,font:null,textColor:null})}}return new bs(h)}evaluate(n){return new Yn(this.sections.map(o=>{const u=o.content.evaluate(n);return zr(u)===Ro?new $n("",u,null,null,null):new $n(_s(u),null,o.scale?o.scale.evaluate(n):null,o.font?o.font.evaluate(n).join(","):null,o.textColor?o.textColor.evaluate(n):null)}))}eachChild(n){for(const o of this.sections)n(o.content),o.scale&&n(o.scale),o.font&&n(o.font),o.textColor&&n(o.textColor)}outputDefined(){return!1}serialize(){const n=["format"];for(const o of this.sections){n.push(o.content.serialize());const u={};o.scale&&(u["font-scale"]=o.scale.serialize()),o.font&&(u["text-font"]=o.font.serialize()),o.textColor&&(u["text-color"]=o.textColor.serialize()),n.push(u)}return n}}class Au{constructor(n){this.type=Ro,this.input=n}static parse(n,o){if(n.length!==2)return o.error("Expected two arguments.");const u=o.parse(n[1],1,xn);return u?new Au(u):o.error("No image name provided.")}evaluate(n){const o=this.input.evaluate(n),u=dr.fromString(o);return u&&n.availableImages&&(u.available=n.availableImages.indexOf(o)>-1),u}eachChild(n){n(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const H0={"to-boolean":bn,"to-color":Qr,"to-number":Tt,"to-string":xn};class Lh{constructor(n,o){this.type=n,this.args=o}static parse(n,o){if(n.length<2)return o.error("Expected at least one argument.");const u=n[0];if((u==="to-boolean"||u==="to-string")&&n.length!==2)return o.error("Expected one argument.");const h=H0[u],m=[];for(let v=1;v<n.length;v++){const x=o.parse(n[v],v,In);if(!x)return null;m.push(x)}return new Lh(h,m)}evaluate(n){if(this.type.kind==="boolean")return!!this.args[0].evaluate(n);if(this.type.kind==="color"){let o,u;for(const h of this.args){if(o=h.evaluate(n),u=null,o instanceof Nr)return o;if(typeof o=="string"){const m=n.parseColor(o);if(m)return m}else if(Array.isArray(o)&&(u=o.length<3||o.length>4?`Invalid rbga value ${JSON.stringify(o)}: expected an array containing either three or four numeric values.`:Wr(o[0],o[1],o[2],o[3]),!u))return new Nr(o[0]/255,o[1]/255,o[2]/255,o[3])}throw new zi(u||`Could not parse color from value '${typeof o=="string"?o:String(JSON.stringify(o))}'`)}if(this.type.kind==="number"){let o=null;for(const u of this.args){if(o=u.evaluate(n),o===null)return 0;const h=Number(o);if(!isNaN(h))return h}throw new zi(`Could not convert ${JSON.stringify(o)} to number.`)}return this.type.kind==="formatted"?Yn.fromString(_s(this.args[0].evaluate(n))):this.type.kind==="resolvedImage"?dr.fromString(_s(this.args[0].evaluate(n))):_s(this.args[0].evaluate(n))}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}serialize(){if(this.type.kind==="formatted")return new bs([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Au(this.args[0]).serialize();const n=[`to-${this.type.kind}`];return this.eachChild(o=>{n.push(o.serialize())}),n}}var wl=Lh;const _a=["Unknown","Point","LineString","Polygon"];var kh=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?_a[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const i=this.featureDistanceData.center,n=this.featureDistanceData.scale,{x:o,y:u}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(o*n-i[0])+this.featureDistanceData.bearing[1]*(u*n-i[1])}return 0}parseColor(i){let n=this._parseColorCache[i];return n||(n=this._parseColorCache[i]=Nr.parse(i)),n}};class Us{constructor(n,o,u,h){this.name=n,this.type=o,this._evaluate=u,this.args=h}evaluate(n){return this._evaluate(n,this.args)}eachChild(n){this.args.forEach(n)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(n=>n.serialize()))}static parse(n,o){const u=n[0],h=Us.definitions[u];if(!h)return o.error(`Unknown expression "${u}". If you wanted a literal array, use ["literal", [...]].`,0);const m=Array.isArray(h)?h[0]:h.type,v=Array.isArray(h)?[[h[1],h[2]]]:h.overloads,x=v.filter(([E])=>!Array.isArray(E)||E.length===n.length-1);let S=null;for(const[E,R]of x){S=new Uh(o.registry,o.path,null,o.scope);const z=[];let L=!1;for(let V=1;V<n.length;V++){const G=n[V],K=Array.isArray(E)?E[V-1]:E.type,ae=S.parse(G,1+z.length,K);if(!ae){L=!0;break}z.push(ae)}if(!L)if(Array.isArray(E)&&E.length!==z.length)S.error(`Expected ${E.length} arguments, but found ${z.length} instead.`);else{for(let V=0;V<z.length;V++){const G=Array.isArray(E)?E[V]:E.type,K=z[V];S.concat(V+1).checkSubtype(G,K.type)}if(S.errors.length===0)return new Us(u,m,R,z)}}if(x.length===1)o.errors.push(...S.errors);else{const E=(x.length?x:v).map(([z])=>{return L=z,Array.isArray(L)?`(${L.map(Xn).join(", ")})`:`(${Xn(L.type)}...)`;var L}).join(" | "),R=[];for(let z=1;z<n.length;z++){const L=o.parse(n[z],1+R.length);if(!L)return null;R.push(Xn(L.type))}o.error(`Expected arguments of type ${E}, but found (${R.join(", ")}) instead.`)}return null}static register(n,o){Us.definitions=o;for(const u in o)n[u]=Us}}var ja=Us;class Ec{constructor(n,o,u){this.type=Br,this.locale=u,this.caseSensitive=n,this.diacriticSensitive=o}static parse(n,o){if(n.length!==2)return o.error("Expected one argument.");const u=n[1];if(typeof u!="object"||Array.isArray(u))return o.error("Collator options argument must be an object.");const h=o.parse(u["case-sensitive"]!==void 0&&u["case-sensitive"],1,bn);if(!h)return null;const m=o.parse(u["diacritic-sensitive"]!==void 0&&u["diacritic-sensitive"],1,bn);if(!m)return null;let v=null;return u.locale&&(v=o.parse(u.locale,1,xn),!v)?null:new Ec(h,m,v)}evaluate(n){return new hn(this.caseSensitive.evaluate(n),this.diacriticSensitive.evaluate(n),this.locale?this.locale.evaluate(n):null)}eachChild(n){n(this.caseSensitive),n(this.diacriticSensitive),this.locale&&n(this.locale)}outputDefined(){return!1}serialize(){const n={};return n["case-sensitive"]=this.caseSensitive.serialize(),n["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(n.locale=this.locale.serialize()),["collator",n]}}const Ua=8192;function Ru(i,n){i[0]=Math.min(i[0],n[0]),i[1]=Math.min(i[1],n[1]),i[2]=Math.max(i[2],n[0]),i[3]=Math.max(i[3],n[1])}function Sl(i,n){return!(i[0]<=n[0]||i[2]>=n[2]||i[1]<=n[1]||i[3]>=n[3])}function Cc(i,n){const o=(180+i[0])/360,u=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+i[1]*Math.PI/360)))/360,h=Math.pow(2,n.z);return[Math.round(o*h*Ua),Math.round(u*h*Ua)]}function Om(i,n,o){const u=i[0]-n[0],h=i[1]-n[1],m=i[0]-o[0],v=i[1]-o[1];return u*v-m*h==0&&u*m<=0&&h*v<=0}function Ou(i,n){let o=!1;for(let v=0,x=n.length;v<x;v++){const S=n[v];for(let E=0,R=S.length;E<R-1;E++){if(Om(i,S[E],S[E+1]))return!1;(h=S[E])[1]>(u=i)[1]!=(m=S[E+1])[1]>u[1]&&u[0]<(m[0]-h[0])*(u[1]-h[1])/(m[1]-h[1])+h[0]&&(o=!o)}}var u,h,m;return o}function $h(i,n){for(let o=0;o<n.length;o++)if(Ou(i,n[o]))return!0;return!1}function Fh(i,n,o,u){const h=u[0]-o[0],m=u[1]-o[1],v=(i[0]-o[0])*m-h*(i[1]-o[1]),x=(n[0]-o[0])*m-h*(n[1]-o[1]);return v>0&&x<0||v<0&&x>0}function El(i,n,o){for(const E of o)for(let R=0;R<E.length-1;++R)if((x=[(v=E[R+1])[0]-(m=E[R])[0],v[1]-m[1]])[0]*(S=[(h=n)[0]-(u=i)[0],h[1]-u[1]])[1]-x[1]*S[0]!=0&&Fh(u,h,m,v)&&Fh(m,v,u,h))return!0;var u,h,m,v,x,S;return!1}function ar(i,n){for(let o=0;o<i.length;++o)if(!Ou(i[o],n))return!1;for(let o=0;o<i.length-1;++o)if(El(i[o],i[o+1],n))return!1;return!0}function G0(i,n){for(let o=0;o<n.length;o++)if(ar(i,n[o]))return!0;return!1}function Bh(i,n,o){const u=[];for(let h=0;h<i.length;h++){const m=[];for(let v=0;v<i[h].length;v++){const x=Cc(i[h][v],o);Ru(n,x),m.push(x)}u.push(m)}return u}function zm(i,n,o){const u=[];for(let h=0;h<i.length;h++){const m=Bh(i[h],n,o);u.push(m)}return u}function Nh(i,n,o,u){if(i[0]<o[0]||i[0]>o[2]){const h=.5*u;let m=i[0]-o[0]>h?-u:o[0]-i[0]>h?u:0;m===0&&(m=i[0]-o[2]>h?-u:o[2]-i[0]>h?u:0),i[0]+=m}Ru(n,i)}function Dm(i,n,o,u){const h=Math.pow(2,u.z)*Ua,m=[u.x*Ua,u.y*Ua],v=[];if(!i)return v;for(const x of i)for(const S of x){const E=[S.x+m[0],S.y+m[1]];Nh(E,n,o,h),v.push(E)}return v}function jh(i,n,o,u){const h=Math.pow(2,u.z)*Ua,m=[u.x*Ua,u.y*Ua],v=[];if(!i)return v;for(const S of i){const E=[];for(const R of S){const z=[R.x+m[0],R.y+m[1]];Ru(n,z),E.push(z)}v.push(E)}if(n[2]-n[0]<=h/2){(x=n)[0]=x[1]=1/0,x[2]=x[3]=-1/0;for(const S of v)for(const E of S)Nh(E,n,o,h)}var x;return v}class Cl{constructor(n,o){this.type=bn,this.geojson=n,this.geometries=o}static parse(n,o){if(n.length!==2)return o.error(`'within' expression requires exactly one argument, but found ${n.length-1} instead.`);if(ya(n[1])){const u=n[1];if(u.type==="FeatureCollection")for(let h=0;h<u.features.length;++h){const m=u.features[h].geometry.type;if(m==="Polygon"||m==="MultiPolygon")return new Cl(u,u.features[h].geometry)}else if(u.type==="Feature"){const h=u.geometry.type;if(h==="Polygon"||h==="MultiPolygon")return new Cl(u,u.geometry)}else if(u.type==="Polygon"||u.type==="MultiPolygon")return new Cl(u,u)}return o.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return function(o,u){const h=[1/0,1/0,-1/0,-1/0],m=[1/0,1/0,-1/0,-1/0],v=o.canonicalID();if(!v)return!1;if(u.type==="Polygon"){const x=Bh(u.coordinates,m,v),S=Dm(o.geometry(),h,m,v);if(!Sl(h,m))return!1;for(const E of S)if(!Ou(E,x))return!1}if(u.type==="MultiPolygon"){const x=zm(u.coordinates,m,v),S=Dm(o.geometry(),h,m,v);if(!Sl(h,m))return!1;for(const E of S)if(!$h(E,x))return!1}return!0}(n,this.geometries);if(n.geometryType()==="LineString")return function(o,u){const h=[1/0,1/0,-1/0,-1/0],m=[1/0,1/0,-1/0,-1/0],v=o.canonicalID();if(!v)return!1;if(u.type==="Polygon"){const x=Bh(u.coordinates,m,v),S=jh(o.geometry(),h,m,v);if(!Sl(h,m))return!1;for(const E of S)if(!ar(E,x))return!1}if(u.type==="MultiPolygon"){const x=zm(u.coordinates,m,v),S=jh(o.geometry(),h,m,v);if(!Sl(h,m))return!1;for(const E of S)if(!G0(E,x))return!1}return!0}(n,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var zu=Cl;function Tl(i){if(i instanceof ja&&(i.name==="get"&&i.args.length===1||i.name==="feature-state"||i.name==="has"&&i.args.length===1||i.name==="properties"||i.name==="geometry-type"||i.name==="id"||/^filter-/.test(i.name))||i instanceof zu)return!1;let n=!0;return i.eachChild(o=>{n&&!Tl(o)&&(n=!1)}),n}function Va(i){if(i instanceof ja&&i.name==="feature-state")return!1;let n=!0;return i.eachChild(o=>{n&&!Va(o)&&(n=!1)}),n}function Vs(i,n){if(i instanceof ja&&n.indexOf(i.name)>=0)return!1;let o=!0;return i.eachChild(u=>{o&&!Vs(u,n)&&(o=!1)}),o}class Du{constructor(n,o){this.type=o.type,this.name=n,this.boundExpression=o}static parse(n,o){if(n.length!==2||typeof n[1]!="string")return o.error("'var' expression requires exactly one string literal argument.");const u=n[1];return o.scope.has(u)?new Du(u,o.scope.get(u)):o.error(`Unknown variable "${u}". Make sure "${u}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(n){return this.boundExpression.evaluate(n)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var Lm=Du;class Tc{constructor(n,o=[],u,h=new Xr,m=[]){this.registry=n,this.path=o,this.key=o.map(v=>`[${v}]`).join(""),this.scope=h,this.errors=m,this.expectedType=u}parse(n,o,u,h,m={}){return o?this.concat(o,u,h)._parse(n,m):this._parse(n,m)}_parse(n,o){function u(h,m,v){return v==="assert"?new Na(m,[h]):v==="coerce"?new wl(m,[h]):h}if(n!==null&&typeof n!="string"&&typeof n!="boolean"&&typeof n!="number"||(n=["literal",n]),Array.isArray(n)){if(n.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const h=n[0];if(typeof h!="string")return this.error(`Expression name must be a string, but found ${typeof h} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const m=this.registry[h];if(m){let v=m.parse(n,this);if(!v)return null;if(this.expectedType){const x=this.expectedType,S=v.type;if(x.kind!=="string"&&x.kind!=="number"&&x.kind!=="boolean"&&x.kind!=="object"&&x.kind!=="array"||S.kind!=="value")if(x.kind!=="color"&&x.kind!=="formatted"&&x.kind!=="resolvedImage"||S.kind!=="value"&&S.kind!=="string"){if(this.checkSubtype(x,S))return null}else v=u(v,x,o.typeAnnotation||"coerce");else v=u(v,x,o.typeAnnotation||"assert")}if(!(v instanceof js)&&v.type.kind!=="resolvedImage"&&Vh(v)){const x=new kh;try{v=new js(v.type,v.evaluate(x))}catch(S){return this.error(S.message),null}}return v}return this.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(n===void 0?"'undefined' value invalid. Use null instead.":typeof n=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof n} instead.`)}concat(n,o,u){const h=typeof n=="number"?this.path.concat(n):this.path,m=u?this.scope.concat(u):this.scope;return new Tc(this.registry,h,o||null,m,this.errors)}error(n,...o){const u=`${this.key}${o.map(h=>`[${h}]`).join("")}`;this.errors.push(new Tn(u,n))}checkSubtype(n,o){const u=xi(n,o);return u&&this.error(u),u}}var Uh=Tc;function Vh(i){if(i instanceof Lm)return Vh(i.boundExpression);if(i instanceof ja&&i.name==="error"||i instanceof Ec||i instanceof zu)return!1;const n=i instanceof wl||i instanceof Na;let o=!0;return i.eachChild(u=>{o=n?o&&Vh(u):o&&u instanceof js}),!!o&&Tl(i)&&Vs(i,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function Lu(i,n){const o=i.length-1;let u,h,m=0,v=o,x=0;for(;m<=v;)if(x=Math.floor((m+v)/2),u=i[x],h=i[x+1],u<=n){if(x===o||n<h)return x;m=x+1}else{if(!(u>n))throw new zi("Input is not a number.");v=x-1}return 0}class ku{constructor(n,o,u){this.type=n,this.input=o,this.labels=[],this.outputs=[];for(const[h,m]of u)this.labels.push(h),this.outputs.push(m)}static parse(n,o){if(n.length-1<4)return o.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return o.error("Expected an even number of arguments.");const u=o.parse(n[1],1,Tt);if(!u)return null;const h=[];let m=null;o.expectedType&&o.expectedType.kind!=="value"&&(m=o.expectedType);for(let v=1;v<n.length;v+=2){const x=v===1?-1/0:n[v],S=n[v+1],E=v,R=v+1;if(typeof x!="number")return o.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',E);if(h.length&&h[h.length-1][0]>=x)return o.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',E);const z=o.parse(S,R,m);if(!z)return null;m=m||z.type,h.push([x,z])}return new ku(m,u,h)}evaluate(n){const o=this.labels,u=this.outputs;if(o.length===1)return u[0].evaluate(n);const h=this.input.evaluate(n);if(h<=o[0])return u[0].evaluate(n);const m=o.length;return h>=o[m-1]?u[m-1].evaluate(n):u[Lu(o,h)].evaluate(n)}eachChild(n){n(this.input);for(const o of this.outputs)n(o)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}serialize(){const n=["step",this.input.serialize()];for(let o=0;o<this.labels.length;o++)o>0&&n.push(this.labels[o]),n.push(this.outputs[o].serialize());return n}}var Hh=ku;function Jn(i,n,o){return i*(1-o)+n*o}var Ic=Object.freeze({__proto__:null,array:function(i,n,o){return i.map((u,h)=>Jn(u,n[h],o))},color:function(i,n,o){return new Nr(Jn(i.r,n.r,o),Jn(i.g,n.g,o),Jn(i.b,n.b,o),Jn(i.a,n.a,o))},number:Jn});const km=.95047,Gh=1.08883,$m=4/29,Hs=6/29,Wh=3*Hs*Hs,W0=Hs*Hs*Hs,q0=Math.PI/180,Z0=180/Math.PI;function qh(i){return i>W0?Math.pow(i,1/3):i/Wh+$m}function Zh(i){return i>Hs?i*i*i:Wh*(i-$m)}function Xh(i){return 255*(i<=.0031308?12.92*i:1.055*Math.pow(i,1/2.4)-.055)}function $u(i){return(i/=255)<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4)}function Fm(i){const n=$u(i.r),o=$u(i.g),u=$u(i.b),h=qh((.4124564*n+.3575761*o+.1804375*u)/km),m=qh((.2126729*n+.7151522*o+.072175*u)/1);return{l:116*m-16,a:500*(h-m),b:200*(m-qh((.0193339*n+.119192*o+.9503041*u)/Gh)),alpha:i.a}}function Bm(i){let n=(i.l+16)/116,o=isNaN(i.a)?n:n+i.a/500,u=isNaN(i.b)?n:n-i.b/200;return n=1*Zh(n),o=km*Zh(o),u=Gh*Zh(u),new Nr(Xh(3.2404542*o-1.5371385*n-.4985314*u),Xh(-.969266*o+1.8760108*n+.041556*u),Xh(.0556434*o-.2040259*n+1.0572252*u),i.alpha)}function X0(i,n,o){const u=n-i;return i+o*(u>180||u<-180?u-360*Math.round(u/360):u)}const Mc={forward:Fm,reverse:Bm,interpolate:function(i,n,o){return{l:Jn(i.l,n.l,o),a:Jn(i.a,n.a,o),b:Jn(i.b,n.b,o),alpha:Jn(i.alpha,n.alpha,o)}}},Il={forward:function(i){const{l:n,a:o,b:u}=Fm(i),h=Math.atan2(u,o)*Z0;return{h:h<0?h+360:h,c:Math.sqrt(o*o+u*u),l:n,alpha:i.a}},reverse:function(i){const n=i.h*q0,o=i.c;return Bm({l:i.l,a:Math.cos(n)*o,b:Math.sin(n)*o,alpha:i.alpha})},interpolate:function(i,n,o){return{h:X0(i.h,n.h,o),c:Jn(i.c,n.c,o),l:Jn(i.l,n.l,o),alpha:Jn(i.alpha,n.alpha,o)}}};var Kh=Object.freeze({__proto__:null,hcl:Il,lab:Mc});class Pc{constructor(n,o,u,h,m){this.type=n,this.operator=o,this.interpolation=u,this.input=h,this.labels=[],this.outputs=[];for(const[v,x]of m)this.labels.push(v),this.outputs.push(x)}static interpolationFactor(n,o,u,h){let m=0;if(n.name==="exponential")m=Yh(o,n.base,u,h);else if(n.name==="linear")m=Yh(o,1,u,h);else if(n.name==="cubic-bezier"){const v=n.controlPoints;m=new re(v[0],v[1],v[2],v[3]).solve(Yh(o,1,u,h))}return m}static parse(n,o){let[u,h,m,...v]=n;if(!Array.isArray(h)||h.length===0)return o.error("Expected an interpolation type expression.",1);if(h[0]==="linear")h={name:"linear"};else if(h[0]==="exponential"){const E=h[1];if(typeof E!="number")return o.error("Exponential interpolation requires a numeric base.",1,1);h={name:"exponential",base:E}}else{if(h[0]!=="cubic-bezier")return o.error(`Unknown interpolation type ${String(h[0])}`,1,0);{const E=h.slice(1);if(E.length!==4||E.some(R=>typeof R!="number"||R<0||R>1))return o.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);h={name:"cubic-bezier",controlPoints:E}}}if(n.length-1<4)return o.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return o.error("Expected an even number of arguments.");if(m=o.parse(m,2,Tt),!m)return null;const x=[];let S=null;u==="interpolate-hcl"||u==="interpolate-lab"?S=Qr:o.expectedType&&o.expectedType.kind!=="value"&&(S=o.expectedType);for(let E=0;E<v.length;E+=2){const R=v[E],z=v[E+1],L=E+3,V=E+4;if(typeof R!="number")return o.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',L);if(x.length&&x[x.length-1][0]>=R)return o.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',L);const G=o.parse(z,V,S);if(!G)return null;S=S||G.type,x.push([R,G])}return S.kind==="number"||S.kind==="color"||S.kind==="array"&&S.itemType.kind==="number"&&typeof S.N=="number"?new Pc(S,u,h,m,x):o.error(`Type ${Xn(S)} is not interpolatable.`)}evaluate(n){const o=this.labels,u=this.outputs;if(o.length===1)return u[0].evaluate(n);const h=this.input.evaluate(n);if(h<=o[0])return u[0].evaluate(n);const m=o.length;if(h>=o[m-1])return u[m-1].evaluate(n);const v=Lu(o,h),x=Pc.interpolationFactor(this.interpolation,h,o[v],o[v+1]),S=u[v].evaluate(n),E=u[v+1].evaluate(n);return this.operator==="interpolate"?Ic[this.type.kind.toLowerCase()](S,E,x):this.operator==="interpolate-hcl"?Il.reverse(Il.interpolate(Il.forward(S),Il.forward(E),x)):Mc.reverse(Mc.interpolate(Mc.forward(S),Mc.forward(E),x))}eachChild(n){n(this.input);for(const o of this.outputs)n(o)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}serialize(){let n;n=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const o=[this.operator,n,this.input.serialize()];for(let u=0;u<this.labels.length;u++)o.push(this.labels[u],this.outputs[u].serialize());return o}}function Yh(i,n,o,u){const h=u-o,m=i-o;return h===0?0:n===1?m/h:(Math.pow(n,m)-1)/(Math.pow(n,h)-1)}var xa=Pc;class Fu{constructor(n,o){this.type=n,this.args=o}static parse(n,o){if(n.length<2)return o.error("Expectected at least one argument.");let u=null;const h=o.expectedType;h&&h.kind!=="value"&&(u=h);const m=[];for(const x of n.slice(1)){const S=o.parse(x,1+m.length,u,void 0,{typeAnnotation:"omit"});if(!S)return null;u=u||S.type,m.push(S)}const v=h&&m.some(x=>xi(h,x.type));return new Fu(v?In:u,m)}evaluate(n){let o,u=null,h=0;for(const m of this.args){if(h++,u=m.evaluate(n),u&&u instanceof dr&&!u.available&&(o||(o=u),u=null,h===this.args.length))return o;if(u!==null)break}return u}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}serialize(){const n=["coalesce"];return this.eachChild(o=>{n.push(o.serialize())}),n}}var Jh=Fu;class Bu{constructor(n,o){this.type=o.type,this.bindings=[].concat(n),this.result=o}evaluate(n){return this.result.evaluate(n)}eachChild(n){for(const o of this.bindings)n(o[1]);n(this.result)}static parse(n,o){if(n.length<4)return o.error(`Expected at least 3 arguments, but found ${n.length-1} instead.`);const u=[];for(let m=1;m<n.length-1;m+=2){const v=n[m];if(typeof v!="string")return o.error(`Expected string, but found ${typeof v} instead.`,m);if(/[^a-zA-Z0-9_]/.test(v))return o.error("Variable names must contain only alphanumeric characters or '_'.",m);const x=o.parse(n[m+1],m+1);if(!x)return null;u.push([v,x])}const h=o.parse(n[n.length-1],n.length-1,o.expectedType,u);return h?new Bu(u,h):null}outputDefined(){return this.result.outputDefined()}serialize(){const n=["let"];for(const[o,u]of this.bindings)n.push(o,u.serialize());return n.push(this.result.serialize()),n}}var Nm=Bu;class Qh{constructor(n,o,u){this.type=n,this.index=o,this.input=u}static parse(n,o){if(n.length!==3)return o.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const u=o.parse(n[1],1,Tt),h=o.parse(n[2],2,Ui(o.expectedType||In));return u&&h?new Qh(h.type.itemType,u,h):null}evaluate(n){const o=this.index.evaluate(n),u=this.input.evaluate(n);if(o<0)throw new zi(`Array index out of bounds: ${o} < 0.`);if(o>=u.length)throw new zi(`Array index out of bounds: ${o} > ${u.length-1}.`);if(o!==Math.floor(o))throw new zi(`Array index must be an integer, but found ${o} instead.`);return u[o]}eachChild(n){n(this.index),n(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var K0=Qh;class ef{constructor(n,o){this.type=bn,this.needle=n,this.haystack=o}static parse(n,o){if(n.length!==3)return o.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const u=o.parse(n[1],1,In),h=o.parse(n[2],2,In);return u&&h?bo(u.type,[bn,xn,Tt,Gr,In])?new ef(u,h):o.error(`Expected first argument to be of type boolean, string, number or null, but found ${Xn(u.type)} instead`):null}evaluate(n){const o=this.needle.evaluate(n),u=this.haystack.evaluate(n);if(u==null)return!1;if(!Oo(o,["boolean","string","number","null"]))throw new zi(`Expected first argument to be of type boolean, string, number or null, but found ${Xn(zr(o))} instead.`);if(!Oo(u,["string","array"]))throw new zi(`Expected second argument to be of type array or string, but found ${Xn(zr(u))} instead.`);return u.indexOf(o)>=0}eachChild(n){n(this.needle),n(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var Nu=ef;class Ac{constructor(n,o,u){this.type=Tt,this.needle=n,this.haystack=o,this.fromIndex=u}static parse(n,o){if(n.length<=2||n.length>=5)return o.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const u=o.parse(n[1],1,In),h=o.parse(n[2],2,In);if(!u||!h)return null;if(!bo(u.type,[bn,xn,Tt,Gr,In]))return o.error(`Expected first argument to be of type boolean, string, number or null, but found ${Xn(u.type)} instead`);if(n.length===4){const m=o.parse(n[3],3,Tt);return m?new Ac(u,h,m):null}return new Ac(u,h)}evaluate(n){const o=this.needle.evaluate(n),u=this.haystack.evaluate(n);if(!Oo(o,["boolean","string","number","null"]))throw new zi(`Expected first argument to be of type boolean, string, number or null, but found ${Xn(zr(o))} instead.`);if(!Oo(u,["string","array"]))throw new zi(`Expected second argument to be of type array or string, but found ${Xn(zr(u))} instead.`);if(this.fromIndex){const h=this.fromIndex.evaluate(n);return u.indexOf(o,h)}return u.indexOf(o)}eachChild(n){n(this.needle),n(this.haystack),this.fromIndex&&n(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const n=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),n]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var jm=Ac;class tf{constructor(n,o,u,h,m,v){this.inputType=n,this.type=o,this.input=u,this.cases=h,this.outputs=m,this.otherwise=v}static parse(n,o){if(n.length<5)return o.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if(n.length%2!=1)return o.error("Expected an even number of arguments.");let u,h;o.expectedType&&o.expectedType.kind!=="value"&&(h=o.expectedType);const m={},v=[];for(let E=2;E<n.length-1;E+=2){let R=n[E];const z=n[E+1];Array.isArray(R)||(R=[R]);const L=o.concat(E);if(R.length===0)return L.error("Expected at least one branch label.");for(const G of R){if(typeof G!="number"&&typeof G!="string")return L.error("Branch labels must be numbers or strings.");if(typeof G=="number"&&Math.abs(G)>Number.MAX_SAFE_INTEGER)return L.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof G=="number"&&Math.floor(G)!==G)return L.error("Numeric branch labels must be integer values.");if(u){if(L.checkSubtype(u,zr(G)))return null}else u=zr(G);if(m[String(G)]!==void 0)return L.error("Branch labels must be unique.");m[String(G)]=v.length}const V=o.parse(z,E,h);if(!V)return null;h=h||V.type,v.push(V)}const x=o.parse(n[1],1,In);if(!x)return null;const S=o.parse(n[n.length-1],n.length-1,h);return S?x.type.kind!=="value"&&o.concat(1).checkSubtype(u,x.type)?null:new tf(u,h,x,m,v,S):null}evaluate(n){const o=this.input.evaluate(n);return(zr(o)===this.inputType&&this.outputs[this.cases[o]]||this.otherwise).evaluate(n)}eachChild(n){n(this.input),this.outputs.forEach(n),n(this.otherwise)}outputDefined(){return this.outputs.every(n=>n.outputDefined())&&this.otherwise.outputDefined()}serialize(){const n=["match",this.input.serialize()],o=Object.keys(this.cases).sort(),u=[],h={};for(const v of o){const x=h[this.cases[v]];x===void 0?(h[this.cases[v]]=u.length,u.push([this.cases[v],[v]])):u[x][1].push(v)}const m=v=>this.inputType.kind==="number"?Number(v):v;for(const[v,x]of u)n.push(x.length===1?m(x[0]):x.map(m)),n.push(this.outputs[v].serialize());return n.push(this.otherwise.serialize()),n}}var Y0=tf;class nf{constructor(n,o,u){this.type=n,this.branches=o,this.otherwise=u}static parse(n,o){if(n.length<4)return o.error(`Expected at least 3 arguments, but found only ${n.length-1}.`);if(n.length%2!=0)return o.error("Expected an odd number of arguments.");let u;o.expectedType&&o.expectedType.kind!=="value"&&(u=o.expectedType);const h=[];for(let v=1;v<n.length-1;v+=2){const x=o.parse(n[v],v,bn);if(!x)return null;const S=o.parse(n[v+1],v+1,u);if(!S)return null;h.push([x,S]),u=u||S.type}const m=o.parse(n[n.length-1],n.length-1,u);return m?new nf(u,h,m):null}evaluate(n){for(const[o,u]of this.branches)if(o.evaluate(n))return u.evaluate(n);return this.otherwise.evaluate(n)}eachChild(n){for(const[o,u]of this.branches)n(o),n(u);n(this.otherwise)}outputDefined(){return this.branches.every(([n,o])=>o.outputDefined())&&this.otherwise.outputDefined()}serialize(){const n=["case"];return this.eachChild(o=>{n.push(o.serialize())}),n}}var Um=nf;class Rc{constructor(n,o,u,h){this.type=n,this.input=o,this.beginIndex=u,this.endIndex=h}static parse(n,o){if(n.length<=2||n.length>=5)return o.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const u=o.parse(n[1],1,In),h=o.parse(n[2],2,Tt);if(!u||!h)return null;if(!bo(u.type,[Ui(In),xn,In]))return o.error(`Expected first argument to be of type array or string, but found ${Xn(u.type)} instead`);if(n.length===4){const m=o.parse(n[3],3,Tt);return m?new Rc(u.type,u,h,m):null}return new Rc(u.type,u,h)}evaluate(n){const o=this.input.evaluate(n),u=this.beginIndex.evaluate(n);if(!Oo(o,["string","array"]))throw new zi(`Expected first argument to be of type array or string, but found ${Xn(zr(o))} instead.`);if(this.endIndex){const h=this.endIndex.evaluate(n);return o.slice(u,h)}return o.slice(u)}eachChild(n){n(this.input),n(this.beginIndex),this.endIndex&&n(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const n=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),n]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var Vm=Rc;function ju(i,n){return i==="=="||i==="!="?n.kind==="boolean"||n.kind==="string"||n.kind==="number"||n.kind==="null"||n.kind==="value":n.kind==="string"||n.kind==="number"||n.kind==="value"}function Hm(i,n,o,u){return u.compare(n,o)===0}function Ml(i,n,o){const u=i!=="=="&&i!=="!=";return class ND{constructor(m,v,x){this.type=bn,this.lhs=m,this.rhs=v,this.collator=x,this.hasUntypedArgument=m.type.kind==="value"||v.type.kind==="value"}static parse(m,v){if(m.length!==3&&m.length!==4)return v.error("Expected two or three arguments.");const x=m[0];let S=v.parse(m[1],1,In);if(!S)return null;if(!ju(x,S.type))return v.concat(1).error(`"${x}" comparisons are not supported for type '${Xn(S.type)}'.`);let E=v.parse(m[2],2,In);if(!E)return null;if(!ju(x,E.type))return v.concat(2).error(`"${x}" comparisons are not supported for type '${Xn(E.type)}'.`);if(S.type.kind!==E.type.kind&&S.type.kind!=="value"&&E.type.kind!=="value")return v.error(`Cannot compare types '${Xn(S.type)}' and '${Xn(E.type)}'.`);u&&(S.type.kind==="value"&&E.type.kind!=="value"?S=new Na(E.type,[S]):S.type.kind!=="value"&&E.type.kind==="value"&&(E=new Na(S.type,[E])));let R=null;if(m.length===4){if(S.type.kind!=="string"&&E.type.kind!=="string"&&S.type.kind!=="value"&&E.type.kind!=="value")return v.error("Cannot use collator to compare non-string types.");if(R=v.parse(m[3],3,Br),!R)return null}return new ND(S,E,R)}evaluate(m){const v=this.lhs.evaluate(m),x=this.rhs.evaluate(m);if(u&&this.hasUntypedArgument){const S=zr(v),E=zr(x);if(S.kind!==E.kind||S.kind!=="string"&&S.kind!=="number")throw new zi(`Expected arguments for "${i}" to be (string, string) or (number, number), but found (${S.kind}, ${E.kind}) instead.`)}if(this.collator&&!u&&this.hasUntypedArgument){const S=zr(v),E=zr(x);if(S.kind!=="string"||E.kind!=="string")return n(m,v,x)}return this.collator?o(m,v,x,this.collator.evaluate(m)):n(m,v,x)}eachChild(m){m(this.lhs),m(this.rhs),this.collator&&m(this.collator)}outputDefined(){return!0}serialize(){const m=[i];return this.eachChild(v=>{m.push(v.serialize())}),m}}}const J0=Ml("==",function(i,n,o){return n===o},Hm),Q0=Ml("!=",function(i,n,o){return n!==o},function(i,n,o,u){return!Hm(0,n,o,u)}),e_=Ml("<",function(i,n,o){return n<o},function(i,n,o,u){return u.compare(n,o)<0}),t_=Ml(">",function(i,n,o){return n>o},function(i,n,o,u){return u.compare(n,o)>0}),n_=Ml("<=",function(i,n,o){return n<=o},function(i,n,o,u){return u.compare(n,o)<=0}),Gm=Ml(">=",function(i,n,o){return n>=o},function(i,n,o,u){return u.compare(n,o)>=0});class Uu{constructor(n,o,u,h,m,v){this.type=xn,this.number=n,this.locale=o,this.currency=u,this.unit=h,this.minFractionDigits=m,this.maxFractionDigits=v}static parse(n,o){if(n.length!==3)return o.error("Expected two arguments.");const u=o.parse(n[1],1,Tt);if(!u)return null;const h=n[2];if(typeof h!="object"||Array.isArray(h))return o.error("NumberFormat options argument must be an object.");let m=null;if(h.locale&&(m=o.parse(h.locale,1,xn),!m))return null;let v=null;if(h.currency&&(v=o.parse(h.currency,1,xn),!v))return null;let x=null;if(h.unit&&(x=o.parse(h.unit,1,xn),!x))return null;let S=null;if(h["min-fraction-digits"]&&(S=o.parse(h["min-fraction-digits"],1,Tt),!S))return null;let E=null;return h["max-fraction-digits"]&&(E=o.parse(h["max-fraction-digits"],1,Tt),!E)?null:new Uu(u,m,v,x,S,E)}evaluate(n){return new Intl.NumberFormat(this.locale?this.locale.evaluate(n):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(n):void 0,unit:this.unit?this.unit.evaluate(n):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(n):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(n):void 0}).format(this.number.evaluate(n))}eachChild(n){n(this.number),this.locale&&n(this.locale),this.currency&&n(this.currency),this.unit&&n(this.unit),this.minFractionDigits&&n(this.minFractionDigits),this.maxFractionDigits&&n(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const n={};return this.locale&&(n.locale=this.locale.serialize()),this.currency&&(n.currency=this.currency.serialize()),this.unit&&(n.unit=this.unit.serialize()),this.minFractionDigits&&(n["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(n["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),n]}}class Pl{constructor(n){this.type=Tt,this.input=n}static parse(n,o){if(n.length!==2)return o.error(`Expected 1 argument, but found ${n.length-1} instead.`);const u=o.parse(n[1],1);return u?u.type.kind!=="array"&&u.type.kind!=="string"&&u.type.kind!=="value"?o.error(`Expected argument of type string or array, but found ${Xn(u.type)} instead.`):new Pl(u):null}evaluate(n){const o=this.input.evaluate(n);if(typeof o=="string"||Array.isArray(o))return o.length;throw new zi(`Expected value to be of type string or array, but found ${Xn(zr(o))} instead.`)}eachChild(n){n(this.input)}outputDefined(){return!1}serialize(){const n=["length"];return this.eachChild(o=>{n.push(o.serialize())}),n}}const Wm={"==":J0,"!=":Q0,">":t_,"<":e_,">=":Gm,"<=":n_,array:Na,at:K0,boolean:Na,case:Um,coalesce:Jh,collator:Ec,format:bs,image:Au,in:Nu,"index-of":jm,interpolate:xa,"interpolate-hcl":xa,"interpolate-lab":xa,length:Pl,let:Nm,literal:js,match:Y0,number:Na,"number-format":Uu,object:Na,slice:Vm,step:Hh,string:Na,"to-boolean":wl,"to-color":wl,"to-number":wl,"to-string":wl,var:Lm,within:zu};function qm(i,[n,o,u,h]){n=n.evaluate(i),o=o.evaluate(i),u=u.evaluate(i);const m=h?h.evaluate(i):1,v=Wr(n,o,u,m);if(v)throw new zi(v);return new Nr(n/255*m,o/255*m,u/255*m,m)}function Ha(i,n){return i in n}function Vu(i,n){const o=n[i];return o===void 0?null:o}function zo(i){return{type:i}}ja.register(Wm,{error:[{kind:"error"},[xn],(i,[n])=>{throw new zi(n.evaluate(i))}],typeof:[xn,[In],(i,[n])=>Xn(zr(n.evaluate(i)))],"to-rgba":[Ui(Tt,4),[Qr],(i,[n])=>n.evaluate(i).toArray()],rgb:[Qr,[Tt,Tt,Tt],qm],rgba:[Qr,[Tt,Tt,Tt,Tt],qm],has:{type:bn,overloads:[[[xn],(i,[n])=>Ha(n.evaluate(i),i.properties())],[[xn,Kr],(i,[n,o])=>Ha(n.evaluate(i),o.evaluate(i))]]},get:{type:In,overloads:[[[xn],(i,[n])=>Vu(n.evaluate(i),i.properties())],[[xn,Kr],(i,[n,o])=>Vu(n.evaluate(i),o.evaluate(i))]]},"feature-state":[In,[xn],(i,[n])=>Vu(n.evaluate(i),i.featureState||{})],properties:[Kr,[],i=>i.properties()],"geometry-type":[xn,[],i=>i.geometryType()],id:[In,[],i=>i.id()],zoom:[Tt,[],i=>i.globals.zoom],pitch:[Tt,[],i=>i.globals.pitch||0],"distance-from-center":[Tt,[],i=>i.distanceFromCenter()],"heatmap-density":[Tt,[],i=>i.globals.heatmapDensity||0],"line-progress":[Tt,[],i=>i.globals.lineProgress||0],"sky-radial-progress":[Tt,[],i=>i.globals.skyRadialProgress||0],accumulated:[In,[],i=>i.globals.accumulated===void 0?null:i.globals.accumulated],"+":[Tt,zo(Tt),(i,n)=>{let o=0;for(const u of n)o+=u.evaluate(i);return o}],"*":[Tt,zo(Tt),(i,n)=>{let o=1;for(const u of n)o*=u.evaluate(i);return o}],"-":{type:Tt,overloads:[[[Tt,Tt],(i,[n,o])=>n.evaluate(i)-o.evaluate(i)],[[Tt],(i,[n])=>-n.evaluate(i)]]},"/":[Tt,[Tt,Tt],(i,[n,o])=>n.evaluate(i)/o.evaluate(i)],"%":[Tt,[Tt,Tt],(i,[n,o])=>n.evaluate(i)%o.evaluate(i)],ln2:[Tt,[],()=>Math.LN2],pi:[Tt,[],()=>Math.PI],e:[Tt,[],()=>Math.E],"^":[Tt,[Tt,Tt],(i,[n,o])=>Math.pow(n.evaluate(i),o.evaluate(i))],sqrt:[Tt,[Tt],(i,[n])=>Math.sqrt(n.evaluate(i))],log10:[Tt,[Tt],(i,[n])=>Math.log(n.evaluate(i))/Math.LN10],ln:[Tt,[Tt],(i,[n])=>Math.log(n.evaluate(i))],log2:[Tt,[Tt],(i,[n])=>Math.log(n.evaluate(i))/Math.LN2],sin:[Tt,[Tt],(i,[n])=>Math.sin(n.evaluate(i))],cos:[Tt,[Tt],(i,[n])=>Math.cos(n.evaluate(i))],tan:[Tt,[Tt],(i,[n])=>Math.tan(n.evaluate(i))],asin:[Tt,[Tt],(i,[n])=>Math.asin(n.evaluate(i))],acos:[Tt,[Tt],(i,[n])=>Math.acos(n.evaluate(i))],atan:[Tt,[Tt],(i,[n])=>Math.atan(n.evaluate(i))],min:[Tt,zo(Tt),(i,n)=>Math.min(...n.map(o=>o.evaluate(i)))],max:[Tt,zo(Tt),(i,n)=>Math.max(...n.map(o=>o.evaluate(i)))],abs:[Tt,[Tt],(i,[n])=>Math.abs(n.evaluate(i))],round:[Tt,[Tt],(i,[n])=>{const o=n.evaluate(i);return o<0?-Math.round(-o):Math.round(o)}],floor:[Tt,[Tt],(i,[n])=>Math.floor(n.evaluate(i))],ceil:[Tt,[Tt],(i,[n])=>Math.ceil(n.evaluate(i))],"filter-==":[bn,[xn,In],(i,[n,o])=>i.properties()[n.value]===o.value],"filter-id-==":[bn,[In],(i,[n])=>i.id()===n.value],"filter-type-==":[bn,[xn],(i,[n])=>i.geometryType()===n.value],"filter-<":[bn,[xn,In],(i,[n,o])=>{const u=i.properties()[n.value],h=o.value;return typeof u==typeof h&&u<h}],"filter-id-<":[bn,[In],(i,[n])=>{const o=i.id(),u=n.value;return typeof o==typeof u&&o<u}],"filter->":[bn,[xn,In],(i,[n,o])=>{const u=i.properties()[n.value],h=o.value;return typeof u==typeof h&&u>h}],"filter-id->":[bn,[In],(i,[n])=>{const o=i.id(),u=n.value;return typeof o==typeof u&&o>u}],"filter-<=":[bn,[xn,In],(i,[n,o])=>{const u=i.properties()[n.value],h=o.value;return typeof u==typeof h&&u<=h}],"filter-id-<=":[bn,[In],(i,[n])=>{const o=i.id(),u=n.value;return typeof o==typeof u&&o<=u}],"filter->=":[bn,[xn,In],(i,[n,o])=>{const u=i.properties()[n.value],h=o.value;return typeof u==typeof h&&u>=h}],"filter-id->=":[bn,[In],(i,[n])=>{const o=i.id(),u=n.value;return typeof o==typeof u&&o>=u}],"filter-has":[bn,[In],(i,[n])=>n.value in i.properties()],"filter-has-id":[bn,[],i=>i.id()!==null&&i.id()!==void 0],"filter-type-in":[bn,[Ui(xn)],(i,[n])=>n.value.indexOf(i.geometryType())>=0],"filter-id-in":[bn,[Ui(In)],(i,[n])=>n.value.indexOf(i.id())>=0],"filter-in-small":[bn,[xn,Ui(In)],(i,[n,o])=>o.value.indexOf(i.properties()[n.value])>=0],"filter-in-large":[bn,[xn,Ui(In)],(i,[n,o])=>function(u,h,m,v){for(;m<=v;){const x=m+v>>1;if(h[x]===u)return!0;h[x]>u?v=x-1:m=x+1}return!1}(i.properties()[n.value],o.value,0,o.value.length-1)],all:{type:bn,overloads:[[[bn,bn],(i,[n,o])=>n.evaluate(i)&&o.evaluate(i)],[zo(bn),(i,n)=>{for(const o of n)if(!o.evaluate(i))return!1;return!0}]]},any:{type:bn,overloads:[[[bn,bn],(i,[n,o])=>n.evaluate(i)||o.evaluate(i)],[zo(bn),(i,n)=>{for(const o of n)if(o.evaluate(i))return!0;return!1}]]},"!":[bn,[bn],(i,[n])=>!n.evaluate(i)],"is-supported-script":[bn,[xn],(i,[n])=>{const o=i.globals&&i.globals.isSupportedScript;return!o||o(n.evaluate(i))}],upcase:[xn,[xn],(i,[n])=>n.evaluate(i).toUpperCase()],downcase:[xn,[xn],(i,[n])=>n.evaluate(i).toLowerCase()],concat:[xn,zo(In),(i,n)=>n.map(o=>_s(o.evaluate(i))).join("")],"resolved-locale":[xn,[Br],(i,[n])=>n.evaluate(i).resolvedLocale()]});var Oc=Wm;function Zm(i){return{result:"success",value:i}}function Gs(i){return{result:"error",value:i}}function Al(i){return i["property-type"]==="data-driven"}function Hu(i){return!!i.expression&&i.expression.parameters.indexOf("zoom")>-1}function Gu(i){return!!i.expression&&i.expression.interpolated}function tr(i){return i instanceof Number?"number":i instanceof String?"string":i instanceof Boolean?"boolean":Array.isArray(i)?"array":i===null?"null":typeof i}function zc(i){return typeof i=="object"&&i!==null&&!Array.isArray(i)}function Xm(i){return i}function Wu(i,n){const o=n.type==="color",u=i.stops&&typeof i.stops[0][0]=="object",h=u||!(u||i.property!==void 0),m=i.type||(Gu(n)?"exponential":"interval");if(o&&((i=Si({},i)).stops&&(i.stops=i.stops.map(E=>[E[0],Nr.parse(E[1])])),i.default=Nr.parse(i.default?i.default:n.default)),i.colorSpace&&i.colorSpace!=="rgb"&&!Kh[i.colorSpace])throw new Error(`Unknown color space: ${i.colorSpace}`);let v,x,S;if(m==="exponential")v=Ga;else if(m==="interval")v=qu;else if(m==="categorical"){v=Km,x=Object.create(null);for(const E of i.stops)x[E[0]]=E[1];S=typeof i.stops[0][0]}else{if(m!=="identity")throw new Error(`Unknown function type "${m}"`);v=Ym}if(u){const E={},R=[];for(let V=0;V<i.stops.length;V++){const G=i.stops[V],K=G[0].zoom;E[K]===void 0&&(E[K]={zoom:K,type:i.type,property:i.property,default:i.default,stops:[]},R.push(K)),E[K].stops.push([G[0].value,G[1]])}const z=[];for(const V of R)z.push([E[V].zoom,Wu(E[V],n)]);const L={name:"linear"};return{kind:"composite",interpolationType:L,interpolationFactor:xa.interpolationFactor.bind(void 0,L),zoomStops:z.map(V=>V[0]),evaluate:({zoom:V},G)=>Ga({stops:z,base:i.base},n,V).evaluate(V,G)}}if(h){const E=m==="exponential"?{name:"exponential",base:i.base!==void 0?i.base:1}:null;return{kind:"camera",interpolationType:E,interpolationFactor:xa.interpolationFactor.bind(void 0,E),zoomStops:i.stops.map(R=>R[0]),evaluate:({zoom:R})=>v(i,n,R,x,S)}}return{kind:"source",evaluate(E,R){const z=R&&R.properties?R.properties[i.property]:void 0;return z===void 0?Rl(i.default,n.default):v(i,n,z,x,S)}}}function Rl(i,n,o){return i!==void 0?i:n!==void 0?n:o!==void 0?o:void 0}function Km(i,n,o,u,h){return Rl(typeof o===h?u[o]:void 0,i.default,n.default)}function qu(i,n,o){if(tr(o)!=="number")return Rl(i.default,n.default);const u=i.stops.length;if(u===1||o<=i.stops[0][0])return i.stops[0][1];if(o>=i.stops[u-1][0])return i.stops[u-1][1];const h=Lu(i.stops.map(m=>m[0]),o);return i.stops[h][1]}function Ga(i,n,o){const u=i.base!==void 0?i.base:1;if(tr(o)!=="number")return Rl(i.default,n.default);const h=i.stops.length;if(h===1||o<=i.stops[0][0])return i.stops[0][1];if(o>=i.stops[h-1][0])return i.stops[h-1][1];const m=Lu(i.stops.map(R=>R[0]),o),v=function(R,z,L,V){const G=V-L,K=R-L;return G===0?0:z===1?K/G:(Math.pow(z,K)-1)/(Math.pow(z,G)-1)}(o,u,i.stops[m][0],i.stops[m+1][0]),x=i.stops[m][1],S=i.stops[m+1][1];let E=Ic[n.type]||Xm;if(i.colorSpace&&i.colorSpace!=="rgb"){const R=Kh[i.colorSpace];E=(z,L)=>R.reverse(R.interpolate(R.forward(z),R.forward(L),v))}return typeof x.evaluate=="function"?{evaluate(...R){const z=x.evaluate.apply(void 0,R),L=S.evaluate.apply(void 0,R);if(z!==void 0&&L!==void 0)return E(z,L,v)}}:E(x,S,v)}function Ym(i,n,o){return n.type==="color"?o=Nr.parse(o):n.type==="formatted"?o=Yn.fromString(o.toString()):n.type==="resolvedImage"?o=dr.fromString(o.toString()):tr(o)===n.type||n.type==="enum"&&n.values[o]||(o=void 0),Rl(o,i.default,n.default)}class Zu{constructor(n,o){this.expression=n,this._warningHistory={},this._evaluator=new kh,this._defaultValue=o?function(u){return u.type==="color"&&(zc(u.default)||Array.isArray(u.default))?new Nr(0,0,0,0):u.type==="color"?Nr.parse(u.default)||null:u.default===void 0?null:u.default}(o):null,this._enumValues=o&&o.type==="enum"?o.values:null}evaluateWithoutErrorHandling(n,o,u,h,m,v,x,S){return this._evaluator.globals=n,this._evaluator.feature=o,this._evaluator.featureState=u,this._evaluator.canonical=h||null,this._evaluator.availableImages=m||null,this._evaluator.formattedSection=v,this._evaluator.featureTileCoord=x||null,this._evaluator.featureDistanceData=S||null,this.expression.evaluate(this._evaluator)}evaluate(n,o,u,h,m,v,x,S){this._evaluator.globals=n,this._evaluator.feature=o||null,this._evaluator.featureState=u||null,this._evaluator.canonical=h||null,this._evaluator.availableImages=m||null,this._evaluator.formattedSection=v||null,this._evaluator.featureTileCoord=x||null,this._evaluator.featureDistanceData=S||null;try{const E=this.expression.evaluate(this._evaluator);if(E==null||typeof E=="number"&&E!=E)return this._defaultValue;if(this._enumValues&&!(E in this._enumValues))throw new zi(`Expected value to be one of ${Object.keys(this._enumValues).map(R=>JSON.stringify(R)).join(", ")}, but found ${JSON.stringify(E)} instead.`);return E}catch(E){return this._warningHistory[E.message]||(this._warningHistory[E.message]=!0,typeof console<"u"&&console.warn(E.message)),this._defaultValue}}}function Ol(i){return Array.isArray(i)&&i.length>0&&typeof i[0]=="string"&&i[0]in Oc}function zl(i,n){const o=new Uh(Oc,[],n?function(h){const m={color:Qr,string:xn,number:Tt,enum:xn,boolean:bn,formatted:Ao,resolvedImage:Ro};return h.type==="array"?Ui(m[h.value]||In,h.length):m[h.type]}(n):void 0),u=o.parse(i,void 0,void 0,void 0,n&&n.type==="string"?{typeAnnotation:"coerce"}:void 0);return u?Zm(new Zu(u,n)):Gs(o.errors)}class rf{constructor(n,o){this.kind=n,this._styleExpression=o,this.isStateDependent=n!=="constant"&&!Va(o.expression)}evaluateWithoutErrorHandling(n,o,u,h,m,v){return this._styleExpression.evaluateWithoutErrorHandling(n,o,u,h,m,v)}evaluate(n,o,u,h,m,v){return this._styleExpression.evaluate(n,o,u,h,m,v)}}class Dc{constructor(n,o,u,h){this.kind=n,this.zoomStops=u,this._styleExpression=o,this.isStateDependent=n!=="camera"&&!Va(o.expression),this.interpolationType=h}evaluateWithoutErrorHandling(n,o,u,h,m,v){return this._styleExpression.evaluateWithoutErrorHandling(n,o,u,h,m,v)}evaluate(n,o,u,h,m,v){return this._styleExpression.evaluate(n,o,u,h,m,v)}interpolationFactor(n,o,u){return this.interpolationType?xa.interpolationFactor(this.interpolationType,n,o,u):0}}function Lc(i,n){if((i=zl(i,n)).result==="error")return i;const o=i.value.expression,u=Tl(o);if(!u&&!Al(n))return Gs([new Tn("","data expressions not supported")]);const h=Vs(o,["zoom","pitch","distance-from-center"]);if(!h&&!Hu(n))return Gs([new Tn("","zoom expressions not supported")]);const m=Ku(o);return m||h?m instanceof Tn?Gs([m]):m instanceof xa&&!Gu(n)?Gs([new Tn("",'"interpolate" expressions cannot be used with this property')]):Zm(m?new Dc(u?"camera":"composite",i.value,m.labels,m instanceof xa?m.interpolation:void 0):new rf(u?"constant":"source",i.value)):Gs([new Tn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Xu{constructor(n,o){this._parameters=n,this._specification=o,Si(this,Wu(this._parameters,this._specification))}static deserialize(n){return new Xu(n._parameters,n._specification)}static serialize(n){return{_parameters:n._parameters,_specification:n._specification}}}function Ku(i){let n=null;if(i instanceof Nm)n=Ku(i.result);else if(i instanceof Jh){for(const o of i.args)if(n=Ku(o),n)break}else(i instanceof Hh||i instanceof xa)&&i.input instanceof ja&&i.input.name==="zoom"&&(n=i);return n instanceof Tn||i.eachChild(o=>{const u=Ku(o);u instanceof Tn?n=u:!n&&u?n=new Tn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&u&&n!==u&&(n=new Tn("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),n}class Xt{constructor(n,o,u,h){this.message=(n?`${n}: `:"")+u,h&&(this.identifier=h),o!=null&&o.__line__&&(this.line=o.__line__)}}function Zo(i){const n=i.key,o=i.value,u=i.valueSpec||{},h=i.objectElementValidators||{},m=i.style,v=i.styleSpec;let x=[];const S=tr(o);if(S!=="object")return[new Xt(n,o,`object expected, ${S} found`)];for(const E in o){const R=E.split(".")[0];let z;h[R]?z=h[R]:u[R]?z=Vi:h["*"]?z=h["*"]:u["*"]&&(z=Vi),z?x=x.concat(z({key:(n&&`${n}.`)+E,value:o[E],valueSpec:u[R]||u["*"],style:m,styleSpec:v,object:o,objectKey:E},o)):x.push(new Xt(n,o[E],`unknown property "${E}"`))}for(const E in u)h[E]||u[E].required&&u[E].default===void 0&&o[E]===void 0&&x.push(new Xt(n,o,`missing required property "${E}"`));return x}function Jm(i){const n=i.value,o=i.valueSpec,u=i.style,h=i.styleSpec,m=i.key,v=i.arrayElementValidator||Vi;if(tr(n)!=="array")return[new Xt(m,n,`array expected, ${tr(n)} found`)];if(o.length&&n.length!==o.length)return[new Xt(m,n,`array length ${o.length} expected, length ${n.length} found`)];if(o["min-length"]&&n.length<o["min-length"])return[new Xt(m,n,`array length at least ${o["min-length"]} expected, length ${n.length} found`)];let x={type:o.value,values:o.values,minimum:o.minimum,maximum:o.maximum,function:void 0};h.$version<7&&(x.function=o.function),tr(o.value)==="object"&&(x=o.value);let S=[];for(let E=0;E<n.length;E++)S=S.concat(v({array:n,arrayIndex:E,value:n[E],valueSpec:x,style:u,styleSpec:h,key:`${m}[${E}]`}));return S}function kc(i){const n=i.key,o=i.value,u=i.valueSpec;let h=tr(o);if(h==="number"&&o!=o&&(h="NaN"),h!=="number")return[new Xt(n,o,`number expected, ${h} found`)];if("minimum"in u){let m=u.minimum;if(tr(u.minimum)==="array"&&(m=u.minimum[i.arrayIndex]),o<m)return[new Xt(n,o,`${o} is less than the minimum value ${m}`)]}if("maximum"in u){let m=u.maximum;if(tr(u.maximum)==="array"&&(m=u.maximum[i.arrayIndex]),o>m)return[new Xt(n,o,`${o} is greater than the maximum value ${m}`)]}return[]}function $c(i){const n=i.valueSpec,o=gr(i.value.type);let u,h,m,v={};const x=o!=="categorical"&&i.value.property===void 0,S=!x,E=tr(i.value.stops)==="array"&&tr(i.value.stops[0])==="array"&&tr(i.value.stops[0][0])==="object",R=Zo({key:i.key,value:i.value,valueSpec:i.styleSpec.function,style:i.style,styleSpec:i.styleSpec,objectElementValidators:{stops:function(V){if(o==="identity")return[new Xt(V.key,V.value,'identity function may not have a "stops" property')];let G=[];const K=V.value;return G=G.concat(Jm({key:V.key,value:K,valueSpec:V.valueSpec,style:V.style,styleSpec:V.styleSpec,arrayElementValidator:z})),tr(K)==="array"&&K.length===0&&G.push(new Xt(V.key,K,"array must have at least one stop")),G},default:function(V){return Vi({key:V.key,value:V.value,valueSpec:n,style:V.style,styleSpec:V.styleSpec})}}});return o==="identity"&&x&&R.push(new Xt(i.key,i.value,'missing required property "property"')),o==="identity"||i.value.stops||R.push(new Xt(i.key,i.value,'missing required property "stops"')),o==="exponential"&&i.valueSpec.expression&&!Gu(i.valueSpec)&&R.push(new Xt(i.key,i.value,"exponential functions not supported")),i.styleSpec.$version>=8&&(S&&!Al(i.valueSpec)?R.push(new Xt(i.key,i.value,"property functions not supported")):x&&!Hu(i.valueSpec)&&R.push(new Xt(i.key,i.value,"zoom functions not supported"))),o!=="categorical"&&!E||i.value.property!==void 0||R.push(new Xt(i.key,i.value,'"property" property is required')),R;function z(V){let G=[];const K=V.value,ae=V.key;if(tr(K)!=="array")return[new Xt(ae,K,`array expected, ${tr(K)} found`)];if(K.length!==2)return[new Xt(ae,K,`array length 2 expected, length ${K.length} found`)];if(E){if(tr(K[0])!=="object")return[new Xt(ae,K,`object expected, ${tr(K[0])} found`)];if(K[0].zoom===void 0)return[new Xt(ae,K,"object stop key must have zoom")];if(K[0].value===void 0)return[new Xt(ae,K,"object stop key must have value")];const ge=gr(K[0].zoom);if(typeof ge!="number")return[new Xt(ae,K[0].zoom,"stop zoom values must be numbers")];if(m&&m>ge)return[new Xt(ae,K[0].zoom,"stop zoom values must appear in ascending order")];ge!==m&&(m=ge,h=void 0,v={}),G=G.concat(Zo({key:`${ae}[0]`,value:K[0],valueSpec:{zoom:{}},style:V.style,styleSpec:V.styleSpec,objectElementValidators:{zoom:kc,value:L}}))}else G=G.concat(L({key:`${ae}[0]`,value:K[0],valueSpec:{},style:V.style,styleSpec:V.styleSpec},K));return Ol(pr(K[1]))?G.concat([new Xt(`${ae}[1]`,K[1],"expressions are not allowed in function stops.")]):G.concat(Vi({key:`${ae}[1]`,value:K[1],valueSpec:n,style:V.style,styleSpec:V.styleSpec}))}function L(V,G){const K=tr(V.value),ae=gr(V.value),ge=V.value!==null?V.value:G;if(u){if(K!==u)return[new Xt(V.key,ge,`${K} stop domain type must match previous stop domain type ${u}`)]}else u=K;if(K!=="number"&&K!=="string"&&K!=="boolean"&&typeof ae!="number"&&typeof ae!="string"&&typeof ae!="boolean")return[new Xt(V.key,ge,"stop domain value must be a number, string, or boolean")];if(K!=="number"&&o!=="categorical"){let Ce=`number expected, ${K} found`;return Al(n)&&o===void 0&&(Ce+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Xt(V.key,ge,Ce)]}return o!=="categorical"||K!=="number"||typeof ae=="number"&&isFinite(ae)&&Math.floor(ae)===ae?o!=="categorical"&&K==="number"&&typeof ae=="number"&&typeof h=="number"&&h!==void 0&&ae<h?[new Xt(V.key,ge,"stop domain values must appear in ascending order")]:(h=ae,o==="categorical"&&ae in v?[new Xt(V.key,ge,"stop domain values must be unique")]:(v[ae]=!0,[])):[new Xt(V.key,ge,`integer expected, found ${String(ae)}`)]}}function Ci(i){const n=(i.expressionContext==="property"?Lc:zl)(pr(i.value),i.valueSpec);if(n.result==="error")return n.value.map(u=>new Xt(`${i.key}${u.key}`,i.value,u.message));const o=n.value.expression||n.value._styleExpression.expression;if(i.expressionContext==="property"&&i.propertyKey==="text-font"&&!o.outputDefined())return[new Xt(i.key,i.value,`Invalid data expression for "${i.propertyKey}". Output values must be contained as literals within the expression.`)];if(i.expressionContext==="property"&&i.propertyType==="layout"&&!Va(o))return[new Xt(i.key,i.value,'"feature-state" data expressions are not supported with layout properties.')];if(i.expressionContext==="filter")return Fc(o,i);if(i.expressionContext&&i.expressionContext.indexOf("cluster")===0){if(!Vs(o,["zoom","feature-state"]))return[new Xt(i.key,i.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(i.expressionContext==="cluster-initial"&&!Tl(o))return[new Xt(i.key,i.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Fc(i,n){const o=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(n.valueSpec&&n.valueSpec.expression)for(const h of n.valueSpec.expression.parameters)o.delete(h);if(o.size===0)return[];const u=[];return i instanceof ja&&o.has(i.name)?[new Xt(n.key,n.value,`["${i.name}"] expression is not supported in a filter for a ${n.object.type} layer with id: ${n.object.id}`)]:(i.eachChild(h=>{u.push(...Fc(h,n))}),u)}function Yu(i){const n=i.key,o=i.value,u=i.valueSpec,h=[];return Array.isArray(u.values)?u.values.indexOf(gr(o))===-1&&h.push(new Xt(n,o,`expected one of [${u.values.join(", ")}], ${JSON.stringify(o)} found`)):Object.keys(u.values).indexOf(gr(o))===-1&&h.push(new Xt(n,o,`expected one of [${Object.keys(u.values).join(", ")}], ${JSON.stringify(o)} found`)),h}function of(i){if(i===!0||i===!1)return!0;if(!Array.isArray(i)||i.length===0)return!1;switch(i[0]){case"has":return i.length>=2&&i[1]!=="$id"&&i[1]!=="$type";case"in":return i.length>=3&&(typeof i[1]!="string"||Array.isArray(i[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return i.length!==3||Array.isArray(i[1])||Array.isArray(i[2]);case"any":case"all":for(const n of i.slice(1))if(!of(n)&&typeof n!="boolean")return!1;return!0;default:return!0}}function Ju(i,n="fill"){if(i==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};of(i)||(i=Ll(i));const o=i;let u=!0;try{u=function(E){if(!Dl(E))return E;let R=pr(E);return Qu(R),R=Qm(R),R}(o)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(o,null,2)}
        `)}const h=tt[`filter_${n}`],m=zl(u,h);let v=null;if(m.result==="error")throw new Error(m.value.map(E=>`${E.key}: ${E.message}`).join(", "));v=(E,R,z)=>m.value.evaluate(E,R,{},z);let x=null,S=null;if(u!==o){const E=zl(o,h);if(E.result==="error")throw new Error(E.value.map(R=>`${R.key}: ${R.message}`).join(", "));x=(R,z,L,V,G)=>E.value.evaluate(R,z,{},L,void 0,void 0,V,G),S=!Tl(E.value.expression)}return{filter:v,dynamicFilter:x||void 0,needGeometry:eg(u),needFeature:!!S}}function Qm(i){if(!Array.isArray(i))return i;const n=function(o){if(af.has(o[0])){for(let u=1;u<o.length;u++)if(Dl(o[u]))return!0}return o}(i);return n===!0?n:n.map(o=>Qm(o))}function Qu(i){let n=!1;const o=[];if(i[0]==="case"){for(let u=1;u<i.length-1;u+=2)n=n||Dl(i[u]),o.push(i[u+1]);o.push(i[i.length-1])}else if(i[0]==="match"){n=n||Dl(i[1]);for(let u=2;u<i.length-1;u+=2)o.push(i[u+1]);o.push(i[i.length-1])}else if(i[0]==="step"){n=n||Dl(i[1]);for(let u=1;u<i.length-1;u+=2)o.push(i[u+1])}n&&(i.length=0,i.push("any",...o));for(let u=1;u<i.length;u++)Qu(i[u])}function Dl(i){if(!Array.isArray(i))return!1;if((n=i[0])==="pitch"||n==="distance-from-center")return!0;var n;for(let o=1;o<i.length;o++)if(Dl(i[o]))return!0;return!1}const af=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function r_(i,n){return i<n?-1:i>n?1:0}function eg(i){if(!Array.isArray(i))return!1;if(i[0]==="within")return!0;for(let n=1;n<i.length;n++)if(eg(i[n]))return!0;return!1}function Ll(i){if(!i)return!0;const n=i[0];return i.length<=1?n!=="any":n==="=="?sf(i[1],i[2],"=="):n==="!="?ed(sf(i[1],i[2],"==")):n==="<"||n===">"||n==="<="||n===">="?sf(i[1],i[2],n):n==="any"?(o=i.slice(1),["any"].concat(o.map(Ll))):n==="all"?["all"].concat(i.slice(1).map(Ll)):n==="none"?["all"].concat(i.slice(1).map(Ll).map(ed)):n==="in"?lf(i[1],i.slice(2)):n==="!in"?ed(lf(i[1],i.slice(2))):n==="has"?cf(i[1]):n==="!has"?ed(cf(i[1])):n!=="within"||i;var o}function sf(i,n,o){switch(i){case"$type":return[`filter-type-${o}`,n];case"$id":return[`filter-id-${o}`,n];default:return[`filter-${o}`,i,n]}}function lf(i,n){if(n.length===0)return!1;switch(i){case"$type":return["filter-type-in",["literal",n]];case"$id":return["filter-id-in",["literal",n]];default:return n.length>200&&!n.some(o=>typeof o!=typeof n[0])?["filter-in-large",i,["literal",n.sort(r_)]]:["filter-in-small",i,["literal",n]]}}function cf(i){switch(i){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",i]}}function ed(i){return["!",i]}function Bc(i){return of(pr(i.value))?Ci(Si({},i,{expressionContext:"filter",valueSpec:i.styleSpec[`filter_${i.layerType||"fill"}`]})):Nc(i)}function Nc(i){const n=i.value,o=i.key;if(tr(n)!=="array")return[new Xt(o,n,`array expected, ${tr(n)} found`)];const u=i.styleSpec;let h,m=[];if(n.length<1)return[new Xt(o,n,"filter array must have at least 1 element")];switch(m=m.concat(Yu({key:`${o}[0]`,value:n[0],valueSpec:u.filter_operator,style:i.style,styleSpec:i.styleSpec})),gr(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&gr(n[1])==="$type"&&m.push(new Xt(o,n,`"$type" cannot be use with operator "${n[0]}"`));case"==":case"!=":n.length!==3&&m.push(new Xt(o,n,`filter array for operator "${n[0]}" must have 3 elements`));case"in":case"!in":n.length>=2&&(h=tr(n[1]),h!=="string"&&m.push(new Xt(`${o}[1]`,n[1],`string expected, ${h} found`)));for(let v=2;v<n.length;v++)h=tr(n[v]),gr(n[1])==="$type"?m=m.concat(Yu({key:`${o}[${v}]`,value:n[v],valueSpec:u.geometry_type,style:i.style,styleSpec:i.styleSpec})):h!=="string"&&h!=="number"&&h!=="boolean"&&m.push(new Xt(`${o}[${v}]`,n[v],`string, number, or boolean expected, ${h} found`));break;case"any":case"all":case"none":for(let v=1;v<n.length;v++)m=m.concat(Nc({key:`${o}[${v}]`,value:n[v],style:i.style,styleSpec:i.styleSpec}));break;case"has":case"!has":h=tr(n[1]),n.length!==2?m.push(new Xt(o,n,`filter array for "${n[0]}" operator must have 2 elements`)):h!=="string"&&m.push(new Xt(`${o}[1]`,n[1],`string expected, ${h} found`));break;case"within":h=tr(n[1]),n.length!==2?m.push(new Xt(o,n,`filter array for "${n[0]}" operator must have 2 elements`)):h!=="object"&&m.push(new Xt(`${o}[1]`,n[1],`object expected, ${h} found`))}return m}function uf(i,n){const o=i.key,u=i.style,h=i.styleSpec,m=i.value,v=i.objectKey,x=h[`${n}_${i.layerType}`];if(!x)return[];const S=v.match(/^(.*)-transition$/);if(n==="paint"&&S&&x[S[1]]&&x[S[1]].transition)return Vi({key:o,value:m,valueSpec:h.transition,style:u,styleSpec:h});const E=i.valueSpec||x[v];if(!E)return[new Xt(o,m,`unknown property "${v}"`)];let R;if(tr(m)==="string"&&Al(E)&&!E.tokens&&(R=/^{([^}]+)}$/.exec(m))){const L=`\`{ "type": "identity", "property": ${R?JSON.stringify(R[1]):'"_"'} }\``;return[new Xt(o,m,`"${v}" does not support interpolation syntax
Use an identity property function instead: ${L}.`)]}const z=[];return i.layerType==="symbol"&&(v==="text-field"&&u&&!u.glyphs&&z.push(new Xt(o,m,'use of "text-field" requires a style "glyphs" property')),v==="text-font"&&zc(pr(m))&&gr(m.type)==="identity"&&z.push(new Xt(o,m,'"text-font" does not support identity functions'))),z.concat(Vi({key:i.key,value:m,valueSpec:E,style:u,styleSpec:h,expressionContext:"property",propertyType:n,propertyKey:v}))}function tg(i){return uf(i,"paint")}function df(i){return uf(i,"layout")}function ng(i){let n=[];const o=i.value,u=i.key,h=i.style,m=i.styleSpec;o.type||o.ref||n.push(new Xt(u,o,'either "type" or "ref" is required'));let v=gr(o.type);const x=gr(o.ref);if(o.id){const S=gr(o.id);for(let E=0;E<i.arrayIndex;E++){const R=h.layers[E];gr(R.id)===S&&n.push(new Xt(u,o.id,`duplicate layer id "${o.id}", previously used at line ${R.id.__line__}`))}}if("ref"in o){let S;["type","source","source-layer","filter","layout"].forEach(E=>{E in o&&n.push(new Xt(u,o[E],`"${E}" is prohibited for ref layers`))}),h.layers.forEach(E=>{gr(E.id)===x&&(S=E)}),S?S.ref?n.push(new Xt(u,o.ref,"ref cannot reference another ref layer")):v=gr(S.type):typeof x=="string"&&n.push(new Xt(u,o.ref,`ref layer "${x}" not found`))}else if(v!=="background"&&v!=="sky")if(o.source){const S=h.sources&&h.sources[o.source],E=S&&gr(S.type);S?E==="vector"&&v==="raster"?n.push(new Xt(u,o.source,`layer "${o.id}" requires a raster source`)):E==="raster"&&v!=="raster"?n.push(new Xt(u,o.source,`layer "${o.id}" requires a vector source`)):E!=="vector"||o["source-layer"]?E==="raster-dem"&&v!=="hillshade"?n.push(new Xt(u,o.source,"raster-dem source can only be used with layer type 'hillshade'.")):v!=="line"||!o.paint||!o.paint["line-gradient"]&&!o.paint["line-trim-offset"]||E==="geojson"&&S.lineMetrics||n.push(new Xt(u,o,`layer "${o.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):n.push(new Xt(u,o,`layer "${o.id}" must specify a "source-layer"`)):n.push(new Xt(u,o.source,`source "${o.source}" not found`))}else n.push(new Xt(u,o,'missing required property "source"'));return n=n.concat(Zo({key:u,value:o,valueSpec:m.layer,style:i.style,styleSpec:i.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Vi({key:`${u}.type`,value:o.type,valueSpec:m.layer.type,style:i.style,styleSpec:i.styleSpec,object:o,objectKey:"type"}),filter:S=>Bc(Si({layerType:v},S)),layout:S=>Zo({layer:o,key:S.key,value:S.value,valueSpec:{},style:S.style,styleSpec:S.styleSpec,objectElementValidators:{"*":E=>df(Si({layerType:v},E))}}),paint:S=>Zo({layer:o,key:S.key,value:S.value,valueSpec:{},style:S.style,styleSpec:S.styleSpec,objectElementValidators:{"*":E=>tg(Si({layerType:v},E))}})}})),n}function ws(i){const n=i.value,o=i.key,u=tr(n);return u!=="string"?[new Xt(o,n,`string expected, ${u} found`)]:[]}const rg={promoteId:function({key:i,value:n}){if(tr(n)==="string")return ws({key:i,value:n});{const o=[];for(const u in n)o.push(...ws({key:`${i}.${u}`,value:n[u]}));return o}}};function ig(i){const n=i.value,o=i.key,u=i.styleSpec,h=i.style;if(!n.type)return[new Xt(o,n,'"type" is required')];const m=gr(n.type);let v;switch(m){case"vector":case"raster":case"raster-dem":return v=Zo({key:o,value:n,valueSpec:u[`source_${m.replace("-","_")}`],style:i.style,styleSpec:u,objectElementValidators:rg}),v;case"geojson":if(v=Zo({key:o,value:n,valueSpec:u.source_geojson,style:h,styleSpec:u,objectElementValidators:rg}),n.cluster)for(const x in n.clusterProperties){const[S,E]=n.clusterProperties[x],R=typeof S=="string"?[S,["accumulated"],["get",x]]:S;v.push(...Ci({key:`${o}.${x}.map`,value:E,expressionContext:"cluster-map"})),v.push(...Ci({key:`${o}.${x}.reduce`,value:R,expressionContext:"cluster-reduce"}))}return v;case"video":return Zo({key:o,value:n,valueSpec:u.source_video,style:h,styleSpec:u});case"image":return Zo({key:o,value:n,valueSpec:u.source_image,style:h,styleSpec:u});case"canvas":return[new Xt(o,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Yu({key:`${o}.type`,value:n.type,valueSpec:{values:i_(u)},style:h,styleSpec:u})}}function i_(i){return i.source.reduce((n,o)=>{const u=i[o];return u.type.type==="enum"&&(n=n.concat(Object.keys(u.type.values))),n},[])}function og(i){const n=i.value,o=i.styleSpec,u=o.light,h=i.style;let m=[];const v=tr(n);if(n===void 0)return m;if(v!=="object")return m=m.concat([new Xt("light",n,`object expected, ${v} found`)]),m;for(const x in n){const S=x.match(/^(.*)-transition$/);m=m.concat(S&&u[S[1]]&&u[S[1]].transition?Vi({key:x,value:n[x],valueSpec:o.transition,style:h,styleSpec:o}):u[x]?Vi({key:x,value:n[x],valueSpec:u[x],style:h,styleSpec:o}):[new Xt(x,n[x],`unknown property "${x}"`)])}return m}function hf(i){const n=i.value,o=i.key,u=i.style,h=i.styleSpec,m=h.terrain;let v=[];const x=tr(n);if(n===void 0)return v;if(x!=="object")return v=v.concat([new Xt("terrain",n,`object expected, ${x} found`)]),v;for(const S in n){const E=S.match(/^(.*)-transition$/);v=v.concat(E&&m[E[1]]&&m[E[1]].transition?Vi({key:S,value:n[S],valueSpec:h.transition,style:u,styleSpec:h}):m[S]?Vi({key:S,value:n[S],valueSpec:m[S],style:u,styleSpec:h}):[new Xt(S,n[S],`unknown property "${S}"`)])}if(n.source){const S=u.sources&&u.sources[n.source],E=S&&gr(S.type);S?E!=="raster-dem"&&v.push(new Xt(o,n.source,`terrain cannot be used with a source of type ${String(E)}, it only be used with a "raster-dem" source type`)):v.push(new Xt(o,n.source,`source "${n.source}" not found`))}else v.push(new Xt(o,n,'terrain is missing required property "source"'));return v}function ag(i){const n=i.value,o=i.style,u=i.styleSpec,h=u.fog;let m=[];const v=tr(n);if(n===void 0)return m;if(v!=="object")return m=m.concat([new Xt("fog",n,`object expected, ${v} found`)]),m;for(const x in n){const S=x.match(/^(.*)-transition$/);m=m.concat(S&&h[S[1]]&&h[S[1]].transition?Vi({key:x,value:n[x],valueSpec:u.transition,style:o,styleSpec:u}):h[x]?Vi({key:x,value:n[x],valueSpec:h[x],style:o,styleSpec:u}):[new Xt(x,n[x],`unknown property "${x}"`)])}return m}const sg={"*":()=>[],array:Jm,boolean:function(i){const n=i.value,o=i.key,u=tr(n);return u!=="boolean"?[new Xt(o,n,`boolean expected, ${u} found`)]:[]},number:kc,color:function(i){const n=i.key,o=i.value,u=tr(o);return u!=="string"?[new Xt(n,o,`color expected, ${u} found`)]:ma(o)===null?[new Xt(n,o,`color expected, "${o}" found`)]:[]},enum:Yu,filter:Bc,function:$c,layer:ng,object:Zo,source:ig,light:og,terrain:hf,fog:ag,string:ws,formatted:function(i){return ws(i).length===0?[]:Ci(i)},resolvedImage:function(i){return ws(i).length===0?[]:Ci(i)},projection:function(i){const n=i.value,o=i.styleSpec,u=o.projection,h=i.style;let m=[];const v=tr(n);if(v==="object")for(const x in n)m=m.concat(Vi({key:x,value:n[x],valueSpec:u[x],style:h,styleSpec:o}));else v!=="string"&&(m=m.concat([new Xt("projection",n,`object or string expected, ${v} found`)]));return m}};function Vi(i){const n=i.value,o=i.valueSpec,u=i.styleSpec;return o.expression&&zc(gr(n))?$c(i):o.expression&&Ol(pr(n))?Ci(i):o.type&&sg[o.type]?sg[o.type](i):Zo(Si({},i,{valueSpec:o.type?u[o.type]:o}))}function o_(i){const n=i.value,o=i.key,u=ws(i);return u.length||(n.indexOf("{fontstack}")===-1&&u.push(new Xt(o,n,'"glyphs" url must include a "{fontstack}" token')),n.indexOf("{range}")===-1&&u.push(new Xt(o,n,'"glyphs" url must include a "{range}" token'))),u}function lg(i,n=tt){return Do(Vi({key:"",value:i,valueSpec:n.$root,styleSpec:n,style:i,objectElementValidators:{glyphs:o_,"*":()=>[]}}))}const a_=i=>Do(tg(i)),s_=i=>Do(df(i));function Do(i){return i.slice().sort((n,o)=>n.line&&o.line?n.line-o.line:0)}function cg(i,n){let o=!1;if(n&&n.length)for(const u of n)i.fire(new _i(new Error(u.message))),o=!0;return o}var l_=ba,Xo=3;function ba(i,n,o){var u=this.cells=[];if(i instanceof ArrayBuffer){this.arrayBuffer=i;var h=new Int32Array(this.arrayBuffer);i=h[0],this.d=(n=h[1])+2*(o=h[2]);for(var m=0;m<this.d*this.d;m++){var v=h[Xo+m],x=h[Xo+m+1];u.push(v===x?null:h.subarray(v,x))}var S=h[Xo+u.length+1];this.keys=h.subarray(h[Xo+u.length],S),this.bboxes=h.subarray(S),this.insert=this._insertReadonly}else{this.d=n+2*o;for(var E=0;E<this.d*this.d;E++)u.push([]);this.keys=[],this.bboxes=[]}this.n=n,this.extent=i,this.padding=o,this.scale=n/i,this.uid=0;var R=o/n*i;this.min=-R,this.max=i+R}ba.prototype.insert=function(i,n,o,u,h){this._forEachCell(n,o,u,h,this._insertCell,this.uid++),this.keys.push(i),this.bboxes.push(n),this.bboxes.push(o),this.bboxes.push(u),this.bboxes.push(h)},ba.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},ba.prototype._insertCell=function(i,n,o,u,h,m){this.cells[h].push(m)},ba.prototype.query=function(i,n,o,u,h){var m=this.min,v=this.max;if(i<=m&&n<=m&&v<=o&&v<=u&&!h)return Array.prototype.slice.call(this.keys);var x=[];return this._forEachCell(i,n,o,u,this._queryCell,x,{},h),x},ba.prototype._queryCell=function(i,n,o,u,h,m,v,x){var S=this.cells[h];if(S!==null)for(var E=this.keys,R=this.bboxes,z=0;z<S.length;z++){var L=S[z];if(v[L]===void 0){var V=4*L;(x?x(R[V+0],R[V+1],R[V+2],R[V+3]):i<=R[V+2]&&n<=R[V+3]&&o>=R[V+0]&&u>=R[V+1])?(v[L]=!0,m.push(E[L])):v[L]=!1}}},ba.prototype._forEachCell=function(i,n,o,u,h,m,v,x){for(var S=this._convertToCellCoord(i),E=this._convertToCellCoord(n),R=this._convertToCellCoord(o),z=this._convertToCellCoord(u),L=S;L<=R;L++)for(var V=E;V<=z;V++){var G=this.d*V+L;if((!x||x(this._convertFromCellCoord(L),this._convertFromCellCoord(V),this._convertFromCellCoord(L+1),this._convertFromCellCoord(V+1)))&&h.call(this,i,n,o,u,G,m,v,x))return}},ba.prototype._convertFromCellCoord=function(i){return(i-this.padding)/this.scale},ba.prototype._convertToCellCoord=function(i){return Math.max(0,Math.min(this.d-1,Math.floor(i*this.scale)+this.padding))},ba.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var i=this.cells,n=Xo+this.cells.length+1+1,o=0,u=0;u<this.cells.length;u++)o+=this.cells[u].length;var h=new Int32Array(n+o+this.keys.length+this.bboxes.length);h[0]=this.extent,h[1]=this.n,h[2]=this.padding;for(var m=n,v=0;v<i.length;v++){var x=i[v];h[Xo+v]=m,h.set(x,m),m+=x.length}return h[Xo+i.length]=m,h.set(this.keys,m),h[Xo+i.length+1]=m+=this.keys.length,h.set(this.bboxes,m),m+=this.bboxes.length,h.buffer};var Ws=H(l_);const td={};function Jt(i,n,o={}){Object.defineProperty(i,"_classRegistryKey",{value:n,writeable:!1}),td[n]={klass:i,omit:o.omit||[]}}Jt(Object,"Object"),Ws.serialize=function(i,n){const o=i.toArrayBuffer();return n&&n.push(o),{buffer:o}},Ws.deserialize=function(i){return new Ws(i.buffer)},Object.defineProperty(Ws,"name",{value:"Grid"}),Jt(Ws,"Grid"),Jt(Nr,"Color"),Jt(Error,"Error"),Jt(fr,"AJAXError"),Jt(dr,"ResolvedImage"),Jt(Xu,"StylePropertyFunction"),Jt(Zu,"StyleExpression",{omit:["_evaluator"]}),Jt(Dc,"ZoomDependentExpression"),Jt(rf,"ZoomConstantExpression"),Jt(ja,"CompoundExpression",{omit:["_evaluate"]});for(const i in Oc)td[Oc[i]._classRegistryKey]||Jt(Oc[i],`Expression${i}`);function ff(i){return i&&typeof ArrayBuffer<"u"&&(i instanceof ArrayBuffer||i.constructor&&i.constructor.name==="ArrayBuffer")}function pf(i){return w.ImageBitmap&&i instanceof w.ImageBitmap}function kl(i,n){if(i==null||typeof i=="boolean"||typeof i=="number"||typeof i=="string"||i instanceof Boolean||i instanceof Number||i instanceof String||i instanceof Date||i instanceof RegExp)return i;if(ff(i)||pf(i))return n&&n.push(i),i;if(ArrayBuffer.isView(i)){const o=i;return n&&n.push(o.buffer),o}if(i instanceof w.ImageData)return n&&n.push(i.data.buffer),i;if(Array.isArray(i)){const o=[];for(const u of i)o.push(kl(u,n));return o}if(typeof i=="object"){const o=i.constructor,u=o._classRegistryKey;if(!u)throw new Error(`can't serialize object of unregistered class ${u}`);const h=o.serialize?o.serialize(i,n):{};if(!o.serialize){for(const m in i)i.hasOwnProperty(m)&&(td[u].omit.indexOf(m)>=0||(h[m]=kl(i[m],n)));i instanceof Error&&(h.message=i.message)}if(h.$name)throw new Error("$name property is reserved for worker serialization logic.");return u!=="Object"&&(h.$name=u),h}throw new Error("can't serialize object of type "+typeof i)}function qs(i){if(i==null||typeof i=="boolean"||typeof i=="number"||typeof i=="string"||i instanceof Boolean||i instanceof Number||i instanceof String||i instanceof Date||i instanceof RegExp||ff(i)||pf(i)||ArrayBuffer.isView(i)||i instanceof w.ImageData)return i;if(Array.isArray(i))return i.map(qs);if(typeof i=="object"){const n=i.$name||"Object",{klass:o}=td[n];if(!o)throw new Error(`can't deserialize unregistered class ${n}`);if(o.deserialize)return o.deserialize(i);const u=Object.create(o.prototype);for(const h of Object.keys(i))h!=="$name"&&(u[h]=qs(i[h]));return u}throw new Error("can't deserialize object of type "+typeof i)}const qt={"Latin-1 Supplement":i=>i>=128&&i<=255,Arabic:i=>i>=1536&&i<=1791,"Arabic Supplement":i=>i>=1872&&i<=1919,"Arabic Extended-A":i=>i>=2208&&i<=2303,"Hangul Jamo":i=>i>=4352&&i<=4607,"Unified Canadian Aboriginal Syllabics":i=>i>=5120&&i<=5759,Khmer:i=>i>=6016&&i<=6143,"Unified Canadian Aboriginal Syllabics Extended":i=>i>=6320&&i<=6399,"General Punctuation":i=>i>=8192&&i<=8303,"Letterlike Symbols":i=>i>=8448&&i<=8527,"Number Forms":i=>i>=8528&&i<=8591,"Miscellaneous Technical":i=>i>=8960&&i<=9215,"Control Pictures":i=>i>=9216&&i<=9279,"Optical Character Recognition":i=>i>=9280&&i<=9311,"Enclosed Alphanumerics":i=>i>=9312&&i<=9471,"Geometric Shapes":i=>i>=9632&&i<=9727,"Miscellaneous Symbols":i=>i>=9728&&i<=9983,"Miscellaneous Symbols and Arrows":i=>i>=11008&&i<=11263,"CJK Radicals Supplement":i=>i>=11904&&i<=12031,"Kangxi Radicals":i=>i>=12032&&i<=12255,"Ideographic Description Characters":i=>i>=12272&&i<=12287,"CJK Symbols and Punctuation":i=>i>=12288&&i<=12351,Hiragana:i=>i>=12352&&i<=12447,Katakana:i=>i>=12448&&i<=12543,Bopomofo:i=>i>=12544&&i<=12591,"Hangul Compatibility Jamo":i=>i>=12592&&i<=12687,Kanbun:i=>i>=12688&&i<=12703,"Bopomofo Extended":i=>i>=12704&&i<=12735,"CJK Strokes":i=>i>=12736&&i<=12783,"Katakana Phonetic Extensions":i=>i>=12784&&i<=12799,"Enclosed CJK Letters and Months":i=>i>=12800&&i<=13055,"CJK Compatibility":i=>i>=13056&&i<=13311,"CJK Unified Ideographs Extension A":i=>i>=13312&&i<=19903,"Yijing Hexagram Symbols":i=>i>=19904&&i<=19967,"CJK Unified Ideographs":i=>i>=19968&&i<=40959,"Yi Syllables":i=>i>=40960&&i<=42127,"Yi Radicals":i=>i>=42128&&i<=42191,"Hangul Jamo Extended-A":i=>i>=43360&&i<=43391,"Hangul Syllables":i=>i>=44032&&i<=55215,"Hangul Jamo Extended-B":i=>i>=55216&&i<=55295,"Private Use Area":i=>i>=57344&&i<=63743,"CJK Compatibility Ideographs":i=>i>=63744&&i<=64255,"Arabic Presentation Forms-A":i=>i>=64336&&i<=65023,"Vertical Forms":i=>i>=65040&&i<=65055,"CJK Compatibility Forms":i=>i>=65072&&i<=65103,"Small Form Variants":i=>i>=65104&&i<=65135,"Arabic Presentation Forms-B":i=>i>=65136&&i<=65279,"Halfwidth and Fullwidth Forms":i=>i>=65280&&i<=65519};function mf(i){for(const n of i)if(gf(n.charCodeAt(0)))return!0;return!1}function c_(i){for(const n of i)if(!ug(n.charCodeAt(0)))return!1;return!0}function ug(i){return!(qt.Arabic(i)||qt["Arabic Supplement"](i)||qt["Arabic Extended-A"](i)||qt["Arabic Presentation Forms-A"](i)||qt["Arabic Presentation Forms-B"](i))}function gf(i){return!(i!==746&&i!==747&&(i<4352||!(qt["Bopomofo Extended"](i)||qt.Bopomofo(i)||qt["CJK Compatibility Forms"](i)&&!(i>=65097&&i<=65103)||qt["CJK Compatibility Ideographs"](i)||qt["CJK Compatibility"](i)||qt["CJK Radicals Supplement"](i)||qt["CJK Strokes"](i)||!(!qt["CJK Symbols and Punctuation"](i)||i>=12296&&i<=12305||i>=12308&&i<=12319||i===12336)||qt["CJK Unified Ideographs Extension A"](i)||qt["CJK Unified Ideographs"](i)||qt["Enclosed CJK Letters and Months"](i)||qt["Hangul Compatibility Jamo"](i)||qt["Hangul Jamo Extended-A"](i)||qt["Hangul Jamo Extended-B"](i)||qt["Hangul Jamo"](i)||qt["Hangul Syllables"](i)||qt.Hiragana(i)||qt["Ideographic Description Characters"](i)||qt.Kanbun(i)||qt["Kangxi Radicals"](i)||qt["Katakana Phonetic Extensions"](i)||qt.Katakana(i)&&i!==12540||!(!qt["Halfwidth and Fullwidth Forms"](i)||i===65288||i===65289||i===65293||i>=65306&&i<=65310||i===65339||i===65341||i===65343||i>=65371&&i<=65503||i===65507||i>=65512&&i<=65519)||!(!qt["Small Form Variants"](i)||i>=65112&&i<=65118||i>=65123&&i<=65126)||qt["Unified Canadian Aboriginal Syllabics"](i)||qt["Unified Canadian Aboriginal Syllabics Extended"](i)||qt["Vertical Forms"](i)||qt["Yijing Hexagram Symbols"](i)||qt["Yi Syllables"](i)||qt["Yi Radicals"](i))))}function dg(i){return!(gf(i)||function(n){return!!(qt["Latin-1 Supplement"](n)&&(n===167||n===169||n===174||n===177||n===188||n===189||n===190||n===215||n===247)||qt["General Punctuation"](n)&&(n===8214||n===8224||n===8225||n===8240||n===8241||n===8251||n===8252||n===8258||n===8263||n===8264||n===8265||n===8273)||qt["Letterlike Symbols"](n)||qt["Number Forms"](n)||qt["Miscellaneous Technical"](n)&&(n>=8960&&n<=8967||n>=8972&&n<=8991||n>=8996&&n<=9e3||n===9003||n>=9085&&n<=9114||n>=9150&&n<=9165||n===9167||n>=9169&&n<=9179||n>=9186&&n<=9215)||qt["Control Pictures"](n)&&n!==9251||qt["Optical Character Recognition"](n)||qt["Enclosed Alphanumerics"](n)||qt["Geometric Shapes"](n)||qt["Miscellaneous Symbols"](n)&&!(n>=9754&&n<=9759)||qt["Miscellaneous Symbols and Arrows"](n)&&(n>=11026&&n<=11055||n>=11088&&n<=11097||n>=11192&&n<=11243)||qt["CJK Symbols and Punctuation"](n)||qt.Katakana(n)||qt["Private Use Area"](n)||qt["CJK Compatibility Forms"](n)||qt["Small Form Variants"](n)||qt["Halfwidth and Fullwidth Forms"](n)||n===8734||n===8756||n===8757||n>=9984&&n<=10087||n>=10102&&n<=10131||n===65532||n===65533)}(i))}function hg(i){return i>=1424&&i<=2303||qt["Arabic Presentation Forms-A"](i)||qt["Arabic Presentation Forms-B"](i)}function u_(i,n){return!(!n&&hg(i)||i>=2304&&i<=3583||i>=3840&&i<=4255||qt.Khmer(i))}function d_(i){for(const n of i)if(hg(n.charCodeAt(0)))return!0;return!1}const vf="deferred",yf="loading",_f="loaded";let $l=null,p="unavailable",s=null;const d=function(i){i&&typeof i=="string"&&i.indexOf("NetworkError")>-1&&(p="error"),$l&&$l(i)};function g(){_.fire(new io("pluginStateChange",{pluginStatus:p,pluginURL:s}))}const _=new Oi,b=function(){return p},I=function(){if(p!==vf||!s)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");p=yf,g(),s&&Qn({url:s},i=>{i?d(i):(p=_f,g())})},M={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>p===_f||M.applyArabicShaping!=null,isLoading:()=>p===yf,setState(i){p=i.pluginStatus,s=i.pluginURL},isParsed:()=>M.applyArabicShaping!=null&&M.processBidirectionalText!=null&&M.processStyledBidirectionalText!=null,getPluginURL:()=>s};class O{constructor(n,o){this.zoom=n,o?(this.now=o.now,this.fadeDuration=o.fadeDuration,this.transition=o.transition,this.pitch=o.pitch):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0)}isSupportedScript(n){return function(o,u){for(const h of o)if(!u_(h.charCodeAt(0),u))return!1;return!0}(n,M.isLoaded())}}class ${constructor(n,o){this.property=n,this.value=o,this.expression=function(u,h){if(zc(u))return new Xu(u,h);if(Ol(u)){const m=Lc(u,h);if(m.result==="error")throw new Error(m.value.map(v=>`${v.key}: ${v.message}`).join(", "));return m.value}{let m=u;return typeof u=="string"&&h.type==="color"&&(m=Nr.parse(u)),{kind:"constant",evaluate:()=>m}}}(o===void 0?n.specification.default:o,n.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(n,o,u){return this.property.possiblyEvaluate(this,n,o,u)}}class k{constructor(n){this.property=n,this.value=new $(n,void 0)}transitioned(n,o){return new ie(this.property,this.value,o,yt({},n.transition,this.transition),n.now)}untransitioned(){return new ie(this.property,this.value,null,{},0)}}class q{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitionablePropertyValues)}getValue(n){return gt(this._values[n].value.value)}setValue(n,o){this._values.hasOwnProperty(n)||(this._values[n]=new k(this._values[n].property)),this._values[n].value=new $(this._values[n].property,o===null?void 0:gt(o))}getTransition(n){return gt(this._values[n].transition)}setTransition(n,o){this._values.hasOwnProperty(n)||(this._values[n]=new k(this._values[n].property)),this._values[n].transition=gt(o)||void 0}serialize(){const n={};for(const o of Object.keys(this._values)){const u=this.getValue(o);u!==void 0&&(n[o]=u);const h=this.getTransition(o);h!==void 0&&(n[`${o}-transition`]=h)}return n}transitioned(n,o){const u=new le(this._properties);for(const h of Object.keys(this._values))u._values[h]=this._values[h].transitioned(n,o._values[h]);return u}untransitioned(){const n=new le(this._properties);for(const o of Object.keys(this._values))n._values[o]=this._values[o].untransitioned();return n}}class ie{constructor(n,o,u,h,m){const v=h.delay||0,x=h.duration||0;m=m||0,this.property=n,this.value=o,this.begin=m+v,this.end=this.begin+x,n.specification.transition&&(h.delay||h.duration)&&(this.prior=u)}possiblyEvaluate(n,o,u){const h=n.now||0,m=this.value.possiblyEvaluate(n,o,u),v=this.prior;if(v){if(h>this.end)return this.prior=null,m;if(this.value.isDataDriven())return this.prior=null,m;if(h<this.begin)return v.possiblyEvaluate(n,o,u);{const x=(h-this.begin)/(this.end-this.begin);return this.property.interpolate(v.possiblyEvaluate(n,o,u),m,Fe(x))}}return m}}class le{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitioningPropertyValues)}possiblyEvaluate(n,o,u){const h=new me(this._properties);for(const m of Object.keys(this._values))h._values[m]=this._values[m].possiblyEvaluate(n,o,u);return h}hasTransition(){for(const n of Object.keys(this._values))if(this._values[n].prior)return!0;return!1}}class de{constructor(n){this._properties=n,this._values=Object.create(n.defaultPropertyValues)}getValue(n){return gt(this._values[n].value)}setValue(n,o){this._values[n]=new $(this._values[n].property,o===null?void 0:gt(o))}serialize(){const n={};for(const o of Object.keys(this._values)){const u=this.getValue(o);u!==void 0&&(n[o]=u)}return n}possiblyEvaluate(n,o,u){const h=new me(this._properties);for(const m of Object.keys(this._values))h._values[m]=this._values[m].possiblyEvaluate(n,o,u);return h}}class ce{constructor(n,o,u){this.property=n,this.value=o,this.parameters=u}isConstant(){return this.value.kind==="constant"}constantOr(n){return this.value.kind==="constant"?this.value.value:n}evaluate(n,o,u,h){return this.property.evaluate(this.value,this.parameters,n,o,u,h)}}class me{constructor(n){this._properties=n,this._values=Object.create(n.defaultPossiblyEvaluatedValues)}get(n){return this._values[n]}}class X{constructor(n){this.specification=n}possiblyEvaluate(n,o){return n.expression.evaluate(o)}interpolate(n,o,u){const h=Ic[this.specification.type];return h?h(n,o,u):n}}class se{constructor(n,o){this.specification=n,this.overrides=o}possiblyEvaluate(n,o,u,h){return new ce(this,n.expression.kind==="constant"||n.expression.kind==="camera"?{kind:"constant",value:n.expression.evaluate(o,null,{},u,h)}:n.expression,o)}interpolate(n,o,u){if(n.value.kind!=="constant"||o.value.kind!=="constant")return n;if(n.value.value===void 0||o.value.value===void 0)return new ce(this,{kind:"constant",value:void 0},n.parameters);const h=Ic[this.specification.type];return h?new ce(this,{kind:"constant",value:h(n.value.value,o.value.value,u)},n.parameters):n}evaluate(n,o,u,h,m,v){return n.kind==="constant"?n.value:n.evaluate(o,u,h,m,v)}}class xe{constructor(n){this.specification=n}possiblyEvaluate(n,o,u,h){return!!n.expression.evaluate(o,null,{},u,h)}interpolate(){return!1}}class be{constructor(n){this.properties=n,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const o=new O(0,{});for(const u in n){const h=n[u];h.specification.overridable&&this.overridableProperties.push(u);const m=this.defaultPropertyValues[u]=new $(h,void 0),v=this.defaultTransitionablePropertyValues[u]=new k(h);this.defaultTransitioningPropertyValues[u]=v.untransitioned(),this.defaultPossiblyEvaluatedValues[u]=m.possiblyEvaluate(o)}}}function Re(i,n){return 256*(i=pe(Math.floor(i),0,255))+pe(Math.floor(n),0,255)}Jt(se,"DataDrivenProperty"),Jt(X,"DataConstantProperty"),Jt(xe,"ColorRampProperty");const ze={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Oe{constructor(n,o){this._structArray=n,this._pos1=o*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Ve{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(n,o){return n._trim(),o&&(n.isTransferred=!0,o.push(n.arrayBuffer)),{length:n.length,arrayBuffer:n.arrayBuffer}}static deserialize(n){const o=Object.create(this.prototype);return o.arrayBuffer=n.arrayBuffer,o.length=n.length,o.capacity=n.arrayBuffer.byteLength/o.bytesPerElement,o._refreshViews(),o}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(n){this.reserve(n),this.length=n}reserve(n){if(n>this.capacity){this.capacity=Math.max(n,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const o=this.uint8;this._refreshViews(),o&&this.uint8.set(o)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function Ue(i,n=1){let o=0,u=0;return{members:i.map(h=>{const m=ze[h.type].BYTES_PER_ELEMENT,v=o=Ke(o,Math.max(n,m)),x=h.components||1;return u=Math.max(u,m),o+=m*x,{name:h.name,type:h.type,components:x,offset:v}}),size:Ke(o,Math.max(u,n)),alignment:n}}function Ke(i,n){return Math.ceil(i/n)*n}class wt extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,o){const u=this.length;return this.resize(u+1),this.emplace(u,n,o)}emplace(n,o,u){const h=2*n;return this.int16[h+0]=o,this.int16[h+1]=u,n}}wt.prototype.bytesPerElement=4,Jt(wt,"StructArrayLayout2i4");class We extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,o,u){const h=this.length;return this.resize(h+1),this.emplace(h,n,o,u)}emplace(n,o,u,h){const m=3*n;return this.int16[m+0]=o,this.int16[m+1]=u,this.int16[m+2]=h,n}}We.prototype.bytesPerElement=6,Jt(We,"StructArrayLayout3i6");class ct extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,o,u,h){const m=this.length;return this.resize(m+1),this.emplace(m,n,o,u,h)}emplace(n,o,u,h,m){const v=4*n;return this.int16[v+0]=o,this.int16[v+1]=u,this.int16[v+2]=h,this.int16[v+3]=m,n}}ct.prototype.bytesPerElement=8,Jt(ct,"StructArrayLayout4i8");class Qe extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,o,u,h,m,v,x){const S=this.length;return this.resize(S+1),this.emplace(S,n,o,u,h,m,v,x)}emplace(n,o,u,h,m,v,x,S){const E=6*n,R=12*n,z=3*n;return this.int16[E+0]=o,this.int16[E+1]=u,this.uint8[R+4]=h,this.uint8[R+5]=m,this.uint8[R+6]=v,this.uint8[R+7]=x,this.float32[z+2]=S,n}}Qe.prototype.bytesPerElement=12,Jt(Qe,"StructArrayLayout2i4ub1f12");class xt extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,o,u,h){const m=this.length;return this.resize(m+1),this.emplace(m,n,o,u,h)}emplace(n,o,u,h,m){const v=4*n;return this.float32[v+0]=o,this.float32[v+1]=u,this.float32[v+2]=h,this.float32[v+3]=m,n}}xt.prototype.bytesPerElement=16,Jt(xt,"StructArrayLayout4f16");class Xe extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,o,u,h,m){const v=this.length;return this.resize(v+1),this.emplace(v,n,o,u,h,m)}emplace(n,o,u,h,m,v){const x=6*n,S=3*n;return this.uint16[x+0]=o,this.uint16[x+1]=u,this.uint16[x+2]=h,this.uint16[x+3]=m,this.float32[S+2]=v,n}}Xe.prototype.bytesPerElement=12,Jt(Xe,"StructArrayLayout4ui1f12");class lt extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,o,u,h){const m=this.length;return this.resize(m+1),this.emplace(m,n,o,u,h)}emplace(n,o,u,h,m){const v=4*n;return this.uint16[v+0]=o,this.uint16[v+1]=u,this.uint16[v+2]=h,this.uint16[v+3]=m,n}}lt.prototype.bytesPerElement=8,Jt(lt,"StructArrayLayout4ui8");class It extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,o,u,h,m,v){const x=this.length;return this.resize(x+1),this.emplace(x,n,o,u,h,m,v)}emplace(n,o,u,h,m,v,x){const S=6*n;return this.int16[S+0]=o,this.int16[S+1]=u,this.int16[S+2]=h,this.int16[S+3]=m,this.int16[S+4]=v,this.int16[S+5]=x,n}}It.prototype.bytesPerElement=12,Jt(It,"StructArrayLayout6i12");class mt extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,o,u,h,m,v,x,S,E,R,z,L){const V=this.length;return this.resize(V+1),this.emplace(V,n,o,u,h,m,v,x,S,E,R,z,L)}emplace(n,o,u,h,m,v,x,S,E,R,z,L,V){const G=12*n;return this.int16[G+0]=o,this.int16[G+1]=u,this.int16[G+2]=h,this.int16[G+3]=m,this.uint16[G+4]=v,this.uint16[G+5]=x,this.uint16[G+6]=S,this.uint16[G+7]=E,this.int16[G+8]=R,this.int16[G+9]=z,this.int16[G+10]=L,this.int16[G+11]=V,n}}mt.prototype.bytesPerElement=24,Jt(mt,"StructArrayLayout4i4ui4i24");class Pt extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,o,u,h,m,v){const x=this.length;return this.resize(x+1),this.emplace(x,n,o,u,h,m,v)}emplace(n,o,u,h,m,v,x){const S=10*n,E=5*n;return this.int16[S+0]=o,this.int16[S+1]=u,this.int16[S+2]=h,this.float32[E+2]=m,this.float32[E+3]=v,this.float32[E+4]=x,n}}Pt.prototype.bytesPerElement=20,Jt(Pt,"StructArrayLayout3i3f20");class dn extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n){const o=this.length;return this.resize(o+1),this.emplace(o,n)}emplace(n,o){return this.uint32[1*n+0]=o,n}}dn.prototype.bytesPerElement=4,Jt(dn,"StructArrayLayout1ul4");class Rn extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,o,u,h,m,v,x,S,E,R,z,L,V){const G=this.length;return this.resize(G+1),this.emplace(G,n,o,u,h,m,v,x,S,E,R,z,L,V)}emplace(n,o,u,h,m,v,x,S,E,R,z,L,V,G){const K=20*n,ae=10*n;return this.int16[K+0]=o,this.int16[K+1]=u,this.int16[K+2]=h,this.int16[K+3]=m,this.int16[K+4]=v,this.float32[ae+3]=x,this.float32[ae+4]=S,this.float32[ae+5]=E,this.float32[ae+6]=R,this.int16[K+14]=z,this.uint32[ae+8]=L,this.uint16[K+18]=V,this.uint16[K+19]=G,n}}Rn.prototype.bytesPerElement=40,Jt(Rn,"StructArrayLayout5i4f1i1ul2ui40");class Qt extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,o,u,h,m,v,x){const S=this.length;return this.resize(S+1),this.emplace(S,n,o,u,h,m,v,x)}emplace(n,o,u,h,m,v,x,S){const E=8*n;return this.int16[E+0]=o,this.int16[E+1]=u,this.int16[E+2]=h,this.int16[E+4]=m,this.int16[E+5]=v,this.int16[E+6]=x,this.int16[E+7]=S,n}}Qt.prototype.bytesPerElement=16,Jt(Qt,"StructArrayLayout3i2i2i16");class yn extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,o,u,h,m){const v=this.length;return this.resize(v+1),this.emplace(v,n,o,u,h,m)}emplace(n,o,u,h,m,v){const x=4*n,S=8*n;return this.float32[x+0]=o,this.float32[x+1]=u,this.float32[x+2]=h,this.int16[S+6]=m,this.int16[S+7]=v,n}}yn.prototype.bytesPerElement=16,Jt(yn,"StructArrayLayout2f1f2i16");class Hn extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,o,u,h){const m=this.length;return this.resize(m+1),this.emplace(m,n,o,u,h)}emplace(n,o,u,h,m){const v=12*n,x=3*n;return this.uint8[v+0]=o,this.uint8[v+1]=u,this.float32[x+1]=h,this.float32[x+2]=m,n}}Hn.prototype.bytesPerElement=12,Jt(Hn,"StructArrayLayout2ub2f12");class Un extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,o,u){const h=this.length;return this.resize(h+1),this.emplace(h,n,o,u)}emplace(n,o,u,h){const m=3*n;return this.float32[m+0]=o,this.float32[m+1]=u,this.float32[m+2]=h,n}}Un.prototype.bytesPerElement=12,Jt(Un,"StructArrayLayout3f12");class cn extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,o,u){const h=this.length;return this.resize(h+1),this.emplace(h,n,o,u)}emplace(n,o,u,h){const m=3*n;return this.uint16[m+0]=o,this.uint16[m+1]=u,this.uint16[m+2]=h,n}}cn.prototype.bytesPerElement=6,Jt(cn,"StructArrayLayout3ui6");class ur extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n,o,u,h,m,v,x,S,E,R,z,L,V,G,K,ae,ge,Ce,ye,Ee,Ae){const Pe=this.length;return this.resize(Pe+1),this.emplace(Pe,n,o,u,h,m,v,x,S,E,R,z,L,V,G,K,ae,ge,Ce,ye,Ee,Ae)}emplace(n,o,u,h,m,v,x,S,E,R,z,L,V,G,K,ae,ge,Ce,ye,Ee,Ae,Pe){const Ye=30*n,qe=15*n,ot=60*n;return this.int16[Ye+0]=o,this.int16[Ye+1]=u,this.int16[Ye+2]=h,this.float32[qe+2]=m,this.float32[qe+3]=v,this.uint16[Ye+8]=x,this.uint16[Ye+9]=S,this.uint32[qe+5]=E,this.uint32[qe+6]=R,this.uint32[qe+7]=z,this.uint16[Ye+16]=L,this.uint16[Ye+17]=V,this.uint16[Ye+18]=G,this.float32[qe+10]=K,this.float32[qe+11]=ae,this.uint8[ot+48]=ge,this.uint8[ot+49]=Ce,this.uint8[ot+50]=ye,this.uint32[qe+13]=Ee,this.int16[Ye+28]=Ae,this.uint8[ot+58]=Pe,n}}ur.prototype.bytesPerElement=60,Jt(ur,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class vr extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n,o,u,h,m,v,x,S,E,R,z,L,V,G,K,ae,ge,Ce,ye,Ee,Ae,Pe,Ye,qe,ot,St,et,ht,ft,vt){const Dt=this.length;return this.resize(Dt+1),this.emplace(Dt,n,o,u,h,m,v,x,S,E,R,z,L,V,G,K,ae,ge,Ce,ye,Ee,Ae,Pe,Ye,qe,ot,St,et,ht,ft,vt)}emplace(n,o,u,h,m,v,x,S,E,R,z,L,V,G,K,ae,ge,Ce,ye,Ee,Ae,Pe,Ye,qe,ot,St,et,ht,ft,vt,Dt){const rt=38*n,Gt=19*n;return this.int16[rt+0]=o,this.int16[rt+1]=u,this.int16[rt+2]=h,this.float32[Gt+2]=m,this.float32[Gt+3]=v,this.int16[rt+8]=x,this.int16[rt+9]=S,this.int16[rt+10]=E,this.int16[rt+11]=R,this.int16[rt+12]=z,this.int16[rt+13]=L,this.uint16[rt+14]=V,this.uint16[rt+15]=G,this.uint16[rt+16]=K,this.uint16[rt+17]=ae,this.uint16[rt+18]=ge,this.uint16[rt+19]=Ce,this.uint16[rt+20]=ye,this.uint16[rt+21]=Ee,this.uint16[rt+22]=Ae,this.uint16[rt+23]=Pe,this.uint16[rt+24]=Ye,this.uint16[rt+25]=qe,this.uint16[rt+26]=ot,this.uint16[rt+27]=St,this.uint16[rt+28]=et,this.uint32[Gt+15]=ht,this.float32[Gt+16]=ft,this.float32[Gt+17]=vt,this.float32[Gt+18]=Dt,n}}vr.prototype.bytesPerElement=76,Jt(vr,"StructArrayLayout3i2f6i15ui1ul3f76");class yr extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n){const o=this.length;return this.resize(o+1),this.emplace(o,n)}emplace(n,o){return this.float32[1*n+0]=o,n}}yr.prototype.bytesPerElement=4,Jt(yr,"StructArrayLayout1f4");class _r extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,o,u,h,m){const v=this.length;return this.resize(v+1),this.emplace(v,n,o,u,h,m)}emplace(n,o,u,h,m,v){const x=5*n;return this.float32[x+0]=o,this.float32[x+1]=u,this.float32[x+2]=h,this.float32[x+3]=m,this.float32[x+4]=v,n}}_r.prototype.bytesPerElement=20,Jt(_r,"StructArrayLayout5f20");class Hi extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,o,u,h){const m=this.length;return this.resize(m+1),this.emplace(m,n,o,u,h)}emplace(n,o,u,h,m){const v=6*n;return this.uint32[3*n+0]=o,this.uint16[v+2]=u,this.uint16[v+3]=h,this.uint16[v+4]=m,n}}Hi.prototype.bytesPerElement=12,Jt(Hi,"StructArrayLayout1ul3ui12");class Ti extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,o){const u=this.length;return this.resize(u+1),this.emplace(u,n,o)}emplace(n,o,u){const h=2*n;return this.uint16[h+0]=o,this.uint16[h+1]=u,n}}Ti.prototype.bytesPerElement=4,Jt(Ti,"StructArrayLayout2ui4");class Lo extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n){const o=this.length;return this.resize(o+1),this.emplace(o,n)}emplace(n,o){return this.uint16[1*n+0]=o,n}}Lo.prototype.bytesPerElement=2,Jt(Lo,"StructArrayLayout1ui2");class wa extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,o){const u=this.length;return this.resize(u+1),this.emplace(u,n,o)}emplace(n,o,u){const h=2*n;return this.float32[h+0]=o,this.float32[h+1]=u,n}}wa.prototype.bytesPerElement=8,Jt(wa,"StructArrayLayout2f8");class jr extends Oe{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}jr.prototype.size=40;class xr extends Rn{get(n){return new jr(this,n)}}Jt(xr,"CollisionBoxArray");class rr extends Oe{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(n){this._structArray.uint8[this._pos1+49]=n}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(n){this._structArray.uint8[this._pos1+50]=n}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(n){this._structArray.uint32[this._pos4+13]=n}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(n){this._structArray.uint8[this._pos1+58]=n}}rr.prototype.size=60;class ai extends ur{get(n){return new rr(this,n)}}Jt(ai,"PlacedSymbolArray");class Ki extends Oe{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(n){this._structArray.uint32[this._pos4+15]=n}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}Ki.prototype.size=76;class Dr extends vr{get(n){return new Ki(this,n)}}Jt(Dr,"SymbolInstanceArray");class oo extends yr{getoffsetX(n){return this.float32[1*n+0]}}Jt(oo,"GlyphOffsetArray");class nd extends wt{getx(n){return this.int16[2*n+0]}gety(n){return this.int16[2*n+1]}}Jt(nd,"SymbolLineVertexArray");class Zs extends Oe{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}Zs.prototype.size=12;class jc extends Hi{get(n){return new Zs(this,n)}}Jt(jc,"FeatureIndexArray");class Wa extends Ti{geta_centroid_pos0(n){return this.uint16[2*n+0]}geta_centroid_pos1(n){return this.uint16[2*n+1]}}Jt(Wa,"FillExtrusionCentroidArray");const Ss=Ue([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),Xs=Ue([{name:"a_dash",components:4,type:"Uint16"}]);var rd={exports:{}},Uc={exports:{}};Uc.exports=function(i,n){var o,u,h,m,v,x,S,E;for(u=i.length-(o=3&i.length),h=n,v=3432918353,x=461845907,E=0;E<u;)S=255&i.charCodeAt(E)|(255&i.charCodeAt(++E))<<8|(255&i.charCodeAt(++E))<<16|(255&i.charCodeAt(++E))<<24,++E,h=27492+(65535&(m=5*(65535&(h=(h^=S=(65535&(S=(S=(65535&S)*v+(((S>>>16)*v&65535)<<16)&4294967295)<<15|S>>>17))*x+(((S>>>16)*x&65535)<<16)&4294967295)<<13|h>>>19))+((5*(h>>>16)&65535)<<16)&4294967295))+((58964+(m>>>16)&65535)<<16);switch(S=0,o){case 3:S^=(255&i.charCodeAt(E+2))<<16;case 2:S^=(255&i.charCodeAt(E+1))<<8;case 1:h^=S=(65535&(S=(S=(65535&(S^=255&i.charCodeAt(E)))*v+(((S>>>16)*v&65535)<<16)&4294967295)<<15|S>>>17))*x+(((S>>>16)*x&65535)<<16)&4294967295}return h^=i.length,h=2246822507*(65535&(h^=h>>>16))+((2246822507*(h>>>16)&65535)<<16)&4294967295,h=3266489909*(65535&(h^=h>>>13))+((3266489909*(h>>>16)&65535)<<16)&4294967295,(h^=h>>>16)>>>0};var xf=Uc.exports,pE={exports:{}};pE.exports=function(i,n){for(var o,u=i.length,h=n^u,m=0;u>=4;)o=1540483477*(65535&(o=255&i.charCodeAt(m)|(255&i.charCodeAt(++m))<<8|(255&i.charCodeAt(++m))<<16|(255&i.charCodeAt(++m))<<24))+((1540483477*(o>>>16)&65535)<<16),h=1540483477*(65535&h)+((1540483477*(h>>>16)&65535)<<16)^(o=1540483477*(65535&(o^=o>>>24))+((1540483477*(o>>>16)&65535)<<16)),u-=4,++m;switch(u){case 3:h^=(255&i.charCodeAt(m+2))<<16;case 2:h^=(255&i.charCodeAt(m+1))<<8;case 1:h=1540483477*(65535&(h^=255&i.charCodeAt(m)))+((1540483477*(h>>>16)&65535)<<16)}return h=1540483477*(65535&(h^=h>>>13))+((1540483477*(h>>>16)&65535)<<16),(h^=h>>>15)>>>0};var mE=xf,xL=pE.exports;rd.exports=mE,rd.exports.murmur3=mE,rd.exports.murmur2=xL;var h_=H(rd.exports);class fg{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(n,o,u,h){this.ids.push(gE(n)),this.positions.push(o,u,h)}getPositions(n){const o=gE(n);let u=0,h=this.ids.length-1;for(;u<h;){const v=u+h>>1;this.ids[v]>=o?h=v:u=v+1}const m=[];for(;this.ids[u]===o;)m.push({index:this.positions[3*u],start:this.positions[3*u+1],end:this.positions[3*u+2]}),u++;return m}static serialize(n,o){const u=new Float64Array(n.ids),h=new Uint32Array(n.positions);return f_(u,h,0,u.length-1),o&&o.push(u.buffer,h.buffer),{ids:u,positions:h}}static deserialize(n){const o=new fg;return o.ids=n.ids,o.positions=n.positions,o.indexed=!0,o}}function gE(i){const n=+i;return!isNaN(n)&&Number.MIN_SAFE_INTEGER<=n&&n<=Number.MAX_SAFE_INTEGER?n:h_(String(i))}function f_(i,n,o,u){for(;o<u;){const h=i[o+u>>1];let m=o-1,v=u+1;for(;;){do m++;while(i[m]<h);do v--;while(i[v]>h);if(m>=v)break;pg(i,m,v),pg(n,3*m,3*v),pg(n,3*m+1,3*v+1),pg(n,3*m+2,3*v+2)}v-o<u-v?(f_(i,n,o,v),o=v+1):(f_(i,n,v+1,u),u=v)}}function pg(i,n,o){const u=i[n];i[n]=i[o],i[o]=u}Jt(fg,"FeaturePositionMap");class Ks{constructor(n){this.gl=n.gl,this.initialized=!1}fetchUniformLocation(n,o){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(n,o),this.initialized=!0),!!this.location}}class mg extends Ks{constructor(n){super(n),this.current=0}set(n,o,u){this.fetchUniformLocation(n,o)&&this.current!==u&&(this.current=u,this.gl.uniform1f(this.location,u))}}class vE extends Ks{constructor(n){super(n),this.current=[0,0,0,0]}set(n,o,u){this.fetchUniformLocation(n,o)&&(u[0]===this.current[0]&&u[1]===this.current[1]&&u[2]===this.current[2]&&u[3]===this.current[3]||(this.current=u,this.gl.uniform4f(this.location,u[0],u[1],u[2],u[3])))}}class yE extends Ks{constructor(n){super(n),this.current=Nr.transparent}set(n,o,u){this.fetchUniformLocation(n,o)&&(u.r===this.current.r&&u.g===this.current.g&&u.b===this.current.b&&u.a===this.current.a||(this.current=u,this.gl.uniform4f(this.location,u.r,u.g,u.b,u.a)))}}const bL=new Float32Array(16),wL=new Float32Array(9),SL=new Float32Array(4);function p_(i){return[Re(255*i.r,255*i.g),Re(255*i.b,255*i.a)]}class bf{constructor(n,o,u){this.value=n,this.uniformNames=o.map(h=>`u_${h}`),this.type=u}setUniform(n,o,u,h,m){o.set(n,m,h.constantOr(this.value))}getBinding(n,o){return this.type==="color"?new yE(n):new mg(n)}}class id{constructor(n,o){this.uniformNames=o.map(u=>`u_${u}`),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(n){this.pixelRatio=n.pixelRatio||1,this.pattern=n.tl.concat(n.br)}setUniform(n,o,u,h,m){const v=m==="u_pattern"||m==="u_dash"?this.pattern:m==="u_pixel_ratio"?this.pixelRatio:null;v&&o.set(n,m,v)}getBinding(n,o){return o==="u_pattern"||o==="u_dash"?new vE(n):new mg(n)}}class Ys{constructor(n,o,u,h){this.expression=n,this.type=u,this.maxValue=0,this.paintVertexAttributes=o.map(m=>({name:`a_${m}`,type:"Float32",components:u==="color"?2:1,offset:0})),this.paintVertexArray=new h}populatePaintArray(n,o,u,h,m,v){const x=this.paintVertexArray.length,S=this.expression.evaluate(new O(0),o,{},m,h,v);this.paintVertexArray.resize(n),this._setPaintValue(x,n,S)}updatePaintArray(n,o,u,h,m){const v=this.expression.evaluate({zoom:0},u,h,void 0,m);this._setPaintValue(n,o,v)}_setPaintValue(n,o,u){if(this.type==="color"){const h=p_(u);for(let m=n;m<o;m++)this.paintVertexArray.emplace(m,h[0],h[1])}else{for(let h=n;h<o;h++)this.paintVertexArray.emplace(h,u);this.maxValue=Math.max(this.maxValue,Math.abs(u))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class qa{constructor(n,o,u,h,m,v){this.expression=n,this.uniformNames=o.map(x=>`u_${x}_t`),this.type=u,this.useIntegerZoom=h,this.zoom=m,this.maxValue=0,this.paintVertexAttributes=o.map(x=>({name:`a_${x}`,type:"Float32",components:u==="color"?4:2,offset:0})),this.paintVertexArray=new v}populatePaintArray(n,o,u,h,m,v){const x=this.expression.evaluate(new O(this.zoom),o,{},m,h,v),S=this.expression.evaluate(new O(this.zoom+1),o,{},m,h,v),E=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValue(E,n,x,S)}updatePaintArray(n,o,u,h,m){const v=this.expression.evaluate({zoom:this.zoom},u,h,void 0,m),x=this.expression.evaluate({zoom:this.zoom+1},u,h,void 0,m);this._setPaintValue(n,o,v,x)}_setPaintValue(n,o,u,h){if(this.type==="color"){const m=p_(u),v=p_(h);for(let x=n;x<o;x++)this.paintVertexArray.emplace(x,m[0],m[1],v[0],v[1])}else{for(let m=n;m<o;m++)this.paintVertexArray.emplace(m,u,h);this.maxValue=Math.max(this.maxValue,Math.abs(u),Math.abs(h))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(n,o,u,h,m){const v=this.useIntegerZoom?Math.floor(u.zoom):u.zoom,x=pe(this.expression.interpolationFactor(v,this.zoom,this.zoom+1),0,1);o.set(n,m,x)}getBinding(n,o){return new mg(n)}}class Fl{constructor(n,o,u,h,m){this.expression=n,this.layerId=m,this.paintVertexAttributes=(u==="array"?Xs:Ss).members;for(let v=0;v<o.length;++v);this.paintVertexArray=new h}populatePaintArray(n,o,u){const h=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValues(h,n,o.patterns&&o.patterns[this.layerId],u)}updatePaintArray(n,o,u,h,m,v){this._setPaintValues(n,o,u.patterns&&u.patterns[this.layerId],v)}_setPaintValues(n,o,u,h){if(!h||!u)return;const m=h[u];if(!m)return;const{tl:v,br:x,pixelRatio:S}=m;for(let E=n;E<o;E++)this.paintVertexArray.emplace(E,v[0],v[1],x[0],x[1],S)}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Bl{constructor(n,o,u=()=>!0){this.binders={},this._buffers=[];const h=[];for(const m in n.paint._values){if(!u(m))continue;const v=n.paint.get(m);if(!(v instanceof ce&&Al(v.property.specification)))continue;const x=CL(m,n.type),S=v.value,E=v.property.specification.type,R=!!v.property.useIntegerZoom,z=m==="line-dasharray"||m.endsWith("pattern"),L=m==="line-dasharray"&&n.layout.get("line-cap").value.kind!=="constant";if(S.kind!=="constant"||L)if(S.kind==="source"||L||z){const V=_E(m,E,"source");this.binders[m]=z?new Fl(S,x,E,V,n.id):new Ys(S,x,E,V),h.push(`/a_${m}`)}else{const V=_E(m,E,"composite");this.binders[m]=new qa(S,x,E,R,o,V),h.push(`/z_${m}`)}else this.binders[m]=z?new id(S.value,x):new bf(S.value,x,E),h.push(`/u_${m}`)}this.cacheKey=h.sort().join("")}getMaxValue(n){const o=this.binders[n];return o instanceof Ys||o instanceof qa?o.maxValue:0}populatePaintArrays(n,o,u,h,m,v){for(const x in this.binders){const S=this.binders[x];(S instanceof Ys||S instanceof qa||S instanceof Fl)&&S.populatePaintArray(n,o,u,h,m,v)}}setConstantPatternPositions(n){for(const o in this.binders){const u=this.binders[o];u instanceof id&&u.setConstantPatternPositions(n)}}updatePaintArrays(n,o,u,h,m,v){let x=!1;for(const S in n){const E=o.getPositions(S);for(const R of E){const z=u.feature(R.index);for(const L in this.binders){const V=this.binders[L];if((V instanceof Ys||V instanceof qa||V instanceof Fl)&&V.expression.isStateDependent===!0){const G=h.paint.get(L);V.expression=G.value,V.updatePaintArray(R.start,R.end,z,n[S],m,v),x=!0}}}}return x}defines(){const n=[];for(const o in this.binders){const u=this.binders[o];(u instanceof bf||u instanceof id)&&n.push(...u.uniformNames.map(h=>`#define HAS_UNIFORM_${h}`))}return n}getBinderAttributes(){const n=[];for(const o in this.binders){const u=this.binders[o];if(u instanceof Ys||u instanceof qa||u instanceof Fl)for(let h=0;h<u.paintVertexAttributes.length;h++)n.push(u.paintVertexAttributes[h].name)}return n}getBinderUniforms(){const n=[];for(const o in this.binders){const u=this.binders[o];if(u instanceof bf||u instanceof id||u instanceof qa)for(const h of u.uniformNames)n.push(h)}return n}getPaintVertexBuffers(){return this._buffers}getUniforms(n){const o=[];for(const u in this.binders){const h=this.binders[u];if(h instanceof bf||h instanceof id||h instanceof qa)for(const m of h.uniformNames)o.push({name:m,property:u,binding:h.getBinding(n,m)})}return o}setUniforms(n,o,u,h,m){for(const{name:v,property:x,binding:S}of u)this.binders[x].setUniform(n,S,m,h.get(x),v)}updatePaintBuffers(){this._buffers=[];for(const n in this.binders){const o=this.binders[n];(o instanceof Ys||o instanceof qa||o instanceof Fl)&&o.paintVertexBuffer&&this._buffers.push(o.paintVertexBuffer)}}upload(n){for(const o in this.binders){const u=this.binders[o];(u instanceof Ys||u instanceof qa||u instanceof Fl)&&u.upload(n)}this.updatePaintBuffers()}destroy(){for(const n in this.binders){const o=this.binders[n];(o instanceof Ys||o instanceof qa||o instanceof Fl)&&o.destroy()}}}class Vc{constructor(n,o,u=()=>!0){this.programConfigurations={};for(const h of n)this.programConfigurations[h.id]=new Bl(h,o,u);this.needsUpload=!1,this._featureMap=new fg,this._bufferOffset=0}populatePaintArrays(n,o,u,h,m,v,x){for(const S in this.programConfigurations)this.programConfigurations[S].populatePaintArrays(n,o,h,m,v,x);o.id!==void 0&&this._featureMap.add(o.id,u,this._bufferOffset,n),this._bufferOffset=n,this.needsUpload=!0}updatePaintArrays(n,o,u,h,m){for(const v of u)this.needsUpload=this.programConfigurations[v.id].updatePaintArrays(n,this._featureMap,o,v,h,m)||this.needsUpload}get(n){return this.programConfigurations[n]}upload(n){if(this.needsUpload){for(const o in this.programConfigurations)this.programConfigurations[o].upload(n);this.needsUpload=!1}}destroy(){for(const n in this.programConfigurations)this.programConfigurations[n].destroy()}}const EL={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function CL(i,n){return EL[i]||[i.replace(`${n}-`,"").replace(/-/g,"_")]}const TL={"line-pattern":{source:Xe,composite:Xe},"fill-pattern":{source:Xe,composite:Xe},"fill-extrusion-pattern":{source:Xe,composite:Xe},"line-dasharray":{source:lt,composite:lt}},IL={color:{source:wa,composite:xt},number:{source:yr,composite:wa}};function _E(i,n,o){const u=TL[i];return u&&u[o]||IL[n][o]}Jt(bf,"ConstantBinder"),Jt(id,"PatternConstantBinder"),Jt(Ys,"SourceExpressionBinder"),Jt(Fl,"PatternCompositeBinder"),Jt(qa,"CompositeExpressionBinder"),Jt(Bl,"ProgramConfiguration",{omit:["_buffers"]}),Jt(Vc,"ProgramConfigurationSet");const xE="-transition";class Za extends Oi{constructor(n,o){if(super(),this.id=n.id,this.type=n.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,n.type!=="custom"&&(this.metadata=n.metadata,this.minzoom=n.minzoom,this.maxzoom=n.maxzoom,n.type!=="background"&&n.type!=="sky"&&(this.source=n.source,this.sourceLayer=n["source-layer"],this.filter=n.filter),o.layout&&(this._unevaluatedLayout=new de(o.layout)),o.paint)){this._transitionablePaint=new q(o.paint);for(const u in n.paint)this.setPaintProperty(u,n.paint[u],{validate:!1});for(const u in n.layout)this.setLayoutProperty(u,n.layout[u],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new me(o.paint)}}getLayoutProperty(n){return n==="visibility"?this.visibility:this._unevaluatedLayout.getValue(n)}setLayoutProperty(n,o,u={}){o!=null&&this._validate(s_,`layers.${this.id}.layout.${n}`,n,o,u)||(n!=="visibility"?this._unevaluatedLayout.setValue(n,o):this.visibility=o)}getPaintProperty(n){return At(n,xE)?this._transitionablePaint.getTransition(n.slice(0,-11)):this._transitionablePaint.getValue(n)}setPaintProperty(n,o,u={}){if(o!=null&&this._validate(a_,`layers.${this.id}.paint.${n}`,n,o,u))return!1;if(At(n,xE))return this._transitionablePaint.setTransition(n.slice(0,-11),o||void 0),!1;{const h=this._transitionablePaint._values[n],m=h.value.isDataDriven(),v=h.value;this._transitionablePaint.setValue(n,o),this._handleSpecialPaintPropertyUpdate(n);const x=this._transitionablePaint._values[n].value,S=x.isDataDriven(),E=At(n,"pattern")||n==="line-dasharray";return S||m||E||this._handleOverridablePaintPropertyUpdate(n,v,x)}}_handleSpecialPaintPropertyUpdate(n){}getProgramIds(){return null}getProgramConfiguration(n){return null}_handleOverridablePaintPropertyUpdate(n,o,u){return!1}isHidden(n){return!!(this.minzoom&&n<this.minzoom)||!!(this.maxzoom&&n>=this.maxzoom)||this.visibility==="none"}updateTransitions(n){this._transitioningPaint=this._transitionablePaint.transitioned(n,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(n,o){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(n,void 0,o)),this.paint=this._transitioningPaint.possiblyEvaluate(n,void 0,o)}serialize(){const n={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(n.layout=n.layout||{},n.layout.visibility=this.visibility),Bt(n,(o,u)=>!(o===void 0||u==="layout"&&!Object.keys(o).length||u==="paint"&&!Object.keys(o).length))}_validate(n,o,u,h,m={}){return(!m||m.validate!==!1)&&cg(this,n.call(lg,{key:o,layerType:this.type,objectKey:u,value:h,styleSpec:tt,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const n in this.paint._values){const o=this.paint.get(n);if(o instanceof ce&&Al(o.property.specification)&&(o.value.kind==="source"||o.value.kind==="composite")&&o.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=Ju(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}const ML=Ue([{name:"a_pos",components:2,type:"Int16"}],4),PL=Ue([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class si{constructor(n=[]){this.segments=n}prepareSegment(n,o,u,h){let m=this.segments[this.segments.length-1];return n>si.MAX_VERTEX_ARRAY_LENGTH&&zt(`Max vertices per segment is ${si.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${n}`),(!m||m.vertexLength+n>si.MAX_VERTEX_ARRAY_LENGTH||m.sortKey!==h)&&(m={vertexOffset:o.length,primitiveOffset:u.length,vertexLength:0,primitiveLength:0},h!==void 0&&(m.sortKey=h),this.segments.push(m)),m}get(){return this.segments}destroy(){for(const n of this.segments)for(const o in n.vaos)n.vaos[o].destroy()}static simpleSegment(n,o,u,h){return new si([{vertexOffset:n,primitiveOffset:o,vertexLength:u,primitiveLength:h,vaos:{},sortKey:0}])}}si.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Jt(si,"SegmentVector");var mn=8192;class Nl{constructor(n,o){n&&(o?this.setSouthWest(n).setNorthEast(o):n.length===4?this.setSouthWest([n[0],n[1]]).setNorthEast([n[2],n[3]]):this.setSouthWest(n[0]).setNorthEast(n[1]))}setNorthEast(n){return this._ne=n instanceof br?new br(n.lng,n.lat):br.convert(n),this}setSouthWest(n){return this._sw=n instanceof br?new br(n.lng,n.lat):br.convert(n),this}extend(n){const o=this._sw,u=this._ne;let h,m;if(n instanceof br)h=n,m=n;else{if(!(n instanceof Nl))return Array.isArray(n)?n.length===4||n.every(Array.isArray)?this.extend(Nl.convert(n)):this.extend(br.convert(n)):typeof n=="object"&&n!==null&&n.hasOwnProperty("lat")&&(n.hasOwnProperty("lon")||n.hasOwnProperty("lng"))?this.extend(br.convert(n)):this;if(h=n._sw,m=n._ne,!h||!m)return this}return o||u?(o.lng=Math.min(h.lng,o.lng),o.lat=Math.min(h.lat,o.lat),u.lng=Math.max(m.lng,u.lng),u.lat=Math.max(m.lat,u.lat)):(this._sw=new br(h.lng,h.lat),this._ne=new br(m.lng,m.lat)),this}getCenter(){return new br((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new br(this.getWest(),this.getNorth())}getSouthEast(){return new br(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(n){const{lng:o,lat:u}=br.convert(n);let h=this._sw.lng<=o&&o<=this._ne.lng;return this._sw.lng>this._ne.lng&&(h=this._sw.lng>=o&&o>=this._ne.lng),this._sw.lat<=u&&u<=this._ne.lat&&h}static convert(n){return!n||n instanceof Nl?n:new Nl(n)}}var gg=1e-6,ko=typeof Float32Array<"u"?Float32Array:Array;function bE(){var i=new ko(9);return ko!=Float32Array&&(i[1]=0,i[2]=0,i[3]=0,i[5]=0,i[6]=0,i[7]=0),i[0]=1,i[4]=1,i[8]=1,i}function wE(i,n,o){var u=n[0],h=n[1],m=n[2],v=n[3],x=n[4],S=n[5],E=n[6],R=n[7],z=n[8],L=o[0],V=o[1],G=o[2],K=o[3],ae=o[4],ge=o[5],Ce=o[6],ye=o[7],Ee=o[8];return i[0]=L*u+V*v+G*E,i[1]=L*h+V*x+G*R,i[2]=L*m+V*S+G*z,i[3]=K*u+ae*v+ge*E,i[4]=K*h+ae*x+ge*R,i[5]=K*m+ae*S+ge*z,i[6]=Ce*u+ye*v+Ee*E,i[7]=Ce*h+ye*x+Ee*R,i[8]=Ce*m+ye*S+Ee*z,i}function Xa(i){return i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}function m_(i,n){var o=n[0],u=n[1],h=n[2],m=n[3],v=n[4],x=n[5],S=n[6],E=n[7],R=n[8],z=n[9],L=n[10],V=n[11],G=n[12],K=n[13],ae=n[14],ge=n[15],Ce=o*x-u*v,ye=o*S-h*v,Ee=o*E-m*v,Ae=u*S-h*x,Pe=u*E-m*x,Ye=h*E-m*S,qe=R*K-z*G,ot=R*ae-L*G,St=R*ge-V*G,et=z*ae-L*K,ht=z*ge-V*K,ft=L*ge-V*ae,vt=Ce*ft-ye*ht+Ee*et+Ae*St-Pe*ot+Ye*qe;return vt?(i[0]=(x*ft-S*ht+E*et)*(vt=1/vt),i[1]=(h*ht-u*ft-m*et)*vt,i[2]=(K*Ye-ae*Pe+ge*Ae)*vt,i[3]=(L*Pe-z*Ye-V*Ae)*vt,i[4]=(S*St-v*ft-E*ot)*vt,i[5]=(o*ft-h*St+m*ot)*vt,i[6]=(ae*Ee-G*Ye-ge*ye)*vt,i[7]=(R*Ye-L*Ee+V*ye)*vt,i[8]=(v*ht-x*St+E*qe)*vt,i[9]=(u*St-o*ht-m*qe)*vt,i[10]=(G*Pe-K*Ee+ge*Ce)*vt,i[11]=(z*Ee-R*Pe-V*Ce)*vt,i[12]=(x*ot-v*et-S*qe)*vt,i[13]=(o*et-u*ot+h*qe)*vt,i[14]=(K*ye-G*Ae-ae*Ce)*vt,i[15]=(R*Ae-z*ye+L*Ce)*vt,i):null}function Hc(i,n,o){var u=n[0],h=n[1],m=n[2],v=n[3],x=n[4],S=n[5],E=n[6],R=n[7],z=n[8],L=n[9],V=n[10],G=n[11],K=n[12],ae=n[13],ge=n[14],Ce=n[15],ye=o[0],Ee=o[1],Ae=o[2],Pe=o[3];return i[0]=ye*u+Ee*x+Ae*z+Pe*K,i[1]=ye*h+Ee*S+Ae*L+Pe*ae,i[2]=ye*m+Ee*E+Ae*V+Pe*ge,i[3]=ye*v+Ee*R+Ae*G+Pe*Ce,i[4]=(ye=o[4])*u+(Ee=o[5])*x+(Ae=o[6])*z+(Pe=o[7])*K,i[5]=ye*h+Ee*S+Ae*L+Pe*ae,i[6]=ye*m+Ee*E+Ae*V+Pe*ge,i[7]=ye*v+Ee*R+Ae*G+Pe*Ce,i[8]=(ye=o[8])*u+(Ee=o[9])*x+(Ae=o[10])*z+(Pe=o[11])*K,i[9]=ye*h+Ee*S+Ae*L+Pe*ae,i[10]=ye*m+Ee*E+Ae*V+Pe*ge,i[11]=ye*v+Ee*R+Ae*G+Pe*Ce,i[12]=(ye=o[12])*u+(Ee=o[13])*x+(Ae=o[14])*z+(Pe=o[15])*K,i[13]=ye*h+Ee*S+Ae*L+Pe*ae,i[14]=ye*m+Ee*E+Ae*V+Pe*ge,i[15]=ye*v+Ee*R+Ae*G+Pe*Ce,i}function wf(i,n,o){var u,h,m,v,x,S,E,R,z,L,V,G,K=o[0],ae=o[1],ge=o[2];return n===i?(i[12]=n[0]*K+n[4]*ae+n[8]*ge+n[12],i[13]=n[1]*K+n[5]*ae+n[9]*ge+n[13],i[14]=n[2]*K+n[6]*ae+n[10]*ge+n[14],i[15]=n[3]*K+n[7]*ae+n[11]*ge+n[15]):(h=n[1],m=n[2],v=n[3],x=n[4],S=n[5],E=n[6],R=n[7],z=n[8],L=n[9],V=n[10],G=n[11],i[0]=u=n[0],i[1]=h,i[2]=m,i[3]=v,i[4]=x,i[5]=S,i[6]=E,i[7]=R,i[8]=z,i[9]=L,i[10]=V,i[11]=G,i[12]=u*K+x*ae+z*ge+n[12],i[13]=h*K+S*ae+L*ge+n[13],i[14]=m*K+E*ae+V*ge+n[14],i[15]=v*K+R*ae+G*ge+n[15]),i}function Gc(i,n,o){var u=o[0],h=o[1],m=o[2];return i[0]=n[0]*u,i[1]=n[1]*u,i[2]=n[2]*u,i[3]=n[3]*u,i[4]=n[4]*h,i[5]=n[5]*h,i[6]=n[6]*h,i[7]=n[7]*h,i[8]=n[8]*m,i[9]=n[9]*m,i[10]=n[10]*m,i[11]=n[11]*m,i[12]=n[12],i[13]=n[13],i[14]=n[14],i[15]=n[15],i}function g_(i,n,o){var u=Math.sin(o),h=Math.cos(o),m=n[4],v=n[5],x=n[6],S=n[7],E=n[8],R=n[9],z=n[10],L=n[11];return n!==i&&(i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=n[3],i[12]=n[12],i[13]=n[13],i[14]=n[14],i[15]=n[15]),i[4]=m*h+E*u,i[5]=v*h+R*u,i[6]=x*h+z*u,i[7]=S*h+L*u,i[8]=E*h-m*u,i[9]=R*h-v*u,i[10]=z*h-x*u,i[11]=L*h-S*u,i}function vg(i,n,o){var u=Math.sin(o),h=Math.cos(o),m=n[0],v=n[1],x=n[2],S=n[3],E=n[8],R=n[9],z=n[10],L=n[11];return n!==i&&(i[4]=n[4],i[5]=n[5],i[6]=n[6],i[7]=n[7],i[12]=n[12],i[13]=n[13],i[14]=n[14],i[15]=n[15]),i[0]=m*h-E*u,i[1]=v*h-R*u,i[2]=x*h-z*u,i[3]=S*h-L*u,i[8]=m*u+E*h,i[9]=v*u+R*h,i[10]=x*u+z*h,i[11]=S*u+L*h,i}function SE(i,n){return i[0]=n[0],i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=n[1],i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=n[2],i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}function EE(i,n,o){var u,h,m,v=o[0],x=o[1],S=o[2],E=Math.hypot(v,x,S);return E<gg?null:(v*=E=1/E,x*=E,S*=E,u=Math.sin(n),h=Math.cos(n),i[0]=v*v*(m=1-h)+h,i[1]=x*v*m+S*u,i[2]=S*v*m-x*u,i[3]=0,i[4]=v*x*m-S*u,i[5]=x*x*m+h,i[6]=S*x*m+v*u,i[7]=0,i[8]=v*S*m+x*u,i[9]=x*S*m-v*u,i[10]=S*S*m+h,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i)}Math.hypot||(Math.hypot=function(){for(var i=0,n=arguments.length;n--;)i+=arguments[n]*arguments[n];return Math.sqrt(i)});var AL=Hc;function v_(){var i=new ko(3);return ko!=Float32Array&&(i[0]=0,i[1]=0,i[2]=0),i}function CE(i){var n=new ko(3);return n[0]=i[0],n[1]=i[1],n[2]=i[2],n}function Sf(i){return Math.hypot(i[0],i[1],i[2])}function od(i,n,o){var u=new ko(3);return u[0]=i,u[1]=n,u[2]=o,u}function Js(i,n,o){return i[0]=n[0]+o[0],i[1]=n[1]+o[1],i[2]=n[2]+o[2],i}function y_(i,n,o){return i[0]=n[0]-o[0],i[1]=n[1]-o[1],i[2]=n[2]-o[2],i}function TE(i,n,o){return i[0]=n[0]*o[0],i[1]=n[1]*o[1],i[2]=n[2]*o[2],i}function Ef(i,n,o){return i[0]=Math.min(n[0],o[0]),i[1]=Math.min(n[1],o[1]),i[2]=Math.min(n[2],o[2]),i}function Cf(i,n,o){return i[0]=Math.max(n[0],o[0]),i[1]=Math.max(n[1],o[1]),i[2]=Math.max(n[2],o[2]),i}function Ko(i,n,o){return i[0]=n[0]*o,i[1]=n[1]*o,i[2]=n[2]*o,i}function Tf(i,n,o,u){return i[0]=n[0]+o[0]*u,i[1]=n[1]+o[1]*u,i[2]=n[2]+o[2]*u,i}function ao(i,n){var o=n[0],u=n[1],h=n[2],m=o*o+u*u+h*h;return m>0&&(m=1/Math.sqrt(m)),i[0]=n[0]*m,i[1]=n[1]*m,i[2]=n[2]*m,i}function Sa(i,n){return i[0]*n[0]+i[1]*n[1]+i[2]*n[2]}function __(i,n,o){var u=n[0],h=n[1],m=n[2],v=o[0],x=o[1],S=o[2];return i[0]=h*S-m*x,i[1]=m*v-u*S,i[2]=u*x-h*v,i}function ii(i,n,o){var u=n[0],h=n[1],m=n[2],v=o[3]*u+o[7]*h+o[11]*m+o[15];return i[0]=(o[0]*u+o[4]*h+o[8]*m+o[12])/(v=v||1),i[1]=(o[1]*u+o[5]*h+o[9]*m+o[13])/v,i[2]=(o[2]*u+o[6]*h+o[10]*m+o[14])/v,i}function IE(i,n,o){var u=o[0],h=o[1],m=o[2],v=n[0],x=n[1],S=n[2],E=h*S-m*x,R=m*v-u*S,z=u*x-h*v,L=h*z-m*R,V=m*E-u*z,G=u*R-h*E,K=2*o[3];return R*=K,z*=K,V*=2,G*=2,i[0]=v+(E*=K)+(L*=2),i[1]=x+R+V,i[2]=S+z+G,i}var If,Ka=y_,RL=TE,OL=Sf;function ME(i,n,o){return i[0]=n[0]*o,i[1]=n[1]*o,i[2]=n[2]*o,i[3]=n[3]*o,i}function PE(i,n){var o=n[0],u=n[1],h=n[2],m=n[3],v=o*o+u*u+h*h+m*m;return v>0&&(v=1/Math.sqrt(v)),i[0]=o*v,i[1]=u*v,i[2]=h*v,i[3]=m*v,i}function Wc(i,n,o){var u=n[0],h=n[1],m=n[2],v=n[3];return i[0]=o[0]*u+o[4]*h+o[8]*m+o[12]*v,i[1]=o[1]*u+o[5]*h+o[9]*m+o[13]*v,i[2]=o[2]*u+o[6]*h+o[10]*m+o[14]*v,i[3]=o[3]*u+o[7]*h+o[11]*m+o[15]*v,i}function AE(){var i=new ko(4);return ko!=Float32Array&&(i[0]=0,i[1]=0,i[2]=0),i[3]=1,i}function RE(i){return i[0]=0,i[1]=0,i[2]=0,i[3]=1,i}function OE(i,n,o){o*=.5;var u=n[0],h=n[1],m=n[2],v=n[3],x=Math.sin(o),S=Math.cos(o);return i[0]=u*S+v*x,i[1]=h*S+m*x,i[2]=m*S-h*x,i[3]=v*S-u*x,i}function zE(i,n,o){o*=.5;var u=n[0],h=n[1],m=n[2],v=n[3],x=Math.sin(o),S=Math.cos(o);return i[0]=u*S-m*x,i[1]=h*S+v*x,i[2]=m*S+u*x,i[3]=v*S-h*x,i}v_(),If=new ko(4),ko!=Float32Array&&(If[0]=0,If[1]=0,If[2]=0,If[3]=0);var zL=PE;v_(),od(1,0,0),od(0,1,0),AE(),AE(),bE();const DL=Ue([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:DE}=DL,LE=Ue([{name:"a_pos_3",components:3,type:"Int16"}]);var Mf=Ue([{name:"a_pos",type:"Int16",components:2}]);class x_{constructor(n,o){this.pos=n,this.dir=o}intersectsPlane(n,o,u){const h=Sa(o,this.dir);if(Math.abs(h)<1e-6)return!1;const m=((n[0]-this.pos[0])*o[0]+(n[1]-this.pos[1])*o[1]+(n[2]-this.pos[2])*o[2])/h;return u[0]=this.pos[0]+this.dir[0]*m,u[1]=this.pos[1]+this.dir[1]*m,u[2]=this.pos[2]+this.dir[2]*m,!0}closestPointOnSphere(n,o,u){if(function(V,G){var K=V[0],ae=V[1],ge=V[2],Ce=G[0],ye=G[1],Ee=G[2];return Math.abs(K-Ce)<=gg*Math.max(1,Math.abs(K),Math.abs(Ce))&&Math.abs(ae-ye)<=gg*Math.max(1,Math.abs(ae),Math.abs(ye))&&Math.abs(ge-Ee)<=gg*Math.max(1,Math.abs(ge),Math.abs(Ee))}(this.pos,n)||o===0)return u[0]=u[1]=u[2]=0,!1;const[h,m,v]=this.dir,x=this.pos[0]-n[0],S=this.pos[1]-n[1],E=this.pos[2]-n[2],R=h*h+m*m+v*v,z=2*(x*h+S*m+E*v),L=z*z-4*R*(x*x+S*S+E*E-o*o);if(L<0){const V=Math.max(-z/2,0),G=x+h*V,K=S+m*V,ae=E+v*V,ge=Math.hypot(G,K,ae);return u[0]=G*o/ge,u[1]=K*o/ge,u[2]=ae*o/ge,!1}{const V=(-z-Math.sqrt(L))/(2*R);if(V<0){const G=Math.hypot(x,S,E);return u[0]=x*o/G,u[1]=S*o/G,u[2]=E*o/G,!1}return u[0]=x+h*V,u[1]=S+m*V,u[2]=E+v*V,!0}}}class b_{constructor(n,o,u,h,m){this.TL=n,this.TR=o,this.BR=u,this.BL=h,this.horizon=m}static fromInvProjectionMatrix(n,o,u){const h=[-1,1,1],m=[1,1,1],v=[1,-1,1],x=[-1,-1,1],S=ii(h,h,n),E=ii(m,m,n),R=ii(v,v,n),z=ii(x,x,n);return new b_(S,E,R,z,o/u)}}class w_{constructor(n,o){this.points=n,this.planes=o}static fromInvProjectionMatrix(n,o,u,h){const m=Math.pow(2,u),v=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(S=>{const E=Wc([],S,n),R=1/E[3]/o*m;return function(z,L,V){return z[0]=L[0]*V[0],z[1]=L[1]*V[1],z[2]=L[2]*V[2],z[3]=L[3]*V[3],z}(E,E,[R,R,h?1/E[3]:R,R])}),x=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(S=>{const E=ao([],__([],Ka([],v[S[0]],v[S[1]]),Ka([],v[S[2]],v[S[1]]))),R=-Sa(E,v[S[1]]);return E.concat(R)});return new w_(v,x)}}class so{static fromPoints(n){const o=[1/0,1/0,1/0],u=[-1/0,-1/0,-1/0];for(const h of n)Ef(o,o,h),Cf(u,u,h);return new so(o,u)}static applyTransform(n,o){const u=n.getCorners();for(let h=0;h<u.length;++h)ii(u[h],u[h],o);return so.fromPoints(u)}constructor(n,o){this.min=n,this.max=o,this.center=Ko([],Js([],this.min,this.max),.5)}quadrant(n){const o=[n%2==0,n<2],u=CE(this.min),h=CE(this.max);for(let m=0;m<o.length;m++)u[m]=o[m]?this.min[m]:this.center[m],h[m]=o[m]?this.center[m]:this.max[m];return h[2]=this.max[2],new so(u,h)}distanceX(n){return Math.max(Math.min(this.max[0],n[0]),this.min[0])-n[0]}distanceY(n){return Math.max(Math.min(this.max[1],n[1]),this.min[1])-n[1]}distanceZ(n){return Math.max(Math.min(this.max[2],n[2]),this.min[2])-n[2]}getCorners(){const n=this.min,o=this.max;return[[n[0],n[1],n[2]],[o[0],n[1],n[2]],[o[0],o[1],n[2]],[n[0],o[1],n[2]],[n[0],n[1],o[2]],[o[0],n[1],o[2]],[o[0],o[1],o[2]],[n[0],o[1],o[2]]]}intersects(n){const o=this.getCorners();let u=!0;for(let h=0;h<n.planes.length;h++){const m=n.planes[h];let v=0;for(let x=0;x<o.length;x++)v+=Sa(m,o[x])+m[3]>=0;if(v===0)return 0;v!==o.length&&(u=!1)}if(u)return 2;for(let h=0;h<3;h++){let m=Number.MAX_VALUE,v=-Number.MAX_VALUE;for(let x=0;x<n.points.length;x++){const S=n.points[x][h]-this.min[h];m=Math.min(m,S),v=Math.max(v,S)}if(v<0||m>this.max[h]-this.min[h])return 0}return 1}}const S_=5,kE=6,Es=mn/Math.PI/2,LL=16383,qc=64,Pf=[qc,32,16],Ea=-Es,Ca=Es,kL=[new so([Ea,Ea,Ea],[Ca,Ca,Ca]),new so([Ea,Ea,Ea],[0,0,Ca]),new so([0,Ea,Ea],[Ca,0,Ca]),new so([Ea,0,Ea],[0,Ca,Ca]),new so([0,0,Ea],[Ca,Ca,Ca])];function yg(i){return i*Es/Of}function $E(i,n,o,u=!0){const h=Ko([],i._camera.position,i.worldSize),m=[n,o,1,1];Wc(m,m,i.pixelMatrixInverse),ME(m,m,1/m[3]);const v=ao([],Ka([],m,h)),x=i.globeMatrix,S=[x[12],x[13],x[14]],E=Ka([],S,h),R=Sf(E),z=ao([],E),L=i.worldSize/(2*Math.PI),V=Sa(z,v),G=Math.asin(L/R);if(G<Math.acos(V)){if(!u)return null;const St=[],et=[];Ko(St,v,R/V),ao(et,Ka(et,St,E)),ao(v,Js(v,E,Ko(v,et,Math.tan(G)*R)))}const K=[];new x_(h,v).closestPointOnSphere(S,L,K);const ae=ao([],sn(x,0)),ge=ao([],sn(x,1)),Ce=ao([],sn(x,2)),ye=Sa(ae,K),Ee=Sa(ge,K),Ae=Sa(Ce,K),Pe=fe(Math.asin(-Ee/L));let Ye=fe(Math.atan2(ye,Ae));Ye=i.center.lng+function(St,et){const ht=(et-St+180)%360-180;return ht<-180?ht+360:ht}(i.center.lng,Ye);const qe=Ts(Ye),ot=pe(Is(Pe),0,1);return new cd(qe,ot)}class $L{constructor(n,o,u){this.a=Ka([],n,u),this.b=Ka([],o,u),this.center=u;const h=ao([],this.a),m=ao([],this.b);this.angle=Math.acos(Sa(h,m))}}function E_(i,n){if(i.angle===0)return null;let o;return o=i.a[n]===0?1/i.angle*.5*Math.PI:1/i.angle*Math.atan(i.b[n]/i.a[n]/Math.sin(i.angle)-1/Math.tan(i.angle)),o<0||o>1?null:function(u,h,m,v){const x=Math.sin(m);return u*(Math.sin((1-v)*m)/x)+h*(Math.sin(v*m)/x)}(i.a[n],i.b[n],i.angle,pe(o,0,1))+i.center[n]}function Cs(i){if(i.z<=1)return kL[i.z+2*i.y+i.x];const n=C_(_g(i));return so.fromPoints(n)}function Zc(i,n,o){return Ko(i,i,1-o),Tf(i,i,n,o)}function FE(i,n){const o=ld(n.zoom);if(o===0)return Cs(i);const u=_g(i),h=C_(u),m=Ts(u.getWest())*n.worldSize,v=Ts(u.getEast())*n.worldSize,x=Is(u.getNorth())*n.worldSize,S=Is(u.getSouth())*n.worldSize,E=[m,x,0],R=[v,x,0],z=[m,S,0],L=[v,S,0],V=m_([],n.globeMatrix);return ii(E,E,V),ii(R,R,V),ii(z,z,V),ii(L,L,V),h[0]=Zc(h[0],z,o),h[1]=Zc(h[1],L,o),h[2]=Zc(h[2],R,o),h[3]=Zc(h[3],E,o),so.fromPoints(h)}function BE(i,n,o){for(const u of i)ii(u,u,n),Ko(u,u,o)}function FL(i,n,o){const u=n/i.worldSize,h=i.globeMatrix;if(o.z<=1){const qe=Cs(o).getCorners();return BE(qe,h,u),so.fromPoints(qe)}const m=_g(o),v=C_(m);BE(v,h,u);const x=Number.MAX_VALUE,S=[-x,-x,-x],E=[x,x,x];if(m.contains(i.center)){for(const St of v)Ef(E,E,St),Cf(S,S,St);S[2]=0;const qe=i.point,ot=[qe.x*u,qe.y*u,0];return Ef(E,E,ot),Cf(S,S,ot),new so(E,S)}const R=[h[12]*u,h[13]*u,h[14]*u],z=m.getCenter(),L=pe(i.center.lat,-Wi,Wi),V=pe(z.lat,-Wi,Wi),G=Ts(i.center.lng),K=Is(L);let ae=G-Ts(z.lng);const ge=K-Is(V);ae>.5?ae-=1:ae<-.5&&(ae+=1);let Ce=0;Math.abs(ae)>Math.abs(ge)?Ce=ae>=0?1:3:(Ce=ge>=0?0:2,Tf(R,R,[h[4]*u,h[5]*u,h[6]*u],-Math.sin(oe(ge>=0?m.getSouth():m.getNorth()))*Es));const ye=v[Ce],Ee=v[(Ce+1)%4],Ae=new $L(ye,Ee,R),Pe=[E_(Ae,0)||ye[0],E_(Ae,1)||ye[1],E_(Ae,2)||ye[2]],Ye=ld(i.zoom);if(Ye>0){const qe=function({x:St,y:et,z:ht},ft,vt,Dt,rt){const Gt=1/(1<<ht);let en=St*Gt,Wt=en+Gt,Dn=et*Gt,Lt=Dn+Gt,fn=0;const Ln=(en+Wt)/2-Dt;return Ln>.5?fn=-1:Ln<-.5&&(fn=1),en=((en+fn)*ft-(Dt*=ft))*vt+Dt,Wt=((Wt+fn)*ft-Dt)*vt+Dt,Dn=(Dn*ft-(rt*=ft))*vt+rt,Lt=(Lt*ft-rt)*vt+rt,[[en,Lt,0],[Wt,Lt,0],[Wt,Dn,0],[en,Dn,0]]}(o,n,i._pixelsPerMercatorPixel,G,K);for(let St=0;St<v.length;St++)Zc(v[St],qe[St],Ye);const ot=Js([],qe[Ce],qe[(Ce+1)%4]);Ko(ot,ot,.5),Zc(Pe,ot,Ye)}for(const qe of v)Ef(E,E,qe),Cf(S,S,qe);return E[2]=Math.min(ye[2],Ee[2]),Ef(E,E,Pe),Cf(S,S,Pe),new so(E,S)}function _g({x:i,y:n,z:o}){const u=1/(1<<o),h=new br(Yo(i*u),Gi((n+1)*u)),m=new br(Yo((i+1)*u),Gi(n*u));return new Nl(h,m)}function C_(i){const n=oe(i.getNorth()),o=oe(i.getSouth()),u=Math.cos(n),h=Math.cos(o),m=Math.sin(n),v=Math.sin(o),x=i.getWest(),S=i.getEast();return[ad(h,v,x),ad(h,v,S),ad(u,m,S),ad(u,m,x)]}function ad(i,n,o,u=Es){return o=oe(o),[i*Math.sin(o)*u,-n*u,i*Math.cos(o)*u]}function sd(i,n,o){return ad(Math.cos(oe(i)),Math.sin(oe(i)),n,o)}function Af(i,n,o,u){const h=1<<o.z,m=(i/mn+o.x)/h;return sd(Gi((n/mn+o.y)/h),Yo(m),u)}function xg({min:i,max:n}){return LL/Math.max(n[0]-i[0],n[1]-i[1],n[2]-i[2])}const NE=new Float64Array(16);function Rf(i){const n=xg(i),o=SE(NE,[n,n,n]);return wf(o,o,((u=[])[0]=-(h=i.min)[0],u[1]=-h[1],u[2]=-h[2],u));var u,h}function T_(i){const n=(u=i.min,(o=NE)[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=u[0],o[13]=u[1],o[14]=u[2],o[15]=1,o);var o,u;const h=1/xg(i);return Gc(n,n,[h,h,h])}function jE(i,n,o,u,h){const m=function(S){const E=mn/(2*Math.PI);return S/(2*Math.PI)/E}(o),v=[i,n,-o/(2*Math.PI)],x=Xa(new Float64Array(16));return wf(x,x,v),Gc(x,x,[m,m,m]),g_(x,x,oe(-h)),vg(x,x,oe(-u)),x}function ld(i){return He(S_,kE,i)}function UE(i,n){const o=sd(n.lat,n.lng),u=function(G){const K=sd(G._center.lat,G._center.lng);let ae=__([],od(0,1,0),K);const ge=EE([],-G.angle,K);ae=ii(ae,ae,ge),EE(ge,-G._pitch,ae);const Ce=ao([],K);return Ko(Ce,Ce,yg(G.cameraToCenterDistance/G.pixelsPerMeter)),ii(Ce,Ce,ge),Js([],K,Ce)}(i);return v=(h=y_([],u,o))[0],x=h[1],S=h[2],E=(m=o)[0],R=m[1],z=m[2],V=(L=Math.sqrt(v*v+x*x+S*S)*Math.sqrt(E*E+R*R+z*z))&&Sa(h,m)/L,Math.acos(Math.min(Math.max(V,-1),1));var h,m,v,x,S,E,R,z,L,V}function I_(i,n){return UE(i,n)>Math.PI/2*1.01}const VE=oe(85),BL=Math.cos(VE),NL=Math.sin(VE),Of=63710088e-1,HE=2*Math.PI*Of;class jl{constructor(n,o){if(isNaN(n)||isNaN(o))throw new Error(`Invalid LngLat object: (${n}, ${o})`);if(this.lng=+n,this.lat=+o,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new jl(Be(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(n){const o=Math.PI/180,u=this.lat*o,h=n.lat*o,m=Math.sin(u)*Math.sin(h)+Math.cos(u)*Math.cos(h)*Math.cos((n.lng-this.lng)*o);return Of*Math.acos(Math.min(m,1))}toBounds(n=0){const o=360*n/40075017,u=o/Math.cos(Math.PI/180*this.lat);return new Nl(new jl(this.lng-u,this.lat-o),new jl(this.lng+u,this.lat+o))}toEcef(n){const o=yg(n);return sd(this.lat,this.lng,Es+o)}static convert(n){if(n instanceof jl)return n;if(Array.isArray(n)&&(n.length===2||n.length===3))return new jl(Number(n[0]),Number(n[1]));if(!Array.isArray(n)&&typeof n=="object"&&n!==null)return new jl(Number("lng"in n?n.lng:n.lon),Number(n.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}var br=jl;function M_(i){return HE*Math.cos(i*Math.PI/180)}function Ts(i){return(180+i)/360}function Is(i){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+i*Math.PI/360)))/360}function Ya(i,n){return i/M_(n)}function Yo(i){return 360*i-180}function Gi(i){return 360/Math.PI*Math.atan(Math.exp((180-360*i)*Math.PI/180))-90}function GE(i,n){return i*M_(Gi(n))}const Wi=85.051129;function WE(i){return 1/Math.cos(i*Math.PI/180)}class cd{constructor(n,o,u=0){this.x=+n,this.y=+o,this.z=+u}static fromLngLat(n,o=0){const u=br.convert(n);return new cd(Ts(u.lng),Is(u.lat),Ya(o,u.lat))}toLngLat(){return new br(Yo(this.x),Gi(this.y))}toAltitude(){return GE(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/HE*WE(Gi(this.y))}}function P_(i,n,o,u,h,m,v,x,S){const E=(n+u)/2,R=(o+h)/2,z=new ee(E,R);x(z),function(L,V,G,K,ae,ge){const Ce=G-ae,ye=K-ge;return Math.abs((K-V)*Ce-(G-L)*ye)/Math.hypot(Ce,ye)}(z.x,z.y,m.x,m.y,v.x,v.y)>=S?(P_(i,n,o,E,R,m,z,x,S),P_(i,E,R,u,h,z,v,x,S)):i.push(v)}function qE(i,n,o){let u=i[0],h=u.x,m=u.y;n(u);const v=[u];for(let x=1;x<i.length;x++){const S=i[x],{x:E,y:R}=S;n(S),P_(v,h,m,E,R,u,S,n,o),h=E,m=R,u=S}return v}function A_(i,n,o,u){if(u(n,o)){const h=n.add(o)._mult(.5);A_(i,n,h,u),A_(i,h,o,u)}else i.push(o)}function jL(i,n){let o=i[0];const u=[o];for(let h=1;h<i.length;h++){const m=i[h];A_(u,o,m,n),o=m}return u}const R_=Math.pow(2,14)-1,ZE=-R_-1;function UL(i,n){const o=Math.round(i.x*n),u=Math.round(i.y*n);return i.x=pe(o,ZE,R_),i.y=pe(u,ZE,R_),(o<i.x||o>i.x+1||u<i.y||u>i.y+1)&&zt("Geometry exceeds allowed extent, reduce your vector tile buffer size"),i}function Qs(i,n,o){const u=i.loadGeometry(),h=i.extent,m=mn/h;if(n&&o&&o.projection.isReprojectedInTileSpace){const v=1<<n.z,{scale:x,x:S,y:E,projection:R}=o,z=L=>{const V=Yo((n.x+L.x/h)/v),G=Gi((n.y+L.y/h)/v),K=R.project(V,G);L.x=(K.x*x-S)*h,L.y=(K.y*x-E)*h};for(let L=0;L<u.length;L++)if(i.type!==1)u[L]=qE(u[L],z,1);else{const V=[];for(const G of u[L])G.x<0||G.x>=h||G.y<0||G.y>=h||(z(G),V.push(G));u[L]=V}}for(const v of u)for(const x of v)UL(x,m);return u}function Xc(i,n){return{type:i.type,id:i.id,properties:i.properties,geometry:n?Qs(i):[]}}function bg(i,n,o,u,h){i.emplaceBack(2*n+(u+1)/2,2*o+(h+1)/2)}function wg(i,n,o){i.emplaceBack(n.x,n.y,n.z,o[0]*16384,o[1]*16384,o[2]*16384)}class O_{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(o=>o.id),this.index=n.index,this.hasPattern=!1,this.projection=n.projection,this.layoutVertexArray=new wt,this.indexArray=new cn,this.segments=new si,this.programConfigurations=new Vc(n.layers,n.zoom),this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(n,o,u,h){const m=this.layers[0],v=[];let x=null;m.type==="circle"&&(x=m.layout.get("circle-sort-key"));for(const{feature:E,id:R,index:z,sourceLayerIndex:L}of n){const V=this.layers[0]._featureFilter.needGeometry,G=Xc(E,V);if(!this.layers[0]._featureFilter.filter(new O(this.zoom),G,u))continue;const K=x?x.evaluate(G,{},u):void 0,ae={id:R,properties:E.properties,type:E.type,sourceLayerIndex:L,index:z,geometry:V?G.geometry:Qs(E,u,h),patterns:{},sortKey:K};v.push(ae)}x&&v.sort((E,R)=>E.sortKey-R.sortKey);let S=null;h.projection.name==="globe"&&(this.globeExtVertexArray=new It,S=h.projection);for(const E of v){const{geometry:R,index:z,sourceLayerIndex:L}=E,V=n[z].feature;this.addFeature(E,R,z,o.availableImages,u,S),o.featureIndex.insert(V,R,z,L,this.index)}}update(n,o,u,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,o,this.stateDependentLayers,u,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,ML.members),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=n.createVertexBuffer(this.globeExtVertexArray,PL.members))),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(n,o,u,h,m,v){for(const x of o)for(const S of x){const E=S.x,R=S.y;if(E<0||E>=mn||R<0||R>=mn)continue;if(v){const V=v.projectTilePoint(E,R,m),G=v.upVector(m,E,R),K=this.globeExtVertexArray;wg(K,V,G),wg(K,V,G),wg(K,V,G),wg(K,V,G)}const z=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,n.sortKey),L=z.vertexLength;bg(this.layoutVertexArray,E,R,-1,-1),bg(this.layoutVertexArray,E,R,1,-1),bg(this.layoutVertexArray,E,R,1,1),bg(this.layoutVertexArray,E,R,-1,1),this.indexArray.emplaceBack(L,L+1,L+2),this.indexArray.emplaceBack(L,L+2,L+3),z.vertexLength+=4,z.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,u,{},h,m)}}function XE(i,n){for(let o=0;o<i.length;o++)if(Kc(n,i[o]))return!0;for(let o=0;o<n.length;o++)if(Kc(i,n[o]))return!0;return!!z_(i,n)}function VL(i,n,o){return!!Kc(i,n)||!!D_(n,i,o)}function KE(i,n){if(i.length===1)return JE(n,i[0]);for(let o=0;o<n.length;o++){const u=n[o];for(let h=0;h<u.length;h++)if(Kc(i,u[h]))return!0}for(let o=0;o<i.length;o++)if(JE(n,i[o]))return!0;for(let o=0;o<n.length;o++)if(z_(i,n[o]))return!0;return!1}function HL(i,n,o){if(i.length>1){if(z_(i,n))return!0;for(let u=0;u<n.length;u++)if(D_(n[u],i,o))return!0}for(let u=0;u<i.length;u++)if(D_(i[u],n,o))return!0;return!1}function z_(i,n){if(i.length===0||n.length===0)return!1;for(let o=0;o<i.length-1;o++){const u=i[o],h=i[o+1];for(let m=0;m<n.length-1;m++)if(GL(u,h,n[m],n[m+1]))return!0}return!1}function GL(i,n,o,u){return an(i,o,u)!==an(n,o,u)&&an(i,n,o)!==an(i,n,u)}function D_(i,n,o){const u=o*o;if(n.length===1)return i.distSqr(n[0])<u;for(let h=1;h<n.length;h++)if(YE(i,n[h-1],n[h])<u)return!0;return!1}function YE(i,n,o){const u=n.distSqr(o);if(u===0)return i.distSqr(n);const h=((i.x-n.x)*(o.x-n.x)+(i.y-n.y)*(o.y-n.y))/u;return i.distSqr(h<0?n:h>1?o:o.sub(n)._mult(h)._add(n))}function JE(i,n){let o,u,h,m=!1;for(let v=0;v<i.length;v++){o=i[v];for(let x=0,S=o.length-1;x<o.length;S=x++)u=o[x],h=o[S],u.y>n.y!=h.y>n.y&&n.x<(h.x-u.x)*(n.y-u.y)/(h.y-u.y)+u.x&&(m=!m)}return m}function Kc(i,n){let o=!1;for(let u=0,h=i.length-1;u<i.length;h=u++){const m=i[u],v=i[h];m.y>n.y!=v.y>n.y&&n.x<(v.x-m.x)*(n.y-m.y)/(v.y-m.y)+m.x&&(o=!o)}return o}function QE(i,n,o,u,h){for(const v of i)if(n<=v.x&&o<=v.y&&u>=v.x&&h>=v.y)return!0;const m=[new ee(n,o),new ee(n,h),new ee(u,h),new ee(u,o)];if(i.length>2){for(const v of m)if(Kc(i,v))return!0}for(let v=0;v<i.length-1;v++)if(WL(i[v],i[v+1],m))return!0;return!1}function WL(i,n,o){const u=o[0],h=o[2];if(i.x<u.x&&n.x<u.x||i.x>h.x&&n.x>h.x||i.y<u.y&&n.y<u.y||i.y>h.y&&n.y>h.y)return!1;const m=an(i,n,o[0]);return m!==an(i,n,o[1])||m!==an(i,n,o[2])||m!==an(i,n,o[3])}function ud(i,n,o){const u=n.paint.get(i).value;return u.kind==="constant"?u.value:o.programConfigurations.get(n.id).getMaxValue(i)}function Sg(i){return Math.sqrt(i[0]*i[0]+i[1]*i[1])}function eC(i,n,o,u,h){if(!n[0]&&!n[1])return i;const m=ee.convert(n)._mult(h);o==="viewport"&&m._rotate(-u);const v=[];for(let x=0;x<i.length;x++)v.push(i[x].sub(m));return v}function tC(i,n,o,u){const h=ee.convert(i)._mult(u);return n==="viewport"&&h._rotate(-o),h}Jt(O_,"CircleBucket",{omit:["layers"]});const qL=new be({"circle-sort-key":new se(tt.layout_circle["circle-sort-key"])});var ZL={paint:new be({"circle-radius":new se(tt.paint_circle["circle-radius"]),"circle-color":new se(tt.paint_circle["circle-color"]),"circle-blur":new se(tt.paint_circle["circle-blur"]),"circle-opacity":new se(tt.paint_circle["circle-opacity"]),"circle-translate":new X(tt.paint_circle["circle-translate"]),"circle-translate-anchor":new X(tt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new X(tt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new X(tt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new se(tt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new se(tt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new se(tt.paint_circle["circle-stroke-opacity"])}),layout:qL};function nC(i,n,o,u,h,m,v,x,S){if(m&&i.queryGeometry.isAboveHorizon)return!1;m&&(S*=i.pixelToTileUnitsFactor);const E=i.tileID.canonical,R=o.projection.upVectorScale(E,o.center.lat,o.worldSize).metersToTile;for(const z of n)for(const L of z){const V=L.add(x),G=h&&o.elevation?o.elevation.exaggeration()*h.getElevationAt(V.x,V.y,!0):0,K=o.projection.projectTilePoint(V.x,V.y,E);if(G>0){const ye=o.projection.upVector(E,V.x,V.y);K.x+=ye[0]*R*G,K.y+=ye[1]*R*G,K.z+=ye[2]*R*G}const ae=m?V:XL(K.x,K.y,K.z,u),ge=m?i.tilespaceRays.map(ye=>YL(ye,G)):i.queryGeometry.screenGeometry,Ce=Wc([],[K.x,K.y,K.z,1],u);if(!v&&m?S*=Ce[3]/o.cameraToCenterDistance:v&&!m&&(S*=o.cameraToCenterDistance/Ce[3]),m){const ye=Gi((L.y/mn+E.y)/(1<<E.z));S/=o.projection.pixelsPerMeter(ye,1)/Ya(1,ye)}if(VL(ge,ae,S))return!0}return!1}function XL(i,n,o,u){const h=Wc([],[i,n,o,1],u);return new ee(h[0]/h[3],h[1]/h[3])}const rC=od(0,0,0),KL=od(0,0,1);function YL(i,n){const o=v_();return rC[2]=n,i.intersectsPlane(rC,KL,o),new ee(o[0],o[1])}class iC extends O_{}function oC(i,{width:n,height:o},u,h){if(h){if(h instanceof Uint8ClampedArray)h=new Uint8Array(h.buffer);else if(h.length!==n*o*u)throw new RangeError("mismatched image size")}else h=new Uint8Array(n*o*u);return i.width=n,i.height=o,i.data=h,i}function aC(i,n,o){const{width:u,height:h}=n;u===i.width&&h===i.height||(L_(i,n,{x:0,y:0},{x:0,y:0},{width:Math.min(i.width,u),height:Math.min(i.height,h)},o),i.width=u,i.height=h,i.data=n.data)}function L_(i,n,o,u,h,m){if(h.width===0||h.height===0)return n;if(h.width>i.width||h.height>i.height||o.x>i.width-h.width||o.y>i.height-h.height)throw new RangeError("out of range source coordinates for image copy");if(h.width>n.width||h.height>n.height||u.x>n.width-h.width||u.y>n.height-h.height)throw new RangeError("out of range destination coordinates for image copy");const v=i.data,x=n.data;for(let S=0;S<h.height;S++){const E=((o.y+S)*i.width+o.x)*m,R=((u.y+S)*n.width+u.x)*m;for(let z=0;z<h.width*m;z++)x[R+z]=v[E+z]}return n}Jt(iC,"HeatmapBucket",{omit:["layers"]});class el{constructor(n,o){oC(this,n,1,o)}resize(n){aC(this,new el(n),1)}clone(){return new el({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,o,u,h,m){L_(n,o,u,h,m,1)}}class $o{constructor(n,o){oC(this,n,4,o)}resize(n){aC(this,new $o(n),4)}replace(n,o){o?this.data.set(n):this.data=n instanceof Uint8ClampedArray?new Uint8Array(n.buffer):n}clone(){return new $o({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,o,u,h,m){L_(n,o,u,h,m,4)}}Jt(el,"AlphaImage"),Jt($o,"RGBAImage");var JL={paint:new be({"heatmap-radius":new se(tt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new se(tt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new X(tt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new xe(tt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new X(tt.paint_heatmap["heatmap-opacity"])})};function k_(i){const n={},o=i.resolution||256,u=i.clips?i.clips.length:1,h=i.image||new $o({width:o,height:u}),m=(v,x,S)=>{n[i.evaluationKey]=S;const E=i.expression.evaluate(n);h.data[v+x+0]=Math.floor(255*E.r/E.a),h.data[v+x+1]=Math.floor(255*E.g/E.a),h.data[v+x+2]=Math.floor(255*E.b/E.a),h.data[v+x+3]=Math.floor(255*E.a)};if(i.clips)for(let v=0,x=0;v<u;++v,x+=4*o)for(let S=0,E=0;S<o;S++,E+=4){const R=S/(o-1),{start:z,end:L}=i.clips[v];m(x,E,z*(1-R)+L*R)}else for(let v=0,x=0;v<o;v++,x+=4)m(0,x,v/(o-1));return h}var QL={paint:new be({"hillshade-illumination-direction":new X(tt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new X(tt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new X(tt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new X(tt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new X(tt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new X(tt.paint_hillshade["hillshade-accent-color"])})};const ek=Ue([{name:"a_pos",components:2,type:"Int16"}],4),{members:tk}=ek;var $_={exports:{}};function Eg(i,n,o){o=o||2;var u,h,m,v,x,S,E,R=n&&n.length,z=R?n[0]*o:i.length,L=sC(i,0,z,o,!0),V=[];if(!L||L.next===L.prev)return V;if(R&&(L=function(K,ae,ge,Ce){var ye,Ee,Ae,Pe=[];for(ye=0,Ee=ae.length;ye<Ee;ye++)(Ae=sC(K,ae[ye]*Ce,ye<Ee-1?ae[ye+1]*Ce:K.length,Ce,!1))===Ae.next&&(Ae.steiner=!0),Pe.push(ck(Ae));for(Pe.sort(ak),ye=0;ye<Pe.length;ye++)ge=sk(Pe[ye],ge);return ge}(i,n,L,o)),i.length>80*o){u=m=i[0],h=v=i[1];for(var G=o;G<z;G+=o)(x=i[G])<u&&(u=x),(S=i[G+1])<h&&(h=S),x>m&&(m=x),S>v&&(v=S);E=(E=Math.max(m-u,v-h))!==0?32767/E:0}return zf(L,V,o,u,h,E,0),V}function sC(i,n,o,u,h){var m,v;if(h===N_(i,n,o,u)>0)for(m=n;m<o;m+=u)v=uC(m,i[m],i[m+1],v);else for(m=o-u;m>=n;m-=u)v=uC(m,i[m],i[m+1],v);return v&&Cg(v,v.next)&&(Lf(v),v=v.next),v}function Yc(i,n){if(!i)return i;n||(n=i);var o,u=i;do if(o=!1,u.steiner||!Cg(u,u.next)&&li(u.prev,u,u.next)!==0)u=u.next;else{if(Lf(u),(u=n=u.prev)===u.next)break;o=!0}while(o||u!==n);return n}function zf(i,n,o,u,h,m,v){if(i){!v&&m&&function(R,z,L,V){var G=R;do G.z===0&&(G.z=F_(G.x,G.y,z,L,V)),G.prevZ=G.prev,G.nextZ=G.next,G=G.next;while(G!==R);G.prevZ.nextZ=null,G.prevZ=null,function(K){var ae,ge,Ce,ye,Ee,Ae,Pe,Ye,qe=1;do{for(ge=K,K=null,Ee=null,Ae=0;ge;){for(Ae++,Ce=ge,Pe=0,ae=0;ae<qe&&(Pe++,Ce=Ce.nextZ);ae++);for(Ye=qe;Pe>0||Ye>0&&Ce;)Pe!==0&&(Ye===0||!Ce||ge.z<=Ce.z)?(ye=ge,ge=ge.nextZ,Pe--):(ye=Ce,Ce=Ce.nextZ,Ye--),Ee?Ee.nextZ=ye:K=ye,ye.prevZ=Ee,Ee=ye;ge=Ce}Ee.nextZ=null,qe*=2}while(Ae>1)}(G)}(i,u,h,m);for(var x,S,E=i;i.prev!==i.next;)if(x=i.prev,S=i.next,m?rk(i,u,h,m):nk(i))n.push(x.i/o|0),n.push(i.i/o|0),n.push(S.i/o|0),Lf(i),i=S.next,E=S.next;else if((i=S)===E){v?v===1?zf(i=ik(Yc(i),n,o),n,o,u,h,m,2):v===2&&ok(i,n,o,u,h,m):zf(Yc(i),n,o,u,h,m,1);break}}}function nk(i){var n=i.prev,o=i,u=i.next;if(li(n,o,u)>=0)return!1;for(var h=n.x,m=o.x,v=u.x,x=n.y,S=o.y,E=u.y,R=h<m?h<v?h:v:m<v?m:v,z=x<S?x<E?x:E:S<E?S:E,L=h>m?h>v?h:v:m>v?m:v,V=x>S?x>E?x:E:S>E?S:E,G=u.next;G!==n;){if(G.x>=R&&G.x<=L&&G.y>=z&&G.y<=V&&dd(h,x,m,S,v,E,G.x,G.y)&&li(G.prev,G,G.next)>=0)return!1;G=G.next}return!0}function rk(i,n,o,u){var h=i.prev,m=i,v=i.next;if(li(h,m,v)>=0)return!1;for(var x=h.x,S=m.x,E=v.x,R=h.y,z=m.y,L=v.y,V=x<S?x<E?x:E:S<E?S:E,G=R<z?R<L?R:L:z<L?z:L,K=x>S?x>E?x:E:S>E?S:E,ae=R>z?R>L?R:L:z>L?z:L,ge=F_(V,G,n,o,u),Ce=F_(K,ae,n,o,u),ye=i.prevZ,Ee=i.nextZ;ye&&ye.z>=ge&&Ee&&Ee.z<=Ce;){if(ye.x>=V&&ye.x<=K&&ye.y>=G&&ye.y<=ae&&ye!==h&&ye!==v&&dd(x,R,S,z,E,L,ye.x,ye.y)&&li(ye.prev,ye,ye.next)>=0||(ye=ye.prevZ,Ee.x>=V&&Ee.x<=K&&Ee.y>=G&&Ee.y<=ae&&Ee!==h&&Ee!==v&&dd(x,R,S,z,E,L,Ee.x,Ee.y)&&li(Ee.prev,Ee,Ee.next)>=0))return!1;Ee=Ee.nextZ}for(;ye&&ye.z>=ge;){if(ye.x>=V&&ye.x<=K&&ye.y>=G&&ye.y<=ae&&ye!==h&&ye!==v&&dd(x,R,S,z,E,L,ye.x,ye.y)&&li(ye.prev,ye,ye.next)>=0)return!1;ye=ye.prevZ}for(;Ee&&Ee.z<=Ce;){if(Ee.x>=V&&Ee.x<=K&&Ee.y>=G&&Ee.y<=ae&&Ee!==h&&Ee!==v&&dd(x,R,S,z,E,L,Ee.x,Ee.y)&&li(Ee.prev,Ee,Ee.next)>=0)return!1;Ee=Ee.nextZ}return!0}function ik(i,n,o){var u=i;do{var h=u.prev,m=u.next.next;!Cg(h,m)&&lC(h,u,u.next,m)&&Df(h,m)&&Df(m,h)&&(n.push(h.i/o|0),n.push(u.i/o|0),n.push(m.i/o|0),Lf(u),Lf(u.next),u=i=m),u=u.next}while(u!==i);return Yc(u)}function ok(i,n,o,u,h,m){var v=i;do{for(var x=v.next.next;x!==v.prev;){if(v.i!==x.i&&uk(v,x)){var S=cC(v,x);return v=Yc(v,v.next),S=Yc(S,S.next),zf(v,n,o,u,h,m,0),void zf(S,n,o,u,h,m,0)}x=x.next}v=v.next}while(v!==i)}function ak(i,n){return i.x-n.x}function sk(i,n){var o=function(h,m){var v,x=m,S=h.x,E=h.y,R=-1/0;do{if(E<=x.y&&E>=x.next.y&&x.next.y!==x.y){var z=x.x+(E-x.y)*(x.next.x-x.x)/(x.next.y-x.y);if(z<=S&&z>R&&(R=z,v=x.x<x.next.x?x:x.next,z===S))return v}x=x.next}while(x!==m);if(!v)return null;var L,V=v,G=v.x,K=v.y,ae=1/0;x=v;do S>=x.x&&x.x>=G&&S!==x.x&&dd(E<K?S:R,E,G,K,E<K?R:S,E,x.x,x.y)&&(L=Math.abs(E-x.y)/(S-x.x),Df(x,h)&&(L<ae||L===ae&&(x.x>v.x||x.x===v.x&&lk(v,x)))&&(v=x,ae=L)),x=x.next;while(x!==V);return v}(i,n);if(!o)return n;var u=cC(o,i);return Yc(u,u.next),Yc(o,o.next)}function lk(i,n){return li(i.prev,i,n.prev)<0&&li(n.next,i,i.next)<0}function F_(i,n,o,u,h){return(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=(i-o)*h|0)|i<<8))|i<<4))|i<<2))|i<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=(n-u)*h|0)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function ck(i){var n=i,o=i;do(n.x<o.x||n.x===o.x&&n.y<o.y)&&(o=n),n=n.next;while(n!==i);return o}function dd(i,n,o,u,h,m,v,x){return(h-v)*(n-x)>=(i-v)*(m-x)&&(i-v)*(u-x)>=(o-v)*(n-x)&&(o-v)*(m-x)>=(h-v)*(u-x)}function uk(i,n){return i.next.i!==n.i&&i.prev.i!==n.i&&!function(o,u){var h=o;do{if(h.i!==o.i&&h.next.i!==o.i&&h.i!==u.i&&h.next.i!==u.i&&lC(h,h.next,o,u))return!0;h=h.next}while(h!==o);return!1}(i,n)&&(Df(i,n)&&Df(n,i)&&function(o,u){var h=o,m=!1,v=(o.x+u.x)/2,x=(o.y+u.y)/2;do h.y>x!=h.next.y>x&&h.next.y!==h.y&&v<(h.next.x-h.x)*(x-h.y)/(h.next.y-h.y)+h.x&&(m=!m),h=h.next;while(h!==o);return m}(i,n)&&(li(i.prev,i,n.prev)||li(i,n.prev,n))||Cg(i,n)&&li(i.prev,i,i.next)>0&&li(n.prev,n,n.next)>0)}function li(i,n,o){return(n.y-i.y)*(o.x-n.x)-(n.x-i.x)*(o.y-n.y)}function Cg(i,n){return i.x===n.x&&i.y===n.y}function lC(i,n,o,u){var h=Ig(li(i,n,o)),m=Ig(li(i,n,u)),v=Ig(li(o,u,i)),x=Ig(li(o,u,n));return h!==m&&v!==x||!(h!==0||!Tg(i,o,n))||!(m!==0||!Tg(i,u,n))||!(v!==0||!Tg(o,i,u))||!(x!==0||!Tg(o,n,u))}function Tg(i,n,o){return n.x<=Math.max(i.x,o.x)&&n.x>=Math.min(i.x,o.x)&&n.y<=Math.max(i.y,o.y)&&n.y>=Math.min(i.y,o.y)}function Ig(i){return i>0?1:i<0?-1:0}function Df(i,n){return li(i.prev,i,i.next)<0?li(i,n,i.next)>=0&&li(i,i.prev,n)>=0:li(i,n,i.prev)<0||li(i,i.next,n)<0}function cC(i,n){var o=new B_(i.i,i.x,i.y),u=new B_(n.i,n.x,n.y),h=i.next,m=n.prev;return i.next=n,n.prev=i,o.next=h,h.prev=o,u.next=o,o.prev=u,m.next=u,u.prev=m,u}function uC(i,n,o,u){var h=new B_(i,n,o);return u?(h.next=u.next,h.prev=u,u.next.prev=h,u.next=h):(h.prev=h,h.next=h),h}function Lf(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function B_(i,n,o){this.i=i,this.x=n,this.y=o,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function N_(i,n,o,u){for(var h=0,m=n,v=o-u;m<o;m+=u)h+=(i[v]-i[m])*(i[m+1]+i[v+1]),v=m;return h}$_.exports=Eg,$_.exports.default=Eg,Eg.deviation=function(i,n,o,u){var h=n&&n.length,m=Math.abs(N_(i,0,h?n[0]*o:i.length,o));if(h)for(var v=0,x=n.length;v<x;v++)m-=Math.abs(N_(i,n[v]*o,v<x-1?n[v+1]*o:i.length,o));var S=0;for(v=0;v<u.length;v+=3){var E=u[v]*o,R=u[v+1]*o,z=u[v+2]*o;S+=Math.abs((i[E]-i[z])*(i[R+1]-i[E+1])-(i[E]-i[R])*(i[z+1]-i[E+1]))}return m===0&&S===0?0:Math.abs((S-m)/m)},Eg.flatten=function(i){for(var n=i[0][0].length,o={vertices:[],holes:[],dimensions:n},u=0,h=0;h<i.length;h++){for(var m=0;m<i[h].length;m++)for(var v=0;v<n;v++)o.vertices.push(i[h][m][v]);h>0&&o.holes.push(u+=i[h-1].length)}return o};var j_=H($_.exports);function dk(i,n,o,u,h){dC(i,n,o||0,u||i.length-1,h||hk)}function dC(i,n,o,u,h){for(;u>o;){if(u-o>600){var m=u-o+1,v=n-o+1,x=Math.log(m),S=.5*Math.exp(2*x/3),E=.5*Math.sqrt(x*S*(m-S)/m)*(v-m/2<0?-1:1);dC(i,n,Math.max(o,Math.floor(n-v*S/m+E)),Math.min(u,Math.floor(n+(m-v)*S/m+E)),h)}var R=i[n],z=o,L=u;for(kf(i,o,n),h(i[u],R)>0&&kf(i,o,u);z<L;){for(kf(i,z,L),z++,L--;h(i[z],R)<0;)z++;for(;h(i[L],R)>0;)L--}h(i[o],R)===0?kf(i,o,L):kf(i,++L,u),L<=n&&(o=L+1),n<=L&&(u=L-1)}}function kf(i,n,o){var u=i[n];i[n]=i[o],i[o]=u}function hk(i,n){return i<n?-1:i>n?1:0}function U_(i,n){const o=i.length;if(o<=1)return[i];const u=[];let h,m;for(let v=0;v<o;v++){const x=Kt(i[v]);x!==0&&(i[v].area=Math.abs(x),m===void 0&&(m=x<0),m===x<0?(h&&u.push(h),h=[i[v]]):h.push(i[v]))}if(h&&u.push(h),n>1)for(let v=0;v<u.length;v++)u[v].length<=n||(dk(u[v],n,1,u[v].length-1,fk),u[v]=u[v].slice(0,n));return u}function fk(i,n){return n.area-i.area}function V_(i,n,o){const u=o.patternDependencies;let h=!1;for(const m of n){const v=m.paint.get(`${i}-pattern`);v.isConstant()||(h=!0);const x=v.constantOr(null);x&&(h=!0,u[x]=!0)}return h}function H_(i,n,o,u,h){const m=h.patternDependencies;for(const v of n){const x=v.paint.get(`${i}-pattern`).value;if(x.kind!=="constant"){let S=x.evaluate({zoom:u},o,{},h.availableImages);S=S&&S.name?S.name:S,m[S]=!0,o.patterns[v.id]=S}}return o}class Mg{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(o=>o.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new wt,this.indexArray=new cn,this.indexArray2=new Ti,this.programConfigurations=new Vc(n.layers,n.zoom),this.segments=new si,this.segments2=new si,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id),this.projection=n.projection}populate(n,o,u,h){this.hasPattern=V_("fill",this.layers,o);const m=this.layers[0].layout.get("fill-sort-key"),v=[];for(const{feature:x,id:S,index:E,sourceLayerIndex:R}of n){const z=this.layers[0]._featureFilter.needGeometry,L=Xc(x,z);if(!this.layers[0]._featureFilter.filter(new O(this.zoom),L,u))continue;const V=m?m.evaluate(L,{},u,o.availableImages):void 0,G={id:S,properties:x.properties,type:x.type,sourceLayerIndex:R,index:E,geometry:z?L.geometry:Qs(x,u,h),patterns:{},sortKey:V};v.push(G)}m&&v.sort((x,S)=>x.sortKey-S.sortKey);for(const x of v){const{geometry:S,index:E,sourceLayerIndex:R}=x;if(this.hasPattern){const z=H_("fill",this.layers,x,this.zoom,o);this.patternFeatures.push(z)}else this.addFeature(x,S,E,u,{},o.availableImages);o.featureIndex.insert(n[E].feature,S,E,R,this.index)}}update(n,o,u,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,o,this.stateDependentLayers,u,h)}addFeatures(n,o,u,h,m){for(const v of this.patternFeatures)this.addFeature(v,v.geometry,v.index,o,u,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,tk),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.indexBuffer2=n.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(n,o,u,h,m,v=[]){for(const x of U_(o,500)){let S=0;for(const G of x)S+=G.length;const E=this.segments.prepareSegment(S,this.layoutVertexArray,this.indexArray),R=E.vertexLength,z=[],L=[];for(const G of x){if(G.length===0)continue;G!==x[0]&&L.push(z.length/2);const K=this.segments2.prepareSegment(G.length,this.layoutVertexArray,this.indexArray2),ae=K.vertexLength;this.layoutVertexArray.emplaceBack(G[0].x,G[0].y),this.indexArray2.emplaceBack(ae+G.length-1,ae),z.push(G[0].x),z.push(G[0].y);for(let ge=1;ge<G.length;ge++)this.layoutVertexArray.emplaceBack(G[ge].x,G[ge].y),this.indexArray2.emplaceBack(ae+ge-1,ae+ge),z.push(G[ge].x),z.push(G[ge].y);K.vertexLength+=G.length,K.primitiveLength+=G.length}const V=j_(z,L);for(let G=0;G<V.length;G+=3)this.indexArray.emplaceBack(R+V[G],R+V[G+1],R+V[G+2]);E.vertexLength+=S,E.primitiveLength+=V.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,u,m,v,h)}}Jt(Mg,"FillBucket",{omit:["layers","patternFeatures"]});const pk=new be({"fill-sort-key":new se(tt.layout_fill["fill-sort-key"])});var mk={paint:new be({"fill-antialias":new X(tt.paint_fill["fill-antialias"]),"fill-opacity":new se(tt.paint_fill["fill-opacity"]),"fill-color":new se(tt.paint_fill["fill-color"]),"fill-outline-color":new se(tt.paint_fill["fill-outline-color"]),"fill-translate":new X(tt.paint_fill["fill-translate"]),"fill-translate-anchor":new X(tt.paint_fill["fill-translate-anchor"]),"fill-pattern":new se(tt.paint_fill["fill-pattern"])}),layout:pk};const gk=Ue([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),vk=Ue([{name:"a_centroid_pos",components:2,type:"Uint16"}]),yk=Ue([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:_k}=gk;var Pg={},xk=Q,hC=hd;function hd(i,n,o,u,h){this.properties={},this.extent=o,this.type=0,this._pbf=i,this._geometry=-1,this._keys=u,this._values=h,i.readFields(bk,this,n)}function bk(i,n,o){i==1?n.id=o.readVarint():i==2?function(u,h){for(var m=u.readVarint()+u.pos;u.pos<m;){var v=h._keys[u.readVarint()],x=h._values[u.readVarint()];h.properties[v]=x}}(o,n):i==3?n.type=o.readVarint():i==4&&(n._geometry=o.pos)}function wk(i){for(var n,o,u=0,h=0,m=i.length,v=m-1;h<m;v=h++)u+=((o=i[v]).x-(n=i[h]).x)*(n.y+o.y);return u}hd.types=["Unknown","Point","LineString","Polygon"],hd.prototype.loadGeometry=function(){var i=this._pbf;i.pos=this._geometry;for(var n,o=i.readVarint()+i.pos,u=1,h=0,m=0,v=0,x=[];i.pos<o;){if(h<=0){var S=i.readVarint();u=7&S,h=S>>3}if(h--,u===1||u===2)m+=i.readSVarint(),v+=i.readSVarint(),u===1&&(n&&x.push(n),n=[]),n.push(new xk(m,v));else{if(u!==7)throw new Error("unknown command "+u);n&&n.push(n[0].clone())}}return n&&x.push(n),x},hd.prototype.bbox=function(){var i=this._pbf;i.pos=this._geometry;for(var n=i.readVarint()+i.pos,o=1,u=0,h=0,m=0,v=1/0,x=-1/0,S=1/0,E=-1/0;i.pos<n;){if(u<=0){var R=i.readVarint();o=7&R,u=R>>3}if(u--,o===1||o===2)(h+=i.readSVarint())<v&&(v=h),h>x&&(x=h),(m+=i.readSVarint())<S&&(S=m),m>E&&(E=m);else if(o!==7)throw new Error("unknown command "+o)}return[v,S,x,E]},hd.prototype.toGeoJSON=function(i,n,o){var u,h,m=this.extent*Math.pow(2,o),v=this.extent*i,x=this.extent*n,S=this.loadGeometry(),E=hd.types[this.type];function R(V){for(var G=0;G<V.length;G++){var K=V[G];V[G]=[360*(K.x+v)/m-180,360/Math.PI*Math.atan(Math.exp((180-360*(K.y+x)/m)*Math.PI/180))-90]}}switch(this.type){case 1:var z=[];for(u=0;u<S.length;u++)z[u]=S[u][0];R(S=z);break;case 2:for(u=0;u<S.length;u++)R(S[u]);break;case 3:for(S=function(V){var G=V.length;if(G<=1)return[V];for(var K,ae,ge=[],Ce=0;Ce<G;Ce++){var ye=wk(V[Ce]);ye!==0&&(ae===void 0&&(ae=ye<0),ae===ye<0?(K&&ge.push(K),K=[V[Ce]]):K.push(V[Ce]))}return K&&ge.push(K),ge}(S),u=0;u<S.length;u++)for(h=0;h<S[u].length;h++)R(S[u][h])}S.length===1?S=S[0]:E="Multi"+E;var L={type:"Feature",geometry:{type:E,coordinates:S},properties:this.properties};return"id"in this&&(L.id=this.id),L};var Sk=hC,fC=pC;function pC(i,n){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=i,this._keys=[],this._values=[],this._features=[],i.readFields(Ek,this,n),this.length=this._features.length}function Ek(i,n,o){i===15?n.version=o.readVarint():i===1?n.name=o.readString():i===5?n.extent=o.readVarint():i===2?n._features.push(o.pos):i===3?n._keys.push(o.readString()):i===4&&n._values.push(function(u){for(var h=null,m=u.readVarint()+u.pos;u.pos<m;){var v=u.readVarint()>>3;h=v===1?u.readString():v===2?u.readFloat():v===3?u.readDouble():v===4?u.readVarint64():v===5?u.readVarint():v===6?u.readSVarint():v===7?u.readBoolean():null}return h}(o))}pC.prototype.feature=function(i){if(i<0||i>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[i];var n=this._pbf.readVarint()+this._pbf.pos;return new Sk(this._pbf,n,this.extent,this._keys,this._values)};var Ck=fC;function Tk(i,n,o){if(i===3){var u=new Ck(o,o.readVarint()+o.pos);u.length&&(n[u.name]=u)}}var G_=Pg.VectorTile=function(i,n){this.layers=i.readFields(Tk,{},n)},Ag=Pg.VectorTileFeature=hC;function Rg(i,n,o,u){const h=[],m=u===0?(v,x,S,E,R,z)=>{v.push(new ee(z,S+(z-x)/(E-x)*(R-S)))}:(v,x,S,E,R,z)=>{v.push(new ee(x+(z-S)/(R-S)*(E-x),z))};for(const v of i){const x=[];for(const S of v){if(S.length<=2)continue;const E=[];for(let L=0;L<S.length-1;L++){const V=S[L].x,G=S[L].y,K=S[L+1].x,ae=S[L+1].y,ge=u===0?V:G,Ce=u===0?K:ae;ge<n?Ce>n&&m(E,V,G,K,ae,n):ge>o?Ce<o&&m(E,V,G,K,ae,o):E.push(S[L]),Ce<n&&ge>=n&&m(E,V,G,K,ae,n),Ce>o&&ge<=o&&m(E,V,G,K,ae,o)}let R=S[S.length-1];const z=u===0?R.x:R.y;z>=n&&z<=o&&E.push(R),E.length&&(R=E[E.length-1],E[0].x===R.x&&E[0].y===R.y||E.push(E[0]),x.push(E))}x.length&&h.push(x)}return h}Pg.VectorTileLayer=fC;const Ik=Ag.types,Mk=Math.pow(2,13);function $f(i,n,o,u,h,m,v,x){i.emplaceBack((n<<1)+v,(o<<1)+m,(Math.floor(u*Mk)<<1)+h,Math.round(x))}function Ff(i,n,o){i.emplaceBack(n.x,n.y,n.z,o[0]*16384,o[1]*16384,o[2]*16384)}class mC{constructor(){this.acc=new ee(0,0),this.polyCount=[]}startRing(n){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new ee(n.x,n.y),this.max=new ee(n.x,n.y))}append(n,o){this.currentPolyCount.edges++,this.acc._add(n);const u=this.min,h=this.max;n.x<u.x?u.x=n.x:n.x>h.x&&(h.x=n.x),n.y<u.y?u.y=n.y:n.y>h.y&&(h.y=n.y),((n.x===0||n.x===mn)&&n.x===o.x)!=((n.y===0||n.y===mn)&&n.y===o.y)&&this.processBorderOverlap(n,o),o.x<0!=n.x<0&&this.addBorderIntersection(0,Jn(o.y,n.y,(0-o.x)/(n.x-o.x))),o.x>mn!=n.x>mn&&this.addBorderIntersection(1,Jn(o.y,n.y,(mn-o.x)/(n.x-o.x))),o.y<0!=n.y<0&&this.addBorderIntersection(2,Jn(o.x,n.x,(0-o.y)/(n.y-o.y))),o.y>mn!=n.y>mn&&this.addBorderIntersection(3,Jn(o.x,n.x,(mn-o.y)/(n.y-o.y)))}addBorderIntersection(n,o){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const u=this.borders[n];o<u[0]&&(u[0]=o),o>u[1]&&(u[1]=o)}processBorderOverlap(n,o){if(n.x===o.x){if(n.y===o.y)return;const u=n.x===0?0:1;this.addBorderIntersection(u,o.y),this.addBorderIntersection(u,n.y)}else{const u=n.y===0?2:3;this.addBorderIntersection(u,o.x),this.addBorderIntersection(u,n.x)}}centroid(){const n=this.polyCount.reduce((o,u)=>o+u.edges,0);return n!==0?this.acc.div(n)._round():new ee(0,0)}span(){return new ee(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce((n,o)=>n+ +(o[0]!==Number.MAX_VALUE),0)}}class Bf{constructor(n){this.zoom=n.zoom,this.canonical=n.canonical,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(o=>o.id),this.index=n.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=n.projection,this.layoutVertexArray=new ct,this.centroidVertexArray=new Wa,this.indexArray=new cn,this.programConfigurations=new Vc(n.layers,n.zoom),this.segments=new si,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id),this.enableTerrain=n.enableTerrain}populate(n,o,u,h){this.features=[],this.hasPattern=V_("fill-extrusion",this.layers,o),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=function(m){const v=Math.exp(Math.PI*(1-m.y/(1<<m.z)*2));return 80150034*v/(v*v+1)/mn/(1<<m.z)}(u),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;for(const{feature:m,id:v,index:x,sourceLayerIndex:S}of n){const E=this.layers[0]._featureFilter.needGeometry,R=Xc(m,E);if(!this.layers[0]._featureFilter.filter(new O(this.zoom),R,u))continue;const z={id:v,sourceLayerIndex:S,index:x,geometry:E?R.geometry:Qs(m,u,h),properties:m.properties,type:m.type,patterns:{}},L=this.layoutVertexArray.length;this.hasPattern?this.features.push(H_("fill-extrusion",this.layers,z,this.zoom,o)):this.addFeature(z,z.geometry,x,u,{},o.availableImages,h),o.featureIndex.insert(m,z.geometry,x,S,this.index,L)}this.sortBorders()}addFeatures(n,o,u,h,m){for(const v of this.features){const{geometry:x}=v;this.addFeature(v,x,v.index,o,u,h,m)}this.sortBorders()}update(n,o,u,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,o,this.stateDependentLayers,u,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,_k),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=n.createVertexBuffer(this.layoutVertexExtArray,yk.members,!0))),this.programConfigurations.upload(n),this.uploaded=!0}uploadCentroid(n){this.centroidVertexArray.length!==0&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=n.createVertexBuffer(this.centroidVertexArray,vk.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(n,o,u,h,m,v,x){const S=[new ee(0,0),new ee(mn,mn)],E=x.projection,R=E.name==="globe",z=this.enableTerrain&&!R?new mC:null,L=Ik[n.type]==="Polygon";R&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new It);const V=U_(o,500);for(let ge=V.length-1;ge>=0;ge--){const Ce=V[ge];(Ce.length===0||(G=Ce[0]).every(ye=>ye.x<=0)||G.every(ye=>ye.x>=mn)||G.every(ye=>ye.y<=0)||G.every(ye=>ye.y>=mn))&&V.splice(ge,1)}var G;let K;if(R)K=wC(V,S,h);else{K=[];for(const ge of V)K.push({polygon:ge,bounds:S})}const ae=L?this.edgeRadius:0;for(const{polygon:ge,bounds:Ce}of K){let ye=0,Ee=0;for(const Pe of ge)L&&!Pe[0].equals(Pe[Pe.length-1])&&Pe.push(Pe[0]),Ee+=L?Pe.length-1:Pe.length;const Ae=this.segments.prepareSegment((L?5:4)*Ee,this.layoutVertexArray,this.indexArray);if(L){const Pe=[],Ye=[];ye=Ae.vertexLength;for(const ot of ge){let St,et;ot.length&&ot!==ge[0]&&Ye.push(Pe.length/2),St=ot[1].sub(ot[0])._perp()._unit();for(let ht=1;ht<ot.length;ht++){const ft=ot[ht],vt=ot[ht===ot.length-1?1:ht+1];let{x:Dt,y:rt}=ft;if(ae){et=vt.sub(ft)._perp()._unit();const Gt=St.add(et)._unit(),en=ae*Math.min(4,1/(St.x*Gt.x+St.y*Gt.y));Dt+=en*Gt.x,rt+=en*Gt.y,St=et}$f(this.layoutVertexArray,Dt,rt,0,0,1,1,0),Ae.vertexLength++,Pe.push(ft.x,ft.y),R&&Ff(this.layoutVertexExtArray,E.projectTilePoint(Dt,rt,h),E.upVector(h,Dt,rt))}}const qe=j_(Pe,Ye);for(let ot=0;ot<qe.length;ot+=3)this.indexArray.emplaceBack(ye+qe[ot],ye+qe[ot+2],ye+qe[ot+1]),Ae.primitiveLength++}for(const Pe of ge){z&&Pe.length&&z.startRing(Pe[0]);let Ye,qe,ot,St=Pe.length>4&&_C(Pe[Pe.length-2],Pe[0],Pe[1]),et=ae?Pk(Pe[Pe.length-2],Pe[0],Pe[1],ae):0;qe=Pe[1].sub(Pe[0])._perp()._unit();let ht=!0;for(let ft=1,vt=0;ft<Pe.length;ft++){let Dt=Pe[ft-1],rt=Pe[ft];const Gt=Pe[ft===Pe.length-1?1:ft+1];if(z&&L&&z.currentPolyCount.top++,yC(rt,Dt,Ce)){ae&&(qe=Gt.sub(rt)._perp()._unit(),ht=!ht);continue}z&&z.append(rt,Dt);const en=rt.sub(Dt)._perp(),Wt=en.x/(Math.abs(en.x)+Math.abs(en.y)),Dn=en.y>0?1:0,Lt=Dt.dist(rt);if(vt+Lt>32768&&(vt=0),ae){ot=Gt.sub(rt)._perp()._unit();let kn=vC(Dt,rt,Gt,gC(qe,ot),ae);isNaN(kn)&&(kn=0);const wn=rt.sub(Dt)._unit();Dt=Dt.add(wn.mult(et))._round(),rt=rt.add(wn.mult(-kn))._round(),et=kn,qe=ot}const fn=Ae.vertexLength,Ln=Pe.length>4&&_C(Dt,rt,Gt);let nr=xC(vt,St,ht);if($f(this.layoutVertexArray,Dt.x,Dt.y,Wt,Dn,0,0,nr),$f(this.layoutVertexArray,Dt.x,Dt.y,Wt,Dn,0,1,nr),vt+=Lt,nr=xC(vt,Ln,!ht),St=Ln,$f(this.layoutVertexArray,rt.x,rt.y,Wt,Dn,0,0,nr),$f(this.layoutVertexArray,rt.x,rt.y,Wt,Dn,0,1,nr),Ae.vertexLength+=4,this.indexArray.emplaceBack(fn+0,fn+1,fn+2),this.indexArray.emplaceBack(fn+1,fn+3,fn+2),Ae.primitiveLength+=2,ae){const kn=ye+(ft===1?Pe.length-2:ft-2),wn=ft===1?ye:kn+1;if(this.indexArray.emplaceBack(fn+1,kn,fn+3),this.indexArray.emplaceBack(kn,wn,fn+3),Ae.primitiveLength+=2,Ye===void 0&&(Ye=fn),!yC(Gt,Pe[ft],Ce)){const Or=ft===Pe.length-1?Ye:Ae.vertexLength;this.indexArray.emplaceBack(fn+2,fn+3,Or),this.indexArray.emplaceBack(fn+3,Or+1,Or),this.indexArray.emplaceBack(fn+3,wn,Or+1),Ae.primitiveLength+=3}ht=!ht}if(R){const kn=this.layoutVertexExtArray,wn=E.projectTilePoint(Dt.x,Dt.y,h),Or=E.projectTilePoint(rt.x,rt.y,h),Fn=E.upVector(h,Dt.x,Dt.y),Bn=E.upVector(h,rt.x,rt.y);Ff(kn,wn,Fn),Ff(kn,wn,Fn),Ff(kn,Or,Bn),Ff(kn,Or,Bn)}}L&&(ye+=Pe.length-1)}}if(z&&z.polyCount.length>0){if(z.borders){z.vertexArrayOffset=this.centroidVertexArray.length;const ge=z.borders,Ce=this.featuresOnBorder.push(z)-1;for(let ye=0;ye<4;ye++)ge[ye][0]!==Number.MAX_VALUE&&this.borders[ye].push(Ce)}this.encodeCentroid(z.borders?void 0:z.centroid(),z)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,u,m,v,h)}sortBorders(){for(let n=0;n<4;n++)this.borders[n].sort((o,u)=>this.featuresOnBorder[o].borders[n][0]-this.featuresOnBorder[u].borders[n][0])}encodeCentroid(n,o,u=!0){let h,m;if(n)if(n.y!==0){const x=o.span()._mult(this.tileToMeter);h=(Math.max(n.x,1)<<3)+Math.min(7,Math.round(x.x/10)),m=(Math.max(n.y,1)<<3)+Math.min(7,Math.round(x.y/10))}else h=Math.ceil(7*(n.x+450)),m=0;else h=0,m=+u;let v=u?this.centroidVertexArray.length:o.vertexArrayOffset;for(const x of o.polyCount){u&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*x.edges+x.top);for(let S=0;S<x.top;S++)this.centroidVertexArray.emplace(v++,h,m);for(let S=0;S<2*x.edges;S++)this.centroidVertexArray.emplace(v++,0,m),this.centroidVertexArray.emplace(v++,h,m)}}}function gC(i,n){const o=i.add(n)._unit();return i.x*o.x+i.y*o.y}function Pk(i,n,o,u){const h=n.sub(i)._perp()._unit(),m=o.sub(n)._perp()._unit();return vC(i,n,o,gC(h,m),u)}function vC(i,n,o,u,h){const m=Math.sqrt(1-u*u);return Math.min(i.dist(n)/3,n.dist(o)/3,h*m/u)}function yC(i,n,o){return i.x<o[0].x&&n.x<o[0].x||i.x>o[1].x&&n.x>o[1].x||i.y<o[0].y&&n.y<o[0].y||i.y>o[1].y&&n.y>o[1].y}function _C(i,n,o){if(i.x<0||i.x>=mn||n.x<0||n.x>=mn||o.x<0||o.x>=mn)return!1;const u=o.sub(n),h=u.perp(),m=i.sub(n);return(u.x*m.x+u.y*m.y)/Math.sqrt((u.x*u.x+u.y*u.y)*(m.x*m.x+m.y*m.y))>-.866&&h.x*m.x+h.y*m.y<0}function xC(i,n,o){const u=n?2|i:-3&i;return o?1|u:-2&u}function bC(){const i=Math.PI/32,n=Math.tan(i),o=Of;return o*Math.sqrt(1+2*n*n)-o}function wC(i,n,o){const u=1<<o.z,h=Yo(o.x/u),m=Yo((o.x+1)/u),v=Gi(o.y/u),x=Gi((o.y+1)/u);return function(S,E,R,z,L=0,V){const G=[];if(!S.length||!R||!z)return G;const K=(Pe,Ye)=>{for(const qe of Pe)G.push({polygon:qe,bounds:Ye})},ae=Math.ceil(Math.log2(R)),ge=Math.ceil(Math.log2(z)),Ce=ae-ge,ye=[];for(let Pe=0;Pe<Math.abs(Ce);Pe++)ye.push(Ce>0?0:1);for(let Pe=0;Pe<Math.min(ae,ge);Pe++)ye.push(0),ye.push(1);let Ee=S;if(Ee=Rg(Ee,E[0].y-L,E[1].y+L,1),Ee=Rg(Ee,E[0].x-L,E[1].x+L,0),!Ee.length)return G;const Ae=[];for(ye.length?Ae.push({polygons:Ee,bounds:E,depth:0}):K(Ee,E);Ae.length;){const Pe=Ae.pop(),Ye=Pe.depth,qe=ye[Ye],ot=Pe.bounds[0],St=Pe.bounds[1],et=qe===0?ot.x:ot.y,ht=qe===0?St.x:St.y,ft=V?V(qe,et,ht):.5*(et+ht),vt=Rg(Pe.polygons,et-L,ft+L,qe),Dt=Rg(Pe.polygons,ft-L,ht+L,qe);if(vt.length){const rt=[ot,new ee(qe===0?ft:St.x,qe===1?ft:St.y)];ye.length>Ye+1?Ae.push({polygons:vt,bounds:rt,depth:Ye+1}):K(vt,rt)}if(Dt.length){const rt=[new ee(qe===0?ft:ot.x,qe===1?ft:ot.y),St];ye.length>Ye+1?Ae.push({polygons:Dt,bounds:rt,depth:Ye+1}):K(Dt,rt)}}return G}(i,n,Math.ceil((m-h)/11.25),Math.ceil((v-x)/11.25),1,(S,E,R)=>{if(S===0)return .5*(E+R);{const z=Gi((o.y+E/mn)/u);return(Is(.5*(Gi((o.y+R/mn)/u)+z))*u-o.y)*mn}})}Jt(Bf,"FillExtrusionBucket",{omit:["layers","features"]}),Jt(mC,"PartMetadata");const Ak=new be({"fill-extrusion-edge-radius":new X(tt["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var Rk={paint:new be({"fill-extrusion-opacity":new X(tt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new se(tt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new X(tt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new X(tt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new se(tt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new se(tt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new se(tt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new X(tt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new X(tt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new X(tt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"]),"fill-extrusion-rounded-roof":new X(tt["paint_fill-extrusion"]["fill-extrusion-rounded-roof"])}),layout:Ak};function SC(i,n,o){var u=2*Math.PI*6378137/256/Math.pow(2,o);return[i*u-2*Math.PI*6378137/2,n*u-2*Math.PI*6378137/2]}class Og{constructor(n,o,u){this.z=n,this.x=o,this.y=u,this.key=Nf(0,n,n,o,u)}equals(n){return this.z===n.z&&this.x===n.x&&this.y===n.y}url(n,o){const u=function(m,v,x){var S=SC(256*m,256*(v=Math.pow(2,x)-v-1),x),E=SC(256*(m+1),256*(v+1),x);return S[0]+","+S[1]+","+E[0]+","+E[1]}(this.x,this.y,this.z),h=function(m,v,x){let S,E="";for(let R=m;R>0;R--)S=1<<R-1,E+=(v&S?1:0)+(x&S?2:0);return E}(this.z,this.x,this.y);return n[(this.x+this.y)%n.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(o==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",h).replace("{bbox-epsg-3857}",u)}toString(){return`${this.z}/${this.x}/${this.y}`}}class EC{constructor(n,o){this.wrap=n,this.canonical=o,this.key=Nf(n,o.z,o.z,o.x,o.y)}}class lo{constructor(n,o,u,h,m){this.overscaledZ=n,this.wrap=o,this.canonical=new Og(u,+h,+m),this.key=o===0&&n===u?this.canonical.key:Nf(o,n,u,h,m)}equals(n){return this.overscaledZ===n.overscaledZ&&this.wrap===n.wrap&&this.canonical.equals(n.canonical)}scaledTo(n){const o=this.canonical.z-n;return n>this.canonical.z?new lo(n,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new lo(n,this.wrap,n,this.canonical.x>>o,this.canonical.y>>o)}calculateScaledKey(n,o=!0){if(this.overscaledZ===n&&o)return this.key;if(n>this.canonical.z)return Nf(this.wrap*+o,n,this.canonical.z,this.canonical.x,this.canonical.y);{const u=this.canonical.z-n;return Nf(this.wrap*+o,n,n,this.canonical.x>>u,this.canonical.y>>u)}}isChildOf(n){if(n.wrap!==this.wrap)return!1;const o=this.canonical.z-n.canonical.z;return n.overscaledZ===0||n.overscaledZ<this.overscaledZ&&n.canonical.x===this.canonical.x>>o&&n.canonical.y===this.canonical.y>>o}children(n){if(this.overscaledZ>=n)return[new lo(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const o=this.canonical.z+1,u=2*this.canonical.x,h=2*this.canonical.y;return[new lo(o,this.wrap,o,u,h),new lo(o,this.wrap,o,u+1,h),new lo(o,this.wrap,o,u,h+1),new lo(o,this.wrap,o,u+1,h+1)]}isLessThan(n){return this.wrap<n.wrap||!(this.wrap>n.wrap)&&(this.overscaledZ<n.overscaledZ||!(this.overscaledZ>n.overscaledZ)&&(this.canonical.x<n.canonical.x||!(this.canonical.x>n.canonical.x)&&this.canonical.y<n.canonical.y))}wrapped(){return new lo(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(n){return new lo(this.overscaledZ,n,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new EC(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function Nf(i,n,o,u,h){const m=1<<Math.min(o,22);let v=m*(h%m)+u%m;return i&&o<22&&(v+=m*m*((i<0?-2*i-1:2*i)%(1<<2*(22-o)))),16*(32*v+o)+(n-o)}Jt(Og,"CanonicalTileID"),Jt(lo,"OverscaledTileID",{omit:["projMatrix"]});class fd extends ee{constructor(n,o,u){super(n,o),this.z=u}}function jf(i,n){return i.x*n.x+i.y*n.y}function CC(i,n){if(i.length===1){let o=0;const u=n[o++];let h;for(;!h||u.equals(h);)if(h=n[o++],!h)return 1/0;for(;o<n.length;o++){const m=n[o],v=i[0],x=h.sub(u),S=m.sub(u),E=v.sub(u),R=jf(x,x),z=jf(x,S),L=jf(S,S),V=jf(E,x),G=jf(E,S),K=R*L-z*z,ae=(L*V-z*G)/K,ge=(R*G-z*V)/K,Ce=u.z*(1-ae-ge)+h.z*ae+m.z*ge;if(isFinite(Ce))return Ce}return 1/0}{let o=1/0;for(const u of n)o=Math.min(o,u.z);return o}}function TC(i,n,o,u,h,m,v,x){const S=v*h.getElevationAt(i,n,!0,!0),E=m[0]!==0,R=E?m[1]===0?v*(m[0]/7-450):v*function(z,L,V){const G=Math.floor(L[0]/8),K=Math.floor(L[1]/8),ae=10*(L[0]-8*G),ge=10*(L[1]-8*K),Ce=z.getElevationAt(G,K,!0,!0),ye=z.getMeterToDEM(V),Ee=Math.floor(.5*(ae*ye-1)),Ae=Math.floor(.5*(ge*ye-1)),Pe=z.tileCoordToPixel(G,K),Ye=2*Ee+1,qe=2*Ae+1,ot=function(Dt,rt,Gt,en,Wt){return[Dt.getElevationAtPixel(rt,Gt,!0),Dt.getElevationAtPixel(rt+Wt,Gt,!0),Dt.getElevationAtPixel(rt,Gt+Wt,!0),Dt.getElevationAtPixel(rt+en,Gt+Wt,!0)]}(z,Pe.x-Ee,Pe.y-Ae,Ye,qe),St=Math.abs(ot[0]-ot[1]),et=Math.abs(ot[2]-ot[3]),ht=Math.abs(ot[0]-ot[2])+Math.abs(ot[1]-ot[3]),ft=Math.min(.25,.5*ye*(St+et)/Ye),vt=Math.min(.25,.5*ye*ht/qe);return Ce+Math.max(ft*ae,vt*ge)}(h,m,x):S;return{base:S+(o===0)?-1:o,top:E?Math.max(R+u,S+o+2):S+u}}const Ok=Ue([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:zk}=Ok,Dk=Ue([{name:"a_packed",components:4,type:"Float32"}]),{members:Lk}=Dk,kk=Ag.types,$k=Math.cos(Math.PI/180*37.5);class zg{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(o=>o.id),this.index=n.index,this.projection=n.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(o=>{this.gradients[o.id]={}}),this.layoutVertexArray=new Qe,this.layoutVertexArray2=new xt,this.indexArray=new cn,this.programConfigurations=new Vc(n.layers,n.zoom),this.segments=new si,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(n,o,u,h){this.hasPattern=V_("line",this.layers,o);const m=this.layers[0].layout.get("line-sort-key"),v=[];for(const{feature:R,id:z,index:L,sourceLayerIndex:V}of n){const G=this.layers[0]._featureFilter.needGeometry,K=Xc(R,G);if(!this.layers[0]._featureFilter.filter(new O(this.zoom),K,u))continue;const ae=m?m.evaluate(K,{},u):void 0,ge={id:z,properties:R.properties,type:R.type,sourceLayerIndex:V,index:L,geometry:G?K.geometry:Qs(R,u,h),patterns:{},sortKey:ae};v.push(ge)}m&&v.sort((R,z)=>R.sortKey-z.sortKey);const{lineAtlas:x,featureIndex:S}=o,E=this.addConstantDashes(x);for(const R of v){const{geometry:z,index:L,sourceLayerIndex:V}=R;if(E&&this.addFeatureDashes(R,x),this.hasPattern){const G=H_("line",this.layers,R,this.zoom,o);this.patternFeatures.push(G)}else this.addFeature(R,z,L,u,x.positions,o.availableImages);S.insert(n[L].feature,z,L,V,this.index)}}addConstantDashes(n){let o=!1;for(const u of this.layers){const h=u.paint.get("line-dasharray").value,m=u.layout.get("line-cap").value;if(h.kind!=="constant"||m.kind!=="constant")o=!0;else{const v=m.value,x=h.value;if(!x)continue;n.addDash(x,v)}}return o}addFeatureDashes(n,o){const u=this.zoom;for(const h of this.layers){const m=h.paint.get("line-dasharray").value,v=h.layout.get("line-cap").value;if(m.kind==="constant"&&v.kind==="constant")continue;let x,S;if(m.kind==="constant"){if(x=m.value,!x)continue}else x=m.evaluate({zoom:u},n);S=v.kind==="constant"?v.value:v.evaluate({zoom:u},n),o.addDash(x,S),n.patterns[h.id]=o.getKey(x,S)}}update(n,o,u,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,o,this.stateDependentLayers,u,h)}addFeatures(n,o,u,h,m){for(const v of this.patternFeatures)this.addFeature(v,v.geometry,v.index,o,u,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=n.createVertexBuffer(this.layoutVertexArray2,Lk)),this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,zk),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(n){if(n.properties&&n.properties.hasOwnProperty("mapbox_clip_start")&&n.properties.hasOwnProperty("mapbox_clip_end"))return{start:+n.properties.mapbox_clip_start,end:+n.properties.mapbox_clip_end}}addFeature(n,o,u,h,m,v){const x=this.layers[0].layout,S=x.get("line-join").evaluate(n,{}),E=x.get("line-cap").evaluate(n,{}),R=x.get("line-miter-limit"),z=x.get("line-round-limit");this.lineClips=this.lineFeatureClips(n);for(const L of o)this.addLine(L,n,S,E,R,z);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,u,m,v,h)}addLine(n,o,u,h,m,v){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let ge=0;ge<n.length-1;ge++)this.totalDistance+=n[ge].dist(n[ge+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const x=kk[o.type]==="Polygon";let S=n.length;for(;S>=2&&n[S-1].equals(n[S-2]);)S--;let E=0;for(;E<S-1&&n[E].equals(n[E+1]);)E++;if(S<(x?3:2))return;u==="bevel"&&(m=1.05);const R=this.overscaling<=16?15*mn/(512*this.overscaling):0,z=this.segments.prepareSegment(10*S,this.layoutVertexArray,this.indexArray);let L,V,G,K,ae;this.e1=this.e2=-1,x&&(L=n[S-2],ae=n[E].sub(L)._unit()._perp());for(let ge=E;ge<S;ge++){if(G=ge===S-1?x?n[E+1]:void 0:n[ge+1],G&&n[ge].equals(G))continue;ae&&(K=ae),L&&(V=L),L=n[ge],ae=G?G.sub(L)._unit()._perp():K,K=K||ae;let Ce=K.add(ae);Ce.x===0&&Ce.y===0||Ce._unit();const ye=K.x*ae.x+K.y*ae.y,Ee=Ce.x*ae.x+Ce.y*ae.y,Ae=Ee!==0?1/Ee:1/0,Pe=2*Math.sqrt(2-2*Ee),Ye=Ee<$k&&V&&G,qe=K.x*ae.y-K.y*ae.x>0;if(Ye&&ge>E){const et=L.dist(V);if(et>2*R){const ht=L.sub(L.sub(V)._mult(R/et)._round());this.updateDistance(V,ht),this.addCurrentVertex(ht,K,0,0,z),V=ht}}const ot=V&&G;let St=ot?u:x?"butt":h;if(ot&&St==="round"&&(Ae<v?St="miter":Ae<=2&&(St="fakeround")),St==="miter"&&Ae>m&&(St="bevel"),St==="bevel"&&(Ae>2&&(St="flipbevel"),Ae<m&&(St="miter")),V&&this.updateDistance(V,L),St==="miter")Ce._mult(Ae),this.addCurrentVertex(L,Ce,0,0,z);else if(St==="flipbevel"){if(Ae>100)Ce=ae.mult(-1);else{const et=Ae*K.add(ae).mag()/K.sub(ae).mag();Ce._perp()._mult(et*(qe?-1:1))}this.addCurrentVertex(L,Ce,0,0,z),this.addCurrentVertex(L,Ce.mult(-1),0,0,z)}else if(St==="bevel"||St==="fakeround"){const et=-Math.sqrt(Ae*Ae-1),ht=qe?et:0,ft=qe?0:et;if(V&&this.addCurrentVertex(L,K,ht,ft,z),St==="fakeround"){const vt=Math.round(180*Pe/Math.PI/20);for(let Dt=1;Dt<vt;Dt++){let rt=Dt/vt;if(rt!==.5){const en=rt-.5;rt+=rt*en*(rt-1)*((1.0904+ye*(ye*(3.55645-1.43519*ye)-3.2452))*en*en+(.848013+ye*(.215638*ye-1.06021)))}const Gt=ae.sub(K)._mult(rt)._add(K)._unit()._mult(qe?-1:1);this.addHalfVertex(L,Gt.x,Gt.y,!1,qe,0,z)}}G&&this.addCurrentVertex(L,ae,-ht,-ft,z)}else if(St==="butt")this.addCurrentVertex(L,Ce,0,0,z);else if(St==="square"){const et=V?1:-1;V||this.addCurrentVertex(L,Ce,et,et,z),this.addCurrentVertex(L,Ce,0,0,z),V&&this.addCurrentVertex(L,Ce,et,et,z)}else St==="round"&&(V&&(this.addCurrentVertex(L,K,0,0,z),this.addCurrentVertex(L,K,1,1,z,!0)),G&&(this.addCurrentVertex(L,ae,-1,-1,z,!0),this.addCurrentVertex(L,ae,0,0,z)));if(Ye&&ge<S-1){const et=L.dist(G);if(et>2*R){const ht=L.add(G.sub(L)._mult(R/et)._round());this.updateDistance(L,ht),this.addCurrentVertex(ht,ae,0,0,z),L=ht}}}}addCurrentVertex(n,o,u,h,m,v=!1){const x=o.y*h-o.x,S=-o.y-o.x*h;this.addHalfVertex(n,o.x+o.y*u,o.y-o.x*u,v,!1,u,m),this.addHalfVertex(n,x,S,v,!0,-h,m)}addHalfVertex({x:n,y:o},u,h,m,v,x,S){this.layoutVertexArray.emplaceBack((n<<1)+(m?1:0),(o<<1)+(v?1:0),Math.round(63*u)+128,Math.round(63*h)+128,1+(x===0?0:x<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const E=S.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,E),S.primitiveLength++),v?this.e2=E:this.e1=E}updateScaledDistance(){if(this.lineClips){const n=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=n*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(n,o){this.distance+=n.dist(o),this.updateScaledDistance()}}Jt(zg,"LineBucket",{omit:["layers","patternFeatures"]});const Fk=new be({"line-cap":new se(tt.layout_line["line-cap"]),"line-join":new se(tt.layout_line["line-join"]),"line-miter-limit":new X(tt.layout_line["line-miter-limit"]),"line-round-limit":new X(tt.layout_line["line-round-limit"]),"line-sort-key":new se(tt.layout_line["line-sort-key"])});var IC={paint:new be({"line-opacity":new se(tt.paint_line["line-opacity"]),"line-color":new se(tt.paint_line["line-color"]),"line-translate":new X(tt.paint_line["line-translate"]),"line-translate-anchor":new X(tt.paint_line["line-translate-anchor"]),"line-width":new se(tt.paint_line["line-width"]),"line-gap-width":new se(tt.paint_line["line-gap-width"]),"line-offset":new se(tt.paint_line["line-offset"]),"line-blur":new se(tt.paint_line["line-blur"]),"line-dasharray":new se(tt.paint_line["line-dasharray"]),"line-pattern":new se(tt.paint_line["line-pattern"]),"line-gradient":new xe(tt.paint_line["line-gradient"]),"line-trim-offset":new X(tt.paint_line["line-trim-offset"])}),layout:Fk};const MC=new class extends se{possiblyEvaluate(i,n){return n=new O(Math.floor(n.zoom),{now:n.now,fadeDuration:n.fadeDuration,transition:n.transition}),super.possiblyEvaluate(i,n)}evaluate(i,n,o,u){return n=yt({},n,{zoom:Math.floor(n.zoom)}),super.evaluate(i,n,o,u)}}(IC.paint.properties["line-width"].specification);function PC(i,n){return n>0?n+2*i:i}MC.useIntegerZoom=!0;const Bk=Ue([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Nk=Ue([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),jk=Ue([{name:"a_projected_pos",components:4,type:"Float32"}],4);Ue([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Uk=Ue([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),Vk=Ue([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);Ue([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const AC=Ue([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Hk=Ue([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);Ue([{name:"triangle",components:3,type:"Uint16"}]),Ue([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),Ue([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Ue([{type:"Float32",name:"offsetX"}]),Ue([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var Di=24;const Ja=128;function W_(i,n){const{expression:o}=n;if(o.kind==="constant")return{kind:"constant",layoutSize:o.evaluate(new O(i+1))};if(o.kind==="source")return{kind:"source"};{const{zoomStops:u,interpolationType:h}=o;let m=0;for(;m<u.length&&u[m]<=i;)m++;m=Math.max(0,m-1);let v=m;for(;v<u.length&&u[v]<i+1;)v++;v=Math.min(u.length-1,v);const x=u[m],S=u[v];return o.kind==="composite"?{kind:"composite",minZoom:x,maxZoom:S,interpolationType:h}:{kind:"camera",minZoom:x,maxZoom:S,minSize:o.evaluate(new O(x)),maxSize:o.evaluate(new O(S)),interpolationType:h}}}function Dg(i,{uSize:n,uSizeT:o},{lowerSize:u,upperSize:h}){return i.kind==="source"?u/Ja:i.kind==="composite"?Jn(u/Ja,h/Ja,o):n}function pd(i,n){let o=0,u=0;if(i.kind==="constant")u=i.layoutSize;else if(i.kind!=="source"){const{interpolationType:h,minZoom:m,maxZoom:v}=i,x=h?pe(xa.interpolationFactor(h,n,m,v),0,1):0;i.kind==="camera"?u=Jn(i.minSize,i.maxSize,x):o=x}return{uSizeT:o,uSize:u}}var Gk=Object.freeze({__proto__:null,SIZE_PACK_FACTOR:Ja,evaluateSizeForFeature:Dg,evaluateSizeForZoom:pd,getSizeData:W_});function Wk(i,n,o){return i.sections.forEach(u=>{u.text=function(h,m,v){const x=m.layout.get("text-transform").evaluate(v,{});return x==="uppercase"?h=h.toLocaleUpperCase():x==="lowercase"&&(h=h.toLocaleLowerCase()),M.applyArabicShaping&&(h=M.applyArabicShaping(h)),h}(u.text,n,o)}),i}const Uf={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂","←":"↑","→":"↓"};function qk(i){return i==="︶"||i==="﹈"||i==="︸"||i==="﹄"||i==="﹂"||i==="︾"||i==="︼"||i==="︺"||i==="︘"||i==="﹀"||i==="︐"||i==="︓"||i==="︔"||i==="｀"||i==="￣"||i==="︑"||i==="︒"}function Zk(i){return i==="︵"||i==="﹇"||i==="︷"||i==="﹃"||i==="﹁"||i==="︽"||i==="︻"||i==="︹"||i==="︗"||i==="︿"}var RC=Ir,OC=function(i,n,o,u,h){var m,v,x=8*h-u-1,S=(1<<x)-1,E=S>>1,R=-7,z=o?h-1:0,L=o?-1:1,V=i[n+z];for(z+=L,m=V&(1<<-R)-1,V>>=-R,R+=x;R>0;m=256*m+i[n+z],z+=L,R-=8);for(v=m&(1<<-R)-1,m>>=-R,R+=u;R>0;v=256*v+i[n+z],z+=L,R-=8);if(m===0)m=1-E;else{if(m===S)return v?NaN:1/0*(V?-1:1);v+=Math.pow(2,u),m-=E}return(V?-1:1)*v*Math.pow(2,m-u)},zC=function(i,n,o,u,h,m){var v,x,S,E=8*m-h-1,R=(1<<E)-1,z=R>>1,L=h===23?Math.pow(2,-24)-Math.pow(2,-77):0,V=u?0:m-1,G=u?1:-1,K=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(x=isNaN(n)?1:0,v=R):(v=Math.floor(Math.log(n)/Math.LN2),n*(S=Math.pow(2,-v))<1&&(v--,S*=2),(n+=v+z>=1?L/S:L*Math.pow(2,1-z))*S>=2&&(v++,S/=2),v+z>=R?(x=0,v=R):v+z>=1?(x=(n*S-1)*Math.pow(2,h),v+=z):(x=n*Math.pow(2,z-1)*Math.pow(2,h),v=0));h>=8;i[o+V]=255&x,V+=G,x/=256,h-=8);for(v=v<<h|x,E+=h;E>0;i[o+V]=255&v,V+=G,v/=256,E-=8);i[o+V-G]|=128*K};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */function Ir(i){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(i)?i:new Uint8Array(i||0),this.pos=0,this.type=0,this.length=this.buf.length}Ir.Varint=0,Ir.Fixed64=1,Ir.Bytes=2,Ir.Fixed32=5;var q_=4294967296,DC=1/q_,LC=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function tl(i){return i.type===Ir.Bytes?i.readVarint()+i.pos:i.pos+1}function md(i,n,o){return o?4294967296*n+(i>>>0):4294967296*(n>>>0)+(i>>>0)}function kC(i,n,o){var u=n<=16383?1:n<=2097151?2:n<=268435455?3:Math.floor(Math.log(n)/(7*Math.LN2));o.realloc(u);for(var h=o.pos-1;h>=i;h--)o.buf[h+u]=o.buf[h]}function Xk(i,n){for(var o=0;o<i.length;o++)n.writeVarint(i[o])}function Kk(i,n){for(var o=0;o<i.length;o++)n.writeSVarint(i[o])}function Yk(i,n){for(var o=0;o<i.length;o++)n.writeFloat(i[o])}function Jk(i,n){for(var o=0;o<i.length;o++)n.writeDouble(i[o])}function Qk(i,n){for(var o=0;o<i.length;o++)n.writeBoolean(i[o])}function e3(i,n){for(var o=0;o<i.length;o++)n.writeFixed32(i[o])}function t3(i,n){for(var o=0;o<i.length;o++)n.writeSFixed32(i[o])}function n3(i,n){for(var o=0;o<i.length;o++)n.writeFixed64(i[o])}function r3(i,n){for(var o=0;o<i.length;o++)n.writeSFixed64(i[o])}function Lg(i,n){return(i[n]|i[n+1]<<8|i[n+2]<<16)+16777216*i[n+3]}function gd(i,n,o){i[o]=n,i[o+1]=n>>>8,i[o+2]=n>>>16,i[o+3]=n>>>24}function $C(i,n){return(i[n]|i[n+1]<<8|i[n+2]<<16)+(i[n+3]<<24)}Ir.prototype={destroy:function(){this.buf=null},readFields:function(i,n,o){for(o=o||this.length;this.pos<o;){var u=this.readVarint(),h=u>>3,m=this.pos;this.type=7&u,i(h,n,this),this.pos===m&&this.skip(u)}return n},readMessage:function(i,n){return this.readFields(i,n,this.readVarint()+this.pos)},readFixed32:function(){var i=Lg(this.buf,this.pos);return this.pos+=4,i},readSFixed32:function(){var i=$C(this.buf,this.pos);return this.pos+=4,i},readFixed64:function(){var i=Lg(this.buf,this.pos)+Lg(this.buf,this.pos+4)*q_;return this.pos+=8,i},readSFixed64:function(){var i=Lg(this.buf,this.pos)+$C(this.buf,this.pos+4)*q_;return this.pos+=8,i},readFloat:function(){var i=OC(this.buf,this.pos,!0,23,4);return this.pos+=4,i},readDouble:function(){var i=OC(this.buf,this.pos,!0,52,8);return this.pos+=8,i},readVarint:function(i){var n,o,u=this.buf;return n=127&(o=u[this.pos++]),o<128?n:(n|=(127&(o=u[this.pos++]))<<7,o<128?n:(n|=(127&(o=u[this.pos++]))<<14,o<128?n:(n|=(127&(o=u[this.pos++]))<<21,o<128?n:function(h,m,v){var x,S,E=v.buf;if(x=(112&(S=E[v.pos++]))>>4,S<128||(x|=(127&(S=E[v.pos++]))<<3,S<128)||(x|=(127&(S=E[v.pos++]))<<10,S<128)||(x|=(127&(S=E[v.pos++]))<<17,S<128)||(x|=(127&(S=E[v.pos++]))<<24,S<128)||(x|=(1&(S=E[v.pos++]))<<31,S<128))return md(h,x,m);throw new Error("Expected varint not more than 10 bytes")}(n|=(15&(o=u[this.pos]))<<28,i,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var i=this.readVarint();return i%2==1?(i+1)/-2:i/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var i=this.readVarint()+this.pos,n=this.pos;return this.pos=i,i-n>=12&&LC?function(o,u,h){return LC.decode(o.subarray(u,h))}(this.buf,n,i):function(o,u,h){for(var m="",v=u;v<h;){var x,S,E,R=o[v],z=null,L=R>239?4:R>223?3:R>191?2:1;if(v+L>h)break;L===1?R<128&&(z=R):L===2?(192&(x=o[v+1]))==128&&(z=(31&R)<<6|63&x)<=127&&(z=null):L===3?(S=o[v+2],(192&(x=o[v+1]))==128&&(192&S)==128&&((z=(15&R)<<12|(63&x)<<6|63&S)<=2047||z>=55296&&z<=57343)&&(z=null)):L===4&&(S=o[v+2],E=o[v+3],(192&(x=o[v+1]))==128&&(192&S)==128&&(192&E)==128&&((z=(15&R)<<18|(63&x)<<12|(63&S)<<6|63&E)<=65535||z>=1114112)&&(z=null)),z===null?(z=65533,L=1):z>65535&&(z-=65536,m+=String.fromCharCode(z>>>10&1023|55296),z=56320|1023&z),m+=String.fromCharCode(z),v+=L}return m}(this.buf,n,i)},readBytes:function(){var i=this.readVarint()+this.pos,n=this.buf.subarray(this.pos,i);return this.pos=i,n},readPackedVarint:function(i,n){if(this.type!==Ir.Bytes)return i.push(this.readVarint(n));var o=tl(this);for(i=i||[];this.pos<o;)i.push(this.readVarint(n));return i},readPackedSVarint:function(i){if(this.type!==Ir.Bytes)return i.push(this.readSVarint());var n=tl(this);for(i=i||[];this.pos<n;)i.push(this.readSVarint());return i},readPackedBoolean:function(i){if(this.type!==Ir.Bytes)return i.push(this.readBoolean());var n=tl(this);for(i=i||[];this.pos<n;)i.push(this.readBoolean());return i},readPackedFloat:function(i){if(this.type!==Ir.Bytes)return i.push(this.readFloat());var n=tl(this);for(i=i||[];this.pos<n;)i.push(this.readFloat());return i},readPackedDouble:function(i){if(this.type!==Ir.Bytes)return i.push(this.readDouble());var n=tl(this);for(i=i||[];this.pos<n;)i.push(this.readDouble());return i},readPackedFixed32:function(i){if(this.type!==Ir.Bytes)return i.push(this.readFixed32());var n=tl(this);for(i=i||[];this.pos<n;)i.push(this.readFixed32());return i},readPackedSFixed32:function(i){if(this.type!==Ir.Bytes)return i.push(this.readSFixed32());var n=tl(this);for(i=i||[];this.pos<n;)i.push(this.readSFixed32());return i},readPackedFixed64:function(i){if(this.type!==Ir.Bytes)return i.push(this.readFixed64());var n=tl(this);for(i=i||[];this.pos<n;)i.push(this.readFixed64());return i},readPackedSFixed64:function(i){if(this.type!==Ir.Bytes)return i.push(this.readSFixed64());var n=tl(this);for(i=i||[];this.pos<n;)i.push(this.readSFixed64());return i},skip:function(i){var n=7&i;if(n===Ir.Varint)for(;this.buf[this.pos++]>127;);else if(n===Ir.Bytes)this.pos=this.readVarint()+this.pos;else if(n===Ir.Fixed32)this.pos+=4;else{if(n!==Ir.Fixed64)throw new Error("Unimplemented type: "+n);this.pos+=8}},writeTag:function(i,n){this.writeVarint(i<<3|n)},realloc:function(i){for(var n=this.length||16;n<this.pos+i;)n*=2;if(n!==this.length){var o=new Uint8Array(n);o.set(this.buf),this.buf=o,this.length=n}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(i){this.realloc(4),gd(this.buf,i,this.pos),this.pos+=4},writeSFixed32:function(i){this.realloc(4),gd(this.buf,i,this.pos),this.pos+=4},writeFixed64:function(i){this.realloc(8),gd(this.buf,-1&i,this.pos),gd(this.buf,Math.floor(i*DC),this.pos+4),this.pos+=8},writeSFixed64:function(i){this.realloc(8),gd(this.buf,-1&i,this.pos),gd(this.buf,Math.floor(i*DC),this.pos+4),this.pos+=8},writeVarint:function(i){(i=+i||0)>268435455||i<0?function(n,o){var u,h;if(n>=0?(u=n%4294967296|0,h=n/4294967296|0):(h=~(-n/4294967296),4294967295^(u=~(-n%4294967296))?u=u+1|0:(u=0,h=h+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");o.realloc(10),function(m,v,x){x.buf[x.pos++]=127&m|128,m>>>=7,x.buf[x.pos++]=127&m|128,m>>>=7,x.buf[x.pos++]=127&m|128,m>>>=7,x.buf[x.pos++]=127&m|128,x.buf[x.pos]=127&(m>>>=7)}(u,0,o),function(m,v){var x=(7&m)<<4;v.buf[v.pos++]|=x|((m>>>=3)?128:0),m&&(v.buf[v.pos++]=127&m|((m>>>=7)?128:0),m&&(v.buf[v.pos++]=127&m|((m>>>=7)?128:0),m&&(v.buf[v.pos++]=127&m|((m>>>=7)?128:0),m&&(v.buf[v.pos++]=127&m|((m>>>=7)?128:0),m&&(v.buf[v.pos++]=127&m)))))}(h,o)}(i,this):(this.realloc(4),this.buf[this.pos++]=127&i|(i>127?128:0),i<=127||(this.buf[this.pos++]=127&(i>>>=7)|(i>127?128:0),i<=127||(this.buf[this.pos++]=127&(i>>>=7)|(i>127?128:0),i<=127||(this.buf[this.pos++]=i>>>7&127))))},writeSVarint:function(i){this.writeVarint(i<0?2*-i-1:2*i)},writeBoolean:function(i){this.writeVarint(!!i)},writeString:function(i){i=String(i),this.realloc(4*i.length),this.pos++;var n=this.pos;this.pos=function(u,h,m){for(var v,x,S=0;S<h.length;S++){if((v=h.charCodeAt(S))>55295&&v<57344){if(!x){v>56319||S+1===h.length?(u[m++]=239,u[m++]=191,u[m++]=189):x=v;continue}if(v<56320){u[m++]=239,u[m++]=191,u[m++]=189,x=v;continue}v=x-55296<<10|v-56320|65536,x=null}else x&&(u[m++]=239,u[m++]=191,u[m++]=189,x=null);v<128?u[m++]=v:(v<2048?u[m++]=v>>6|192:(v<65536?u[m++]=v>>12|224:(u[m++]=v>>18|240,u[m++]=v>>12&63|128),u[m++]=v>>6&63|128),u[m++]=63&v|128)}return m}(this.buf,i,this.pos);var o=this.pos-n;o>=128&&kC(n,o,this),this.pos=n-1,this.writeVarint(o),this.pos+=o},writeFloat:function(i){this.realloc(4),zC(this.buf,i,this.pos,!0,23,4),this.pos+=4},writeDouble:function(i){this.realloc(8),zC(this.buf,i,this.pos,!0,52,8),this.pos+=8},writeBytes:function(i){var n=i.length;this.writeVarint(n),this.realloc(n);for(var o=0;o<n;o++)this.buf[this.pos++]=i[o]},writeRawMessage:function(i,n){this.pos++;var o=this.pos;i(n,this);var u=this.pos-o;u>=128&&kC(o,u,this),this.pos=o-1,this.writeVarint(u),this.pos+=u},writeMessage:function(i,n,o){this.writeTag(i,Ir.Bytes),this.writeRawMessage(n,o)},writePackedVarint:function(i,n){n.length&&this.writeMessage(i,Xk,n)},writePackedSVarint:function(i,n){n.length&&this.writeMessage(i,Kk,n)},writePackedBoolean:function(i,n){n.length&&this.writeMessage(i,Qk,n)},writePackedFloat:function(i,n){n.length&&this.writeMessage(i,Yk,n)},writePackedDouble:function(i,n){n.length&&this.writeMessage(i,Jk,n)},writePackedFixed32:function(i,n){n.length&&this.writeMessage(i,e3,n)},writePackedSFixed32:function(i,n){n.length&&this.writeMessage(i,t3,n)},writePackedFixed64:function(i,n){n.length&&this.writeMessage(i,n3,n)},writePackedSFixed64:function(i,n){n.length&&this.writeMessage(i,r3,n)},writeBytesField:function(i,n){this.writeTag(i,Ir.Bytes),this.writeBytes(n)},writeFixed32Field:function(i,n){this.writeTag(i,Ir.Fixed32),this.writeFixed32(n)},writeSFixed32Field:function(i,n){this.writeTag(i,Ir.Fixed32),this.writeSFixed32(n)},writeFixed64Field:function(i,n){this.writeTag(i,Ir.Fixed64),this.writeFixed64(n)},writeSFixed64Field:function(i,n){this.writeTag(i,Ir.Fixed64),this.writeSFixed64(n)},writeVarintField:function(i,n){this.writeTag(i,Ir.Varint),this.writeVarint(n)},writeSVarintField:function(i,n){this.writeTag(i,Ir.Varint),this.writeSVarint(n)},writeStringField:function(i,n){this.writeTag(i,Ir.Bytes),this.writeString(n)},writeFloatField:function(i,n){this.writeTag(i,Ir.Fixed32),this.writeFloat(n)},writeDoubleField:function(i,n){this.writeTag(i,Ir.Fixed64),this.writeDouble(n)},writeBooleanField:function(i,n){this.writeVarintField(i,!!n)}};var kg=H(RC);const Z_=3;function i3(i,n,o){n.glyphs=[],i===1&&o.readMessage(o3,n)}function o3(i,n,o){if(i===3){const{id:u,bitmap:h,width:m,height:v,left:x,top:S,advance:E}=o.readMessage(a3,{});n.glyphs.push({id:u,bitmap:new el({width:m+2*Z_,height:v+2*Z_},h),metrics:{width:m,height:v,left:x,top:S,advance:E}})}else i===4?n.ascender=o.readSVarint():i===5&&(n.descender=o.readSVarint())}function a3(i,n,o){i===1?n.id=o.readVarint():i===2?n.bitmap=o.readBytes():i===3?n.width=o.readVarint():i===4?n.height=o.readVarint():i===5?n.left=o.readSVarint():i===6?n.top=o.readSVarint():i===7&&(n.advance=o.readVarint())}const FC=Z_;function X_(i){let n=0,o=0;for(const v of i)n+=v.w*v.h,o=Math.max(o,v.w);i.sort((v,x)=>x.h-v.h);const u=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),o),h:1/0}];let h=0,m=0;for(const v of i)for(let x=u.length-1;x>=0;x--){const S=u[x];if(!(v.w>S.w||v.h>S.h)){if(v.x=S.x,v.y=S.y,m=Math.max(m,v.y+v.h),h=Math.max(h,v.x+v.w),v.w===S.w&&v.h===S.h){const E=u.pop();x<u.length&&(u[x]=E)}else v.h===S.h?(S.x+=v.w,S.w-=v.w):v.w===S.w?(S.y+=v.h,S.h-=v.h):(u.push({x:S.x+v.w,y:S.y,w:S.w-v.w,h:v.h}),S.y+=v.h,S.h-=v.h);break}}return{w:h,h:m,fill:n/(h*m)||0}}const wo=1;class K_{constructor(n,{pixelRatio:o,version:u,stretchX:h,stretchY:m,content:v}){this.paddedRect=n,this.pixelRatio=o,this.stretchX=h,this.stretchY=m,this.content=v,this.version=u}get tl(){return[this.paddedRect.x+wo,this.paddedRect.y+wo]}get br(){return[this.paddedRect.x+this.paddedRect.w-wo,this.paddedRect.y+this.paddedRect.h-wo]}get displaySize(){return[(this.paddedRect.w-2*wo)/this.pixelRatio,(this.paddedRect.h-2*wo)/this.pixelRatio]}}class BC{constructor(n,o){const u={},h={};this.haveRenderCallbacks=[];const m=[];this.addImages(n,u,m),this.addImages(o,h,m);const{w:v,h:x}=X_(m),S=new $o({width:v||1,height:x||1});for(const E in n){const R=n[E],z=u[E].paddedRect;$o.copy(R.data,S,{x:0,y:0},{x:z.x+wo,y:z.y+wo},R.data)}for(const E in o){const R=o[E],z=h[E].paddedRect,L=z.x+wo,V=z.y+wo,G=R.data.width,K=R.data.height;$o.copy(R.data,S,{x:0,y:0},{x:L,y:V},R.data),$o.copy(R.data,S,{x:0,y:K-1},{x:L,y:V-1},{width:G,height:1}),$o.copy(R.data,S,{x:0,y:0},{x:L,y:V+K},{width:G,height:1}),$o.copy(R.data,S,{x:G-1,y:0},{x:L-1,y:V},{width:1,height:K}),$o.copy(R.data,S,{x:0,y:0},{x:L+G,y:V},{width:1,height:K})}this.image=S,this.iconPositions=u,this.patternPositions=h}addImages(n,o,u){for(const h in n){const m=n[h],v={x:0,y:0,w:m.data.width+2*wo,h:m.data.height+2*wo};u.push(v),o[h]=new K_(v,m),m.hasRenderCallback&&this.haveRenderCallbacks.push(h)}}patchUpdatedImages(n,o){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(u=>n.hasImage(u)),n.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const u in n.updatedImages)this.patchUpdatedImage(this.iconPositions[u],n.getImage(u),o),this.patchUpdatedImage(this.patternPositions[u],n.getImage(u),o)}patchUpdatedImage(n,o,u){if(!n||!o||n.version===o.version)return;n.version=o.version;const[h,m]=n.tl;u.update(o.data,void 0,{x:h,y:m})}}Jt(K_,"ImagePosition"),Jt(BC,"ImageAtlas");const Jo={horizontal:1,vertical:2,horizontalOnly:3},NC=-17;class Vf{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(n,o){const u=new Vf;return u.scale=n||1,u.fontStack=o,u}static forImage(n){const o=new Vf;return o.imageName=n,o}}class vd{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(n,o){const u=new vd;for(let h=0;h<n.sections.length;h++){const m=n.sections[h];m.image?u.addImageSection(m):u.addTextSection(m,o)}return u}length(){return this.text.length}getSection(n){return this.sections[this.sectionIndex[n]]}getSections(){return this.sections}getSectionIndex(n){return this.sectionIndex[n]}getCharCode(n){return this.text.charCodeAt(n)}verticalizePunctuation(n){this.text=function(o,u){let h="";for(let m=0;m<o.length;m++){const v=o.charCodeAt(m+1)||null,x=o.charCodeAt(m-1)||null;h+=!u&&(v&&dg(v)&&!Uf[o[m+1]]||x&&dg(x)&&!Uf[o[m-1]])||!Uf[o[m]]?o[m]:Uf[o[m]]}return h}(this.text,n)}trim(){let n=0;for(let u=0;u<this.text.length&&$g[this.text.charCodeAt(u)];u++)n++;let o=this.text.length;for(let u=this.text.length-1;u>=0&&u>=n&&$g[this.text.charCodeAt(u)];u--)o--;this.text=this.text.substring(n,o),this.sectionIndex=this.sectionIndex.slice(n,o)}substring(n,o){const u=new vd;return u.text=this.text.substring(n,o),u.sectionIndex=this.sectionIndex.slice(n,o),u.sections=this.sections,u}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((n,o)=>Math.max(n,this.sections[o].scale),0)}addTextSection(n,o){this.text+=n.text,this.sections.push(Vf.forText(n.scale,n.fontStack||o));const u=this.sections.length-1;for(let h=0;h<n.text.length;++h)this.sectionIndex.push(u)}addImageSection(n){const o=n.image?n.image.name:"";if(o.length===0)return void zt("Can't add FormattedSection with an empty image.");const u=this.getNextImageSectionCharCode();u?(this.text+=String.fromCharCode(u),this.sections.push(Vf.forImage(o)),this.sectionIndex.push(this.sections.length-1)):zt("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Y_(i,n,o,u,h,m,v,x,S,E,R,z,L,V,G){const K=vd.fromFeature(i,h);z===Jo.vertical&&K.verticalizePunctuation(L);let ae=[];const ge=function(Pe,Ye,qe,ot,St,et){if(!Pe)return[];const ht=[],ft=function(Gt,en,Wt,Dn,Lt,fn){let Ln=0;for(let nr=0;nr<Gt.length();nr++){const kn=Gt.getSection(nr);Ln+=jC(Gt.getCharCode(nr),kn,Dn,Lt,en,fn)}return Ln/Math.max(1,Math.ceil(Ln/Wt))}(Pe,Ye,qe,ot,St,et),vt=Pe.text.indexOf("​")>=0;let Dt=0;for(let Gt=0;Gt<Pe.length();Gt++){const en=Pe.getSection(Gt),Wt=Pe.getCharCode(Gt);if($g[Wt]||(Dt+=jC(Wt,en,ot,St,Ye,et)),Gt<Pe.length()-1){const Dn=!((rt=Wt)<11904||!(qt["Bopomofo Extended"](rt)||qt.Bopomofo(rt)||qt["CJK Compatibility Forms"](rt)||qt["CJK Compatibility Ideographs"](rt)||qt["CJK Compatibility"](rt)||qt["CJK Radicals Supplement"](rt)||qt["CJK Strokes"](rt)||qt["CJK Symbols and Punctuation"](rt)||qt["CJK Unified Ideographs Extension A"](rt)||qt["CJK Unified Ideographs"](rt)||qt["Enclosed CJK Letters and Months"](rt)||qt["Halfwidth and Fullwidth Forms"](rt)||qt.Hiragana(rt)||qt["Ideographic Description Characters"](rt)||qt["Kangxi Radicals"](rt)||qt["Katakana Phonetic Extensions"](rt)||qt.Katakana(rt)||qt["Vertical Forms"](rt)||qt["Yi Radicals"](rt)||qt["Yi Syllables"](rt)));(s3[Wt]||Dn||en.imageName)&&ht.push(VC(Gt+1,Dt,ft,ht,l3(Wt,Pe.getCharCode(Gt+1),Dn&&vt),!1))}}var rt;return HC(VC(Pe.length(),Dt,ft,ht,0,!0))}(K,E,m,n,u,V),{processBidirectionalText:Ce,processStyledBidirectionalText:ye}=M;if(Ce&&K.sections.length===1){const Pe=Ce(K.toString(),ge);for(const Ye of Pe){const qe=new vd;qe.text=Ye,qe.sections=K.sections;for(let ot=0;ot<Ye.length;ot++)qe.sectionIndex.push(0);ae.push(qe)}}else if(ye){const Pe=ye(K.text,K.sectionIndex,ge);for(const Ye of Pe){const qe=new vd;qe.text=Ye[0],qe.sectionIndex=Ye[1],qe.sections=K.sections,ae.push(qe)}}else ae=function(Pe,Ye){const qe=[],ot=Pe.text;let St=0;for(const et of Ye)qe.push(Pe.substring(St,et)),St=et;return St<ot.length&&qe.push(Pe.substring(St,ot.length)),qe}(K,ge);const Ee=[],Ae={positionedLines:Ee,text:K.toString(),top:R[1],bottom:R[1],left:R[0],right:R[0],writingMode:z,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(Pe,Ye,qe,ot,St,et,ht,ft,vt,Dt,rt,Gt){let en=0,Wt=0,Dn=0;const Lt=ft==="right"?1:ft==="left"?0:.5;let fn=!1;for(const Fn of St){const Bn=Fn.getSections();for(const wr of Bn){if(wr.imageName)continue;const Mr=Ye[wr.fontStack];if(Mr&&(fn=Mr.ascender!==void 0&&Mr.descender!==void 0,!fn))break}if(!fn)break}let Ln=0;for(const Fn of St){Fn.trim();const Bn=Fn.getMaxScale(),wr=(Bn-1)*Di,Mr={positionedGlyphs:[],lineOffset:0};Pe.positionedLines[Ln]=Mr;const Pr=Mr.positionedGlyphs;let Sr=0;if(!Fn.length()){Wt+=et,++Ln;continue}let qr=0,ei=0;for(let Er=0;Er<Fn.length();Er++){const gi=Fn.getSection(Er),ui=Fn.getSectionIndex(Er),Yr=Fn.getCharCode(Er);let ir=gi.scale,di=null,Ar=null,co=null,hi=Di,Li=0;const Ii=!(vt===Jo.horizontal||!rt&&!gf(Yr)||rt&&($g[Yr]||(nr=Yr,qt.Arabic(nr)||qt["Arabic Supplement"](nr)||qt["Arabic Extended-A"](nr)||qt["Arabic Presentation Forms-A"](nr)||qt["Arabic Presentation Forms-B"](nr))));if(gi.imageName){const uo=ot[gi.imageName];if(!uo)continue;co=gi.imageName,Pe.iconsInText=Pe.iconsInText||!0,Ar=uo.paddedRect;const Mi=uo.displaySize;ir=ir*Di/Gt,di={width:Mi[0],height:Mi[1],left:wo,top:-FC,advance:Ii?Mi[1]:Mi[0],localGlyph:!1},Li=fn?-di.height*ir:NC+Bn*Di-Mi[1]*ir,hi=di.advance;const ts=(Ii?Mi[0]:Mi[1])*ir-Di*Bn;ts>0&&ts>Sr&&(Sr=ts)}else{const uo=qe[gi.fontStack];if(!uo)continue;uo[Yr]&&(Ar=uo[Yr]);const Mi=Ye[gi.fontStack];if(!Mi)continue;const ts=Mi.glyphs[Yr];if(!ts)continue;if(di=ts.metrics,hi=Yr!==8203?Di:0,fn){const Ed=Mi.ascender!==void 0?Math.abs(Mi.ascender):0,Qf=Mi.descender!==void 0?Math.abs(Mi.descender):0,ep=(Ed+Qf)*ir;qr<ep&&(qr=ep,ei=(Ed-Qf)/2*ir),Li=-Ed*ir}else Li=NC+(Bn-ir)*Di}Ii?(Pe.verticalizable=!0,Pr.push({glyph:Yr,imageName:co,x:en,y:Wt+Li,vertical:Ii,scale:ir,localGlyph:di.localGlyph,fontStack:gi.fontStack,sectionIndex:ui,metrics:di,rect:Ar}),en+=hi*ir+Dt):(Pr.push({glyph:Yr,imageName:co,x:en,y:Wt+Li,vertical:Ii,scale:ir,localGlyph:di.localGlyph,fontStack:gi.fontStack,sectionIndex:ui,metrics:di,rect:Ar}),en+=di.advance*ir+Dt)}Pr.length!==0&&(Dn=Math.max(en-Dt,Dn),fn?GC(Pr,Lt,Sr,ei,et*Bn/2):GC(Pr,Lt,Sr,0,et/2)),en=0;const ci=et*Bn+Sr;Mr.lineOffset=Math.max(Sr,wr),Wt+=ci,++Ln}var nr;const kn=Wt,{horizontalAlign:wn,verticalAlign:Or}=J_(ht);(function(Fn,Bn,wr,Mr,Pr,Sr){const qr=(Bn-wr)*Pr,ei=-Sr*Mr;for(const ci of Fn)for(const Er of ci.positionedGlyphs)Er.x+=qr,Er.y+=ei})(Pe.positionedLines,Lt,wn,Or,Dn,kn),Pe.top+=-Or*kn,Pe.bottom=Pe.top+kn,Pe.left+=-wn*Dn,Pe.right=Pe.left+Dn,Pe.hasBaseline=fn}(Ae,n,o,u,ae,v,x,S,z,E,L,G),!function(Pe){for(const Ye of Pe)if(Ye.positionedGlyphs.length!==0)return!1;return!0}(Ee)&&Ae}const $g={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},s3={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function jC(i,n,o,u,h,m){if(n.imageName){const v=u[n.imageName];return v?v.displaySize[0]*n.scale*Di/m+h:0}{const v=o[n.fontStack],x=v&&v.glyphs[i];return x?x.metrics.advance*n.scale+h:0}}function UC(i,n,o,u){const h=Math.pow(i-n,2);return u?i<n?h/2:2*h:h+Math.abs(o)*o}function l3(i,n,o){let u=0;return i===10&&(u-=1e4),o&&(u+=150),i!==40&&i!==65288||(u+=50),n!==41&&n!==65289||(u+=50),u}function VC(i,n,o,u,h,m){let v=null,x=UC(n,o,h,m);for(const S of u){const E=UC(n-S.x,o,h,m)+S.badness;E<=x&&(v=S,x=E)}return{index:i,x:n,priorBreak:v,badness:x}}function HC(i){return i?HC(i.priorBreak).concat(i.index):[]}function J_(i){let n=.5,o=.5;switch(i){case"right":case"top-right":case"bottom-right":n=1;break;case"left":case"top-left":case"bottom-left":n=0}switch(i){case"bottom":case"bottom-right":case"bottom-left":o=1;break;case"top":case"top-right":case"top-left":o=0}return{horizontalAlign:n,verticalAlign:o}}function GC(i,n,o,u,h){if(!(n||o||u||h))return;const m=i.length-1,v=i[m],x=(v.x+v.metrics.advance*v.scale)*n;for(let S=0;S<=m;S++)i[S].x-=x,i[S].y+=o+u+h}function c3(i,n,o){const{horizontalAlign:u,verticalAlign:h}=J_(o),m=n[0]-i.displaySize[0]*u,v=n[1]-i.displaySize[1]*h;return{image:i,top:v,bottom:v+i.displaySize[1],left:m,right:m+i.displaySize[0]}}function WC(i,n,o,u,h,m){const v=i.image;let x;if(v.content){const ae=v.content,ge=v.pixelRatio||1;x=[ae[0]/ge,ae[1]/ge,v.displaySize[0]-ae[2]/ge,v.displaySize[1]-ae[3]/ge]}const S=n.left*m,E=n.right*m;let R,z,L,V;o==="width"||o==="both"?(V=h[0]+S-u[3],z=h[0]+E+u[1]):(V=h[0]+(S+E-v.displaySize[0])/2,z=V+v.displaySize[0]);const G=n.top*m,K=n.bottom*m;return o==="height"||o==="both"?(R=h[1]+G-u[0],L=h[1]+K+u[2]):(R=h[1]+(G+K-v.displaySize[1])/2,L=R+v.displaySize[1]),{image:v,top:R,right:z,bottom:L,left:V,collisionPadding:x}}class nl extends ee{constructor(n,o,u,h,m){super(n,o),this.angle=h,this.z=u,m!==void 0&&(this.segment=m)}clone(){return new nl(this.x,this.y,this.z,this.angle,this.segment)}}function qC(i,n,o,u,h){if(n.segment===void 0)return!0;let m=n,v=n.segment+1,x=0;for(;x>-o/2;){if(v--,v<0)return!1;x-=i[v].dist(m),m=i[v]}x+=i[v].dist(i[v+1]),v++;const S=[];let E=0;for(;x<o/2;){const R=i[v],z=i[v+1];if(!z)return!1;let L=i[v-1].angleTo(R)-R.angleTo(z);for(L=Math.abs((L+3*Math.PI)%(2*Math.PI)-Math.PI),S.push({distance:x,angleDelta:L}),E+=L;x-S[0].distance>u;)E-=S.shift().angleDelta;if(E>h)return!1;v++,x+=R.dist(z)}return!0}function ZC(i){let n=0;for(let o=0;o<i.length-1;o++)n+=i[o].dist(i[o+1]);return n}function XC(i,n,o){return i?.6*n*o:0}function KC(i,n){return Math.max(i?i.right-i.left:0,n?n.right-n.left:0)}function u3(i,n,o,u,h,m){const v=XC(o,h,m),x=KC(o,u)*m;let S=0;const E=ZC(i)/2;for(let R=0;R<i.length-1;R++){const z=i[R],L=i[R+1],V=z.dist(L);if(S+V>E){const G=(E-S)/V,K=Jn(z.x,L.x,G),ae=Jn(z.y,L.y,G),ge=new nl(K,ae,0,L.angleTo(z),R);return!v||qC(i,ge,x,v,n)?ge:void 0}S+=V}}function d3(i,n,o,u,h,m,v,x,S){const E=XC(u,m,v),R=KC(u,h),z=R*v,L=i[0].x===0||i[0].x===S||i[0].y===0||i[0].y===S;return n-z<n/4&&(n=z+n/4),YC(i,L?n/2*x%n:(R/2+2*m)*v*x%n,n,E,o,z,L,!1,S)}function YC(i,n,o,u,h,m,v,x,S){const E=m/2,R=ZC(i);let z=0,L=n-o,V=[];for(let G=0;G<i.length-1;G++){const K=i[G],ae=i[G+1],ge=K.dist(ae),Ce=ae.angleTo(K);for(;L+o<z+ge;){L+=o;const ye=(L-z)/ge,Ee=Jn(K.x,ae.x,ye),Ae=Jn(K.y,ae.y,ye);if(Ee>=0&&Ee<S&&Ae>=0&&Ae<S&&L-E>=0&&L+E<=R){const Pe=new nl(Ee,Ae,0,Ce,G);Pe._round(),u&&!qC(i,Pe,m,u,h)||V.push(Pe)}}z+=ge}return x||V.length||v||(V=YC(i,z/2,o,u,h,m,v,!0,S)),V}function JC(i,n,o,u,h){const m=[];for(let v=0;v<i.length;v++){const x=i[v];let S;for(let E=0;E<x.length-1;E++){let R=x[E],z=x[E+1];R.x<n&&z.x<n||(R.x<n?R=new ee(n,R.y+(n-R.x)/(z.x-R.x)*(z.y-R.y))._round():z.x<n&&(z=new ee(n,R.y+(n-R.x)/(z.x-R.x)*(z.y-R.y))._round()),R.y<o&&z.y<o||(R.y<o?R=new ee(R.x+(o-R.y)/(z.y-R.y)*(z.x-R.x),o)._round():z.y<o&&(z=new ee(R.x+(o-R.y)/(z.y-R.y)*(z.x-R.x),o)._round()),R.x>=u&&z.x>=u||(R.x>=u?R=new ee(u,R.y+(u-R.x)/(z.x-R.x)*(z.y-R.y))._round():z.x>=u&&(z=new ee(u,R.y+(u-R.x)/(z.x-R.x)*(z.y-R.y))._round()),R.y>=h&&z.y>=h||(R.y>=h?R=new ee(R.x+(h-R.y)/(z.y-R.y)*(z.x-R.x),h)._round():z.y>=h&&(z=new ee(R.x+(h-R.y)/(z.y-R.y)*(z.x-R.x),h)._round()),S&&R.equals(S[S.length-1])||(S=[R],m.push(S)),S.push(z)))))}}return m}Jt(nl,"Anchor");const Hf=1e20;function QC(i,n,o,u,h,m,v,x,S){for(let E=n;E<n+u;E++)e2(i,o*m+E,m,h,v,x,S);for(let E=o;E<o+h;E++)e2(i,E*m+n,1,u,v,x,S)}function e2(i,n,o,u,h,m,v){m[0]=0,v[0]=-Hf,v[1]=Hf,h[0]=i[n];for(let x=1,S=0,E=0;x<u;x++){h[x]=i[n+x*o];const R=x*x;do{const z=m[S];E=(h[x]-h[z]+R-z*z)/(x-z)/2}while(E<=v[S]&&--S>-1);S++,m[S]=x,v[S]=E,v[S+1]=Hf}for(let x=0,S=0;x<u;x++){for(;v[S+1]<x;)S++;const E=m[S],R=x-E;i[n+x*o]=h[E]+R*R}}const Qa=2,Q_={none:0,ideographs:1,all:2};class yd{constructor(n,o,u){this.requestManager=n,this.localGlyphMode=o,this.localFontFamily=u,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(n){this.url=n}getGlyphs(n,o){const u=[];for(const h in n)for(const m of n[h])u.push({stack:h,id:m});Ze(u,({stack:h,id:m},v)=>{let x=this.entries[h];x||(x=this.entries[h]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let S=x.glyphs[m];if(S!==void 0)return void v(null,{stack:h,id:m,glyph:S});if(S=this._tinySDF(x,h,m),S)return x.glyphs[m]=S,void v(null,{stack:h,id:m,glyph:S});const E=Math.floor(m/256);if(256*E>65535)return void v(new Error("glyphs > 65535 not supported"));if(x.ranges[E])return void v(null,{stack:h,id:m,glyph:S});let R=x.requests[E];R||(R=x.requests[E]=[],yd.loadGlyphRange(h,E,this.url,this.requestManager,(z,L)=>{if(L){x.ascender=L.ascender,x.descender=L.descender;for(const V in L.glyphs)this._doesCharSupportLocalGlyph(+V)||(x.glyphs[+V]=L.glyphs[+V]);x.ranges[E]=!0}for(const V of R)V(z,L);delete x.requests[E]})),R.push((z,L)=>{z?v(z):L&&v(null,{stack:h,id:m,glyph:L.glyphs[m]||null})})},(h,m)=>{if(h)o(h);else if(m){const v={};for(const{stack:x,id:S,glyph:E}of m)v[x]===void 0&&(v[x]={}),v[x].glyphs===void 0&&(v[x].glyphs={}),v[x].glyphs[S]=E&&{id:E.id,bitmap:E.bitmap.clone(),metrics:E.metrics},v[x].ascender=this.entries[x].ascender,v[x].descender=this.entries[x].descender;o(null,v)}})}_doesCharSupportLocalGlyph(n){return this.localGlyphMode!==Q_.none&&(this.localGlyphMode===Q_.all?!!this.localFontFamily:!!this.localFontFamily&&(qt["CJK Unified Ideographs"](n)||qt["Hangul Syllables"](n)||qt.Hiragana(n)||qt.Katakana(n)||qt["CJK Symbols and Punctuation"](n)))}_tinySDF(n,o,u){const h=this.localFontFamily;if(!h||!this._doesCharSupportLocalGlyph(u))return;let m=n.tinySDF;if(!m){let K="400";/bold/i.test(o)?K="900":/medium/i.test(o)?K="500":/light/i.test(o)&&(K="200"),m=n.tinySDF=new yd.TinySDF({fontFamily:h,fontWeight:K,fontSize:24*Qa,buffer:3*Qa,radius:8*Qa}),m.fontWeight=K}if(this.localGlyphs[m.fontWeight][u])return this.localGlyphs[m.fontWeight][u];const v=String.fromCharCode(u),{data:x,width:S,height:E,glyphWidth:R,glyphHeight:z,glyphLeft:L,glyphTop:V,glyphAdvance:G}=m.draw(v);return this.localGlyphs[m.fontWeight][u]={id:u,bitmap:new el({width:S,height:E},x),metrics:{width:R/Qa,height:z/Qa,left:L/Qa,top:V/Qa-27,advance:G/Qa,localGlyph:!0}}}}yd.loadGlyphRange=function(i,n,o,u,h){const m=256*n,v=m+255,x=u.transformRequest(u.normalizeGlyphsURL(o).replace("{fontstack}",i).replace("{range}",`${m}-${v}`),jn.Glyphs);Qn(x,(S,E)=>{if(S)h(S);else if(E){const R={},z=function(L){return new kg(L).readFields(i3,{})}(E);for(const L of z.glyphs)R[L.id]=L;h(null,{glyphs:R,ascender:z.ascender,descender:z.descender})}})},yd.TinySDF=class{constructor({fontSize:i=24,buffer:n=3,radius:o=8,cutoff:u=.25,fontFamily:h="sans-serif",fontWeight:m="normal",fontStyle:v="normal"}={}){this.buffer=n,this.cutoff=u,this.radius=o;const x=this.size=i+4*n,S=this._createCanvas(x),E=this.ctx=S.getContext("2d",{willReadFrequently:!0});E.font=`${v} ${m} ${i}px ${h}`,E.textBaseline="alphabetic",E.textAlign="left",E.fillStyle="black",this.gridOuter=new Float64Array(x*x),this.gridInner=new Float64Array(x*x),this.f=new Float64Array(x),this.z=new Float64Array(x+1),this.v=new Uint16Array(x)}_createCanvas(i){const n=document.createElement("canvas");return n.width=n.height=i,n}draw(i){const{width:n,actualBoundingBoxAscent:o,actualBoundingBoxDescent:u,actualBoundingBoxLeft:h,actualBoundingBoxRight:m}=this.ctx.measureText(i),v=Math.ceil(o),x=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(m-h))),S=Math.min(this.size-this.buffer,v+Math.ceil(u)),E=x+2*this.buffer,R=S+2*this.buffer,z=Math.max(E*R,0),L=new Uint8ClampedArray(z),V={data:L,width:E,height:R,glyphWidth:x,glyphHeight:S,glyphTop:v,glyphLeft:0,glyphAdvance:n};if(x===0||S===0)return V;const{ctx:G,buffer:K,gridInner:ae,gridOuter:ge}=this;G.clearRect(K,K,x,S),G.fillText(i,K,K+v);const Ce=G.getImageData(K,K,x,S);ge.fill(Hf,0,z),ae.fill(0,0,z);for(let ye=0;ye<S;ye++)for(let Ee=0;Ee<x;Ee++){const Ae=Ce.data[4*(ye*x+Ee)+3]/255;if(Ae===0)continue;const Pe=(ye+K)*E+Ee+K;if(Ae===1)ge[Pe]=0,ae[Pe]=Hf;else{const Ye=.5-Ae;ge[Pe]=Ye>0?Ye*Ye:0,ae[Pe]=Ye<0?Ye*Ye:0}}QC(ge,0,0,E,R,E,this.f,this.v,this.z),QC(ae,K,K,x,S,E,this.f,this.v,this.z);for(let ye=0;ye<z;ye++){const Ee=Math.sqrt(ge[ye])-Math.sqrt(ae[ye]);L[ye]=Math.round(255-255*(Ee/this.radius+this.cutoff))}return V}};const _d=wo;function t2(i,n,o,u){const h=[],m=i.image,v=m.pixelRatio,x=m.paddedRect.w-2*_d,S=m.paddedRect.h-2*_d,E=i.right-i.left,R=i.bottom-i.top,z=m.stretchX||[[0,x]],L=m.stretchY||[[0,S]],V=(et,ht)=>et+ht[1]-ht[0],G=z.reduce(V,0),K=L.reduce(V,0),ae=x-G,ge=S-K;let Ce=0,ye=G,Ee=0,Ae=K,Pe=0,Ye=ae,qe=0,ot=ge;if(m.content&&u){const et=m.content;Ce=Fg(z,0,et[0]),Ee=Fg(L,0,et[1]),ye=Fg(z,et[0],et[2]),Ae=Fg(L,et[1],et[3]),Pe=et[0]-Ce,qe=et[1]-Ee,Ye=et[2]-et[0]-ye,ot=et[3]-et[1]-Ae}const St=(et,ht,ft,vt)=>{const Dt=Bg(et.stretch-Ce,ye,E,i.left),rt=Ng(et.fixed-Pe,Ye,et.stretch,G),Gt=Bg(ht.stretch-Ee,Ae,R,i.top),en=Ng(ht.fixed-qe,ot,ht.stretch,K),Wt=Bg(ft.stretch-Ce,ye,E,i.left),Dn=Ng(ft.fixed-Pe,Ye,ft.stretch,G),Lt=Bg(vt.stretch-Ee,Ae,R,i.top),fn=Ng(vt.fixed-qe,ot,vt.stretch,K),Ln=new ee(Dt,Gt),nr=new ee(Wt,Gt),kn=new ee(Wt,Lt),wn=new ee(Dt,Lt),Or=new ee(rt/v,en/v),Fn=new ee(Dn/v,fn/v),Bn=n*Math.PI/180;if(Bn){const Pr=Math.sin(Bn),Sr=Math.cos(Bn),qr=[Sr,-Pr,Pr,Sr];Ln._matMult(qr),nr._matMult(qr),wn._matMult(qr),kn._matMult(qr)}const wr=et.stretch+et.fixed,Mr=ht.stretch+ht.fixed;return{tl:Ln,tr:nr,bl:wn,br:kn,tex:{x:m.paddedRect.x+_d+wr,y:m.paddedRect.y+_d+Mr,w:ft.stretch+ft.fixed-wr,h:vt.stretch+vt.fixed-Mr},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Or,pixelOffsetBR:Fn,minFontScaleX:Ye/v/E,minFontScaleY:ot/v/R,isSDF:o}};if(u&&(m.stretchX||m.stretchY)){const et=n2(z,ae,G),ht=n2(L,ge,K);for(let ft=0;ft<et.length-1;ft++){const vt=et[ft],Dt=et[ft+1];for(let rt=0;rt<ht.length-1;rt++)h.push(St(vt,ht[rt],Dt,ht[rt+1]))}}else h.push(St({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:x+1},{fixed:0,stretch:S+1}));return h}function Fg(i,n,o){let u=0;for(const h of i)u+=Math.max(n,Math.min(o,h[1]))-Math.max(n,Math.min(o,h[0]));return u}function n2(i,n,o){const u=[{fixed:-_d,stretch:0}];for(const[h,m]of i){const v=u[u.length-1];u.push({fixed:h-v.stretch,stretch:v.stretch}),u.push({fixed:h-v.stretch,stretch:v.stretch+(m-h)})}return u.push({fixed:n+_d,stretch:o}),u}function Bg(i,n,o,u){return i/n*o+u}function Ng(i,n,o,u){return i-n*o/u}function h3(i,n,o,u){const h=n+i.positionedLines[u].lineOffset;return u===0?o+h/2:o+(h+(n+i.positionedLines[u-1].lineOffset))/2}class f3{constructor(n=[],o=p3){if(this.data=n,this.length=this.data.length,this.compare=o,this.length>0)for(let u=(this.length>>1)-1;u>=0;u--)this._down(u)}push(n){this.data.push(n),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const n=this.data[0],o=this.data.pop();return this.length--,this.length>0&&(this.data[0]=o,this._down(0)),n}peek(){return this.data[0]}_up(n){const{data:o,compare:u}=this,h=o[n];for(;n>0;){const m=n-1>>1,v=o[m];if(u(h,v)>=0)break;o[n]=v,n=m}o[n]=h}_down(n){const{data:o,compare:u}=this,h=this.length>>1,m=o[n];for(;n<h;){let v=1+(n<<1),x=o[v];const S=v+1;if(S<this.length&&u(o[S],x)<0&&(v=S,x=o[S]),u(x,m)>=0)break;o[n]=x,n=v}o[n]=m}}function p3(i,n){return i<n?-1:i>n?1:0}function m3(i,n=1,o=!1){let u=1/0,h=1/0,m=-1/0,v=-1/0;const x=i[0];for(let V=0;V<x.length;V++){const G=x[V];(!V||G.x<u)&&(u=G.x),(!V||G.y<h)&&(h=G.y),(!V||G.x>m)&&(m=G.x),(!V||G.y>v)&&(v=G.y)}const S=Math.min(m-u,v-h);let E=S/2;const R=new f3([],g3);if(S===0)return new ee(u,h);for(let V=u;V<m;V+=S)for(let G=h;G<v;G+=S)R.push(new xd(V+E,G+E,E,i));let z=function(V){let G=0,K=0,ae=0;const ge=V[0];for(let Ce=0,ye=ge.length,Ee=ye-1;Ce<ye;Ee=Ce++){const Ae=ge[Ce],Pe=ge[Ee],Ye=Ae.x*Pe.y-Pe.x*Ae.y;K+=(Ae.x+Pe.x)*Ye,ae+=(Ae.y+Pe.y)*Ye,G+=3*Ye}return new xd(K/G,ae/G,0,V)}(i),L=R.length;for(;R.length;){const V=R.pop();(V.d>z.d||!z.d)&&(z=V,o&&console.log("found best %d after %d probes",Math.round(1e4*V.d)/1e4,L)),V.max-z.d<=n||(E=V.h/2,R.push(new xd(V.p.x-E,V.p.y-E,E,i)),R.push(new xd(V.p.x+E,V.p.y-E,E,i)),R.push(new xd(V.p.x-E,V.p.y+E,E,i)),R.push(new xd(V.p.x+E,V.p.y+E,E,i)),L+=4)}return o&&(console.log(`num probes: ${L}`),console.log(`best distance: ${z.d}`)),z.p}function g3(i,n){return n.max-i.max}class xd{constructor(n,o,u,h){this.p=new ee(n,o),this.h=u,this.d=function(m,v){let x=!1,S=1/0;for(let E=0;E<v.length;E++){const R=v[E];for(let z=0,L=R.length,V=L-1;z<L;V=z++){const G=R[z],K=R[V];G.y>m.y!=K.y>m.y&&m.x<(K.x-G.x)*(m.y-G.y)/(K.y-G.y)+G.x&&(x=!x),S=Math.min(S,YE(m,G,K))}}return(x?1:-1)*Math.sqrt(S)}(this.p,h),this.max=this.d+this.h*Math.SQRT2}}const bd=7,ex=Number.POSITIVE_INFINITY,v3=Math.sqrt(2);function r2(i,[n,o]){let u=0,h=0;if(o===ex){n<0&&(n=0);const m=n/v3;switch(i){case"top-right":case"top-left":h=m-bd;break;case"bottom-right":case"bottom-left":h=-m+bd;break;case"bottom":h=-n+bd;break;case"top":h=n-bd}switch(i){case"top-right":case"bottom-right":u=-m;break;case"top-left":case"bottom-left":u=m;break;case"left":u=n;break;case"right":u=-n}}else{switch(n=Math.abs(n),o=Math.abs(o),i){case"top-right":case"top-left":case"top":h=o-bd;break;case"bottom-right":case"bottom-left":case"bottom":h=-o+bd}switch(i){case"top-right":case"bottom-right":case"right":u=-n;break;case"top-left":case"bottom-left":case"left":u=n}}return[u,h]}function y3(i,n,o,u,h,m,v,x,S,E){i.createArrays(),i.tilePixelRatio=mn/(512*i.overscaling),i.compareText={},i.iconsNeedLinear=!1;const R=i.layers[0].layout,z=i.layers[0]._unevaluatedLayout._values,L={};if(i.textSizeData.kind==="composite"){const{minZoom:K,maxZoom:ae}=i.textSizeData;L.compositeTextSizes=[z["text-size"].possiblyEvaluate(new O(K),x),z["text-size"].possiblyEvaluate(new O(ae),x)]}if(i.iconSizeData.kind==="composite"){const{minZoom:K,maxZoom:ae}=i.iconSizeData;L.compositeIconSizes=[z["icon-size"].possiblyEvaluate(new O(K),x),z["icon-size"].possiblyEvaluate(new O(ae),x)]}L.layoutTextSize=z["text-size"].possiblyEvaluate(new O(S+1),x),L.layoutIconSize=z["icon-size"].possiblyEvaluate(new O(S+1),x),L.textMaxSize=z["text-size"].possiblyEvaluate(new O(18),x);const V=R.get("text-rotation-alignment")==="map"&&R.get("symbol-placement")!=="point",G=R.get("text-size");for(const K of i.features){const ae=R.get("text-font").evaluate(K,{},x).join(","),ge=G.evaluate(K,{},x),Ce=L.layoutTextSize.evaluate(K,{},x),ye=(L.layoutIconSize.evaluate(K,{},x),{horizontal:{},vertical:void 0}),Ee=K.text;let Ae,Pe=[0,0];if(Ee){const ot=Ee.toString(),St=R.get("text-letter-spacing").evaluate(K,{},x)*Di,et=R.get("text-line-height").evaluate(K,{},x)*Di,ht=c_(ot)?St:0,ft=R.get("text-anchor").evaluate(K,{},x),vt=R.get("text-variable-anchor");if(!vt){const Wt=R.get("text-radial-offset").evaluate(K,{},x);Pe=Wt?r2(ft,[Wt*Di,ex]):R.get("text-offset").evaluate(K,{},x).map(Dn=>Dn*Di)}let Dt=V?"center":R.get("text-justify").evaluate(K,{},x);const rt=R.get("symbol-placement")==="point",Gt=rt?R.get("text-max-width").evaluate(K,{},x)*Di:1/0,en=Wt=>{i.allowVerticalPlacement&&mf(ot)&&(ye.vertical=Y_(Ee,n,o,h,ae,Gt,et,ft,Wt,ht,Pe,Jo.vertical,!0,Ce,ge))};if(!V&&vt){const Wt=Dt==="auto"?vt.map(Lt=>tx(Lt)):[Dt];let Dn=!1;for(let Lt=0;Lt<Wt.length;Lt++){const fn=Wt[Lt];if(!ye.horizontal[fn])if(Dn)ye.horizontal[fn]=ye.horizontal[0];else{const Ln=Y_(Ee,n,o,h,ae,Gt,et,"center",fn,ht,Pe,Jo.horizontal,!1,Ce,ge);Ln&&(ye.horizontal[fn]=Ln,Dn=Ln.positionedLines.length===1)}}en("left")}else{if(Dt==="auto"&&(Dt=tx(ft)),rt||R.get("text-writing-mode").indexOf("horizontal")>=0||!mf(ot)){const Wt=Y_(Ee,n,o,h,ae,Gt,et,ft,Dt,ht,Pe,Jo.horizontal,!1,Ce,ge);Wt&&(ye.horizontal[Dt]=Wt)}en(rt?"left":Dt)}}let Ye=!1;if(K.icon&&K.icon.name){const ot=u[K.icon.name];ot&&(Ae=c3(h[K.icon.name],R.get("icon-offset").evaluate(K,{},x),R.get("icon-anchor").evaluate(K,{},x)),Ye=ot.sdf,i.sdfIcons===void 0?i.sdfIcons=ot.sdf:i.sdfIcons!==ot.sdf&&zt("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(ot.pixelRatio!==i.pixelRatio||R.get("icon-rotate").constantOr(1)!==0)&&(i.iconsNeedLinear=!0))}const qe=o2(ye.horizontal)||ye.vertical;i.iconsInText||(i.iconsInText=!!qe&&qe.iconsInText),(qe||Ae)&&_3(i,K,ye,Ae,u,L,Ce,0,Pe,Ye,v,x,E)}m&&i.generateCollisionDebugBuffers(S,i.collisionBoxArray)}function tx(i){switch(i){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function _3(i,n,o,u,h,m,v,x,S,E,R,z,L){let V=m.textMaxSize.evaluate(n,{},z);V===void 0&&(V=v);const G=i.layers[0].layout,K=G.get("icon-offset").evaluate(n,{},z),ae=o2(o.horizontal)||o.vertical,ge=L.name==="globe",Ce=Di,ye=v/Ce,Ee=i.tilePixelRatio*V/Ce,Ae=(ft=i.overscaling,i.zoom>18&&ft>2&&(ft>>=1),Math.max(mn/(512*ft),1)*G.get("symbol-spacing")),Pe=G.get("text-padding")*i.tilePixelRatio,Ye=G.get("icon-padding")*i.tilePixelRatio,qe=oe(G.get("text-max-angle")),ot=G.get("text-rotation-alignment")==="map"&&G.get("symbol-placement")!=="point",St=G.get("icon-rotation-alignment")==="map"&&G.get("symbol-placement")!=="point",et=G.get("symbol-placement"),ht=Ae/2;var ft;const vt=G.get("icon-text-fit");let Dt;u&&vt!=="none"&&(i.allowVerticalPlacement&&o.vertical&&(Dt=WC(u,o.vertical,vt,G.get("icon-text-fit-padding"),K,ye)),ae&&(u=WC(u,ae,vt,G.get("icon-text-fit-padding"),K,ye)));const rt=(Gt,en,Wt)=>{if(en.x<0||en.x>=mn||en.y<0||en.y>=mn)return;let Dn=null;if(ge){const{x:Lt,y:fn,z:Ln}=L.projectTilePoint(en.x,en.y,Wt);Dn={anchor:new nl(Lt,fn,Ln,0,void 0),up:L.upVector(Wt,en.x,en.y)}}(function(Lt,fn,Ln,nr,kn,wn,Or,Fn,Bn,wr,Mr,Pr,Sr,qr,ei,ci,Er,gi,ui,Yr,ir,di,Ar,co,hi){const Li=Lt.addToLineVertexArray(fn,nr);let Ii,uo,Mi,ts,Ed,Qf,ep,F2=0,B2=0,N2=0,j2=0,gx=-1,vx=-1;const Rs={};let U2=h_("");const eu=Ln?Ln.anchor:fn;let yx=0,_x=0;if(Bn._unevaluatedLayout.getValue("text-radial-offset")===void 0?[yx,_x]=Bn.layout.get("text-offset").evaluate(ir,{},hi).map(Fo=>Fo*Di):(yx=Bn.layout.get("text-radial-offset").evaluate(ir,{},hi)*Di,_x=ex),Lt.allowVerticalPlacement&&kn.vertical){const Fo=kn.vertical;if(ei)Qf=nx(Fo),Fn&&(ep=nx(Fn));else{const Bo=Bn.layout.get("text-rotate").evaluate(ir,{},hi)+90;Mi=jg(wr,eu,fn,Mr,Pr,Sr,Fo,qr,Bo,ci),Fn&&(ts=jg(wr,eu,fn,Mr,Pr,Sr,Fn,gi,Bo))}}if(wn){const Fo=Bn.layout.get("icon-rotate").evaluate(ir,{},hi),Bo=Bn.layout.get("icon-text-fit")!=="none",tp=t2(wn,Fo,Ar,Bo),bx=Fn?t2(Fn,Fo,Ar,Bo):void 0;uo=jg(wr,eu,fn,Mr,Pr,Sr,wn,gi,Fo),F2=4*tp.length;const V2=Lt.iconSizeData;let tu=null;V2.kind==="source"?(tu=[Ja*Bn.layout.get("icon-size").evaluate(ir,{},hi)],tu[0]>Ul&&zt(`${Lt.layerIds[0]}: Value for "icon-size" is >= ${Gf}. Reduce your "icon-size".`)):V2.kind==="composite"&&(tu=[Ja*di.compositeIconSizes[0].evaluate(ir,{},hi),Ja*di.compositeIconSizes[1].evaluate(ir,{},hi)],(tu[0]>Ul||tu[1]>Ul)&&zt(`${Lt.layerIds[0]}: Value for "icon-size" is >= ${Gf}. Reduce your "icon-size".`)),Lt.addSymbols(Lt.icon,tp,tu,Yr,ui,ir,!1,Ln,fn,Li.lineStartIndex,Li.lineLength,-1,co,hi),gx=Lt.icon.placedSymbolArray.length-1,bx&&(B2=4*bx.length,Lt.addSymbols(Lt.icon,bx,tu,Yr,ui,ir,Jo.vertical,Ln,fn,Li.lineStartIndex,Li.lineLength,-1,co,hi),vx=Lt.icon.placedSymbolArray.length-1)}for(const Fo in kn.horizontal){const Bo=kn.horizontal[Fo];Ii||(U2=h_(Bo.text),ei?Ed=nx(Bo):Ii=jg(wr,eu,fn,Mr,Pr,Sr,Bo,qr,Bn.layout.get("text-rotate").evaluate(ir,{},hi),ci));const tp=Bo.positionedLines.length===1;if(N2+=i2(Lt,Ln,fn,Bo,Or,Bn,ei,ir,ci,Li,kn.vertical?Jo.horizontal:Jo.horizontalOnly,tp?Object.keys(kn.horizontal):[Fo],Rs,gx,di,co,hi),tp)break}kn.vertical&&(j2+=i2(Lt,Ln,fn,kn.vertical,Or,Bn,ei,ir,ci,Li,Jo.vertical,["vertical"],Rs,vx,di,co,hi));let Zl=-1;const xx=(Fo,Bo)=>Fo?Math.max(Fo,Bo):Bo;Zl=xx(Ed,Zl),Zl=xx(Qf,Zl),Zl=xx(ep,Zl);const q3=Zl>-1?1:0;Lt.glyphOffsetArray.length>=Hl.MAX_GLYPHS&&zt("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),ir.sortKey!==void 0&&Lt.addToSortKeyRanges(Lt.symbolInstances.length,ir.sortKey),Lt.symbolInstances.emplaceBack(eu.x,eu.y,eu.z,fn.x,fn.y,Rs.right>=0?Rs.right:-1,Rs.center>=0?Rs.center:-1,Rs.left>=0?Rs.left:-1,Rs.vertical>=0?Rs.vertical:-1,gx,vx,U2,Ii!==void 0?Ii:Lt.collisionBoxArray.length,Ii!==void 0?Ii+1:Lt.collisionBoxArray.length,Mi!==void 0?Mi:Lt.collisionBoxArray.length,Mi!==void 0?Mi+1:Lt.collisionBoxArray.length,uo!==void 0?uo:Lt.collisionBoxArray.length,uo!==void 0?uo+1:Lt.collisionBoxArray.length,ts||Lt.collisionBoxArray.length,ts?ts+1:Lt.collisionBoxArray.length,Mr,N2,j2,F2,B2,q3,0,yx,_x,Zl)})(i,en,Dn,Gt,o,u,h,Dt,i.layers[0],i.collisionBoxArray,n.index,n.sourceLayerIndex,i.index,Pe,ot,S,0,Ye,St,K,n,m,E,R,z)};if(et==="line")for(const Gt of JC(n.geometry,0,0,mn,mn)){const en=d3(Gt,Ae,qe,o.vertical||ae,u,Ce,Ee,i.overscaling,mn);for(const Wt of en)ae&&x3(i,ae.text,ht,Wt)||rt(Gt,Wt,z)}else if(et==="line-center"){for(const Gt of n.geometry)if(Gt.length>1){const en=u3(Gt,qe,o.vertical||ae,u,Ce,Ee);en&&rt(Gt,en,z)}}else if(n.type==="Polygon")for(const Gt of U_(n.geometry,0)){const en=m3(Gt,16);rt(Gt[0],new nl(en.x,en.y,0,0,void 0),z)}else if(n.type==="LineString")for(const Gt of n.geometry)rt(Gt,new nl(Gt[0].x,Gt[0].y,0,0,void 0),z);else if(n.type==="Point")for(const Gt of n.geometry)for(const en of Gt)rt([en],new nl(en.x,en.y,0,0,void 0),z)}const Gf=255,Ul=Gf*Ja;function i2(i,n,o,u,h,m,v,x,S,E,R,z,L,V,G,K,ae){const ge=function(Ee,Ae,Pe,Ye,qe,ot,St,et){const ht=[];if(Ae.positionedLines.length===0)return ht;const ft=Ye.layout.get("text-rotate").evaluate(ot,{})*Math.PI/180,vt=function(Wt){const Dn=Wt[0],Lt=Wt[1],fn=Dn*Lt;return fn>0?[Dn,-Lt]:fn<0?[-Dn,Lt]:Dn===0?[Lt,Dn]:[Lt,-Dn]}(Pe);let Dt=Math.abs(Ae.top-Ae.bottom);for(const Wt of Ae.positionedLines)Dt-=Wt.lineOffset;const rt=Ae.positionedLines.length,Gt=Dt/rt;let en=Ae.top-Pe[1];for(let Wt=0;Wt<rt;++Wt){const Dn=Ae.positionedLines[Wt];en=h3(Ae,Gt,en,Wt);for(const Lt of Dn.positionedGlyphs){if(!Lt.rect)continue;const fn=Lt.rect||{};let Ln=FC+1,nr=!0,kn=1,wn=0;if(Lt.imageName){const Ar=St[Lt.imageName];if(!Ar)continue;if(Ar.sdf){zt("SDF images are not supported in formatted text and will be ignored.");continue}nr=!1,kn=Ar.pixelRatio,Ln=wo/kn}const Or=(qe||et)&&Lt.vertical,Fn=Lt.metrics.advance*Lt.scale/2,Bn=Lt.metrics,wr=Lt.rect;if(wr===null)continue;et&&Ae.verticalizable&&(wn=Lt.imageName?Fn-Lt.metrics.width*Lt.scale/2:0);const Mr=qe?[Lt.x+Fn,Lt.y]:[0,0];let Pr=[0,0],Sr=[0,0],qr=!1;qe||(Or?(Sr=[Lt.x+Fn+vt[0],Lt.y+vt[1]-wn],qr=!0):Pr=[Lt.x+Fn+Pe[0],Lt.y+Pe[1]-wn]);const ei=wr.w*Lt.scale/(kn*(Lt.localGlyph?Qa:1)),ci=wr.h*Lt.scale/(kn*(Lt.localGlyph?Qa:1));let Er,gi,ui,Yr;if(Or){const Ar=Lt.y-en,co=new ee(-Fn,Fn-Ar),hi=-Math.PI/2,Li=new ee(...Sr);Er=new ee(-Fn+Pr[0],Pr[1]),Er._rotateAround(hi,co)._add(Li),Er.x+=-Ar+Fn,Er.y-=(Bn.left-Ln)*Lt.scale;const Ii=Lt.imageName?Bn.advance*Lt.scale:Di*Lt.scale,uo=String.fromCharCode(Lt.glyph);qk(uo)?Er.x+=(1-Ln)*Lt.scale:Zk(uo)?Er.x+=Ii-Bn.height*Lt.scale+(-Ln-1)*Lt.scale:Er.x+=Lt.imageName||Bn.width+2*Ln===wr.w&&Bn.height+2*Ln===wr.h?(Ii-ci)/2:(Ii-(Bn.height+2*Ln)*Lt.scale)/2,gi=new ee(Er.x,Er.y-ei),ui=new ee(Er.x+ci,Er.y),Yr=new ee(Er.x+ci,Er.y-ei)}else{const Ar=(Bn.left-Ln)*Lt.scale-Fn+Pr[0],co=(-Bn.top-Ln)*Lt.scale+Pr[1],hi=Ar+ei,Li=co+ci;Er=new ee(Ar,co),gi=new ee(hi,co),ui=new ee(Ar,Li),Yr=new ee(hi,Li)}if(ft){let Ar;Ar=qe?new ee(0,0):qr?new ee(vt[0],vt[1]):new ee(Pe[0],Pe[1]),Er._rotateAround(ft,Ar),gi._rotateAround(ft,Ar),ui._rotateAround(ft,Ar),Yr._rotateAround(ft,Ar)}const ir=new ee(0,0),di=new ee(0,0);ht.push({tl:Er,tr:gi,bl:ui,br:Yr,tex:fn,writingMode:Ae.writingMode,glyphOffset:Mr,sectionIndex:Lt.sectionIndex,isSDF:nr,pixelOffsetTL:ir,pixelOffsetBR:di,minFontScaleX:0,minFontScaleY:0})}}return ht}(0,u,S,m,v,x,h,i.allowVerticalPlacement),Ce=i.textSizeData;let ye=null;Ce.kind==="source"?(ye=[Ja*m.layout.get("text-size").evaluate(x,{},ae)],ye[0]>Ul&&zt(`${i.layerIds[0]}: Value for "text-size" is >= ${Gf}. Reduce your "text-size".`)):Ce.kind==="composite"&&(ye=[Ja*G.compositeTextSizes[0].evaluate(x,{},ae),Ja*G.compositeTextSizes[1].evaluate(x,{},ae)],(ye[0]>Ul||ye[1]>Ul)&&zt(`${i.layerIds[0]}: Value for "text-size" is >= ${Gf}. Reduce your "text-size".`)),i.addSymbols(i.text,ge,ye,S,v,x,R,n,o,E.lineStartIndex,E.lineLength,V,K,ae);for(const Ee of z)L[Ee]=i.text.placedSymbolArray.length-1;return 4*ge.length}function o2(i){for(const n in i)return i[n];return null}function jg(i,n,o,u,h,m,v,x,S,E){let R=v.top,z=v.bottom,L=v.left,V=v.right;const G=v.collisionPadding;if(G&&(L-=G[0],R-=G[1],V+=G[2],z+=G[3]),S){const K=new ee(L,R),ae=new ee(V,R),ge=new ee(L,z),Ce=new ee(V,z),ye=oe(S);let Ee=new ee(0,0);E&&(Ee=new ee(E[0],E[1])),K._rotateAround(ye,Ee),ae._rotateAround(ye,Ee),ge._rotateAround(ye,Ee),Ce._rotateAround(ye,Ee),L=Math.min(K.x,ae.x,ge.x,Ce.x),V=Math.max(K.x,ae.x,ge.x,Ce.x),R=Math.min(K.y,ae.y,ge.y,Ce.y),z=Math.max(K.y,ae.y,ge.y,Ce.y)}return i.emplaceBack(n.x,n.y,n.z,o.x,o.y,L,R,V,z,x,u,h,m),i.length-1}function nx(i){i.collisionPadding&&(i.top-=i.collisionPadding[1],i.bottom+=i.collisionPadding[3]);const n=i.bottom-i.top;return n>0?Math.max(10,n):null}function x3(i,n,o,u){const h=i.compareText;if(n in h){const m=h[n];for(let v=m.length-1;v>=0;v--)if(u.dist(m[v])<o)return!0}else h[n]=[];return h[n].push(u),!1}function a2(i,n){const o=i.fovAboveCenter,u=i.elevation?i.elevation.getMinElevationBelowMSL()*n:0,h=(i._camera.position[2]*i.worldSize-u)/Math.cos(i._pitch),m=Math.sin(o)*h/Math.sin(Math.max(Math.PI/2-i._pitch-o,.01)),v=Math.sin(i._pitch)*m+h;return Math.min(1.01*v,h*(1/i._horizonShift))}function Jc(i,n){if(!n.isReprojectedInTileSpace)return{scale:1<<i.z,x:i.x,y:i.y,x2:i.x+1,y2:i.y+1,projection:n};const o=Math.pow(2,-i.z),u=i.x*o,h=(i.x+1)*o,m=i.y*o,v=(i.y+1)*o,x=Yo(u),S=Yo(h),E=Gi(m),R=Gi(v),z=n.project(x,E),L=n.project(S,E),V=n.project(S,R),G=n.project(x,R);let K=Math.min(z.x,L.x,V.x,G.x),ae=Math.min(z.y,L.y,V.y,G.y),ge=Math.max(z.x,L.x,V.x,G.x),Ce=Math.max(z.y,L.y,V.y,G.y);const ye=o/16;function Ee(Pe,Ye,qe,ot,St,et){const ht=(qe+St)/2,ft=(ot+et)/2,vt=n.project(Yo(ht),Gi(ft)),Dt=Math.max(0,K-vt.x,ae-vt.y,vt.x-ge,vt.y-Ce);K=Math.min(K,vt.x),ge=Math.max(ge,vt.x),ae=Math.min(ae,vt.y),Ce=Math.max(Ce,vt.y),Dt>ye&&(Ee(Pe,vt,qe,ot,ht,ft),Ee(vt,Ye,ht,ft,St,et))}Ee(z,L,u,m,h,m),Ee(L,V,h,m,h,v),Ee(V,G,h,v,u,v),Ee(G,z,u,v,u,m),K-=ye,ae-=ye,ge+=ye,Ce+=ye;const Ae=1/Math.max(ge-K,Ce-ae);return{scale:Ae,x:K*Ae,y:ae*Ae,x2:ge*Ae,y2:Ce*Ae,projection:n}}const b3=Xa(new Float32Array(16));class Vl{constructor(n){this.spec=n,this.name=n.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(n,o){return{x:0,y:0,z:0}}unproject(n,o){return new br(0,0)}projectTilePoint(n,o,u){return{x:n,y:o,z:0}}locationPoint(n,o,u=!0){return n._coordinatePoint(n.locationCoordinate(o),u)}pixelsPerMeter(n,o){return Ya(1,n)*o}pixelSpaceConversion(n,o,u){return 1}farthestPixelDistance(n){return a2(n,n.pixelsPerMeter)}pointCoordinate(n,o,u,h){const m=n.horizonLineFromTop(!1),v=new ee(o,Math.max(m,u));return n.rayIntersectionCoordinate(n.pointRayIntersection(v,h))}pointCoordinate3D(n,o,u){const h=new ee(o,u);if(n.elevation)return n.elevation.pointCoordinate(h);{const m=this.pointCoordinate(n,h.x,h.y,0);return[m.x,m.y,m.z]}}isPointAboveHorizon(n,o){if(n.elevation)return!this.pointCoordinate3D(n,o.x,o.y);const u=n.horizonLineFromTop();return o.y<u}createInversionMatrix(n,o){return b3}createTileMatrix(n,o,u){let h,m,v;const x=u.canonical,S=Xa(new Float64Array(16));if(this.isReprojectedInTileSpace){const E=Jc(x,this);h=1,m=E.x+u.wrap*E.scale,v=E.y,Gc(S,S,[h/E.scale,h/E.scale,n.pixelsPerMeter/o])}else h=o/n.zoomScale(x.z),m=(x.x+Math.pow(2,x.z)*u.wrap)*h,v=x.y*h;return wf(S,S,[m,v,0]),Gc(S,S,[h/mn,h/mn,1]),S}upVector(n,o,u){return[0,0,1]}upVectorScale(n,o,u){return{metersToTile:1}}}class w3 extends Vl{constructor(n){super(n),this.range=[4,7],this.center=n.center||[-96,37.5];const[o,u]=this.parallels=n.parallels||[29.5,45.5],h=Math.sin(oe(o));this.n=(h+Math.sin(oe(u)))/2,this.c=1+h*(2*this.n-h),this.r0=Math.sqrt(this.c)/this.n}project(n,o){const{n:u,c:h,r0:m}=this,v=oe(n-this.center[0]),x=oe(o),S=Math.sqrt(h-2*u*Math.sin(x))/u;return{x:S*Math.sin(v*u),y:S*Math.cos(v*u)-m,z:0}}unproject(n,o){const{n:u,c:h,r0:m}=this,v=m+o;let x=Math.atan2(n,Math.abs(v))*Math.sign(v);v*u<0&&(x-=Math.PI*Math.sign(n)*Math.sign(v));const S=oe(this.center[0])*u;x=Be(x,-Math.PI-S,Math.PI-S);const E=pe(fe(x/u)+this.center[0],-180,180),R=Math.asin(pe((h-(n*n+v*v)*u*u)/(2*u),-1,1)),z=pe(fe(R),-Wi,Wi);return new br(E,z)}}const Wf=1.340264,qf=-.081106,Zf=893e-6,Xf=.003796,Ug=Math.sqrt(3)/2;class S3 extends Vl{project(n,o){o=o/180*Math.PI,n=n/180*Math.PI;const u=Math.asin(Ug*Math.sin(o)),h=u*u,m=h*h*h;return{x:.5*(n*Math.cos(u)/(Ug*(Wf+3*qf*h+m*(7*Zf+9*Xf*h)))/Math.PI+.5),y:1-.5*(u*(Wf+qf*h+m*(Zf+Xf*h))/Math.PI+1),z:0}}unproject(n,o){n=(2*n-.5)*Math.PI;let u=o=(2*(1-o)-1)*Math.PI,h=u*u,m=h*h*h;for(let R,z,L,V=0;V<12&&(z=u*(Wf+qf*h+m*(Zf+Xf*h))-o,L=Wf+3*qf*h+m*(7*Zf+9*Xf*h),R=z/L,u=pe(u-R,-Math.PI/3,Math.PI/3),h=u*u,m=h*h*h,!(Math.abs(R)<1e-12));++V);const v=Ug*n*(Wf+3*qf*h+m*(7*Zf+9*Xf*h))/Math.cos(u),x=Math.asin(Math.sin(u)/Ug),S=pe(180*v/Math.PI,-180,180),E=pe(180*x/Math.PI,-Wi,Wi);return new br(S,E)}}class E3 extends Vl{constructor(n){super(n),this.wrap=!0,this.supportsWorldCopies=!0}project(n,o){return{x:.5+n/360,y:.5-o/360,z:0}}unproject(n,o){const u=360*(n-.5),h=pe(360*(.5-o),-Wi,Wi);return new br(u,h)}}const wd=Math.PI/2;function Vg(i){return Math.tan((wd+i)/2)}class C3 extends Vl{constructor(n){super(n),this.center=n.center||[0,30];const[o,u]=this.parallels=n.parallels||[30,30];let h=oe(o),m=oe(u);this.southernCenter=h+m<0,this.southernCenter&&(h=-h,m=-m);const v=Math.cos(h),x=Vg(h);this.n=h===m?Math.sin(h):Math.log(v/Math.cos(m))/Math.log(Vg(m)/x),this.f=v*Math.pow(Vg(h),this.n)/this.n}project(n,o){o=oe(o),this.southernCenter&&(o=-o),n=oe(n-this.center[0]);const u=1e-6,{n:h,f:m}=this;m>0?o<-wd+u&&(o=-wd+u):o>wd-u&&(o=wd-u);const v=m/Math.pow(Vg(o),h);let x=v*Math.sin(h*n),S=m-v*Math.cos(h*n);return x=.5*(x/Math.PI+.5),S=.5*(S/Math.PI+.5),{x,y:this.southernCenter?S:1-S,z:0}}unproject(n,o){n=(2*n-.5)*Math.PI,this.southernCenter&&(o=1-o),o=(2*(1-o)-.5)*Math.PI;const{n:u,f:h}=this,m=h-o,v=Math.sign(m),x=Math.sign(u)*Math.sqrt(n*n+m*m);let S=Math.atan2(n,Math.abs(m))*v;m*u<0&&(S-=Math.PI*Math.sign(n)*v);const E=pe(fe(S/u)+this.center[0],-180,180),R=pe(fe(2*Math.atan(Math.pow(h/x,1/u))-wd),-Wi,Wi);return new br(E,this.southernCenter?-R:R)}}class s2 extends Vl{constructor(n){super(n),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(n,o){return{x:Ts(n),y:Is(o),z:0}}unproject(n,o){const u=Yo(n),h=Gi(o);return new br(u,h)}}const l2=oe(Wi);class T3 extends Vl{project(n,o){const u=(o=oe(o))*o,h=u*u;return{x:.5*((n=oe(n))*(.8707-.131979*u+h*(h*(.003971*u-.001529*h)-.013791))/Math.PI+.5),y:1-.5*(o*(1.007226+u*(.015085+h*(.028874*u-.044475-.005916*h)))/Math.PI+1),z:0}}unproject(n,o){n=(2*n-.5)*Math.PI;let u=o=(2*(1-o)-1)*Math.PI,h=25,m=0,v=u*u;do{v=u*u;const E=v*v;m=(u*(1.007226+v*(.015085+E*(.028874*v-.044475-.005916*E)))-o)/(1.007226+v*(.045255+E*(.259866*v-.311325-.005916*11*E))),u=pe(u-m,-l2,l2)}while(Math.abs(m)>1e-6&&--h>0);v=u*u;const x=pe(fe(n/(.8707+v*(v*(v*v*v*(.003971-.001529*v)-.013791)-.131979))),-180,180),S=fe(u);return new br(x,S)}}const c2=oe(Wi);class I3 extends Vl{project(n,o){o=oe(o),n=oe(n);const u=Math.cos(o),h=2/Math.PI,m=Math.acos(u*Math.cos(n/2)),v=Math.sin(m)/m,x=.5*(n*h+2*u*Math.sin(n/2)/v)||0,S=.5*(o+Math.sin(o)/v)||0;return{x:.5*(x/Math.PI+.5),y:1-.5*(S/Math.PI+1),z:0}}unproject(n,o){let u=n=(2*n-.5)*Math.PI,h=o=(2*(1-o)-1)*Math.PI,m=25;const v=1e-6;let x=0,S=0;do{const E=Math.cos(h),R=Math.sin(h),z=2*R*E,L=R*R,V=E*E,G=Math.cos(u/2),K=Math.sin(u/2),ae=2*G*K,ge=K*K,Ce=1-V*G*G,ye=Ce?1/Ce:0,Ee=Ce?Math.acos(E*G)*Math.sqrt(1/Ce):0,Ae=.5*(2*Ee*E*K+2*u/Math.PI)-n,Pe=.5*(Ee*R+h)-o,Ye=.5*ye*(V*ge+Ee*E*G*L)+1/Math.PI,qe=ye*(ae*z/4-Ee*R*K),ot=.125*ye*(z*K-Ee*R*V*ae),St=.5*ye*(L*G+Ee*ge*E)+.5,et=qe*ot-St*Ye;x=(Pe*qe-Ae*St)/et,S=(Ae*ot-Pe*Ye)/et,u=pe(u-x,-Math.PI,Math.PI),h=pe(h-S,-c2,c2)}while((Math.abs(x)>v||Math.abs(S)>v)&&--m>0);return new br(fe(u),fe(h))}}class u2 extends Vl{constructor(n){super(n),this.center=n.center||[0,0],this.parallels=n.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(oe(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(n,o){const{scale:u,cosPhi:h}=this;return{x:oe(n)*h*u+.5,y:-Math.sin(oe(o))/h*u+.5,z:0}}unproject(n,o){const{scale:u,cosPhi:h}=this,m=-(o-.5)/u,v=pe(fe((n-.5)/u)/h,-180,180),x=Math.asin(pe(m*h,-1,1)),S=pe(fe(x),-Wi,Wi);return new br(v,S)}}class M3 extends s2{constructor(n){super(n),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(n,o,u){const h=Af(n,o,u);return ii(h,h,Rf(Cs(u))),{x:h[0],y:h[1],z:h[2]}}locationPoint(n,o){const u=sd(o.lat,o.lng),h=ao([],u),m=n.elevation?n.elevation.getAtPointOrZero(n.locationCoordinate(o),n._centerAltitude):n._centerAltitude;Tf(u,u,h,Ya(1,0)*mn*m);const v=Xa(new Float64Array(16));return Hc(v,n.pixelMatrix,n.globeMatrix),ii(u,u,v),new ee(u[0],u[1])}pixelsPerMeter(n,o){return Ya(1,0)*o}pixelSpaceConversion(n,o,u){const h=Ya(1,n)*o,m=Jn(Ya(1,45)*o,h,u);return this.pixelsPerMeter(n,o)/m}createTileMatrix(n,o,u){const h=T_(Cs(u.canonical));return Hc(new Float64Array(16),n.globeMatrix,h)}createInversionMatrix(n,o){const{center:u}=n,h=Rf(Cs(o));return vg(h,h,oe(u.lng)),g_(h,h,oe(u.lat)),Gc(h,h,[n._pixelsPerMercatorPixel,n._pixelsPerMercatorPixel,1]),Float32Array.from(h)}pointCoordinate(n,o,u,h){return $E(n,o,u,!0)||new cd(0,0)}pointCoordinate3D(n,o,u){const h=this.pointCoordinate(n,o,u,0);return[h.x,h.y,h.z]}isPointAboveHorizon(n,o){return!$E(n,o.x,o.y,!1)}farthestPixelDistance(n){const o=function(h,m){const v=h.cameraToCenterDistance,x=h._centerAltitude*m,S=h._camera,E=h._camera.forward(),R=Js([],Ko([],E,-v),[0,0,x]),z=h.worldSize/(2*Math.PI),L=[0,0,-z],V=h.width/h.height,G=Math.tan(h.fovAboveCenter),K=Ko([],S.up(),G),ae=Ko([],S.right(),G*V),ge=ao([],Js([],Js([],E,K),ae)),Ce=[];let ye;if(new x_(R,ge).closestPointOnSphere(L,z,Ce)){const Ee=Js([],Ce,L),Ae=Ka([],Ee,R);ye=Math.cos(h.fovAboveCenter)*Sf(Ae)}else{const Ee=Ka([],R,L),Ae=Ka([],L,R);ao(Ae,Ae);const Pe=Sf(Ee)-z;ye=Math.sqrt(Pe*(Pe+2*z));const Ye=Math.acos(ye/(z+Pe))-Math.acos(Sa(E,Ae));ye*=Math.cos(Ye)}return 1.01*ye}(n,this.pixelsPerMeter(n.center.lat,n.worldSize)),u=ld(n.zoom);if(u>0){const h=a2(n,Ya(1,n.center.lat)*n.worldSize),m=n.worldSize/(2*Math.PI),v=Math.max(n.width,n.height)/n.worldSize*Math.PI;return Jn(o,h+m*(1-Math.cos(v)),Math.pow(u,10))}return o}upVector(n,o,u){return Af(o,u,n,1)}upVectorScale(n){return{metersToTile:yg(xg(Cs(n)))}}}function d2(i){const n=i.parallels,o=!!n&&Math.abs(n[0]+n[1])<.01;switch(i.name){case"mercator":return new s2(i);case"equirectangular":return new E3(i);case"naturalEarth":return new T3(i);case"equalEarth":return new S3(i);case"winkelTripel":return new I3(i);case"albers":return o?new u2(i):new w3(i);case"lambertConformalConic":return o?new u2(i):new C3(i);case"globe":return new M3(i)}throw new Error(`Invalid projection name: ${i.name}`)}const P3=Ag.types,A3=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Hg(i,n,o,u,h,m,v,x,S,E,R,z,L){const V=x?Math.min(Ul,Math.round(x[0])):0,G=x?Math.min(Ul,Math.round(x[1])):0;i.emplaceBack(n,o,Math.round(32*u),Math.round(32*h),m,v,(V<<1)+(S?1:0),G,16*E,16*R,256*z,256*L)}function Gg(i,n,o,u,h,m,v){i.emplaceBack(n,o,u,h,m,v)}function Wg(i,n,o,u,h){i.emplaceBack(n,o,u,h),i.emplaceBack(n,o,u,h),i.emplaceBack(n,o,u,h),i.emplaceBack(n,o,u,h)}function R3(i){for(const n of i.sections)if(d_(n.text))return!0;return!1}class rx{constructor(n){this.layoutVertexArray=new mt,this.indexArray=new cn,this.programConfigurations=n,this.segments=new si,this.dynamicLayoutVertexArray=new xt,this.opacityVertexArray=new dn,this.placedSymbolArray=new ai,this.globeExtVertexArray=new Pt}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(n,o,u,h){this.isEmpty()||(u&&(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Bk.members),this.indexBuffer=n.createIndexBuffer(this.indexArray,o),this.dynamicLayoutVertexBuffer=n.createVertexBuffer(this.dynamicLayoutVertexArray,jk.members,!0),this.opacityVertexBuffer=n.createVertexBuffer(this.opacityVertexArray,A3,!0),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=n.createVertexBuffer(this.globeExtVertexArray,Nk.members,!0)),this.opacityVertexBuffer.itemSize=1),(u||h)&&this.programConfigurations.upload(n))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}}Jt(rx,"SymbolBuffers");class ix{constructor(n,o,u){this.layoutVertexArray=new n,this.layoutAttributes=o,this.indexArray=new u,this.segments=new si,this.collisionVertexArray=new Hn,this.collisionVertexArrayExt=new Un}upload(n){this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=n.createVertexBuffer(this.collisionVertexArray,Uk.members,!0),this.collisionVertexBufferExt=n.createVertexBuffer(this.collisionVertexArrayExt,Vk.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}Jt(ix,"CollisionBuffers");class Hl{constructor(n){this.collisionBoxArray=n.collisionBoxArray,this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(v=>v.id),this.index=n.index,this.pixelRatio=n.pixelRatio,this.sourceLayerIndex=n.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Xa([]),this.placementViewportMatrix=Xa([]);const o=this.layers[0]._unevaluatedLayout._values;this.textSizeData=W_(this.zoom,o["text-size"]),this.iconSizeData=W_(this.zoom,o["icon-size"]);const u=this.layers[0].layout,h=u.get("symbol-sort-key"),m=u.get("symbol-z-order");this.canOverlap=u.get("text-allow-overlap")||u.get("icon-allow-overlap")||u.get("text-ignore-placement")||u.get("icon-ignore-placement"),this.sortFeaturesByKey=m!=="viewport-y"&&h.constantOr(1)!==void 0,this.sortFeaturesByY=(m==="viewport-y"||m==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=u.get("text-writing-mode").map(v=>Jo[v]),this.stateDependentLayerIds=this.layers.filter(v=>v.isStateDependent()).map(v=>v.id),this.sourceID=n.sourceID,this.projection=n.projection}createArrays(){this.text=new rx(new Vc(this.layers,this.zoom,n=>/^text/.test(n))),this.icon=new rx(new Vc(this.layers,this.zoom,n=>/^icon/.test(n))),this.glyphOffsetArray=new oo,this.lineVertexArray=new nd,this.symbolInstances=new Dr}calculateGlyphDependencies(n,o,u,h,m){for(let v=0;v<n.length;v++)if(o[n.charCodeAt(v)]=!0,h&&m){const x=Uf[n.charAt(v)];x&&(o[x.charCodeAt(0)]=!0)}}populate(n,o,u,h){const m=this.layers[0],v=m.layout,x=this.projection.name==="globe",S=v.get("text-font"),E=v.get("text-field"),R=v.get("icon-image"),z=(E.value.kind!=="constant"||E.value.value instanceof Yn&&!E.value.value.isEmpty()||E.value.value.toString().length>0)&&(S.value.kind!=="constant"||S.value.value.length>0),L=R.value.kind!=="constant"||!!R.value.value||Object.keys(R.parameters).length>0,V=v.get("symbol-sort-key");if(this.features=[],!z&&!L)return;const G=o.iconDependencies,K=o.glyphDependencies,ae=o.availableImages,ge=new O(this.zoom);for(const{feature:Ce,id:ye,index:Ee,sourceLayerIndex:Ae}of n){const Pe=m._featureFilter.needGeometry,Ye=Xc(Ce,Pe);if(!m._featureFilter.filter(ge,Ye,u))continue;if(Pe||(Ye.geometry=Qs(Ce,u,h)),x&&Ce.type!==1&&u.z<=5){const et=Ye.geometry,ht=.98078528056,ft=(vt,Dt)=>Sa(Af(vt.x,vt.y,u,1),Af(Dt.x,Dt.y,u,1))<ht;for(let vt=0;vt<et.length;vt++)et[vt]=jL(et[vt],ft)}let qe,ot;if(z){const et=m.getValueAndResolveTokens("text-field",Ye,u,ae),ht=Yn.factory(et);R3(ht)&&(this.hasRTLText=!0),(!this.hasRTLText||b()==="unavailable"||this.hasRTLText&&M.isParsed())&&(qe=Wk(ht,m,Ye))}if(L){const et=m.getValueAndResolveTokens("icon-image",Ye,u,ae);ot=et instanceof dr?et:dr.fromString(et)}if(!qe&&!ot)continue;const St=this.sortFeaturesByKey?V.evaluate(Ye,{},u):void 0;if(this.features.push({id:ye,text:qe,icon:ot,index:Ee,sourceLayerIndex:Ae,geometry:Ye.geometry,properties:Ce.properties,type:P3[Ce.type],sortKey:St}),ot&&(G[ot.name]=!0),qe){const et=S.evaluate(Ye,{},u).join(","),ht=v.get("text-rotation-alignment")==="map"&&v.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Jo.vertical)>=0;for(const ft of qe.sections)if(ft.image)G[ft.image.name]=!0;else{const vt=mf(qe.toString()),Dt=ft.fontStack||et,rt=K[Dt]=K[Dt]||{};this.calculateGlyphDependencies(ft.text,rt,ht,this.allowVerticalPlacement,vt)}}}v.get("symbol-placement")==="line"&&(this.features=function(Ce){const ye={},Ee={},Ae=[];let Pe=0;function Ye(et){Ae.push(Ce[et]),Pe++}function qe(et,ht,ft){const vt=Ee[et];return delete Ee[et],Ee[ht]=vt,Ae[vt].geometry[0].pop(),Ae[vt].geometry[0]=Ae[vt].geometry[0].concat(ft[0]),vt}function ot(et,ht,ft){const vt=ye[ht];return delete ye[ht],ye[et]=vt,Ae[vt].geometry[0].shift(),Ae[vt].geometry[0]=ft[0].concat(Ae[vt].geometry[0]),vt}function St(et,ht,ft){const vt=ft?ht[0][ht[0].length-1]:ht[0][0];return`${et}:${vt.x}:${vt.y}`}for(let et=0;et<Ce.length;et++){const ht=Ce[et],ft=ht.geometry,vt=ht.text?ht.text.toString():null;if(!vt){Ye(et);continue}const Dt=St(vt,ft),rt=St(vt,ft,!0);if(Dt in Ee&&rt in ye&&Ee[Dt]!==ye[rt]){const Gt=ot(Dt,rt,ft),en=qe(Dt,rt,Ae[Gt].geometry);delete ye[Dt],delete Ee[rt],Ee[St(vt,Ae[en].geometry,!0)]=en,Ae[Gt].geometry=null}else Dt in Ee?qe(Dt,rt,ft):rt in ye?ot(Dt,rt,ft):(Ye(et),ye[Dt]=Pe-1,Ee[rt]=Pe-1)}return Ae.filter(et=>et.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Ce,ye)=>Ce.sortKey-ye.sortKey)}update(n,o,u,h){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(n,o,this.layers,u,h),this.icon.programConfigurations.updatePaintArrays(n,o,this.layers,u,h))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(n){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(n),this.iconCollisionBox.upload(n)),this.text.upload(n,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(n,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=d2(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(n,o){const u=this.lineVertexArray.length;if(n.segment!==void 0)for(const{x:h,y:m}of o)this.lineVertexArray.emplaceBack(h,m);return{lineStartIndex:u,lineLength:this.lineVertexArray.length-u}}addSymbols(n,o,u,h,m,v,x,S,E,R,z,L,V,G){const K=n.indexArray,ae=n.layoutVertexArray,ge=n.globeExtVertexArray,Ce=n.segments.prepareSegment(4*o.length,ae,K,this.canOverlap?v.sortKey:void 0),ye=this.glyphOffsetArray.length,Ee=Ce.vertexLength,Ae=this.allowVerticalPlacement&&x===Jo.vertical?Math.PI/2:0,Pe=v.text&&v.text.sections;for(let qe=0;qe<o.length;qe++){const{tl:ot,tr:St,bl:et,br:ht,tex:ft,pixelOffsetTL:vt,pixelOffsetBR:Dt,minFontScaleX:rt,minFontScaleY:Gt,glyphOffset:en,isSDF:Wt,sectionIndex:Dn}=o[qe],Lt=Ce.vertexLength,fn=en[1];if(Hg(ae,E.x,E.y,ot.x,fn+ot.y,ft.x,ft.y,u,Wt,vt.x,vt.y,rt,Gt),Hg(ae,E.x,E.y,St.x,fn+St.y,ft.x+ft.w,ft.y,u,Wt,Dt.x,vt.y,rt,Gt),Hg(ae,E.x,E.y,et.x,fn+et.y,ft.x,ft.y+ft.h,u,Wt,vt.x,Dt.y,rt,Gt),Hg(ae,E.x,E.y,ht.x,fn+ht.y,ft.x+ft.w,ft.y+ft.h,u,Wt,Dt.x,Dt.y,rt,Gt),S){const{x:Ln,y:nr,z:kn}=S.anchor,[wn,Or,Fn]=S.up;Gg(ge,Ln,nr,kn,wn,Or,Fn),Gg(ge,Ln,nr,kn,wn,Or,Fn),Gg(ge,Ln,nr,kn,wn,Or,Fn),Gg(ge,Ln,nr,kn,wn,Or,Fn),Wg(n.dynamicLayoutVertexArray,Ln,nr,kn,Ae)}else Wg(n.dynamicLayoutVertexArray,E.x,E.y,E.z,Ae);K.emplaceBack(Lt,Lt+1,Lt+2),K.emplaceBack(Lt+1,Lt+2,Lt+3),Ce.vertexLength+=4,Ce.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(en[0]),qe!==o.length-1&&Dn===o[qe+1].sectionIndex||n.programConfigurations.populatePaintArrays(ae.length,v,v.index,{},V,G,Pe&&Pe[Dn])}const Ye=S?S.anchor:E;n.placedSymbolArray.emplaceBack(Ye.x,Ye.y,Ye.z,E.x,E.y,ye,this.glyphOffsetArray.length-ye,Ee,R,z,E.segment,u?u[0]:0,u?u[1]:0,h[0],h[1],x,0,!1,0,L,0)}_commitLayoutVertex(n,o,u,h,m,v,x){n.emplaceBack(o,u,h,m,v,Math.round(x.x),Math.round(x.y))}_addCollisionDebugVertices(n,o,u,h,m,v,x){const S=u.segments.prepareSegment(4,u.layoutVertexArray,u.indexArray),E=S.vertexLength,R=x.tileAnchorX,z=x.tileAnchorY;for(let V=0;V<4;V++)u.collisionVertexArray.emplaceBack(0,0,0,0);u.collisionVertexArrayExt.emplaceBack(o,-n.padding,-n.padding),u.collisionVertexArrayExt.emplaceBack(o,n.padding,-n.padding),u.collisionVertexArrayExt.emplaceBack(o,n.padding,n.padding),u.collisionVertexArrayExt.emplaceBack(o,-n.padding,n.padding),this._commitLayoutVertex(u.layoutVertexArray,h,m,v,R,z,new ee(n.x1,n.y1)),this._commitLayoutVertex(u.layoutVertexArray,h,m,v,R,z,new ee(n.x2,n.y1)),this._commitLayoutVertex(u.layoutVertexArray,h,m,v,R,z,new ee(n.x2,n.y2)),this._commitLayoutVertex(u.layoutVertexArray,h,m,v,R,z,new ee(n.x1,n.y2)),S.vertexLength+=4;const L=u.indexArray;L.emplaceBack(E,E+1),L.emplaceBack(E+1,E+2),L.emplaceBack(E+2,E+3),L.emplaceBack(E+3,E),S.primitiveLength+=4}_addTextDebugCollisionBoxes(n,o,u,h,m,v){for(let x=h;x<m;x++){const S=u.get(x),E=this.getSymbolInstanceTextSize(n,v,o,x);this._addCollisionDebugVertices(S,E,this.textCollisionBox,S.projectedAnchorX,S.projectedAnchorY,S.projectedAnchorZ,v)}}_addIconDebugCollisionBoxes(n,o,u,h,m,v){for(let x=h;x<m;x++){const S=u.get(x),E=this.getSymbolInstanceIconSize(n,o,v.placedIconSymbolIndex);this._addCollisionDebugVertices(S,E,this.iconCollisionBox,S.projectedAnchorX,S.projectedAnchorY,S.projectedAnchorZ,v)}}generateCollisionDebugBuffers(n,o){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new ix(Qt,AC.members,Ti),this.iconCollisionBox=new ix(Qt,AC.members,Ti);const u=pd(this.iconSizeData,n),h=pd(this.textSizeData,n);for(let m=0;m<this.symbolInstances.length;m++){const v=this.symbolInstances.get(m);this._addTextDebugCollisionBoxes(h,n,o,v.textBoxStartIndex,v.textBoxEndIndex,v),this._addTextDebugCollisionBoxes(h,n,o,v.verticalTextBoxStartIndex,v.verticalTextBoxEndIndex,v),this._addIconDebugCollisionBoxes(u,n,o,v.iconBoxStartIndex,v.iconBoxEndIndex,v),this._addIconDebugCollisionBoxes(u,n,o,v.verticalIconBoxStartIndex,v.verticalIconBoxEndIndex,v)}}getSymbolInstanceTextSize(n,o,u,h){const m=this.text.placedSymbolArray.get(o.rightJustifiedTextSymbolIndex>=0?o.rightJustifiedTextSymbolIndex:o.centerJustifiedTextSymbolIndex>=0?o.centerJustifiedTextSymbolIndex:o.leftJustifiedTextSymbolIndex>=0?o.leftJustifiedTextSymbolIndex:o.verticalPlacedTextSymbolIndex>=0?o.verticalPlacedTextSymbolIndex:h),v=Dg(this.textSizeData,n,m)/Di;return this.tilePixelRatio*v}getSymbolInstanceIconSize(n,o,u){const h=this.icon.placedSymbolArray.get(u),m=Dg(this.iconSizeData,n,h);return this.tilePixelRatio*m}_commitDebugCollisionVertexUpdate(n,o,u){n.emplaceBack(o,-u,-u),n.emplaceBack(o,u,-u),n.emplaceBack(o,u,u),n.emplaceBack(o,-u,u)}_updateTextDebugCollisionBoxes(n,o,u,h,m,v){for(let x=h;x<m;x++){const S=u.get(x),E=this.getSymbolInstanceTextSize(n,v,o,x);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,E,S.padding)}}_updateIconDebugCollisionBoxes(n,o,u,h,m,v){for(let x=h;x<m;x++){const S=u.get(x),E=this.getSymbolInstanceIconSize(n,o,v);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,E,S.padding)}}updateCollisionDebugBuffers(n,o){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const u=pd(this.iconSizeData,n),h=pd(this.textSizeData,n);for(let m=0;m<this.symbolInstances.length;m++){const v=this.symbolInstances.get(m);this._updateTextDebugCollisionBoxes(h,n,o,v.textBoxStartIndex,v.textBoxEndIndex,v),this._updateTextDebugCollisionBoxes(h,n,o,v.verticalTextBoxStartIndex,v.verticalTextBoxEndIndex,v),this._updateIconDebugCollisionBoxes(u,n,o,v.iconBoxStartIndex,v.iconBoxEndIndex,v.placedIconSymbolIndex),this._updateIconDebugCollisionBoxes(u,n,o,v.verticalIconBoxStartIndex,v.verticalIconBoxEndIndex,v.placedIconSymbolIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(n,o,u,h,m,v,x,S,E){const R={};if(o<u){const{x1:z,y1:L,x2:V,y2:G,padding:K,projectedAnchorX:ae,projectedAnchorY:ge,projectedAnchorZ:Ce,tileAnchorX:ye,tileAnchorY:Ee,featureIndex:Ae}=n.get(o);R.textBox={x1:z,y1:L,x2:V,y2:G,padding:K,projectedAnchorX:ae,projectedAnchorY:ge,projectedAnchorZ:Ce,tileAnchorX:ye,tileAnchorY:Ee},R.textFeatureIndex=Ae}if(h<m){const{x1:z,y1:L,x2:V,y2:G,padding:K,projectedAnchorX:ae,projectedAnchorY:ge,projectedAnchorZ:Ce,tileAnchorX:ye,tileAnchorY:Ee,featureIndex:Ae}=n.get(h);R.verticalTextBox={x1:z,y1:L,x2:V,y2:G,padding:K,projectedAnchorX:ae,projectedAnchorY:ge,projectedAnchorZ:Ce,tileAnchorX:ye,tileAnchorY:Ee},R.verticalTextFeatureIndex=Ae}if(v<x){const{x1:z,y1:L,x2:V,y2:G,padding:K,projectedAnchorX:ae,projectedAnchorY:ge,projectedAnchorZ:Ce,tileAnchorX:ye,tileAnchorY:Ee,featureIndex:Ae}=n.get(v);R.iconBox={x1:z,y1:L,x2:V,y2:G,padding:K,projectedAnchorX:ae,projectedAnchorY:ge,projectedAnchorZ:Ce,tileAnchorX:ye,tileAnchorY:Ee},R.iconFeatureIndex=Ae}if(S<E){const{x1:z,y1:L,x2:V,y2:G,padding:K,projectedAnchorX:ae,projectedAnchorY:ge,projectedAnchorZ:Ce,tileAnchorX:ye,tileAnchorY:Ee,featureIndex:Ae}=n.get(S);R.verticalIconBox={x1:z,y1:L,x2:V,y2:G,padding:K,projectedAnchorX:ae,projectedAnchorY:ge,projectedAnchorZ:Ce,tileAnchorX:ye,tileAnchorY:Ee},R.verticalIconFeatureIndex=Ae}return R}deserializeCollisionBoxes(n){this.collisionArrays=[];for(let o=0;o<this.symbolInstances.length;o++){const u=this.symbolInstances.get(o);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(n,u.textBoxStartIndex,u.textBoxEndIndex,u.verticalTextBoxStartIndex,u.verticalTextBoxEndIndex,u.iconBoxStartIndex,u.iconBoxEndIndex,u.verticalIconBoxStartIndex,u.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(n,o){const u=n.placedSymbolArray.get(o),h=u.vertexStartIndex+4*u.numGlyphs;for(let m=u.vertexStartIndex;m<h;m+=4)n.indexArray.emplaceBack(m,m+1,m+2),n.indexArray.emplaceBack(m+1,m+2,m+3)}getSortedSymbolIndexes(n){if(this.sortedAngle===n&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const o=Math.sin(n),u=Math.cos(n),h=[],m=[],v=[];for(let x=0;x<this.symbolInstances.length;++x){v.push(x);const S=this.symbolInstances.get(x);h.push(0|Math.round(o*S.tileAnchorX+u*S.tileAnchorY)),m.push(S.featureIndex)}return v.sort((x,S)=>h[x]-h[S]||m[S]-m[x]),v}addToSortKeyRanges(n,o){const u=this.sortKeyRanges[this.sortKeyRanges.length-1];u&&u.sortKey===o?u.symbolInstanceEnd=n+1:this.sortKeyRanges.push({sortKey:o,symbolInstanceStart:n,symbolInstanceEnd:n+1})}sortFeatures(n){if(this.sortFeaturesByY&&this.sortedAngle!==n&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(n),this.sortedAngle=n,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const o of this.symbolInstanceIndexes){const u=this.symbolInstances.get(o);this.featureSortOrder.push(u.featureIndex);const{rightJustifiedTextSymbolIndex:h,centerJustifiedTextSymbolIndex:m,leftJustifiedTextSymbolIndex:v,verticalPlacedTextSymbolIndex:x,placedIconSymbolIndex:S,verticalPlacedIconSymbolIndex:E}=u;h>=0&&this.addIndicesForPlacedSymbol(this.text,h),m>=0&&m!==h&&this.addIndicesForPlacedSymbol(this.text,m),v>=0&&v!==m&&v!==h&&this.addIndicesForPlacedSymbol(this.text,v),x>=0&&this.addIndicesForPlacedSymbol(this.text,x),S>=0&&this.addIndicesForPlacedSymbol(this.icon,S),E>=0&&this.addIndicesForPlacedSymbol(this.icon,E)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}Jt(Hl,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),Hl.MAX_GLYPHS=65535,Hl.addDynamicAttributes=Wg;const O3=new be({"symbol-placement":new X(tt.layout_symbol["symbol-placement"]),"symbol-spacing":new X(tt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new X(tt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new se(tt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new X(tt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new X(tt.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new X(tt.layout_symbol["icon-ignore-placement"]),"icon-optional":new X(tt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new X(tt.layout_symbol["icon-rotation-alignment"]),"icon-size":new se(tt.layout_symbol["icon-size"]),"icon-text-fit":new X(tt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new X(tt.layout_symbol["icon-text-fit-padding"]),"icon-image":new se(tt.layout_symbol["icon-image"]),"icon-rotate":new se(tt.layout_symbol["icon-rotate"]),"icon-padding":new X(tt.layout_symbol["icon-padding"]),"icon-keep-upright":new X(tt.layout_symbol["icon-keep-upright"]),"icon-offset":new se(tt.layout_symbol["icon-offset"]),"icon-anchor":new se(tt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new X(tt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new X(tt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new X(tt.layout_symbol["text-rotation-alignment"]),"text-field":new se(tt.layout_symbol["text-field"]),"text-font":new se(tt.layout_symbol["text-font"]),"text-size":new se(tt.layout_symbol["text-size"]),"text-max-width":new se(tt.layout_symbol["text-max-width"]),"text-line-height":new se(tt.layout_symbol["text-line-height"]),"text-letter-spacing":new se(tt.layout_symbol["text-letter-spacing"]),"text-justify":new se(tt.layout_symbol["text-justify"]),"text-radial-offset":new se(tt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new X(tt.layout_symbol["text-variable-anchor"]),"text-anchor":new se(tt.layout_symbol["text-anchor"]),"text-max-angle":new X(tt.layout_symbol["text-max-angle"]),"text-writing-mode":new X(tt.layout_symbol["text-writing-mode"]),"text-rotate":new se(tt.layout_symbol["text-rotate"]),"text-padding":new X(tt.layout_symbol["text-padding"]),"text-keep-upright":new X(tt.layout_symbol["text-keep-upright"]),"text-transform":new se(tt.layout_symbol["text-transform"]),"text-offset":new se(tt.layout_symbol["text-offset"]),"text-allow-overlap":new X(tt.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new X(tt.layout_symbol["text-ignore-placement"]),"text-optional":new X(tt.layout_symbol["text-optional"])});var ox={paint:new be({"icon-opacity":new se(tt.paint_symbol["icon-opacity"]),"icon-color":new se(tt.paint_symbol["icon-color"]),"icon-halo-color":new se(tt.paint_symbol["icon-halo-color"]),"icon-halo-width":new se(tt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new se(tt.paint_symbol["icon-halo-blur"]),"icon-translate":new X(tt.paint_symbol["icon-translate"]),"icon-translate-anchor":new X(tt.paint_symbol["icon-translate-anchor"]),"text-opacity":new se(tt.paint_symbol["text-opacity"]),"text-color":new se(tt.paint_symbol["text-color"],{runtimeType:Qr,getOverride:i=>i.textColor,hasOverride:i=>!!i.textColor}),"text-halo-color":new se(tt.paint_symbol["text-halo-color"]),"text-halo-width":new se(tt.paint_symbol["text-halo-width"]),"text-halo-blur":new se(tt.paint_symbol["text-halo-blur"]),"text-translate":new X(tt.paint_symbol["text-translate"]),"text-translate-anchor":new X(tt.paint_symbol["text-translate-anchor"])}),layout:O3};class h2{constructor(n){this.type=n.property.overrides?n.property.overrides.runtimeType:Gr,this.defaultValue=n}evaluate(n){if(n.formattedSection){const o=this.defaultValue.property.overrides;if(o&&o.hasOverride(n.formattedSection))return o.getOverride(n.formattedSection)}return n.feature&&n.featureState?this.defaultValue.evaluate(n.feature,n.featureState):this.defaultValue.property.specification.default}eachChild(n){this.defaultValue.isConstant()||n(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Jt(h2,"FormatSectionOverride",{omit:["defaultValue"]});class qg extends Za{constructor(n){super(n,ox)}recalculate(n,o){super.recalculate(n,o),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const u=this.layout.get("text-writing-mode");if(u){const h=[];for(const m of u)h.indexOf(m)<0&&h.push(m);this.layout._values["text-writing-mode"]=h}else this.layout._values["text-writing-mode"]=this.layout.get("symbol-placement")==="point"?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(n,o,u,h){const m=this.layout.get(n).evaluate(o,{},u,h),v=this._unevaluatedLayout._values[n];return v.isDataDriven()||Ol(v.value)||!m?m:function(x,S){return S.replace(/{([^{}]+)}/g,(E,R)=>R in x?String(x[R]):"")}(o.properties,m)}createBucket(n){return new Hl(n)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const n of ox.paint.overridableProperties){if(!qg.hasPaintOverride(this.layout,n))continue;const o=this.paint.get(n),u=new h2(o),h=new Zu(u,o.property.specification);let m=null;m=o.value.kind==="constant"||o.value.kind==="source"?new rf("source",h):new Dc("composite",h,o.value.zoomStops,o.value._interpolationType),this.paint._values[n]=new ce(o.property,m,o.parameters)}}_handleOverridablePaintPropertyUpdate(n,o,u){return!(!this.layout||o.isDataDriven()||u.isDataDriven())&&qg.hasPaintOverride(this.layout,n)}static hasPaintOverride(n,o){const u=n.get("text-field"),h=ox.paint.properties[o];let m=!1;const v=x=>{for(const S of x)if(h.overrides&&h.overrides.hasOverride(S))return void(m=!0)};if(u.value.kind==="constant"&&u.value.value instanceof Yn)v(u.value.value.sections);else if(u.value.kind==="source"){const x=E=>{m||(E instanceof js&&zr(E.value)===Ao?v(E.value.sections):E instanceof bs?v(E.sections):E.eachChild(x))},S=u.value;S._styleExpression&&x(S._styleExpression.expression)}return m}getProgramConfiguration(n){return new Bl(this,n)}}var z3={paint:new be({"background-color":new X(tt.paint_background["background-color"]),"background-pattern":new X(tt.paint_background["background-pattern"]),"background-opacity":new X(tt.paint_background["background-opacity"])})},D3={paint:new be({"raster-opacity":new X(tt.paint_raster["raster-opacity"]),"raster-hue-rotate":new X(tt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new X(tt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new X(tt.paint_raster["raster-brightness-max"]),"raster-saturation":new X(tt.paint_raster["raster-saturation"]),"raster-contrast":new X(tt.paint_raster["raster-contrast"]),"raster-resampling":new X(tt.paint_raster["raster-resampling"]),"raster-fade-duration":new X(tt.paint_raster["raster-fade-duration"])})};class L3 extends Za{constructor(n){super(n,{}),this.implementation=n}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}isLayerDraped(){return this.implementation.renderToTile!==void 0}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(n){this.implementation.onAdd&&this.implementation.onAdd(n,n.painter.context.gl)}onRemove(n){this.implementation.onRemove&&this.implementation.onRemove(n,n.painter.context.gl)}}var k3={paint:new be({"sky-type":new X(tt.paint_sky["sky-type"]),"sky-atmosphere-sun":new X(tt.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new X(tt.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new X(tt.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new X(tt.paint_sky["sky-gradient-radius"]),"sky-gradient":new xe(tt.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new X(tt.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new X(tt.paint_sky["sky-atmosphere-color"]),"sky-opacity":new X(tt.paint_sky["sky-opacity"])})};function ax(i,n,o){const u=[0,0,1],h=RE([]);return zE(h,h,o?-oe(i)+Math.PI:oe(i)),OE(h,h,-oe(n)),IE(u,u,h),ao(u,u)}const $3={circle:class extends Za{constructor(i){super(i,ZL)}createBucket(i){return new O_(i)}queryRadius(i){const n=i;return ud("circle-radius",this,n)+ud("circle-stroke-width",this,n)+Sg(this.paint.get("circle-translate"))}queryIntersectsFeature(i,n,o,u,h,m,v,x){const S=tC(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),m.angle,i.pixelToTileUnitsFactor),E=this.paint.get("circle-radius").evaluate(n,o)+this.paint.get("circle-stroke-width").evaluate(n,o);return nC(i,u,m,v,x,this.paint.get("circle-pitch-alignment")==="map",this.paint.get("circle-pitch-scale")==="map",S,E)}getProgramIds(){return["circle"]}getProgramConfiguration(i){return new Bl(this,i)}},heatmap:class extends Za{createBucket(i){return new iC(i)}constructor(i){super(i,JL),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(i){i==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=k_({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(i){return ud("heatmap-radius",this,i)}queryIntersectsFeature(i,n,o,u,h,m,v,x){const S=this.paint.get("heatmap-radius").evaluate(n,o);return nC(i,u,m,v,x,!0,!0,new ee(0,0),S)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(i){return new Bl(this,i)}},hillshade:class extends Za{constructor(i){super(i,QL)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}getProgramIds(){return["hillshade","hillshadePrepare"]}},fill:class extends Za{constructor(i){super(i,mk)}getProgramIds(){const i=this.paint.get("fill-pattern"),n=i&&i.constantOr(1),o=[n?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&o.push(n&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),o}getProgramConfiguration(i){return new Bl(this,i)}recalculate(i,n){super.recalculate(i,n);const o=this.paint._values["fill-outline-color"];o.value.kind==="constant"&&o.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(i){return new Mg(i)}queryRadius(){return Sg(this.paint.get("fill-translate"))}queryIntersectsFeature(i,n,o,u,h,m){return!i.queryGeometry.isAboveHorizon&&KE(eC(i.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),m.angle,i.pixelToTileUnitsFactor),u)}isTileClipped(){return!0}},"fill-extrusion":class extends Za{constructor(i){super(i,Rk)}createBucket(i){return new Bf(i)}queryRadius(){return Sg(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(i){return new Bl(this,i)}queryIntersectsFeature(i,n,o,u,h,m,v,x,S){const E=tC(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),m.angle,i.pixelToTileUnitsFactor),R=this.paint.get("fill-extrusion-height").evaluate(n,o),z=this.paint.get("fill-extrusion-base").evaluate(n,o),L=[0,0],V=x&&m.elevation,G=m.elevation?m.elevation.exaggeration():1,K=i.tile.getBucket(this);if(V&&K instanceof Bf){const Ee=K.centroidVertexArray,Ae=S+1;Ae<Ee.length&&(L[0]=Ee.geta_centroid_pos0(Ae),L[1]=Ee.geta_centroid_pos1(Ae))}if(L[0]===0&&L[1]===1)return!1;m.projection.name==="globe"&&(u=wC([u],[new ee(0,0),new ee(mn,mn)],i.tileID.canonical).map(Ee=>Ee.polygon).flat());const ae=V?x:null,[ge,Ce]=function(Ee,Ae,Pe,Ye,qe,ot,St,et,ht,ft,vt){return Ee.projection.name==="globe"?function(Dt,rt,Gt,en,Wt,Dn,Lt,fn,Ln,nr,kn){const wn=[],Or=[],Fn=Dt.projection.upVectorScale(kn,Dt.center.lat,Dt.worldSize).metersToTile,Bn=[0,0,0,1],wr=[0,0,0,1],Mr=(Sr,qr,ei,ci)=>{Sr[0]=qr,Sr[1]=ei,Sr[2]=ci,Sr[3]=1},Pr=bC();Gt>0&&(Gt+=Pr),en+=Pr;for(const Sr of rt){const qr=[],ei=[];for(const ci of Sr){const Er=ci.x+Wt.x,gi=ci.y+Wt.y,ui=Dt.projection.projectTilePoint(Er,gi,kn),Yr=Dt.projection.upVector(kn,ci.x,ci.y);let ir=Gt,di=en;if(Lt){const Ar=TC(Er,gi,Gt,en,Lt,fn,Ln,nr);ir+=Ar.base,di+=Ar.top}Gt!==0?Mr(Bn,ui.x+Yr[0]*Fn*ir,ui.y+Yr[1]*Fn*ir,ui.z+Yr[2]*Fn*ir):Mr(Bn,ui.x,ui.y,ui.z),Mr(wr,ui.x+Yr[0]*Fn*di,ui.y+Yr[1]*Fn*di,ui.z+Yr[2]*Fn*di),ii(Bn,Bn,Dn),ii(wr,wr,Dn),qr.push(new fd(Bn[0],Bn[1],Bn[2])),ei.push(new fd(wr[0],wr[1],wr[2]))}wn.push(qr),Or.push(ei)}return[wn,Or]}(Ee,Ae,Pe,Ye,qe,ot,St,et,ht,ft,vt):St?function(Dt,rt,Gt,en,Wt,Dn,Lt,fn,Ln){const nr=[],kn=[],wn=[0,0,0,1];for(const Or of Dt){const Fn=[],Bn=[];for(const wr of Or){const Mr=wr.x+en.x,Pr=wr.y+en.y,Sr=TC(Mr,Pr,rt,Gt,Dn,Lt,fn,Ln);wn[0]=Mr,wn[1]=Pr,wn[2]=Sr.base,wn[3]=1,Wc(wn,wn,Wt),wn[3]=Math.max(wn[3],1e-5);const qr=new fd(wn[0]/wn[3],wn[1]/wn[3],wn[2]/wn[3]);wn[0]=Mr,wn[1]=Pr,wn[2]=Sr.top,wn[3]=1,Wc(wn,wn,Wt),wn[3]=Math.max(wn[3],1e-5);const ei=new fd(wn[0]/wn[3],wn[1]/wn[3],wn[2]/wn[3]);Fn.push(qr),Bn.push(ei)}nr.push(Fn),kn.push(Bn)}return[nr,kn]}(Ae,Pe,Ye,qe,ot,St,et,ht,ft):function(Dt,rt,Gt,en,Wt){const Dn=[],Lt=[],fn=Wt[8]*rt,Ln=Wt[9]*rt,nr=Wt[10]*rt,kn=Wt[11]*rt,wn=Wt[8]*Gt,Or=Wt[9]*Gt,Fn=Wt[10]*Gt,Bn=Wt[11]*Gt;for(const wr of Dt){const Mr=[],Pr=[];for(const Sr of wr){const qr=Sr.x+en.x,ei=Sr.y+en.y,ci=Wt[0]*qr+Wt[4]*ei+Wt[12],Er=Wt[1]*qr+Wt[5]*ei+Wt[13],gi=Wt[2]*qr+Wt[6]*ei+Wt[14],ui=Wt[3]*qr+Wt[7]*ei+Wt[15],Yr=ci+fn,ir=Er+Ln,di=gi+nr,Ar=Math.max(ui+kn,1e-5),co=ci+wn,hi=Er+Or,Li=gi+Fn,Ii=Math.max(ui+Bn,1e-5);Mr.push(new fd(Yr/Ar,ir/Ar,di/Ar)),Pr.push(new fd(co/Ii,hi/Ii,Li/Ii))}Dn.push(Mr),Lt.push(Pr)}return[Dn,Lt]}(Ae,Pe,Ye,qe,ot)}(m,u,z,R,E,v,ae,L,G,m.center.lat,i.tileID.canonical),ye=i.queryGeometry;return function(Ee,Ae,Pe){let Ye=1/0;KE(Pe,Ae)&&(Ye=CC(Pe,Ae[0]));for(let qe=0;qe<Ae.length;qe++){const ot=Ae[qe],St=Ee[qe];for(let et=0;et<ot.length-1;et++){const ht=ot[et],ft=[ht,ot[et+1],St[et+1],St[et],ht];XE(Pe,ft)&&(Ye=Math.min(Ye,CC(Pe,ft)))}}return Ye!==1/0&&Ye}(ge,Ce,ye.isPointQuery()?ye.screenBounds:ye.screenGeometry)}},line:class extends Za{constructor(i){super(i,IC),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(i){if(i==="line-gradient"){const n=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=n._styleExpression&&n._styleExpression.expression instanceof Hh,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(i,n){super.recalculate(i,n),this.paint._values["line-floorwidth"]=MC.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,i)}createBucket(i){return new zg(i)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration(i){return new Bl(this,i)}queryRadius(i){const n=i,o=PC(ud("line-width",this,n),ud("line-gap-width",this,n)),u=ud("line-offset",this,n);return o/2+Math.abs(u)+Sg(this.paint.get("line-translate"))}queryIntersectsFeature(i,n,o,u,h,m){if(i.queryGeometry.isAboveHorizon)return!1;const v=eC(i.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),m.angle,i.pixelToTileUnitsFactor),x=i.pixelToTileUnitsFactor/2*PC(this.paint.get("line-width").evaluate(n,o),this.paint.get("line-gap-width").evaluate(n,o)),S=this.paint.get("line-offset").evaluate(n,o);return S&&(u=function(E,R){const z=[],L=new ee(0,0);for(let V=0;V<E.length;V++){const G=E[V],K=[];for(let ae=0;ae<G.length;ae++){const ge=G[ae],Ce=G[ae+1],ye=ae===0?L:ge.sub(G[ae-1])._unit()._perp(),Ee=ae===G.length-1?L:Ce.sub(ge)._unit()._perp(),Ae=ye._add(Ee)._unit();Ae._mult(1/(Ae.x*Ee.x+Ae.y*Ee.y)),K.push(Ae._mult(R)._add(ge))}z.push(K)}return z}(u,S*i.pixelToTileUnitsFactor)),function(E,R,z){for(let L=0;L<R.length;L++){const V=R[L];if(E.length>=3){for(let G=0;G<V.length;G++)if(Kc(E,V[G]))return!0}if(HL(E,V,z))return!0}return!1}(v,u,x)}isTileClipped(){return!0}},symbol:qg,background:class extends Za{constructor(i){super(i,z3)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends Za{constructor(i){super(i,D3)}getProgramIds(){return["raster"]}},sky:class extends Za{constructor(i){super(i,k3),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(i){i==="sky-gradient"?this._updateColorRamp():i!=="sky-atmosphere-sun"&&i!=="sky-atmosphere-halo-color"&&i!=="sky-atmosphere-color"&&i!=="sky-atmosphere-sun-intensity"||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=k_({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(i){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const n=i.style.light.properties.get("position");return this._lightPosition.azimuthal!==n.azimuthal||this._lightPosition.polar!==n.polar}return!1}getCenter(i,n){if(this.paint.get("sky-type")==="atmosphere"){const u=this.paint.get("sky-atmosphere-sun"),h=!u,m=i.style.light,v=m.properties.get("position");return h&&m.properties.get("anchor")==="viewport"&&zt("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),h?ax(v.azimuthal,90-v.polar,n):ax(u[0],90-u[1],n)}const o=this.paint.get("sky-gradient-center");return ax(o[0],90-o[1],n)}is3D(){return!1}isSky(){return!0}markSkyboxValid(i){this._skyboxInvalidated=!1,this._lightPosition=i.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const i=this.paint.get("sky-type");return i==="atmosphere"?["skyboxCapture","skybox"]:i==="gradient"?["skyboxGradient"]:null}}};class Kf{constructor(n,o,u,h){this.context=n,this.format=u,this.texture=n.gl.createTexture(),this.update(o,h)}update(n,o,u){const{width:h,height:m}=n,{context:v}=this,{gl:x}=v,{HTMLImageElement:S,HTMLCanvasElement:E,HTMLVideoElement:R,ImageData:z,ImageBitmap:L}=w;if(x.bindTexture(x.TEXTURE_2D,this.texture),v.pixelStoreUnpackFlipY.set(!1),v.pixelStoreUnpack.set(1),v.pixelStoreUnpackPremultiplyAlpha.set(this.format===x.RGBA&&(!o||o.premultiply!==!1)),u||this.size&&this.size[0]===h&&this.size[1]===m){const{x:V,y:G}=u||{x:0,y:0};n instanceof S||n instanceof E||n instanceof R||n instanceof z||L&&n instanceof L?x.texSubImage2D(x.TEXTURE_2D,0,V,G,x.RGBA,x.UNSIGNED_BYTE,n):x.texSubImage2D(x.TEXTURE_2D,0,V,G,h,m,x.RGBA,x.UNSIGNED_BYTE,n.data)}else this.size=[h,m],n instanceof S||n instanceof E||n instanceof R||n instanceof z||L&&n instanceof L?x.texImage2D(x.TEXTURE_2D,0,this.format,this.format,x.UNSIGNED_BYTE,n):x.texImage2D(x.TEXTURE_2D,0,this.format,h,m,0,this.format,x.UNSIGNED_BYTE,n.data);this.useMipmap=!!(o&&o.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&x.generateMipmap(x.TEXTURE_2D)}bind(n,o){const{context:u}=this,{gl:h}=u;h.bindTexture(h.TEXTURE_2D,this.texture),n!==this.filter&&(h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,n),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,this.useMipmap?n===h.NEAREST?h.NEAREST_MIPMAP_NEAREST:h.LINEAR_MIPMAP_NEAREST:n),this.filter=n),o!==this.wrap&&(h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,o),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,o),this.wrap=o)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:n}=this.context;n.deleteTexture(this.texture),this.texture=null}}class F3{constructor(n){this._callback=n,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class B3{constructor(){this.tasks={},this.taskQueue=[],ut(["process"],this),this.invoker=new F3(this.process),this.nextId=0}add(n,o){const u=this.nextId++,h=function({type:m,isSymbolTile:v,zoom:x}){return x=x||0,m==="message"?0:m!=="maybePrepare"||v?m!=="parseTile"||v?m==="parseTile"&&v?300-x:m==="maybePrepare"&&v?400-x:500:200-x:100-x}(o);if(h===0){Ut();try{n()}finally{}return{cancel:()=>{}}}return this.tasks[u]={fn:n,metadata:o,priority:h,id:u},this.taskQueue.push(u),this.invoker.trigger(),{cancel:()=>{delete this.tasks[u]}}}process(){Ut();try{if(this.taskQueue=this.taskQueue.filter(u=>!!this.tasks[u]),!this.taskQueue.length)return;const n=this.pick();if(n===null)return;const o=this.tasks[n];if(delete this.tasks[n],this.taskQueue.length&&this.invoker.trigger(),!o)return;o.fn()}finally{}}pick(){let n=null,o=1/0;for(let h=0;h<this.taskQueue.length;h++){const m=this.tasks[this.taskQueue[h]];m.priority<o&&(o=m.priority,n=h)}if(n===null)return null;const u=this.taskQueue[n];return this.taskQueue.splice(n,1),u}remove(){this.invoker.remove()}}class f2{constructor(n){this._stringToNumber={},this._numberToString=[];for(let o=0;o<n.length;o++){const u=n[o];this._stringToNumber[u]=o,this._numberToString[o]=u}}encode(n){return this._stringToNumber[n]}decode(n){return this._numberToString[n]}}const N3=["tile","layer","source","sourceLayer","state"];class p2{constructor(n,o,u,h,m){this.type="Feature",this._vectorTileFeature=n,this._z=o,this._x=u,this._y=h,this.properties=n.properties,this.id=m}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(n){this._geometry=n}toJSON(){const n={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};this.id!==void 0&&(n.id=this.id);for(const o of N3)this[o]!==void 0&&(n[o]=this[o]);return n}}const Ta=32,Ms=33,Gl=new Uint16Array(8184);for(let i=0;i<2046;i++){let n=i+2,o=0,u=0,h=0,m=0,v=0,x=0;for(1&n?h=m=v=Ta:o=u=x=Ta;(n>>=1)>1;){const E=o+h>>1,R=u+m>>1;1&n?(h=o,m=u,o=v,u=x):(o=h,u=m,h=v,m=x),v=E,x=R}const S=4*i;Gl[S+0]=o,Gl[S+1]=u,Gl[S+2]=h,Gl[S+3]=m}const Ps=new Uint16Array(2178),Wl=new Uint8Array(1089),Zg=new Uint16Array(1089);function m2(i){return i===0?-.03125:i===32?.03125:0}var g2=Ue([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const v2={type:2,extent:mn,loadGeometry:()=>[[new ee(0,0),new ee(mn+1,0),new ee(mn+1,mn+1),new ee(0,mn+1),new ee(0,0)]]};class sx{constructor(n,o,u,h,m){this.tileID=n,this.uid=Mt(),this.uses=0,this.tileSize=o,this.tileZoom=u,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=m,this.expiredRequestCount=0,this.state="loading",h&&h.transform&&(this.projection=h.transform.projection)}registerFadeDuration(n){const o=n+this.timeAdded;o<ji.now()||this.fadeEndTime&&o<this.fadeEndTime||(this.fadeEndTime=o)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}get tileTransform(){return this._tileTransform||(this._tileTransform=Jc(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(n,o,u){if(this.unloadVectorData(),this.state="loaded",n){n.featureIndex&&(this.latestFeatureIndex=n.featureIndex,n.rawTileData?(this.latestRawTileData=n.rawTileData,this.latestFeatureIndex.rawTileData=n.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=n.collisionBoxArray,this.buckets=function(h,m){const v={};if(!m)return v;for(const x of h){const S=x.layerIds.map(E=>m.getLayer(E)).filter(Boolean);if(S.length!==0){x.layers=S,x.stateDependentLayerIds&&(x.stateDependentLayers=x.stateDependentLayerIds.map(E=>S.filter(R=>R.id===E)[0]));for(const E of S)v[E.id]=x}}return v}(n.buckets,o.style),this.hasSymbolBuckets=!1;for(const h in this.buckets){const m=this.buckets[h];if(m instanceof Hl){if(this.hasSymbolBuckets=!0,!u)break;m.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const h in this.buckets){const m=this.buckets[h];if(m instanceof Hl&&m.hasRTLText){this.hasRTLText=!0,M.isLoading()||M.isLoaded()||b()!=="deferred"||I();break}}this.queryPadding=0;for(const h in this.buckets){const m=this.buckets[h];this.queryPadding=Math.max(this.queryPadding,o.style.getLayer(h).queryRadius(m))}n.imageAtlas&&(this.imageAtlas=n.imageAtlas),n.glyphAtlasImage&&(this.glyphAtlasImage=n.glyphAtlasImage),n.lineAtlas&&(this.lineAtlas=n.lineAtlas)}else this.collisionBoxArray=new xr}unloadVectorData(){if(this.hasData()){for(const n in this.buckets)this.buckets[n].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(n){return this.buckets[n.id]}upload(n){for(const u in this.buckets){const h=this.buckets[u];h.uploadPending()&&h.upload(n)}const o=n.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Kf(n,this.imageAtlas.image,o.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Kf(n,this.glyphAtlasImage,o.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new Kf(n,this.lineAtlas.image,o.ALPHA),this.lineAtlas.uploaded=!0)}prepare(n){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(n,this.imageAtlasTexture)}queryRenderedFeatures(n,o,u,h,m,v,x,S){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:h,pixelPosMatrix:x,transform:v,params:m,tileTransform:this.tileTransform},n,o,u):{}}querySourceFeatures(n,o){const u=this.latestFeatureIndex;if(!u||!u.rawTileData)return;const h=u.loadVTLayers(),m=o?o.sourceLayer:"",v=h._geojsonTileLayer||h[m];if(!v)return;const x=Ju(o&&o.filter),{z:S,x:E,y:R}=this.tileID.canonical,z={z:S,x:E,y:R};for(let L=0;L<v.length;L++){const V=v.feature(L);if(x.needGeometry){const ae=Xc(V,!0);if(!x.filter(new O(this.tileID.overscaledZ),ae,this.tileID.canonical))continue}else if(!x.filter(new O(this.tileID.overscaledZ),V))continue;const G=u.getId(V,m),K=new p2(V,S,E,R,G);K.tile=z,n.push(K)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(n){const o=this.expirationTime;if(n.cacheControl){const u=at(n.cacheControl);u["max-age"]&&(this.expirationTime=Date.now()+1e3*u["max-age"])}else n.expires&&(this.expirationTime=new Date(n.expires).getTime());if(this.expirationTime){const u=Date.now();let h=!1;if(this.expirationTime>u)h=!1;else if(o)if(this.expirationTime<o)h=!0;else{const m=this.expirationTime-o;m?this.expirationTime=u+Math.max(m,3e4):h=!0}else h=!0;h?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(n,o){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(n).length===0||!o)return;const u=this.latestFeatureIndex.loadVTLayers(),h=o.style.listImages();for(const m in this.buckets){if(!o.style.hasLayer(m))continue;const v=this.buckets[m],x=v.layers[0].sourceLayer||"_geojsonTileLayer",S=u[x],E=n[x];if(!S||!E||Object.keys(E).length===0)continue;if(v.update(E,S,h,this.imageAtlas&&this.imageAtlas.patternPositions||{}),v instanceof zg||v instanceof Mg){const z=o.style._getSourceCache(v.layers[0].source);o._terrain&&o._terrain.enabled&&z&&v.programConfigurations.needsUpload&&o._terrain._clearRenderCacheForTile(z.id,this.tileID)}const R=o&&o.style&&o.style.getLayer(m);R&&(this.queryPadding=Math.max(this.queryPadding,R.queryRadius(v)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<ji.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(n){this.symbolFadeHoldUntil=ji.now()+n}setTexture(n,o){const u=o.context,h=u.gl;this.texture=this.texture||o.getTileTexture(n.width),this.texture?this.texture.update(n,{useMipmap:!0}):(this.texture=new Kf(u,n,h.RGBA,{useMipmap:!0}),this.texture.bind(h.LINEAR,h.CLAMP_TO_EDGE))}setDependencies(n,o){const u={};for(const h of o)u[h]=!0;this.dependencies[n]=u}hasDependency(n,o){for(const u of n){const h=this.dependencies[u];if(h){for(const m of o)if(h[m])return!0}}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(n,o){if(!o||o.name==="mercator"||this._tileDebugBuffer)return;const u=Qs(v2,this.tileID.canonical,this.tileTransform)[0],h=new wt,m=new Lo;for(let v=0;v<u.length;v++){const{x,y:S}=u[v];h.emplaceBack(x,S),m.emplaceBack(v)}m.emplaceBack(0),this._tileDebugIndexBuffer=n.createIndexBuffer(m),this._tileDebugBuffer=n.createVertexBuffer(h,Mf.members),this._tileDebugSegments=si.simpleSegment(0,0,h.length,m.length)}_makeTileBoundsBuffers(n,o){if(this._tileBoundsBuffer||!o||o.name==="mercator")return;const u=Qs(v2,this.tileID.canonical,this.tileTransform)[0];let h,m;if(this.isRaster){const v=function(x,S){const E=Jc(x,S),R=Math.pow(2,x.z);for(let ae=0;ae<Ms;ae++)for(let ge=0;ge<Ms;ge++){const Ce=Yo((x.x+(ge+m2(ge))/Ta)/R),ye=Gi((x.y+(ae+m2(ae))/Ta)/R),Ee=S.project(Ce,ye),Ae=ae*Ms+ge;Ps[2*Ae+0]=Math.round((Ee.x*E.scale-E.x)*mn),Ps[2*Ae+1]=Math.round((Ee.y*E.scale-E.y)*mn)}Wl.fill(0),Zg.fill(0);for(let ae=2045;ae>=0;ae--){const ge=4*ae,Ce=Gl[ge+0],ye=Gl[ge+1],Ee=Gl[ge+2],Ae=Gl[ge+3],Pe=Ce+Ee>>1,Ye=ye+Ae>>1,qe=Pe+Ye-ye,ot=Ye+Ce-Pe,St=ye*Ms+Ce,et=Ae*Ms+Ee,ht=Ye*Ms+Pe,ft=Math.hypot((Ps[2*St+0]+Ps[2*et+0])/2-Ps[2*ht+0],(Ps[2*St+1]+Ps[2*et+1])/2-Ps[2*ht+1])>=16;Wl[ht]=Wl[ht]||(ft?1:0),ae<1022&&(Wl[ht]=Wl[ht]||Wl[(ye+ot>>1)*Ms+(Ce+qe>>1)]||Wl[(Ae+ot>>1)*Ms+(Ee+qe>>1)])}const z=new ct,L=new cn;let V=0;function G(ae,ge){const Ce=ge*Ms+ae;return Zg[Ce]===0&&(z.emplaceBack(Ps[2*Ce+0],Ps[2*Ce+1],ae*mn/Ta,ge*mn/Ta),Zg[Ce]=++V),Zg[Ce]-1}function K(ae,ge,Ce,ye,Ee,Ae){const Pe=ae+Ce>>1,Ye=ge+ye>>1;if(Math.abs(ae-Ee)+Math.abs(ge-Ae)>1&&Wl[Ye*Ms+Pe])K(Ee,Ae,ae,ge,Pe,Ye),K(Ce,ye,Ee,Ae,Pe,Ye);else{const qe=G(ae,ge),ot=G(Ce,ye),St=G(Ee,Ae);L.emplaceBack(qe,ot,St)}}return K(0,0,Ta,Ta,Ta,0),K(Ta,Ta,0,0,0,Ta),{vertices:z,indices:L}}(this.tileID.canonical,o);h=v.vertices,m=v.indices}else{h=new ct,m=new cn;for(const{x,y:S}of u)h.emplaceBack(x,S,0,0);const v=j_(h.int16,void 0,4);for(let x=0;x<v.length;x+=3)m.emplaceBack(v[x],v[x+1],v[x+2])}this._tileBoundsBuffer=n.createVertexBuffer(h,g2.members),this._tileBoundsIndexBuffer=n.createIndexBuffer(m),this._tileBoundsSegments=si.simpleSegment(0,0,h.length,m.length)}_makeGlobeTileDebugBuffers(n,o){const u=o.projection;if(!u||u.name!=="globe"||o.freezeTileCoverage)return;const h=this.tileID.canonical,m=Rf(FE(h,o)),v=ld(o.zoom);let x;v>0&&(x=m_(new Float64Array(16),o.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(n,h,o,m,x,v),this._makeGlobeTileDebugTextBuffer(n,h,o,m,x,v)}_globePoint(n,o,u,h,m,v,x){let S=Af(n,o,u);if(v){const E=1<<u.z,R=Ts(h.center.lng),z=Is(h.center.lat),L=(u.x+.5)/E-R;let V=0;L>.5?V=-1:L<-.5&&(V=1);let G=(n/mn+u.x)/E+V,K=(o/mn+u.y)/E;G=(G-R)*h._pixelsPerMercatorPixel+R,K=(K-z)*h._pixelsPerMercatorPixel+z;const ae=[G*h.worldSize,K*h.worldSize,0];ii(ae,ae,v),S=Zc(S,ae,x)}return ii(S,S,m)}_makeGlobeTileDebugBorderBuffer(n,o,u,h,m,v){const x=new wt,S=new Lo,E=new We,R=(L,V,G,K,ae)=>{const ge=(G-L)/(ae-1),Ce=(K-V)/(ae-1),ye=x.length;for(let Ee=0;Ee<ae;Ee++){const Ae=L+Ee*ge,Pe=V+Ee*Ce;x.emplaceBack(Ae,Pe);const Ye=this._globePoint(Ae,Pe,o,u,h,m,v);E.emplaceBack(Ye[0],Ye[1],Ye[2]),S.emplaceBack(ye+Ee)}},z=mn;R(0,0,z,0,16),R(z,0,z,z,16),R(z,z,0,z,16),R(0,z,0,0,16),this._tileDebugIndexBuffer=n.createIndexBuffer(S),this._tileDebugBuffer=n.createVertexBuffer(x,Mf.members),this._globeTileDebugBorderBuffer=n.createVertexBuffer(E,LE.members),this._tileDebugSegments=si.simpleSegment(0,0,x.length,S.length)}_makeGlobeTileDebugTextBuffer(n,o,u,h,m,v){const x=mn/4,S=new wt,E=new cn,R=new We,z=25;E.reserve(32),S.reserve(z),R.reserve(z);const L=(V,G)=>z*V+G;for(let V=0;V<z;V++){const G=V*x;for(let K=0;K<z;K++){const ae=K*x;S.emplaceBack(ae,G);const ge=this._globePoint(ae,G,o,u,h,m,v);R.emplaceBack(ge[0],ge[1],ge[2])}}for(let V=0;V<4;V++)for(let G=0;G<4;G++){const K=L(V,G),ae=L(V,G+1),ge=L(V+1,G),Ce=L(V+1,G+1);E.emplaceBack(K,ae,ge),E.emplaceBack(ge,ae,Ce)}this._tileDebugTextIndexBuffer=n.createIndexBuffer(E),this._tileDebugTextBuffer=n.createVertexBuffer(S,Mf.members),this._globeTileDebugTextBuffer=n.createVertexBuffer(R,LE.members),this._tileDebugTextSegments=si.simpleSegment(0,0,z,32)}}class j3{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(n,o,u){const h=String(o);if(this.stateChanges[n]=this.stateChanges[n]||{},this.stateChanges[n][h]=this.stateChanges[n][h]||{},yt(this.stateChanges[n][h],u),this.deletedStates[n]===null){this.deletedStates[n]={};for(const m in this.state[n])m!==h&&(this.deletedStates[n][m]=null)}else if(this.deletedStates[n]&&this.deletedStates[n][h]===null){this.deletedStates[n][h]={};for(const m in this.state[n][h])u[m]||(this.deletedStates[n][h][m]=null)}else for(const m in u)this.deletedStates[n]&&this.deletedStates[n][h]&&this.deletedStates[n][h][m]===null&&delete this.deletedStates[n][h][m]}removeFeatureState(n,o,u){if(this.deletedStates[n]===null)return;const h=String(o);if(this.deletedStates[n]=this.deletedStates[n]||{},u&&o!==void 0)this.deletedStates[n][h]!==null&&(this.deletedStates[n][h]=this.deletedStates[n][h]||{},this.deletedStates[n][h][u]=null);else if(o!==void 0)if(this.stateChanges[n]&&this.stateChanges[n][h])for(u in this.deletedStates[n][h]={},this.stateChanges[n][h])this.deletedStates[n][h][u]=null;else this.deletedStates[n][h]=null;else this.deletedStates[n]=null}getState(n,o){const u=String(o),h=yt({},(this.state[n]||{})[u],(this.stateChanges[n]||{})[u]);if(this.deletedStates[n]===null)return{};if(this.deletedStates[n]){const m=this.deletedStates[n][o];if(m===null)return{};for(const v in m)delete h[v]}return h}initializeTileState(n,o){n.setFeatureState(this.state,o)}coalesceChanges(n,o){const u={};for(const h in this.stateChanges){this.state[h]=this.state[h]||{};const m={};for(const v in this.stateChanges[h])this.state[h][v]||(this.state[h][v]={}),yt(this.state[h][v],this.stateChanges[h][v]),m[v]=this.state[h][v];u[h]=m}for(const h in this.deletedStates){this.state[h]=this.state[h]||{};const m={};if(this.deletedStates[h]===null)for(const v in this.state[h])m[v]={},this.state[h][v]={};else for(const v in this.deletedStates[h]){if(this.deletedStates[h][v]===null)this.state[h][v]={};else if(this.state[h][v])for(const x of Object.keys(this.deletedStates[h][v]))delete this.state[h][v][x];m[v]=this.state[h][v]}u[h]=u[h]||{},yt(u[h],m)}if(this.stateChanges={},this.deletedStates={},Object.keys(u).length!==0)for(const h in n)n[h].setFeatureState(u,o)}}class y2{constructor(n){this.size=n,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(n,o){const u=this.toIdx(n,o);return{min:this.minimums[u],max:this.maximums[u]}}isLeaf(n,o){return this.leaves[this.toIdx(n,o)]}toIdx(n,o){return o*this.size+n}}function _2(i,n,o,u){let h=0,m=Number.MAX_VALUE;for(let v=0;v<3;v++)if(Math.abs(u[v])<1e-15){if(o[v]<i[v]||o[v]>n[v])return null}else{const x=1/u[v];let S=(i[v]-o[v])*x,E=(n[v]-o[v])*x;if(S>E){const R=S;S=E,E=R}if(S>h&&(h=S),E<m&&(m=E),h>m)return null}return h}function x2(i,n,o,u,h,m,v,x,S,E,R){const z=u-i,L=h-n,V=m-o,G=v-i,K=x-n,ae=S-o,ge=R[1]*ae-R[2]*K,Ce=R[2]*G-R[0]*ae,ye=R[0]*K-R[1]*G,Ee=z*ge+L*Ce+V*ye;if(Math.abs(Ee)<1e-15)return null;const Ae=1/Ee,Pe=E[0]-i,Ye=E[1]-n,qe=E[2]-o,ot=(Pe*ge+Ye*Ce+qe*ye)*Ae;if(ot<0||ot>1)return null;const St=Ye*V-qe*L,et=qe*z-Pe*V,ht=Pe*L-Ye*z,ft=(R[0]*St+R[1]*et+R[2]*ht)*Ae;return ft<0||ot+ft>1?null:(G*St+K*et+ae*ht)*Ae}function b2(i,n,o){return(i-n)/(o-n)}function w2(i,n,o,u,h,m,v,x,S){const E=1<<o,R=m-u,z=v-h,L=(i+1)/E*R+u,V=(n+0)/E*z+h,G=(n+1)/E*z+h;x[0]=(i+0)/E*R+u,x[1]=V,S[0]=L,S[1]=G}class S2{constructor(n){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=n,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const o=function(m){const v=Math.ceil(Math.log2(m.dim/8)),x=[];let S=Math.ceil(Math.pow(2,v));const E=1/S,R=(V,G,K,ae,ge)=>{const Ce=ae?1:0,ye=(V+1)*K-Ce,Ee=G*K,Ae=(G+1)*K-Ce;ge[0]=V*K,ge[1]=Ee,ge[2]=ye,ge[3]=Ae};let z=new y2(S);const L=[];for(let V=0;V<S*S;V++){R(V%S,Math.floor(V/S),E,!1,L);const G=ql(L[0],L[1],m),K=ql(L[2],L[1],m),ae=ql(L[2],L[3],m),ge=ql(L[0],L[3],m);z.minimums.push(Math.min(G,K,ae,ge)),z.maximums.push(Math.max(G,K,ae,ge)),z.leaves.push(1)}for(x.push(z),S/=2;S>=1;S/=2){const V=x[x.length-1];z=new y2(S);for(let G=0;G<S*S;G++){R(G%S,Math.floor(G/S),2,!0,L);const K=V.getElevation(L[0],L[1]),ae=V.getElevation(L[2],L[1]),ge=V.getElevation(L[2],L[3]),Ce=V.getElevation(L[0],L[3]),ye=V.isLeaf(L[0],L[1]),Ee=V.isLeaf(L[2],L[1]),Ae=V.isLeaf(L[2],L[3]),Pe=V.isLeaf(L[0],L[3]),Ye=Math.min(K.min,ae.min,ge.min,Ce.min),qe=Math.max(K.max,ae.max,ge.max,Ce.max),ot=ye&&Ee&&Ae&&Pe;z.maximums.push(qe),z.minimums.push(Ye),z.leaves.push(qe-Ye<=5&&ot?1:0)}x.push(z)}return x}(this.dem),u=o.length-1,h=o[u];this._addNode(h.minimums[0],h.maximums[0],h.leaves[0]),this._construct(o,0,0,u,0)}raycastRoot(n,o,u,h,m,v,x=1){return _2([n,o,-100],[u,h,this.maximums[0]*x],m,v)}raycast(n,o,u,h,m,v,x=1){if(!this.nodeCount)return null;const S=this.raycastRoot(n,o,u,h,m,v,x);if(S==null)return null;const E=[],R=[],z=[],L=[],V=[{idx:0,t:S,nodex:0,nodey:0,depth:0}];for(;V.length>0;){const{idx:G,t:K,nodex:ae,nodey:ge,depth:Ce}=V.pop();if(this.leaves[G]){w2(ae,ge,Ce,n,o,u,h,z,L);const Ee=1<<Ce,Ae=(ae+0)/Ee,Pe=(ae+1)/Ee,Ye=(ge+0)/Ee,qe=(ge+1)/Ee,ot=ql(Ae,Ye,this.dem)*x,St=ql(Pe,Ye,this.dem)*x,et=ql(Pe,qe,this.dem)*x,ht=ql(Ae,qe,this.dem)*x,ft=x2(z[0],z[1],ot,L[0],z[1],St,L[0],L[1],et,m,v),vt=x2(L[0],L[1],et,z[0],L[1],ht,z[0],z[1],ot,m,v),Dt=Math.min(ft!==null?ft:Number.MAX_VALUE,vt!==null?vt:Number.MAX_VALUE);if(Dt!==Number.MAX_VALUE)return Dt;{const rt=Tf([],m,v,K);if(E2(ot,St,ht,et,b2(rt[0],z[0],L[0]),b2(rt[1],z[1],L[1]))>=rt[2])return K}continue}let ye=0;for(let Ee=0;Ee<this._siblingOffset.length;Ee++){w2((ae<<1)+this._siblingOffset[Ee][0],(ge<<1)+this._siblingOffset[Ee][1],Ce+1,n,o,u,h,z,L),z[2]=-100,L[2]=this.maximums[this.childOffsets[G]+Ee]*x;const Ae=_2(z,L,m,v);if(Ae!=null){const Pe=Ae;E[Ee]=Pe;let Ye=!1;for(let qe=0;qe<ye&&!Ye;qe++)Pe>=E[R[qe]]&&(R.splice(qe,0,Ee),Ye=!0);Ye||(R[ye]=Ee),ye++}}for(let Ee=0;Ee<ye;Ee++){const Ae=R[Ee];V.push({idx:this.childOffsets[G]+Ae,t:E[Ae],nodex:(ae<<1)+this._siblingOffset[Ae][0],nodey:(ge<<1)+this._siblingOffset[Ae][1],depth:Ce+1})}}return null}_addNode(n,o,u){return this.minimums.push(n),this.maximums.push(o),this.leaves.push(u),this.childOffsets.push(0),this.nodeCount++}_construct(n,o,u,h,m){if(n[h].isLeaf(o,u)===1)return;this.childOffsets[m]||(this.childOffsets[m]=this.nodeCount);const v=h-1,x=n[v];let S=0,E=0;for(let R=0;R<this._siblingOffset.length;R++){const z=2*o+this._siblingOffset[R][0],L=2*u+this._siblingOffset[R][1],V=x.getElevation(z,L),G=x.isLeaf(z,L),K=this._addNode(V.min,V.max,G);G&&(S|=1<<R),E||(E=K)}for(let R=0;R<this._siblingOffset.length;R++)S&1<<R||this._construct(n,2*o+this._siblingOffset[R][0],2*u+this._siblingOffset[R][1],v,E+R)}}function E2(i,n,o,u,h,m){return Jn(Jn(i,o,m),Jn(n,u,m),h)}function ql(i,n,o){const u=o.dim,h=pe(i*u-.5,0,u-1),m=pe(n*u-.5,0,u-1),v=Math.floor(h),x=Math.floor(m),S=Math.min(v+1,u-1),E=Math.min(x+1,u-1);return E2(o.get(v,x),o.get(S,x),o.get(v,E),o.get(S,E),h-v,m-x)}const C2={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function U3(i,n,o){return(256*i*256+256*n+o)/10-1e4}function V3(i,n,o){return 256*i+n+o/256-32768}class Xg{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(n,o,u,h=!1,m=!1){if(this.uid=n,o.height!==o.width)throw new RangeError("DEM tiles must be square");if(u&&u!=="mapbox"&&u!=="terrarium")return zt(`"${u}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=o.height;const v=this.dim=o.height-2,x=new Uint32Array(o.data.buffer);if(this.pixels=new Uint8Array(o.data.buffer),this.encoding=u||"mapbox",this.borderReady=h,!h){for(let S=0;S<v;S++)x[this._idx(-1,S)]=x[this._idx(0,S)],x[this._idx(v,S)]=x[this._idx(v-1,S)],x[this._idx(S,-1)]=x[this._idx(S,0)],x[this._idx(S,v)]=x[this._idx(S,v-1)];x[this._idx(-1,-1)]=x[this._idx(0,0)],x[this._idx(v,-1)]=x[this._idx(v-1,0)],x[this._idx(-1,v)]=x[this._idx(0,v-1)],x[this._idx(v,v)]=x[this._idx(v-1,v-1)],m&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new S2(this)}get(n,o,u=!1){u&&(n=pe(n,-1,this.dim),o=pe(o,-1,this.dim));const h=4*this._idx(n,o);return(this.encoding==="terrarium"?V3:U3)(this.pixels[h],this.pixels[h+1],this.pixels[h+2])}static getUnpackVector(n){return C2[n]}get unpackVector(){return C2[this.encoding]}_idx(n,o){if(n<-1||n>=this.dim+1||o<-1||o>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(o+1)*this.stride+(n+1)}static pack(n,o){const u=[0,0,0,0],h=Xg.getUnpackVector(o);let m=Math.floor((n+h[3])/h[2]);return u[2]=m%256,m=Math.floor(m/256),u[1]=m%256,m=Math.floor(m/256),u[0]=m,u}getPixels(){return new $o({width:this.stride,height:this.stride},this.pixels)}backfillBorder(n,o,u){if(this.dim!==n.dim)throw new Error("dem dimension mismatch");let h=o*this.dim,m=o*this.dim+this.dim,v=u*this.dim,x=u*this.dim+this.dim;switch(o){case-1:h=m-1;break;case 1:m=h+1}switch(u){case-1:v=x-1;break;case 1:x=v+1}const S=-o*this.dim,E=-u*this.dim;for(let R=v;R<x;R++)for(let z=h;z<m;z++){const L=4*this._idx(z,R),V=4*this._idx(z+S,R+E);this.pixels[L+0]=n.pixels[V+0],this.pixels[L+1]=n.pixels[V+1],this.pixels[L+2]=n.pixels[V+2],this.pixels[L+3]=n.pixels[V+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}Jt(Xg,"DEMData"),Jt(S2,"DemMinMaxQuadTree",{omit:["dem"]});class H3{constructor(n,o){this.max=n,this.onRemove=o,this.reset()}reset(){for(const n in this.data)for(const o of this.data[n])o.timeout&&clearTimeout(o.timeout),this.onRemove(o.value);return this.data={},this.order=[],this}add(n,o,u){const h=n.wrapped().key;this.data[h]===void 0&&(this.data[h]=[]);const m={value:o,timeout:void 0};if(u!==void 0&&(m.timeout=setTimeout(()=>{this.remove(n,m)},u)),this.data[h].push(m),this.order.push(h),this.order.length>this.max){const v=this._getAndRemoveByKey(this.order[0]);v&&this.onRemove(v)}return this}has(n){return n.wrapped().key in this.data}getAndRemove(n){return this.has(n)?this._getAndRemoveByKey(n.wrapped().key):null}_getAndRemoveByKey(n){const o=this.data[n].shift();return o.timeout&&clearTimeout(o.timeout),this.data[n].length===0&&delete this.data[n],this.order.splice(this.order.indexOf(n),1),o.value}getByKey(n){const o=this.data[n];return o?o[0].value:null}get(n){return this.has(n)?this.data[n.wrapped().key][0].value:null}remove(n,o){if(!this.has(n))return this;const u=n.wrapped().key,h=o===void 0?0:this.data[u].indexOf(o),m=this.data[u][h];return this.data[u].splice(h,1),m.timeout&&clearTimeout(m.timeout),this.data[u].length===0&&delete this.data[u],this.onRemove(m.value),this.order.splice(this.order.indexOf(u),1),this}setMaxSize(n){for(this.max=n;this.order.length>this.max;){const o=this._getAndRemoveByKey(this.order[0]);o&&this.onRemove(o)}return this}filter(n){const o=[];for(const u in this.data)for(const h of this.data[u])n(h.value)||o.push(h);for(const u of o)this.remove(u.value.tileID,u)}}class Sd{constructor(n,o,u){this.func=n,this.mask=o,this.range=u}}Sd.ReadOnly=!1,Sd.ReadWrite=!0,Sd.disabled=new Sd(519,Sd.ReadOnly,[0,1]);const lx=7680;class cx{constructor(n,o,u,h,m,v){this.test=n,this.ref=o,this.mask=u,this.fail=h,this.depthFail=m,this.pass=v}}cx.disabled=new cx({func:519,mask:0},0,0,lx,lx,lx);class As{constructor(n,o,u){this.blendFunction=n,this.blendColor=o,this.mask=u}}As.Replace=[1,0],As.disabled=new As(As.Replace,Nr.transparent,[!1,!1,!1,!1]),As.unblended=new As(As.Replace,Nr.transparent,[!0,!0,!0,!0]),As.alphaBlended=new As([1,771],Nr.transparent,[!0,!0,!0,!0]);const ux=1029,dx=2305;class es{constructor(n,o,u){this.enable=n,this.mode=o,this.frontFace=u}}es.disabled=new es(!1,ux,dx),es.backCCW=new es(!0,ux,dx),es.backCW=new es(!0,ux,2304),es.frontCW=new es(!0,1028,2304),es.frontCCW=new es(!0,1028,dx);class Qc extends Oi{constructor(n,o,u){super(),this.id=n,this._onlySymbols=u,o.on("data",h=>{h.dataType==="source"&&h.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&h.dataType==="source"&&h.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))}),o.on("error",()=>{this._sourceErrored=!0}),this._source=o,this._tiles={},this._cache=new H3(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=o.minTileCacheSize,this._maxTileCacheSize=o.maxTileCacheSize,this._loadedParentTiles={},this._coveredTiles={},this._state=new j3,this._isRaster=this._source.type==="raster"||this._source.type==="raster-dem"||this._source.type==="custom"&&this._source._dataType==="raster"}onAdd(n){this.map=n,this._minTileCacheSize=this._minTileCacheSize===void 0&&n?n._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=this._maxTileCacheSize===void 0&&n?n._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const n in this._tiles){const o=this._tiles[n];if(o.state!=="loaded"&&o.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const n=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,n&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(n,o){return n.isSymbolTile=this._onlySymbols,this._source.loadTile(n,o)}_unloadTile(n){if(this._source.unloadTile)return this._source.unloadTile(n,()=>{})}_abortTile(n){if(this._source.abortTile)return this._source.abortTile(n,()=>{})}serialize(){return this._source.serialize()}prepare(n){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const o in this._tiles){const u=this._tiles[o];u.upload(n),u.prepare(this.map.style.imageManager)}}getIds(){return nt(this._tiles).map(n=>n.tileID).sort(T2).map(n=>n.key)}getRenderableIds(n){const o=[];for(const u in this._tiles)this._isIdRenderable(+u,n)&&o.push(this._tiles[u]);return n?o.sort((u,h)=>{const m=u.tileID,v=h.tileID,x=new ee(m.canonical.x,m.canonical.y)._rotate(this.transform.angle),S=new ee(v.canonical.x,v.canonical.y)._rotate(this.transform.angle);return m.overscaledZ-v.overscaledZ||S.y-x.y||S.x-x.x}).map(u=>u.tileID.key):o.map(u=>u.tileID).sort(T2).map(u=>u.key)}hasRenderableParent(n){const o=this.findLoadedParent(n,0);return!!o&&this._isIdRenderable(o.tileID.key)}_isIdRenderable(n,o){return this._tiles[n]&&this._tiles[n].hasData()&&!this._coveredTiles[n]&&(o||!this._tiles[n].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const n in this._tiles)this._tiles[n].state!=="errored"&&this._reloadTile(+n,"reloading")}}_reloadTile(n,o){const u=this._tiles[n];u&&(u.state!=="loading"&&(u.state=o),this._loadTile(u,this._tileLoaded.bind(this,u,n,o)))}_tileLoaded(n,o,u,h){if(h)if(n.state="errored",h.status!==404)this._source.fire(new _i(h,{tile:n}));else if(this._source.type==="raster-dem"&&this.usedForTerrain&&this.map.painter.terrain){const m=this.map.painter.terrain;this.update(this.transform,m.getScaledDemTileSize(),!0),m.resetTileLookupCache(this.id)}else this.update(this.transform);else n.timeAdded=ji.now(),u==="expired"&&(n.refreshedUponExpiration=!0),this._setTileReloadTimer(o,n),this._source.type==="raster-dem"&&n.dem&&this._backfillDEM(n),this._state.initializeTileState(n,this.map?this.map.painter:null),this._source.fire(new io("data",{dataType:"source",tile:n,coord:n.tileID,sourceCacheId:this.id}))}_backfillDEM(n){const o=this.getRenderableIds();for(let h=0;h<o.length;h++){const m=o[h];if(n.neighboringTiles&&n.neighboringTiles[m]){const v=this.getTileByID(m);u(n,v),u(v,n)}}function u(h,m){if(!h.dem||h.dem.borderReady)return;h.needsHillshadePrepare=!0,h.needsDEMTextureUpload=!0;let v=m.tileID.canonical.x-h.tileID.canonical.x;const x=m.tileID.canonical.y-h.tileID.canonical.y,S=Math.pow(2,h.tileID.canonical.z),E=m.tileID.key;v===0&&x===0||Math.abs(x)>1||(Math.abs(v)>1&&(Math.abs(v+S)===1?v+=S:Math.abs(v-S)===1&&(v-=S)),m.dem&&h.dem&&(h.dem.backfillBorder(m.dem,v,x),h.neighboringTiles&&h.neighboringTiles[E]&&(h.neighboringTiles[E].backfilled=!0)))}}getTile(n){return this.getTileByID(n.key)}getTileByID(n){return this._tiles[n]}_retainLoadedChildren(n,o,u,h){for(const m in this._tiles){let v=this._tiles[m];if(h[m]||!v.hasData()||v.tileID.overscaledZ<=o||v.tileID.overscaledZ>u)continue;let x=v.tileID;for(;v&&v.tileID.overscaledZ>o+1;){const E=v.tileID.scaledTo(v.tileID.overscaledZ-1);v=this._tiles[E.key],v&&v.hasData()&&(x=E)}let S=x;for(;S.overscaledZ>o;)if(S=S.scaledTo(S.overscaledZ-1),n[S.key]){h[x.key]=x;break}}}findLoadedParent(n,o){if(n.key in this._loadedParentTiles){const u=this._loadedParentTiles[n.key];return u&&u.tileID.overscaledZ>=o?u:null}for(let u=n.overscaledZ-1;u>=o;u--){const h=n.scaledTo(u),m=this._getLoadedTile(h);if(m)return m}}_getLoadedTile(n){const o=this._tiles[n.key];return o&&o.hasData()?o:this._cache.getByKey(this._source.reparseOverscaled?n.wrapped().key:n.canonical.key)}updateCacheSize(n,o){o=o||this._source.tileSize;const u=Math.ceil(n.width/o)+1,h=Math.ceil(n.height/o)+1,m=Math.floor(u*h*5),v=typeof this._minTileCacheSize=="number"?Math.max(this._minTileCacheSize,m):m,x=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,v):v;this._cache.setMaxSize(x)}handleWrapJump(n){const o=Math.round((n-(this._prevLng===void 0?n:this._prevLng))/360);if(this._prevLng=n,o){const u={};for(const h in this._tiles){const m=this._tiles[h];m.tileID=m.tileID.unwrapTo(m.tileID.wrap+o),u[m.tileID.key]=m}this._tiles=u;for(const h in this._timers)clearTimeout(this._timers[h]),delete this._timers[h];for(const h in this._tiles)this._setTileReloadTimer(+h,this._tiles[h])}}update(n,o,u){if(this.transform=n,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!u)return;let h;this.updateCacheSize(n,o),this.transform.projection.name!=="globe"&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?h=n.getVisibleUnwrappedCoordinates(this._source.tileID).map(x=>new lo(x.canonical.z,x.wrap,x.canonical.z,x.canonical.x,x.canonical.y)):(h=n.coveringTiles({tileSize:o||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!u,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(h=h.filter(x=>this._source.hasTile(x)))):h=[];const m=this._updateRetainedTiles(h);if(I2(this._source.type)&&h.length!==0){const x={},S={},E=Object.keys(m);for(const z of E){const L=m[z],V=this._tiles[z];if(!V||V.fadeEndTime&&V.fadeEndTime<=ji.now())continue;const G=this.findLoadedParent(L,Math.max(L.overscaledZ-Qc.maxOverzooming,this._source.minzoom));G&&(this._addTile(G.tileID),x[G.tileID.key]=G.tileID),S[z]=L}const R=h[h.length-1].overscaledZ;for(const z in this._tiles){const L=this._tiles[z];if(m[z]||!L.hasData())continue;let V=L.tileID;for(;V.overscaledZ>R;){V=V.scaledTo(V.overscaledZ-1);const G=this._tiles[V.key];if(G&&G.hasData()&&S[V.key]){m[z]=L.tileID;break}}}for(const z in x)m[z]||(this._coveredTiles[z]=!0,m[z]=x[z])}for(const x in m)this._tiles[x].clearFadeHold();const v=function(x,S){const E=[];for(const R in x)R in S||E.push(R);return E}(this._tiles,m);for(const x of v){const S=this._tiles[x];S.hasSymbolBuckets&&!S.holdingForFade()?S.setHoldDuration(this.map._fadeDuration):S.hasSymbolBuckets&&!S.symbolFadeFinished()||this._removeTile(+x)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const n in this._tiles)this._tiles[n].holdingForFade()&&this._removeTile(+n)}_updateRetainedTiles(n){const o={};if(n.length===0)return o;const u={},h=n.reduce((E,R)=>Math.min(E,R.overscaledZ),1/0),m=n[0].overscaledZ,v=Math.max(m-Qc.maxOverzooming,this._source.minzoom),x=Math.max(m+Qc.maxUnderzooming,this._source.minzoom),S={};for(const E of n){const R=this._addTile(E);o[E.key]=E,R.hasData()||h<this._source.maxzoom&&(S[E.key]=E)}this._retainLoadedChildren(S,h,x,o);for(const E of n){let R=this._tiles[E.key];if(R.hasData())continue;if(E.canonical.z>=this._source.maxzoom){const L=E.children(this._source.maxzoom)[0],V=this.getTile(L);if(V&&V.hasData()){o[L.key]=L;continue}}else{const L=E.children(this._source.maxzoom);if(o[L[0].key]&&o[L[1].key]&&o[L[2].key]&&o[L[3].key])continue}let z=R.wasRequested();for(let L=E.overscaledZ-1;L>=v;--L){const V=E.scaledTo(L);if(u[V.key]||(u[V.key]=!0,R=this.getTile(V),!R&&z&&(R=this._addTile(V)),R&&(o[V.key]=V,z=R.wasRequested(),R.hasData())))break}}return o}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const n in this._tiles){const o=[];let u,h=this._tiles[n].tileID;for(;h.overscaledZ>0;){if(h.key in this._loadedParentTiles){u=this._loadedParentTiles[h.key];break}o.push(h.key);const m=h.scaledTo(h.overscaledZ-1);if(u=this._getLoadedTile(m),u)break;h=m}for(const m of o)this._loadedParentTiles[m]=u}}_addTile(n){let o=this._tiles[n.key];if(o)return o;o=this._cache.getAndRemove(n),o&&(this._setTileReloadTimer(n.key,o),o.tileID=n,this._state.initializeTileState(o,this.map?this.map.painter:null),this._cacheTimers[n.key]&&(clearTimeout(this._cacheTimers[n.key]),delete this._cacheTimers[n.key],this._setTileReloadTimer(n.key,o)));const u=!!o;if(!u){const h=this.map?this.map.painter:null;o=new sx(n,this._source.tileSize*n.overscaleFactor(),this.transform.tileZoom,h,this._isRaster),this._loadTile(o,this._tileLoaded.bind(this,o,n.key,o.state))}return o?(o.uses++,this._tiles[n.key]=o,u||this._source.fire(new io("dataloading",{tile:o,coord:o.tileID,dataType:"source"})),o):null}_setTileReloadTimer(n,o){n in this._timers&&(clearTimeout(this._timers[n]),delete this._timers[n]);const u=o.getExpiryTimeout();u&&(this._timers[n]=setTimeout(()=>{this._reloadTile(n,"expired"),delete this._timers[n]},u))}_removeTile(n){const o=this._tiles[n];o&&(o.uses--,delete this._tiles[n],this._timers[n]&&(clearTimeout(this._timers[n]),delete this._timers[n]),o.uses>0||(o.hasData()&&o.state!=="reloading"?this._cache.add(o.tileID,o,o.getExpiryTimeout()):(o.aborted=!0,this._abortTile(o),this._unloadTile(o))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const n in this._tiles)this._removeTile(+n);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(n,o,u){const h=[],m=this.transform;if(!m)return h;const v=m.projection.name==="globe",x=Ts(m.center.lng);for(const S in this._tiles){const E=this._tiles[S];if(u&&E.clearQueryDebugViz(),E.holdingForFade())continue;let R;if(v){const z=E.tileID.canonical;if(z.z===0){const L=[Math.abs(pe(x,...Yf(z,-1))-x),Math.abs(pe(x,...Yf(z,1))-x)];R=[0,2*L.indexOf(Math.min(...L))-1]}else{const L=[Math.abs(pe(x,...Yf(z,-1))-x),Math.abs(pe(x,...Yf(z,0))-x),Math.abs(pe(x,...Yf(z,1))-x)];R=[L.indexOf(Math.min(...L))-1]}}else R=[0];for(const z of R){const L=n.containsTile(E,m,o,z);L&&h.push(L)}}return h}getVisibleCoordinates(n){const o=this.getRenderableIds(n).map(u=>this._tiles[u].tileID);for(const u of o)u.projMatrix=this.transform.calculateProjMatrix(u.toUnwrapped());return o}hasTransition(){if(this._source.hasTransition())return!0;if(I2(this._source.type))for(const n in this._tiles){const o=this._tiles[n];if(o.fadeEndTime!==void 0&&o.fadeEndTime>=ji.now())return!0}return!1}setFeatureState(n,o,u){this._state.updateState(n=n||"_geojsonTileLayer",o,u)}removeFeatureState(n,o,u){this._state.removeFeatureState(n=n||"_geojsonTileLayer",o,u)}getFeatureState(n,o){return this._state.getState(n=n||"_geojsonTileLayer",o)}setDependencies(n,o,u){const h=this._tiles[n];h&&h.setDependencies(o,u)}reloadTilesForDependencies(n,o){for(const u in this._tiles)this._tiles[u].hasDependency(n,o)&&this._reloadTile(+u,"reloading");this._cache.filter(u=>!u.hasDependency(n,o))}_preloadTiles(n,o){if(!this._sourceLoaded){const x=()=>{this._sourceLoaded&&(this._source.off("data",x),this._preloadTiles(n,o))};return void this._source.on("data",x)}const u=new Map,h=Array.isArray(n)?n:[n],m=this.map.painter.terrain,v=this.usedForTerrain&&m?m.getScaledDemTileSize():this._source.tileSize;for(const x of h){const S=x.coveringTiles({tileSize:v,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const E of S)u.set(E.key,E);this.usedForTerrain&&x.updateElevation(!1)}Ze(Array.from(u.values()),(x,S)=>{const E=new sx(x,this._source.tileSize*x.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(E,R=>{this._source.type==="raster-dem"&&E.dem&&this._backfillDEM(E),S(R,E)})},o)}}function T2(i,n){const o=Math.abs(2*i.wrap)-+(i.wrap<0),u=Math.abs(2*n.wrap)-+(n.wrap<0);return i.overscaledZ-n.overscaledZ||u-o||n.canonical.y-i.canonical.y||n.canonical.x-i.canonical.x}function I2(i){return i==="raster"||i==="image"||i==="video"||i==="custom"}function Yf(i,n){const o=1<<i.z;return[i.x/o+n,(i.x+1)/o+n]}Qc.maxOverzooming=10,Qc.maxUnderzooming=3;class Kg{constructor(n,o,u){this._demTile=n,this._dem=this._demTile.dem,this._scale=o,this._offset=u}static create(n,o,u){const h=u||n.findDEMTileFor(o);if(!h||!h.dem)return;const m=h.dem,v=h.tileID,x=1<<o.canonical.z-v.canonical.z;return new Kg(h,h.tileSize/mn/x,[(o.canonical.x/x-v.canonical.x)*m.dim,(o.canonical.y/x-v.canonical.y)*m.dim])}tileCoordToPixel(n,o){const u=o*this._scale+this._offset[1],h=Math.floor(n*this._scale+this._offset[0]),m=Math.floor(u);return new ee(h,m)}getElevationAt(n,o,u,h){const m=n*this._scale+this._offset[0],v=o*this._scale+this._offset[1],x=Math.floor(m),S=Math.floor(v),E=this._dem;return h=!!h,u?Jn(Jn(E.get(x,S,h),E.get(x,S+1,h),v-S),Jn(E.get(x+1,S,h),E.get(x+1,S+1,h),v-S),m-x):E.get(x,S,h)}getElevationAtPixel(n,o,u){return this._dem.get(n,o,!!u)}getMeterToDEM(n){return(1<<this._demTile.tileID.canonical.z)*Ya(1,n)*this._dem.stride}}class M2{constructor(n,o){this.tileID=n,this.x=n.canonical.x,this.y=n.canonical.y,this.z=n.canonical.z,this.grid=new Ws(mn,16,0),this.featureIndexArray=new jc,this.promoteId=o}insert(n,o,u,h,m,v=0){const x=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(u,h,m,v);const S=this.grid;for(let E=0;E<o.length;E++){const R=o[E],z=[1/0,1/0,-1/0,-1/0];for(let L=0;L<R.length;L++){const V=R[L];z[0]=Math.min(z[0],V.x),z[1]=Math.min(z[1],V.y),z[2]=Math.max(z[2],V.x),z[3]=Math.max(z[3],V.y)}z[0]<mn&&z[1]<mn&&z[2]>=0&&z[3]>=0&&S.insert(x,z[0],z[1],z[2],z[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new G_(new kg(this.rawTileData)).layers,this.sourceLayerCoder=new f2(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const n in this.vtLayers)this.vtFeatures[n]=[]}return this.vtLayers}query(n,o,u,h){this.loadVTLayers();const m=n.params||{},v=Ju(m.filter),x=n.tileResult,S=n.transform,E=x.bufferedTilespaceBounds,R=this.grid.query(E.min.x,E.min.y,E.max.x,E.max.y,(G,K,ae,ge)=>QE(x.bufferedTilespaceGeometry,G,K,ae,ge));R.sort(G3);let z=null;S.elevation&&R.length>0&&(z=Kg.create(S.elevation,this.tileID));const L={};let V;for(let G=0;G<R.length;G++){const K=R[G];if(K===V)continue;V=K;const ae=this.featureIndexArray.get(K);let ge=null;this.loadMatchingFeature(L,ae,v,m.layers,m.availableImages,o,u,h,(Ce,ye,Ee,Ae=0)=>(ge||(ge=Qs(Ce,this.tileID.canonical,n.tileTransform)),ye.queryIntersectsFeature(x,Ce,Ee,ge,this.z,n.transform,n.pixelPosMatrix,z,Ae)))}return L}loadMatchingFeature(n,o,u,h,m,v,x,S,E){const{featureIndex:R,bucketIndex:z,sourceLayerIndex:L,layoutVertexArrayOffset:V}=o,G=this.bucketLayerIDs[z];if(h&&!function(Ce,ye){for(let Ee=0;Ee<Ce.length;Ee++)if(ye.indexOf(Ce[Ee])>=0)return!0;return!1}(h,G))return;const K=this.sourceLayerCoder.decode(L),ae=this.vtLayers[K].feature(R);if(u.needGeometry){const Ce=Xc(ae,!0);if(!u.filter(new O(this.tileID.overscaledZ),Ce,this.tileID.canonical))return}else if(!u.filter(new O(this.tileID.overscaledZ),ae))return;const ge=this.getId(ae,K);for(let Ce=0;Ce<G.length;Ce++){const ye=G[Ce];if(h&&h.indexOf(ye)<0)continue;const Ee=v[ye];if(!Ee)continue;let Ae={};ge!==void 0&&S&&(Ae=S.getState(Ee.sourceLayer||"_geojsonTileLayer",ge));const Pe=yt({},x[ye]);Pe.paint=P2(Pe.paint,Ee.paint,ae,Ae,m),Pe.layout=P2(Pe.layout,Ee.layout,ae,Ae,m);const Ye=!E||E(ae,Ee,Ae,V);if(!Ye)continue;const qe=new p2(ae,this.z,this.x,this.y,ge);qe.layer=Pe;let ot=n[ye];ot===void 0&&(ot=n[ye]=[]),ot.push({featureIndex:R,feature:qe,intersectionZ:Ye})}}lookupSymbolFeatures(n,o,u,h,m,v,x,S){const E={};this.loadVTLayers();const R=Ju(m);for(const z of n)this.loadMatchingFeature(E,{bucketIndex:u,sourceLayerIndex:h,featureIndex:z,layoutVertexArrayOffset:0},R,v,x,S,o);return E}loadFeature(n){const{featureIndex:o,sourceLayerIndex:u}=n;this.loadVTLayers();const h=this.sourceLayerCoder.decode(u),m=this.vtFeatures[h];if(m[o])return m[o];const v=this.vtLayers[h].feature(o);return m[o]=v,v}hasLayer(n){for(const o of this.bucketLayerIDs)for(const u of o)if(n===u)return!0;return!1}getId(n,o){let u=n.id;if(this.promoteId){const h=typeof this.promoteId=="string"?this.promoteId:this.promoteId[o];h!=null&&(u=n.properties[h]),typeof u=="boolean"&&(u=Number(u))}return u}}function P2(i,n,o,u,h){return dt(i,(m,v)=>{const x=n instanceof me?n.get(v):null;return x&&x.evaluate?x.evaluate(o,u,h):x})}function G3(i,n){return n-i}Jt(M2,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});class A2{constructor(n,o){this.width=n,this.height=o,this.nextRow=0,this.image=new el({width:n,height:o}),this.positions={},this.uploaded=!1}getDash(n,o){const u=this.getKey(n,o);return this.positions[u]}trim(){const n=this.width,o=this.height=Nt(this.nextRow);this.image.resize({width:n,height:o})}getKey(n,o){return n.join(",")+o}getDashRanges(n,o,u){const h=[];let m=n.length%2==1?-n[n.length-1]*u:0,v=n[0]*u,x=!0;h.push({left:m,right:v,isDash:x,zeroLength:n[0]===0});let S=n[0];for(let E=1;E<n.length;E++){x=!x;const R=n[E];m=S*u,S+=R,v=S*u,h.push({left:m,right:v,isDash:x,zeroLength:R===0})}return h}addRoundDash(n,o,u){const h=o/2;for(let m=-u;m<=u;m++){const v=this.width*(this.nextRow+u+m);let x=0,S=n[x];for(let E=0;E<this.width;E++){E/S.right>1&&(S=n[++x]);const R=Math.abs(E-S.left),z=Math.abs(E-S.right),L=Math.min(R,z);let V;const G=m/u*(h+1);if(S.isDash){const K=h-Math.abs(G);V=Math.sqrt(L*L+K*K)}else V=h-Math.sqrt(L*L+G*G);this.image.data[v+E]=Math.max(0,Math.min(255,V+128))}}}addRegularDash(n,o){for(let S=n.length-1;S>=0;--S){const E=n[S],R=n[S+1];E.zeroLength?n.splice(S,1):R&&R.isDash===E.isDash&&(R.left=E.left,n.splice(S,1))}const u=n[0],h=n[n.length-1];u.isDash===h.isDash&&(u.left=h.left-this.width,h.right=u.right+this.width);const m=this.width*this.nextRow;let v=0,x=n[v];for(let S=0;S<this.width;S++){S/x.right>1&&(x=n[++v]);const E=Math.abs(S-x.left),R=Math.abs(S-x.right),z=Math.min(E,R);this.image.data[m+S]=Math.max(0,Math.min(255,(x.isDash?z:-z)+o+128))}}addDash(n,o){const u=this.getKey(n,o);if(this.positions[u])return this.positions[u];const h=o==="round",m=h?7:0,v=2*m+1;if(this.nextRow+v>this.height)return zt("LineAtlas out of space"),null;n.length===0&&n.push(1);let x=0;for(let R=0;R<n.length;R++)n[R]<0&&(zt("Negative value is found in line dasharray, replacing values with 0"),n[R]=0),x+=n[R];if(x!==0){const R=this.width/x,z=this.getDashRanges(n,this.width,R);h?this.addRoundDash(z,R,m):this.addRegularDash(z,o==="square"?.5*R:0)}const S=this.nextRow+m;this.nextRow+=v;const E={tl:[S,m],br:[x,0]};return this.positions[u]=E,E}}Jt(A2,"LineAtlas");const R2=1*Qa;class O2{constructor(n){const o={},u=[];for(const x in n){const S=n[x],E=o[x]={};for(const R in S.glyphs){const z=S.glyphs[+R];if(!z||z.bitmap.width===0||z.bitmap.height===0)continue;const L=z.metrics.localGlyph?R2:1,V={x:0,y:0,w:z.bitmap.width+2*L,h:z.bitmap.height+2*L};u.push(V),E[R]=V}}const{w:h,h:m}=X_(u),v=new el({width:h||1,height:m||1});for(const x in n){const S=n[x];for(const E in S.glyphs){const R=S.glyphs[+E];if(!R||R.bitmap.width===0||R.bitmap.height===0)continue;const z=o[x][E],L=R.metrics.localGlyph?R2:1;el.copy(R.bitmap,v,{x:0,y:0},{x:z.x+L,y:z.y+L},R.bitmap)}}this.image=v,this.positions=o}}Jt(O2,"GlyphAtlas");class W3{constructor(n){this.tileID=new lo(n.tileID.overscaledZ,n.tileID.wrap,n.tileID.canonical.z,n.tileID.canonical.x,n.tileID.canonical.y),this.tileZoom=n.tileZoom,this.uid=n.uid,this.zoom=n.zoom,this.canonical=n.tileID.canonical,this.pixelRatio=n.pixelRatio,this.tileSize=n.tileSize,this.source=n.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=n.showCollisionBoxes,this.collectResourceTiming=!!n.collectResourceTiming,this.returnDependencies=!!n.returnDependencies,this.promoteId=n.promoteId,this.enableTerrain=!!n.enableTerrain,this.isSymbolTile=n.isSymbolTile,this.tileTransform=Jc(n.tileID.canonical,n.projection),this.projection=n.projection}parse(n,o,u,h,m){this.status="parsing",this.data=n,this.collisionBoxArray=new xr;const v=new f2(Object.keys(n.layers).sort()),x=new M2(this.tileID,this.promoteId);x.bucketLayerIDs=[];const S={},E=new A2(256,256),R={featureIndex:x,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:E,availableImages:u},z=o.familiesBySource[this.source];for(const Ae in z){const Pe=n.layers[Ae];if(!Pe)continue;let Ye=!1,qe=!1;for(const et of z[Ae])et[0].type==="symbol"?Ye=!0:qe=!0;if(this.isSymbolTile===!0&&!Ye||this.isSymbolTile===!1&&!qe)continue;Pe.version===1&&zt(`Vector tile source "${this.source}" layer "${Ae}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const ot=v.encode(Ae),St=[];for(let et=0;et<Pe.length;et++){const ht=Pe.feature(et),ft=x.getId(ht,Ae);St.push({feature:ht,id:ft,index:et,sourceLayerIndex:ot})}for(const et of z[Ae]){const ht=et[0];this.isSymbolTile!==void 0&&ht.type==="symbol"!==this.isSymbolTile||ht.minzoom&&this.zoom<Math.floor(ht.minzoom)||ht.maxzoom&&this.zoom>=ht.maxzoom||ht.visibility!=="none"&&(hx(et,this.zoom,u),(S[ht.id]=ht.createBucket({index:x.bucketLayerIDs.length,layers:et,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:ot,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.spec,availableImages:u})).populate(St,R,this.tileID.canonical,this.tileTransform),x.bucketLayerIDs.push(et.map(ft=>ft.id)))}}let L,V,G,K;E.trim();const ae={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},ge=()=>{if(L)return m(L);if(V&&G&&K){const Ae=new O2(V),Pe=new BC(G,K);for(const Ye in S){const qe=S[Ye];qe instanceof Hl?(hx(qe.layers,this.zoom,u),y3(qe,V,Ae.positions,G,Pe.iconPositions,this.showCollisionBoxes,u,this.tileID.canonical,this.tileZoom,this.projection)):qe.hasPattern&&(qe instanceof zg||qe instanceof Mg||qe instanceof Bf)&&(hx(qe.layers,this.zoom,u),qe.addFeatures(R,this.tileID.canonical,Pe.patternPositions,u,this.tileTransform))}this.status="done",m(null,{buckets:nt(S).filter(Ye=>!Ye.isEmpty()),featureIndex:x,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Ae.image,lineAtlas:E,imageAtlas:Pe,glyphMap:this.returnDependencies?V:null,iconMap:this.returnDependencies?G:null,glyphPositions:this.returnDependencies?Ae.positions:null})}},Ce=dt(R.glyphDependencies,Ae=>Object.keys(Ae).map(Number));Object.keys(Ce).length?h.send("getGlyphs",{uid:this.uid,stacks:Ce},(Ae,Pe)=>{L||(L=Ae,V=Pe,ge())},void 0,!1,ae):V={};const ye=Object.keys(R.iconDependencies);ye.length?h.send("getImages",{icons:ye,source:this.source,tileID:this.tileID,type:"icons"},(Ae,Pe)=>{L||(L=Ae,G=Pe,ge())},void 0,!1,ae):G={};const Ee=Object.keys(R.patternDependencies);Ee.length?h.send("getImages",{icons:Ee,source:this.source,tileID:this.tileID,type:"patterns"},(Ae,Pe)=>{L||(L=Ae,K=Pe,ge())},void 0,!1,ae):K={},ge()}}function hx(i,n,o){const u=new O(n);for(const h of i)h.recalculate(u,o)}class z2{constructor(n){this.entries={},this.scheduler=n}request(n,o,u,h){const m=this.entries[n]=this.entries[n]||{callbacks:[]};if(m.result){const[v,x]=m.result;return this.scheduler?this.scheduler.add(()=>{h(v,x)},o):h(v,x),()=>{}}return m.callbacks.push(h),m.cancel||(m.cancel=u((v,x)=>{m.result=[v,x];for(const S of m.callbacks)this.scheduler?this.scheduler.add(()=>{S(v,x)},o):S(v,x);setTimeout(()=>delete this.entries[n],3e3)})),()=>{m.result||(m.callbacks=m.callbacks.filter(v=>v!==h),m.callbacks.length||(m.cancel(),delete this.entries[n]))}}}function D2(i,n,o){const u=JSON.stringify(i.request);return i.data&&(this.deduped.entries[u]={result:[null,i.data]}),this.deduped.request(u,{type:"parseTile",isSymbolTile:i.isSymbolTile,zoom:i.tileZoom},h=>{const m=Qn(i.request,(v,x,S,E)=>{v?h(v):x&&h(null,{vectorTile:o?void 0:new G_(new kg(x)),rawData:x,cacheControl:S,expires:E})});return()=>{m.cancel(),h()}},n)}const L2=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class fx{static from(n){if(!(n instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[o,u]=new Uint8Array(n,0,2);if(o!==219)throw new Error("Data does not appear to be in a KDBush format.");const h=u>>4;if(h!==1)throw new Error(`Got v${h} data when expected v1.`);const m=L2[15&u];if(!m)throw new Error("Unrecognized array type.");const[v]=new Uint16Array(n,2,1),[x]=new Uint32Array(n,4,1);return new fx(x,v,m,n)}constructor(n,o=64,u=Float64Array,h){if(isNaN(n)||n<0)throw new Error(`Unpexpected numItems value: ${n}.`);this.numItems=+n,this.nodeSize=Math.min(Math.max(+o,2),65535),this.ArrayType=u,this.IndexArrayType=n<65536?Uint16Array:Uint32Array;const m=L2.indexOf(this.ArrayType),v=2*n*this.ArrayType.BYTES_PER_ELEMENT,x=n*this.IndexArrayType.BYTES_PER_ELEMENT,S=(8-x%8)%8;if(m<0)throw new Error(`Unexpected typed array class: ${u}.`);h&&h instanceof ArrayBuffer?(this.data=h,this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+x+S,2*n),this._pos=2*n,this._finished=!0):(this.data=new ArrayBuffer(8+v+x+S),this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+x+S,2*n),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+m]),new Uint16Array(this.data,2,1)[0]=o,new Uint32Array(this.data,4,1)[0]=n)}add(n,o){const u=this._pos>>1;return this.ids[u]=u,this.coords[this._pos++]=n,this.coords[this._pos++]=o,u}finish(){const n=this._pos>>1;if(n!==this.numItems)throw new Error(`Added ${n} items when expected ${this.numItems}.`);return px(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(n,o,u,h){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:m,coords:v,nodeSize:x}=this,S=[0,m.length-1,0],E=[];for(;S.length;){const R=S.pop()||0,z=S.pop()||0,L=S.pop()||0;if(z-L<=x){for(let ae=L;ae<=z;ae++){const ge=v[2*ae],Ce=v[2*ae+1];ge>=n&&ge<=u&&Ce>=o&&Ce<=h&&E.push(m[ae])}continue}const V=L+z>>1,G=v[2*V],K=v[2*V+1];G>=n&&G<=u&&K>=o&&K<=h&&E.push(m[V]),(R===0?n<=G:o<=K)&&(S.push(L),S.push(V-1),S.push(1-R)),(R===0?u>=G:h>=K)&&(S.push(V+1),S.push(z),S.push(1-R))}return E}within(n,o,u){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:h,coords:m,nodeSize:v}=this,x=[0,h.length-1,0],S=[],E=u*u;for(;x.length;){const R=x.pop()||0,z=x.pop()||0,L=x.pop()||0;if(z-L<=v){for(let ae=L;ae<=z;ae++)$2(m[2*ae],m[2*ae+1],n,o)<=E&&S.push(h[ae]);continue}const V=L+z>>1,G=m[2*V],K=m[2*V+1];$2(G,K,n,o)<=E&&S.push(h[V]),(R===0?n-u<=G:o-u<=K)&&(x.push(L),x.push(V-1),x.push(1-R)),(R===0?n+u>=G:o+u>=K)&&(x.push(V+1),x.push(z),x.push(1-R))}return S}}function px(i,n,o,u,h,m){if(h-u<=o)return;const v=u+h>>1;k2(i,n,v,u,h,m),px(i,n,o,u,v-1,1-m),px(i,n,o,v+1,h,1-m)}function k2(i,n,o,u,h,m){for(;h>u;){if(h-u>600){const E=h-u+1,R=o-u+1,z=Math.log(E),L=.5*Math.exp(2*z/3),V=.5*Math.sqrt(z*L*(E-L)/E)*(R-E/2<0?-1:1);k2(i,n,o,Math.max(u,Math.floor(o-R*L/E+V)),Math.min(h,Math.floor(o+(E-R)*L/E+V)),m)}const v=n[2*o+m];let x=u,S=h;for(Jf(i,n,u,o),n[2*h+m]>v&&Jf(i,n,u,h);x<S;){for(Jf(i,n,x,S),x++,S--;n[2*x+m]<v;)x++;for(;n[2*S+m]>v;)S--}n[2*u+m]===v?Jf(i,n,u,S):(S++,Jf(i,n,S,h)),S<=o&&(u=S+1),o<=S&&(h=S-1)}}function Jf(i,n,o,u){mx(i,o,u),mx(n,2*o,2*u),mx(n,2*o+1,2*u+1)}function mx(i,n,o){const u=i[n];i[n]=i[o],i[o]=u}function $2(i,n,o,u){const h=i-o,m=n-u;return h*h+m*m}l.ARRAY_TYPE=ko,l.AUTH_ERR_MSG=Se,l.Aabb=so,l.Actor=class{constructor(i,n,o){this.target=i,this.parent=n,this.mapId=o,this.callbacks={},this.cancelCallbacks={},ut(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=Ut()?i:w,this.scheduler=new B3}send(i,n,o,u,h=!1,m){const v=Math.round(1e18*Math.random()).toString(36).substring(0,10);o&&(o.metadata=m,this.callbacks[v]=o);const x=Rt(this.globalScope)?void 0:[];return this.target.postMessage({id:v,type:i,hasCallback:!!o,targetMapId:u,mustQueue:h,sourceMapId:this.mapId,data:kl(n,x)},x),{cancel:()=>{o&&delete this.callbacks[v],this.target.postMessage({id:v,type:"<cancel>",targetMapId:u,sourceMapId:this.mapId})}}}receive(i){const n=i.data,o=n.id;if(o&&(!n.targetMapId||this.mapId===n.targetMapId))if(n.type==="<cancel>"){const u=this.cancelCallbacks[o];delete this.cancelCallbacks[o],u&&u.cancel()}else if(n.mustQueue||Ut()){const u=this.callbacks[o];this.cancelCallbacks[o]=this.scheduler.add(()=>this.processTask(o,n),u&&u.metadata||{type:"message"})}else this.processTask(o,n)}processTask(i,n){if(n.type==="<response>"){const o=this.callbacks[i];delete this.callbacks[i],o&&(n.error?o(qs(n.error)):o(null,qs(n.data)))}else{const o=Rt(this.globalScope)?void 0:[],u=n.hasCallback?(m,v)=>{delete this.cancelCallbacks[i],this.target.postMessage({id:i,type:"<response>",sourceMapId:this.mapId,error:m?kl(m):null,data:kl(v,o)},o)}:m=>{},h=qs(n.data);if(this.parent[n.type])this.parent[n.type](n.sourceMapId,h,u);else if(this.parent.getWorkerSource){const m=n.type.split(".");this.parent.getWorkerSource(n.sourceMapId,m[0],h.source)[m[1]](h,u)}else u(new Error(`Could not find function ${n.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},l.CanonicalTileID=Og,l.Color=Nr,l.ColorMode=As,l.CullFaceMode=es,l.DEMData=Xg,l.DataConstantProperty=X,l.DedupedRequest=z2,l.DepthMode=Sd,l.EXTENT=mn,l.Elevation=class{isDataAvailableAtPoint(i){const n=this._source();if(this.isUsingMockSource()||!n||i.y<0||i.y>1)return!1;const o=n.getSource().maxzoom,u=1<<o,h=Math.floor(i.x),m=Math.floor((i.x-h)*u),v=Math.floor(i.y*u),x=this.findDEMTileFor(new lo(o,h,o,m,v));return!(!x||!x.dem)}getAtPointOrZero(i,n=0){return this.getAtPoint(i,n)||0}getAtPoint(i,n,o=!0){if(this.isUsingMockSource())return null;n==null&&(n=null);const u=this._source();if(!u||i.y<0||i.y>1)return n;const h=u.getSource().maxzoom,m=1<<h,v=Math.floor(i.x),x=i.x-v,S=new lo(h,v,h,Math.floor(x*m),Math.floor(i.y*m)),E=this.findDEMTileFor(S);if(!E||!E.dem)return n;const R=E.dem,z=1<<E.tileID.canonical.z,L=(x*z-E.tileID.canonical.x)*R.dim,V=(i.y*z-E.tileID.canonical.y)*R.dim,G=Math.floor(L),K=Math.floor(V);return(o?this.exaggeration():1)*Jn(Jn(R.get(G,K),R.get(G,K+1),V-K),Jn(R.get(G+1,K),R.get(G+1,K+1),V-K),L-G)}getAtTileOffset(i,n,o){const u=1<<i.canonical.z;return this.getAtPointOrZero(new cd(i.wrap+(i.canonical.x+n/mn)/u,(i.canonical.y+o/mn)/u))}getAtTileOffsetFunc(i,n,o,u){return h=>{const m=this.getAtTileOffset(i,h.x,h.y),v=u.upVector(i.canonical,h.x,h.y);return Ko(v,v,m*u.upVectorScale(i.canonical,n,o).metersToTile),v}}getForTilePoints(i,n,o,u){if(this.isUsingMockSource())return!1;const h=Kg.create(this,i,u);return!!h&&(n.forEach(m=>{m[2]=this.exaggeration()*h.getElevationAt(m[0],m[1],o)}),!0)}getMinMaxForTile(i){if(this.isUsingMockSource())return null;const n=this.findDEMTileFor(i);if(!n||!n.dem)return null;const o=n.dem.tree,u=n.tileID,h=1<<i.canonical.z-u.canonical.z;let m=i.canonical.x/h-u.canonical.x,v=i.canonical.y/h-u.canonical.y,x=0;for(let S=0;S<i.canonical.z-u.canonical.z&&!o.leaves[x];S++){m*=2,v*=2;const E=2*Math.floor(v)+Math.floor(m);x=o.childOffsets[x]+E,m%=1,v%=1}return{min:this.exaggeration()*o.minimums[x],max:this.exaggeration()*o.maximums[x]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(i,n,o){throw new Error("Pure virtual method called.")}pointCoordinate(i){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(i){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},l.ErrorEvent=_i,l.EvaluationParameters=O,l.Event=io,l.Evented=Oi,l.FillExtrusionBucket=Bf,l.Frustum=w_,l.FrustumCorners=b_,l.GLOBE_RADIUS=Es,l.GLOBE_SCALE_MATCH_LATITUDE=45,l.GLOBE_ZOOM_THRESHOLD_MAX=kE,l.GLOBE_ZOOM_THRESHOLD_MIN=S_,l.GlobeSharedBuffers=class{constructor(i){this._createGrid(i),this._createPoles(i)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const i of this._poleSegments)i.destroy();for(const i of this._gridSegments)i.withSkirts.destroy(),i.withoutSkirts.destroy();if(this._wireframeIndexBuffer){this._wireframeIndexBuffer.destroy();for(const i of this._wireframeSegments)i.destroy()}}_fillGridMeshWithLods(i,n){const o=new wt,u=new cn,h=[],m=i+1+2,v=n[0]+1,x=n[0]+1+(1+n.length),S=(E,R,z)=>{let L=E===m-1?E-2:E===0?E:E-1;return L+=z?24575:0,[L,R]};for(let E=0;E<m;++E)o.emplaceBack(...S(E,0,!0));for(let E=0;E<v;++E)for(let R=0;R<m;++R)o.emplaceBack(...S(R,E,(R===0||R===m-1)&&!0));for(let E=0;E<n.length;++E){const R=n[E];for(let z=0;z<m;++z)o.emplaceBack(...S(z,R,!0))}for(let E=0;E<n.length;++E){const R=u.length,z=n[E]+1+2,L=new cn;for(let K=0;K<z-1;K++){const ae=K===z-2,ge=ae?m*(x-n.length+E-K):m;for(let Ce=0;Ce<m-1;Ce++){const ye=K*m+Ce;K===0||ae||Ce===0||Ce===m-2?(L.emplaceBack(ye+1,ye,ye+ge),L.emplaceBack(ye+ge,ye+ge+1,ye+1)):(u.emplaceBack(ye+1,ye,ye+ge),u.emplaceBack(ye+ge,ye+ge+1,ye+1))}}const V=si.simpleSegment(0,R,o.length,u.length-R);for(let K=0;K<L.uint16.length;K+=3)u.emplaceBack(L.uint16[K],L.uint16[K+1],L.uint16[K+2]);const G=si.simpleSegment(0,R,o.length,u.length-R);h.push({withoutSkirts:V,withSkirts:G})}return{vertices:o,indices:u,segments:h}}_createGrid(i){const n=this._fillGridMeshWithLods(qc,Pf);this._gridSegments=n.segments,this._gridBuffer=i.createVertexBuffer(n.vertices,Mf.members),this._gridIndexBuffer=i.createIndexBuffer(n.indices,!0)}_createPoles(i){const n=new cn;for(let h=0;h<=qc;h++)n.emplaceBack(0,h+1,h+2);this._poleIndexBuffer=i.createIndexBuffer(n,!0);const o=new _r,u=new _r;this._poleSegments=[];for(let h=0,m=0;h<S_;h++){const v=360/(1<<h);o.emplaceBack(0,-Es,0,.5,0),u.emplaceBack(0,-Es,0,.5,1);for(let x=0;x<=qc;x++){const S=x/qc,E=Jn(0,v,S),[R,z,L]=ad(BL,NL,E,Es);o.emplaceBack(R,z,L,S,0),u.emplaceBack(R,z,L,S,1)}this._poleSegments.push(si.simpleSegment(m,0,66,64)),m+=66}this._poleNorthVertexBuffer=i.createVertexBuffer(o,DE,!1),this._poleSouthVertexBuffer=i.createVertexBuffer(u,DE,!1)}getGridBuffers(i,n){return[this._gridBuffer,this._gridIndexBuffer,n?this._gridSegments[i].withSkirts:this._gridSegments[i].withoutSkirts]}getPoleBuffers(i){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[i]]}getWirefameBuffers(i,n){if(!this._wireframeSegments){const o=new Ti,u=qc,h=u+1+2,m=1;this._wireframeSegments=[];for(let v=0,x=0;v<Pf.length;v++){const S=Pf[v];for(let R=m;R<S+m;R++)for(let z=m;z<u+m;z++){const L=R*h+z;o.emplaceBack(L,L+1),o.emplaceBack(L,L+h),o.emplaceBack(L,L+h+1)}const E=S*u*3;this._wireframeSegments.push(si.simpleSegment(0,x,(S+1)*h,E)),x+=E}this._wireframeIndexBuffer=i.createIndexBuffer(o)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments[n]]}},l.GlyphManager=yd,l.ImagePosition=K_,l.KDBush=fx,l.LivePerformanceUtils=Tr,l.LngLat=br,l.LngLatBounds=Nl,l.LocalGlyphMode=Q_,l.MAX_MERCATOR_LATITUDE=Wi,l.MercatorCoordinate=cd,l.ONE_EM=Di,l.OverscaledTileID=lo,l.PerformanceMarkers=Sn,l.Point=ee,l.Properties=be,l.RGBAImage=$o,l.Ray=x_,l.RequestManager=class{constructor(i,n,o){this._transformRequestFn=i,this._customAccessToken=n,this._silenceAuthErrors=!!o,this._createSkuToken()}_createSkuToken(){const i=function(){let n="";for(let o=0;o<10;o++)n+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",B,n].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=i.token,this._skuTokenExpiresAt=i.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(i,n){return this._transformRequestFn&&this._transformRequestFn(i,n)||{url:i}}normalizeStyleURL(i,n){if(!Ie(i))return i;const o=Je(i);return o.path=`/styles/v1${o.path}`,this._makeAPIURL(o,this._customAccessToken||n)}normalizeGlyphsURL(i,n){if(!Ie(i))return i;const o=Je(i);return o.path=`/fonts/v1${o.path}`,this._makeAPIURL(o,this._customAccessToken||n)}normalizeSourceURL(i,n,o,u){if(!Ie(i))return i;const h=Je(i);return h.path=`/v4/${h.authority}.json`,h.params.push("secure"),o&&h.params.push(`language=${o}`),u&&h.params.push(`worldview=${u}`),this._makeAPIURL(h,this._customAccessToken||n)}normalizeSpriteURL(i,n,o,u){const h=Je(i);return Ie(i)?(h.path=`/styles/v1${h.path}/sprite${n}${o}`,this._makeAPIURL(h,this._customAccessToken||u)):(h.path+=`${n}${o}`,Ge(h))}normalizeTileURL(i,n,o){if(this._isSkuTokenExpired()&&this._createSkuToken(),i&&!Ie(i))return i;const u=Je(i);u.path=u.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${n||o&&u.authority!=="raster"&&o===512?"@2x":""}${D.supported?".webp":"$1"}`),u.authority==="raster"?u.path=`/${A.RASTER_URL_PREFIX}${u.path}`:(u.path=u.path.replace(/^.+\/v4\//,"/"),u.path=`/${A.TILE_URL_VERSION}${u.path}`);const h=this._customAccessToken||function(m){for(const v of m){const x=v.match(/^access_token=(.*)$/);if(x)return x[1]}return null}(u.params)||A.ACCESS_TOKEN;return A.REQUIRE_ACCESS_TOKEN&&h&&this._skuToken&&u.params.push(`sku=${this._skuToken}`),this._makeAPIURL(u,h)}canonicalizeTileURL(i,n){const o=Je(i);if(!o.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!o.path.match(/\.[\w]+$/))return i;let u="mapbox://";o.path.match(/^\/raster\/v1\//)?u+=`raster/${o.path.replace(`/${A.RASTER_URL_PREFIX}/`,"")}`:u+=`tiles/${o.path.replace(`/${A.TILE_URL_VERSION}/`,"")}`;let h=o.params;return n&&(h=h.filter(m=>!m.match(/^access_token=/))),h.length&&(u+=`?${h.join("&")}`),u}canonicalizeTileset(i,n){const o=!!n&&Ie(n),u=[];for(const h of i.tiles||[])Me(h)?u.push(this.canonicalizeTileURL(h,o)):u.push(h);return u}_makeAPIURL(i,n){const o="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",u=Je(A.API_URL);if(i.protocol=u.protocol,i.authority=u.authority,i.protocol==="http"){const h=i.params.indexOf("secure");h>=0&&i.params.splice(h,1)}if(u.path!=="/"&&(i.path=`${u.path}${i.path}`),!A.REQUIRE_ACCESS_TOKEN)return Ge(i);if(n=n||A.ACCESS_TOKEN,!this._silenceAuthErrors){if(!n)throw new Error(`An API access token is required to use Mapbox GL. ${o}`);if(n[0]==="s")throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${o}`)}return i.params=i.params.filter(h=>h.indexOf("access_token")===-1),i.params.push(`access_token=${n||""}`),Ge(i)}},l.ResourceType=jn,l.SegmentVector=si,l.SourceCache=Qc,l.StencilMode=cx,l.StructArrayLayout1ui2=Lo,l.StructArrayLayout2f1f2i16=yn,l.StructArrayLayout2i4=wt,l.StructArrayLayout2ui4=Ti,l.StructArrayLayout3f12=Un,l.StructArrayLayout3ui6=cn,l.StructArrayLayout4i8=ct,l.StructArrayLayout5f20=_r,l.Texture=Kf,l.Tile=sx,l.Transitionable=q,l.Uniform1f=mg,l.Uniform1i=class extends Ks{constructor(i){super(i),this.current=0}set(i,n,o){this.fetchUniformLocation(i,n)&&this.current!==o&&(this.current=o,this.gl.uniform1i(this.location,o))}},l.Uniform2f=class extends Ks{constructor(i){super(i),this.current=[0,0]}set(i,n,o){this.fetchUniformLocation(i,n)&&(o[0]===this.current[0]&&o[1]===this.current[1]||(this.current=o,this.gl.uniform2f(this.location,o[0],o[1])))}},l.Uniform3f=class extends Ks{constructor(i){super(i),this.current=[0,0,0]}set(i,n,o){this.fetchUniformLocation(i,n)&&(o[0]===this.current[0]&&o[1]===this.current[1]&&o[2]===this.current[2]||(this.current=o,this.gl.uniform3f(this.location,o[0],o[1],o[2])))}},l.Uniform4f=vE,l.UniformColor=yE,l.UniformMatrix2f=class extends Ks{constructor(i){super(i),this.current=SL}set(i,n,o){if(this.fetchUniformLocation(i,n)){for(let u=0;u<4;u++)if(o[u]!==this.current[u]){this.current=o,this.gl.uniformMatrix2fv(this.location,!1,o);break}}}},l.UniformMatrix3f=class extends Ks{constructor(i){super(i),this.current=wL}set(i,n,o){if(this.fetchUniformLocation(i,n)){for(let u=0;u<9;u++)if(o[u]!==this.current[u]){this.current=o,this.gl.uniformMatrix3fv(this.location,!1,o);break}}}},l.UniformMatrix4f=class extends Ks{constructor(i){super(i),this.current=bL}set(i,n,o){if(this.fetchUniformLocation(i,n)){if(o[12]!==this.current[12]||o[0]!==this.current[0])return this.current=o,void this.gl.uniformMatrix4fv(this.location,!1,o);for(let u=1;u<16;u++)if(o[u]!==this.current[u]){this.current=o,this.gl.uniformMatrix4fv(this.location,!1,o);break}}}},l.UnwrappedTileID=EC,l.ValidationError=Xt,l.VectorTileFeature=Ag,l.VectorTileWorkerSource=class extends Oi{constructor(i,n,o,u,h){super(),this.actor=i,this.layerIndex=n,this.availableImages=o,this.loadVectorData=h||D2,this.loading={},this.loaded={},this.deduped=new z2(i.scheduler),this.isSpriteLoaded=u,this.scheduler=i.scheduler}loadTile(i,n){const o=i.uid,u=i&&i.request,h=u&&u.collectResourceTiming,m=this.loading[o]=new W3(i);m.abort=this.loadVectorData(i,(v,x)=>{const S=!this.loading[o];if(delete this.loading[o],S||v||!x)return m.status="done",S||(this.loaded[o]=m),n(v);const E=x.rawData,R={};x.expires&&(R.expires=x.expires),x.cacheControl&&(R.cacheControl=x.cacheControl),m.vectorTile=x.vectorTile||new G_(new kg(E));const z=()=>{m.parse(m.vectorTile,this.layerIndex,this.availableImages,this.actor,(L,V)=>{if(L||!V)return n(L);const G={};if(h){const K=Ni(u);K.length>0&&(G.resourceTiming=JSON.parse(JSON.stringify(K)))}n(null,yt({rawTileData:E.slice(0)},V,R,G))})};this.isSpriteLoaded?z():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(z,{type:"parseTile",isSymbolTile:i.isSymbolTile,zoom:i.tileZoom}):z()}),this.loaded=this.loaded||{},this.loaded[o]=m})}reloadTile(i,n){const o=this.loaded,u=i.uid,h=this;if(o&&o[u]){const m=o[u];m.showCollisionBoxes=i.showCollisionBoxes,m.enableTerrain=!!i.enableTerrain,m.projection=i.projection,m.tileTransform=Jc(i.tileID.canonical,i.projection);const v=(x,S)=>{const E=m.reloadCallback;E&&(delete m.reloadCallback,m.parse(m.vectorTile,h.layerIndex,this.availableImages,h.actor,E)),n(x,S)};m.status==="parsing"?m.reloadCallback=v:m.status==="done"&&(m.vectorTile?m.parse(m.vectorTile,this.layerIndex,this.availableImages,this.actor,v):v())}}abortTile(i,n){const o=i.uid,u=this.loading[o];u&&(u.abort&&u.abort(),delete this.loading[o]),n()}removeTile(i,n){const o=this.loaded,u=i.uid;o&&o[u]&&delete o[u],n()}},l.WritingMode=Jo,l.ZoomDependentExpression=Dc,l.add=Js,l.addDynamicAttributes=Wg,l.adjoint=function(i,n){var o=n[0],u=n[1],h=n[2],m=n[3],v=n[4],x=n[5],S=n[6],E=n[7],R=n[8];return i[0]=v*R-x*E,i[1]=h*E-u*R,i[2]=u*x-h*v,i[3]=x*S-m*R,i[4]=o*R-h*S,i[5]=h*m-o*x,i[6]=m*E-v*S,i[7]=u*S-o*E,i[8]=o*v-u*m,i},l.asyncAll=Ze,l.bezier=$e,l.bindAll=ut,l.boundsAttributes=g2,l.bufferConvexPolygon=function(i,n){const o=[];for(let u=0;u<i.length;u++){const h=Be(u-1,-1,i.length-1),m=Be(u+1,-1,i.length-1),v=i[u],x=i[m],S=i[h].sub(v).unit(),E=x.sub(v).unit(),R=E.angleWithSep(S.x,S.y),z=S.add(E).unit().mult(-1*n/Math.sin(R/2));o.push(v.add(z))}return o},l.cacheEntryPossiblyAdded=function(i){Wn++,Wn>rn&&(i.getActor().send("enforceCacheSizeLimit",Mn),Wn=0)},l.calculateGlobeLabelMatrix=function(i,n){const{x:o,y:u}=i.point,h=jE(o,u,i.worldSize/i._pixelsPerMercatorPixel,0,0);return Hc(h,h,T_(Cs(n)))},l.calculateGlobeMatrix=function(i){const{x:n,y:o}=i.point,{lng:u,lat:h}=i._center;return jE(n,o,i.worldSize,u,h)},l.calculateGlobeMercatorMatrix=function(i){const n=i.pixelsPerMeter,o=n/Ya(1,i.center.lat),u=Xa(new Float64Array(16));return wf(u,u,[i.point.x,i.point.y,0]),Gc(u,u,[o,o,n]),Float32Array.from(u)},l.circumferenceAtLatitude=M_,l.clamp=pe,l.clearTileCache=function(i){if(!zn())return;const n=w.caches.delete(An);i&&n.catch(i).then(()=>i())},l.clipLine=JC,l.clone=function(i){var n=new ko(16);return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],n[9]=i[9],n[10]=i[10],n[11]=i[11],n[12]=i[12],n[13]=i[13],n[14]=i[14],n[15]=i[15],n},l.clone$1=gt,l.collisionCircleLayout=Hk,l.config=A,l.conjugate=function(i,n){return i[0]=-n[0],i[1]=-n[1],i[2]=-n[2],i[3]=n[3],i},l.create=function(){var i=new ko(16);return ko!=Float32Array&&(i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[11]=0,i[12]=0,i[13]=0,i[14]=0),i[0]=1,i[5]=1,i[10]=1,i[15]=1,i},l.create$1=bE,l.createExpression=zl,l.createLayout=Ue,l.createStyleLayer=function(i){return i.type==="custom"?new L3(i):new $3[i.type](i)},l.cross=__,l.degToRad=oe,l.distance=function(i,n){return Math.hypot(n[0]-i[0],n[1]-i[1],n[2]-i[2])},l.div=function(i,n,o){return i[0]=n[0]/o[0],i[1]=n[1]/o[1],i[2]=n[2]/o[2],i},l.dot=Sa,l.earthRadius=Of,l.ease=je,l.easeCubicInOut=Fe,l.ecefToLatLng=function([i,n,o]){const u=Math.hypot(i,n,o),h=Math.atan2(i,o),m=.5*Math.PI-Math.acos(-n/u);return new br(fe(h),fe(m))},l.emitValidationErrors=cg,l.endsWith=At,l.enforceCacheSizeLimit=function(i){vn(),Vn&&Vn.then(n=>{n.keys().then(o=>{for(let u=0;u<o.length-i;u++)n.delete(o[u])})})},l.evaluateSizeForFeature=Dg,l.evaluateSizeForZoom=pd,l.evaluateVariableOffset=r2,l.evented=_,l.exactEquals=function(i,n){return i[0]===n[0]&&i[1]===n[1]&&i[2]===n[2]&&i[3]===n[3]},l.exactEquals$1=function(i,n){return i[0]===n[0]&&i[1]===n[1]&&i[2]===n[2]},l.exported=ji,l.exported$1=D,l.extend=yt,l.extend$1=Si,l.fillExtrusionHeightLift=bC,l.filterObject=Bt,l.fromMat4=function(i,n){return i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=n[4],i[4]=n[5],i[5]=n[6],i[6]=n[8],i[7]=n[9],i[8]=n[10],i},l.fromQuat=function(i,n){var o=n[0],u=n[1],h=n[2],m=n[3],v=o+o,x=u+u,S=h+h,E=o*v,R=u*v,z=u*x,L=h*v,V=h*x,G=h*S,K=m*v,ae=m*x,ge=m*S;return i[0]=1-z-G,i[1]=R+ge,i[2]=L-ae,i[3]=0,i[4]=R-ge,i[5]=1-E-G,i[6]=V+K,i[7]=0,i[8]=L+ae,i[9]=V-K,i[10]=1-E-z,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i},l.fromRotation=function(i,n){var o=Math.sin(n),u=Math.cos(n);return i[0]=u,i[1]=o,i[2]=0,i[3]=-o,i[4]=u,i[5]=0,i[6]=0,i[7]=0,i[8]=1,i},l.fromScaling=SE,l.furthestTileCorner=function(i){const n=Math.round((i+45+360)%360/90)%4;return Te[n]},l.getAABBPointSquareDist=function(i,n,o){let u=0;for(let h=0;h<2;++h){const m=o?o[h]:0;i[h]>m&&(u+=(i[h]-m)*(i[h]-m)),n[h]<m&&(u+=(m-n[h])*(m-n[h]))}return u},l.getAnchorAlignment=J_,l.getAnchorJustification=tx,l.getBounds=function(i){let n=1/0,o=1/0,u=-1/0,h=-1/0;for(const m of i)n=Math.min(n,m.x),o=Math.min(o,m.y),u=Math.max(u,m.x),h=Math.max(h,m.y);return{min:new ee(n,o),max:new ee(u,h)}},l.getColumn=sn,l.getDefaultExportFromCjs=H,l.getGridMatrix=function(i,n,o,u){const h=n.getNorth(),m=n.getSouth(),v=n.getWest(),x=n.getEast(),S=1<<i.z,E=x-v,R=h-m,z=E/qc,L=-R/Pf[o],V=[0,z,0,L,0,0,h,v,0];if(i.z>0){const G=180/u;wE(V,V,[G/E+1,0,0,0,G/R+1,0,-.5*G/z,.5*G/L,1])}return V[2]=S,V[5]=i.x,V[8]=i.y,V},l.getImage=ue,l.getJSON=function(i,n){return qn(yt(i,{type:"json"}),n)},l.getLatitudinalLod=function(i){const n=Wi-5;i=pe(i,-n,n)/n*90;const o=Math.pow(Math.abs(Math.sin(oe(i))),3);return Math.round(o*(Pf.length-1))},l.getMapSessionAPI=on,l.getPerformanceMeasurement=Ni,l.getProjection=d2,l.getRTLTextPluginStatus=b,l.getReferrer=or,l.getTilePoint=function(i,{x:n,y:o},u=0){return new ee(((n-u)*i.scale-i.x)*mn,(o*i.scale-i.y)*mn)},l.getTileVec3=function(i,n,o=0){return od(((n.x-o)*i.scale-i.x)*mn,(n.y*i.scale-i.y)*mn,GE(n.z,n.y))},l.getVideo=function(i,n){const o=w.document.createElement("video");o.muted=!0,o.onloadstart=function(){n(null,o)};for(let u=0;u<i.length;u++){const h=w.document.createElement("source");Rr(i[u])||(o.crossOrigin="Anonymous"),h.src=i[u],o.appendChild(h)}return{cancel:()=>{}}},l.globeCenterToScreenPoint=function(i){const n=[0,0,0],o=Xa(new Float64Array(16));return Hc(o,i.pixelMatrix,i.globeMatrix),ii(n,n,o),new ee(n[0],n[1])},l.globeDenormalizeECEF=T_,l.globeECEFOrigin=function(i,n){const o=[0,0,0];return ii(o,o,Rf(Cs(n.canonical))),ii(o,o,i),o},l.globeMetersToEcef=yg,l.globeNormalizeECEF=Rf,l.globePixelsToTileUnits=function(i,n){return mn/(512*Math.pow(2,i))*xg(Cs(n))},l.globePoleMatrixForTile=function(i,n,o){const u=Xa(new Float64Array(16)),h=(n/(1<<i)-.5)*Math.PI*2;return vg(u,o.globeMatrix,h),Float32Array.from(u)},l.globeTileBounds=Cs,l.globeTiltAtLngLat=UE,l.globeToMercatorTransition=ld,l.globeUseCustomAntiAliasing=function(i,n,o){const u=ld(o.zoom),h=i.style.map._antialias,m=!!n.extStandardDerivatives,v=n.extStandardDerivativesForceOff||i.terrain&&i.terrain.exaggeration()>0;return u===0&&!h&&!v&&m},l.identity=Xa,l.identity$1=RE,l.invert=m_,l.isFullscreen=function(){return!!w.document.fullscreenElement||!!w.document.webkitFullscreenElement},l.isLngLatBehindGlobe=I_,l.isMapAuthenticated=function(i){return tn.has(i)},l.isMapboxURL=Ie,l.isSafariWithAntialiasingBug=function(i){const n=i.navigator?i.navigator.userAgent:null;return!!Rt(i)&&n&&(n.match("Version/15.4")||n.match("Version/15.5")||n.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},l.latFromMercatorY=Gi,l.latLngToECEF=sd,l.len=OL,l.length=Sf,l.length$1=function(i){return Math.hypot(i[0],i[1],i[2],i[3])},l.lngFromMercatorX=Yo,l.loadVectorTile=D2,l.makeRequest=qn,l.mapValue=function(i,n,o,u,h){return pe((i-n)/(o-n)*(h-u)+u,u,h)},l.mercatorScale=WE,l.mercatorXfromLng=Ts,l.mercatorYfromLat=Is,l.mercatorZfromAltitude=Ya,l.mul=AL,l.mul$1=RL,l.multiply=Hc,l.multiply$1=wE,l.multiply$2=TE,l.nextPowerOfTwo=Nt,l.normalize=ao,l.normalize$1=zL,l.normalize$2=PE,l.number=Jn,l.ortho=function(i,n,o,u,h,m,v){var x=1/(n-o),S=1/(u-h),E=1/(m-v);return i[0]=-2*x,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=-2*S,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=2*E,i[11]=0,i[12]=(n+o)*x,i[13]=(h+u)*S,i[14]=(v+m)*E,i[15]=1,i},l.pbf=RC,l.perspective=function(i,n,o,u,h){var m,v=1/Math.tan(n/2);return i[0]=v/o,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=v,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[11]=-1,i[12]=0,i[13]=0,i[15]=0,h!=null&&h!==1/0?(i[10]=(h+u)*(m=1/(u-h)),i[14]=2*h*u*m):(i[10]=-1,i[14]=-2*u),i},l.pick=function(i,n){const o={};for(let u=0;u<n.length;u++){const h=n[u];h in i&&(o[h]=i[h])}return o},l.plugin=M,l.pointGeometry=Q,l.polesInViewport=function(i){const n=Xa(new Float64Array(16));Hc(n,i.pixelMatrix,i.globeMatrix);const o=[0,Ea,0],u=[0,Ca,0];return ii(o,o,n),ii(u,u,n),[o[0]>0&&o[0]<=i.width&&o[1]>0&&o[1]<=i.height&&!I_(i,new br(i.center.lat,90)),u[0]>0&&u[0]<=i.width&&u[1]>0&&u[1]<=i.height&&!I_(i,new br(i.center.lat,-90))]},l.polygonContainsPoint=Kc,l.polygonIntersectsBox=QE,l.polygonIntersectsPolygon=XE,l.polygonizeBounds=function(i,n,o=0,u=!0){const h=new ee(o,o),m=i.sub(h),v=n.add(h),x=[m,new ee(v.x,m.y),v,new ee(m.x,v.y)];return u&&x.push(m.clone()),x},l.posAttributes=Mf,l.postMapLoadEvent=On,l.postPerformanceEvent=Zn,l.postTurnstileEvent=ln,l.potpack=X_,l.prevPowerOfTwo=function(i){return i<=1?1:Math.pow(2,Math.floor(Math.log(i)/Math.LN2))},l.radToDeg=fe,l.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],l.registerForPluginStateChange=function(i){return i({pluginStatus:p,pluginURL:s}),_.on("pluginStateChange",i),i},l.removeAuthState=function(i){tn.delete(i)},l.renderColorRamp=k_,l.resample=qE,l.rotateX=g_,l.rotateX$1=OE,l.rotateY=vg,l.rotateY$1=zE,l.rotateZ=function(i,n,o){var u=Math.sin(o),h=Math.cos(o),m=n[0],v=n[1],x=n[2],S=n[3],E=n[4],R=n[5],z=n[6],L=n[7];return n!==i&&(i[8]=n[8],i[9]=n[9],i[10]=n[10],i[11]=n[11],i[12]=n[12],i[13]=n[13],i[14]=n[14],i[15]=n[15]),i[0]=m*h+E*u,i[1]=v*h+R*u,i[2]=x*h+z*u,i[3]=S*h+L*u,i[4]=E*h-m*u,i[5]=R*h-v*u,i[6]=z*h-x*u,i[7]=L*h-S*u,i},l.rotateZ$1=function(i,n,o){o*=.5;var u=n[0],h=n[1],m=n[2],v=n[3],x=Math.sin(o),S=Math.cos(o);return i[0]=u*S+h*x,i[1]=h*S-u*x,i[2]=m*S+v*x,i[3]=v*S-m*x,i},l.scale=Gc,l.scale$1=ME,l.scale$2=Ko,l.scaleAndAdd=Tf,l.set=function(i,n,o,u){return i[0]=n,i[1]=o,i[2]=u,i},l.setCacheLimits=function(i,n){Mn=i,rn=n},l.setColumn=function(i,n,o){i[4*n+0]=o[0],i[4*n+1]=o[1],i[4*n+2]=o[2],i[4*n+3]=o[3]},l.setRTLTextPlugin=function(i,n,o=!1){if(p===vf||p===yf||p===_f)throw new Error("setRTLTextPlugin cannot be called multiple times.");s=ji.resolveURL(i),p=vf,$l=n,g(),o||I()},l.smoothstep=He,l.spec=tt,l.squaredLength=function(i){var n=i[0],o=i[1],u=i[2];return n*n+o*o+u*u},l.storeAuthState=function(i,n){n?tn.add(i):tn.delete(i)},l.sub=Ka,l.subtract=y_,l.symbolSize=Gk,l.tileAABB=function(i,n,o,u,h,m,v,x,S){if(S.name==="globe")return FL(i,n,new Og(o,u,h));const E=Jc({z:o,x:u,y:h},S);return new so([(m+E.x/E.scale)*n,n*(E.y/E.scale),v],[(m+E.x2/E.scale)*n,n*(E.y2/E.scale),x])},l.tileCornersToBounds=_g,l.tileTransform=Jc,l.transformMat3=function(i,n,o){var u=n[0],h=n[1],m=n[2];return i[0]=u*o[0]+h*o[3]+m*o[6],i[1]=u*o[1]+h*o[4]+m*o[7],i[2]=u*o[2]+h*o[5]+m*o[8],i},l.transformMat4=ii,l.transformMat4$1=Wc,l.transformQuat=IE,l.transitionTileAABBinECEF=FE,l.translate=wf,l.transpose=function(i,n){if(i===n){var o=n[1],u=n[2],h=n[5];i[1]=n[3],i[2]=n[6],i[3]=o,i[5]=n[7],i[6]=u,i[7]=h}else i[0]=n[0],i[1]=n[3],i[2]=n[6],i[3]=n[1],i[4]=n[4],i[5]=n[7],i[6]=n[2],i[7]=n[5],i[8]=n[8];return i},l.triggerPluginCompletionEvent=d,l.uniqueId=Mt,l.updateGlobeVertexNormal=function(i,n,o,u,h){const m=5*n+2;i.float32[m+0]=o,i.float32[m+1]=u,i.float32[m+2]=h},l.validateCustomStyleLayer=function(i){const n=[],o=i.id;return o===void 0&&n.push({message:`layers.${o}: missing required property "id"`}),i.render===void 0&&n.push({message:`layers.${o}: missing required method "render"`}),i.renderingMode&&i.renderingMode!=="2d"&&i.renderingMode!=="3d"&&n.push({message:`layers.${o}: property "renderingMode" must be either "2d" or "3d"`}),n},l.validateFilter=i=>Do(Bc(i)),l.validateFog=i=>Do(ag(i)),l.validateLayer=i=>Do(ng(i)),l.validateLight=i=>Do(og(i)),l.validateSource=i=>Do(ig(i)),l.validateStyle=lg,l.validateTerrain=i=>Do(hf(i)),l.values=nt,l.vectorTile=Pg,l.version=C,l.warnOnce=zt,l.window=w,l.wrap=Be}),f(["./shared"],function(l){function w(_e){if(typeof _e=="number"||typeof _e=="boolean"||typeof _e=="string"||_e==null)return JSON.stringify(_e);if(Array.isArray(_e)){let J="[";for(const ue of _e)J+=`${w(ue)},`;return`${J}]`}let W="{";for(const J of Object.keys(_e).sort())W+=`${J}:${w(_e[J])},`;return`${W}}`}function C(_e){let W="";for(const J of l.refProperties)W+=`/${w(_e[J])}`;return W}class P{constructor(W){this.keyCache={},W&&this.replace(W)}replace(W){this._layerConfigs={},this._layers={},this.update(W,[])}update(W,J){for(const Se of W)this._layerConfigs[Se.id]=Se,(this._layers[Se.id]=l.createStyleLayer(Se)).compileFilter(),this.keyCache[Se.id]&&delete this.keyCache[Se.id];for(const Se of J)delete this.keyCache[Se],delete this._layerConfigs[Se],delete this._layers[Se];this.familiesBySource={};const ue=function(Se,Ie){const Me={};for(let we=0;we<Se.length;we++){const Le=Ie&&Ie[Se[we].id]||C(Se[we]);Ie&&(Ie[Se[we].id]=Le);let Ne=Me[Le];Ne||(Ne=Me[Le]=[]),Ne.push(Se[we])}const De=[];for(const we in Me)De.push(Me[we]);return De}(l.values(this._layerConfigs),this.keyCache);for(const Se of ue){const Ie=Se.map(Je=>this._layers[Je.id]),Me=Ie[0];if(Me.visibility==="none")continue;const De=Me.source||"";let we=this.familiesBySource[De];we||(we=this.familiesBySource[De]={});const Le=Me.sourceLayer||"_geojsonTileLayer";let Ne=we[Le];Ne||(Ne=we[Le]=[]),Ne.push(Ie)}}}class A{loadTile(W,J){const{uid:ue,encoding:Se,rawImageData:Ie,padding:Me,buildQuadTree:De}=W,we=l.window.ImageBitmap&&Ie instanceof l.window.ImageBitmap?this.getImageData(Ie,Me):Ie;J(null,new l.DEMData(ue,we,Se,Me<1,De))}getImageData(W,J){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(W.width,W.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=W.width,this.offscreenCanvas.height=W.height,this.offscreenCanvasContext.drawImage(W,0,0,W.width,W.height);const ue=this.offscreenCanvasContext.getImageData(-J,-J,W.width+2*J,W.height+2*J);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),ue}}function D(_e,W){if(_e.length!==0){N(_e[0],W);for(var J=1;J<_e.length;J++)N(_e[J],!W)}}function N(_e,W){for(var J=0,ue=0,Se=0,Ie=_e.length,Me=Ie-1;Se<Ie;Me=Se++){var De=(_e[Se][0]-_e[Me][0])*(_e[Me][1]+_e[Se][1]),we=J+De;ue+=Math.abs(J)>=Math.abs(De)?J-we+De:De-we+J,J=we}J+ue>=0!=!!W&&_e.reverse()}var F=l.getDefaultExportFromCjs(function _e(W,J){var ue,Se=W&&W.type;if(Se==="FeatureCollection")for(ue=0;ue<W.features.length;ue++)_e(W.features[ue],J);else if(Se==="GeometryCollection")for(ue=0;ue<W.geometries.length;ue++)_e(W.geometries[ue],J);else if(Se==="Feature")_e(W.geometry,J);else if(Se==="Polygon")D(W.coordinates,J);else if(Se==="MultiPolygon")for(ue=0;ue<W.coordinates.length;ue++)D(W.coordinates[ue],J);return W});const U=l.VectorTileFeature.prototype.toGeoJSON;var Z={exports:{}},j=l.pointGeometry,B=l.vectorTile.VectorTileFeature,H=Y;function Y(_e,W){this.options=W||{},this.features=_e,this.length=_e.length}function ne(_e,W){this.id=typeof _e.id=="number"?_e.id:void 0,this.type=_e.type,this.rawGeometry=_e.type===1?[_e.geometry]:_e.geometry,this.properties=_e.tags,this.extent=W||4096}Y.prototype.feature=function(_e){return new ne(this.features[_e],this.options.extent)},ne.prototype.loadGeometry=function(){var _e=this.rawGeometry;this.geometry=[];for(var W=0;W<_e.length;W++){for(var J=_e[W],ue=[],Se=0;Se<J.length;Se++)ue.push(new j(J[Se][0],J[Se][1]));this.geometry.push(ue)}return this.geometry},ne.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var _e=this.geometry,W=1/0,J=-1/0,ue=1/0,Se=-1/0,Ie=0;Ie<_e.length;Ie++)for(var Me=_e[Ie],De=0;De<Me.length;De++){var we=Me[De];W=Math.min(W,we.x),J=Math.max(J,we.x),ue=Math.min(ue,we.y),Se=Math.max(Se,we.y)}return[W,ue,J,Se]},ne.prototype.toGeoJSON=B.prototype.toGeoJSON;var re=l.pbf,Q=H;function te(_e){var W=new re;return function(J,ue){for(var Se in J.layers)ue.writeMessage(3,ee,J.layers[Se])}(_e,W),W.finish()}function ee(_e,W){var J;W.writeVarintField(15,_e.version||1),W.writeStringField(1,_e.name||""),W.writeVarintField(5,_e.extent||4096);var ue={keys:[],values:[],keycache:{},valuecache:{}};for(J=0;J<_e.length;J++)ue.feature=_e.feature(J),W.writeMessage(2,ve,ue);var Se=ue.keys;for(J=0;J<Se.length;J++)W.writeStringField(3,Se[J]);var Ie=ue.values;for(J=0;J<Ie.length;J++)W.writeMessage(4,Fe,Ie[J])}function ve(_e,W){var J=_e.feature;J.id!==void 0&&W.writeVarintField(1,J.id),W.writeMessage(2,he,_e),W.writeVarintField(3,J.type),W.writeMessage(4,Te,J)}function he(_e,W){var J=_e.feature,ue=_e.keys,Se=_e.values,Ie=_e.keycache,Me=_e.valuecache;for(var De in J.properties){var we=J.properties[De],Le=Ie[De];if(we!==null){Le===void 0&&(ue.push(De),Ie[De]=Le=ue.length-1),W.writeVarint(Le);var Ne=typeof we;Ne!=="string"&&Ne!=="boolean"&&Ne!=="number"&&(we=JSON.stringify(we));var Je=Ne+":"+we,Ge=Me[Je];Ge===void 0&&(Se.push(we),Me[Je]=Ge=Se.length-1),W.writeVarint(Ge)}}}function oe(_e,W){return(W<<3)+(7&_e)}function fe(_e){return _e<<1^_e>>31}function Te(_e,W){for(var J=_e.loadGeometry(),ue=_e.type,Se=0,Ie=0,Me=J.length,De=0;De<Me;De++){var we=J[De],Le=1;ue===1&&(Le=we.length),W.writeVarint(oe(1,Le));for(var Ne=ue===3?we.length-1:we.length,Je=0;Je<Ne;Je++){Je===1&&ue!==1&&W.writeVarint(oe(2,Ne-1));var Ge=we[Je].x-Se,_t=we[Je].y-Ie;W.writeVarint(fe(Ge)),W.writeVarint(fe(_t)),Se+=Ge,Ie+=_t}ue===3&&W.writeVarint(oe(7,1))}}function Fe(_e,W){var J=typeof _e;J==="string"?W.writeStringField(1,_e):J==="boolean"?W.writeBooleanField(7,_e):J==="number"&&(_e%1!=0?W.writeDoubleField(3,_e):_e<0?W.writeSVarintField(6,_e):W.writeVarintField(5,_e))}Z.exports=te,Z.exports.fromVectorTileJs=te,Z.exports.fromGeojsonVt=function(_e,W){W=W||{};var J={};for(var ue in _e)J[ue]=new Q(_e[ue].features,W),J[ue].name=ue,J[ue].version=W.version,J[ue].extent=W.extent;return te({layers:J})},Z.exports.GeoJSONWrapper=Q;var $e=l.getDefaultExportFromCjs(Z.exports);const je={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:_e=>_e},pe=Math.fround||(He=new Float32Array(1),_e=>(He[0]=+_e,He[0]));var He;const Be=3,Ze=5,nt=6;class yt{constructor(W){this.options=Object.assign(Object.create(je),W),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(W){const{log:J,minZoom:ue,maxZoom:Se}=this.options;J&&console.time("total time");const Ie=`prepare ${W.length} points`;J&&console.time(Ie),this.points=W;const Me=[];for(let we=0;we<W.length;we++){const Le=W[we];if(!Le.geometry)continue;const[Ne,Je]=Le.geometry.coordinates,Ge=pe(Ft(Ne)),_t=pe(Nt(Je));Me.push(Ge,_t,1/0,we,-1,1),this.options.reduce&&Me.push(0)}let De=this.trees[Se+1]=this._createTree(Me);J&&console.timeEnd(Ie);for(let we=Se;we>=ue;we--){const Le=+Date.now();De=this.trees[we]=this._createTree(this._cluster(De,we)),J&&console.log("z%d: %d clusters in %dms",we,De.numItems,+Date.now()-Le)}return J&&console.timeEnd("total time"),this}getClusters(W,J){let ue=((W[0]+180)%360+360)%360-180;const Se=Math.max(-90,Math.min(90,W[1]));let Ie=W[2]===180?180:((W[2]+180)%360+360)%360-180;const Me=Math.max(-90,Math.min(90,W[3]));if(W[2]-W[0]>=360)ue=-180,Ie=180;else if(ue>Ie){const Je=this.getClusters([ue,Se,180,Me],J),Ge=this.getClusters([-180,Se,Ie,Me],J);return Je.concat(Ge)}const De=this.trees[this._limitZoom(J)],we=De.range(Ft(ue),Nt(Me),Ft(Ie),Nt(Se)),Le=De.data,Ne=[];for(const Je of we){const Ge=this.stride*Je;Ne.push(Le[Ge+Ze]>1?Ot(Le,Ge,this.clusterProps):this.points[Le[Ge+Be]])}return Ne}getChildren(W){const J=this._getOriginId(W),ue=this._getOriginZoom(W),Se="No cluster with the specified id.",Ie=this.trees[ue];if(!Ie)throw new Error(Se);const Me=Ie.data;if(J*this.stride>=Me.length)throw new Error(Se);const De=this.options.radius/(this.options.extent*Math.pow(2,ue-1)),we=Ie.within(Me[J*this.stride],Me[J*this.stride+1],De),Le=[];for(const Ne of we){const Je=Ne*this.stride;Me[Je+4]===W&&Le.push(Me[Je+Ze]>1?Ot(Me,Je,this.clusterProps):this.points[Me[Je+Be]])}if(Le.length===0)throw new Error(Se);return Le}getLeaves(W,J,ue){const Se=[];return this._appendLeaves(Se,W,J=J||10,ue=ue||0,0),Se}getTile(W,J,ue){const Se=this.trees[this._limitZoom(W)],Ie=Math.pow(2,W),{extent:Me,radius:De}=this.options,we=De/Me,Le=(ue-we)/Ie,Ne=(ue+1+we)/Ie,Je={features:[]};return this._addTileFeatures(Se.range((J-we)/Ie,Le,(J+1+we)/Ie,Ne),Se.data,J,ue,Ie,Je),J===0&&this._addTileFeatures(Se.range(1-we/Ie,Le,1,Ne),Se.data,Ie,ue,Ie,Je),J===Ie-1&&this._addTileFeatures(Se.range(0,Le,we/Ie,Ne),Se.data,-1,ue,Ie,Je),Je.features.length?Je:null}getClusterExpansionZoom(W){let J=this._getOriginZoom(W)-1;for(;J<=this.options.maxZoom;){const ue=this.getChildren(W);if(J++,ue.length!==1)break;W=ue[0].properties.cluster_id}return J}_appendLeaves(W,J,ue,Se,Ie){const Me=this.getChildren(J);for(const De of Me){const we=De.properties;if(we&&we.cluster?Ie+we.point_count<=Se?Ie+=we.point_count:Ie=this._appendLeaves(W,we.cluster_id,ue,Se,Ie):Ie<Se?Ie++:W.push(De),W.length===ue)break}return Ie}_createTree(W){const J=new l.KDBush(W.length/this.stride|0,this.options.nodeSize,Float32Array);for(let ue=0;ue<W.length;ue+=this.stride)J.add(W[ue],W[ue+1]);return J.finish(),J.data=W,J}_addTileFeatures(W,J,ue,Se,Ie,Me){for(const De of W){const we=De*this.stride,Le=J[we+Ze]>1;let Ne,Je,Ge;if(Le)Ne=Mt(J,we,this.clusterProps),Je=J[we],Ge=J[we+1];else{const Zt=this.points[J[we+Be]];Ne=Zt.properties;const[un,ln]=Zt.geometry.coordinates;Je=Ft(un),Ge=Nt(ln)}const _t={type:1,geometry:[[Math.round(this.options.extent*(Je*Ie-ue)),Math.round(this.options.extent*(Ge*Ie-Se))]],tags:Ne};let Yt;Yt=Le||this.options.generateId?J[we+Be]:this.points[J[we+Be]].id,Yt!==void 0&&(_t.id=Yt),Me.features.push(_t)}}_limitZoom(W){return Math.max(this.options.minZoom,Math.min(Math.floor(+W),this.options.maxZoom+1))}_cluster(W,J){const{radius:ue,extent:Se,reduce:Ie,minPoints:Me}=this.options,De=ue/(Se*Math.pow(2,J)),we=W.data,Le=[],Ne=this.stride;for(let Je=0;Je<we.length;Je+=Ne){if(we[Je+2]<=J)continue;we[Je+2]=J;const Ge=we[Je],_t=we[Je+1],Yt=W.within(we[Je],we[Je+1],De),Zt=we[Je+Ze];let un=Zt;for(const ln of Yt){const Gn=ln*Ne;we[Gn+2]>J&&(un+=we[Gn+Ze])}if(un>Zt&&un>=Me){let ln,Gn=Ge*Zt,On=_t*Zt,er=-1;const Zn=((Je/Ne|0)<<5)+(J+1)+this.points.length;for(const Zr of Yt){const on=Zr*Ne;if(we[on+2]<=J)continue;we[on+2]=J;const tn=we[on+Ze];Gn+=we[on]*tn,On+=we[on+1]*tn,we[on+4]=Zn,Ie&&(ln||(ln=this._map(we,Je,!0),er=this.clusterProps.length,this.clusterProps.push(ln)),Ie(ln,this._map(we,on)))}we[Je+4]=Zn,Le.push(Gn/un,On/un,1/0,Zn,-1,un),Ie&&Le.push(er)}else{for(let ln=0;ln<Ne;ln++)Le.push(we[Je+ln]);if(un>1)for(const ln of Yt){const Gn=ln*Ne;if(!(we[Gn+2]<=J)){we[Gn+2]=J;for(let On=0;On<Ne;On++)Le.push(we[Gn+On])}}}}return Le}_getOriginId(W){return W-this.points.length>>5}_getOriginZoom(W){return(W-this.points.length)%32}_map(W,J,ue){if(W[J+Ze]>1){const Me=this.clusterProps[W[J+nt]];return ue?Object.assign({},Me):Me}const Se=this.points[W[J+Be]].properties,Ie=this.options.map(Se);return ue&&Ie===Se?Object.assign({},Ie):Ie}}function Ot(_e,W,J){return{type:"Feature",id:_e[W+Be],properties:Mt(_e,W,J),geometry:{type:"Point",coordinates:[(ue=_e[W],360*(ue-.5)),Ct(_e[W+1])]}};var ue}function Mt(_e,W,J){const ue=_e[W+Ze],Se=ue>=1e4?`${Math.round(ue/1e3)}k`:ue>=1e3?Math.round(ue/100)/10+"k":ue,Ie=_e[W+nt],Me=Ie===-1?{}:Object.assign({},J[Ie]);return Object.assign(Me,{cluster:!0,cluster_id:_e[W+Be],point_count:ue,point_count_abbreviated:Se})}function Ft(_e){return _e/360+.5}function Nt(_e){const W=Math.sin(_e*Math.PI/180),J=.5-.25*Math.log((1+W)/(1-W))/Math.PI;return J<0?0:J>1?1:J}function Ct(_e){const W=(180-360*_e)*Math.PI/180;return 360*Math.atan(Math.exp(W))/Math.PI-90}function ut(_e,W,J,ue){for(var Se,Ie=ue,Me=J-W>>1,De=J-W,we=_e[W],Le=_e[W+1],Ne=_e[J],Je=_e[J+1],Ge=W+3;Ge<J;Ge+=3){var _t=At(_e[Ge],_e[Ge+1],we,Le,Ne,Je);if(_t>Ie)Se=Ge,Ie=_t;else if(_t===Ie){var Yt=Math.abs(Ge-Me);Yt<De&&(Se=Ge,De=Yt)}}Ie>ue&&(Se-W>3&&ut(_e,W,Se,ue),_e[Se+2]=Ie,J-Se>3&&ut(_e,Se,J,ue))}function At(_e,W,J,ue,Se,Ie){var Me=Se-J,De=Ie-ue;if(Me!==0||De!==0){var we=((_e-J)*Me+(W-ue)*De)/(Me*Me+De*De);we>1?(J=Se,ue=Ie):we>0&&(J+=Me*we,ue+=De*we)}return(Me=_e-J)*Me+(De=W-ue)*De}function dt(_e,W,J,ue){var Se={id:_e===void 0?null:_e,type:W,geometry:J,tags:ue,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Ie){var Me=Ie.geometry,De=Ie.type;if(De==="Point"||De==="MultiPoint"||De==="LineString")Bt(Ie,Me);else if(De==="Polygon"||De==="MultiLineString")for(var we=0;we<Me.length;we++)Bt(Ie,Me[we]);else if(De==="MultiPolygon")for(we=0;we<Me.length;we++)for(var Le=0;Le<Me[we].length;Le++)Bt(Ie,Me[we][Le])}(Se),Se}function Bt(_e,W){for(var J=0;J<W.length;J+=3)_e.minX=Math.min(_e.minX,W[J]),_e.minY=Math.min(_e.minY,W[J+1]),_e.maxX=Math.max(_e.maxX,W[J]),_e.maxY=Math.max(_e.maxY,W[J+1])}function gt(_e,W,J,ue){if(W.geometry){var Se=W.geometry.coordinates,Ie=W.geometry.type,Me=Math.pow(J.tolerance/((1<<J.maxZoom)*J.extent),2),De=[],we=W.id;if(J.promoteId?we=W.properties[J.promoteId]:J.generateId&&(we=ue||0),Ie==="Point")jt(Se,De);else if(Ie==="MultiPoint")for(var Le=0;Le<Se.length;Le++)jt(Se[Le],De);else if(Ie==="LineString")zt(Se,De,Me,!1);else if(Ie==="MultiLineString"){if(J.lineMetrics){for(Le=0;Le<Se.length;Le++)zt(Se[Le],De=[],Me,!1),_e.push(dt(we,"LineString",De,W.properties));return}an(Se,De,Me,!1)}else if(Ie==="Polygon")an(Se,De,Me,!0);else{if(Ie!=="MultiPolygon"){if(Ie==="GeometryCollection"){for(Le=0;Le<W.geometry.geometries.length;Le++)gt(_e,{id:we,geometry:W.geometry.geometries[Le],properties:W.properties},J,ue);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Le=0;Le<Se.length;Le++){var Ne=[];an(Se[Le],Ne,Me,!0),De.push(Ne)}}_e.push(dt(we,Ie,De,W.properties))}}function jt(_e,W){W.push(Kt(_e[0])),W.push(Ut(_e[1])),W.push(0)}function zt(_e,W,J,ue){for(var Se,Ie,Me=0,De=0;De<_e.length;De++){var we=Kt(_e[De][0]),Le=Ut(_e[De][1]);W.push(we),W.push(Le),W.push(0),De>0&&(Me+=ue?(Se*Le-we*Ie)/2:Math.sqrt(Math.pow(we-Se,2)+Math.pow(Le-Ie,2))),Se=we,Ie=Le}var Ne=W.length-3;W[2]=1,ut(W,0,Ne,J),W[Ne+2]=1,W.size=Math.abs(Me),W.start=0,W.end=W.size}function an(_e,W,J,ue){for(var Se=0;Se<_e.length;Se++){var Ie=[];zt(_e[Se],Ie,J,ue),W.push(Ie)}}function Kt(_e){return _e/360+.5}function Ut(_e){var W=Math.sin(_e*Math.PI/180),J=.5-.25*Math.log((1+W)/(1-W))/Math.PI;return J<0?0:J>1?1:J}function at(_e,W,J,ue,Se,Ie,Me,De){if(ue/=W,Ie>=(J/=W)&&Me<ue)return _e;if(Me<J||Ie>=ue)return null;for(var we=[],Le=0;Le<_e.length;Le++){var Ne=_e[Le],Je=Ne.geometry,Ge=Ne.type,_t=Se===0?Ne.minX:Ne.minY,Yt=Se===0?Ne.maxX:Ne.maxY;if(_t>=J&&Yt<ue)we.push(Ne);else if(!(Yt<J||_t>=ue)){var Zt=[];if(Ge==="Point"||Ge==="MultiPoint")it(Je,Zt,J,ue,Se);else if(Ge==="LineString")Rt(Je,Zt,J,ue,Se,!1,De.lineMetrics);else if(Ge==="MultiLineString")sn(Je,Zt,J,ue,Se,!1);else if(Ge==="Polygon")sn(Je,Zt,J,ue,Se,!0);else if(Ge==="MultiPolygon")for(var un=0;un<Je.length;un++){var ln=[];sn(Je[un],ln,J,ue,Se,!0),ln.length&&Zt.push(ln)}if(Zt.length){if(De.lineMetrics&&Ge==="LineString"){for(un=0;un<Zt.length;un++)we.push(dt(Ne.id,Ge,Zt[un],Ne.tags));continue}Ge!=="LineString"&&Ge!=="MultiLineString"||(Zt.length===1?(Ge="LineString",Zt=Zt[0]):Ge="MultiLineString"),Ge!=="Point"&&Ge!=="MultiPoint"||(Ge=Zt.length===3?"Point":"MultiPoint"),we.push(dt(Ne.id,Ge,Zt,Ne.tags))}}}return we.length?we:null}function it(_e,W,J,ue,Se){for(var Ie=0;Ie<_e.length;Ie+=3){var Me=_e[Ie+Se];Me>=J&&Me<=ue&&(W.push(_e[Ie]),W.push(_e[Ie+1]),W.push(_e[Ie+2]))}}function Rt(_e,W,J,ue,Se,Ie,Me){for(var De,we,Le=bt(_e),Ne=Se===0?Mn:rn,Je=_e.start,Ge=0;Ge<_e.length-3;Ge+=3){var _t=_e[Ge],Yt=_e[Ge+1],Zt=_e[Ge+2],un=_e[Ge+3],ln=_e[Ge+4],Gn=Se===0?_t:Yt,On=Se===0?un:ln,er=!1;Me&&(De=Math.sqrt(Math.pow(_t-un,2)+Math.pow(Yt-ln,2))),Gn<J?On>J&&(we=Ne(Le,_t,Yt,un,ln,J),Me&&(Le.start=Je+De*we)):Gn>ue?On<ue&&(we=Ne(Le,_t,Yt,un,ln,ue),Me&&(Le.start=Je+De*we)):An(Le,_t,Yt,Zt),On<J&&Gn>=J&&(we=Ne(Le,_t,Yt,un,ln,J),er=!0),On>ue&&Gn<=ue&&(we=Ne(Le,_t,Yt,un,ln,ue),er=!0),!Ie&&er&&(Me&&(Le.end=Je+De*we),W.push(Le),Le=bt(_e)),Me&&(Je+=De)}var Zn=_e.length-3;_t=_e[Zn],Yt=_e[Zn+1],Zt=_e[Zn+2],(Gn=Se===0?_t:Yt)>=J&&Gn<=ue&&An(Le,_t,Yt,Zt),Zn=Le.length-3,Ie&&Zn>=3&&(Le[Zn]!==Le[0]||Le[Zn+1]!==Le[1])&&An(Le,Le[0],Le[1],Le[2]),Le.length&&W.push(Le)}function bt(_e){var W=[];return W.size=_e.size,W.start=_e.start,W.end=_e.end,W}function sn(_e,W,J,ue,Se,Ie){for(var Me=0;Me<_e.length;Me++)Rt(_e[Me],W,J,ue,Se,Ie,!1)}function An(_e,W,J,ue){_e.push(W),_e.push(J),_e.push(ue)}function Mn(_e,W,J,ue,Se,Ie){var Me=(Ie-W)/(ue-W);return _e.push(Ie),_e.push(J+(Se-J)*Me),_e.push(1),Me}function rn(_e,W,J,ue,Se,Ie){var Me=(Ie-J)/(Se-J);return _e.push(W+(ue-W)*Me),_e.push(Ie),_e.push(1),Me}function Vn(_e,W){for(var J=[],ue=0;ue<_e.length;ue++){var Se,Ie=_e[ue],Me=Ie.type;if(Me==="Point"||Me==="MultiPoint"||Me==="LineString")Se=Nn(Ie.geometry,W);else if(Me==="MultiLineString"||Me==="Polygon"){Se=[];for(var De=0;De<Ie.geometry.length;De++)Se.push(Nn(Ie.geometry[De],W))}else if(Me==="MultiPolygon")for(Se=[],De=0;De<Ie.geometry.length;De++){for(var we=[],Le=0;Le<Ie.geometry[De].length;Le++)we.push(Nn(Ie.geometry[De][Le],W));Se.push(we)}J.push(dt(Ie.id,Me,Se,Ie.tags))}return J}function Nn(_e,W){var J=[];J.size=_e.size,_e.start!==void 0&&(J.start=_e.start,J.end=_e.end);for(var ue=0;ue<_e.length;ue+=3)J.push(_e[ue]+W,_e[ue+1],_e[ue+2]);return J}function zn(_e,W){if(_e.transformed)return _e;var J,ue,Se,Ie=1<<_e.z,Me=_e.x,De=_e.y;for(J=0;J<_e.features.length;J++){var we=_e.features[J],Le=we.geometry,Ne=we.type;if(we.geometry=[],Ne===1)for(ue=0;ue<Le.length;ue+=2)we.geometry.push(vn(Le[ue],Le[ue+1],W,Ie,Me,De));else for(ue=0;ue<Le.length;ue++){var Je=[];for(Se=0;Se<Le[ue].length;Se+=2)Je.push(vn(Le[ue][Se],Le[ue][Se+1],W,Ie,Me,De));we.geometry.push(Je)}}return _e.transformed=!0,_e}function vn(_e,W,J,ue,Se,Ie){return[Math.round(J*(_e*ue-Se)),Math.round(J*(W*ue-Ie))]}function nn(_e,W,J,ue,Se){for(var Ie=W===Se.maxZoom?0:Se.tolerance/((1<<W)*Se.extent),Me={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:J,y:ue,z:W,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},De=0;De<_e.length;De++){Me.numFeatures++,Wn(Me,_e[De],Ie,Se);var we=_e[De].minX,Le=_e[De].minY,Ne=_e[De].maxX,Je=_e[De].maxY;we<Me.minX&&(Me.minX=we),Le<Me.minY&&(Me.minY=Le),Ne>Me.maxX&&(Me.maxX=Ne),Je>Me.maxY&&(Me.maxY=Je)}return Me}function Wn(_e,W,J,ue){var Se=W.geometry,Ie=W.type,Me=[];if(Ie==="Point"||Ie==="MultiPoint")for(var De=0;De<Se.length;De+=3)Me.push(Se[De]),Me.push(Se[De+1]),_e.numPoints++,_e.numSimplified++;else if(Ie==="LineString")jn(Me,Se,_e,J,!1,!1);else if(Ie==="MultiLineString"||Ie==="Polygon")for(De=0;De<Se.length;De++)jn(Me,Se[De],_e,J,Ie==="Polygon",De===0);else if(Ie==="MultiPolygon")for(var we=0;we<Se.length;we++){var Le=Se[we];for(De=0;De<Le.length;De++)jn(Me,Le[De],_e,J,!0,De===0)}if(Me.length){var Ne=W.tags||null;if(Ie==="LineString"&&ue.lineMetrics){for(var Je in Ne={},W.tags)Ne[Je]=W.tags[Je];Ne.mapbox_clip_start=Se.start/Se.size,Ne.mapbox_clip_end=Se.end/Se.size}var Ge={geometry:Me,type:Ie==="Polygon"||Ie==="MultiPolygon"?3:Ie==="LineString"||Ie==="MultiLineString"?2:1,tags:Ne};W.id!==null&&(Ge.id=W.id),_e.features.push(Ge)}}function jn(_e,W,J,ue,Se,Ie){var Me=ue*ue;if(ue>0&&W.size<(Se?Me:ue))J.numPoints+=W.length/3;else{for(var De=[],we=0;we<W.length;we+=3)(ue===0||W[we+2]>Me)&&(J.numSimplified++,De.push(W[we]),De.push(W[we+1])),J.numPoints++;Se&&function(Le,Ne){for(var Je=0,Ge=0,_t=Le.length,Yt=_t-2;Ge<_t;Yt=Ge,Ge+=2)Je+=(Le[Ge]-Le[Yt])*(Le[Ge+1]+Le[Yt+1]);if(Je>0===Ne)for(Ge=0,_t=Le.length;Ge<_t/2;Ge+=2){var Zt=Le[Ge],un=Le[Ge+1];Le[Ge]=Le[_t-2-Ge],Le[Ge+1]=Le[_t-1-Ge],Le[_t-2-Ge]=Zt,Le[_t-1-Ge]=un}}(De,Ie),_e.push(De)}}function fr(_e,W){var J=(W=this.options=function(Se,Ie){for(var Me in Ie)Se[Me]=Ie[Me];return Se}(Object.create(this.options),W)).debug;if(J&&console.time("preprocess data"),W.maxZoom<0||W.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(W.promoteId&&W.generateId)throw new Error("promoteId and generateId cannot be used together.");var ue=function(Se,Ie){var Me=[];if(Se.type==="FeatureCollection")for(var De=0;De<Se.features.length;De++)gt(Me,Se.features[De],Ie,De);else gt(Me,Se.type==="Feature"?Se:{geometry:Se},Ie);return Me}(_e,W);this.tiles={},this.tileCoords=[],J&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",W.indexMaxZoom,W.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),ue=function(Se,Ie){var Me=Ie.buffer/Ie.extent,De=Se,we=at(Se,1,-1-Me,Me,0,-1,2,Ie),Le=at(Se,1,1-Me,2+Me,0,-1,2,Ie);return(we||Le)&&(De=at(Se,1,-Me,1+Me,0,-1,2,Ie)||[],we&&(De=Vn(we,1).concat(De)),Le&&(De=De.concat(Vn(Le,-1)))),De}(ue,W),ue.length&&this.splitTile(ue,0,0,0),J&&(ue.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function or(_e,W,J){return 32*((1<<_e)*J+W)+_e}function qn(_e,W){const J=_e.tileID.canonical;if(!this._geoJSONIndex)return W(null,null);const ue=this._geoJSONIndex.getTile(J.z,J.x,J.y);if(!ue)return W(null,null);const Se=new class{constructor(Me){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=l.EXTENT,this.length=Me.length,this._features=Me}feature(Me){return new class{constructor(De){this._feature=De,this.extent=l.EXTENT,this.type=De.type,this.properties=De.tags,"id"in De&&!isNaN(De.id)&&(this.id=parseInt(De.id,10))}loadGeometry(){if(this._feature.type===1){const De=[];for(const we of this._feature.geometry)De.push([new l.Point(we[0],we[1])]);return De}{const De=[];for(const we of this._feature.geometry){const Le=[];for(const Ne of we)Le.push(new l.Point(Ne[0],Ne[1]));De.push(Le)}return De}}toGeoJSON(De,we,Le){return U.call(this,De,we,Le)}}(this._features[Me])}}(ue.features);let Ie=$e(Se);Ie.byteOffset===0&&Ie.byteLength===Ie.buffer.byteLength||(Ie=new Uint8Array(Ie)),W(null,{vectorTile:Se,rawData:Ie.buffer})}fr.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},fr.prototype.splitTile=function(_e,W,J,ue,Se,Ie,Me){for(var De=[_e,W,J,ue],we=this.options,Le=we.debug;De.length;){ue=De.pop(),J=De.pop(),W=De.pop(),_e=De.pop();var Ne=1<<W,Je=or(W,J,ue),Ge=this.tiles[Je];if(!Ge&&(Le>1&&console.time("creation"),Ge=this.tiles[Je]=nn(_e,W,J,ue,we),this.tileCoords.push({z:W,x:J,y:ue}),Le)){Le>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",W,J,ue,Ge.numFeatures,Ge.numPoints,Ge.numSimplified),console.timeEnd("creation"));var _t="z"+W;this.stats[_t]=(this.stats[_t]||0)+1,this.total++}if(Ge.source=_e,Se){if(W===we.maxZoom||W===Se)continue;var Yt=1<<Se-W;if(J!==Math.floor(Ie/Yt)||ue!==Math.floor(Me/Yt))continue}else if(W===we.indexMaxZoom||Ge.numPoints<=we.indexMaxPoints)continue;if(Ge.source=null,_e.length!==0){Le>1&&console.time("clipping");var Zt,un,ln,Gn,On,er,Zn=.5*we.buffer/we.extent,Zr=.5-Zn,on=.5+Zn,tn=1+Zn;Zt=un=ln=Gn=null,On=at(_e,Ne,J-Zn,J+on,0,Ge.minX,Ge.maxX,we),er=at(_e,Ne,J+Zr,J+tn,0,Ge.minX,Ge.maxX,we),_e=null,On&&(Zt=at(On,Ne,ue-Zn,ue+on,1,Ge.minY,Ge.maxY,we),un=at(On,Ne,ue+Zr,ue+tn,1,Ge.minY,Ge.maxY,we),On=null),er&&(ln=at(er,Ne,ue-Zn,ue+on,1,Ge.minY,Ge.maxY,we),Gn=at(er,Ne,ue+Zr,ue+tn,1,Ge.minY,Ge.maxY,we),er=null),Le>1&&console.timeEnd("clipping"),De.push(Zt||[],W+1,2*J,2*ue),De.push(un||[],W+1,2*J,2*ue+1),De.push(ln||[],W+1,2*J+1,2*ue),De.push(Gn||[],W+1,2*J+1,2*ue+1)}}},fr.prototype.getTile=function(_e,W,J){var ue=this.options,Se=ue.extent,Ie=ue.debug;if(_e<0||_e>24)return null;var Me=1<<_e,De=or(_e,W=(W%Me+Me)%Me,J);if(this.tiles[De])return zn(this.tiles[De],Se);Ie>1&&console.log("drilling down to z%d-%d-%d",_e,W,J);for(var we,Le=_e,Ne=W,Je=J;!we&&Le>0;)Le--,Ne=Math.floor(Ne/2),Je=Math.floor(Je/2),we=this.tiles[or(Le,Ne,Je)];return we&&we.source?(Ie>1&&console.log("found parent tile z%d-%d-%d",Le,Ne,Je),Ie>1&&console.time("drilling down"),this.splitTile(we.source,Le,Ne,Je,_e,W,J),Ie>1&&console.timeEnd("drilling down"),this.tiles[De]?zn(this.tiles[De],Se):null):null};class Qn extends l.VectorTileWorkerSource{constructor(W,J,ue,Se,Ie){super(W,J,ue,Se,qn),Ie&&(this.loadGeoJSON=Ie)}loadData(W,J){const ue=W&&W.request,Se=ue&&ue.collectResourceTiming;this.loadGeoJSON(W,(Ie,Me)=>{if(Ie||!Me)return J(Ie);if(typeof Me!="object")return J(new Error(`Input data given to '${W.source}' is not a valid GeoJSON object.`));{F(Me,!0);try{if(W.filter){const we=l.createExpression(W.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(we.result==="error")throw new Error(we.value.map(Ne=>`${Ne.key}: ${Ne.message}`).join(", "));Me={type:"FeatureCollection",features:Me.features.filter(Ne=>we.value.evaluate({zoom:0},Ne))}}this._geoJSONIndex=W.cluster?new yt(function({superclusterOptions:we,clusterProperties:Le}){if(!Le||!we)return we;const Ne={},Je={},Ge={accumulated:null,zoom:0},_t={properties:null},Yt=Object.keys(Le);for(const Zt of Yt){const[un,ln]=Le[Zt],Gn=l.createExpression(ln),On=l.createExpression(typeof un=="string"?[un,["accumulated"],["get",Zt]]:un);Ne[Zt]=Gn.value,Je[Zt]=On.value}return we.map=Zt=>{_t.properties=Zt;const un={};for(const ln of Yt)un[ln]=Ne[ln].evaluate(Ge,_t);return un},we.reduce=(Zt,un)=>{_t.properties=un;for(const ln of Yt)Ge.accumulated=Zt[ln],Zt[ln]=Je[ln].evaluate(Ge,_t)},we}(W)).load(Me.features):function(we,Le){return new fr(we,Le)}(Me,W.geojsonVtOptions)}catch(we){return J(we)}this.loaded={};const De={};if(Se){const we=l.getPerformanceMeasurement(ue);we&&(De.resourceTiming={},De.resourceTiming[W.source]=JSON.parse(JSON.stringify(we)))}J(null,De)}})}reloadTile(W,J){const ue=this.loaded;return ue&&ue[W.uid]?super.reloadTile(W,J):this.loadTile(W,J)}loadGeoJSON(W,J){if(W.request)l.getJSON(W.request,J);else{if(typeof W.data!="string")return J(new Error(`Input data given to '${W.source}' is not a valid GeoJSON object.`));try{return J(null,JSON.parse(W.data))}catch{return J(new Error(`Input data given to '${W.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(W,J){try{J(null,this._geoJSONIndex.getClusterExpansionZoom(W.clusterId))}catch(ue){J(ue)}}getClusterChildren(W,J){try{J(null,this._geoJSONIndex.getChildren(W.clusterId))}catch(ue){J(ue)}}getClusterLeaves(W,J){try{J(null,this._geoJSONIndex.getLeaves(W.clusterId,W.limit,W.offset))}catch(ue){J(ue)}}}class Rr{constructor(W){this.self=W,this.actor=new l.Actor(W,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=l.getProjection({name:"mercator"}),this.workerSourceTypes={vector:l.VectorTileWorkerSource,geojson:Qn},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(J,ue)=>{if(this.workerSourceTypes[J])throw new Error(`Worker source with name "${J}" already registered.`);this.workerSourceTypes[J]=ue},this.self.registerRTLTextPlugin=J=>{if(l.plugin.isParsed())throw new Error("RTL text plugin already registered.");l.plugin.applyArabicShaping=J.applyArabicShaping,l.plugin.processBidirectionalText=J.processBidirectionalText,l.plugin.processStyledBidirectionalText=J.processStyledBidirectionalText}}clearCaches(W,J,ue){delete this.layerIndexes[W],delete this.availableImages[W],delete this.workerSources[W],delete this.demWorkerSources[W],ue()}checkIfReady(W,J,ue){ue()}setReferrer(W,J){this.referrer=J}spriteLoaded(W,J){this.isSpriteLoaded[W]=J;for(const ue in this.workerSources[W]){const Se=this.workerSources[W][ue];for(const Ie in Se)Se[Ie]instanceof l.VectorTileWorkerSource&&(Se[Ie].isSpriteLoaded=J,Se[Ie].fire(new l.Event("isSpriteLoaded")))}}setImages(W,J,ue){this.availableImages[W]=J;for(const Se in this.workerSources[W]){const Ie=this.workerSources[W][Se];for(const Me in Ie)Ie[Me].availableImages=J}ue()}enableTerrain(W,J,ue){this.terrain=J,ue()}setProjection(W,J){this.projections[W]=l.getProjection(J)}setLayers(W,J,ue){this.getLayerIndex(W).replace(J),ue()}updateLayers(W,J,ue){this.getLayerIndex(W).update(J.layers,J.removedIds),ue()}loadTile(W,J,ue){const Se=this.enableTerrain?l.extend({enableTerrain:this.terrain},J):J;Se.projection=this.projections[W]||this.defaultProjection,this.getWorkerSource(W,J.type,J.source).loadTile(Se,ue)}loadDEMTile(W,J,ue){const Se=this.enableTerrain?l.extend({buildQuadTree:this.terrain},J):J;this.getDEMWorkerSource(W,J.source).loadTile(Se,ue)}reloadTile(W,J,ue){const Se=this.enableTerrain?l.extend({enableTerrain:this.terrain},J):J;Se.projection=this.projections[W]||this.defaultProjection,this.getWorkerSource(W,J.type,J.source).reloadTile(Se,ue)}abortTile(W,J,ue){this.getWorkerSource(W,J.type,J.source).abortTile(J,ue)}removeTile(W,J,ue){this.getWorkerSource(W,J.type,J.source).removeTile(J,ue)}removeSource(W,J,ue){if(!this.workerSources[W]||!this.workerSources[W][J.type]||!this.workerSources[W][J.type][J.source])return;const Se=this.workerSources[W][J.type][J.source];delete this.workerSources[W][J.type][J.source],Se.removeSource!==void 0?Se.removeSource(J,ue):ue()}loadWorkerSource(W,J,ue){try{this.self.importScripts(J.url),ue()}catch(Se){ue(Se.toString())}}syncRTLPluginState(W,J,ue){try{l.plugin.setState(J);const Se=l.plugin.getPluginURL();if(l.plugin.isLoaded()&&!l.plugin.isParsed()&&Se!=null){this.self.importScripts(Se);const Ie=l.plugin.isParsed();ue(Ie?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Se}`),Ie)}}catch(Se){ue(Se.toString())}}getAvailableImages(W){let J=this.availableImages[W];return J||(J=[]),J}getLayerIndex(W){let J=this.layerIndexes[W];return J||(J=this.layerIndexes[W]=new P),J}getWorkerSource(W,J,ue){if(this.workerSources[W]||(this.workerSources[W]={}),this.workerSources[W][J]||(this.workerSources[W][J]={}),!this.workerSources[W][J][ue]){const Se={send:(Ie,Me,De,we,Le,Ne)=>{this.actor.send(Ie,Me,De,W,Le,Ne)},scheduler:this.actor.scheduler};this.workerSources[W][J][ue]=new this.workerSourceTypes[J](Se,this.getLayerIndex(W),this.getAvailableImages(W),this.isSpriteLoaded[W])}return this.workerSources[W][J][ue]}getDEMWorkerSource(W,J){return this.demWorkerSources[W]||(this.demWorkerSources[W]={}),this.demWorkerSources[W][J]||(this.demWorkerSources[W][J]=new A),this.demWorkerSources[W][J]}enforceCacheSizeLimit(W,J){l.enforceCacheSizeLimit(J)}getWorkerPerformanceMetrics(W,J,ue){ue(void 0,void 0)}}return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new Rr(self)),Rr}),f(["./shared"],function(l){function w(p,s){if(Array.isArray(p)){if(!Array.isArray(s)||p.length!==s.length)return!1;for(let d=0;d<p.length;d++)if(!w(p[d],s[d]))return!1;return!0}if(typeof p=="object"&&p!==null&&s!==null){if(typeof s!="object"||Object.keys(p).length!==Object.keys(s).length)return!1;for(const d in p)if(!w(p[d],s[d]))return!1;return!0}return p===s}var C=P;function P(p){return!function(s){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var g,_,b=new Blob([""],{type:"text/javascript"}),I=URL.createObjectURL(b);try{_=new Worker(I),g=!0}catch{g=!1}return _&&_.terminate(),URL.revokeObjectURL(I),g}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var g=document.createElement("canvas");g.width=g.height=1;var _=g.getContext("2d");if(!_)return!1;var b=_.getImageData(0,0,1,1);return b&&b.width===g.width}()?(A[d=s&&s.failIfMajorPerformanceCaveat]===void 0&&(A[d]=function(g){var _,b=function(I){var M=document.createElement("canvas"),O=Object.create(P.webGLContextAttributes);return O.failIfMajorPerformanceCaveat=I,M.getContext("webgl",O)||M.getContext("experimental-webgl",O)}(g);if(!b)return!1;try{_=b.createShader(b.VERTEX_SHADER)}catch{return!1}return!(!_||b.isContextLost())&&(b.shaderSource(_,"void main() {}"),b.compileShader(_),b.getShaderParameter(_,b.COMPILE_STATUS)===!0)}(d)),A[d]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var d}(p)}var A={};function D(p,s,d){const g=l.window.document.createElement(p);return s!==void 0&&(g.className=s),d&&d.appendChild(g),g}function N(p,s,d){const g=l.window.document.createElementNS("http://www.w3.org/2000/svg",p);for(const _ of Object.keys(s))g.setAttributeNS(null,_,s[_]);return d&&d.appendChild(g),g}P.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const F=l.window.document&&l.window.document.documentElement.style,U=F&&F.userSelect!==void 0?"userSelect":"WebkitUserSelect";let Z;function j(){F&&U&&(Z=F[U],F[U]="none")}function B(){F&&U&&(F[U]=Z)}function H(p){p.preventDefault(),p.stopPropagation(),l.window.removeEventListener("click",H,!0)}function Y(){l.window.addEventListener("click",H,!0),l.window.setTimeout(()=>{l.window.removeEventListener("click",H,!0)},0)}function ne(p,s){const d=p.getBoundingClientRect();return te(p,d,s)}function re(p,s){const d=p.getBoundingClientRect(),g=[];for(let _=0;_<s.length;_++)g.push(te(p,d,s[_]));return g}function Q(p){return l.window.InstallTrigger!==void 0&&p.button===2&&p.ctrlKey&&l.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:p.button}function te(p,s,d){const g=p.offsetWidth===s.width?1:p.offsetWidth/s.width;return new l.Point((d.clientX-s.left)*g,(d.clientY-s.top)*g)}function ee(p,s){var d=s[0],g=s[1],_=s[2],b=s[3],I=d*b-_*g;return I?(p[0]=b*(I=1/I),p[1]=-g*I,p[2]=-_*I,p[3]=d*I,p):null}function ve(p){const{userImage:s}=p;return!!(s&&s.render&&s.render())&&(p.data.replace(new Uint8Array(s.data.buffer)),!0)}class he extends l.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new l.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(s){if(this.loaded!==s&&(this.loaded=s,s)){for(const{ids:d,callback:g}of this.requestors)this._notify(d,g);this.requestors=[]}}hasImage(s){return!!this.getImage(s)}getImage(s){return this.images[s]}addImage(s,d){this._validate(s,d)&&(this.images[s]=d)}_validate(s,d){let g=!0;return this._validateStretch(d.stretchX,d.data&&d.data.width)||(this.fire(new l.ErrorEvent(new Error(`Image "${s}" has invalid "stretchX" value`))),g=!1),this._validateStretch(d.stretchY,d.data&&d.data.height)||(this.fire(new l.ErrorEvent(new Error(`Image "${s}" has invalid "stretchY" value`))),g=!1),this._validateContent(d.content,d)||(this.fire(new l.ErrorEvent(new Error(`Image "${s}" has invalid "content" value`))),g=!1),g}_validateStretch(s,d){if(!s)return!0;let g=0;for(const _ of s){if(_[0]<g||_[1]<_[0]||d<_[1])return!1;g=_[1]}return!0}_validateContent(s,d){return!(s&&(s.length!==4||s[0]<0||d.data.width<s[0]||s[1]<0||d.data.height<s[1]||s[2]<0||d.data.width<s[2]||s[3]<0||d.data.height<s[3]||s[2]<s[0]||s[3]<s[1]))}updateImage(s,d){d.version=this.images[s].version+1,this.images[s]=d,this.updatedImages[s]=!0}removeImage(s){const d=this.images[s];delete this.images[s],delete this.patterns[s],d.userImage&&d.userImage.onRemove&&d.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(s,d){let g=!0;if(!this.isLoaded())for(const _ of s)this.images[_]||(g=!1);this.isLoaded()||g?this._notify(s,d):this.requestors.push({ids:s,callback:d})}_notify(s,d){const g={};for(const _ of s){this.images[_]||this.fire(new l.Event("styleimagemissing",{id:_}));const b=this.images[_];b?g[_]={data:b.data.clone(),pixelRatio:b.pixelRatio,sdf:b.sdf,version:b.version,stretchX:b.stretchX,stretchY:b.stretchY,content:b.content,hasRenderCallback:!!(b.userImage&&b.userImage.render)}:l.warnOnce(`Image "${_}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}d(null,g)}getPixelSize(){const{width:s,height:d}=this.atlasImage;return{width:s,height:d}}getPattern(s){const d=this.patterns[s],g=this.getImage(s);if(!g)return null;if(d&&d.position.version===g.version)return d.position;if(d)d.position.version=g.version;else{const _={w:g.data.width+2,h:g.data.height+2,x:0,y:0},b=new l.ImagePosition(_,g);this.patterns[s]={bin:_,position:b}}return this._updatePatternAtlas(),this.patterns[s].position}bind(s){const d=s.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new l.Texture(s,this.atlasImage,d.RGBA),this.atlasTexture&&this.atlasTexture.bind(d.LINEAR,d.CLAMP_TO_EDGE)}_updatePatternAtlas(){const s=[];for(const b in this.patterns)s.push(this.patterns[b].bin);const{w:d,h:g}=l.potpack(s),_=this.atlasImage;_.resize({width:d||1,height:g||1});for(const b in this.patterns){const{bin:I}=this.patterns[b],M=I.x+1,O=I.y+1,$=this.images[b].data,k=$.width,q=$.height;l.RGBAImage.copy($,_,{x:0,y:0},{x:M,y:O},{width:k,height:q}),l.RGBAImage.copy($,_,{x:0,y:q-1},{x:M,y:O-1},{width:k,height:1}),l.RGBAImage.copy($,_,{x:0,y:0},{x:M,y:O+q},{width:k,height:1}),l.RGBAImage.copy($,_,{x:k-1,y:0},{x:M-1,y:O},{width:1,height:q}),l.RGBAImage.copy($,_,{x:0,y:0},{x:M+k,y:O},{width:1,height:q})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(s){for(const d of s){if(this.callbackDispatchedThisFrame[d])continue;this.callbackDispatchedThisFrame[d]=!0;const g=this.images[d];ve(g)&&this.updateImage(d,g)}}}const oe=new l.Properties({anchor:new l.DataConstantProperty(l.spec.light.anchor),position:new class{constructor(){this.specification=l.spec.light.position}possiblyEvaluate(p,s){return function([d,g,_]){const b=l.degToRad(g+90),I=l.degToRad(_);return{x:d*Math.cos(b)*Math.sin(I),y:d*Math.sin(b)*Math.sin(I),z:d*Math.cos(I),azimuthal:g,polar:_}}(p.expression.evaluate(s))}interpolate(p,s,d){return{x:l.number(p.x,s.x,d),y:l.number(p.y,s.y,d),z:l.number(p.z,s.z,d),azimuthal:l.number(p.azimuthal,s.azimuthal,d),polar:l.number(p.polar,s.polar,d)}}},color:new l.DataConstantProperty(l.spec.light.color),intensity:new l.DataConstantProperty(l.spec.light.intensity)});class fe extends l.Evented{constructor(s){super(),this._transitionable=new l.Transitionable(oe),this.setLight(s),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(s,d={}){if(!this._validate(l.validateLight,s,d))for(const g in s){const _=s[g];l.endsWith(g,"-transition")?this._transitionable.setTransition(g.slice(0,-11),_):this._transitionable.setValue(g,_)}}updateTransitions(s){this._transitioning=this._transitionable.transitioned(s,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(s){this.properties=this._transitioning.possiblyEvaluate(s)}_validate(s,d,g){return(!g||g.validate!==!1)&&l.emitValidationErrors(this,s.call(l.validateStyle,l.extend({value:d,style:{glyphs:!0,sprite:!0},styleSpec:l.spec})))}}const Te=new l.Properties({source:new l.DataConstantProperty(l.spec.terrain.source),exaggeration:new l.DataConstantProperty(l.spec.terrain.exaggeration)});let Fe=class extends l.Evented{constructor(p,s){super(),this._transitionable=new l.Transitionable(Te),this.set(p),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=s}get(){return this._transitionable.serialize()}set(p){for(const s in p){const d=p[s];l.endsWith(s,"-transition")?this._transitionable.setTransition(s.slice(0,-11),d):this._transitionable.setValue(s,d)}}updateTransitions(p){this._transitioning=this._transitionable.transitioned(p,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(p){this.properties=this._transitioning.possiblyEvaluate(p)}};function $e(p,s,d,g){const _=l.smoothstep(45,65,d),[b,I]=je(p,g),M=l.length(s);let O=1-Math.min(1,Math.exp((M-b)/(I-b)*-6));return O*=O*O,O=Math.min(1,1.00747*O),O*_*p.alpha}function je(p,s){const d=.5/Math.tan(.5*s);return[p.range[0]+d,p.range[1]+d]}const pe=new l.Properties({range:new l.DataConstantProperty(l.spec.fog.range),color:new l.DataConstantProperty(l.spec.fog.color),"high-color":new l.DataConstantProperty(l.spec.fog["high-color"]),"space-color":new l.DataConstantProperty(l.spec.fog["space-color"]),"horizon-blend":new l.DataConstantProperty(l.spec.fog["horizon-blend"]),"star-intensity":new l.DataConstantProperty(l.spec.fog["star-intensity"])});class He extends l.Evented{constructor(s,d){super(),this._transitionable=new l.Transitionable(pe),this.set(s),this._transitioning=this._transitionable.untransitioned(),this._transform=d}get state(){const s=this._transform,d=s.projection.name==="globe",g=l.globeToMercatorTransition(s.zoom),_=this.properties.get("range"),b=[.5,3];return{range:d?[l.number(b[0],_[0],g),l.number(b[1],_[1],g)]:_,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(s,d={}){if(!this._validate(l.validateFog,s,d)){for(const g of Object.keys(l.spec.fog))s&&s[g]===void 0&&(s[g]=l.spec.fog[g].default);for(const g in s){const _=s[g];l.endsWith(g,"-transition")?this._transitionable.setTransition(g.slice(0,-11),_):this._transitionable.setValue(g,_)}}}getOpacity(s){if(!this._transform.projection.supportsFog)return 0;const d=this.properties&&this.properties.get("color")||1;return(this._transform.projection.name==="globe"?1:l.smoothstep(45,65,s))*d.a}getOpacityAtLatLng(s,d){return this._transform.projection.supportsFog?function(g,_,b){const I=l.MercatorCoordinate.fromLngLat(_),M=b.elevation?b.elevation.getAtPointOrZero(I):0,O=[I.x,I.y,M];return l.transformMat4(O,O,b.mercatorFogMatrix),$e(g,O,b.pitch,b._fov)}(this.state,s,d):0}getFovAdjustedRange(s){return this._transform.projection.supportsFog?je(this.state,s):[0,1]}updateTransitions(s){this._transitioning=this._transitionable.transitioned(s,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(s){this.properties=this._transitioning.possiblyEvaluate(s)}_validate(s,d,g){return(!g||g.validate!==!1)&&l.emitValidationErrors(this,s.call(l.validateStyle,l.extend({value:d,style:{glyphs:!0,sprite:!0},styleSpec:l.spec})))}}class Be{constructor(s,d){this.workerPool=s,this.actors=[],this.currentActor=0,this.id=l.uniqueId();const g=this.workerPool.acquire(this.id);for(let _=0;_<g.length;_++){const b=new Be.Actor(g[_],d,this.id);b.name=`Worker ${_}`,this.actors.push(b)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(s,d,g){l.asyncAll(this.actors,(_,b)=>{_.send(s,d,b)},g=g||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(s=>{s.remove()}),this.actors=[],this.workerPool.release(this.id)}}function Ze(p,s,d){return s*(l.EXTENT/(p.tileSize*Math.pow(2,d-p.tileID.overscaledZ)))}Be.Actor=l.Actor;class nt{constructor(s,d,g,_){this.screenBounds=s,this.cameraPoint=d,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=g,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,_)}static createFromScreenPoints(s,d){let g,_;if(s instanceof l.Point||typeof s[0]=="number"){const b=l.Point.convert(s);g=[b],_=d.isPointAboveHorizon(b)}else{const b=l.Point.convert(s[0]),I=l.Point.convert(s[1]);g=[b,I],_=l.polygonizeBounds(b,I).every(M=>d.isPointAboveHorizon(M))}return new nt(g,d.getCameraPoint(),_,d)}isPointQuery(){return this.screenBounds.length===1}bufferedScreenGeometry(s){return l.polygonizeBounds(this.screenBounds[0],this.screenBounds.length===1?this.screenBounds[0]:this.screenBounds[1],s)}bufferedCameraGeometry(s){const d=this.screenBounds[0],g=this.screenBounds.length===1?this.screenBounds[0].add(new l.Point(1,1)):this.screenBounds[1],_=l.polygonizeBounds(d,g,0,!1);return this.cameraPoint.y>g.y&&(this.cameraPoint.x>d.x&&this.cameraPoint.x<g.x?_.splice(3,0,this.cameraPoint):this.cameraPoint.x>=g.x?_[2]=this.cameraPoint:this.cameraPoint.x<=d.x&&(_[3]=this.cameraPoint)),l.bufferConvexPolygon(_,s)}bufferedCameraGeometryGlobe(s){const d=this.screenBounds[0],g=this.screenBounds.length===1?this.screenBounds[0].add(new l.Point(1,1)):this.screenBounds[1],_=l.polygonizeBounds(d,g,s),b=this.cameraPoint.clone();switch(3*((b.y>d.y)+(b.y>g.y))+((b.x>d.x)+(b.x>g.x))){case 0:_[0]=b,_[4]=b.clone();break;case 1:_.splice(1,0,b);break;case 2:_[1]=b;break;case 3:_.splice(4,0,b);break;case 5:_.splice(2,0,b);break;case 6:_[3]=b;break;case 7:_.splice(3,0,b);break;case 8:_[2]=b}return _}containsTile(s,d,g,_=0){const b=s.queryPadding/d._pixelsPerMercatorPixel+1,I=g?this._bufferedCameraMercator(b,d):this._bufferedScreenMercator(b,d);let M=s.tileID.wrap+(I.unwrapped?_:0);const O=I.polygon.map(me=>l.getTilePoint(s.tileTransform,me,M));if(!l.polygonIntersectsBox(O,0,0,l.EXTENT,l.EXTENT))return;M=s.tileID.wrap+(this.screenGeometryMercator.unwrapped?_:0);const $=this.screenGeometryMercator.polygon.map(me=>l.getTileVec3(s.tileTransform,me,M)),k=$.map(me=>new l.Point(me[0],me[1])),q=d.getFreeCameraOptions().position||new l.MercatorCoordinate(0,0,0),ie=l.getTileVec3(s.tileTransform,q,M),le=$.map(me=>{const X=l.sub(me,me,ie);return l.normalize(X,X),new l.Ray(ie,X)}),de=Ze(s,1,d.zoom)*d._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:k,tilespaceRays:le,bufferedTilespaceGeometry:O,bufferedTilespaceBounds:(ce=l.getBounds(O),ce.min.x=l.clamp(ce.min.x,0,l.EXTENT),ce.min.y=l.clamp(ce.min.y,0,l.EXTENT),ce.max.x=l.clamp(ce.max.x,0,l.EXTENT),ce.max.y=l.clamp(ce.max.y,0,l.EXTENT),ce),tile:s,tileID:s.tileID,pixelToTileUnitsFactor:de};var ce}_bufferedScreenMercator(s,d){const g=Mt(s);if(this._screenRaycastCache[g])return this._screenRaycastCache[g];{let _;return _=d.projection.name==="globe"?this._projectAndResample(this.bufferedScreenGeometry(s),d):{polygon:this.bufferedScreenGeometry(s).map(b=>d.pointCoordinate3D(b)),unwrapped:!0},this._screenRaycastCache[g]=_,_}}_bufferedCameraMercator(s,d){const g=Mt(s);if(this._cameraRaycastCache[g])return this._cameraRaycastCache[g];{let _;return _=d.projection.name==="globe"?this._projectAndResample(this.bufferedCameraGeometryGlobe(s),d):{polygon:this.bufferedCameraGeometry(s).map(b=>d.pointCoordinate3D(b)),unwrapped:!0},this._cameraRaycastCache[g]=_,_}}_projectAndResample(s,d){const g=function(b,I){const M=l.multiply([],I.pixelMatrix,I.globeMatrix),O=[0,-l.GLOBE_RADIUS,0,1],$=[0,l.GLOBE_RADIUS,0,1],k=[0,0,0,1];l.transformMat4$1(O,O,M),l.transformMat4$1($,$,M),l.transformMat4$1(k,k,M);const q=new l.Point(O[0]/O[3],O[1]/O[3]),ie=new l.Point($[0]/$[3],$[1]/$[3]),le=l.polygonContainsPoint(b,q)&&O[3]<k[3],de=l.polygonContainsPoint(b,ie)&&$[3]<k[3];if(!le&&!de)return null;const ce=function(Oe,Ve,Ue){for(let Ke=1;Ke<Oe.length;Ke++){const wt=Ot(Ve.pointCoordinate3D(Oe[Ke-1]).x),We=Ot(Ve.pointCoordinate3D(Oe[Ke]).x);if(Ue<0){if(wt<We)return{idx:Ke,t:-wt/(We-1-wt)}}else if(We<wt)return{idx:Ke,t:(1-wt)/(We+1-wt)}}return null}(b,I,le?-1:1);if(!ce)return null;const{idx:me,t:X}=ce;let se=me>1?yt(b.slice(0,me),I):[],xe=me<b.length?yt(b.slice(me),I):[];se=se.map(Oe=>new l.Point(Ot(Oe.x),Oe.y)),xe=xe.map(Oe=>new l.Point(Ot(Oe.x),Oe.y));const be=[...se];be.length===0&&be.push(xe[xe.length-1]);const Re=l.number(be[be.length-1].y,(xe.length===0?se[0]:xe[0]).y,X);let ze;return ze=le?[new l.Point(0,Re),new l.Point(0,0),new l.Point(1,0),new l.Point(1,Re)]:[new l.Point(1,Re),new l.Point(1,1),new l.Point(0,1),new l.Point(0,Re)],be.push(...ze),xe.length===0?be.push(se[0]):be.push(...xe),{polygon:be.map(Oe=>new l.MercatorCoordinate(Oe.x,Oe.y)),unwrapped:!1}}(s,d);if(g)return g;const _=function(b,I){let M=!1,O=-1/0,$=0;for(let q=0;q<b.length-1;q++)b[q].x>O&&(O=b[q].x,$=q);for(let q=0;q<b.length-1;q++){const ie=($+q)%(b.length-1),le=b[ie],de=b[ie+1];Math.abs(le.x-de.x)>.5&&(le.x<de.x?(le.x+=1,ie===0&&(b[b.length-1].x+=1)):(de.x+=1,ie+1===b.length-1&&(b[0].x+=1)),M=!0)}const k=l.mercatorXfromLng(I.center.lng);return M&&k<Math.abs(k-1)&&b.forEach(q=>{q.x-=1}),{polygon:b,unwrapped:M}}(yt(s,d).map(b=>new l.Point(Ot(b.x),b.y)),d);return{polygon:_.polygon.map(b=>new l.MercatorCoordinate(b.x,b.y)),unwrapped:_.unwrapped}}}function yt(p,s){return l.resample(p,d=>{const g=s.pointCoordinate3D(d);d.x=g.x,d.y=g.y},1/256)}function Ot(p){return p<0?1+p%1:p%1}function Mt(p){return 100*p|0}function Ft(p,s,d,g,_){const b=function(I,M){if(I)return _(I);if(M){p.url&&M.tiles&&p.tiles&&delete p.tiles;const O=l.pick(l.extend(M,p),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);M.vector_layers&&(O.vectorLayers=M.vector_layers,O.vectorLayerIds=O.vectorLayers.map($=>$.id)),O.tiles=s.canonicalizeTileset(O,p.url),_(null,O)}};return p.url?l.getJSON(s.transformRequest(s.normalizeSourceURL(p.url,null,d,g),l.ResourceType.Source),b):l.exported.frame(()=>b(null,p))}class Nt{constructor(s,d,g){this.bounds=l.LngLatBounds.convert(this.validateBounds(s)),this.minzoom=d||0,this.maxzoom=g||24}validateBounds(s){return Array.isArray(s)&&s.length===4?[Math.max(-180,s[0]),Math.max(-90,s[1]),Math.min(180,s[2]),Math.min(90,s[3])]:[-180,-90,180,90]}contains(s){const d=Math.pow(2,s.z),g=Math.floor(l.mercatorXfromLng(this.bounds.getWest())*d),_=Math.floor(l.mercatorYfromLat(this.bounds.getNorth())*d),b=Math.ceil(l.mercatorXfromLng(this.bounds.getEast())*d),I=Math.ceil(l.mercatorYfromLat(this.bounds.getSouth())*d);return s.x>=g&&s.x<b&&s.y>=_&&s.y<I}}class Ct{constructor(s,d,g){this.context=s;const _=s.gl;this.buffer=_.createBuffer(),this.dynamicDraw=!!g,this.context.unbindVAO(),s.bindElementBuffer.set(this.buffer),_.bufferData(_.ELEMENT_ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?_.DYNAMIC_DRAW:_.STATIC_DRAW),this.dynamicDraw||d.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(s){const d=this.context.gl;this.context.unbindVAO(),this.bind(),d.bufferSubData(d.ELEMENT_ARRAY_BUFFER,0,s.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const ut={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class At{constructor(s,d,g,_){this.length=d.length,this.attributes=g,this.itemSize=d.bytesPerElement,this.dynamicDraw=_,this.context=s;const b=s.gl;this.buffer=b.createBuffer(),s.bindVertexBuffer.set(this.buffer),b.bufferData(b.ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?b.DYNAMIC_DRAW:b.STATIC_DRAW),this.dynamicDraw||d.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(s){const d=this.context.gl;this.bind(),d.bufferSubData(d.ARRAY_BUFFER,0,s.arrayBuffer)}enableAttributes(s,d){for(let g=0;g<this.attributes.length;g++){const _=d.attributes[this.attributes[g].name];_!==void 0&&s.enableVertexAttribArray(_)}}setVertexAttribPointers(s,d,g){for(let _=0;_<this.attributes.length;_++){const b=this.attributes[_],I=d.attributes[b.name];I!==void 0&&s.vertexAttribPointer(I,b.components,s[ut[b.type]],!1,this.itemSize,b.offset+this.itemSize*(g||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class dt{constructor(s){this.gl=s.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(s){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Bt extends dt{getDefault(){return l.Color.transparent}set(s){const d=this.current;(s.r!==d.r||s.g!==d.g||s.b!==d.b||s.a!==d.a||this.dirty)&&(this.gl.clearColor(s.r,s.g,s.b,s.a),this.current=s,this.dirty=!1)}}class gt extends dt{getDefault(){return 1}set(s){(s!==this.current||this.dirty)&&(this.gl.clearDepth(s),this.current=s,this.dirty=!1)}}class jt extends dt{getDefault(){return 0}set(s){(s!==this.current||this.dirty)&&(this.gl.clearStencil(s),this.current=s,this.dirty=!1)}}class zt extends dt{getDefault(){return[!0,!0,!0,!0]}set(s){const d=this.current;(s[0]!==d[0]||s[1]!==d[1]||s[2]!==d[2]||s[3]!==d[3]||this.dirty)&&(this.gl.colorMask(s[0],s[1],s[2],s[3]),this.current=s,this.dirty=!1)}}class an extends dt{getDefault(){return!0}set(s){(s!==this.current||this.dirty)&&(this.gl.depthMask(s),this.current=s,this.dirty=!1)}}class Kt extends dt{getDefault(){return 255}set(s){(s!==this.current||this.dirty)&&(this.gl.stencilMask(s),this.current=s,this.dirty=!1)}}class Ut extends dt{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(s){const d=this.current;(s.func!==d.func||s.ref!==d.ref||s.mask!==d.mask||this.dirty)&&(this.gl.stencilFunc(s.func,s.ref,s.mask),this.current=s,this.dirty=!1)}}class at extends dt{getDefault(){const s=this.gl;return[s.KEEP,s.KEEP,s.KEEP]}set(s){const d=this.current;(s[0]!==d[0]||s[1]!==d[1]||s[2]!==d[2]||this.dirty)&&(this.gl.stencilOp(s[0],s[1],s[2]),this.current=s,this.dirty=!1)}}class it extends dt{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;s?d.enable(d.STENCIL_TEST):d.disable(d.STENCIL_TEST),this.current=s,this.dirty=!1}}class Rt extends dt{getDefault(){return[0,1]}set(s){const d=this.current;(s[0]!==d[0]||s[1]!==d[1]||this.dirty)&&(this.gl.depthRange(s[0],s[1]),this.current=s,this.dirty=!1)}}class bt extends dt{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;s?d.enable(d.DEPTH_TEST):d.disable(d.DEPTH_TEST),this.current=s,this.dirty=!1}}class sn extends dt{getDefault(){return this.gl.LESS}set(s){(s!==this.current||this.dirty)&&(this.gl.depthFunc(s),this.current=s,this.dirty=!1)}}class An extends dt{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;s?d.enable(d.BLEND):d.disable(d.BLEND),this.current=s,this.dirty=!1}}class Mn extends dt{getDefault(){const s=this.gl;return[s.ONE,s.ZERO]}set(s){const d=this.current;(s[0]!==d[0]||s[1]!==d[1]||this.dirty)&&(this.gl.blendFunc(s[0],s[1]),this.current=s,this.dirty=!1)}}class rn extends dt{getDefault(){return l.Color.transparent}set(s){const d=this.current;(s.r!==d.r||s.g!==d.g||s.b!==d.b||s.a!==d.a||this.dirty)&&(this.gl.blendColor(s.r,s.g,s.b,s.a),this.current=s,this.dirty=!1)}}class Vn extends dt{getDefault(){return this.gl.FUNC_ADD}set(s){(s!==this.current||this.dirty)&&(this.gl.blendEquation(s),this.current=s,this.dirty=!1)}}class Nn extends dt{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;s?d.enable(d.CULL_FACE):d.disable(d.CULL_FACE),this.current=s,this.dirty=!1}}class zn extends dt{getDefault(){return this.gl.BACK}set(s){(s!==this.current||this.dirty)&&(this.gl.cullFace(s),this.current=s,this.dirty=!1)}}class vn extends dt{getDefault(){return this.gl.CCW}set(s){(s!==this.current||this.dirty)&&(this.gl.frontFace(s),this.current=s,this.dirty=!1)}}let nn,Wn=class extends dt{getDefault(){return null}set(p){(p!==this.current||this.dirty)&&(this.gl.useProgram(p),this.current=p,this.dirty=!1)}};class jn extends dt{getDefault(){return this.gl.TEXTURE0}set(s){(s!==this.current||this.dirty)&&(this.gl.activeTexture(s),this.current=s,this.dirty=!1)}}class fr extends dt{getDefault(){const s=this.gl;return[0,0,s.drawingBufferWidth,s.drawingBufferHeight]}set(s){const d=this.current;(s[0]!==d[0]||s[1]!==d[1]||s[2]!==d[2]||s[3]!==d[3]||this.dirty)&&(this.gl.viewport(s[0],s[1],s[2],s[3]),this.current=s,this.dirty=!1)}}class or extends dt{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;d.bindFramebuffer(d.FRAMEBUFFER,s),this.current=s,this.dirty=!1}}class qn extends dt{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;d.bindRenderbuffer(d.RENDERBUFFER,s),this.current=s,this.dirty=!1}}class Qn extends dt{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;d.bindTexture(d.TEXTURE_2D,s),this.current=s,this.dirty=!1}}class Rr extends dt{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;d.bindBuffer(d.ARRAY_BUFFER,s),this.current=s,this.dirty=!1}}class _e extends dt{getDefault(){return null}set(s){const d=this.gl;d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,s),this.current=s,this.dirty=!1}}class W extends dt{constructor(s){super(s),this.vao=s.extVertexArrayObject}getDefault(){return null}set(s){this.vao&&(s!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(s),this.current=s,this.dirty=!1)}}class J extends dt{getDefault(){return 4}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_ALIGNMENT,s),this.current=s,this.dirty=!1}}class ue extends dt{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s),this.current=s,this.dirty=!1}}class Se extends dt{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,s),this.current=s,this.dirty=!1}}class Ie extends dt{constructor(s,d){super(s),this.context=s,this.parent=d}getDefault(){return null}}class Me extends Ie{setDirty(){this.dirty=!0}set(s){if(s===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,s,0),this.current=s,this.dirty=!1}}class De extends Ie{attachment(){return this.gl.DEPTH_ATTACHMENT}set(s){if(s===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferRenderbuffer(d.FRAMEBUFFER,this.attachment(),d.RENDERBUFFER,s),this.current=s,this.dirty=!1}}class we extends De{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class Le{constructor(s,d,g,_){this.context=s,this.width=d,this.height=g;const b=this.framebuffer=s.gl.createFramebuffer();this.colorAttachment=new Me(s,b),_&&(this.depthAttachment=new De(s,b))}destroy(){const s=this.context.gl,d=this.colorAttachment.get();if(d&&s.deleteTexture(d),this.depthAttachment){const g=this.depthAttachment.get();g&&s.deleteRenderbuffer(g)}s.deleteFramebuffer(this.framebuffer)}}class Ne{constructor(s,d=!1){if(this.gl=s,this.isWebGL2=d,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),d){const g=s;this.extVertexArrayObject={createVertexArrayOES:g.createVertexArray.bind(s),deleteVertexArrayOES:g.deleteVertexArray.bind(s),bindVertexArrayOES:g.bindVertexArray.bind(s)}}this.clearColor=new Bt(this),this.clearDepth=new gt(this),this.clearStencil=new jt(this),this.colorMask=new zt(this),this.depthMask=new an(this),this.stencilMask=new Kt(this),this.stencilFunc=new Ut(this),this.stencilOp=new at(this),this.stencilTest=new it(this),this.depthRange=new Rt(this),this.depthTest=new bt(this),this.depthFunc=new sn(this),this.blend=new An(this),this.blendFunc=new Mn(this),this.blendColor=new rn(this),this.blendEquation=new Vn(this),this.cullFace=new Nn(this),this.cullFaceSide=new zn(this),this.frontFace=new vn(this),this.program=new Wn(this),this.activeTexture=new jn(this),this.viewport=new fr(this),this.bindFramebuffer=new or(this),this.bindRenderbuffer=new qn(this),this.bindTexture=new Qn(this),this.bindVertexBuffer=new Rr(this),this.bindElementBuffer=new _e(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new W(this),this.pixelStoreUnpack=new J(this),this.pixelStoreUnpackPremultiplyAlpha=new ue(this),this.pixelStoreUnpackFlipY=new Se(this),this.extTextureFilterAnisotropic=s.getExtension("EXT_texture_filter_anisotropic")||s.getExtension("MOZ_EXT_texture_filter_anisotropic")||s.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=s.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extStandardDerivativesForceOff=!1,this.extDebugRendererInfo=s.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=s.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=s.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),d||(this.extTextureHalfFloat=s.getExtension("OES_texture_half_float")),(d||this.extTextureHalfFloat&&s.getExtension("OES_texture_half_float_linear"))&&(this.extRenderToTextureHalfFloat=s.getExtension("EXT_color_buffer_half_float")),this.extStandardDerivatives=d||s.getExtension("OES_standard_derivatives"),this.extTimerQuery=s.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=s.getParameter(s.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(s,d){return new Ct(this,s,d)}createVertexBuffer(s,d,g){return new At(this,s,d,g)}createRenderbuffer(s,d,g){const _=this.gl,b=_.createRenderbuffer();return this.bindRenderbuffer.set(b),_.renderbufferStorage(_.RENDERBUFFER,s,d,g),this.bindRenderbuffer.set(null),b}createFramebuffer(s,d,g){return new Le(this,s,d,g)}clear({color:s,depth:d,stencil:g}){const _=this.gl;let b=0;s&&(b|=_.COLOR_BUFFER_BIT,this.clearColor.set(s),this.colorMask.set([!0,!0,!0,!0])),d!==void 0&&(b|=_.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(d),this.depthMask.set(!0)),g!==void 0&&(b|=_.STENCIL_BUFFER_BIT,this.clearStencil.set(g),this.stencilMask.set(255)),_.clear(b)}setCullFace(s){s.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(s.mode),this.frontFace.set(s.frontFace))}setDepthMode(s){s.func!==this.gl.ALWAYS||s.mask?(this.depthTest.set(!0),this.depthFunc.set(s.func),this.depthMask.set(s.mask),this.depthRange.set(s.range)):this.depthTest.set(!1)}setStencilMode(s){s.test.func!==this.gl.ALWAYS||s.mask?(this.stencilTest.set(!0),this.stencilMask.set(s.mask),this.stencilOp.set([s.fail,s.depthFail,s.pass]),this.stencilFunc.set({func:s.test.func,ref:s.ref,mask:s.test.mask})):this.stencilTest.set(!1)}setColorMode(s){w(s.blendFunction,l.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(s.blendFunction),this.blendColor.set(s.blendColor)),this.colorMask.set(s.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class Je extends l.Evented{constructor(s,d,g,_){if(super(),this.id=s,this.dispatcher=g,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,l.extend(this,l.pick(d,["url","scheme","tileSize","promoteId"])),this._options=l.extend({type:"vector"},d),this._collectResourceTiming=d.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(_),this._tileWorkers={},this._deduped=new l.DedupedRequest}load(s){this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"}));const d=Array.isArray(this.map._language)?this.map._language.join():this.map._language,g=this.map._worldview;this._tileJSONRequest=Ft(this._options,this.map._requestManager,d,g,(_,b)=>{this._tileJSONRequest=null,this._loaded=!0,_?(d&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${d}`),g&&g.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${g}`),this.fire(new l.ErrorEvent(_))):b&&(l.extend(this,b),b.bounds&&(this.tileBounds=new Nt(b.bounds,this.minzoom,this.maxzoom)),l.postTurnstileEvent(b.tiles,this.map._requestManager._customAccessToken),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"}))),s&&s(_)})}loaded(){return this._loaded}hasTile(s){return!this.tileBounds||this.tileBounds.contains(s.canonical)}onAdd(s){this.map=s,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(s){return this._options.tiles=s,this.reload(),this}setUrl(s){return this.url=s,this._options.url=s,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return l.extend({},this._options)}loadTile(s,d){const g=this.map._requestManager.normalizeTileURL(s.tileID.canonical.url(this.tiles,this.scheme)),_={request:this.map._requestManager.transformRequest(g,l.ResourceType.Tile),data:void 0,uid:s.uid,tileID:s.tileID,tileZoom:s.tileZoom,zoom:s.tileID.overscaledZ,tileSize:this.tileSize*s.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:l.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:s.isSymbolTile};if(_.request.collectResourceTiming=this._collectResourceTiming,s.actor&&s.state!=="expired")s.state==="loading"?s.reloadCallback=d:s.request=s.actor.send("reloadTile",_,b.bind(this));else if(s.actor=this._tileWorkers[g]=this._tileWorkers[g]||this.dispatcher.getActor(),this.dispatcher.ready)s.request=s.actor.send("loadTile",_,b.bind(this),void 0,!0);else{const I=l.loadVectorTile.call({deduped:this._deduped},_,(M,O)=>{M||!O?b.call(this,M):(_.data={cacheControl:O.cacheControl,expires:O.expires,rawData:O.rawData.slice(0)},s.actor&&s.actor.send("loadTile",_,b.bind(this),void 0,!0))},!0);s.request={cancel:I}}function b(I,M){return delete s.request,s.aborted?d(null):I&&I.status!==404?d(I):(M&&M.resourceTiming&&(s.resourceTiming=M.resourceTiming),this.map._refreshExpiredTiles&&M&&s.setExpiryData(M),s.loadVectorData(M,this.map.painter),l.cacheEntryPossiblyAdded(this.dispatcher),d(null),void(s.reloadCallback&&(this.loadTile(s,s.reloadCallback),s.reloadCallback=null)))}}abortTile(s){s.request&&(s.request.cancel(),delete s.request),s.actor&&s.actor.send("abortTile",{uid:s.uid,type:this.type,source:this.id})}unloadTile(s){s.unloadVectorData(),s.actor&&s.actor.send("removeTile",{uid:s.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class Ge extends l.Evented{constructor(s,d,g,_){super(),this.id=s,this.dispatcher=g,this.setEventedParent(_),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=l.extend({type:"raster"},d),l.extend(this,l.pick(d,["url","scheme","tileSize"]))}load(s){this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Ft(this._options,this.map._requestManager,null,null,(d,g)=>{this._tileJSONRequest=null,this._loaded=!0,d?this.fire(new l.ErrorEvent(d)):g&&(l.extend(this,g),g.bounds&&(this.tileBounds=new Nt(g.bounds,this.minzoom,this.maxzoom)),l.postTurnstileEvent(g.tiles),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"}))),s&&s(d)})}loaded(){return this._loaded}onAdd(s){this.map=s,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(s){return this._options.tiles=s,this.reload(),this}setUrl(s){return this.url=s,this._options.url=s,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return l.extend({},this._options)}hasTile(s){return!this.tileBounds||this.tileBounds.contains(s.canonical)}loadTile(s,d){const g=l.exported.devicePixelRatio>=2,_=this.map._requestManager.normalizeTileURL(s.tileID.canonical.url(this.tiles,this.scheme),g,this.tileSize);s.request=l.getImage(this.map._requestManager.transformRequest(_,l.ResourceType.Tile),(b,I,M,O)=>(delete s.request,s.aborted?(s.state="unloaded",d(null)):b?(s.state="errored",d(b)):I?(this.map._refreshExpiredTiles&&s.setExpiryData({cacheControl:M,expires:O}),s.setTexture(I,this.map.painter),s.state="loaded",l.cacheEntryPossiblyAdded(this.dispatcher),void d(null)):d(null)))}static loadTileData(s,d,g){s.setTexture(d,g)}static unloadTileData(s,d){s.texture&&d.saveTileTexture(s.texture)}abortTile(s,d){s.request&&(s.request.cancel(),delete s.request),d()}unloadTile(s,d){s.texture&&this.map.painter.saveTileTexture(s.texture),d()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}function _t(p,s,d,g,_,b,I,M){const O=[p,d,_,s,g,b,1,1,1],$=[I,M,1],k=l.adjoint([],O),[q,ie,le]=l.transformMat3($,$,l.transpose(k,k));return l.multiply$1(O,[q,0,0,0,ie,0,0,0,le],O)}class Yt extends l.Evented{constructor(s,d,g,_){super(),this.id=s,this.dispatcher=g,this.coordinates=d.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(_),this.options=d,this._dirty=!1}load(s,d){this._loaded=d||!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._imageRequest=l.getImage(this.map._requestManager.transformRequest(this.url,l.ResourceType.Image),(g,_)=>{if(this._imageRequest=null,this._loaded=!0,g)this.fire(new l.ErrorEvent(g));else if(_){const{HTMLImageElement:b}=l.window;this.image=_ instanceof b?l.exported.getImageData(_):_,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,s&&(this.coordinates=s),this._finishLoading()}})}loaded(){return this._loaded}updateImage(s){return this.image&&s.url?(this._imageRequest&&s.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=s.url,this.load(s.coordinates,this._loaded),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(s){this.map=s,this.load()}onRemove(){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),this.texture&&this.texture.destroy()}setCoordinates(s){this.coordinates=s,this._boundsArray=void 0;const d=s.map(l.MercatorCoordinate.fromLngLat);return this.tileID=function(g){let _=1/0,b=1/0,I=-1/0,M=-1/0;for(const q of g)_=Math.min(_,q.x),b=Math.min(b,q.y),I=Math.max(I,q.x),M=Math.max(M,q.y);const O=Math.max(I-_,M-b),$=Math.max(0,Math.floor(-Math.log(O)/Math.LN2)),k=Math.pow(2,$);return new l.CanonicalTileID($,Math.floor((_+I)/2*k),Math.floor((b+M)/2*k))}(d),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0}_prepareData(s){for(const O in this.tiles){const $=this.tiles[O];$.state!=="loaded"&&($.state="loaded",$.texture=this.texture)}if(this._boundsArray)return;const d=l.tileTransform(this.tileID,this.map.transform.projection),[g,_,b,I]=this.coordinates.map(O=>{const $=d.projection.project(O[0],O[1]);return l.getTilePoint(d,$)._round()});this.perspectiveTransform=function(O,$,k,q,ie,le,de,ce,me,X){const se=_t(0,0,O,0,0,$,O,$),xe=_t(k,q,ie,le,de,ce,me,X);return l.multiply$1(xe,l.adjoint(se,se),xe),[xe[6]/xe[8]*O/l.EXTENT,xe[7]/xe[8]*$/l.EXTENT]}(this.width,this.height,g.x,g.y,_.x,_.y,I.x,I.y,b.x,b.y);const M=this._boundsArray=new l.StructArrayLayout4i8;M.emplaceBack(g.x,g.y,0,0),M.emplaceBack(_.x,_.y,l.EXTENT,0),M.emplaceBack(I.x,I.y,0,l.EXTENT),M.emplaceBack(b.x,b.y,l.EXTENT,l.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=s.createVertexBuffer(M,l.boundsAttributes.members),this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const s=this.map.painter.context,d=s.gl;this._dirty&&(this.texture?this.texture.update(this.image):(this.texture=new l.Texture(s,this.image,d.RGBA),this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE)),this._dirty=!1),this._prepareData(s)}loadTile(s,d){this.tileID&&this.tileID.equals(s.tileID.canonical)?(this.tiles[String(s.tileID.wrap)]=s,s.buckets={},d(null)):(s.state="errored",d(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const Zt={vector:Je,raster:Ge,"raster-dem":class extends Ge{constructor(p,s,d,g){super(p,s,d,g),this.type="raster-dem",this.maxzoom=22,this._options=l.extend({type:"raster-dem"},s),this.encoding=s.encoding||"mapbox"}loadTile(p,s){const d=this.map._requestManager.normalizeTileURL(p.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function g(_,b){_&&(p.state="errored",s(_)),b&&(p.dem=b,p.dem.onDeserialize(),p.needsHillshadePrepare=!0,p.needsDEMTextureUpload=!0,p.state="loaded",s(null))}p.request=l.getImage(this.map._requestManager.transformRequest(d,l.ResourceType.Tile),(function(_,b,I,M){if(delete p.request,p.aborted)p.state="unloaded",s(null);else if(_)p.state="errored",s(_);else if(b){this.map._refreshExpiredTiles&&p.setExpiryData({cacheControl:I,expires:M});const O=l.window.ImageBitmap&&b instanceof l.window.ImageBitmap&&(nn==null&&(nn=l.window.OffscreenCanvas&&new l.window.OffscreenCanvas(1,1).getContext("2d")&&typeof l.window.createImageBitmap=="function"),nn),$=1-(b.width-l.prevPowerOfTwo(b.width))/2;$<1||p.neighboringTiles||(p.neighboringTiles=this._getNeighboringTiles(p.tileID));const k=O?b:l.exported.getImageData(b,$),q={uid:p.uid,coord:p.tileID,source:this.id,rawImageData:k,encoding:this.encoding,padding:$};p.actor&&p.state!=="expired"||(p.actor=this.dispatcher.getActor(),p.actor.send("loadDEMTile",q,g.bind(this),void 0,!0))}}).bind(this))}_getNeighboringTiles(p){const s=p.canonical,d=Math.pow(2,s.z),g=(s.x-1+d)%d,_=s.x===0?p.wrap-1:p.wrap,b=(s.x+1+d)%d,I=s.x+1===d?p.wrap+1:p.wrap,M={};return M[new l.OverscaledTileID(p.overscaledZ,_,s.z,g,s.y).key]={backfilled:!1},M[new l.OverscaledTileID(p.overscaledZ,I,s.z,b,s.y).key]={backfilled:!1},s.y>0&&(M[new l.OverscaledTileID(p.overscaledZ,_,s.z,g,s.y-1).key]={backfilled:!1},M[new l.OverscaledTileID(p.overscaledZ,p.wrap,s.z,s.x,s.y-1).key]={backfilled:!1},M[new l.OverscaledTileID(p.overscaledZ,I,s.z,b,s.y-1).key]={backfilled:!1}),s.y+1<d&&(M[new l.OverscaledTileID(p.overscaledZ,_,s.z,g,s.y+1).key]={backfilled:!1},M[new l.OverscaledTileID(p.overscaledZ,p.wrap,s.z,s.x,s.y+1).key]={backfilled:!1},M[new l.OverscaledTileID(p.overscaledZ,I,s.z,b,s.y+1).key]={backfilled:!1}),M}unloadTile(p){p.demTexture&&this.map.painter.saveTileTexture(p.demTexture),p.fbo&&(p.fbo.destroy(),delete p.fbo),p.dem&&delete p.dem,delete p.neighboringTiles,p.state="unloaded"}},geojson:class extends l.Evented{constructor(p,s,d,g){super(),this.id=p,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=d.getActor(),this.setEventedParent(g),this._data=s.data,this._options=l.extend({},s),this._collectResourceTiming=s.collectResourceTiming,s.maxzoom!==void 0&&(this.maxzoom=s.maxzoom),s.type&&(this.type=s.type),s.attribution&&(this.attribution=s.attribution),this.promoteId=s.promoteId;const _=l.EXTENT/this.tileSize;this.workerOptions=l.extend({source:this.id,cluster:s.cluster||!1,geojsonVtOptions:{buffer:(s.buffer!==void 0?s.buffer:128)*_,tolerance:(s.tolerance!==void 0?s.tolerance:.375)*_,extent:l.EXTENT,maxZoom:this.maxzoom,lineMetrics:s.lineMetrics||!1,generateId:s.generateId||!1},superclusterOptions:{maxZoom:s.clusterMaxZoom!==void 0?s.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,s.clusterMinPoints||2),extent:l.EXTENT,radius:(s.clusterRadius!==void 0?s.clusterRadius:50)*_,log:!1,generateId:s.generateId||!1},clusterProperties:s.clusterProperties,filter:s.filter},s.workerOptions)}onAdd(p){this.map=p,this.setData(this._data)}setData(p){return this._data=p,this._updateWorkerData(),this}getClusterExpansionZoom(p,s){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:p,source:this.id},s),this}getClusterChildren(p,s){return this.actor.send("geojson.getClusterChildren",{clusterId:p,source:this.id},s),this}getClusterLeaves(p,s,d,g){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:p,limit:s,offset:d},g),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new l.Event("dataloading",{dataType:"source"})),this._loaded=!1;const p=l.extend({},this.workerOptions),s=this._data;typeof s=="string"?(p.request=this.map._requestManager.transformRequest(l.exported.resolveURL(s),l.ResourceType.Source),p.request.collectResourceTiming=this._collectResourceTiming):p.data=JSON.stringify(s),this._pendingLoad=this.actor.send(`${this.type}.loadData`,p,(d,g)=>{if(this._loaded=!0,this._pendingLoad=null,d)this.fire(new l.ErrorEvent(d));else{const _={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&g&&g.resourceTiming&&g.resourceTiming[this.id]&&(_.resourceTiming=g.resourceTiming[this.id]),this.fire(new l.Event("data",_)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(p,s){const d=p.actor?"reloadTile":"loadTile";p.actor=this.actor,p.request=this.actor.send(d,{type:this.type,uid:p.uid,tileID:p.tileID,tileZoom:p.tileZoom,zoom:p.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:l.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(g,_)=>(delete p.request,p.unloadVectorData(),p.aborted?s(null):g?s(g):(p.loadVectorData(_,this.map.painter,d==="reloadTile"),s(null))),void 0,d==="loadTile")}abortTile(p){p.request&&(p.request.cancel(),delete p.request),p.aborted=!0}unloadTile(p){p.unloadVectorData(),this.actor.send("removeTile",{uid:p.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return l.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends Yt{constructor(p,s,d,g){super(p,s,d,g),this.roundZoom=!0,this.type="video",this.options=s}load(){this._loaded=!1;const p=this.options;this.urls=[];for(const s of p.urls)this.urls.push(this.map._requestManager.transformRequest(s,l.ResourceType.Source).url);l.getVideo(this.urls,(s,d)=>{this._loaded=!0,s?this.fire(new l.ErrorEvent(s)):d&&(this.video=d,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(p){if(this.video){const s=this.video.seekable;p<s.start(0)||p>s.end(0)?this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${s.start(0)} and ${s.end(0)}-second mark.`))):this.video.currentTime=p}}getVideo(){return this.video}onAdd(p){this.map||(this.map=p,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const p=this.map.painter.context,s=p.gl;this.texture?this.video.paused||(this.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE),s.texSubImage2D(s.TEXTURE_2D,0,0,0,s.RGBA,s.UNSIGNED_BYTE,this.video)):(this.texture=new l.Texture(p,this.video,s.RGBA),this.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(p)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:Yt,canvas:class extends Yt{constructor(p,s,d,g){super(p,s,d,g),s.coordinates?Array.isArray(s.coordinates)&&s.coordinates.length===4&&!s.coordinates.some(_=>!Array.isArray(_)||_.length!==2||_.some(b=>typeof b!="number"))||this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${p}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${p}`,null,'missing required property "coordinates"'))),s.animate&&typeof s.animate!="boolean"&&this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${p}`,null,'optional "animate" property must be a boolean value'))),s.canvas?typeof s.canvas=="string"||s.canvas instanceof l.window.HTMLCanvasElement||this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${p}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${p}`,null,'missing required property "canvas"'))),this.options=s,this.animate=s.animate===void 0||s.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof l.window.HTMLCanvasElement?this.options.canvas:l.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new l.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(p){this.map=p,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let p=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,p=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,p=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const s=this.map.painter.context;this.texture?(p||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new l.Texture(s,this.canvas,s.gl.RGBA,{premultiply:!0}),this._prepareData(s)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const p of[this.canvas.width,this.canvas.height])if(isNaN(p)||p<=0)return!0;return!1}},custom:class extends l.Evented{constructor(p,s,d,g){super(),this.id=p,this.type="custom",this._dataType="raster",this._dispatcher=d,this._implementation=s,this.setEventedParent(g),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new l.ErrorEvent(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new l.ErrorEvent(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new Nt(this._implementation.bounds,this.minzoom,this.maxzoom)),s.update=this._update.bind(this),s.clearTiles=this._clearTiles.bind(this),s.coveringTiles=this._coveringTiles.bind(this),l.extend(this,l.pick(s,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return l.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(p){this._map=p,this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(p),this.load()}onRemove(p){this._implementation.onRemove&&this._implementation.onRemove(p)}hasTile(p){if(this._implementation.hasTile){const{x:s,y:d,z:g}=p.canonical;return this._implementation.hasTile({x:s,y:d,z:g})}return!this.tileBounds||this.tileBounds.contains(p.canonical)}loadTile(p,s){const{x:d,y:g,z:_}=p.tileID.canonical,b=new l.window.AbortController;p.request=Promise.resolve(this._implementation.loadTile({x:d,y:g,z:_},{signal:b.signal})).then((function(I){return delete p.request,p.aborted?(p.state="unloaded",s(null)):I===void 0?(p.state="errored",s(null)):I===null?(this.loadTileData(p,{width:this.tileSize,height:this.tileSize,data:null}),p.state="loaded",s(null)):function(M){return M instanceof l.window.ImageData||M instanceof l.window.HTMLCanvasElement||M instanceof l.window.ImageBitmap||M instanceof l.window.HTMLImageElement}(I)?(this.loadTileData(p,I),p.state="loaded",void s(null)):(p.state="errored",s(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)))}).bind(this)).catch(I=>{I.code!==20&&(p.state="errored",s(I))}),p.request.cancel=()=>b.abort()}loadTileData(p,s){Ge.loadTileData(p,s,this._map.painter)}unloadTileData(p){Ge.unloadTileData(p,this._map.painter)}unloadTile(p,s){if(this.unloadTileData(p),this._implementation.unloadTile){const{x:d,y:g,z:_}=p.tileID.canonical;this._implementation.unloadTile({x:d,y:g,z:_})}s()}abortTile(p,s){p.request&&p.request.cancel&&(p.request.cancel(),delete p.request),s()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(p=>({x:p.canonical.x,y:p.canonical.y,z:p.canonical.z}))}_clearTiles(){this._map.style._clearSource(this.id)}_update(){this.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"}))}}},un=function(p,s,d,g){const _=new Zt[s.type](p,s,d,g);if(_.id!==p)throw new Error(`Expected Source id to be ${p} instead of ${_.id}`);return l.bindAll(["load","abort","unload","serialize","prepare"],_),_};function ln(p,s){const d=l.identity([]);return l.scale(d,d,[.5*p.width,.5*-p.height,1]),l.translate(d,d,[1,-1,0]),l.multiply(d,d,p.calculateProjMatrix(s.toUnwrapped())),Float32Array.from(d)}function Gn(p,s,d,g,_,b,I,M=!1){const O=p.tilesIn(g,I,M);O.sort(er);const $=[];for(const q of O)$.push({wrappedTileID:q.tile.tileID.wrapped().key,queryResults:q.tile.queryRenderedFeatures(s,d,p._state,q,_,b,ln(p.transform,q.tile.tileID),M)});const k=function(q){const ie={},le={};for(const de of q){const ce=de.queryResults,me=de.wrappedTileID,X=le[me]=le[me]||{};for(const se in ce){const xe=ce[se],be=X[se]=X[se]||{},Re=ie[se]=ie[se]||[];for(const ze of xe)be[ze.featureIndex]||(be[ze.featureIndex]=!0,Re.push(ze))}}return ie}($);for(const q in k)k[q].forEach(ie=>{const le=ie.feature,de=le.layer;de&&de.type!=="background"&&de.type!=="sky"&&(le.source=de.source,de["source-layer"]&&(le.sourceLayer=de["source-layer"]),le.state=le.id!==void 0?p.getFeatureState(de["source-layer"],le.id):{})});return k}function On(p,s){const d=p.getRenderableIds().map(b=>p.getTileByID(b)),g=[],_={};for(let b=0;b<d.length;b++){const I=d[b],M=I.tileID.canonical.key;_[M]||(_[M]=!0,I.querySourceFeatures(g,s))}return g}function er(p,s){const d=p.tileID,g=s.tileID;return d.overscaledZ-g.overscaledZ||d.canonical.y-g.canonical.y||d.wrap-g.wrap||d.canonical.x-g.canonical.x}function Zn(){return $l.workerClass!=null?new $l.workerClass:new l.window.Worker($l.workerUrl)}const Zr="mapboxgl_preloaded_worker_pool";class on{constructor(){this.active={}}acquire(s){if(!this.workers)for(this.workers=[];this.workers.length<on.workerCount;)this.workers.push(new Zn);return this.active[s]=!0,this.workers.slice()}release(s){delete this.active[s],this.numActive()===0&&(this.workers.forEach(d=>{d.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Zr]}numActive(){return Object.keys(this.active).length}}let tn;function Sn(){return tn||(tn=new on),tn}function Tr(p,s){const d={};for(const g in p)g!=="ref"&&(d[g]=p[g]);return l.refProperties.forEach(g=>{g in s&&(d[g]=s[g])}),d}function ri(p){p=p.slice();const s=Object.create(null);for(let d=0;d<p.length;d++)s[p[d].id]=p[d];for(let d=0;d<p.length;d++)"ref"in p[d]&&(p[d]=Tr(p[d],s[p[d].ref]));return p}on.workerCount=2;const En={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function Ni(p,s,d){d.push({command:En.addSource,args:[p,s[p]]})}function xo(p,s,d){s.push({command:En.removeSource,args:[p]}),d[p]=!0}function Po(p,s,d,g){xo(p,d,g),Ni(p,s,d)}function no(p,s,d){let g;for(g in p[d])if(p[d].hasOwnProperty(g)&&g!=="data"&&!w(p[d][g],s[d][g]))return!1;for(g in s[d])if(s[d].hasOwnProperty(g)&&g!=="data"&&!w(p[d][g],s[d][g]))return!1;return!0}function Hr(p,s,d,g,_,b){let I;for(I in s=s||{},p=p||{})p.hasOwnProperty(I)&&(w(p[I],s[I])||d.push({command:b,args:[g,I,s[I],_]}));for(I in s)s.hasOwnProperty(I)&&!p.hasOwnProperty(I)&&(w(p[I],s[I])||d.push({command:b,args:[g,I,s[I],_]}))}function ji(p){return p.id}function pa(p,s){return p[s.id]=s,p}class ro{constructor(s,d){this.reset(s,d)}reset(s,d){this.points=s||[],this._distances=[0];for(let g=1;g<this.points.length;g++)this._distances[g]=this._distances[g-1]+this.points[g].dist(this.points[g-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(d||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(s){if(this.points.length===1)return this.points[0];s=l.clamp(s,0,1);let d=1,g=this._distances[d];const _=s*this.paddedLength+this.padding;for(;g<_&&d<this._distances.length;)g=this._distances[++d];const b=d-1,I=this._distances[b],M=g-I,O=M>0?(_-I)/M:0;return this.points[b].mult(1-O).add(this.points[d].mult(O))}}class io{constructor(s,d,g){const _=this.boxCells=[],b=this.circleCells=[];this.xCellCount=Math.ceil(s/g),this.yCellCount=Math.ceil(d/g);for(let I=0;I<this.xCellCount*this.yCellCount;I++)_.push([]),b.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=s,this.height=d,this.xScale=this.xCellCount/s,this.yScale=this.yCellCount/d,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(s,d,g,_,b){this._forEachCell(d,g,_,b,this._insertBoxCell,this.boxUid++),this.boxKeys.push(s),this.bboxes.push(d),this.bboxes.push(g),this.bboxes.push(_),this.bboxes.push(b)}insertCircle(s,d,g,_){this._forEachCell(d-_,g-_,d+_,g+_,this._insertCircleCell,this.circleUid++),this.circleKeys.push(s),this.circles.push(d),this.circles.push(g),this.circles.push(_)}_insertBoxCell(s,d,g,_,b,I){this.boxCells[b].push(I)}_insertCircleCell(s,d,g,_,b,I){this.circleCells[b].push(I)}_query(s,d,g,_,b,I){if(g<0||s>this.width||_<0||d>this.height)return!b&&[];const M=[];if(s<=0&&d<=0&&this.width<=g&&this.height<=_){if(b)return!0;for(let O=0;O<this.boxKeys.length;O++)M.push({key:this.boxKeys[O],x1:this.bboxes[4*O],y1:this.bboxes[4*O+1],x2:this.bboxes[4*O+2],y2:this.bboxes[4*O+3]});for(let O=0;O<this.circleKeys.length;O++){const $=this.circles[3*O],k=this.circles[3*O+1],q=this.circles[3*O+2];M.push({key:this.circleKeys[O],x1:$-q,y1:k-q,x2:$+q,y2:k+q})}return I?M.filter(I):M}return this._forEachCell(s,d,g,_,this._queryCell,M,{hitTest:b,seenUids:{box:{},circle:{}}},I),b?M.length>0:M}_queryCircle(s,d,g,_,b){const I=s-g,M=s+g,O=d-g,$=d+g;if(M<0||I>this.width||$<0||O>this.height)return!_&&[];const k=[];return this._forEachCell(I,O,M,$,this._queryCellCircle,k,{hitTest:_,circle:{x:s,y:d,radius:g},seenUids:{box:{},circle:{}}},b),_?k.length>0:k}query(s,d,g,_,b){return this._query(s,d,g,_,!1,b)}hitTest(s,d,g,_,b){return this._query(s,d,g,_,!0,b)}hitTestCircle(s,d,g,_){return this._queryCircle(s,d,g,!0,_)}_queryCell(s,d,g,_,b,I,M,O){const $=M.seenUids,k=this.boxCells[b];if(k!==null){const ie=this.bboxes;for(const le of k)if(!$.box[le]){$.box[le]=!0;const de=4*le;if(s<=ie[de+2]&&d<=ie[de+3]&&g>=ie[de+0]&&_>=ie[de+1]&&(!O||O(this.boxKeys[le]))){if(M.hitTest)return I.push(!0),!0;I.push({key:this.boxKeys[le],x1:ie[de],y1:ie[de+1],x2:ie[de+2],y2:ie[de+3]})}}}const q=this.circleCells[b];if(q!==null){const ie=this.circles;for(const le of q)if(!$.circle[le]){$.circle[le]=!0;const de=3*le;if(this._circleAndRectCollide(ie[de],ie[de+1],ie[de+2],s,d,g,_)&&(!O||O(this.circleKeys[le]))){if(M.hitTest)return I.push(!0),!0;{const ce=ie[de],me=ie[de+1],X=ie[de+2];I.push({key:this.circleKeys[le],x1:ce-X,y1:me-X,x2:ce+X,y2:me+X})}}}}}_queryCellCircle(s,d,g,_,b,I,M,O){const $=M.circle,k=M.seenUids,q=this.boxCells[b];if(q!==null){const le=this.bboxes;for(const de of q)if(!k.box[de]){k.box[de]=!0;const ce=4*de;if(this._circleAndRectCollide($.x,$.y,$.radius,le[ce+0],le[ce+1],le[ce+2],le[ce+3])&&(!O||O(this.boxKeys[de])))return I.push(!0),!0}}const ie=this.circleCells[b];if(ie!==null){const le=this.circles;for(const de of ie)if(!k.circle[de]){k.circle[de]=!0;const ce=3*de;if(this._circlesCollide(le[ce],le[ce+1],le[ce+2],$.x,$.y,$.radius)&&(!O||O(this.circleKeys[de])))return I.push(!0),!0}}}_forEachCell(s,d,g,_,b,I,M,O){const $=this._convertToXCellCoord(s),k=this._convertToYCellCoord(d),q=this._convertToXCellCoord(g),ie=this._convertToYCellCoord(_);for(let le=$;le<=q;le++)for(let de=k;de<=ie;de++)if(b.call(this,s,d,g,_,this.xCellCount*de+le,I,M,O))return}_convertToXCellCoord(s){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(s*this.xScale)))}_convertToYCellCoord(s){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(s*this.yScale)))}_circlesCollide(s,d,g,_,b,I){const M=_-s,O=b-d,$=g+I;return $*$>M*M+O*O}_circleAndRectCollide(s,d,g,_,b,I,M){const O=(I-_)/2,$=Math.abs(s-(_+O));if($>O+g)return!1;const k=(M-b)/2,q=Math.abs(d-(b+k));if(q>k+g)return!1;if($<=O||q<=k)return!0;const ie=$-O,le=q-k;return ie*ie+le*le<=g*g}}const _i={unknown:0,flipRequired:1,flipNotRequired:2},Oi=Math.tan(85*Math.PI/180);function tt(p,s,d,g,_,b,I){const M=l.create();if(d)if(b.name==="globe"){const O=l.calculateGlobeLabelMatrix(_,s);l.multiply(M,M,O)}else{const O=ee([],I);M[0]=O[0],M[1]=O[1],M[4]=O[2],M[5]=O[3],g||l.rotateZ(M,M,_.angle)}else l.multiply(M,_.labelPlaneMatrix,p);return M}function Si(p,s,d,g,_,b,I){const M=tt(p,s,d,g,_,b,I);return b.name==="globe"&&d||(M[2]=M[6]=M[10]=M[14]=0),M}function gr(p,s,d,g,_,b,I){if(d){if(b.name==="globe"){const M=tt(p,s,d,g,_,b,I);return l.invert(M,M),l.multiply(M,p,M),M}{const M=l.clone(p),O=l.identity([]);return O[0]=I[0],O[1]=I[1],O[4]=I[2],O[5]=I[3],l.multiply(M,M,O),g||l.rotateZ(M,M,-_.angle),M}}return _.glCoordMatrix}function pr(p,s,d,g){const _=[p,s,d,1];d?l.transformMat4$1(_,_,g):In(_,_,g);const b=_[3];return _[0]/=b,_[1]/=b,_[2]/=b,_}function Wo(p,s){return Math.min(.5+p/s*.5,1.5)}function Tn(p,s){const d=p[0]/p[3],g=p[1]/p[3];return d>=-s[0]&&d<=s[0]&&g>=-s[1]&&g<=s[1]}function Pn(p,s,d,g,_,b,I,M,O,$){const k=d.transform,q=g?p.textSizeData:p.iconSizeData,ie=l.evaluateSizeForZoom(q,d.transform.zoom),le=k.projection.name==="globe",de=[256/d.width*2+1,256/d.height*2+1],ce=g?p.text.dynamicLayoutVertexArray:p.icon.dynamicLayoutVertexArray;ce.clear();let me=null;le&&(me=g?p.text.globeExtVertexArray:p.icon.globeExtVertexArray);const X=p.lineVertexArray,se=g?p.text.placedSymbolArray:p.icon.placedSymbolArray,xe=d.transform.width/d.transform.height;let be,Re=!1;for(let ze=0;ze<se.length;ze++){const Oe=se.get(ze),{numGlyphs:Ve,writingMode:Ue}=Oe;if(Ue!==l.WritingMode.vertical||Re||be===l.WritingMode.horizontal||(Re=!0),be=Ue,(Oe.hidden||Ue===l.WritingMode.vertical)&&!Re){Kr(Ve,ce);continue}Re=!1;const Ke=new l.Point(Oe.tileAnchorX,Oe.tileAnchorY);let{x:wt,y:We,z:ct}=k.projection.projectTilePoint(Ke.x,Ke.y,$.canonical);if(O){const[Rn,Qt,yn]=O(Ke);wt+=Rn,We+=Qt,ct+=yn}const Qe=[wt,We,ct,1];if(l.transformMat4$1(Qe,Qe,s),!Tn(Qe,de)){Kr(Ve,ce);continue}const xt=Wo(d.transform.cameraToCenterDistance,Qe[3]),Xe=l.evaluateSizeForFeature(q,ie,Oe),lt=I?Xe/xt:Xe*xt,It=pr(wt,We,ct,_);if(It[3]<=0){Kr(Ve,ce);continue}let mt={};const Pt=I?null:O,dn=Tt(Oe,lt,!1,M,s,_,b,p.glyphOffsetArray,X,ce,me,It,Ke,mt,xe,Pt,k.projection,$,I);Re=dn.useVertical,Pt&&dn.needsFlipping&&(mt={}),(dn.notEnoughRoom||Re||dn.needsFlipping&&Tt(Oe,lt,!0,M,s,_,b,p.glyphOffsetArray,X,ce,me,It,Ke,mt,xe,Pt,k.projection,$,I).notEnoughRoom)&&Kr(Ve,ce)}g?(p.text.dynamicLayoutVertexBuffer.updateData(ce),me&&p.text.globeExtVertexBuffer.updateData(me)):(p.icon.dynamicLayoutVertexBuffer.updateData(ce),me&&p.icon.globeExtVertexBuffer.updateData(me))}function Xr(p,s,d,g,_,b,I,M,O,$,k,q,ie,le,de,ce){const{lineStartIndex:me,glyphStartIndex:X,segment:se}=M,xe=X+M.numGlyphs,be=me+M.lineLength,Re=s.getoffsetX(X),ze=s.getoffsetX(xe-1),Oe=Qr(p*Re,d,g,_,b,I,se,me,be,O,$,k,q,ie,!0,le,de,ce);if(!Oe)return null;const Ve=Qr(p*ze,d,g,_,b,I,se,me,be,O,$,k,q,ie,!0,le,de,ce);return Ve?{first:Oe,last:Ve}:null}function Gr(p,s,d,g){return p===l.WritingMode.horizontal&&Math.abs(g)>Math.abs(d)?{useVertical:!0}:p===l.WritingMode.vertical?g>0?{needsFlipping:!0}:null:s!==_i.unknown&&function(_,b){return _===0||Math.abs(b/_)>Oi}(d,g)?s===_i.flipRequired?{needsFlipping:!0}:null:d<0?{needsFlipping:!0}:null}function Tt(p,s,d,g,_,b,I,M,O,$,k,q,ie,le,de,ce,me,X,se){const xe=s/24,be=p.lineOffsetX*xe,Re=p.lineOffsetY*xe,{lineStartIndex:ze,glyphStartIndex:Oe,numGlyphs:Ve,segment:Ue,writingMode:Ke,flipState:wt}=p,We=ze+p.lineLength,ct=Qe=>{if(k){const[It,mt,Pt]=Qe.up,dn=$.length;l.updateGlobeVertexNormal(k,dn+0,It,mt,Pt),l.updateGlobeVertexNormal(k,dn+1,It,mt,Pt),l.updateGlobeVertexNormal(k,dn+2,It,mt,Pt),l.updateGlobeVertexNormal(k,dn+3,It,mt,Pt)}const[xt,Xe,lt]=Qe.point;l.addDynamicAttributes($,xt,Xe,lt,Qe.angle)};if(Ve>1){const Qe=Xr(xe,M,be,Re,d,q,ie,p,O,b,le,ce,!1,me,X,se);if(!Qe)return{notEnoughRoom:!0};if(g&&!d){let[xt,Xe,lt]=Qe.first.point,[It,mt,Pt]=Qe.last.point;[xt,Xe]=pr(xt,Xe,lt,I),[It,mt]=pr(It,mt,Pt,I);const dn=Gr(Ke,wt,(It-xt)*de,mt-Xe);if(p.flipState=dn&&dn.needsFlipping?_i.flipRequired:_i.flipNotRequired,dn)return dn}ct(Qe.first);for(let xt=Oe+1;xt<Oe+Ve-1;xt++){const Xe=Qr(xe*M.getoffsetX(xt),be,Re,d,q,ie,Ue,ze,We,O,b,le,ce,!1,!1,me,X,se);if(!Xe)return $.length-=4*(xt-Oe),{notEnoughRoom:!0};ct(Xe)}ct(Qe.last)}else{if(g&&!d){const xt=pr(ie.x,ie.y,0,_),Xe=ze+Ue+1,lt=new l.Point(O.getx(Xe),O.gety(Xe)),It=pr(lt.x,lt.y,0,_),mt=It[3]>0?It:bn(ie,lt,xt,1,_,void 0,me,X.canonical),Pt=Gr(Ke,wt,(mt[0]-xt[0])*de,mt[1]-xt[1]);if(p.flipState=Pt&&Pt.needsFlipping?_i.flipRequired:_i.flipNotRequired,Pt)return Pt}const Qe=Qr(xe*M.getoffsetX(Oe),be,Re,d,q,ie,Ue,ze,We,O,b,le,ce,!1,!1,me,X,se);if(!Qe)return{notEnoughRoom:!0};ct(Qe)}return{}}function xn(p,s,d,g,_){const{x:b,y:I,z:M}=g.projectTilePoint(p.x,p.y,s);if(!_)return pr(b,I,M,d);const[O,$,k]=_(p);return pr(b+O,I+$,M+k,d)}function bn(p,s,d,g,_,b,I,M){const O=xn(p.sub(s)._unit()._add(p),M,_,I,b);return l.sub(O,d,O),l.normalize(O,O),l.scaleAndAdd(O,d,O,g)}function Qr(p,s,d,g,_,b,I,M,O,$,k,q,ie,le,de,ce,me,X){const se=g?p-s:p+s;let xe=se>0?1:-1,be=0;g&&(xe*=-1,be=Math.PI),xe<0&&(be+=Math.PI);let Re=M+I+(xe>0?0:1)|0,ze=_,Oe=_,Ve=0,Ue=0;const Ke=Math.abs(se),wt=[],We=[];let ct=b,Qe=ct;const xt=()=>bn(Qe,ct,Oe,Ke-Ve+1,k,ie,ce,me.canonical);for(;Ve+Ue<=Ke;){if(Re+=xe,Re<M||Re>=O)return null;if(Oe=ze,Qe=ct,wt.push(Oe),le&&We.push(Qe),ct=new l.Point($.getx(Re),$.gety(Re)),ze=q[Re],!ze){const yn=xn(ct,me.canonical,k,ce,ie);ze=yn[3]>0?q[Re]=yn:xt()}Ve+=Ue,Ue=l.distance(Oe,ze)}de&&ie&&(q[Re]&&(ze=xt(),Ue=l.distance(Oe,ze)),q[Re]=ze);const Xe=(Ke-Ve)/Ue,lt=ct.sub(Qe)._mult(Xe)._add(Qe),It=l.sub([],ze,Oe),mt=l.scaleAndAdd([],Oe,It,Xe);let Pt=[0,0,1],dn=It[0],Rn=It[1];if(X&&(Pt=ce.upVector(me.canonical,lt.x,lt.y),Pt[0]!==0||Pt[1]!==0||Pt[2]!==1)){const yn=[Pt[2],0,-Pt[0]],Hn=l.cross([],Pt,yn);l.normalize(yn,yn),l.normalize(Hn,Hn),dn=l.dot(It,yn),Rn=l.dot(It,Hn)}if(d){const yn=l.cross([],Pt,It);l.normalize(yn,yn),l.scaleAndAdd(mt,mt,yn,d*xe)}const Qt=be+Math.atan2(Rn,dn);return wt.push(mt),le&&We.push(lt),{point:mt,angle:Qt,path:wt,tilePath:We,up:Pt}}function Kr(p,s){const d=s.length,g=d+4*p;s.resize(g),s.float32.fill(-1/0,4*d,4*g)}function In(p,s,d){const g=s[0],_=s[1];return p[0]=d[0]*g+d[4]*_+d[12],p[1]=d[1]*g+d[5]*_+d[13],p[3]=d[3]*g+d[7]*_+d[15],p}const Br=100;class Ao{constructor(s,d,g=new io(s.width+200,s.height+200,25),_=new io(s.width+200,s.height+200,25)){this.transform=s,this.grid=g,this.ignoredGrid=_,this.pitchfactor=Math.cos(s._pitch)*s.cameraToCenterDistance,this.screenRightBoundary=s.width+Br,this.screenBottomBoundary=s.height+Br,this.gridRightBoundary=s.width+200,this.gridBottomBoundary=s.height+200,this.fogState=d}placeCollisionBox(s,d,g,_,b,I,M,O){let $=g.projectedAnchorX,k=g.projectedAnchorY,q=g.projectedAnchorZ;const ie=g.elevation,le=g.tileID,de=s.getProjection();if(ie&&le){const[ze,Oe,Ve]=de.upVector(le.canonical,g.tileAnchorX,g.tileAnchorY),Ue=de.upVectorScale(le.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;$+=ze*ie*Ue,k+=Oe*ie*Ue,q+=Ve*ie*Ue}const ce=this.projectAndGetPerspectiveRatio(M,$,k,q,g.tileID,de.name==="globe"||!!ie||this.transform.pitch>0,de),me=I*ce.perspectiveRatio,X=(g.x1*d+_.x-g.padding)*me+ce.point.x,se=(g.y1*d+_.y-g.padding)*me+ce.point.y,xe=(g.x2*d+_.x+g.padding)*me+ce.point.x,be=(g.y2*d+_.y+g.padding)*me+ce.point.y,Re=ce.perspectiveRatio<=.55||ce.occluded;return!this.isInsideGrid(X,se,xe,be)||!b&&this.grid.hitTest(X,se,xe,be,O)||Re?{box:[],offscreen:!1,occluded:ce.occluded}:{box:[X,se,xe,be],offscreen:this.isOffscreen(X,se,xe,be),occluded:!1}}placeCollisionCircles(s,d,g,_,b,I,M,O,$,k,q,ie,le,de,ce){const me=[],X=this.transform.elevation,se=s.getProjection(),xe=X?X.getAtTileOffsetFunc(ce,this.transform.center.lat,this.transform.worldSize,se):null,be=new l.Point(g.tileAnchorX,g.tileAnchorY);let{x:Re,y:ze,z:Oe}=se.projectTilePoint(be.x,be.y,ce.canonical);if(xe){const[lt,It,mt]=xe(be);Re+=lt,ze+=It,Oe+=mt}const Ve=se.name==="globe",Ue=this.projectAndGetPerspectiveRatio(M,Re,ze,Oe,ce,Ve||!!X||this.transform.pitch>0,se),{perspectiveRatio:Ke}=Ue,wt=(q?I/Ke:I*Ke)/l.ONE_EM,We=pr(Re,ze,Oe,O),ct=Ue.signedDistanceFromCamera>0?Xr(wt,b,g.lineOffsetX*wt,g.lineOffsetY*wt,!1,We,be,g,_,O,{},X&&!q?xe:null,q&&!!X,se,ce,q):null;let Qe=!1,xt=!1,Xe=!0;if(ct&&!Ue.occluded){const lt=.5*le*Ke+de,It=new l.Point(-100,-100),mt=new l.Point(this.screenRightBoundary,this.screenBottomBoundary),Pt=new ro,{first:dn,last:Rn}=ct,Qt=dn.path.length;let yn=[];for(let cn=Qt-1;cn>=1;cn--)yn.push(dn.path[cn]);for(let cn=1;cn<Rn.path.length;cn++)yn.push(Rn.path[cn]);const Hn=2.5*lt;$&&(yn=yn.map(([cn,ur,vr],yr)=>(xe&&!Ve&&(vr=xe(yr<Qt-1?dn.tilePath[Qt-1-yr]:Rn.tilePath[yr-Qt+2])[2]),pr(cn,ur,vr,$))),yn.some(cn=>cn[3]<=0)&&(yn=[]));let Un=[];if(yn.length>0){let cn=1/0,ur=-1/0,vr=1/0,yr=-1/0;for(const _r of yn)cn=Math.min(cn,_r[0]),vr=Math.min(vr,_r[1]),ur=Math.max(ur,_r[0]),yr=Math.max(yr,_r[1]);ur>=It.x&&cn<=mt.x&&yr>=It.y&&vr<=mt.y&&(Un=[yn.map(_r=>new l.Point(_r[0],_r[1]))],(cn<It.x||ur>mt.x||vr<It.y||yr>mt.y)&&(Un=l.clipLine(Un,It.x,It.y,mt.x,mt.y)))}for(const cn of Un){Pt.reset(cn,.25*lt);let ur=0;ur=Pt.length<=.5*lt?1:Math.ceil(Pt.paddedLength/Hn)+1;for(let vr=0;vr<ur;vr++){const yr=vr/Math.max(ur-1,1),_r=Pt.lerp(yr),Hi=_r.x+Br,Ti=_r.y+Br;me.push(Hi,Ti,lt,0);const Lo=Hi-lt,wa=Ti-lt,jr=Hi+lt,xr=Ti+lt;if(Xe=Xe&&this.isOffscreen(Lo,wa,jr,xr),xt=xt||this.isInsideGrid(Lo,wa,jr,xr),!d&&this.grid.hitTestCircle(Hi,Ti,lt,ie)&&(Qe=!0,!k))return{circles:[],offscreen:!1,collisionDetected:Qe,occluded:!1}}}}return{circles:!k&&Qe||!xt?[]:me,offscreen:Xe,collisionDetected:Qe,occluded:Ue.occluded}}queryRenderedSymbols(s){if(s.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const d=[];let g=1/0,_=1/0,b=-1/0,I=-1/0;for(const k of s){const q=new l.Point(k.x+Br,k.y+Br);g=Math.min(g,q.x),_=Math.min(_,q.y),b=Math.max(b,q.x),I=Math.max(I,q.y),d.push(q)}const M=this.grid.query(g,_,b,I).concat(this.ignoredGrid.query(g,_,b,I)),O={},$={};for(const k of M){const q=k.key;if(O[q.bucketInstanceId]===void 0&&(O[q.bucketInstanceId]={}),O[q.bucketInstanceId][q.featureIndex])continue;const ie=[new l.Point(k.x1,k.y1),new l.Point(k.x2,k.y1),new l.Point(k.x2,k.y2),new l.Point(k.x1,k.y2)];l.polygonIntersectsPolygon(d,ie)&&(O[q.bucketInstanceId][q.featureIndex]=!0,$[q.bucketInstanceId]===void 0&&($[q.bucketInstanceId]=[]),$[q.bucketInstanceId].push(q.featureIndex))}return $}insertCollisionBox(s,d,g,_,b){(d?this.ignoredGrid:this.grid).insert({bucketInstanceId:g,featureIndex:_,collisionGroupID:b},s[0],s[1],s[2],s[3])}insertCollisionCircles(s,d,g,_,b){const I=d?this.ignoredGrid:this.grid,M={bucketInstanceId:g,featureIndex:_,collisionGroupID:b};for(let O=0;O<s.length;O+=4)I.insertCircle(M,s[O],s[O+1],s[O+2])}projectAndGetPerspectiveRatio(s,d,g,_,b,I,M){const O=[d,g,_,1];let $=!1;_||this.transform.pitch>0?(l.transformMat4$1(O,O,s),this.fogState&&b&&M.name!=="globe"&&($=function(ie,le,de,ce,me,X){const se=X.calculateFogTileMatrix(me),xe=[le,de,ce];return l.transformMat4(xe,xe,se),$e(ie,xe,X.pitch,X._fov)}(this.fogState,d,g,_,b.toUnwrapped(),this.transform)>.9)):In(O,O,s);const k=O[3];return{point:new l.Point((O[0]/k+1)/2*this.transform.width+Br,(-O[1]/k+1)/2*this.transform.height+Br),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(M)/k*.5,1.5),signedDistanceFromCamera:k,occluded:I&&O[2]>k||$}}isOffscreen(s,d,g,_){return g<Br||s>=this.screenRightBoundary||_<Br||d>this.screenBottomBoundary}isInsideGrid(s,d,g,_){return g>=0&&s<this.gridRightBoundary&&_>=0&&d<this.gridBottomBoundary}getViewportMatrix(){const s=l.identity([]);return l.translate(s,s,[-100,-100,0]),s}}function Ro(p,s,d){const g=s.createTileMatrix(p,p.worldSize,d.toUnwrapped());return l.multiply(new Float32Array(16),p.projMatrix,g)}function Ui(p,s,d){if(s.projection.name===d.projection.name)return p.projMatrix;const g=d.clone();return g.setProjection(s.projection),Ro(g,s.getProjection(),p)}function Xn(p,s,d){return s.name===d.projection.name?p.projMatrix:Ro(d,s,p)}class Ns{constructor(s,d,g,_){this.opacity=s?Math.max(0,Math.min(1,s.opacity+(s.placed?d:-d))):_&&g?1:0,this.placed=g}isHidden(){return this.opacity===0&&!this.placed}}class xi{constructor(s,d,g,_,b,I=!1){this.text=new Ns(s?s.text:null,d,g,b),this.icon=new Ns(s?s.icon:null,d,_,b),this.clipped=I}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class bo{constructor(s,d,g,_=!1){this.text=s,this.icon=d,this.skipFade=g,this.clipped=_}}class Oo{constructor(){this.invProjMatrix=l.create(),this.viewportMatrix=l.create(),this.circles=[]}}class ma{constructor(s,d,g,_,b){this.bucketInstanceId=s,this.featureIndex=d,this.sourceLayerIndex=g,this.bucketIndex=_,this.tileID=b}}class vs{constructor(s){this.crossSourceCollisions=s,this.maxGroupID=0,this.collisionGroups={}}get(s){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[s]){const d=++this.maxGroupID;this.collisionGroups[s]={ID:d,predicate:g=>g.collisionGroupID===d}}return this.collisionGroups[s]}}function qo(p,s,d,g,_){const{horizontalAlign:b,verticalAlign:I}=l.getAnchorAlignment(p),M=-(b-.5)*s,O=-(I-.5)*d,$=l.evaluateVariableOffset(p,g);return new l.Point(M+$[0]*_,O+$[1]*_)}function ga(p,s,d,g,_){const b=new l.Point(p,s);return d&&b._rotate(g?_:-_),b}class ys{constructor(s,d,g,_,b){this.transform=s.clone(),this.projection=s.projection.name,this.collisionIndex=new Ao(this.transform,b),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=d,this.retainedQueryData={},this.collisionGroups=new vs(g),this.collisionCircleArrays={},this.prevPlacement=_,_&&(_.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(s,d,g,_){const b=g.getBucket(d),I=g.latestFeatureIndex;if(!b||!I||d.id!==b.layerIds[0])return;const M=b.layers[0].layout,O=g.collisionBoxArray,$=Math.pow(2,this.transform.zoom-g.tileID.overscaledZ),k=g.tileSize/l.EXTENT,q=g.tileID.toUnwrapped();this.transform.setProjection(b.projection);const ie=(le=g.tileID,de=b.getProjection(),ce=this.transform,de.name===this.projection?ce.calculateProjMatrix(le.toUnwrapped()):Ro(ce,de,le));var le,de,ce;const me=M.get("text-pitch-alignment")==="map",X=M.get("text-rotation-alignment")==="map";d.compileFilter();const se=d.dynamicFilter(),xe=d.dynamicFilterNeedsFeature(),be=this.transform.calculatePixelsToTileUnitsMatrix(g),Re=Si(ie,g.tileID.canonical,me,X,this.transform,b.getProjection(),be);let ze=null;if(me){const Ue=gr(ie,g.tileID.canonical,me,X,this.transform,b.getProjection(),be);ze=l.multiply([],this.transform.labelPlaneMatrix,Ue)}let Oe=null;se&&g.latestFeatureIndex&&(Oe={unwrappedTileID:q,dynamicFilter:se,dynamicFilterNeedsFeature:xe,featureIndex:g.latestFeatureIndex}),this.retainedQueryData[b.bucketInstanceId]=new ma(b.bucketInstanceId,I,b.sourceLayerIndex,b.index,g.tileID);const Ve={bucket:b,layout:M,posMatrix:ie,textLabelPlaneMatrix:Re,labelToScreenMatrix:ze,clippingData:Oe,scale:$,textPixelRatio:k,holdingForFade:g.holdingForFade(),collisionBoxArray:O,partiallyEvaluatedTextSize:l.evaluateSizeForZoom(b.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:l.evaluateSizeForZoom(b.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(b.sourceID)};if(_)for(const Ue of b.sortKeyRanges){const{sortKey:Ke,symbolInstanceStart:wt,symbolInstanceEnd:We}=Ue;s.push({sortKey:Ke,symbolInstanceStart:wt,symbolInstanceEnd:We,parameters:Ve})}else s.push({symbolInstanceStart:0,symbolInstanceEnd:b.symbolInstances.length,parameters:Ve})}attemptAnchorPlacement(s,d,g,_,b,I,M,O,$,k,q,ie,le,de,ce,me,X,se){const{textOffset0:xe,textOffset1:be,crossTileID:Re}=ie,ze=[xe,be],Oe=qo(s,g,_,ze,b),Ve=this.collisionIndex.placeCollisionBox(de,b,d,ga(Oe.x,Oe.y,I,M,this.transform.angle),q,O,$,k.predicate);if(me){const Ue=de.getSymbolInstanceIconSize(se,this.transform.zoom,ie.placedIconSymbolIndex);if(this.collisionIndex.placeCollisionBox(de,Ue,me,ga(Oe.x,Oe.y,I,M,this.transform.angle),q,O,$,k.predicate).box.length===0)return}if(Ve.box.length>0){let Ue;return this.prevPlacement&&this.prevPlacement.variableOffsets[Re]&&this.prevPlacement.placements[Re]&&this.prevPlacement.placements[Re].text&&(Ue=this.prevPlacement.variableOffsets[Re].anchor),this.variableOffsets[Re]={textOffset:ze,width:g,height:_,anchor:s,textScale:b,prevAnchor:Ue},this.markUsedJustification(de,s,ie,ce),de.allowVerticalPlacement&&(this.markUsedOrientation(de,ce,ie),this.placedOrientations[Re]=ce),{shift:Oe,placedGlyphBoxes:Ve}}}placeLayerBucketPart(s,d,g,_){const{bucket:b,layout:I,posMatrix:M,textLabelPlaneMatrix:O,labelToScreenMatrix:$,clippingData:k,textPixelRatio:q,holdingForFade:ie,collisionBoxArray:le,partiallyEvaluatedTextSize:de,partiallyEvaluatedIconSize:ce,collisionGroup:me}=s.parameters,X=I.get("text-optional"),se=I.get("icon-optional"),xe=I.get("text-allow-overlap"),be=I.get("icon-allow-overlap"),Re=I.get("text-rotation-alignment")==="map",ze=I.get("text-pitch-alignment")==="map",Oe=I.get("icon-text-fit")!=="none",Ve=I.get("symbol-z-order")==="viewport-y";this.transform.setProjection(b.projection);let Ue=xe&&(be||!b.hasIconData()||se),Ke=be&&(xe||!b.hasTextData()||X);!b.collisionArrays&&le&&b.deserializeCollisionBoxes(le),g&&_&&b.updateCollisionDebugBuffers(this.transform.zoom,le);const wt=(We,ct,Qe)=>{const{crossTileID:xt,numVerticalGlyphVertices:Xe}=We;if(k){const jr={zoom:this.transform.zoom,pitch:this.transform.pitch};let xr=null;if(k.dynamicFilterNeedsFeature){const rr=this.retainedQueryData[b.bucketInstanceId];xr=k.featureIndex.loadFeature({featureIndex:We.featureIndex,bucketIndex:rr.bucketIndex,sourceLayerIndex:rr.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,k.dynamicFilter)(jr,xr,this.retainedQueryData[b.bucketInstanceId].tileID.canonical,new l.Point(We.tileAnchorX,We.tileAnchorY),this.transform.calculateDistanceTileData(k.unwrappedTileID)))return this.placements[xt]=new bo(!1,!1,!1,!0),void d.add(xt)}if(d.has(xt))return;if(ie)return void(this.placements[xt]=new bo(!1,!1,!1));let lt=!1,It=!1,mt=!0,Pt=!1,dn=!1,Rn=null,Qt={box:null,offscreen:null,occluded:null},yn={box:null,offscreen:null,occluded:null},Hn=null,Un=null,cn=null,ur=0,vr=0,yr=0;Qe.textFeatureIndex?ur=Qe.textFeatureIndex:We.useRuntimeCollisionCircles&&(ur=We.featureIndex),Qe.verticalTextFeatureIndex&&(vr=Qe.verticalTextFeatureIndex);const _r=jr=>{jr.tileID=this.retainedQueryData[b.bucketInstanceId].tileID;const xr=this.transform.elevation;(xr||jr.elevation)&&(jr.elevation=xr?xr.getAtTileOffset(jr.tileID,jr.tileAnchorX,jr.tileAnchorY):0)},Hi=Qe.textBox;if(Hi){_r(Hi);const jr=rr=>{let ai=l.WritingMode.horizontal;if(b.allowVerticalPlacement&&!rr&&this.prevPlacement){const Ki=this.prevPlacement.placedOrientations[xt];Ki&&(this.placedOrientations[xt]=Ki,ai=Ki,this.markUsedOrientation(b,ai,We))}return ai},xr=(rr,ai)=>{if(b.allowVerticalPlacement&&Xe>0&&Qe.verticalTextBox){for(const Ki of b.writingModes)if(Ki===l.WritingMode.vertical?(Qt=ai(),yn=Qt):Qt=rr(),Qt&&Qt.box&&Qt.box.length)break}else Qt=rr()};if(I.get("text-variable-anchor")){let rr=I.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[xt]){const Dr=this.prevPlacement.variableOffsets[xt];rr.indexOf(Dr.anchor)>0&&(rr=rr.filter(oo=>oo!==Dr.anchor),rr.unshift(Dr.anchor))}const ai=(Dr,oo,nd)=>{const Zs=b.getSymbolInstanceTextSize(de,We,this.transform.zoom,ct),jc=(Dr.x2-Dr.x1)*Zs+2*Dr.padding,Wa=(Dr.y2-Dr.y1)*Zs+2*Dr.padding,Ss=Oe&&!be?oo:null;Ss&&_r(Ss);let Xs={box:[],offscreen:!1,occluded:!1};const rd=xe?2*rr.length:rr.length;for(let Uc=0;Uc<rd;++Uc){const xf=this.attemptAnchorPlacement(rr[Uc%rr.length],Dr,jc,Wa,Zs,Re,ze,q,M,me,Uc>=rr.length,We,ct,b,nd,Ss,de,ce);if(xf&&(Xs=xf.placedGlyphBoxes,Xs&&Xs.box&&Xs.box.length)){lt=!0,Rn=xf.shift;break}}return Xs};xr(()=>ai(Hi,Qe.iconBox,l.WritingMode.horizontal),()=>{const Dr=Qe.verticalTextBox;return Dr&&_r(Dr),b.allowVerticalPlacement&&!(Qt&&Qt.box&&Qt.box.length)&&Xe>0&&Dr?ai(Dr,Qe.verticalIconBox,l.WritingMode.vertical):{box:null,offscreen:null,occluded:null}}),Qt&&(lt=Qt.box,mt=Qt.offscreen,Pt=Qt.occluded);const Ki=jr(!(!Qt||!Qt.box));if(!lt&&this.prevPlacement){const Dr=this.prevPlacement.variableOffsets[xt];Dr&&(this.variableOffsets[xt]=Dr,this.markUsedJustification(b,Dr.anchor,We,Ki))}}else{const rr=(ai,Ki)=>{const Dr=b.getSymbolInstanceTextSize(de,We,this.transform.zoom,ct),oo=this.collisionIndex.placeCollisionBox(b,Dr,ai,new l.Point(0,0),xe,q,M,me.predicate);return oo&&oo.box&&oo.box.length&&(this.markUsedOrientation(b,Ki,We),this.placedOrientations[xt]=Ki),oo};xr(()=>rr(Hi,l.WritingMode.horizontal),()=>{const ai=Qe.verticalTextBox;return b.allowVerticalPlacement&&Xe>0&&ai?(_r(ai),rr(ai,l.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}}),jr(!!(Qt&&Qt.box&&Qt.box.length))}}if(Hn=Qt,lt=Hn&&Hn.box&&Hn.box.length>0,mt=Hn&&Hn.offscreen,Pt=Hn&&Hn.occluded,We.useRuntimeCollisionCircles){const jr=b.text.placedSymbolArray.get(We.centerJustifiedTextSymbolIndex>=0?We.centerJustifiedTextSymbolIndex:We.verticalPlacedTextSymbolIndex),xr=l.evaluateSizeForFeature(b.textSizeData,de,jr),rr=I.get("text-padding");Un=this.collisionIndex.placeCollisionCircles(b,xe,jr,b.lineVertexArray,b.glyphOffsetArray,xr,M,O,$,g,ze,me.predicate,We.collisionCircleDiameter*xr/l.ONE_EM,rr,this.retainedQueryData[b.bucketInstanceId].tileID),lt=xe||Un.circles.length>0&&!Un.collisionDetected,mt=mt&&Un.offscreen,Pt=Un.occluded}if(Qe.iconFeatureIndex&&(yr=Qe.iconFeatureIndex),Qe.iconBox){const jr=xr=>{_r(xr);const rr=Oe&&Rn?ga(Rn.x,Rn.y,Re,ze,this.transform.angle):new l.Point(0,0),ai=b.getSymbolInstanceIconSize(ce,this.transform.zoom,We.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(b,ai,xr,rr,be,q,M,me.predicate)};yn&&yn.box&&yn.box.length&&Qe.verticalIconBox?(cn=jr(Qe.verticalIconBox),It=cn.box.length>0):(cn=jr(Qe.iconBox),It=cn.box.length>0),mt=mt&&cn.offscreen,dn=cn.occluded}const Ti=X||We.numHorizontalGlyphVertices===0&&Xe===0,Lo=se||We.numIconVertices===0;if(Ti||Lo?Lo?Ti||(It=It&&lt):lt=It&&lt:It=lt=It&&lt,lt&&Hn&&Hn.box&&this.collisionIndex.insertCollisionBox(Hn.box,I.get("text-ignore-placement"),b.bucketInstanceId,yn&&yn.box&&vr?vr:ur,me.ID),It&&cn&&this.collisionIndex.insertCollisionBox(cn.box,I.get("icon-ignore-placement"),b.bucketInstanceId,yr,me.ID),Un&&(lt&&this.collisionIndex.insertCollisionCircles(Un.circles,I.get("text-ignore-placement"),b.bucketInstanceId,ur,me.ID),g)){const jr=b.bucketInstanceId;let xr=this.collisionCircleArrays[jr];xr===void 0&&(xr=this.collisionCircleArrays[jr]=new Oo);for(let rr=0;rr<Un.circles.length;rr+=4)xr.circles.push(Un.circles[rr+0]),xr.circles.push(Un.circles[rr+1]),xr.circles.push(Un.circles[rr+2]),xr.circles.push(Un.collisionDetected?1:0)}const wa=b.projection.name!=="globe";Ue=Ue&&(wa||!Pt),Ke=Ke&&(wa||!dn),this.placements[xt]=new bo(lt||Ue,It||Ke,mt||b.justReloaded),d.add(xt)};if(Ve){const We=b.getSortedSymbolIndexes(this.transform.angle);for(let ct=We.length-1;ct>=0;--ct){const Qe=We[ct];wt(b.symbolInstances.get(Qe),Qe,b.collisionArrays[Qe])}}else for(let We=s.symbolInstanceStart;We<s.symbolInstanceEnd;We++)wt(b.symbolInstances.get(We),We,b.collisionArrays[We]);if(g&&b.bucketInstanceId in this.collisionCircleArrays){const We=this.collisionCircleArrays[b.bucketInstanceId];l.invert(We.invProjMatrix,M),We.viewportMatrix=this.collisionIndex.getViewportMatrix()}b.justReloaded=!1}markUsedJustification(s,d,g,_){const{leftJustifiedTextSymbolIndex:b,centerJustifiedTextSymbolIndex:I,rightJustifiedTextSymbolIndex:M,verticalPlacedTextSymbolIndex:O,crossTileID:$}=g,k=l.getAnchorJustification(d),q=_===l.WritingMode.vertical?O:k==="left"?b:k==="center"?I:k==="right"?M:-1;b>=0&&(s.text.placedSymbolArray.get(b).crossTileID=q>=0&&b!==q?0:$),I>=0&&(s.text.placedSymbolArray.get(I).crossTileID=q>=0&&I!==q?0:$),M>=0&&(s.text.placedSymbolArray.get(M).crossTileID=q>=0&&M!==q?0:$),O>=0&&(s.text.placedSymbolArray.get(O).crossTileID=q>=0&&O!==q?0:$)}markUsedOrientation(s,d,g){const _=d===l.WritingMode.horizontal||d===l.WritingMode.horizontalOnly?d:0,b=d===l.WritingMode.vertical?d:0,{leftJustifiedTextSymbolIndex:I,centerJustifiedTextSymbolIndex:M,rightJustifiedTextSymbolIndex:O,verticalPlacedTextSymbolIndex:$}=g,k=s.text.placedSymbolArray;I>=0&&(k.get(I).placedOrientation=_),M>=0&&(k.get(M).placedOrientation=_),O>=0&&(k.get(O).placedOrientation=_),$>=0&&(k.get($).placedOrientation=b)}commit(s){this.commitTime=s,this.zoomAtLastRecencyCheck=this.transform.zoom;const d=this.prevPlacement;let g=!1;this.prevZoomAdjustment=d?d.zoomAdjustment(this.transform.zoom):0;const _=d?d.symbolFadeChange(s):1,b=d?d.opacities:{},I=d?d.variableOffsets:{},M=d?d.placedOrientations:{};for(const O in this.placements){const $=this.placements[O],k=b[O];k?(this.opacities[O]=new xi(k,_,$.text,$.icon,null,$.clipped),g=g||$.text!==k.text.placed||$.icon!==k.icon.placed):(this.opacities[O]=new xi(null,_,$.text,$.icon,$.skipFade,$.clipped),g=g||$.text||$.icon)}for(const O in b){const $=b[O];if(!this.opacities[O]){const k=new xi($,_,!1,!1);k.isHidden()||(this.opacities[O]=k,g=g||$.text.placed||$.icon.placed)}}for(const O in I)this.variableOffsets[O]||!this.opacities[O]||this.opacities[O].isHidden()||(this.variableOffsets[O]=I[O]);for(const O in M)this.placedOrientations[O]||!this.opacities[O]||this.opacities[O].isHidden()||(this.placedOrientations[O]=M[O]);g?this.lastPlacementChangeTime=s:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=d?d.lastPlacementChangeTime:s)}updateLayerOpacities(s,d){const g=new Set;for(const _ of d){const b=_.getBucket(s);b&&_.latestFeatureIndex&&s.id===b.layerIds[0]&&this.updateBucketOpacities(b,g,_.collisionBoxArray)}}updateBucketOpacities(s,d,g){s.hasTextData()&&s.text.opacityVertexArray.clear(),s.hasIconData()&&s.icon.opacityVertexArray.clear(),s.hasIconCollisionBoxData()&&s.iconCollisionBox.collisionVertexArray.clear(),s.hasTextCollisionBoxData()&&s.textCollisionBox.collisionVertexArray.clear();const _=s.layers[0].layout,b=!!s.layers[0].dynamicFilter(),I=new xi(null,0,!1,!1,!0),M=_.get("text-allow-overlap"),O=_.get("icon-allow-overlap"),$=_.get("text-variable-anchor"),k=_.get("text-rotation-alignment")==="map",q=_.get("text-pitch-alignment")==="map",ie=_.get("icon-text-fit")!=="none",le=new xi(null,0,M&&(O||!s.hasIconData()||_.get("icon-optional")),O&&(M||!s.hasTextData()||_.get("text-optional")),!0);!s.collisionArrays&&g&&(s.hasIconCollisionBoxData()||s.hasTextCollisionBoxData())&&s.deserializeCollisionBoxes(g);const de=(me,X,se)=>{for(let xe=0;xe<X/4;xe++)me.opacityVertexArray.emplaceBack(se)};let ce=0;for(let me=0;me<s.symbolInstances.length;me++){const X=s.symbolInstances.get(me),{numHorizontalGlyphVertices:se,numVerticalGlyphVertices:xe,crossTileID:be,numIconVertices:Re}=X,ze=d.has(be);let Oe=this.opacities[be];ze?Oe=I:Oe||(Oe=le,this.opacities[be]=Oe),d.add(be);const Ve=se>0||xe>0,Ue=Re>0,Ke=this.placedOrientations[be],wt=Ke===l.WritingMode.vertical,We=Ke===l.WritingMode.horizontal||Ke===l.WritingMode.horizontalOnly;if(!Ve&&!Ue||Oe.isHidden()||ce++,Ve){const ct=ya(Oe.text);de(s.text,se,wt?zr:ct),de(s.text,xe,We?zr:ct);const Qe=Oe.text.isHidden(),{leftJustifiedTextSymbolIndex:xt,centerJustifiedTextSymbolIndex:Xe,rightJustifiedTextSymbolIndex:lt,verticalPlacedTextSymbolIndex:It}=X,mt=s.text.placedSymbolArray,Pt=Qe||wt?1:0;xt>=0&&(mt.get(xt).hidden=Pt),Xe>=0&&(mt.get(Xe).hidden=Pt),lt>=0&&(mt.get(lt).hidden=Pt),It>=0&&(mt.get(It).hidden=Qe||We?1:0);const dn=this.variableOffsets[be];dn&&this.markUsedJustification(s,dn.anchor,X,Ke);const Rn=this.placedOrientations[be];Rn&&(this.markUsedJustification(s,"left",X,Rn),this.markUsedOrientation(s,Rn,X))}if(Ue){const ct=ya(Oe.icon),{placedIconSymbolIndex:Qe,verticalPlacedIconSymbolIndex:xt}=X,Xe=s.icon.placedSymbolArray,lt=Oe.icon.isHidden()?1:0;Qe>=0&&(de(s.icon,Re,wt?zr:ct),Xe.get(Qe).hidden=lt),xt>=0&&(de(s.icon,X.numVerticalIconVertices,We?zr:ct),Xe.get(xt).hidden=lt)}if(s.hasIconCollisionBoxData()||s.hasTextCollisionBoxData()){const ct=s.collisionArrays[me];if(ct){let Qe=new l.Point(0,0),xt=!0;if(ct.textBox||ct.verticalTextBox){if($){const lt=this.variableOffsets[be];lt?(Qe=qo(lt.anchor,lt.width,lt.height,lt.textOffset,lt.textScale),k&&Qe._rotate(q?this.transform.angle:-this.transform.angle)):xt=!1}b&&(xt=!Oe.clipped),ct.textBox&&va(s.textCollisionBox.collisionVertexArray,Oe.text.placed,!xt||wt,Qe.x,Qe.y),ct.verticalTextBox&&va(s.textCollisionBox.collisionVertexArray,Oe.text.placed,!xt||We,Qe.x,Qe.y)}const Xe=xt&&!!(!We&&ct.verticalIconBox);ct.iconBox&&va(s.iconCollisionBox.collisionVertexArray,Oe.icon.placed,Xe,ie?Qe.x:0,ie?Qe.y:0),ct.verticalIconBox&&va(s.iconCollisionBox.collisionVertexArray,Oe.icon.placed,!Xe,ie?Qe.x:0,ie?Qe.y:0)}}}if(s.fullyClipped=ce===0,s.sortFeatures(this.transform.angle),this.retainedQueryData[s.bucketInstanceId]&&(this.retainedQueryData[s.bucketInstanceId].featureSortOrder=s.featureSortOrder),s.hasTextData()&&s.text.opacityVertexBuffer&&s.text.opacityVertexBuffer.updateData(s.text.opacityVertexArray),s.hasIconData()&&s.icon.opacityVertexBuffer&&s.icon.opacityVertexBuffer.updateData(s.icon.opacityVertexArray),s.hasIconCollisionBoxData()&&s.iconCollisionBox.collisionVertexBuffer&&s.iconCollisionBox.collisionVertexBuffer.updateData(s.iconCollisionBox.collisionVertexArray),s.hasTextCollisionBoxData()&&s.textCollisionBox.collisionVertexBuffer&&s.textCollisionBox.collisionVertexBuffer.updateData(s.textCollisionBox.collisionVertexArray),s.bucketInstanceId in this.collisionCircleArrays){const me=this.collisionCircleArrays[s.bucketInstanceId];s.placementInvProjMatrix=me.invProjMatrix,s.placementViewportMatrix=me.viewportMatrix,s.collisionCircleArray=me.circles,delete this.collisionCircleArrays[s.bucketInstanceId]}}symbolFadeChange(s){return this.fadeDuration===0?1:(s-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(s){return Math.max(0,(this.transform.zoom-s)/1.5)}hasTransitions(s){return this.stale||s-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(s,d){const g=this.zoomAtLastRecencyCheck===d?1-this.zoomAdjustment(d):1;return this.zoomAtLastRecencyCheck=d,this.commitTime+this.fadeDuration*g>s}setStale(){this.stale=!0}}function va(p,s,d,g,_){p.emplaceBack(s?1:0,d?1:0,g||0,_||0),p.emplaceBack(s?1:0,d?1:0,g||0,_||0),p.emplaceBack(s?1:0,d?1:0,g||0,_||0),p.emplaceBack(s?1:0,d?1:0,g||0,_||0)}const Ei=Math.pow(2,25),Nr=Math.pow(2,24),hn=Math.pow(2,17),$n=Math.pow(2,16),Yn=Math.pow(2,9),dr=Math.pow(2,8),Wr=Math.pow(2,1);function ya(p){if(p.opacity===0&&!p.placed)return 0;if(p.opacity===1&&p.placed)return 4294967295;const s=p.placed?1:0,d=Math.floor(127*p.opacity);return d*Ei+s*Nr+d*hn+s*$n+d*Yn+s*dr+d*Wr+s}const zr=0;class _s{constructor(s){this._sortAcrossTiles=s.layout.get("symbol-z-order")!=="viewport-y"&&s.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs=new Set,this._bucketParts=[]}continuePlacement(s,d,g,_,b){const I=this._bucketParts;for(;this._currentTileIndex<s.length;)if(d.getBucketParts(I,_,s[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,b())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,I.sort((M,O)=>M.sortKey-O.sortKey));this._currentPartIndex<I.length;){const M=I[this._currentPartIndex];if(d.placeLayerBucketPart(M,this._seenCrossTileIDs,g,M.symbolInstanceStart===0),this._currentPartIndex++,b())return!0}return!1}}class xs{constructor(s,d,g,_,b,I,M,O){this.placement=new ys(s,b,I,M,O),this._currentPlacementIndex=d.length-1,this._forceFullPlacement=g,this._showCollisionBoxes=_,this._done=!1}isDone(){return this._done}continuePlacement(s,d,g){const _=l.exported.now(),b=()=>{const I=l.exported.now()-_;return!this._forceFullPlacement&&I>2};for(;this._currentPlacementIndex>=0;){const I=d[s[this._currentPlacementIndex]],M=this.placement.collisionIndex.transform.zoom;if(I.type==="symbol"&&(!I.minzoom||I.minzoom<=M)&&(!I.maxzoom||I.maxzoom>M)){if(this._inProgressLayer||(this._inProgressLayer=new _s(I)),this._inProgressLayer.continuePlacement(g[I.source],this.placement,this._showCollisionBoxes,I,b))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(s){return this.placement.commit(s),this.placement}}const js=512/l.EXTENT/2;class zi{constructor(s,d,g){this.tileID=s,this.bucketInstanceId=g,this.index=new l.KDBush(d.length,16,Int32Array),this.keys=[],this.crossTileIDs=[];const _=s.canonical.x*l.EXTENT,b=s.canonical.y*l.EXTENT;for(let I=0;I<d.length;I++){const{key:M,crossTileID:O,tileAnchorX:$,tileAnchorY:k}=d.get(I),q=Math.floor((_+$)*js),ie=Math.floor((b+k)*js);this.index.add(q,ie),this.keys.push(M),this.crossTileIDs.push(O)}this.index.finish()}findMatches(s,d,g){const _=this.tileID.canonical.z<d.canonical.z?1:Math.pow(2,this.tileID.canonical.z-d.canonical.z),b=js/Math.pow(2,d.canonical.z-this.tileID.canonical.z),I=d.canonical.x*l.EXTENT,M=d.canonical.y*l.EXTENT;for(let O=0;O<s.length;O++){const $=s.get(O);if($.crossTileID)continue;const{key:k,tileAnchorX:q,tileAnchorY:ie}=$,le=Math.floor((I+q)*b),de=Math.floor((M+ie)*b),ce=this.index.range(le-_,de-_,le+_,de+_);for(const me of ce){const X=this.crossTileIDs[me];if(this.keys[me]===k&&!g.has(X)){g.add(X),$.crossTileID=X;break}}}}}class zh{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Dh{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(s){const d=Math.round((s-this.lng)/360);if(d!==0)for(const g in this.indexes){const _=this.indexes[g],b={};for(const I in _){const M=_[I];M.tileID=M.tileID.unwrapTo(M.tileID.wrap+d),b[M.tileID.key]=M}this.indexes[g]=b}this.lng=s}addBucket(s,d,g){if(this.indexes[s.overscaledZ]&&this.indexes[s.overscaledZ][s.key]){if(this.indexes[s.overscaledZ][s.key].bucketInstanceId===d.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(s.overscaledZ,this.indexes[s.overscaledZ][s.key])}for(let b=0;b<d.symbolInstances.length;b++)d.symbolInstances.get(b).crossTileID=0;this.usedCrossTileIDs[s.overscaledZ]||(this.usedCrossTileIDs[s.overscaledZ]=new Set);const _=this.usedCrossTileIDs[s.overscaledZ];for(const b in this.indexes){const I=this.indexes[b];if(Number(b)>s.overscaledZ)for(const M in I){const O=I[M];O.tileID.isChildOf(s)&&O.findMatches(d.symbolInstances,s,_)}else{const M=I[s.scaledTo(Number(b)).key];M&&M.findMatches(d.symbolInstances,s,_)}}for(let b=0;b<d.symbolInstances.length;b++){const I=d.symbolInstances.get(b);I.crossTileID||(I.crossTileID=g.generate(),_.add(I.crossTileID))}return this.indexes[s.overscaledZ]===void 0&&(this.indexes[s.overscaledZ]={}),this.indexes[s.overscaledZ][s.key]=new zi(s,d.symbolInstances,d.bucketInstanceId),!0}removeBucketCrossTileIDs(s,d){for(const g of d.crossTileIDs)this.usedCrossTileIDs[s].delete(g)}removeStaleBuckets(s){let d=!1;for(const g in this.indexes){const _=this.indexes[g];for(const b in _)s[_[b].bucketInstanceId]||(this.removeBucketCrossTileIDs(g,_[b]),delete _[b],d=!0)}return d}}class Na{constructor(){this.layerIndexes={},this.crossTileIDs=new zh,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(s,d,g,_){let b=this.layerIndexes[s.id];b===void 0&&(b=this.layerIndexes[s.id]=new Dh);let I=!1;const M={};_.name!=="globe"&&b.handleWrapJump(g);for(const O of d){const $=O.getBucket(s);$&&s.id===$.layerIds[0]&&($.bucketInstanceId||($.bucketInstanceId=++this.maxBucketInstanceId),b.addBucket(O.tileID,$,this.crossTileIDs)&&(I=!0),M[$.bucketInstanceId]=!0)}return b.removeStaleBuckets(M)&&(I=!0),I}pruneUnusedLayers(s){const d={};s.forEach(g=>{d[g]=!0});for(const g in this.layerIndexes)d[g]||delete this.layerIndexes[g]}}const bs=(p,s)=>l.emitValidationErrors(p,s&&s.filter(d=>d.identifier!=="source.canvas")),Au=l.pick(En,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),H0=l.pick(En,["setCenter","setZoom","setBearing","setPitch"]),Lh={version:8,layers:[],sources:{}},wl={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class _a extends l.Evented{constructor(s,d={}){super(),this.map=s,this.dispatcher=new Be(Sn(),this),this.imageManager=new he,this.imageManager.setEventedParent(this),this.glyphManager=new l.GlyphManager(s._requestManager,d.localFontFamily?l.LocalGlyphMode.all:d.localIdeographFontFamily?l.LocalGlyphMode.ideographs:l.LocalGlyphMode.none,d.localFontFamily||d.localIdeographFontFamily),this.crossTileSymbolIndex=new Na,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",l.getReferrer());const g=this;this._rtlTextPluginCallback=_a.registerForPluginStateChange(_=>{g.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:_.pluginStatus,pluginURL:_.pluginURL},(b,I)=>{if(l.triggerPluginCompletionEvent(b),I&&I.every(M=>M))for(const M in g._sourceCaches){const O=g._sourceCaches[M],$=O.getSource().type;$!=="vector"&&$!=="geojson"||O.reload()}})}),this.on("data",_=>{if(_.dataType!=="source"||_.sourceDataType!=="metadata")return;const b=this.getSource(_.sourceId);if(b&&b.vectorLayerIds)for(const I in this._layers){const M=this._layers[I];M.source===b.id&&this._validateLayer(M)}})}loadURL(s,d={}){this.fire(new l.Event("dataloading",{dataType:"style"}));const g=typeof d.validate=="boolean"?d.validate:!l.isMapboxURL(s);s=this.map._requestManager.normalizeStyleURL(s,d.accessToken);const _=this.map._requestManager.transformRequest(s,l.ResourceType.Style);this._request=l.getJSON(_,(b,I)=>{this._request=null,b?this.fire(new l.ErrorEvent(b)):I&&this._load(I,g)})}loadJSON(s,d={}){this.fire(new l.Event("dataloading",{dataType:"style"})),this._request=l.exported.frame(()=>{this._request=null,this._load(s,d.validate!==!1)})}loadEmpty(){this.fire(new l.Event("dataloading",{dataType:"style"})),this._load(Lh,!1)}_updateLayerCount(s,d){const g=d?1:-1;s.is3D()&&(this._num3DLayers+=g),s.type==="circle"&&(this._numCircleLayers+=g),s.type==="symbol"&&(this._numSymbolLayers+=g)}_load(s,d){if(d&&bs(this,l.validateStyle(s)))return;this._loaded=!0,this.stylesheet=l.clone$1(s),this._updateMapProjection();for(const _ in s.sources)this.addSource(_,s.sources[_],{validate:!1});this._changed=!1,s.sprite?this._loadSprite(s.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(s.glyphs);const g=ri(this.stylesheet.layers);this._order=g.map(_=>_.id),this._layers={},this._serializedLayers={};for(const _ of g){const b=l.createStyleLayer(_);b.setEventedParent(this,{layer:{id:b.id}}),this._layers[b.id]=b,this._serializedLayers[b.id]=b.serialize(),this._updateLayerCount(b,!0)}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new fe(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new l.Event("data",{dataType:"style"})),this.fire(new l.Event("style.load"))}terrainSetForDrapingOnly(){return!!this.terrain&&this.terrain.drapeRenderMode===0}setProjection(s){s?this.stylesheet.projection=s:delete this.stylesheet.projection,this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}_updateMapProjection(){this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.stylesheet.projection)}_loadSprite(s){this._spriteRequest=function(d,g,_){let b,I,M;const O=l.exported.devicePixelRatio>1?"@2x":"";let $=l.getJSON(g.transformRequest(g.normalizeSpriteURL(d,O,".json"),l.ResourceType.SpriteJSON),(ie,le)=>{$=null,M||(M=ie,b=le,q())}),k=l.getImage(g.transformRequest(g.normalizeSpriteURL(d,O,".png"),l.ResourceType.SpriteImage),(ie,le)=>{k=null,M||(M=ie,I=le,q())});function q(){if(M)_(M);else if(b&&I){const ie=l.exported.getImageData(I),le={};for(const de in b){const{width:ce,height:me,x:X,y:se,sdf:xe,pixelRatio:be,stretchX:Re,stretchY:ze,content:Oe}=b[de],Ve=new l.RGBAImage({width:ce,height:me});l.RGBAImage.copy(ie,Ve,{x:X,y:se},{x:0,y:0},{width:ce,height:me}),le[de]={data:Ve,pixelRatio:be,sdf:xe,stretchX:Re,stretchY:ze,content:Oe}}_(null,le)}}return{cancel(){$&&($.cancel(),$=null),k&&(k.cancel(),k=null)}}}(s,this.map._requestManager,(d,g)=>{if(this._spriteRequest=null,d)this.fire(new l.ErrorEvent(d));else if(g)for(const _ in g)this.imageManager.addImage(_,g[_]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new l.Event("data",{dataType:"style"}))})}_validateLayer(s){const d=this.getSource(s.source);if(!d)return;const g=s.sourceLayer;g&&(d.type==="geojson"||d.vectorLayerIds&&d.vectorLayerIds.indexOf(g)===-1)&&this.fire(new l.ErrorEvent(new Error(`Source layer "${g}" does not exist on source "${d.id}" as specified by style layer "${s.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const s in this._sourceCaches)if(!this._sourceCaches[s].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(s){const d=[];for(const g of s){const _=this._layers[g];_.type!=="custom"&&d.push(_.serialize())}return d}hasTransitions(){if(this.light&&this.light.hasTransition()||this.fog&&this.fog.hasTransition())return!0;for(const s in this._sourceCaches)if(this._sourceCaches[s].hasTransition())return!0;for(const s in this._layers)if(this._layers[s].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(s){return!!this.terrain&&(typeof s.isLayerDraped=="function"?s.isLayerDraped():wl[s.type])}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(s){if(!this._loaded)return;const d=this._changed;if(this._changed){const _=Object.keys(this._updatedLayers),b=Object.keys(this._removedLayers);(_.length||b.length)&&this._updateWorkerLayers(_,b);for(const I in this._updatedSources){const M=this._updatedSources[I];M==="reload"?this._reloadSource(I):M==="clear"&&this._clearSource(I)}this._updateTilesForChangedImages();for(const I in this._updatedPaintProps)this._layers[I].updateTransitions(s);this.light.updateTransitions(s),this.fog&&this.fog.updateTransitions(s),this._resetUpdates()}const g={};for(const _ in this._sourceCaches){const b=this._sourceCaches[_];g[_]=b.used,b.used=!1}for(const _ of this._order){const b=this._layers[_];if(b.recalculate(s,this._availableImages),!b.isHidden(s.zoom)){const M=this._getLayerSourceCache(b);M&&(M.used=!0)}const I=this.map.painter;if(I){const M=b.getProgramIds();if(!M)continue;const O=b.getProgramConfiguration(s.zoom);for(const $ of M)I.useProgram($,O)}}for(const _ in g){const b=this._sourceCaches[_];g[_]!==b.used&&b.getSource().fire(new l.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:b.getSource().id}))}this.light.recalculate(s),this.terrain&&this.terrain.recalculate(s),this.fog&&this.fog.recalculate(s),this.z=s.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),d&&this.fire(new l.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const s=Object.keys(this._changedImages);if(s.length){for(const d in this._sourceCaches)this._sourceCaches[d].reloadTilesForDependencies(["icons","patterns"],s);this._changedImages={}}}_updateWorkerLayers(s,d){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(s),removedIds:d})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(s){if(this._checkLoaded(),bs(this,l.validateStyle(s)))return!1;(s=l.clone$1(s)).layers=ri(s.layers);const d=function(_,b){if(!_)return[{command:En.setStyle,args:[b]}];let I=[];try{if(!w(_.version,b.version))return[{command:En.setStyle,args:[b]}];w(_.center,b.center)||I.push({command:En.setCenter,args:[b.center]}),w(_.zoom,b.zoom)||I.push({command:En.setZoom,args:[b.zoom]}),w(_.bearing,b.bearing)||I.push({command:En.setBearing,args:[b.bearing]}),w(_.pitch,b.pitch)||I.push({command:En.setPitch,args:[b.pitch]}),w(_.sprite,b.sprite)||I.push({command:En.setSprite,args:[b.sprite]}),w(_.glyphs,b.glyphs)||I.push({command:En.setGlyphs,args:[b.glyphs]}),w(_.transition,b.transition)||I.push({command:En.setTransition,args:[b.transition]}),w(_.light,b.light)||I.push({command:En.setLight,args:[b.light]}),w(_.fog,b.fog)||I.push({command:En.setFog,args:[b.fog]}),w(_.projection,b.projection)||I.push({command:En.setProjection,args:[b.projection]});const M={},O=[];(function(q,ie,le,de){let ce;for(ce in ie=ie||{},q=q||{})q.hasOwnProperty(ce)&&(ie.hasOwnProperty(ce)||xo(ce,le,de));for(ce in ie){if(!ie.hasOwnProperty(ce))continue;const me=ie[ce];q.hasOwnProperty(ce)?w(q[ce],me)||(q[ce].type==="geojson"&&me.type==="geojson"&&no(q,ie,ce)?le.push({command:En.setGeoJSONSourceData,args:[ce,me.data]}):Po(ce,ie,le,de)):Ni(ce,ie,le)}})(_.sources,b.sources,O,M);const $=[];_.layers&&_.layers.forEach(q=>{q.source&&M[q.source]?I.push({command:En.removeLayer,args:[q.id]}):$.push(q)});let k=_.terrain;k&&M[k.source]&&(I.push({command:En.setTerrain,args:[void 0]}),k=void 0),I=I.concat(O),w(k,b.terrain)||I.push({command:En.setTerrain,args:[b.terrain]}),function(q,ie,le){ie=ie||[];const de=(q=q||[]).map(ji),ce=ie.map(ji),me=q.reduce(pa,{}),X=ie.reduce(pa,{}),se=de.slice(),xe=Object.create(null);let be,Re,ze,Oe,Ve,Ue,Ke;for(be=0,Re=0;be<de.length;be++)ze=de[be],X.hasOwnProperty(ze)?Re++:(le.push({command:En.removeLayer,args:[ze]}),se.splice(se.indexOf(ze,Re),1));for(be=0,Re=0;be<ce.length;be++)ze=ce[ce.length-1-be],se[se.length-1-be]!==ze&&(me.hasOwnProperty(ze)?(le.push({command:En.removeLayer,args:[ze]}),se.splice(se.lastIndexOf(ze,se.length-Re),1)):Re++,Ue=se[se.length-be],le.push({command:En.addLayer,args:[X[ze],Ue]}),se.splice(se.length-be,0,ze),xe[ze]=!0);for(be=0;be<ce.length;be++)if(ze=ce[be],Oe=me[ze],Ve=X[ze],!xe[ze]&&!w(Oe,Ve))if(w(Oe.source,Ve.source)&&w(Oe["source-layer"],Ve["source-layer"])&&w(Oe.type,Ve.type)){for(Ke in Hr(Oe.layout,Ve.layout,le,ze,null,En.setLayoutProperty),Hr(Oe.paint,Ve.paint,le,ze,null,En.setPaintProperty),w(Oe.filter,Ve.filter)||le.push({command:En.setFilter,args:[ze,Ve.filter]}),w(Oe.minzoom,Ve.minzoom)&&w(Oe.maxzoom,Ve.maxzoom)||le.push({command:En.setLayerZoomRange,args:[ze,Ve.minzoom,Ve.maxzoom]}),Oe)Oe.hasOwnProperty(Ke)&&Ke!=="layout"&&Ke!=="paint"&&Ke!=="filter"&&Ke!=="metadata"&&Ke!=="minzoom"&&Ke!=="maxzoom"&&(Ke.indexOf("paint.")===0?Hr(Oe[Ke],Ve[Ke],le,ze,Ke.slice(6),En.setPaintProperty):w(Oe[Ke],Ve[Ke])||le.push({command:En.setLayerProperty,args:[ze,Ke,Ve[Ke]]}));for(Ke in Ve)Ve.hasOwnProperty(Ke)&&!Oe.hasOwnProperty(Ke)&&Ke!=="layout"&&Ke!=="paint"&&Ke!=="filter"&&Ke!=="metadata"&&Ke!=="minzoom"&&Ke!=="maxzoom"&&(Ke.indexOf("paint.")===0?Hr(Oe[Ke],Ve[Ke],le,ze,Ke.slice(6),En.setPaintProperty):w(Oe[Ke],Ve[Ke])||le.push({command:En.setLayerProperty,args:[ze,Ke,Ve[Ke]]}))}else le.push({command:En.removeLayer,args:[ze]}),Ue=se[se.lastIndexOf(ze)+1],le.push({command:En.addLayer,args:[Ve,Ue]})}($,b.layers,I)}catch(M){console.warn("Unable to compute style diff:",M),I=[{command:En.setStyle,args:[b]}]}return I}(this.serialize(),s).filter(_=>!(_.command in H0));if(d.length===0)return!1;const g=d.filter(_=>!(_.command in Au));if(g.length>0)throw new Error(`Unimplemented: ${g.map(_=>_.command).join(", ")}.`);return d.forEach(_=>{_.command!=="setTransition"&&_.command!=="setProjection"&&this[_.command].apply(this,_.args)}),this.stylesheet=s,this._updateMapProjection(),!0}addImage(s,d){return this.getImage(s)?this.fire(new l.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(s,d),this._afterImageUpdated(s),this)}updateImage(s,d){this.imageManager.updateImage(s,d)}getImage(s){return this.imageManager.getImage(s)}removeImage(s){return this.getImage(s)?(this.imageManager.removeImage(s),this._afterImageUpdated(s),this):this.fire(new l.ErrorEvent(new Error("No image with this name exists.")))}_afterImageUpdated(s){this._availableImages=this.imageManager.listImages(),this._changedImages[s]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addSource(s,d,g={}){if(this._checkLoaded(),this.getSource(s)!==void 0)throw new Error("There is already a source with this ID");if(!d.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(d).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(d.type)>=0&&this._validate(l.validateSource,`sources.${s}`,d,null,g))return;this.map&&this.map._collectResourceTiming&&(d.collectResourceTiming=!0);const _=un(s,d,this.dispatcher,this);_.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(s),source:_.serialize(),sourceId:s}));const b=I=>{const M=(I?"symbol:":"other:")+s,O=this._sourceCaches[M]=new l.SourceCache(M,_,I);(I?this._symbolSourceCaches:this._otherSourceCaches)[s]=O,O.style=this,O.onAdd(this.map)};b(!1),d.type!=="vector"&&d.type!=="geojson"||b(!0),_.onAdd&&_.onAdd(this.map),this._changed=!0}removeSource(s){this._checkLoaded();const d=this.getSource(s);if(!d)throw new Error("There is no source with this ID");for(const _ in this._layers)if(this._layers[_].source===s)return this.fire(new l.ErrorEvent(new Error(`Source "${s}" cannot be removed while layer "${_}" is using it.`)));if(this.terrain&&this.terrain.get().source===s)return this.fire(new l.ErrorEvent(new Error(`Source "${s}" cannot be removed while terrain is using it.`)));const g=this._getSourceCaches(s);for(const _ of g)delete this._sourceCaches[_.id],delete this._updatedSources[_.id],_.fire(new l.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:_.getSource().id})),_.setEventedParent(null),_.clearTiles();return delete this._otherSourceCaches[s],delete this._symbolSourceCaches[s],d.setEventedParent(null),d.onRemove&&d.onRemove(this.map),this._changed=!0,this}setGeoJSONSourceData(s,d){this._checkLoaded(),this.getSource(s).setData(d),this._changed=!0}getSource(s){const d=this._getSourceCache(s);return d&&d.getSource()}_getSources(){const s=[];for(const d in this._otherSourceCaches){const g=this._getSourceCache(d);g&&s.push(g.getSource())}return s}addLayer(s,d,g={}){this._checkLoaded();const _=s.id;if(this.getLayer(_))return void this.fire(new l.ErrorEvent(new Error(`Layer with id "${_}" already exists on this map`)));let b;if(s.type==="custom"){if(bs(this,l.validateCustomStyleLayer(s)))return;b=l.createStyleLayer(s)}else{if(typeof s.source=="object"&&(this.addSource(_,s.source),s=l.clone$1(s),s=l.extend(s,{source:_})),this._validate(l.validateLayer,`layers.${_}`,s,{arrayIndex:-1},g))return;b=l.createStyleLayer(s),this._validateLayer(b),b.setEventedParent(this,{layer:{id:_}}),this._serializedLayers[b.id]=b.serialize(),this._updateLayerCount(b,!0)}const I=d?this._order.indexOf(d):this._order.length;if(d&&I===-1)return void this.fire(new l.ErrorEvent(new Error(`Layer with id "${d}" does not exist on this map.`)));this._order.splice(I,0,_),this._layerOrderChanged=!0,this._layers[_]=b;const M=this._getLayerSourceCache(b);if(this._removedLayers[_]&&b.source&&M&&b.type!=="custom"){const O=this._removedLayers[_];delete this._removedLayers[_],O.type!==b.type?this._updatedSources[b.source]="clear":(this._updatedSources[b.source]="reload",M.pause())}this._updateLayer(b),b.onAdd&&b.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(s,d){if(this._checkLoaded(),this._changed=!0,!this._layers[s])return void this.fire(new l.ErrorEvent(new Error(`The layer '${s}' does not exist in the map's style and cannot be moved.`)));if(s===d)return;const g=this._order.indexOf(s);this._order.splice(g,1);const _=d?this._order.indexOf(d):this._order.length;d&&_===-1?this.fire(new l.ErrorEvent(new Error(`Layer with id "${d}" does not exist on this map.`))):(this._order.splice(_,0,s),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(s){this._checkLoaded();const d=this._layers[s];if(!d)return void this.fire(new l.ErrorEvent(new Error(`The layer '${s}' does not exist in the map's style and cannot be removed.`)));d.setEventedParent(null),this._updateLayerCount(d,!1);const g=this._order.indexOf(s);this._order.splice(g,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[s]=d,delete this._layers[s],delete this._serializedLayers[s],delete this._updatedLayers[s],delete this._updatedPaintProps[s],d.onRemove&&d.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(s){return this._layers[s]}hasLayer(s){return s in this._layers}hasLayerType(s){for(const d in this._layers)if(this._layers[d].type===s)return!0;return!1}setLayerZoomRange(s,d,g){this._checkLoaded();const _=this.getLayer(s);_?_.minzoom===d&&_.maxzoom===g||(d!=null&&(_.minzoom=d),g!=null&&(_.maxzoom=g),this._updateLayer(_)):this.fire(new l.ErrorEvent(new Error(`The layer '${s}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(s,d,g={}){this._checkLoaded();const _=this.getLayer(s);if(_){if(!w(_.filter,d))return d==null?(_.filter=void 0,void this._updateLayer(_)):void(this._validate(l.validateFilter,`layers.${_.id}.filter`,d,{layerType:_.type},g)||(_.filter=l.clone$1(d),this._updateLayer(_)))}else this.fire(new l.ErrorEvent(new Error(`The layer '${s}' does not exist in the map's style and cannot be filtered.`)))}getFilter(s){const d=this.getLayer(s);return d&&l.clone$1(d.filter)}setLayoutProperty(s,d,g,_={}){this._checkLoaded();const b=this.getLayer(s);b?w(b.getLayoutProperty(d),g)||(b.setLayoutProperty(d,g,_),this._updateLayer(b)):this.fire(new l.ErrorEvent(new Error(`The layer '${s}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(s,d){const g=this.getLayer(s);if(g)return g.getLayoutProperty(d);this.fire(new l.ErrorEvent(new Error(`The layer '${s}' does not exist in the map's style.`)))}setPaintProperty(s,d,g,_={}){this._checkLoaded();const b=this.getLayer(s);b?w(b.getPaintProperty(d),g)||(b.setPaintProperty(d,g,_)&&this._updateLayer(b),this._changed=!0,this._updatedPaintProps[s]=!0):this.fire(new l.ErrorEvent(new Error(`The layer '${s}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(s,d){const g=this.getLayer(s);return g&&g.getPaintProperty(d)}setFeatureState(s,d){this._checkLoaded();const g=s.source,_=s.sourceLayer,b=this.getSource(g);if(!b)return void this.fire(new l.ErrorEvent(new Error(`The source '${g}' does not exist in the map's style.`)));const I=b.type;if(I==="geojson"&&_)return void this.fire(new l.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if(I==="vector"&&!_)return void this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));s.id===void 0&&this.fire(new l.ErrorEvent(new Error("The feature id parameter must be provided.")));const M=this._getSourceCaches(g);for(const O of M)O.setFeatureState(_,s.id,d)}removeFeatureState(s,d){this._checkLoaded();const g=s.source,_=this.getSource(g);if(!_)return void this.fire(new l.ErrorEvent(new Error(`The source '${g}' does not exist in the map's style.`)));const b=_.type,I=b==="vector"?s.sourceLayer:void 0;if(b==="vector"&&!I)return void this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(d&&typeof s.id!="string"&&typeof s.id!="number")return void this.fire(new l.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const M=this._getSourceCaches(g);for(const O of M)O.removeFeatureState(I,s.id,d)}getFeatureState(s){this._checkLoaded();const d=s.source,g=s.sourceLayer,_=this.getSource(d);if(_){if(_.type!=="vector"||g)return s.id===void 0&&this.fire(new l.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(d)[0].getFeatureState(g,s.id);this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new l.ErrorEvent(new Error(`The source '${d}' does not exist in the map's style.`)))}getTransition(){return l.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const s={};for(const d in this._sourceCaches){const g=this._sourceCaches[d].getSource();s[g.id]||(s[g.id]=g.serialize())}return l.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.getTerrain()||void 0,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:s,layers:this._serializeLayers(this._order)},d=>d!==void 0)}_updateLayer(s){this._updatedLayers[s.id]=!0;const d=this._getLayerSourceCache(s);s.source&&!this._updatedSources[s.source]&&d&&d.getSource().type!=="raster"&&(this._updatedSources[s.source]="reload",d.pause()),this._changed=!0,s.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(s){const d=I=>this._layers[I].type==="fill-extrusion",g={},_=[];for(let I=this._order.length-1;I>=0;I--){const M=this._order[I];if(d(M)){g[M]=I;for(const O of s){const $=O[M];if($)for(const k of $)_.push(k)}}}_.sort((I,M)=>M.intersectionZ-I.intersectionZ);const b=[];for(let I=this._order.length-1;I>=0;I--){const M=this._order[I];if(d(M))for(let O=_.length-1;O>=0;O--){const $=_[O].feature;if(g[$.layer.id]<I)break;b.push($),_.pop()}else for(const O of s){const $=O[M];if($)for(const k of $)b.push(k.feature)}}return b}queryRenderedFeatures(s,d,g){d&&d.filter&&this._validate(l.validateFilter,"queryRenderedFeatures.filter",d.filter,null,d);const _={};if(d&&d.layers){if(!Array.isArray(d.layers))return this.fire(new l.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const O of d.layers){const $=this._layers[O];if(!$)return this.fire(new l.ErrorEvent(new Error(`The layer '${O}' does not exist in the map's style and cannot be queried for features.`))),[];_[$.source]=!0}}const b=[];d.availableImages=this._availableImages;const I=d&&d.layers?d.layers.some(O=>{const $=this.getLayer(O);return $&&$.is3D()}):this.has3DLayers(),M=nt.createFromScreenPoints(s,g);for(const O in this._sourceCaches){const $=this._sourceCaches[O].getSource().id;d.layers&&!_[$]||b.push(Gn(this._sourceCaches[O],this._layers,this._serializedLayers,M,d,g,I,!!this.map._showQueryGeometry))}return this.placement&&b.push(function(O,$,k,q,ie,le,de){const ce={},me=le.queryRenderedSymbols(q),X=[];for(const se of Object.keys(me).map(Number))X.push(de[se]);X.sort(er);for(const se of X){const xe=se.featureIndex.lookupSymbolFeatures(me[se.bucketInstanceId],$,se.bucketIndex,se.sourceLayerIndex,ie.filter,ie.layers,ie.availableImages,O);for(const be in xe){const Re=ce[be]=ce[be]||[],ze=xe[be];ze.sort((Oe,Ve)=>{const Ue=se.featureSortOrder;if(Ue){const Ke=Ue.indexOf(Oe.featureIndex);return Ue.indexOf(Ve.featureIndex)-Ke}return Ve.featureIndex-Oe.featureIndex});for(const Oe of ze)Re.push(Oe)}}for(const se in ce)ce[se].forEach(xe=>{const be=xe.feature,Re=k(O[se]);if(!Re)return;const ze=Re.getFeatureState(be.layer["source-layer"],be.id);be.source=be.layer.source,be.layer["source-layer"]&&(be.sourceLayer=be.layer["source-layer"]),be.state=ze});return ce}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),M.screenGeometry,d,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(b)}querySourceFeatures(s,d){d&&d.filter&&this._validate(l.validateFilter,"querySourceFeatures.filter",d.filter,null,d);const g=this._getSourceCaches(s);let _=[];for(const b of g)_=_.concat(On(b,d));return _}addSourceType(s,d,g){return _a.getSourceType(s)?g(new Error(`A source type called "${s}" already exists.`)):(_a.setSourceType(s,d),d.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:s,url:d.workerSourceURL},g):g(null,null))}getLight(){return this.light.getLight()}setLight(s,d={}){this._checkLoaded();const g=this.light.getLight();let _=!1;for(const I in s)if(!w(s[I],g[I])){_=!0;break}if(!_)return;const b=this._setTransitionParameters({duration:300,delay:0});this.light.setLight(s,d),this.light.updateTransitions(b)}getTerrain(){return this.terrain&&this.terrain.drapeRenderMode===1?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(s,d=1){if(this._checkLoaded(),!s)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);let g=s;if(d===1){if(typeof g.source=="object"){const _="terrain-dem-src";this.addSource(_,g.source),g=l.clone$1(g),g=l.extend(g,{source:_})}if(this._validate(l.validateTerrain,"terrain",g))return}if(!this.terrain||this.terrain&&d!==this.terrain.drapeRenderMode){if(!g)return;this._createTerrain(g,d)}else{const _=this.terrain,b=_.get();for(const I of Object.keys(l.spec.terrain))!g.hasOwnProperty(I)&&l.spec.terrain[I].default&&(g[I]=l.spec.terrain[I].default);for(const I in g)if(!w(g[I],b[I])){_.set(g),this.stylesheet.terrain=g;const M=this._setTransitionParameters({duration:0});_.updateTransitions(M);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(s){const d=this.fog=new He(s,this.map.transform);this.stylesheet.fog=s;const g=this._setTransitionParameters({duration:0});d.updateTransitions(g)}_updateMarkersOpacity(){this.map._markers.length!==0&&this.map._requestDomTask(()=>{for(const s of this.map._markers)s._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(s){if(this._checkLoaded(),!s)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const d=this.fog,g=d.get();Object.keys(s).length===0&&d.set(s);for(const _ in s)if(!w(s[_],g[_])){d.set(s),this.stylesheet.fog=s;const b=this._setTransitionParameters({duration:0});d.updateTransitions(b);break}}else this._createFog(s);this._markersNeedUpdate=!0}_setTransitionParameters(s){return{now:l.exported.now(),transition:l.extend(s,this.stylesheet.transition)}}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const s=this._order.filter(g=>this.isLayerDraped(this._layers[g])),d=this._order.filter(g=>!this.isLayerDraped(this._layers[g]));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...s),this._drapedFirstOrder.push(...d)}_createTerrain(s,d){const g=this.terrain=new Fe(s,d);this.stylesheet.terrain=s,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();const _=this._setTransitionParameters({duration:0});g.updateTransitions(_)}_force3DLayerUpdate(){for(const s in this._layers){const d=this._layers[s];d.type==="fill-extrusion"&&this._updateLayer(d)}}_forceSymbolLayerUpdate(){for(const s in this._layers){const d=this._layers[s];d.type==="symbol"&&this._updateLayer(d)}}_validate(s,d,g,_,b={}){return(!b||b.validate!==!1)&&bs(this,s.call(l.validateStyle,l.extend({key:d,style:this.serialize(),value:g,styleSpec:l.spec},_)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),l.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const s in this._layers)this._layers[s].setEventedParent(null);for(const s in this._sourceCaches)this._sourceCaches[s].clearTiles(),this._sourceCaches[s].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(s){const d=this._getSourceCaches(s);for(const g of d)g.clearTiles()}_reloadSource(s){const d=this._getSourceCaches(s);for(const g of d)g.resume(),g.reload()}_reloadSources(){for(const s of this._getSources())s.reload&&s.reload()}_updateSources(s){for(const d in this._sourceCaches)this._sourceCaches[d].update(s)}_generateCollisionBoxes(){for(const s in this._sourceCaches){const d=this._sourceCaches[s];d.resume(),d.reload()}}_updatePlacement(s,d,g,_,b=!1){let I=!1,M=!1;const O={};for(const $ of this._order){const k=this._layers[$];if(k.type!=="symbol")continue;if(!O[k.source]){const ie=this._getLayerSourceCache(k);if(!ie)continue;O[k.source]=ie.getRenderableIds(!0).map(le=>ie.getTileByID(le)).sort((le,de)=>de.tileID.overscaledZ-le.tileID.overscaledZ||(le.tileID.isLessThan(de.tileID)?-1:1))}const q=this.crossTileSymbolIndex.addLayer(k,O[k.source],s.center.lng,s.projection);I=I||q}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),b=b||this._layerOrderChanged||g===0,this._layerOrderChanged&&this.fire(new l.Event("neworder")),(b||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(l.exported.now(),s.zoom))&&(this.pauseablePlacement=new xs(s,this._order,b,d,g,_,this.placement,this.fog&&s.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,O),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(l.exported.now()),M=!0),I&&this.pauseablePlacement.placement.setStale()),M||I)for(const $ of this._order){const k=this._layers[$];k.type==="symbol"&&this.placement.updateLayerOpacities(k,O[k.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(l.exported.now())}_releaseSymbolFadeTiles(){for(const s in this._sourceCaches)this._sourceCaches[s].releaseSymbolFadeTiles()}getImages(s,d,g){this.imageManager.getImages(d.icons,g),this._updateTilesForChangedImages();const _=b=>{b&&b.setDependencies(d.tileID.key,d.type,d.icons)};_(this._otherSourceCaches[d.source]),_(this._symbolSourceCaches[d.source])}getGlyphs(s,d,g){this.glyphManager.getGlyphs(d.stacks,g)}getResource(s,d,g){return l.makeRequest(d,g)}_getSourceCache(s){return this._otherSourceCaches[s]}_getLayerSourceCache(s){return s.type==="symbol"?this._symbolSourceCaches[s.source]:this._otherSourceCaches[s.source]}_getSourceCaches(s){const d=[];return this._otherSourceCaches[s]&&d.push(this._otherSourceCaches[s]),this._symbolSourceCaches[s]&&d.push(this._symbolSourceCaches[s]),d}_isSourceCacheLoaded(s){const d=this._getSourceCaches(s);return d.length===0?(this.fire(new l.ErrorEvent(new Error(`There is no source with ID '${s}'`))),!1):d.every(g=>g.loaded())}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}_a.getSourceType=function(p){return Zt[p]},_a.setSourceType=function(p,s){Zt[p]=s},_a.registerForPluginStateChange=l.registerForPluginStateChange;var kh=`
#define EPSILON 0.0000001
#define PI 3.141592653589793
#define EXTENT 8192.0
#define HALF_PI PI/2.0
#define QUARTER_PI PI/4.0
#define RAD_TO_DEG 180.0/PI
#define DEG_TO_RAD PI/180.0
#define GLOBE_RADIUS EXTENT/PI/2.0`,Us="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",ja=`
#define ELEVATION_SCALE 7.0
#define ELEVATION_OFFSET 450.0
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(
mix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}
#else
vec3 elevationVector(vec2 pos) { return vec3(0,0,1); }
#endif
const float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)
{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}
#ifdef TERRAIN
#ifdef TERRAIN_DEM_FLOAT_FORMAT
uniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;
#else
uniform sampler2D u_dem;uniform sampler2D u_dem_prev;
#endif
uniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));
#ifdef TERRAIN_DEM_NEAREST_FILTER
return u_exaggeration*tl;
#endif
float tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}float prevElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}
#ifdef TERRAIN_VERTEX_MORPHING
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}
#else
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
return currentElevation(apos);}
#endif
highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(
unpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))
);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
float tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;
#else
vec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);
#endif
return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}
#else
float elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }
#endif`,Ec=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}
#endif`,Ua=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump float u_fog_temporal_offset;varying vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}
#endif`;let Ru={},Sl={};const Cc=[];El(kh,Cc),El(ja,Cc),El(Ec,Cc),El(Ua,Cc),Ru=ar("",ja),Sl=ar(Ua,Ec);const Om=ar(`
#if __VERSION__ >=300
#define varying in
#define gl_FragColor glFragColor
#define texture2D texture
#define textureCube texture
out vec4 glFragColor;
#endif
highp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}`,`
#if __VERSION__ >=300
#define attribute in
#define varying out
#define texture2D texture
#endif
float wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {
#ifndef PROJECTED_POS_ON_VIEWPORT
float tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;
#else
return vec3(0.0);
#endif
}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(
unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered.`),Ou=kh,$h=`
#ifdef GL_ES
precision mediump float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`;var Fh={background:ar(`uniform vec4 u_color;uniform float u_opacity;
#ifdef LIGHTING_3D_MODE
varying vec4 v_color;
#endif
void main() {vec4 out_color;
#ifdef LIGHTING_3D_MODE
out_color=v_color;
#else
out_color=u_color;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#ifdef LIGHTING_3D_MODE
uniform vec4 u_color;varying vec4 v_color;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting(u_color);
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),backgroundPattern:ar(`uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos;void main() {vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),circle:ar(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(
antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)
);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_apply_premultiplied(out_color,v_fog_pos);
#endif
gl_FragColor=out_color*(v_visibility*opacity_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`#define NUM_VISIBILITY_RINGS 2
#define INV_SQRT2 0.70710678
#define ELEVATION_BIAS 0.0001
#define NUM_SAMPLES_PER_RING 16
uniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
vec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {
#if defined(TERRAIN)
return elevation(pos)+ELEVATION_BIAS;
#else
return 0.0;
#endif
}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);
#ifdef PITCH_WITH_MAP
#ifdef PROJECTION_GLOBE_VIEW
return u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );
#else
return u_matrix*( world_center+vec4(sample_offset,0,0) );
#endif
#else
return projected_center+vec4(sample_offset,0,0);
#endif
}float get_sample_step() {
#ifdef PITCH_WITH_MAP
return 2.0*PI/float(NUM_SAMPLES_PER_RING);
#else
return PI/float(NUM_SAMPLES_PER_RING);
#endif
}void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);
#else 
surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);
#endif
vec4 projected_center=u_matrix*world_center;float view_scale=0.0;
#ifdef PITCH_WITH_MAP
#ifdef SCALE_WITH_MAP
view_scale=1.0;
#else
view_scale=projected_center.w/u_camera_to_center_distance;
#endif
#else
#ifdef SCALE_WITH_MAP
view_scale=u_camera_to_center_distance;
#else
view_scale=projected_center.w;
#endif
#endif
gl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;
#ifdef TERRAIN
float step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;
#ifdef PITCH_WITH_MAP
float cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;
#else
occlusion_world_center=world_center;occlusion_projected_center=projected_center;
#endif
for(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);
#else
visibility=1.0;
#endif
#ifdef PROJECTION_GLOBE_VIEW
visibility=1.0;
#endif
v_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);
#ifdef FOG
v_fog_pos=fog_position(world_center.xyz);
#endif
}`),clippingMask:ar("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:ar(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef FOG
if (u_is_globe==0) {gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#else
pos=vec3(tilePos+extrude,elevation(tilePos));
#endif
gl_Position=u_matrix*vec4(pos,1);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),heatmapTexture:ar(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:ar("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}",`attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}`),collisionCircle:ar("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}",`attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(
mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}`),debug:ar("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}",`attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;
#endif
varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
gl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);
#else
gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);
#endif
}`),fill:ar(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
vec4 out_color=color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutline:ar(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutlinePattern:ar(`uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;varying vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;varying vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillPattern:ar(`uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillExtrusion:ar(`varying vec4 v_color;
#ifdef RENDER_SHADOWS
varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef ZERO_ROOF_RADIUS
varying vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
varying highp vec3 v_normal;
#endif
void main() {
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
vec3 normal=v_normal;
#endif
float z;vec4 color;
#ifdef ZERO_ROOF_RADIUS
z=float(normal.z > 0.00001);color=mix(v_color,v_roof_color,z);
#else
color=v_color;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;
#ifdef ZERO_ROOF_RADIUS
concave*=(1.0-z);
#endif
float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);color.rgb=color.rgb*shade;
#endif
#ifdef RENDER_SHADOWS
#ifdef ZERO_ROOF_RADIUS
normal=mix(normal,vec3(0.0,0.0,1.0),z);
#endif
color.xyz=shadowed_color_normal(color.xyz,normalize(normal),v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec4 v_color;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;
#endif
#ifdef ZERO_ROOF_RADIUS
varying vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
varying highp vec3 v_normal;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
v_normal=normal;
#endif
base=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=0.0;float c_ele;vec3 pos;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);
#else
h=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);
#ifdef RENDER_SHADOWS
v_pos_light_view_0=u_light_matrix_0*vec4(pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1);v_depth=gl_Position.w;
#endif
float NdotL=0.0;float colorvalue=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}v_color=vec4(0.0,0.0,0.0,1.0);
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting(color,NdotL);
#else
v_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));
#endif
v_color*=u_opacity;
#ifdef ZERO_ROOF_RADIUS
v_roof_color=vec4(0.0,0.0,0.0,1.0);
#ifdef LIGHTING_3D_MODE
v_roof_color=apply_lighting(color,calculate_NdotL(vec3(0.0,0.0,1.0)));
#else
float roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));
#endif
v_roof_color*=u_opacity;
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),fillExtrusionPattern:ar(`uniform vec2 u_texsize;uniform sampler2D u_image;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
varying float v_NdotL;
#endif
varying vec2 v_pos;varying vec4 v_lighting;uniform lowp float u_opacity;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color,v_NdotL)*u_opacity;
#else
out_color=out_color*v_lighting;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec2 v_pos;varying vec4 v_lighting;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
varying float v_NdotL;
#endif
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=z;vec3 p;float c_ele;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);
#else
p=vec3(pos_nx.xy,z);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0
? pos_nx.xy
: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_NdotL=NdotL;
#else
v_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;
#endif 
#ifdef FOG
v_fog_pos=fog_position(p);
#endif
}`),hillshadePrepare:ar(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
return texture2D(u_image,coord).a/4.0;
#else
vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;
#endif
}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(
(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)
)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(
deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:ar(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef LIGHTING_3D_MODE
gl_FragColor=apply_lighting(gl_FragColor);
#endif
#ifdef FOG
gl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),line:ar(`uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform sampler2D u_dash_image;varying vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform sampler2D u_gradient_image;
#endif
uniform float u_border_width;uniform vec4 u_border_color;float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
float linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);
#ifdef RENDER_LINE_DASH
float sdfdist=texture2D(u_dash_image,v_tex).a;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;alpha*=linearstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);
#endif
highp vec4 out_color;
#ifdef RENDER_LINE_GRADIENT
out_color=texture2D(u_gradient_image,v_uv.xy);
#else
out_color=color;
#endif
float trimmed=1.0;
#ifdef RENDER_LINE_TRIM_OFFSET
highp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);trimmed=0.0;}}
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
#ifdef RENDER_LINE_ALPHA_DISCARD
if (alpha < u_alpha_discard_threshold) {discard;}
#endif
#ifdef RENDER_LINE_BORDER
float edgeBlur=(u_border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);
#ifdef RENDER_LINE_BORDER_AUTO
float Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}
#else
out_color.rgb=mix(u_border_color.rgb*u_border_color.a*trimmed,out_color.rgb,smoothAlpha);
#endif
}
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define EXTRUDE_SCALE 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
attribute highp vec4 a_packed;
#endif
#ifdef RENDER_LINE_DASH
attribute float a_linesofar;
#endif
uniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;varying vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform float u_image_height;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
float a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];
#ifdef RENDER_LINE_GRADIENT
highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);
#else
v_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);
#endif
#endif
#ifdef RENDER_LINE_DASH
float scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/floorwidth,(-normal.y*height+dash.x+0.5)/u_texsize.y);
#endif
v_width2=vec2(outset,inset);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),linePattern:ar(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;vec2 pattern_size=vec2(display_size.x/u_tile_units_to_pixels,display_size.y);float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x=mod(v_linesofar/pattern_size.x*aspect,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));vec4 color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
color=apply_lighting(color);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),raster:ar(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(
dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply(out_color,v_fog_pos));
#endif
gl_FragColor=vec4(out_color*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),symbolIcon:ar(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}`),symbolSDF:ar(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}`),symbolTextAndIcon:ar(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}`),terrainRaster:ar(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
void main() {vec4 color=texture2D(u_image0,v_pos0);
#ifdef RENDER_SHADOWS
color.xyz=shadowed_color(color.xyz,v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
#ifdef ZERO_EXAGGERATION
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#else
color=fog_dither(fog_apply_from_vert(color,v_fog_opacity));
#endif
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
const float wireframeOffset=0.00015;void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;
#ifdef TERRAIN_WIREFRAME
elevation+=wireframeOffset;
#endif
v_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);
#ifdef FOG
#ifdef ZERO_EXAGGERATION
v_fog_pos=fog_position(decodedPos);
#else
v_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));
#endif
#endif
#ifdef RENDER_SHADOWS
vec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);v_depth=gl_Position.w;
#endif
}`),terrainDepth:ar(`#ifdef GL_ES
precision highp float;
#endif
varying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}`,"uniform mat4 u_matrix;attribute vec2 a_pos;varying float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:ar(`
varying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(
cos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;
#ifdef FOG
sky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);
#endif
sky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Us),skyboxGradient:ar(`varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));
#ifdef FOG
color.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;
#endif
color*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Us),skyboxCapture:ar(`
varying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;
#ifdef GL_ES
precision highp float;
#endif
#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)
#define BETA_M                  vec3(21e-6,21e-6,21e-6)
#define MIE_G                   0.76
#define DENSITY_HEIGHT_SCALE_R  8000.0
#define DENSITY_HEIGHT_SCALE_M  1200.0
#define PLANET_RADIUS           6360e3
#define ATMOSPHERE_RADIUS       6420e3
#define SAMPLE_STEPS            10
#define DENSITY_STEPS           4
float ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}`,"attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:ar(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifndef FOG
uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;
#endif
void main() {vec4 color;
#ifdef CUSTOM_ANTIALIASING
vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture2D(u_image0,v_pos0);color=vec4(raster.rgb*antialias,raster.a*antialias);
#else
color=texture2D(u_image0,v_pos0);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;
#ifdef GLOBE_POLES
attribute vec3 a_globe_pos;attribute vec2 a_uv;
#else
attribute vec2 a_pos;
#endif
varying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;vec2 uv=a_uv;
#else
float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);
#endif
v_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;
#ifdef GLOBE_POLES
vec3 up_vector=globe_derived_up_vector;
#else
vec3 up_vector=elevationVector(tile_pos);
#endif
float height=elevation(tile_pos);
#ifdef TERRAIN_WIREFRAME
height+=wireframeOffset;
#endif
globe_pos+=up_vector*height;
#ifndef GLOBE_POLES
globe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;
#endif
#ifdef GLOBE_POLES
vec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);
#else
vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);
#endif
gl_Position=u_proj_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
}`),globeAtmosphere:ar(`uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec3 u_start_color;uniform vec4 u_color;uniform vec4 u_space_color;uniform vec4 u_high_color;uniform float u_star_intensity;uniform float u_star_size;uniform float u_star_density;uniform float u_horizon_angle;uniform mat4 u_rotation_matrix;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;highp float random(highp vec3 p) {p=fract(p*vec3(23.2342,97.1231,91.2342));p+=dot(p.zxy,p.yxz+123.1234);return fract(p.x*p.y);}float stars(vec3 p,float scale,vec2 offset) {vec2 uv_scale=(u_viewport/u_star_size)*scale;vec3 position=vec3(p.xy*uv_scale+offset*u_viewport,p.z);vec3 q=fract(position)-0.5;vec3 id=floor(position);float random_visibility=step(random(id),u_star_density);float circle=smoothstep(0.5+u_star_intensity,0.5,length(q));return circle*random_visibility;}void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;
#ifdef PROJECTION_GLOBE_VIEW
globe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {discard;return;}
#endif
highp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?
0.0 : max(acos(dot(dir,horizon_dir)),0.0);float horizon_angle;
#ifdef PROJECTION_GLOBE_VIEW
highp vec3 closest_point=globe_pos_dot_dir*dir;float closest_point_to_center=length(closest_point-u_globe_pos);float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?
PI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);
#else
horizon_angle=horizon_angle_mercator;
#endif
horizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c =mix(color_stop_2,c2,t);float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);vec2 uv=gl_FragCoord.xy/u_viewport-0.5;float aspect_ratio=u_viewport.x/u_viewport.y;vec4 uv_dir=vec4(normalize(vec3(uv.x*aspect_ratio,uv.y,1.0)),1.0);uv_dir=u_rotation_matrix*uv_dir;vec3 n=abs(uv_dir.xyz);vec2 uv_remap=(n.x > n.y && n.x > n.z) ? uv_dir.yz/uv_dir.x:
(n.y > n.x && n.y > n.z) ? uv_dir.zx/uv_dir.y:
uv_dir.xy/uv_dir.z;uv_remap.x/=aspect_ratio;vec3 D=vec3(uv_remap,1.0);highp float star_field=0.0;if (u_star_intensity > 0.0) {star_field+=stars(D,1.2,vec2(0.0,0.0));star_field+=stars(D,1.0,vec2(1.0,0.0));star_field+=stars(D,0.8,vec2(0.0,1.0));star_field+=stars(D,0.6,vec2(1.0,1.0));star_field*=(1.0-pow(t,0.25+(1.0-u_high_color.a)*0.75));c+=star_field*alpha_2;}c=dither(c,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=vec4(c,a);}`,`attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(
mix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}`)};function El(p,s){const d=p.replace(/\s*\/\/[^\n]*\n/g,`
`).split(`
`);for(let g of d)if(g=g.trim(),g[0]==="#"&&g.includes("if")&&!g.includes("endif")){g=g.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const _=g.split(" ");for(const b of _)s.includes(b)||s.push(b)}}function ar(p,s){const d=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,g=s.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),_={},b=[...Cc];return El(p,b),El(s,b),{fragmentSource:p=p.replace(d,(I,M,O,$,k)=>(_[k]=!0,M==="define"?`
#ifndef HAS_UNIFORM_u_${k}
varying ${O} ${$} ${k};
#else
uniform ${O} ${$} u_${k};
#endif
`:`
#ifdef HAS_UNIFORM_u_${k}
    ${O} ${$} ${k} = u_${k};
#endif
`)),vertexSource:s=s.replace(d,(I,M,O,$,k)=>{const q=$==="float"?"vec2":"vec4",ie=k.match(/color/)?"color":q;return _[k]?M==="define"?`
#ifndef HAS_UNIFORM_u_${k}
uniform lowp float u_${k}_t;
attribute ${O} ${q} a_${k};
varying ${O} ${$} ${k};
#else
uniform ${O} ${$} u_${k};
#endif
`:ie==="vec4"?`
#ifndef HAS_UNIFORM_u_${k}
    ${k} = a_${k};
#else
    ${O} ${$} ${k} = u_${k};
#endif
`:`
#ifndef HAS_UNIFORM_u_${k}
    ${k} = unpack_mix_${ie}(a_${k}, u_${k}_t);
#else
    ${O} ${$} ${k} = u_${k};
#endif
`:M==="define"?`
#ifndef HAS_UNIFORM_u_${k}
uniform lowp float u_${k}_t;
attribute ${O} ${q} a_${k};
#else
uniform ${O} ${$} u_${k};
#endif
`:ie==="vec4"?`
#ifndef HAS_UNIFORM_u_${k}
    ${O} ${$} ${k} = a_${k};
#else
    ${O} ${$} ${k} = u_${k};
#endif
`:`
#ifndef HAS_UNIFORM_u_${k}
    ${O} ${$} ${k} = unpack_mix_${ie}(a_${k}, u_${k}_t);
#else
    ${O} ${$} ${k} = u_${k};
#endif
`}),staticAttributes:g,usedDefines:b}}class G0{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(s,d,g,_,b,I,M){this.context=s;let O=this.boundPaintVertexBuffers.length!==_.length;for(let k=0;!O&&k<_.length;k++)this.boundPaintVertexBuffers[k]!==_[k]&&(O=!0);let $=this.boundDynamicVertexBuffers.length!==M.length;for(let k=0;!$&&k<M.length;k++)this.boundDynamicVertexBuffers[k]!==M[k]&&($=!0);if(!s.extVertexArrayObject||!this.vao||this.boundProgram!==d||this.boundLayoutVertexBuffer!==g||O||$||this.boundIndexBuffer!==b||this.boundVertexOffset!==I)this.freshBind(d,g,_,b,I,M);else{s.bindVertexArrayOES.set(this.vao);for(const k of M)k&&k.bind();b&&b.dynamicDraw&&b.bind()}}freshBind(s,d,g,_,b,I){let M;const O=s.numAttributes,$=this.context,k=$.gl;if($.extVertexArrayObject)this.vao&&this.destroy(),this.vao=$.extVertexArrayObject.createVertexArrayOES(),$.bindVertexArrayOES.set(this.vao),M=0,this.boundProgram=s,this.boundLayoutVertexBuffer=d,this.boundPaintVertexBuffers=g,this.boundIndexBuffer=_,this.boundVertexOffset=b,this.boundDynamicVertexBuffers=I;else{M=$.currentNumAttributes||0;for(let q=O;q<M;q++)k.disableVertexAttribArray(q)}d.enableAttributes(k,s),d.bind(),d.setVertexAttribPointers(k,s,b);for(const q of g)q.enableAttributes(k,s),q.bind(),q.setVertexAttribPointers(k,s,b);for(const q of I)q&&(q.enableAttributes(k,s),q.bind(),q.setVertexAttribPointers(k,s,b));_&&_.bind(),$.currentNumAttributes=O}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function Bh(p,s){const d=Math.pow(2,s.canonical.z),g=s.canonical.y;return[new l.MercatorCoordinate(0,g/d).toLngLat().lat,new l.MercatorCoordinate(0,(g+1)/d).toLngLat().lat]}function zm(p,s,d,g,_,b,I){const M=p.context,O=M.gl,$=d.fbo;if(!$)return;p.prepareDrawTile();const k=p.useProgram("hillshade");M.activeTexture.set(O.TEXTURE0),O.bindTexture(O.TEXTURE_2D,$.colorAttachment.get());const q=((ce,me,X,se)=>{const xe=X.paint.get("hillshade-shadow-color"),be=X.paint.get("hillshade-highlight-color"),Re=X.paint.get("hillshade-accent-color");let ze=X.paint.get("hillshade-illumination-direction")*(Math.PI/180);X.paint.get("hillshade-illumination-anchor")==="viewport"&&(ze-=ce.transform.angle);const Oe=!ce.options.moving;return{u_matrix:se||ce.transform.calculateProjMatrix(me.tileID.toUnwrapped(),Oe),u_image:0,u_latrange:Bh(0,me.tileID),u_light:[X.paint.get("hillshade-exaggeration"),ze],u_shadow:xe,u_highlight:be,u_accent:Re}})(p,d,g,p.terrain?s.projMatrix:null);p.prepareDrawProgram(M,k,s.toUnwrapped());const{tileBoundsBuffer:ie,tileBoundsIndexBuffer:le,tileBoundsSegments:de}=p.getTileBoundsBuffers(d);k.draw(M,O.TRIANGLES,_,b,I,l.CullFaceMode.disabled,q,g.id,ie,le,de)}function Nh(p,s,d){if(!s.needsDEMTextureUpload)return;const g=p.context,_=g.gl;g.pixelStoreUnpackPremultiplyAlpha.set(!1),s.demTexture=s.demTexture||p.getTileTexture(d.stride);const b=d.getPixels();s.demTexture?s.demTexture.update(b,{premultiply:!1}):s.demTexture=new l.Texture(g,b,_.RGBA,{premultiply:!1}),s.needsDEMTextureUpload=!1}function Dm(p,s,d,g,_,b){const I=p.context,M=I.gl;if(!s.dem)return;const O=s.dem;if(I.activeTexture.set(M.TEXTURE1),Nh(p,s,O),!s.demTexture)return;s.demTexture.bind(M.NEAREST,M.CLAMP_TO_EDGE);const $=O.dim;I.activeTexture.set(M.TEXTURE0);let k=s.fbo;if(!k){const de=new l.Texture(I,{width:$,height:$,data:null},M.RGBA);de.bind(M.LINEAR,M.CLAMP_TO_EDGE),k=s.fbo=I.createFramebuffer($,$,!0),k.colorAttachment.set(de.texture)}I.bindFramebuffer.set(k.framebuffer),I.viewport.set([0,0,$,$]);const{tileBoundsBuffer:q,tileBoundsIndexBuffer:ie,tileBoundsSegments:le}=p.getMercatorTileBoundsBuffers();p.useProgram("hillshadePrepare").draw(I,M.TRIANGLES,g,_,b,l.CullFaceMode.disabled,((de,ce)=>{const me=ce.stride,X=l.create();return l.ortho(X,0,l.EXTENT,-l.EXTENT,0,0,1),l.translate(X,X,[0,-l.EXTENT,0]),{u_matrix:X,u_image:1,u_dimension:[me,me],u_zoom:de.overscaledZ,u_unpack:ce.unpackVector}})(s.tileID,O),d.id,q,ie,le),s.needsHillshadePrepare=!1}const jh=p=>({u_matrix:new l.UniformMatrix4f(p),u_image0:new l.Uniform1i(p),u_skirt_height:new l.Uniform1f(p)}),Cl=(p,s)=>({u_matrix:p,u_image0:0,u_skirt_height:s}),zu=(p,s,d,g,_,b,I,M,O,$,k,q,ie,le,de)=>({u_proj_matrix:Float32Array.from(p),u_globe_matrix:s,u_normalize_matrix:Float32Array.from(g),u_merc_matrix:d,u_zoom_transition:_,u_merc_center:b,u_image0:0,u_frustum_tl:I,u_frustum_tr:M,u_frustum_br:O,u_frustum_bl:$,u_globe_pos:k,u_globe_radius:q,u_viewport:ie,u_grid_matrix:de?Float32Array.from(de):new Float32Array(9),u_skirt_height:le});function Tl(p,s){return p!=null&&s!=null&&!(!p.hasData()||!s.hasData())&&p.demTexture!=null&&s.demTexture!=null&&p.tileID.key!==s.tileID.key}const Va=new class{constructor(){this.operations={}}newMorphing(p,s,d,g,_){if(p in this.operations){const b=this.operations[p];b.to.tileID.key!==d.tileID.key&&(b.queued=d)}else this.operations[p]={startTime:g,phase:0,duration:_,from:s,to:d,queued:null}}getMorphValuesForProxy(p){if(!(p in this.operations))return null;const s=this.operations[p];return{from:s.from,to:s.to,phase:s.phase}}update(p){for(const s in this.operations){const d=this.operations[s];for(d.phase=(p-d.startTime)/d.duration;d.phase>=1||!this._validOp(d);)if(!this._nextOp(d,p)){delete this.operations[s];break}}}_nextOp(p,s){return!!p.queued&&(p.from=p.to,p.to=p.queued,p.queued=null,p.phase=0,p.startTime=s,!0)}_validOp(p){return p.from.hasData()&&p.to.hasData()}},Vs={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function Du(p){return 6*Math.pow(1.5,22-p)}function Lm(p,s){const d=1<<p.z;return!s&&(p.x===0||p.x===d-1)||p.y===0||p.y===d-1}const Tc=p=>({u_matrix:p});function Uh(p,s,d,g,_){if(_>0){const b=l.exported.now(),I=(b-p.timeAdded)/_,M=s?(b-s.timeAdded)/_:-1,O=d.getSource(),$=g.coveringZoomLevel({tileSize:O.tileSize,roundZoom:O.roundZoom}),k=!s||Math.abs(s.tileID.overscaledZ-$)>Math.abs(p.tileID.overscaledZ-$),q=k&&p.refreshedUponExpiration?1:l.clamp(k?I:1-M,0,1);return p.refreshedUponExpiration&&I>=1&&(p.refreshedUponExpiration=!1),s?{opacity:1,mix:1-q}:{opacity:q,mix:0}}return{opacity:1,mix:0}}class Vh extends l.SourceCache{constructor(s){const d={type:"raster-dem",maxzoom:s.transform.maxZoom},g=new Be(Sn(),null),_=un("mock-dem",d,g,s.style);super("mock-dem",_,!1),_.setEventedParent(this),this._sourceLoaded=!0}_loadTile(s,d){s.state="loaded",d(null)}}class Lu extends l.SourceCache{constructor(s){const d=un("proxy",{type:"geojson",maxzoom:s.transform.maxZoom},new Be(Sn(),null),s.style);super("proxy",d,!1),d.setEventedParent(this),this.map=this.getSource().map=s,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(s,d,g){if(s.freezeTileCoverage)return;this.transform=s;const _=s.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((b,I)=>{if(b[I.key]="",!this._tiles[I.key]){const M=new l.Tile(I,this._source.tileSize*I.overscaleFactor(),s.tileZoom);M.state="loaded",this._tiles[I.key]=M}return b},{});for(const b in this._tiles)b in _||(this.freeFBO(b),this._tiles[b].unloadVectorData(),delete this._tiles[b])}freeFBO(s){const d=this.proxyCachedFBO[s];if(d!==void 0){const g=Object.values(d);this.renderCachePool.push(...g),delete this.proxyCachedFBO[s]}}deallocRenderCache(){this.renderCache.forEach(s=>s.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class ku extends l.OverscaledTileID{constructor(s,d,g){super(s.overscaledZ,s.wrap,s.canonical.z,s.canonical.x,s.canonical.y),this.proxyTileKey=d,this.projMatrix=g}}class Hh extends l.Elevation{constructor(s,d){super(),this.painter=s,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[g,_,b]=function(O){const $=new l.StructArrayLayout2i4,k=new l.StructArrayLayout3ui6,q=131;$.reserve(17161),k.reserve(33800);const ie=l.EXTENT/128,le=l.EXTENT+ie/2,de=le+ie;for(let me=-ie;me<de;me+=ie)for(let X=-ie;X<de;X+=ie){const se=X<0||X>le||me<0||me>le?24575:0,xe=l.clamp(Math.round(X),0,l.EXTENT),be=l.clamp(Math.round(me),0,l.EXTENT);$.emplaceBack(xe+se,be)}const ce=(me,X)=>{const se=X*q+me;k.emplaceBack(se+1,se,se+q),k.emplaceBack(se+q,se+q+1,se+1)};for(let me=1;me<129;me++)for(let X=1;X<129;X++)ce(X,me);return[0,129].forEach(me=>{for(let X=0;X<130;X++)ce(X,me),ce(me,X)}),[$,k,32768]}(),I=s.context;this.gridBuffer=I.createVertexBuffer(g,l.posAttributes.members),this.gridIndexBuffer=I.createIndexBuffer(_),this.gridSegments=l.SegmentVector.simpleSegment(0,0,g.length,_.length),this.gridNoSkirtSegments=l.SegmentVector.simpleSegment(0,0,g.length,b),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new Lu(d.map),this.orthoMatrix=l.create(),l.ortho(this.orthoMatrix,this.painter.transform.projection.name==="globe"?.015:0,l.EXTENT,0,l.EXTENT,0,1);const M=I.gl;this._overlapStencilMode=new l.StencilMode({func:M.GEQUAL,mask:255},0,255,M.KEEP,M.KEEP,M.REPLACE),this._previousZoom=s.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=d,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new Vh(d.map)}set style(s){s.on("data",this._onStyleDataEvent.bind(this)),s.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=s,this._checkRenderCacheEfficiency(),this._style.map.on("moveend",()=>{this._clearLineLayersFromRenderCache()})}update(s,d,g){if(s&&s.terrain){this._style!==s&&(this.style=s),this.enabled=!0;const _=s.terrain.properties;this.sourceCache=s.terrain.drapeRenderMode===0?this._mockSourceCache:s._getSourceCache(_.get("source")),this._exaggeration=_.get("exaggeration");const b=()=>{this.sourceCache.used&&l.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.
This leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const I=this.getScaledDemTileSize();this.sourceCache.update(d,I,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,b(),this._initializing=!0),b(),d.updateElevation(!0,g),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(d),this._emptyDEMTextureDirty=!0}else this._disable()}resetTileLookupCache(s){this._findCoveringTileCache[s]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_checkRenderCacheEfficiency(){const s=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||s.efficiency!==100&&l.warnOnce(`Terrain render cache efficiency is not optimal (${s.efficiency}%) and performance
                may be affected negatively, consider placing all background, fill and line layers before layer
                with id '${s.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(s){s.coord&&s.dataType==="source"?this._clearRenderCacheForTile(s.sourceCacheId,s.coord):s.dataType==="style"&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const s in this._style._sourceCaches)this._style._sourceCaches[s].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach(s=>s.fb.destroy()),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const s=2*this.proxySourceCache.getSource().tileSize;return[s,s]}set useVertexMorphing(s){this._useVertexMorphing=s}updateTileBinding(s){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const d=this.proxySourceCache,g=this.painter.transform;this._initializing&&(this._initializing=g._centerAltitude===0&&this.getAtPointOrZero(l.MercatorCoordinate.fromLngLat(g.center),-1)===-1,this._emptyDEMTextureDirty=!this._initializing);const _=this.proxyCoords=d.getIds().map(O=>{const $=d.getTileByID(O).tileID;return $.projMatrix=g.calculateProjMatrix($.toUnwrapped()),$});(function(O,$){const k=$.transform.pointCoordinate($.transform.getCameraPoint()),q=new l.Point(k.x,k.y);O.sort((ie,le)=>{if(le.overscaledZ-ie.overscaledZ)return le.overscaledZ-ie.overscaledZ;const de=new l.Point(ie.canonical.x+(1<<ie.canonical.z)*ie.wrap,ie.canonical.y),ce=new l.Point(le.canonical.x+(1<<le.canonical.z)*le.wrap,le.canonical.y),me=q.mult(1<<ie.canonical.z);return me.x-=.5,me.y-=.5,me.distSqr(de)-me.distSqr(ce)})})(_,this.painter),this._previousZoom=g.zoom;const b=this.proxyToSource||{};this.proxyToSource={},_.forEach(O=>{this.proxyToSource[O.key]={}}),this.terrainTileForTile={};const I=this._style._sourceCaches;for(const O in I){const $=I[O];if(!$.used||($!==this.sourceCache&&this.resetTileLookupCache($.id),this._setupProxiedCoordsForOrtho($,s[O],b),$.usedForTerrain))continue;const k=s[O];$.getSource().reparseOverscaled&&this._assignTerrainTiles(k)}this.proxiedCoords[d.id]=_.map(O=>new ku(O,O.key,this.orthoMatrix)),this._assignTerrainTiles(_),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(b),this.renderingToTexture=!1,this._updateTimestamp=l.exported.now();const M={};this._visibleDemTiles=[];for(const O of this.proxyCoords){const $=this.terrainTileForTile[O.key];if(!$)continue;const k=$.tileID.key;k in M||(this._visibleDemTiles.push($),M[k]=k)}}_assignTerrainTiles(s){this._initializing||s.forEach(d=>{if(this.terrainTileForTile[d.key])return;const g=this._findTileCoveringTileID(d,this.sourceCache);g&&(this.terrainTileForTile[d.key]=g)})}_prepareDEMTextures(){const s=this.painter.context,d=s.gl;for(const g in this.terrainTileForTile){const _=this.terrainTileForTile[g],b=_.dem;!b||_.demTexture&&!_.needsDEMTextureUpload||(s.activeTexture.set(d.TEXTURE1),Nh(this.painter,_,b))}}_prepareDemTileUniforms(s,d,g,_){if(!d||d.demTexture==null)return!1;const b=s.tileID.canonical,I=Math.pow(2,d.tileID.canonical.z-b.z),M=_||"";return g[`u_dem_tl${M}`]=[b.x*I%1,b.y*I%1],g[`u_dem_scale${M}`]=I,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const s=this.painter.context,d=s.gl;if(!this._emptyDepthBufferTexture){const g=new l.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new l.Texture(s,g,d.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let s=0;const d=this._visibleDemTiles.reduce((g,_)=>{if(!_.dem)return g;const b=_.dem.tree.minimums[0];return b>0&&s++,g+b},0);return s?d/s:0}_updateEmptyDEMTexture(){const s=this.painter.context,d=s.gl;s.activeTexture.set(d.TEXTURE2);const g=this._getLoadedAreaMinimum(),_=new l.RGBAImage({width:1,height:1},new Uint8Array(l.DEMData.pack(g,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;let b=this._emptyDEMTexture;return b?b.update(_,{premultiply:!1}):b=this._emptyDEMTexture=new l.Texture(s,_,d.RGBA,{premultiply:!1}),b}setupElevationDraw(s,d,g){const _=this.painter.context,b=_.gl,I=(M=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:l.DEMData.getUnpackVector(M),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});var M;I.u_dem_size=this.sourceCache.getSource().tileSize,I.u_exaggeration=this.exaggeration();let O=null,$=null,k=1;if(g&&g.morphing&&this._useVertexMorphing){const q=g.morphing.srcDemTile,ie=g.morphing.dstDemTile;k=g.morphing.phase,q&&ie&&(this._prepareDemTileUniforms(s,q,I,"_prev")&&($=q),this._prepareDemTileUniforms(s,ie,I)&&(O=ie))}if($&&O?(_.activeTexture.set(b.TEXTURE2),O.demTexture.bind(b.NEAREST,b.CLAMP_TO_EDGE,b.NEAREST),_.activeTexture.set(b.TEXTURE4),$.demTexture.bind(b.NEAREST,b.CLAMP_TO_EDGE,b.NEAREST),I.u_dem_lerp=k):(O=this.terrainTileForTile[s.tileID.key],_.activeTexture.set(b.TEXTURE2),(this._prepareDemTileUniforms(s,O,I)?O.demTexture:this.emptyDEMTexture).bind(b.NEAREST,b.CLAMP_TO_EDGE)),_.activeTexture.set(b.TEXTURE3),g&&g.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(b.NEAREST,b.CLAMP_TO_EDGE),this._depthFBO&&(I.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(b.NEAREST,b.CLAMP_TO_EDGE),I.u_depth_size_inv=[1,1]),g&&g.useMeterToDem&&O){const q=(1<<O.tileID.canonical.z)*l.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;I.u_meter_to_dem=q}if(g&&g.labelPlaneMatrixInv&&(I.u_label_plane_matrix_inv=g.labelPlaneMatrixInv),d.setTerrainUniformValues(_,I),this.painter.transform.projection.name==="globe"){const q=this.globeUniformValues(this.painter.transform,s.tileID.canonical,g&&g.useDenormalizedUpVectorScale);d.setGlobeUniformValues(_,q)}}globeUniformValues(s,d,g){const _=s.projection;return{u_tile_tl_up:_.upVector(d,0,0),u_tile_tr_up:_.upVector(d,l.EXTENT,0),u_tile_br_up:_.upVector(d,l.EXTENT,l.EXTENT),u_tile_bl_up:_.upVector(d,0,l.EXTENT),u_tile_up_scale:g?l.globeMetersToEcef(1):_.upVectorScale(d,s.center.lat,s.worldSize).metersToTile}}renderToBackBuffer(s){const d=this.painter,g=this.painter.context;s.length!==0&&(g.bindFramebuffer.set(null),g.viewport.set([0,0,d.width,d.height]),d.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(_,b,I,M,O){if(_.transform.projection.name==="globe")(function($,k,q,ie,le){const de=$.context,ce=de.gl;let me,X;const se=$.options.showTerrainWireframe?2:0,xe=$.transform,be=l.globeUseCustomAntiAliasing($,de,xe),Re=(xt,Xe)=>{if(X===xt)return;const lt=[Vs[xt],"PROJECTION_GLOBE_VIEW"];be&&lt.push("CUSTOM_ANTIALIASING"),Xe&&lt.push(Vs[se]),me=$.useProgram("globeRaster",null,lt),X=xt},ze=$.colorModeForRenderPass(),Oe=new l.DepthMode(ce.LEQUAL,l.DepthMode.ReadWrite,$.depthRangeFor3D);Va.update(le);const Ve=l.calculateGlobeMercatorMatrix(xe),Ue=[l.mercatorXfromLng(xe.center.lng),l.mercatorYfromLat(xe.center.lat)],Ke=se?[!1,!0]:[!1],wt=$.globeSharedBuffers,We=[xe.width*l.exported.devicePixelRatio,xe.height*l.exported.devicePixelRatio],ct=Float32Array.from(xe.globeMatrix),Qe={useDenormalizedUpVectorScale:!0};if(Ke.forEach(xt=>{const Xe=$.transform,lt=Du(Xe.zoom)*k.exaggeration();X=-1;const It=xt?ce.LINES:ce.TRIANGLES;for(const mt of ie){const Pt=q.getTile(mt),dn=l.StencilMode.disabled,Rn=k.prevTerrainTileForTile[mt.key],Qt=k.terrainTileForTile[mt.key];Tl(Rn,Qt)&&Va.newMorphing(mt.key,Rn,Qt,le,250),de.activeTexture.set(ce.TEXTURE0),Pt.texture.bind(ce.LINEAR,ce.CLAMP_TO_EDGE);const yn=Va.getMorphValuesForProxy(mt.key),Hn=yn?1:0;yn&&l.extend$1(Qe,{morphing:{srcDemTile:yn.from,dstDemTile:yn.to,phase:l.easeCubicInOut(yn.phase)}});const Un=l.tileCornersToBounds(mt.canonical),cn=l.getLatitudinalLod(Un.getCenter().lat),ur=l.getGridMatrix(mt.canonical,Un,cn,Xe.worldSize/Xe._pixelsPerMercatorPixel),vr=l.globeNormalizeECEF(l.globeTileBounds(mt.canonical)),yr=zu(Xe.projMatrix,ct,Ve,vr,l.globeToMercatorTransition(Xe.zoom),Ue,Xe.frustumCorners.TL,Xe.frustumCorners.TR,Xe.frustumCorners.BR,Xe.frustumCorners.BL,Xe.globeCenterInViewSpace,Xe.globeRadius,We,lt,ur);if(Re(Hn,xt),k.setupElevationDraw(Pt,me,Qe),$.prepareDrawProgram(de,me,mt.toUnwrapped()),wt){const[_r,Hi,Ti]=xt?wt.getWirefameBuffers($.context,cn):wt.getGridBuffers(cn,lt!==0);me.draw(de,It,Oe,dn,ze,l.CullFaceMode.backCCW,yr,"globe_raster",_r,Hi,Ti)}}}),wt){const xt=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];be&&xt.push("CUSTOM_ANTIALIASING"),me=$.useProgram("globeRaster",null,xt);for(const Xe of ie){const{x:lt,y:It,z:mt}=Xe.canonical,Pt=It===0,dn=It===(1<<mt)-1,[Rn,Qt,yn,Hn]=wt.getPoleBuffers(mt);if(Hn&&(Pt||dn)){const Un=q.getTile(Xe);de.activeTexture.set(ce.TEXTURE0),Un.texture.bind(ce.LINEAR,ce.CLAMP_TO_EDGE);let cn=l.globePoleMatrixForTile(mt,lt,xe);const ur=l.globeNormalizeECEF(l.globeTileBounds(Xe.canonical)),vr=(yr,_r)=>yr.draw(de,ce.TRIANGLES,Oe,l.StencilMode.disabled,ze,l.CullFaceMode.disabled,zu(xe.projMatrix,cn,cn,ur,0,Ue,xe.frustumCorners.TL,xe.frustumCorners.TR,xe.frustumCorners.BR,xe.frustumCorners.BL,xe.globeCenterInViewSpace,xe.globeRadius,We,0),"globe_pole_raster",_r,yn,Hn);k.setupElevationDraw(Un,me,Qe),$.prepareDrawProgram(de,me,Xe.toUnwrapped()),Pt&&vr(me,Rn),dn&&(cn=l.scale(l.create(),cn,[1,-1,1]),vr(me,Qt))}}}})(_,b,I,M,O);else{const $=_.context,k=$.gl;let q,ie;const le=_.options.showTerrainWireframe?2:0,de=(xe,be)=>{if(ie===xe)return;const Re=[Vs[xe]];be&&Re.push(Vs[le]),q=_.useProgram("terrainRaster",null,Re),ie=xe},ce=_.colorModeForRenderPass(),me=new l.DepthMode(k.LEQUAL,l.DepthMode.ReadWrite,_.depthRangeFor3D);Va.update(O);const X=_.transform,se=Du(X.zoom)*b.exaggeration();(le?[!1,!0]:[!1]).forEach(xe=>{ie=-1;const be=xe?k.LINES:k.TRIANGLES,[Re,ze]=xe?b.getWirefameBuffer():[b.gridIndexBuffer,b.gridSegments];for(const Oe of M){const Ve=I.getTile(Oe),Ue=l.StencilMode.disabled,Ke=b.prevTerrainTileForTile[Oe.key],wt=b.terrainTileForTile[Oe.key];Tl(Ke,wt)&&Va.newMorphing(Oe.key,Ke,wt,O,250),$.activeTexture.set(k.TEXTURE0),Ve.texture.bind(k.LINEAR,k.CLAMP_TO_EDGE,k.LINEAR_MIPMAP_NEAREST);const We=Va.getMorphValuesForProxy(Oe.key),ct=We?1:0;let Qe;We&&(Qe={morphing:{srcDemTile:We.from,dstDemTile:We.to,phase:l.easeCubicInOut(We.phase)}});const xt=Cl(Oe.projMatrix,Lm(Oe.canonical,X.renderWorldCopies)?se/10:se);de(ct,xe),b.setupElevationDraw(Ve,q,Qe),_.prepareDrawProgram($,q,Oe.toUnwrapped()),q.draw($,be,me,Ue,ce,l.CullFaceMode.backCCW,xt,"terrain_raster",b.gridBuffer,Re,ze)}})}}(d,this,this.proxySourceCache,s,this._updateTimestamp),this.renderingToTexture=!0,d.gpuTimingDeferredRenderEnd(),s.splice(0,s.length))}renderBatch(s){if(this._drapedRenderBatches.length===0)return s+1;this.renderingToTexture=!0;const d=this.painter,g=this.painter.context,_=this.proxySourceCache,b=this.proxiedCoords[_.id],I=this._drapedRenderBatches.shift(),M=[],O=d.style.order;let $=0;for(const k of b){const q=_.getTileByID(k.proxyTileKey),ie=_.proxyCachedFBO[k.key]?_.proxyCachedFBO[k.key][s]:void 0,le=ie!==void 0?_.renderCache[ie]:this.pool[$++],de=ie!==void 0;if(q.texture=le.tex,de&&!le.dirty){M.push(q.tileID);continue}let ce;g.bindFramebuffer.set(le.fb.framebuffer),this.renderedToTile=!1,le.dirty&&(g.clear({color:l.Color.transparent,stencil:0}),le.dirty=!1);for(let me=I.start;me<=I.end;++me){const X=d.style._layers[O[me]];if(X.isHidden(d.transform.zoom))continue;const se=d.style._getLayerSourceCache(X),xe=se?this.proxyToSource[k.key][se.id]:[k];if(!xe)continue;const be=xe;g.viewport.set([0,0,le.fb.width,le.fb.height]),ce!==(se?se.id:null)&&(this._setupStencil(le,xe,X,se),ce=se?se.id:null),d.renderLayer(d,se,X,be)}this.renderedToTile?(le.dirty=!0,M.push(q.tileID)):de||--$,$===5&&($=0,this.renderToBackBuffer(M))}return this.renderToBackBuffer(M),this.renderingToTexture=!1,g.bindFramebuffer.set(null),g.viewport.set([0,0,d.width,d.height]),I.end+1}postRender(){}renderCacheEfficiency(s){const d=s.order.length;if(d===0)return{efficiency:100};let g,_=0,b=0,I=!1;for(let M=0;M<d;++M){const O=s._layers[s.order[M]];this._style.isLayerDraped(O)?(I&&++_,++b):I||(I=!0,g=O.id)}return b===0?{efficiency:100}:{efficiency:100*(1-_/b),firstUndrapedLayer:g}}getMinElevationBelowMSL(){let s=0;return this._visibleDemTiles.filter(d=>d.dem).forEach(d=>{s=Math.min(s,d.dem.tree.minimums[0])}),s===0?s:(s-30)*this._exaggeration}raycast(s,d,g){if(!this._visibleDemTiles)return null;const _=this._visibleDemTiles.filter(b=>b.dem).map(b=>{const I=b.tileID,M=1<<I.overscaledZ,{x:O,y:$}=I.canonical,k=O/M,q=(O+1)/M,ie=$/M,le=($+1)/M;return{minx:k,miny:ie,maxx:q,maxy:le,t:b.dem.tree.raycastRoot(k,ie,q,le,s,d,g),tile:b}});_.sort((b,I)=>(b.t!==null?b.t:Number.MAX_VALUE)-(I.t!==null?I.t:Number.MAX_VALUE));for(const b of _){if(b.t==null)return null;const I=b.tile.dem.tree.raycast(b.minx,b.miny,b.maxx,b.maxy,s,d,g);if(I!=null)return I}return null}_createFBO(){const s=this.painter.context,d=s.gl,g=this.drapeBufferSize;s.activeTexture.set(d.TEXTURE0);const _=new l.Texture(s,{width:g[0],height:g[1],data:null},d.RGBA);_.bind(d.LINEAR,d.CLAMP_TO_EDGE);const b=s.createFramebuffer(g[0],g[1],!1);return b.colorAttachment.set(_.texture),b.depthAttachment=new we(s,b.framebuffer),this._sharedDepthStencil===void 0?(this._sharedDepthStencil=s.createRenderbuffer(s.gl.DEPTH_STENCIL,g[0],g[1]),this._stencilRef=0,b.depthAttachment.set(this._sharedDepthStencil),s.clear({stencil:0})):b.depthAttachment.set(this._sharedDepthStencil),s.extTextureFilterAnisotropic&&!s.extTextureFilterAnisotropicForceOff&&d.texParameterf(d.TEXTURE_2D,s.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,s.extTextureFilterAnisotropicMax),{fb:b,tex:_,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const s in this._style._sourceCaches)if(this._style._sourceCaches[s].hasTransition())return!0;return this._style.order.some(s=>{const d=this._style._layers[s],g=d.isHidden(this.painter.transform.zoom);return d.type==="custom"?!g&&d.shouldRedrape():!g&&d.hasTransition()})}_clearLineLayersFromRenderCache(){let s=!1;for(const g of this._style._getSources())if(g instanceof Je){s=!0;break}if(!s)return;const d={};for(let g=0;g<this._style.order.length;++g){const _=this._style._layers[this._style.order[g]],b=this._style._getLayerSourceCache(_);if(b&&!d[b.id]&&!_.isHidden(this.painter.transform.zoom)&&_.type==="line"&&_.widthExpression()instanceof l.ZoomDependentExpression){d[b.id]=!0;for(const I of this.proxyCoords){const M=this.proxyToSource[I.key][b.id];if(M)for(const O of M)this._clearRenderCacheForTile(b.id,O)}}}}_clearRasterLayersFromRenderCache(){let s=!1;for(const g in this._style._sourceCaches)if(this._style._sourceCaches[g]._source instanceof Ge){s=!0;break}if(!s)return;const d={};for(let g=0;g<this._style.order.length;++g){const _=this._style._layers[this._style.order[g]],b=this._style._getLayerSourceCache(_);if(!b||d[b.id]||_.isHidden(this.painter.transform.zoom)||_.type!=="raster")continue;const I=_.paint.get("raster-fade-duration");for(const M of this.proxyCoords){const O=this.proxyToSource[M.key][b.id];if(O)for(const $ of O){const k=Uh(b.getTile($),b.findLoadedParent($,0),b,this.painter.transform,I);(k.opacity!==1||k.mix!==0)&&this._clearRenderCacheForTile(b.id,$)}}}}_setupDrapedRenderBatches(){const s=this._style.order,d=s.length;if(d===0)return;const g=[];let _,b=0,I=this._style._layers[s[b]];for(;!this._style.isLayerDraped(I)&&I.isHidden(this.painter.transform.zoom)&&++b<d;)I=this._style._layers[s[b]];for(;b<d;++b){const M=this._style._layers[s[b]];M.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(M)?_===void 0&&(_=b):_!==void 0&&(g.push({start:_,end:b-1}),_=void 0))}_!==void 0&&g.push({start:_,end:b-1}),this._drapedRenderBatches=g}_setupRenderCache(s){const d=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,d.renderCache.length>d.renderCachePool.length){const I=Object.values(d.proxyCachedFBO);d.proxyCachedFBO={};for(let M=0;M<I.length;++M){const O=Object.values(I[M]);d.renderCachePool.push(...O)}}return}this._clearRasterLayersFromRenderCache();const g=this.proxyCoords,_=this._tilesDirty;for(let I=g.length-1;I>=0;I--){const M=g[I];if(d.getTileByID(M.key),d.proxyCachedFBO[M.key]!==void 0){const O=s[M.key],$=this.proxyToSource[M.key];let k=0;for(const q in $){const ie=$[q],le=O[q];if(!le||le.length!==ie.length||ie.some((de,ce)=>de!==le[ce]||_[q]&&_[q].hasOwnProperty(de.key))){k=-1;break}++k}for(const q in d.proxyCachedFBO[M.key])d.renderCache[d.proxyCachedFBO[M.key][q]].dirty=k<0||k!==Object.values(O).length}}const b=[...this._drapedRenderBatches];b.sort((I,M)=>M.end-M.start-(I.end-I.start));for(const I of b)for(const M of g){if(d.proxyCachedFBO[M.key])continue;let O=d.renderCachePool.pop();O===void 0&&d.renderCache.length<50&&(O=d.renderCache.length,d.renderCache.push(this._createFBO())),O!==void 0&&(d.proxyCachedFBO[M.key]={},d.proxyCachedFBO[M.key][I.start]=O,d.renderCache[O].dirty=!0)}this._tilesDirty={}}_setupStencil(s,d,g,_){if(!_||!this._sourceTilesOverlap[_.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const b=this.painter.context,I=b.gl;if(d.length<=1)return void(this._overlapStencilType=!1);let M;if(g.isTileClipped())M=d.length,this._overlapStencilMode.test={func:I.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(d[0].overscaledZ>d[d.length-1].overscaledZ))return void(this._overlapStencilType=!1);M=1,this._overlapStencilMode.test={func:I.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+M>255&&(b.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=M,this._overlapStencilMode.ref=this._stencilRef,g.isTileClipped()&&this._renderTileClippingMasks(d,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return this._overlapStencilType==="Clip"||this._overlapStencilType==="Mask"}stencilModeForRTTOverlap(s){return this.renderingToTexture&&this._overlapStencilType?(this._overlapStencilType==="Clip"&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[s.key]),this._overlapStencilMode):l.StencilMode.disabled}_renderTileClippingMasks(s,d){const g=this.painter,_=this.painter.context,b=_.gl;g._tileClippingMaskIDs={},_.setColorMode(l.ColorMode.disabled),_.setDepthMode(l.DepthMode.disabled);const I=g.useProgram("clippingMask");for(const M of s){const O=g._tileClippingMaskIDs[M.key]=--d;I.draw(_,b.TRIANGLES,l.DepthMode.disabled,new l.StencilMode({func:b.ALWAYS,mask:0},O,255,b.KEEP,b.KEEP,b.REPLACE),l.ColorMode.disabled,l.CullFaceMode.disabled,Tc(M.projMatrix),"$clipping",g.tileExtentBuffer,g.quadTriangleIndexBuffer,g.tileExtentSegments)}}pointCoordinate(s){const d=this.painter.transform;if(s.x<0||s.x>d.width||s.y<0||s.y>d.height)return null;const g=[s.x,s.y,1,1];l.transformMat4$1(g,g,d.pixelMatrixInverse),l.scale$1(g,g,1/g[3]),g[0]/=d.worldSize,g[1]/=d.worldSize;const _=d._camera.position,b=l.mercatorZfromAltitude(1,d.center.lat),I=[_[0],_[1],_[2]/b,0],M=l.subtract([],g.slice(0,3),I);l.normalize(M,M);const O=this.raycast(I,M,this._exaggeration);return O!==null&&O?(l.scaleAndAdd(I,I,M,O),I[3]=I[2],I[2]*=b,I):null}drawDepth(){const s=this.painter,d=s.context,g=this.proxySourceCache,_=Math.ceil(s.width),b=Math.ceil(s.height);if(!this._depthFBO||this._depthFBO.width===_&&this._depthFBO.height===b||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const I=d.gl,M=d.createFramebuffer(_,b,!0);d.activeTexture.set(I.TEXTURE0);const O=new l.Texture(d,{width:_,height:b,data:null},I.RGBA);O.bind(I.NEAREST,I.CLAMP_TO_EDGE),M.colorAttachment.set(O.texture);const $=d.createRenderbuffer(d.gl.DEPTH_COMPONENT16,_,b);M.depthAttachment.set($),this._depthFBO=M,this._depthTexture=O}d.bindFramebuffer.set(this._depthFBO.framebuffer),d.viewport.set([0,0,_,b]),function(I,M,O,$){if(I.transform.projection.name==="globe")return;const k=I.context,q=k.gl;k.clear({depth:1});const ie=I.useProgram("terrainDepth"),le=new l.DepthMode(q.LESS,l.DepthMode.ReadWrite,I.depthRangeFor3D);for(const de of $){const ce=O.getTile(de),me=Cl(de.projMatrix,0);M.setupElevationDraw(ce,ie),ie.draw(k,q.TRIANGLES,le,l.StencilMode.disabled,l.ColorMode.unblended,l.CullFaceMode.backCCW,me,"terrain_depth",M.gridBuffer,M.gridIndexBuffer,M.gridNoSkirtSegments)}}(s,this,g,this.proxyCoords)}_setupProxiedCoordsForOrtho(s,d,g){if(s.getSource()instanceof Yt)return this._setupProxiedCoordsForImageSource(s,d,g);this._findCoveringTileCache[s.id]=this._findCoveringTileCache[s.id]||{};const _=this.proxiedCoords[s.id]=[],b=this.proxyCoords;for(let M=0;M<b.length;M++){const O=b[M],$=this._findTileCoveringTileID(O,s);if($){const k=this._createProxiedId(O,$,g[O.key]&&g[O.key][s.id]);_.push(k),this.proxyToSource[O.key][s.id]=[k]}}let I=!1;for(let M=0;M<d.length;M++){const O=s.getTile(d[M]);if(!O||!O.hasData())continue;const $=this._findTileCoveringTileID(O.tileID,this.proxySourceCache);if($&&$.tileID.canonical.z!==O.tileID.canonical.z){const k=this.proxyToSource[$.tileID.key][s.id],q=this._createProxiedId($.tileID,O,g[$.tileID.key]&&g[$.tileID.key][s.id]);k?k.splice(k.length-1,0,q):this.proxyToSource[$.tileID.key][s.id]=[q],_.push(q),I=!0}}this._sourceTilesOverlap[s.id]=I}_setupProxiedCoordsForImageSource(s,d,g){if(!s.getSource().loaded())return;const _=this.proxiedCoords[s.id]=[],b=this.proxyCoords,I=s.getSource(),M=new l.Point(I.tileID.x,I.tileID.y)._div(1<<I.tileID.z),O=I.coordinates.map(l.MercatorCoordinate.fromLngLat).reduce((k,q)=>(k.min.x=Math.min(k.min.x,q.x-M.x),k.min.y=Math.min(k.min.y,q.y-M.y),k.max.x=Math.max(k.max.x,q.x-M.x),k.max.y=Math.max(k.max.y,q.y-M.y),k),{min:new l.Point(Number.MAX_VALUE,Number.MAX_VALUE),max:new l.Point(-Number.MAX_VALUE,-Number.MAX_VALUE)}),$=(k,q)=>{const ie=k.wrap+k.canonical.x/(1<<k.canonical.z),le=k.canonical.y/(1<<k.canonical.z),de=l.EXTENT/(1<<k.canonical.z),ce=q.wrap+q.canonical.x/(1<<q.canonical.z),me=q.canonical.y/(1<<q.canonical.z);return ie+de<ce+O.min.x||ie>ce+O.max.x||le+de<me+O.min.y||le>me+O.max.y};for(let k=0;k<b.length;k++){const q=b[k];for(let ie=0;ie<d.length;ie++){const le=s.getTile(d[ie]);if(!le||!le.hasData()||$(q,le.tileID))continue;const de=this._createProxiedId(q,le,g[q.key]&&g[q.key][s.id]),ce=this.proxyToSource[q.key][s.id];ce?ce.push(de):this.proxyToSource[q.key][s.id]=[de],_.push(de)}}}_createProxiedId(s,d,g){let _=this.orthoMatrix;if(g){const b=g.find(I=>I.key===d.tileID.key);if(b)return b}if(d.tileID.key!==s.key){const b=s.canonical.z-d.tileID.canonical.z;let I,M,O;_=l.create();const $=d.tileID.wrap-s.wrap<<s.overscaledZ;b>0?(I=l.EXTENT>>b,M=I*((d.tileID.canonical.x<<b)-s.canonical.x+$),O=I*((d.tileID.canonical.y<<b)-s.canonical.y)):(I=l.EXTENT<<-b,M=l.EXTENT*(d.tileID.canonical.x-(s.canonical.x+$<<-b)),O=l.EXTENT*(d.tileID.canonical.y-(s.canonical.y<<-b))),l.ortho(_,0,I,0,I,0,1),l.translate(_,_,[M,O,0])}return new ku(d.tileID,s.key,_)}_findTileCoveringTileID(s,d){let g=d.getTile(s);if(g&&g.hasData())return g;const _=this._findCoveringTileCache[d.id],b=_[s.key];if(g=b?d.getTileByID(b):null,g&&g.hasData()||b===null)return g;let I=g?g.tileID:s,M=I.overscaledZ;const O=d.getSource().minzoom,$=[];if(!b){const q=d.getSource().maxzoom;if(s.canonical.z>=q){const ie=s.canonical.z-q;d.getSource().reparseOverscaled?(M=Math.max(s.canonical.z+2,d.transform.tileZoom),I=new l.OverscaledTileID(M,s.wrap,q,s.canonical.x>>ie,s.canonical.y>>ie)):ie!==0&&(M=q,I=new l.OverscaledTileID(M,s.wrap,q,s.canonical.x>>ie,s.canonical.y>>ie))}I.key!==s.key&&($.push(I.key),g=d.getTile(I))}const k=q=>{$.forEach(ie=>{_[ie]=q}),$.length=0};for(M-=1;M>=O&&(!g||!g.hasData());M--){g&&k(g.tileID.key);const q=I.calculateScaledKey(M);if(g=d.getTileByID(q),g&&g.hasData())break;const ie=_[q];if(ie===null)break;ie===void 0?$.push(q):g=d.getTileByID(ie)}return k(g?g.tileID.key:null),g&&g.hasData()?g:null}findDEMTileFor(s){return this.enabled?this._findTileCoveringTileID(s,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(s,d){let g=this._tilesDirty[s];g||(g=this._tilesDirty[s]={}),g[d.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const s=function(d){let g=0;const _=new l.StructArrayLayout2ui4,b=131;for(let I=1;I<129;I++){for(let M=1;M<129;M++)g=I*b+M,_.emplaceBack(g,g+1),_.emplaceBack(g,g+b),_.emplaceBack(g+1,g+b),I===128&&_.emplaceBack(g+b,g+b+1);_.emplaceBack(g+1,g+1+b)}return _}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(s),this.wireframeSegments=l.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,s.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}class Jn{static cacheKey(s,d,g,_){let b=`${d}${_?_.cacheKey:""}`;for(const I of g)s.usedDefines.includes(I)&&(b+=`/${I}`);return b}constructor(s,d,g,_,b,I){const M=s.gl;this.program=M.createProgram();const O=function(X){const se=[];for(let xe=0;xe<X.length;xe++){if(X[xe]===null)continue;const be=X[xe].split(" ");se.push(be.pop())}return se}(g.staticAttributes),$=_?_.getBinderAttributes():[],k=O.concat($);let q=_?_.defines():[];q=q.concat(I.map(X=>`#define ${X}`));const ie=s.isWebGL2?`#version 300 es
`:"",le=ie+q.concat(s.extStandardDerivatives&&ie.length===0?`#extension GL_OES_standard_derivatives : enable
`.concat($h):$h,$h,Ou,Om.fragmentSource,Sl.fragmentSource,g.fragmentSource).join(`
`),de=ie+q.concat(`
#ifdef GL_ES
precision highp float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`,Ou,Om.vertexSource,Sl.vertexSource,Ru.vertexSource,g.vertexSource).join(`
`),ce=M.createShader(M.FRAGMENT_SHADER);if(M.isContextLost())return void(this.failedToCreate=!0);M.shaderSource(ce,le),M.compileShader(ce),M.attachShader(this.program,ce);const me=M.createShader(M.VERTEX_SHADER);if(M.isContextLost())this.failedToCreate=!0;else{M.shaderSource(me,de),M.compileShader(me),M.attachShader(this.program,me),this.attributes={},this.numAttributes=k.length;for(let X=0;X<this.numAttributes;X++)k[X]&&(M.bindAttribLocation(this.program,X,k[X]),this.attributes[k[X]]=X);M.linkProgram(this.program),M.deleteShader(me),M.deleteShader(ce),this.fixedUniforms=b(s),this.binderUniforms=_?_.getUniforms(s):[],I.includes("TERRAIN")&&(this.terrainUniforms=(X=>({u_dem:new l.Uniform1i(X),u_dem_prev:new l.Uniform1i(X),u_dem_unpack:new l.Uniform4f(X),u_dem_tl:new l.Uniform2f(X),u_dem_scale:new l.Uniform1f(X),u_dem_tl_prev:new l.Uniform2f(X),u_dem_scale_prev:new l.Uniform1f(X),u_dem_size:new l.Uniform1f(X),u_dem_lerp:new l.Uniform1f(X),u_exaggeration:new l.Uniform1f(X),u_depth:new l.Uniform1i(X),u_depth_size_inv:new l.Uniform2f(X),u_meter_to_dem:new l.Uniform1f(X),u_label_plane_matrix_inv:new l.UniformMatrix4f(X)}))(s)),I.includes("GLOBE")&&(this.globeUniforms=(X=>({u_tile_tl_up:new l.Uniform3f(X),u_tile_tr_up:new l.Uniform3f(X),u_tile_br_up:new l.Uniform3f(X),u_tile_bl_up:new l.Uniform3f(X),u_tile_up_scale:new l.Uniform1f(X)}))(s)),I.includes("FOG")&&(this.fogUniforms=(X=>({u_fog_matrix:new l.UniformMatrix4f(X),u_fog_range:new l.Uniform2f(X),u_fog_color:new l.Uniform4f(X),u_fog_horizon_blend:new l.Uniform1f(X),u_fog_temporal_offset:new l.Uniform1f(X),u_frustum_tl:new l.Uniform3f(X),u_frustum_tr:new l.Uniform3f(X),u_frustum_br:new l.Uniform3f(X),u_frustum_bl:new l.Uniform3f(X),u_globe_pos:new l.Uniform3f(X),u_globe_radius:new l.Uniform1f(X),u_globe_transition:new l.Uniform1f(X),u_is_globe:new l.Uniform1i(X),u_viewport:new l.Uniform2f(X)}))(s))}}setTerrainUniformValues(s,d){if(!this.terrainUniforms)return;const g=this.terrainUniforms;if(!this.failedToCreate){s.program.set(this.program);for(const _ in d)g[_]&&g[_].set(this.program,_,d[_])}}setGlobeUniformValues(s,d){if(!this.globeUniforms)return;const g=this.globeUniforms;if(!this.failedToCreate){s.program.set(this.program);for(const _ in d)g[_]&&g[_].set(this.program,_,d[_])}}setFogUniformValues(s,d){if(!this.fogUniforms)return;const g=this.fogUniforms;if(!this.failedToCreate){s.program.set(this.program);for(const _ in d)g[_].set(this.program,_,d[_])}}draw(s,d,g,_,b,I,M,O,$,k,q,ie,le,de,ce){const me=s.gl;if(this.failedToCreate)return;s.program.set(this.program),s.setDepthMode(g),s.setStencilMode(_),s.setColorMode(b),s.setCullFace(I);for(const se of Object.keys(this.fixedUniforms))this.fixedUniforms[se].set(this.program,se,M[se]);de&&de.setUniforms(this.program,s,this.binderUniforms,ie,{zoom:le});const X={[me.LINES]:2,[me.TRIANGLES]:3,[me.LINE_STRIP]:1}[d];for(const se of q.get()){const xe=se.vaos||(se.vaos={});(xe[O]||(xe[O]=new G0)).bind(s,this,$,de?de.getPaintVertexBuffers():[],k,se.vertexOffset,ce||[]),me.drawElements(d,se.primitiveLength*X,me.UNSIGNED_SHORT,se.primitiveOffset*X*2)}}}function Ic(p,s){const d=Math.pow(2,s.tileID.overscaledZ),g=s.tileSize*Math.pow(2,p.transform.tileZoom)/d,_=g*(s.tileID.canonical.x+s.tileID.wrap*d),b=g*s.tileID.canonical.y;return{u_image:0,u_texsize:s.imageAtlasTexture.size,u_tile_units_to_pixels:1/Ze(s,1,p.transform.tileZoom),u_pixel_coord_upper:[_>>16,b>>16],u_pixel_coord_lower:[65535&_,65535&b]}}const km=l.create(),Gh=(p,s,d,g,_,b,I,M,O,$,k)=>{const q=s.style.light,ie=q.properties.get("position"),le=[ie.x,ie.y,ie.z],de=l.create$1();q.properties.get("anchor")==="viewport"&&(l.fromRotation(de,-s.transform.angle),l.transformMat3(le,le,de));const ce=q.properties.get("color"),me=s.transform,X={u_matrix:p,u_lightpos:le,u_lightintensity:q.properties.get("intensity"),u_lightcolor:[ce.r,ce.g,ce.b],u_vertical_gradient:+d,u_opacity:g,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:km,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:_,u_edge_radius:b};return me.projection.name==="globe"&&(X.u_tile_id=[I.canonical.x,I.canonical.y,1<<I.canonical.z],X.u_zoom_transition=O,X.u_inv_rot_matrix=k,X.u_merc_center=$,X.u_up_dir=me.projection.upVector(new l.CanonicalTileID(0,0,0),$[0]*l.EXTENT,$[1]*l.EXTENT),X.u_height_lift=M),X},$m=(p,s,d,g,_,b,I,M,O,$,k,q)=>{const ie=Gh(p,s,d,g,_,b,I,O,$,k,q),le={u_height_factor:-Math.pow(2,I.overscaledZ)/M.tileSize/8};return l.extend(ie,Ic(s,M),le)},Hs=p=>({u_matrix:p}),Wh=(p,s,d)=>l.extend(Hs(p),Ic(s,d)),W0=(p,s)=>({u_matrix:p,u_world:s}),q0=(p,s,d,g)=>l.extend(Wh(p,s,d),{u_world:g}),Z0=l.create(),qh=(p,s,d,g,_,b)=>{const I=p.transform,M=I.projection.name==="globe";let O;if(b.paint.get("circle-pitch-alignment")==="map")if(M){const k=l.globePixelsToTileUnits(I.zoom,s.canonical)*I._pixelsPerMercatorPixel;O=Float32Array.from([k,0,0,k])}else O=I.calculatePixelsToTileUnitsMatrix(d);else O=new Float32Array([I.pixelsToGLUnits[0],0,0,I.pixelsToGLUnits[1]]);const $={u_camera_to_center_distance:I.cameraToCenterDistance,u_matrix:p.translatePosMatrix(s.projMatrix,d,b.paint.get("circle-translate"),b.paint.get("circle-translate-anchor")),u_device_pixel_ratio:l.exported.devicePixelRatio,u_extrude_scale:O,u_inv_rot_matrix:Z0,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(M){$.u_inv_rot_matrix=g,$.u_merc_center=_,$.u_tile_id=[s.canonical.x,s.canonical.y,1<<s.canonical.z],$.u_zoom_transition=l.globeToMercatorTransition(I.zoom);const k=_[0]*l.EXTENT,q=_[1]*l.EXTENT;$.u_up_dir=I.projection.upVector(new l.CanonicalTileID(0,0,0),k,q)}return $},Zh=p=>{const s=[];return p.paint.get("circle-pitch-alignment")==="map"&&s.push("PITCH_WITH_MAP"),p.paint.get("circle-pitch-scale")==="map"&&s.push("SCALE_WITH_MAP"),s},Xh=(p,s,d,g)=>{const _=l.EXTENT/d.tileSize;return{u_matrix:p,u_camera_to_center_distance:s.getCameraToCenterDistance(g),u_extrude_scale:[s.pixelsToGLUnits[0]/_,s.pixelsToGLUnits[1]/_]}},$u=(p,s,d=1)=>({u_matrix:p,u_color:s,u_overlay:0,u_overlay_scale:d}),Fm=l.create(),Bm=(p,s,d,g,_,b,I)=>{const M=p.transform,O=M.projection.name==="globe",$=O?l.globePixelsToTileUnits(M.zoom,s.canonical)*M._pixelsPerMercatorPixel:Ze(d,1,b),k={u_matrix:s.projMatrix,u_extrude_scale:$,u_intensity:I,u_inv_rot_matrix:Fm,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(O){k.u_inv_rot_matrix=g,k.u_merc_center=_,k.u_tile_id=[s.canonical.x,s.canonical.y,1<<s.canonical.z],k.u_zoom_transition=l.globeToMercatorTransition(M.zoom);const q=_[0]*l.EXTENT,ie=_[1]*l.EXTENT;k.u_up_dir=M.projection.upVector(new l.CanonicalTileID(0,0,0),q,ie)}return k},X0=(p,s,d,g,_,b,I)=>{const M=p.transform,O=M.calculatePixelsToTileUnitsMatrix(s);return{u_matrix:Kh(p,s,d,g),u_pixels_to_tile_units:O,u_device_pixel_ratio:b,u_units_to_pixels:[1/M.pixelsToGLUnits[0],1/M.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:_,u_texsize:Pc(d)?s.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:Il(s,p.transform),u_alpha_discard_threshold:0,u_trim_offset:I}},Mc=(p,s,d,g,_)=>{const b=p.transform;return{u_matrix:Kh(p,s,d,g),u_texsize:s.imageAtlasTexture.size,u_pixels_to_tile_units:b.calculatePixelsToTileUnitsMatrix(s),u_device_pixel_ratio:_,u_image:0,u_tile_units_to_pixels:Il(s,b),u_units_to_pixels:[1/b.pixelsToGLUnits[0],1/b.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function Il(p,s){return 1/Ze(p,1,s.tileZoom)}function Kh(p,s,d,g){return p.translatePosMatrix(g||s.tileID.projMatrix,s,d.paint.get("line-translate"),d.paint.get("line-translate-anchor"))}function Pc(p){const s=p.paint.get("line-dasharray").value;return s.value||s.kind!=="constant"}const Yh=(p,s,d,g,_,b)=>{return{u_matrix:p,u_tl_parent:s,u_scale_parent:d,u_fade_t:g.mix,u_opacity:g.opacity*_.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:_.paint.get("raster-brightness-min"),u_brightness_high:_.paint.get("raster-brightness-max"),u_saturation_factor:(M=_.paint.get("raster-saturation"),M>0?1-1/(1.001-M):-M),u_contrast_factor:(I=_.paint.get("raster-contrast"),I>0?1/(1-I):1+I),u_spin_weights:xa(_.paint.get("raster-hue-rotate")),u_perspective_transform:b};var I,M};function xa(p){p*=Math.PI/180;const s=Math.sin(p),d=Math.cos(p);return[(2*d+1)/3,(-Math.sqrt(3)*s-d+1)/3,(Math.sqrt(3)*s-d+1)/3]}const Fu=l.create(),Jh=(p,s,d,g,_,b,I,M,O,$,k,q,ie,le,de,ce)=>{const me=_.transform,X={u_is_size_zoom_constant:+(p==="constant"||p==="source"),u_is_size_feature_constant:+(p==="constant"||p==="camera"),u_size_t:s?s.uSizeT:0,u_size:s?s.uSize:0,u_camera_to_center_distance:me.cameraToCenterDistance,u_rotate_symbol:+d,u_aspect_ratio:me.width/me.height,u_fade_change:_.options.fadeDuration?_.symbolFadeChange:1,u_matrix:b,u_label_plane_matrix:I,u_coord_matrix:M,u_is_text:+O,u_pitch_with_map:+g,u_texsize:$,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Fu,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:Fu,u_up_vector:[0,-1,0]};return ce.name==="globe"&&(X.u_tile_id=[k.canonical.x,k.canonical.y,1<<k.canonical.z],X.u_zoom_transition=q,X.u_inv_rot_matrix=le,X.u_merc_center=ie,X.u_camera_forward=me._camera.forward(),X.u_ecef_origin=l.globeECEFOrigin(me.globeMatrix,k.toUnwrapped()),X.u_tile_matrix=Float32Array.from(me.globeMatrix),X.u_up_vector=de),X},Bu=(p,s,d,g,_,b,I,M,O,$,k,q,ie,le,de,ce,me)=>l.extend(Jh(p,s,d,g,_,b,I,M,O,$,q,ie,le,de,ce,me),{u_gamma_scale:g?_.transform.cameraToCenterDistance*Math.cos(_.terrain?0:_.transform._pitch):1,u_device_pixel_ratio:l.exported.devicePixelRatio,u_is_halo:+k}),Nm=(p,s,d,g,_,b,I,M,O,$,k,q,ie,le,de,ce)=>l.extend(Bu(p,s,d,g,_,b,I,M,!0,O,!0,k,q,ie,le,de,ce),{u_texsize_icon:$,u_texture_icon:1}),Qh=(p,s,d)=>({u_matrix:p,u_opacity:s,u_color:d}),K0=(p,s,d,g,_)=>l.extend(function(b,I,M){const O=I.imageManager.getPattern(b.toString()),{width:$,height:k}=I.imageManager.getPixelSize(),q=Math.pow(2,M.tileID.overscaledZ),ie=M.tileSize*Math.pow(2,I.transform.tileZoom)/q,le=ie*(M.tileID.canonical.x+M.tileID.wrap*q),de=ie*M.tileID.canonical.y;return{u_image:0,u_pattern_tl:O.tl,u_pattern_br:O.br,u_texsize:[$,k],u_pattern_size:O.displaySize,u_tile_units_to_pixels:1/Ze(M,1,I.transform.tileZoom),u_pixel_coord_upper:[le>>16,de>>16],u_pixel_coord_lower:[65535&le,65535&de]}}(g,d,_),{u_matrix:p,u_opacity:s}),ef={fillExtrusion:p=>({u_matrix:new l.UniformMatrix4f(p),u_lightpos:new l.Uniform3f(p),u_lightintensity:new l.Uniform1f(p),u_lightcolor:new l.Uniform3f(p),u_vertical_gradient:new l.Uniform1f(p),u_opacity:new l.Uniform1f(p),u_edge_radius:new l.Uniform1f(p),u_ao:new l.Uniform2f(p),u_tile_id:new l.Uniform3f(p),u_zoom_transition:new l.Uniform1f(p),u_inv_rot_matrix:new l.UniformMatrix4f(p),u_merc_center:new l.Uniform2f(p),u_up_dir:new l.Uniform3f(p),u_height_lift:new l.Uniform1f(p)}),fillExtrusionPattern:p=>({u_matrix:new l.UniformMatrix4f(p),u_lightpos:new l.Uniform3f(p),u_lightintensity:new l.Uniform1f(p),u_lightcolor:new l.Uniform3f(p),u_vertical_gradient:new l.Uniform1f(p),u_height_factor:new l.Uniform1f(p),u_edge_radius:new l.Uniform1f(p),u_ao:new l.Uniform2f(p),u_tile_id:new l.Uniform3f(p),u_zoom_transition:new l.Uniform1f(p),u_inv_rot_matrix:new l.UniformMatrix4f(p),u_merc_center:new l.Uniform2f(p),u_up_dir:new l.Uniform3f(p),u_height_lift:new l.Uniform1f(p),u_image:new l.Uniform1i(p),u_texsize:new l.Uniform2f(p),u_pixel_coord_upper:new l.Uniform2f(p),u_pixel_coord_lower:new l.Uniform2f(p),u_tile_units_to_pixels:new l.Uniform1f(p),u_opacity:new l.Uniform1f(p)}),fill:p=>({u_matrix:new l.UniformMatrix4f(p)}),fillPattern:p=>({u_matrix:new l.UniformMatrix4f(p),u_image:new l.Uniform1i(p),u_texsize:new l.Uniform2f(p),u_pixel_coord_upper:new l.Uniform2f(p),u_pixel_coord_lower:new l.Uniform2f(p),u_tile_units_to_pixels:new l.Uniform1f(p)}),fillOutline:p=>({u_matrix:new l.UniformMatrix4f(p),u_world:new l.Uniform2f(p)}),fillOutlinePattern:p=>({u_matrix:new l.UniformMatrix4f(p),u_world:new l.Uniform2f(p),u_image:new l.Uniform1i(p),u_texsize:new l.Uniform2f(p),u_pixel_coord_upper:new l.Uniform2f(p),u_pixel_coord_lower:new l.Uniform2f(p),u_tile_units_to_pixels:new l.Uniform1f(p)}),circle:p=>({u_camera_to_center_distance:new l.Uniform1f(p),u_extrude_scale:new l.UniformMatrix2f(p),u_device_pixel_ratio:new l.Uniform1f(p),u_matrix:new l.UniformMatrix4f(p),u_inv_rot_matrix:new l.UniformMatrix4f(p),u_merc_center:new l.Uniform2f(p),u_tile_id:new l.Uniform3f(p),u_zoom_transition:new l.Uniform1f(p),u_up_dir:new l.Uniform3f(p)}),collisionBox:p=>({u_matrix:new l.UniformMatrix4f(p),u_camera_to_center_distance:new l.Uniform1f(p),u_extrude_scale:new l.Uniform2f(p)}),collisionCircle:p=>({u_matrix:new l.UniformMatrix4f(p),u_inv_matrix:new l.UniformMatrix4f(p),u_camera_to_center_distance:new l.Uniform1f(p),u_viewport_size:new l.Uniform2f(p)}),debug:p=>({u_color:new l.UniformColor(p),u_matrix:new l.UniformMatrix4f(p),u_overlay:new l.Uniform1i(p),u_overlay_scale:new l.Uniform1f(p)}),clippingMask:p=>({u_matrix:new l.UniformMatrix4f(p)}),heatmap:p=>({u_extrude_scale:new l.Uniform1f(p),u_intensity:new l.Uniform1f(p),u_matrix:new l.UniformMatrix4f(p),u_inv_rot_matrix:new l.UniformMatrix4f(p),u_merc_center:new l.Uniform2f(p),u_tile_id:new l.Uniform3f(p),u_zoom_transition:new l.Uniform1f(p),u_up_dir:new l.Uniform3f(p)}),heatmapTexture:p=>({u_image:new l.Uniform1i(p),u_color_ramp:new l.Uniform1i(p),u_opacity:new l.Uniform1f(p)}),hillshade:p=>({u_matrix:new l.UniformMatrix4f(p),u_image:new l.Uniform1i(p),u_latrange:new l.Uniform2f(p),u_light:new l.Uniform2f(p),u_shadow:new l.UniformColor(p),u_highlight:new l.UniformColor(p),u_accent:new l.UniformColor(p)}),hillshadePrepare:p=>({u_matrix:new l.UniformMatrix4f(p),u_image:new l.Uniform1i(p),u_dimension:new l.Uniform2f(p),u_zoom:new l.Uniform1f(p),u_unpack:new l.Uniform4f(p)}),line:p=>({u_matrix:new l.UniformMatrix4f(p),u_pixels_to_tile_units:new l.UniformMatrix2f(p),u_device_pixel_ratio:new l.Uniform1f(p),u_units_to_pixels:new l.Uniform2f(p),u_dash_image:new l.Uniform1i(p),u_gradient_image:new l.Uniform1i(p),u_image_height:new l.Uniform1f(p),u_texsize:new l.Uniform2f(p),u_tile_units_to_pixels:new l.Uniform1f(p),u_alpha_discard_threshold:new l.Uniform1f(p),u_trim_offset:new l.Uniform2f(p)}),linePattern:p=>({u_matrix:new l.UniformMatrix4f(p),u_texsize:new l.Uniform2f(p),u_pixels_to_tile_units:new l.UniformMatrix2f(p),u_device_pixel_ratio:new l.Uniform1f(p),u_image:new l.Uniform1i(p),u_units_to_pixels:new l.Uniform2f(p),u_tile_units_to_pixels:new l.Uniform1f(p),u_alpha_discard_threshold:new l.Uniform1f(p)}),raster:p=>({u_matrix:new l.UniformMatrix4f(p),u_tl_parent:new l.Uniform2f(p),u_scale_parent:new l.Uniform1f(p),u_fade_t:new l.Uniform1f(p),u_opacity:new l.Uniform1f(p),u_image0:new l.Uniform1i(p),u_image1:new l.Uniform1i(p),u_brightness_low:new l.Uniform1f(p),u_brightness_high:new l.Uniform1f(p),u_saturation_factor:new l.Uniform1f(p),u_contrast_factor:new l.Uniform1f(p),u_spin_weights:new l.Uniform3f(p),u_perspective_transform:new l.Uniform2f(p)}),symbolIcon:p=>({u_is_size_zoom_constant:new l.Uniform1i(p),u_is_size_feature_constant:new l.Uniform1i(p),u_size_t:new l.Uniform1f(p),u_size:new l.Uniform1f(p),u_camera_to_center_distance:new l.Uniform1f(p),u_rotate_symbol:new l.Uniform1i(p),u_aspect_ratio:new l.Uniform1f(p),u_fade_change:new l.Uniform1f(p),u_matrix:new l.UniformMatrix4f(p),u_label_plane_matrix:new l.UniformMatrix4f(p),u_coord_matrix:new l.UniformMatrix4f(p),u_is_text:new l.Uniform1i(p),u_pitch_with_map:new l.Uniform1i(p),u_texsize:new l.Uniform2f(p),u_tile_id:new l.Uniform3f(p),u_zoom_transition:new l.Uniform1f(p),u_inv_rot_matrix:new l.UniformMatrix4f(p),u_merc_center:new l.Uniform2f(p),u_camera_forward:new l.Uniform3f(p),u_tile_matrix:new l.UniformMatrix4f(p),u_up_vector:new l.Uniform3f(p),u_ecef_origin:new l.Uniform3f(p),u_texture:new l.Uniform1i(p)}),symbolSDF:p=>({u_is_size_zoom_constant:new l.Uniform1i(p),u_is_size_feature_constant:new l.Uniform1i(p),u_size_t:new l.Uniform1f(p),u_size:new l.Uniform1f(p),u_camera_to_center_distance:new l.Uniform1f(p),u_rotate_symbol:new l.Uniform1i(p),u_aspect_ratio:new l.Uniform1f(p),u_fade_change:new l.Uniform1f(p),u_matrix:new l.UniformMatrix4f(p),u_label_plane_matrix:new l.UniformMatrix4f(p),u_coord_matrix:new l.UniformMatrix4f(p),u_is_text:new l.Uniform1i(p),u_pitch_with_map:new l.Uniform1i(p),u_texsize:new l.Uniform2f(p),u_texture:new l.Uniform1i(p),u_gamma_scale:new l.Uniform1f(p),u_device_pixel_ratio:new l.Uniform1f(p),u_tile_id:new l.Uniform3f(p),u_zoom_transition:new l.Uniform1f(p),u_inv_rot_matrix:new l.UniformMatrix4f(p),u_merc_center:new l.Uniform2f(p),u_camera_forward:new l.Uniform3f(p),u_tile_matrix:new l.UniformMatrix4f(p),u_up_vector:new l.Uniform3f(p),u_ecef_origin:new l.Uniform3f(p),u_is_halo:new l.Uniform1i(p)}),symbolTextAndIcon:p=>({u_is_size_zoom_constant:new l.Uniform1i(p),u_is_size_feature_constant:new l.Uniform1i(p),u_size_t:new l.Uniform1f(p),u_size:new l.Uniform1f(p),u_camera_to_center_distance:new l.Uniform1f(p),u_rotate_symbol:new l.Uniform1i(p),u_aspect_ratio:new l.Uniform1f(p),u_fade_change:new l.Uniform1f(p),u_matrix:new l.UniformMatrix4f(p),u_label_plane_matrix:new l.UniformMatrix4f(p),u_coord_matrix:new l.UniformMatrix4f(p),u_is_text:new l.Uniform1i(p),u_pitch_with_map:new l.Uniform1i(p),u_texsize:new l.Uniform2f(p),u_texsize_icon:new l.Uniform2f(p),u_texture:new l.Uniform1i(p),u_texture_icon:new l.Uniform1i(p),u_gamma_scale:new l.Uniform1f(p),u_device_pixel_ratio:new l.Uniform1f(p),u_is_halo:new l.Uniform1i(p)}),background:p=>({u_matrix:new l.UniformMatrix4f(p),u_opacity:new l.Uniform1f(p),u_color:new l.UniformColor(p)}),backgroundPattern:p=>({u_matrix:new l.UniformMatrix4f(p),u_opacity:new l.Uniform1f(p),u_image:new l.Uniform1i(p),u_pattern_tl:new l.Uniform2f(p),u_pattern_br:new l.Uniform2f(p),u_texsize:new l.Uniform2f(p),u_pattern_size:new l.Uniform2f(p),u_pixel_coord_upper:new l.Uniform2f(p),u_pixel_coord_lower:new l.Uniform2f(p),u_tile_units_to_pixels:new l.Uniform1f(p)}),terrainRaster:jh,terrainDepth:jh,skybox:p=>({u_matrix:new l.UniformMatrix4f(p),u_sun_direction:new l.Uniform3f(p),u_cubemap:new l.Uniform1i(p),u_opacity:new l.Uniform1f(p),u_temporal_offset:new l.Uniform1f(p)}),skyboxGradient:p=>({u_matrix:new l.UniformMatrix4f(p),u_color_ramp:new l.Uniform1i(p),u_center_direction:new l.Uniform3f(p),u_radius:new l.Uniform1f(p),u_opacity:new l.Uniform1f(p),u_temporal_offset:new l.Uniform1f(p)}),skyboxCapture:p=>({u_matrix_3f:new l.UniformMatrix3f(p),u_sun_direction:new l.Uniform3f(p),u_sun_intensity:new l.Uniform1f(p),u_color_tint_r:new l.Uniform4f(p),u_color_tint_m:new l.Uniform4f(p),u_luminance:new l.Uniform1f(p)}),globeRaster:p=>({u_proj_matrix:new l.UniformMatrix4f(p),u_globe_matrix:new l.UniformMatrix4f(p),u_normalize_matrix:new l.UniformMatrix4f(p),u_merc_matrix:new l.UniformMatrix4f(p),u_zoom_transition:new l.Uniform1f(p),u_merc_center:new l.Uniform2f(p),u_image0:new l.Uniform1i(p),u_grid_matrix:new l.UniformMatrix3f(p),u_skirt_height:new l.Uniform1f(p),u_frustum_tl:new l.Uniform3f(p),u_frustum_tr:new l.Uniform3f(p),u_frustum_br:new l.Uniform3f(p),u_frustum_bl:new l.Uniform3f(p),u_globe_pos:new l.Uniform3f(p),u_globe_radius:new l.Uniform1f(p),u_viewport:new l.Uniform2f(p)}),globeAtmosphere:p=>({u_frustum_tl:new l.Uniform3f(p),u_frustum_tr:new l.Uniform3f(p),u_frustum_br:new l.Uniform3f(p),u_frustum_bl:new l.Uniform3f(p),u_horizon:new l.Uniform1f(p),u_transition:new l.Uniform1f(p),u_fadeout_range:new l.Uniform1f(p),u_color:new l.Uniform4f(p),u_high_color:new l.Uniform4f(p),u_space_color:new l.Uniform4f(p),u_star_intensity:new l.Uniform1f(p),u_star_density:new l.Uniform1f(p),u_star_size:new l.Uniform1f(p),u_temporal_offset:new l.Uniform1f(p),u_horizon_angle:new l.Uniform1f(p),u_rotation_matrix:new l.UniformMatrix4f(p)})};let Nu;function Ac(p,s,d,g,_,b,I){const M=p.context,O=M.gl,$=p.transform,k=p.useProgram("collisionBox"),q=[];let ie=0,le=0;for(let be=0;be<g.length;be++){const Re=g[be],ze=s.getTile(Re),Oe=ze.getBucket(d);if(!Oe)continue;const Ve=Ui(Re,Oe,$);let Ue=Ve;_[0]===0&&_[1]===0||(Ue=p.translatePosMatrix(Ve,ze,_,b));const Ke=I?Oe.textCollisionBox:Oe.iconCollisionBox,wt=Oe.collisionCircleArray;if(wt.length>0){const We=l.create(),ct=Ue;l.mul(We,Oe.placementInvProjMatrix,$.glCoordMatrix),l.mul(We,We,Oe.placementViewportMatrix),q.push({circleArray:wt,circleOffset:le,transform:ct,invTransform:We,projection:Oe.getProjection()}),ie+=wt.length/4,le=ie}Ke&&(p.terrain&&p.terrain.setupElevationDraw(ze,k),k.draw(M,O.LINES,l.DepthMode.disabled,l.StencilMode.disabled,p.colorModeForRenderPass(),l.CullFaceMode.disabled,Xh(Ue,$,ze,Oe.getProjection()),d.id,Ke.layoutVertexBuffer,Ke.indexBuffer,Ke.segments,null,$.zoom,null,[Ke.collisionVertexBuffer,Ke.collisionVertexBufferExt]))}if(!I||!q.length)return;const de=p.useProgram("collisionCircle"),ce=new l.StructArrayLayout2f1f2i16;ce.resize(4*ie),ce._trim();let me=0;for(const be of q)for(let Re=0;Re<be.circleArray.length/4;Re++){const ze=4*Re,Oe=be.circleArray[ze+0],Ve=be.circleArray[ze+1],Ue=be.circleArray[ze+2],Ke=be.circleArray[ze+3];ce.emplace(me++,Oe,Ve,Ue,Ke,0),ce.emplace(me++,Oe,Ve,Ue,Ke,1),ce.emplace(me++,Oe,Ve,Ue,Ke,2),ce.emplace(me++,Oe,Ve,Ue,Ke,3)}(!Nu||Nu.length<2*ie)&&(Nu=function(be){const Re=2*be,ze=new l.StructArrayLayout3ui6;ze.resize(Re),ze._trim();for(let Oe=0;Oe<Re;Oe++){const Ve=6*Oe;ze.uint16[Ve+0]=4*Oe+0,ze.uint16[Ve+1]=4*Oe+1,ze.uint16[Ve+2]=4*Oe+2,ze.uint16[Ve+3]=4*Oe+2,ze.uint16[Ve+4]=4*Oe+3,ze.uint16[Ve+5]=4*Oe+0}return ze}(ie));const X=M.createIndexBuffer(Nu,!0),se=M.createVertexBuffer(ce,l.collisionCircleLayout.members,!0);for(const be of q){const Re={u_matrix:be.transform,u_inv_matrix:be.invTransform,u_camera_to_center_distance:(xe=$).getCameraToCenterDistance(be.projection),u_viewport_size:[xe.width,xe.height]};de.draw(M,O.TRIANGLES,l.DepthMode.disabled,l.StencilMode.disabled,p.colorModeForRenderPass(),l.CullFaceMode.disabled,Re,d.id,se,X,l.SegmentVector.simpleSegment(0,2*be.circleOffset,be.circleArray.length,be.circleArray.length/2),null,$.zoom)}var xe;se.destroy(),X.destroy()}const jm=l.create();function tf({width:p,height:s,anchor:d,textOffset:g,textScale:_},b){const{horizontalAlign:I,verticalAlign:M}=l.getAnchorAlignment(d),O=-(I-.5)*p,$=-(M-.5)*s,k=l.evaluateVariableOffset(d,g);return new l.Point((O/_+k[0])*b,($/_+k[1])*b)}function Y0(p,s,d,g,_,b,I,M,O,$,k){const q=p.text.placedSymbolArray,ie=p.text.dynamicLayoutVertexArray,le=p.icon.dynamicLayoutVertexArray,de={},ce=p.getProjection(),me=Xn(M,ce,b),X=b.elevation,se=ce.upVectorScale(M.canonical,b.center.lat,b.worldSize).metersToTile;ie.clear();for(let xe=0;xe<q.length;xe++){const be=q.get(xe),{tileAnchorX:Re,tileAnchorY:ze,numGlyphs:Oe}=be,Ve=be.hidden||!be.crossTileID||p.allowVerticalPlacement&&!be.placedOrientation?null:g[be.crossTileID];if(Ve){let Ue=0,Ke=0,wt=0;if(X){const Pt=X?X.getAtTileOffset(M,Re,ze):0,[dn,Rn,Qt]=ce.upVector(M.canonical,Re,ze);Ue=Pt*dn*se,Ke=Pt*Rn*se,wt=Pt*Qt*se}let[We,ct,Qe,xt]=pr(be.projectedAnchorX+Ue,be.projectedAnchorY+Ke,be.projectedAnchorZ+wt,d?me:I);const Xe=Wo(b.getCameraToCenterDistance(ce),xt);let lt=_.evaluateSizeForFeature(p.textSizeData,$,be)*Xe/l.ONE_EM;d&&(lt*=p.tilePixelRatio/O);const It=tf(Ve,lt);d?({x:We,y:ct,z:Qe}=ce.projectTilePoint(Re+It.x,ze+It.y,M.canonical),[We,ct,Qe]=pr(We+Ue,ct+Ke,Qe+wt,I)):(s&&It._rotate(-b.angle),We+=It.x,ct+=It.y,Qe=0);const mt=p.allowVerticalPlacement&&be.placedOrientation===l.WritingMode.vertical?Math.PI/2:0;for(let Pt=0;Pt<Oe;Pt++)l.addDynamicAttributes(ie,We,ct,Qe,mt);k&&be.associatedIconIndex>=0&&(de[be.associatedIconIndex]={x:We,y:ct,z:Qe,angle:mt})}else Kr(Oe,ie)}if(k){le.clear();const xe=p.icon.placedSymbolArray;for(let be=0;be<xe.length;be++){const Re=xe.get(be),{numGlyphs:ze}=Re,Oe=de[be];if(Re.hidden||!Oe)Kr(ze,le);else{const{x:Ve,y:Ue,z:Ke,angle:wt}=Oe;for(let We=0;We<ze;We++)l.addDynamicAttributes(le,Ve,Ue,Ke,wt)}}p.icon.dynamicLayoutVertexBuffer.updateData(le)}p.text.dynamicLayoutVertexBuffer.updateData(ie)}function nf(p,s,d){return d.iconsInText&&s?"symbolTextAndIcon":p?"symbolSDF":"symbolIcon"}function Um(p,s,d,g,_,b,I,M,O,$,k,q){const ie=p.context,le=ie.gl,de=p.transform,ce=M==="map",me=O==="map",X=ce&&d.layout.get("symbol-placement")!=="point",se=ce&&!me&&!X,xe=d.layout.get("symbol-sort-key").constantOr(1)!==void 0;let be=!1;const Re=p.depthModeForSublayer(0,l.DepthMode.ReadOnly),ze=[l.mercatorXfromLng(de.center.lng),l.mercatorYfromLat(de.center.lat)],Oe=d.layout.get("text-variable-anchor"),Ve=de.projection.name==="globe",Ue=[],Ke=[0,-1,0];let wt=Ke;!Ve&&!de.mercatorFromTransition||ce||(wt=function(We){const ct=We._camera.getWorldToCamera(We.worldSize,1),Qe=l.multiply([],ct,We.globeMatrix);l.invert(Qe,Qe);const xt=[0,0,0],Xe=[0,1,0,0];return l.transformMat4$1(Xe,Xe,Qe),xt[0]=Xe[0],xt[1]=Xe[1],xt[2]=Xe[2],l.normalize(xt,xt),xt}(de));for(const We of g){const ct=s.getTile(We),Qe=ct.getBucket(d);if(!Qe||Qe.projection.name==="mercator"&&Ve)continue;const xt=_?Qe.text:Qe.icon;if(!xt||Qe.fullyClipped||!xt.segments.get().length)continue;const Xe=xt.programConfigurations.get(d.id),lt=_||Qe.sdfIcons,It=_?Qe.textSizeData:Qe.iconSizeData,mt=me||de.pitch!==0,Pt=l.evaluateSizeForZoom(It,de.zoom);let dn,Rn,Qt,yn,Hn=[0,0],Un=null;if(_)Rn=ct.glyphAtlasTexture,Qt=le.LINEAR,dn=ct.glyphAtlasTexture.size,Qe.iconsInText&&(Hn=ct.imageAtlasTexture.size,Un=ct.imageAtlasTexture,yn=mt||p.options.rotating||p.options.zooming||It.kind==="composite"||It.kind==="camera"?le.LINEAR:le.NEAREST);else{const Wa=d.layout.get("icon-size").constantOr(0)!==1||Qe.iconsNeedLinear;Rn=ct.imageAtlasTexture,Qt=lt||p.options.rotating||p.options.zooming||Wa||mt?le.LINEAR:le.NEAREST,dn=ct.imageAtlasTexture.size}const cn=Qe.projection.name==="globe",ur=cn?wt:Ke,vr=cn?l.globeToMercatorTransition(de.zoom):0,yr=Xn(We,Qe.getProjection(),de),_r=de.calculatePixelsToTileUnitsMatrix(ct),Hi=tt(yr,ct.tileID.canonical,me,ce,de,Qe.getProjection(),_r),Ti=p.terrain&&me&&X?l.invert(l.create(),Hi):jm,Lo=gr(yr,ct.tileID.canonical,me,ce,de,Qe.getProjection(),_r),wa=Oe&&Qe.hasTextData(),jr=d.layout.get("icon-text-fit")!=="none"&&wa&&Qe.hasIconData();if(X){const Wa=de.elevation,Ss=Wa?Wa.getAtTileOffsetFunc(We,de.center.lat,de.worldSize,Qe.getProjection()):null,Xs=Si(yr,ct.tileID.canonical,me,ce,de,Qe.getProjection(),_r);Pn(Qe,yr,p,_,Xs,Lo,me,$,Ss,We)}const xr=X||_&&Oe||jr,rr=p.translatePosMatrix(yr,ct,b,I),ai=xr?jm:Hi,Ki=p.translatePosMatrix(Lo,ct,b,I,!0),Dr=Qe.getProjection().createInversionMatrix(de,We.canonical),oo=[];p.terrainRenderModeElevated()&&me&&oo.push("PITCH_WITH_MAP_TERRAIN"),cn&&oo.push("PROJECTION_GLOBE_VIEW"),xr&&oo.push("PROJECTED_POS_ON_VIEWPORT");const nd=lt&&d.paint.get(_?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Zs;Zs=lt?Qe.iconsInText?Nm(It.kind,Pt,se,me,p,rr,ai,Ki,dn,Hn,We,vr,ze,Dr,ur,Qe.getProjection()):Bu(It.kind,Pt,se,me,p,rr,ai,Ki,_,dn,!0,We,vr,ze,Dr,ur,Qe.getProjection()):Jh(It.kind,Pt,se,me,p,rr,ai,Ki,_,dn,We,vr,ze,Dr,ur,Qe.getProjection());const jc={program:p.useProgram(nf(lt,_,Qe),Xe,oo),buffers:xt,uniformValues:Zs,atlasTexture:Rn,atlasTextureIcon:Un,atlasInterpolation:Qt,atlasInterpolationIcon:yn,isSDF:lt,hasHalo:nd,tile:ct,labelPlaneMatrixInv:Ti};if(xe&&Qe.canOverlap){be=!0;const Wa=xt.segments.get();for(const Ss of Wa)Ue.push({segments:new l.SegmentVector([Ss]),sortKey:Ss.sortKey,state:jc})}else Ue.push({segments:xt.segments,sortKey:0,state:jc})}be&&Ue.sort((We,ct)=>We.sortKey-ct.sortKey);for(const We of Ue){const ct=We.state;if(p.terrain&&p.terrain.setupElevationDraw(ct.tile,ct.program,{useDepthForOcclusion:!Ve,labelPlaneMatrixInv:ct.labelPlaneMatrixInv}),ie.activeTexture.set(le.TEXTURE0),ct.atlasTexture.bind(ct.atlasInterpolation,le.CLAMP_TO_EDGE),ct.atlasTextureIcon&&(ie.activeTexture.set(le.TEXTURE1),ct.atlasTextureIcon&&ct.atlasTextureIcon.bind(ct.atlasInterpolationIcon,le.CLAMP_TO_EDGE)),ct.isSDF){const Qe=ct.uniformValues;ct.hasHalo&&(Qe.u_is_halo=1,Rc(ct.buffers,We.segments,d,p,ct.program,Re,k,q,Qe)),Qe.u_is_halo=0}Rc(ct.buffers,We.segments,d,p,ct.program,Re,k,q,ct.uniformValues)}}function Rc(p,s,d,g,_,b,I,M,O){const $=g.context,k=[p.dynamicLayoutVertexBuffer,p.opacityVertexBuffer,p.globeExtVertexBuffer];_.draw($,$.gl.TRIANGLES,b,I,M,l.CullFaceMode.disabled,O,d.id,p.layoutVertexBuffer,p.indexBuffer,s,d.paint,g.transform.zoom,p.programConfigurations.get(d.id),k)}function Vm(p,s,d,g,_,b,I){const M=p.context.gl,O=d.paint.get("fill-pattern"),$=O&&O.constantOr(1);let k,q,ie,le,de;I?(q=$&&!d.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",k=M.LINES):(q=$?"fillPattern":"fill",k=M.TRIANGLES);for(const ce of g){const me=s.getTile(ce);if($&&!me.patternsLoaded())continue;const X=me.getBucket(d);if(!X)continue;p.prepareDrawTile();const se=X.programConfigurations.get(d.id),xe=p.useProgram(q,se);$&&(p.context.activeTexture.set(M.TEXTURE0),me.imageAtlasTexture.bind(M.LINEAR,M.CLAMP_TO_EDGE),se.updatePaintBuffers());const be=O.constantOr(null);if(be&&me.imageAtlas){const ze=me.imageAtlas.patternPositions[be.toString()];ze&&se.setConstantPatternPositions(ze)}const Re=p.translatePosMatrix(ce.projMatrix,me,d.paint.get("fill-translate"),d.paint.get("fill-translate-anchor"));if(I){le=X.indexBuffer2,de=X.segments2;const ze=p.terrain&&p.terrain.renderingToTexture?p.terrain.drapeBufferSize:[M.drawingBufferWidth,M.drawingBufferHeight];ie=q==="fillOutlinePattern"&&$?q0(Re,p,me,ze):W0(Re,ze)}else le=X.indexBuffer,de=X.segments,ie=$?Wh(Re,p,me):Hs(Re);p.prepareDrawProgram(p.context,xe,ce.toUnwrapped()),xe.draw(p.context,k,_,p.stencilModeForClipping(ce),b,l.CullFaceMode.disabled,ie,d.id,X.layoutVertexBuffer,le,de,d.paint,p.transform.zoom,se)}}function ju(p,s,d,g,_,b,I){const M=p.context,O=M.gl,$=p.transform,k=d.paint.get("fill-extrusion-pattern"),q=k.constantOr(1),ie=d.paint.get("fill-extrusion-opacity"),le=[d.paint.get("fill-extrusion-ambient-occlusion-intensity"),d.paint.get("fill-extrusion-ambient-occlusion-radius")],de=d.layout.get("fill-extrusion-edge-radius"),ce=de>0&&!d.paint.get("fill-extrusion-rounded-roof"),me=ce?0:de,X=$.projection.name==="globe"?l.fillExtrusionHeightLift():0,se=$.projection.name==="globe",xe=se?l.globeToMercatorTransition($.zoom):0,be=[l.mercatorXfromLng($.center.lng),l.mercatorYfromLat($.center.lat)],Re=[];se&&Re.push("PROJECTION_GLOBE_VIEW"),le[0]>0&&Re.push("FAUX_AO"),ce&&Re.push("ZERO_ROOF_RADIUS");for(const ze of g){const Oe=s.getTile(ze),Ve=Oe.getBucket(d);if(!Ve||Ve.projection.name!==$.projection.name)continue;const Ue=Ve.programConfigurations.get(d.id),Ke=p.useProgram(q?"fillExtrusionPattern":"fillExtrusion",Ue,Re);if(p.terrain){const lt=p.terrain;if(p.style.terrainSetForDrapingOnly())lt.setupElevationDraw(Oe,Ke,{useMeterToDem:!0});else{if(!Ve.enableTerrain)continue;if(lt.setupElevationDraw(Oe,Ke,{useMeterToDem:!0}),Hm(M,s,ze,Ve,d,lt),!Ve.centroidVertexBuffer){const It=Ke.attributes.a_centroid_pos;It!==void 0&&O.vertexAttrib2f(It,0,0)}}}q&&(p.context.activeTexture.set(O.TEXTURE0),Oe.imageAtlasTexture.bind(O.LINEAR,O.CLAMP_TO_EDGE),Ue.updatePaintBuffers());const wt=k.constantOr(null);if(wt&&Oe.imageAtlas){const lt=Oe.imageAtlas.patternPositions[wt.toString()];lt&&Ue.setConstantPatternPositions(lt)}const We=p.translatePosMatrix(ze.projMatrix,Oe,d.paint.get("fill-extrusion-translate"),d.paint.get("fill-extrusion-translate-anchor")),ct=$.projection.createInversionMatrix($,ze.canonical),Qe=d.paint.get("fill-extrusion-vertical-gradient"),xt=q?$m(We,p,Qe,ie,le,me,ze,Oe,X,xe,be,ct):Gh(We,p,Qe,ie,le,me,ze,X,xe,be,ct);p.prepareDrawProgram(M,Ke,ze.toUnwrapped());const Xe=[];p.terrain&&Xe.push(Ve.centroidVertexBuffer),se&&Xe.push(Ve.layoutVertexExtBuffer),Ke.draw(M,M.gl.TRIANGLES,_,b,I,l.CullFaceMode.backCCW,xt,d.id,Ve.layoutVertexBuffer,Ve.indexBuffer,Ve.segments,d.paint,p.transform.zoom,Ue,Xe)}}function Hm(p,s,d,g,_,b){const I=[X=>{let se=X.canonical.x-1,xe=X.wrap;return se<0&&(se=(1<<X.canonical.z)-1,xe--),new l.OverscaledTileID(X.overscaledZ,xe,X.canonical.z,se,X.canonical.y)},X=>{let se=X.canonical.x+1,xe=X.wrap;return se===1<<X.canonical.z&&(se=0,xe++),new l.OverscaledTileID(X.overscaledZ,xe,X.canonical.z,se,X.canonical.y)},X=>new l.OverscaledTileID(X.overscaledZ,X.wrap,X.canonical.z,X.canonical.x,(X.canonical.y===0?1<<X.canonical.z:X.canonical.y)-1),X=>new l.OverscaledTileID(X.overscaledZ,X.wrap,X.canonical.z,X.canonical.x,X.canonical.y===(1<<X.canonical.z)-1?0:X.canonical.y+1)],M=X=>{const se=s.getSource().minzoom,xe=Re=>{const ze=s.getTileByID(Re);if(ze&&ze.hasData())return ze.getBucket(_)},be=[0,-1,1];for(const Re of be){if(X.overscaledZ+Re<se)continue;const ze=xe(X.calculateScaledKey(X.overscaledZ+Re));if(ze)return ze}},O=[0,0,0],$=(X,se)=>(O[0]=Math.min(X.min.y,se.min.y),O[1]=Math.max(X.max.y,se.max.y),O[2]=l.EXTENT-se.min.x>X.max.x?se.min.x-l.EXTENT:X.max.x,O),k=(X,se)=>(O[0]=Math.min(X.min.x,se.min.x),O[1]=Math.max(X.max.x,se.max.x),O[2]=l.EXTENT-se.min.y>X.max.y?se.min.y-l.EXTENT:X.max.y,O),q=[(X,se)=>$(X,se),(X,se)=>$(se,X),(X,se)=>k(X,se),(X,se)=>k(se,X)],ie=new l.Point(0,0);let le,de,ce;const me=(X,se,xe,be,Re)=>{const ze=[[be?xe:X,be?X:xe,0],[be?xe:se,be?se:xe,0]],Oe=Re<0?l.EXTENT+Re:Re,Ve=[be?Oe:(X+se)/2,be?(X+se)/2:Oe,0];return xe===0&&Re<0||xe!==0&&Re>0?b.getForTilePoints(ce,[Ve],!0,de):ze.push(Ve),b.getForTilePoints(d,ze,!0,le),Math.max(ze[0][2],ze[1][2],Ve[2])/b.exaggeration()};for(let X=0;X<4;X++){const se=(X<2?1:5)-X,xe=g.borders[X];if(xe.length===0)continue;const be=ce=I[X](d),Re=M(be);if(!(Re&&Re instanceof l.FillExtrusionBucket&&Re.enableTerrain)||g.borderDoneWithNeighborZ[X]===Re.canonical.z&&Re.borderDoneWithNeighborZ[se]===g.canonical.z||(de=b.findDEMTileFor(be),!de||!de.dem))continue;if(!le){const Ue=b.findDEMTileFor(d);if(!Ue||!Ue.dem)return;le=Ue}const ze=Re.borders[se];let Oe=0;const Ve=Re.borderDoneWithNeighborZ[se]!==g.canonical.z;if(g.canonical.z===Re.canonical.z){for(let Ue=0;Ue<xe.length;Ue++){const Ke=g.featuresOnBorder[xe[Ue]],wt=Ke.borders[X];let We;for(;Oe<ze.length&&(We=Re.featuresOnBorder[ze[Oe]],!(We.borders[se][1]>wt[0]+3));)Ve&&Re.encodeCentroid(void 0,We,!1),Oe++;if(We&&Oe<ze.length){const ct=Oe;let Qe=0;for(;!(We.borders[se][0]>wt[1]-3)&&(Qe++,++Oe!==ze.length);)We=Re.featuresOnBorder[ze[Oe]];if(We=Re.featuresOnBorder[ze[ct]],Ke.intersectsCount()>1||We.intersectsCount()>1||Qe!==1){Qe!==1&&(Oe=ct),g.encodeCentroid(void 0,Ke,!1),Ve&&Re.encodeCentroid(void 0,We,!1);continue}const xt=q[X](Ke,We),Xe=X%2?l.EXTENT-1:0;ie.x=me(xt[0],Math.min(l.EXTENT-1,xt[1]),Xe,X<2,xt[2]),ie.y=0,g.encodeCentroid(ie,Ke,!1),Ve&&Re.encodeCentroid(ie,We,!1)}else g.encodeCentroid(void 0,Ke,!1)}g.borderDoneWithNeighborZ[X]=Re.canonical.z,g.needsCentroidUpdate=!0,Ve&&(Re.borderDoneWithNeighborZ[se]=g.canonical.z,Re.needsCentroidUpdate=!0)}else{for(const Ue of xe)g.encodeCentroid(void 0,g.featuresOnBorder[Ue],!1);if(Ve){for(const Ue of ze)Re.encodeCentroid(void 0,Re.featuresOnBorder[Ue],!1);Re.borderDoneWithNeighborZ[se]=g.canonical.z,Re.needsCentroidUpdate=!0}g.borderDoneWithNeighborZ[X]=Re.canonical.z,g.needsCentroidUpdate=!0}}(g.needsCentroidUpdate||!g.centroidVertexBuffer&&g.centroidVertexArray.length!==0)&&g.uploadCentroid(p)}const Ml=new l.Color(1,0,0,1),J0=new l.Color(0,1,0,1),Q0=new l.Color(0,0,1,1),e_=new l.Color(1,0,1,1),t_=new l.Color(0,1,1,1);function n_(p,s,d){const g=p.context,_=p.transform,b=g.gl,I=_.projection.name==="globe",M=I?["PROJECTION_GLOBE_VIEW"]:null;let O=d.projMatrix;if(I&&l.globeToMercatorTransition(_.zoom)>0){const Ke=l.transitionTileAABBinECEF(d.canonical,_),wt=l.globeDenormalizeECEF(Ke);O=l.multiply(new Float32Array(16),_.globeMatrix,wt),l.multiply(O,_.projMatrix,O)}const $=p.useProgram("debug",null,M),k=s.getTileByID(d.key);p.terrain&&p.terrain.setupElevationDraw(k,$);const q=l.DepthMode.disabled,ie=l.StencilMode.disabled,le=p.colorModeForRenderPass(),de="$debug";g.activeTexture.set(b.TEXTURE0),p.emptyTexture.bind(b.LINEAR,b.CLAMP_TO_EDGE),I?k._makeGlobeTileDebugBuffers(p.context,_):k._makeDebugTileBoundsBuffers(p.context,_.projection);const ce=k._tileDebugBuffer||p.debugBuffer,me=k._tileDebugIndexBuffer||p.debugIndexBuffer,X=k._tileDebugSegments||p.debugSegments;$.draw(g,b.LINE_STRIP,q,ie,le,l.CullFaceMode.disabled,$u(O,l.Color.red),de,ce,me,X,null,null,null,[k._globeTileDebugBorderBuffer]);const se=k.latestRawTileData,xe=Math.floor((se&&se.byteLength||0)/1024),be=s.getTile(d).tileSize,Re=512/Math.min(be,512)*(d.overscaledZ/_.zoom)*.5;let ze=d.canonical.toString();d.overscaledZ!==d.canonical.z&&(ze+=` => ${d.overscaledZ}`),ze+=` ${xe}kb`,function(Ke,wt){Ke.initDebugOverlayCanvas();const We=Ke.debugOverlayCanvas,ct=Ke.context.gl,Qe=Ke.debugOverlayCanvas.getContext("2d");Qe.clearRect(0,0,We.width,We.height),Qe.shadowColor="white",Qe.shadowBlur=2,Qe.lineWidth=1.5,Qe.strokeStyle="white",Qe.textBaseline="top",Qe.font="bold 36px Open Sans, sans-serif",Qe.fillText(wt,5,5),Qe.strokeText(wt,5,5),Ke.debugOverlayTexture.update(We),Ke.debugOverlayTexture.bind(ct.LINEAR,ct.CLAMP_TO_EDGE)}(p,ze);const Oe=k._tileDebugTextBuffer||p.debugBuffer,Ve=k._tileDebugTextIndexBuffer||p.quadTriangleIndexBuffer,Ue=k._tileDebugTextSegments||p.debugSegments;$.draw(g,b.TRIANGLES,q,ie,l.ColorMode.alphaBlended,l.CullFaceMode.disabled,$u(O,l.Color.transparent,Re),de,Oe,Ve,Ue,null,null,null,[k._globeTileDebugTextBuffer])}function Gm(p,s,d,g){Pl(p,0,s+d/2,p.transform.width,d,g)}function Uu(p,s,d,g){Pl(p,s-d/2,0,d,p.transform.height,g)}function Pl(p,s,d,g,_,b){const I=p.context,M=I.gl;M.enable(M.SCISSOR_TEST),M.scissor(s*l.exported.devicePixelRatio,d*l.exported.devicePixelRatio,g*l.exported.devicePixelRatio,_*l.exported.devicePixelRatio),I.clear({color:b}),M.disable(M.SCISSOR_TEST)}const Wm=l.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:qm}=Wm;function Ha(p,s,d,g){p.emplaceBack(s,d,g)}class Vu{constructor(s){this.vertexArray=new l.StructArrayLayout3f12,this.indices=new l.StructArrayLayout3ui6,Ha(this.vertexArray,-1,-1,1),Ha(this.vertexArray,1,-1,1),Ha(this.vertexArray,-1,1,1),Ha(this.vertexArray,1,1,1),Ha(this.vertexArray,-1,-1,-1),Ha(this.vertexArray,1,-1,-1),Ha(this.vertexArray,-1,1,-1),Ha(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=s.createVertexBuffer(this.vertexArray,qm),this.indexBuffer=s.createIndexBuffer(this.indices),this.segment=l.SegmentVector.simpleSegment(0,0,36,12)}}function zo(p,s,d,g,_,b){const I=p.gl,M=s.paint.get("sky-atmosphere-color"),O=s.paint.get("sky-atmosphere-halo-color"),$=s.paint.get("sky-atmosphere-sun-intensity"),k=((q,ie,le,de,ce)=>({u_matrix_3f:q,u_sun_direction:ie,u_sun_intensity:le,u_color_tint_r:[de.r,de.g,de.b,de.a],u_color_tint_m:[ce.r,ce.g,ce.b,ce.a],u_luminance:5e-5}))(l.fromMat4(l.create$1(),g),_,$,M,O);I.framebufferTexture2D(I.FRAMEBUFFER,I.COLOR_ATTACHMENT0,I.TEXTURE_CUBE_MAP_POSITIVE_X+b,s.skyboxTexture,0),d.draw(p,I.TRIANGLES,l.DepthMode.disabled,l.StencilMode.disabled,l.ColorMode.unblended,l.CullFaceMode.frontCW,k,"skyboxCapture",s.skyboxGeometry.vertexBuffer,s.skyboxGeometry.indexBuffer,s.skyboxGeometry.segment)}const Oc=l.createLayout([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class Zm{constructor(s){const d=new l.StructArrayLayout5f20;d.emplaceBack(-1,1,1,0,0),d.emplaceBack(1,1,1,1,0),d.emplaceBack(1,-1,1,1,1),d.emplaceBack(-1,-1,1,0,1);const g=new l.StructArrayLayout3ui6;g.emplaceBack(0,1,2),g.emplaceBack(2,3,0),this.vertexBuffer=s.createVertexBuffer(d,Oc.members),this.indexBuffer=s.createIndexBuffer(g),this.segments=l.SegmentVector.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const Gs={symbol:function(p,s,d,g,_){if(p.renderPass!=="translucent")return;const b=l.StencilMode.disabled,I=p.colorModeForRenderPass();d.layout.get("text-variable-anchor")&&function(M,O,$,k,q,ie,le){const de=O.transform,ce=q==="map",me=ie==="map";for(const X of M){const se=k.getTile(X),xe=se.getBucket($);if(!xe||!xe.text||!xe.text.segments.get().length)continue;const be=l.evaluateSizeForZoom(xe.textSizeData,de.zoom),Re=Xn(X,xe.getProjection(),de),ze=de.calculatePixelsToTileUnitsMatrix(se),Oe=tt(Re,se.tileID.canonical,me,ce,de,xe.getProjection(),ze),Ve=$.layout.get("icon-text-fit")!=="none"&&xe.hasIconData();if(be){const Ue=Math.pow(2,de.zoom-se.tileID.overscaledZ);Y0(xe,ce,me,le,l.symbolSize,de,Oe,X,Ue,be,Ve)}}}(g,p,d,s,d.layout.get("text-rotation-alignment"),d.layout.get("text-pitch-alignment"),_),d.paint.get("icon-opacity").constantOr(1)!==0&&Um(p,s,d,g,!1,d.paint.get("icon-translate"),d.paint.get("icon-translate-anchor"),d.layout.get("icon-rotation-alignment"),d.layout.get("icon-pitch-alignment"),d.layout.get("icon-keep-upright"),b,I),d.paint.get("text-opacity").constantOr(1)!==0&&Um(p,s,d,g,!0,d.paint.get("text-translate"),d.paint.get("text-translate-anchor"),d.layout.get("text-rotation-alignment"),d.layout.get("text-pitch-alignment"),d.layout.get("text-keep-upright"),b,I),s.map.showCollisionBoxes&&(Ac(p,s,d,g,d.paint.get("text-translate"),d.paint.get("text-translate-anchor"),!0),Ac(p,s,d,g,d.paint.get("icon-translate"),d.paint.get("icon-translate-anchor"),!1))},circle:function(p,s,d,g){if(p.renderPass!=="translucent")return;const _=d.paint.get("circle-opacity"),b=d.paint.get("circle-stroke-width"),I=d.paint.get("circle-stroke-opacity"),M=d.layout.get("circle-sort-key").constantOr(1)!==void 0;if(_.constantOr(1)===0&&(b.constantOr(1)===0||I.constantOr(1)===0))return;const O=p.context,$=O.gl,k=p.transform,q=p.depthModeForSublayer(0,l.DepthMode.ReadOnly),ie=l.StencilMode.disabled,le=p.colorModeForRenderPass(),de=k.projection.name==="globe",ce=[l.mercatorXfromLng(k.center.lng),l.mercatorYfromLat(k.center.lat)],me=[];for(let se=0;se<g.length;se++){const xe=g[se],be=s.getTile(xe),Re=be.getBucket(d);if(!Re||Re.projection.name!==k.projection.name)continue;const ze=Re.programConfigurations.get(d.id),Oe=Zh(d);de&&Oe.push("PROJECTION_GLOBE_VIEW");const Ve=p.useProgram("circle",ze,Oe),Ue=Re.layoutVertexBuffer,Ke=Re.globeExtVertexBuffer,wt=Re.indexBuffer,We=k.projection.createInversionMatrix(k,xe.canonical),ct={programConfiguration:ze,program:Ve,layoutVertexBuffer:Ue,globeExtVertexBuffer:Ke,indexBuffer:wt,uniformValues:qh(p,xe,be,We,ce,d),tile:be};if(M){const Qe=Re.segments.get();for(const xt of Qe)me.push({segments:new l.SegmentVector([xt]),sortKey:xt.sortKey,state:ct})}else me.push({segments:Re.segments,sortKey:0,state:ct})}M&&me.sort((se,xe)=>se.sortKey-xe.sortKey);const X={useDepthForOcclusion:!de};for(const se of me){const{programConfiguration:xe,program:be,layoutVertexBuffer:Re,globeExtVertexBuffer:ze,indexBuffer:Oe,uniformValues:Ve,tile:Ue}=se.state,Ke=se.segments;p.terrain&&p.terrain.setupElevationDraw(Ue,be,X),p.prepareDrawProgram(O,be,Ue.tileID.toUnwrapped()),be.draw(O,$.TRIANGLES,q,ie,le,l.CullFaceMode.disabled,Ve,d.id,Re,Oe,Ke,d.paint,k.zoom,xe,[ze])}},heatmap:function(p,s,d,g){if(d.paint.get("heatmap-opacity")!==0)if(p.renderPass==="offscreen"){const _=p.context,b=_.gl,I=l.StencilMode.disabled,M=new l.ColorMode([b.ONE,b.ONE],l.Color.transparent,[!0,!0,!0,!0]);(function(le,de,ce,me){const X=le.gl,se=de.width*me,xe=de.height*me;le.activeTexture.set(X.TEXTURE1),le.viewport.set([0,0,se,xe]);let be=ce.heatmapFbo;if(!be||be&&(be.width!==se||be.height!==xe)){be&&be.destroy();const Re=X.createTexture();X.bindTexture(X.TEXTURE_2D,Re),X.texParameteri(X.TEXTURE_2D,X.TEXTURE_WRAP_S,X.CLAMP_TO_EDGE),X.texParameteri(X.TEXTURE_2D,X.TEXTURE_WRAP_T,X.CLAMP_TO_EDGE),X.texParameteri(X.TEXTURE_2D,X.TEXTURE_MIN_FILTER,X.LINEAR),X.texParameteri(X.TEXTURE_2D,X.TEXTURE_MAG_FILTER,X.LINEAR),be=ce.heatmapFbo=le.createFramebuffer(se,xe,!1),function(ze,Oe,Ve,Ue,Ke,wt){const We=ze.gl;We.texImage2D(We.TEXTURE_2D,0,ze.isWebGL2&&ze.extRenderToTextureHalfFloat?We.RGBA16F:We.RGBA,Ke,wt,0,We.RGBA,ze.extRenderToTextureHalfFloat?ze.isWebGL2?We.HALF_FLOAT:ze.extTextureHalfFloat.HALF_FLOAT_OES:We.UNSIGNED_BYTE,null),Ue.colorAttachment.set(Ve)}(le,0,Re,be,se,xe)}else X.bindTexture(X.TEXTURE_2D,be.colorAttachment.get()),le.bindFramebuffer.set(be.framebuffer)})(_,p,d,p.transform.projection.name==="globe"?.5:.25),_.clear({color:l.Color.transparent});const O=p.transform,$=O.projection.name==="globe",k=$?["PROJECTION_GLOBE_VIEW"]:null,q=$?l.CullFaceMode.frontCCW:l.CullFaceMode.disabled,ie=[l.mercatorXfromLng(O.center.lng),l.mercatorYfromLat(O.center.lat)];for(let le=0;le<g.length;le++){const de=g[le];if(s.hasRenderableParent(de))continue;const ce=s.getTile(de),me=ce.getBucket(d);if(!me||me.projection.name!==O.projection.name)continue;const X=me.programConfigurations.get(d.id),se=p.useProgram("heatmap",X,k),{zoom:xe}=p.transform;p.terrain&&p.terrain.setupElevationDraw(ce,se),p.prepareDrawProgram(_,se,de.toUnwrapped());const be=O.projection.createInversionMatrix(O,de.canonical);se.draw(_,b.TRIANGLES,l.DepthMode.disabled,I,M,q,Bm(p,de,ce,be,ie,xe,d.paint.get("heatmap-intensity")),d.id,me.layoutVertexBuffer,me.indexBuffer,me.segments,d.paint,p.transform.zoom,X,$?[me.globeExtVertexBuffer]:null)}_.viewport.set([0,0,p.width,p.height])}else p.renderPass==="translucent"&&(p.context.setColorMode(p.colorModeForRenderPass()),function(_,b){const I=_.context,M=I.gl,O=b.heatmapFbo;if(!O)return;I.activeTexture.set(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,O.colorAttachment.get()),I.activeTexture.set(M.TEXTURE1);let $=b.colorRampTexture;$||($=b.colorRampTexture=new l.Texture(I,b.colorRamp,M.RGBA)),$.bind(M.LINEAR,M.CLAMP_TO_EDGE),_.useProgram("heatmapTexture").draw(I,M.TRIANGLES,l.DepthMode.disabled,l.StencilMode.disabled,_.colorModeForRenderPass(),l.CullFaceMode.disabled,((k,q,ie,le)=>({u_image:0,u_color_ramp:1,u_opacity:q.paint.get("heatmap-opacity")}))(0,b),b.id,_.viewportBuffer,_.quadTriangleIndexBuffer,_.viewportSegments,b.paint,_.transform.zoom)}(p,d))},line:function(p,s,d,g){if(p.renderPass!=="translucent")return;const _=d.paint.get("line-opacity"),b=d.paint.get("line-width");if(_.constantOr(1)===0||b.constantOr(1)===0)return;const I=p.depthModeForSublayer(0,l.DepthMode.ReadOnly),M=p.colorModeForRenderPass(),O=p.terrain&&p.terrain.renderingToTexture?1:l.exported.devicePixelRatio,$=d.paint.get("line-dasharray"),k=$.constantOr(1),q=d.layout.get("line-cap"),ie=d.paint.get("line-pattern"),le=ie.constantOr(1),de=d.paint.get("line-gradient"),ce=le?"linePattern":"line",me=p.context,X=me.gl,se=(be=>{const Re=[];Pc(be)&&Re.push("RENDER_LINE_DASH"),be.paint.get("line-gradient")&&Re.push("RENDER_LINE_GRADIENT");const ze=be.paint.get("line-trim-offset");ze[0]===0&&ze[1]===0||Re.push("RENDER_LINE_TRIM_OFFSET");const Oe=be.paint.get("line-pattern").constantOr(1),Ve=be.paint.get("line-opacity").constantOr(1)!==1;return!Oe&&Ve&&Re.push("RENDER_LINE_ALPHA_DISCARD"),Re})(d);let xe=se.includes("RENDER_LINE_ALPHA_DISCARD");p.terrain&&p.terrain.clipOrMaskOverlapStencilType()&&(xe=!1);for(const be of g){const Re=s.getTile(be);if(le&&!Re.patternsLoaded())continue;const ze=Re.getBucket(d);if(!ze)continue;p.prepareDrawTile();const Oe=ze.programConfigurations.get(d.id),Ve=p.useProgram(ce,Oe,se),Ue=ie.constantOr(null);if(Ue&&Re.imageAtlas){const lt=Re.imageAtlas.patternPositions[Ue.toString()];lt&&Oe.setConstantPatternPositions(lt)}const Ke=$.constantOr(null),wt=q.constantOr(null);if(!le&&Ke&&wt&&Re.lineAtlas){const lt=Re.lineAtlas.getDash(Ke,wt);lt&&Oe.setConstantPatternPositions(lt)}let[We,ct]=d.paint.get("line-trim-offset");(wt==="round"||wt==="square")&&We!==ct&&(We===0&&(We-=1),ct===1&&(ct+=1));const Qe=p.terrain?be.projMatrix:null,xt=le?Mc(p,Re,d,Qe,O):X0(p,Re,d,Qe,ze.lineClipsArray.length,O,[We,ct]);if(de){const lt=ze.gradients[d.id];let It=lt.texture;if(d.gradientVersion!==lt.version){let mt=256;if(d.stepInterpolant){const Pt=s.getSource().maxzoom,dn=be.canonical.z===Pt?Math.ceil(1<<p.transform.maxZoom-be.canonical.z):1;mt=l.clamp(l.nextPowerOfTwo(ze.maxLineLength/l.EXTENT*1024*dn),256,me.maxTextureSize)}lt.gradient=l.renderColorRamp({expression:d.gradientExpression(),evaluationKey:"lineProgress",resolution:mt,image:lt.gradient||void 0,clips:ze.lineClipsArray}),lt.texture?lt.texture.update(lt.gradient):lt.texture=new l.Texture(me,lt.gradient,X.RGBA),lt.version=d.gradientVersion,It=lt.texture}me.activeTexture.set(X.TEXTURE1),It.bind(d.stepInterpolant?X.NEAREST:X.LINEAR,X.CLAMP_TO_EDGE)}k&&(me.activeTexture.set(X.TEXTURE0),Re.lineAtlasTexture.bind(X.LINEAR,X.REPEAT),Oe.updatePaintBuffers()),le&&(me.activeTexture.set(X.TEXTURE0),Re.imageAtlasTexture.bind(X.LINEAR,X.CLAMP_TO_EDGE),Oe.updatePaintBuffers()),p.prepareDrawProgram(me,Ve,be.toUnwrapped());const Xe=lt=>{Ve.draw(me,X.TRIANGLES,I,lt,M,l.CullFaceMode.disabled,xt,d.id,ze.layoutVertexBuffer,ze.indexBuffer,ze.segments,d.paint,p.transform.zoom,Oe,[ze.layoutVertexBuffer2])};if(xe){const lt=p.stencilModeForClipping(be).ref;lt===0&&p.terrain&&me.clear({stencil:0});const It={func:X.EQUAL,mask:255};xt.u_alpha_discard_threshold=.8,Xe(new l.StencilMode(It,lt,255,X.KEEP,X.KEEP,X.INVERT)),xt.u_alpha_discard_threshold=0,Xe(new l.StencilMode(It,lt,255,X.KEEP,X.KEEP,X.KEEP))}else Xe(p.stencilModeForClipping(be))}xe&&(p.resetStencilClippingMasks(),p.terrain&&me.clear({stencil:0}))},fill:function(p,s,d,g){const _=d.paint.get("fill-color"),b=d.paint.get("fill-opacity");if(b.constantOr(1)===0)return;const I=p.colorModeForRenderPass(),M=d.paint.get("fill-pattern"),O=p.opaquePassEnabledForLayer()&&!M.constantOr(1)&&_.constantOr(l.Color.transparent).a===1&&b.constantOr(0)===1?"opaque":"translucent";if(p.renderPass===O){const $=p.depthModeForSublayer(1,p.renderPass==="opaque"?l.DepthMode.ReadWrite:l.DepthMode.ReadOnly);Vm(p,s,d,g,$,I,!1)}if(p.renderPass==="translucent"&&d.paint.get("fill-antialias")){const $=p.depthModeForSublayer(d.getPaintProperty("fill-outline-color")?2:0,l.DepthMode.ReadOnly);Vm(p,s,d,g,$,I,!0)}},"fill-extrusion":function(p,s,d,g){const _=d.paint.get("fill-extrusion-opacity");if(_!==0&&p.renderPass==="translucent"){const b=new l.DepthMode(p.context.gl.LEQUAL,l.DepthMode.ReadWrite,p.depthRangeFor3D);if(_!==1||d.paint.get("fill-extrusion-pattern").constantOr(1))ju(p,s,d,g,b,l.StencilMode.disabled,l.ColorMode.disabled),ju(p,s,d,g,b,p.stencilModeFor3D(),p.colorModeForRenderPass()),p.resetStencilClippingMasks();else{const I=p.colorModeForRenderPass();ju(p,s,d,g,b,l.StencilMode.disabled,I)}}},hillshade:function(p,s,d,g){if(p.renderPass!=="offscreen"&&p.renderPass!=="translucent")return;const _=p.context,b=p.depthModeForSublayer(0,l.DepthMode.ReadOnly),I=p.colorModeForRenderPass(),M=p.terrain&&p.terrain.renderingToTexture,[O,$]=p.renderPass!=="translucent"||M?[{},g]:p.stencilConfigForOverlap(g);for(const k of $){const q=s.getTile(k);if(q.needsHillshadePrepare&&p.renderPass==="offscreen")Dm(p,q,d,b,l.StencilMode.disabled,I);else if(p.renderPass==="translucent"){const ie=M&&p.terrain?p.terrain.stencilModeForRTTOverlap(k):O[k.overscaledZ];zm(p,k,q,d,b,ie,I)}}_.viewport.set([0,0,p.width,p.height]),p.resetStencilClippingMasks()},raster:function(p,s,d,g,_,b){if(p.renderPass!=="translucent"||d.paint.get("raster-opacity")===0||!g.length)return;const I=p.context,M=I.gl,O=s.getSource(),$=p.useProgram("raster"),k=p.colorModeForRenderPass(),q=p.terrain&&p.terrain.renderingToTexture,[ie,le]=O instanceof Yt||q?[{},g]:p.stencilConfigForOverlap(g),de=le[le.length-1].overscaledZ,ce=!p.options.moving;for(const me of le){const X=q?l.DepthMode.disabled:p.depthModeForSublayer(me.overscaledZ-de,d.paint.get("raster-opacity")===1?l.DepthMode.ReadWrite:l.DepthMode.ReadOnly,M.LESS),se=me.toUnwrapped(),xe=s.getTile(me);if(q&&(!xe||!xe.hasData()))continue;const be=q?me.projMatrix:p.transform.calculateProjMatrix(se,ce),Re=p.terrain&&q?p.terrain.stencilModeForRTTOverlap(me):ie[me.overscaledZ],ze=b?0:d.paint.get("raster-fade-duration");xe.registerFadeDuration(ze);const Oe=s.findLoadedParent(me,0),Ve=Uh(xe,Oe,s,p.transform,ze);let Ue,Ke;p.terrain&&p.terrain.prepareDrawTile();const wt=d.paint.get("raster-resampling")==="nearest"?M.NEAREST:M.LINEAR;I.activeTexture.set(M.TEXTURE0),xe.texture.bind(wt,M.CLAMP_TO_EDGE),I.activeTexture.set(M.TEXTURE1),Oe?(Oe.texture.bind(wt,M.CLAMP_TO_EDGE),Ue=Math.pow(2,Oe.tileID.overscaledZ-xe.tileID.overscaledZ),Ke=[xe.tileID.canonical.x*Ue%1,xe.tileID.canonical.y*Ue%1]):xe.texture.bind(wt,M.CLAMP_TO_EDGE),xe.texture.useMipmap&&I.extTextureFilterAnisotropic&&p.transform.pitch>20&&M.texParameterf(M.TEXTURE_2D,I.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,I.extTextureFilterAnisotropicMax);const We=Yh(be,Ke||[0,0],Ue||1,Ve,d,O instanceof Yt?O.perspectiveTransform:[0,0]);if(p.prepareDrawProgram(I,$,se),O instanceof Yt)O.boundsBuffer&&O.boundsSegments&&$.draw(I,M.TRIANGLES,X,l.StencilMode.disabled,k,l.CullFaceMode.disabled,We,d.id,O.boundsBuffer,p.quadTriangleIndexBuffer,O.boundsSegments);else{const{tileBoundsBuffer:ct,tileBoundsIndexBuffer:Qe,tileBoundsSegments:xt}=p.getTileBoundsBuffers(xe);$.draw(I,M.TRIANGLES,X,Re,k,l.CullFaceMode.disabled,We,d.id,ct,Qe,xt)}}p.resetStencilClippingMasks()},background:function(p,s,d,g){const _=d.paint.get("background-color"),b=d.paint.get("background-opacity");if(b===0)return;const I=p.context,M=I.gl,O=p.transform,$=O.tileSize,k=d.paint.get("background-pattern");if(p.isPatternMissing(k))return;const q=!k&&_.a===1&&b===1&&p.opaquePassEnabledForLayer()?"opaque":"translucent";if(p.renderPass!==q)return;const ie=l.StencilMode.disabled,le=p.depthModeForSublayer(0,q==="opaque"?l.DepthMode.ReadWrite:l.DepthMode.ReadOnly),de=p.colorModeForRenderPass(),ce=p.useProgram(k?"backgroundPattern":"background");let me,X=g;X||(me=p.getBackgroundTiles(),X=Object.values(me).map(se=>se.tileID)),k&&(I.activeTexture.set(M.TEXTURE0),p.imageManager.bind(p.context));for(const se of X){const xe=se.toUnwrapped(),be=g?se.projMatrix:p.transform.calculateProjMatrix(xe);p.prepareDrawTile();const Re=s?s.getTile(se):me?me[se.key]:new l.Tile(se,$,O.zoom,p),ze=k?K0(be,b,p,k,{tileID:se,tileSize:$}):Qh(be,b,_);p.prepareDrawProgram(I,ce,xe);const{tileBoundsBuffer:Oe,tileBoundsIndexBuffer:Ve,tileBoundsSegments:Ue}=p.getTileBoundsBuffers(Re);ce.draw(I,M.TRIANGLES,le,ie,de,l.CullFaceMode.disabled,ze,d.id,Oe,Ve,Ue)}},sky:function(p,s,d){const g=p.transform,_=g.projection.name==="mercator"||g.projection.name==="globe"?1:l.smoothstep(7,8,g.zoom),b=d.paint.get("sky-opacity")*_;if(b===0)return;const I=p.context,M=d.paint.get("sky-type"),O=new l.DepthMode(I.gl.LEQUAL,l.DepthMode.ReadOnly,[0,1]),$=p.frameCounter/1e3%1;M==="atmosphere"?p.renderPass==="offscreen"?d.needsSkyboxCapture(p)&&(function(k,q,ie,le){const de=k.context,ce=de.gl;let me=q.skyboxFbo;if(!me){me=q.skyboxFbo=de.createFramebuffer(32,32,!1),q.skyboxGeometry=new Vu(de),q.skyboxTexture=de.gl.createTexture(),ce.bindTexture(ce.TEXTURE_CUBE_MAP,q.skyboxTexture),ce.texParameteri(ce.TEXTURE_CUBE_MAP,ce.TEXTURE_WRAP_S,ce.CLAMP_TO_EDGE),ce.texParameteri(ce.TEXTURE_CUBE_MAP,ce.TEXTURE_WRAP_T,ce.CLAMP_TO_EDGE),ce.texParameteri(ce.TEXTURE_CUBE_MAP,ce.TEXTURE_MIN_FILTER,ce.LINEAR),ce.texParameteri(ce.TEXTURE_CUBE_MAP,ce.TEXTURE_MAG_FILTER,ce.LINEAR);for(let be=0;be<6;++be)ce.texImage2D(ce.TEXTURE_CUBE_MAP_POSITIVE_X+be,0,ce.RGBA,32,32,0,ce.RGBA,ce.UNSIGNED_BYTE,null)}de.bindFramebuffer.set(me.framebuffer),de.viewport.set([0,0,32,32]);const X=q.getCenter(k,!0),se=k.useProgram("skyboxCapture"),xe=new Float64Array(16);l.identity(xe),l.rotateY(xe,xe,.5*-Math.PI),zo(de,q,se,xe,X,0),l.identity(xe),l.rotateY(xe,xe,.5*Math.PI),zo(de,q,se,xe,X,1),l.identity(xe),l.rotateX(xe,xe,.5*-Math.PI),zo(de,q,se,xe,X,2),l.identity(xe),l.rotateX(xe,xe,.5*Math.PI),zo(de,q,se,xe,X,3),l.identity(xe),zo(de,q,se,xe,X,4),l.identity(xe),l.rotateY(xe,xe,Math.PI),zo(de,q,se,xe,X,5),de.viewport.set([0,0,k.width,k.height])}(p,d),d.markSkyboxValid(p)):p.renderPass==="sky"&&function(k,q,ie,le,de){const ce=k.context,me=ce.gl,X=k.transform,se=k.useProgram("skybox");ce.activeTexture.set(me.TEXTURE0),me.bindTexture(me.TEXTURE_CUBE_MAP,q.skyboxTexture);const xe=((be,Re,ze,Oe,Ve)=>({u_matrix:be,u_sun_direction:Re,u_cubemap:0,u_opacity:Oe,u_temporal_offset:Ve}))(X.skyboxMatrix,q.getCenter(k,!1),0,le,de);k.prepareDrawProgram(ce,se),se.draw(ce,me.TRIANGLES,ie,l.StencilMode.disabled,k.colorModeForRenderPass(),l.CullFaceMode.backCW,xe,"skybox",q.skyboxGeometry.vertexBuffer,q.skyboxGeometry.indexBuffer,q.skyboxGeometry.segment)}(p,d,O,b,$):M==="gradient"&&p.renderPass==="sky"&&function(k,q,ie,le,de){const ce=k.context,me=ce.gl,X=k.transform,se=k.useProgram("skyboxGradient");q.skyboxGeometry||(q.skyboxGeometry=new Vu(ce)),ce.activeTexture.set(me.TEXTURE0);let xe=q.colorRampTexture;xe||(xe=q.colorRampTexture=new l.Texture(ce,q.colorRamp,me.RGBA)),xe.bind(me.LINEAR,me.CLAMP_TO_EDGE);const be=((Re,ze,Oe,Ve,Ue)=>({u_matrix:Re,u_color_ramp:0,u_center_direction:ze,u_radius:l.degToRad(Oe),u_opacity:Ve,u_temporal_offset:Ue}))(X.skyboxMatrix,q.getCenter(k,!1),q.paint.get("sky-gradient-radius"),le,de);k.prepareDrawProgram(ce,se),se.draw(ce,me.TRIANGLES,ie,l.StencilMode.disabled,k.colorModeForRenderPass(),l.CullFaceMode.backCW,be,"skyboxGradient",q.skyboxGeometry.vertexBuffer,q.skyboxGeometry.indexBuffer,q.skyboxGeometry.segment)}(p,d,O,b,$)},debug:function(p,s,d){for(let g=0;g<d.length;g++)n_(p,s,d[g])},custom:function(p,s,d,g){const _=p.context,b=d.implementation;if(!p.transform.projection.unsupportedLayers||!p.transform.projection.unsupportedLayers.includes("custom")||p.terrain&&(p.terrain.renderingToTexture||p.renderPass==="offscreen")&&d.isLayerDraped()){if(p.renderPass==="offscreen"){const I=b.prerender;if(I){if(p.setCustomLayerDefaults(),_.setColorMode(p.colorModeForRenderPass()),p.transform.projection.name==="globe"){const M=p.transform.pointMerc;I.call(b,_.gl,p.transform.customLayerMatrix(),p.transform.getProjection(),p.transform.globeToMercatorMatrix(),l.globeToMercatorTransition(p.transform.zoom),[M.x,M.y],p.transform.pixelsPerMeterRatio)}else I.call(b,_.gl,p.transform.customLayerMatrix());_.setDirty(),p.setBaseState()}}else if(p.renderPass==="translucent"){if(p.terrain&&p.terrain.renderingToTexture){const M=b.renderToTile;if(M){const O=g[0].canonical,$=new l.MercatorCoordinate(O.x+g[0].wrap*(1<<O.z),O.y,O.z);_.setDepthMode(l.DepthMode.disabled),_.setStencilMode(l.StencilMode.disabled),_.setColorMode(p.colorModeForRenderPass()),p.setCustomLayerDefaults(),M.call(b,_.gl,$),_.setDirty(),p.setBaseState()}return}p.setCustomLayerDefaults(),_.setColorMode(p.colorModeForRenderPass()),_.setStencilMode(l.StencilMode.disabled);const I=b.renderingMode==="3d"?new l.DepthMode(p.context.gl.LEQUAL,l.DepthMode.ReadWrite,p.depthRangeFor3D):p.depthModeForSublayer(0,l.DepthMode.ReadOnly);if(_.setDepthMode(I),p.transform.projection.name==="globe"){const M=p.transform.pointMerc;b.render(_.gl,p.transform.customLayerMatrix(),p.transform.getProjection(),p.transform.globeToMercatorMatrix(),l.globeToMercatorTransition(p.transform.zoom),[M.x,M.y],p.transform.pixelsPerMeterRatio)}else b.render(_.gl,p.transform.customLayerMatrix());_.setDirty(),p.setBaseState(),_.bindFramebuffer.set(null)}}else l.warnOnce("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")}};class Al{constructor(s,d,g=!1){this.context=new Ne(s,g),this.transform=d,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=l.SourceCache.maxUnderzooming+l.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}updateTerrain(s,d){const g=!!s&&!!s.terrain&&this.transform.projection.supportsTerrain;if(!(g||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new Hh(this,s));const _=this._terrain;this.transform.elevation=g?_:null,_.update(s,this.transform,d)}_updateFog(s){const d=s.fog;if(!d||this.transform.projection.name==="globe"||d.getOpacity(this.transform.pitch)<1||d.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[g,_]=d.getFovAdjustedRange(this.transform._fov);if(g>_)return void(this.transform.fogCullDistSq=null);const b=g+.78*(_-g);this.transform.fogCullDistSq=b*b}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}resize(s,d){if(this.width=s*l.exported.devicePixelRatio,this.height=d*l.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const g of this.style.order)this.style._layers[g].resize()}setup(){const s=this.context,d=new l.StructArrayLayout2i4;d.emplaceBack(0,0),d.emplaceBack(l.EXTENT,0),d.emplaceBack(0,l.EXTENT),d.emplaceBack(l.EXTENT,l.EXTENT),this.tileExtentBuffer=s.createVertexBuffer(d,l.posAttributes.members),this.tileExtentSegments=l.SegmentVector.simpleSegment(0,0,4,2);const g=new l.StructArrayLayout2i4;g.emplaceBack(0,0),g.emplaceBack(l.EXTENT,0),g.emplaceBack(0,l.EXTENT),g.emplaceBack(l.EXTENT,l.EXTENT),this.debugBuffer=s.createVertexBuffer(g,l.posAttributes.members),this.debugSegments=l.SegmentVector.simpleSegment(0,0,4,5);const _=new l.StructArrayLayout2i4;_.emplaceBack(-1,-1),_.emplaceBack(1,-1),_.emplaceBack(-1,1),_.emplaceBack(1,1),this.viewportBuffer=s.createVertexBuffer(_,l.posAttributes.members),this.viewportSegments=l.SegmentVector.simpleSegment(0,0,4,2);const b=new l.StructArrayLayout4i8;b.emplaceBack(0,0,0,0),b.emplaceBack(l.EXTENT,0,l.EXTENT,0),b.emplaceBack(0,l.EXTENT,0,l.EXTENT),b.emplaceBack(l.EXTENT,l.EXTENT,l.EXTENT,l.EXTENT),this.mercatorBoundsBuffer=s.createVertexBuffer(b,l.boundsAttributes.members),this.mercatorBoundsSegments=l.SegmentVector.simpleSegment(0,0,4,2);const I=new l.StructArrayLayout3ui6;I.emplaceBack(0,1,2),I.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=s.createIndexBuffer(I);const M=new l.StructArrayLayout1ui2;for(const $ of[0,1,3,2,0])M.emplaceBack($);this.debugIndexBuffer=s.createIndexBuffer(M),this.emptyTexture=new l.Texture(s,new l.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),s.gl.RGBA),this.identityMat=l.create();const O=this.context.gl;this.stencilClearMode=new l.StencilMode({func:O.ALWAYS,mask:0},0,255,O.ZERO,O.ZERO,O.ZERO),this.loadTimeStamps.push(l.window.performance.now()),this.atmosphereBuffer=new Zm(this.context)}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(s){return s._makeTileBoundsBuffers(this.context,this.transform.projection),s._tileBoundsBuffer?{tileBoundsBuffer:s._tileBoundsBuffer,tileBoundsIndexBuffer:s._tileBoundsIndexBuffer,tileBoundsSegments:s._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const s=this.context,d=s.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(s,d.TRIANGLES,l.DepthMode.disabled,this.stencilClearMode,l.ColorMode.disabled,l.CullFaceMode.disabled,Tc(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(s,d,g){if(!d||this.currentStencilSource===d.id||!s.isTileClipped()||!g||g.length===0)return;if(this._tileClippingMaskIDs&&!this.terrain){let M=!1;for(const O of g)if(this._tileClippingMaskIDs[O.key]===void 0){M=!0;break}if(!M)return}this.currentStencilSource=d.id;const _=this.context,b=_.gl;this.nextStencilID+g.length>256&&this.clearStencil(),_.setColorMode(l.ColorMode.disabled),_.setDepthMode(l.DepthMode.disabled);const I=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const M of g){const O=d.getTile(M),$=this._tileClippingMaskIDs[M.key]=this.nextStencilID++,{tileBoundsBuffer:k,tileBoundsIndexBuffer:q,tileBoundsSegments:ie}=this.getTileBoundsBuffers(O);I.draw(_,b.TRIANGLES,l.DepthMode.disabled,new l.StencilMode({func:b.ALWAYS,mask:0},$,255,b.KEEP,b.KEEP,b.REPLACE),l.ColorMode.disabled,l.CullFaceMode.disabled,Tc(M.projMatrix),"$clipping",k,q,ie)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const s=this.nextStencilID++,d=this.context.gl;return new l.StencilMode({func:d.NOTEQUAL,mask:255},s,255,d.KEEP,d.KEEP,d.REPLACE)}stencilModeForClipping(s){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(s);const d=this.context.gl;return new l.StencilMode({func:d.EQUAL,mask:255},this._tileClippingMaskIDs[s.key],0,d.KEEP,d.KEEP,d.REPLACE)}stencilConfigForOverlap(s){const d=this.context.gl,g=s.sort((I,M)=>M.overscaledZ-I.overscaledZ),_=g[g.length-1].overscaledZ,b=g[0].overscaledZ-_+1;if(b>1){this.currentStencilSource=void 0,this.nextStencilID+b>256&&this.clearStencil();const I={};for(let M=0;M<b;M++)I[M+_]=new l.StencilMode({func:d.GEQUAL,mask:255},M+this.nextStencilID,255,d.KEEP,d.KEEP,d.REPLACE);return this.nextStencilID+=b,[I,g]}return[{[_]:l.StencilMode.disabled},g]}colorModeForRenderPass(){const s=this.context.gl;return this._showOverdrawInspector?new l.ColorMode([s.CONSTANT_COLOR,s.ONE],new l.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?l.ColorMode.unblended:l.ColorMode.alphaBlended}depthModeForSublayer(s,d,g){if(!this.opaquePassEnabledForLayer())return l.DepthMode.disabled;const _=1-((1+this.currentLayer)*this.numSublayers+s)*this.depthEpsilon;return new l.DepthMode(g||this.context.gl.LEQUAL,d,[_,_])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(s,d){this.style=s,this.options=d,this.imageManager=s.imageManager,this.glyphManager=s.glyphManager,this.symbolFadeChange=s.placement.symbolFadeChange(l.exported.now()),this.imageManager.beginFrame();const g=this.style.order,_=this.style._sourceCaches;for(const $ in _){const k=_[$];k.used&&k.prepare(this.context)}const b={},I={},M={};for(const $ in _){const k=_[$];b[$]=k.getVisibleCoordinates(),I[$]=b[$].slice().reverse(),M[$]=k.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let $=0;$<g.length;$++)if(this.style._layers[g[$]].is3D()){this.opaquePassCutoff=$;break}if(this.terrain&&(this.terrain.updateTileBinding(M),this.opaquePassCutoff=0),this.transform.projection.name!=="globe"||this.globeSharedBuffers||(this.globeSharedBuffers=new l.GlobeSharedBuffers(this.context)),!l.isMapAuthenticated(this.context.gl))return;this.renderPass="offscreen";for(const $ of g){const k=this.style._layers[$],q=s._getLayerSourceCache(k);if(!k.hasOffscreenPass()||k.isHidden(this.transform.zoom))continue;const ie=q?I[q.id]:void 0;(k.type==="custom"||k.isSky()||ie&&ie.length)&&this.renderLayer(this,q,k,ie)}this.depthRangeFor3D=[0,1-(s.order.length+2)*this.numSublayers*this.depthEpsilon];const O=this.terrain;if(O&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&O.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:d.showOverdrawInspector?l.Color.black:l.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=d.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=g.length-1;this.currentLayer>=0;this.currentLayer--){const $=this.style._layers[g[this.currentLayer]],k=s._getLayerSourceCache($);if($.isSky())continue;const q=k?I[k.id]:void 0;this._renderTileClippingMasks($,k,q),this.renderLayer(this,k,$,q)}if(this.style.fog&&this.transform.projection.supportsFog&&function($,k){const q=$.context,ie=q.gl,le=$.transform,de=new l.DepthMode(ie.LEQUAL,l.DepthMode.ReadOnly,[0,1]),ce=$.useProgram("globeAtmosphere",null,le.projection.name==="globe"?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"]),me=l.globeToMercatorTransition(le.zoom),X=k.properties.get("color").toArray01(),se=k.properties.get("high-color").toArray01(),xe=k.properties.get("space-color").toArray01PremultipliedAlpha(),be=l.identity$1([]);l.rotateY$1(be,be,-l.degToRad(le._center.lng)),l.rotateX$1(be,be,l.degToRad(le._center.lat)),l.rotateZ$1(be,be,le.angle),l.rotateX$1(be,be,-le._pitch);const Re=l.fromQuat(new Float32Array(16),be),ze=l.mapValue(k.properties.get("star-intensity"),0,1,0,.25),Oe=5e-4,Ve=l.mapValue(k.properties.get("horizon-blend"),0,1,Oe,.25),Ue=l.globeUseCustomAntiAliasing($,q,le)&&Ve===Oe?le.worldSize/(2*Math.PI*1.025)-1:le.globeRadius,Ke=$.frameCounter/1e3%1,wt=l.length(le.globeCenterInViewSpace),We=Math.sqrt(Math.pow(wt,2)-Math.pow(Ue,2)),ct=Math.acos(We/wt),Qe=((Xe,lt,It,mt,Pt,dn,Rn,Qt,yn,Hn,Un,cn,ur,vr)=>({u_frustum_tl:Xe,u_frustum_tr:lt,u_frustum_br:It,u_frustum_bl:mt,u_horizon:Pt,u_transition:dn,u_fadeout_range:Rn,u_color:Qt,u_high_color:yn,u_space_color:Hn,u_star_intensity:Un,u_star_size:5*l.exported.devicePixelRatio,u_star_density:0,u_temporal_offset:cn,u_horizon_angle:ur,u_rotation_matrix:vr}))(le.frustumCorners.TL,le.frustumCorners.TR,le.frustumCorners.BR,le.frustumCorners.BL,le.frustumCorners.horizon,me,Ve,X,se,xe,ze,Ke,ct,Re);$.prepareDrawProgram(q,ce);const xt=$.atmosphereBuffer;xt&&ce.draw(q,ie.TRIANGLES,de,l.StencilMode.disabled,l.ColorMode.alphaBlended,l.CullFaceMode.backCW,Qe,"skybox",xt.vertexBuffer,xt.indexBuffer,xt.segments)}(this,this.style.fog),this.renderPass="sky",(l.globeToMercatorTransition(this.transform.zoom)>0||this.transform.projection.name!=="globe")&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<g.length;this.currentLayer++){const $=this.style._layers[g[this.currentLayer]],k=s._getLayerSourceCache($);$.isSky()&&this.renderLayer(this,k,$,k?I[k.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<g.length;){const $=this.style._layers[g[this.currentLayer]],k=s._getLayerSourceCache($);if($.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped($)){if($.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const q=k?($.type==="symbol"?M:I)[k.id]:void 0;this._renderTileClippingMasks($,k,k?b[k.id]:void 0),this.renderLayer(this,k,$,q),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let $=null;l.values(this.style._layers).forEach(k=>{const q=s._getLayerSourceCache(k);q&&!k.isHidden(this.transform.zoom)&&(!$||$.getSource().maxzoom<q.getSource().maxzoom)&&($=q)}),$&&this.options.showTileBoundaries&&Gs.debug(this,$,$.getVisibleCoordinates())}this.options.showPadding&&function($){const k=$.transform.padding;Gm($,$.transform.height-(k.top||0),3,Ml),Gm($,k.bottom||0,3,J0),Uu($,k.left||0,3,Q0),Uu($,$.transform.width-(k.right||0),3,e_);const q=$.transform.centerPoint;(function(ie,le,de,ce){Pl(ie,le-1,de-10,2,20,ce),Pl(ie,le-10,de-1,20,2,ce)})($,q.x,$.transform.height-q.y,t_)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(l.window.performance.now()),this.saveCanvasCopy())}renderLayer(s,d,g,_){g.isHidden(this.transform.zoom)||(g.type==="background"||g.type==="sky"||g.type==="custom"||_&&_.length)&&(this.id=g.id,this.gpuTimingStart(g),(!s.transform.projection.unsupportedLayers||!s.transform.projection.unsupportedLayers.includes(g.type)||s.terrain&&g.type==="custom")&&Gs[g.type](s,d,g,_,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(s){if(!this.options.gpuTiming)return;const d=this.context.extTimerQuery;let g=this.gpuTimers[s.id];g||(g=this.gpuTimers[s.id]={calls:0,cpuTime:0,query:d.createQueryEXT()}),g.calls++,d.beginQueryEXT(d.TIME_ELAPSED_EXT,g.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const s=this.context.extTimerQuery,d=s.createQueryEXT();this.deferredRenderGpuTimeQueries.push(d),s.beginQueryEXT(s.TIME_ELAPSED_EXT,d)}}gpuTimingDeferredRenderEnd(){if(!this.options.gpuTimingDeferredRender)return;const s=this.context.extTimerQuery;s.endQueryEXT(s.TIME_ELAPSED_EXT)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const s=this.context.extTimerQuery;s.endQueryEXT(s.TIME_ELAPSED_EXT)}collectGpuTimers(){const s=this.gpuTimers;return this.gpuTimers={},s}collectDeferredRenderGpuQueries(){const s=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],s}queryGpuTimers(s){const d={};for(const g in s){const _=s[g],b=this.context.extTimerQuery,I=b.getQueryObjectEXT(_.query,b.QUERY_RESULT_EXT)/1e6;b.deleteQueryEXT(_.query),d[g]=I}return d}queryGpuTimeDeferredRender(s){if(!this.options.gpuTimingDeferredRender)return 0;const d=this.context.extTimerQuery;let g=0;for(const _ of s)g+=d.getQueryObjectEXT(_,d.QUERY_RESULT_EXT)/1e6,d.deleteQueryEXT(_);return g}translatePosMatrix(s,d,g,_,b){if(!g[0]&&!g[1])return s;const I=b?_==="map"?this.transform.angle:0:_==="viewport"?-this.transform.angle:0;if(I){const $=Math.sin(I),k=Math.cos(I);g=[g[0]*k-g[1]*$,g[0]*$+g[1]*k]}const M=[b?g[0]:Ze(d,g[0],this.transform.zoom),b?g[1]:Ze(d,g[1],this.transform.zoom),0],O=new Float32Array(16);return l.translate(O,s,M),O}saveTileTexture(s){const d=this._tileTextures[s.size[0]];d?d.push(s):this._tileTextures[s.size[0]]=[s]}getTileTexture(s){const d=this._tileTextures[s];return d&&d.length>0?d.pop():null}isPatternMissing(s){return s===null||s!==void 0&&!this.imageManager.getPattern(s.toString())}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture}currentGlobalDefines(){const s=this.terrain&&this.terrain.renderingToTexture,d=this.terrain&&this.terrain.exaggeration()===0,g=this.style&&this.style.fog,_=[];return this.terrainRenderModeElevated()&&_.push("TERRAIN"),this.transform.projection.name==="globe"&&_.push("GLOBE"),d&&_.push("ZERO_EXAGGERATION"),g&&!s&&g.getOpacity(this.transform.pitch)!==0&&_.push("FOG"),s&&_.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&_.push("OVERDRAW_INSPECTOR"),_}useProgram(s,d,g){this.cache=this.cache||{};const _=g||[],b=this.currentGlobalDefines().concat(_),I=Jn.cacheKey(Fh[s],s,b,d);return this.cache[I]||(this.cache[I]=new Jn(this.context,s,Fh[s],d,ef[s],b)),this.cache[I]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const s=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(s.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=l.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new l.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.atmosphereBuffer&&this.atmosphereBuffer.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}prepareDrawProgram(s,d,g){if(this.terrain&&this.terrain.renderingToTexture)return;const _=this.style.fog;if(_){const b=_.getOpacity(this.transform.pitch),I=((M,O,$,k,q,ie,le,de,ce,me,X)=>{const se=M.transform,xe=O.properties.get("color").toArray01();xe[3]=k;const be=M.frameCounter/1e3%1;return{u_fog_matrix:$?se.calculateFogTileMatrix($):M.identityMat,u_fog_range:O.getFovAdjustedRange(se._fov),u_fog_color:xe,u_fog_horizon_blend:O.properties.get("horizon-blend"),u_fog_temporal_offset:be,u_frustum_tl:q,u_frustum_tr:ie,u_frustum_br:le,u_frustum_bl:de,u_globe_pos:ce,u_globe_radius:me,u_viewport:X,u_globe_transition:l.globeToMercatorTransition(se.zoom),u_is_globe:+(se.projection.name==="globe")}})(this,_,g,b,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*l.exported.devicePixelRatio,this.transform.height*l.exported.devicePixelRatio]);d.setFogUniformValues(s,I)}}setTileLoadedFlag(s){this.tileLoaded=s}saveCanvasCopy(){const s=this.canvasCopy();s&&(this.frameCopies.push(s),this.tileLoaded=!1)}canvasCopy(){const s=this.context.gl,d=s.createTexture();return s.bindTexture(s.TEXTURE_2D,d),s.copyTexImage2D(s.TEXTURE_2D,0,s.RGBA,0,0,s.drawingBufferWidth,s.drawingBufferHeight,0),d}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const s=this.style&&this.style.fog;return!!s&&s.getOpacity(this.transform.pitch)!==0}getBackgroundTiles(){const s=this._backgroundTiles,d=this._backgroundTiles={},g=this.transform.coveringTiles({tileSize:512});for(const _ of g)d[_.key]=s[_.key]||new l.Tile(_,512,this.transform.tileZoom,this);return d}clearBackgroundTiles(){this._backgroundTiles={}}}class Hu{constructor(s=0,d=0,g=0,_=0){if(isNaN(s)||s<0||isNaN(d)||d<0||isNaN(g)||g<0||isNaN(_)||_<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=s,this.bottom=d,this.left=g,this.right=_}interpolate(s,d,g){return d.top!=null&&s.top!=null&&(this.top=l.number(s.top,d.top,g)),d.bottom!=null&&s.bottom!=null&&(this.bottom=l.number(s.bottom,d.bottom,g)),d.left!=null&&s.left!=null&&(this.left=l.number(s.left,d.left,g)),d.right!=null&&s.right!=null&&(this.right=l.number(s.right,d.right,g)),this}getCenter(s,d){const g=l.clamp((this.left+s-this.right)/2,0,s),_=l.clamp((this.top+d-this.bottom)/2,0,d);return new l.Point(g,_)}equals(s){return this.top===s.top&&this.bottom===s.bottom&&this.left===s.left&&this.right===s.right}clone(){return new Hu(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Gu(p,s){const d=l.getColumn(p,3);l.fromQuat(p,s),l.setColumn(p,3,d)}function tr(p,s){const d=l.identity$1([]);return l.rotateZ$1(d,d,-s),l.rotateX$1(d,d,-p),d}function zc(p,s){const d=[p[0],p[1],0],g=[s[0],s[1],0];if(l.length(d)>=1e-15){const I=l.normalize([],d);l.scale$2(g,I,l.dot(g,I)),s[0]=g[0],s[1]=g[1]}const _=l.cross([],s,p);if(l.len(_)<1e-15)return null;const b=Math.atan2(-_[1],_[0]);return tr(Math.atan2(Math.sqrt(p[0]*p[0]+p[1]*p[1]),-p[2]),b)}class Xm{constructor(s,d){this.position=s,this.orientation=d}get position(){return this._position}set position(s){if(s){const d=s instanceof l.MercatorCoordinate?s:new l.MercatorCoordinate(s[0],s[1],s[2]);this._renderWorldCopies&&(d.x=l.wrap(d.x,0,1)),this._position=d}else this._position=null}lookAtPoint(s,d){if(this.orientation=null,!this.position)return;const g=this.position,_=this._elevation?this._elevation.getAtPointOrZero(l.MercatorCoordinate.fromLngLat(s)):0,b=l.MercatorCoordinate.fromLngLat(s,_),I=[b.x-g.x,b.y-g.y,b.z-g.z];d||(d=[0,0,1]),d[2]=Math.abs(d[2]),this.orientation=zc(I,d)}setPitchBearing(s,d){this.orientation=tr(l.degToRad(s),l.degToRad(-d))}}class Wu{constructor(s,d){this._transform=l.identity([]),this.orientation=d,this.position=s}get mercatorPosition(){const s=this.position;return new l.MercatorCoordinate(s[0],s[1],s[2])}get position(){const s=l.getColumn(this._transform,3);return[s[0],s[1],s[2]]}set position(s){var d;s&&l.setColumn(this._transform,3,[(d=s)[0],d[1],d[2],1])}get orientation(){return this._orientation}set orientation(s){this._orientation=s||l.identity$1([]),s&&Gu(this._transform,this._orientation)}getPitchBearing(){const s=this.forward(),d=this.right();return{bearing:Math.atan2(-d[1],d[0]),pitch:Math.atan2(Math.sqrt(s[0]*s[0]+s[1]*s[1]),-s[2])}}setPitchBearing(s,d){this._orientation=tr(s,d),Gu(this._transform,this._orientation)}forward(){const s=l.getColumn(this._transform,2);return[-s[0],-s[1],-s[2]]}up(){const s=l.getColumn(this._transform,1);return[-s[0],-s[1],-s[2]]}right(){const s=l.getColumn(this._transform,0);return[s[0],s[1],s[2]]}getCameraToWorld(s,d){const g=new Float64Array(16);return l.invert(g,this.getWorldToCamera(s,d)),g}getWorldToCameraPosition(s,d,g){const _=this.position;l.scale$2(_,_,-s);const b=new Float64Array(16);return l.fromScaling(b,[g,g,g]),l.translate(b,b,_),b[10]*=d,b}getWorldToCamera(s,d){const g=new Float64Array(16),_=new Float64Array(4),b=this.position;return l.conjugate(_,this._orientation),l.scale$2(b,b,-s),l.fromQuat(g,_),l.translate(g,g,b),g[1]*=-1,g[5]*=-1,g[9]*=-1,g[13]*=-1,g[8]*=d,g[9]*=d,g[10]*=d,g[11]*=d,g}getCameraToClipPerspective(s,d,g,_){const b=new Float64Array(16);return l.perspective(b,s,d,g,_),b}getDistanceToElevation(s,d=!1){const g=s===0?0:l.mercatorZfromAltitude(s,d?l.latFromMercatorY(this.position[1]):this.position[1]),_=this.forward();return(g-this.position[2])/_[2]}clone(){return new Wu([...this.position],[...this.orientation])}}function Rl(p,s){const d=qu(p.projection,p.zoom,p.width,p.height),g=function(b,I,M,O,$){const k=new l.LngLat(M.lng-180*Ga,M.lat),q=new l.LngLat(M.lng+180*Ga,M.lat),ie=b.project(k.lng,k.lat),le=b.project(q.lng,q.lat),de=-Math.atan2(le.y-ie.y,le.x-ie.x),ce=l.MercatorCoordinate.fromLngLat(M);ce.y=l.clamp(ce.y,-1+Ga,1-Ga);const me=ce.toLngLat(),X=b.project(me.lng,me.lat),se=l.MercatorCoordinate.fromLngLat(me);se.x+=Ga;const xe=se.toLngLat(),be=b.project(xe.lng,xe.lat),Re=Zu(be.x-X.x,be.y-X.y,de),ze=l.MercatorCoordinate.fromLngLat(me);ze.y+=Ga;const Oe=ze.toLngLat(),Ve=b.project(Oe.lng,Oe.lat),Ue=Zu(Ve.x-X.x,Ve.y-X.y,de),Ke=Math.abs(Re.x)/Math.abs(Ue.y),wt=l.identity([]);l.rotateZ(wt,wt,-de*(1-($?0:O)));const We=l.identity([]);return l.scale(We,We,[1,1-(1-Ke)*O,1]),We[4]=-Ue.x/Ue.y*O,l.rotateZ(We,We,de),l.multiply(We,wt,We),We}(p.projection,0,p.center,d,s),_=Km(p);return l.scale(g,g,[_,_,1]),g}function Km(p){const s=p.projection,d=qu(p.projection,p.zoom,p.width,p.height),g=Ym(s,p.center),_=Ym(s,l.LngLat.convert(s.center));return Math.pow(2,g*d+(1-d)*_)}function qu(p,s,d,g,_=1/0){const b=p.range;if(!b)return 0;const I=Math.min(_,Math.max(d,g)),M=Math.log(I/1024)/Math.LN2;return l.smoothstep(b[0]+M,b[1]+M,s)}const Ga=1/4e4;function Ym(p,s){const d=l.clamp(s.lat,-l.MAX_MERCATOR_LATITUDE,l.MAX_MERCATOR_LATITUDE),g=new l.LngLat(s.lng-180*Ga,d),_=new l.LngLat(s.lng+180*Ga,d),b=p.project(g.lng,d),I=p.project(_.lng,d),M=l.MercatorCoordinate.fromLngLat(g),O=l.MercatorCoordinate.fromLngLat(_),$=I.x-b.x,k=I.y-b.y,q=O.x-M.x,ie=O.y-M.y,le=Math.sqrt((q*q+ie*ie)/($*$+k*k));return Math.log(le)/Math.LN2}function Zu(p,s,d){const g=Math.cos(d),_=Math.sin(d);return{x:p*g-s*_,y:p*_+s*g}}class Ol{constructor(s,d,g,_,b,I,M){this.tileSize=512,this._renderWorldCopies=b===void 0||b,this._minZoom=s||0,this._maxZoom=d||22,this._minPitch=g??0,this._maxPitch=_??60,this.setProjection(I),this.setMaxBounds(M),this.width=0,this.height=0,this._center=new l.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new Hu,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new Wu,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1}clone(){const s=new Ol(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return s._elevation=this._elevation,s._centerAltitude=this._centerAltitude,s._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,s.tileSize=this.tileSize,s.mercatorFromTransition=this.mercatorFromTransition,s.width=this.width,s.height=this.height,s.cameraElevationReference=this.cameraElevationReference,s._center=this._center,s._setZoom(this.zoom),s._seaLevelZoom=this._seaLevelZoom,s.angle=this.angle,s._fov=this._fov,s._pitch=this._pitch,s._nearZ=this._nearZ,s._farZ=this._farZ,s._averageElevation=this._averageElevation,s._unmodified=this._unmodified,s._edgeInsets=this._edgeInsets.clone(),s._camera=this._camera.clone(),s._calcMatrices(),s.freezeTileCoverage=this.freezeTileCoverage,s.frustumCorners=this.frustumCorners,s}get elevation(){return this._elevation}set elevation(s){this._elevation!==s&&(this._elevation=s,this._updateCameraOnTerrain(),this._calcMatrices())}updateElevation(s,d=!1){const g=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(this._seaLevelZoom==null||g)&&this._updateCameraOnTerrain(),(s||g)&&this._constrainCamera(d),this._calcMatrices()}getProjection(){return l.pick(this.projection,["name","center","parallels"])}setProjection(s){this.projectionOptions=s||{name:"mercator"};const d=this.projection?this.getProjection():void 0;this.projection=l.getProjection(this.projectionOptions);const g=!w(d,this.getProjection());return g&&this._calcMatrices(),this.mercatorFromTransition=!1,g}setMercatorFromTransition(){const s=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=l.getProjection({name:"mercator"});const d=s!==this.projection.name;return d&&this._calcMatrices(),d}get minZoom(){return this._minZoom}set minZoom(s){this._minZoom!==s&&(this._minZoom=s,this.zoom=Math.max(this.zoom,s))}get maxZoom(){return this._maxZoom}set maxZoom(s){this._maxZoom!==s&&(this._maxZoom=s,this.zoom=Math.min(this.zoom,s))}get minPitch(){return this._minPitch}set minPitch(s){this._minPitch!==s&&(this._minPitch=s,this.pitch=Math.max(this.pitch,s))}get maxPitch(){return this._maxPitch}set maxPitch(s){this._maxPitch!==s&&(this._maxPitch=s,this.pitch=Math.min(this.pitch,s))}get renderWorldCopies(){return this._renderWorldCopies&&this.projection.supportsWorldCopies===!0}set renderWorldCopies(s){s===void 0?s=!0:s===null&&(s=!1),this._renderWorldCopies=s}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const s=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(s))}get cameraWorldSize(){const s=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(s))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return l.mercatorZfromAltitude(this.center.lat,this.cameraWorldSizeForFog)}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new l.Point(this.width,this.height)}get bearing(){return l.wrap(this.rotation,-180,180)}set bearing(s){this.rotation=s}get rotation(){return-this.angle/Math.PI*180}set rotation(s){const d=-s*Math.PI/180;var g;this.angle!==d&&(this._unmodified=!1,this.angle=d,this._calcMatrices(),this.rotationMatrix=(g=new l.ARRAY_TYPE(4),l.ARRAY_TYPE!=Float32Array&&(g[1]=0,g[2]=0),g[0]=1,g[3]=1,g),function(_,b,I){var M=b[0],O=b[1],$=b[2],k=b[3],q=Math.sin(I),ie=Math.cos(I);_[0]=M*ie+$*q,_[1]=O*ie+k*q,_[2]=M*-q+$*ie,_[3]=O*-q+k*ie}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(s){const d=l.clamp(s,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==d&&(this._unmodified=!1,this._pitch=d,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}get fovX(){return this._fov}get fovY(){const s=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/s)}set fov(s){s=Math.max(.01,Math.min(60,s)),this._fov!==s&&(this._unmodified=!1,this._fov=l.degToRad(s),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(s){this._averageElevation=s,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(s){const d=Math.min(Math.max(s,this.minZoom),this.maxZoom);this._zoom!==d&&(this._unmodified=!1,this._setZoom(d),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(s){this._zoom=s,this.scale=this.zoomScale(s),this.tileZoom=Math.floor(s),this.zoomFraction=s-this.tileZoom}_updateCameraOnTerrain(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const s=this._elevation;this._centerAltitude=s.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=s.exaggeration(),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){this._centerAltitudeValidForExaggeration!==void 0&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const s=this._elevation,d=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],g=this.horizonLineFromTop();let _=0,b=0;for(let I=0;I<d.length;I++){const M=new l.Point(d[I][0]*this.width,g+d[I][1]*(this.height-g)),O=s.pointCoordinate(M);if(!O)continue;const $=1/Math.hypot(O[0]-this._camera.position[0],O[1]-this._camera.position[1]);_+=O[3]*$,b+=$}return b===0?NaN:_/b}get center(){return this._center}set center(s){s.lat===this._center.lat&&s.lng===this._center.lng||(this._unmodified=!1,this._center=s,this._terrainEnabled()&&(this.cameraElevationReference==="ground"?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(this._seaLevelZoom==null||!this._elevation)return;const s=this._seaLevelZoom,d=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),g=this.pixelsPerMeter/this.worldSize*d,_=this._mercatorZfromZoom(s),b=this._mercatorZfromZoom(this._maxZoom),I=Math.max(_-g,b);this._setZoom(this._zoomFromMercatorZ(I))}get padding(){return this._edgeInsets.toJSON()}set padding(s){this._edgeInsets.equals(s)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,s,1),this._calcMatrices())}computeZoomRelativeTo(s){const d=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,s.toAltitude()));let g;g=s.z<this._camera.position[2]?[d.x,d.y,d.z]:[s.x,s.y,s.z];const _=l.length(l.sub([],this._camera.position,g));return l.clamp(this._zoomFromMercatorZ(_),this._minZoom,this._maxZoom)}setFreeCameraOptions(s){if(!this.height||!s.position&&!s.orientation)return;this._updateCameraState();let d=!1;if(s.orientation&&!l.exactEquals(s.orientation,this._camera.orientation)&&(d=this._setCameraOrientation(s.orientation)),s.position){const g=[s.position.x,s.position.y,s.position.z];l.exactEquals$1(g,this._camera.position)||(this._setCameraPosition(g),d=!0)}d&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const s=this._camera.position,d=new Xm;return d.position=new l.MercatorCoordinate(s[0],s[1],s[2]),d.orientation=this._camera.orientation,d._elevation=this.elevation,d._renderWorldCopies=this.renderWorldCopies,d}_setCameraOrientation(s){if(!l.length$1(s))return!1;l.normalize$1(s,s);const d=l.transformQuat([],[0,0,-1],s),g=l.transformQuat([],[0,-1,0],s);if(g[2]<0)return!1;const _=zc(d,g);return!!_&&(this._camera.orientation=_,!0)}_setCameraPosition(s){const d=this.zoomScale(this.minZoom)*this.tileSize,g=this.zoomScale(this.maxZoom)*this.tileSize,_=this.cameraToCenterDistance;s[2]=l.clamp(s[2],_/g,_/d),this._camera.position=s}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(s){return this._edgeInsets.equals(s)}interpolatePadding(s,d,g){this._unmodified=!1,this._edgeInsets.interpolate(s,d,g),this._constrain(),this._calcMatrices()}coveringZoomLevel(s){const d=(s.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/s.tileSize));return Math.max(0,d)}getVisibleUnwrappedCoordinates(s){const d=[new l.UnwrappedTileID(0,s)];if(this.renderWorldCopies){const g=this.pointCoordinate(new l.Point(0,0)),_=this.pointCoordinate(new l.Point(this.width,0)),b=this.pointCoordinate(new l.Point(this.width,this.height)),I=this.pointCoordinate(new l.Point(0,this.height)),M=Math.floor(Math.min(g.x,_.x,b.x,I.x)),O=Math.floor(Math.max(g.x,_.x,b.x,I.x)),$=1;for(let k=M-$;k<=O+$;k++)k!==0&&d.push(new l.UnwrappedTileID(k,s))}return d}coveringTiles(s){let d=this.coveringZoomLevel(s);const g=d,_=this.elevation&&!s.isTerrainDEM,b=this.projection.name==="mercator";if(s.minzoom!==void 0&&d<s.minzoom)return[];s.maxzoom!==void 0&&d>s.maxzoom&&(d=s.maxzoom);const I=this.locationCoordinate(this.center),M=this.center.lat,O=1<<d,$=[O*I.x,O*I.y,0],k=this.projection.name==="globe",q=!k,ie=l.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,d,q),le=k?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),de=O*l.mercatorZfromAltitude(1,this.center.lat),ce=this._camera.position[2]/l.mercatorZfromAltitude(1,this.center.lat),me=[O*le.x,O*le.y,ce*(q?1:de)],X=this.cameraToCenterDistance/s.tileSize*(s.roundZoom?1:.502),se=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?d:0,xe=s.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,be=s.isTerrainDEM?-xe:this._elevation?this._elevation.getMinElevationBelowMSL():0,Re=this.projection.isReprojectedInTileSpace?Km(this):1,ze=Xe=>{const It=new l.MercatorCoordinate(Xe.x+25e-6,Xe.y,Xe.z),mt=new l.MercatorCoordinate(Xe.x,Xe.y+25e-6,Xe.z),Pt=Xe.toLngLat(),dn=It.toLngLat(),Rn=mt.toLngLat(),Qt=this.locationCoordinate(Pt),yn=this.locationCoordinate(dn),Hn=this.locationCoordinate(Rn),Un=Math.hypot(yn.x-Qt.x,yn.y-Qt.y),cn=Math.hypot(Hn.x-Qt.x,Hn.y-Qt.y);return Math.sqrt(Un*cn)*Re/25e-6},Oe=Xe=>{const lt=xe,It=be;return{aabb:l.tileAABB(this,O,0,0,0,Xe,It,lt,this.projection),zoom:0,x:0,y:0,minZ:It,maxZ:lt,wrap:Xe,fullyVisible:!1}},Ve=[];let Ue=[];const Ke=d,wt=s.reparseOverscaled?g:d,We=Xe=>Xe*Xe,ct=We((ce-this._centerAltitude)*de),Qe=Xe=>{if(!this._elevation||!Xe.tileID||!b)return;const lt=this._elevation.getMinMaxForTile(Xe.tileID),It=Xe.aabb;lt?(It.min[2]=lt.min,It.max[2]=lt.max,It.center[2]=(It.min[2]+It.max[2])/2):(Xe.shouldSplit=xt(Xe),Xe.shouldSplit||(It.min[2]=It.max[2]=It.center[2]=this._centerAltitude))},xt=Xe=>{if(Xe.zoom<se)return!0;if(Xe.zoom===Ke)return!1;if(Xe.shouldSplit!=null)return Xe.shouldSplit;const lt=Xe.aabb.distanceX(me),It=Xe.aabb.distanceY(me);let mt=ct,Pt=1;if(k){mt=We(Xe.aabb.distanceZ(me));const Qt=Math.pow(2,Xe.zoom),yn=l.latFromMercatorY((Xe.y+1)/Qt),Hn=l.latFromMercatorY(Xe.y/Qt),Un=Math.min(Math.max(M,yn),Hn),cn=l.circumferenceAtLatitude(Un)/l.circumferenceAtLatitude(M);if(Pt=Un===M?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,cn/this._mercatorScaleRatio),this.zoom<=l.GLOBE_ZOOM_THRESHOLD_MIN&&Xe.zoom===Ke-1&&cn>=.9)return!0}else if(_&&(mt=We(Xe.aabb.distanceZ(me)*de)),this.projection.isReprojectedInTileSpace&&g<=5){const Qt=Math.pow(2,Xe.zoom),yn=ze(new l.MercatorCoordinate((Xe.x+.5)/Qt,(Xe.y+.5)/Qt));Pt=yn>.85?1:yn}const dn=lt*lt+It*It+mt,Rn=We((1<<Ke-Xe.zoom)*X*Pt*((Qt,yn)=>{if(yn*We(.707)<Qt)return 1;const Hn=Math.sqrt(yn/Qt);return Hn/(1.4144271570014144+(Math.pow(1.1,Hn-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(mt,ct),dn));return dn<Rn};if(this.renderWorldCopies)for(let Xe=1;Xe<=3;Xe++)Ve.push(Oe(-Xe)),Ve.push(Oe(Xe));for(Ve.push(Oe(0));Ve.length>0;){const Xe=Ve.pop(),lt=Xe.x,It=Xe.y;let mt=Xe.fullyVisible;if(!mt){const Pt=Xe.aabb.intersects(ie);if(Pt===0)continue;mt=Pt===2}if(Xe.zoom!==Ke&&xt(Xe))for(let Pt=0;Pt<4;Pt++){const dn=(lt<<1)+Pt%2,Rn=(It<<1)+(Pt>>1),Qt={aabb:b?Xe.aabb.quadrant(Pt):l.tileAABB(this,O,Xe.zoom+1,dn,Rn,Xe.wrap,Xe.minZ,Xe.maxZ,this.projection),zoom:Xe.zoom+1,x:dn,y:Rn,wrap:Xe.wrap,fullyVisible:mt,tileID:void 0,shouldSplit:void 0,minZ:Xe.minZ,maxZ:Xe.maxZ};_&&!k&&(Qt.tileID=new l.OverscaledTileID(Xe.zoom+1===Ke?wt:Xe.zoom+1,Xe.wrap,Xe.zoom+1,dn,Rn),Qe(Qt)),Ve.push(Qt)}else{const Pt=Xe.zoom===Ke?wt:Xe.zoom;if(s.minzoom&&s.minzoom>Pt)continue;const dn=$[0]-(.5+lt+(Xe.wrap<<Xe.zoom))*(1<<d-Xe.zoom),Rn=$[1]-.5-It,Qt=Xe.tileID?Xe.tileID:new l.OverscaledTileID(Pt,Xe.wrap,Xe.zoom,lt,It);Ue.push({tileID:Qt,distanceSq:dn*dn+Rn*Rn})}}if(this.fogCullDistSq){const Xe=this.fogCullDistSq,lt=this.horizonLineFromTop();Ue=Ue.filter(It=>{const mt=[0,0,0,1],Pt=[l.EXTENT,l.EXTENT,0,1],dn=this.calculateFogTileMatrix(It.tileID.toUnwrapped());l.transformMat4$1(mt,mt,dn),l.transformMat4$1(Pt,Pt,dn);const Rn=l.getAABBPointSquareDist(mt,Pt);if(Rn===0)return!0;let Qt=!1;const yn=this._elevation;if(yn&&Rn>Xe&&lt!==0){const Hn=this.calculateProjMatrix(It.tileID.toUnwrapped());let Un;s.isTerrainDEM||(Un=yn.getMinMaxForTile(It.tileID)),Un||(Un={min:be,max:xe});const cn=l.furthestTileCorner(this.rotation),ur=[cn[0]*l.EXTENT,cn[1]*l.EXTENT,Un.max];l.transformMat4(ur,ur,Hn),Qt=(1-ur[1])*this.height*.5<lt}return Rn<Xe||Qt})}return Ue.sort((Xe,lt)=>Xe.distanceSq-lt.distanceSq).map(Xe=>Xe.tileID)}resize(s,d){this.width=s,this.height=d,this.pixelsToGLUnits=[2/s,-2/d],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(s){return Math.pow(2,s)}scaleZoom(s){return Math.log(s)/Math.LN2}project(s){const d=l.clamp(s.lat,-l.MAX_MERCATOR_LATITUDE,l.MAX_MERCATOR_LATITUDE),g=this.projection.project(s.lng,d);return new l.Point(g.x*this.worldSize,g.y*this.worldSize)}unproject(s){return this.projection.unproject(s.x/this.worldSize,s.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/l.mercatorZfromAltitude(1,this.center.lat)/this.worldSize}setLocationAtPoint(s,d){let g,_;const b=this.centerPoint;if(this.projection.name==="globe"){const M=this.worldSize;g=(d.x-b.x)/M,_=(d.y-b.y)/M}else{const M=this.pointCoordinate(d),O=this.pointCoordinate(b);g=M.x-O.x,_=M.y-O.y}const I=this.locationCoordinate(s);this.setLocation(new l.MercatorCoordinate(I.x-g,I.y-_))}setLocation(s){this.center=this.coordinateLocation(s),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(s){return this.projection.locationPoint(this,s)}locationPoint3D(s){return this.projection.locationPoint(this,s,!0)}pointLocation(s){return this.coordinateLocation(this.pointCoordinate(s))}pointLocation3D(s){return this.coordinateLocation(this.pointCoordinate3D(s))}locationCoordinate(s,d){const g=d?l.mercatorZfromAltitude(d,s.lat):void 0,_=this.projection.project(s.lng,s.lat);return new l.MercatorCoordinate(_.x,_.y,g)}coordinateLocation(s){return this.projection.unproject(s.x,s.y)}pointRayIntersection(s,d){const g=d??this._centerAltitude,_=[s.x,s.y,0,1],b=[s.x,s.y,1,1];l.transformMat4$1(_,_,this.pixelMatrixInverse),l.transformMat4$1(b,b,this.pixelMatrixInverse);const I=b[3];l.scale$1(_,_,1/_[3]),l.scale$1(b,b,1/I);const M=_[2],O=b[2];return{p0:_,p1:b,t:M===O?0:(g-M)/(O-M)}}screenPointToMercatorRay(s){const d=[s.x,s.y,0,1],g=[s.x,s.y,1,1];return l.transformMat4$1(d,d,this.pixelMatrixInverse),l.transformMat4$1(g,g,this.pixelMatrixInverse),l.scale$1(d,d,1/d[3]),l.scale$1(g,g,1/g[3]),d[2]=l.mercatorZfromAltitude(d[2],this._center.lat)*this.worldSize,g[2]=l.mercatorZfromAltitude(g[2],this._center.lat)*this.worldSize,l.scale$1(d,d,1/this.worldSize),l.scale$1(g,g,1/this.worldSize),new l.Ray([d[0],d[1],d[2]],l.normalize([],l.sub([],g,d)))}rayIntersectionCoordinate(s){const{p0:d,p1:g,t:_}=s,b=l.mercatorZfromAltitude(d[2],this._center.lat),I=l.mercatorZfromAltitude(g[2],this._center.lat);return new l.MercatorCoordinate(l.number(d[0],g[0],_)/this.worldSize,l.number(d[1],g[1],_)/this.worldSize,l.number(b,I,_))}pointCoordinate(s,d=this._centerAltitude){return this.projection.pointCoordinate(this,s.x,s.y,d)}pointCoordinate3D(s){if(!this.elevation)return this.pointCoordinate(s);let d=this.projection.pointCoordinate3D(this,s.x,s.y);if(d)return new l.MercatorCoordinate(d[0],d[1],d[2]);let g=0,_=this.horizonLineFromTop();if(s.y>_)return this.pointCoordinate(s);const b=.02*_,I=s.clone();for(let M=0;M<10&&_-g>b;M++){I.y=l.number(g,_,.66);const O=this.projection.pointCoordinate3D(this,I.x,I.y);O?(_=I.y,d=O):g=I.y}return d?new l.MercatorCoordinate(d[0],d[1],d[2]):this.pointCoordinate(s)}isPointAboveHorizon(s){return this.projection.isPointAboveHorizon(this,s)}isPointOnSurface(s){if(s.y<0||s.y>this.height||s.x<0||s.x>this.width)return!1;if(this.elevation||this.zoom>=l.GLOBE_ZOOM_THRESHOLD_MAX)return!this.isPointAboveHorizon(s);const d=this.pointCoordinate(s);return d.y>=0&&d.y<=1}_coordinatePoint(s,d){const g=d&&this.elevation?this.elevation.getAtPointOrZero(s,this._centerAltitude):this._centerAltitude,_=[s.x*this.worldSize,s.y*this.worldSize,g+s.toAltitude(),1];return l.transformMat4$1(_,_,this.pixelMatrix),_[3]>0?new l.Point(_[0]/_[3],_[1]/_[3]):new l.Point(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:s,left:d}=this._edgeInsets,g=this.height-this._edgeInsets.bottom,_=this.width-this._edgeInsets.right,b=this.pointLocation3D(new l.Point(d,s)),I=this.pointLocation3D(new l.Point(_,s)),M=this.pointLocation3D(new l.Point(_,g)),O=this.pointLocation3D(new l.Point(d,g));let $=Math.min(b.lng,I.lng,M.lng,O.lng),k=Math.max(b.lng,I.lng,M.lng,O.lng),q=Math.min(b.lat,I.lat,M.lat,O.lat),ie=Math.max(b.lat,I.lat,M.lat,O.lat);const le=Math.pow(2,-this.zoom)/16*270,de=this.projection.name==="globe"?1:4,ce=(me,X,se,xe,be)=>{const Re=(me+se)/2,ze=(X+xe)/2,Oe=new l.Point(Re,ze),{lng:Ve,lat:Ue}=this.pointLocation3D(Oe),Ke=Math.max(0,$-Ve,q-Ue,Ve-k,Ue-ie);$=Math.min($,Ve),k=Math.max(k,Ve),q=Math.min(q,Ue),ie=Math.max(ie,Ue),(be<de||Ke>le)&&(ce(me,X,Re,ze,be+1),ce(Re,ze,se,xe,be+1))};if(ce(d,s,_,s,1),ce(_,s,_,g,1),ce(_,g,d,g,1),ce(d,g,d,s,1),this.projection.name==="globe"){const[me,X]=l.polesInViewport(this);me?(ie=90,k=180,$=-180):X&&(q=-90,k=180,$=-180)}return new l.LngLatBounds(new l.LngLat($,q),new l.LngLat(k,ie))}_getBoundsRectangular(s,d){const{top:g,left:_}=this._edgeInsets,b=this.height-this._edgeInsets.bottom,I=this.width-this._edgeInsets.right,M=new l.Point(_,g),O=new l.Point(I,g),$=new l.Point(I,b),k=new l.Point(_,b);let q=this.pointCoordinate(M,s),ie=this.pointCoordinate(O,s);const le=this.pointCoordinate($,d),de=this.pointCoordinate(k,d),ce=(me,X)=>(X.y-me.y)/(X.x-me.x);return q.y>1&&ie.y>=0?q=new l.MercatorCoordinate((1-de.y)/ce(de,q)+de.x,1):q.y<0&&ie.y<=1&&(q=new l.MercatorCoordinate(-de.y/ce(de,q)+de.x,0)),ie.y>1&&q.y>=0?ie=new l.MercatorCoordinate((1-le.y)/ce(le,ie)+le.x,1):ie.y<0&&q.y<=1&&(ie=new l.MercatorCoordinate(-le.y/ce(le,ie)+le.x,0)),new l.LngLatBounds().extend(this.coordinateLocation(q)).extend(this.coordinateLocation(ie)).extend(this.coordinateLocation(de)).extend(this.coordinateLocation(le))}_getBoundsRectangularTerrain(){const s=this.elevation;if(!s.visibleDemTiles.length||s.isUsingMockSource())return this._getBoundsRectangular(0,0);const d=s.visibleDemTiles.reduce((g,_)=>{if(_.dem){const b=_.dem.tree;g.min=Math.min(g.min,b.minimums[0]),g.max=Math.max(g.max,b.maximums[0])}return g},{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(d.min*s.exaggeration(),d.max*s.exaggeration())}getBounds(){return this.projection.name==="mercator"||this.projection.name==="equirectangular"?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(s=!0){const d=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,g=this.height/2-d*(1-this._horizonShift);return s?Math.max(0,g):g}getMaxBounds(){return this.maxBounds}setMaxBounds(s){this.maxBounds=s,this.minLat=-l.MAX_MERCATOR_LATITUDE,this.maxLat=l.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,s&&(this.minLat=s.getSouth(),this.maxLat=s.getNorth(),this.minLng=s.getWest(),this.maxLng=s.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=l.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=l.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=l.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=l.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(s,d){return this.projection.createTileMatrix(this,d,s)}calculateDistanceTileData(s){const d=s.key,g=this._distanceTileDataCache;if(g[d])return g[d];const _=s.canonical,b=1/this.height,I=this.cameraWorldSize,M=I/this.zoomScale(_.z),O=(_.x+Math.pow(2,_.z)*s.wrap)*M,$=_.y*M,k=this.point;k.x*=I/this.worldSize,k.y*=I/this.worldSize;const q=this.angle,ie=Math.sin(-q),le=-Math.cos(-q);return g[d]={bearing:[ie,le],center:[(k.x-O)*b,(k.y-$)*b],scale:M/l.EXTENT*b},g[d]}calculateFogTileMatrix(s){const d=s.key,g=this._fogTileMatrixCache;if(g[d])return g[d];const _=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,s);return l.multiply(_,this.worldToFogMatrix,_),g[d]=new Float32Array(_),g[d]}calculateProjMatrix(s,d=!1){const g=s.key,_=d?this._alignedProjMatrixCache:this._projMatrixCache;if(_[g])return _[g];const b=this.calculatePosMatrix(s,this.worldSize);return l.multiply(b,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:d?this.alignedProjMatrix:this.projMatrix,b),_[g]=new Float32Array(b),_[g]}calculatePixelsToTileUnitsMatrix(s){const d=s.tileID.key,g=this._pixelsToTileUnitsCache;if(g[d])return g[d];const _=function(b,I){const{scale:M}=b.tileTransform,O=M*l.EXTENT/(b.tileSize*Math.pow(2,I.zoom-b.tileID.overscaledZ+b.tileID.canonical.z));return $=new Float32Array(4),ie=(k=I.inverseAdjustmentMatrix)[1],le=k[2],de=k[3],me=(q=[O,O])[1],$[0]=k[0]*(ce=q[0]),$[1]=ie*ce,$[2]=le*me,$[3]=de*me,$;var $,k,q,ie,le,de,ce,me}(s,this);return g[d]=_,g[d]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if(this.projection.name==="globe"){const s=1/this.worldSize,d=l.fromScaling([],[s,s,s]);return l.multiply(d,d,this.globeMatrix),d}}recenterOnTerrain(){if(!this._elevation||this.projection.name==="globe")return;const s=this._elevation;this._updateCameraState();const d=l.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,g=this._computeCameraPosition(d),_=this._camera.forward(),b=l.mercatorZfromAltitude(1,this._center.lat);g[2]/=b,_[2]/=b,l.normalize(_,_);const I=s.raycast(g,_,s.exaggeration());if(I){const M=l.scaleAndAdd([],g,_,I),O=new l.MercatorCoordinate(M[0],M[1],l.mercatorZfromAltitude(M[2],l.latFromMercatorY(M[1]))),$=(O.z+l.length([O.x-g[0],O.y-g[1],O.z-g[2]*b]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ($),this._centerAltitude=O.toAltitude(),this._center=this.coordinateLocation(O),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(s=!1){if(!this._elevation)return;const d=this._elevation,g=l.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,_=this._computeCameraPosition(g),b=d.getAtPointOrZero(new l.MercatorCoordinate(..._)),I=this.pixelsPerMeter/this.worldSize*b,M=this._minimumHeightOverTerrain(),O=_[2]-I;if(O<=M)if(O<0||s){const $=this.locationCoordinate(this._center,this._centerAltitude),k=[_[0],_[1],$.z-_[2]],q=l.length(k);k[2]-=(M-O)/this._pixelsPerMercatorPixel;const ie=l.length(k);if(ie===0)return;l.scale$2(k,k,q/ie*this._pixelsPerMercatorPixel),this._camera.position=[_[0],_[1],$.z*this._pixelsPerMercatorPixel-k[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const s=this.projection.name==="globe"||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||s){const ie=this.center;return ie.lat=l.clamp(ie.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!s)&&(ie.lng=l.clamp(ie.lng,this.minLng,this.maxLng)),this.center=ie,void(this._constraining=!1)}const d=this._unmodified,{x:g,y:_}=this.point;let b=0,I=g,M=_;const O=this.width/2,$=this.height/2,k=this.worldMinY*this.scale,q=this.worldMaxY*this.scale;if(_-$<k&&(M=k+$),_+$>q&&(M=q-$),q-k<this.height&&(b=Math.max(b,this.height/(q-k)),M=(q+k)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const ie=this.worldMinX*this.scale,le=this.worldMaxX*this.scale,de=this.worldSize/2-(ie+le)/2;I=(g+de+this.worldSize)%this.worldSize-de,I-O<ie&&(I=ie+O),I+O>le&&(I=le-O),le-ie<this.width&&(b=Math.max(b,this.width/(le-ie)),I=(le+ie)/2)}I===g&&M===_||(this.center=this.unproject(new l.Point(I,M))),b&&(this.zoom+=this.scaleZoom(b)),this._constrainCamera(),this._unmodified=d,this._constraining=!1}_minZoomForBounds(){let s=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(s=Math.max(s,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),s}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const s=this.centerOffset,d=this.pixelsPerMeter;this.projection.name==="globe"&&(this._mercatorScaleRatio=l.mercatorZfromAltitude(1,this.center.lat)/l.mercatorZfromAltitude(1,l.GLOBE_SCALE_MATCH_LATITUDE));const g=qu(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,g),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const _=this.projection.zAxisUnit==="meters"?d:1,b=this._camera.getWorldToCamera(this.worldSize,_),I=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);I[8]=2*-s.x/this.width,I[9]=2*s.y/this.height;let M=l.mul([],I,b);if(this.projection.isReprojectedInTileSpace){const ze=this.locationCoordinate(this.center),Oe=l.identity([]);l.translate(Oe,Oe,[ze.x*this.worldSize,ze.y*this.worldSize,0]),l.multiply(Oe,Oe,Rl(this)),l.translate(Oe,Oe,[-ze.x*this.worldSize,-ze.y*this.worldSize,0]),l.multiply(M,M,Oe),this.inverseAdjustmentMatrix=function(Ve){const Ue=Rl(Ve,!0);return ee([],[Ue[0],Ue[1],Ue[4],Ue[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=l.scale([],M,[this.worldSize,this.worldSize,this.worldSize/_,1]),this.projMatrix=M,this.invProjMatrix=l.invert(new Float64Array(16),this.projMatrix);const O=l.invert([],I);this.frustumCorners=l.FrustumCorners.fromInvProjectionMatrix(O,this.horizonLineFromTop(),this.height);const $=new Float32Array(16);l.identity($),l.scale($,$,[1,-1,1]),l.rotateX($,$,this._pitch),l.rotateZ($,$,this.angle);const k=l.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),q=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;k[8]=2*-s.x/this.width,k[9]=2*(s.y+q)/this.height,this.skyboxMatrix=l.multiply($,k,$);const ie=this.point,le=ie.x,de=ie.y,ce=this.width%2/2,me=this.height%2/2,X=Math.cos(this.angle),se=Math.sin(this.angle),xe=le-Math.round(le)+X*ce+se*me,be=de-Math.round(de)+X*me+se*ce,Re=new Float64Array(M);if(l.translate(Re,Re,[xe>.5?xe-1:xe,be>.5?be-1:be,0]),this.alignedProjMatrix=Re,M=l.create(),l.scale(M,M,[this.width/2,-this.height/2,1]),l.translate(M,M,[1,-1,0]),this.labelPlaneMatrix=M,M=l.create(),l.scale(M,M,[1,-1,1]),l.translate(M,M,[-1,-1,0]),l.scale(M,M,[2/this.width,2/this.height,1]),this.glCoordMatrix=M,this.pixelMatrix=l.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},M=l.invert(new Float64Array(16),this.pixelMatrix),!M)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=M,this.projection.name==="globe"||this.mercatorFromTransition){this.globeMatrix=l.calculateGlobeMatrix(this);const ze=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=l.transformMat4(ze,ze,b),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=M;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const s=this.cameraWorldSizeForFog,d=this.cameraPixelsPerMeter,g=this._camera.position,_=1/this.height/this._pixelsPerMercatorPixel,b=[s,s,d];l.scale$2(b,b,_),l.scale$2(g,g,-1),l.multiply$2(g,g,b);const I=l.create();l.translate(I,I,g),l.scale(I,I,b),this.mercatorFogMatrix=I,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(s,d,_)}_computeCameraPosition(s){const d=(s=s||this.pixelsPerMeter)/this.pixelsPerMeter,g=this._camera.forward(),_=this.point,b=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*d-s/this.worldSize*this._centerAltitude;return[_.x/this.worldSize-g[0]*b,_.y/this.worldSize-g[1]*b,s/this.worldSize*this._centerAltitude-g[2]*b]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(s){const d=this._maxCameraBoundsDistance()*Math.cos(this._pitch),g=this._camera.position[2],_=s[2];let b=1;this.projection.wrap&&(this.center=this.center.wrap()),_>0&&(b=Math.min((d-g)/_,1)),this._camera.position=l.scaleAndAdd([],this._camera.position,s,b),this._updateStateFromCamera()}_updateStateFromCamera(){const s=this._camera.position,d=this._camera.forward(),{pitch:g,bearing:_}=this._camera.getPitchBearing(),b=l.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,I=this._mercatorZfromZoom(this._maxZoom)*Math.cos(l.degToRad(this._maxPitch)),M=Math.max((s[2]-b)/Math.cos(g),I),O=this._zoomFromMercatorZ(M);l.scaleAndAdd(s,s,d,M),this._pitch=l.clamp(g,l.degToRad(this.minPitch),l.degToRad(this.maxPitch)),this.angle=l.wrap(_,-Math.PI,Math.PI),this._setZoom(l.clamp(O,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new l.MercatorCoordinate(s[0],s[1],s[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(s){return Math.pow(2,s)*this.tileSize}_mercatorZfromZoom(s){return this.cameraToCenterDistance/this._worldSizeFromZoom(s)}_minimumHeightOverTerrain(){const s=Math.min((this._seaLevelZoom!=null?this._seaLevelZoom:this._zoom)+4,this._maxZoom);return this._mercatorZfromZoom(s)}_zoomFromMercatorZ(s){return this.scaleZoom(this.cameraToCenterDistance/(s*this.tileSize))}zoomFromMercatorZAdjusted(s){let d=0,g=l.GLOBE_ZOOM_THRESHOLD_MAX,_=0,b=1/0;for(;g-d>1e-6&&g>d;){const I=d+.5*(g-d),M=this.tileSize*Math.pow(2,I),O=this.getCameraToCenterDistance(this.projection,I,M),$=this.scaleZoom(O/(s*this.tileSize)),k=Math.abs(I-$);k<b&&(b=k,_=I),I<$?d=I:g=I}return _}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(l.warnOnce("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(s,d){const g=Math.min(s.x,d.x),_=Math.max(s.x,d.x),b=Math.min(s.y,d.y),I=Math.max(s.y,d.y);if(b<this.horizonLineFromTop(!1))return!0;if(this.projection.name!=="mercator")return!1;const M=[new l.Point(g,b),new l.Point(_,I),new l.Point(g,I),new l.Point(_,b)],O=this.renderWorldCopies?-3:0,$=this.renderWorldCopies?4:1;for(const k of M){const q=this.pointRayIntersection(k);if(q.t<0)return!0;const ie=this.rayIntersectionCoordinate(q);if(ie.x<O||ie.y<0||ie.x>$||ie.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+l.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new l.Point(0,0),new l.Point(this.width,this.height))}zoomDeltaToMovement(s,d){const g=l.length(l.sub([],this._camera.position,s)),_=this._zoomFromMercatorZ(g)+d;return g-this._mercatorZfromZoom(_)}getCameraPoint(){if(this.projection.name==="globe"){const s=function([d,g,_],b){const I=[d,g,_,1];l.transformMat4$1(I,I,b);const M=I[3]=Math.max(I[3],1e-6);return I[0]/=M,I[1]/=M,I[2]/=M,I}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new l.Point(s[0],s[1])}{const s=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new l.Point(0,s))}}getCameraToCenterDistance(s,d=this.zoom,g=this.worldSize){const _=qu(s,d,this.width,this.height,1024),b=s.pixelSpaceConversion(this.center.lat,g,_);return .5/Math.tan(.5*this._fov)*this.height*b}getWorldToCameraMatrix(){const s=this._camera.getWorldToCamera(this.worldSize,this.projection.zAxisUnit==="meters"?this.pixelsPerMeter:1);return this.projection.name==="globe"&&l.multiply(s,s,this.globeMatrix),s}}function zl(p,s){let d=!1,g=null;const _=()=>{g=null,d&&(p(),g=setTimeout(_,s),d=!1)};return()=>(d=!0,g||_(),g)}class rf{constructor(s){this._hashName=s&&encodeURIComponent(s),l.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=zl(this._updateHashUnthrottled.bind(this),300)}addTo(s){return this._map=s,l.window.addEventListener("hashchange",this._onHashChange,!1),s.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),l.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const s=this._map;if(!s)return"";const d=Dc(s);if(this._hashName){const g=this._hashName;let _=!1;const b=l.window.location.hash.slice(1).split("&").map(I=>{const M=I.split("=")[0];return M===g?(_=!0,`${M}=${d}`):I}).filter(I=>I);return _||b.push(`${g}=${d}`),`#${b.join("&")}`}return`#${d}`}_getCurrentHash(){const s=l.window.location.hash.replace("#","");if(this._hashName){let d;return s.split("&").map(g=>g.split("=")).forEach(g=>{g[0]===this._hashName&&(d=g)}),(d&&d[1]||"").split("/")}return s.split("/")}_onHashChange(){const s=this._map;if(!s)return!1;const d=this._getCurrentHash();if(d.length>=3&&!d.some(g=>isNaN(g))){const g=s.dragRotate.isEnabled()&&s.touchZoomRotate.isEnabled()?+(d[3]||0):s.getBearing();return s.jumpTo({center:[+d[2],+d[1]],zoom:+d[0],bearing:g,pitch:+(d[4]||0)}),!0}return!1}_updateHashUnthrottled(){const s=l.window.location.href.replace(/(#.+)?$/,this.getHashString());l.window.history.replaceState(l.window.history.state,null,s)}}function Dc(p,s){const d=p.getCenter(),g=Math.round(100*p.getZoom())/100,_=Math.ceil((g*Math.LN2+Math.log(512/360/.5))/Math.LN10),b=Math.pow(10,_),I=Math.round(d.lng*b)/b,M=Math.round(d.lat*b)/b,O=p.getBearing(),$=p.getPitch();let k=s?`/${I}/${M}/${g}`:`${g}/${M}/${I}`;return(O||$)&&(k+="/"+Math.round(10*O)/10),$&&(k+=`/${Math.round($)}`),k}const Lc={linearity:.3,easing:l.bezier(0,0,.3,1)},Xu=l.extend({deceleration:2500,maxSpeed:1400},Lc),Ku=l.extend({deceleration:20,maxSpeed:1400},Lc),Xt=l.extend({deceleration:1e3,maxSpeed:360},Lc),Zo=l.extend({deceleration:1e3,maxSpeed:90},Lc);class Jm{constructor(s){this._map=s,this.clear()}clear(){this._inertiaBuffer=[]}record(s){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:l.exported.now(),settings:s})}_drainInertiaBuffer(){const s=this._inertiaBuffer,d=l.exported.now();for(;s.length>0&&d-s[0].time>160;)s.shift()}_onMoveEnd(s){if(this._map._prefersReducedMotion()||(this._drainInertiaBuffer(),this._inertiaBuffer.length<2))return;const d={zoom:0,bearing:0,pitch:0,pan:new l.Point(0,0),pinchAround:void 0,around:void 0};for(const{settings:b}of this._inertiaBuffer)d.zoom+=b.zoomDelta||0,d.bearing+=b.bearingDelta||0,d.pitch+=b.pitchDelta||0,b.panDelta&&d.pan._add(b.panDelta),b.around&&(d.around=b.around),b.pinchAround&&(d.pinchAround=b.pinchAround);const g=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,_={};if(d.pan.mag()){const b=$c(d.pan.mag(),g,l.extend({},Xu,s||{}));_.offset=d.pan.mult(b.amount/d.pan.mag()),_.center=this._map.transform.center,kc(_,b)}if(d.zoom){const b=$c(d.zoom,g,Ku);_.zoom=this._map.transform.zoom+b.amount,kc(_,b)}if(d.bearing){const b=$c(d.bearing,g,Xt);_.bearing=this._map.transform.bearing+l.clamp(b.amount,-179,179),kc(_,b)}if(d.pitch){const b=$c(d.pitch,g,Zo);_.pitch=this._map.transform.pitch+b.amount,kc(_,b)}if(_.zoom||_.bearing){const b=d.pinchAround===void 0?d.around:d.pinchAround;_.around=b?this._map.unproject(b):this._map.getCenter()}return this.clear(),_.noMoveStart=!0,_}}function kc(p,s){(!p.duration||p.duration<s.duration)&&(p.duration=s.duration,p.easing=s.easing)}function $c(p,s,d){const{maxSpeed:g,linearity:_,deceleration:b}=d,I=l.clamp(p*_/(s/1e3),-g,g),M=Math.abs(I)/(b*_);return{easing:d.easing,duration:1e3*M,amount:I*(M/2)}}class Ci extends l.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,d,g,_={}){const b=ne(d.getCanvasContainer(),g),I=d.unproject(b);super(s,l.extend({point:b,lngLat:I,originalEvent:g},_)),this._defaultPrevented=!1,this.target=d}}class Fc extends l.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,d,g){const _=s==="touchend"?g.changedTouches:g.touches,b=re(d.getCanvasContainer(),_),I=b.map(O=>d.unproject(O)),M=b.reduce((O,$,k,q)=>O.add($.div(q.length)),new l.Point(0,0));super(s,{points:b,point:M,lngLats:I,lngLat:d.unproject(M),originalEvent:g}),this._defaultPrevented=!1}}class Yu extends l.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,d,g){super(s,{originalEvent:g}),this._defaultPrevented=!1}}class of{constructor(s,d){this._map=s,this._clickTolerance=d.clickTolerance}reset(){this._mousedownPos=void 0}wheel(s){return this._firePreventable(new Yu(s.type,this._map,s))}mousedown(s,d){return this._mousedownPos=d,this._firePreventable(new Ci(s.type,this._map,s))}mouseup(s){this._map.fire(new Ci(s.type,this._map,s))}preclick(s){const d=l.extend({},s);d.type="preclick",this._map.fire(new Ci(d.type,this._map,d))}click(s,d){this._mousedownPos&&this._mousedownPos.dist(d)>=this._clickTolerance||(this.preclick(s),this._map.fire(new Ci(s.type,this._map,s)))}dblclick(s){return this._firePreventable(new Ci(s.type,this._map,s))}mouseover(s){this._map.fire(new Ci(s.type,this._map,s))}mouseout(s){this._map.fire(new Ci(s.type,this._map,s))}touchstart(s){return this._firePreventable(new Fc(s.type,this._map,s))}touchmove(s){this._map.fire(new Fc(s.type,this._map,s))}touchend(s){this._map.fire(new Fc(s.type,this._map,s))}touchcancel(s){this._map.fire(new Fc(s.type,this._map,s))}_firePreventable(s){if(this._map.fire(s),s.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Ju{constructor(s){this._map=s}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(s){this._map.fire(new Ci(s.type,this._map,s))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Ci("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(s){this._delayContextMenu?this._contextMenuEvent=s:this._map.fire(new Ci(s.type,this._map,s)),this._map.listens("contextmenu")&&s.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Qm{constructor(s,d){this._map=s,this._el=s.getCanvasContainer(),this._container=s.getContainer(),this._clickTolerance=d.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(s,d){this.isEnabled()&&s.shiftKey&&s.button===0&&(j(),this._startPos=this._lastPos=d,this._active=!0)}mousemoveWindow(s,d){if(!this._active)return;const g=d,_=this._startPos,b=this._lastPos;if(!_||!b||b.equals(g)||!this._box&&g.dist(_)<this._clickTolerance)return;this._lastPos=g,this._box||(this._box=D("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",s));const I=Math.min(_.x,g.x),M=Math.max(_.x,g.x),O=Math.min(_.y,g.y),$=Math.max(_.y,g.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${I}px,${O}px)`,this._box.style.width=M-I+"px",this._box.style.height=$-O+"px")})}mouseupWindow(s,d){if(!this._active)return;const g=this._startPos,_=d;if(g&&s.button===0){if(this.reset(),Y(),g.x!==_.x||g.y!==_.y)return this._map.fire(new l.Event("boxzoomend",{originalEvent:s})),{cameraAnimation:b=>b.fitScreenCoordinates(g,_,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",s)}}keydown(s){this._active&&s.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",s))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),B(),delete this._startPos,delete this._lastPos}_fireEvent(s,d){return this._map.fire(new l.Event(s,{originalEvent:d}))}}function Qu(p,s){const d={};for(let g=0;g<p.length;g++)d[p[g].identifier]=s[g];return d}class Dl{constructor(s){this.reset(),this.numTouches=s.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(s,d,g){(this.centroid||g.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===0&&(this.startTime=s.timeStamp),g.length===this.numTouches&&(this.centroid=function(_){const b=new l.Point(0,0);for(const I of _)b._add(I);return b.div(_.length)}(d),this.touches=Qu(g,d)))}touchmove(s,d,g){if(this.aborted||!this.centroid)return;const _=Qu(g,d);for(const b in this.touches){const I=_[b];(!I||I.dist(this.touches[b])>30)&&(this.aborted=!0)}}touchend(s,d,g){if((!this.centroid||s.timeStamp-this.startTime>500)&&(this.aborted=!0),g.length===0){const _=!this.aborted&&this.centroid;if(this.reset(),_)return _}}}class af{constructor(s){this.singleTap=new Dl(s),this.numTaps=s.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(s,d,g){this.singleTap.touchstart(s,d,g)}touchmove(s,d,g){this.singleTap.touchmove(s,d,g)}touchend(s,d,g){const _=this.singleTap.touchend(s,d,g);if(_){const b=s.timeStamp-this.lastTime<500,I=!this.lastTap||this.lastTap.dist(_)<30;if(b&&I||this.reset(),this.count++,this.lastTime=s.timeStamp,this.lastTap=_,this.count===this.numTaps)return this.reset(),_}}}class r_{constructor(){this._zoomIn=new af({numTouches:1,numTaps:2}),this._zoomOut=new af({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(s,d,g){this._zoomIn.touchstart(s,d,g),this._zoomOut.touchstart(s,d,g)}touchmove(s,d,g){this._zoomIn.touchmove(s,d,g),this._zoomOut.touchmove(s,d,g)}touchend(s,d,g){const _=this._zoomIn.touchend(s,d,g),b=this._zoomOut.touchend(s,d,g);return _?(this._active=!0,s.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:I=>I.easeTo({duration:300,zoom:I.getZoom()+1,around:I.unproject(_)},{originalEvent:s})}):b?(this._active=!0,s.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:I=>I.easeTo({duration:300,zoom:I.getZoom()-1,around:I.unproject(b)},{originalEvent:s})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const eg={0:1,2:2};class Ll{constructor(s){this.reset(),this._clickTolerance=s.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(s,d){return!1}_move(s,d){return{}}mousedown(s,d){if(this._lastPoint)return;const g=Q(s);this._correctButton(s,g)&&(this._lastPoint=d,this._eventButton=g)}mousemoveWindow(s,d){const g=this._lastPoint;if(g){if(s.preventDefault(),this._eventButton!=null&&function(_,b){const I=eg[b];return _.buttons===void 0||(_.buttons&I)!==I}(s,this._eventButton))this.reset();else if(this._moved||!(d.dist(g)<this._clickTolerance))return this._moved=!0,this._lastPoint=d,this._move(g,d)}}mouseupWindow(s){this._lastPoint&&Q(s)===this._eventButton&&(this._moved&&Y(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class sf extends Ll{mousedown(s,d){super.mousedown(s,d),this._lastPoint&&(this._active=!0)}_correctButton(s,d){return d===0&&!s.ctrlKey}_move(s,d){return{around:d,panDelta:d.sub(s)}}}class lf extends Ll{_correctButton(s,d){return d===0&&s.ctrlKey||d===2}_move(s,d){const g=.8*(d.x-s.x);if(g)return this._active=!0,{bearingDelta:g}}contextmenu(s){s.preventDefault()}}class cf extends Ll{_correctButton(s,d){return d===0&&s.ctrlKey||d===2}_move(s,d){const g=-.5*(d.y-s.y);if(g)return this._active=!0,{pitchDelta:g}}contextmenu(s){s.preventDefault()}}class ed{constructor(s,d){this._map=s,this._el=s.getCanvasContainer(),this._minTouches=1,this._clickTolerance=d.clickTolerance||1,this.reset(),l.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new l.Point(0,0)}touchstart(s,d,g){return this._calculateTransform(s,d,g)}touchmove(s,d,g){if(this._active&&!(g.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(g.length===1&&!l.isFullscreen())return void this._showTouchPanBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return s.cancelable&&s.preventDefault(),this._calculateTransform(s,d,g)}}touchend(s,d,g){this._calculateTransform(s,d,g),this._active&&g.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(s,d,g){g.length>0&&(this._active=!0);const _=Qu(g,d),b=new l.Point(0,0),I=new l.Point(0,0);let M=0;for(const $ in _){const k=_[$],q=this._touches[$];q&&(b._add(k),I._add(k.sub(q)),M++,_[$]=k)}if(this._touches=_,M<this._minTouches||!I.mag())return;const O=I.div(M);return this._sum._add(O),this._sum.mag()<this._clickTolerance?void 0:{around:b.div(M),panDelta:O}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=D("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","null")},500)}}class Bc{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(s){}_move(s,d,g){return{}}touchstart(s,d,g){this._firstTwoTouches||g.length<2||(this._firstTwoTouches=[g[0].identifier,g[1].identifier],this._start([d[0],d[1]]))}touchmove(s,d,g){const _=this._firstTwoTouches;if(!_)return;s.preventDefault();const[b,I]=_,M=Nc(g,d,b),O=Nc(g,d,I);if(!M||!O)return;const $=this._aroundCenter?null:M.add(O).div(2);return this._move([M,O],$,s)}touchend(s,d,g){if(!this._firstTwoTouches)return;const[_,b]=this._firstTwoTouches,I=Nc(g,d,_),M=Nc(g,d,b);I&&M||(this._active&&Y(),this.reset())}touchcancel(){this.reset()}enable(s){this._enabled=!0,this._aroundCenter=!!s&&s.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Nc(p,s,d){for(let g=0;g<p.length;g++)if(p[g].identifier===d)return s[g]}function uf(p,s){return Math.log(p/s)/Math.LN2}class tg extends Bc{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(s){this._startDistance=this._distance=s[0].dist(s[1])}_move(s,d){const g=this._distance;if(this._distance=s[0].dist(s[1]),this._active||!(Math.abs(uf(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:uf(this._distance,g),pinchAround:d}}}function df(p,s){return 180*p.angleWith(s)/Math.PI}class ng extends Bc{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(s){this._startVector=this._vector=s[0].sub(s[1]),this._minDiameter=s[0].dist(s[1])}_move(s,d){const g=this._vector;if(this._vector=s[0].sub(s[1]),g&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:df(this._vector,g),pinchAround:d}}_isBelowThreshold(s){this._minDiameter=Math.min(this._minDiameter,s.mag());const d=25/(Math.PI*this._minDiameter)*360,g=this._startVector;if(!g)return!1;const _=df(s,g);return Math.abs(_)<d}}function ws(p){return Math.abs(p.y)>Math.abs(p.x)}class rg extends Bc{constructor(s){super(),this._map=s}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(s){this._lastPoints=s,ws(s[0].sub(s[1]))&&(this._valid=!1)}_move(s,d,g){const _=this._lastPoints;if(!_)return;const b=s[0].sub(_[0]),I=s[1].sub(_[1]);return this._map._cooperativeGestures&&!l.isFullscreen()&&g.touches.length<3||(this._valid=this.gestureBeginsVertically(b,I,g.timeStamp),!this._valid)?void 0:(this._lastPoints=s,this._active=!0,{pitchDelta:(b.y+I.y)/2*-.5})}gestureBeginsVertically(s,d,g){if(this._valid!==void 0)return this._valid;const _=s.mag()>=2,b=d.mag()>=2;if(!_&&!b)return;if(!_||!b)return this._firstMove==null&&(this._firstMove=g),g-this._firstMove<100&&void 0;const I=s.y>0==d.y>0;return ws(s)&&ws(d)&&I}}const ig={panStep:100,bearingStep:15,pitchStep:10};class i_{constructor(){const s=ig;this._panStep=s.panStep,this._bearingStep=s.bearingStep,this._pitchStep=s.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(s){if(s.altKey||s.ctrlKey||s.metaKey)return;let d=0,g=0,_=0,b=0,I=0;switch(s.keyCode){case 61:case 107:case 171:case 187:d=1;break;case 189:case 109:case 173:d=-1;break;case 37:s.shiftKey?g=-1:(s.preventDefault(),b=-1);break;case 39:s.shiftKey?g=1:(s.preventDefault(),b=1);break;case 38:s.shiftKey?_=1:(s.preventDefault(),I=-1);break;case 40:s.shiftKey?_=-1:(s.preventDefault(),I=1);break;default:return}return this._rotationDisabled&&(g=0,_=0),{cameraAnimation:M=>{const O=M.getZoom();M.easeTo({duration:300,easeId:"keyboardHandler",easing:og,zoom:d?Math.round(O)+d*(s.shiftKey?2:1):O,bearing:M.getBearing()+g*this._bearingStep,pitch:M.getPitch()+_*this._pitchStep,offset:[-b*this._panStep,-I*this._panStep],center:M.getCenter()},{originalEvent:s})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function og(p){return p*(2-p)}const hf=4.000244140625;class ag{constructor(s,d){this._map=s,this._el=s.getCanvasContainer(),this._handler=d,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,l.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(s){this._defaultZoomRate=s}setWheelZoomRate(s){this._wheelZoomRate=s}isEnabled(){return!!this._enabled}isActive(){return this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(s){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!s&&s.around==="center",this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(s){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(s.ctrlKey||s.metaKey||this.isZooming()||l.isFullscreen()))return void this._showBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let d=s.deltaMode===l.window.WheelEvent.DOM_DELTA_LINE?40*s.deltaY:s.deltaY;const g=l.exported.now(),_=g-(this._lastWheelEventTime||0);this._lastWheelEventTime=g,d!==0&&d%hf==0?this._type="wheel":d!==0&&Math.abs(d)<4?this._type="trackpad":_>400?(this._type=null,this._lastValue=d,this._timeout=setTimeout(this._onTimeout,40,s)):this._type||(this._type=Math.abs(_*d)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,d+=this._lastValue)),s.shiftKey&&d&&(d/=4),this._type&&(this._lastWheelEvent=s,this._delta-=d,this._active||this._start(s)),s.preventDefault()}_onTimeout(s){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(s)}_start(s){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const d=ne(this._el,s);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:d,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const s=this._map.transform;this._type==="wheel"&&s.projection.wrap&&(s._center.lng>=180||s._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const d=()=>s._terrainEnabled()&&this._aroundCoord?s.computeZoomRelativeTo(this._aroundCoord):s.zoom;if(this._delta!==0){const O=this._type==="wheel"&&Math.abs(this._delta)>hf?this._wheelZoomRate:this._defaultZoomRate;let $=2/(1+Math.exp(-Math.abs(this._delta*O)));this._delta<0&&$!==0&&($=1/$);const k=d(),q=Math.pow(2,k),ie=typeof this._targetZoom=="number"?s.zoomScale(this._targetZoom):q;this._targetZoom=Math.min(s.maxZoom,Math.max(s.minZoom,s.scaleZoom(ie*$))),this._type==="wheel"&&(this._startZoom=k,this._easing=this._smoothOutEasing(200)),this._delta=0}const g=typeof this._targetZoom=="number"?this._targetZoom:d(),_=this._startZoom,b=this._easing;let I,M=!1;if(this._type==="wheel"&&_&&b){const O=Math.min((l.exported.now()-this._lastWheelEventTime)/200,1),$=b(O);I=l.number(_,g,$),O<1?this._frameId||(this._frameId=!0):M=!0}else I=g,M=!0;return this._active=!0,M&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!M,zoomDelta:I-d(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(s){let d=l.ease;if(this._prevEase){const g=this._prevEase,_=(l.exported.now()-g.start)/g.duration,b=g.easing(_+.01)-g.easing(_),I=.27/Math.sqrt(b*b+1e-4)*.01,M=Math.sqrt(.0729-I*I);d=l.bezier(I,M,.25,1)}return this._prevEase={start:l.exported.now(),duration:s,easing:d},d}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=D("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(l.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","null")},200)}}class sg{constructor(s,d){this._clickZoom=s,this._tapZoom=d}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Vi{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(s,d){return s.preventDefault(),{cameraAnimation:g=>{g.easeTo({duration:300,zoom:g.getZoom()+(s.shiftKey?-1:1),around:g.unproject(d)},{originalEvent:s})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class o_{constructor(){this._tap=new af({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(s,d,g){this._swipePoint||(this._tapTime&&s.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?g.length>0&&(this._swipePoint=d[0],this._swipeTouch=g[0].identifier):this._tap.touchstart(s,d,g))}touchmove(s,d,g){if(this._tapTime){if(this._swipePoint){if(g[0].identifier!==this._swipeTouch)return;const _=d[0],b=_.y-this._swipePoint.y;return this._swipePoint=_,s.preventDefault(),this._active=!0,{zoomDelta:b/128}}}else this._tap.touchmove(s,d,g)}touchend(s,d,g){this._tapTime?this._swipePoint&&g.length===0&&this.reset():this._tap.touchend(s,d,g)&&(this._tapTime=s.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class lg{constructor(s,d,g){this._el=s,this._mousePan=d,this._touchPan=g}enable(s){this._inertiaOptions=s||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class a_{constructor(s,d,g){this._pitchWithRotate=s.pitchWithRotate,this._mouseRotate=d,this._mousePitch=g}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class s_{constructor(s,d,g,_){this._el=s,this._touchZoom=d,this._touchRotate=g,this._tapDragZoom=_,this._rotationDisabled=!1,this._enabled=!0}enable(s){this._touchZoom.enable(s),this._rotationDisabled||this._touchRotate.enable(s),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Do=p=>p.zoom||p.drag||p.pitch||p.rotate;class cg extends l.Event{}class l_{constructor(){this.constants=[1,1,.01],this.radius=0}setup(s,d){const g=l.sub([],d,s);this.radius=l.length(g[2]<0?l.div([],g,this.constants):[g[0],g[1],0])}projectRay(s){l.div(s,s,this.constants),l.normalize(s,s),l.mul$1(s,s,this.constants);const d=l.scale$2([],s,this.radius);if(d[2]>0){const g=l.scale$2([],[0,0,1],l.dot(d,[0,0,1])),_=l.scale$2([],l.normalize([],[d[0],d[1],0]),this.radius),b=l.add([],d,l.scale$2([],l.sub([],l.add([],_,g),d),2));d[0]=b[0],d[1]=b[1]}return d}}function Xo(p){return p.panDelta&&p.panDelta.mag()||p.zoomDelta||p.bearingDelta||p.pitchDelta}class ba{constructor(s,d){this._map=s,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Jm(s),this._bearingSnap=d.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new l_,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(d),l.bindAll(["handleEvent","handleWindowEvent"],this);const g=this._el;this._listeners=[[g,"touchstart",{passive:!0}],[g,"touchmove",{passive:!1}],[g,"touchend",void 0],[g,"touchcancel",void 0],[g,"mousedown",void 0],[g,"mousemove",void 0],[g,"mouseup",void 0],[l.window.document,"mousemove",{capture:!0}],[l.window.document,"mouseup",void 0],[g,"mouseover",void 0],[g,"mouseout",void 0],[g,"dblclick",void 0],[g,"click",void 0],[g,"keydown",{capture:!1}],[g,"keyup",void 0],[g,"wheel",{passive:!1}],[g,"contextmenu",void 0],[l.window,"blur",void 0]];for(const[_,b,I]of this._listeners)_.addEventListener(b,_===l.window.document?this.handleWindowEvent:this.handleEvent,I)}destroy(){for(const[s,d,g]of this._listeners)s.removeEventListener(d,s===l.window.document?this.handleWindowEvent:this.handleEvent,g)}_addDefaultHandlers(s){const d=this._map,g=d.getCanvasContainer();this._add("mapEvent",new of(d,s));const _=d.boxZoom=new Qm(d,s);this._add("boxZoom",_);const b=new r_,I=new Vi;d.doubleClickZoom=new sg(I,b),this._add("tapZoom",b),this._add("clickZoom",I);const M=new o_;this._add("tapDragZoom",M);const O=d.touchPitch=new rg(d);this._add("touchPitch",O);const $=new lf(s),k=new cf(s);d.dragRotate=new a_(s,$,k),this._add("mouseRotate",$,["mousePitch"]),this._add("mousePitch",k,["mouseRotate"]);const q=new sf(s),ie=new ed(d,s);d.dragPan=new lg(g,q,ie),this._add("mousePan",q),this._add("touchPan",ie,["touchZoom","touchRotate"]);const le=new ng,de=new tg;d.touchZoomRotate=new s_(g,de,le,M),this._add("touchRotate",le,["touchPan","touchZoom"]),this._add("touchZoom",de,["touchPan","touchRotate"]),this._add("blockableMapEvent",new Ju(d));const ce=d.scrollZoom=new ag(d,this);this._add("scrollZoom",ce,["mousePan"]);const me=d.keyboard=new i_;this._add("keyboard",me);for(const X of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])s.interactive&&s[X]&&d[X].enable(s[X])}_add(s,d,g){this._handlers.push({handlerName:s,handler:d,allowed:g}),this._handlersById[s]=d}stop(s){if(!this._updatingCamera){for(const{handler:d}of this._handlers)d.reset();this._inertia.clear(),this._fireEvents({},{},s),this._changes=[]}}isActive(){for(const{handler:s}of this._handlers)if(s.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Do(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(s,d,g){for(const _ in s)if(_!==g&&(!d||d.indexOf(_)<0))return!0;return!1}handleWindowEvent(s){this.handleEvent(s,`${s.type}Window`)}_getMapTouches(s){const d=[];for(const g of s)this._el.contains(g.target)&&d.push(g);return d}handleEvent(s,d){this._updatingCamera=!0;const g=s.type==="renderFrame",_=g?void 0:s,b={needsRenderFrame:!1},I={},M={},O=s.touches?this._getMapTouches(s.touches):void 0,$=O?re(this._el,O):g?void 0:ne(this._el,s);for(const{handlerName:ie,handler:le,allowed:de}of this._handlers){if(!le.isEnabled())continue;let ce;this._blockedByActive(M,de,ie)?le.reset():le[d||s.type]&&(ce=le[d||s.type](s,$,O),this.mergeHandlerResult(b,I,ce,ie,_),ce&&ce.needsRenderFrame&&this._triggerRenderFrame()),(ce||le.isActive())&&(M[ie]=le)}const k={};for(const ie in this._previousActiveHandlers)M[ie]||(k[ie]=_);this._previousActiveHandlers=M,(Object.keys(k).length||Xo(b))&&(this._changes.push([b,I,k]),this._triggerRenderFrame()),(Object.keys(M).length||Xo(b))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:q}=b;q&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],q(this._map))}mergeHandlerResult(s,d,g,_,b){if(!g)return;l.extend(s,g);const I={handlerName:_,originalEvent:g.originalEvent||b};g.zoomDelta!==void 0&&(d.zoom=I),g.panDelta!==void 0&&(d.drag=I),g.pitchDelta!==void 0&&(d.pitch=I),g.bearingDelta!==void 0&&(d.rotate=I)}_applyChanges(){const s={},d={},g={};for(const[_,b,I]of this._changes)_.panDelta&&(s.panDelta=(s.panDelta||new l.Point(0,0))._add(_.panDelta)),_.zoomDelta&&(s.zoomDelta=(s.zoomDelta||0)+_.zoomDelta),_.bearingDelta&&(s.bearingDelta=(s.bearingDelta||0)+_.bearingDelta),_.pitchDelta&&(s.pitchDelta=(s.pitchDelta||0)+_.pitchDelta),_.around!==void 0&&(s.around=_.around),_.aroundCoord!==void 0&&(s.aroundCoord=_.aroundCoord),_.pinchAround!==void 0&&(s.pinchAround=_.pinchAround),_.noInertia&&(s.noInertia=_.noInertia),l.extend(d,b),l.extend(g,I);this._updateMapTransform(s,d,g),this._changes=[]}_updateMapTransform(s,d,g){const _=this._map,b=_.transform,I=se=>[se.x,se.y,se.z];if((se=>{const xe=this._eventsInProgress.drag;return xe&&!this._handlersById[xe.handlerName].isActive()})()&&!Xo(s)){const se=b.zoom;b.cameraElevationReference="sea",b.recenterOnTerrain(),b.cameraElevationReference="ground",se!==b.zoom&&this._map._update(!0)}if(b._isCameraConstrained&&_._stop(!0),!Xo(s))return void this._fireEvents(d,g,!0);let{panDelta:M,zoomDelta:O,bearingDelta:$,pitchDelta:k,around:q,aroundCoord:ie,pinchAround:le}=s;b._isCameraConstrained&&(O>0&&(O=0),b._isCameraConstrained=!1),le!==void 0&&(q=le),(O||(se=>d[se]&&!this._eventsInProgress[se])("drag"))&&q&&(this._dragOrigin=I(b.pointCoordinate3D(q)),this._trackingEllipsoid.setup(b._camera.position,this._dragOrigin)),b.cameraElevationReference="sea",_._stop(!0),q=q||_.transform.centerPoint,$&&(b.bearing+=$),k&&(b.pitch+=k),b._updateCameraState();const de=[0,0,0];if(M)if(b.projection.name==="mercator"){const se=this._trackingEllipsoid.projectRay(b.screenPointToMercatorRay(q).dir),xe=this._trackingEllipsoid.projectRay(b.screenPointToMercatorRay(q.sub(M)).dir);de[0]=xe[0]-se[0],de[1]=xe[1]-se[1]}else{const se=b.pointCoordinate(q);if(b.projection.name==="globe"){M=M.rotate(-b.angle);const xe=b._pixelsPerMercatorPixel/b.worldSize;de[0]=-M.x*l.mercatorScale(l.latFromMercatorY(se.y))*xe,de[1]=-M.y*l.mercatorScale(b.center.lat)*xe}else{const xe=b.pointCoordinate(q.sub(M));se&&xe&&(de[0]=xe.x-se.x,de[1]=xe.y-se.y)}}const ce=b.zoom,me=[0,0,0];if(O){const se=I(ie||b.pointCoordinate3D(q)),xe={dir:l.normalize([],l.sub([],se,b._camera.position))};if(xe.dir[2]<0){const be=b.zoomDeltaToMovement(se,O);l.scale$2(me,xe.dir,be)}}const X=l.add(de,de,me);b._translateCameraConstrained(X),O&&Math.abs(b.zoom-ce)>1e-4&&b.recenterOnTerrain(),b.cameraElevationReference="ground",this._map._update(),s.noInertia||this._inertia.record(s),this._fireEvents(d,g,!0)}_fireEvents(s,d,g){const _=Do(this._eventsInProgress),b=Do(s),I={};for(const k in s){const{originalEvent:q}=s[k];this._eventsInProgress[k]||(I[`${k}start`]=q),this._eventsInProgress[k]=s[k]}!_&&b&&this._fireEvent("movestart",b.originalEvent);for(const k in I)this._fireEvent(k,I[k]);b&&this._fireEvent("move",b.originalEvent);for(const k in s){const{originalEvent:q}=s[k];this._fireEvent(k,q)}const M={};let O;for(const k in this._eventsInProgress){const{handlerName:q,originalEvent:ie}=this._eventsInProgress[k];this._handlersById[q].isActive()||(delete this._eventsInProgress[k],O=d[q]||ie,M[`${k}end`]=O)}for(const k in M)this._fireEvent(k,M[k]);const $=Do(this._eventsInProgress);if(g&&(_||b)&&!$){this._updatingCamera=!0;const k=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),q=ie=>ie!==0&&-this._bearingSnap<ie&&ie<this._bearingSnap;k?(q(k.bearing||this._map.getBearing())&&(k.bearing=0),this._map.easeTo(k,{originalEvent:O})):(this._map.fire(new l.Event("moveend",{originalEvent:O})),q(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(s,d){this._map.fire(new l.Event(s,d?{originalEvent:d}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(s=>{this._frameId=void 0,this.handleEvent(new cg("renderFrame",{timeStamp:s})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const Ws="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class td extends l.Evented{constructor(s,d){super(),this._moving=!1,this._zooming=!1,this.transform=s,this._bearingSnap=d.bearingSnap,this._respectPrefersReducedMotion=d.respectPrefersReducedMotion!==!1,l.bindAll(["_renderFrameCallback"],this)}getCenter(){return new l.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(s,d){return this.jumpTo({center:s},d)}panBy(s,d,g){return s=l.Point.convert(s).mult(-1),this.panTo(this.transform.center,l.extend({offset:s},d),g)}panTo(s,d,g){return this.easeTo(l.extend({center:s},d),g)}getZoom(){return this.transform.zoom}setZoom(s,d){return this.jumpTo({zoom:s},d),this}zoomTo(s,d,g){return this.easeTo(l.extend({zoom:s},d),g)}zoomIn(s,d){return this.zoomTo(this.getZoom()+1,s,d),this}zoomOut(s,d){return this.zoomTo(this.getZoom()-1,s,d),this}getBearing(){return this.transform.bearing}setBearing(s,d){return this.jumpTo({bearing:s},d),this}getPadding(){return this.transform.padding}setPadding(s,d){return this.jumpTo({padding:s},d),this}rotateTo(s,d,g){return this.easeTo(l.extend({bearing:s},d),g)}resetNorth(s,d){return this.rotateTo(0,l.extend({duration:1e3},s),d),this}resetNorthPitch(s,d){return this.easeTo(l.extend({bearing:0,pitch:0,duration:1e3},s),d),this}snapToNorth(s,d){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(s,d):this}getPitch(){return this.transform.pitch}setPitch(s,d){return this.jumpTo({pitch:s},d),this}cameraForBounds(s,d){s=l.LngLatBounds.convert(s);const g=d&&d.bearing||0,_=d&&d.pitch||0,b=s.getNorthWest(),I=s.getSouthEast();return this._cameraForBounds(this.transform,b,I,g,_,d)}_extendCameraOptions(s){const d={top:0,bottom:0,right:0,left:0};if(typeof(s=l.extend({padding:d,offset:[0,0],maxZoom:this.transform.maxZoom},s)).padding=="number"){const g=s.padding;s.padding={top:g,bottom:g,right:g,left:g}}return s.padding=l.extend(d,s.padding),s}_minimumAABBFrustumDistance(s,d){const g=d.max[0]-d.min[0],_=d.max[1]-d.min[1];return g/_>s.aspect?g/(2*Math.tan(.5*s.fovX)*s.aspect):_/(2*Math.tan(.5*s.fovY)*s.aspect)}_cameraForBoundsOnGlobe(s,d,g,_,b,I){const M=s.clone(),O=this._extendCameraOptions(I);M.bearing=_,M.pitch=b;const $=l.LngLat.convert(d),k=l.LngLat.convert(g),q=.5*($.lat+k.lat),ie=.5*($.lng+k.lng),le=l.latLngToECEF(q,ie),de=l.normalize([],le),ce=l.normalize([],l.cross([],de,[0,1,0])),me=l.cross([],ce,de),X=[ce[0],ce[1],ce[2],0,me[0],me[1],me[2],0,de[0],de[1],de[2],0,0,0,0,1],se=[le,l.latLngToECEF($.lat,$.lng),l.latLngToECEF(k.lat,$.lng),l.latLngToECEF(k.lat,k.lng),l.latLngToECEF($.lat,k.lng),l.latLngToECEF(q,$.lng),l.latLngToECEF(q,k.lng),l.latLngToECEF($.lat,ie),l.latLngToECEF(k.lat,ie)];let xe=l.Aabb.fromPoints(se.map(mt=>[l.dot(ce,mt),l.dot(me,mt),l.dot(de,mt)]));const be=l.transformMat4([],xe.center,X);l.squaredLength(be)===0&&l.set(be,0,0,1),l.normalize(be,be),l.scale$2(be,be,l.GLOBE_RADIUS),M.center=l.ecefToLatLng(be);const Re=M.getWorldToCameraMatrix(),ze=l.invert(new Float64Array(16),Re);xe=l.Aabb.applyTransform(xe,l.multiply([],Re,X)),l.transformMat4(be,be,Re);const Oe=.5*(xe.max[2]-xe.min[2]),Ve=this._minimumAABBFrustumDistance(M,xe),Ue=l.scale$2([],[0,0,1],Oe),Ke=l.add(Ue,be,Ue),wt=Ve+(M.pitch===0?0:l.distance(be,Ke)),We=M.globeCenterInViewSpace,ct=l.sub([],be,[We[0],We[1],We[2]]);l.normalize(ct,ct),l.scale$2(ct,ct,wt);const Qe=l.add([],be,ct);l.transformMat4(Qe,Qe,ze);const xt=l.earthRadius/l.GLOBE_RADIUS,Xe=l.length(Qe),lt=l.mercatorZfromAltitude(Math.max(Xe*xt-l.earthRadius,Number.EPSILON),0),It=Math.min(M.zoomFromMercatorZAdjusted(lt),O.maxZoom);return It>.5*(l.GLOBE_ZOOM_THRESHOLD_MIN+l.GLOBE_ZOOM_THRESHOLD_MAX)?(M.setProjection({name:"mercator"}),M.zoom=It,this._cameraForBounds(M,d,g,_,b,I)):{center:M.center,zoom:It,bearing:_,pitch:b}}queryTerrainElevation(s,d){const g=this.transform.elevation;return g?(d=l.extend({},{exaggerated:!0},d),g.getAtPoint(l.MercatorCoordinate.fromLngLat(s),null,d.exaggerated)):null}_cameraForBounds(s,d,g,_,b,I){if(s.projection.name==="globe")return this._cameraForBoundsOnGlobe(s,d,g,_,b,I);const M=s.clone(),O=this._extendCameraOptions(I),$=M.padding;M.bearing=_,M.pitch=b;const k=l.LngLat.convert(d),q=l.LngLat.convert(g),ie=new l.LngLat(k.lng,q.lat),le=new l.LngLat(q.lng,k.lat),de=M.project(k),ce=M.project(q),me=this.queryTerrainElevation(k),X=this.queryTerrainElevation(q),se=this.queryTerrainElevation(ie),xe=this.queryTerrainElevation(le),be=[[de.x,de.y,Math.min(me||0,X||0,se||0,xe||0)],[ce.x,ce.y,Math.max(me||0,X||0,se||0,xe||0)]];let Re=l.Aabb.fromPoints(be);const ze=M.getWorldToCameraMatrix(),Oe=l.invert(new Float64Array(16),ze);Re=l.Aabb.applyTransform(Re,ze);const Ve=l.sub([],Re.max,Re.min),Ue=$.left||0,Ke=$.right||0,wt=$.bottom||0,We=$.top||0,{left:ct,right:Qe,top:xt,bottom:Xe}=O.padding,lt=.5*(Ue+Ke),It=.5*(We+wt),mt=Math.min(M.scaleZoom(M.scale*Math.min((M.width-(Ue+Ke+ct+Qe))/Ve[0],(M.height-(wt+We+Xe+xt))/Ve[1])),O.maxZoom),Pt=M.scale/M.zoomScale(mt);Re=new l.Aabb([Re.min[0]-(ct+lt)*Pt,Re.min[1]-(Xe+It)*Pt,Re.min[2]],[Re.max[0]+(Qe+lt)*Pt,Re.max[1]+(xt+It)*Pt,Re.max[2]]);const dn=.5*Ve[2],Rn=this._minimumAABBFrustumDistance(M,Re),Qt=[0,0,1,0];l.transformMat4$1(Qt,Qt,ze),l.normalize$2(Qt,Qt);const yn=l.scale$2([],Qt,Rn+dn),Hn=l.add([],Re.center,yn),Un=(typeof O.offset.x=="number"&&typeof O.offset.y=="number"?new l.Point(O.offset.x,O.offset.y):l.Point.convert(O.offset)).rotate(-l.degToRad(_));Re.center[0]-=Un.x*Pt,Re.center[1]+=Un.y*Pt,l.transformMat4(Re.center,Re.center,Oe),l.transformMat4(Hn,Hn,Oe);const cn=[Re.center[0],Re.center[1],Hn[2]*M.pixelsPerMeter];l.scale$2(cn,cn,1/M.worldSize);const ur=l.lngFromMercatorX(cn[0]),vr=l.latFromMercatorY(cn[1]),yr=Math.min(M._zoomFromMercatorZ(cn[2]),O.maxZoom),_r=new l.LngLat(ur,vr);return M.mercatorFromTransition&&yr<.5*(l.GLOBE_ZOOM_THRESHOLD_MIN+l.GLOBE_ZOOM_THRESHOLD_MAX)?(M.setProjection({name:"globe"}),M.zoom=yr,this._cameraForBounds(M,d,g,_,b,I)):{center:_r,zoom:yr,bearing:_,pitch:b}}fitBounds(s,d,g){const _=this.cameraForBounds(s,d);return this._fitInternal(_,d,g)}fitScreenCoordinates(s,d,g,_,b){const I=l.Point.convert(s),M=l.Point.convert(d),O=new l.Point(Math.min(I.x,M.x),Math.min(I.y,M.y)),$=new l.Point(Math.max(I.x,M.x),Math.max(I.y,M.y));if(this.transform.projection.name==="mercator"&&this.transform.anyCornerOffEdge(I,M))return this;const k=this.transform.pointLocation3D(O),q=this.transform.pointLocation3D($),ie=this.transform.pointLocation3D(new l.Point(O.x,$.y)),le=this.transform.pointLocation3D(new l.Point($.x,O.y)),de=[Math.min(k.lng,q.lng,ie.lng,le.lng),Math.min(k.lat,q.lat,ie.lat,le.lat)],ce=[Math.max(k.lng,q.lng,ie.lng,le.lng),Math.max(k.lat,q.lat,ie.lat,le.lat)],me=_&&_.pitch?_.pitch:this.getPitch(),X=this._cameraForBounds(this.transform,de,ce,g,me,_);return this._fitInternal(X,_,b)}_fitInternal(s,d,g){return s?(delete(d=l.extend(s,d)).padding,d.linear?this.easeTo(d,g):this.flyTo(d,g)):this}jumpTo(s,d){this.stop();const g=s.preloadOnly?this.transform.clone():this.transform;let _=!1,b=!1,I=!1;return"zoom"in s&&g.zoom!==+s.zoom&&(_=!0,g.zoom=+s.zoom),s.center!==void 0&&(g.center=l.LngLat.convert(s.center)),"bearing"in s&&g.bearing!==+s.bearing&&(b=!0,g.bearing=+s.bearing),"pitch"in s&&g.pitch!==+s.pitch&&(I=!0,g.pitch=+s.pitch),s.padding==null||g.isPaddingEqual(s.padding)||(g.padding=s.padding),s.preloadOnly?(this._preloadTiles(g),this):(this.fire(new l.Event("movestart",d)).fire(new l.Event("move",d)),_&&this.fire(new l.Event("zoomstart",d)).fire(new l.Event("zoom",d)).fire(new l.Event("zoomend",d)),b&&this.fire(new l.Event("rotatestart",d)).fire(new l.Event("rotate",d)).fire(new l.Event("rotateend",d)),I&&this.fire(new l.Event("pitchstart",d)).fire(new l.Event("pitch",d)).fire(new l.Event("pitchend",d)),this.fire(new l.Event("moveend",d)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||l.warnOnce(Ws),this.transform.getFreeCameraOptions()}setFreeCameraOptions(s,d){const g=this.transform;if(!g.projection.supportsFreeCamera)return l.warnOnce(Ws),this;this.stop();const _=g.zoom,b=g.pitch,I=g.bearing;g.setFreeCameraOptions(s);const M=_!==g.zoom,O=b!==g.pitch,$=I!==g.bearing;return this.fire(new l.Event("movestart",d)).fire(new l.Event("move",d)),M&&this.fire(new l.Event("zoomstart",d)).fire(new l.Event("zoom",d)).fire(new l.Event("zoomend",d)),$&&this.fire(new l.Event("rotatestart",d)).fire(new l.Event("rotate",d)).fire(new l.Event("rotateend",d)),O&&this.fire(new l.Event("pitchstart",d)).fire(new l.Event("pitch",d)).fire(new l.Event("pitchend",d)),this.fire(new l.Event("moveend",d)),this}easeTo(s,d){this._stop(!1,s.easeId),((s=l.extend({offset:[0,0],duration:500,easing:l.ease},s)).animate===!1||this._prefersReducedMotion(s))&&(s.duration=0);const g=this.transform,_=this.getZoom(),b=this.getBearing(),I=this.getPitch(),M=this.getPadding(),O="zoom"in s?+s.zoom:_,$="bearing"in s?this._normalizeBearing(s.bearing,b):b,k="pitch"in s?+s.pitch:I,q="padding"in s?s.padding:g.padding,ie=l.Point.convert(s.offset);let le,de,ce;if(g.projection.name==="globe"){const Ue=l.MercatorCoordinate.fromLngLat(g.center),Ke=ie.rotate(-g.angle);Ue.x+=Ke.x/g.worldSize,Ue.y+=Ke.y/g.worldSize;const wt=Ue.toLngLat(),We=l.LngLat.convert(s.center||wt);this._normalizeCenter(We),le=g.centerPoint.add(Ke),de=new l.Point(Ue.x,Ue.y).mult(g.worldSize),ce=new l.Point(l.mercatorXfromLng(We.lng),l.mercatorYfromLat(We.lat)).mult(g.worldSize).sub(de)}else{le=g.centerPoint.add(ie);const Ue=g.pointLocation(le),Ke=l.LngLat.convert(s.center||Ue);this._normalizeCenter(Ke),de=g.project(Ue),ce=g.project(Ke).sub(de)}const me=g.zoomScale(O-_);let X,se;s.around&&(X=l.LngLat.convert(s.around),se=g.locationPoint(X));const xe=this._zooming||O!==_,be=this._rotating||b!==$,Re=this._pitching||k!==I,ze=!g.isPaddingEqual(q),Oe=Ue=>Ke=>{if(xe&&(Ue.zoom=l.number(_,O,Ke)),be&&(Ue.bearing=l.number(b,$,Ke)),Re&&(Ue.pitch=l.number(I,k,Ke)),ze&&(Ue.interpolatePadding(M,q,Ke),le=Ue.centerPoint.add(ie)),X)Ue.setLocationAtPoint(X,se);else{const wt=Ue.zoomScale(Ue.zoom-_),We=O>_?Math.min(2,me):Math.max(.5,me),ct=Math.pow(We,1-Ke),Qe=Ue.unproject(de.add(ce.mult(Ke*ct)).mult(wt));Ue.setLocationAtPoint(Ue.renderWorldCopies?Qe.wrap():Qe,le)}return s.preloadOnly||this._fireMoveEvents(d),Ue};if(s.preloadOnly){const Ue=this._emulate(Oe,s.duration,g);return this._preloadTiles(Ue),this}const Ve={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=xe,this._rotating=be,this._pitching=Re,this._padding=ze,this._easeId=s.easeId,this._prepareEase(d,s.noMoveStart,Ve),this._ease(Oe(g),Ue=>{g.recenterOnTerrain(),this._afterEase(d,Ue)},s),this}_prepareEase(s,d,g={}){this._moving=!0,this.transform.cameraElevationReference="sea",d||g.moving||this.fire(new l.Event("movestart",s)),this._zooming&&!g.zooming&&this.fire(new l.Event("zoomstart",s)),this._rotating&&!g.rotating&&this.fire(new l.Event("rotatestart",s)),this._pitching&&!g.pitching&&this.fire(new l.Event("pitchstart",s))}_fireMoveEvents(s){this.fire(new l.Event("move",s)),this._zooming&&this.fire(new l.Event("zoom",s)),this._rotating&&this.fire(new l.Event("rotate",s)),this._pitching&&this.fire(new l.Event("pitch",s))}_afterEase(s,d){if(this._easeId&&d&&this._easeId===d)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const g=this._zooming,_=this._rotating,b=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,g&&this.fire(new l.Event("zoomend",s)),_&&this.fire(new l.Event("rotateend",s)),b&&this.fire(new l.Event("pitchend",s)),this.fire(new l.Event("moveend",s))}flyTo(s,d){if(this._prefersReducedMotion(s)){const mt=l.pick(s,["center","zoom","bearing","pitch","around"]);return this.jumpTo(mt,d)}this.stop(),s=l.extend({offset:[0,0],speed:1.2,curve:1.42,easing:l.ease},s);const g=this.transform,_=this.getZoom(),b=this.getBearing(),I=this.getPitch(),M=this.getPadding(),O="zoom"in s?l.clamp(+s.zoom,g.minZoom,g.maxZoom):_,$="bearing"in s?this._normalizeBearing(s.bearing,b):b,k="pitch"in s?+s.pitch:I,q="padding"in s?s.padding:g.padding,ie=g.zoomScale(O-_),le=l.Point.convert(s.offset);let de=g.centerPoint.add(le);const ce=g.pointLocation(de),me=l.LngLat.convert(s.center||ce);this._normalizeCenter(me);const X=g.project(ce),se=g.project(me).sub(X);let xe=s.curve;const be=Math.max(g.width,g.height),Re=be/ie,ze=se.mag();if("minZoom"in s){const mt=l.clamp(Math.min(s.minZoom,_,O),g.minZoom,g.maxZoom),Pt=be/g.zoomScale(mt-_);xe=Math.sqrt(Pt/ze*2)}const Oe=xe*xe;function Ve(mt){const Pt=(Re*Re-be*be+(mt?-1:1)*Oe*Oe*ze*ze)/(2*(mt?Re:be)*Oe*ze);return Math.log(Math.sqrt(Pt*Pt+1)-Pt)}function Ue(mt){return(Math.exp(mt)-Math.exp(-mt))/2}function Ke(mt){return(Math.exp(mt)+Math.exp(-mt))/2}const wt=Ve(0);let We=function(mt){return Ke(wt)/Ke(wt+xe*mt)},ct=function(mt){return be*((Ke(wt)*(Ue(Pt=wt+xe*mt)/Ke(Pt))-Ue(wt))/Oe)/ze;var Pt},Qe=(Ve(1)-wt)/xe;if(Math.abs(ze)<1e-6||!isFinite(Qe)){if(Math.abs(be-Re)<1e-6)return this.easeTo(s,d);const mt=Re<be?-1:1;Qe=Math.abs(Math.log(Re/be))/xe,ct=function(){return 0},We=function(Pt){return Math.exp(mt*xe*Pt)}}s.duration="duration"in s?+s.duration:1e3*Qe/("screenSpeed"in s?+s.screenSpeed/xe:+s.speed),s.maxDuration&&s.duration>s.maxDuration&&(s.duration=0);const xt=b!==$,Xe=k!==I,lt=!g.isPaddingEqual(q),It=mt=>Pt=>{const dn=Pt*Qe,Rn=1/We(dn);mt.zoom=Pt===1?O:_+mt.scaleZoom(Rn),xt&&(mt.bearing=l.number(b,$,Pt)),Xe&&(mt.pitch=l.number(I,k,Pt)),lt&&(mt.interpolatePadding(M,q,Pt),de=mt.centerPoint.add(le));const Qt=Pt===1?me:mt.unproject(X.add(se.mult(ct(dn))).mult(Rn));return mt.setLocationAtPoint(mt.renderWorldCopies?Qt.wrap():Qt,de),mt._updateCameraOnTerrain(),s.preloadOnly||this._fireMoveEvents(d),mt};if(s.preloadOnly){const mt=this._emulate(It,s.duration,g);return this._preloadTiles(mt),this}return this._zooming=!0,this._rotating=xt,this._pitching=Xe,this._padding=lt,this._prepareEase(d,!1),this._ease(It(g),()=>this._afterEase(d),s),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(s,d){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const g=this._onEaseEnd;this._onEaseEnd=void 0,g.call(this,d)}if(!s){const g=this.handlers;g&&g.stop(!1)}return this}_ease(s,d,g){g.animate===!1||g.duration===0?(s(1),d()):(this._easeStart=l.exported.now(),this._easeOptions=g,this._onEaseFrame=s,this._onEaseEnd=d,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const s=Math.min((l.exported.now()-this._easeStart)/this._easeOptions.duration,1),d=this._onEaseFrame;d&&d(this._easeOptions.easing(s)),s<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(s,d){s=l.wrap(s,-180,180);const g=Math.abs(s-d);return Math.abs(s-360-d)<g&&(s-=360),Math.abs(s+360-d)<g&&(s+=360),s}_normalizeCenter(s){const d=this.transform;if(!d.renderWorldCopies||d.maxBounds)return;const g=s.lng-d.center.lng;s.lng+=g>180?-360:g<-180?360:0}_prefersReducedMotion(s){return this._respectPrefersReducedMotion&&l.exported.prefersReducedMotion&&!(s&&s.essential)}_emulate(s,d,g){const _=Math.ceil(15*d/1e3),b=[],I=s(g.clone());for(let M=0;M<=_;M++){const O=I(M/_);b.push(O.clone())}return b}}class Jt{constructor(s={}){this.options=s,l.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(s){const d=this.options&&this.options.compact;return this._map=s,this._container=D("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=D("button","mapboxgl-ctrl-attrib-button",this._container),D("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=D("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),d&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),d===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(s,d){const g=this._map._getUIString(`AttributionControl.${d}`);s.setAttribute("aria-label",g),s.removeAttribute("title"),s.firstElementChild&&s.firstElementChild.setAttribute("title",g)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let s=this._editLink;s||(s=this._editLink=this._container.querySelector(".mapbox-improve-map"));const d=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||l.config.ACCESS_TOKEN}];if(s){const g=d.reduce((_,b,I)=>(b.value&&(_+=`${b.key}=${b.value}${I<d.length-1?"&":""}`),_),"?");s.href=`${l.config.FEEDBACK_URL}/${g}#${Dc(this._map,!0)}`,s.rel="noopener nofollow",this._setElementTitle(s,"MapFeedback")}}_updateData(s){!s||s.sourceDataType!=="metadata"&&s.sourceDataType!=="visibility"&&s.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let s=[];if(this._map.style.stylesheet){const _=this._map.style.stylesheet;this.styleOwner=_.owner,this.styleId=_.id}const d=this._map.style._sourceCaches;for(const _ in d){const b=d[_];if(b.used){const I=b.getSource();I.attribution&&s.indexOf(I.attribution)<0&&s.push(I.attribution)}}s.sort((_,b)=>_.length-b.length),s=s.filter((_,b)=>{for(let I=b+1;I<s.length;I++)if(s[I].indexOf(_)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?s=[...this.options.customAttribution,...s]:s.unshift(this.options.customAttribution));const g=s.join(" | ");g!==this._attribHTML&&(this._attribHTML=g,s.length?(this._innerContainer.innerHTML=g,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class ff{constructor(){l.bindAll(["_updateLogo","_updateCompact"],this)}onAdd(s){this._map=s,this._container=D("div","mapboxgl-ctrl");const d=D("a","mapboxgl-ctrl-logo");return d.target="_blank",d.rel="noopener nofollow",d.href="https://www.mapbox.com/",d.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),d.setAttribute("rel","noopener nofollow"),this._container.appendChild(d),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(s){s&&s.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const s=this._map.style._sourceCaches;if(Object.entries(s).length===0)return!0;for(const d in s){const g=s[d].getSource();if(g.hasOwnProperty("mapbox_logo")&&!g.mapbox_logo)return!1}return!0}_updateCompact(){const s=this._container.children;if(s.length){const d=s[0];this._map.getCanvasContainer().offsetWidth<250?d.classList.add("mapboxgl-compact"):d.classList.remove("mapboxgl-compact")}}}class pf{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(s){const d=++this._id;return this._queue.push({callback:s,id:d,cancelled:!1}),d}remove(s){const d=this._currentlyRunning,g=d?this._queue.concat(d):this._queue;for(const _ of g)if(_.id===s)return void(_.cancelled=!0)}run(s=0){const d=this._currentlyRunning=this._queue;this._queue=[];for(const g of d)if(!g.cancelled&&(g.callback(s),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function kl(p,s,d){if(p=new l.LngLat(p.lng,p.lat),s){const g=new l.LngLat(p.lng-360,p.lat),_=new l.LngLat(p.lng+360,p.lat),b=360*Math.ceil(Math.abs(p.lng-d.center.lng)/360),I=d.locationPoint(p).distSqr(s),M=s.x<0||s.y<0||s.x>d.width||s.y>d.height;d.locationPoint(g).distSqr(s)<I&&(M||Math.abs(g.lng-d.center.lng)<b)?p=g:d.locationPoint(_).distSqr(s)<I&&(M||Math.abs(_.lng-d.center.lng)<b)&&(p=_)}for(;Math.abs(p.lng-d.center.lng)>180;){const g=d.locationPoint(p);if(g.x>=0&&g.y>=0&&g.x<=d.width&&g.y<=d.height)break;p.lng>d.center.lng?p.lng-=360:p.lng+=360}return p}const qs={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class qt extends l.Evented{constructor(s,d){if(super(),(s instanceof l.window.HTMLElement||d)&&(s=l.extend({element:s},d)),l.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=s&&s.anchor||"center",this._color=s&&s.color||"#3FB1CE",this._scale=s&&s.scale||1,this._draggable=s&&s.draggable||!1,this._clickTolerance=s&&s.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=s&&s.rotation||0,this._rotationAlignment=s&&s.rotationAlignment||"auto",this._pitchAlignment=s&&s.pitchAlignment&&s.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=s&&s.occludedOpacity||.2,s&&s.element)this._element=s.element,this._offset=l.Point.convert(s&&s.offset||[0,0]);else{this._defaultMarker=!0,this._element=D("div");const _=41,b=27,I=N("svg",{display:"block",height:_*this._scale+"px",width:b*this._scale+"px",viewBox:`0 0 ${b} ${_}`},this._element),M=N("radialGradient",{id:"shadowGradient"},N("defs",{},I));N("stop",{offset:"10%","stop-opacity":.4},M),N("stop",{offset:"100%","stop-opacity":.05},M),N("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},I),N("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},I),N("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},I),N("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},I),this._offset=l.Point.convert(s&&s.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",_=>{_.preventDefault()}),this._element.addEventListener("mousedown",_=>{_.preventDefault()});const g=this._element.classList;for(const _ in qs)g.remove(`mapboxgl-marker-anchor-${_}`);g.add(`mapboxgl-marker-anchor-${this._anchor}`),this._popup=null}addTo(s){return s===this._map||(this.remove(),this._map=s,s.getCanvasContainer().appendChild(this._element),s.on("move",this._updateMoving),s.on("moveend",this._update),s.on("remove",this._clearFadeTimer),s._addMarker(this),this.setDraggable(this._draggable),this._update(),s.on("click",this._onMapClick)),this}remove(){const s=this._map;return s&&(s.off("click",this._onMapClick),s.off("move",this._updateMoving),s.off("moveend",this._update),s.off("mousedown",this._addDragHandler),s.off("touchstart",this._addDragHandler),s.off("mouseup",this._onUp),s.off("touchend",this._onUp),s.off("mousemove",this._onMove),s.off("touchmove",this._onMove),s.off("remove",this._clearFadeTimer),s._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(s){return this._lngLat=l.LngLat.convert(s),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(s){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),s){if(!("offset"in s.options)){const _=Math.sqrt(Math.pow(13.5,2)/2);s.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[_,-1*(38.1-13.5+_)],"bottom-right":[-_,-1*(38.1-13.5+_)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=s,s._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(s){const d=s.code,g=s.charCode||s.keyCode;d!=="Space"&&d!=="Enter"&&g!==32&&g!==13||this.togglePopup()}_onMapClick(s){const d=s.originalEvent.target,g=this._element;this._popup&&(d===g||g.contains(d))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const s=this._popup;return s?(s.isOpen()?(s.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(s.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const s=this._map,d=this._pos;if(!s||!d)return!1;const g=s.unproject(d),_=s.getFreeCameraOptions();if(!_.position)return!1;const b=_.position.toLngLat();return b.distanceTo(g)<.9*b.distanceTo(this._lngLat)}_evaluateOpacity(){const s=this._map;if(!s)return;const d=this._pos;if(!d||d.x<0||d.x>s.transform.width||d.y<0||d.y>s.transform.height)return void this._clearFadeTimer();const g=s.unproject(d);let _;s._showingGlobe()&&l.isLngLatBehindGlobe(s.transform,this._lngLat)?_=0:(_=1-s._queryFogOpacity(g),s.transform._terrainEnabled()&&s.getTerrain()&&this._behindTerrain()&&(_*=this._occludedOpacity)),this._element.style.opacity=`${_}`,this._element.style.pointerEvents=_>0?"auto":"none",this._popup&&this._popup._setOpacity(_),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const s=this._pos;if(!s||!this._map)return;const d=this._offset.mult(this._scale);this._element.style.transform=`
            translate(${s.x}px,${s.y}px)
            ${qs[this._anchor]}
            ${this._calculateXYTransform()} ${this._calculateZTransform()}
            translate(${d.x}px,${d.y}px)
        `}_calculateXYTransform(){const s=this._pos,d=this._map,g=this.getPitchAlignment();if(!d||!s||g!=="map")return"";if(!d._showingGlobe()){const O=d.getPitch();return O?`rotateX(${O}deg)`:""}const _=l.radToDeg(l.globeTiltAtLngLat(d.transform,this._lngLat)),b=s.sub(l.globeCenterToScreenPoint(d.transform)),I=Math.abs(b.x)+Math.abs(b.y);if(I===0)return"";const M=_/I;return`rotateX(${-b.y*M}deg) rotateY(${b.x*M}deg)`}_calculateZTransform(){const s=this._pos,d=this._map;if(!d||!s)return"";let g=0;const _=this.getRotationAlignment();if(_==="map")if(d._showingGlobe()){const b=d.project(new l.LngLat(this._lngLat.lng,this._lngLat.lat+.001)),I=d.project(new l.LngLat(this._lngLat.lng,this._lngLat.lat-.001)).sub(b);g=l.radToDeg(Math.atan2(I.y,I.x))-90}else g=-d.getBearing();else if(_==="horizon"){const b=l.smoothstep(4,6,d.getZoom()),I=l.globeCenterToScreenPoint(d.transform);I.y+=b*d.transform.height;const M=s.sub(I),O=l.radToDeg(Math.atan2(M.y,M.x));g=(O>90?O-270:O+90)*(1-b)}return g+=this._rotation,g?`rotateZ(${g}deg)`:""}_update(s){l.window.cancelAnimationFrame(this._updateFrameId);const d=this._map;d&&(d.transform.renderWorldCopies&&(this._lngLat=kl(this._lngLat,this._pos,d.transform)),this._pos=d.project(this._lngLat),s===!0?this._updateFrameId=l.window.requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),d._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(d._showingGlobe()||d.getTerrain()||d.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(s){return this._offset=l.Point.convert(s),this._update(),this}_onMove(s){const d=this._map;if(!d)return;const g=this._pointerdownPos,_=this._positionDelta;if(g&&_){if(!this._isDragging){const b=this._clickTolerance||d._clickTolerance;if(s.point.dist(g)<b)return;this._isDragging=!0}this._pos=s.point.sub(_),this._lngLat=d.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new l.Event("dragstart"))),this.fire(new l.Event("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const s=this._map;s&&(s.off("mousemove",this._onMove),s.off("touchmove",this._onMove)),this._state==="active"&&this.fire(new l.Event("dragend")),this._state="inactive"}_addDragHandler(s){const d=this._map,g=this._pos;d&&g&&this._element.contains(s.originalEvent.target)&&(s.preventDefault(),this._positionDelta=s.point.sub(g),this._pointerdownPos=s.point,this._state="pending",d.on("mousemove",this._onMove),d.on("touchmove",this._onMove),d.once("mouseup",this._onUp),d.once("touchend",this._onUp))}setDraggable(s){this._draggable=!!s;const d=this._map;return d&&(s?(d.on("mousedown",this._addDragHandler),d.on("touchstart",this._addDragHandler)):(d.off("mousedown",this._addDragHandler),d.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(s){return this._rotation=s||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(s){return this._rotationAlignment=s||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment==="auto"||this._rotationAlignment==="horizon"&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(s){return this._pitchAlignment=s||"auto",this._update(),this}getPitchAlignment(){return this._pitchAlignment==="auto"?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(s){return this._occludedOpacity=s||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const mf={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},c_=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function ug(p=new l.Point(0,0),s="bottom"){if(typeof p=="number"){const d=Math.round(Math.sqrt(.5*Math.pow(p,2)));switch(s){case"top":return new l.Point(0,p);case"top-left":return new l.Point(d,d);case"top-right":return new l.Point(-d,d);case"bottom":return new l.Point(0,-p);case"bottom-left":return new l.Point(d,-d);case"bottom-right":return new l.Point(-d,-d);case"left":return new l.Point(p,0);case"right":return new l.Point(-p,0)}return new l.Point(0,0)}return p instanceof l.Point||Array.isArray(p)?l.Point.convert(p):l.Point.convert(p[s]||[0,0])}class gf{constructor(s){this.jumpTo(s)}getValue(s){if(s<=this._startTime)return this._start;if(s>=this._endTime)return this._end;const d=l.easeCubicInOut((s-this._startTime)/(this._endTime-this._startTime));return this._start*(1-d)+this._end*d}isEasing(s){return s>=this._startTime&&s<=this._endTime}jumpTo(s){this._startTime=-1/0,this._endTime=-1/0,this._start=s,this._end=s}easeTo(s,d,g){this._start=this.getValue(d),this._end=s,this._startTime=d,this._endTime=d+g}}const dg={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use ⌘ + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},hg={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,respectPrefersReducedMotion:!0,crossSourceCollisions:!0},u_={showCompass:!0,showZoom:!0,visualizePitch:!1};class d_{constructor(s,d,g=!1){this._clickTolerance=10,this.element=d,this.mouseRotate=new lf({clickTolerance:s.dragRotate._mouseRotate._clickTolerance}),this.map=s,g&&(this.mousePitch=new cf({clickTolerance:s.dragRotate._mousePitch._clickTolerance})),l.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),d.addEventListener("mousedown",this.mousedown),d.addEventListener("touchstart",this.touchstart,{passive:!1}),d.addEventListener("touchmove",this.touchmove),d.addEventListener("touchend",this.touchend),d.addEventListener("touchcancel",this.reset)}down(s,d){this.mouseRotate.mousedown(s,d),this.mousePitch&&this.mousePitch.mousedown(s,d),j()}move(s,d){const g=this.map,_=this.mouseRotate.mousemoveWindow(s,d),b=_&&_.bearingDelta;if(b&&g.setBearing(g.getBearing()+b),this.mousePitch){const I=this.mousePitch.mousemoveWindow(s,d),M=I&&I.pitchDelta;M&&g.setPitch(g.getPitch()+M)}}off(){const s=this.element;s.removeEventListener("mousedown",this.mousedown),s.removeEventListener("touchstart",this.touchstart,{passive:!1}),s.removeEventListener("touchmove",this.touchmove),s.removeEventListener("touchend",this.touchend),s.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){B(),l.window.removeEventListener("mousemove",this.mousemove),l.window.removeEventListener("mouseup",this.mouseup)}mousedown(s){this.down(l.extend({},s,{ctrlKey:!0,preventDefault:()=>s.preventDefault()}),ne(this.element,s)),l.window.addEventListener("mousemove",this.mousemove),l.window.addEventListener("mouseup",this.mouseup)}mousemove(s){this.move(s,ne(this.element,s))}mouseup(s){this.mouseRotate.mouseupWindow(s),this.mousePitch&&this.mousePitch.mouseupWindow(s),this.offTemp()}touchstart(s){s.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=re(this.element,s.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>s.preventDefault()},this._startPos))}touchmove(s){s.targetTouches.length!==1?this.reset():(this._lastPos=re(this.element,s.targetTouches)[0],this.move({preventDefault:()=>s.preventDefault()},this._lastPos))}touchend(s){s.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const vf={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},yf={maxWidth:100,unit:"metric"},_f={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"},$l={version:l.version,supported:C,setRTLTextPlugin:l.setRTLTextPlugin,getRTLTextPluginStatus:l.getRTLTextPluginStatus,Map:class extends td{constructor(p){if(l.LivePerformanceUtils.mark(l.PerformanceMarkers.create),(p=l.extend({},hg,p)).minZoom!=null&&p.maxZoom!=null&&p.minZoom>p.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(p.minPitch!=null&&p.maxPitch!=null&&p.minPitch>p.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(p.minPitch!=null&&p.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(p.maxPitch!=null&&p.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(p.antialias&&l.isSafariWithAntialiasingBug(l.window)&&(p.antialias=!1,l.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new Ol(p.minZoom,p.maxZoom,p.minPitch,p.maxPitch,p.renderWorldCopies),p),this._interactive=p.interactive,this._minTileCacheSize=p.minTileCacheSize,this._maxTileCacheSize=p.maxTileCacheSize,this._failIfMajorPerformanceCaveat=p.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=p.preserveDrawingBuffer,this._antialias=p.antialias,this._useWebGL2=p.useWebGL2,this._trackResize=p.trackResize,this._bearingSnap=p.bearingSnap,this._refreshExpiredTiles=p.refreshExpiredTiles,this._fadeDuration=p.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=p.crossSourceCollisions,this._collectResourceTiming=p.collectResourceTiming,this._optimizeForTerrain=p.optimizeForTerrain,this._language=this._parseLanguage(p.language),this._worldview=p.worldview,this._renderTaskQueue=new pf,this._domRenderTaskQueue=new pf,this._controls=[],this._markers=[],this._popups=[],this._mapId=l.uniqueId(),this._locale=l.extend({},dg,p.locale),this._clickTolerance=p.clickTolerance,this._cooperativeGestures=p.cooperativeGestures,this._performanceMetricsCollection=p.performanceMetricsCollection,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new gf(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._requestManager=new l.RequestManager(p.transformRequest,p.accessToken,p.testMode),this._silenceAuthErrors=!!p.testMode,typeof p.container=="string"){if(this._container=l.window.document.getElementById(p.container),!this._container)throw new Error(`Container '${p.container}' not found.`)}else{if(!(p.container instanceof l.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=p.container}if(this._container.childNodes.length>0&&l.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),p.maxBounds&&this.setMaxBounds(p.maxBounds),l.bindAll(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),l.window!==void 0&&(l.window.addEventListener("online",this._onWindowOnline,!1),l.window.addEventListener("resize",this._onWindowResize,!1),l.window.addEventListener("orientationchange",this._onWindowResize,!1),l.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1),l.window.addEventListener("visibilitychange",this._onVisibilityChange,!1)),this.handlers=new ba(this,p),this._localFontFamily=p.localFontFamily,this._localIdeographFontFamily=p.localIdeographFontFamily,p.style&&this.setStyle(p.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),p.projection&&this.setProjection(p.projection),this._hash=p.hash&&new rf(typeof p.hash=="string"&&p.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:p.center,zoom:p.zoom,bearing:p.bearing,pitch:p.pitch}),p.bounds&&(this.resize(),this.fitBounds(p.bounds,l.extend({},p.fitBoundsOptions,{duration:0})))),this.resize(),p.attributionControl&&this.addControl(new Jt({customAttribution:p.customAttribution})),this._logoControl=new ff,this.addControl(this._logoControl,p.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",s=>{this._update(s.dataType==="style"),this.fire(new l.Event(`${s.dataType}data`,s))}),this.on("dataloading",s=>{this.fire(new l.Event(`${s.dataType}dataloading`,s))})}_getMapId(){return this._mapId}addControl(p,s){if(s===void 0&&(s=p.getDefaultPosition?p.getDefaultPosition():"top-right"),!p||!p.onAdd)return this.fire(new l.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const d=p.onAdd(this);this._controls.push(p);const g=this._controlPositions[s];return s.indexOf("bottom")!==-1?g.insertBefore(d,g.firstChild):g.appendChild(d),this}removeControl(p){if(!p||!p.onRemove)return this.fire(new l.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const s=this._controls.indexOf(p);return s>-1&&this._controls.splice(s,1),p.onRemove(this),this}hasControl(p){return this._controls.indexOf(p)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(p){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const s=!this._moving;return s&&this.fire(new l.Event("movestart",p)).fire(new l.Event("move",p)),this.fire(new l.Event("resize",p)),s&&this.fire(new l.Event("moveend",p)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(p){return this.transform.setMaxBounds(l.LngLatBounds.convert(p)),this._update()}setMinZoom(p){if((p=p??-2)>=-2&&p<=this.transform.maxZoom)return this.transform.minZoom=p,this._update(),this.getZoom()<p?this.setZoom(p):this.fire(new l.Event("zoomstart")).fire(new l.Event("zoom")).fire(new l.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(p){if((p=p??22)>=this.transform.minZoom)return this.transform.maxZoom=p,this._update(),this.getZoom()>p?this.setZoom(p):this.fire(new l.Event("zoomstart")).fire(new l.Event("zoom")).fire(new l.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(p){if((p=p??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(p>=0&&p<=this.transform.maxPitch)return this.transform.minPitch=p,this._update(),this.getPitch()<p?this.setPitch(p):this.fire(new l.Event("pitchstart")).fire(new l.Event("pitch")).fire(new l.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(p){if((p=p??85)>85)throw new Error("maxPitch must be less than or equal to 85");if(p>=this.transform.minPitch)return this.transform.maxPitch=p,this._update(),this.getPitch()>p?this.setPitch(p):this.fire(new l.Event("pitchstart")).fire(new l.Event("pitch")).fire(new l.Event("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(p){return this.transform.renderWorldCopies=p,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(p){return p==="auto"?l.window.navigator.language:Array.isArray(p)?p.length===0?void 0:p.map(s=>s==="auto"?l.window.navigator.language:s):p}setLanguage(p){const s=this._parseLanguage(p);if(!this.style||s===this._language)return this;this._language=s,this.style._reloadSources();for(const d of this._controls)d._setLanguage&&d._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(p){return this.style&&p!==this._worldview?(this._worldview=p,this.style._reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return this.transform.projection.name==="globe"}setProjection(p){return this._lazyInitEmptyStyle(),p?typeof p=="string"&&(p={name:p}):p=null,this._useExplicitProjection=!!p,this._prioritizeAndUpdateProjection(p,this.style.stylesheet?this.style.stylesheet.projection:null)}_updateProjectionTransition(){if(this.getProjection().name!=="globe")return;const p=this.transform,s=p.projection.name;let d;s==="globe"&&p.zoom>=l.GLOBE_ZOOM_THRESHOLD_MAX?(p.setMercatorFromTransition(),d=!0):s==="mercator"&&p.zoom<l.GLOBE_ZOOM_THRESHOLD_MAX&&(p.setProjection({name:"globe"}),d=!0),d&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(p,s){return this._updateProjection(p||s||{name:"mercator"})}_updateProjection(p){let s;if(s=p.name==="globe"&&this.transform.zoom>=l.GLOBE_ZOOM_THRESHOLD_MAX?this.transform.setMercatorFromTransition():this.transform.setProjection(p),this.style.applyProjectionUpdate(),s){this.painter.clearBackgroundTiles();for(const d in this.style._sourceCaches)this.style._sourceCaches[d].clearTiles();this._update(!0),this._forceMarkerAndPopupUpdate(!0)}return this}project(p){return this.transform.locationPoint3D(l.LngLat.convert(p))}unproject(p){return this.transform.pointLocation3D(l.Point.convert(p))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(p,s,d){if(p==="mouseenter"||p==="mouseover"){let g=!1;const _=I=>{const M=s.filter($=>this.getLayer($)),O=M.length?this.queryRenderedFeatures(I.point,{layers:M}):[];O.length?g||(g=!0,d.call(this,new Ci(p,this,I.originalEvent,{features:O}))):g=!1},b=()=>{g=!1};return{layers:new Set(s),listener:d,delegates:{mousemove:_,mouseout:b}}}if(p==="mouseleave"||p==="mouseout"){let g=!1;const _=I=>{const M=s.filter(O=>this.getLayer(O));(M.length?this.queryRenderedFeatures(I.point,{layers:M}):[]).length?g=!0:g&&(g=!1,d.call(this,new Ci(p,this,I.originalEvent)))},b=I=>{g&&(g=!1,d.call(this,new Ci(p,this,I.originalEvent)))};return{layers:new Set(s),listener:d,delegates:{mousemove:_,mouseout:b}}}{const g=_=>{const b=s.filter(M=>this.getLayer(M)),I=b.length?this.queryRenderedFeatures(_.point,{layers:b}):[];I.length&&(_.features=I,d.call(this,_),delete _.features)};return{layers:new Set(s),listener:d,delegates:{[p]:g}}}}on(p,s,d){if(d===void 0)return super.on(p,s);Array.isArray(s)||(s=[s]);const g=this._createDelegatedListener(p,s,d);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[p]=this._delegatedListeners[p]||[],this._delegatedListeners[p].push(g);for(const _ in g.delegates)this.on(_,g.delegates[_]);return this}once(p,s,d){if(d===void 0)return super.once(p,s);Array.isArray(s)||(s=[s]);const g=this._createDelegatedListener(p,s,d);for(const _ in g.delegates)this.once(_,g.delegates[_]);return this}off(p,s,d){if(d===void 0)return super.off(p,s);s=new Set(Array.isArray(s)?s:[s]);const g=(b,I)=>{if(b.size!==I.size)return!1;for(const M of b)if(!I.has(M))return!1;return!0},_=this._delegatedListeners?this._delegatedListeners[p]:void 0;return _&&(b=>{for(let I=0;I<b.length;I++){const M=b[I];if(M.listener===d&&g(M.layers,s)){for(const O in M.delegates)this.off(O,M.delegates[O]);return b.splice(I,1),this}}})(_),this}queryRenderedFeatures(p,s){return this.style?(s!==void 0||p===void 0||p instanceof l.Point||Array.isArray(p)||(s=p,p=void 0),this.style.queryRenderedFeatures(p=p||[[0,0],[this.transform.width,this.transform.height]],s=s||{},this.transform)):[]}querySourceFeatures(p,s){return this.style.querySourceFeatures(p,s)}isPointOnSurface(p){const{name:s}=this.transform.projection;return s!=="globe"&&s!=="mercator"&&l.warnOnce(`${s} projection does not support isPointOnSurface, this API may behave unexpectedly.`),this.transform.isPointOnSurface(l.Point.convert(p))}setStyle(p,s){return(s=l.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},s)).diff!==!1&&s.localIdeographFontFamily===this._localIdeographFontFamily&&s.localFontFamily===this._localFontFamily&&this.style&&p?(this._diffStyle(p,s),this):(this._localIdeographFontFamily=s.localIdeographFontFamily,this._localFontFamily=s.localFontFamily,this._updateStyle(p,s))}_getUIString(p){const s=this._locale[p];if(s==null)throw new Error(`Missing UI string '${p}'`);return s}_updateStyle(p,s){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),p&&(this.style=new _a(this,s||{}),this.style.setEventedParent(this,{style:this.style}),typeof p=="string"?this.style.loadURL(p):this.style.loadJSON(p)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new _a(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(p,s){if(typeof p=="string"){const d=this._requestManager.normalizeStyleURL(p),g=this._requestManager.transformRequest(d,l.ResourceType.Style);l.getJSON(g,(_,b)=>{_?this.fire(new l.ErrorEvent(_)):b&&this._updateDiff(b,s)})}else typeof p=="object"&&this._updateDiff(p,s)}_updateDiff(p,s){try{this.style.setState(p)&&this._update(!0)}catch(d){l.warnOnce(`Unable to perform style diff: ${d.message||d.error||d}.  Rebuilding the style from scratch.`),this._updateStyle(p,s)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(l.warnOnce("There is no style added to the map."),!1)}addSource(p,s){return this._lazyInitEmptyStyle(),this.style.addSource(p,s),this._update(!0)}isSourceLoaded(p){return!!this.style&&this.style._isSourceCacheLoaded(p)}areTilesLoaded(){const p=this.style&&this.style._sourceCaches;for(const s in p){const d=p[s]._tiles;for(const g in d){const _=d[g];if(_.state!=="loaded"&&_.state!=="errored")return!1}}return!0}addSourceType(p,s,d){this._lazyInitEmptyStyle(),this.style.addSourceType(p,s,d)}removeSource(p){return this.style.removeSource(p),this._updateTerrain(),this._update(!0)}getSource(p){return this.style.getSource(p)}addImage(p,s,{pixelRatio:d=1,sdf:g=!1,stretchX:_,stretchY:b,content:I}={}){if(this._lazyInitEmptyStyle(),s instanceof l.window.HTMLImageElement||l.window.ImageBitmap&&s instanceof l.window.ImageBitmap){const{width:M,height:O,data:$}=l.exported.getImageData(s);this.style.addImage(p,{data:new l.RGBAImage({width:M,height:O},$),pixelRatio:d,stretchX:_,stretchY:b,content:I,sdf:g,version:0})}else if(s.width===void 0||s.height===void 0)this.fire(new l.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:M,height:O}=s,$=s;this.style.addImage(p,{data:new l.RGBAImage({width:M,height:O},new Uint8Array($.data)),pixelRatio:d,stretchX:_,stretchY:b,content:I,sdf:g,version:0,userImage:$}),$.onAdd&&$.onAdd(this,p)}}updateImage(p,s){const d=this.style.getImage(p);if(!d)return void this.fire(new l.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const g=s instanceof l.window.HTMLImageElement||l.window.ImageBitmap&&s instanceof l.window.ImageBitmap?l.exported.getImageData(s):s,{width:_,height:b}=g;_!==void 0&&b!==void 0?_===d.data.width&&b===d.data.height?(d.data.replace(g.data,!(s instanceof l.window.HTMLImageElement||l.window.ImageBitmap&&s instanceof l.window.ImageBitmap)),this.style.updateImage(p,d)):this.fire(new l.ErrorEvent(new Error(`The width and height of the updated image (${_}, ${b})
                must be that same as the previous version of the image
                (${d.data.width}, ${d.data.height})`))):this.fire(new l.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}hasImage(p){return p?!!this.style.getImage(p):(this.fire(new l.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(p){this.style.removeImage(p)}loadImage(p,s){l.getImage(this._requestManager.transformRequest(p,l.ResourceType.Image),(d,g)=>{s(d,g instanceof l.window.HTMLImageElement?l.exported.getImageData(g):g)})}listImages(){return this.style.listImages()}addLayer(p,s){return this._lazyInitEmptyStyle(),this.style.addLayer(p,s),this._update(!0)}moveLayer(p,s){return this.style.moveLayer(p,s),this._update(!0)}removeLayer(p){return this.style.removeLayer(p),this._update(!0)}getLayer(p){return this.style.getLayer(p)}setLayerZoomRange(p,s,d){return this.style.setLayerZoomRange(p,s,d),this._update(!0)}setFilter(p,s,d={}){return this.style.setFilter(p,s,d),this._update(!0)}getFilter(p){return this.style.getFilter(p)}setPaintProperty(p,s,d,g={}){return this.style.setPaintProperty(p,s,d,g),this._update(!0)}getPaintProperty(p,s){return this.style.getPaintProperty(p,s)}setLayoutProperty(p,s,d,g={}){return this.style.setLayoutProperty(p,s,d,g),this._update(!0)}getLayoutProperty(p,s){return this.style.getLayoutProperty(p,s)}setLight(p,s={}){return this._lazyInitEmptyStyle(),this.style.setLight(p,s),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(p){return this._lazyInitEmptyStyle(),!p&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(p),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(p){return this._lazyInitEmptyStyle(),this.style.setFog(p),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(p){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(l.LngLat.convert(p),this.transform):0}setFeatureState(p,s){return this.style.setFeatureState(p,s),this._update()}removeFeatureState(p,s){return this.style.removeFeatureState(p,s),this._update()}getFeatureState(p){return this.style.getFeatureState(p)}_updateContainerDimensions(){if(!this._container)return;const p=this._container.getBoundingClientRect().width||400,s=this._container.getBoundingClientRect().height||300;let d,g,_,b=this._container;for(;b&&(!g||!_);){const I=l.window.getComputedStyle(b).transform;I&&I!=="none"&&(d=I.match(/matrix.*\((.+)\)/)[1].split(", "),d[0]&&d[0]!=="0"&&d[0]!=="1"&&(g=d[0]),d[3]&&d[3]!=="0"&&d[3]!=="1"&&(_=d[3])),b=b.parentElement}this._containerWidth=g?Math.abs(p/g):p,this._containerHeight=_?Math.abs(s/_):s}_detectMissingCSS(){l.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&l.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const p=this._container;p.classList.add("mapboxgl-map"),(this._missingCSSCanary=D("div","mapboxgl-canary",p)).style.visibility="hidden",this._detectMissingCSS();const s=this._canvasContainer=D("div","mapboxgl-canvas-container",p);this._interactive&&s.classList.add("mapboxgl-interactive"),this._canvas=D("canvas","mapboxgl-canvas",s),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const d=this._controlContainer=D("div","mapboxgl-control-container",p),g=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(_=>{g[_]=D("div",`mapboxgl-ctrl-${_}`,d)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(p,s){const d=l.exported.devicePixelRatio||1;this._canvas.width=d*Math.ceil(p),this._canvas.height=d*Math.ceil(s),this._canvas.style.width=`${p}px`,this._canvas.style.height=`${s}px`}_addMarker(p){this._markers.push(p)}_removeMarker(p){const s=this._markers.indexOf(p);s!==-1&&this._markers.splice(s,1)}_addPopup(p){this._popups.push(p)}_removePopup(p){const s=this._popups.indexOf(p);s!==-1&&this._popups.splice(s,1)}_setupPainter(){const p=l.extend({},C.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),s=this._useWebGL2&&this._canvas.getContext("webgl2",p),d=s||this._canvas.getContext("webgl",p)||this._canvas.getContext("experimental-webgl",p);d?(this._useWebGL2&&!s&&l.warnOnce("Failed to create WebGL 2 context. Using WebGL 1."),l.storeAuthState(d,!0),this.painter=new Al(d,this.transform,!!s),this.on("data",g=>{g.dataType==="source"&&this.painter.setTileLoadedFlag(!0)}),l.exported$1.testSupport(d)):this.fire(new l.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(p){p.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new l.Event("webglcontextlost",{originalEvent:p}))}_contextRestored(p){this._setupPainter(),this.resize(),this._update(),this.fire(new l.Event("webglcontextrestored",{originalEvent:p}))}_onMapScroll(p){if(p.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(p){return this.style?(this._styleDirty=this._styleDirty||p,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(p){return this._update(),this._renderTaskQueue.add(p)}_cancelRenderFrame(p){this._renderTaskQueue.remove(p)}_requestDomTask(p){!this.loaded()||this.loaded()&&!this.isMoving()?p():this._domRenderTaskQueue.add(p)}_render(p){let s;const d=this.painter.context.extTimerQuery,g=l.exported.now();if(this.listens("gpu-timing-frame")&&(s=d.createQueryEXT(),d.beginQueryEXT(d.TIME_ELAPSED_EXT,s)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],l.window.performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],l.window.performance.now())),this._renderTaskQueue.run(p),this._domRenderTaskQueue.run(p),this._removed)return;this._updateProjectionTransition();const _=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const M=this.transform.zoom,O=this.transform.pitch,$=l.exported.now(),k=new l.EvaluationParameters(M,{now:$,fadeDuration:_,pitch:O,transition:this.style.getTransition()});this.style.update(k)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let b=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),b=this._updateAverageElevation(g),this.style._updateSources(this.transform),this._forceMarkerAndPopupUpdate()):b=this._updateAverageElevation(g),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,_,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:_,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new l.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new l.Event("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),s){const M=l.exported.now()-g;d.endQueryEXT(d.TIME_ELAPSED_EXT,s),setTimeout(()=>{const O=d.getQueryObjectEXT(s,d.QUERY_RESULT_EXT)/1e6;d.deleteQueryEXT(s),this.fire(new l.Event("gpu-timing-frame",{cpuTime:M,gpuTime:O})),l.window.performance.mark("frame-gpu",{startTime:g,detail:{gpuTime:O}})},50)}if(this.listens("gpu-timing-layer")){const M=this.painter.collectGpuTimers();setTimeout(()=>{const O=this.painter.queryGpuTimers(M);this.fire(new l.Event("gpu-timing-layer",{layerTimes:O}))},50)}if(this.listens("gpu-timing-deferred-render")){const M=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const O=this.painter.queryGpuTimeDeferredRender(M);this.fire(new l.Event("gpu-timing-deferred-render",{gpuTime:O}))},50)}const I=this._sourcesDirty||this._styleDirty||this._placementDirty||b;if(I||this._repaint)this.triggerRepaint();else{const M=!this.isMoving()&&this.loaded();if(M&&(b=this._updateAverageElevation(g,!0)),b)this.triggerRepaint();else if(this._triggerFrame(!1),M&&(this.fire(new l.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const O=this._calculateSpeedIndex();this.fire(new l.Event("speedindexcompleted",{speedIndex:O})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||I||(this._fullyLoaded=!0,l.LivePerformanceUtils.mark(l.PerformanceMarkers.fullLoad),this._performanceMetricsCollection&&l.postPerformanceEvent(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(p){for(const s of this._markers)p&&!this.getRenderWorldCopies()&&(s._lngLat=s._lngLat.wrap()),s._update();for(const s of this._popups)!p||this.getRenderWorldCopies()||s._trackPointer||(s._lngLat=s._lngLat.wrap()),s._update()}_updateAverageElevation(p,s=!1){const d=g=>(this.transform.averageElevation=g,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return this.transform.averageElevation!==0&&d(0);if((s||p-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(p)){const g=this.transform.averageElevation;let _=this.transform.sampleAverageElevation(),b=!1;this.transform.elevation&&(b=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(_)?_=0:this._averageElevationLastSampledAt=p;const I=Math.abs(g-_);if(I>1){if(this._isInitialLoad||b)return this._averageElevation.jumpTo(_),d(_);this._averageElevation.easeTo(_,p,300)}else if(I>1e-4)return this._averageElevation.jumpTo(_),d(_)}return!!this._averageElevation.isEasing(p)&&d(this._averageElevation.getValue(p))}_authenticate(){l.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,p=>{if(p&&(p.message===l.AUTH_ERR_MSG||p.status===401)){const s=this.painter.context.gl;l.storeAuthState(s,!1),this._logoControl instanceof ff&&this._logoControl._updateLogo(),s&&s.clear(s.DEPTH_BUFFER_BIT|s.COLOR_BUFFER_BIT|s.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new l.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),l.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_updateTerrain(){const p=this._isDragging();this.painter.updateTerrain(this.style,p)}_calculateSpeedIndex(){const p=this.painter.canvasCopy(),s=this.painter.getCanvasCopiesAndTimestamps();s.timeStamps.push(performance.now());const d=this.painter.context.gl,g=d.createFramebuffer();function _(b){d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,b,0);const I=new Uint8Array(d.drawingBufferWidth*d.drawingBufferHeight*4);return d.readPixels(0,0,d.drawingBufferWidth,d.drawingBufferHeight,d.RGBA,d.UNSIGNED_BYTE,I),I}return d.bindFramebuffer(d.FRAMEBUFFER,g),this._canvasPixelComparison(_(p),s.canvasCopies.map(_),s.timeStamps)}_canvasPixelComparison(p,s,d){let g=d[1]-d[0];const _=p.length/4;for(let b=0;b<s.length;b++){const I=s[b];let M=0;for(let O=0;O<I.length;O+=4)I[O]===p[O]&&I[O+1]===p[O+1]&&I[O+2]===p[O+2]&&I[O+3]===p[O+3]&&(M+=1);g+=(d[b+2]-d[b+1])*(1-M/_)}return g}remove(){this._hash&&this._hash.remove();for(const s of this._controls)s.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),l.window!==void 0&&(l.window.removeEventListener("resize",this._onWindowResize,!1),l.window.removeEventListener("orientationchange",this._onWindowResize,!1),l.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),l.window.removeEventListener("online",this._onWindowOnline,!1),l.window.removeEventListener("visibilitychange",this._onVisibilityChange,!1));const p=this.painter.context.gl.getExtension("WEBGL_lose_context");p&&p.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),l.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new l.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(p){this._renderNextFrame=this._renderNextFrame||p,this.style&&!this._frame&&(this._frame=l.exported.frame(s=>{const d=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,d&&this._render(s)}))}_preloadTiles(p){const s=this.style?Object.values(this.style._sourceCaches):[];return l.asyncAll(s,(d,g)=>d._preloadTiles(p,g),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(p){this._trackResize&&this.resize({originalEvent:p})._update()}_onVisibilityChange(){l.window.document.visibilityState==="hidden"&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(p){this._showTileBoundaries!==p&&(this._showTileBoundaries=p,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(p){this._showTerrainWireframe!==p&&(this._showTerrainWireframe=p,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(p){this._speedIndexTiming!==p&&(this._speedIndexTiming=p,this._update())}get showPadding(){return!!this._showPadding}set showPadding(p){this._showPadding!==p&&(this._showPadding=p,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(p){this._showCollisionBoxes!==p&&(this._showCollisionBoxes=p,p?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(p){this._showOverdrawInspector!==p&&(this._showOverdrawInspector=p,this._update())}get repaint(){return!!this._repaint}set repaint(p){this._repaint!==p&&(this._repaint=p,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(p){this._vertices=p,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(p){this._showTileAABBs!==p&&(this._showTileAABBs=p,p&&this._update())}_setCacheLimits(p,s){l.setCacheLimits(p,s)}get version(){return l.version}},NavigationControl:class{constructor(p){this.options=l.extend({},u_,p),this._container=D("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",s=>s.preventDefault()),this.options.showZoom&&(l.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",s=>{this._map&&this._map.zoomIn({},{originalEvent:s})}),D("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",s=>{this._map&&this._map.zoomOut({},{originalEvent:s})}),D("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(l.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",s=>{const d=this._map;d&&(this.options.visualizePitch?d.resetNorthPitch({},{originalEvent:s}):d.resetNorth({},{originalEvent:s}))}),this._compassIcon=D("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const p=this._map;if(!p)return;const s=p.getZoom(),d=s===p.getMaxZoom(),g=s===p.getMinZoom();this._zoomInButton.disabled=d,this._zoomOutButton.disabled=g,this._zoomInButton.setAttribute("aria-disabled",d.toString()),this._zoomOutButton.setAttribute("aria-disabled",g.toString())}_rotateCompassArrow(){const p=this._map;if(!p)return;const s=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(p.transform.pitch*(Math.PI/180)),.5)}) rotateX(${p.transform.pitch}deg) rotateZ(${p.transform.angle*(180/Math.PI)}deg)`:`rotate(${p.transform.angle*(180/Math.PI)}deg)`;p._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=s)})}onAdd(p){return this._map=p,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),p.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&p.on("pitch",this._rotateCompassArrow),p.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new d_(p,this._compass,this.options.visualizePitch)),this._container}onRemove(){const p=this._map;p&&(this._container.remove(),this.options.showZoom&&p.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&p.off("pitch",this._rotateCompassArrow),p.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(p,s){const d=D("button",p,this._container);return d.type="button",d.addEventListener("click",s),d}_setButtonTitle(p,s){if(!this._map)return;const d=this._map._getUIString(`NavigationControl.${s}`);p.setAttribute("aria-label",d),p.firstElementChild&&p.firstElementChild.setAttribute("title",d)}},GeolocateControl:class extends l.Evented{constructor(p){super(),this.options=l.extend({geolocation:l.window.navigator.geolocation},vf,p),l.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=zl(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(p){return this._map=p,this._container=D("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(p){const s=(d=!!this.options.geolocation)=>{this._supportsGeolocation=d,p(d)};this._supportsGeolocation!==void 0?p(this._supportsGeolocation):l.window.navigator.permissions!==void 0?l.window.navigator.permissions.query({name:"geolocation"}).then(d=>s(d.state!=="denied")).catch(()=>s()):s()}_isOutOfMapMaxBounds(p){const s=this._map.getMaxBounds(),d=p.coords;return!!s&&(d.longitude<s.getWest()||d.longitude>s.getEast()||d.latitude<s.getSouth()||d.latitude>s.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(p){if(this._map){if(this._isOutOfMapMaxBounds(p))return this._setErrorState(),this.fire(new l.Event("outofmaxbounds",p)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=p,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(p),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(p),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new l.Event("geolocate",p)),this._finish()}}_updateCamera(p){const s=new l.LngLat(p.coords.longitude,p.coords.latitude),d=p.coords.accuracy,g=this._map.getBearing(),_=l.extend({bearing:g},this.options.fitBoundsOptions);this._map.fitBounds(s.toBounds(d),_,{geolocateSource:!0})}_updateMarker(p){if(p){const s=new l.LngLat(p.coords.longitude,p.coords.latitude);this._accuracyCircleMarker.setLngLat(s).addTo(this._map),this._userLocationDotMarker.setLngLat(s).addTo(this._map),this._accuracy=p.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const p=this._map.transform,s=l.mercatorZfromAltitude(1,p._center.lat)*p.worldSize,d=Math.ceil(2*this._accuracy*s);this._circleElement.style.width=`${d}px`,this._circleElement.style.height=`${d}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&typeof this._heading=="number"?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(p){if(this._map){if(this.options.trackUserLocation)if(p.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const s=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",s),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",s),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(p.code===3&&this._noTimeout)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new l.Event("error",p)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(p){if(this._map!==void 0){if(this._container.addEventListener("contextmenu",s=>s.preventDefault()),this._geolocateButton=D("button","mapboxgl-ctrl-geolocate",this._container),D("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",p===!1){l.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const s=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",s),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",s)}else{const s=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",s),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",s)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=D("div","mapboxgl-user-location"),this._dotElement.appendChild(D("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(D("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new qt({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=D("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new qt({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",s=>{s.geolocateSource||this._watchState!=="ACTIVE_LOCK"||s.originalEvent&&s.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new l.Event("trackuserlocationend")))})}}_onDeviceOrientation(p){this._userLocationDotMarker&&(p.webkitCompassHeading?this._heading=p.webkitCompassHeading:p.absolute===!0&&(this._heading=-1*p.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return l.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new l.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new l.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new l.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let p;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(p={maximumAge:6e5,timeout:0},this._noTimeout=!0):(p=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,p),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const p=()=>{l.window.addEventListener("ondeviceorientationabsolute"in l.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientation)};l.window.DeviceMotionEvent!==void 0&&typeof l.window.DeviceMotionEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(s=>{s==="granted"&&p()}).catch(console.error):p()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),l.window.removeEventListener("deviceorientation",this._onDeviceOrientation),l.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:Jt,ScaleControl:class{constructor(p){this.options=l.extend({},yf,p),this._isNumberFormatSupported=function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"short",unit:"meter"}),!0}catch{return!1}}(),l.bindAll(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const p=this.options.maxWidth||100,s=this._map,d=s._containerHeight/2,g=s._containerWidth/2-p/2,_=s.unproject([g,d]),b=s.unproject([g+p,d]),I=_.distanceTo(b);if(this.options.unit==="imperial"){const M=3.2808*I;M>5280?this._setScale(p,M/5280,"mile"):this._setScale(p,M,"foot")}else this.options.unit==="nautical"?this._setScale(p,I/1852,"nautical-mile"):I>=1e3?this._setScale(p,I/1e3,"kilometer"):this._setScale(p,I,"meter")}_setScale(p,s,d){this._map._requestDomTask(()=>{const g=function(b){const I=Math.pow(10,`${Math.floor(b)}`.length-1);let M=b/I;return M=M>=10?10:M>=5?5:M>=3?3:M>=2?2:M>=1?1:function(O){const $=Math.pow(10,Math.ceil(-Math.log(O)/Math.LN10));return Math.round(O*$)/$}(M),I*M}(s),_=g/s;this._container.innerHTML=this._isNumberFormatSupported&&d!=="nautical-mile"?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"short",unit:d}).format(g):`${g}&nbsp;${_f[d]}`,this._container.style.width=p*_+"px"})}onAdd(p){return this._map=p,this._language=p.getLanguage(),this._container=D("div","mapboxgl-ctrl mapboxgl-ctrl-scale",p.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(p){this._language=p,this._update()}setUnit(p){this.options.unit=p,this._update()}},FullscreenControl:class{constructor(p){this._fullscreen=!1,p&&p.container&&(p.container instanceof l.window.HTMLElement?this._container=p.container:l.warnOnce("Full screen control 'container' must be a DOM element.")),l.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in l.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in l.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(p){return this._map=p,this._container||(this._container=this._map.getContainer()),this._controlContainer=D("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",l.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,l.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!l.window.document.fullscreenEnabled&&!l.window.document.webkitFullscreenEnabled)}_setupUI(){const p=this._fullscreenButton=D("button","mapboxgl-ctrl-fullscreen",this._controlContainer);D("span","mapboxgl-ctrl-icon",p).setAttribute("aria-hidden","true"),p.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),l.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const p=this._getTitle();this._fullscreenButton.setAttribute("aria-label",p),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",p)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(l.window.document.fullscreenElement||l.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?l.window.document.exitFullscreen?l.window.document.exitFullscreen():l.window.document.webkitCancelFullScreen&&l.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends l.Evented{constructor(p){super(),this.options=l.extend(Object.create(mf),p),l.bindAll(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(p&&p.className?p.className.trim().split(/\s+/):[])}addTo(p){return this._map&&this.remove(),this._map=p,this.options.closeOnClick&&p.on("preclick",this._onClose),this.options.closeOnMove&&p.on("move",this._onClose),p.on("remove",this.remove),this._update(),p._addPopup(this),this._focusFirstElement(),this._trackPointer?(p.on("mousemove",this._onMouseEvent),p.on("mouseup",this._onMouseEvent),p._canvasContainer.classList.add("mapboxgl-track-pointer")):p.on("move",this._update),this.fire(new l.Event("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const p=this._map;return p&&(p.off("move",this._update),p.off("move",this._onClose),p.off("preclick",this._onClose),p.off("click",this._onClose),p.off("remove",this.remove),p.off("mousemove",this._onMouseEvent),p.off("mouseup",this._onMouseEvent),p.off("drag",this._onMouseEvent),p._canvasContainer&&p._canvasContainer.classList.remove("mapboxgl-track-pointer"),p._removePopup(this),this._map=void 0),this.fire(new l.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(p){this._lngLat=l.LngLat.convert(p),this._pos=null,this._trackPointer=!1,this._update();const s=this._map;return s&&(s.on("move",this._update),s.off("mousemove",this._onMouseEvent),s._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const p=this._map;return p&&(p.off("move",this._update),p.on("mousemove",this._onMouseEvent),p.on("drag",this._onMouseEvent),p._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(p){return this.setDOMContent(l.window.document.createTextNode(p))}setHTML(p){const s=l.window.document.createDocumentFragment(),d=l.window.document.createElement("body");let g;for(d.innerHTML=p;g=d.firstChild,g;)s.appendChild(g);return this.setDOMContent(s)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(p){return this.options.maxWidth=p,this._update(),this}setDOMContent(p){let s=this._content;if(s)for(;s.hasChildNodes();)s.firstChild&&s.removeChild(s.firstChild);else s=this._content=D("div","mapboxgl-popup-content",this._container||void 0);if(s.appendChild(p),this.options.closeButton){const d=this._closeButton=D("button","mapboxgl-popup-close-button",s);d.type="button",d.setAttribute("aria-label","Close popup"),d.setAttribute("aria-hidden","true"),d.innerHTML="&#215;",d.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(p){return this._classList.add(p),this._updateClassList(),this}removeClassName(p){return this._classList.delete(p),this._updateClassList(),this}setOffset(p){return this.options.offset=p,this._update(),this}toggleClassName(p){let s;return this._classList.delete(p)?s=!1:(this._classList.add(p),s=!0),this._updateClassList(),s}_onMouseEvent(p){this._update(p.point)}_getAnchor(p){if(this.options.anchor)return this.options.anchor;const s=this._map,d=this._container,g=this._pos;if(!s||!d||!g)return"bottom";const _=d.offsetWidth,b=d.offsetHeight,I=g.x<_/2,M=g.x>s.transform.width-_/2;if(g.y+p<b)return I?"top-left":M?"top-right":"top";if(g.y>s.transform.height-b){if(I)return"bottom-left";if(M)return"bottom-right"}return I?"left":M?"right":"bottom"}_updateClassList(){const p=this._container;if(!p)return;const s=[...this._classList];s.push("mapboxgl-popup"),this._anchor&&s.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&s.push("mapboxgl-popup-track-pointer"),p.className=s.join(" ")}_update(p){const s=this._map,d=this._content;if(!s||!this._lngLat&&!this._trackPointer||!d)return;let g=this._container;if(g||(g=this._container=D("div","mapboxgl-popup",s.getContainer()),this._tip=D("div","mapboxgl-popup-tip",g),g.appendChild(d)),this.options.maxWidth&&g.style.maxWidth!==this.options.maxWidth&&(g.style.maxWidth=this.options.maxWidth),s.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=kl(this._lngLat,this._pos,s.transform)),!this._trackPointer||p){const _=this._pos=this._trackPointer&&p?p:s.project(this._lngLat),b=ug(this.options.offset),I=this._anchor=this._getAnchor(b.y),M=ug(this.options.offset,I),O=_.add(M).round();s._requestDomTask(()=>{this._container&&I&&(this._container.style.transform=`${qs[I]} translate(${O.x}px,${O.y}px)`)})}if(!this._marker&&s._showingGlobe()){const _=l.isLngLatBehindGlobe(s.transform,this._lngLat)?0:1;this._setOpacity(_)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const p=this._container.querySelector(c_);p&&p.focus()}_onClose(){this.remove()}_setOpacity(p){this._container&&(this._container.style.opacity=`${p}`),this._content&&(this._content.style.pointerEvents=p?"auto":"none")}},Marker:qt,Style:_a,LngLat:l.LngLat,LngLatBounds:l.LngLatBounds,Point:l.Point,MercatorCoordinate:l.MercatorCoordinate,FreeCameraOptions:Xm,Evented:l.Evented,config:l.config,prewarm:function(){Sn().acquire(Zr)},clearPrewarmedResources:function(){const p=tn;p&&(p.isPreloaded()&&p.numActive()===1?(p.release(Zr),tn=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return l.config.ACCESS_TOKEN},set accessToken(p){l.config.ACCESS_TOKEN=p},get baseApiUrl(){return l.config.API_URL},set baseApiUrl(p){l.config.API_URL=p},get workerCount(){return on.workerCount},set workerCount(p){on.workerCount=p},get maxParallelImageRequests(){return l.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(p){l.config.MAX_PARALLEL_IMAGE_REQUESTS=p},clearStorage(p){l.clearTileCache(p)},workerUrl:"",workerClass:null,setNow:l.exported.setNow,restoreNow:l.exported.restoreNow};return $l});var y=c;return y})})(BD);var yq=BD.exports;const _q=_c(yq);var xq=Object.defineProperty,bq=(e,t,r)=>t in e?xq(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,wq=(e,t,r)=>(bq(e,typeof t!="symbol"?t+"":t,r),r);let aY=class extends _q.Map{constructor(t){super(t),wq(this,"_groupLayers",new Map)}getGroupLayer(t){return this._groupLayers.get(t)}addGroupLayer(t,r){if(this.getGroupLayer(t))throw new Error(`The groupLayer '${t}' has already existed.`);const{sources:a={},layers:c=[],bounds:f,fitBoundsOptions:y={padding:{top:20,bottom:20,left:20,right:20}},flyToOptions:l}=r;for(const w in a)Object.prototype.hasOwnProperty.call(a,w)&&(this.getSource(w)?console.warn(`The source '${w}' has already existed.`):this.addSource(w,a[w]));for(const w of c){if(this.getLayer(w.id))throw new Error(`The layer '${w.id}' has already existed.`);{const C=w.metadata||{},P=C.before?this._getBeforeLayerId(w.id,C.before):void 0;w.metadata={...C,grouplayer:t},this.addLayer(w,P),this._setLayerCursor(w)}}return f?this.fitBounds(f,y):l&&this.flyTo(l),this._groupLayers.set(t,r),this}removeGroupLayer(t,r=!0){const a=this.getGroupLayer(t);if(a){const{sources:c={},layers:f=[]}=a;for(const y of f){const l=y.id;this.getLayer(l)&&this.removeLayer(l),y.source&&typeof y.source=="object"&&r&&this.getSource(l)&&this.removeSource(l)}r&&Object.keys(c).map(y=>{this.getSource(y)&&this.removeSource(y)}),this._groupLayers.delete(t)}return this}removeGroupLayers(t=!0){return this._groupLayers.forEach((r,a)=>{this.removeGroupLayer(a,t)}),this}setBasemapStyle(t,r=!0,a){this.setStyle(t,a);const c=r?new Map(this._groupLayers):void 0;this._groupLayers.clear(),c&&this.once("styledata",()=>{c.forEach((f,y)=>{this.addGroupLayer(y,f)})})}_getBeforeLayerIdByString(t){const r=this.getGroupLayer(t);return r&&r.layers.length>0?r.layers[0].id:this.getLayer(t)?t:void 0}_getBeforeLayerId(t,r){let a;if(typeof r=="string")a=this._getBeforeLayerIdByString(r);else if(Array.isArray(r)){for(const c of r)if(a=this._getBeforeLayerIdByString(c),a)break}return a||console.warn(`Layer with id "${r}" does not exist on this map. The layer with id "${t}" will be appended to the end of the layers array and appear visually above all other layers.`),a}_setLayerCursor(t){const r=t.metadata||{},a=t.id;r&&r.cursor&&(this.on("mouseenter",a,()=>{this.getCanvas().style.cursor=r.cursor}),this.on("mouseleave",a,()=>{this.getCanvas().style.cursor=""}))}};const JM=e=>{let t;const r=new Set,a=(w,C)=>{const P=typeof w=="function"?w(t):w;if(!Object.is(P,t)){const A=t;t=C??typeof P!="object"?P:Object.assign({},t,P),r.forEach(D=>D(t,A))}},c=()=>t,l={setState:a,getState:c,subscribe:w=>(r.add(w),()=>r.delete(w)),destroy:()=>{r.clear()}};return t=e(a,c,l),l},Sq=e=>e?JM(e):JM;var jD={exports:{}},UD={},VD={exports:{}},HD={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bh=T;function Eq(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Cq=typeof Object.is=="function"?Object.is:Eq,Tq=bh.useState,Iq=bh.useEffect,Mq=bh.useLayoutEffect,Pq=bh.useDebugValue;function Aq(e,t){var r=t(),a=Tq({inst:{value:r,getSnapshot:t}}),c=a[0].inst,f=a[1];return Mq(function(){c.value=r,c.getSnapshot=t,I1(c)&&f({inst:c})},[e,r,t]),Iq(function(){return I1(c)&&f({inst:c}),e(function(){I1(c)&&f({inst:c})})},[e]),Pq(r),r}function I1(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Cq(e,r)}catch{return!0}}function Rq(e,t){return t()}var Oq=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Rq:Aq;HD.useSyncExternalStore=bh.useSyncExternalStore!==void 0?bh.useSyncExternalStore:Oq;VD.exports=HD;var zq=VD.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L0=T,Dq=zq;function Lq(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var kq=typeof Object.is=="function"?Object.is:Lq,$q=Dq.useSyncExternalStore,Fq=L0.useRef,Bq=L0.useEffect,Nq=L0.useMemo,jq=L0.useDebugValue;UD.useSyncExternalStoreWithSelector=function(e,t,r,a,c){var f=Fq(null);if(f.current===null){var y={hasValue:!1,value:null};f.current=y}else y=f.current;f=Nq(function(){function w(N){if(!C){if(C=!0,P=N,N=a(N),c!==void 0&&y.hasValue){var F=y.value;if(c(F,N))return A=F}return A=N}if(F=A,kq(P,N))return F;var U=a(N);return c!==void 0&&c(F,U)?F:(P=N,A=U)}var C=!1,P,A,D=r===void 0?null:r;return[function(){return w(t())},D===null?void 0:function(){return w(D())}]},[t,r,a,c]);var l=$q(e,f[0],f[1]);return Bq(function(){y.hasValue=!0,y.value=l},[l]),jq(l),l};jD.exports=UD;var Uq=jD.exports;const Vq=_c(Uq),{useDebugValue:Hq}=pt,{useSyncExternalStoreWithSelector:Gq}=Vq;function Wq(e,t=e.getState,r){const a=Gq(e.subscribe,e.getState,e.getServerState||e.getState,t,r);return Hq(a),a}const QM=e=>{const t=typeof e=="function"?Sq(e):e,r=(a,c)=>Wq(t,a,c);return Object.assign(r,t),r},lY=e=>e?QM(e):QM;function GD(e,t){return function(){return e.apply(t,arguments)}}const{toString:qq}=Object.prototype,{getPrototypeOf:oE}=Object,k0=(e=>t=>{const r=qq.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),Bs=e=>(e=e.toLowerCase(),t=>k0(t)===e),$0=e=>t=>typeof t===e,{isArray:Oh}=Array,fm=$0("undefined");function Zq(e){return e!==null&&!fm(e)&&e.constructor!==null&&!fm(e.constructor)&&La(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const WD=Bs("ArrayBuffer");function Xq(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&WD(e.buffer),t}const Kq=$0("string"),La=$0("function"),qD=$0("number"),F0=e=>e!==null&&typeof e=="object",Yq=e=>e===!0||e===!1,qv=e=>{if(k0(e)!=="object")return!1;const t=oE(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Jq=Bs("Date"),Qq=Bs("File"),eZ=Bs("Blob"),tZ=Bs("FileList"),nZ=e=>F0(e)&&La(e.pipe),rZ=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||La(e.append)&&((t=k0(e))==="formdata"||t==="object"&&La(e.toString)&&e.toString()==="[object FormData]"))},iZ=Bs("URLSearchParams"),oZ=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Am(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let a,c;if(typeof e!="object"&&(e=[e]),Oh(e))for(a=0,c=e.length;a<c;a++)t.call(null,e[a],a,e);else{const f=r?Object.getOwnPropertyNames(e):Object.keys(e),y=f.length;let l;for(a=0;a<y;a++)l=f[a],t.call(null,e[l],l,e)}}function ZD(e,t){t=t.toLowerCase();const r=Object.keys(e);let a=r.length,c;for(;a-- >0;)if(c=r[a],t===c.toLowerCase())return c;return null}const XD=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),KD=e=>!fm(e)&&e!==XD;function xw(){const{caseless:e}=KD(this)&&this||{},t={},r=(a,c)=>{const f=e&&ZD(t,c)||c;qv(t[f])&&qv(a)?t[f]=xw(t[f],a):qv(a)?t[f]=xw({},a):Oh(a)?t[f]=a.slice():t[f]=a};for(let a=0,c=arguments.length;a<c;a++)arguments[a]&&Am(arguments[a],r);return t}const aZ=(e,t,r,{allOwnKeys:a}={})=>(Am(t,(c,f)=>{r&&La(c)?e[f]=GD(c,r):e[f]=c},{allOwnKeys:a}),e),sZ=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),lZ=(e,t,r,a)=>{e.prototype=Object.create(t.prototype,a),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},cZ=(e,t,r,a)=>{let c,f,y;const l={};if(t=t||{},e==null)return t;do{for(c=Object.getOwnPropertyNames(e),f=c.length;f-- >0;)y=c[f],(!a||a(y,e,t))&&!l[y]&&(t[y]=e[y],l[y]=!0);e=r!==!1&&oE(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},uZ=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const a=e.indexOf(t,r);return a!==-1&&a===r},dZ=e=>{if(!e)return null;if(Oh(e))return e;let t=e.length;if(!qD(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},hZ=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&oE(Uint8Array)),fZ=(e,t)=>{const a=(e&&e[Symbol.iterator]).call(e);let c;for(;(c=a.next())&&!c.done;){const f=c.value;t.call(e,f[0],f[1])}},pZ=(e,t)=>{let r;const a=[];for(;(r=e.exec(t))!==null;)a.push(r);return a},mZ=Bs("HTMLFormElement"),gZ=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,a,c){return a.toUpperCase()+c}),eP=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),vZ=Bs("RegExp"),YD=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),a={};Am(r,(c,f)=>{let y;(y=t(c,f,e))!==!1&&(a[f]=y||c)}),Object.defineProperties(e,a)},yZ=e=>{YD(e,(t,r)=>{if(La(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const a=e[r];if(La(a)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},_Z=(e,t)=>{const r={},a=c=>{c.forEach(f=>{r[f]=!0})};return Oh(e)?a(e):a(String(e).split(t)),r},xZ=()=>{},bZ=(e,t)=>(e=+e,Number.isFinite(e)?e:t),M1="abcdefghijklmnopqrstuvwxyz",tP="0123456789",JD={DIGIT:tP,ALPHA:M1,ALPHA_DIGIT:M1+M1.toUpperCase()+tP},wZ=(e=16,t=JD.ALPHA_DIGIT)=>{let r="";const{length:a}=t;for(;e--;)r+=t[Math.random()*a|0];return r};function SZ(e){return!!(e&&La(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const EZ=e=>{const t=new Array(10),r=(a,c)=>{if(F0(a)){if(t.indexOf(a)>=0)return;if(!("toJSON"in a)){t[c]=a;const f=Oh(a)?[]:{};return Am(a,(y,l)=>{const w=r(y,c+1);!fm(w)&&(f[l]=w)}),t[c]=void 0,f}}return a};return r(e,0)},CZ=Bs("AsyncFunction"),TZ=e=>e&&(F0(e)||La(e))&&La(e.then)&&La(e.catch),Et={isArray:Oh,isArrayBuffer:WD,isBuffer:Zq,isFormData:rZ,isArrayBufferView:Xq,isString:Kq,isNumber:qD,isBoolean:Yq,isObject:F0,isPlainObject:qv,isUndefined:fm,isDate:Jq,isFile:Qq,isBlob:eZ,isRegExp:vZ,isFunction:La,isStream:nZ,isURLSearchParams:iZ,isTypedArray:hZ,isFileList:tZ,forEach:Am,merge:xw,extend:aZ,trim:oZ,stripBOM:sZ,inherits:lZ,toFlatObject:cZ,kindOf:k0,kindOfTest:Bs,endsWith:uZ,toArray:dZ,forEachEntry:fZ,matchAll:pZ,isHTMLForm:mZ,hasOwnProperty:eP,hasOwnProp:eP,reduceDescriptors:YD,freezeMethods:yZ,toObjectSet:_Z,toCamelCase:gZ,noop:xZ,toFiniteNumber:bZ,findKey:ZD,global:XD,isContextDefined:KD,ALPHABET:JD,generateString:wZ,isSpecCompliantForm:SZ,toJSONObject:EZ,isAsyncFn:CZ,isThenable:TZ};function hr(e,t,r,a,c){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),a&&(this.request=a),c&&(this.response=c)}Et.inherits(hr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Et.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const QD=hr.prototype,eL={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{eL[e]={value:e}});Object.defineProperties(hr,eL);Object.defineProperty(QD,"isAxiosError",{value:!0});hr.from=(e,t,r,a,c,f)=>{const y=Object.create(QD);return Et.toFlatObject(e,y,function(w){return w!==Error.prototype},l=>l!=="isAxiosError"),hr.call(y,e.message,t,r,a,c),y.cause=e,y.name=e.name,f&&Object.assign(y,f),y};const IZ=null;function bw(e){return Et.isPlainObject(e)||Et.isArray(e)}function tL(e){return Et.endsWith(e,"[]")?e.slice(0,-2):e}function nP(e,t,r){return e?e.concat(t).map(function(c,f){return c=tL(c),!r&&f?"["+c+"]":c}).join(r?".":""):t}function MZ(e){return Et.isArray(e)&&!e.some(bw)}const PZ=Et.toFlatObject(Et,{},null,function(t){return/^is[A-Z]/.test(t)});function B0(e,t,r){if(!Et.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=Et.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(U,Z){return!Et.isUndefined(Z[U])});const a=r.metaTokens,c=r.visitor||P,f=r.dots,y=r.indexes,w=(r.Blob||typeof Blob<"u"&&Blob)&&Et.isSpecCompliantForm(t);if(!Et.isFunction(c))throw new TypeError("visitor must be a function");function C(F){if(F===null)return"";if(Et.isDate(F))return F.toISOString();if(!w&&Et.isBlob(F))throw new hr("Blob is not supported. Use a Buffer instead.");return Et.isArrayBuffer(F)||Et.isTypedArray(F)?w&&typeof Blob=="function"?new Blob([F]):Buffer.from(F):F}function P(F,U,Z){let j=F;if(F&&!Z&&typeof F=="object"){if(Et.endsWith(U,"{}"))U=a?U:U.slice(0,-2),F=JSON.stringify(F);else if(Et.isArray(F)&&MZ(F)||(Et.isFileList(F)||Et.endsWith(U,"[]"))&&(j=Et.toArray(F)))return U=tL(U),j.forEach(function(H,Y){!(Et.isUndefined(H)||H===null)&&t.append(y===!0?nP([U],Y,f):y===null?U:U+"[]",C(H))}),!1}return bw(F)?!0:(t.append(nP(Z,U,f),C(F)),!1)}const A=[],D=Object.assign(PZ,{defaultVisitor:P,convertValue:C,isVisitable:bw});function N(F,U){if(!Et.isUndefined(F)){if(A.indexOf(F)!==-1)throw Error("Circular reference detected in "+U.join("."));A.push(F),Et.forEach(F,function(j,B){(!(Et.isUndefined(j)||j===null)&&c.call(t,j,Et.isString(B)?B.trim():B,U,D))===!0&&N(j,U?U.concat(B):[B])}),A.pop()}}if(!Et.isObject(e))throw new TypeError("data must be an object");return N(e),t}function rP(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(a){return t[a]})}function aE(e,t){this._pairs=[],e&&B0(e,this,t)}const nL=aE.prototype;nL.append=function(t,r){this._pairs.push([t,r])};nL.toString=function(t){const r=t?function(a){return t.call(this,a,rP)}:rP;return this._pairs.map(function(c){return r(c[0])+"="+r(c[1])},"").join("&")};function AZ(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function rL(e,t,r){if(!t)return e;const a=r&&r.encode||AZ,c=r&&r.serialize;let f;if(c?f=c(t,r):f=Et.isURLSearchParams(t)?t.toString():new aE(t,r).toString(a),f){const y=e.indexOf("#");y!==-1&&(e=e.slice(0,y)),e+=(e.indexOf("?")===-1?"?":"&")+f}return e}class RZ{constructor(){this.handlers=[]}use(t,r,a){return this.handlers.push({fulfilled:t,rejected:r,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){Et.forEach(this.handlers,function(a){a!==null&&t(a)})}}const iP=RZ,iL={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},OZ=typeof URLSearchParams<"u"?URLSearchParams:aE,zZ=typeof FormData<"u"?FormData:null,DZ=typeof Blob<"u"?Blob:null,LZ={isBrowser:!0,classes:{URLSearchParams:OZ,FormData:zZ,Blob:DZ},protocols:["http","https","file","blob","url","data"]},oL=typeof window<"u"&&typeof document<"u",kZ=(e=>oL&&["ReactNative","NativeScript","NS"].indexOf(e)<0)(typeof navigator<"u"&&navigator.product),$Z=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),FZ=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:oL,hasStandardBrowserEnv:kZ,hasStandardBrowserWebWorkerEnv:$Z},Symbol.toStringTag,{value:"Module"})),Ls={...FZ,...LZ};function BZ(e,t){return B0(e,new Ls.classes.URLSearchParams,Object.assign({visitor:function(r,a,c,f){return Ls.isNode&&Et.isBuffer(r)?(this.append(a,r.toString("base64")),!1):f.defaultVisitor.apply(this,arguments)}},t))}function NZ(e){return Et.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function jZ(e){const t={},r=Object.keys(e);let a;const c=r.length;let f;for(a=0;a<c;a++)f=r[a],t[f]=e[f];return t}function aL(e){function t(r,a,c,f){let y=r[f++];const l=Number.isFinite(+y),w=f>=r.length;return y=!y&&Et.isArray(c)?c.length:y,w?(Et.hasOwnProp(c,y)?c[y]=[c[y],a]:c[y]=a,!l):((!c[y]||!Et.isObject(c[y]))&&(c[y]=[]),t(r,a,c[y],f)&&Et.isArray(c[y])&&(c[y]=jZ(c[y])),!l)}if(Et.isFormData(e)&&Et.isFunction(e.entries)){const r={};return Et.forEachEntry(e,(a,c)=>{t(NZ(a),c,r,0)}),r}return null}function UZ(e,t,r){if(Et.isString(e))try{return(t||JSON.parse)(e),Et.trim(e)}catch(a){if(a.name!=="SyntaxError")throw a}return(r||JSON.stringify)(e)}const sE={transitional:iL,adapter:["xhr","http"],transformRequest:[function(t,r){const a=r.getContentType()||"",c=a.indexOf("application/json")>-1,f=Et.isObject(t);if(f&&Et.isHTMLForm(t)&&(t=new FormData(t)),Et.isFormData(t))return c&&c?JSON.stringify(aL(t)):t;if(Et.isArrayBuffer(t)||Et.isBuffer(t)||Et.isStream(t)||Et.isFile(t)||Et.isBlob(t))return t;if(Et.isArrayBufferView(t))return t.buffer;if(Et.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let l;if(f){if(a.indexOf("application/x-www-form-urlencoded")>-1)return BZ(t,this.formSerializer).toString();if((l=Et.isFileList(t))||a.indexOf("multipart/form-data")>-1){const w=this.env&&this.env.FormData;return B0(l?{"files[]":t}:t,w&&new w,this.formSerializer)}}return f||c?(r.setContentType("application/json",!1),UZ(t)):t}],transformResponse:[function(t){const r=this.transitional||sE.transitional,a=r&&r.forcedJSONParsing,c=this.responseType==="json";if(t&&Et.isString(t)&&(a&&!this.responseType||c)){const y=!(r&&r.silentJSONParsing)&&c;try{return JSON.parse(t)}catch(l){if(y)throw l.name==="SyntaxError"?hr.from(l,hr.ERR_BAD_RESPONSE,this,null,this.response):l}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ls.classes.FormData,Blob:Ls.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Et.forEach(["delete","get","head","post","put","patch"],e=>{sE.headers[e]={}});const lE=sE,VZ=Et.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),HZ=e=>{const t={};let r,a,c;return e&&e.split(`
`).forEach(function(y){c=y.indexOf(":"),r=y.substring(0,c).trim().toLowerCase(),a=y.substring(c+1).trim(),!(!r||t[r]&&VZ[r])&&(r==="set-cookie"?t[r]?t[r].push(a):t[r]=[a]:t[r]=t[r]?t[r]+", "+a:a)}),t},oP=Symbol("internals");function mp(e){return e&&String(e).trim().toLowerCase()}function Zv(e){return e===!1||e==null?e:Et.isArray(e)?e.map(Zv):String(e)}function GZ(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let a;for(;a=r.exec(e);)t[a[1]]=a[2];return t}const WZ=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function P1(e,t,r,a,c){if(Et.isFunction(a))return a.call(this,t,r);if(c&&(t=r),!!Et.isString(t)){if(Et.isString(a))return t.indexOf(a)!==-1;if(Et.isRegExp(a))return a.test(t)}}function qZ(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,a)=>r.toUpperCase()+a)}function ZZ(e,t){const r=Et.toCamelCase(" "+t);["get","set","has"].forEach(a=>{Object.defineProperty(e,a+r,{value:function(c,f,y){return this[a].call(this,t,c,f,y)},configurable:!0})})}class N0{constructor(t){t&&this.set(t)}set(t,r,a){const c=this;function f(l,w,C){const P=mp(w);if(!P)throw new Error("header name must be a non-empty string");const A=Et.findKey(c,P);(!A||c[A]===void 0||C===!0||C===void 0&&c[A]!==!1)&&(c[A||w]=Zv(l))}const y=(l,w)=>Et.forEach(l,(C,P)=>f(C,P,w));return Et.isPlainObject(t)||t instanceof this.constructor?y(t,r):Et.isString(t)&&(t=t.trim())&&!WZ(t)?y(HZ(t),r):t!=null&&f(r,t,a),this}get(t,r){if(t=mp(t),t){const a=Et.findKey(this,t);if(a){const c=this[a];if(!r)return c;if(r===!0)return GZ(c);if(Et.isFunction(r))return r.call(this,c,a);if(Et.isRegExp(r))return r.exec(c);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=mp(t),t){const a=Et.findKey(this,t);return!!(a&&this[a]!==void 0&&(!r||P1(this,this[a],a,r)))}return!1}delete(t,r){const a=this;let c=!1;function f(y){if(y=mp(y),y){const l=Et.findKey(a,y);l&&(!r||P1(a,a[l],l,r))&&(delete a[l],c=!0)}}return Et.isArray(t)?t.forEach(f):f(t),c}clear(t){const r=Object.keys(this);let a=r.length,c=!1;for(;a--;){const f=r[a];(!t||P1(this,this[f],f,t,!0))&&(delete this[f],c=!0)}return c}normalize(t){const r=this,a={};return Et.forEach(this,(c,f)=>{const y=Et.findKey(a,f);if(y){r[y]=Zv(c),delete r[f];return}const l=t?qZ(f):String(f).trim();l!==f&&delete r[f],r[l]=Zv(c),a[l]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return Et.forEach(this,(a,c)=>{a!=null&&a!==!1&&(r[c]=t&&Et.isArray(a)?a.join(", "):a)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const a=new this(t);return r.forEach(c=>a.set(c)),a}static accessor(t){const a=(this[oP]=this[oP]={accessors:{}}).accessors,c=this.prototype;function f(y){const l=mp(y);a[l]||(ZZ(c,y),a[l]=!0)}return Et.isArray(t)?t.forEach(f):f(t),this}}N0.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Et.reduceDescriptors(N0.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(a){this[r]=a}}});Et.freezeMethods(N0);const dl=N0;function A1(e,t){const r=this||lE,a=t||r,c=dl.from(a.headers);let f=a.data;return Et.forEach(e,function(l){f=l.call(r,f,c.normalize(),t?t.status:void 0)}),c.normalize(),f}function sL(e){return!!(e&&e.__CANCEL__)}function Rm(e,t,r){hr.call(this,e??"canceled",hr.ERR_CANCELED,t,r),this.name="CanceledError"}Et.inherits(Rm,hr,{__CANCEL__:!0});function XZ(e,t,r){const a=r.config.validateStatus;!r.status||!a||a(r.status)?e(r):t(new hr("Request failed with status code "+r.status,[hr.ERR_BAD_REQUEST,hr.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}const KZ=Ls.hasStandardBrowserEnv?{write(e,t,r,a,c,f){const y=[e+"="+encodeURIComponent(t)];Et.isNumber(r)&&y.push("expires="+new Date(r).toGMTString()),Et.isString(a)&&y.push("path="+a),Et.isString(c)&&y.push("domain="+c),f===!0&&y.push("secure"),document.cookie=y.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function YZ(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function JZ(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}function lL(e,t){return e&&!YZ(t)?JZ(e,t):t}const QZ=Ls.hasStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");let a;function c(f){let y=f;return t&&(r.setAttribute("href",y),y=r.href),r.setAttribute("href",y),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return a=c(window.location.href),function(y){const l=Et.isString(y)?c(y):y;return l.protocol===a.protocol&&l.host===a.host}}():function(){return function(){return!0}}();function eX(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function tX(e,t){e=e||10;const r=new Array(e),a=new Array(e);let c=0,f=0,y;return t=t!==void 0?t:1e3,function(w){const C=Date.now(),P=a[f];y||(y=C),r[c]=w,a[c]=C;let A=f,D=0;for(;A!==c;)D+=r[A++],A=A%e;if(c=(c+1)%e,c===f&&(f=(f+1)%e),C-y<t)return;const N=P&&C-P;return N?Math.round(D*1e3/N):void 0}}function aP(e,t){let r=0;const a=tX(50,250);return c=>{const f=c.loaded,y=c.lengthComputable?c.total:void 0,l=f-r,w=a(l),C=f<=y;r=f;const P={loaded:f,total:y,progress:y?f/y:void 0,bytes:l,rate:w||void 0,estimated:w&&y&&C?(y-f)/w:void 0,event:c};P[t?"download":"upload"]=!0,e(P)}}const nX=typeof XMLHttpRequest<"u",rX=nX&&function(e){return new Promise(function(r,a){let c=e.data;const f=dl.from(e.headers).normalize();let{responseType:y,withXSRFToken:l}=e,w;function C(){e.cancelToken&&e.cancelToken.unsubscribe(w),e.signal&&e.signal.removeEventListener("abort",w)}let P;if(Et.isFormData(c)){if(Ls.hasStandardBrowserEnv||Ls.hasStandardBrowserWebWorkerEnv)f.setContentType(!1);else if((P=f.getContentType())!==!1){const[U,...Z]=P?P.split(";").map(j=>j.trim()).filter(Boolean):[];f.setContentType([U||"multipart/form-data",...Z].join("; "))}}let A=new XMLHttpRequest;if(e.auth){const U=e.auth.username||"",Z=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";f.set("Authorization","Basic "+btoa(U+":"+Z))}const D=lL(e.baseURL,e.url);A.open(e.method.toUpperCase(),rL(D,e.params,e.paramsSerializer),!0),A.timeout=e.timeout;function N(){if(!A)return;const U=dl.from("getAllResponseHeaders"in A&&A.getAllResponseHeaders()),j={data:!y||y==="text"||y==="json"?A.responseText:A.response,status:A.status,statusText:A.statusText,headers:U,config:e,request:A};XZ(function(H){r(H),C()},function(H){a(H),C()},j),A=null}if("onloadend"in A?A.onloadend=N:A.onreadystatechange=function(){!A||A.readyState!==4||A.status===0&&!(A.responseURL&&A.responseURL.indexOf("file:")===0)||setTimeout(N)},A.onabort=function(){A&&(a(new hr("Request aborted",hr.ECONNABORTED,e,A)),A=null)},A.onerror=function(){a(new hr("Network Error",hr.ERR_NETWORK,e,A)),A=null},A.ontimeout=function(){let Z=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const j=e.transitional||iL;e.timeoutErrorMessage&&(Z=e.timeoutErrorMessage),a(new hr(Z,j.clarifyTimeoutError?hr.ETIMEDOUT:hr.ECONNABORTED,e,A)),A=null},Ls.hasStandardBrowserEnv&&(l&&Et.isFunction(l)&&(l=l(e)),l||l!==!1&&QZ(D))){const U=e.xsrfHeaderName&&e.xsrfCookieName&&KZ.read(e.xsrfCookieName);U&&f.set(e.xsrfHeaderName,U)}c===void 0&&f.setContentType(null),"setRequestHeader"in A&&Et.forEach(f.toJSON(),function(Z,j){A.setRequestHeader(j,Z)}),Et.isUndefined(e.withCredentials)||(A.withCredentials=!!e.withCredentials),y&&y!=="json"&&(A.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&A.addEventListener("progress",aP(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&A.upload&&A.upload.addEventListener("progress",aP(e.onUploadProgress)),(e.cancelToken||e.signal)&&(w=U=>{A&&(a(!U||U.type?new Rm(null,e,A):U),A.abort(),A=null)},e.cancelToken&&e.cancelToken.subscribe(w),e.signal&&(e.signal.aborted?w():e.signal.addEventListener("abort",w)));const F=eX(D);if(F&&Ls.protocols.indexOf(F)===-1){a(new hr("Unsupported protocol "+F+":",hr.ERR_BAD_REQUEST,e));return}A.send(c||null)})},ww={http:IZ,xhr:rX};Et.forEach(ww,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const sP=e=>`- ${e}`,iX=e=>Et.isFunction(e)||e===null||e===!1,cL={getAdapter:e=>{e=Et.isArray(e)?e:[e];const{length:t}=e;let r,a;const c={};for(let f=0;f<t;f++){r=e[f];let y;if(a=r,!iX(r)&&(a=ww[(y=String(r)).toLowerCase()],a===void 0))throw new hr(`Unknown adapter '${y}'`);if(a)break;c[y||"#"+f]=a}if(!a){const f=Object.entries(c).map(([l,w])=>`adapter ${l} `+(w===!1?"is not supported by the environment":"is not available in the build"));let y=t?f.length>1?`since :
`+f.map(sP).join(`
`):" "+sP(f[0]):"as no adapter specified";throw new hr("There is no suitable adapter to dispatch the request "+y,"ERR_NOT_SUPPORT")}return a},adapters:ww};function R1(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Rm(null,e)}function lP(e){return R1(e),e.headers=dl.from(e.headers),e.data=A1.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),cL.getAdapter(e.adapter||lE.adapter)(e).then(function(a){return R1(e),a.data=A1.call(e,e.transformResponse,a),a.headers=dl.from(a.headers),a},function(a){return sL(a)||(R1(e),a&&a.response&&(a.response.data=A1.call(e,e.transformResponse,a.response),a.response.headers=dl.from(a.response.headers))),Promise.reject(a)})}const cP=e=>e instanceof dl?e.toJSON():e;function wh(e,t){t=t||{};const r={};function a(C,P,A){return Et.isPlainObject(C)&&Et.isPlainObject(P)?Et.merge.call({caseless:A},C,P):Et.isPlainObject(P)?Et.merge({},P):Et.isArray(P)?P.slice():P}function c(C,P,A){if(Et.isUndefined(P)){if(!Et.isUndefined(C))return a(void 0,C,A)}else return a(C,P,A)}function f(C,P){if(!Et.isUndefined(P))return a(void 0,P)}function y(C,P){if(Et.isUndefined(P)){if(!Et.isUndefined(C))return a(void 0,C)}else return a(void 0,P)}function l(C,P,A){if(A in t)return a(C,P);if(A in e)return a(void 0,C)}const w={url:f,method:f,data:f,baseURL:y,transformRequest:y,transformResponse:y,paramsSerializer:y,timeout:y,timeoutMessage:y,withCredentials:y,withXSRFToken:y,adapter:y,responseType:y,xsrfCookieName:y,xsrfHeaderName:y,onUploadProgress:y,onDownloadProgress:y,decompress:y,maxContentLength:y,maxBodyLength:y,beforeRedirect:y,transport:y,httpAgent:y,httpsAgent:y,cancelToken:y,socketPath:y,responseEncoding:y,validateStatus:l,headers:(C,P)=>c(cP(C),cP(P),!0)};return Et.forEach(Object.keys(Object.assign({},e,t)),function(P){const A=w[P]||c,D=A(e[P],t[P],P);Et.isUndefined(D)&&A!==l||(r[P]=D)}),r}const uL="1.6.2",cE={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{cE[e]=function(a){return typeof a===e||"a"+(t<1?"n ":" ")+e}});const uP={};cE.transitional=function(t,r,a){function c(f,y){return"[Axios v"+uL+"] Transitional option '"+f+"'"+y+(a?". "+a:"")}return(f,y,l)=>{if(t===!1)throw new hr(c(y," has been removed"+(r?" in "+r:"")),hr.ERR_DEPRECATED);return r&&!uP[y]&&(uP[y]=!0,console.warn(c(y," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(f,y,l):!0}};function oX(e,t,r){if(typeof e!="object")throw new hr("options must be an object",hr.ERR_BAD_OPTION_VALUE);const a=Object.keys(e);let c=a.length;for(;c-- >0;){const f=a[c],y=t[f];if(y){const l=e[f],w=l===void 0||y(l,f,e);if(w!==!0)throw new hr("option "+f+" must be "+w,hr.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new hr("Unknown option "+f,hr.ERR_BAD_OPTION)}}const Sw={assertOptions:oX,validators:cE},Jl=Sw.validators;class By{constructor(t){this.defaults=t,this.interceptors={request:new iP,response:new iP}}request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=wh(this.defaults,r);const{transitional:a,paramsSerializer:c,headers:f}=r;a!==void 0&&Sw.assertOptions(a,{silentJSONParsing:Jl.transitional(Jl.boolean),forcedJSONParsing:Jl.transitional(Jl.boolean),clarifyTimeoutError:Jl.transitional(Jl.boolean)},!1),c!=null&&(Et.isFunction(c)?r.paramsSerializer={serialize:c}:Sw.assertOptions(c,{encode:Jl.function,serialize:Jl.function},!0)),r.method=(r.method||this.defaults.method||"get").toLowerCase();let y=f&&Et.merge(f.common,f[r.method]);f&&Et.forEach(["delete","get","head","post","put","patch","common"],F=>{delete f[F]}),r.headers=dl.concat(y,f);const l=[];let w=!0;this.interceptors.request.forEach(function(U){typeof U.runWhen=="function"&&U.runWhen(r)===!1||(w=w&&U.synchronous,l.unshift(U.fulfilled,U.rejected))});const C=[];this.interceptors.response.forEach(function(U){C.push(U.fulfilled,U.rejected)});let P,A=0,D;if(!w){const F=[lP.bind(this),void 0];for(F.unshift.apply(F,l),F.push.apply(F,C),D=F.length,P=Promise.resolve(r);A<D;)P=P.then(F[A++],F[A++]);return P}D=l.length;let N=r;for(A=0;A<D;){const F=l[A++],U=l[A++];try{N=F(N)}catch(Z){U.call(this,Z);break}}try{P=lP.call(this,N)}catch(F){return Promise.reject(F)}for(A=0,D=C.length;A<D;)P=P.then(C[A++],C[A++]);return P}getUri(t){t=wh(this.defaults,t);const r=lL(t.baseURL,t.url);return rL(r,t.params,t.paramsSerializer)}}Et.forEach(["delete","get","head","options"],function(t){By.prototype[t]=function(r,a){return this.request(wh(a||{},{method:t,url:r,data:(a||{}).data}))}});Et.forEach(["post","put","patch"],function(t){function r(a){return function(f,y,l){return this.request(wh(l||{},{method:t,headers:a?{"Content-Type":"multipart/form-data"}:{},url:f,data:y}))}}By.prototype[t]=r(),By.prototype[t+"Form"]=r(!0)});const Xv=By;class uE{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(f){r=f});const a=this;this.promise.then(c=>{if(!a._listeners)return;let f=a._listeners.length;for(;f-- >0;)a._listeners[f](c);a._listeners=null}),this.promise.then=c=>{let f;const y=new Promise(l=>{a.subscribe(l),f=l}).then(c);return y.cancel=function(){a.unsubscribe(f)},y},t(function(f,y,l){a.reason||(a.reason=new Rm(f,y,l),r(a.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}static source(){let t;return{token:new uE(function(c){t=c}),cancel:t}}}const aX=uE;function sX(e){return function(r){return e.apply(null,r)}}function lX(e){return Et.isObject(e)&&e.isAxiosError===!0}const Ew={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Ew).forEach(([e,t])=>{Ew[t]=e});const cX=Ew;function dL(e){const t=new Xv(e),r=GD(Xv.prototype.request,t);return Et.extend(r,Xv.prototype,t,{allOwnKeys:!0}),Et.extend(r,t,null,{allOwnKeys:!0}),r.create=function(c){return dL(wh(e,c))},r}const Ri=dL(lE);Ri.Axios=Xv;Ri.CanceledError=Rm;Ri.CancelToken=aX;Ri.isCancel=sL;Ri.VERSION=uL;Ri.toFormData=B0;Ri.AxiosError=hr;Ri.Cancel=Ri.CanceledError;Ri.all=function(t){return Promise.all(t)};Ri.spread=sX;Ri.isAxiosError=lX;Ri.mergeConfig=wh;Ri.AxiosHeaders=dl;Ri.formToJSON=e=>aL(Et.isHTMLForm(e)?new FormData(e):e);Ri.getAdapter=cL.getAdapter;Ri.HttpStatusCode=cX;Ri.default=Ri;const cY=Ri;var uX=function(e){return function(t,r){var a=T.useRef(!1);e(function(){return function(){a.current=!1}},[]),e(function(){if(!a.current)a.current=!0;else return t()},r)}},cs=function(){return cs=Object.assign||function(t){for(var r,a=1,c=arguments.length;a<c;a++){r=arguments[a];for(var f in r)Object.prototype.hasOwnProperty.call(r,f)&&(t[f]=r[f])}return t},cs.apply(this,arguments)};function hL(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(r[a[c]]=e[a[c]]);return r}function dX(e,t,r,a){function c(f){return f instanceof r?f:new r(function(y){y(f)})}return new(r||(r=Promise))(function(f,y){function l(P){try{C(a.next(P))}catch(A){y(A)}}function w(P){try{C(a.throw(P))}catch(A){y(A)}}function C(P){P.done?f(P.value):c(P.value).then(l,w)}C((a=a.apply(e,t||[])).next())})}function hX(e,t){var r={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},a,c,f,y;return y={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function l(C){return function(P){return w([C,P])}}function w(C){if(a)throw new TypeError("Generator is already executing.");for(;y&&(y=0,C[0]&&(r=0)),r;)try{if(a=1,c&&(f=C[0]&2?c.return:C[0]?c.throw||((f=c.return)&&f.call(c),0):c.next)&&!(f=f.call(c,C[1])).done)return f;switch(c=0,f&&(C=[C[0]&2,f.value]),C[0]){case 0:case 1:f=C;break;case 4:return r.label++,{value:C[1],done:!1};case 5:r.label++,c=C[1],C=[0];continue;case 7:C=r.ops.pop(),r.trys.pop();continue;default:if(f=r.trys,!(f=f.length>0&&f[f.length-1])&&(C[0]===6||C[0]===2)){r=0;continue}if(C[0]===3&&(!f||C[1]>f[0]&&C[1]<f[3])){r.label=C[1];break}if(C[0]===6&&r.label<f[1]){r.label=f[1],f=C;break}if(f&&r.label<f[2]){r.label=f[2],r.ops.push(C);break}f[2]&&r.ops.pop(),r.trys.pop();continue}C=t.call(e,r)}catch(P){C=[6,P],c=0}finally{a=f=0}if(C[0]&5)throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}}function mo(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var a=r.call(e),c,f=[],y;try{for(;(t===void 0||t-- >0)&&!(c=a.next()).done;)f.push(c.value)}catch(l){y={error:l}}finally{try{c&&!c.done&&(r=a.return)&&r.call(a)}finally{if(y)throw y.error}}return f}function go(e,t,r){if(r||arguments.length===2)for(var a=0,c=t.length,f;a<c;a++)(f||!(a in t))&&(f||(f=Array.prototype.slice.call(t,0,a)),f[a]=t[a]);return e.concat(f||Array.prototype.slice.call(t))}var j0=function(e){return typeof e=="function"},fX=!1;const U0=fX;function Ld(e){U0&&(j0(e)||console.error("useMemoizedFn expected parameter is a function, got ".concat(typeof e)));var t=T.useRef(e);t.current=T.useMemo(function(){return e},[e]);var r=T.useRef();return r.current||(r.current=function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];return t.current.apply(this,a)}),r.current}const Cw=uX(T.useEffect);var fL=function(e,t){var r=t.manual,a=t.ready,c=a===void 0?!0:a,f=t.defaultParams,y=f===void 0?[]:f,l=t.refreshDeps,w=l===void 0?[]:l,C=t.refreshDepsAction,P=T.useRef(!1);return P.current=!1,Cw(function(){!r&&c&&(P.current=!0,e.run.apply(e,go([],mo(y),!1)))},[c]),Cw(function(){P.current||r||(P.current=!0,C?C():e.refresh())},go([],mo(w),!1)),{onBefore:function(){if(!c)return{stopNow:!0}}}};fL.onInit=function(e){var t=e.ready,r=t===void 0?!0:t,a=e.manual;return{loading:!a&&r}};const pX=fL;function mX(e,t){if(e===t)return!0;for(var r=0;r<e.length;r++)if(!Object.is(e[r],t[r]))return!1;return!0}function pL(e,t){var r=T.useRef({deps:t,obj:void 0,initialized:!1}).current;return(r.initialized===!1||!mX(r.deps,t))&&(r.deps=t,r.obj=e(),r.initialized=!0),r.obj}function mL(e){var t=T.useRef(e);return t.current=e,t}var gX=function(e){U0&&(j0(e)||console.error("useUnmount expected parameter is a function, got ".concat(typeof e)));var t=mL(e);T.useEffect(function(){return function(){t.current()}},[])};const dE=gX;var Kv=new Map,vX=function(e,t,r){var a=Kv.get(e);a!=null&&a.timer&&clearTimeout(a.timer);var c=void 0;t>-1&&(c=setTimeout(function(){Kv.delete(e)},t)),Kv.set(e,cs(cs({},r),{timer:c}))},yX=function(e){return Kv.get(e)},Yv=new Map,_X=function(e){return Yv.get(e)},xX=function(e,t){Yv.set(e,t),t.then(function(r){return Yv.delete(e),r}).catch(function(){Yv.delete(e)})},su={},bX=function(e,t){su[e]&&su[e].forEach(function(r){return r(t)})},O1=function(e,t){return su[e]||(su[e]=[]),su[e].push(t),function(){var a=su[e].indexOf(t);su[e].splice(a,1)}},wX=function(e,t){var r=t.cacheKey,a=t.cacheTime,c=a===void 0?5*60*1e3:a,f=t.staleTime,y=f===void 0?0:f,l=t.setCache,w=t.getCache,C=T.useRef(),P=T.useRef(),A=function(N,F){l?l(F):vX(N,c,F),bX(N,F.data)},D=function(N,F){return F===void 0&&(F=[]),w?w(F):yX(N)};return pL(function(){if(r){var N=D(r);N&&Object.hasOwnProperty.call(N,"data")&&(e.state.data=N.data,e.state.params=N.params,(y===-1||new Date().getTime()-N.time<=y)&&(e.state.loading=!1)),C.current=O1(r,function(F){e.setState({data:F})})}},[]),dE(function(){var N;(N=C.current)===null||N===void 0||N.call(C)}),r?{onBefore:function(N){var F=D(r,N);return!F||!Object.hasOwnProperty.call(F,"data")?{}:y===-1||new Date().getTime()-F.time<=y?{loading:!1,data:F==null?void 0:F.data,error:void 0,returnNow:!0}:{data:F==null?void 0:F.data,error:void 0}},onRequest:function(N,F){var U=_X(r);return U&&U!==P.current?{servicePromise:U}:(U=N.apply(void 0,go([],mo(F),!1)),P.current=U,xX(r,U),{servicePromise:U})},onSuccess:function(N,F){var U;r&&((U=C.current)===null||U===void 0||U.call(C),A(r,{data:N,params:F,time:new Date().getTime()}),C.current=O1(r,function(Z){e.setState({data:Z})}))},onMutate:function(N){var F;r&&((F=C.current)===null||F===void 0||F.call(C),A(r,{data:N,params:e.state.params,time:new Date().getTime()}),C.current=O1(r,function(U){e.setState({data:U})}))}}:{}};const SX=wX;function EX(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var hE=EX,CX=typeof vp=="object"&&vp&&vp.Object===Object&&vp,TX=CX,IX=TX,MX=typeof self=="object"&&self&&self.Object===Object&&self,PX=IX||MX||Function("return this")(),gL=PX,AX=gL,RX=function(){return AX.Date.now()},OX=RX,zX=/\s/;function DX(e){for(var t=e.length;t--&&zX.test(e.charAt(t)););return t}var LX=DX,kX=LX,$X=/^\s+/;function FX(e){return e&&e.slice(0,kX(e)+1).replace($X,"")}var BX=FX,NX=gL,jX=NX.Symbol,vL=jX,dP=vL,yL=Object.prototype,UX=yL.hasOwnProperty,VX=yL.toString,gp=dP?dP.toStringTag:void 0;function HX(e){var t=UX.call(e,gp),r=e[gp];try{e[gp]=void 0;var a=!0}catch{}var c=VX.call(e);return a&&(t?e[gp]=r:delete e[gp]),c}var GX=HX,WX=Object.prototype,qX=WX.toString;function ZX(e){return qX.call(e)}var XX=ZX,hP=vL,KX=GX,YX=XX,JX="[object Null]",QX="[object Undefined]",fP=hP?hP.toStringTag:void 0;function eK(e){return e==null?e===void 0?QX:JX:fP&&fP in Object(e)?KX(e):YX(e)}var tK=eK;function nK(e){return e!=null&&typeof e=="object"}var rK=nK,iK=tK,oK=rK,aK="[object Symbol]";function sK(e){return typeof e=="symbol"||oK(e)&&iK(e)==aK}var lK=sK,cK=BX,pP=hE,uK=lK,mP=0/0,dK=/^[-+]0x[0-9a-f]+$/i,hK=/^0b[01]+$/i,fK=/^0o[0-7]+$/i,pK=parseInt;function mK(e){if(typeof e=="number")return e;if(uK(e))return mP;if(pP(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=pP(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=cK(e);var r=hK.test(e);return r||fK.test(e)?pK(e.slice(2),r?2:8):dK.test(e)?mP:+e}var gK=mK,vK=hE,z1=OX,gP=gK,yK="Expected a function",_K=Math.max,xK=Math.min;function bK(e,t,r){var a,c,f,y,l,w,C=0,P=!1,A=!1,D=!0;if(typeof e!="function")throw new TypeError(yK);t=gP(t)||0,vK(r)&&(P=!!r.leading,A="maxWait"in r,f=A?_K(gP(r.maxWait)||0,t):f,D="trailing"in r?!!r.trailing:D);function N(re){var Q=a,te=c;return a=c=void 0,C=re,y=e.apply(te,Q),y}function F(re){return C=re,l=setTimeout(j,t),P?N(re):y}function U(re){var Q=re-w,te=re-C,ee=t-Q;return A?xK(ee,f-te):ee}function Z(re){var Q=re-w,te=re-C;return w===void 0||Q>=t||Q<0||A&&te>=f}function j(){var re=z1();if(Z(re))return B(re);l=setTimeout(j,U(re))}function B(re){return l=void 0,D&&a?N(re):(a=c=void 0,y)}function H(){l!==void 0&&clearTimeout(l),C=0,a=w=c=l=void 0}function Y(){return l===void 0?y:B(z1())}function ne(){var re=z1(),Q=Z(re);if(a=arguments,c=this,w=re,Q){if(l===void 0)return F(w);if(A)return clearTimeout(l),l=setTimeout(j,t),N(w)}return l===void 0&&(l=setTimeout(j,t)),y}return ne.cancel=H,ne.flush=Y,ne}var _L=bK;const wK=_c(_L);var SK=function(e,t){var r=t.debounceWait,a=t.debounceLeading,c=t.debounceTrailing,f=t.debounceMaxWait,y=T.useRef(),l=T.useMemo(function(){var w={};return a!==void 0&&(w.leading=a),c!==void 0&&(w.trailing=c),f!==void 0&&(w.maxWait=f),w},[a,c,f]);return T.useEffect(function(){if(r){var w=e.runAsync.bind(e);return y.current=wK(function(C){C()},r,l),e.runAsync=function(){for(var C=[],P=0;P<arguments.length;P++)C[P]=arguments[P];return new Promise(function(A,D){var N;(N=y.current)===null||N===void 0||N.call(y,function(){w.apply(void 0,go([],mo(C),!1)).then(A).catch(D)})})},function(){var C;(C=y.current)===null||C===void 0||C.cancel(),e.runAsync=w}}},[r,l]),r?{onCancel:function(){var w;(w=y.current)===null||w===void 0||w.cancel()}}:{}};const EK=SK;var CK=function(e,t){var r=t.loadingDelay,a=t.ready,c=T.useRef();if(!r)return{};var f=function(){c.current&&clearTimeout(c.current)};return{onBefore:function(){return f(),a!==!1&&(c.current=setTimeout(function(){e.setState({loading:!0})},r)),{loading:!1}},onFinally:function(){f()},onCancel:function(){f()}}};const TK=CK;var IK=!!(typeof window<"u"&&window.document&&window.document.createElement);const V0=IK;function fE(){return V0?document.visibilityState!=="hidden":!0}var Fp=[];function MK(e){return Fp.push(e),function(){var r=Fp.indexOf(e);Fp.splice(r,1)}}if(V0){var PK=function(){if(fE())for(var e=0;e<Fp.length;e++){var t=Fp[e];t()}};window.addEventListener("visibilitychange",PK,!1)}var AK=function(e,t){var r=t.pollingInterval,a=t.pollingWhenHidden,c=a===void 0?!0:a,f=t.pollingErrorRetryCount,y=f===void 0?-1:f,l=T.useRef(),w=T.useRef(),C=T.useRef(0),P=function(){var A;l.current&&clearTimeout(l.current),(A=w.current)===null||A===void 0||A.call(w)};return Cw(function(){r||P()},[r]),r?{onBefore:function(){P()},onError:function(){C.current+=1},onSuccess:function(){C.current=0},onFinally:function(){y===-1||y!==-1&&C.current<=y?l.current=setTimeout(function(){!c&&!fE()?w.current=MK(function(){e.refresh()}):e.refresh()},r):C.current=0},onCancel:function(){P()}}:{}};const RK=AK;function OK(e,t){var r=!1;return function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];r||(r=!0,e.apply(void 0,go([],mo(a),!1)),setTimeout(function(){r=!1},t))}}function zK(){return V0&&typeof navigator.onLine<"u"?navigator.onLine:!0}var Bp=[];function DK(e){return Bp.push(e),function(){var r=Bp.indexOf(e);r>-1&&Bp.splice(r,1)}}if(V0){var vP=function(){if(!(!fE()||!zK()))for(var e=0;e<Bp.length;e++){var t=Bp[e];t()}};window.addEventListener("visibilitychange",vP,!1),window.addEventListener("focus",vP,!1)}var LK=function(e,t){var r=t.refreshOnWindowFocus,a=t.focusTimespan,c=a===void 0?5e3:a,f=T.useRef(),y=function(){var l;(l=f.current)===null||l===void 0||l.call(f)};return T.useEffect(function(){if(r){var l=OK(e.refresh.bind(e),c);f.current=DK(function(){l()})}return function(){y()}},[r,c]),dE(function(){y()}),{}};const kK=LK;var $K=function(e,t){var r=t.retryInterval,a=t.retryCount,c=T.useRef(),f=T.useRef(0),y=T.useRef(!1);return a?{onBefore:function(){y.current||(f.current=0),y.current=!1,c.current&&clearTimeout(c.current)},onSuccess:function(){f.current=0},onError:function(){if(f.current+=1,a===-1||f.current<=a){var l=r??Math.min(1e3*Math.pow(2,f.current),3e4);c.current=setTimeout(function(){y.current=!0,e.refresh()},l)}else f.current=0},onCancel:function(){f.current=0,c.current&&clearTimeout(c.current)}}:{}};const FK=$K;var BK=_L,NK=hE,jK="Expected a function";function UK(e,t,r){var a=!0,c=!0;if(typeof e!="function")throw new TypeError(jK);return NK(r)&&(a="leading"in r?!!r.leading:a,c="trailing"in r?!!r.trailing:c),BK(e,t,{leading:a,maxWait:t,trailing:c})}var VK=UK;const HK=_c(VK);var GK=function(e,t){var r=t.throttleWait,a=t.throttleLeading,c=t.throttleTrailing,f=T.useRef(),y={};return a!==void 0&&(y.leading=a),c!==void 0&&(y.trailing=c),T.useEffect(function(){if(r){var l=e.runAsync.bind(e);return f.current=HK(function(w){w()},r,y),e.runAsync=function(){for(var w=[],C=0;C<arguments.length;C++)w[C]=arguments[C];return new Promise(function(P,A){var D;(D=f.current)===null||D===void 0||D.call(f,function(){l.apply(void 0,go([],mo(w),!1)).then(P).catch(A)})})},function(){var w;e.runAsync=l,(w=f.current)===null||w===void 0||w.cancel()}}},[r,a,c]),r?{onCancel:function(){var l;(l=f.current)===null||l===void 0||l.cancel()}}:{}};const WK=GK;var qK=function(e){U0&&(j0(e)||console.error('useMount: parameter `fn` expected to be a function, but got "'.concat(typeof e,'".'))),T.useEffect(function(){e==null||e()},[])};const ZK=qK;var XK=function(){var e=mo(T.useState({}),2),t=e[1];return T.useCallback(function(){return t({})},[])};const KK=XK;var YK=function(){function e(t,r,a,c){c===void 0&&(c={}),this.serviceRef=t,this.options=r,this.subscribe=a,this.initState=c,this.count=0,this.state={loading:!1,params:void 0,data:void 0,error:void 0},this.state=cs(cs(cs({},this.state),{loading:!r.manual}),c)}return e.prototype.setState=function(t){t===void 0&&(t={}),this.state=cs(cs({},this.state),t),this.subscribe()},e.prototype.runPluginHandler=function(t){for(var r=[],a=1;a<arguments.length;a++)r[a-1]=arguments[a];var c=this.pluginImpls.map(function(f){var y;return(y=f[t])===null||y===void 0?void 0:y.call.apply(y,go([f],mo(r),!1))}).filter(Boolean);return Object.assign.apply(Object,go([{}],mo(c),!1))},e.prototype.runAsync=function(){for(var t,r,a,c,f,y,l,w,C,P,A=[],D=0;D<arguments.length;D++)A[D]=arguments[D];return dX(this,void 0,void 0,function(){var N,F,U,Z,j,B,H,Y,ne,re,Q;return hX(this,function(te){switch(te.label){case 0:if(this.count+=1,N=this.count,F=this.runPluginHandler("onBefore",A),U=F.stopNow,Z=U===void 0?!1:U,j=F.returnNow,B=j===void 0?!1:j,H=hL(F,["stopNow","returnNow"]),Z)return[2,new Promise(function(){})];if(this.setState(cs({loading:!0,params:A},H)),B)return[2,Promise.resolve(H.data)];(r=(t=this.options).onBefore)===null||r===void 0||r.call(t,A),te.label=1;case 1:return te.trys.push([1,3,,4]),Y=this.runPluginHandler("onRequest",this.serviceRef.current,A).servicePromise,Y||(Y=(Q=this.serviceRef).current.apply(Q,go([],mo(A),!1))),[4,Y];case 2:return ne=te.sent(),N!==this.count?[2,new Promise(function(){})]:(this.setState({data:ne,error:void 0,loading:!1}),(c=(a=this.options).onSuccess)===null||c===void 0||c.call(a,ne,A),this.runPluginHandler("onSuccess",ne,A),(y=(f=this.options).onFinally)===null||y===void 0||y.call(f,A,ne,void 0),N===this.count&&this.runPluginHandler("onFinally",A,ne,void 0),[2,ne]);case 3:if(re=te.sent(),N!==this.count)return[2,new Promise(function(){})];throw this.setState({error:re,loading:!1}),(w=(l=this.options).onError)===null||w===void 0||w.call(l,re,A),this.runPluginHandler("onError",re,A),(P=(C=this.options).onFinally)===null||P===void 0||P.call(C,A,void 0,re),N===this.count&&this.runPluginHandler("onFinally",A,void 0,re),re;case 4:return[2]}})})},e.prototype.run=function(){for(var t=this,r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];this.runAsync.apply(this,go([],mo(r),!1)).catch(function(c){t.options.onError||console.error(c)})},e.prototype.cancel=function(){this.count+=1,this.setState({loading:!1}),this.runPluginHandler("onCancel")},e.prototype.refresh=function(){this.run.apply(this,go([],mo(this.state.params||[]),!1))},e.prototype.refreshAsync=function(){return this.runAsync.apply(this,go([],mo(this.state.params||[]),!1))},e.prototype.mutate=function(t){var r=j0(t)?t(this.state.data):t;this.runPluginHandler("onMutate",r),this.setState({data:r})},e}();const JK=YK;function QK(e,t,r){t===void 0&&(t={}),r===void 0&&(r=[]);var a=t.manual,c=a===void 0?!1:a,f=hL(t,["manual"]);U0&&t.defaultParams&&!Array.isArray(t.defaultParams)&&console.warn("expected defaultParams is array, got ".concat(typeof t.defaultParams));var y=cs({manual:c},f),l=mL(e),w=KK(),C=pL(function(){var P=r.map(function(A){var D;return(D=A==null?void 0:A.onInit)===null||D===void 0?void 0:D.call(A,y)}).filter(Boolean);return new JK(l,y,w,Object.assign.apply(Object,go([{}],mo(P),!1)))},[]);return C.options=y,C.pluginImpls=r.map(function(P){return P(C,y)}),ZK(function(){if(!c){var P=C.state.params||t.defaultParams||[];C.run.apply(C,go([],mo(P),!1))}}),dE(function(){C.cancel()}),{loading:C.state.loading,data:C.state.data,error:C.state.error,params:C.state.params||[],cancel:Ld(C.cancel.bind(C)),refresh:Ld(C.refresh.bind(C)),refreshAsync:Ld(C.refreshAsync.bind(C)),run:Ld(C.run.bind(C)),runAsync:Ld(C.runAsync.bind(C)),mutate:Ld(C.mutate.bind(C))}}function uY(e,t,r){return QK(e,t,go(go([],mo(r||[]),!1),[EK,TK,RK,kK,WK,pX,SX,FK],!1))}export{HO as C,nY as I,ZG as L,tY as R,rY as S,oY as T,aY as a,yq as b,lY as c,cY as d,iY as e,KM as f,hq as g,eY as j,_q as m,T as r,uY as u};
