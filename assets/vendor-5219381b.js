function NP(e,t){for(var r=0;r<t.length;r++){const o=t[r];if(typeof o!="string"&&!Array.isArray(o)){for(const c in o)if(c!=="default"&&!(c in e)){const f=Object.getOwnPropertyDescriptor(o,c);f&&Object.defineProperty(e,c,f.get?f:{enumerable:!0,get:()=>o[c]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}var yp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function xc(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var jP={exports:{}},Gy={},UP={exports:{}},cr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mm=Symbol.for("react.element"),E$=Symbol.for("react.portal"),C$=Symbol.for("react.fragment"),T$=Symbol.for("react.strict_mode"),I$=Symbol.for("react.profiler"),M$=Symbol.for("react.provider"),P$=Symbol.for("react.context"),A$=Symbol.for("react.forward_ref"),R$=Symbol.for("react.suspense"),O$=Symbol.for("react.memo"),z$=Symbol.for("react.lazy"),nT=Symbol.iterator;function L$(e){return e===null||typeof e!="object"?null:(e=nT&&e[nT]||e["@@iterator"],typeof e=="function"?e:null)}var VP={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},HP=Object.assign,GP={};function Th(e,t,r){this.props=e,this.context=t,this.refs=GP,this.updater=r||VP}Th.prototype.isReactComponent={};Th.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Th.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function WP(){}WP.prototype=Th.prototype;function Rw(e,t,r){this.props=e,this.context=t,this.refs=GP,this.updater=r||VP}var Ow=Rw.prototype=new WP;Ow.constructor=Rw;HP(Ow,Th.prototype);Ow.isPureReactComponent=!0;var rT=Array.isArray,qP=Object.prototype.hasOwnProperty,zw={current:null},ZP={key:!0,ref:!0,__self:!0,__source:!0};function XP(e,t,r){var o,c={},f=null,y=null;if(t!=null)for(o in t.ref!==void 0&&(y=t.ref),t.key!==void 0&&(f=""+t.key),t)qP.call(t,o)&&!ZP.hasOwnProperty(o)&&(c[o]=t[o]);var l=arguments.length-2;if(l===1)c.children=r;else if(1<l){for(var w=Array(l),E=0;E<l;E++)w[E]=arguments[E+2];c.children=w}if(e&&e.defaultProps)for(o in l=e.defaultProps,l)c[o]===void 0&&(c[o]=l[o]);return{$$typeof:mm,type:e,key:f,ref:y,props:c,_owner:zw.current}}function D$(e,t){return{$$typeof:mm,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Lw(e){return typeof e=="object"&&e!==null&&e.$$typeof===mm}function k$(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var iT=/\/+/g;function Tx(e,t){return typeof e=="object"&&e!==null&&e.key!=null?k$(""+e.key):t.toString(36)}function Av(e,t,r,o,c){var f=typeof e;(f==="undefined"||f==="boolean")&&(e=null);var y=!1;if(e===null)y=!0;else switch(f){case"string":case"number":y=!0;break;case"object":switch(e.$$typeof){case mm:case E$:y=!0}}if(y)return y=e,c=c(y),e=o===""?"."+Tx(y,0):o,rT(c)?(r="",e!=null&&(r=e.replace(iT,"$&/")+"/"),Av(c,t,r,"",function(E){return E})):c!=null&&(Lw(c)&&(c=D$(c,r+(!c.key||y&&y.key===c.key?"":(""+c.key).replace(iT,"$&/")+"/")+e)),t.push(c)),1;if(y=0,o=o===""?".":o+":",rT(e))for(var l=0;l<e.length;l++){f=e[l];var w=o+Tx(f,l);y+=Av(f,t,r,w,c)}else if(w=L$(e),typeof w=="function")for(e=w.call(e),l=0;!(f=e.next()).done;)f=f.value,w=o+Tx(f,l++),y+=Av(f,t,r,w,c);else if(f==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return y}function Qg(e,t,r){if(e==null)return e;var o=[],c=0;return Av(e,o,"","",function(f){return t.call(r,f,c++)}),o}function $$(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Io={current:null},Rv={transition:null},F$={ReactCurrentDispatcher:Io,ReactCurrentBatchConfig:Rv,ReactCurrentOwner:zw};cr.Children={map:Qg,forEach:function(e,t,r){Qg(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Qg(e,function(){t++}),t},toArray:function(e){return Qg(e,function(t){return t})||[]},only:function(e){if(!Lw(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};cr.Component=Th;cr.Fragment=C$;cr.Profiler=I$;cr.PureComponent=Rw;cr.StrictMode=T$;cr.Suspense=R$;cr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=F$;cr.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var o=HP({},e.props),c=e.key,f=e.ref,y=e._owner;if(t!=null){if(t.ref!==void 0&&(f=t.ref,y=zw.current),t.key!==void 0&&(c=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(w in t)qP.call(t,w)&&!ZP.hasOwnProperty(w)&&(o[w]=t[w]===void 0&&l!==void 0?l[w]:t[w])}var w=arguments.length-2;if(w===1)o.children=r;else if(1<w){l=Array(w);for(var E=0;E<w;E++)l[E]=arguments[E+2];o.children=l}return{$$typeof:mm,type:e.type,key:c,ref:f,props:o,_owner:y}};cr.createContext=function(e){return e={$$typeof:P$,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:M$,_context:e},e.Consumer=e};cr.createElement=XP;cr.createFactory=function(e){var t=XP.bind(null,e);return t.type=e,t};cr.createRef=function(){return{current:null}};cr.forwardRef=function(e){return{$$typeof:A$,render:e}};cr.isValidElement=Lw;cr.lazy=function(e){return{$$typeof:z$,_payload:{_status:-1,_result:e},_init:$$}};cr.memo=function(e,t){return{$$typeof:O$,type:e,compare:t===void 0?null:t}};cr.startTransition=function(e){var t=Rv.transition;Rv.transition={};try{e()}finally{Rv.transition=t}};cr.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};cr.useCallback=function(e,t){return Io.current.useCallback(e,t)};cr.useContext=function(e){return Io.current.useContext(e)};cr.useDebugValue=function(){};cr.useDeferredValue=function(e){return Io.current.useDeferredValue(e)};cr.useEffect=function(e,t){return Io.current.useEffect(e,t)};cr.useId=function(){return Io.current.useId()};cr.useImperativeHandle=function(e,t,r){return Io.current.useImperativeHandle(e,t,r)};cr.useInsertionEffect=function(e,t){return Io.current.useInsertionEffect(e,t)};cr.useLayoutEffect=function(e,t){return Io.current.useLayoutEffect(e,t)};cr.useMemo=function(e,t){return Io.current.useMemo(e,t)};cr.useReducer=function(e,t,r){return Io.current.useReducer(e,t,r)};cr.useRef=function(e){return Io.current.useRef(e)};cr.useState=function(e){return Io.current.useState(e)};cr.useSyncExternalStore=function(e,t,r){return Io.current.useSyncExternalStore(e,t,r)};cr.useTransition=function(){return Io.current.useTransition()};cr.version="18.2.0";UP.exports=cr;var T=UP.exports;const lt=xc(T),Wy=NP({__proto__:null,default:lt},[T]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B$=T,N$=Symbol.for("react.element"),j$=Symbol.for("react.fragment"),U$=Object.prototype.hasOwnProperty,V$=B$.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,H$={key:!0,ref:!0,__self:!0,__source:!0};function KP(e,t,r){var o,c={},f=null,y=null;r!==void 0&&(f=""+r),t.key!==void 0&&(f=""+t.key),t.ref!==void 0&&(y=t.ref);for(o in t)U$.call(t,o)&&!H$.hasOwnProperty(o)&&(c[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps,t)c[o]===void 0&&(c[o]=t[o]);return{$$typeof:N$,type:e,key:f,ref:y,props:c,_owner:V$.current}}Gy.Fragment=j$;Gy.jsx=KP;Gy.jsxs=KP;jP.exports=Gy;var cJ=jP.exports,YP={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function r(){for(var o=[],c=0;c<arguments.length;c++){var f=arguments[c];if(f){var y=typeof f;if(y==="string"||y==="number")o.push(f);else if(Array.isArray(f)){if(f.length){var l=r.apply(null,f);l&&o.push(l)}}else if(y==="object"){if(f.toString!==Object.prototype.toString&&!f.toString.toString().includes("[native code]")){o.push(f.toString());continue}for(var w in f)t.call(f,w)&&f[w]&&o.push(w)}}}return o.join(" ")}e.exports?(r.default=r,e.exports=r):window.classNames=r})()})(YP);var G$=YP.exports;const Tt=xc(G$);function Sn(){return Sn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Sn.apply(this,arguments)}var JP={exports:{}},Fr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dw=Symbol.for("react.element"),kw=Symbol.for("react.portal"),qy=Symbol.for("react.fragment"),Zy=Symbol.for("react.strict_mode"),Xy=Symbol.for("react.profiler"),Ky=Symbol.for("react.provider"),Yy=Symbol.for("react.context"),W$=Symbol.for("react.server_context"),Jy=Symbol.for("react.forward_ref"),Qy=Symbol.for("react.suspense"),e0=Symbol.for("react.suspense_list"),t0=Symbol.for("react.memo"),n0=Symbol.for("react.lazy"),q$=Symbol.for("react.offscreen"),QP;QP=Symbol.for("react.module.reference");function Fa(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Dw:switch(e=e.type,e){case qy:case Xy:case Zy:case Qy:case e0:return e;default:switch(e=e&&e.$$typeof,e){case W$:case Yy:case Jy:case n0:case t0:case Ky:return e;default:return t}}case kw:return t}}}Fr.ContextConsumer=Yy;Fr.ContextProvider=Ky;Fr.Element=Dw;Fr.ForwardRef=Jy;Fr.Fragment=qy;Fr.Lazy=n0;Fr.Memo=t0;Fr.Portal=kw;Fr.Profiler=Xy;Fr.StrictMode=Zy;Fr.Suspense=Qy;Fr.SuspenseList=e0;Fr.isAsyncMode=function(){return!1};Fr.isConcurrentMode=function(){return!1};Fr.isContextConsumer=function(e){return Fa(e)===Yy};Fr.isContextProvider=function(e){return Fa(e)===Ky};Fr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Dw};Fr.isForwardRef=function(e){return Fa(e)===Jy};Fr.isFragment=function(e){return Fa(e)===qy};Fr.isLazy=function(e){return Fa(e)===n0};Fr.isMemo=function(e){return Fa(e)===t0};Fr.isPortal=function(e){return Fa(e)===kw};Fr.isProfiler=function(e){return Fa(e)===Xy};Fr.isStrictMode=function(e){return Fa(e)===Zy};Fr.isSuspense=function(e){return Fa(e)===Qy};Fr.isSuspenseList=function(e){return Fa(e)===e0};Fr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===qy||e===Xy||e===Zy||e===Qy||e===e0||e===q$||typeof e=="object"&&e!==null&&(e.$$typeof===n0||e.$$typeof===t0||e.$$typeof===Ky||e.$$typeof===Yy||e.$$typeof===Jy||e.$$typeof===QP||e.getModuleId!==void 0)};Fr.typeOf=Fa;JP.exports=Fr;var eA=JP.exports;function fl(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=[];return lt.Children.forEach(e,function(o){o==null&&!t.keepEmpty||(Array.isArray(o)?r=r.concat(fl(o)):eA.isFragment(o)&&o.props?r=r.concat(fl(o.props.children,t)):r.push(o))}),r}var B1={},Z$=function(t){};function X$(e,t){}function K$(e,t){}function Y$(){B1={}}function tA(e,t,r){!t&&!B1[r]&&(e(!1,r),B1[r]=!0)}function Vo(e,t){tA(X$,e,t)}function J$(e,t){tA(K$,e,t)}Vo.preMessage=Z$;Vo.resetWarned=Y$;Vo.noteOnce=J$;function Zn(e){"@babel/helpers - typeof";return Zn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zn(e)}function Q$(e,t){if(Zn(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var o=r.call(e,t||"default");if(Zn(o)!=="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function nA(e){var t=Q$(e,"string");return Zn(t)==="symbol"?t:String(t)}function Fe(e,t,r){return t=nA(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),r.push.apply(r,o)}return r}function st(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?oT(Object(r),!0).forEach(function(o){Fe(e,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oT(Object(r)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(r,o))})}return e}var rA={exports:{}},da={},iA={exports:{}},oA={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(pe,He){var Be=pe.length;pe.push(He);e:for(;0<Be;){var Ge=Be-1>>>1,Qe=pe[Ge];if(0<c(Qe,He))pe[Ge]=He,pe[Be]=Qe,Be=Ge;else break e}}function r(pe){return pe.length===0?null:pe[0]}function o(pe){if(pe.length===0)return null;var He=pe[0],Be=pe.pop();if(Be!==He){pe[0]=Be;e:for(var Ge=0,Qe=pe.length,gt=Qe>>>1;Ge<gt;){var St=2*(Ge+1)-1,xt=pe[St],jt=St+1,Ut=pe[jt];if(0>c(xt,Be))jt<Qe&&0>c(Ut,xt)?(pe[Ge]=Ut,pe[jt]=Be,Ge=jt):(pe[Ge]=xt,pe[St]=Be,Ge=St);else if(jt<Qe&&0>c(Ut,Be))pe[Ge]=Ut,pe[jt]=Be,Ge=jt;else break e}}return He}function c(pe,He){var Be=pe.sortIndex-He.sortIndex;return Be!==0?Be:pe.id-He.id}if(typeof performance=="object"&&typeof performance.now=="function"){var f=performance;e.unstable_now=function(){return f.now()}}else{var y=Date,l=y.now();e.unstable_now=function(){return y.now()-l}}var w=[],E=[],P=1,M=null,z=3,F=!1,k=!1,U=!1,X=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function V(pe){for(var He=r(E);He!==null;){if(He.callback===null)o(E);else if(He.startTime<=pe)o(E),He.sortIndex=He.expirationTime,t(w,He);else break;He=r(E)}}function Z(pe){if(U=!1,V(pe),!k)if(r(w)!==null)k=!0,Le(ee);else{var He=r(E);He!==null&&Ne(Z,He.startTime-pe)}}function ee(pe,He){k=!1,U&&(U=!1,$(ie),ie=-1),F=!0;var Be=z;try{for(V(He),M=r(w);M!==null&&(!(M.expirationTime>He)||pe&&!ue());){var Ge=M.callback;if(typeof Ge=="function"){M.callback=null,z=M.priorityLevel;var Qe=Ge(M.expirationTime<=He);He=e.unstable_now(),typeof Qe=="function"?M.callback=Qe:M===r(w)&&o(w),V(He)}else o(w);M=r(w)}if(M!==null)var gt=!0;else{var St=r(E);St!==null&&Ne(Z,St.startTime-He),gt=!1}return gt}finally{M=null,z=Be,F=!1}}var ne=!1,Q=null,ie=-1,te=5,ge=-1;function ue(){return!(e.unstable_now()-ge<te)}function oe(){if(Q!==null){var pe=e.unstable_now();ge=pe;var He=!0;try{He=Q(!0,pe)}finally{He?fe():(ne=!1,Q=null)}}else ne=!1}var fe;if(typeof j=="function")fe=function(){j(oe)};else if(typeof MessageChannel<"u"){var Ee=new MessageChannel,ke=Ee.port2;Ee.port1.onmessage=oe,fe=function(){ke.postMessage(null)}}else fe=function(){X(oe,0)};function Le(pe){Q=pe,ne||(ne=!0,fe())}function Ne(pe,He){ie=X(function(){pe(e.unstable_now())},He)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(pe){pe.callback=null},e.unstable_continueExecution=function(){k||F||(k=!0,Le(ee))},e.unstable_forceFrameRate=function(pe){0>pe||125<pe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):te=0<pe?Math.floor(1e3/pe):5},e.unstable_getCurrentPriorityLevel=function(){return z},e.unstable_getFirstCallbackNode=function(){return r(w)},e.unstable_next=function(pe){switch(z){case 1:case 2:case 3:var He=3;break;default:He=z}var Be=z;z=He;try{return pe()}finally{z=Be}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(pe,He){switch(pe){case 1:case 2:case 3:case 4:case 5:break;default:pe=3}var Be=z;z=pe;try{return He()}finally{z=Be}},e.unstable_scheduleCallback=function(pe,He,Be){var Ge=e.unstable_now();switch(typeof Be=="object"&&Be!==null?(Be=Be.delay,Be=typeof Be=="number"&&0<Be?Ge+Be:Ge):Be=Ge,pe){case 1:var Qe=-1;break;case 2:Qe=250;break;case 5:Qe=1073741823;break;case 4:Qe=1e4;break;default:Qe=5e3}return Qe=Be+Qe,pe={id:P++,callback:He,priorityLevel:pe,startTime:Be,expirationTime:Qe,sortIndex:-1},Be>Ge?(pe.sortIndex=Be,t(E,pe),r(w)===null&&pe===r(E)&&(U?($(ie),ie=-1):U=!0,Ne(Z,Be-Ge))):(pe.sortIndex=Qe,t(w,pe),k||F||(k=!0,Le(ee))),pe},e.unstable_shouldYield=ue,e.unstable_wrapCallback=function(pe){var He=z;return function(){var Be=z;z=He;try{return pe.apply(this,arguments)}finally{z=Be}}}})(oA);iA.exports=oA;var eF=iA.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aA=T,ua=eF;function Gt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var sA=new Set,jp={};function Mu(e,t){hh(e,t),hh(e+"Capture",t)}function hh(e,t){for(jp[e]=t,e=0;e<t.length;e++)sA.add(t[e])}var pl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),N1=Object.prototype.hasOwnProperty,tF=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,aT={},sT={};function nF(e){return N1.call(sT,e)?!0:N1.call(aT,e)?!1:tF.test(e)?sT[e]=!0:(aT[e]=!0,!1)}function rF(e,t,r,o){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return o?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function iF(e,t,r,o){if(t===null||typeof t>"u"||rF(e,t,r,o))return!0;if(o)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Mo(e,t,r,o,c,f,y){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=o,this.attributeNamespace=c,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=f,this.removeEmptyString=y}var to={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){to[e]=new Mo(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];to[t]=new Mo(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){to[e]=new Mo(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){to[e]=new Mo(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){to[e]=new Mo(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){to[e]=new Mo(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){to[e]=new Mo(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){to[e]=new Mo(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){to[e]=new Mo(e,5,!1,e.toLowerCase(),null,!1,!1)});var $w=/[\-:]([a-z])/g;function Fw(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace($w,Fw);to[t]=new Mo(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace($w,Fw);to[t]=new Mo(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace($w,Fw);to[t]=new Mo(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){to[e]=new Mo(e,1,!1,e.toLowerCase(),null,!1,!1)});to.xlinkHref=new Mo("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){to[e]=new Mo(e,1,!1,e.toLowerCase(),null,!0,!0)});function Bw(e,t,r,o){var c=to.hasOwnProperty(t)?to[t]:null;(c!==null?c.type!==0:o||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(iF(t,r,c,o)&&(r=null),o||c===null?nF(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):c.mustUseProperty?e[c.propertyName]=r===null?c.type===3?!1:"":r:(t=c.attributeName,o=c.attributeNamespace,r===null?e.removeAttribute(t):(c=c.type,r=c===3||c===4&&r===!0?"":""+r,o?e.setAttributeNS(o,t,r):e.setAttribute(t,r))))}var xl=aA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ev=Symbol.for("react.element"),jd=Symbol.for("react.portal"),Ud=Symbol.for("react.fragment"),Nw=Symbol.for("react.strict_mode"),j1=Symbol.for("react.profiler"),lA=Symbol.for("react.provider"),cA=Symbol.for("react.context"),jw=Symbol.for("react.forward_ref"),U1=Symbol.for("react.suspense"),V1=Symbol.for("react.suspense_list"),Uw=Symbol.for("react.memo"),tc=Symbol.for("react.lazy"),uA=Symbol.for("react.offscreen"),lT=Symbol.iterator;function rp(e){return e===null||typeof e!="object"?null:(e=lT&&e[lT]||e["@@iterator"],typeof e=="function"?e:null)}var mi=Object.assign,Ix;function _p(e){if(Ix===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Ix=t&&t[1]||""}return`
`+Ix+e}var Mx=!1;function Px(e,t){if(!e||Mx)return"";Mx=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(E){var o=E}Reflect.construct(e,[],t)}else{try{t.call()}catch(E){o=E}e.call(t.prototype)}else{try{throw Error()}catch(E){o=E}e()}}catch(E){if(E&&o&&typeof E.stack=="string"){for(var c=E.stack.split(`
`),f=o.stack.split(`
`),y=c.length-1,l=f.length-1;1<=y&&0<=l&&c[y]!==f[l];)l--;for(;1<=y&&0<=l;y--,l--)if(c[y]!==f[l]){if(y!==1||l!==1)do if(y--,l--,0>l||c[y]!==f[l]){var w=`
`+c[y].replace(" at new "," at ");return e.displayName&&w.includes("<anonymous>")&&(w=w.replace("<anonymous>",e.displayName)),w}while(1<=y&&0<=l);break}}}finally{Mx=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?_p(e):""}function oF(e){switch(e.tag){case 5:return _p(e.type);case 16:return _p("Lazy");case 13:return _p("Suspense");case 19:return _p("SuspenseList");case 0:case 2:case 15:return e=Px(e.type,!1),e;case 11:return e=Px(e.type.render,!1),e;case 1:return e=Px(e.type,!0),e;default:return""}}function H1(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ud:return"Fragment";case jd:return"Portal";case j1:return"Profiler";case Nw:return"StrictMode";case U1:return"Suspense";case V1:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case cA:return(e.displayName||"Context")+".Consumer";case lA:return(e._context.displayName||"Context")+".Provider";case jw:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Uw:return t=e.displayName||null,t!==null?t:H1(e.type)||"Memo";case tc:t=e._payload,e=e._init;try{return H1(e(t))}catch{}}return null}function aF(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return H1(t);case 8:return t===Nw?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function vc(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function dA(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function sF(e){var t=dA(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),o=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var c=r.get,f=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(y){o=""+y,f.call(this,y)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return o},setValue:function(y){o=""+y},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function tv(e){e._valueTracker||(e._valueTracker=sF(e))}function hA(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),o="";return e&&(o=dA(e)?e.checked?"true":"false":e.value),e=o,e!==r?(t.setValue(e),!0):!1}function ty(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function G1(e,t){var r=t.checked;return mi({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function cT(e,t){var r=t.defaultValue==null?"":t.defaultValue,o=t.checked!=null?t.checked:t.defaultChecked;r=vc(t.value!=null?t.value:r),e._wrapperState={initialChecked:o,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function fA(e,t){t=t.checked,t!=null&&Bw(e,"checked",t,!1)}function W1(e,t){fA(e,t);var r=vc(t.value),o=t.type;if(r!=null)o==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(o==="submit"||o==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?q1(e,t.type,r):t.hasOwnProperty("defaultValue")&&q1(e,t.type,vc(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function uT(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var o=t.type;if(!(o!=="submit"&&o!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function q1(e,t,r){(t!=="number"||ty(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var xp=Array.isArray;function rh(e,t,r,o){if(e=e.options,t){t={};for(var c=0;c<r.length;c++)t["$"+r[c]]=!0;for(r=0;r<e.length;r++)c=t.hasOwnProperty("$"+e[r].value),e[r].selected!==c&&(e[r].selected=c),c&&o&&(e[r].defaultSelected=!0)}else{for(r=""+vc(r),t=null,c=0;c<e.length;c++){if(e[c].value===r){e[c].selected=!0,o&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function Z1(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Gt(91));return mi({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function dT(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(Gt(92));if(xp(r)){if(1<r.length)throw Error(Gt(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:vc(r)}}function pA(e,t){var r=vc(t.value),o=vc(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),o!=null&&(e.defaultValue=""+o)}function hT(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function mA(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function X1(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?mA(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var nv,gA=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,o,c){MSApp.execUnsafeLocalFunction(function(){return e(t,r,o,c)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(nv=nv||document.createElement("div"),nv.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=nv.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Up(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Ep={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},lF=["Webkit","ms","Moz","O"];Object.keys(Ep).forEach(function(e){lF.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ep[t]=Ep[e]})});function vA(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Ep.hasOwnProperty(e)&&Ep[e]?(""+t).trim():t+"px"}function yA(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var o=r.indexOf("--")===0,c=vA(r,t[r],o);r==="float"&&(r="cssFloat"),o?e.setProperty(r,c):e[r]=c}}var cF=mi({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function K1(e,t){if(t){if(cF[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Gt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Gt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Gt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Gt(62))}}function Y1(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var J1=null;function Vw(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Q1=null,ih=null,oh=null;function fT(e){if(e=ym(e)){if(typeof Q1!="function")throw Error(Gt(280));var t=e.stateNode;t&&(t=s0(t),Q1(e.stateNode,e.type,t))}}function _A(e){ih?oh?oh.push(e):oh=[e]:ih=e}function xA(){if(ih){var e=ih,t=oh;if(oh=ih=null,fT(e),t)for(e=0;e<t.length;e++)fT(t[e])}}function bA(e,t){return e(t)}function wA(){}var Ax=!1;function SA(e,t,r){if(Ax)return e(t,r);Ax=!0;try{return bA(e,t,r)}finally{Ax=!1,(ih!==null||oh!==null)&&(wA(),xA())}}function Vp(e,t){var r=e.stateNode;if(r===null)return null;var o=s0(r);if(o===null)return null;r=o[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(Gt(231,t,typeof r));return r}var eb=!1;if(pl)try{var ip={};Object.defineProperty(ip,"passive",{get:function(){eb=!0}}),window.addEventListener("test",ip,ip),window.removeEventListener("test",ip,ip)}catch{eb=!1}function uF(e,t,r,o,c,f,y,l,w){var E=Array.prototype.slice.call(arguments,3);try{t.apply(r,E)}catch(P){this.onError(P)}}var Cp=!1,ny=null,ry=!1,tb=null,dF={onError:function(e){Cp=!0,ny=e}};function hF(e,t,r,o,c,f,y,l,w){Cp=!1,ny=null,uF.apply(dF,arguments)}function fF(e,t,r,o,c,f,y,l,w){if(hF.apply(this,arguments),Cp){if(Cp){var E=ny;Cp=!1,ny=null}else throw Error(Gt(198));ry||(ry=!0,tb=E)}}function Pu(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function EA(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function pT(e){if(Pu(e)!==e)throw Error(Gt(188))}function pF(e){var t=e.alternate;if(!t){if(t=Pu(e),t===null)throw Error(Gt(188));return t!==e?null:e}for(var r=e,o=t;;){var c=r.return;if(c===null)break;var f=c.alternate;if(f===null){if(o=c.return,o!==null){r=o;continue}break}if(c.child===f.child){for(f=c.child;f;){if(f===r)return pT(c),e;if(f===o)return pT(c),t;f=f.sibling}throw Error(Gt(188))}if(r.return!==o.return)r=c,o=f;else{for(var y=!1,l=c.child;l;){if(l===r){y=!0,r=c,o=f;break}if(l===o){y=!0,o=c,r=f;break}l=l.sibling}if(!y){for(l=f.child;l;){if(l===r){y=!0,r=f,o=c;break}if(l===o){y=!0,o=f,r=c;break}l=l.sibling}if(!y)throw Error(Gt(189))}}if(r.alternate!==o)throw Error(Gt(190))}if(r.tag!==3)throw Error(Gt(188));return r.stateNode.current===r?e:t}function CA(e){return e=pF(e),e!==null?TA(e):null}function TA(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=TA(e);if(t!==null)return t;e=e.sibling}return null}var IA=ua.unstable_scheduleCallback,mT=ua.unstable_cancelCallback,mF=ua.unstable_shouldYield,gF=ua.unstable_requestPaint,wi=ua.unstable_now,vF=ua.unstable_getCurrentPriorityLevel,Hw=ua.unstable_ImmediatePriority,MA=ua.unstable_UserBlockingPriority,iy=ua.unstable_NormalPriority,yF=ua.unstable_LowPriority,PA=ua.unstable_IdlePriority,r0=null,$s=null;function _F(e){if($s&&typeof $s.onCommitFiberRoot=="function")try{$s.onCommitFiberRoot(r0,e,void 0,(e.current.flags&128)===128)}catch{}}var ps=Math.clz32?Math.clz32:wF,xF=Math.log,bF=Math.LN2;function wF(e){return e>>>=0,e===0?32:31-(xF(e)/bF|0)|0}var rv=64,iv=4194304;function bp(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function oy(e,t){var r=e.pendingLanes;if(r===0)return 0;var o=0,c=e.suspendedLanes,f=e.pingedLanes,y=r&268435455;if(y!==0){var l=y&~c;l!==0?o=bp(l):(f&=y,f!==0&&(o=bp(f)))}else y=r&~c,y!==0?o=bp(y):f!==0&&(o=bp(f));if(o===0)return 0;if(t!==0&&t!==o&&!(t&c)&&(c=o&-o,f=t&-t,c>=f||c===16&&(f&4194240)!==0))return t;if(o&4&&(o|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=o;0<t;)r=31-ps(t),c=1<<r,o|=e[r],t&=~c;return o}function SF(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function EF(e,t){for(var r=e.suspendedLanes,o=e.pingedLanes,c=e.expirationTimes,f=e.pendingLanes;0<f;){var y=31-ps(f),l=1<<y,w=c[y];w===-1?(!(l&r)||l&o)&&(c[y]=SF(l,t)):w<=t&&(e.expiredLanes|=l),f&=~l}}function nb(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function AA(){var e=rv;return rv<<=1,!(rv&4194240)&&(rv=64),e}function Rx(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function gm(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ps(t),e[t]=r}function CF(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var o=e.eventTimes;for(e=e.expirationTimes;0<r;){var c=31-ps(r),f=1<<c;t[c]=0,o[c]=-1,e[c]=-1,r&=~f}}function Gw(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var o=31-ps(r),c=1<<o;c&t|e[o]&t&&(e[o]|=t),r&=~c}}var $r=0;function RA(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var OA,Ww,zA,LA,DA,rb=!1,ov=[],cc=null,uc=null,dc=null,Hp=new Map,Gp=new Map,rc=[],TF="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function gT(e,t){switch(e){case"focusin":case"focusout":cc=null;break;case"dragenter":case"dragleave":uc=null;break;case"mouseover":case"mouseout":dc=null;break;case"pointerover":case"pointerout":Hp.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gp.delete(t.pointerId)}}function op(e,t,r,o,c,f){return e===null||e.nativeEvent!==f?(e={blockedOn:t,domEventName:r,eventSystemFlags:o,nativeEvent:f,targetContainers:[c]},t!==null&&(t=ym(t),t!==null&&Ww(t)),e):(e.eventSystemFlags|=o,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function IF(e,t,r,o,c){switch(t){case"focusin":return cc=op(cc,e,t,r,o,c),!0;case"dragenter":return uc=op(uc,e,t,r,o,c),!0;case"mouseover":return dc=op(dc,e,t,r,o,c),!0;case"pointerover":var f=c.pointerId;return Hp.set(f,op(Hp.get(f)||null,e,t,r,o,c)),!0;case"gotpointercapture":return f=c.pointerId,Gp.set(f,op(Gp.get(f)||null,e,t,r,o,c)),!0}return!1}function kA(e){var t=lu(e.target);if(t!==null){var r=Pu(t);if(r!==null){if(t=r.tag,t===13){if(t=EA(r),t!==null){e.blockedOn=t,DA(e.priority,function(){zA(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ov(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=ib(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var o=new r.constructor(r.type,r);J1=o,r.target.dispatchEvent(o),J1=null}else return t=ym(r),t!==null&&Ww(t),e.blockedOn=r,!1;t.shift()}return!0}function vT(e,t,r){Ov(e)&&r.delete(t)}function MF(){rb=!1,cc!==null&&Ov(cc)&&(cc=null),uc!==null&&Ov(uc)&&(uc=null),dc!==null&&Ov(dc)&&(dc=null),Hp.forEach(vT),Gp.forEach(vT)}function ap(e,t){e.blockedOn===t&&(e.blockedOn=null,rb||(rb=!0,ua.unstable_scheduleCallback(ua.unstable_NormalPriority,MF)))}function Wp(e){function t(c){return ap(c,e)}if(0<ov.length){ap(ov[0],e);for(var r=1;r<ov.length;r++){var o=ov[r];o.blockedOn===e&&(o.blockedOn=null)}}for(cc!==null&&ap(cc,e),uc!==null&&ap(uc,e),dc!==null&&ap(dc,e),Hp.forEach(t),Gp.forEach(t),r=0;r<rc.length;r++)o=rc[r],o.blockedOn===e&&(o.blockedOn=null);for(;0<rc.length&&(r=rc[0],r.blockedOn===null);)kA(r),r.blockedOn===null&&rc.shift()}var ah=xl.ReactCurrentBatchConfig,ay=!0;function PF(e,t,r,o){var c=$r,f=ah.transition;ah.transition=null;try{$r=1,qw(e,t,r,o)}finally{$r=c,ah.transition=f}}function AF(e,t,r,o){var c=$r,f=ah.transition;ah.transition=null;try{$r=4,qw(e,t,r,o)}finally{$r=c,ah.transition=f}}function qw(e,t,r,o){if(ay){var c=ib(e,t,r,o);if(c===null)jx(e,t,o,sy,r),gT(e,o);else if(IF(c,e,t,r,o))o.stopPropagation();else if(gT(e,o),t&4&&-1<TF.indexOf(e)){for(;c!==null;){var f=ym(c);if(f!==null&&OA(f),f=ib(e,t,r,o),f===null&&jx(e,t,o,sy,r),f===c)break;c=f}c!==null&&o.stopPropagation()}else jx(e,t,o,null,r)}}var sy=null;function ib(e,t,r,o){if(sy=null,e=Vw(o),e=lu(e),e!==null)if(t=Pu(e),t===null)e=null;else if(r=t.tag,r===13){if(e=EA(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return sy=e,null}function $A(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(vF()){case Hw:return 1;case MA:return 4;case iy:case yF:return 16;case PA:return 536870912;default:return 16}default:return 16}}var oc=null,Zw=null,zv=null;function FA(){if(zv)return zv;var e,t=Zw,r=t.length,o,c="value"in oc?oc.value:oc.textContent,f=c.length;for(e=0;e<r&&t[e]===c[e];e++);var y=r-e;for(o=1;o<=y&&t[r-o]===c[f-o];o++);return zv=c.slice(e,1<o?1-o:void 0)}function Lv(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function av(){return!0}function yT(){return!1}function ha(e){function t(r,o,c,f,y){this._reactName=r,this._targetInst=c,this.type=o,this.nativeEvent=f,this.target=y,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(f):f[l]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?av:yT,this.isPropagationStopped=yT,this}return mi(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=av)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=av)},persist:function(){},isPersistent:av}),t}var Ih={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xw=ha(Ih),vm=mi({},Ih,{view:0,detail:0}),RF=ha(vm),Ox,zx,sp,i0=mi({},vm,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Kw,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sp&&(sp&&e.type==="mousemove"?(Ox=e.screenX-sp.screenX,zx=e.screenY-sp.screenY):zx=Ox=0,sp=e),Ox)},movementY:function(e){return"movementY"in e?e.movementY:zx}}),_T=ha(i0),OF=mi({},i0,{dataTransfer:0}),zF=ha(OF),LF=mi({},vm,{relatedTarget:0}),Lx=ha(LF),DF=mi({},Ih,{animationName:0,elapsedTime:0,pseudoElement:0}),kF=ha(DF),$F=mi({},Ih,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),FF=ha($F),BF=mi({},Ih,{data:0}),xT=ha(BF),NF={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jF={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},UF={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function VF(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=UF[e])?!!t[e]:!1}function Kw(){return VF}var HF=mi({},vm,{key:function(e){if(e.key){var t=NF[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Lv(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?jF[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Kw,charCode:function(e){return e.type==="keypress"?Lv(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Lv(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),GF=ha(HF),WF=mi({},i0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bT=ha(WF),qF=mi({},vm,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Kw}),ZF=ha(qF),XF=mi({},Ih,{propertyName:0,elapsedTime:0,pseudoElement:0}),KF=ha(XF),YF=mi({},i0,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),JF=ha(YF),QF=[9,13,27,32],Yw=pl&&"CompositionEvent"in window,Tp=null;pl&&"documentMode"in document&&(Tp=document.documentMode);var eB=pl&&"TextEvent"in window&&!Tp,BA=pl&&(!Yw||Tp&&8<Tp&&11>=Tp),wT=String.fromCharCode(32),ST=!1;function NA(e,t){switch(e){case"keyup":return QF.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jA(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Vd=!1;function tB(e,t){switch(e){case"compositionend":return jA(t);case"keypress":return t.which!==32?null:(ST=!0,wT);case"textInput":return e=t.data,e===wT&&ST?null:e;default:return null}}function nB(e,t){if(Vd)return e==="compositionend"||!Yw&&NA(e,t)?(e=FA(),zv=Zw=oc=null,Vd=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return BA&&t.locale!=="ko"?null:t.data;default:return null}}var rB={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ET(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!rB[e.type]:t==="textarea"}function UA(e,t,r,o){_A(o),t=ly(t,"onChange"),0<t.length&&(r=new Xw("onChange","change",null,r,o),e.push({event:r,listeners:t}))}var Ip=null,qp=null;function iB(e){QA(e,0)}function o0(e){var t=Wd(e);if(hA(t))return e}function oB(e,t){if(e==="change")return t}var VA=!1;if(pl){var Dx;if(pl){var kx="oninput"in document;if(!kx){var CT=document.createElement("div");CT.setAttribute("oninput","return;"),kx=typeof CT.oninput=="function"}Dx=kx}else Dx=!1;VA=Dx&&(!document.documentMode||9<document.documentMode)}function TT(){Ip&&(Ip.detachEvent("onpropertychange",HA),qp=Ip=null)}function HA(e){if(e.propertyName==="value"&&o0(qp)){var t=[];UA(t,qp,e,Vw(e)),SA(iB,t)}}function aB(e,t,r){e==="focusin"?(TT(),Ip=t,qp=r,Ip.attachEvent("onpropertychange",HA)):e==="focusout"&&TT()}function sB(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return o0(qp)}function lB(e,t){if(e==="click")return o0(t)}function cB(e,t){if(e==="input"||e==="change")return o0(t)}function uB(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var vs=typeof Object.is=="function"?Object.is:uB;function Zp(e,t){if(vs(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),o=Object.keys(t);if(r.length!==o.length)return!1;for(o=0;o<r.length;o++){var c=r[o];if(!N1.call(t,c)||!vs(e[c],t[c]))return!1}return!0}function IT(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function MT(e,t){var r=IT(e);e=0;for(var o;r;){if(r.nodeType===3){if(o=e+r.textContent.length,e<=t&&o>=t)return{node:r,offset:t-e};e=o}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=IT(r)}}function GA(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?GA(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function WA(){for(var e=window,t=ty();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=ty(e.document)}return t}function Jw(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function dB(e){var t=WA(),r=e.focusedElem,o=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&GA(r.ownerDocument.documentElement,r)){if(o!==null&&Jw(r)){if(t=o.start,e=o.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var c=r.textContent.length,f=Math.min(o.start,c);o=o.end===void 0?f:Math.min(o.end,c),!e.extend&&f>o&&(c=o,o=f,f=c),c=MT(r,f);var y=MT(r,o);c&&y&&(e.rangeCount!==1||e.anchorNode!==c.node||e.anchorOffset!==c.offset||e.focusNode!==y.node||e.focusOffset!==y.offset)&&(t=t.createRange(),t.setStart(c.node,c.offset),e.removeAllRanges(),f>o?(e.addRange(t),e.extend(y.node,y.offset)):(t.setEnd(y.node,y.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var hB=pl&&"documentMode"in document&&11>=document.documentMode,Hd=null,ob=null,Mp=null,ab=!1;function PT(e,t,r){var o=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;ab||Hd==null||Hd!==ty(o)||(o=Hd,"selectionStart"in o&&Jw(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Mp&&Zp(Mp,o)||(Mp=o,o=ly(ob,"onSelect"),0<o.length&&(t=new Xw("onSelect","select",null,t,r),e.push({event:t,listeners:o}),t.target=Hd)))}function sv(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Gd={animationend:sv("Animation","AnimationEnd"),animationiteration:sv("Animation","AnimationIteration"),animationstart:sv("Animation","AnimationStart"),transitionend:sv("Transition","TransitionEnd")},$x={},qA={};pl&&(qA=document.createElement("div").style,"AnimationEvent"in window||(delete Gd.animationend.animation,delete Gd.animationiteration.animation,delete Gd.animationstart.animation),"TransitionEvent"in window||delete Gd.transitionend.transition);function a0(e){if($x[e])return $x[e];if(!Gd[e])return e;var t=Gd[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in qA)return $x[e]=t[r];return e}var ZA=a0("animationend"),XA=a0("animationiteration"),KA=a0("animationstart"),YA=a0("transitionend"),JA=new Map,AT="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function bc(e,t){JA.set(e,t),Mu(t,[e])}for(var Fx=0;Fx<AT.length;Fx++){var Bx=AT[Fx],fB=Bx.toLowerCase(),pB=Bx[0].toUpperCase()+Bx.slice(1);bc(fB,"on"+pB)}bc(ZA,"onAnimationEnd");bc(XA,"onAnimationIteration");bc(KA,"onAnimationStart");bc("dblclick","onDoubleClick");bc("focusin","onFocus");bc("focusout","onBlur");bc(YA,"onTransitionEnd");hh("onMouseEnter",["mouseout","mouseover"]);hh("onMouseLeave",["mouseout","mouseover"]);hh("onPointerEnter",["pointerout","pointerover"]);hh("onPointerLeave",["pointerout","pointerover"]);Mu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Mu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Mu("onBeforeInput",["compositionend","keypress","textInput","paste"]);Mu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Mu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Mu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mB=new Set("cancel close invalid load scroll toggle".split(" ").concat(wp));function RT(e,t,r){var o=e.type||"unknown-event";e.currentTarget=r,fF(o,t,void 0,e),e.currentTarget=null}function QA(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var o=e[r],c=o.event;o=o.listeners;e:{var f=void 0;if(t)for(var y=o.length-1;0<=y;y--){var l=o[y],w=l.instance,E=l.currentTarget;if(l=l.listener,w!==f&&c.isPropagationStopped())break e;RT(c,l,E),f=w}else for(y=0;y<o.length;y++){if(l=o[y],w=l.instance,E=l.currentTarget,l=l.listener,w!==f&&c.isPropagationStopped())break e;RT(c,l,E),f=w}}}if(ry)throw e=tb,ry=!1,tb=null,e}function ti(e,t){var r=t[db];r===void 0&&(r=t[db]=new Set);var o=e+"__bubble";r.has(o)||(eR(t,e,2,!1),r.add(o))}function Nx(e,t,r){var o=0;t&&(o|=4),eR(r,e,o,t)}var lv="_reactListening"+Math.random().toString(36).slice(2);function Xp(e){if(!e[lv]){e[lv]=!0,sA.forEach(function(r){r!=="selectionchange"&&(mB.has(r)||Nx(r,!1,e),Nx(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[lv]||(t[lv]=!0,Nx("selectionchange",!1,t))}}function eR(e,t,r,o){switch($A(t)){case 1:var c=PF;break;case 4:c=AF;break;default:c=qw}r=c.bind(null,t,r,e),c=void 0,!eb||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),o?c!==void 0?e.addEventListener(t,r,{capture:!0,passive:c}):e.addEventListener(t,r,!0):c!==void 0?e.addEventListener(t,r,{passive:c}):e.addEventListener(t,r,!1)}function jx(e,t,r,o,c){var f=o;if(!(t&1)&&!(t&2)&&o!==null)e:for(;;){if(o===null)return;var y=o.tag;if(y===3||y===4){var l=o.stateNode.containerInfo;if(l===c||l.nodeType===8&&l.parentNode===c)break;if(y===4)for(y=o.return;y!==null;){var w=y.tag;if((w===3||w===4)&&(w=y.stateNode.containerInfo,w===c||w.nodeType===8&&w.parentNode===c))return;y=y.return}for(;l!==null;){if(y=lu(l),y===null)return;if(w=y.tag,w===5||w===6){o=f=y;continue e}l=l.parentNode}}o=o.return}SA(function(){var E=f,P=Vw(r),M=[];e:{var z=JA.get(e);if(z!==void 0){var F=Xw,k=e;switch(e){case"keypress":if(Lv(r)===0)break e;case"keydown":case"keyup":F=GF;break;case"focusin":k="focus",F=Lx;break;case"focusout":k="blur",F=Lx;break;case"beforeblur":case"afterblur":F=Lx;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":F=_T;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":F=zF;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":F=ZF;break;case ZA:case XA:case KA:F=kF;break;case YA:F=KF;break;case"scroll":F=RF;break;case"wheel":F=JF;break;case"copy":case"cut":case"paste":F=FF;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":F=bT}var U=(t&4)!==0,X=!U&&e==="scroll",$=U?z!==null?z+"Capture":null:z;U=[];for(var j=E,V;j!==null;){V=j;var Z=V.stateNode;if(V.tag===5&&Z!==null&&(V=Z,$!==null&&(Z=Vp(j,$),Z!=null&&U.push(Kp(j,Z,V)))),X)break;j=j.return}0<U.length&&(z=new F(z,k,null,r,P),M.push({event:z,listeners:U}))}}if(!(t&7)){e:{if(z=e==="mouseover"||e==="pointerover",F=e==="mouseout"||e==="pointerout",z&&r!==J1&&(k=r.relatedTarget||r.fromElement)&&(lu(k)||k[ml]))break e;if((F||z)&&(z=P.window===P?P:(z=P.ownerDocument)?z.defaultView||z.parentWindow:window,F?(k=r.relatedTarget||r.toElement,F=E,k=k?lu(k):null,k!==null&&(X=Pu(k),k!==X||k.tag!==5&&k.tag!==6)&&(k=null)):(F=null,k=E),F!==k)){if(U=_T,Z="onMouseLeave",$="onMouseEnter",j="mouse",(e==="pointerout"||e==="pointerover")&&(U=bT,Z="onPointerLeave",$="onPointerEnter",j="pointer"),X=F==null?z:Wd(F),V=k==null?z:Wd(k),z=new U(Z,j+"leave",F,r,P),z.target=X,z.relatedTarget=V,Z=null,lu(P)===E&&(U=new U($,j+"enter",k,r,P),U.target=V,U.relatedTarget=X,Z=U),X=Z,F&&k)t:{for(U=F,$=k,j=0,V=U;V;V=Md(V))j++;for(V=0,Z=$;Z;Z=Md(Z))V++;for(;0<j-V;)U=Md(U),j--;for(;0<V-j;)$=Md($),V--;for(;j--;){if(U===$||$!==null&&U===$.alternate)break t;U=Md(U),$=Md($)}U=null}else U=null;F!==null&&OT(M,z,F,U,!1),k!==null&&X!==null&&OT(M,X,k,U,!0)}}e:{if(z=E?Wd(E):window,F=z.nodeName&&z.nodeName.toLowerCase(),F==="select"||F==="input"&&z.type==="file")var ee=oB;else if(ET(z))if(VA)ee=cB;else{ee=sB;var ne=aB}else(F=z.nodeName)&&F.toLowerCase()==="input"&&(z.type==="checkbox"||z.type==="radio")&&(ee=lB);if(ee&&(ee=ee(e,E))){UA(M,ee,r,P);break e}ne&&ne(e,z,E),e==="focusout"&&(ne=z._wrapperState)&&ne.controlled&&z.type==="number"&&q1(z,"number",z.value)}switch(ne=E?Wd(E):window,e){case"focusin":(ET(ne)||ne.contentEditable==="true")&&(Hd=ne,ob=E,Mp=null);break;case"focusout":Mp=ob=Hd=null;break;case"mousedown":ab=!0;break;case"contextmenu":case"mouseup":case"dragend":ab=!1,PT(M,r,P);break;case"selectionchange":if(hB)break;case"keydown":case"keyup":PT(M,r,P)}var Q;if(Yw)e:{switch(e){case"compositionstart":var ie="onCompositionStart";break e;case"compositionend":ie="onCompositionEnd";break e;case"compositionupdate":ie="onCompositionUpdate";break e}ie=void 0}else Vd?NA(e,r)&&(ie="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(ie="onCompositionStart");ie&&(BA&&r.locale!=="ko"&&(Vd||ie!=="onCompositionStart"?ie==="onCompositionEnd"&&Vd&&(Q=FA()):(oc=P,Zw="value"in oc?oc.value:oc.textContent,Vd=!0)),ne=ly(E,ie),0<ne.length&&(ie=new xT(ie,e,null,r,P),M.push({event:ie,listeners:ne}),Q?ie.data=Q:(Q=jA(r),Q!==null&&(ie.data=Q)))),(Q=eB?tB(e,r):nB(e,r))&&(E=ly(E,"onBeforeInput"),0<E.length&&(P=new xT("onBeforeInput","beforeinput",null,r,P),M.push({event:P,listeners:E}),P.data=Q))}QA(M,t)})}function Kp(e,t,r){return{instance:e,listener:t,currentTarget:r}}function ly(e,t){for(var r=t+"Capture",o=[];e!==null;){var c=e,f=c.stateNode;c.tag===5&&f!==null&&(c=f,f=Vp(e,r),f!=null&&o.unshift(Kp(e,f,c)),f=Vp(e,t),f!=null&&o.push(Kp(e,f,c))),e=e.return}return o}function Md(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function OT(e,t,r,o,c){for(var f=t._reactName,y=[];r!==null&&r!==o;){var l=r,w=l.alternate,E=l.stateNode;if(w!==null&&w===o)break;l.tag===5&&E!==null&&(l=E,c?(w=Vp(r,f),w!=null&&y.unshift(Kp(r,w,l))):c||(w=Vp(r,f),w!=null&&y.push(Kp(r,w,l)))),r=r.return}y.length!==0&&e.push({event:t,listeners:y})}var gB=/\r\n?/g,vB=/\u0000|\uFFFD/g;function zT(e){return(typeof e=="string"?e:""+e).replace(gB,`
`).replace(vB,"")}function cv(e,t,r){if(t=zT(t),zT(e)!==t&&r)throw Error(Gt(425))}function cy(){}var sb=null,lb=null;function cb(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ub=typeof setTimeout=="function"?setTimeout:void 0,yB=typeof clearTimeout=="function"?clearTimeout:void 0,LT=typeof Promise=="function"?Promise:void 0,_B=typeof queueMicrotask=="function"?queueMicrotask:typeof LT<"u"?function(e){return LT.resolve(null).then(e).catch(xB)}:ub;function xB(e){setTimeout(function(){throw e})}function Ux(e,t){var r=t,o=0;do{var c=r.nextSibling;if(e.removeChild(r),c&&c.nodeType===8)if(r=c.data,r==="/$"){if(o===0){e.removeChild(c),Wp(t);return}o--}else r!=="$"&&r!=="$?"&&r!=="$!"||o++;r=c}while(r);Wp(t)}function hc(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function DT(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Mh=Math.random().toString(36).slice(2),Ds="__reactFiber$"+Mh,Yp="__reactProps$"+Mh,ml="__reactContainer$"+Mh,db="__reactEvents$"+Mh,bB="__reactListeners$"+Mh,wB="__reactHandles$"+Mh;function lu(e){var t=e[Ds];if(t)return t;for(var r=e.parentNode;r;){if(t=r[ml]||r[Ds]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=DT(e);e!==null;){if(r=e[Ds])return r;e=DT(e)}return t}e=r,r=e.parentNode}return null}function ym(e){return e=e[Ds]||e[ml],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Wd(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Gt(33))}function s0(e){return e[Yp]||null}var hb=[],qd=-1;function wc(e){return{current:e}}function ni(e){0>qd||(e.current=hb[qd],hb[qd]=null,qd--)}function Jr(e,t){qd++,hb[qd]=e.current,e.current=t}var yc={},_o=wc(yc),Ho=wc(!1),xu=yc;function fh(e,t){var r=e.type.contextTypes;if(!r)return yc;var o=e.stateNode;if(o&&o.__reactInternalMemoizedUnmaskedChildContext===t)return o.__reactInternalMemoizedMaskedChildContext;var c={},f;for(f in r)c[f]=t[f];return o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=c),c}function Go(e){return e=e.childContextTypes,e!=null}function uy(){ni(Ho),ni(_o)}function kT(e,t,r){if(_o.current!==yc)throw Error(Gt(168));Jr(_o,t),Jr(Ho,r)}function tR(e,t,r){var o=e.stateNode;if(t=t.childContextTypes,typeof o.getChildContext!="function")return r;o=o.getChildContext();for(var c in o)if(!(c in t))throw Error(Gt(108,aF(e)||"Unknown",c));return mi({},r,o)}function dy(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||yc,xu=_o.current,Jr(_o,e),Jr(Ho,Ho.current),!0}function $T(e,t,r){var o=e.stateNode;if(!o)throw Error(Gt(169));r?(e=tR(e,t,xu),o.__reactInternalMemoizedMergedChildContext=e,ni(Ho),ni(_o),Jr(_o,e)):ni(Ho),Jr(Ho,r)}var sl=null,l0=!1,Vx=!1;function nR(e){sl===null?sl=[e]:sl.push(e)}function SB(e){l0=!0,nR(e)}function Sc(){if(!Vx&&sl!==null){Vx=!0;var e=0,t=$r;try{var r=sl;for($r=1;e<r.length;e++){var o=r[e];do o=o(!0);while(o!==null)}sl=null,l0=!1}catch(c){throw sl!==null&&(sl=sl.slice(e+1)),IA(Hw,Sc),c}finally{$r=t,Vx=!1}}return null}var Zd=[],Xd=0,hy=null,fy=0,Aa=[],Ra=0,bu=null,cl=1,ul="";function nu(e,t){Zd[Xd++]=fy,Zd[Xd++]=hy,hy=e,fy=t}function rR(e,t,r){Aa[Ra++]=cl,Aa[Ra++]=ul,Aa[Ra++]=bu,bu=e;var o=cl;e=ul;var c=32-ps(o)-1;o&=~(1<<c),r+=1;var f=32-ps(t)+c;if(30<f){var y=c-c%5;f=(o&(1<<y)-1).toString(32),o>>=y,c-=y,cl=1<<32-ps(t)+c|r<<c|o,ul=f+e}else cl=1<<f|r<<c|o,ul=e}function Qw(e){e.return!==null&&(nu(e,1),rR(e,1,0))}function eS(e){for(;e===hy;)hy=Zd[--Xd],Zd[Xd]=null,fy=Zd[--Xd],Zd[Xd]=null;for(;e===bu;)bu=Aa[--Ra],Aa[Ra]=null,ul=Aa[--Ra],Aa[Ra]=null,cl=Aa[--Ra],Aa[Ra]=null}var ca=null,sa=null,oi=!1,ds=null;function iR(e,t){var r=Oa(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function FT(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ca=e,sa=hc(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ca=e,sa=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=bu!==null?{id:cl,overflow:ul}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Oa(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,ca=e,sa=null,!0):!1;default:return!1}}function fb(e){return(e.mode&1)!==0&&(e.flags&128)===0}function pb(e){if(oi){var t=sa;if(t){var r=t;if(!FT(e,t)){if(fb(e))throw Error(Gt(418));t=hc(r.nextSibling);var o=ca;t&&FT(e,t)?iR(o,r):(e.flags=e.flags&-4097|2,oi=!1,ca=e)}}else{if(fb(e))throw Error(Gt(418));e.flags=e.flags&-4097|2,oi=!1,ca=e}}}function BT(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ca=e}function uv(e){if(e!==ca)return!1;if(!oi)return BT(e),oi=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!cb(e.type,e.memoizedProps)),t&&(t=sa)){if(fb(e))throw oR(),Error(Gt(418));for(;t;)iR(e,t),t=hc(t.nextSibling)}if(BT(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Gt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){sa=hc(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}sa=null}}else sa=ca?hc(e.stateNode.nextSibling):null;return!0}function oR(){for(var e=sa;e;)e=hc(e.nextSibling)}function ph(){sa=ca=null,oi=!1}function tS(e){ds===null?ds=[e]:ds.push(e)}var EB=xl.ReactCurrentBatchConfig;function as(e,t){if(e&&e.defaultProps){t=mi({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}var py=wc(null),my=null,Kd=null,nS=null;function rS(){nS=Kd=my=null}function iS(e){var t=py.current;ni(py),e._currentValue=t}function mb(e,t,r){for(;e!==null;){var o=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,o!==null&&(o.childLanes|=t)):o!==null&&(o.childLanes&t)!==t&&(o.childLanes|=t),e===r)break;e=e.return}}function sh(e,t){my=e,nS=Kd=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Uo=!0),e.firstContext=null)}function Da(e){var t=e._currentValue;if(nS!==e)if(e={context:e,memoizedValue:t,next:null},Kd===null){if(my===null)throw Error(Gt(308));Kd=e,my.dependencies={lanes:0,firstContext:e}}else Kd=Kd.next=e;return t}var cu=null;function oS(e){cu===null?cu=[e]:cu.push(e)}function aR(e,t,r,o){var c=t.interleaved;return c===null?(r.next=r,oS(t)):(r.next=c.next,c.next=r),t.interleaved=r,gl(e,o)}function gl(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var nc=!1;function aS(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function sR(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function dl(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function fc(e,t,r){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,gr&2){var c=o.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),o.pending=t,gl(e,r)}return c=o.interleaved,c===null?(t.next=t,oS(o)):(t.next=c.next,c.next=t),o.interleaved=t,gl(e,r)}function Dv(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var o=t.lanes;o&=e.pendingLanes,r|=o,t.lanes=r,Gw(e,r)}}function NT(e,t){var r=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,r===o)){var c=null,f=null;if(r=r.firstBaseUpdate,r!==null){do{var y={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};f===null?c=f=y:f=f.next=y,r=r.next}while(r!==null);f===null?c=f=t:f=f.next=t}else c=f=t;r={baseState:o.baseState,firstBaseUpdate:c,lastBaseUpdate:f,shared:o.shared,effects:o.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function gy(e,t,r,o){var c=e.updateQueue;nc=!1;var f=c.firstBaseUpdate,y=c.lastBaseUpdate,l=c.shared.pending;if(l!==null){c.shared.pending=null;var w=l,E=w.next;w.next=null,y===null?f=E:y.next=E,y=w;var P=e.alternate;P!==null&&(P=P.updateQueue,l=P.lastBaseUpdate,l!==y&&(l===null?P.firstBaseUpdate=E:l.next=E,P.lastBaseUpdate=w))}if(f!==null){var M=c.baseState;y=0,P=E=w=null,l=f;do{var z=l.lane,F=l.eventTime;if((o&z)===z){P!==null&&(P=P.next={eventTime:F,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var k=e,U=l;switch(z=t,F=r,U.tag){case 1:if(k=U.payload,typeof k=="function"){M=k.call(F,M,z);break e}M=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=U.payload,z=typeof k=="function"?k.call(F,M,z):k,z==null)break e;M=mi({},M,z);break e;case 2:nc=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,z=c.effects,z===null?c.effects=[l]:z.push(l))}else F={eventTime:F,lane:z,tag:l.tag,payload:l.payload,callback:l.callback,next:null},P===null?(E=P=F,w=M):P=P.next=F,y|=z;if(l=l.next,l===null){if(l=c.shared.pending,l===null)break;z=l,l=z.next,z.next=null,c.lastBaseUpdate=z,c.shared.pending=null}}while(1);if(P===null&&(w=M),c.baseState=w,c.firstBaseUpdate=E,c.lastBaseUpdate=P,t=c.shared.interleaved,t!==null){c=t;do y|=c.lane,c=c.next;while(c!==t)}else f===null&&(c.shared.lanes=0);Su|=y,e.lanes=y,e.memoizedState=M}}function jT(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var o=e[t],c=o.callback;if(c!==null){if(o.callback=null,o=r,typeof c!="function")throw Error(Gt(191,c));c.call(o)}}}var lR=new aA.Component().refs;function gb(e,t,r,o){t=e.memoizedState,r=r(o,t),r=r==null?t:mi({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var c0={isMounted:function(e){return(e=e._reactInternals)?Pu(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var o=Co(),c=mc(e),f=dl(o,c);f.payload=t,r!=null&&(f.callback=r),t=fc(e,f,c),t!==null&&(ms(t,e,c,o),Dv(t,e,c))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var o=Co(),c=mc(e),f=dl(o,c);f.tag=1,f.payload=t,r!=null&&(f.callback=r),t=fc(e,f,c),t!==null&&(ms(t,e,c,o),Dv(t,e,c))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Co(),o=mc(e),c=dl(r,o);c.tag=2,t!=null&&(c.callback=t),t=fc(e,c,o),t!==null&&(ms(t,e,o,r),Dv(t,e,o))}};function UT(e,t,r,o,c,f,y){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,f,y):t.prototype&&t.prototype.isPureReactComponent?!Zp(r,o)||!Zp(c,f):!0}function cR(e,t,r){var o=!1,c=yc,f=t.contextType;return typeof f=="object"&&f!==null?f=Da(f):(c=Go(t)?xu:_o.current,o=t.contextTypes,f=(o=o!=null)?fh(e,c):yc),t=new t(r,f),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=c0,e.stateNode=t,t._reactInternals=e,o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=c,e.__reactInternalMemoizedMaskedChildContext=f),t}function VT(e,t,r,o){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,o),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,o),t.state!==e&&c0.enqueueReplaceState(t,t.state,null)}function vb(e,t,r,o){var c=e.stateNode;c.props=r,c.state=e.memoizedState,c.refs=lR,aS(e);var f=t.contextType;typeof f=="object"&&f!==null?c.context=Da(f):(f=Go(t)?xu:_o.current,c.context=fh(e,f)),c.state=e.memoizedState,f=t.getDerivedStateFromProps,typeof f=="function"&&(gb(e,t,f,r),c.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(t=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),t!==c.state&&c0.enqueueReplaceState(c,c.state,null),gy(e,r,c,o),c.state=e.memoizedState),typeof c.componentDidMount=="function"&&(e.flags|=4194308)}function lp(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Gt(309));var o=r.stateNode}if(!o)throw Error(Gt(147,e));var c=o,f=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===f?t.ref:(t=function(y){var l=c.refs;l===lR&&(l=c.refs={}),y===null?delete l[f]:l[f]=y},t._stringRef=f,t)}if(typeof e!="string")throw Error(Gt(284));if(!r._owner)throw Error(Gt(290,e))}return e}function dv(e,t){throw e=Object.prototype.toString.call(t),Error(Gt(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function HT(e){var t=e._init;return t(e._payload)}function uR(e){function t($,j){if(e){var V=$.deletions;V===null?($.deletions=[j],$.flags|=16):V.push(j)}}function r($,j){if(!e)return null;for(;j!==null;)t($,j),j=j.sibling;return null}function o($,j){for($=new Map;j!==null;)j.key!==null?$.set(j.key,j):$.set(j.index,j),j=j.sibling;return $}function c($,j){return $=gc($,j),$.index=0,$.sibling=null,$}function f($,j,V){return $.index=V,e?(V=$.alternate,V!==null?(V=V.index,V<j?($.flags|=2,j):V):($.flags|=2,j)):($.flags|=1048576,j)}function y($){return e&&$.alternate===null&&($.flags|=2),$}function l($,j,V,Z){return j===null||j.tag!==6?(j=Kx(V,$.mode,Z),j.return=$,j):(j=c(j,V),j.return=$,j)}function w($,j,V,Z){var ee=V.type;return ee===Ud?P($,j,V.props.children,Z,V.key):j!==null&&(j.elementType===ee||typeof ee=="object"&&ee!==null&&ee.$$typeof===tc&&HT(ee)===j.type)?(Z=c(j,V.props),Z.ref=lp($,j,V),Z.return=$,Z):(Z=jv(V.type,V.key,V.props,null,$.mode,Z),Z.ref=lp($,j,V),Z.return=$,Z)}function E($,j,V,Z){return j===null||j.tag!==4||j.stateNode.containerInfo!==V.containerInfo||j.stateNode.implementation!==V.implementation?(j=Yx(V,$.mode,Z),j.return=$,j):(j=c(j,V.children||[]),j.return=$,j)}function P($,j,V,Z,ee){return j===null||j.tag!==7?(j=gu(V,$.mode,Z,ee),j.return=$,j):(j=c(j,V),j.return=$,j)}function M($,j,V){if(typeof j=="string"&&j!==""||typeof j=="number")return j=Kx(""+j,$.mode,V),j.return=$,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case ev:return V=jv(j.type,j.key,j.props,null,$.mode,V),V.ref=lp($,null,j),V.return=$,V;case jd:return j=Yx(j,$.mode,V),j.return=$,j;case tc:var Z=j._init;return M($,Z(j._payload),V)}if(xp(j)||rp(j))return j=gu(j,$.mode,V,null),j.return=$,j;dv($,j)}return null}function z($,j,V,Z){var ee=j!==null?j.key:null;if(typeof V=="string"&&V!==""||typeof V=="number")return ee!==null?null:l($,j,""+V,Z);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case ev:return V.key===ee?w($,j,V,Z):null;case jd:return V.key===ee?E($,j,V,Z):null;case tc:return ee=V._init,z($,j,ee(V._payload),Z)}if(xp(V)||rp(V))return ee!==null?null:P($,j,V,Z,null);dv($,V)}return null}function F($,j,V,Z,ee){if(typeof Z=="string"&&Z!==""||typeof Z=="number")return $=$.get(V)||null,l(j,$,""+Z,ee);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case ev:return $=$.get(Z.key===null?V:Z.key)||null,w(j,$,Z,ee);case jd:return $=$.get(Z.key===null?V:Z.key)||null,E(j,$,Z,ee);case tc:var ne=Z._init;return F($,j,V,ne(Z._payload),ee)}if(xp(Z)||rp(Z))return $=$.get(V)||null,P(j,$,Z,ee,null);dv(j,Z)}return null}function k($,j,V,Z){for(var ee=null,ne=null,Q=j,ie=j=0,te=null;Q!==null&&ie<V.length;ie++){Q.index>ie?(te=Q,Q=null):te=Q.sibling;var ge=z($,Q,V[ie],Z);if(ge===null){Q===null&&(Q=te);break}e&&Q&&ge.alternate===null&&t($,Q),j=f(ge,j,ie),ne===null?ee=ge:ne.sibling=ge,ne=ge,Q=te}if(ie===V.length)return r($,Q),oi&&nu($,ie),ee;if(Q===null){for(;ie<V.length;ie++)Q=M($,V[ie],Z),Q!==null&&(j=f(Q,j,ie),ne===null?ee=Q:ne.sibling=Q,ne=Q);return oi&&nu($,ie),ee}for(Q=o($,Q);ie<V.length;ie++)te=F(Q,$,ie,V[ie],Z),te!==null&&(e&&te.alternate!==null&&Q.delete(te.key===null?ie:te.key),j=f(te,j,ie),ne===null?ee=te:ne.sibling=te,ne=te);return e&&Q.forEach(function(ue){return t($,ue)}),oi&&nu($,ie),ee}function U($,j,V,Z){var ee=rp(V);if(typeof ee!="function")throw Error(Gt(150));if(V=ee.call(V),V==null)throw Error(Gt(151));for(var ne=ee=null,Q=j,ie=j=0,te=null,ge=V.next();Q!==null&&!ge.done;ie++,ge=V.next()){Q.index>ie?(te=Q,Q=null):te=Q.sibling;var ue=z($,Q,ge.value,Z);if(ue===null){Q===null&&(Q=te);break}e&&Q&&ue.alternate===null&&t($,Q),j=f(ue,j,ie),ne===null?ee=ue:ne.sibling=ue,ne=ue,Q=te}if(ge.done)return r($,Q),oi&&nu($,ie),ee;if(Q===null){for(;!ge.done;ie++,ge=V.next())ge=M($,ge.value,Z),ge!==null&&(j=f(ge,j,ie),ne===null?ee=ge:ne.sibling=ge,ne=ge);return oi&&nu($,ie),ee}for(Q=o($,Q);!ge.done;ie++,ge=V.next())ge=F(Q,$,ie,ge.value,Z),ge!==null&&(e&&ge.alternate!==null&&Q.delete(ge.key===null?ie:ge.key),j=f(ge,j,ie),ne===null?ee=ge:ne.sibling=ge,ne=ge);return e&&Q.forEach(function(oe){return t($,oe)}),oi&&nu($,ie),ee}function X($,j,V,Z){if(typeof V=="object"&&V!==null&&V.type===Ud&&V.key===null&&(V=V.props.children),typeof V=="object"&&V!==null){switch(V.$$typeof){case ev:e:{for(var ee=V.key,ne=j;ne!==null;){if(ne.key===ee){if(ee=V.type,ee===Ud){if(ne.tag===7){r($,ne.sibling),j=c(ne,V.props.children),j.return=$,$=j;break e}}else if(ne.elementType===ee||typeof ee=="object"&&ee!==null&&ee.$$typeof===tc&&HT(ee)===ne.type){r($,ne.sibling),j=c(ne,V.props),j.ref=lp($,ne,V),j.return=$,$=j;break e}r($,ne);break}else t($,ne);ne=ne.sibling}V.type===Ud?(j=gu(V.props.children,$.mode,Z,V.key),j.return=$,$=j):(Z=jv(V.type,V.key,V.props,null,$.mode,Z),Z.ref=lp($,j,V),Z.return=$,$=Z)}return y($);case jd:e:{for(ne=V.key;j!==null;){if(j.key===ne)if(j.tag===4&&j.stateNode.containerInfo===V.containerInfo&&j.stateNode.implementation===V.implementation){r($,j.sibling),j=c(j,V.children||[]),j.return=$,$=j;break e}else{r($,j);break}else t($,j);j=j.sibling}j=Yx(V,$.mode,Z),j.return=$,$=j}return y($);case tc:return ne=V._init,X($,j,ne(V._payload),Z)}if(xp(V))return k($,j,V,Z);if(rp(V))return U($,j,V,Z);dv($,V)}return typeof V=="string"&&V!==""||typeof V=="number"?(V=""+V,j!==null&&j.tag===6?(r($,j.sibling),j=c(j,V),j.return=$,$=j):(r($,j),j=Kx(V,$.mode,Z),j.return=$,$=j),y($)):r($,j)}return X}var mh=uR(!0),dR=uR(!1),_m={},Fs=wc(_m),Jp=wc(_m),Qp=wc(_m);function uu(e){if(e===_m)throw Error(Gt(174));return e}function sS(e,t){switch(Jr(Qp,t),Jr(Jp,e),Jr(Fs,_m),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:X1(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=X1(t,e)}ni(Fs),Jr(Fs,t)}function gh(){ni(Fs),ni(Jp),ni(Qp)}function hR(e){uu(Qp.current);var t=uu(Fs.current),r=X1(t,e.type);t!==r&&(Jr(Jp,e),Jr(Fs,r))}function lS(e){Jp.current===e&&(ni(Fs),ni(Jp))}var fi=wc(0);function vy(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Hx=[];function cS(){for(var e=0;e<Hx.length;e++)Hx[e]._workInProgressVersionPrimary=null;Hx.length=0}var kv=xl.ReactCurrentDispatcher,Gx=xl.ReactCurrentBatchConfig,wu=0,pi=null,$i=null,qi=null,yy=!1,Pp=!1,em=0,CB=0;function po(){throw Error(Gt(321))}function uS(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!vs(e[r],t[r]))return!1;return!0}function dS(e,t,r,o,c,f){if(wu=f,pi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,kv.current=e===null||e.memoizedState===null?PB:AB,e=r(o,c),Pp){f=0;do{if(Pp=!1,em=0,25<=f)throw Error(Gt(301));f+=1,qi=$i=null,t.updateQueue=null,kv.current=RB,e=r(o,c)}while(Pp)}if(kv.current=_y,t=$i!==null&&$i.next!==null,wu=0,qi=$i=pi=null,yy=!1,t)throw Error(Gt(300));return e}function hS(){var e=em!==0;return em=0,e}function Ls(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qi===null?pi.memoizedState=qi=e:qi=qi.next=e,qi}function ka(){if($i===null){var e=pi.alternate;e=e!==null?e.memoizedState:null}else e=$i.next;var t=qi===null?pi.memoizedState:qi.next;if(t!==null)qi=t,$i=e;else{if(e===null)throw Error(Gt(310));$i=e,e={memoizedState:$i.memoizedState,baseState:$i.baseState,baseQueue:$i.baseQueue,queue:$i.queue,next:null},qi===null?pi.memoizedState=qi=e:qi=qi.next=e}return qi}function tm(e,t){return typeof t=="function"?t(e):t}function Wx(e){var t=ka(),r=t.queue;if(r===null)throw Error(Gt(311));r.lastRenderedReducer=e;var o=$i,c=o.baseQueue,f=r.pending;if(f!==null){if(c!==null){var y=c.next;c.next=f.next,f.next=y}o.baseQueue=c=f,r.pending=null}if(c!==null){f=c.next,o=o.baseState;var l=y=null,w=null,E=f;do{var P=E.lane;if((wu&P)===P)w!==null&&(w=w.next={lane:0,action:E.action,hasEagerState:E.hasEagerState,eagerState:E.eagerState,next:null}),o=E.hasEagerState?E.eagerState:e(o,E.action);else{var M={lane:P,action:E.action,hasEagerState:E.hasEagerState,eagerState:E.eagerState,next:null};w===null?(l=w=M,y=o):w=w.next=M,pi.lanes|=P,Su|=P}E=E.next}while(E!==null&&E!==f);w===null?y=o:w.next=l,vs(o,t.memoizedState)||(Uo=!0),t.memoizedState=o,t.baseState=y,t.baseQueue=w,r.lastRenderedState=o}if(e=r.interleaved,e!==null){c=e;do f=c.lane,pi.lanes|=f,Su|=f,c=c.next;while(c!==e)}else c===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function qx(e){var t=ka(),r=t.queue;if(r===null)throw Error(Gt(311));r.lastRenderedReducer=e;var o=r.dispatch,c=r.pending,f=t.memoizedState;if(c!==null){r.pending=null;var y=c=c.next;do f=e(f,y.action),y=y.next;while(y!==c);vs(f,t.memoizedState)||(Uo=!0),t.memoizedState=f,t.baseQueue===null&&(t.baseState=f),r.lastRenderedState=f}return[f,o]}function fR(){}function pR(e,t){var r=pi,o=ka(),c=t(),f=!vs(o.memoizedState,c);if(f&&(o.memoizedState=c,Uo=!0),o=o.queue,fS(vR.bind(null,r,o,e),[e]),o.getSnapshot!==t||f||qi!==null&&qi.memoizedState.tag&1){if(r.flags|=2048,nm(9,gR.bind(null,r,o,c,t),void 0,null),Zi===null)throw Error(Gt(349));wu&30||mR(r,t,c)}return c}function mR(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=pi.updateQueue,t===null?(t={lastEffect:null,stores:null},pi.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function gR(e,t,r,o){t.value=r,t.getSnapshot=o,yR(t)&&_R(e)}function vR(e,t,r){return r(function(){yR(t)&&_R(e)})}function yR(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!vs(e,r)}catch{return!0}}function _R(e){var t=gl(e,1);t!==null&&ms(t,e,1,-1)}function GT(e){var t=Ls();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:tm,lastRenderedState:e},t.queue=e,e=e.dispatch=MB.bind(null,pi,e),[t.memoizedState,e]}function nm(e,t,r,o){return e={tag:e,create:t,destroy:r,deps:o,next:null},t=pi.updateQueue,t===null?(t={lastEffect:null,stores:null},pi.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(o=r.next,r.next=e,e.next=o,t.lastEffect=e)),e}function xR(){return ka().memoizedState}function $v(e,t,r,o){var c=Ls();pi.flags|=e,c.memoizedState=nm(1|t,r,void 0,o===void 0?null:o)}function u0(e,t,r,o){var c=ka();o=o===void 0?null:o;var f=void 0;if($i!==null){var y=$i.memoizedState;if(f=y.destroy,o!==null&&uS(o,y.deps)){c.memoizedState=nm(t,r,f,o);return}}pi.flags|=e,c.memoizedState=nm(1|t,r,f,o)}function WT(e,t){return $v(8390656,8,e,t)}function fS(e,t){return u0(2048,8,e,t)}function bR(e,t){return u0(4,2,e,t)}function wR(e,t){return u0(4,4,e,t)}function SR(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function ER(e,t,r){return r=r!=null?r.concat([e]):null,u0(4,4,SR.bind(null,t,e),r)}function pS(){}function CR(e,t){var r=ka();t=t===void 0?null:t;var o=r.memoizedState;return o!==null&&t!==null&&uS(t,o[1])?o[0]:(r.memoizedState=[e,t],e)}function TR(e,t){var r=ka();t=t===void 0?null:t;var o=r.memoizedState;return o!==null&&t!==null&&uS(t,o[1])?o[0]:(e=e(),r.memoizedState=[e,t],e)}function IR(e,t,r){return wu&21?(vs(r,t)||(r=AA(),pi.lanes|=r,Su|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Uo=!0),e.memoizedState=r)}function TB(e,t){var r=$r;$r=r!==0&&4>r?r:4,e(!0);var o=Gx.transition;Gx.transition={};try{e(!1),t()}finally{$r=r,Gx.transition=o}}function MR(){return ka().memoizedState}function IB(e,t,r){var o=mc(e);if(r={lane:o,action:r,hasEagerState:!1,eagerState:null,next:null},PR(e))AR(t,r);else if(r=aR(e,t,r,o),r!==null){var c=Co();ms(r,e,o,c),RR(r,t,o)}}function MB(e,t,r){var o=mc(e),c={lane:o,action:r,hasEagerState:!1,eagerState:null,next:null};if(PR(e))AR(t,c);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=t.lastRenderedReducer,f!==null))try{var y=t.lastRenderedState,l=f(y,r);if(c.hasEagerState=!0,c.eagerState=l,vs(l,y)){var w=t.interleaved;w===null?(c.next=c,oS(t)):(c.next=w.next,w.next=c),t.interleaved=c;return}}catch{}finally{}r=aR(e,t,c,o),r!==null&&(c=Co(),ms(r,e,o,c),RR(r,t,o))}}function PR(e){var t=e.alternate;return e===pi||t!==null&&t===pi}function AR(e,t){Pp=yy=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function RR(e,t,r){if(r&4194240){var o=t.lanes;o&=e.pendingLanes,r|=o,t.lanes=r,Gw(e,r)}}var _y={readContext:Da,useCallback:po,useContext:po,useEffect:po,useImperativeHandle:po,useInsertionEffect:po,useLayoutEffect:po,useMemo:po,useReducer:po,useRef:po,useState:po,useDebugValue:po,useDeferredValue:po,useTransition:po,useMutableSource:po,useSyncExternalStore:po,useId:po,unstable_isNewReconciler:!1},PB={readContext:Da,useCallback:function(e,t){return Ls().memoizedState=[e,t===void 0?null:t],e},useContext:Da,useEffect:WT,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,$v(4194308,4,SR.bind(null,t,e),r)},useLayoutEffect:function(e,t){return $v(4194308,4,e,t)},useInsertionEffect:function(e,t){return $v(4,2,e,t)},useMemo:function(e,t){var r=Ls();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var o=Ls();return t=r!==void 0?r(t):t,o.memoizedState=o.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},o.queue=e,e=e.dispatch=IB.bind(null,pi,e),[o.memoizedState,e]},useRef:function(e){var t=Ls();return e={current:e},t.memoizedState=e},useState:GT,useDebugValue:pS,useDeferredValue:function(e){return Ls().memoizedState=e},useTransition:function(){var e=GT(!1),t=e[0];return e=TB.bind(null,e[1]),Ls().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var o=pi,c=Ls();if(oi){if(r===void 0)throw Error(Gt(407));r=r()}else{if(r=t(),Zi===null)throw Error(Gt(349));wu&30||mR(o,t,r)}c.memoizedState=r;var f={value:r,getSnapshot:t};return c.queue=f,WT(vR.bind(null,o,f,e),[e]),o.flags|=2048,nm(9,gR.bind(null,o,f,r,t),void 0,null),r},useId:function(){var e=Ls(),t=Zi.identifierPrefix;if(oi){var r=ul,o=cl;r=(o&~(1<<32-ps(o)-1)).toString(32)+r,t=":"+t+"R"+r,r=em++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=CB++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},AB={readContext:Da,useCallback:CR,useContext:Da,useEffect:fS,useImperativeHandle:ER,useInsertionEffect:bR,useLayoutEffect:wR,useMemo:TR,useReducer:Wx,useRef:xR,useState:function(){return Wx(tm)},useDebugValue:pS,useDeferredValue:function(e){var t=ka();return IR(t,$i.memoizedState,e)},useTransition:function(){var e=Wx(tm)[0],t=ka().memoizedState;return[e,t]},useMutableSource:fR,useSyncExternalStore:pR,useId:MR,unstable_isNewReconciler:!1},RB={readContext:Da,useCallback:CR,useContext:Da,useEffect:fS,useImperativeHandle:ER,useInsertionEffect:bR,useLayoutEffect:wR,useMemo:TR,useReducer:qx,useRef:xR,useState:function(){return qx(tm)},useDebugValue:pS,useDeferredValue:function(e){var t=ka();return $i===null?t.memoizedState=e:IR(t,$i.memoizedState,e)},useTransition:function(){var e=qx(tm)[0],t=ka().memoizedState;return[e,t]},useMutableSource:fR,useSyncExternalStore:pR,useId:MR,unstable_isNewReconciler:!1};function vh(e,t){try{var r="",o=t;do r+=oF(o),o=o.return;while(o);var c=r}catch(f){c=`
Error generating stack: `+f.message+`
`+f.stack}return{value:e,source:t,stack:c,digest:null}}function Zx(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function yb(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var OB=typeof WeakMap=="function"?WeakMap:Map;function OR(e,t,r){r=dl(-1,r),r.tag=3,r.payload={element:null};var o=t.value;return r.callback=function(){by||(by=!0,Mb=o),yb(e,t)},r}function zR(e,t,r){r=dl(-1,r),r.tag=3;var o=e.type.getDerivedStateFromError;if(typeof o=="function"){var c=t.value;r.payload=function(){return o(c)},r.callback=function(){yb(e,t)}}var f=e.stateNode;return f!==null&&typeof f.componentDidCatch=="function"&&(r.callback=function(){yb(e,t),typeof o!="function"&&(pc===null?pc=new Set([this]):pc.add(this));var y=t.stack;this.componentDidCatch(t.value,{componentStack:y!==null?y:""})}),r}function qT(e,t,r){var o=e.pingCache;if(o===null){o=e.pingCache=new OB;var c=new Set;o.set(t,c)}else c=o.get(t),c===void 0&&(c=new Set,o.set(t,c));c.has(r)||(c.add(r),e=WB.bind(null,e,t,r),t.then(e,e))}function ZT(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function XT(e,t,r,o,c){return e.mode&1?(e.flags|=65536,e.lanes=c,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=dl(-1,1),t.tag=2,fc(r,t,1))),r.lanes|=1),e)}var zB=xl.ReactCurrentOwner,Uo=!1;function So(e,t,r,o){t.child=e===null?dR(t,null,r,o):mh(t,e.child,r,o)}function KT(e,t,r,o,c){r=r.render;var f=t.ref;return sh(t,c),o=dS(e,t,r,o,f,c),r=hS(),e!==null&&!Uo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,vl(e,t,c)):(oi&&r&&Qw(t),t.flags|=1,So(e,t,o,c),t.child)}function YT(e,t,r,o,c){if(e===null){var f=r.type;return typeof f=="function"&&!wS(f)&&f.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=f,LR(e,t,f,o,c)):(e=jv(r.type,null,o,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(f=e.child,!(e.lanes&c)){var y=f.memoizedProps;if(r=r.compare,r=r!==null?r:Zp,r(y,o)&&e.ref===t.ref)return vl(e,t,c)}return t.flags|=1,e=gc(f,o),e.ref=t.ref,e.return=t,t.child=e}function LR(e,t,r,o,c){if(e!==null){var f=e.memoizedProps;if(Zp(f,o)&&e.ref===t.ref)if(Uo=!1,t.pendingProps=o=f,(e.lanes&c)!==0)e.flags&131072&&(Uo=!0);else return t.lanes=e.lanes,vl(e,t,c)}return _b(e,t,r,o,c)}function DR(e,t,r){var o=t.pendingProps,c=o.children,f=e!==null?e.memoizedState:null;if(o.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Jr(Jd,aa),aa|=r;else{if(!(r&1073741824))return e=f!==null?f.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Jr(Jd,aa),aa|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},o=f!==null?f.baseLanes:r,Jr(Jd,aa),aa|=o}else f!==null?(o=f.baseLanes|r,t.memoizedState=null):o=r,Jr(Jd,aa),aa|=o;return So(e,t,c,r),t.child}function kR(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function _b(e,t,r,o,c){var f=Go(r)?xu:_o.current;return f=fh(t,f),sh(t,c),r=dS(e,t,r,o,f,c),o=hS(),e!==null&&!Uo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,vl(e,t,c)):(oi&&o&&Qw(t),t.flags|=1,So(e,t,r,c),t.child)}function JT(e,t,r,o,c){if(Go(r)){var f=!0;dy(t)}else f=!1;if(sh(t,c),t.stateNode===null)Fv(e,t),cR(t,r,o),vb(t,r,o,c),o=!0;else if(e===null){var y=t.stateNode,l=t.memoizedProps;y.props=l;var w=y.context,E=r.contextType;typeof E=="object"&&E!==null?E=Da(E):(E=Go(r)?xu:_o.current,E=fh(t,E));var P=r.getDerivedStateFromProps,M=typeof P=="function"||typeof y.getSnapshotBeforeUpdate=="function";M||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(l!==o||w!==E)&&VT(t,y,o,E),nc=!1;var z=t.memoizedState;y.state=z,gy(t,o,y,c),w=t.memoizedState,l!==o||z!==w||Ho.current||nc?(typeof P=="function"&&(gb(t,r,P,o),w=t.memoizedState),(l=nc||UT(t,r,l,o,z,w,E))?(M||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(t.flags|=4194308)):(typeof y.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=o,t.memoizedState=w),y.props=o,y.state=w,y.context=E,o=l):(typeof y.componentDidMount=="function"&&(t.flags|=4194308),o=!1)}else{y=t.stateNode,sR(e,t),l=t.memoizedProps,E=t.type===t.elementType?l:as(t.type,l),y.props=E,M=t.pendingProps,z=y.context,w=r.contextType,typeof w=="object"&&w!==null?w=Da(w):(w=Go(r)?xu:_o.current,w=fh(t,w));var F=r.getDerivedStateFromProps;(P=typeof F=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(l!==M||z!==w)&&VT(t,y,o,w),nc=!1,z=t.memoizedState,y.state=z,gy(t,o,y,c);var k=t.memoizedState;l!==M||z!==k||Ho.current||nc?(typeof F=="function"&&(gb(t,r,F,o),k=t.memoizedState),(E=nc||UT(t,r,E,o,z,k,w)||!1)?(P||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(o,k,w),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(o,k,w)),typeof y.componentDidUpdate=="function"&&(t.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof y.componentDidUpdate!="function"||l===e.memoizedProps&&z===e.memoizedState||(t.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&z===e.memoizedState||(t.flags|=1024),t.memoizedProps=o,t.memoizedState=k),y.props=o,y.state=k,y.context=w,o=E):(typeof y.componentDidUpdate!="function"||l===e.memoizedProps&&z===e.memoizedState||(t.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&z===e.memoizedState||(t.flags|=1024),o=!1)}return xb(e,t,r,o,f,c)}function xb(e,t,r,o,c,f){kR(e,t);var y=(t.flags&128)!==0;if(!o&&!y)return c&&$T(t,r,!1),vl(e,t,f);o=t.stateNode,zB.current=t;var l=y&&typeof r.getDerivedStateFromError!="function"?null:o.render();return t.flags|=1,e!==null&&y?(t.child=mh(t,e.child,null,f),t.child=mh(t,null,l,f)):So(e,t,l,f),t.memoizedState=o.state,c&&$T(t,r,!0),t.child}function $R(e){var t=e.stateNode;t.pendingContext?kT(e,t.pendingContext,t.pendingContext!==t.context):t.context&&kT(e,t.context,!1),sS(e,t.containerInfo)}function QT(e,t,r,o,c){return ph(),tS(c),t.flags|=256,So(e,t,r,o),t.child}var bb={dehydrated:null,treeContext:null,retryLane:0};function wb(e){return{baseLanes:e,cachePool:null,transitions:null}}function FR(e,t,r){var o=t.pendingProps,c=fi.current,f=!1,y=(t.flags&128)!==0,l;if((l=y)||(l=e!==null&&e.memoizedState===null?!1:(c&2)!==0),l?(f=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(c|=1),Jr(fi,c&1),e===null)return pb(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(y=o.children,e=o.fallback,f?(o=t.mode,f=t.child,y={mode:"hidden",children:y},!(o&1)&&f!==null?(f.childLanes=0,f.pendingProps=y):f=f0(y,o,0,null),e=gu(e,o,r,null),f.return=t,e.return=t,f.sibling=e,t.child=f,t.child.memoizedState=wb(r),t.memoizedState=bb,e):mS(t,y));if(c=e.memoizedState,c!==null&&(l=c.dehydrated,l!==null))return LB(e,t,y,o,l,c,r);if(f){f=o.fallback,y=t.mode,c=e.child,l=c.sibling;var w={mode:"hidden",children:o.children};return!(y&1)&&t.child!==c?(o=t.child,o.childLanes=0,o.pendingProps=w,t.deletions=null):(o=gc(c,w),o.subtreeFlags=c.subtreeFlags&14680064),l!==null?f=gc(l,f):(f=gu(f,y,r,null),f.flags|=2),f.return=t,o.return=t,o.sibling=f,t.child=o,o=f,f=t.child,y=e.child.memoizedState,y=y===null?wb(r):{baseLanes:y.baseLanes|r,cachePool:null,transitions:y.transitions},f.memoizedState=y,f.childLanes=e.childLanes&~r,t.memoizedState=bb,o}return f=e.child,e=f.sibling,o=gc(f,{mode:"visible",children:o.children}),!(t.mode&1)&&(o.lanes=r),o.return=t,o.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=o,t.memoizedState=null,o}function mS(e,t){return t=f0({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function hv(e,t,r,o){return o!==null&&tS(o),mh(t,e.child,null,r),e=mS(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function LB(e,t,r,o,c,f,y){if(r)return t.flags&256?(t.flags&=-257,o=Zx(Error(Gt(422))),hv(e,t,y,o)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(f=o.fallback,c=t.mode,o=f0({mode:"visible",children:o.children},c,0,null),f=gu(f,c,y,null),f.flags|=2,o.return=t,f.return=t,o.sibling=f,t.child=o,t.mode&1&&mh(t,e.child,null,y),t.child.memoizedState=wb(y),t.memoizedState=bb,f);if(!(t.mode&1))return hv(e,t,y,null);if(c.data==="$!"){if(o=c.nextSibling&&c.nextSibling.dataset,o)var l=o.dgst;return o=l,f=Error(Gt(419)),o=Zx(f,o,void 0),hv(e,t,y,o)}if(l=(y&e.childLanes)!==0,Uo||l){if(o=Zi,o!==null){switch(y&-y){case 4:c=2;break;case 16:c=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:c=32;break;case 536870912:c=268435456;break;default:c=0}c=c&(o.suspendedLanes|y)?0:c,c!==0&&c!==f.retryLane&&(f.retryLane=c,gl(e,c),ms(o,e,c,-1))}return bS(),o=Zx(Error(Gt(421))),hv(e,t,y,o)}return c.data==="$?"?(t.flags|=128,t.child=e.child,t=qB.bind(null,e),c._reactRetry=t,null):(e=f.treeContext,sa=hc(c.nextSibling),ca=t,oi=!0,ds=null,e!==null&&(Aa[Ra++]=cl,Aa[Ra++]=ul,Aa[Ra++]=bu,cl=e.id,ul=e.overflow,bu=t),t=mS(t,o.children),t.flags|=4096,t)}function eI(e,t,r){e.lanes|=t;var o=e.alternate;o!==null&&(o.lanes|=t),mb(e.return,t,r)}function Xx(e,t,r,o,c){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:o,tail:r,tailMode:c}:(f.isBackwards=t,f.rendering=null,f.renderingStartTime=0,f.last=o,f.tail=r,f.tailMode=c)}function BR(e,t,r){var o=t.pendingProps,c=o.revealOrder,f=o.tail;if(So(e,t,o.children,r),o=fi.current,o&2)o=o&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&eI(e,r,t);else if(e.tag===19)eI(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}o&=1}if(Jr(fi,o),!(t.mode&1))t.memoizedState=null;else switch(c){case"forwards":for(r=t.child,c=null;r!==null;)e=r.alternate,e!==null&&vy(e)===null&&(c=r),r=r.sibling;r=c,r===null?(c=t.child,t.child=null):(c=r.sibling,r.sibling=null),Xx(t,!1,c,r,f);break;case"backwards":for(r=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&vy(e)===null){t.child=c;break}e=c.sibling,c.sibling=r,r=c,c=e}Xx(t,!0,r,null,f);break;case"together":Xx(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Fv(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function vl(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Su|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Gt(153));if(t.child!==null){for(e=t.child,r=gc(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=gc(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function DB(e,t,r){switch(t.tag){case 3:$R(t),ph();break;case 5:hR(t);break;case 1:Go(t.type)&&dy(t);break;case 4:sS(t,t.stateNode.containerInfo);break;case 10:var o=t.type._context,c=t.memoizedProps.value;Jr(py,o._currentValue),o._currentValue=c;break;case 13:if(o=t.memoizedState,o!==null)return o.dehydrated!==null?(Jr(fi,fi.current&1),t.flags|=128,null):r&t.child.childLanes?FR(e,t,r):(Jr(fi,fi.current&1),e=vl(e,t,r),e!==null?e.sibling:null);Jr(fi,fi.current&1);break;case 19:if(o=(r&t.childLanes)!==0,e.flags&128){if(o)return BR(e,t,r);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),Jr(fi,fi.current),o)break;return null;case 22:case 23:return t.lanes=0,DR(e,t,r)}return vl(e,t,r)}var NR,Sb,jR,UR;NR=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Sb=function(){};jR=function(e,t,r,o){var c=e.memoizedProps;if(c!==o){e=t.stateNode,uu(Fs.current);var f=null;switch(r){case"input":c=G1(e,c),o=G1(e,o),f=[];break;case"select":c=mi({},c,{value:void 0}),o=mi({},o,{value:void 0}),f=[];break;case"textarea":c=Z1(e,c),o=Z1(e,o),f=[];break;default:typeof c.onClick!="function"&&typeof o.onClick=="function"&&(e.onclick=cy)}K1(r,o);var y;r=null;for(E in c)if(!o.hasOwnProperty(E)&&c.hasOwnProperty(E)&&c[E]!=null)if(E==="style"){var l=c[E];for(y in l)l.hasOwnProperty(y)&&(r||(r={}),r[y]="")}else E!=="dangerouslySetInnerHTML"&&E!=="children"&&E!=="suppressContentEditableWarning"&&E!=="suppressHydrationWarning"&&E!=="autoFocus"&&(jp.hasOwnProperty(E)?f||(f=[]):(f=f||[]).push(E,null));for(E in o){var w=o[E];if(l=c!=null?c[E]:void 0,o.hasOwnProperty(E)&&w!==l&&(w!=null||l!=null))if(E==="style")if(l){for(y in l)!l.hasOwnProperty(y)||w&&w.hasOwnProperty(y)||(r||(r={}),r[y]="");for(y in w)w.hasOwnProperty(y)&&l[y]!==w[y]&&(r||(r={}),r[y]=w[y])}else r||(f||(f=[]),f.push(E,r)),r=w;else E==="dangerouslySetInnerHTML"?(w=w?w.__html:void 0,l=l?l.__html:void 0,w!=null&&l!==w&&(f=f||[]).push(E,w)):E==="children"?typeof w!="string"&&typeof w!="number"||(f=f||[]).push(E,""+w):E!=="suppressContentEditableWarning"&&E!=="suppressHydrationWarning"&&(jp.hasOwnProperty(E)?(w!=null&&E==="onScroll"&&ti("scroll",e),f||l===w||(f=[])):(f=f||[]).push(E,w))}r&&(f=f||[]).push("style",r);var E=f;(t.updateQueue=E)&&(t.flags|=4)}};UR=function(e,t,r,o){r!==o&&(t.flags|=4)};function cp(e,t){if(!oi)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function mo(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,o=0;if(t)for(var c=e.child;c!==null;)r|=c.lanes|c.childLanes,o|=c.subtreeFlags&14680064,o|=c.flags&14680064,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)r|=c.lanes|c.childLanes,o|=c.subtreeFlags,o|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=o,e.childLanes=r,t}function kB(e,t,r){var o=t.pendingProps;switch(eS(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mo(t),null;case 1:return Go(t.type)&&uy(),mo(t),null;case 3:return o=t.stateNode,gh(),ni(Ho),ni(_o),cS(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(e===null||e.child===null)&&(uv(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ds!==null&&(Rb(ds),ds=null))),Sb(e,t),mo(t),null;case 5:lS(t);var c=uu(Qp.current);if(r=t.type,e!==null&&t.stateNode!=null)jR(e,t,r,o,c),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!o){if(t.stateNode===null)throw Error(Gt(166));return mo(t),null}if(e=uu(Fs.current),uv(t)){o=t.stateNode,r=t.type;var f=t.memoizedProps;switch(o[Ds]=t,o[Yp]=f,e=(t.mode&1)!==0,r){case"dialog":ti("cancel",o),ti("close",o);break;case"iframe":case"object":case"embed":ti("load",o);break;case"video":case"audio":for(c=0;c<wp.length;c++)ti(wp[c],o);break;case"source":ti("error",o);break;case"img":case"image":case"link":ti("error",o),ti("load",o);break;case"details":ti("toggle",o);break;case"input":cT(o,f),ti("invalid",o);break;case"select":o._wrapperState={wasMultiple:!!f.multiple},ti("invalid",o);break;case"textarea":dT(o,f),ti("invalid",o)}K1(r,f),c=null;for(var y in f)if(f.hasOwnProperty(y)){var l=f[y];y==="children"?typeof l=="string"?o.textContent!==l&&(f.suppressHydrationWarning!==!0&&cv(o.textContent,l,e),c=["children",l]):typeof l=="number"&&o.textContent!==""+l&&(f.suppressHydrationWarning!==!0&&cv(o.textContent,l,e),c=["children",""+l]):jp.hasOwnProperty(y)&&l!=null&&y==="onScroll"&&ti("scroll",o)}switch(r){case"input":tv(o),uT(o,f,!0);break;case"textarea":tv(o),hT(o);break;case"select":case"option":break;default:typeof f.onClick=="function"&&(o.onclick=cy)}o=c,t.updateQueue=o,o!==null&&(t.flags|=4)}else{y=c.nodeType===9?c:c.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=mA(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=y.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof o.is=="string"?e=y.createElement(r,{is:o.is}):(e=y.createElement(r),r==="select"&&(y=e,o.multiple?y.multiple=!0:o.size&&(y.size=o.size))):e=y.createElementNS(e,r),e[Ds]=t,e[Yp]=o,NR(e,t,!1,!1),t.stateNode=e;e:{switch(y=Y1(r,o),r){case"dialog":ti("cancel",e),ti("close",e),c=o;break;case"iframe":case"object":case"embed":ti("load",e),c=o;break;case"video":case"audio":for(c=0;c<wp.length;c++)ti(wp[c],e);c=o;break;case"source":ti("error",e),c=o;break;case"img":case"image":case"link":ti("error",e),ti("load",e),c=o;break;case"details":ti("toggle",e),c=o;break;case"input":cT(e,o),c=G1(e,o),ti("invalid",e);break;case"option":c=o;break;case"select":e._wrapperState={wasMultiple:!!o.multiple},c=mi({},o,{value:void 0}),ti("invalid",e);break;case"textarea":dT(e,o),c=Z1(e,o),ti("invalid",e);break;default:c=o}K1(r,c),l=c;for(f in l)if(l.hasOwnProperty(f)){var w=l[f];f==="style"?yA(e,w):f==="dangerouslySetInnerHTML"?(w=w?w.__html:void 0,w!=null&&gA(e,w)):f==="children"?typeof w=="string"?(r!=="textarea"||w!=="")&&Up(e,w):typeof w=="number"&&Up(e,""+w):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(jp.hasOwnProperty(f)?w!=null&&f==="onScroll"&&ti("scroll",e):w!=null&&Bw(e,f,w,y))}switch(r){case"input":tv(e),uT(e,o,!1);break;case"textarea":tv(e),hT(e);break;case"option":o.value!=null&&e.setAttribute("value",""+vc(o.value));break;case"select":e.multiple=!!o.multiple,f=o.value,f!=null?rh(e,!!o.multiple,f,!1):o.defaultValue!=null&&rh(e,!!o.multiple,o.defaultValue,!0);break;default:typeof c.onClick=="function"&&(e.onclick=cy)}switch(r){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}}o&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return mo(t),null;case 6:if(e&&t.stateNode!=null)UR(e,t,e.memoizedProps,o);else{if(typeof o!="string"&&t.stateNode===null)throw Error(Gt(166));if(r=uu(Qp.current),uu(Fs.current),uv(t)){if(o=t.stateNode,r=t.memoizedProps,o[Ds]=t,(f=o.nodeValue!==r)&&(e=ca,e!==null))switch(e.tag){case 3:cv(o.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&cv(o.nodeValue,r,(e.mode&1)!==0)}f&&(t.flags|=4)}else o=(r.nodeType===9?r:r.ownerDocument).createTextNode(o),o[Ds]=t,t.stateNode=o}return mo(t),null;case 13:if(ni(fi),o=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(oi&&sa!==null&&t.mode&1&&!(t.flags&128))oR(),ph(),t.flags|=98560,f=!1;else if(f=uv(t),o!==null&&o.dehydrated!==null){if(e===null){if(!f)throw Error(Gt(318));if(f=t.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(Gt(317));f[Ds]=t}else ph(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;mo(t),f=!1}else ds!==null&&(Rb(ds),ds=null),f=!0;if(!f)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(o=o!==null,o!==(e!==null&&e.memoizedState!==null)&&o&&(t.child.flags|=8192,t.mode&1&&(e===null||fi.current&1?Fi===0&&(Fi=3):bS())),t.updateQueue!==null&&(t.flags|=4),mo(t),null);case 4:return gh(),Sb(e,t),e===null&&Xp(t.stateNode.containerInfo),mo(t),null;case 10:return iS(t.type._context),mo(t),null;case 17:return Go(t.type)&&uy(),mo(t),null;case 19:if(ni(fi),f=t.memoizedState,f===null)return mo(t),null;if(o=(t.flags&128)!==0,y=f.rendering,y===null)if(o)cp(f,!1);else{if(Fi!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(y=vy(e),y!==null){for(t.flags|=128,cp(f,!1),o=y.updateQueue,o!==null&&(t.updateQueue=o,t.flags|=4),t.subtreeFlags=0,o=r,r=t.child;r!==null;)f=r,e=o,f.flags&=14680066,y=f.alternate,y===null?(f.childLanes=0,f.lanes=e,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=y.childLanes,f.lanes=y.lanes,f.child=y.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=y.memoizedProps,f.memoizedState=y.memoizedState,f.updateQueue=y.updateQueue,f.type=y.type,e=y.dependencies,f.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Jr(fi,fi.current&1|2),t.child}e=e.sibling}f.tail!==null&&wi()>yh&&(t.flags|=128,o=!0,cp(f,!1),t.lanes=4194304)}else{if(!o)if(e=vy(y),e!==null){if(t.flags|=128,o=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),cp(f,!0),f.tail===null&&f.tailMode==="hidden"&&!y.alternate&&!oi)return mo(t),null}else 2*wi()-f.renderingStartTime>yh&&r!==1073741824&&(t.flags|=128,o=!0,cp(f,!1),t.lanes=4194304);f.isBackwards?(y.sibling=t.child,t.child=y):(r=f.last,r!==null?r.sibling=y:t.child=y,f.last=y)}return f.tail!==null?(t=f.tail,f.rendering=t,f.tail=t.sibling,f.renderingStartTime=wi(),t.sibling=null,r=fi.current,Jr(fi,o?r&1|2:r&1),t):(mo(t),null);case 22:case 23:return xS(),o=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==o&&(t.flags|=8192),o&&t.mode&1?aa&1073741824&&(mo(t),t.subtreeFlags&6&&(t.flags|=8192)):mo(t),null;case 24:return null;case 25:return null}throw Error(Gt(156,t.tag))}function $B(e,t){switch(eS(t),t.tag){case 1:return Go(t.type)&&uy(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return gh(),ni(Ho),ni(_o),cS(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return lS(t),null;case 13:if(ni(fi),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Gt(340));ph()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ni(fi),null;case 4:return gh(),null;case 10:return iS(t.type._context),null;case 22:case 23:return xS(),null;case 24:return null;default:return null}}var fv=!1,go=!1,FB=typeof WeakSet=="function"?WeakSet:Set,pn=null;function Yd(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(o){vi(e,t,o)}else r.current=null}function Eb(e,t,r){try{r()}catch(o){vi(e,t,o)}}var tI=!1;function BB(e,t){if(sb=ay,e=WA(),Jw(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var o=r.getSelection&&r.getSelection();if(o&&o.rangeCount!==0){r=o.anchorNode;var c=o.anchorOffset,f=o.focusNode;o=o.focusOffset;try{r.nodeType,f.nodeType}catch{r=null;break e}var y=0,l=-1,w=-1,E=0,P=0,M=e,z=null;t:for(;;){for(var F;M!==r||c!==0&&M.nodeType!==3||(l=y+c),M!==f||o!==0&&M.nodeType!==3||(w=y+o),M.nodeType===3&&(y+=M.nodeValue.length),(F=M.firstChild)!==null;)z=M,M=F;for(;;){if(M===e)break t;if(z===r&&++E===c&&(l=y),z===f&&++P===o&&(w=y),(F=M.nextSibling)!==null)break;M=z,z=M.parentNode}M=F}r=l===-1||w===-1?null:{start:l,end:w}}else r=null}r=r||{start:0,end:0}}else r=null;for(lb={focusedElem:e,selectionRange:r},ay=!1,pn=t;pn!==null;)if(t=pn,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,pn=e;else for(;pn!==null;){t=pn;try{var k=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var U=k.memoizedProps,X=k.memoizedState,$=t.stateNode,j=$.getSnapshotBeforeUpdate(t.elementType===t.type?U:as(t.type,U),X);$.__reactInternalSnapshotBeforeUpdate=j}break;case 3:var V=t.stateNode.containerInfo;V.nodeType===1?V.textContent="":V.nodeType===9&&V.documentElement&&V.removeChild(V.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Gt(163))}}catch(Z){vi(t,t.return,Z)}if(e=t.sibling,e!==null){e.return=t.return,pn=e;break}pn=t.return}return k=tI,tI=!1,k}function Ap(e,t,r){var o=t.updateQueue;if(o=o!==null?o.lastEffect:null,o!==null){var c=o=o.next;do{if((c.tag&e)===e){var f=c.destroy;c.destroy=void 0,f!==void 0&&Eb(t,r,f)}c=c.next}while(c!==o)}}function d0(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var o=r.create;r.destroy=o()}r=r.next}while(r!==t)}}function Cb(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function VR(e){var t=e.alternate;t!==null&&(e.alternate=null,VR(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ds],delete t[Yp],delete t[db],delete t[bB],delete t[wB])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function HR(e){return e.tag===5||e.tag===3||e.tag===4}function nI(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||HR(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Tb(e,t,r){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=cy));else if(o!==4&&(e=e.child,e!==null))for(Tb(e,t,r),e=e.sibling;e!==null;)Tb(e,t,r),e=e.sibling}function Ib(e,t,r){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(o!==4&&(e=e.child,e!==null))for(Ib(e,t,r),e=e.sibling;e!==null;)Ib(e,t,r),e=e.sibling}var Yi=null,ss=!1;function Yl(e,t,r){for(r=r.child;r!==null;)GR(e,t,r),r=r.sibling}function GR(e,t,r){if($s&&typeof $s.onCommitFiberUnmount=="function")try{$s.onCommitFiberUnmount(r0,r)}catch{}switch(r.tag){case 5:go||Yd(r,t);case 6:var o=Yi,c=ss;Yi=null,Yl(e,t,r),Yi=o,ss=c,Yi!==null&&(ss?(e=Yi,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Yi.removeChild(r.stateNode));break;case 18:Yi!==null&&(ss?(e=Yi,r=r.stateNode,e.nodeType===8?Ux(e.parentNode,r):e.nodeType===1&&Ux(e,r),Wp(e)):Ux(Yi,r.stateNode));break;case 4:o=Yi,c=ss,Yi=r.stateNode.containerInfo,ss=!0,Yl(e,t,r),Yi=o,ss=c;break;case 0:case 11:case 14:case 15:if(!go&&(o=r.updateQueue,o!==null&&(o=o.lastEffect,o!==null))){c=o=o.next;do{var f=c,y=f.destroy;f=f.tag,y!==void 0&&(f&2||f&4)&&Eb(r,t,y),c=c.next}while(c!==o)}Yl(e,t,r);break;case 1:if(!go&&(Yd(r,t),o=r.stateNode,typeof o.componentWillUnmount=="function"))try{o.props=r.memoizedProps,o.state=r.memoizedState,o.componentWillUnmount()}catch(l){vi(r,t,l)}Yl(e,t,r);break;case 21:Yl(e,t,r);break;case 22:r.mode&1?(go=(o=go)||r.memoizedState!==null,Yl(e,t,r),go=o):Yl(e,t,r);break;default:Yl(e,t,r)}}function rI(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new FB),t.forEach(function(o){var c=ZB.bind(null,e,o);r.has(o)||(r.add(o),o.then(c,c))})}}function is(e,t){var r=t.deletions;if(r!==null)for(var o=0;o<r.length;o++){var c=r[o];try{var f=e,y=t,l=y;e:for(;l!==null;){switch(l.tag){case 5:Yi=l.stateNode,ss=!1;break e;case 3:Yi=l.stateNode.containerInfo,ss=!0;break e;case 4:Yi=l.stateNode.containerInfo,ss=!0;break e}l=l.return}if(Yi===null)throw Error(Gt(160));GR(f,y,c),Yi=null,ss=!1;var w=c.alternate;w!==null&&(w.return=null),c.return=null}catch(E){vi(c,t,E)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)WR(t,e),t=t.sibling}function WR(e,t){var r=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(is(t,e),zs(e),o&4){try{Ap(3,e,e.return),d0(3,e)}catch(U){vi(e,e.return,U)}try{Ap(5,e,e.return)}catch(U){vi(e,e.return,U)}}break;case 1:is(t,e),zs(e),o&512&&r!==null&&Yd(r,r.return);break;case 5:if(is(t,e),zs(e),o&512&&r!==null&&Yd(r,r.return),e.flags&32){var c=e.stateNode;try{Up(c,"")}catch(U){vi(e,e.return,U)}}if(o&4&&(c=e.stateNode,c!=null)){var f=e.memoizedProps,y=r!==null?r.memoizedProps:f,l=e.type,w=e.updateQueue;if(e.updateQueue=null,w!==null)try{l==="input"&&f.type==="radio"&&f.name!=null&&fA(c,f),Y1(l,y);var E=Y1(l,f);for(y=0;y<w.length;y+=2){var P=w[y],M=w[y+1];P==="style"?yA(c,M):P==="dangerouslySetInnerHTML"?gA(c,M):P==="children"?Up(c,M):Bw(c,P,M,E)}switch(l){case"input":W1(c,f);break;case"textarea":pA(c,f);break;case"select":var z=c._wrapperState.wasMultiple;c._wrapperState.wasMultiple=!!f.multiple;var F=f.value;F!=null?rh(c,!!f.multiple,F,!1):z!==!!f.multiple&&(f.defaultValue!=null?rh(c,!!f.multiple,f.defaultValue,!0):rh(c,!!f.multiple,f.multiple?[]:"",!1))}c[Yp]=f}catch(U){vi(e,e.return,U)}}break;case 6:if(is(t,e),zs(e),o&4){if(e.stateNode===null)throw Error(Gt(162));c=e.stateNode,f=e.memoizedProps;try{c.nodeValue=f}catch(U){vi(e,e.return,U)}}break;case 3:if(is(t,e),zs(e),o&4&&r!==null&&r.memoizedState.isDehydrated)try{Wp(t.containerInfo)}catch(U){vi(e,e.return,U)}break;case 4:is(t,e),zs(e);break;case 13:is(t,e),zs(e),c=e.child,c.flags&8192&&(f=c.memoizedState!==null,c.stateNode.isHidden=f,!f||c.alternate!==null&&c.alternate.memoizedState!==null||(yS=wi())),o&4&&rI(e);break;case 22:if(P=r!==null&&r.memoizedState!==null,e.mode&1?(go=(E=go)||P,is(t,e),go=E):is(t,e),zs(e),o&8192){if(E=e.memoizedState!==null,(e.stateNode.isHidden=E)&&!P&&e.mode&1)for(pn=e,P=e.child;P!==null;){for(M=pn=P;pn!==null;){switch(z=pn,F=z.child,z.tag){case 0:case 11:case 14:case 15:Ap(4,z,z.return);break;case 1:Yd(z,z.return);var k=z.stateNode;if(typeof k.componentWillUnmount=="function"){o=z,r=z.return;try{t=o,k.props=t.memoizedProps,k.state=t.memoizedState,k.componentWillUnmount()}catch(U){vi(o,r,U)}}break;case 5:Yd(z,z.return);break;case 22:if(z.memoizedState!==null){oI(M);continue}}F!==null?(F.return=z,pn=F):oI(M)}P=P.sibling}e:for(P=null,M=e;;){if(M.tag===5){if(P===null){P=M;try{c=M.stateNode,E?(f=c.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none"):(l=M.stateNode,w=M.memoizedProps.style,y=w!=null&&w.hasOwnProperty("display")?w.display:null,l.style.display=vA("display",y))}catch(U){vi(e,e.return,U)}}}else if(M.tag===6){if(P===null)try{M.stateNode.nodeValue=E?"":M.memoizedProps}catch(U){vi(e,e.return,U)}}else if((M.tag!==22&&M.tag!==23||M.memoizedState===null||M===e)&&M.child!==null){M.child.return=M,M=M.child;continue}if(M===e)break e;for(;M.sibling===null;){if(M.return===null||M.return===e)break e;P===M&&(P=null),M=M.return}P===M&&(P=null),M.sibling.return=M.return,M=M.sibling}}break;case 19:is(t,e),zs(e),o&4&&rI(e);break;case 21:break;default:is(t,e),zs(e)}}function zs(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(HR(r)){var o=r;break e}r=r.return}throw Error(Gt(160))}switch(o.tag){case 5:var c=o.stateNode;o.flags&32&&(Up(c,""),o.flags&=-33);var f=nI(e);Ib(e,f,c);break;case 3:case 4:var y=o.stateNode.containerInfo,l=nI(e);Tb(e,l,y);break;default:throw Error(Gt(161))}}catch(w){vi(e,e.return,w)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function NB(e,t,r){pn=e,qR(e)}function qR(e,t,r){for(var o=(e.mode&1)!==0;pn!==null;){var c=pn,f=c.child;if(c.tag===22&&o){var y=c.memoizedState!==null||fv;if(!y){var l=c.alternate,w=l!==null&&l.memoizedState!==null||go;l=fv;var E=go;if(fv=y,(go=w)&&!E)for(pn=c;pn!==null;)y=pn,w=y.child,y.tag===22&&y.memoizedState!==null?aI(c):w!==null?(w.return=y,pn=w):aI(c);for(;f!==null;)pn=f,qR(f),f=f.sibling;pn=c,fv=l,go=E}iI(e)}else c.subtreeFlags&8772&&f!==null?(f.return=c,pn=f):iI(e)}}function iI(e){for(;pn!==null;){var t=pn;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:go||d0(5,t);break;case 1:var o=t.stateNode;if(t.flags&4&&!go)if(r===null)o.componentDidMount();else{var c=t.elementType===t.type?r.memoizedProps:as(t.type,r.memoizedProps);o.componentDidUpdate(c,r.memoizedState,o.__reactInternalSnapshotBeforeUpdate)}var f=t.updateQueue;f!==null&&jT(t,f,o);break;case 3:var y=t.updateQueue;if(y!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}jT(t,y,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var w=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":w.autoFocus&&r.focus();break;case"img":w.src&&(r.src=w.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var E=t.alternate;if(E!==null){var P=E.memoizedState;if(P!==null){var M=P.dehydrated;M!==null&&Wp(M)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Gt(163))}go||t.flags&512&&Cb(t)}catch(z){vi(t,t.return,z)}}if(t===e){pn=null;break}if(r=t.sibling,r!==null){r.return=t.return,pn=r;break}pn=t.return}}function oI(e){for(;pn!==null;){var t=pn;if(t===e){pn=null;break}var r=t.sibling;if(r!==null){r.return=t.return,pn=r;break}pn=t.return}}function aI(e){for(;pn!==null;){var t=pn;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{d0(4,t)}catch(w){vi(t,r,w)}break;case 1:var o=t.stateNode;if(typeof o.componentDidMount=="function"){var c=t.return;try{o.componentDidMount()}catch(w){vi(t,c,w)}}var f=t.return;try{Cb(t)}catch(w){vi(t,f,w)}break;case 5:var y=t.return;try{Cb(t)}catch(w){vi(t,y,w)}}}catch(w){vi(t,t.return,w)}if(t===e){pn=null;break}var l=t.sibling;if(l!==null){l.return=t.return,pn=l;break}pn=t.return}}var jB=Math.ceil,xy=xl.ReactCurrentDispatcher,gS=xl.ReactCurrentOwner,za=xl.ReactCurrentBatchConfig,gr=0,Zi=null,Ai=null,Qi=0,aa=0,Jd=wc(0),Fi=0,rm=null,Su=0,h0=0,vS=0,Rp=null,No=null,yS=0,yh=1/0,al=null,by=!1,Mb=null,pc=null,pv=!1,ac=null,wy=0,Op=0,Pb=null,Bv=-1,Nv=0;function Co(){return gr&6?wi():Bv!==-1?Bv:Bv=wi()}function mc(e){return e.mode&1?gr&2&&Qi!==0?Qi&-Qi:EB.transition!==null?(Nv===0&&(Nv=AA()),Nv):(e=$r,e!==0||(e=window.event,e=e===void 0?16:$A(e.type)),e):1}function ms(e,t,r,o){if(50<Op)throw Op=0,Pb=null,Error(Gt(185));gm(e,r,o),(!(gr&2)||e!==Zi)&&(e===Zi&&(!(gr&2)&&(h0|=r),Fi===4&&ic(e,Qi)),Wo(e,o),r===1&&gr===0&&!(t.mode&1)&&(yh=wi()+500,l0&&Sc()))}function Wo(e,t){var r=e.callbackNode;EF(e,t);var o=oy(e,e===Zi?Qi:0);if(o===0)r!==null&&mT(r),e.callbackNode=null,e.callbackPriority=0;else if(t=o&-o,e.callbackPriority!==t){if(r!=null&&mT(r),t===1)e.tag===0?SB(sI.bind(null,e)):nR(sI.bind(null,e)),_B(function(){!(gr&6)&&Sc()}),r=null;else{switch(RA(o)){case 1:r=Hw;break;case 4:r=MA;break;case 16:r=iy;break;case 536870912:r=PA;break;default:r=iy}r=tO(r,ZR.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function ZR(e,t){if(Bv=-1,Nv=0,gr&6)throw Error(Gt(327));var r=e.callbackNode;if(lh()&&e.callbackNode!==r)return null;var o=oy(e,e===Zi?Qi:0);if(o===0)return null;if(o&30||o&e.expiredLanes||t)t=Sy(e,o);else{t=o;var c=gr;gr|=2;var f=KR();(Zi!==e||Qi!==t)&&(al=null,yh=wi()+500,mu(e,t));do try{HB();break}catch(l){XR(e,l)}while(1);rS(),xy.current=f,gr=c,Ai!==null?t=0:(Zi=null,Qi=0,t=Fi)}if(t!==0){if(t===2&&(c=nb(e),c!==0&&(o=c,t=Ab(e,c))),t===1)throw r=rm,mu(e,0),ic(e,o),Wo(e,wi()),r;if(t===6)ic(e,o);else{if(c=e.current.alternate,!(o&30)&&!UB(c)&&(t=Sy(e,o),t===2&&(f=nb(e),f!==0&&(o=f,t=Ab(e,f))),t===1))throw r=rm,mu(e,0),ic(e,o),Wo(e,wi()),r;switch(e.finishedWork=c,e.finishedLanes=o,t){case 0:case 1:throw Error(Gt(345));case 2:ru(e,No,al);break;case 3:if(ic(e,o),(o&130023424)===o&&(t=yS+500-wi(),10<t)){if(oy(e,0)!==0)break;if(c=e.suspendedLanes,(c&o)!==o){Co(),e.pingedLanes|=e.suspendedLanes&c;break}e.timeoutHandle=ub(ru.bind(null,e,No,al),t);break}ru(e,No,al);break;case 4:if(ic(e,o),(o&4194240)===o)break;for(t=e.eventTimes,c=-1;0<o;){var y=31-ps(o);f=1<<y,y=t[y],y>c&&(c=y),o&=~f}if(o=c,o=wi()-o,o=(120>o?120:480>o?480:1080>o?1080:1920>o?1920:3e3>o?3e3:4320>o?4320:1960*jB(o/1960))-o,10<o){e.timeoutHandle=ub(ru.bind(null,e,No,al),o);break}ru(e,No,al);break;case 5:ru(e,No,al);break;default:throw Error(Gt(329))}}}return Wo(e,wi()),e.callbackNode===r?ZR.bind(null,e):null}function Ab(e,t){var r=Rp;return e.current.memoizedState.isDehydrated&&(mu(e,t).flags|=256),e=Sy(e,t),e!==2&&(t=No,No=r,t!==null&&Rb(t)),e}function Rb(e){No===null?No=e:No.push.apply(No,e)}function UB(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var o=0;o<r.length;o++){var c=r[o],f=c.getSnapshot;c=c.value;try{if(!vs(f(),c))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ic(e,t){for(t&=~vS,t&=~h0,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-ps(t),o=1<<r;e[r]=-1,t&=~o}}function sI(e){if(gr&6)throw Error(Gt(327));lh();var t=oy(e,0);if(!(t&1))return Wo(e,wi()),null;var r=Sy(e,t);if(e.tag!==0&&r===2){var o=nb(e);o!==0&&(t=o,r=Ab(e,o))}if(r===1)throw r=rm,mu(e,0),ic(e,t),Wo(e,wi()),r;if(r===6)throw Error(Gt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ru(e,No,al),Wo(e,wi()),null}function _S(e,t){var r=gr;gr|=1;try{return e(t)}finally{gr=r,gr===0&&(yh=wi()+500,l0&&Sc())}}function Eu(e){ac!==null&&ac.tag===0&&!(gr&6)&&lh();var t=gr;gr|=1;var r=za.transition,o=$r;try{if(za.transition=null,$r=1,e)return e()}finally{$r=o,za.transition=r,gr=t,!(gr&6)&&Sc()}}function xS(){aa=Jd.current,ni(Jd)}function mu(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,yB(r)),Ai!==null)for(r=Ai.return;r!==null;){var o=r;switch(eS(o),o.tag){case 1:o=o.type.childContextTypes,o!=null&&uy();break;case 3:gh(),ni(Ho),ni(_o),cS();break;case 5:lS(o);break;case 4:gh();break;case 13:ni(fi);break;case 19:ni(fi);break;case 10:iS(o.type._context);break;case 22:case 23:xS()}r=r.return}if(Zi=e,Ai=e=gc(e.current,null),Qi=aa=t,Fi=0,rm=null,vS=h0=Su=0,No=Rp=null,cu!==null){for(t=0;t<cu.length;t++)if(r=cu[t],o=r.interleaved,o!==null){r.interleaved=null;var c=o.next,f=r.pending;if(f!==null){var y=f.next;f.next=c,o.next=y}r.pending=o}cu=null}return e}function XR(e,t){do{var r=Ai;try{if(rS(),kv.current=_y,yy){for(var o=pi.memoizedState;o!==null;){var c=o.queue;c!==null&&(c.pending=null),o=o.next}yy=!1}if(wu=0,qi=$i=pi=null,Pp=!1,em=0,gS.current=null,r===null||r.return===null){Fi=1,rm=t,Ai=null;break}e:{var f=e,y=r.return,l=r,w=t;if(t=Qi,l.flags|=32768,w!==null&&typeof w=="object"&&typeof w.then=="function"){var E=w,P=l,M=P.tag;if(!(P.mode&1)&&(M===0||M===11||M===15)){var z=P.alternate;z?(P.updateQueue=z.updateQueue,P.memoizedState=z.memoizedState,P.lanes=z.lanes):(P.updateQueue=null,P.memoizedState=null)}var F=ZT(y);if(F!==null){F.flags&=-257,XT(F,y,l,f,t),F.mode&1&&qT(f,E,t),t=F,w=E;var k=t.updateQueue;if(k===null){var U=new Set;U.add(w),t.updateQueue=U}else k.add(w);break e}else{if(!(t&1)){qT(f,E,t),bS();break e}w=Error(Gt(426))}}else if(oi&&l.mode&1){var X=ZT(y);if(X!==null){!(X.flags&65536)&&(X.flags|=256),XT(X,y,l,f,t),tS(vh(w,l));break e}}f=w=vh(w,l),Fi!==4&&(Fi=2),Rp===null?Rp=[f]:Rp.push(f),f=y;do{switch(f.tag){case 3:f.flags|=65536,t&=-t,f.lanes|=t;var $=OR(f,w,t);NT(f,$);break e;case 1:l=w;var j=f.type,V=f.stateNode;if(!(f.flags&128)&&(typeof j.getDerivedStateFromError=="function"||V!==null&&typeof V.componentDidCatch=="function"&&(pc===null||!pc.has(V)))){f.flags|=65536,t&=-t,f.lanes|=t;var Z=zR(f,l,t);NT(f,Z);break e}}f=f.return}while(f!==null)}JR(r)}catch(ee){t=ee,Ai===r&&r!==null&&(Ai=r=r.return);continue}break}while(1)}function KR(){var e=xy.current;return xy.current=_y,e===null?_y:e}function bS(){(Fi===0||Fi===3||Fi===2)&&(Fi=4),Zi===null||!(Su&268435455)&&!(h0&268435455)||ic(Zi,Qi)}function Sy(e,t){var r=gr;gr|=2;var o=KR();(Zi!==e||Qi!==t)&&(al=null,mu(e,t));do try{VB();break}catch(c){XR(e,c)}while(1);if(rS(),gr=r,xy.current=o,Ai!==null)throw Error(Gt(261));return Zi=null,Qi=0,Fi}function VB(){for(;Ai!==null;)YR(Ai)}function HB(){for(;Ai!==null&&!mF();)YR(Ai)}function YR(e){var t=eO(e.alternate,e,aa);e.memoizedProps=e.pendingProps,t===null?JR(e):Ai=t,gS.current=null}function JR(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=$B(r,t),r!==null){r.flags&=32767,Ai=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Fi=6,Ai=null;return}}else if(r=kB(r,t,aa),r!==null){Ai=r;return}if(t=t.sibling,t!==null){Ai=t;return}Ai=t=e}while(t!==null);Fi===0&&(Fi=5)}function ru(e,t,r){var o=$r,c=za.transition;try{za.transition=null,$r=1,GB(e,t,r,o)}finally{za.transition=c,$r=o}return null}function GB(e,t,r,o){do lh();while(ac!==null);if(gr&6)throw Error(Gt(327));r=e.finishedWork;var c=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(Gt(177));e.callbackNode=null,e.callbackPriority=0;var f=r.lanes|r.childLanes;if(CF(e,f),e===Zi&&(Ai=Zi=null,Qi=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||pv||(pv=!0,tO(iy,function(){return lh(),null})),f=(r.flags&15990)!==0,r.subtreeFlags&15990||f){f=za.transition,za.transition=null;var y=$r;$r=1;var l=gr;gr|=4,gS.current=null,BB(e,r),WR(r,e),dB(lb),ay=!!sb,lb=sb=null,e.current=r,NB(r),gF(),gr=l,$r=y,za.transition=f}else e.current=r;if(pv&&(pv=!1,ac=e,wy=c),f=e.pendingLanes,f===0&&(pc=null),_F(r.stateNode),Wo(e,wi()),t!==null)for(o=e.onRecoverableError,r=0;r<t.length;r++)c=t[r],o(c.value,{componentStack:c.stack,digest:c.digest});if(by)throw by=!1,e=Mb,Mb=null,e;return wy&1&&e.tag!==0&&lh(),f=e.pendingLanes,f&1?e===Pb?Op++:(Op=0,Pb=e):Op=0,Sc(),null}function lh(){if(ac!==null){var e=RA(wy),t=za.transition,r=$r;try{if(za.transition=null,$r=16>e?16:e,ac===null)var o=!1;else{if(e=ac,ac=null,wy=0,gr&6)throw Error(Gt(331));var c=gr;for(gr|=4,pn=e.current;pn!==null;){var f=pn,y=f.child;if(pn.flags&16){var l=f.deletions;if(l!==null){for(var w=0;w<l.length;w++){var E=l[w];for(pn=E;pn!==null;){var P=pn;switch(P.tag){case 0:case 11:case 15:Ap(8,P,f)}var M=P.child;if(M!==null)M.return=P,pn=M;else for(;pn!==null;){P=pn;var z=P.sibling,F=P.return;if(VR(P),P===E){pn=null;break}if(z!==null){z.return=F,pn=z;break}pn=F}}}var k=f.alternate;if(k!==null){var U=k.child;if(U!==null){k.child=null;do{var X=U.sibling;U.sibling=null,U=X}while(U!==null)}}pn=f}}if(f.subtreeFlags&2064&&y!==null)y.return=f,pn=y;else e:for(;pn!==null;){if(f=pn,f.flags&2048)switch(f.tag){case 0:case 11:case 15:Ap(9,f,f.return)}var $=f.sibling;if($!==null){$.return=f.return,pn=$;break e}pn=f.return}}var j=e.current;for(pn=j;pn!==null;){y=pn;var V=y.child;if(y.subtreeFlags&2064&&V!==null)V.return=y,pn=V;else e:for(y=j;pn!==null;){if(l=pn,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:d0(9,l)}}catch(ee){vi(l,l.return,ee)}if(l===y){pn=null;break e}var Z=l.sibling;if(Z!==null){Z.return=l.return,pn=Z;break e}pn=l.return}}if(gr=c,Sc(),$s&&typeof $s.onPostCommitFiberRoot=="function")try{$s.onPostCommitFiberRoot(r0,e)}catch{}o=!0}return o}finally{$r=r,za.transition=t}}return!1}function lI(e,t,r){t=vh(r,t),t=OR(e,t,1),e=fc(e,t,1),t=Co(),e!==null&&(gm(e,1,t),Wo(e,t))}function vi(e,t,r){if(e.tag===3)lI(e,e,r);else for(;t!==null;){if(t.tag===3){lI(t,e,r);break}else if(t.tag===1){var o=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(pc===null||!pc.has(o))){e=vh(r,e),e=zR(t,e,1),t=fc(t,e,1),e=Co(),t!==null&&(gm(t,1,e),Wo(t,e));break}}t=t.return}}function WB(e,t,r){var o=e.pingCache;o!==null&&o.delete(t),t=Co(),e.pingedLanes|=e.suspendedLanes&r,Zi===e&&(Qi&r)===r&&(Fi===4||Fi===3&&(Qi&130023424)===Qi&&500>wi()-yS?mu(e,0):vS|=r),Wo(e,t)}function QR(e,t){t===0&&(e.mode&1?(t=iv,iv<<=1,!(iv&130023424)&&(iv=4194304)):t=1);var r=Co();e=gl(e,t),e!==null&&(gm(e,t,r),Wo(e,r))}function qB(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),QR(e,r)}function ZB(e,t){var r=0;switch(e.tag){case 13:var o=e.stateNode,c=e.memoizedState;c!==null&&(r=c.retryLane);break;case 19:o=e.stateNode;break;default:throw Error(Gt(314))}o!==null&&o.delete(t),QR(e,r)}var eO;eO=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ho.current)Uo=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Uo=!1,DB(e,t,r);Uo=!!(e.flags&131072)}else Uo=!1,oi&&t.flags&1048576&&rR(t,fy,t.index);switch(t.lanes=0,t.tag){case 2:var o=t.type;Fv(e,t),e=t.pendingProps;var c=fh(t,_o.current);sh(t,r),c=dS(null,t,o,e,c,r);var f=hS();return t.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Go(o)?(f=!0,dy(t)):f=!1,t.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,aS(t),c.updater=c0,t.stateNode=c,c._reactInternals=t,vb(t,o,e,r),t=xb(null,t,o,!0,f,r)):(t.tag=0,oi&&f&&Qw(t),So(null,t,c,r),t=t.child),t;case 16:o=t.elementType;e:{switch(Fv(e,t),e=t.pendingProps,c=o._init,o=c(o._payload),t.type=o,c=t.tag=KB(o),e=as(o,e),c){case 0:t=_b(null,t,o,e,r);break e;case 1:t=JT(null,t,o,e,r);break e;case 11:t=KT(null,t,o,e,r);break e;case 14:t=YT(null,t,o,as(o.type,e),r);break e}throw Error(Gt(306,o,""))}return t;case 0:return o=t.type,c=t.pendingProps,c=t.elementType===o?c:as(o,c),_b(e,t,o,c,r);case 1:return o=t.type,c=t.pendingProps,c=t.elementType===o?c:as(o,c),JT(e,t,o,c,r);case 3:e:{if($R(t),e===null)throw Error(Gt(387));o=t.pendingProps,f=t.memoizedState,c=f.element,sR(e,t),gy(t,o,null,r);var y=t.memoizedState;if(o=y.element,f.isDehydrated)if(f={element:o,isDehydrated:!1,cache:y.cache,pendingSuspenseBoundaries:y.pendingSuspenseBoundaries,transitions:y.transitions},t.updateQueue.baseState=f,t.memoizedState=f,t.flags&256){c=vh(Error(Gt(423)),t),t=QT(e,t,o,r,c);break e}else if(o!==c){c=vh(Error(Gt(424)),t),t=QT(e,t,o,r,c);break e}else for(sa=hc(t.stateNode.containerInfo.firstChild),ca=t,oi=!0,ds=null,r=dR(t,null,o,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(ph(),o===c){t=vl(e,t,r);break e}So(e,t,o,r)}t=t.child}return t;case 5:return hR(t),e===null&&pb(t),o=t.type,c=t.pendingProps,f=e!==null?e.memoizedProps:null,y=c.children,cb(o,c)?y=null:f!==null&&cb(o,f)&&(t.flags|=32),kR(e,t),So(e,t,y,r),t.child;case 6:return e===null&&pb(t),null;case 13:return FR(e,t,r);case 4:return sS(t,t.stateNode.containerInfo),o=t.pendingProps,e===null?t.child=mh(t,null,o,r):So(e,t,o,r),t.child;case 11:return o=t.type,c=t.pendingProps,c=t.elementType===o?c:as(o,c),KT(e,t,o,c,r);case 7:return So(e,t,t.pendingProps,r),t.child;case 8:return So(e,t,t.pendingProps.children,r),t.child;case 12:return So(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(o=t.type._context,c=t.pendingProps,f=t.memoizedProps,y=c.value,Jr(py,o._currentValue),o._currentValue=y,f!==null)if(vs(f.value,y)){if(f.children===c.children&&!Ho.current){t=vl(e,t,r);break e}}else for(f=t.child,f!==null&&(f.return=t);f!==null;){var l=f.dependencies;if(l!==null){y=f.child;for(var w=l.firstContext;w!==null;){if(w.context===o){if(f.tag===1){w=dl(-1,r&-r),w.tag=2;var E=f.updateQueue;if(E!==null){E=E.shared;var P=E.pending;P===null?w.next=w:(w.next=P.next,P.next=w),E.pending=w}}f.lanes|=r,w=f.alternate,w!==null&&(w.lanes|=r),mb(f.return,r,t),l.lanes|=r;break}w=w.next}}else if(f.tag===10)y=f.type===t.type?null:f.child;else if(f.tag===18){if(y=f.return,y===null)throw Error(Gt(341));y.lanes|=r,l=y.alternate,l!==null&&(l.lanes|=r),mb(y,r,t),y=f.sibling}else y=f.child;if(y!==null)y.return=f;else for(y=f;y!==null;){if(y===t){y=null;break}if(f=y.sibling,f!==null){f.return=y.return,y=f;break}y=y.return}f=y}So(e,t,c.children,r),t=t.child}return t;case 9:return c=t.type,o=t.pendingProps.children,sh(t,r),c=Da(c),o=o(c),t.flags|=1,So(e,t,o,r),t.child;case 14:return o=t.type,c=as(o,t.pendingProps),c=as(o.type,c),YT(e,t,o,c,r);case 15:return LR(e,t,t.type,t.pendingProps,r);case 17:return o=t.type,c=t.pendingProps,c=t.elementType===o?c:as(o,c),Fv(e,t),t.tag=1,Go(o)?(e=!0,dy(t)):e=!1,sh(t,r),cR(t,o,c),vb(t,o,c,r),xb(null,t,o,!0,e,r);case 19:return BR(e,t,r);case 22:return DR(e,t,r)}throw Error(Gt(156,t.tag))};function tO(e,t){return IA(e,t)}function XB(e,t,r,o){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Oa(e,t,r,o){return new XB(e,t,r,o)}function wS(e){return e=e.prototype,!(!e||!e.isReactComponent)}function KB(e){if(typeof e=="function")return wS(e)?1:0;if(e!=null){if(e=e.$$typeof,e===jw)return 11;if(e===Uw)return 14}return 2}function gc(e,t){var r=e.alternate;return r===null?(r=Oa(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function jv(e,t,r,o,c,f){var y=2;if(o=e,typeof e=="function")wS(e)&&(y=1);else if(typeof e=="string")y=5;else e:switch(e){case Ud:return gu(r.children,c,f,t);case Nw:y=8,c|=8;break;case j1:return e=Oa(12,r,t,c|2),e.elementType=j1,e.lanes=f,e;case U1:return e=Oa(13,r,t,c),e.elementType=U1,e.lanes=f,e;case V1:return e=Oa(19,r,t,c),e.elementType=V1,e.lanes=f,e;case uA:return f0(r,c,f,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case lA:y=10;break e;case cA:y=9;break e;case jw:y=11;break e;case Uw:y=14;break e;case tc:y=16,o=null;break e}throw Error(Gt(130,e==null?e:typeof e,""))}return t=Oa(y,r,t,c),t.elementType=e,t.type=o,t.lanes=f,t}function gu(e,t,r,o){return e=Oa(7,e,o,t),e.lanes=r,e}function f0(e,t,r,o){return e=Oa(22,e,o,t),e.elementType=uA,e.lanes=r,e.stateNode={isHidden:!1},e}function Kx(e,t,r){return e=Oa(6,e,null,t),e.lanes=r,e}function Yx(e,t,r){return t=Oa(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function YB(e,t,r,o,c){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Rx(0),this.expirationTimes=Rx(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Rx(0),this.identifierPrefix=o,this.onRecoverableError=c,this.mutableSourceEagerHydrationData=null}function SS(e,t,r,o,c,f,y,l,w){return e=new YB(e,t,r,l,w),t===1?(t=1,f===!0&&(t|=8)):t=0,f=Oa(3,null,null,t),e.current=f,f.stateNode=e,f.memoizedState={element:o,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},aS(f),e}function JB(e,t,r){var o=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:jd,key:o==null?null:""+o,children:e,containerInfo:t,implementation:r}}function nO(e){if(!e)return yc;e=e._reactInternals;e:{if(Pu(e)!==e||e.tag!==1)throw Error(Gt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Go(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Gt(171))}if(e.tag===1){var r=e.type;if(Go(r))return tR(e,r,t)}return t}function rO(e,t,r,o,c,f,y,l,w){return e=SS(r,o,!0,e,c,f,y,l,w),e.context=nO(null),r=e.current,o=Co(),c=mc(r),f=dl(o,c),f.callback=t??null,fc(r,f,c),e.current.lanes=c,gm(e,c,o),Wo(e,o),e}function p0(e,t,r,o){var c=t.current,f=Co(),y=mc(c);return r=nO(r),t.context===null?t.context=r:t.pendingContext=r,t=dl(f,y),t.payload={element:e},o=o===void 0?null:o,o!==null&&(t.callback=o),e=fc(c,t,y),e!==null&&(ms(e,c,y,f),Dv(e,c,y)),y}function Ey(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function cI(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function ES(e,t){cI(e,t),(e=e.alternate)&&cI(e,t)}function QB(){return null}var iO=typeof reportError=="function"?reportError:function(e){console.error(e)};function CS(e){this._internalRoot=e}m0.prototype.render=CS.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Gt(409));p0(e,t,null,null)};m0.prototype.unmount=CS.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Eu(function(){p0(null,e,null,null)}),t[ml]=null}};function m0(e){this._internalRoot=e}m0.prototype.unstable_scheduleHydration=function(e){if(e){var t=LA();e={blockedOn:null,target:e,priority:t};for(var r=0;r<rc.length&&t!==0&&t<rc[r].priority;r++);rc.splice(r,0,e),r===0&&kA(e)}};function TS(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function g0(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function uI(){}function e4(e,t,r,o,c){if(c){if(typeof o=="function"){var f=o;o=function(){var E=Ey(y);f.call(E)}}var y=rO(t,o,e,0,null,!1,!1,"",uI);return e._reactRootContainer=y,e[ml]=y.current,Xp(e.nodeType===8?e.parentNode:e),Eu(),y}for(;c=e.lastChild;)e.removeChild(c);if(typeof o=="function"){var l=o;o=function(){var E=Ey(w);l.call(E)}}var w=SS(e,0,!1,null,null,!1,!1,"",uI);return e._reactRootContainer=w,e[ml]=w.current,Xp(e.nodeType===8?e.parentNode:e),Eu(function(){p0(t,w,r,o)}),w}function v0(e,t,r,o,c){var f=r._reactRootContainer;if(f){var y=f;if(typeof c=="function"){var l=c;c=function(){var w=Ey(y);l.call(w)}}p0(t,y,e,c)}else y=e4(r,t,e,c,o);return Ey(y)}OA=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=bp(t.pendingLanes);r!==0&&(Gw(t,r|1),Wo(t,wi()),!(gr&6)&&(yh=wi()+500,Sc()))}break;case 13:Eu(function(){var o=gl(e,1);if(o!==null){var c=Co();ms(o,e,1,c)}}),ES(e,1)}};Ww=function(e){if(e.tag===13){var t=gl(e,134217728);if(t!==null){var r=Co();ms(t,e,134217728,r)}ES(e,134217728)}};zA=function(e){if(e.tag===13){var t=mc(e),r=gl(e,t);if(r!==null){var o=Co();ms(r,e,t,o)}ES(e,t)}};LA=function(){return $r};DA=function(e,t){var r=$r;try{return $r=e,t()}finally{$r=r}};Q1=function(e,t,r){switch(t){case"input":if(W1(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var o=r[t];if(o!==e&&o.form===e.form){var c=s0(o);if(!c)throw Error(Gt(90));hA(o),W1(o,c)}}}break;case"textarea":pA(e,r);break;case"select":t=r.value,t!=null&&rh(e,!!r.multiple,t,!1)}};bA=_S;wA=Eu;var t4={usingClientEntryPoint:!1,Events:[ym,Wd,s0,_A,xA,_S]},up={findFiberByHostInstance:lu,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},n4={bundleType:up.bundleType,version:up.version,rendererPackageName:up.rendererPackageName,rendererConfig:up.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:xl.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=CA(e),e===null?null:e.stateNode},findFiberByHostInstance:up.findFiberByHostInstance||QB,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var mv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!mv.isDisabled&&mv.supportsFiber)try{r0=mv.inject(n4),$s=mv}catch{}}da.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=t4;da.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!TS(t))throw Error(Gt(200));return JB(e,t,null,r)};da.createRoot=function(e,t){if(!TS(e))throw Error(Gt(299));var r=!1,o="",c=iO;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(o=t.identifierPrefix),t.onRecoverableError!==void 0&&(c=t.onRecoverableError)),t=SS(e,1,!1,null,null,r,!1,o,c),e[ml]=t.current,Xp(e.nodeType===8?e.parentNode:e),new CS(t)};da.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Gt(188)):(e=Object.keys(e).join(","),Error(Gt(268,e)));return e=CA(t),e=e===null?null:e.stateNode,e};da.flushSync=function(e){return Eu(e)};da.hydrate=function(e,t,r){if(!g0(t))throw Error(Gt(200));return v0(null,e,t,!0,r)};da.hydrateRoot=function(e,t,r){if(!TS(e))throw Error(Gt(405));var o=r!=null&&r.hydratedSources||null,c=!1,f="",y=iO;if(r!=null&&(r.unstable_strictMode===!0&&(c=!0),r.identifierPrefix!==void 0&&(f=r.identifierPrefix),r.onRecoverableError!==void 0&&(y=r.onRecoverableError)),t=rO(t,null,e,1,r??null,c,!1,f,y),e[ml]=t.current,Xp(e),o)for(e=0;e<o.length;e++)r=o[e],c=r._getVersion,c=c(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,c]:t.mutableSourceEagerHydrationData.push(r,c);return new m0(t)};da.render=function(e,t,r){if(!g0(t))throw Error(Gt(200));return v0(null,e,t,!1,r)};da.unmountComponentAtNode=function(e){if(!g0(e))throw Error(Gt(40));return e._reactRootContainer?(Eu(function(){v0(null,null,e,!1,function(){e._reactRootContainer=null,e[ml]=null})}),!0):!1};da.unstable_batchedUpdates=_S;da.unstable_renderSubtreeIntoContainer=function(e,t,r,o){if(!g0(r))throw Error(Gt(200));if(e==null||e._reactInternals===void 0)throw Error(Gt(38));return v0(e,t,r,!1,o)};da.version="18.2.0-next-9e3b772b8-20220608";function oO(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(oO)}catch(e){console.error(e)}}oO(),rA.exports=da;var _c=rA.exports;const aO=xc(_c),r4=NP({__proto__:null,default:aO},[_c]);function Cy(e){return e instanceof HTMLElement||e instanceof SVGElement}function zp(e){return Cy(e)?e:e instanceof lt.Component?aO.findDOMNode(e):null}function y0(e,t,r){var o=T.useRef({});return(!("value"in o.current)||r(o.current.condition,t))&&(o.current.value=e(),o.current.condition=t),o.current.value}function IS(e,t){typeof e=="function"?e(t):Zn(e)==="object"&&e&&"current"in e&&(e.current=t)}function Ba(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var o=t.filter(function(c){return c});return o.length<=1?o[0]:function(c){t.forEach(function(f){IS(f,c)})}}function _0(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return y0(function(){return Ba.apply(void 0,t)},t,function(o,c){return o.length!==c.length||o.every(function(f,y){return f!==c[y]})})}function xm(e){var t,r,o=eA.isMemo(e)?e.type.type:e.type;return!(typeof o=="function"&&!((t=o.prototype)!==null&&t!==void 0&&t.render)||typeof e=="function"&&!((r=e.prototype)!==null&&r!==void 0&&r.render))}var Ob=T.createContext(null);function i4(e){var t=e.children,r=e.onBatchResize,o=T.useRef(0),c=T.useRef([]),f=T.useContext(Ob),y=T.useCallback(function(l,w,E){o.current+=1;var P=o.current;c.current.push({size:l,element:w,data:E}),Promise.resolve().then(function(){P===o.current&&(r==null||r(c.current),c.current=[])}),f==null||f(l,w,E)},[r,f]);return T.createElement(Ob.Provider,{value:y},t)}var sO=function(){if(typeof Map<"u")return Map;function e(t,r){var o=-1;return t.some(function(c,f){return c[0]===r?(o=f,!0):!1}),o}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(r){var o=e(this.__entries__,r),c=this.__entries__[o];return c&&c[1]},t.prototype.set=function(r,o){var c=e(this.__entries__,r);~c?this.__entries__[c][1]=o:this.__entries__.push([r,o])},t.prototype.delete=function(r){var o=this.__entries__,c=e(o,r);~c&&o.splice(c,1)},t.prototype.has=function(r){return!!~e(this.__entries__,r)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(r,o){o===void 0&&(o=null);for(var c=0,f=this.__entries__;c<f.length;c++){var y=f[c];r.call(o,y[1],y[0])}},t}()}(),zb=typeof window<"u"&&typeof document<"u"&&window.document===document,Ty=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),o4=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(Ty):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)}}(),a4=2;function s4(e,t){var r=!1,o=!1,c=0;function f(){r&&(r=!1,e()),o&&l()}function y(){o4(f)}function l(){var w=Date.now();if(r){if(w-c<a4)return;o=!0}else r=!0,o=!1,setTimeout(y,t);c=w}return l}var l4=20,c4=["top","right","bottom","left","width","height","size","weight"],u4=typeof MutationObserver<"u",d4=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=s4(this.refresh.bind(this),l4)}return e.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},e.prototype.removeObserver=function(t){var r=this.observers_,o=r.indexOf(t);~o&&r.splice(o,1),!r.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){var t=this.updateObservers_();t&&this.refresh()},e.prototype.updateObservers_=function(){var t=this.observers_.filter(function(r){return r.gatherActive(),r.hasActive()});return t.forEach(function(r){return r.broadcastActive()}),t.length>0},e.prototype.connect_=function(){!zb||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),u4?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){!zb||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(t){var r=t.propertyName,o=r===void 0?"":r,c=c4.some(function(f){return!!~o.indexOf(f)});c&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),lO=function(e,t){for(var r=0,o=Object.keys(t);r<o.length;r++){var c=o[r];Object.defineProperty(e,c,{value:t[c],enumerable:!1,writable:!1,configurable:!0})}return e},_h=function(e){var t=e&&e.ownerDocument&&e.ownerDocument.defaultView;return t||Ty},cO=x0(0,0,0,0);function Iy(e){return parseFloat(e)||0}function dI(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return t.reduce(function(o,c){var f=e["border-"+c+"-width"];return o+Iy(f)},0)}function h4(e){for(var t=["top","right","bottom","left"],r={},o=0,c=t;o<c.length;o++){var f=c[o],y=e["padding-"+f];r[f]=Iy(y)}return r}function f4(e){var t=e.getBBox();return x0(0,0,t.width,t.height)}function p4(e){var t=e.clientWidth,r=e.clientHeight;if(!t&&!r)return cO;var o=_h(e).getComputedStyle(e),c=h4(o),f=c.left+c.right,y=c.top+c.bottom,l=Iy(o.width),w=Iy(o.height);if(o.boxSizing==="border-box"&&(Math.round(l+f)!==t&&(l-=dI(o,"left","right")+f),Math.round(w+y)!==r&&(w-=dI(o,"top","bottom")+y)),!g4(e)){var E=Math.round(l+f)-t,P=Math.round(w+y)-r;Math.abs(E)!==1&&(l-=E),Math.abs(P)!==1&&(w-=P)}return x0(c.left,c.top,l,w)}var m4=function(){return typeof SVGGraphicsElement<"u"?function(e){return e instanceof _h(e).SVGGraphicsElement}:function(e){return e instanceof _h(e).SVGElement&&typeof e.getBBox=="function"}}();function g4(e){return e===_h(e).document.documentElement}function v4(e){return zb?m4(e)?f4(e):p4(e):cO}function y4(e){var t=e.x,r=e.y,o=e.width,c=e.height,f=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,y=Object.create(f.prototype);return lO(y,{x:t,y:r,width:o,height:c,top:r,right:t+o,bottom:c+r,left:t}),y}function x0(e,t,r,o){return{x:e,y:t,width:r,height:o}}var _4=function(){function e(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=x0(0,0,0,0),this.target=t}return e.prototype.isActive=function(){var t=v4(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},e}(),x4=function(){function e(t,r){var o=y4(r);lO(this,{target:t,contentRect:o})}return e}(),b4=function(){function e(t,r,o){if(this.activeObservations_=[],this.observations_=new sO,typeof t!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=r,this.callbackCtx_=o}return e.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(t instanceof _h(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var r=this.observations_;r.has(t)||(r.set(t,new _4(t)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(t instanceof _h(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var r=this.observations_;r.has(t)&&(r.delete(t),r.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(r){r.isActive()&&t.activeObservations_.push(r)})},e.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,r=this.activeObservations_.map(function(o){return new x4(o.target,o.broadcastRect())});this.callback_.call(t,r,t),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),uO=typeof WeakMap<"u"?new WeakMap:new sO,dO=function(){function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var r=d4.getInstance(),o=new b4(t,r,this);uO.set(this,o)}return e}();["observe","unobserve","disconnect"].forEach(function(e){dO.prototype[e]=function(){var t;return(t=uO.get(this))[e].apply(t,arguments)}});var w4=function(){return typeof Ty.ResizeObserver<"u"?Ty.ResizeObserver:dO}(),sc=new Map;function S4(e){e.forEach(function(t){var r,o=t.target;(r=sc.get(o))===null||r===void 0||r.forEach(function(c){return c(o)})})}var hO=new w4(S4);function E4(e,t){sc.has(e)||(sc.set(e,new Set),hO.observe(e)),sc.get(e).add(t)}function C4(e,t){sc.has(e)&&(sc.get(e).delete(t),sc.get(e).size||(hO.unobserve(e),sc.delete(e)))}function qo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hI(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,nA(o.key),o)}}function Zo(e,t,r){return t&&hI(e.prototype,t),r&&hI(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Lb(e,t){return Lb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,c){return o.__proto__=c,o},Lb(e,t)}function Au(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Lb(e,t)}function My(e){return My=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},My(e)}function T4(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function vn(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function I4(e,t){if(t&&(Zn(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vn(e)}function Ru(e){var t=T4();return function(){var o=My(e),c;if(t){var f=My(this).constructor;c=Reflect.construct(o,arguments,f)}else c=o.apply(this,arguments);return I4(this,c)}}var M4=function(e){Au(r,e);var t=Ru(r);function r(){return qo(this,r),t.apply(this,arguments)}return Zo(r,[{key:"render",value:function(){return this.props.children}}]),r}(T.Component);function P4(e,t){var r=e.children,o=e.disabled,c=T.useRef(null),f=T.useRef(null),y=T.useContext(Ob),l=typeof r=="function",w=l?r(c):r,E=T.useRef({width:-1,height:-1,offsetWidth:-1,offsetHeight:-1}),P=!l&&T.isValidElement(w)&&xm(w),M=P?w.ref:null,z=_0(M,c),F=function(){var $;return zp(c.current)||(c.current&&Zn(c.current)==="object"?zp(($=c.current)===null||$===void 0?void 0:$.nativeElement):null)||zp(f.current)};T.useImperativeHandle(t,function(){return F()});var k=T.useRef(e);k.current=e;var U=T.useCallback(function(X){var $=k.current,j=$.onResize,V=$.data,Z=X.getBoundingClientRect(),ee=Z.width,ne=Z.height,Q=X.offsetWidth,ie=X.offsetHeight,te=Math.floor(ee),ge=Math.floor(ne);if(E.current.width!==te||E.current.height!==ge||E.current.offsetWidth!==Q||E.current.offsetHeight!==ie){var ue={width:te,height:ge,offsetWidth:Q,offsetHeight:ie};E.current=ue;var oe=Q===Math.round(ee)?ee:Q,fe=ie===Math.round(ne)?ne:ie,Ee=st(st({},ue),{},{offsetWidth:oe,offsetHeight:fe});y==null||y(Ee,X,V),j&&Promise.resolve().then(function(){j(Ee,X)})}},[]);return T.useEffect(function(){var X=F();return X&&!o&&E4(X,U),function(){return C4(X,U)}},[c.current,o]),T.createElement(M4,{ref:f},P?T.cloneElement(w,{ref:z}):w)}var A4=T.forwardRef(P4),R4="rc-observer-key";function O4(e,t){var r=e.children,o=typeof r=="function"?[r]:fl(r);return o.map(function(c,f){var y=(c==null?void 0:c.key)||"".concat(R4,"-").concat(f);return T.createElement(A4,Sn({},e,{key:y,ref:f===0?t:void 0}),c)})}var bl=T.forwardRef(O4);bl.Collection=i4;function wl(e,t){var r=st({},e);return Array.isArray(t)&&t.forEach(function(o){delete r[o]}),r}function Db(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,o=new Array(t);r<t;r++)o[r]=e[r];return o}function z4(e){if(Array.isArray(e))return Db(e)}function fO(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function MS(e,t){if(e){if(typeof e=="string")return Db(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Db(e,t)}}function L4(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mn(e){return z4(e)||fO(e)||MS(e)||L4()}var pO=function(t){return+setTimeout(t,16)},mO=function(t){return clearTimeout(t)};typeof window<"u"&&"requestAnimationFrame"in window&&(pO=function(t){return window.requestAnimationFrame(t)},mO=function(t){return window.cancelAnimationFrame(t)});var fI=0,PS=new Map;function gO(e){PS.delete(e)}var vO=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;fI+=1;var o=fI;function c(f){if(f===0)gO(o),t();else{var y=pO(function(){c(f-1)});PS.set(o,y)}}return c(r),o};vO.cancel=function(e){var t=PS.get(e);return gO(e),mO(t)};const yi=vO;function AS(e){for(var t=0,r,o=0,c=e.length;c>=4;++o,c-=4)r=e.charCodeAt(o)&255|(e.charCodeAt(++o)&255)<<8|(e.charCodeAt(++o)&255)<<16|(e.charCodeAt(++o)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,t=(r&65535)*1540483477+((r>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(c){case 3:t^=(e.charCodeAt(o+2)&255)<<16;case 2:t^=(e.charCodeAt(o+1)&255)<<8;case 1:t^=e.charCodeAt(o)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}function D4(e,t){if(e==null)return{};var r={},o=Object.keys(e),c,f;for(f=0;f<o.length;f++)c=o[f],!(t.indexOf(c)>=0)&&(r[c]=e[c]);return r}function Vr(e,t){if(e==null)return{};var r=D4(e,t),o,c;if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(e);for(c=0;c<f.length;c++)o=f[c],!(t.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(e,o)&&(r[o]=e[o])}return r}function yO(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,o=new Set;function c(f,y){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,w=o.has(f);if(Vo(!w,"Warning: There may be circular references"),w)return!1;if(f===y)return!0;if(r&&l>1)return!1;o.add(f);var E=l+1;if(Array.isArray(f)){if(!Array.isArray(y)||f.length!==y.length)return!1;for(var P=0;P<f.length;P++)if(!c(f[P],y[P],E))return!1;return!0}if(f&&y&&Zn(f)==="object"&&Zn(y)==="object"){var M=Object.keys(f);return M.length!==Object.keys(y).length?!1:M.every(function(z){return c(f[z],y[z],E)})}return!1}return c(e,t)}var pI="%",k4=function(){function e(t){qo(this,e),Fe(this,"instanceId",void 0),Fe(this,"cache",new Map),this.instanceId=t}return Zo(e,[{key:"get",value:function(r){return this.cache.get(r.join(pI))||null}},{key:"update",value:function(r,o){var c=r.join(pI),f=this.cache.get(c),y=o(f);y===null?this.cache.delete(c):this.cache.set(c,y)}}]),e}(),kb="data-token-hash",vu="data-css-hash",Qd="__cssinjs_instance__";function $4(){var e=Math.random().toString(12).slice(2);if(typeof document<"u"&&document.head&&document.body){var t=document.body.querySelectorAll("style[".concat(vu,"]"))||[],r=document.head.firstChild;Array.from(t).forEach(function(c){c[Qd]=c[Qd]||e,c[Qd]===e&&document.head.insertBefore(c,r)});var o={};Array.from(document.querySelectorAll("style[".concat(vu,"]"))).forEach(function(c){var f=c.getAttribute(vu);if(o[f]){if(c[Qd]===e){var y;(y=c.parentNode)===null||y===void 0||y.removeChild(c)}}else o[f]=!0})}return new k4(e)}var RS=T.createContext({hashPriority:"low",cache:$4(),defaultCache:!0});function no(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function F4(e,t){if(!e)return!1;if(e.contains)return e.contains(t);for(var r=t;r;){if(r===e)return!0;r=r.parentNode}return!1}var mI="data-rc-order",gI="data-rc-priority",B4="rc-util-key",$b=new Map;function _O(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.mark;return t?t.startsWith("data-")?t:"data-".concat(t):B4}function b0(e){if(e.attachTo)return e.attachTo;var t=document.querySelector("head");return t||document.body}function N4(e){return e==="queue"?"prependQueue":e?"prepend":"append"}function xO(e){return Array.from(($b.get(e)||e).children).filter(function(t){return t.tagName==="STYLE"})}function bO(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!no())return null;var r=t.csp,o=t.prepend,c=t.priority,f=c===void 0?0:c,y=N4(o),l=y==="prependQueue",w=document.createElement("style");w.setAttribute(mI,y),l&&f&&w.setAttribute(gI,"".concat(f)),r!=null&&r.nonce&&(w.nonce=r==null?void 0:r.nonce),w.innerHTML=e;var E=b0(t),P=E.firstChild;if(o){if(l){var M=xO(E).filter(function(z){if(!["prepend","prependQueue"].includes(z.getAttribute(mI)))return!1;var F=Number(z.getAttribute(gI)||0);return f>=F});if(M.length)return E.insertBefore(w,M[M.length-1].nextSibling),w}E.insertBefore(w,P)}else E.appendChild(w);return w}function wO(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=b0(t);return xO(r).find(function(o){return o.getAttribute(_O(t))===e})}function Py(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=wO(e,t);if(r){var o=b0(t);o.removeChild(r)}}function j4(e,t){var r=$b.get(e);if(!r||!F4(document,r)){var o=bO("",t),c=o.parentNode;$b.set(e,c),e.removeChild(o)}}function xh(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=b0(r);j4(o,r);var c=wO(t,r);if(c){var f,y;if((f=r.csp)!==null&&f!==void 0&&f.nonce&&c.nonce!==((y=r.csp)===null||y===void 0?void 0:y.nonce)){var l;c.nonce=(l=r.csp)===null||l===void 0?void 0:l.nonce}return c.innerHTML!==e&&(c.innerHTML=e),c}var w=bO(e,r);return w.setAttribute(_O(r),t),w}function SO(e){if(Array.isArray(e))return e}function U4(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var o,c,f,y,l=[],w=!0,E=!1;try{if(f=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;w=!1}else for(;!(w=(o=f.call(r)).done)&&(l.push(o.value),l.length!==t);w=!0);}catch(P){E=!0,c=P}finally{try{if(!w&&r.return!=null&&(y=r.return(),Object(y)!==y))return}finally{if(E)throw c}}return l}}function EO(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bt(e,t){return SO(e)||U4(e,t)||MS(e,t)||EO()}function V4(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}var OS=function(){function e(){qo(this,e),Fe(this,"cache",void 0),Fe(this,"keys",void 0),Fe(this,"cacheCallTimes",void 0),this.cache=new Map,this.keys=[],this.cacheCallTimes=0}return Zo(e,[{key:"size",value:function(){return this.keys.length}},{key:"internalGet",value:function(r){var o,c,f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,y={map:this.cache};return r.forEach(function(l){if(!y)y=void 0;else{var w,E;y=(w=y)===null||w===void 0||(E=w.map)===null||E===void 0?void 0:E.get(l)}}),(o=y)!==null&&o!==void 0&&o.value&&f&&(y.value[1]=this.cacheCallTimes++),(c=y)===null||c===void 0?void 0:c.value}},{key:"get",value:function(r){var o;return(o=this.internalGet(r,!0))===null||o===void 0?void 0:o[0]}},{key:"has",value:function(r){return!!this.internalGet(r)}},{key:"set",value:function(r,o){var c=this;if(!this.has(r)){if(this.size()+1>e.MAX_CACHE_SIZE+e.MAX_CACHE_OFFSET){var f=this.keys.reduce(function(E,P){var M=Bt(E,2),z=M[1];return c.internalGet(P)[1]<z?[P,c.internalGet(P)[1]]:E},[this.keys[0],this.cacheCallTimes]),y=Bt(f,1),l=y[0];this.delete(l)}this.keys.push(r)}var w=this.cache;r.forEach(function(E,P){if(P===r.length-1)w.set(E,{value:[o,c.cacheCallTimes++]});else{var M=w.get(E);M?M.map||(M.map=new Map):w.set(E,{map:new Map}),w=w.get(E).map}})}},{key:"deleteByPath",value:function(r,o){var c=r.get(o[0]);if(o.length===1){var f;return c.map?r.set(o[0],{map:c.map}):r.delete(o[0]),(f=c.value)===null||f===void 0?void 0:f[0]}var y=this.deleteByPath(c.map,o.slice(1));return(!c.map||c.map.size===0)&&!c.value&&r.delete(o[0]),y}},{key:"delete",value:function(r){if(this.has(r))return this.keys=this.keys.filter(function(o){return!V4(o,r)}),this.deleteByPath(this.cache,r)}}]),e}();Fe(OS,"MAX_CACHE_SIZE",20);Fe(OS,"MAX_CACHE_OFFSET",5);var vI=0,CO=function(){function e(t){qo(this,e),Fe(this,"derivatives",void 0),Fe(this,"id",void 0),this.derivatives=Array.isArray(t)?t:[t],this.id=vI,t.length===0&&(t.length>0,void 0),vI+=1}return Zo(e,[{key:"getDerivativeToken",value:function(r){return this.derivatives.reduce(function(o,c){return c(r,o)},void 0)}}]),e}(),Jx=new OS;function Fb(e){var t=Array.isArray(e)?e:[e];return Jx.has(t)||Jx.set(t,new CO(t)),Jx.get(t)}var H4=new WeakMap,Qx={};function G4(e,t){for(var r=H4,o=0;o<t.length;o+=1){var c=t[o];r.has(c)||r.set(c,new WeakMap),r=r.get(c)}return r.has(Qx)||r.set(Qx,e()),r.get(Qx)}var yI=new WeakMap;function Ay(e){var t=yI.get(e)||"";return t||(Object.keys(e).forEach(function(r){var o=e[r];t+=r,o instanceof CO?t+=o.id:o&&Zn(o)==="object"?t+=Ay(o):t+=o}),yI.set(e,t)),t}function W4(e,t){return AS("".concat(t,"_").concat(Ay(e)))}var Lp="random-".concat(Date.now(),"-").concat(Math.random()).replace(/\./g,""),TO="_bAmBoO_";function q4(e,t,r){if(no()){var o,c;xh(e,Lp);var f=document.createElement("div");f.style.position="fixed",f.style.left="0",f.style.top="0",t==null||t(f),document.body.appendChild(f);var y=r?r(f):(o=getComputedStyle(f).content)===null||o===void 0?void 0:o.includes(TO);return(c=f.parentNode)===null||c===void 0||c.removeChild(f),Py(Lp),y}return!1}var e1=void 0;function Z4(){return e1===void 0&&(e1=q4("@layer ".concat(Lp," { .").concat(Lp,' { content: "').concat(TO,'"!important; } }'),function(e){e.className=Lp})),e1}var _I=no()?T.useLayoutEffect:T.useEffect,zr=function(t,r){var o=T.useRef(!0);_I(function(){return t(o.current)},r),_I(function(){return o.current=!1,function(){o.current=!0}},[])},xI=function(t,r){zr(function(o){if(!o)return t()},r)},X4=st({},Wy),bI=X4.useInsertionEffect,K4=function(t,r,o){T.useMemo(t,o),zr(function(){return r(!0)},o)},Y4=bI?function(e,t,r){return bI(function(){return e(),t()},r)}:K4,J4=st({},Wy),Q4=J4.useInsertionEffect,e5=function(t){var r=[],o=!1;function c(f){o||r.push(f)}return T.useEffect(function(){return o=!1,function(){o=!0,r.length&&r.forEach(function(f){return f()})}},t),c},t5=function(){return function(t){t()}},n5=typeof Q4<"u"?e5:t5;function IO(e,t,r,o,c){var f=T.useContext(RS),y=f.cache,l=[e].concat(mn(t)),w=l.join("_"),E=n5([w]),P=function(k){y.update(l,function(U){var X=U||[],$=Bt(X,2),j=$[0],V=j===void 0?0:j,Z=$[1],ee=Z,ne=ee||r(),Q=[V,ne];return k?k(Q):Q})};T.useMemo(function(){P()},[w]);var M=y.get(l),z=M[1];return Y4(function(){c==null||c(z)},function(F){return P(function(k){var U=Bt(k,2),X=U[0],$=U[1];return F&&X===0&&(c==null||c(z)),[X+1,$]}),function(){y.update(l,function(k){var U=k||[],X=Bt(U,2),$=X[0],j=$===void 0?0:$,V=X[1],Z=j-1;return Z===0?(E(function(){return o==null?void 0:o(V,!1)}),null):[j-1,V]})}},[w]),z}var r5={},i5="css",au=new Map;function o5(e){au.set(e,(au.get(e)||0)+1)}function a5(e,t){if(typeof document<"u"){var r=document.querySelectorAll("style[".concat(kb,'="').concat(e,'"]'));r.forEach(function(o){if(o[Qd]===t){var c;(c=o.parentNode)===null||c===void 0||c.removeChild(o)}})}}var s5=0;function l5(e,t){au.set(e,(au.get(e)||0)-1);var r=Array.from(au.keys()),o=r.filter(function(c){var f=au.get(c)||0;return f<=0});r.length-o.length>s5&&o.forEach(function(c){a5(c,t),au.delete(c)})}var c5=function(t,r,o,c){var f=o.getDerivativeToken(t),y=st(st({},f),r);return c&&(y=c(y)),y};function u5(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=T.useContext(RS),c=o.cache.instanceId,f=r.salt,y=f===void 0?"":f,l=r.override,w=l===void 0?r5:l,E=r.formatToken,P=r.getComputedToken,M=G4(function(){return Object.assign.apply(Object,[{}].concat(mn(t)))},t),z=Ay(M),F=Ay(w),k=IO("token",[y,e.id,z,F],function(){var U=P?P(M,w,e):c5(M,w,e,E),X=W4(U,y);U._tokenKey=X,o5(X);var $="".concat(i5,"-").concat(AS(X));return U._hashId=$,[U,$]},function(U){l5(U[0]._tokenKey,c)});return k}var d5={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},MO="comm",PO="rule",AO="decl",h5="@import",f5="@keyframes",p5="@layer",m5=Math.abs,zS=String.fromCharCode;function RO(e){return e.trim()}function Uv(e,t,r){return e.replace(t,r)}function g5(e,t){return e.indexOf(t)}function im(e,t){return e.charCodeAt(t)|0}function om(e,t,r){return e.slice(t,r)}function ll(e){return e.length}function v5(e){return e.length}function gv(e,t){return t.push(e),e}var w0=1,bh=1,OO=0,$a=0,Pi=0,Ph="";function LS(e,t,r,o,c,f,y,l){return{value:e,root:t,parent:r,type:o,props:c,children:f,line:w0,column:bh,length:y,return:"",siblings:l}}function y5(){return Pi}function _5(){return Pi=$a>0?im(Ph,--$a):0,bh--,Pi===10&&(bh=1,w0--),Pi}function gs(){return Pi=$a<OO?im(Ph,$a++):0,bh++,Pi===10&&(bh=1,w0++),Pi}function yu(){return im(Ph,$a)}function Vv(){return $a}function S0(e,t){return om(Ph,e,t)}function Bb(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function x5(e){return w0=bh=1,OO=ll(Ph=e),$a=0,[]}function b5(e){return Ph="",e}function t1(e){return RO(S0($a-1,Nb(e===91?e+2:e===40?e+1:e)))}function w5(e){for(;(Pi=yu())&&Pi<33;)gs();return Bb(e)>2||Bb(Pi)>3?"":" "}function S5(e,t){for(;--t&&gs()&&!(Pi<48||Pi>102||Pi>57&&Pi<65||Pi>70&&Pi<97););return S0(e,Vv()+(t<6&&yu()==32&&gs()==32))}function Nb(e){for(;gs();)switch(Pi){case e:return $a;case 34:case 39:e!==34&&e!==39&&Nb(Pi);break;case 40:e===41&&Nb(e);break;case 92:gs();break}return $a}function E5(e,t){for(;gs()&&e+Pi!==47+10;)if(e+Pi===42+42&&yu()===47)break;return"/*"+S0(t,$a-1)+"*"+zS(e===47?e:gs())}function C5(e){for(;!Bb(yu());)gs();return S0(e,$a)}function T5(e){return b5(Hv("",null,null,null,[""],e=x5(e),0,[0],e))}function Hv(e,t,r,o,c,f,y,l,w){for(var E=0,P=0,M=y,z=0,F=0,k=0,U=1,X=1,$=1,j=0,V="",Z=c,ee=f,ne=o,Q=V;X;)switch(k=j,j=gs()){case 40:if(k!=108&&im(Q,M-1)==58){g5(Q+=Uv(t1(j),"&","&\f"),"&\f")!=-1&&($=-1);break}case 34:case 39:case 91:Q+=t1(j);break;case 9:case 10:case 13:case 32:Q+=w5(k);break;case 92:Q+=S5(Vv()-1,7);continue;case 47:switch(yu()){case 42:case 47:gv(I5(E5(gs(),Vv()),t,r,w),w);break;default:Q+="/"}break;case 123*U:l[E++]=ll(Q)*$;case 125*U:case 59:case 0:switch(j){case 0:case 125:X=0;case 59+P:$==-1&&(Q=Uv(Q,/\f/g,"")),F>0&&ll(Q)-M&&gv(F>32?SI(Q+";",o,r,M-1,w):SI(Uv(Q," ","")+";",o,r,M-2,w),w);break;case 59:Q+=";";default:if(gv(ne=wI(Q,t,r,E,P,c,l,V,Z=[],ee=[],M,f),f),j===123)if(P===0)Hv(Q,t,ne,ne,Z,f,M,l,ee);else switch(z===99&&im(Q,3)===110?100:z){case 100:case 108:case 109:case 115:Hv(e,ne,ne,o&&gv(wI(e,ne,ne,0,0,c,l,V,c,Z=[],M,ee),ee),c,ee,M,l,o?Z:ee);break;default:Hv(Q,ne,ne,ne,[""],ee,0,l,ee)}}E=P=F=0,U=$=1,V=Q="",M=y;break;case 58:M=1+ll(Q),F=k;default:if(U<1){if(j==123)--U;else if(j==125&&U++==0&&_5()==125)continue}switch(Q+=zS(j),j*U){case 38:$=P>0?1:(Q+="\f",-1);break;case 44:l[E++]=(ll(Q)-1)*$,$=1;break;case 64:yu()===45&&(Q+=t1(gs())),z=yu(),P=M=ll(V=Q+=C5(Vv())),j++;break;case 45:k===45&&ll(Q)==2&&(U=0)}}return f}function wI(e,t,r,o,c,f,y,l,w,E,P,M){for(var z=c-1,F=c===0?f:[""],k=v5(F),U=0,X=0,$=0;U<o;++U)for(var j=0,V=om(e,z+1,z=m5(X=y[U])),Z=e;j<k;++j)(Z=RO(X>0?F[j]+" "+V:Uv(V,/&\f/g,F[j])))&&(w[$++]=Z);return LS(e,t,r,c===0?PO:l,w,E,P,M)}function I5(e,t,r,o){return LS(e,t,r,MO,zS(y5()),om(e,2,-2),0,o)}function SI(e,t,r,o,c){return LS(e,t,r,AO,om(e,0,o),om(e,o+1,-1),o,c)}function jb(e,t){for(var r="",o=0;o<e.length;o++)r+=t(e[o],o,e,t)||"";return r}function M5(e,t,r,o){switch(e.type){case p5:if(e.children.length)break;case h5:case AO:return e.return=e.return||e.value;case MO:return"";case f5:return e.return=e.value+"{"+jb(e.children,o)+"}";case PO:if(!ll(e.value=e.props.join(",")))return""}return ll(r=jb(e.children,o))?e.return=e.value+"{"+r+"}":""}var EI="data-ant-cssinjs-cache-path",zO="_FILE_STYLE__",_u,LO=!0;function P5(){if(!_u&&(_u={},no())){var e=document.createElement("div");e.className=EI,e.style.position="fixed",e.style.visibility="hidden",e.style.top="-9999px",document.body.appendChild(e);var t=getComputedStyle(e).content||"";t=t.replace(/^"/,"").replace(/"$/,""),t.split(";").forEach(function(c){var f=c.split(":"),y=Bt(f,2),l=y[0],w=y[1];_u[l]=w});var r=document.querySelector("style[".concat(EI,"]"));if(r){var o;LO=!1,(o=r.parentNode)===null||o===void 0||o.removeChild(r)}document.body.removeChild(e)}}function A5(e){return P5(),!!_u[e]}function R5(e){var t=_u[e],r=null;if(t&&no())if(LO)r=zO;else{var o=document.querySelector("style[".concat(vu,'="').concat(_u[e],'"]'));o?r=o.innerHTML:delete _u[e]}return[r,t]}var CI=no(),O5="_skip_check_",DO="_multi_value_";function TI(e){var t=jb(T5(e),M5);return t.replace(/\{%%%\:[^;];}/g,";")}function z5(e){return Zn(e)==="object"&&e&&(O5 in e||DO in e)}function L5(e,t,r){if(!t)return e;var o=".".concat(t),c=r==="low"?":where(".concat(o,")"):o,f=e.split(",").map(function(y){var l,w=y.trim().split(/\s+/),E=w[0]||"",P=((l=E.match(/^\w+/))===null||l===void 0?void 0:l[0])||"";return E="".concat(P).concat(c).concat(E.slice(P.length)),[E].concat(mn(w.slice(1))).join(" ")});return f.join(",")}var D5=function e(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{root:!0,parentSelectors:[]},c=o.root,f=o.injectHash,y=o.parentSelectors,l=r.hashId,w=r.layer;r.path;var E=r.hashPriority,P=r.transformers,M=P===void 0?[]:P;r.linters;var z="",F={};function k(V){var Z=V.getName(l);if(!F[Z]){var ee=e(V.style,r,{root:!1,parentSelectors:y}),ne=Bt(ee,1),Q=ne[0];F[Z]="@keyframes ".concat(V.getName(l)).concat(Q)}}function U(V){var Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return V.forEach(function(ee){Array.isArray(ee)?U(ee,Z):ee&&Z.push(ee)}),Z}var X=U(Array.isArray(t)?t:[t]);if(X.forEach(function(V){var Z=typeof V=="string"&&!c?{}:V;if(typeof Z=="string")z+="".concat(Z,`
`);else if(Z._keyframe)k(Z);else{var ee=M.reduce(function(ne,Q){var ie;return(Q==null||(ie=Q.visit)===null||ie===void 0?void 0:ie.call(Q,ne))||ne},Z);Object.keys(ee).forEach(function(ne){var Q=ee[ne];if(Zn(Q)==="object"&&Q&&(ne!=="animationName"||!Q._keyframe)&&!z5(Q)){var ie=!1,te=ne.trim(),ge=!1;(c||f)&&l?te.startsWith("@")?ie=!0:te=L5(ne,l,E):c&&!l&&(te==="&"||te==="")&&(te="",ge=!0);var ue=e(Q,r,{root:ge,injectHash:ie,parentSelectors:[].concat(mn(y),[te])}),oe=Bt(ue,2),fe=oe[0],Ee=oe[1];F=st(st({},F),Ee),z+="".concat(te).concat(fe)}else{let Ne=function(pe,He){var Be=pe.replace(/[A-Z]/g,function(Qe){return"-".concat(Qe.toLowerCase())}),Ge=He;!d5[pe]&&typeof Ge=="number"&&Ge!==0&&(Ge="".concat(Ge,"px")),pe==="animationName"&&He!==null&&He!==void 0&&He._keyframe&&(k(He),Ge=He.getName(l)),z+="".concat(Be,":").concat(Ge,";")};var ke,Le=(ke=Q==null?void 0:Q.value)!==null&&ke!==void 0?ke:Q;Zn(Q)==="object"&&Q!==null&&Q!==void 0&&Q[DO]&&Array.isArray(Le)?Le.forEach(function(pe){Ne(ne,pe)}):Ne(ne,Le)}})}}),!c)z="{".concat(z,"}");else if(w&&Z4()){var $=w.split(","),j=$[$.length-1].trim();z="@layer ".concat(j," {").concat(z,"}"),$.length>1&&(z="@layer ".concat(w,"{%%%:%}").concat(z))}return[z,F]};function k5(e,t){return AS("".concat(e.join("%")).concat(t))}function $5(){return null}function Ub(e,t){var r=e.token,o=e.path,c=e.hashId,f=e.layer,y=e.nonce,l=e.clientOnly,w=e.order,E=w===void 0?0:w,P=T.useContext(RS),M=P.autoClear;P.mock;var z=P.defaultCache,F=P.hashPriority,k=P.container,U=P.ssrInline,X=P.transformers,$=P.linters,j=P.cache,V=r._tokenKey,Z=[V].concat(mn(o)),ee=CI,ne=IO("style",Z,function(){var ue=Z.join("|");if(A5(ue)){var oe=R5(ue),fe=Bt(oe,2),Ee=fe[0],ke=fe[1];if(Ee)return[Ee,V,ke,{},l,E]}var Le=t(),Ne=D5(Le,{hashId:c,hashPriority:F,layer:f,path:o.join("-"),transformers:X,linters:$}),pe=Bt(Ne,2),He=pe[0],Be=pe[1],Ge=TI(He),Qe=k5(Z,Ge);return[Ge,V,Qe,Be,l,E]},function(ue,oe){var fe=Bt(ue,3),Ee=fe[2];(oe||M)&&CI&&Py(Ee,{mark:vu})},function(ue){var oe=Bt(ue,4),fe=oe[0];oe[1];var Ee=oe[2],ke=oe[3];if(ee&&fe!==zO){var Le={mark:vu,prepend:"queue",attachTo:k,priority:E},Ne=typeof y=="function"?y():y;Ne&&(Le.csp={nonce:Ne});var pe=xh(fe,Ee,Le);pe[Qd]=j.instanceId,pe.setAttribute(kb,V),Object.keys(ke).forEach(function(He){xh(TI(ke[He]),"_effect-".concat(He),Le)})}}),Q=Bt(ne,3),ie=Q[0],te=Q[1],ge=Q[2];return function(ue){var oe;if(!U||ee||!z)oe=T.createElement($5,null);else{var fe;oe=T.createElement("style",Sn({},(fe={},Fe(fe,kb,te),Fe(fe,vu,ge),fe),{dangerouslySetInnerHTML:{__html:ie}}))}return T.createElement(T.Fragment,null,oe,ue)}}var or=function(){function e(t,r){qo(this,e),Fe(this,"name",void 0),Fe(this,"style",void 0),Fe(this,"_keyframe",!0),this.name=t,this.style=r}return Zo(e,[{key:"getName",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return r?"".concat(r,"-").concat(this.name):this.name}}]),e}();function Pd(e){return e.notSplit=!0,e}Pd(["borderTop","borderBottom"]),Pd(["borderTop"]),Pd(["borderBottom"]),Pd(["borderLeft","borderRight"]),Pd(["borderLeft"]),Pd(["borderRight"]);var F5=T.createContext({});const DS=F5;function kO(e){return SO(e)||fO(e)||MS(e)||EO()}function fs(e,t){for(var r=e,o=0;o<t.length;o+=1){if(r==null)return;r=r[t[o]]}return r}function $O(e,t,r,o){if(!t.length)return r;var c=kO(t),f=c[0],y=c.slice(1),l;return!e&&typeof f=="number"?l=[]:Array.isArray(e)?l=mn(e):l=st({},e),o&&r===void 0&&y.length===1?delete l[f][y[0]]:l[f]=$O(l[f],y,r,o),l}function ls(e,t,r){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return t.length&&o&&r===void 0&&!fs(e,t.slice(0,-1))?e:$O(e,t,r,o)}function B5(e){return Zn(e)==="object"&&e!==null&&Object.getPrototypeOf(e)===Object.prototype}function II(e){return Array.isArray(e)?[]:{}}var N5=typeof Reflect>"u"?Object.keys:Reflect.ownKeys;function eh(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var o=II(t[0]);return t.forEach(function(c){function f(y,l){var w=new Set(l),E=fs(c,y),P=Array.isArray(E);if(P||B5(E)){if(!w.has(E)){w.add(E);var M=fs(o,y);P?o=ls(o,y,[]):(!M||Zn(M)!=="object")&&(o=ls(o,y,II(E))),N5(E).forEach(function(z){f([].concat(mn(y),[z]),w)})}}else o=ls(o,y,E)}f([])}),o}function j5(){}const U5=T.createContext({}),kS=()=>{const e=()=>{};return e.deprecated=j5,e},V5=T.createContext(void 0),FO={items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"Page",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages",page_size:"Page Size"};var H5={locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"OK",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",yearFormat:"YYYY",dateFormat:"M/D/YYYY",dayFormat:"D",dateTimeFormat:"M/D/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"};const G5={placeholder:"Select time",rangePlaceholder:["Start time","End time"]},BO=G5,W5={lang:Object.assign({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeQuarterPlaceholder:["Start quarter","End quarter"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},H5),timePickerLocale:Object.assign({},BO)},MI=W5,na="${label} is not a valid ${type}",q5={locale:"en",Pagination:FO,DatePicker:MI,TimePicker:BO,Calendar:MI,global:{placeholder:"Please select"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",filterCheckall:"Select all items",filterSearchPlaceholder:"Search in filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Tour:{Next:"Next",Previous:"Previous",Finish:"Finish"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand"},PageHeader:{back:"Back"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:na,method:na,array:na,object:na,number:na,date:na,boolean:na,integer:na,float:na,regexp:na,email:na,url:na,hex:na},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"},QRCode:{expired:"QR code expired",refresh:"Refresh"},ColorPicker:{presetEmpty:"Empty"}},wh=q5;Object.assign({},wh.Modal);let Gv=[];const PI=()=>Gv.reduce((e,t)=>Object.assign(Object.assign({},e),t),wh.Modal);function Z5(e){if(e){const t=Object.assign({},e);return Gv.push(t),PI(),()=>{Gv=Gv.filter(r=>r!==t),PI()}}Object.assign({},wh.Modal)}const X5=T.createContext(void 0),$S=X5,K5=(e,t)=>{const r=T.useContext($S),o=T.useMemo(()=>{var f;const y=t||wh[e],l=(f=r==null?void 0:r[e])!==null&&f!==void 0?f:{};return Object.assign(Object.assign({},typeof y=="function"?y():y),l||{})},[e,t,r]),c=T.useMemo(()=>{const f=r==null?void 0:r.locale;return r!=null&&r.exist&&!f?wh.locale:f},[r]);return[o,c]},FS=K5,Y5="internalMark",J5=e=>{const{locale:t={},children:r,_ANT_MARK__:o}=e;T.useEffect(()=>Z5(t&&t.Modal),[t]);const c=T.useMemo(()=>Object.assign(Object.assign({},t),{exist:!0}),[t]);return T.createElement($S.Provider,{value:c},r)},Q5=J5;function eo(e,t){eN(e)&&(e="100%");var r=tN(e);return e=t===360?e:Math.min(t,Math.max(0,parseFloat(e))),r&&(e=parseInt(String(e*t),10)/100),Math.abs(e-t)<1e-6?1:(t===360?e=(e<0?e%t+t:e%t)/parseFloat(String(t)):e=e%t/parseFloat(String(t)),e)}function vv(e){return Math.min(1,Math.max(0,e))}function eN(e){return typeof e=="string"&&e.indexOf(".")!==-1&&parseFloat(e)===1}function tN(e){return typeof e=="string"&&e.indexOf("%")!==-1}function NO(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function yv(e){return e<=1?"".concat(Number(e)*100,"%"):e}function du(e){return e.length===1?"0"+e:String(e)}function nN(e,t,r){return{r:eo(e,255)*255,g:eo(t,255)*255,b:eo(r,255)*255}}function AI(e,t,r){e=eo(e,255),t=eo(t,255),r=eo(r,255);var o=Math.max(e,t,r),c=Math.min(e,t,r),f=0,y=0,l=(o+c)/2;if(o===c)y=0,f=0;else{var w=o-c;switch(y=l>.5?w/(2-o-c):w/(o+c),o){case e:f=(t-r)/w+(t<r?6:0);break;case t:f=(r-e)/w+2;break;case r:f=(e-t)/w+4;break}f/=6}return{h:f,s:y,l}}function n1(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*(6*r):r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function rN(e,t,r){var o,c,f;if(e=eo(e,360),t=eo(t,100),r=eo(r,100),t===0)c=r,f=r,o=r;else{var y=r<.5?r*(1+t):r+t-r*t,l=2*r-y;o=n1(l,y,e+1/3),c=n1(l,y,e),f=n1(l,y,e-1/3)}return{r:o*255,g:c*255,b:f*255}}function Vb(e,t,r){e=eo(e,255),t=eo(t,255),r=eo(r,255);var o=Math.max(e,t,r),c=Math.min(e,t,r),f=0,y=o,l=o-c,w=o===0?0:l/o;if(o===c)f=0;else{switch(o){case e:f=(t-r)/l+(t<r?6:0);break;case t:f=(r-e)/l+2;break;case r:f=(e-t)/l+4;break}f/=6}return{h:f,s:w,v:y}}function iN(e,t,r){e=eo(e,360)*6,t=eo(t,100),r=eo(r,100);var o=Math.floor(e),c=e-o,f=r*(1-t),y=r*(1-c*t),l=r*(1-(1-c)*t),w=o%6,E=[r,y,f,f,l,r][w],P=[l,r,r,y,f,f][w],M=[f,f,l,r,r,y][w];return{r:E*255,g:P*255,b:M*255}}function Hb(e,t,r,o){var c=[du(Math.round(e).toString(16)),du(Math.round(t).toString(16)),du(Math.round(r).toString(16))];return o&&c[0].startsWith(c[0].charAt(1))&&c[1].startsWith(c[1].charAt(1))&&c[2].startsWith(c[2].charAt(1))?c[0].charAt(0)+c[1].charAt(0)+c[2].charAt(0):c.join("")}function oN(e,t,r,o,c){var f=[du(Math.round(e).toString(16)),du(Math.round(t).toString(16)),du(Math.round(r).toString(16)),du(aN(o))];return c&&f[0].startsWith(f[0].charAt(1))&&f[1].startsWith(f[1].charAt(1))&&f[2].startsWith(f[2].charAt(1))&&f[3].startsWith(f[3].charAt(1))?f[0].charAt(0)+f[1].charAt(0)+f[2].charAt(0)+f[3].charAt(0):f.join("")}function aN(e){return Math.round(parseFloat(e)*255).toString(16)}function RI(e){return oa(e)/255}function oa(e){return parseInt(e,16)}function sN(e){return{r:e>>16,g:(e&65280)>>8,b:e&255}}var Gb={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function Nd(e){var t={r:0,g:0,b:0},r=1,o=null,c=null,f=null,y=!1,l=!1;return typeof e=="string"&&(e=uN(e)),typeof e=="object"&&(il(e.r)&&il(e.g)&&il(e.b)?(t=nN(e.r,e.g,e.b),y=!0,l=String(e.r).substr(-1)==="%"?"prgb":"rgb"):il(e.h)&&il(e.s)&&il(e.v)?(o=yv(e.s),c=yv(e.v),t=iN(e.h,o,c),y=!0,l="hsv"):il(e.h)&&il(e.s)&&il(e.l)&&(o=yv(e.s),f=yv(e.l),t=rN(e.h,o,f),y=!0,l="hsl"),Object.prototype.hasOwnProperty.call(e,"a")&&(r=e.a)),r=NO(r),{ok:y,format:e.format||l,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:r}}var lN="[-\\+]?\\d+%?",cN="[-\\+]?\\d*\\.\\d+%?",lc="(?:".concat(cN,")|(?:").concat(lN,")"),r1="[\\s|\\(]+(".concat(lc,")[,|\\s]+(").concat(lc,")[,|\\s]+(").concat(lc,")\\s*\\)?"),i1="[\\s|\\(]+(".concat(lc,")[,|\\s]+(").concat(lc,")[,|\\s]+(").concat(lc,")[,|\\s]+(").concat(lc,")\\s*\\)?"),os={CSS_UNIT:new RegExp(lc),rgb:new RegExp("rgb"+r1),rgba:new RegExp("rgba"+i1),hsl:new RegExp("hsl"+r1),hsla:new RegExp("hsla"+i1),hsv:new RegExp("hsv"+r1),hsva:new RegExp("hsva"+i1),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function uN(e){if(e=e.trim().toLowerCase(),e.length===0)return!1;var t=!1;if(Gb[e])e=Gb[e],t=!0;else if(e==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var r=os.rgb.exec(e);return r?{r:r[1],g:r[2],b:r[3]}:(r=os.rgba.exec(e),r?{r:r[1],g:r[2],b:r[3],a:r[4]}:(r=os.hsl.exec(e),r?{h:r[1],s:r[2],l:r[3]}:(r=os.hsla.exec(e),r?{h:r[1],s:r[2],l:r[3],a:r[4]}:(r=os.hsv.exec(e),r?{h:r[1],s:r[2],v:r[3]}:(r=os.hsva.exec(e),r?{h:r[1],s:r[2],v:r[3],a:r[4]}:(r=os.hex8.exec(e),r?{r:oa(r[1]),g:oa(r[2]),b:oa(r[3]),a:RI(r[4]),format:t?"name":"hex8"}:(r=os.hex6.exec(e),r?{r:oa(r[1]),g:oa(r[2]),b:oa(r[3]),format:t?"name":"hex"}:(r=os.hex4.exec(e),r?{r:oa(r[1]+r[1]),g:oa(r[2]+r[2]),b:oa(r[3]+r[3]),a:RI(r[4]+r[4]),format:t?"name":"hex8"}:(r=os.hex3.exec(e),r?{r:oa(r[1]+r[1]),g:oa(r[2]+r[2]),b:oa(r[3]+r[3]),format:t?"name":"hex"}:!1)))))))))}function il(e){return!!os.CSS_UNIT.exec(String(e))}var Ji=function(){function e(t,r){t===void 0&&(t=""),r===void 0&&(r={});var o;if(t instanceof e)return t;typeof t=="number"&&(t=sN(t)),this.originalInput=t;var c=Nd(t);this.originalInput=t,this.r=c.r,this.g=c.g,this.b=c.b,this.a=c.a,this.roundA=Math.round(100*this.a)/100,this.format=(o=r.format)!==null&&o!==void 0?o:c.format,this.gradientType=r.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=c.ok}return e.prototype.isDark=function(){return this.getBrightness()<128},e.prototype.isLight=function(){return!this.isDark()},e.prototype.getBrightness=function(){var t=this.toRgb();return(t.r*299+t.g*587+t.b*114)/1e3},e.prototype.getLuminance=function(){var t=this.toRgb(),r,o,c,f=t.r/255,y=t.g/255,l=t.b/255;return f<=.03928?r=f/12.92:r=Math.pow((f+.055)/1.055,2.4),y<=.03928?o=y/12.92:o=Math.pow((y+.055)/1.055,2.4),l<=.03928?c=l/12.92:c=Math.pow((l+.055)/1.055,2.4),.2126*r+.7152*o+.0722*c},e.prototype.getAlpha=function(){return this.a},e.prototype.setAlpha=function(t){return this.a=NO(t),this.roundA=Math.round(100*this.a)/100,this},e.prototype.isMonochrome=function(){var t=this.toHsl().s;return t===0},e.prototype.toHsv=function(){var t=Vb(this.r,this.g,this.b);return{h:t.h*360,s:t.s,v:t.v,a:this.a}},e.prototype.toHsvString=function(){var t=Vb(this.r,this.g,this.b),r=Math.round(t.h*360),o=Math.round(t.s*100),c=Math.round(t.v*100);return this.a===1?"hsv(".concat(r,", ").concat(o,"%, ").concat(c,"%)"):"hsva(".concat(r,", ").concat(o,"%, ").concat(c,"%, ").concat(this.roundA,")")},e.prototype.toHsl=function(){var t=AI(this.r,this.g,this.b);return{h:t.h*360,s:t.s,l:t.l,a:this.a}},e.prototype.toHslString=function(){var t=AI(this.r,this.g,this.b),r=Math.round(t.h*360),o=Math.round(t.s*100),c=Math.round(t.l*100);return this.a===1?"hsl(".concat(r,", ").concat(o,"%, ").concat(c,"%)"):"hsla(".concat(r,", ").concat(o,"%, ").concat(c,"%, ").concat(this.roundA,")")},e.prototype.toHex=function(t){return t===void 0&&(t=!1),Hb(this.r,this.g,this.b,t)},e.prototype.toHexString=function(t){return t===void 0&&(t=!1),"#"+this.toHex(t)},e.prototype.toHex8=function(t){return t===void 0&&(t=!1),oN(this.r,this.g,this.b,this.a,t)},e.prototype.toHex8String=function(t){return t===void 0&&(t=!1),"#"+this.toHex8(t)},e.prototype.toHexShortString=function(t){return t===void 0&&(t=!1),this.a===1?this.toHexString(t):this.toHex8String(t)},e.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},e.prototype.toRgbString=function(){var t=Math.round(this.r),r=Math.round(this.g),o=Math.round(this.b);return this.a===1?"rgb(".concat(t,", ").concat(r,", ").concat(o,")"):"rgba(".concat(t,", ").concat(r,", ").concat(o,", ").concat(this.roundA,")")},e.prototype.toPercentageRgb=function(){var t=function(r){return"".concat(Math.round(eo(r,255)*100),"%")};return{r:t(this.r),g:t(this.g),b:t(this.b),a:this.a}},e.prototype.toPercentageRgbString=function(){var t=function(r){return Math.round(eo(r,255)*100)};return this.a===1?"rgb(".concat(t(this.r),"%, ").concat(t(this.g),"%, ").concat(t(this.b),"%)"):"rgba(".concat(t(this.r),"%, ").concat(t(this.g),"%, ").concat(t(this.b),"%, ").concat(this.roundA,")")},e.prototype.toName=function(){if(this.a===0)return"transparent";if(this.a<1)return!1;for(var t="#"+Hb(this.r,this.g,this.b,!1),r=0,o=Object.entries(Gb);r<o.length;r++){var c=o[r],f=c[0],y=c[1];if(t===y)return f}return!1},e.prototype.toString=function(t){var r=!!t;t=t??this.format;var o=!1,c=this.a<1&&this.a>=0,f=!r&&c&&(t.startsWith("hex")||t==="name");return f?t==="name"&&this.a===0?this.toName():this.toRgbString():(t==="rgb"&&(o=this.toRgbString()),t==="prgb"&&(o=this.toPercentageRgbString()),(t==="hex"||t==="hex6")&&(o=this.toHexString()),t==="hex3"&&(o=this.toHexString(!0)),t==="hex4"&&(o=this.toHex8String(!0)),t==="hex8"&&(o=this.toHex8String()),t==="name"&&(o=this.toName()),t==="hsl"&&(o=this.toHslString()),t==="hsv"&&(o=this.toHsvString()),o||this.toHexString())},e.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},e.prototype.clone=function(){return new e(this.toString())},e.prototype.lighten=function(t){t===void 0&&(t=10);var r=this.toHsl();return r.l+=t/100,r.l=vv(r.l),new e(r)},e.prototype.brighten=function(t){t===void 0&&(t=10);var r=this.toRgb();return r.r=Math.max(0,Math.min(255,r.r-Math.round(255*-(t/100)))),r.g=Math.max(0,Math.min(255,r.g-Math.round(255*-(t/100)))),r.b=Math.max(0,Math.min(255,r.b-Math.round(255*-(t/100)))),new e(r)},e.prototype.darken=function(t){t===void 0&&(t=10);var r=this.toHsl();return r.l-=t/100,r.l=vv(r.l),new e(r)},e.prototype.tint=function(t){return t===void 0&&(t=10),this.mix("white",t)},e.prototype.shade=function(t){return t===void 0&&(t=10),this.mix("black",t)},e.prototype.desaturate=function(t){t===void 0&&(t=10);var r=this.toHsl();return r.s-=t/100,r.s=vv(r.s),new e(r)},e.prototype.saturate=function(t){t===void 0&&(t=10);var r=this.toHsl();return r.s+=t/100,r.s=vv(r.s),new e(r)},e.prototype.greyscale=function(){return this.desaturate(100)},e.prototype.spin=function(t){var r=this.toHsl(),o=(r.h+t)%360;return r.h=o<0?360+o:o,new e(r)},e.prototype.mix=function(t,r){r===void 0&&(r=50);var o=this.toRgb(),c=new e(t).toRgb(),f=r/100,y={r:(c.r-o.r)*f+o.r,g:(c.g-o.g)*f+o.g,b:(c.b-o.b)*f+o.b,a:(c.a-o.a)*f+o.a};return new e(y)},e.prototype.analogous=function(t,r){t===void 0&&(t=6),r===void 0&&(r=30);var o=this.toHsl(),c=360/r,f=[this];for(o.h=(o.h-(c*t>>1)+720)%360;--t;)o.h=(o.h+c)%360,f.push(new e(o));return f},e.prototype.complement=function(){var t=this.toHsl();return t.h=(t.h+180)%360,new e(t)},e.prototype.monochromatic=function(t){t===void 0&&(t=6);for(var r=this.toHsv(),o=r.h,c=r.s,f=r.v,y=[],l=1/t;t--;)y.push(new e({h:o,s:c,v:f})),f=(f+l)%1;return y},e.prototype.splitcomplement=function(){var t=this.toHsl(),r=t.h;return[this,new e({h:(r+72)%360,s:t.s,l:t.l}),new e({h:(r+216)%360,s:t.s,l:t.l})]},e.prototype.onBackground=function(t){var r=this.toRgb(),o=new e(t).toRgb(),c=r.a+o.a*(1-r.a);return new e({r:(r.r*r.a+o.r*o.a*(1-r.a))/c,g:(r.g*r.a+o.g*o.a*(1-r.a))/c,b:(r.b*r.a+o.b*o.a*(1-r.a))/c,a:c})},e.prototype.triad=function(){return this.polyad(3)},e.prototype.tetrad=function(){return this.polyad(4)},e.prototype.polyad=function(t){for(var r=this.toHsl(),o=r.h,c=[this],f=360/t,y=1;y<t;y++)c.push(new e({h:(o+y*f)%360,s:r.s,l:r.l}));return c},e.prototype.equals=function(t){return this.toRgbString()===new e(t).toRgbString()},e}(),_v=2,OI=.16,dN=.05,hN=.05,fN=.15,jO=5,UO=4,pN=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function zI(e){var t=e.r,r=e.g,o=e.b,c=Vb(t,r,o);return{h:c.h*360,s:c.s,v:c.v}}function xv(e){var t=e.r,r=e.g,o=e.b;return"#".concat(Hb(t,r,o,!1))}function mN(e,t,r){var o=r/100,c={r:(t.r-e.r)*o+e.r,g:(t.g-e.g)*o+e.g,b:(t.b-e.b)*o+e.b};return c}function LI(e,t,r){var o;return Math.round(e.h)>=60&&Math.round(e.h)<=240?o=r?Math.round(e.h)-_v*t:Math.round(e.h)+_v*t:o=r?Math.round(e.h)+_v*t:Math.round(e.h)-_v*t,o<0?o+=360:o>=360&&(o-=360),o}function DI(e,t,r){if(e.h===0&&e.s===0)return e.s;var o;return r?o=e.s-OI*t:t===UO?o=e.s+OI:o=e.s+dN*t,o>1&&(o=1),r&&t===jO&&o>.1&&(o=.1),o<.06&&(o=.06),Number(o.toFixed(2))}function kI(e,t,r){var o;return r?o=e.v+hN*t:o=e.v-fN*t,o>1&&(o=1),Number(o.toFixed(2))}function Cu(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=[],o=Nd(e),c=jO;c>0;c-=1){var f=zI(o),y=xv(Nd({h:LI(f,c,!0),s:DI(f,c,!0),v:kI(f,c,!0)}));r.push(y)}r.push(xv(o));for(var l=1;l<=UO;l+=1){var w=zI(o),E=xv(Nd({h:LI(w,l),s:DI(w,l),v:kI(w,l)}));r.push(E)}return t.theme==="dark"?pN.map(function(P){var M=P.index,z=P.opacity,F=xv(mN(Nd(t.backgroundColor||"#141414"),Nd(r[M]),z*100));return F}):r}var o1={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1677FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},Dp={},a1={};Object.keys(o1).forEach(function(e){Dp[e]=Cu(o1[e]),Dp[e].primary=Dp[e][5],a1[e]=Cu(o1[e],{theme:"dark",backgroundColor:"#141414"}),a1[e].primary=a1[e][5]});var gN=Dp.gold,vN=Dp.blue;const yN=e=>{const{controlHeight:t}=e;return{controlHeightSM:t*.75,controlHeightXS:t*.5,controlHeightLG:t*1.25}},_N=yN;function xN(e){const{sizeUnit:t,sizeStep:r}=e;return{sizeXXL:t*(r+8),sizeXL:t*(r+4),sizeLG:t*(r+2),sizeMD:t*(r+1),sizeMS:t*r,size:t*r,sizeSM:t*(r-1),sizeXS:t*(r-2),sizeXXS:t*(r-3)}}const VO={blue:"#1677ff",purple:"#722ED1",cyan:"#13C2C2",green:"#52C41A",magenta:"#EB2F96",pink:"#eb2f96",red:"#F5222D",orange:"#FA8C16",yellow:"#FADB14",volcano:"#FA541C",geekblue:"#2F54EB",gold:"#FAAD14",lime:"#A0D911"},bN=Object.assign(Object.assign({},VO),{colorPrimary:"#1677ff",colorSuccess:"#52c41a",colorWarning:"#faad14",colorError:"#ff4d4f",colorInfo:"#1677ff",colorLink:"",colorTextBase:"",colorBgBase:"",fontFamily:`-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial,
'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',
'Noto Color Emoji'`,fontFamilyCode:"'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace",fontSize:14,lineWidth:1,lineType:"solid",motionUnit:.1,motionBase:0,motionEaseOutCirc:"cubic-bezier(0.08, 0.82, 0.17, 1)",motionEaseInOutCirc:"cubic-bezier(0.78, 0.14, 0.15, 0.86)",motionEaseOut:"cubic-bezier(0.215, 0.61, 0.355, 1)",motionEaseInOut:"cubic-bezier(0.645, 0.045, 0.355, 1)",motionEaseOutBack:"cubic-bezier(0.12, 0.4, 0.29, 1.46)",motionEaseInBack:"cubic-bezier(0.71, -0.46, 0.88, 0.6)",motionEaseInQuint:"cubic-bezier(0.755, 0.05, 0.855, 0.06)",motionEaseOutQuint:"cubic-bezier(0.23, 1, 0.32, 1)",borderRadius:6,sizeUnit:4,sizeStep:4,sizePopupArrow:16,controlHeight:32,zIndexBase:0,zIndexPopupBase:1e3,opacityImage:1,wireframe:!1,motion:!0}),am=bN;function wN(e,t){let{generateColorPalettes:r,generateNeutralColorPalettes:o}=t;const{colorSuccess:c,colorWarning:f,colorError:y,colorInfo:l,colorPrimary:w,colorBgBase:E,colorTextBase:P}=e,M=r(w),z=r(c),F=r(f),k=r(y),U=r(l),X=o(E,P),$=e.colorLink||e.colorInfo,j=r($);return Object.assign(Object.assign({},X),{colorPrimaryBg:M[1],colorPrimaryBgHover:M[2],colorPrimaryBorder:M[3],colorPrimaryBorderHover:M[4],colorPrimaryHover:M[5],colorPrimary:M[6],colorPrimaryActive:M[7],colorPrimaryTextHover:M[8],colorPrimaryText:M[9],colorPrimaryTextActive:M[10],colorSuccessBg:z[1],colorSuccessBgHover:z[2],colorSuccessBorder:z[3],colorSuccessBorderHover:z[4],colorSuccessHover:z[4],colorSuccess:z[6],colorSuccessActive:z[7],colorSuccessTextHover:z[8],colorSuccessText:z[9],colorSuccessTextActive:z[10],colorErrorBg:k[1],colorErrorBgHover:k[2],colorErrorBorder:k[3],colorErrorBorderHover:k[4],colorErrorHover:k[5],colorError:k[6],colorErrorActive:k[7],colorErrorTextHover:k[8],colorErrorText:k[9],colorErrorTextActive:k[10],colorWarningBg:F[1],colorWarningBgHover:F[2],colorWarningBorder:F[3],colorWarningBorderHover:F[4],colorWarningHover:F[4],colorWarning:F[6],colorWarningActive:F[7],colorWarningTextHover:F[8],colorWarningText:F[9],colorWarningTextActive:F[10],colorInfoBg:U[1],colorInfoBgHover:U[2],colorInfoBorder:U[3],colorInfoBorderHover:U[4],colorInfoHover:U[4],colorInfo:U[6],colorInfoActive:U[7],colorInfoTextHover:U[8],colorInfoText:U[9],colorInfoTextActive:U[10],colorLinkHover:j[4],colorLink:j[6],colorLinkActive:j[7],colorBgMask:new Ji("#000").setAlpha(.45).toRgbString(),colorWhite:"#fff"})}const SN=e=>{let t=e,r=e,o=e,c=e;return e<6&&e>=5?t=e+1:e<16&&e>=6?t=e+2:e>=16&&(t=16),e<7&&e>=5?r=4:e<8&&e>=7?r=5:e<14&&e>=8?r=6:e<16&&e>=14?r=7:e>=16&&(r=8),e<6&&e>=2?o=1:e>=6&&(o=2),e>4&&e<8?c=4:e>=8&&(c=6),{borderRadius:e,borderRadiusXS:o,borderRadiusSM:r,borderRadiusLG:t,borderRadiusOuter:c}},EN=SN;function CN(e){const{motionUnit:t,motionBase:r,borderRadius:o,lineWidth:c}=e;return Object.assign({motionDurationFast:`${(r+t).toFixed(1)}s`,motionDurationMid:`${(r+t*2).toFixed(1)}s`,motionDurationSlow:`${(r+t*3).toFixed(1)}s`,lineWidthBold:c+1},EN(o))}const ol=(e,t)=>new Ji(e).setAlpha(t).toRgbString(),dp=(e,t)=>new Ji(e).darken(t).toHexString(),TN=e=>{const t=Cu(e);return{1:t[0],2:t[1],3:t[2],4:t[3],5:t[4],6:t[5],7:t[6],8:t[4],9:t[5],10:t[6]}},IN=(e,t)=>{const r=e||"#fff",o=t||"#000";return{colorBgBase:r,colorTextBase:o,colorText:ol(o,.88),colorTextSecondary:ol(o,.65),colorTextTertiary:ol(o,.45),colorTextQuaternary:ol(o,.25),colorFill:ol(o,.15),colorFillSecondary:ol(o,.06),colorFillTertiary:ol(o,.04),colorFillQuaternary:ol(o,.02),colorBgLayout:dp(r,4),colorBgContainer:dp(r,0),colorBgElevated:dp(r,0),colorBgSpotlight:ol(o,.85),colorBgBlur:"transparent",colorBorder:dp(r,15),colorBorderSecondary:dp(r,6)}};function MN(e){const t=new Array(10).fill(null).map((r,o)=>{const c=o-1,f=e*Math.pow(2.71828,c/5),y=o>1?Math.floor(f):Math.ceil(f);return Math.floor(y/2)*2});return t[1]=e,t.map(r=>{const o=r+8;return{size:r,lineHeight:o/r}})}const PN=e=>{const t=MN(e),r=t.map(c=>c.size),o=t.map(c=>c.lineHeight);return{fontSizeSM:r[0],fontSize:r[1],fontSizeLG:r[2],fontSizeXL:r[3],fontSizeHeading1:r[6],fontSizeHeading2:r[5],fontSizeHeading3:r[4],fontSizeHeading4:r[3],fontSizeHeading5:r[2],lineHeight:o[1],lineHeightLG:o[2],lineHeightSM:o[0],lineHeightHeading1:o[6],lineHeightHeading2:o[5],lineHeightHeading3:o[4],lineHeightHeading4:o[3],lineHeightHeading5:o[2]}},AN=PN;function RN(e){const t=Object.keys(VO).map(r=>{const o=Cu(e[r]);return new Array(10).fill(1).reduce((c,f,y)=>(c[`${r}-${y+1}`]=o[y],c[`${r}${y+1}`]=o[y],c),{})}).reduce((r,o)=>(r=Object.assign(Object.assign({},r),o),r),{});return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},e),t),wN(e,{generateColorPalettes:TN,generateNeutralColorPalettes:IN})),AN(e.fontSize)),xN(e)),_N(e)),CN(e))}const HO=Fb(RN),GO={token:am,override:{override:am},hashed:!0},WO=lt.createContext(GO),BS="anticon",ON=(e,t)=>t||(e?`ant-${e}`:"ant"),ur=T.createContext({getPrefixCls:ON,iconPrefixCls:BS}),zN=`-ant-${Date.now()}-${Math.random()}`;function LN(e,t){const r={},o=(y,l)=>{let w=y.clone();return w=(l==null?void 0:l(w))||w,w.toRgbString()},c=(y,l)=>{const w=new Ji(y),E=Cu(w.toRgbString());r[`${l}-color`]=o(w),r[`${l}-color-disabled`]=E[1],r[`${l}-color-hover`]=E[4],r[`${l}-color-active`]=E[6],r[`${l}-color-outline`]=w.clone().setAlpha(.2).toRgbString(),r[`${l}-color-deprecated-bg`]=E[0],r[`${l}-color-deprecated-border`]=E[2]};if(t.primaryColor){c(t.primaryColor,"primary");const y=new Ji(t.primaryColor),l=Cu(y.toRgbString());l.forEach((E,P)=>{r[`primary-${P+1}`]=E}),r["primary-color-deprecated-l-35"]=o(y,E=>E.lighten(35)),r["primary-color-deprecated-l-20"]=o(y,E=>E.lighten(20)),r["primary-color-deprecated-t-20"]=o(y,E=>E.tint(20)),r["primary-color-deprecated-t-50"]=o(y,E=>E.tint(50)),r["primary-color-deprecated-f-12"]=o(y,E=>E.setAlpha(E.getAlpha()*.12));const w=new Ji(l[0]);r["primary-color-active-deprecated-f-30"]=o(w,E=>E.setAlpha(E.getAlpha()*.3)),r["primary-color-active-deprecated-d-02"]=o(w,E=>E.darken(2))}return t.successColor&&c(t.successColor,"success"),t.warningColor&&c(t.warningColor,"warning"),t.errorColor&&c(t.errorColor,"error"),t.infoColor&&c(t.infoColor,"info"),`
  :root {
    ${Object.keys(r).map(y=>`--${e}-${y}: ${r[y]};`).join(`
`)}
  }
  `.trim()}function DN(e,t){const r=LN(e,t);no()&&xh(r,`${zN}-dynamic-theme`)}const Wb=T.createContext(!1),kN=e=>{let{children:t,disabled:r}=e;const o=T.useContext(Wb);return T.createElement(Wb.Provider,{value:r??o},t)},bm=Wb,qb=T.createContext(void 0),$N=e=>{let{children:t,size:r}=e;const o=T.useContext(qb);return T.createElement(qb.Provider,{value:r||o},t)},E0=qb;function FN(){const e=T.useContext(bm),t=T.useContext(E0);return{componentDisabled:e,componentSize:t}}const Ry=["blue","purple","cyan","green","magenta","pink","red","orange","yellow","volcano","geekblue","lime","gold"],BN="5.11.1";function s1(e){return e>=0&&e<=255}function bv(e,t){const{r,g:o,b:c,a:f}=new Ji(e).toRgb();if(f<1)return e;const{r:y,g:l,b:w}=new Ji(t).toRgb();for(let E=.01;E<=1;E+=.01){const P=Math.round((r-y*(1-E))/E),M=Math.round((o-l*(1-E))/E),z=Math.round((c-w*(1-E))/E);if(s1(P)&&s1(M)&&s1(z))return new Ji({r:P,g:M,b:z,a:Math.round(E*100)/100}).toRgbString()}return new Ji({r,g:o,b:c,a:1}).toRgbString()}var NN=globalThis&&globalThis.__rest||function(e,t){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(e);c<o.length;c++)t.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(e,o[c])&&(r[o[c]]=e[o[c]]);return r};function qO(e){const{override:t}=e,r=NN(e,["override"]),o=Object.assign({},t);Object.keys(am).forEach(z=>{delete o[z]});const c=Object.assign(Object.assign({},r),o),f=480,y=576,l=768,w=992,E=1200,P=1600;if(c.motion===!1){const z="0s";c.motionDurationFast=z,c.motionDurationMid=z,c.motionDurationSlow=z}return Object.assign(Object.assign(Object.assign({},c),{colorFillContent:c.colorFillSecondary,colorFillContentHover:c.colorFill,colorFillAlter:c.colorFillQuaternary,colorBgContainerDisabled:c.colorFillTertiary,colorBorderBg:c.colorBgContainer,colorSplit:bv(c.colorBorderSecondary,c.colorBgContainer),colorTextPlaceholder:c.colorTextQuaternary,colorTextDisabled:c.colorTextQuaternary,colorTextHeading:c.colorText,colorTextLabel:c.colorTextSecondary,colorTextDescription:c.colorTextTertiary,colorTextLightSolid:c.colorWhite,colorHighlight:c.colorError,colorBgTextHover:c.colorFillSecondary,colorBgTextActive:c.colorFill,colorIcon:c.colorTextTertiary,colorIconHover:c.colorText,colorErrorOutline:bv(c.colorErrorBg,c.colorBgContainer),colorWarningOutline:bv(c.colorWarningBg,c.colorBgContainer),fontSizeIcon:c.fontSizeSM,lineWidthFocus:c.lineWidth*4,lineWidth:c.lineWidth,controlOutlineWidth:c.lineWidth*2,controlInteractiveSize:c.controlHeight/2,controlItemBgHover:c.colorFillTertiary,controlItemBgActive:c.colorPrimaryBg,controlItemBgActiveHover:c.colorPrimaryBgHover,controlItemBgActiveDisabled:c.colorFill,controlTmpOutline:c.colorFillQuaternary,controlOutline:bv(c.colorPrimaryBg,c.colorBgContainer),lineType:c.lineType,borderRadius:c.borderRadius,borderRadiusXS:c.borderRadiusXS,borderRadiusSM:c.borderRadiusSM,borderRadiusLG:c.borderRadiusLG,fontWeightStrong:600,opacityLoading:.65,linkDecoration:"none",linkHoverDecoration:"none",linkFocusDecoration:"none",controlPaddingHorizontal:12,controlPaddingHorizontalSM:8,paddingXXS:c.sizeXXS,paddingXS:c.sizeXS,paddingSM:c.sizeSM,padding:c.size,paddingMD:c.sizeMD,paddingLG:c.sizeLG,paddingXL:c.sizeXL,paddingContentHorizontalLG:c.sizeLG,paddingContentVerticalLG:c.sizeMS,paddingContentHorizontal:c.sizeMS,paddingContentVertical:c.sizeSM,paddingContentHorizontalSM:c.size,paddingContentVerticalSM:c.sizeXS,marginXXS:c.sizeXXS,marginXS:c.sizeXS,marginSM:c.sizeSM,margin:c.size,marginMD:c.sizeMD,marginLG:c.sizeLG,marginXL:c.sizeXL,marginXXL:c.sizeXXL,boxShadow:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowSecondary:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTertiary:`
      0 1px 2px 0 rgba(0, 0, 0, 0.03),
      0 1px 6px -1px rgba(0, 0, 0, 0.02),
      0 2px 4px 0 rgba(0, 0, 0, 0.02)
    `,screenXS:f,screenXSMin:f,screenXSMax:y-1,screenSM:y,screenSMMin:y,screenSMMax:l-1,screenMD:l,screenMDMin:l,screenMDMax:w-1,screenLG:w,screenLGMin:w,screenLGMax:E-1,screenXL:E,screenXLMin:E,screenXLMax:P-1,screenXXL:P,screenXXLMin:P,boxShadowPopoverArrow:"2px 2px 5px rgba(0, 0, 0, 0.05)",boxShadowCard:`
      0 1px 2px -2px ${new Ji("rgba(0, 0, 0, 0.16)").toRgbString()},
      0 3px 6px 0 ${new Ji("rgba(0, 0, 0, 0.12)").toRgbString()},
      0 5px 12px 4px ${new Ji("rgba(0, 0, 0, 0.09)").toRgbString()}
    `,boxShadowDrawerRight:`
      -6px 0 16px 0 rgba(0, 0, 0, 0.08),
      -3px 0 6px -4px rgba(0, 0, 0, 0.12),
      -9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerLeft:`
      6px 0 16px 0 rgba(0, 0, 0, 0.08),
      3px 0 6px -4px rgba(0, 0, 0, 0.12),
      9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerUp:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerDown:`
      0 -6px 16px 0 rgba(0, 0, 0, 0.08),
      0 -3px 6px -4px rgba(0, 0, 0, 0.12),
      0 -9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTabsOverflowLeft:"inset 10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowRight:"inset -10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowTop:"inset 0 10px 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowBottom:"inset 0 -10px 8px -8px rgba(0, 0, 0, 0.08)"}),o)}var $I=globalThis&&globalThis.__rest||function(e,t){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(e);c<o.length;c++)t.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(e,o[c])&&(r[o[c]]=e[o[c]]);return r};const ZO=(e,t,r)=>{const o=r.getDerivativeToken(e),{override:c}=t,f=$I(t,["override"]);let y=Object.assign(Object.assign({},o),{override:c});return y=qO(y),f&&Object.entries(f).forEach(l=>{let[w,E]=l;const{theme:P}=E,M=$I(E,["theme"]);let z=M;P&&(z=ZO(Object.assign(Object.assign({},y),M),{override:M},P)),y[w]=z}),y};function Na(){const{token:e,hashed:t,theme:r,override:o}=lt.useContext(WO),c=`${BN}-${t||""}`,f=r||HO,[y,l]=u5(f,[am,e],{salt:c,override:o,getComputedToken:ZO,formatToken:qO});return[f,y,t?l:""]}function jo(e){var t=T.useRef();t.current=e;var r=T.useCallback(function(){for(var o,c=arguments.length,f=new Array(c),y=0;y<c;y++)f[y]=arguments[y];return(o=t.current)===null||o===void 0?void 0:o.call.apply(o,[t].concat(f))},[]);return r}function ch(e){var t=T.useRef(!1),r=T.useState(e),o=Bt(r,2),c=o[0],f=o[1];T.useEffect(function(){return t.current=!1,function(){t.current=!0}},[]);function y(l,w){w&&t.current||f(l)}return[c,y]}function l1(e){return e!==void 0}function Bs(e,t){var r=t||{},o=r.defaultValue,c=r.value,f=r.onChange,y=r.postState,l=ch(function(){return l1(c)?c:l1(o)?typeof o=="function"?o():o:typeof e=="function"?e():e}),w=Bt(l,2),E=w[0],P=w[1],M=c!==void 0?c:E,z=y?y(M):M,F=jo(f),k=ch([M]),U=Bt(k,2),X=U[0],$=U[1];xI(function(){var V=X[0];E!==V&&F(E,V)},[X]),xI(function(){l1(c)||P(c)},[c]);var j=jo(function(V,Z){P(V,Z),$([M],Z)});return[z,j]}const XO=e=>({color:e.colorLink,textDecoration:"none",outline:"none",cursor:"pointer",transition:`color ${e.motionDurationSlow}`,"&:focus, &:hover":{color:e.colorLinkHover},"&:active":{color:e.colorLinkActive}}),jN=(e,t,r,o,c)=>{const f=e/2,y=0,l=f,w=r*1/Math.sqrt(2),E=f-r*(1-1/Math.sqrt(2)),P=f-t*(1/Math.sqrt(2)),M=r*(Math.sqrt(2)-1)+t*(1/Math.sqrt(2)),z=2*f-P,F=M,k=2*f-w,U=E,X=2*f-y,$=l,j=f*Math.sqrt(2)+r*(Math.sqrt(2)-2),V=r*(Math.sqrt(2)-1);return{pointerEvents:"none",width:e,height:e,overflow:"hidden","&::before":{position:"absolute",bottom:0,insetInlineStart:0,width:e,height:e/2,background:o,clipPath:{_multi_value_:!0,value:[`polygon(${V}px 100%, 50% ${V}px, ${2*f-V}px 100%, ${V}px 100%)`,`path('M ${y} ${l} A ${r} ${r} 0 0 0 ${w} ${E} L ${P} ${M} A ${t} ${t} 0 0 1 ${z} ${F} L ${k} ${U} A ${r} ${r} 0 0 0 ${X} ${$} Z')`]},content:'""'},"&::after":{content:'""',position:"absolute",width:j,height:j,bottom:0,insetInline:0,margin:"auto",borderRadius:{_skip_check_:!0,value:`0 0 ${t}px 0`},transform:"translateY(50%) rotate(-135deg)",boxShadow:c,zIndex:0,background:"transparent"}}},Oy={overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},ja=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return{boxSizing:"border-box",margin:0,padding:0,color:e.colorText,fontSize:e.fontSize,lineHeight:e.lineHeight,listStyle:"none",fontFamily:t?"inherit":e.fontFamily}},NS=()=>({display:"inline-flex",alignItems:"center",color:"inherit",fontStyle:"normal",lineHeight:0,textAlign:"center",textTransform:"none",verticalAlign:"-0.125em",textRendering:"optimizeLegibility","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale","> *":{lineHeight:1},svg:{display:"inline-block"}}),UN=()=>({"&::before":{display:"table",content:'""'},"&::after":{display:"table",clear:"both",content:'""'}}),VN=e=>({a:{color:e.colorLink,textDecoration:e.linkDecoration,backgroundColor:"transparent",outline:"none",cursor:"pointer",transition:`color ${e.motionDurationSlow}`,"-webkit-text-decoration-skip":"objects","&:hover":{color:e.colorLinkHover},"&:active":{color:e.colorLinkActive},"&:active,\n  &:hover":{textDecoration:e.linkHoverDecoration,outline:0},"&:focus":{textDecoration:e.linkFocusDecoration,outline:0},"&[disabled]":{color:e.colorTextDisabled,cursor:"not-allowed"}}}),HN=(e,t)=>{const{fontFamily:r,fontSize:o}=e,c=`[class^="${t}"], [class*=" ${t}"]`;return{[c]:{fontFamily:r,fontSize:o,boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"},[c]:{boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"}}}}},Zb=e=>({outline:`${e.lineWidthFocus}px solid ${e.colorPrimaryBorder}`,outlineOffset:1,transition:"outline-offset 0s, outline 0s"}),KO=e=>({"&:focus-visible":Object.assign({},Zb(e))}),YO=typeof CSSINJS_STATISTIC<"u";let Xb=!0;function Lr(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(!YO)return Object.assign.apply(Object,[{}].concat(t));Xb=!1;const o={};return t.forEach(c=>{Object.keys(c).forEach(y=>{Object.defineProperty(o,y,{configurable:!0,enumerable:!0,get:()=>c[y]})})}),Xb=!0,o}const FI={};function GN(){}function WN(e){let t,r=e,o=GN;return YO&&typeof Proxy<"u"&&(t=new Set,r=new Proxy(e,{get(c,f){return Xb&&t.add(f),c[f]}}),o=(c,f)=>{var y;FI[c]={global:Array.from(t),component:Object.assign(Object.assign({},(y=FI[c])===null||y===void 0?void 0:y.component),f)}}),{token:r,keys:t,flush:o}}const qN=(e,t)=>{const[r,o]=Na();return Ub({theme:r,token:o,hashId:"",path:["ant-design-icons",e],nonce:()=>t==null?void 0:t.nonce},()=>[{[`.${e}`]:Object.assign(Object.assign({},NS()),{[`.${e} .${e}-icon`]:{display:"block"}})}])},JO=qN;function ro(e,t,r){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const c=Array.isArray(e)?e:[e,e],[f]=c,y=c.join("-");return l=>{const[w,E,P]=Na(),{getPrefixCls:M,iconPrefixCls:z,csp:F}=T.useContext(ur),k=M(),U={theme:w,token:E,hashId:P,nonce:()=>F==null?void 0:F.nonce,clientOnly:o.clientOnly,order:o.order||-999};return Ub(Object.assign(Object.assign({},U),{clientOnly:!1,path:["Shared",k]}),()=>[{"&":VN(E)}]),JO(z,F),[Ub(Object.assign(Object.assign({},U),{path:[y,l,z]}),()=>{const{token:X,flush:$}=WN(E),j=Object.assign({},E[f]);if(o.deprecatedTokens){const{deprecatedTokens:ie}=o;ie.forEach(te=>{let[ge,ue]=te;var oe;(j!=null&&j[ge]||j!=null&&j[ue])&&((oe=j[ue])!==null&&oe!==void 0||(j[ue]=j==null?void 0:j[ge]))})}const V=typeof r=="function"?r(Lr(X,j??{})):r,Z=Object.assign(Object.assign({},V),j),ee=`.${l}`,ne=Lr(X,{componentCls:ee,prefixCls:l,iconCls:`.${z}`,antCls:`.${k}`},Z),Q=t(ne,{hashId:P,prefixCls:l,rootPrefixCls:k,iconPrefixCls:z,overrideComponentToken:j});return $(f,Z),[o.resetStyle===!1?null:HN(ne,l),Q]}),P]}}const QO=(e,t,r,o)=>{const c=ro(e,t,r,Object.assign({resetStyle:!1,order:-998},o));return y=>{let{prefixCls:l}=y;return c(l),null}};function ZN(e,t){return Ry.reduce((r,o)=>{const c=e[`${o}1`],f=e[`${o}3`],y=e[`${o}6`],l=e[`${o}7`];return Object.assign(Object.assign({},r),t(o,{lightColor:c,lightBorderColor:f,darkColor:y,textColor:l}))},{})}function XN(e,t){const r=e||{},o=r.inherit===!1||!t?GO:t;return y0(()=>{if(!e)return t;const c=Object.assign({},o.components);return Object.keys(e.components||{}).forEach(f=>{c[f]=Object.assign(Object.assign({},c[f]),e.components[f])}),Object.assign(Object.assign(Object.assign({},o),r),{token:Object.assign(Object.assign({},o.token),r.token),components:c})},[r,o],(c,f)=>c.some((y,l)=>{const w=f[l];return!yO(y,w,!0)}))}var KN=["children"],ez=T.createContext({});function YN(e){var t=e.children,r=Vr(e,KN);return T.createElement(ez.Provider,{value:r},t)}var JN=function(e){Au(r,e);var t=Ru(r);function r(){return qo(this,r),t.apply(this,arguments)}return Zo(r,[{key:"render",value:function(){return this.props.children}}]),r}(T.Component),iu="none",wv="appear",Sv="enter",Ev="leave",BI="none",cs="prepare",th="start",nh="active",jS="end",tz="prepared";function NI(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit".concat(e)]="webkit".concat(t),r["Moz".concat(e)]="moz".concat(t),r["ms".concat(e)]="MS".concat(t),r["O".concat(e)]="o".concat(t.toLowerCase()),r}function QN(e,t){var r={animationend:NI("Animation","AnimationEnd"),transitionend:NI("Transition","TransitionEnd")};return e&&("AnimationEvent"in t||delete r.animationend.animation,"TransitionEvent"in t||delete r.transitionend.transition),r}var e6=QN(no(),typeof window<"u"?window:{}),nz={};if(no()){var t6=document.createElement("div");nz=t6.style}var Cv={};function rz(e){if(Cv[e])return Cv[e];var t=e6[e];if(t)for(var r=Object.keys(t),o=r.length,c=0;c<o;c+=1){var f=r[c];if(Object.prototype.hasOwnProperty.call(t,f)&&f in nz)return Cv[e]=t[f],Cv[e]}return""}var iz=rz("animationend"),oz=rz("transitionend"),az=!!(iz&&oz),jI=iz||"animationend",UI=oz||"transitionend";function VI(e,t){if(!e)return null;if(Zn(e)==="object"){var r=t.replace(/-\w/g,function(o){return o[1].toUpperCase()});return e[r]}return"".concat(e,"-").concat(t)}const n6=function(e){var t=T.useRef(),r=T.useRef(e);r.current=e;var o=T.useCallback(function(y){r.current(y)},[]);function c(y){y&&(y.removeEventListener(UI,o),y.removeEventListener(jI,o))}function f(y){t.current&&t.current!==y&&c(t.current),y&&y!==t.current&&(y.addEventListener(UI,o),y.addEventListener(jI,o),t.current=y)}return T.useEffect(function(){return function(){c(t.current)}},[]),[f,c]};var sz=no()?T.useLayoutEffect:T.useEffect;const r6=function(){var e=T.useRef(null);function t(){yi.cancel(e.current)}function r(o){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;t();var f=yi(function(){c<=1?o({isCanceled:function(){return f!==e.current}}):r(o,c-1)});e.current=f}return T.useEffect(function(){return function(){t()}},[]),[r,t]};var i6=[cs,th,nh,jS],o6=[cs,tz],lz=!1,a6=!0;function cz(e){return e===nh||e===jS}const s6=function(e,t,r){var o=ch(BI),c=Bt(o,2),f=c[0],y=c[1],l=r6(),w=Bt(l,2),E=w[0],P=w[1];function M(){y(cs,!0)}var z=t?o6:i6;return sz(function(){if(f!==BI&&f!==jS){var F=z.indexOf(f),k=z[F+1],U=r(f);U===lz?y(k,!0):k&&E(function(X){function $(){X.isCanceled()||y(k,!0)}U===!0?$():Promise.resolve(U).then($)})}},[e,f]),T.useEffect(function(){return function(){P()}},[]),[M,f]};function l6(e,t,r,o){var c=o.motionEnter,f=c===void 0?!0:c,y=o.motionAppear,l=y===void 0?!0:y,w=o.motionLeave,E=w===void 0?!0:w,P=o.motionDeadline,M=o.motionLeaveImmediately,z=o.onAppearPrepare,F=o.onEnterPrepare,k=o.onLeavePrepare,U=o.onAppearStart,X=o.onEnterStart,$=o.onLeaveStart,j=o.onAppearActive,V=o.onEnterActive,Z=o.onLeaveActive,ee=o.onAppearEnd,ne=o.onEnterEnd,Q=o.onLeaveEnd,ie=o.onVisibleChanged,te=ch(),ge=Bt(te,2),ue=ge[0],oe=ge[1],fe=ch(iu),Ee=Bt(fe,2),ke=Ee[0],Le=Ee[1],Ne=ch(null),pe=Bt(Ne,2),He=pe[0],Be=pe[1],Ge=T.useRef(!1),Qe=T.useRef(null);function gt(){return r()}var St=T.useRef(!1);function xt(){Le(iu,!0),Be(null,!0)}function jt(ot){var rt=gt();if(!(ot&&!ot.deadline&&ot.target!==rt)){var kt=St.current,Pt;ke===wv&&kt?Pt=ee==null?void 0:ee(rt,ot):ke===Sv&&kt?Pt=ne==null?void 0:ne(rt,ot):ke===Ev&&kt&&(Pt=Q==null?void 0:Q(rt,ot)),ke!==iu&&kt&&Pt!==!1&&xt()}}var Ut=n6(jt),bt=Bt(Ut,1),ut=bt[0],It=function(rt){var kt,Pt,sn;switch(rt){case wv:return kt={},Fe(kt,cs,z),Fe(kt,th,U),Fe(kt,nh,j),kt;case Sv:return Pt={},Fe(Pt,cs,F),Fe(Pt,th,X),Fe(Pt,nh,V),Pt;case Ev:return sn={},Fe(sn,cs,k),Fe(sn,th,$),Fe(sn,nh,Z),sn;default:return{}}},ft=T.useMemo(function(){return It(ke)},[ke]),yt=s6(ke,!e,function(ot){if(ot===cs){var rt=ft[cs];return rt?rt(gt()):lz}if(Ct in ft){var kt;Be(((kt=ft[Ct])===null||kt===void 0?void 0:kt.call(ft,gt(),null))||null)}return Ct===nh&&(ut(gt()),P>0&&(clearTimeout(Qe.current),Qe.current=setTimeout(function(){jt({deadline:!0})},P))),Ct===tz&&xt(),a6}),ct=Bt(yt,2),Mt=ct[0],Ct=ct[1],Qt=cz(Ct);St.current=Qt,sz(function(){oe(t);var ot=Ge.current;Ge.current=!0;var rt;!ot&&t&&l&&(rt=wv),ot&&t&&f&&(rt=Sv),(ot&&!t&&E||!ot&&M&&!t&&E)&&(rt=Ev);var kt=It(rt);rt&&(e||kt[cs])?(Le(rt),Mt()):Le(iu)},[t]),T.useEffect(function(){(ke===wv&&!l||ke===Sv&&!f||ke===Ev&&!E)&&Le(iu)},[l,f,E]),T.useEffect(function(){return function(){Ge.current=!1,clearTimeout(Qe.current)}},[]);var Vt=T.useRef(!1);T.useEffect(function(){ue&&(Vt.current=!0),ue!==void 0&&ke===iu&&((Vt.current||ue)&&(ie==null||ie(ue)),Vt.current=!0)},[ue,ke]);var Nt=He;return ft[cs]&&Ct===th&&(Nt=st({transition:"none"},Nt)),[ke,Ct,Nt,ue??t]}function c6(e){var t=e;Zn(e)==="object"&&(t=e.transitionSupport);function r(c,f){return!!(c.motionName&&t&&f!==!1)}var o=T.forwardRef(function(c,f){var y=c.visible,l=y===void 0?!0:y,w=c.removeOnLeave,E=w===void 0?!0:w,P=c.forceRender,M=c.children,z=c.motionName,F=c.leavedClassName,k=c.eventProps,U=T.useContext(ez),X=U.motion,$=r(c,X),j=T.useRef(),V=T.useRef();function Z(){try{return j.current instanceof HTMLElement?j.current:zp(V.current)}catch{return null}}var ee=l6($,l,Z,c),ne=Bt(ee,4),Q=ne[0],ie=ne[1],te=ne[2],ge=ne[3],ue=T.useRef(ge);ge&&(ue.current=!0);var oe=T.useCallback(function(Be){j.current=Be,IS(f,Be)},[f]),fe,Ee=st(st({},k),{},{visible:l});if(!M)fe=null;else if(Q===iu)ge?fe=M(st({},Ee),oe):!E&&ue.current&&F?fe=M(st(st({},Ee),{},{className:F}),oe):P||!E&&!F?fe=M(st(st({},Ee),{},{style:{display:"none"}}),oe):fe=null;else{var ke,Le;ie===cs?Le="prepare":cz(ie)?Le="active":ie===th&&(Le="start");var Ne=VI(z,"".concat(Q,"-").concat(Le));fe=M(st(st({},Ee),{},{className:Tt(VI(z,Q),(ke={},Fe(ke,Ne,Ne&&Le),Fe(ke,z,typeof z=="string"),ke)),style:te}),oe)}if(T.isValidElement(fe)&&xm(fe)){var pe=fe,He=pe.ref;He||(fe=T.cloneElement(fe,{ref:oe}))}return T.createElement(JN,{ref:V},fe)});return o.displayName="CSSMotion",o}const Ah=c6(az);var Kb="add",Yb="keep",Jb="remove",c1="removed";function u6(e){var t;return e&&Zn(e)==="object"&&"key"in e?t=e:t={key:e},st(st({},t),{},{key:String(t.key)})}function Qb(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return e.map(u6)}function d6(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=[],o=0,c=t.length,f=Qb(e),y=Qb(t);f.forEach(function(E){for(var P=!1,M=o;M<c;M+=1){var z=y[M];if(z.key===E.key){o<M&&(r=r.concat(y.slice(o,M).map(function(F){return st(st({},F),{},{status:Kb})})),o=M),r.push(st(st({},z),{},{status:Yb})),o+=1,P=!0;break}}P||r.push(st(st({},E),{},{status:Jb}))}),o<c&&(r=r.concat(y.slice(o).map(function(E){return st(st({},E),{},{status:Kb})})));var l={};r.forEach(function(E){var P=E.key;l[P]=(l[P]||0)+1});var w=Object.keys(l).filter(function(E){return l[E]>1});return w.forEach(function(E){r=r.filter(function(P){var M=P.key,z=P.status;return M!==E||z!==Jb}),r.forEach(function(P){P.key===E&&(P.status=Yb)})}),r}var h6=["component","children","onVisibleChanged","onAllRemoved"],f6=["status"],p6=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearPrepare","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];function m6(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ah,r=function(o){Au(f,o);var c=Ru(f);function f(){var y;qo(this,f);for(var l=arguments.length,w=new Array(l),E=0;E<l;E++)w[E]=arguments[E];return y=c.call.apply(c,[this].concat(w)),Fe(vn(y),"state",{keyEntities:[]}),Fe(vn(y),"removeKey",function(P){var M=y.state.keyEntities,z=M.map(function(F){return F.key!==P?F:st(st({},F),{},{status:c1})});return y.setState({keyEntities:z}),z.filter(function(F){var k=F.status;return k!==c1}).length}),y}return Zo(f,[{key:"render",value:function(){var l=this,w=this.state.keyEntities,E=this.props,P=E.component,M=E.children,z=E.onVisibleChanged,F=E.onAllRemoved,k=Vr(E,h6),U=P||T.Fragment,X={};return p6.forEach(function($){X[$]=k[$],delete k[$]}),delete k.keys,T.createElement(U,k,w.map(function($,j){var V=$.status,Z=Vr($,f6),ee=V===Kb||V===Yb;return T.createElement(t,Sn({},X,{key:Z.key,visible:ee,eventProps:Z,onVisibleChanged:function(Q){if(z==null||z(Q,{key:Z.key}),!Q){var ie=l.removeKey(Z.key);ie===0&&F&&F()}}}),function(ne,Q){return M(st(st({},ne),{},{index:j}),Q)})}))}}],[{key:"getDerivedStateFromProps",value:function(l,w){var E=l.keys,P=w.keyEntities,M=Qb(E),z=d6(P,M);return{keyEntities:z.filter(function(F){var k=P.find(function(U){var X=U.key;return F.key===X});return!(k&&k.status===c1&&F.status===Jb)})}}}]),f}(T.Component);return Fe(r,"defaultProps",{component:"div"}),r}const g6=m6(az);function v6(e){const{children:t}=e,[,r]=Na(),{motion:o}=r,c=T.useRef(!1);return c.current=c.current||o===!1,c.current?T.createElement(YN,{motion:o},t):t}const y6=()=>null;var _6=globalThis&&globalThis.__rest||function(e,t){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(e);c<o.length;c++)t.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(e,o[c])&&(r[o[c]]=e[o[c]]);return r};const x6=["getTargetContainer","getPopupContainer","renderEmpty","pageHeader","input","pagination","form","select","button"],b6="ant";let zy,uz,dz;function Wv(){return zy||b6}function w6(){return uz||BS}function S6(e){return Object.keys(e).some(t=>t.endsWith("Color"))}const E6=e=>{let{prefixCls:t,iconPrefixCls:r,theme:o}=e;t!==void 0&&(zy=t),r!==void 0&&(uz=r),o&&(S6(o)?DN(Wv(),o):dz=o)},C0=()=>({getPrefixCls:(e,t)=>t||(e?`${Wv()}-${e}`:Wv()),getIconPrefixCls:w6,getRootPrefixCls:()=>zy||Wv(),getTheme:()=>dz}),C6=e=>{const{children:t,csp:r,autoInsertSpaceInButton:o,alert:c,anchor:f,form:y,locale:l,componentSize:w,direction:E,space:P,virtual:M,dropdownMatchSelectWidth:z,popupMatchSelectWidth:F,popupOverflow:k,legacyLocale:U,parentContext:X,iconPrefixCls:$,theme:j,componentDisabled:V,segmented:Z,statistic:ee,spin:ne,calendar:Q,carousel:ie,cascader:te,collapse:ge,typography:ue,checkbox:oe,descriptions:fe,divider:Ee,drawer:ke,skeleton:Le,steps:Ne,image:pe,layout:He,list:Be,mentions:Ge,modal:Qe,progress:gt,result:St,slider:xt,breadcrumb:jt,menu:Ut,pagination:bt,input:ut,empty:It,badge:ft,radio:yt,rate:ct,switch:Mt,transfer:Ct,avatar:Qt,message:Vt,tag:Nt,table:ot,card:rt,tabs:kt,timeline:Pt,timePicker:sn,upload:An,notification:Mn,tree:on,colorPicker:Vn,datePicker:Nn,rangePicker:zn,flex:yn,wave:rn,dropdown:Wn,warning:jn}=e,pr=T.useCallback((Me,De)=>{const{prefixCls:we}=e;if(De)return De;const $e=we||X.getPrefixCls("");return Me?`${$e}-${Me}`:$e},[X.getPrefixCls,e.prefixCls]),ar=$||X.iconPrefixCls||BS,qn=r||X.csp;JO(ar,qn);const Qn=XN(j,X.theme),Rr={csp:qn,autoInsertSpaceInButton:o,alert:c,anchor:f,locale:l||U,direction:E,space:P,virtual:M,popupMatchSelectWidth:F??z,popupOverflow:k,getPrefixCls:pr,iconPrefixCls:ar,theme:Qn,segmented:Z,statistic:ee,spin:ne,calendar:Q,carousel:ie,cascader:te,collapse:ge,typography:ue,checkbox:oe,descriptions:fe,divider:Ee,drawer:ke,skeleton:Le,steps:Ne,image:pe,input:ut,layout:He,list:Be,mentions:Ge,modal:Qe,progress:gt,result:St,slider:xt,breadcrumb:jt,menu:Ut,pagination:bt,empty:It,badge:ft,radio:yt,rate:ct,switch:Mt,transfer:Ct,avatar:Qt,message:Vt,tag:Nt,table:ot,card:rt,tabs:kt,timeline:Pt,timePicker:sn,upload:An,notification:Mn,tree:on,colorPicker:Vn,datePicker:Nn,rangePicker:zn,flex:yn,wave:rn,dropdown:Wn,warning:jn},_e=Object.assign({},X);Object.keys(Rr).forEach(Me=>{Rr[Me]!==void 0&&(_e[Me]=Rr[Me])}),x6.forEach(Me=>{const De=e[Me];De&&(_e[Me]=De)});const W=y0(()=>_e,_e,(Me,De)=>{const we=Object.keys(Me),$e=Object.keys(De);return we.length!==$e.length||we.some(je=>Me[je]!==De[je])}),J=T.useMemo(()=>({prefixCls:ar,csp:qn}),[ar,qn]);let de=T.createElement(T.Fragment,null,T.createElement(y6,{dropdownMatchSelectWidth:z}),t);const Se=T.useMemo(()=>{var Me,De,we,$e;return eh(((Me=wh.Form)===null||Me===void 0?void 0:Me.defaultValidateMessages)||{},((we=(De=W.locale)===null||De===void 0?void 0:De.Form)===null||we===void 0?void 0:we.defaultValidateMessages)||{},(($e=W.form)===null||$e===void 0?void 0:$e.validateMessages)||{},(y==null?void 0:y.validateMessages)||{})},[W,y==null?void 0:y.validateMessages]);Object.keys(Se).length>0&&(de=T.createElement(V5.Provider,{value:Se},de)),l&&(de=T.createElement(Q5,{locale:l,_ANT_MARK__:Y5},de)),(ar||qn)&&(de=T.createElement(DS.Provider,{value:J},de)),w&&(de=T.createElement($N,{size:w},de)),de=T.createElement(v6,null,de);const Ie=T.useMemo(()=>{const Me=Qn||{},{algorithm:De,token:we,components:$e}=Me,je=_6(Me,["algorithm","token","components"]),Je=De&&(!Array.isArray(De)||De.length>0)?Fb(De):HO,We={};Object.entries($e||{}).forEach(Yt=>{let[Xt,un]=Yt;const ln=Object.assign({},un);"algorithm"in ln&&(ln.algorithm===!0?ln.theme=Je:(Array.isArray(ln.algorithm)||typeof ln.algorithm=="function")&&(ln.theme=Fb(ln.algorithm)),delete ln.algorithm),We[Xt]=ln});const wt=Object.assign(Object.assign({},am),we);return Object.assign(Object.assign({},je),{theme:Je,token:wt,components:We,override:Object.assign({override:wt},We)})},[Qn]);return j&&(de=T.createElement(WO.Provider,{value:Ie},de)),W.warning&&(de=T.createElement(U5.Provider,{value:W.warning},de)),V!==void 0&&(de=T.createElement(kN,{disabled:V},de)),T.createElement(ur.Provider,{value:W},de)},Rh=e=>{const t=T.useContext(ur),r=T.useContext($S);return T.createElement(C6,Object.assign({parentContext:t,legacyLocale:r},e))};Rh.ConfigContext=ur;Rh.SizeContext=E0;Rh.config=E6;Rh.useConfig=FN;Object.defineProperty(Rh,"SizeContext",{get:()=>E0});const US=Rh;var T6={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z"}}]},name:"check-circle",theme:"filled"};const I6=T6;function hz(e){var t;return e==null||(t=e.getRootNode)===null||t===void 0?void 0:t.call(e)}function M6(e){return hz(e)instanceof ShadowRoot}function Ly(e){return M6(e)?hz(e):null}function P6(e){return e.replace(/-(.)/g,function(t,r){return r.toUpperCase()})}function A6(e,t){Vo(e,"[@ant-design/icons] ".concat(t))}function HI(e){return Zn(e)==="object"&&typeof e.name=="string"&&typeof e.theme=="string"&&(Zn(e.icon)==="object"||typeof e.icon=="function")}function GI(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.keys(e).reduce(function(t,r){var o=e[r];switch(r){case"class":t.className=o,delete t.class;break;default:delete t[r],t[P6(r)]=o}return t},{})}function ew(e,t,r){return r?lt.createElement(e.tag,st(st({key:t},GI(e.attrs)),r),(e.children||[]).map(function(o,c){return ew(o,"".concat(t,"-").concat(e.tag,"-").concat(c))})):lt.createElement(e.tag,st({key:t},GI(e.attrs)),(e.children||[]).map(function(o,c){return ew(o,"".concat(t,"-").concat(e.tag,"-").concat(c))}))}function fz(e){return Cu(e)[0]}function pz(e){return e?Array.isArray(e)?e:[e]:[]}var R6=`
.anticon {
  display: inline-block;
  color: inherit;
  font-style: normal;
  line-height: 0;
  text-align: center;
  text-transform: none;
  vertical-align: -0.125em;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.anticon > * {
  line-height: 1;
}

.anticon svg {
  display: inline-block;
}

.anticon::before {
  display: none;
}

.anticon .anticon-icon {
  display: block;
}

.anticon[tabindex] {
  cursor: pointer;
}

.anticon-spin::before,
.anticon-spin {
  display: inline-block;
  -webkit-animation: loadingCircle 1s infinite linear;
  animation: loadingCircle 1s infinite linear;
}

@-webkit-keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
`,O6=function(t){var r=T.useContext(DS),o=r.csp,c=r.prefixCls,f=R6;c&&(f=f.replace(/anticon/g,c)),T.useEffect(function(){var y=t.current,l=Ly(y);xh(f,"@ant-design-icons",{prepend:!0,csp:o,attachTo:l})},[])},z6=["icon","className","onClick","style","primaryColor","secondaryColor"],kp={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};function L6(e){var t=e.primaryColor,r=e.secondaryColor;kp.primaryColor=t,kp.secondaryColor=r||fz(t),kp.calculated=!!r}function D6(){return st({},kp)}var T0=function(t){var r=t.icon,o=t.className,c=t.onClick,f=t.style,y=t.primaryColor,l=t.secondaryColor,w=Vr(t,z6),E=T.useRef(),P=kp;if(y&&(P={primaryColor:y,secondaryColor:l||fz(y)}),O6(E),A6(HI(r),"icon should be icon definiton, but got ".concat(r)),!HI(r))return null;var M=r;return M&&typeof M.icon=="function"&&(M=st(st({},M),{},{icon:M.icon(P.primaryColor,P.secondaryColor)})),ew(M.icon,"svg-".concat(M.name),st(st({className:o,onClick:c,style:f,"data-icon":M.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},w),{},{ref:E}))};T0.displayName="IconReact";T0.getTwoToneColors=D6;T0.setTwoToneColors=L6;const VS=T0;function mz(e){var t=pz(e),r=Bt(t,2),o=r[0],c=r[1];return VS.setTwoToneColors({primaryColor:o,secondaryColor:c})}function k6(){var e=VS.getTwoToneColors();return e.calculated?[e.primaryColor,e.secondaryColor]:e.primaryColor}var $6=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];mz(vN.primary);var I0=T.forwardRef(function(e,t){var r,o=e.className,c=e.icon,f=e.spin,y=e.rotate,l=e.tabIndex,w=e.onClick,E=e.twoToneColor,P=Vr(e,$6),M=T.useContext(DS),z=M.prefixCls,F=z===void 0?"anticon":z,k=M.rootClassName,U=Tt(k,F,(r={},Fe(r,"".concat(F,"-").concat(c.name),!!c.name),Fe(r,"".concat(F,"-spin"),!!f||c.name==="loading"),r),o),X=l;X===void 0&&w&&(X=-1);var $=y?{msTransform:"rotate(".concat(y,"deg)"),transform:"rotate(".concat(y,"deg)")}:void 0,j=pz(E),V=Bt(j,2),Z=V[0],ee=V[1];return T.createElement("span",Sn({role:"img","aria-label":c.name},P,{ref:t,tabIndex:X,onClick:w,className:U}),T.createElement(VS,{icon:c,primaryColor:Z,secondaryColor:ee,style:$}))});I0.displayName="AntdIcon";I0.getTwoToneColor=k6;I0.setTwoToneColor=mz;const Xi=I0;var F6=function(t,r){return T.createElement(Xi,Sn({},t,{ref:r,icon:I6}))};const gz=T.forwardRef(F6);var B6={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm127.98 274.82h-.04l-.08.06L512 466.75 384.14 338.88c-.04-.05-.06-.06-.08-.06a.12.12 0 00-.07 0c-.03 0-.05.01-.09.05l-45.02 45.02a.2.2 0 00-.05.09.12.12 0 000 .07v.02a.27.27 0 00.06.06L466.75 512 338.88 639.86c-.05.04-.06.06-.06.08a.12.12 0 000 .07c0 .03.01.05.05.09l45.02 45.02a.2.2 0 00.09.05.12.12 0 00.07 0c.02 0 .04-.01.08-.05L512 557.25l127.86 127.87c.04.04.06.05.08.05a.12.12 0 00.07 0c.03 0 .05-.01.09-.05l45.02-45.02a.2.2 0 00.05-.09.12.12 0 000-.07v-.02a.27.27 0 00-.05-.06L557.25 512l127.87-127.86c.04-.04.05-.06.05-.08a.12.12 0 000-.07c0-.03-.01-.05-.05-.09l-45.02-45.02a.2.2 0 00-.09-.05.12.12 0 00-.07 0z"}}]},name:"close-circle",theme:"filled"};const N6=B6;var j6=function(t,r){return T.createElement(Xi,Sn({},t,{ref:r,icon:N6}))};const wm=T.forwardRef(j6);var U6={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M799.86 166.31c.02 0 .04.02.08.06l57.69 57.7c.04.03.05.05.06.08a.12.12 0 010 .06c0 .03-.02.05-.06.09L569.93 512l287.7 287.7c.04.04.05.06.06.09a.12.12 0 010 .07c0 .02-.02.04-.06.08l-57.7 57.69c-.03.04-.05.05-.07.06a.12.12 0 01-.07 0c-.03 0-.05-.02-.09-.06L512 569.93l-287.7 287.7c-.04.04-.06.05-.09.06a.12.12 0 01-.07 0c-.02 0-.04-.02-.08-.06l-57.69-57.7c-.04-.03-.05-.05-.06-.07a.12.12 0 010-.07c0-.03.02-.05.06-.09L454.07 512l-287.7-287.7c-.04-.04-.05-.06-.06-.09a.12.12 0 010-.07c0-.02.02-.04.06-.08l57.7-57.69c.03-.04.05-.05.07-.06a.12.12 0 01.07 0c.03 0 .05.02.09.06L512 454.07l287.7-287.7c.04-.04.06-.05.09-.06a.12.12 0 01.07 0z"}}]},name:"close",theme:"outlined"};const V6=U6;var H6=function(t,r){return T.createElement(Xi,Sn({},t,{ref:r,icon:V6}))};const HS=T.forwardRef(H6);var G6={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm-32 232c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V296zm32 440a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"exclamation-circle",theme:"filled"};const W6=G6;var q6=function(t,r){return T.createElement(Xi,Sn({},t,{ref:r,icon:W6}))};const vz=T.forwardRef(q6);var Z6={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm32 664c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272zm-32-344a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"info-circle",theme:"filled"};const X6=Z6;var K6=function(t,r){return T.createElement(Xi,Sn({},t,{ref:r,icon:X6}))};const yz=T.forwardRef(K6);var Y6=`accept acceptCharset accessKey action allowFullScreen allowTransparency
    alt async autoComplete autoFocus autoPlay capture cellPadding cellSpacing challenge
    charSet checked classID className colSpan cols content contentEditable contextMenu
    controls coords crossOrigin data dateTime default defer dir disabled download draggable
    encType form formAction formEncType formMethod formNoValidate formTarget frameBorder
    headers height hidden high href hrefLang htmlFor httpEquiv icon id inputMode integrity
    is keyParams keyType kind label lang list loop low manifest marginHeight marginWidth max maxLength media
    mediaGroup method min minLength multiple muted name noValidate nonce open
    optimum pattern placeholder poster preload radioGroup readOnly rel required
    reversed role rowSpan rows sandbox scope scoped scrolling seamless selected
    shape size sizes span spellCheck src srcDoc srcLang srcSet start step style
    summary tabIndex target title type useMap value width wmode wrap`,J6=`onCopy onCut onPaste onCompositionEnd onCompositionStart onCompositionUpdate onKeyDown
    onKeyPress onKeyUp onFocus onBlur onChange onInput onSubmit onClick onContextMenu onDoubleClick
    onDrag onDragEnd onDragEnter onDragExit onDragLeave onDragOver onDragStart onDrop onMouseDown
    onMouseEnter onMouseLeave onMouseMove onMouseOut onMouseOver onMouseUp onSelect onTouchCancel
    onTouchEnd onTouchMove onTouchStart onScroll onWheel onAbort onCanPlay onCanPlayThrough
    onDurationChange onEmptied onEncrypted onEnded onError onLoadedData onLoadedMetadata
    onLoadStart onPause onPlay onPlaying onProgress onRateChange onSeeked onSeeking onStalled onSuspend onTimeUpdate onVolumeChange onWaiting onLoad onError`,Q6="".concat(Y6," ").concat(J6).split(/[\s\n]+/),ej="aria-",tj="data-";function WI(e,t){return e.indexOf(t)===0}function sm(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r;t===!1?r={aria:!0,data:!0,attr:!0}:t===!0?r={aria:!0}:r=st({},t);var o={};return Object.keys(e).forEach(function(c){(r.aria&&(c==="role"||WI(c,ej))||r.data&&WI(c,tj)||r.attr&&Q6.includes(c))&&(o[c]=e[c])}),o}const{isValidElement:lm}=Wy;function _z(e){return e&&lm(e)&&e.type===T.Fragment}function nj(e,t,r){return lm(e)?T.cloneElement(e,typeof r=="function"?r(e.props||{}):r):t}function yl(e,t){return nj(e,e,t)}var Ht={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(t){var r=t.keyCode;if(t.altKey&&!t.ctrlKey||t.metaKey||r>=Ht.F1&&r<=Ht.F12)return!1;switch(r){case Ht.ALT:case Ht.CAPS_LOCK:case Ht.CONTEXT_MENU:case Ht.CTRL:case Ht.DOWN:case Ht.END:case Ht.ESC:case Ht.HOME:case Ht.INSERT:case Ht.LEFT:case Ht.MAC_FF_META:case Ht.META:case Ht.NUMLOCK:case Ht.NUM_CENTER:case Ht.PAGE_DOWN:case Ht.PAGE_UP:case Ht.PAUSE:case Ht.PRINT_SCREEN:case Ht.RIGHT:case Ht.SHIFT:case Ht.UP:case Ht.WIN_KEY:case Ht.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(t){if(t>=Ht.ZERO&&t<=Ht.NINE||t>=Ht.NUM_ZERO&&t<=Ht.NUM_MULTIPLY||t>=Ht.A&&t<=Ht.Z||window.navigator.userAgent.indexOf("WebKit")!==-1&&t===0)return!0;switch(t){case Ht.SPACE:case Ht.QUESTION_MARK:case Ht.NUM_PLUS:case Ht.NUM_MINUS:case Ht.NUM_PERIOD:case Ht.NUM_DIVISION:case Ht.SEMICOLON:case Ht.DASH:case Ht.EQUALS:case Ht.COMMA:case Ht.PERIOD:case Ht.SLASH:case Ht.APOSTROPHE:case Ht.SINGLE_QUOTE:case Ht.OPEN_SQUARE_BRACKET:case Ht.BACKSLASH:case Ht.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}},GS=T.forwardRef(function(e,t){var r=e.prefixCls,o=e.style,c=e.className,f=e.duration,y=f===void 0?4.5:f,l=e.eventKey,w=e.content,E=e.closable,P=e.closeIcon,M=P===void 0?"x":P,z=e.props,F=e.onClick,k=e.onNoticeClose,U=e.times,X=e.hovering,$=T.useState(!1),j=Bt($,2),V=j[0],Z=j[1],ee=X||V,ne=function(){k(l)},Q=function(ge){(ge.key==="Enter"||ge.code==="Enter"||ge.keyCode===Ht.ENTER)&&ne()};T.useEffect(function(){if(!ee&&y>0){var te=setTimeout(function(){ne()},y*1e3);return function(){clearTimeout(te)}}},[y,ee,U]);var ie="".concat(r,"-notice");return T.createElement("div",Sn({},z,{ref:t,className:Tt(ie,c,Fe({},"".concat(ie,"-closable"),E)),style:o,onMouseEnter:function(ge){var ue;Z(!0),z==null||(ue=z.onMouseEnter)===null||ue===void 0||ue.call(z,ge)},onMouseLeave:function(ge){var ue;Z(!1),z==null||(ue=z.onMouseLeave)===null||ue===void 0||ue.call(z,ge)},onClick:F}),T.createElement("div",{className:"".concat(ie,"-content")},w),E&&T.createElement("a",{tabIndex:0,className:"".concat(ie,"-close"),onKeyDown:Q,onClick:function(ge){ge.preventDefault(),ge.stopPropagation(),ne()}},M))}),xz=lt.createContext({}),bz=function(t){var r=t.children,o=t.classNames;return lt.createElement(xz.Provider,{value:{classNames:o}},r)},qI=8,ZI=3,XI=16,rj=function(t){var r={offset:qI,threshold:ZI,gap:XI};if(t&&Zn(t)==="object"){var o,c,f;r.offset=(o=t.offset)!==null&&o!==void 0?o:qI,r.threshold=(c=t.threshold)!==null&&c!==void 0?c:ZI,r.gap=(f=t.gap)!==null&&f!==void 0?f:XI}return[!!t,r]},ij=["className","style","classNames","styles"],oj=function(t){var r,o=t.configList,c=t.placement,f=t.prefixCls,y=t.className,l=t.style,w=t.motion,E=t.onAllNoticeRemoved,P=t.onNoticeClose,M=t.stack,z=T.useContext(xz),F=z.classNames,k=T.useRef({}),U=T.useState(null),X=Bt(U,2),$=X[0],j=X[1],V=T.useState([]),Z=Bt(V,2),ee=Z[0],ne=Z[1],Q=o.map(function(Ne){return{config:Ne,key:String(Ne.key)}}),ie=rj(M),te=Bt(ie,2),ge=te[0],ue=te[1],oe=ue.offset,fe=ue.threshold,Ee=ue.gap,ke=ge&&(ee.length>0||Q.length<=fe),Le=typeof w=="function"?w(c):w;return T.useEffect(function(){ge&&ee.length>1&&ne(function(Ne){return Ne.filter(function(pe){return Q.some(function(He){var Be=He.key;return pe===Be})})})},[ee,Q,ge]),T.useEffect(function(){var Ne;if(ge&&k.current[(Ne=Q[Q.length-1])===null||Ne===void 0?void 0:Ne.key]){var pe;j(k.current[(pe=Q[Q.length-1])===null||pe===void 0?void 0:pe.key])}},[Q,ge]),lt.createElement(g6,Sn({key:c,className:Tt(f,"".concat(f,"-").concat(c),F==null?void 0:F.list,y,(r={},Fe(r,"".concat(f,"-stack"),!!ge),Fe(r,"".concat(f,"-stack-expanded"),ke),r)),style:l,keys:Q,motionAppear:!0},Le,{onAllRemoved:function(){E(c)}}),function(Ne,pe){var He=Ne.config,Be=Ne.className,Ge=Ne.style,Qe=Ne.index,gt=He,St=gt.key,xt=gt.times,jt=String(St),Ut=He,bt=Ut.className,ut=Ut.style,It=Ut.classNames,ft=Ut.styles,yt=Vr(Ut,ij),ct=Q.findIndex(function(Mn){return Mn.key===jt}),Mt={};if(ge){var Ct=Q.length-1-(ct>-1?ct:Qe-1),Qt=c==="top"||c==="bottom"?"-50%":"0";if(Ct>0){var Vt,Nt,ot;Mt.height=ke?(Vt=k.current[jt])===null||Vt===void 0?void 0:Vt.offsetHeight:$==null?void 0:$.offsetHeight;for(var rt=0,kt=0;kt<Ct;kt++){var Pt;rt+=((Pt=k.current[Q[Q.length-1-kt].key])===null||Pt===void 0?void 0:Pt.offsetHeight)+Ee}var sn=(ke?rt:Ct*oe)*(c.startsWith("top")?1:-1),An=!ke&&$!==null&&$!==void 0&&$.offsetWidth&&(Nt=k.current[jt])!==null&&Nt!==void 0&&Nt.offsetWidth?(($==null?void 0:$.offsetWidth)-oe*2*(Ct<3?Ct:3))/((ot=k.current[jt])===null||ot===void 0?void 0:ot.offsetWidth):1;Mt.transform="translate3d(".concat(Qt,", ").concat(sn,"px, 0) scaleX(").concat(An,")")}else Mt.transform="translate3d(".concat(Qt,", 0, 0)")}return lt.createElement("div",{ref:pe,className:Tt("".concat(f,"-notice-wrapper"),Be,It==null?void 0:It.wrapper),style:st(st(st({},Ge),Mt),ft==null?void 0:ft.wrapper),onMouseEnter:function(){return ne(function(on){return on.includes(jt)?on:[].concat(mn(on),[jt])})},onMouseLeave:function(){return ne(function(on){return on.filter(function(Vn){return Vn!==jt})})}},lt.createElement(GS,Sn({},yt,{ref:function(on){ct>-1?k.current[jt]=on:delete k.current[jt]},prefixCls:f,classNames:It,styles:ft,className:Tt(bt,F==null?void 0:F.notice),style:ut,times:xt,key:St,eventKey:St,onNoticeClose:P,hovering:ge&&ee.length>0})))})},aj=T.forwardRef(function(e,t){var r=e.prefixCls,o=r===void 0?"rc-notification":r,c=e.container,f=e.motion,y=e.maxCount,l=e.className,w=e.style,E=e.onAllRemoved,P=e.stack,M=e.renderNotifications,z=T.useState([]),F=Bt(z,2),k=F[0],U=F[1],X=function(te){var ge,ue=k.find(function(oe){return oe.key===te});ue==null||(ge=ue.onClose)===null||ge===void 0||ge.call(ue),U(function(oe){return oe.filter(function(fe){return fe.key!==te})})};T.useImperativeHandle(t,function(){return{open:function(te){U(function(ge){var ue=mn(ge),oe=ue.findIndex(function(ke){return ke.key===te.key}),fe=st({},te);if(oe>=0){var Ee;fe.times=(((Ee=ge[oe])===null||Ee===void 0?void 0:Ee.times)||0)+1,ue[oe]=fe}else fe.times=0,ue.push(fe);return y>0&&ue.length>y&&(ue=ue.slice(-y)),ue})},close:function(te){X(te)},destroy:function(){U([])}}});var $=T.useState({}),j=Bt($,2),V=j[0],Z=j[1];T.useEffect(function(){var ie={};k.forEach(function(te){var ge=te.placement,ue=ge===void 0?"topRight":ge;ue&&(ie[ue]=ie[ue]||[],ie[ue].push(te))}),Object.keys(V).forEach(function(te){ie[te]=ie[te]||[]}),Z(ie)},[k]);var ee=function(te){Z(function(ge){var ue=st({},ge),oe=ue[te]||[];return oe.length||delete ue[te],ue})},ne=T.useRef(!1);if(T.useEffect(function(){Object.keys(V).length>0?ne.current=!0:ne.current&&(E==null||E(),ne.current=!1)},[V]),!c)return null;var Q=Object.keys(V);return _c.createPortal(T.createElement(T.Fragment,null,Q.map(function(ie){var te=V[ie],ge=T.createElement(oj,{key:ie,configList:te,placement:ie,prefixCls:o,className:l==null?void 0:l(ie),style:w==null?void 0:w(ie),motion:f,onNoticeClose:X,onAllNoticeRemoved:ee,stack:P});return M?M(ge,{prefixCls:o,key:ie}):ge})),c)}),sj=["getContainer","motion","prefixCls","maxCount","className","style","onAllRemoved","stack","renderNotifications"],lj=function(){return document.body},KI=0;function cj(){for(var e={},t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return r.forEach(function(c){c&&Object.keys(c).forEach(function(f){var y=c[f];y!==void 0&&(e[f]=y)})}),e}function wz(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.getContainer,r=t===void 0?lj:t,o=e.motion,c=e.prefixCls,f=e.maxCount,y=e.className,l=e.style,w=e.onAllRemoved,E=e.stack,P=e.renderNotifications,M=Vr(e,sj),z=T.useState(),F=Bt(z,2),k=F[0],U=F[1],X=T.useRef(),$=T.createElement(aj,{container:k,ref:X,prefixCls:c,motion:o,maxCount:f,className:y,style:l,onAllRemoved:w,stack:E,renderNotifications:P}),j=T.useState([]),V=Bt(j,2),Z=V[0],ee=V[1],ne=T.useMemo(function(){return{open:function(ie){var te=cj(M,ie);(te.key===null||te.key===void 0)&&(te.key="rc-notification-".concat(KI),KI+=1),ee(function(ge){return[].concat(mn(ge),[{type:"open",config:te}])})},close:function(ie){ee(function(te){return[].concat(mn(te),[{type:"close",key:ie}])})},destroy:function(){ee(function(ie){return[].concat(mn(ie),[{type:"destroy"}])})}}},[]);return T.useEffect(function(){U(r())}),T.useEffect(function(){X.current&&Z.length&&(Z.forEach(function(Q){switch(Q.type){case"open":X.current.open(Q.config);break;case"close":X.current.close(Q.key);break;case"destroy":X.current.destroy();break}}),ee(function(Q){return Q.filter(function(ie){return!Z.includes(ie)})}))},[Z]),[ne,$]}var uj={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"}}]},name:"loading",theme:"outlined"};const dj=uj;var hj=function(t,r){return T.createElement(Xi,Sn({},t,{ref:r,icon:dj}))};const WS=T.forwardRef(hj),fj=e=>{const{componentCls:t,iconCls:r,boxShadow:o,colorText:c,colorSuccess:f,colorError:y,colorWarning:l,colorInfo:w,fontSizeLG:E,motionEaseInOutCirc:P,motionDurationSlow:M,marginXS:z,paddingXS:F,borderRadiusLG:k,zIndexPopup:U,contentPadding:X,contentBg:$}=e,j=`${t}-notice`,V=new or("MessageMoveIn",{"0%":{padding:0,transform:"translateY(-100%)",opacity:0},"100%":{padding:F,transform:"translateY(0)",opacity:1}}),Z=new or("MessageMoveOut",{"0%":{maxHeight:e.height,padding:F,opacity:1},"100%":{maxHeight:0,padding:0,opacity:0}}),ee={padding:F,textAlign:"center",[`${t}-custom-content > ${r}`]:{verticalAlign:"text-bottom",marginInlineEnd:z,fontSize:E},[`${j}-content`]:{display:"inline-block",padding:X,background:$,borderRadius:k,boxShadow:o,pointerEvents:"all"},[`${t}-success > ${r}`]:{color:f},[`${t}-error > ${r}`]:{color:y},[`${t}-warning > ${r}`]:{color:l},[`${t}-info > ${r},
      ${t}-loading > ${r}`]:{color:w}};return[{[t]:Object.assign(Object.assign({},ja(e)),{color:c,position:"fixed",top:z,width:"100%",pointerEvents:"none",zIndex:U,[`${t}-move-up`]:{animationFillMode:"forwards"},[`
        ${t}-move-up-appear,
        ${t}-move-up-enter
      `]:{animationName:V,animationDuration:M,animationPlayState:"paused",animationTimingFunction:P},[`
        ${t}-move-up-appear${t}-move-up-appear-active,
        ${t}-move-up-enter${t}-move-up-enter-active
      `]:{animationPlayState:"running"},[`${t}-move-up-leave`]:{animationName:Z,animationDuration:M,animationPlayState:"paused",animationTimingFunction:P},[`${t}-move-up-leave${t}-move-up-leave-active`]:{animationPlayState:"running"},"&-rtl":{direction:"rtl",span:{direction:"rtl"}}})},{[t]:{[`${j}-wrapper`]:Object.assign({},ee)}},{[`${t}-notice-pure-panel`]:Object.assign(Object.assign({},ee),{padding:0,textAlign:"start"})}]},Sz=ro("Message",e=>{const t=Lr(e,{height:150});return[fj(t)]},e=>({zIndexPopup:e.zIndexPopupBase+10,contentBg:e.colorBgElevated,contentPadding:`${(e.controlHeightLG-e.fontSize*e.lineHeight)/2}px ${e.paddingSM}px`}));var pj=globalThis&&globalThis.__rest||function(e,t){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(e);c<o.length;c++)t.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(e,o[c])&&(r[o[c]]=e[o[c]]);return r};const mj={info:T.createElement(yz,null),success:T.createElement(gz,null),error:T.createElement(wm,null),warning:T.createElement(vz,null),loading:T.createElement(WS,null)},Ez=e=>{let{prefixCls:t,type:r,icon:o,children:c}=e;return T.createElement("div",{className:Tt(`${t}-custom-content`,`${t}-${r}`)},o||mj[r],T.createElement("span",null,c))},gj=e=>{const{prefixCls:t,className:r,type:o,icon:c,content:f}=e,y=pj(e,["prefixCls","className","type","icon","content"]),{getPrefixCls:l}=T.useContext(ur),w=t||l("message"),[,E]=Sz(w);return T.createElement(GS,Object.assign({},y,{prefixCls:w,className:Tt(r,E,`${w}-notice-pure-panel`),eventKey:"pure",duration:null,content:T.createElement(Ez,{prefixCls:w,type:o,icon:c},f)}))},vj=gj;function yj(e,t){return{motionName:t??`${e}-move-up`}}function qS(e){let t;const r=new Promise(c=>{t=e(()=>{c(!0)})}),o=()=>{t==null||t()};return o.then=(c,f)=>r.then(c,f),o.promise=r,o}var _j=globalThis&&globalThis.__rest||function(e,t){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(e);c<o.length;c++)t.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(e,o[c])&&(r[o[c]]=e[o[c]]);return r};const xj=8,bj=3,wj=e=>{let{children:t,prefixCls:r}=e;const[,o]=Sz(r);return T.createElement(bz,{classNames:{list:o,notice:o}},t)},Sj=(e,t)=>{let{prefixCls:r,key:o}=t;return T.createElement(wj,{prefixCls:r,key:o},e)},Ej=T.forwardRef((e,t)=>{const{top:r,prefixCls:o,getContainer:c,maxCount:f,duration:y=bj,rtl:l,transitionName:w,onAllRemoved:E}=e,{getPrefixCls:P,getPopupContainer:M,message:z}=T.useContext(ur),F=o||P("message"),k=()=>({left:"50%",transform:"translateX(-50%)",top:r??xj}),U=()=>Tt({[`${F}-rtl`]:l}),X=()=>yj(F,w),$=T.createElement("span",{className:`${F}-close-x`},T.createElement(HS,{className:`${F}-close-icon`})),[j,V]=wz({prefixCls:F,style:k,className:U,motion:X,closable:!1,closeIcon:$,duration:y,getContainer:()=>(c==null?void 0:c())||(M==null?void 0:M())||document.body,maxCount:f,onAllRemoved:E,renderNotifications:Sj});return T.useImperativeHandle(t,()=>Object.assign(Object.assign({},j),{prefixCls:F,message:z})),V});let YI=0;function Cz(e){const t=T.useRef(null);return kS(),[T.useMemo(()=>{const o=w=>{var E;(E=t.current)===null||E===void 0||E.close(w)},c=w=>{if(!t.current){const ne=()=>{};return ne.then=()=>{},ne}const{open:E,prefixCls:P,message:M}=t.current,z=`${P}-notice`,{content:F,icon:k,type:U,key:X,className:$,style:j,onClose:V}=w,Z=_j(w,["content","icon","type","key","className","style","onClose"]);let ee=X;return ee==null&&(YI+=1,ee=`antd-message-${YI}`),qS(ne=>(E(Object.assign(Object.assign({},Z),{key:ee,content:T.createElement(Ez,{prefixCls:P,type:U,icon:k},F),placement:"top",className:Tt(U&&`${z}-${U}`,$,M==null?void 0:M.className),style:Object.assign(Object.assign({},M==null?void 0:M.style),j),onClose:()=>{V==null||V(),ne()}})),()=>{o(ee)}))},y={open:c,destroy:w=>{var E;w!==void 0?o(w):(E=t.current)===null||E===void 0||E.destroy()}};return["info","success","warning","error","loading"].forEach(w=>{const E=(P,M,z)=>{let F;P&&typeof P=="object"&&"content"in P?F=P:F={content:P};let k,U;typeof M=="function"?U=M:(k=M,U=z);const X=Object.assign(Object.assign({onClose:U,duration:k},F),{type:w});return c(X)};y[w]=E}),y},[]),T.createElement(Ej,Object.assign({key:"message-holder"},e,{ref:t}))]}function Cj(e){return Cz(e)}function To(){To=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,o=Object.defineProperty||function(ue,oe,fe){ue[oe]=fe.value},c=typeof Symbol=="function"?Symbol:{},f=c.iterator||"@@iterator",y=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function w(ue,oe,fe){return Object.defineProperty(ue,oe,{value:fe,enumerable:!0,configurable:!0,writable:!0}),ue[oe]}try{w({},"")}catch{w=function(fe,Ee,ke){return fe[Ee]=ke}}function E(ue,oe,fe,Ee){var ke=oe&&oe.prototype instanceof z?oe:z,Le=Object.create(ke.prototype),Ne=new te(Ee||[]);return o(Le,"_invoke",{value:ee(ue,fe,Ne)}),Le}function P(ue,oe,fe){try{return{type:"normal",arg:ue.call(oe,fe)}}catch(Ee){return{type:"throw",arg:Ee}}}e.wrap=E;var M={};function z(){}function F(){}function k(){}var U={};w(U,f,function(){return this});var X=Object.getPrototypeOf,$=X&&X(X(ge([])));$&&$!==t&&r.call($,f)&&(U=$);var j=k.prototype=z.prototype=Object.create(U);function V(ue){["next","throw","return"].forEach(function(oe){w(ue,oe,function(fe){return this._invoke(oe,fe)})})}function Z(ue,oe){function fe(ke,Le,Ne,pe){var He=P(ue[ke],ue,Le);if(He.type!=="throw"){var Be=He.arg,Ge=Be.value;return Ge&&Zn(Ge)=="object"&&r.call(Ge,"__await")?oe.resolve(Ge.__await).then(function(Qe){fe("next",Qe,Ne,pe)},function(Qe){fe("throw",Qe,Ne,pe)}):oe.resolve(Ge).then(function(Qe){Be.value=Qe,Ne(Be)},function(Qe){return fe("throw",Qe,Ne,pe)})}pe(He.arg)}var Ee;o(this,"_invoke",{value:function(Le,Ne){function pe(){return new oe(function(He,Be){fe(Le,Ne,He,Be)})}return Ee=Ee?Ee.then(pe,pe):pe()}})}function ee(ue,oe,fe){var Ee="suspendedStart";return function(ke,Le){if(Ee==="executing")throw new Error("Generator is already running");if(Ee==="completed"){if(ke==="throw")throw Le;return{value:void 0,done:!0}}for(fe.method=ke,fe.arg=Le;;){var Ne=fe.delegate;if(Ne){var pe=ne(Ne,fe);if(pe){if(pe===M)continue;return pe}}if(fe.method==="next")fe.sent=fe._sent=fe.arg;else if(fe.method==="throw"){if(Ee==="suspendedStart")throw Ee="completed",fe.arg;fe.dispatchException(fe.arg)}else fe.method==="return"&&fe.abrupt("return",fe.arg);Ee="executing";var He=P(ue,oe,fe);if(He.type==="normal"){if(Ee=fe.done?"completed":"suspendedYield",He.arg===M)continue;return{value:He.arg,done:fe.done}}He.type==="throw"&&(Ee="completed",fe.method="throw",fe.arg=He.arg)}}}function ne(ue,oe){var fe=oe.method,Ee=ue.iterator[fe];if(Ee===void 0)return oe.delegate=null,fe==="throw"&&ue.iterator.return&&(oe.method="return",oe.arg=void 0,ne(ue,oe),oe.method==="throw")||fe!=="return"&&(oe.method="throw",oe.arg=new TypeError("The iterator does not provide a '"+fe+"' method")),M;var ke=P(Ee,ue.iterator,oe.arg);if(ke.type==="throw")return oe.method="throw",oe.arg=ke.arg,oe.delegate=null,M;var Le=ke.arg;return Le?Le.done?(oe[ue.resultName]=Le.value,oe.next=ue.nextLoc,oe.method!=="return"&&(oe.method="next",oe.arg=void 0),oe.delegate=null,M):Le:(oe.method="throw",oe.arg=new TypeError("iterator result is not an object"),oe.delegate=null,M)}function Q(ue){var oe={tryLoc:ue[0]};1 in ue&&(oe.catchLoc=ue[1]),2 in ue&&(oe.finallyLoc=ue[2],oe.afterLoc=ue[3]),this.tryEntries.push(oe)}function ie(ue){var oe=ue.completion||{};oe.type="normal",delete oe.arg,ue.completion=oe}function te(ue){this.tryEntries=[{tryLoc:"root"}],ue.forEach(Q,this),this.reset(!0)}function ge(ue){if(ue||ue===""){var oe=ue[f];if(oe)return oe.call(ue);if(typeof ue.next=="function")return ue;if(!isNaN(ue.length)){var fe=-1,Ee=function ke(){for(;++fe<ue.length;)if(r.call(ue,fe))return ke.value=ue[fe],ke.done=!1,ke;return ke.value=void 0,ke.done=!0,ke};return Ee.next=Ee}}throw new TypeError(Zn(ue)+" is not iterable")}return F.prototype=k,o(j,"constructor",{value:k,configurable:!0}),o(k,"constructor",{value:F,configurable:!0}),F.displayName=w(k,l,"GeneratorFunction"),e.isGeneratorFunction=function(ue){var oe=typeof ue=="function"&&ue.constructor;return!!oe&&(oe===F||(oe.displayName||oe.name)==="GeneratorFunction")},e.mark=function(ue){return Object.setPrototypeOf?Object.setPrototypeOf(ue,k):(ue.__proto__=k,w(ue,l,"GeneratorFunction")),ue.prototype=Object.create(j),ue},e.awrap=function(ue){return{__await:ue}},V(Z.prototype),w(Z.prototype,y,function(){return this}),e.AsyncIterator=Z,e.async=function(ue,oe,fe,Ee,ke){ke===void 0&&(ke=Promise);var Le=new Z(E(ue,oe,fe,Ee),ke);return e.isGeneratorFunction(oe)?Le:Le.next().then(function(Ne){return Ne.done?Ne.value:Le.next()})},V(j),w(j,l,"Generator"),w(j,f,function(){return this}),w(j,"toString",function(){return"[object Generator]"}),e.keys=function(ue){var oe=Object(ue),fe=[];for(var Ee in oe)fe.push(Ee);return fe.reverse(),function ke(){for(;fe.length;){var Le=fe.pop();if(Le in oe)return ke.value=Le,ke.done=!1,ke}return ke.done=!0,ke}},e.values=ge,te.prototype={constructor:te,reset:function(oe){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(ie),!oe)for(var fe in this)fe.charAt(0)==="t"&&r.call(this,fe)&&!isNaN(+fe.slice(1))&&(this[fe]=void 0)},stop:function(){this.done=!0;var oe=this.tryEntries[0].completion;if(oe.type==="throw")throw oe.arg;return this.rval},dispatchException:function(oe){if(this.done)throw oe;var fe=this;function Ee(Be,Ge){return Ne.type="throw",Ne.arg=oe,fe.next=Be,Ge&&(fe.method="next",fe.arg=void 0),!!Ge}for(var ke=this.tryEntries.length-1;ke>=0;--ke){var Le=this.tryEntries[ke],Ne=Le.completion;if(Le.tryLoc==="root")return Ee("end");if(Le.tryLoc<=this.prev){var pe=r.call(Le,"catchLoc"),He=r.call(Le,"finallyLoc");if(pe&&He){if(this.prev<Le.catchLoc)return Ee(Le.catchLoc,!0);if(this.prev<Le.finallyLoc)return Ee(Le.finallyLoc)}else if(pe){if(this.prev<Le.catchLoc)return Ee(Le.catchLoc,!0)}else{if(!He)throw new Error("try statement without catch or finally");if(this.prev<Le.finallyLoc)return Ee(Le.finallyLoc)}}}},abrupt:function(oe,fe){for(var Ee=this.tryEntries.length-1;Ee>=0;--Ee){var ke=this.tryEntries[Ee];if(ke.tryLoc<=this.prev&&r.call(ke,"finallyLoc")&&this.prev<ke.finallyLoc){var Le=ke;break}}Le&&(oe==="break"||oe==="continue")&&Le.tryLoc<=fe&&fe<=Le.finallyLoc&&(Le=null);var Ne=Le?Le.completion:{};return Ne.type=oe,Ne.arg=fe,Le?(this.method="next",this.next=Le.finallyLoc,M):this.complete(Ne)},complete:function(oe,fe){if(oe.type==="throw")throw oe.arg;return oe.type==="break"||oe.type==="continue"?this.next=oe.arg:oe.type==="return"?(this.rval=this.arg=oe.arg,this.method="return",this.next="end"):oe.type==="normal"&&fe&&(this.next=fe),M},finish:function(oe){for(var fe=this.tryEntries.length-1;fe>=0;--fe){var Ee=this.tryEntries[fe];if(Ee.finallyLoc===oe)return this.complete(Ee.completion,Ee.afterLoc),ie(Ee),M}},catch:function(oe){for(var fe=this.tryEntries.length-1;fe>=0;--fe){var Ee=this.tryEntries[fe];if(Ee.tryLoc===oe){var ke=Ee.completion;if(ke.type==="throw"){var Le=ke.arg;ie(Ee)}return Le}}throw new Error("illegal catch attempt")},delegateYield:function(oe,fe,Ee){return this.delegate={iterator:ge(oe),resultName:fe,nextLoc:Ee},this.method==="next"&&(this.arg=void 0),M}},e}function JI(e,t,r,o,c,f,y){try{var l=e[f](y),w=l.value}catch(E){r(E);return}l.done?t(w):Promise.resolve(w).then(o,c)}function Ou(e){return function(){var t=this,r=arguments;return new Promise(function(o,c){var f=e.apply(t,r);function y(w){JI(f,o,c,y,l,"next",w)}function l(w){JI(f,o,c,y,l,"throw",w)}y(void 0)})}}var Sm=st({},r4),Tj=Sm.version,Ij=Sm.render,Mj=Sm.unmountComponentAtNode,M0;try{var Pj=Number((Tj||"").split(".")[0]);Pj>=18&&(M0=Sm.createRoot)}catch{}function QI(e){var t=Sm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;t&&Zn(t)==="object"&&(t.usingClientEntryPoint=e)}var Dy="__rc_react_root__";function Aj(e,t){QI(!0);var r=t[Dy]||M0(t);QI(!1),r.render(e),t[Dy]=r}function Rj(e,t){Ij(e,t)}function ZS(e,t){if(M0){Aj(e,t);return}Rj(e,t)}function Oj(e){return tw.apply(this,arguments)}function tw(){return tw=Ou(To().mark(function e(t){return To().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",Promise.resolve().then(function(){var c;(c=t[Dy])===null||c===void 0||c.unmount(),delete t[Dy]}));case 1:case"end":return o.stop()}},e)})),tw.apply(this,arguments)}function zj(e){Mj(e)}function Lj(e){return nw.apply(this,arguments)}function nw(){return nw=Ou(To().mark(function e(t){return To().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(M0===void 0){o.next=2;break}return o.abrupt("return",Oj(t));case 2:zj(t);case 3:case"end":return o.stop()}},e)})),nw.apply(this,arguments)}const Tz=(e,t,r)=>r!==void 0?r:`${e}-${t}`,Iz=function(e){if(!e)return!1;if(e instanceof Element){if(e.offsetParent)return!0;if(e.getBBox){var t=e.getBBox(),r=t.width,o=t.height;if(r||o)return!0}if(e.getBoundingClientRect){var c=e.getBoundingClientRect(),f=c.width,y=c.height;if(f||y)return!0}}return!1},Dj=e=>{const{componentCls:t,colorPrimary:r}=e;return{[t]:{position:"absolute",background:"transparent",pointerEvents:"none",boxSizing:"border-box",color:`var(--wave-color, ${r})`,boxShadow:"0 0 0 0 currentcolor",opacity:.2,"&.wave-motion-appear":{transition:[`box-shadow 0.4s ${e.motionEaseOutCirc}`,`opacity 2s ${e.motionEaseOutCirc}`].join(","),"&-active":{boxShadow:"0 0 0 6px currentcolor",opacity:0},"&.wave-quick":{transition:[`box-shadow 0.3s ${e.motionEaseInOut}`,`opacity 0.35s ${e.motionEaseInOut}`].join(",")}}}}},kj=ro("Wave",e=>[Dj(e)]);function $j(e){const t=(e||"").match(/rgba?\((\d*), (\d*), (\d*)(, [\d.]*)?\)/);return t&&t[1]&&t[2]&&t[3]?!(t[1]===t[2]&&t[2]===t[3]):!0}function u1(e){return e&&e!=="#fff"&&e!=="#ffffff"&&e!=="rgb(255, 255, 255)"&&e!=="rgba(255, 255, 255, 1)"&&$j(e)&&!/rgba\((?:\d*, ){3}0\)/.test(e)&&e!=="transparent"}function Fj(e){const{borderTopColor:t,borderColor:r,backgroundColor:o}=getComputedStyle(e);return u1(t)?t:u1(r)?r:u1(o)?o:null}const Mz="ant-wave-target";function d1(e){return Number.isNaN(e)?0:e}const Bj=e=>{const{className:t,target:r,component:o}=e,c=T.useRef(null),[f,y]=T.useState(null),[l,w]=T.useState([]),[E,P]=T.useState(0),[M,z]=T.useState(0),[F,k]=T.useState(0),[U,X]=T.useState(0),[$,j]=T.useState(!1),V={left:E,top:M,width:F,height:U,borderRadius:l.map(ne=>`${ne}px`).join(" ")};f&&(V["--wave-color"]=f);function Z(){const ne=getComputedStyle(r);y(Fj(r));const Q=ne.position==="static",{borderLeftWidth:ie,borderTopWidth:te}=ne;P(Q?r.offsetLeft:d1(-parseFloat(ie))),z(Q?r.offsetTop:d1(-parseFloat(te))),k(r.offsetWidth),X(r.offsetHeight);const{borderTopLeftRadius:ge,borderTopRightRadius:ue,borderBottomLeftRadius:oe,borderBottomRightRadius:fe}=ne;w([ge,ue,fe,oe].map(Ee=>d1(parseFloat(Ee))))}if(T.useEffect(()=>{if(r){const ne=yi(()=>{Z(),j(!0)});let Q;return typeof ResizeObserver<"u"&&(Q=new ResizeObserver(Z),Q.observe(r)),()=>{yi.cancel(ne),Q==null||Q.disconnect()}}},[]),!$)return null;const ee=(o==="Checkbox"||o==="Radio")&&(r==null?void 0:r.classList.contains(Mz));return T.createElement(Ah,{visible:!0,motionAppear:!0,motionName:"wave-motion",motionDeadline:5e3,onAppearEnd:(ne,Q)=>{var ie;if(Q.deadline||Q.propertyName==="opacity"){const te=(ie=c.current)===null||ie===void 0?void 0:ie.parentElement;Lj(te).then(()=>{te==null||te.remove()})}return!1}},ne=>{let{className:Q}=ne;return T.createElement("div",{ref:c,className:Tt(t,{"wave-quick":ee},Q),style:V})})},Nj=(e,t)=>{var r;const{component:o}=t;if(o==="Checkbox"&&!(!((r=e.querySelector("input"))===null||r===void 0)&&r.checked))return;const c=document.createElement("div");c.style.position="absolute",c.style.left="0px",c.style.top="0px",e==null||e.insertBefore(c,e==null?void 0:e.firstChild),ZS(T.createElement(Bj,Object.assign({},t,{target:e})),c)},jj=Nj;function Uj(e,t,r){const{wave:o}=T.useContext(ur),[,c,f]=Na(),y=jo(E=>{const P=e.current;if(o!=null&&o.disabled||!P)return;const M=P.querySelector(`.${Mz}`)||P,{showEffect:z}=o||{};(z||jj)(M,{className:t,token:c,component:r,event:E,hashId:f})}),l=T.useRef();return E=>{yi.cancel(l.current),l.current=yi(()=>{y(E)})}}const Vj=e=>{const{children:t,disabled:r,component:o}=e,{getPrefixCls:c}=T.useContext(ur),f=T.useRef(null),y=c("wave"),[,l]=kj(y),w=Uj(f,Tt(y,l),o);if(lt.useEffect(()=>{const P=f.current;if(!P||P.nodeType!==1||r)return;const M=z=>{!Iz(z.target)||!P.getAttribute||P.getAttribute("disabled")||P.disabled||P.className.includes("disabled")||P.className.includes("-leave")||w(z)};return P.addEventListener("click",M,!0),()=>{P.removeEventListener("click",M,!0)}},[r]),!lt.isValidElement(t))return t??null;const E=xm(t)?Ba(t.ref,f):f;return yl(t,{ref:E})},Hj=Vj,Gj=e=>{const t=lt.useContext(E0);return lt.useMemo(()=>e?typeof e=="string"?e??t:e instanceof Function?e(t):t:t,[e,t])},Sl=Gj,Wj=e=>{const{componentCls:t}=e;return{[t]:{"&-block":{display:"flex",width:"100%"},"&-vertical":{flexDirection:"column"}}}},qj=Wj,Zj=e=>{const{componentCls:t}=e;return{[t]:{display:"inline-flex","&-rtl":{direction:"rtl"},"&-vertical":{flexDirection:"column"},"&-align":{flexDirection:"column","&-center":{alignItems:"center"},"&-start":{alignItems:"flex-start"},"&-end":{alignItems:"flex-end"},"&-baseline":{alignItems:"baseline"}},[`${t}-item:empty`]:{display:"none"}}}},Xj=e=>{const{componentCls:t}=e;return{[t]:{"&-gap-row-small":{rowGap:e.spaceGapSmallSize},"&-gap-row-middle":{rowGap:e.spaceGapMiddleSize},"&-gap-row-large":{rowGap:e.spaceGapLargeSize},"&-gap-col-small":{columnGap:e.spaceGapSmallSize},"&-gap-col-middle":{columnGap:e.spaceGapMiddleSize},"&-gap-col-large":{columnGap:e.spaceGapLargeSize}}}},Pz=ro("Space",e=>{const t=Lr(e,{spaceGapSmallSize:e.paddingXS,spaceGapMiddleSize:e.padding,spaceGapLargeSize:e.paddingLG});return[Zj(t),Xj(t),qj(t)]},()=>({}),{resetStyle:!1});var Az=globalThis&&globalThis.__rest||function(e,t){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(e);c<o.length;c++)t.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(e,o[c])&&(r[o[c]]=e[o[c]]);return r};const P0=T.createContext(null),A0=(e,t)=>{const r=T.useContext(P0),o=T.useMemo(()=>{if(!r)return"";const{compactDirection:c,isFirstItem:f,isLastItem:y}=r,l=c==="vertical"?"-vertical-":"-";return Tt(`${e}-compact${l}item`,{[`${e}-compact${l}first-item`]:f,[`${e}-compact${l}last-item`]:y,[`${e}-compact${l}item-rtl`]:t==="rtl"})},[e,t,r]);return{compactSize:r==null?void 0:r.compactSize,compactDirection:r==null?void 0:r.compactDirection,compactItemClassnames:o}},rw=e=>{let{children:t}=e;return T.createElement(P0.Provider,{value:null},t)},Kj=e=>{var{children:t}=e,r=Az(e,["children"]);return T.createElement(P0.Provider,{value:r},t)},Yj=e=>{const{getPrefixCls:t,direction:r}=T.useContext(ur),{size:o,direction:c,block:f,prefixCls:y,className:l,rootClassName:w,children:E}=e,P=Az(e,["size","direction","block","prefixCls","className","rootClassName","children"]),M=Sl(V=>o??V),z=t("space-compact",y),[F,k]=Pz(z),U=Tt(z,k,{[`${z}-rtl`]:r==="rtl",[`${z}-block`]:f,[`${z}-vertical`]:c==="vertical"},l,w),X=T.useContext(P0),$=fl(E),j=T.useMemo(()=>$.map((V,Z)=>{const ee=V&&V.key||`${z}-item-${Z}`;return T.createElement(Kj,{key:ee,compactSize:M,compactDirection:c,isFirstItem:Z===0&&(!X||(X==null?void 0:X.isFirstItem)),isLastItem:Z===$.length-1&&(!X||(X==null?void 0:X.isLastItem))},V)}),[o,$,X]);return $.length===0?null:F(T.createElement("div",Object.assign({className:U},P),j))},Jj=Yj;var Qj=globalThis&&globalThis.__rest||function(e,t){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(e);c<o.length;c++)t.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(e,o[c])&&(r[o[c]]=e[o[c]]);return r};const Rz=T.createContext(void 0),e8=e=>{const{getPrefixCls:t,direction:r}=T.useContext(ur),{prefixCls:o,size:c,className:f}=e,y=Qj(e,["prefixCls","size","className"]),l=t("btn-group",o),[,,w]=Na();let E="";switch(c){case"large":E="lg";break;case"small":E="sm";break}const P=Tt(l,{[`${l}-${E}`]:E,[`${l}-rtl`]:r==="rtl"},f,w);return T.createElement(Rz.Provider,{value:c},T.createElement("div",Object.assign({},y,{className:P})))},t8=e8,eM=/^[\u4e00-\u9fa5]{2}$/,iw=eM.test.bind(eM);function tM(e){return typeof e=="string"}function h1(e){return e==="text"||e==="link"}function n8(e,t){if(e==null)return;const r=t?" ":"";return typeof e!="string"&&typeof e!="number"&&tM(e.type)&&iw(e.props.children)?yl(e,{children:e.props.children.split("").join(r)}):tM(e)?iw(e)?lt.createElement("span",null,e.split("").join(r)):lt.createElement("span",null,e):_z(e)?lt.createElement("span",null,e):e}function r8(e,t){let r=!1;const o=[];return lt.Children.forEach(e,c=>{const f=typeof c,y=f==="string"||f==="number";if(r&&y){const l=o.length-1,w=o[l];o[l]=`${w}${c}`}else o.push(c);r=y}),lt.Children.map(o,c=>n8(c,t))}const i8=T.forwardRef((e,t)=>{const{className:r,style:o,children:c,prefixCls:f}=e,y=Tt(`${f}-icon`,r);return lt.createElement("span",{ref:t,className:y,style:o},c)}),Oz=i8,nM=T.forwardRef((e,t)=>{let{prefixCls:r,className:o,style:c,iconClassName:f}=e;const y=Tt(`${r}-loading-icon`,o);return lt.createElement(Oz,{prefixCls:r,className:y,style:c,ref:t},lt.createElement(WS,{className:f}))}),f1=()=>({width:0,opacity:0,transform:"scale(0)"}),p1=e=>({width:e.scrollWidth,opacity:1,transform:"scale(1)"}),o8=e=>{const{prefixCls:t,loading:r,existIcon:o,className:c,style:f}=e,y=!!r;return o?lt.createElement(nM,{prefixCls:t,className:c,style:f}):lt.createElement(Ah,{visible:y,motionName:`${t}-loading-icon-motion`,motionLeave:y,removeOnLeave:!0,onAppearStart:f1,onAppearActive:p1,onEnterStart:f1,onEnterActive:p1,onLeaveStart:p1,onLeaveActive:f1},(l,w)=>{let{className:E,style:P}=l;return lt.createElement(nM,{prefixCls:t,className:c,style:Object.assign(Object.assign({},f),P),ref:w,iconClassName:E})})},a8=o8,rM=(e,t)=>({[`> span, > ${e}`]:{"&:not(:last-child)":{[`&, & > ${e}`]:{"&:not(:disabled)":{borderInlineEndColor:t}}},"&:not(:first-child)":{[`&, & > ${e}`]:{"&:not(:disabled)":{borderInlineStartColor:t}}}}}),s8=e=>{const{componentCls:t,fontSize:r,lineWidth:o,groupBorderColor:c,colorErrorHover:f}=e;return{[`${t}-group`]:[{position:"relative",display:"inline-flex",[`> span, > ${t}`]:{"&:not(:last-child)":{[`&, & > ${t}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},"&:not(:first-child)":{marginInlineStart:-o,[`&, & > ${t}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}},[t]:{position:"relative",zIndex:1,"&:hover,\n          &:focus,\n          &:active":{zIndex:2},"&[disabled]":{zIndex:0}},[`${t}-icon-only`]:{fontSize:r}},rM(`${t}-primary`,c),rM(`${t}-danger`,f)]}},l8=s8,c8=e=>{const{componentCls:t,iconCls:r,fontWeight:o}=e;return{[t]:{outline:"none",position:"relative",display:"inline-block",fontWeight:o,whiteSpace:"nowrap",textAlign:"center",backgroundImage:"none",backgroundColor:"transparent",border:`${e.lineWidth}px ${e.lineType} transparent`,cursor:"pointer",transition:`all ${e.motionDurationMid} ${e.motionEaseInOut}`,userSelect:"none",touchAction:"manipulation",lineHeight:e.lineHeight,color:e.colorText,"&:disabled > *":{pointerEvents:"none"},"> span":{display:"inline-block"},[`${t}-icon`]:{lineHeight:0},[`> ${r} + span, > span + ${r}`]:{marginInlineStart:e.marginXS},[`&:not(${t}-icon-only) > ${t}-icon`]:{[`&${t}-loading-icon, &:not(:last-child)`]:{marginInlineEnd:e.marginXS}},"> a":{color:"currentColor"},"&:not(:disabled)":Object.assign({},KO(e)),[`&${t}-two-chinese-chars::first-letter`]:{letterSpacing:"0.34em"},[`&${t}-two-chinese-chars > *:not(${r})`]:{marginInlineEnd:"-0.34em",letterSpacing:"0.34em"},[`&-icon-only${t}-compact-item`]:{flex:"none"},[`&-compact-item${t}-primary`]:{[`&:not([disabled]) + ${t}-compact-item${t}-primary:not([disabled])`]:{position:"relative","&:before":{position:"absolute",top:-e.lineWidth,insetInlineStart:-e.lineWidth,display:"inline-block",width:e.lineWidth,height:`calc(100% + ${e.lineWidth*2}px)`,backgroundColor:e.colorPrimaryHover,content:'""'}}},"&-compact-vertical-item":{[`&${t}-primary`]:{[`&:not([disabled]) + ${t}-compact-vertical-item${t}-primary:not([disabled])`]:{position:"relative","&:before":{position:"absolute",top:-e.lineWidth,insetInlineStart:-e.lineWidth,display:"inline-block",width:`calc(100% + ${e.lineWidth*2}px)`,height:e.lineWidth,backgroundColor:e.colorPrimaryHover,content:'""'}}}}}}},_l=(e,t,r)=>({[`&:not(:disabled):not(${e}-disabled)`]:{"&:hover":t,"&:active":r}}),u8=e=>({minWidth:e.controlHeight,paddingInlineStart:0,paddingInlineEnd:0,borderRadius:"50%"}),d8=e=>({borderRadius:e.controlHeight,paddingInlineStart:e.controlHeight/2,paddingInlineEnd:e.controlHeight/2}),h8=e=>({cursor:"not-allowed",borderColor:e.borderColorDisabled,color:e.colorTextDisabled,backgroundColor:e.colorBgContainerDisabled,boxShadow:"none"}),cm=(e,t,r,o,c,f,y,l)=>({[`&${e}-background-ghost`]:Object.assign(Object.assign({color:r||void 0,backgroundColor:t,borderColor:o||void 0,boxShadow:"none"},_l(e,Object.assign({backgroundColor:t},y),Object.assign({backgroundColor:t},l))),{"&:disabled":{cursor:"not-allowed",color:c||void 0,borderColor:f||void 0}})}),XS=e=>({[`&:disabled, &${e.componentCls}-disabled`]:Object.assign({},h8(e))}),zz=e=>Object.assign({},XS(e)),ky=e=>({[`&:disabled, &${e.componentCls}-disabled`]:{cursor:"not-allowed",color:e.colorTextDisabled}}),Lz=e=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},zz(e)),{backgroundColor:e.defaultBg,borderColor:e.defaultBorderColor,color:e.defaultColor,boxShadow:e.defaultShadow}),_l(e.componentCls,{color:e.colorPrimaryHover,borderColor:e.colorPrimaryHover},{color:e.colorPrimaryActive,borderColor:e.colorPrimaryActive})),cm(e.componentCls,e.ghostBg,e.defaultGhostColor,e.defaultGhostBorderColor,e.colorTextDisabled,e.colorBorder)),{[`&${e.componentCls}-dangerous`]:Object.assign(Object.assign(Object.assign({color:e.colorError,borderColor:e.colorError},_l(e.componentCls,{color:e.colorErrorHover,borderColor:e.colorErrorBorderHover},{color:e.colorErrorActive,borderColor:e.colorErrorActive})),cm(e.componentCls,e.ghostBg,e.colorError,e.colorError,e.colorTextDisabled,e.colorBorder)),XS(e))}),f8=e=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},zz(e)),{color:e.primaryColor,backgroundColor:e.colorPrimary,boxShadow:e.primaryShadow}),_l(e.componentCls,{color:e.colorTextLightSolid,backgroundColor:e.colorPrimaryHover},{color:e.colorTextLightSolid,backgroundColor:e.colorPrimaryActive})),cm(e.componentCls,e.ghostBg,e.colorPrimary,e.colorPrimary,e.colorTextDisabled,e.colorBorder,{color:e.colorPrimaryHover,borderColor:e.colorPrimaryHover},{color:e.colorPrimaryActive,borderColor:e.colorPrimaryActive})),{[`&${e.componentCls}-dangerous`]:Object.assign(Object.assign(Object.assign({backgroundColor:e.colorError,boxShadow:e.dangerShadow,color:e.dangerColor},_l(e.componentCls,{backgroundColor:e.colorErrorHover},{backgroundColor:e.colorErrorActive})),cm(e.componentCls,e.ghostBg,e.colorError,e.colorError,e.colorTextDisabled,e.colorBorder,{color:e.colorErrorHover,borderColor:e.colorErrorHover},{color:e.colorErrorActive,borderColor:e.colorErrorActive})),XS(e))}),p8=e=>Object.assign(Object.assign({},Lz(e)),{borderStyle:"dashed"}),m8=e=>Object.assign(Object.assign(Object.assign({color:e.colorLink},_l(e.componentCls,{color:e.colorLinkHover,backgroundColor:e.linkHoverBg},{color:e.colorLinkActive})),ky(e)),{[`&${e.componentCls}-dangerous`]:Object.assign(Object.assign({color:e.colorError},_l(e.componentCls,{color:e.colorErrorHover},{color:e.colorErrorActive})),ky(e))}),g8=e=>Object.assign(Object.assign(Object.assign({},_l(e.componentCls,{color:e.colorText,backgroundColor:e.textHoverBg},{color:e.colorText,backgroundColor:e.colorBgTextActive})),ky(e)),{[`&${e.componentCls}-dangerous`]:Object.assign(Object.assign({color:e.colorError},ky(e)),_l(e.componentCls,{color:e.colorErrorHover,backgroundColor:e.colorErrorBg},{color:e.colorErrorHover,backgroundColor:e.colorErrorBg}))}),v8=e=>{const{componentCls:t}=e;return{[`${t}-default`]:Lz(e),[`${t}-primary`]:f8(e),[`${t}-dashed`]:p8(e),[`${t}-link`]:m8(e),[`${t}-text`]:g8(e),[`${t}-ghost`]:cm(e.componentCls,e.ghostBg,e.colorBgContainer,e.colorBgContainer,e.colorTextDisabled,e.colorBorder)}},KS=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const{componentCls:r,controlHeight:o,fontSize:c,lineHeight:f,lineWidth:y,borderRadius:l,buttonPaddingHorizontal:w,iconCls:E}=e,P=Math.max(0,(o-c*f)/2-y),M=`${r}-icon-only`;return[{[`${r}${t}`]:{fontSize:c,height:o,padding:`${P}px ${w}px`,borderRadius:l,[`&${M}`]:{width:o,paddingInlineStart:0,paddingInlineEnd:0,[`&${r}-round`]:{width:"auto"},[E]:{fontSize:e.buttonIconOnlyFontSize}},[`&${r}-loading`]:{opacity:e.opacityLoading,cursor:"default"},[`${r}-loading-icon`]:{transition:`width ${e.motionDurationSlow} ${e.motionEaseInOut}, opacity ${e.motionDurationSlow} ${e.motionEaseInOut}`}}},{[`${r}${r}-circle${t}`]:u8(e)},{[`${r}${r}-round${t}`]:d8(e)}]},y8=e=>KS(Lr(e,{fontSize:e.contentFontSize})),_8=e=>{const t=Lr(e,{controlHeight:e.controlHeightSM,fontSize:e.contentFontSizeSM,padding:e.paddingXS,buttonPaddingHorizontal:e.paddingInlineSM,borderRadius:e.borderRadiusSM,buttonIconOnlyFontSize:e.onlyIconSizeSM});return KS(t,`${e.componentCls}-sm`)},x8=e=>{const t=Lr(e,{controlHeight:e.controlHeightLG,fontSize:e.contentFontSizeLG,buttonPaddingHorizontal:e.paddingInlineLG,borderRadius:e.borderRadiusLG,buttonIconOnlyFontSize:e.onlyIconSizeLG});return KS(t,`${e.componentCls}-lg`)},b8=e=>{const{componentCls:t}=e;return{[t]:{[`&${t}-block`]:{width:"100%"}}}},Dz=e=>{const{paddingInline:t,onlyIconSize:r}=e;return Lr(e,{buttonPaddingHorizontal:t,buttonIconOnlyFontSize:r})},kz=e=>({fontWeight:400,defaultShadow:`0 ${e.controlOutlineWidth}px 0 ${e.controlTmpOutline}`,primaryShadow:`0 ${e.controlOutlineWidth}px 0 ${e.controlOutline}`,dangerShadow:`0 ${e.controlOutlineWidth}px 0 ${e.colorErrorOutline}`,primaryColor:e.colorTextLightSolid,dangerColor:e.colorTextLightSolid,borderColorDisabled:e.colorBorder,defaultGhostColor:e.colorBgContainer,ghostBg:"transparent",defaultGhostBorderColor:e.colorBgContainer,paddingInline:e.paddingContentHorizontal-e.lineWidth,paddingInlineLG:e.paddingContentHorizontal-e.lineWidth,paddingInlineSM:8-e.lineWidth,onlyIconSize:e.fontSizeLG,onlyIconSizeSM:e.fontSizeLG-2,onlyIconSizeLG:e.fontSizeLG+2,groupBorderColor:e.colorPrimaryHover,linkHoverBg:"transparent",textHoverBg:e.colorBgTextHover,defaultColor:e.colorText,defaultBg:e.colorBgContainer,defaultBorderColor:e.colorBorder,defaultBorderColorDisabled:e.colorBorder,contentFontSize:e.fontSize,contentFontSizeSM:e.fontSize,contentFontSizeLG:e.fontSizeLG}),w8=ro("Button",e=>{const t=Dz(e);return[c8(t),_8(t),y8(t),x8(t),b8(t),v8(t),l8(t)]},kz);function S8(e,t,r){const{focusElCls:o,focus:c,borderElCls:f}=r,y=f?"> *":"",l=["hover",c?"focus":null,"active"].filter(Boolean).map(w=>`&:${w} ${y}`).join(",");return{[`&-item:not(${t}-last-item)`]:{marginInlineEnd:-e.lineWidth},"&-item":Object.assign(Object.assign({[l]:{zIndex:2}},o?{[`&${o}`]:{zIndex:2}}:{}),{[`&[disabled] ${y}`]:{zIndex:0}})}}function E8(e,t,r){const{borderElCls:o}=r,c=o?`> ${o}`:"";return{[`&-item:not(${t}-first-item):not(${t}-last-item) ${c}`]:{borderRadius:0},[`&-item:not(${t}-last-item)${t}-first-item`]:{[`& ${c}, &${e}-sm ${c}, &${e}-lg ${c}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&-item:not(${t}-first-item)${t}-last-item`]:{[`& ${c}, &${e}-sm ${c}, &${e}-lg ${c}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}}}function YS(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{focus:!0};const{componentCls:r}=e,o=`${r}-compact`;return{[o]:Object.assign(Object.assign({},S8(e,o,t)),E8(r,o,t))}}function C8(e,t){return{[`&-item:not(${t}-last-item)`]:{marginBottom:-e.lineWidth},"&-item":{"&:hover,&:focus,&:active":{zIndex:2},"&[disabled]":{zIndex:0}}}}function T8(e,t){return{[`&-item:not(${t}-first-item):not(${t}-last-item)`]:{borderRadius:0},[`&-item${t}-first-item:not(${t}-last-item)`]:{[`&, &${e}-sm, &${e}-lg`]:{borderEndEndRadius:0,borderEndStartRadius:0}},[`&-item${t}-last-item:not(${t}-first-item)`]:{[`&, &${e}-sm, &${e}-lg`]:{borderStartStartRadius:0,borderStartEndRadius:0}}}}function I8(e){const t=`${e.componentCls}-compact-vertical`;return{[t]:Object.assign(Object.assign({},C8(e,t)),T8(e.componentCls,t))}}const M8=QO(["Button","compact"],e=>{const t=Dz(e);return[YS(t),I8(t)]},kz);var P8=globalThis&&globalThis.__rest||function(e,t){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(e);c<o.length;c++)t.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(e,o[c])&&(r[o[c]]=e[o[c]]);return r};function A8(e){if(typeof e=="object"&&e){let t=e==null?void 0:e.delay;return t=!Number.isNaN(t)&&typeof t=="number"?t:0,{loading:t<=0,delay:t}}return{loading:!!e,delay:0}}const R8=(e,t)=>{var r,o;const{loading:c=!1,prefixCls:f,type:y="default",danger:l,shape:w="default",size:E,styles:P,disabled:M,className:z,rootClassName:F,children:k,icon:U,ghost:X=!1,block:$=!1,htmlType:j="button",classNames:V,style:Z={}}=e,ee=P8(e,["loading","prefixCls","type","danger","shape","size","styles","disabled","className","rootClassName","children","icon","ghost","block","htmlType","classNames","style"]),{getPrefixCls:ne,autoInsertSpaceInButton:Q,direction:ie,button:te}=T.useContext(ur),ge=ne("btn",f),[ue,oe]=w8(ge),fe=T.useContext(bm),Ee=M??fe,ke=T.useContext(Rz),Le=T.useMemo(()=>A8(c),[c]),[Ne,pe]=T.useState(Le.loading),[He,Be]=T.useState(!1),Qe=Ba(t,T.createRef()),gt=T.Children.count(k)===1&&!U&&!h1(y);T.useEffect(()=>{let rt=null;Le.delay>0?rt=setTimeout(()=>{rt=null,pe(!0)},Le.delay):pe(Le.loading);function kt(){rt&&(clearTimeout(rt),rt=null)}return kt},[Le]),T.useEffect(()=>{if(!Qe||!Qe.current||Q===!1)return;const rt=Qe.current.textContent;gt&&iw(rt)?He||Be(!0):He&&Be(!1)},[Qe]);const St=rt=>{const{onClick:kt}=e;if(Ne||Ee){rt.preventDefault();return}kt==null||kt(rt)},xt=Q!==!1,{compactSize:jt,compactItemClassnames:Ut}=A0(ge,ie),bt={large:"lg",small:"sm",middle:void 0},ut=Sl(rt=>{var kt,Pt;return(Pt=(kt=E??jt)!==null&&kt!==void 0?kt:ke)!==null&&Pt!==void 0?Pt:rt}),It=ut&&bt[ut]||"",ft=Ne?"loading":U,yt=wl(ee,["navigate"]),ct=Tt(ge,oe,{[`${ge}-${w}`]:w!=="default"&&w,[`${ge}-${y}`]:y,[`${ge}-${It}`]:It,[`${ge}-icon-only`]:!k&&k!==0&&!!ft,[`${ge}-background-ghost`]:X&&!h1(y),[`${ge}-loading`]:Ne,[`${ge}-two-chinese-chars`]:He&&xt&&!Ne,[`${ge}-block`]:$,[`${ge}-dangerous`]:!!l,[`${ge}-rtl`]:ie==="rtl"},Ut,z,F,te==null?void 0:te.className),Mt=Object.assign(Object.assign({},te==null?void 0:te.style),Z),Ct=Tt(V==null?void 0:V.icon,(r=te==null?void 0:te.classNames)===null||r===void 0?void 0:r.icon),Qt=Object.assign(Object.assign({},(P==null?void 0:P.icon)||{}),((o=te==null?void 0:te.styles)===null||o===void 0?void 0:o.icon)||{}),Vt=U&&!Ne?lt.createElement(Oz,{prefixCls:ge,className:Ct,style:Qt},U):lt.createElement(a8,{existIcon:!!U,prefixCls:ge,loading:!!Ne}),Nt=k||k===0?r8(k,gt&&xt):null;if(yt.href!==void 0)return ue(lt.createElement("a",Object.assign({},yt,{className:Tt(ct,{[`${ge}-disabled`]:Ee}),style:Mt,onClick:St,ref:Qe}),Vt,Nt));let ot=lt.createElement("button",Object.assign({},ee,{type:j,className:ct,style:Mt,onClick:St,disabled:Ee,ref:Qe}),Vt,Nt,Ut&&lt.createElement(M8,{key:"compact",prefixCls:ge}));return h1(y)||(ot=lt.createElement(Hj,{component:"Button",disabled:!!Ne},ot)),ue(ot)},JS=T.forwardRef(R8);JS.Group=t8;JS.__ANT_BUTTON=!0;const O8=JS;var $z=T.createContext(null),iM=[];function z8(e,t){var r=T.useState(function(){if(!no())return null;var k=document.createElement("div");return k}),o=Bt(r,1),c=o[0],f=T.useRef(!1),y=T.useContext($z),l=T.useState(iM),w=Bt(l,2),E=w[0],P=w[1],M=y||(f.current?void 0:function(k){P(function(U){var X=[k].concat(mn(U));return X})});function z(){c.parentElement||document.body.appendChild(c),f.current=!0}function F(){var k;(k=c.parentElement)===null||k===void 0||k.removeChild(c),f.current=!1}return zr(function(){return e?y?y(z):z():F(),F},[e]),zr(function(){E.length&&(E.forEach(function(k){return k()}),P(iM))},[E]),[c,M]}var m1;function L8(e){if(typeof document>"u")return 0;if(e||m1===void 0){var t=document.createElement("div");t.style.width="100%",t.style.height="200px";var r=document.createElement("div"),o=r.style;o.position="absolute",o.top="0",o.left="0",o.pointerEvents="none",o.visibility="hidden",o.width="200px",o.height="150px",o.overflow="hidden",r.appendChild(t),document.body.appendChild(r);var c=t.offsetWidth;r.style.overflow="scroll";var f=t.offsetWidth;c===f&&(f=r.clientWidth),document.body.removeChild(r),m1=c-f}return m1}function oM(e){var t=e.match(/^(.*)px$/),r=Number(t==null?void 0:t[1]);return Number.isNaN(r)?L8():r}function D8(e){if(typeof document>"u"||!e||!(e instanceof Element))return{width:0,height:0};var t=getComputedStyle(e,"::-webkit-scrollbar"),r=t.width,o=t.height;return{width:oM(r),height:oM(o)}}function k8(){return document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth}var $8="rc-util-locker-".concat(Date.now()),aM=0;function F8(e){var t=!!e,r=T.useState(function(){return aM+=1,"".concat($8,"_").concat(aM)}),o=Bt(r,1),c=o[0];zr(function(){if(t){var f=D8(document.body).width,y=k8();xh(`
html body {
  overflow-y: hidden;
  `.concat(y?"width: calc(100% - ".concat(f,"px);"):"",`
}`),c)}else Py(c);return function(){Py(c)}},[t,c])}var sM=!1;function B8(e){return typeof e=="boolean"&&(sM=e),sM}var lM=function(t){return t===!1?!1:!no()||!t?null:typeof t=="string"?document.querySelector(t):typeof t=="function"?t():t},Fz=T.forwardRef(function(e,t){var r=e.open,o=e.autoLock,c=e.getContainer;e.debug;var f=e.autoDestroy,y=f===void 0?!0:f,l=e.children,w=T.useState(r),E=Bt(w,2),P=E[0],M=E[1],z=P||r;T.useEffect(function(){(y||r)&&M(r)},[r,y]);var F=T.useState(function(){return lM(c)}),k=Bt(F,2),U=k[0],X=k[1];T.useEffect(function(){var ue=lM(c);X(ue??null)});var $=z8(z&&!U),j=Bt($,2),V=j[0],Z=j[1],ee=U??V;F8(o&&r&&no()&&(ee===V||ee===document.body));var ne=null;if(l&&xm(l)&&t){var Q=l;ne=Q.ref}var ie=_0(ne,t);if(!z||!no()||U===void 0)return null;var te=ee===!1||B8(),ge=l;return t&&(ge=T.cloneElement(l,{ref:ie})),T.createElement($z.Provider,{value:Z},te?ge:_c.createPortal(ge,ee))});function N8(){var e=st({},Wy);return e.useId}var cM=0,uM=N8();const j8=uM?function(t){var r=uM();return t||r}:function(t){var r=T.useState("ssr-id"),o=Bt(r,2),c=o[0],f=o[1];return T.useEffect(function(){var y=cM;cM+=1,f("rc_unique_".concat(y))},[]),t||c};var Bz=function(t){if(no()&&window.document.documentElement){var r=Array.isArray(t)?t:[t],o=window.document.documentElement;return r.some(function(c){return c in o.style})}return!1},U8=function(t,r){if(!Bz(t))return!1;var o=document.createElement("div"),c=o.style[t];return o.style[t]=r,o.style[t]!==c};function dM(e,t){return!Array.isArray(e)&&t!==void 0?U8(e,t):Bz(e)}const V8=lt.createContext(void 0),Nz=V8;var hu="RC_FORM_INTERNAL_HOOKS",Ur=function(){Vo(!1,"Can not find FormContext. Please make sure you wrap Field under Form.")},Sh=T.createContext({getFieldValue:Ur,getFieldsValue:Ur,getFieldError:Ur,getFieldWarning:Ur,getFieldsError:Ur,isFieldsTouched:Ur,isFieldTouched:Ur,isFieldValidating:Ur,isFieldsValidating:Ur,resetFields:Ur,setFields:Ur,setFieldValue:Ur,setFieldsValue:Ur,validateFields:Ur,submit:Ur,getInternalHooks:function(){return Ur(),{dispatch:Ur,initEntityValue:Ur,registerField:Ur,useSubscribe:Ur,setInitialValues:Ur,destroyForm:Ur,setCallbacks:Ur,registerWatch:Ur,getFields:Ur,setValidateMessages:Ur,setPreserve:Ur,getInitialValue:Ur}}}),$y=T.createContext(null);function ow(e){return e==null?[]:Array.isArray(e)?e:[e]}function H8(e){return e&&!!e._init}function fu(){return fu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},fu.apply(this,arguments)}function G8(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,um(e,t)}function aw(e){return aw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},aw(e)}function um(e,t){return um=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,c){return o.__proto__=c,o},um(e,t)}function W8(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function qv(e,t,r){return W8()?qv=Reflect.construct.bind():qv=function(c,f,y){var l=[null];l.push.apply(l,f);var w=Function.bind.apply(c,l),E=new w;return y&&um(E,y.prototype),E},qv.apply(null,arguments)}function q8(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function sw(e){var t=typeof Map=="function"?new Map:void 0;return sw=function(o){if(o===null||!q8(o))return o;if(typeof o!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t<"u"){if(t.has(o))return t.get(o);t.set(o,c)}function c(){return qv(o,arguments,aw(this).constructor)}return c.prototype=Object.create(o.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),um(c,o)},sw(e)}var Z8=/%[sdj%]/g,X8=function(){};typeof process<"u"&&process.env;function lw(e){if(!e||!e.length)return null;var t={};return e.forEach(function(r){var o=r.field;t[o]=t[o]||[],t[o].push(r)}),t}function la(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];var c=0,f=r.length;if(typeof e=="function")return e.apply(null,r);if(typeof e=="string"){var y=e.replace(Z8,function(l){if(l==="%%")return"%";if(c>=f)return l;switch(l){case"%s":return String(r[c++]);case"%d":return Number(r[c++]);case"%j":try{return JSON.stringify(r[c++])}catch{return"[Circular]"}break;default:return l}});return y}return e}function K8(e){return e==="string"||e==="url"||e==="hex"||e==="email"||e==="date"||e==="pattern"}function Bi(e,t){return!!(e==null||t==="array"&&Array.isArray(e)&&!e.length||K8(t)&&typeof e=="string"&&!e)}function Y8(e,t,r){var o=[],c=0,f=e.length;function y(l){o.push.apply(o,l||[]),c++,c===f&&r(o)}e.forEach(function(l){t(l,y)})}function hM(e,t,r){var o=0,c=e.length;function f(y){if(y&&y.length){r(y);return}var l=o;o=o+1,l<c?t(e[l],f):r([])}f([])}function J8(e){var t=[];return Object.keys(e).forEach(function(r){t.push.apply(t,e[r]||[])}),t}var fM=function(e){G8(t,e);function t(r,o){var c;return c=e.call(this,"Async Validation Error")||this,c.errors=r,c.fields=o,c}return t}(sw(Error));function Q8(e,t,r,o,c){if(t.first){var f=new Promise(function(z,F){var k=function($){return o($),$.length?F(new fM($,lw($))):z(c)},U=J8(e);hM(U,r,k)});return f.catch(function(z){return z}),f}var y=t.firstFields===!0?Object.keys(e):t.firstFields||[],l=Object.keys(e),w=l.length,E=0,P=[],M=new Promise(function(z,F){var k=function(X){if(P.push.apply(P,X),E++,E===w)return o(P),P.length?F(new fM(P,lw(P))):z(c)};l.length||(o(P),z(c)),l.forEach(function(U){var X=e[U];y.indexOf(U)!==-1?hM(X,r,k):Y8(X,r,k)})});return M.catch(function(z){return z}),M}function eU(e){return!!(e&&e.message!==void 0)}function tU(e,t){for(var r=e,o=0;o<t.length;o++){if(r==null)return r;r=r[t[o]]}return r}function pM(e,t){return function(r){var o;return e.fullFields?o=tU(t,e.fullFields):o=t[r.field||e.fullField],eU(r)?(r.field=r.field||e.fullField,r.fieldValue=o,r):{message:typeof r=="function"?r():r,fieldValue:o,field:r.field||e.fullField}}}function mM(e,t){if(t){for(var r in t)if(t.hasOwnProperty(r)){var o=t[r];typeof o=="object"&&typeof e[r]=="object"?e[r]=fu({},e[r],o):e[r]=o}}return e}var jz=function(t,r,o,c,f,y){t.required&&(!o.hasOwnProperty(t.field)||Bi(r,y||t.type))&&c.push(la(f.messages.required,t.fullField))},nU=function(t,r,o,c,f){(/^\s+$/.test(r)||r==="")&&c.push(la(f.messages.whitespace,t.fullField))},Tv,rU=function(){if(Tv)return Tv;var e="[a-fA-F\\d:]",t=function(Z){return Z&&Z.includeBoundaries?"(?:(?<=\\s|^)(?="+e+")|(?<="+e+")(?=\\s|$))":""},r="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",o="[a-fA-F\\d]{1,4}",c=(`
(?:
(?:`+o+":){7}(?:"+o+`|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:`+o+":){6}(?:"+r+"|:"+o+`|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:`+o+":){5}(?::"+r+"|(?::"+o+`){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:`+o+":){4}(?:(?::"+o+"){0,1}:"+r+"|(?::"+o+`){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:`+o+":){3}(?:(?::"+o+"){0,2}:"+r+"|(?::"+o+`){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:`+o+":){2}(?:(?::"+o+"){0,3}:"+r+"|(?::"+o+`){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:`+o+":){1}(?:(?::"+o+"){0,4}:"+r+"|(?::"+o+`){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::`+o+"){0,5}:"+r+"|(?::"+o+`){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`).replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),f=new RegExp("(?:^"+r+"$)|(?:^"+c+"$)"),y=new RegExp("^"+r+"$"),l=new RegExp("^"+c+"$"),w=function(Z){return Z&&Z.exact?f:new RegExp("(?:"+t(Z)+r+t(Z)+")|(?:"+t(Z)+c+t(Z)+")","g")};w.v4=function(V){return V&&V.exact?y:new RegExp(""+t(V)+r+t(V),"g")},w.v6=function(V){return V&&V.exact?l:new RegExp(""+t(V)+c+t(V),"g")};var E="(?:(?:[a-z]+:)?//)",P="(?:\\S+(?::\\S*)?@)?",M=w.v4().source,z=w.v6().source,F="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",k="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",U="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",X="(?::\\d{2,5})?",$='(?:[/?#][^\\s"]*)?',j="(?:"+E+"|www\\.)"+P+"(?:localhost|"+M+"|"+z+"|"+F+k+U+")"+X+$;return Tv=new RegExp("(?:^"+j+"$)","i"),Tv},gM={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},Sp={integer:function(t){return Sp.number(t)&&parseInt(t,10)===t},float:function(t){return Sp.number(t)&&!Sp.integer(t)},array:function(t){return Array.isArray(t)},regexp:function(t){if(t instanceof RegExp)return!0;try{return!!new RegExp(t)}catch{return!1}},date:function(t){return typeof t.getTime=="function"&&typeof t.getMonth=="function"&&typeof t.getYear=="function"&&!isNaN(t.getTime())},number:function(t){return isNaN(t)?!1:typeof t=="number"},object:function(t){return typeof t=="object"&&!Sp.array(t)},method:function(t){return typeof t=="function"},email:function(t){return typeof t=="string"&&t.length<=320&&!!t.match(gM.email)},url:function(t){return typeof t=="string"&&t.length<=2048&&!!t.match(rU())},hex:function(t){return typeof t=="string"&&!!t.match(gM.hex)}},iU=function(t,r,o,c,f){if(t.required&&r===void 0){jz(t,r,o,c,f);return}var y=["integer","float","array","regexp","object","method","email","number","date","url","hex"],l=t.type;y.indexOf(l)>-1?Sp[l](r)||c.push(la(f.messages.types[l],t.fullField,t.type)):l&&typeof r!==t.type&&c.push(la(f.messages.types[l],t.fullField,t.type))},oU=function(t,r,o,c,f){var y=typeof t.len=="number",l=typeof t.min=="number",w=typeof t.max=="number",E=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,P=r,M=null,z=typeof r=="number",F=typeof r=="string",k=Array.isArray(r);if(z?M="number":F?M="string":k&&(M="array"),!M)return!1;k&&(P=r.length),F&&(P=r.replace(E,"_").length),y?P!==t.len&&c.push(la(f.messages[M].len,t.fullField,t.len)):l&&!w&&P<t.min?c.push(la(f.messages[M].min,t.fullField,t.min)):w&&!l&&P>t.max?c.push(la(f.messages[M].max,t.fullField,t.max)):l&&w&&(P<t.min||P>t.max)&&c.push(la(f.messages[M].range,t.fullField,t.min,t.max))},Ad="enum",aU=function(t,r,o,c,f){t[Ad]=Array.isArray(t[Ad])?t[Ad]:[],t[Ad].indexOf(r)===-1&&c.push(la(f.messages[Ad],t.fullField,t[Ad].join(", ")))},sU=function(t,r,o,c,f){if(t.pattern){if(t.pattern instanceof RegExp)t.pattern.lastIndex=0,t.pattern.test(r)||c.push(la(f.messages.pattern.mismatch,t.fullField,r,t.pattern));else if(typeof t.pattern=="string"){var y=new RegExp(t.pattern);y.test(r)||c.push(la(f.messages.pattern.mismatch,t.fullField,r,t.pattern))}}},lr={required:jz,whitespace:nU,type:iU,range:oU,enum:aU,pattern:sU},lU=function(t,r,o,c,f){var y=[],l=t.required||!t.required&&c.hasOwnProperty(t.field);if(l){if(Bi(r,"string")&&!t.required)return o();lr.required(t,r,c,y,f,"string"),Bi(r,"string")||(lr.type(t,r,c,y,f),lr.range(t,r,c,y,f),lr.pattern(t,r,c,y,f),t.whitespace===!0&&lr.whitespace(t,r,c,y,f))}o(y)},cU=function(t,r,o,c,f){var y=[],l=t.required||!t.required&&c.hasOwnProperty(t.field);if(l){if(Bi(r)&&!t.required)return o();lr.required(t,r,c,y,f),r!==void 0&&lr.type(t,r,c,y,f)}o(y)},uU=function(t,r,o,c,f){var y=[],l=t.required||!t.required&&c.hasOwnProperty(t.field);if(l){if(r===""&&(r=void 0),Bi(r)&&!t.required)return o();lr.required(t,r,c,y,f),r!==void 0&&(lr.type(t,r,c,y,f),lr.range(t,r,c,y,f))}o(y)},dU=function(t,r,o,c,f){var y=[],l=t.required||!t.required&&c.hasOwnProperty(t.field);if(l){if(Bi(r)&&!t.required)return o();lr.required(t,r,c,y,f),r!==void 0&&lr.type(t,r,c,y,f)}o(y)},hU=function(t,r,o,c,f){var y=[],l=t.required||!t.required&&c.hasOwnProperty(t.field);if(l){if(Bi(r)&&!t.required)return o();lr.required(t,r,c,y,f),Bi(r)||lr.type(t,r,c,y,f)}o(y)},fU=function(t,r,o,c,f){var y=[],l=t.required||!t.required&&c.hasOwnProperty(t.field);if(l){if(Bi(r)&&!t.required)return o();lr.required(t,r,c,y,f),r!==void 0&&(lr.type(t,r,c,y,f),lr.range(t,r,c,y,f))}o(y)},pU=function(t,r,o,c,f){var y=[],l=t.required||!t.required&&c.hasOwnProperty(t.field);if(l){if(Bi(r)&&!t.required)return o();lr.required(t,r,c,y,f),r!==void 0&&(lr.type(t,r,c,y,f),lr.range(t,r,c,y,f))}o(y)},mU=function(t,r,o,c,f){var y=[],l=t.required||!t.required&&c.hasOwnProperty(t.field);if(l){if(r==null&&!t.required)return o();lr.required(t,r,c,y,f,"array"),r!=null&&(lr.type(t,r,c,y,f),lr.range(t,r,c,y,f))}o(y)},gU=function(t,r,o,c,f){var y=[],l=t.required||!t.required&&c.hasOwnProperty(t.field);if(l){if(Bi(r)&&!t.required)return o();lr.required(t,r,c,y,f),r!==void 0&&lr.type(t,r,c,y,f)}o(y)},vU="enum",yU=function(t,r,o,c,f){var y=[],l=t.required||!t.required&&c.hasOwnProperty(t.field);if(l){if(Bi(r)&&!t.required)return o();lr.required(t,r,c,y,f),r!==void 0&&lr[vU](t,r,c,y,f)}o(y)},_U=function(t,r,o,c,f){var y=[],l=t.required||!t.required&&c.hasOwnProperty(t.field);if(l){if(Bi(r,"string")&&!t.required)return o();lr.required(t,r,c,y,f),Bi(r,"string")||lr.pattern(t,r,c,y,f)}o(y)},xU=function(t,r,o,c,f){var y=[],l=t.required||!t.required&&c.hasOwnProperty(t.field);if(l){if(Bi(r,"date")&&!t.required)return o();if(lr.required(t,r,c,y,f),!Bi(r,"date")){var w;r instanceof Date?w=r:w=new Date(r),lr.type(t,w,c,y,f),w&&lr.range(t,w.getTime(),c,y,f)}}o(y)},bU=function(t,r,o,c,f){var y=[],l=Array.isArray(r)?"array":typeof r;lr.required(t,r,c,y,f,l),o(y)},g1=function(t,r,o,c,f){var y=t.type,l=[],w=t.required||!t.required&&c.hasOwnProperty(t.field);if(w){if(Bi(r,y)&&!t.required)return o();lr.required(t,r,c,l,f,y),Bi(r,y)||lr.type(t,r,c,l,f)}o(l)},wU=function(t,r,o,c,f){var y=[],l=t.required||!t.required&&c.hasOwnProperty(t.field);if(l){if(Bi(r)&&!t.required)return o();lr.required(t,r,c,y,f)}o(y)},$p={string:lU,method:cU,number:uU,boolean:dU,regexp:hU,integer:fU,float:pU,array:mU,object:gU,enum:yU,pattern:_U,date:xU,url:g1,hex:g1,email:g1,required:bU,any:wU};function cw(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var t=JSON.parse(JSON.stringify(this));return t.clone=this.clone,t}}}var uw=cw(),Em=function(){function e(r){this.rules=null,this._messages=uw,this.define(r)}var t=e.prototype;return t.define=function(o){var c=this;if(!o)throw new Error("Cannot configure a schema with no rules");if(typeof o!="object"||Array.isArray(o))throw new Error("Rules must be an object");this.rules={},Object.keys(o).forEach(function(f){var y=o[f];c.rules[f]=Array.isArray(y)?y:[y]})},t.messages=function(o){return o&&(this._messages=mM(cw(),o)),this._messages},t.validate=function(o,c,f){var y=this;c===void 0&&(c={}),f===void 0&&(f=function(){});var l=o,w=c,E=f;if(typeof w=="function"&&(E=w,w={}),!this.rules||Object.keys(this.rules).length===0)return E&&E(null,l),Promise.resolve(l);function P(U){var X=[],$={};function j(Z){if(Array.isArray(Z)){var ee;X=(ee=X).concat.apply(ee,Z)}else X.push(Z)}for(var V=0;V<U.length;V++)j(U[V]);X.length?($=lw(X),E(X,$)):E(null,l)}if(w.messages){var M=this.messages();M===uw&&(M=cw()),mM(M,w.messages),w.messages=M}else w.messages=this.messages();var z={},F=w.keys||Object.keys(this.rules);F.forEach(function(U){var X=y.rules[U],$=l[U];X.forEach(function(j){var V=j;typeof V.transform=="function"&&(l===o&&(l=fu({},l)),$=l[U]=V.transform($)),typeof V=="function"?V={validator:V}:V=fu({},V),V.validator=y.getValidationMethod(V),V.validator&&(V.field=U,V.fullField=V.fullField||U,V.type=y.getType(V),z[U]=z[U]||[],z[U].push({rule:V,value:$,source:l,field:U}))})});var k={};return Q8(z,w,function(U,X){var $=U.rule,j=($.type==="object"||$.type==="array")&&(typeof $.fields=="object"||typeof $.defaultField=="object");j=j&&($.required||!$.required&&U.value),$.field=U.field;function V(ne,Q){return fu({},Q,{fullField:$.fullField+"."+ne,fullFields:$.fullFields?[].concat($.fullFields,[ne]):[ne]})}function Z(ne){ne===void 0&&(ne=[]);var Q=Array.isArray(ne)?ne:[ne];!w.suppressWarning&&Q.length&&e.warning("async-validator:",Q),Q.length&&$.message!==void 0&&(Q=[].concat($.message));var ie=Q.map(pM($,l));if(w.first&&ie.length)return k[$.field]=1,X(ie);if(!j)X(ie);else{if($.required&&!U.value)return $.message!==void 0?ie=[].concat($.message).map(pM($,l)):w.error&&(ie=[w.error($,la(w.messages.required,$.field))]),X(ie);var te={};$.defaultField&&Object.keys(U.value).map(function(oe){te[oe]=$.defaultField}),te=fu({},te,U.rule.fields);var ge={};Object.keys(te).forEach(function(oe){var fe=te[oe],Ee=Array.isArray(fe)?fe:[fe];ge[oe]=Ee.map(V.bind(null,oe))});var ue=new e(ge);ue.messages(w.messages),U.rule.options&&(U.rule.options.messages=w.messages,U.rule.options.error=w.error),ue.validate(U.value,U.rule.options||w,function(oe){var fe=[];ie&&ie.length&&fe.push.apply(fe,ie),oe&&oe.length&&fe.push.apply(fe,oe),X(fe.length?fe:null)})}}var ee;if($.asyncValidator)ee=$.asyncValidator($,U.value,Z,U.source,w);else if($.validator){try{ee=$.validator($,U.value,Z,U.source,w)}catch(ne){console.error==null||console.error(ne),w.suppressValidatorError||setTimeout(function(){throw ne},0),Z(ne.message)}ee===!0?Z():ee===!1?Z(typeof $.message=="function"?$.message($.fullField||$.field):$.message||($.fullField||$.field)+" fails"):ee instanceof Array?Z(ee):ee instanceof Error&&Z(ee.message)}ee&&ee.then&&ee.then(function(){return Z()},function(ne){return Z(ne)})},function(U){P(U)},l)},t.getType=function(o){if(o.type===void 0&&o.pattern instanceof RegExp&&(o.type="pattern"),typeof o.validator!="function"&&o.type&&!$p.hasOwnProperty(o.type))throw new Error(la("Unknown rule type %s",o.type));return o.type||"string"},t.getValidationMethod=function(o){if(typeof o.validator=="function")return o.validator;var c=Object.keys(o),f=c.indexOf("message");return f!==-1&&c.splice(f,1),c.length===1&&c[0]==="required"?$p.required:$p[this.getType(o)]||void 0},e}();Em.register=function(t,r){if(typeof r!="function")throw new Error("Cannot register a validator by type, validator is not a function");$p[t]=r};Em.warning=X8;Em.messages=uw;Em.validators=$p;var ra="'${name}' is not a valid ${type}",Uz={default:"Validation error on field '${name}'",required:"'${name}' is required",enum:"'${name}' must be one of [${enum}]",whitespace:"'${name}' cannot be empty",date:{format:"'${name}' is invalid for format date",parse:"'${name}' could not be parsed as date",invalid:"'${name}' is invalid date"},types:{string:ra,method:ra,array:ra,object:ra,number:ra,date:ra,boolean:ra,integer:ra,float:ra,regexp:ra,email:ra,url:ra,hex:ra},string:{len:"'${name}' must be exactly ${len} characters",min:"'${name}' must be at least ${min} characters",max:"'${name}' cannot be longer than ${max} characters",range:"'${name}' must be between ${min} and ${max} characters"},number:{len:"'${name}' must equal ${len}",min:"'${name}' cannot be less than ${min}",max:"'${name}' cannot be greater than ${max}",range:"'${name}' must be between ${min} and ${max}"},array:{len:"'${name}' must be exactly ${len} in length",min:"'${name}' cannot be less than ${min} in length",max:"'${name}' cannot be greater than ${max} in length",range:"'${name}' must be between ${min} and ${max} in length"},pattern:{mismatch:"'${name}' does not match pattern ${pattern}"}},vM=Em;function SU(e,t){return e.replace(/\$\{\w+\}/g,function(r){var o=r.slice(2,-1);return t[o]})}var yM="CODE_LOGIC_ERROR";function dw(e,t,r,o,c){return hw.apply(this,arguments)}function hw(){return hw=Ou(To().mark(function e(t,r,o,c,f){var y,l,w,E,P,M,z,F,k;return To().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return y=st({},o),delete y.ruleIndex,vM.warning=function(){},y.validator&&(l=y.validator,y.validator=function(){try{return l.apply(void 0,arguments)}catch($){return console.error($),Promise.reject(yM)}}),w=null,y&&y.type==="array"&&y.defaultField&&(w=y.defaultField,delete y.defaultField),E=new vM(Fe({},t,[y])),P=eh(Uz,c.validateMessages),E.messages(P),M=[],X.prev=10,X.next=13,Promise.resolve(E.validate(Fe({},t,r),st({},c)));case 13:X.next=18;break;case 15:X.prev=15,X.t0=X.catch(10),X.t0.errors&&(M=X.t0.errors.map(function($,j){var V=$.message,Z=V===yM?P.default:V;return T.isValidElement(Z)?T.cloneElement(Z,{key:"error_".concat(j)}):Z}));case 18:if(!(!M.length&&w)){X.next=23;break}return X.next=21,Promise.all(r.map(function($,j){return dw("".concat(t,".").concat(j),$,w,c,f)}));case 21:return z=X.sent,X.abrupt("return",z.reduce(function($,j){return[].concat(mn($),mn(j))},[]));case 23:return F=st(st({},o),{},{name:t,enum:(o.enum||[]).join(", ")},f),k=M.map(function($){return typeof $=="string"?SU($,F):$}),X.abrupt("return",k);case 26:case"end":return X.stop()}},e,null,[[10,15]])})),hw.apply(this,arguments)}function EU(e,t,r,o,c,f){var y=e.join("."),l=r.map(function(P,M){var z=P.validator,F=st(st({},P),{},{ruleIndex:M});return z&&(F.validator=function(k,U,X){var $=!1,j=function(){for(var ee=arguments.length,ne=new Array(ee),Q=0;Q<ee;Q++)ne[Q]=arguments[Q];Promise.resolve().then(function(){Vo(!$,"Your validator function has already return a promise. `callback` will be ignored."),$||X.apply(void 0,ne)})},V=z(k,U,j);$=V&&typeof V.then=="function"&&typeof V.catch=="function",Vo($,"`callback` is deprecated. Please return a promise instead."),$&&V.then(function(){X()}).catch(function(Z){X(Z||" ")})}),F}).sort(function(P,M){var z=P.warningOnly,F=P.ruleIndex,k=M.warningOnly,U=M.ruleIndex;return!!z==!!k?F-U:z?1:-1}),w;if(c===!0)w=new Promise(function(){var P=Ou(To().mark(function M(z,F){var k,U,X;return To().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:k=0;case 1:if(!(k<l.length)){j.next=12;break}return U=l[k],j.next=5,dw(y,t,U,o,f);case 5:if(X=j.sent,!X.length){j.next=9;break}return F([{errors:X,rule:U}]),j.abrupt("return");case 9:k+=1,j.next=1;break;case 12:z([]);case 13:case"end":return j.stop()}},M)}));return function(M,z){return P.apply(this,arguments)}}());else{var E=l.map(function(P){return dw(y,t,P,o,f).then(function(M){return{errors:M,rule:P}})});w=(c?TU(E):CU(E)).then(function(P){return Promise.reject(P)})}return w.catch(function(P){return P}),w}function CU(e){return fw.apply(this,arguments)}function fw(){return fw=Ou(To().mark(function e(t){return To().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",Promise.all(t).then(function(c){var f,y=(f=[]).concat.apply(f,mn(c));return y}));case 1:case"end":return o.stop()}},e)})),fw.apply(this,arguments)}function TU(e){return pw.apply(this,arguments)}function pw(){return pw=Ou(To().mark(function e(t){var r;return To().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return r=0,c.abrupt("return",new Promise(function(f){t.forEach(function(y){y.then(function(l){l.errors.length&&f([l]),r+=1,r===t.length&&f([])})})}));case 2:case"end":return c.stop()}},e)})),pw.apply(this,arguments)}function bi(e){return ow(e)}function _M(e,t){var r={};return t.forEach(function(o){var c=fs(e,o);r=ls(r,o,c)}),r}function uh(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return e&&e.some(function(o){return Vz(t,o,r)})}function Vz(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return!e||!t||!r&&e.length!==t.length?!1:t.every(function(o,c){return e[c]===o})}function IU(e,t){if(e===t)return!0;if(!e&&t||e&&!t||!e||!t||Zn(e)!=="object"||Zn(t)!=="object")return!1;var r=Object.keys(e),o=Object.keys(t),c=new Set([].concat(r,o));return mn(c).every(function(f){var y=e[f],l=t[f];return typeof y=="function"&&typeof l=="function"?!0:y===l})}function MU(e){var t=arguments.length<=1?void 0:arguments[1];return t&&t.target&&Zn(t.target)==="object"&&e in t.target?t.target[e]:t}function xM(e,t,r){var o=e.length;if(t<0||t>=o||r<0||r>=o)return e;var c=e[t],f=t-r;return f>0?[].concat(mn(e.slice(0,r)),[c],mn(e.slice(r,t)),mn(e.slice(t+1,o))):f<0?[].concat(mn(e.slice(0,t)),mn(e.slice(t+1,r+1)),[c],mn(e.slice(r+1,o))):e}var PU=["name"],Ta=[];function bM(e,t,r,o,c,f){return typeof e=="function"?e(t,r,"source"in f?{source:f.source}:{}):o!==c}var QS=function(e){Au(r,e);var t=Ru(r);function r(o){var c;if(qo(this,r),c=t.call(this,o),Fe(vn(c),"state",{resetCount:0}),Fe(vn(c),"cancelRegisterFunc",null),Fe(vn(c),"mounted",!1),Fe(vn(c),"touched",!1),Fe(vn(c),"dirty",!1),Fe(vn(c),"validatePromise",void 0),Fe(vn(c),"prevValidating",void 0),Fe(vn(c),"errors",Ta),Fe(vn(c),"warnings",Ta),Fe(vn(c),"cancelRegister",function(){var w=c.props,E=w.preserve,P=w.isListField,M=w.name;c.cancelRegisterFunc&&c.cancelRegisterFunc(P,E,bi(M)),c.cancelRegisterFunc=null}),Fe(vn(c),"getNamePath",function(){var w=c.props,E=w.name,P=w.fieldContext,M=P.prefixName,z=M===void 0?[]:M;return E!==void 0?[].concat(mn(z),mn(E)):[]}),Fe(vn(c),"getRules",function(){var w=c.props,E=w.rules,P=E===void 0?[]:E,M=w.fieldContext;return P.map(function(z){return typeof z=="function"?z(M):z})}),Fe(vn(c),"refresh",function(){c.mounted&&c.setState(function(w){var E=w.resetCount;return{resetCount:E+1}})}),Fe(vn(c),"metaCache",null),Fe(vn(c),"triggerMetaEvent",function(w){var E=c.props.onMetaChange;if(E){var P=st(st({},c.getMeta()),{},{destroy:w});yO(c.metaCache,P)||E(P),c.metaCache=P}else c.metaCache=null}),Fe(vn(c),"onStoreChange",function(w,E,P){var M=c.props,z=M.shouldUpdate,F=M.dependencies,k=F===void 0?[]:F,U=M.onReset,X=P.store,$=c.getNamePath(),j=c.getValue(w),V=c.getValue(X),Z=E&&uh(E,$);switch(P.type==="valueUpdate"&&P.source==="external"&&j!==V&&(c.touched=!0,c.dirty=!0,c.validatePromise=null,c.errors=Ta,c.warnings=Ta,c.triggerMetaEvent()),P.type){case"reset":if(!E||Z){c.touched=!1,c.dirty=!1,c.validatePromise=void 0,c.errors=Ta,c.warnings=Ta,c.triggerMetaEvent(),U==null||U(),c.refresh();return}break;case"remove":{if(z){c.reRender();return}break}case"setField":{var ee=P.data;if(Z){"touched"in ee&&(c.touched=ee.touched),"validating"in ee&&!("originRCField"in ee)&&(c.validatePromise=ee.validating?Promise.resolve([]):null),"errors"in ee&&(c.errors=ee.errors||Ta),"warnings"in ee&&(c.warnings=ee.warnings||Ta),c.dirty=!0,c.triggerMetaEvent(),c.reRender();return}else if("value"in ee&&uh(E,$,!0)){c.reRender();return}if(z&&!$.length&&bM(z,w,X,j,V,P)){c.reRender();return}break}case"dependenciesUpdate":{var ne=k.map(bi);if(ne.some(function(Q){return uh(P.relatedFields,Q)})){c.reRender();return}break}default:if(Z||(!k.length||$.length||z)&&bM(z,w,X,j,V,P)){c.reRender();return}break}z===!0&&c.reRender()}),Fe(vn(c),"validateRules",function(w){var E=c.getNamePath(),P=c.getValue(),M=w||{},z=M.triggerName,F=M.validateOnly,k=F===void 0?!1:F,U=Promise.resolve().then(Ou(To().mark(function X(){var $,j,V,Z,ee,ne,Q;return To().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:if(c.mounted){te.next=2;break}return te.abrupt("return",[]);case 2:if($=c.props,j=$.validateFirst,V=j===void 0?!1:j,Z=$.messageVariables,ee=$.validateDebounce,ne=c.getRules(),z&&(ne=ne.filter(function(ge){return ge}).filter(function(ge){var ue=ge.validateTrigger;if(!ue)return!0;var oe=ow(ue);return oe.includes(z)})),!(ee&&z)){te.next=10;break}return te.next=8,new Promise(function(ge){setTimeout(ge,ee)});case 8:if(c.validatePromise===U){te.next=10;break}return te.abrupt("return",[]);case 10:return Q=EU(E,P,ne,w,V,Z),Q.catch(function(ge){return ge}).then(function(){var ge=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ta;if(c.validatePromise===U){var ue;c.validatePromise=null;var oe=[],fe=[];(ue=ge.forEach)===null||ue===void 0||ue.call(ge,function(Ee){var ke=Ee.rule.warningOnly,Le=Ee.errors,Ne=Le===void 0?Ta:Le;ke?fe.push.apply(fe,mn(Ne)):oe.push.apply(oe,mn(Ne))}),c.errors=oe,c.warnings=fe,c.triggerMetaEvent(),c.reRender()}}),te.abrupt("return",Q);case 13:case"end":return te.stop()}},X)})));return k||(c.validatePromise=U,c.dirty=!0,c.errors=Ta,c.warnings=Ta,c.triggerMetaEvent(),c.reRender()),U}),Fe(vn(c),"isFieldValidating",function(){return!!c.validatePromise}),Fe(vn(c),"isFieldTouched",function(){return c.touched}),Fe(vn(c),"isFieldDirty",function(){if(c.dirty||c.props.initialValue!==void 0)return!0;var w=c.props.fieldContext,E=w.getInternalHooks(hu),P=E.getInitialValue;return P(c.getNamePath())!==void 0}),Fe(vn(c),"getErrors",function(){return c.errors}),Fe(vn(c),"getWarnings",function(){return c.warnings}),Fe(vn(c),"isListField",function(){return c.props.isListField}),Fe(vn(c),"isList",function(){return c.props.isList}),Fe(vn(c),"isPreserve",function(){return c.props.preserve}),Fe(vn(c),"getMeta",function(){c.prevValidating=c.isFieldValidating();var w={touched:c.isFieldTouched(),validating:c.prevValidating,errors:c.errors,warnings:c.warnings,name:c.getNamePath(),validated:c.validatePromise===null};return w}),Fe(vn(c),"getOnlyChild",function(w){if(typeof w=="function"){var E=c.getMeta();return st(st({},c.getOnlyChild(w(c.getControlled(),E,c.props.fieldContext))),{},{isFunction:!0})}var P=fl(w);return P.length!==1||!T.isValidElement(P[0])?{child:P,isFunction:!1}:{child:P[0],isFunction:!1}}),Fe(vn(c),"getValue",function(w){var E=c.props.fieldContext.getFieldsValue,P=c.getNamePath();return fs(w||E(!0),P)}),Fe(vn(c),"getControlled",function(){var w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},E=c.props,P=E.trigger,M=E.validateTrigger,z=E.getValueFromEvent,F=E.normalize,k=E.valuePropName,U=E.getValueProps,X=E.fieldContext,$=M!==void 0?M:X.validateTrigger,j=c.getNamePath(),V=X.getInternalHooks,Z=X.getFieldsValue,ee=V(hu),ne=ee.dispatch,Q=c.getValue(),ie=U||function(oe){return Fe({},k,oe)},te=w[P],ge=st(st({},w),ie(Q));ge[P]=function(){c.touched=!0,c.dirty=!0,c.triggerMetaEvent();for(var oe,fe=arguments.length,Ee=new Array(fe),ke=0;ke<fe;ke++)Ee[ke]=arguments[ke];z?oe=z.apply(void 0,Ee):oe=MU.apply(void 0,[k].concat(Ee)),F&&(oe=F(oe,Q,Z(!0))),ne({type:"updateValue",namePath:j,value:oe}),te&&te.apply(void 0,Ee)};var ue=ow($||[]);return ue.forEach(function(oe){var fe=ge[oe];ge[oe]=function(){fe&&fe.apply(void 0,arguments);var Ee=c.props.rules;Ee&&Ee.length&&ne({type:"validateField",namePath:j,triggerName:oe})}}),ge}),o.fieldContext){var f=o.fieldContext.getInternalHooks,y=f(hu),l=y.initEntityValue;l(vn(c))}return c}return Zo(r,[{key:"componentDidMount",value:function(){var c=this.props,f=c.shouldUpdate,y=c.fieldContext;if(this.mounted=!0,y){var l=y.getInternalHooks,w=l(hu),E=w.registerField;this.cancelRegisterFunc=E(this)}f===!0&&this.reRender()}},{key:"componentWillUnmount",value:function(){this.cancelRegister(),this.triggerMetaEvent(!0),this.mounted=!1}},{key:"reRender",value:function(){this.mounted&&this.forceUpdate()}},{key:"render",value:function(){var c=this.state.resetCount,f=this.props.children,y=this.getOnlyChild(f),l=y.child,w=y.isFunction,E;return w?E=l:T.isValidElement(l)?E=T.cloneElement(l,this.getControlled(l.props)):(Vo(!l,"`children` of Field is not validate ReactElement."),E=l),T.createElement(T.Fragment,{key:c},E)}}]),r}(T.Component);Fe(QS,"contextType",Sh);Fe(QS,"defaultProps",{trigger:"onChange",valuePropName:"value"});function Hz(e){var t=e.name,r=Vr(e,PU),o=T.useContext(Sh),c=T.useContext($y),f=t!==void 0?bi(t):void 0,y="keep";return r.isListField||(y="_".concat((f||[]).join("_"))),T.createElement(QS,Sn({key:y,name:f,isListField:!!c},r,{fieldContext:o}))}function AU(e){var t=e.name,r=e.initialValue,o=e.children,c=e.rules,f=e.validateTrigger,y=e.isListField,l=T.useContext(Sh),w=T.useContext($y),E=T.useRef({keys:[],id:0}),P=E.current,M=T.useMemo(function(){var U=bi(l.prefixName)||[];return[].concat(mn(U),mn(bi(t)))},[l.prefixName,t]),z=T.useMemo(function(){return st(st({},l),{},{prefixName:M})},[l,M]),F=T.useMemo(function(){return{getKey:function(X){var $=M.length,j=X[$];return[P.keys[j],X.slice($+1)]}}},[M]);if(typeof o!="function")return Vo(!1,"Form.List only accepts function as children."),null;var k=function(X,$,j){var V=j.source;return V==="internal"?!1:X!==$};return T.createElement($y.Provider,{value:F},T.createElement(Sh.Provider,{value:z},T.createElement(Hz,{name:[],shouldUpdate:k,rules:c,validateTrigger:f,initialValue:r,isList:!0,isListField:y??!!w},function(U,X){var $=U.value,j=$===void 0?[]:$,V=U.onChange,Z=l.getFieldValue,ee=function(){var te=Z(M||[]);return te||[]},ne={add:function(te,ge){var ue=ee();ge>=0&&ge<=ue.length?(P.keys=[].concat(mn(P.keys.slice(0,ge)),[P.id],mn(P.keys.slice(ge))),V([].concat(mn(ue.slice(0,ge)),[te],mn(ue.slice(ge))))):(P.keys=[].concat(mn(P.keys),[P.id]),V([].concat(mn(ue),[te]))),P.id+=1},remove:function(te){var ge=ee(),ue=new Set(Array.isArray(te)?te:[te]);ue.size<=0||(P.keys=P.keys.filter(function(oe,fe){return!ue.has(fe)}),V(ge.filter(function(oe,fe){return!ue.has(fe)})))},move:function(te,ge){if(te!==ge){var ue=ee();te<0||te>=ue.length||ge<0||ge>=ue.length||(P.keys=xM(P.keys,te,ge),V(xM(ue,te,ge)))}}},Q=j||[];return Array.isArray(Q)||(Q=[]),o(Q.map(function(ie,te){var ge=P.keys[te];return ge===void 0&&(P.keys[te]=P.id,ge=P.keys[te],P.id+=1),{name:te,key:ge,isListField:!0}}),ne,X)})))}function RU(e){var t=!1,r=e.length,o=[];return e.length?new Promise(function(c,f){e.forEach(function(y,l){y.catch(function(w){return t=!0,w}).then(function(w){r-=1,o[l]=w,!(r>0)&&(t&&f(o),c(o))})})}):Promise.resolve([])}var Gz="__@field_split__";function v1(e){return e.map(function(t){return"".concat(Zn(t),":").concat(t)}).join(Gz)}var Rd=function(){function e(){qo(this,e),Fe(this,"kvs",new Map)}return Zo(e,[{key:"set",value:function(r,o){this.kvs.set(v1(r),o)}},{key:"get",value:function(r){return this.kvs.get(v1(r))}},{key:"update",value:function(r,o){var c=this.get(r),f=o(c);f?this.set(r,f):this.delete(r)}},{key:"delete",value:function(r){this.kvs.delete(v1(r))}},{key:"map",value:function(r){return mn(this.kvs.entries()).map(function(o){var c=Bt(o,2),f=c[0],y=c[1],l=f.split(Gz);return r({key:l.map(function(w){var E=w.match(/^([^:]*):(.*)$/),P=Bt(E,3),M=P[1],z=P[2];return M==="number"?Number(z):z}),value:y})})}},{key:"toJSON",value:function(){var r={};return this.map(function(o){var c=o.key,f=o.value;return r[c.join(".")]=f,null}),r}}]),e}(),OU=["name"],zU=Zo(function e(t){var r=this;qo(this,e),Fe(this,"formHooked",!1),Fe(this,"forceRootUpdate",void 0),Fe(this,"subscribable",!0),Fe(this,"store",{}),Fe(this,"fieldEntities",[]),Fe(this,"initialValues",{}),Fe(this,"callbacks",{}),Fe(this,"validateMessages",null),Fe(this,"preserve",null),Fe(this,"lastValidatePromise",null),Fe(this,"getForm",function(){return{getFieldValue:r.getFieldValue,getFieldsValue:r.getFieldsValue,getFieldError:r.getFieldError,getFieldWarning:r.getFieldWarning,getFieldsError:r.getFieldsError,isFieldsTouched:r.isFieldsTouched,isFieldTouched:r.isFieldTouched,isFieldValidating:r.isFieldValidating,isFieldsValidating:r.isFieldsValidating,resetFields:r.resetFields,setFields:r.setFields,setFieldValue:r.setFieldValue,setFieldsValue:r.setFieldsValue,validateFields:r.validateFields,submit:r.submit,_init:!0,getInternalHooks:r.getInternalHooks}}),Fe(this,"getInternalHooks",function(o){return o===hu?(r.formHooked=!0,{dispatch:r.dispatch,initEntityValue:r.initEntityValue,registerField:r.registerField,useSubscribe:r.useSubscribe,setInitialValues:r.setInitialValues,destroyForm:r.destroyForm,setCallbacks:r.setCallbacks,setValidateMessages:r.setValidateMessages,getFields:r.getFields,setPreserve:r.setPreserve,getInitialValue:r.getInitialValue,registerWatch:r.registerWatch}):(Vo(!1,"`getInternalHooks` is internal usage. Should not call directly."),null)}),Fe(this,"useSubscribe",function(o){r.subscribable=o}),Fe(this,"prevWithoutPreserves",null),Fe(this,"setInitialValues",function(o,c){if(r.initialValues=o||{},c){var f,y=eh(o,r.store);(f=r.prevWithoutPreserves)===null||f===void 0||f.map(function(l){var w=l.key;y=ls(y,w,fs(o,w))}),r.prevWithoutPreserves=null,r.updateStore(y)}}),Fe(this,"destroyForm",function(){var o=new Rd;r.getFieldEntities(!0).forEach(function(c){r.isMergedPreserve(c.isPreserve())||o.set(c.getNamePath(),!0)}),r.prevWithoutPreserves=o}),Fe(this,"getInitialValue",function(o){var c=fs(r.initialValues,o);return o.length?eh(c):c}),Fe(this,"setCallbacks",function(o){r.callbacks=o}),Fe(this,"setValidateMessages",function(o){r.validateMessages=o}),Fe(this,"setPreserve",function(o){r.preserve=o}),Fe(this,"watchList",[]),Fe(this,"registerWatch",function(o){return r.watchList.push(o),function(){r.watchList=r.watchList.filter(function(c){return c!==o})}}),Fe(this,"notifyWatch",function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];if(r.watchList.length){var c=r.getFieldsValue(),f=r.getFieldsValue(!0);r.watchList.forEach(function(y){y(c,f,o)})}}),Fe(this,"timeoutId",null),Fe(this,"warningUnhooked",function(){}),Fe(this,"updateStore",function(o){r.store=o}),Fe(this,"getFieldEntities",function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return o?r.fieldEntities.filter(function(c){return c.getNamePath().length}):r.fieldEntities}),Fe(this,"getFieldsMap",function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,c=new Rd;return r.getFieldEntities(o).forEach(function(f){var y=f.getNamePath();c.set(y,f)}),c}),Fe(this,"getFieldEntitiesForNamePathList",function(o){if(!o)return r.getFieldEntities(!0);var c=r.getFieldsMap(!0);return o.map(function(f){var y=bi(f);return c.get(y)||{INVALIDATE_NAME_PATH:bi(f)}})}),Fe(this,"getFieldsValue",function(o,c){r.warningUnhooked();var f,y,l;if(o===!0||Array.isArray(o)?(f=o,y=c):o&&Zn(o)==="object"&&(l=o.strict,y=o.filter),f===!0&&!y)return r.store;var w=r.getFieldEntitiesForNamePathList(Array.isArray(f)?f:null),E=[];return w.forEach(function(P){var M,z,F="INVALIDATE_NAME_PATH"in P?P.INVALIDATE_NAME_PATH:P.getNamePath();if(l){var k,U;if((k=(U=P).isList)!==null&&k!==void 0&&k.call(U))return}else if(!f&&(M=(z=P).isListField)!==null&&M!==void 0&&M.call(z))return;if(!y)E.push(F);else{var X="getMeta"in P?P.getMeta():null;y(X)&&E.push(F)}}),_M(r.store,E.map(bi))}),Fe(this,"getFieldValue",function(o){r.warningUnhooked();var c=bi(o);return fs(r.store,c)}),Fe(this,"getFieldsError",function(o){r.warningUnhooked();var c=r.getFieldEntitiesForNamePathList(o);return c.map(function(f,y){return f&&!("INVALIDATE_NAME_PATH"in f)?{name:f.getNamePath(),errors:f.getErrors(),warnings:f.getWarnings()}:{name:bi(o[y]),errors:[],warnings:[]}})}),Fe(this,"getFieldError",function(o){r.warningUnhooked();var c=bi(o),f=r.getFieldsError([c])[0];return f.errors}),Fe(this,"getFieldWarning",function(o){r.warningUnhooked();var c=bi(o),f=r.getFieldsError([c])[0];return f.warnings}),Fe(this,"isFieldsTouched",function(){r.warningUnhooked();for(var o=arguments.length,c=new Array(o),f=0;f<o;f++)c[f]=arguments[f];var y=c[0],l=c[1],w,E=!1;c.length===0?w=null:c.length===1?Array.isArray(y)?(w=y.map(bi),E=!1):(w=null,E=y):(w=y.map(bi),E=l);var P=r.getFieldEntities(!0),M=function(X){return X.isFieldTouched()};if(!w)return E?P.every(M):P.some(M);var z=new Rd;w.forEach(function(U){z.set(U,[])}),P.forEach(function(U){var X=U.getNamePath();w.forEach(function($){$.every(function(j,V){return X[V]===j})&&z.update($,function(j){return[].concat(mn(j),[U])})})});var F=function(X){return X.some(M)},k=z.map(function(U){var X=U.value;return X});return E?k.every(F):k.some(F)}),Fe(this,"isFieldTouched",function(o){return r.warningUnhooked(),r.isFieldsTouched([o])}),Fe(this,"isFieldsValidating",function(o){r.warningUnhooked();var c=r.getFieldEntities();if(!o)return c.some(function(y){return y.isFieldValidating()});var f=o.map(bi);return c.some(function(y){var l=y.getNamePath();return uh(f,l)&&y.isFieldValidating()})}),Fe(this,"isFieldValidating",function(o){return r.warningUnhooked(),r.isFieldsValidating([o])}),Fe(this,"resetWithFieldInitialValue",function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},c=new Rd,f=r.getFieldEntities(!0);f.forEach(function(w){var E=w.props.initialValue,P=w.getNamePath();if(E!==void 0){var M=c.get(P)||new Set;M.add({entity:w,value:E}),c.set(P,M)}});var y=function(E){E.forEach(function(P){var M=P.props.initialValue;if(M!==void 0){var z=P.getNamePath(),F=r.getInitialValue(z);if(F!==void 0)Vo(!1,"Form already set 'initialValues' with path '".concat(z.join("."),"'. Field can not overwrite it."));else{var k=c.get(z);if(k&&k.size>1)Vo(!1,"Multiple Field with path '".concat(z.join("."),"' set 'initialValue'. Can not decide which one to pick."));else if(k){var U=r.getFieldValue(z),X=P.isListField();!X&&(!o.skipExist||U===void 0)&&r.updateStore(ls(r.store,z,mn(k)[0].value))}}}})},l;o.entities?l=o.entities:o.namePathList?(l=[],o.namePathList.forEach(function(w){var E=c.get(w);if(E){var P;(P=l).push.apply(P,mn(mn(E).map(function(M){return M.entity})))}})):l=f,y(l)}),Fe(this,"resetFields",function(o){r.warningUnhooked();var c=r.store;if(!o){r.updateStore(eh(r.initialValues)),r.resetWithFieldInitialValue(),r.notifyObservers(c,null,{type:"reset"}),r.notifyWatch();return}var f=o.map(bi);f.forEach(function(y){var l=r.getInitialValue(y);r.updateStore(ls(r.store,y,l))}),r.resetWithFieldInitialValue({namePathList:f}),r.notifyObservers(c,f,{type:"reset"}),r.notifyWatch(f)}),Fe(this,"setFields",function(o){r.warningUnhooked();var c=r.store,f=[];o.forEach(function(y){var l=y.name,w=Vr(y,OU),E=bi(l);f.push(E),"value"in w&&r.updateStore(ls(r.store,E,w.value)),r.notifyObservers(c,[E],{type:"setField",data:y})}),r.notifyWatch(f)}),Fe(this,"getFields",function(){var o=r.getFieldEntities(!0),c=o.map(function(f){var y=f.getNamePath(),l=f.getMeta(),w=st(st({},l),{},{name:y,value:r.getFieldValue(y)});return Object.defineProperty(w,"originRCField",{value:!0}),w});return c}),Fe(this,"initEntityValue",function(o){var c=o.props.initialValue;if(c!==void 0){var f=o.getNamePath(),y=fs(r.store,f);y===void 0&&r.updateStore(ls(r.store,f,c))}}),Fe(this,"isMergedPreserve",function(o){var c=o!==void 0?o:r.preserve;return c??!0}),Fe(this,"registerField",function(o){r.fieldEntities.push(o);var c=o.getNamePath();if(r.notifyWatch([c]),o.props.initialValue!==void 0){var f=r.store;r.resetWithFieldInitialValue({entities:[o],skipExist:!0}),r.notifyObservers(f,[o.getNamePath()],{type:"valueUpdate",source:"internal"})}return function(y,l){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(r.fieldEntities=r.fieldEntities.filter(function(M){return M!==o}),!r.isMergedPreserve(l)&&(!y||w.length>1)){var E=y?void 0:r.getInitialValue(c);if(c.length&&r.getFieldValue(c)!==E&&r.fieldEntities.every(function(M){return!Vz(M.getNamePath(),c)})){var P=r.store;r.updateStore(ls(P,c,E,!0)),r.notifyObservers(P,[c],{type:"remove"}),r.triggerDependenciesUpdate(P,c)}}r.notifyWatch([c])}}),Fe(this,"dispatch",function(o){switch(o.type){case"updateValue":{var c=o.namePath,f=o.value;r.updateValue(c,f);break}case"validateField":{var y=o.namePath,l=o.triggerName;r.validateFields([y],{triggerName:l});break}}}),Fe(this,"notifyObservers",function(o,c,f){if(r.subscribable){var y=st(st({},f),{},{store:r.getFieldsValue(!0)});r.getFieldEntities().forEach(function(l){var w=l.onStoreChange;w(o,c,y)})}else r.forceRootUpdate()}),Fe(this,"triggerDependenciesUpdate",function(o,c){var f=r.getDependencyChildrenFields(c);return f.length&&r.validateFields(f),r.notifyObservers(o,f,{type:"dependenciesUpdate",relatedFields:[c].concat(mn(f))}),f}),Fe(this,"updateValue",function(o,c){var f=bi(o),y=r.store;r.updateStore(ls(r.store,f,c)),r.notifyObservers(y,[f],{type:"valueUpdate",source:"internal"}),r.notifyWatch([f]);var l=r.triggerDependenciesUpdate(y,f),w=r.callbacks.onValuesChange;if(w){var E=_M(r.store,[f]);w(E,r.getFieldsValue())}r.triggerOnFieldsChange([f].concat(mn(l)))}),Fe(this,"setFieldsValue",function(o){r.warningUnhooked();var c=r.store;if(o){var f=eh(r.store,o);r.updateStore(f)}r.notifyObservers(c,null,{type:"valueUpdate",source:"external"}),r.notifyWatch()}),Fe(this,"setFieldValue",function(o,c){r.setFields([{name:o,value:c}])}),Fe(this,"getDependencyChildrenFields",function(o){var c=new Set,f=[],y=new Rd;r.getFieldEntities().forEach(function(w){var E=w.props.dependencies;(E||[]).forEach(function(P){var M=bi(P);y.update(M,function(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Set;return z.add(w),z})})});var l=function w(E){var P=y.get(E)||new Set;P.forEach(function(M){if(!c.has(M)){c.add(M);var z=M.getNamePath();M.isFieldDirty()&&z.length&&(f.push(z),w(z))}})};return l(o),f}),Fe(this,"triggerOnFieldsChange",function(o,c){var f=r.callbacks.onFieldsChange;if(f){var y=r.getFields();if(c){var l=new Rd;c.forEach(function(E){var P=E.name,M=E.errors;l.set(P,M)}),y.forEach(function(E){E.errors=l.get(E.name)||E.errors})}var w=y.filter(function(E){var P=E.name;return uh(o,P)});w.length&&f(w,y)}}),Fe(this,"validateFields",function(o,c){r.warningUnhooked();var f,y;Array.isArray(o)||typeof o=="string"||typeof c=="string"?(f=o,y=c):y=o;var l=!!f,w=l?f.map(bi):[],E=[],P=String(Date.now()),M=new Set,z=y||{},F=z.recursive,k=z.dirty;r.getFieldEntities(!0).forEach(function(j){if(l||w.push(j.getNamePath()),!(!j.props.rules||!j.props.rules.length)&&!(k&&!j.isFieldDirty())){var V=j.getNamePath();if(M.add(V.join(P)),!l||uh(w,V,F)){var Z=j.validateRules(st({validateMessages:st(st({},Uz),r.validateMessages)},y));E.push(Z.then(function(){return{name:V,errors:[],warnings:[]}}).catch(function(ee){var ne,Q=[],ie=[];return(ne=ee.forEach)===null||ne===void 0||ne.call(ee,function(te){var ge=te.rule.warningOnly,ue=te.errors;ge?ie.push.apply(ie,mn(ue)):Q.push.apply(Q,mn(ue))}),Q.length?Promise.reject({name:V,errors:Q,warnings:ie}):{name:V,errors:Q,warnings:ie}}))}}});var U=RU(E);r.lastValidatePromise=U,U.catch(function(j){return j}).then(function(j){var V=j.map(function(Z){var ee=Z.name;return ee});r.notifyObservers(r.store,V,{type:"validateFinish"}),r.triggerOnFieldsChange(V,j)});var X=U.then(function(){return r.lastValidatePromise===U?Promise.resolve(r.getFieldsValue(w)):Promise.reject([])}).catch(function(j){var V=j.filter(function(Z){return Z&&Z.errors.length});return Promise.reject({values:r.getFieldsValue(w),errorFields:V,outOfDate:r.lastValidatePromise!==U})});X.catch(function(j){return j});var $=w.filter(function(j){return M.has(j.join(P))});return r.triggerOnFieldsChange($),X}),Fe(this,"submit",function(){r.warningUnhooked(),r.validateFields().then(function(o){var c=r.callbacks.onFinish;if(c)try{c(o)}catch(f){console.error(f)}}).catch(function(o){var c=r.callbacks.onFinishFailed;c&&c(o)})}),this.forceRootUpdate=t});function Wz(e){var t=T.useRef(),r=T.useState({}),o=Bt(r,2),c=o[1];if(!t.current)if(e)t.current=e;else{var f=function(){c({})},y=new zU(f);t.current=y.getForm()}return[t.current]}var mw=T.createContext({triggerFormChange:function(){},triggerFormFinish:function(){},registerForm:function(){},unregisterForm:function(){}}),LU=function(t){var r=t.validateMessages,o=t.onFormChange,c=t.onFormFinish,f=t.children,y=T.useContext(mw),l=T.useRef({});return T.createElement(mw.Provider,{value:st(st({},y),{},{validateMessages:st(st({},y.validateMessages),r),triggerFormChange:function(E,P){o&&o(E,{changedFields:P,forms:l.current}),y.triggerFormChange(E,P)},triggerFormFinish:function(E,P){c&&c(E,{values:P,forms:l.current}),y.triggerFormFinish(E,P)},registerForm:function(E,P){E&&(l.current=st(st({},l.current),{},Fe({},E,P))),y.registerForm(E,P)},unregisterForm:function(E){var P=st({},l.current);delete P[E],l.current=P,y.unregisterForm(E)}})},f)},DU=["name","initialValues","fields","form","preserve","children","component","validateMessages","validateTrigger","onValuesChange","onFieldsChange","onFinish","onFinishFailed"],kU=function(t,r){var o=t.name,c=t.initialValues,f=t.fields,y=t.form,l=t.preserve,w=t.children,E=t.component,P=E===void 0?"form":E,M=t.validateMessages,z=t.validateTrigger,F=z===void 0?"onChange":z,k=t.onValuesChange,U=t.onFieldsChange,X=t.onFinish,$=t.onFinishFailed,j=Vr(t,DU),V=T.useContext(mw),Z=Wz(y),ee=Bt(Z,1),ne=ee[0],Q=ne.getInternalHooks(hu),ie=Q.useSubscribe,te=Q.setInitialValues,ge=Q.setCallbacks,ue=Q.setValidateMessages,oe=Q.setPreserve,fe=Q.destroyForm;T.useImperativeHandle(r,function(){return ne}),T.useEffect(function(){return V.registerForm(o,ne),function(){V.unregisterForm(o)}},[V,ne,o]),ue(st(st({},V.validateMessages),M)),ge({onValuesChange:k,onFieldsChange:function(Qe){if(V.triggerFormChange(o,Qe),U){for(var gt=arguments.length,St=new Array(gt>1?gt-1:0),xt=1;xt<gt;xt++)St[xt-1]=arguments[xt];U.apply(void 0,[Qe].concat(St))}},onFinish:function(Qe){V.triggerFormFinish(o,Qe),X&&X(Qe)},onFinishFailed:$}),oe(l);var Ee=T.useRef(null);te(c,!Ee.current),Ee.current||(Ee.current=!0),T.useEffect(function(){return fe},[]);var ke,Le=typeof w=="function";if(Le){var Ne=ne.getFieldsValue(!0);ke=w(Ne,ne)}else ke=w;ie(!Le);var pe=T.useRef();T.useEffect(function(){IU(pe.current||[],f||[])||ne.setFields(f||[]),pe.current=f},[f,ne]);var He=T.useMemo(function(){return st(st({},ne),{},{validateTrigger:F})},[ne,F]),Be=T.createElement($y.Provider,{value:null},T.createElement(Sh.Provider,{value:He},ke));return P===!1?Be:T.createElement(P,Sn({},j,{onSubmit:function(Qe){Qe.preventDefault(),Qe.stopPropagation(),ne.submit()},onReset:function(Qe){var gt;Qe.preventDefault(),ne.resetFields(),(gt=j.onReset)===null||gt===void 0||gt.call(j,Qe)}}),Be)};function wM(e){try{return JSON.stringify(e)}catch{return Math.random()}}function $U(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var o=t[0],c=o===void 0?[]:o,f=t[1],y=f===void 0?{}:f,l=H8(y)?{form:y}:y,w=l.form,E=T.useState(),P=Bt(E,2),M=P[0],z=P[1],F=T.useMemo(function(){return wM(M)},[M]),k=T.useRef(F);k.current=F;var U=T.useContext(Sh),X=w||U,$=X&&X._init,j=bi(c),V=T.useRef(j);return V.current=j,T.useEffect(function(){if($){var Z=X.getFieldsValue,ee=X.getInternalHooks,ne=ee(hu),Q=ne.registerWatch,ie=Q(function(ge,ue){var oe=fs(l.preserve?ue:ge,V.current),fe=wM(oe);k.current!==fe&&(k.current=fe,z(oe))}),te=fs(l.preserve?Z(!0):Z(),V.current);return M!==te&&z(te),ie}},[$]),M}var FU=T.forwardRef(kU),Cm=FU;Cm.FormProvider=LU;Cm.Field=Hz;Cm.List=AU;Cm.useForm=Wz;Cm.useWatch=$U;const Tu=T.createContext({}),SM=e=>{let{children:t,status:r,override:o}=e;const c=T.useContext(Tu),f=T.useMemo(()=>{const y=Object.assign({},c);return o&&delete y.isFormItemInput,r&&(delete y.status,delete y.hasFeedback,delete y.feedbackIcon),y},[r,o,c]);return T.createElement(Tu.Provider,{value:f},t)};function EM(){}const BU=T.createContext({add:EM,remove:EM}),NU=BU,jU=e=>({animationDuration:e,animationFillMode:"both"}),UU=e=>({animationDuration:e,animationFillMode:"both"}),eE=function(e,t,r,o){const f=(arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1)?"&":"";return{[`
      ${f}${e}-enter,
      ${f}${e}-appear
    `]:Object.assign(Object.assign({},jU(o)),{animationPlayState:"paused"}),[`${f}${e}-leave`]:Object.assign(Object.assign({},UU(o)),{animationPlayState:"paused"}),[`
      ${f}${e}-enter${e}-enter-active,
      ${f}${e}-appear${e}-appear-active
    `]:{animationName:t,animationPlayState:"running"},[`${f}${e}-leave${e}-leave-active`]:{animationName:r,animationPlayState:"running",pointerEvents:"none"}}},VU=new or("antMoveDownIn",{"0%":{transform:"translate3d(0, 100%, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),HU=new or("antMoveDownOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(0, 100%, 0)",transformOrigin:"0 0",opacity:0}}),GU=new or("antMoveLeftIn",{"0%":{transform:"translate3d(-100%, 0, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),WU=new or("antMoveLeftOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(-100%, 0, 0)",transformOrigin:"0 0",opacity:0}}),qU=new or("antMoveRightIn",{"0%":{transform:"translate3d(100%, 0, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),ZU=new or("antMoveRightOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(100%, 0, 0)",transformOrigin:"0 0",opacity:0}}),XU=new or("antMoveUpIn",{"0%":{transform:"translate3d(0, -100%, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),KU=new or("antMoveUpOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(0, -100%, 0)",transformOrigin:"0 0",opacity:0}}),YU={"move-up":{inKeyframes:XU,outKeyframes:KU},"move-down":{inKeyframes:VU,outKeyframes:HU},"move-left":{inKeyframes:GU,outKeyframes:WU},"move-right":{inKeyframes:qU,outKeyframes:ZU}},CM=(e,t)=>{const{antCls:r}=e,o=`${r}-${t}`,{inKeyframes:c,outKeyframes:f}=YU[t];return[eE(o,c,f,e.motionDurationMid),{[`
        ${o}-enter,
        ${o}-appear
      `]:{opacity:0,animationTimingFunction:e.motionEaseOutCirc},[`${o}-leave`]:{animationTimingFunction:e.motionEaseInOutCirc}}]},qz=new or("antSlideUpIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1}}),Zz=new or("antSlideUpOut",{"0%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0}}),Xz=new or("antSlideDownIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1}}),Kz=new or("antSlideDownOut",{"0%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0}}),JU=new or("antSlideLeftIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1}}),QU=new or("antSlideLeftOut",{"0%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0}}),eV=new or("antSlideRightIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1}}),tV=new or("antSlideRightOut",{"0%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0}}),nV={"slide-up":{inKeyframes:qz,outKeyframes:Zz},"slide-down":{inKeyframes:Xz,outKeyframes:Kz},"slide-left":{inKeyframes:JU,outKeyframes:QU},"slide-right":{inKeyframes:eV,outKeyframes:tV}},TM=(e,t)=>{const{antCls:r}=e,o=`${r}-${t}`,{inKeyframes:c,outKeyframes:f}=nV[t];return[eE(o,c,f,e.motionDurationMid),{[`
      ${o}-enter,
      ${o}-appear
    `]:{transform:"scale(0)",transformOrigin:"0% 0%",opacity:0,animationTimingFunction:e.motionEaseOutQuint,"&-prepare":{transform:"scale(1)"}},[`${o}-leave`]:{animationTimingFunction:e.motionEaseInQuint}}]},rV=new or("antZoomIn",{"0%":{transform:"scale(0.2)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),iV=new or("antZoomOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.2)",opacity:0}}),IM=new or("antZoomBigIn",{"0%":{transform:"scale(0.8)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),MM=new or("antZoomBigOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.8)",opacity:0}}),oV=new or("antZoomUpIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 0%"}}),aV=new or("antZoomUpOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 0%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0}}),sV=new or("antZoomLeftIn",{"0%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"0% 50%"}}),lV=new or("antZoomLeftOut",{"0%":{transform:"scale(1)",transformOrigin:"0% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0}}),cV=new or("antZoomRightIn",{"0%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"100% 50%"}}),uV=new or("antZoomRightOut",{"0%":{transform:"scale(1)",transformOrigin:"100% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0}}),dV=new or("antZoomDownIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 100%"}}),hV=new or("antZoomDownOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 100%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0}}),fV={zoom:{inKeyframes:rV,outKeyframes:iV},"zoom-big":{inKeyframes:IM,outKeyframes:MM},"zoom-big-fast":{inKeyframes:IM,outKeyframes:MM},"zoom-left":{inKeyframes:sV,outKeyframes:lV},"zoom-right":{inKeyframes:cV,outKeyframes:uV},"zoom-up":{inKeyframes:oV,outKeyframes:aV},"zoom-down":{inKeyframes:dV,outKeyframes:hV}},pV=(e,t)=>{const{antCls:r}=e,o=`${r}-${t}`,{inKeyframes:c,outKeyframes:f}=fV[t];return[eE(o,c,f,t==="zoom-big-fast"?e.motionDurationFast:e.motionDurationMid),{[`
        ${o}-enter,
        ${o}-appear
      `]:{transform:"scale(0)",opacity:0,animationTimingFunction:e.motionEaseOutCirc,"&-prepare":{transform:"none"}},[`${o}-leave`]:{animationTimingFunction:e.motionEaseInOutCirc}}]},Yz={Modal:0,Drawer:0,Popover:70,Popconfirm:70,Tooltip:70,Tour:70},mV={SelectLike:50,Dropdown:50,ColorPicker:30,DatePicker:50,Menu:50};function gV(e){return e in Yz}function Jz(e,t){const[,r]=Na(),o=lt.useContext(Nz),c=gV(e);let f=o??0;return c?f+=r.zIndexPopupBase+Yz[e]:f+=mV[e],[o===void 0?t:f,f]}const vV=e=>{const{componentCls:t,notificationMarginEdge:r,animationMaxHeight:o}=e,c=`${t}-notice`,f=new or("antNotificationFadeIn",{"0%":{transform:"translate3d(100%, 0, 0)",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",opacity:1}}),y=new or("antNotificationTopFadeIn",{"0%":{top:-o,opacity:0},"100%":{top:0,opacity:1}}),l=new or("antNotificationBottomFadeIn",{"0%":{bottom:-o,opacity:0},"100%":{bottom:0,opacity:1}}),w=new or("antNotificationLeftFadeIn",{"0%":{transform:"translate3d(-100%, 0, 0)",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",opacity:1}});return{[t]:{[`&${t}-top, &${t}-bottom`]:{marginInline:0,[c]:{marginInline:"auto auto"}},[`&${t}-top`]:{[`${t}-fade-enter${t}-fade-enter-active, ${t}-fade-appear${t}-fade-appear-active`]:{animationName:y}},[`&${t}-bottom`]:{[`${t}-fade-enter${t}-fade-enter-active, ${t}-fade-appear${t}-fade-appear-active`]:{animationName:l}},[`&${t}-topRight, &${t}-bottomRight`]:{[`${t}-fade-enter${t}-fade-enter-active, ${t}-fade-appear${t}-fade-appear-active`]:{animationName:f}},[`&${t}-topLeft, &${t}-bottomLeft`]:{marginRight:{value:0,_skip_check_:!0},marginLeft:{value:r,_skip_check_:!0},[c]:{marginInlineEnd:"auto",marginInlineStart:0},[`${t}-fade-enter${t}-fade-enter-active, ${t}-fade-appear${t}-fade-appear-active`]:{animationName:w}}}}},yV=vV,_V=["top","topLeft","topRight","bottom","bottomLeft","bottomRight"],xV={topLeft:"left",topRight:"right",bottomLeft:"left",bottomRight:"right",top:"left",bottom:"left"},bV=(e,t)=>{const{componentCls:r}=e;return{[`${r}-${t}`]:{[`&${r}-stack > ${r}-notice-wrapper`]:{[t.startsWith("top")?"top":"bottom"]:0,[xV[t]]:{value:0,_skip_check_:!0}}}}},wV=e=>{const t={};for(let r=1;r<e.notificationStackLayer;r++)t[`&:nth-last-child(${r+1})`]={overflow:"hidden",[`& > ${e.componentCls}-notice`]:{opacity:0,transition:`opacity ${e.motionDurationMid}`}};return Object.assign({[`&:not(:nth-last-child(-n+${e.notificationStackLayer}))`]:{opacity:0,overflow:"hidden",color:"transparent",pointerEvents:"none"}},t)},SV=e=>{const t={};for(let r=1;r<e.notificationStackLayer;r++)t[`&:nth-last-child(${r+1})`]={background:e.colorBgBlur,backdropFilter:"blur(10px)","-webkit-backdrop-filter":"blur(10px)"};return Object.assign({},t)},EV=e=>{const{componentCls:t}=e;return Object.assign({[`${t}-stack`]:{[`& > ${t}-notice-wrapper`]:Object.assign({transition:`all ${e.motionDurationSlow}, backdrop-filter 0s`,position:"absolute"},wV(e))},[`${t}-stack:not(${t}-stack-expanded)`]:{[`& > ${t}-notice-wrapper`]:Object.assign({},SV(e))},[`${t}-stack${t}-stack-expanded`]:{[`& > ${t}-notice-wrapper`]:{"&:not(:nth-last-child(-n + 1))":{opacity:1,overflow:"unset",color:"inherit",pointerEvents:"auto",[`& > ${e.componentCls}-notice`]:{opacity:1}},"&:after":{content:'""',position:"absolute",height:e.margin,width:"100%",insetInline:0,bottom:-e.margin,background:"transparent",pointerEvents:"auto"}}}},_V.map(r=>bV(e,r)).reduce((r,o)=>Object.assign(Object.assign({},r),o),{}))},CV=EV,Qz=e=>{const{iconCls:t,componentCls:r,boxShadow:o,fontSizeLG:c,notificationMarginBottom:f,borderRadiusLG:y,colorSuccess:l,colorInfo:w,colorWarning:E,colorError:P,colorTextHeading:M,notificationBg:z,notificationPadding:F,notificationMarginEdge:k,fontSize:U,lineHeight:X,width:$,notificationIconSize:j,colorText:V}=e,Z=`${r}-notice`;return{position:"relative",marginBottom:f,marginInlineStart:"auto",background:z,borderRadius:y,boxShadow:o,[Z]:{padding:F,width:$,maxWidth:`calc(100vw - ${k*2}px)`,overflow:"hidden",lineHeight:X,wordWrap:"break-word"},[`${r}-close-icon`]:{fontSize:U,cursor:"pointer"},[`${Z}-message`]:{marginBottom:e.marginXS,color:M,fontSize:c,lineHeight:e.lineHeightLG},[`${Z}-description`]:{fontSize:U,color:V},[`&${Z}-closable ${Z}-message`]:{paddingInlineEnd:e.paddingLG},[`${Z}-with-icon ${Z}-message`]:{marginBottom:e.marginXS,marginInlineStart:e.marginSM+j,fontSize:c},[`${Z}-with-icon ${Z}-description`]:{marginInlineStart:e.marginSM+j,fontSize:U},[`${Z}-icon`]:{position:"absolute",fontSize:j,lineHeight:0,[`&-success${t}`]:{color:l},[`&-info${t}`]:{color:w},[`&-warning${t}`]:{color:E},[`&-error${t}`]:{color:P}},[`${Z}-close`]:{position:"absolute",top:e.notificationPaddingVertical,insetInlineEnd:e.notificationPaddingHorizontal,color:e.colorIcon,outline:"none",width:e.notificationCloseButtonSize,height:e.notificationCloseButtonSize,borderRadius:e.borderRadiusSM,transition:`background-color ${e.motionDurationMid}, color ${e.motionDurationMid}`,display:"flex",alignItems:"center",justifyContent:"center","&:hover":{color:e.colorIconHover,backgroundColor:e.wireframe?"transparent":e.colorFillContent}},[`${Z}-btn`]:{float:"right",marginTop:e.marginSM}}},TV=e=>{const{componentCls:t,notificationMarginBottom:r,notificationMarginEdge:o,motionDurationMid:c,motionEaseInOut:f}=e,y=`${t}-notice`,l=new or("antNotificationFadeOut",{"0%":{maxHeight:e.animationMaxHeight,marginBottom:r},"100%":{maxHeight:0,marginBottom:0,paddingTop:0,paddingBottom:0,opacity:0}});return[{[t]:Object.assign(Object.assign({},ja(e)),{position:"fixed",zIndex:e.zIndexPopup,marginRight:{value:o,_skip_check_:!0},[`${t}-hook-holder`]:{position:"relative"},[`${t}-fade-appear-prepare`]:{opacity:"0 !important"},[`${t}-fade-enter, ${t}-fade-appear`]:{animationDuration:e.motionDurationMid,animationTimingFunction:f,animationFillMode:"both",opacity:0,animationPlayState:"paused"},[`${t}-fade-leave`]:{animationTimingFunction:f,animationFillMode:"both",animationDuration:c,animationPlayState:"paused"},[`${t}-fade-enter${t}-fade-enter-active, ${t}-fade-appear${t}-fade-appear-active`]:{animationPlayState:"running"},[`${t}-fade-leave${t}-fade-leave-active`]:{animationName:l,animationPlayState:"running"},"&-rtl":{direction:"rtl",[`${y}-btn`]:{float:"left"}}})},{[t]:{[`${y}-wrapper`]:Object.assign({},Qz(e))}}]},eL=e=>({zIndexPopup:e.zIndexPopupBase+50,width:384}),tL=e=>{const t=e.paddingMD,r=e.paddingLG;return Lr(e,{notificationBg:e.colorBgElevated,notificationPaddingVertical:t,notificationPaddingHorizontal:r,notificationIconSize:e.fontSizeLG*e.lineHeightLG,notificationCloseButtonSize:e.controlHeightLG*.55,notificationMarginBottom:e.margin,notificationPadding:`${e.paddingMD}px ${e.paddingContentHorizontalLG}px`,notificationMarginEdge:e.marginLG,animationMaxHeight:150,notificationStackLayer:3})},nL=ro("Notification",e=>{const t=tL(e);return[TV(t),yV(t),CV(t)]},eL),IV=QO(["Notification","PurePanel"],e=>{const t=`${e.componentCls}-notice`,r=tL(e);return{[`${t}-pure-panel`]:Object.assign(Object.assign({},Qz(r)),{width:r.width,maxWidth:`calc(100vw - ${r.notificationMarginEdge*2}px)`,margin:0})}},eL);var MV=globalThis&&globalThis.__rest||function(e,t){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(e);c<o.length;c++)t.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(e,o[c])&&(r[o[c]]=e[o[c]]);return r};function tE(e,t){return t===null||t===!1?null:t||T.createElement("span",{className:`${e}-close-x`},T.createElement(HS,{className:`${e}-close-icon`}))}const PV={success:gz,info:yz,error:wm,warning:vz},rL=e=>{const{prefixCls:t,icon:r,type:o,message:c,description:f,btn:y,role:l="alert"}=e;let w=null;return r?w=T.createElement("span",{className:`${t}-icon`},r):o&&(w=T.createElement(PV[o]||null,{className:Tt(`${t}-icon`,`${t}-icon-${o}`)})),T.createElement("div",{className:Tt({[`${t}-with-icon`]:w}),role:l},w,T.createElement("div",{className:`${t}-message`},c),T.createElement("div",{className:`${t}-description`},f),y&&T.createElement("div",{className:`${t}-btn`},y))},AV=e=>{const{prefixCls:t,className:r,icon:o,type:c,message:f,description:y,btn:l,closable:w=!0,closeIcon:E}=e,P=MV(e,["prefixCls","className","icon","type","message","description","btn","closable","closeIcon"]),{getPrefixCls:M}=T.useContext(ur),z=t||M("notification"),F=`${z}-notice`,[,k]=nL(z);return T.createElement("div",{className:Tt(`${F}-pure-panel`,k,r)},T.createElement(IV,{prefixCls:z}),T.createElement(GS,Object.assign({},P,{prefixCls:z,eventKey:"pure",duration:null,closable:w,closeIcon:tE(z,E),content:T.createElement(rL,{prefixCls:F,icon:o,type:c,message:f,description:y,btn:l})})))},RV=AV;function OV(e,t,r){let o;switch(e){case"top":o={left:"50%",transform:"translateX(-50%)",right:"auto",top:t,bottom:"auto"};break;case"topLeft":o={left:0,top:t,bottom:"auto"};break;case"topRight":o={right:0,top:t,bottom:"auto"};break;case"bottom":o={left:"50%",transform:"translateX(-50%)",right:"auto",top:"auto",bottom:r};break;case"bottomLeft":o={left:0,top:"auto",bottom:r};break;default:o={right:0,top:"auto",bottom:r};break}return o}function zV(e){return{motionName:`${e}-fade`}}var LV=globalThis&&globalThis.__rest||function(e,t){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(e);c<o.length;c++)t.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(e,o[c])&&(r[o[c]]=e[o[c]]);return r};const PM=24,DV=4.5,kV="topRight",$V=e=>{let{children:t,prefixCls:r}=e;const[,o]=nL(r);return T.createElement(bz,{classNames:{list:o,notice:o}},t)},FV=(e,t)=>{let{prefixCls:r,key:o}=t;return T.createElement($V,{prefixCls:r,key:o},e)},BV=T.forwardRef((e,t)=>{const{top:r,bottom:o,prefixCls:c,getContainer:f,maxCount:y,rtl:l,onAllRemoved:w,stack:E}=e,{getPrefixCls:P,getPopupContainer:M,notification:z}=T.useContext(ur),[,F]=Na(),k=c||P("notification"),U=Z=>OV(Z,r??PM,o??PM),X=()=>Tt({[`${k}-rtl`]:l}),$=()=>zV(k),[j,V]=wz({prefixCls:k,style:U,className:X,motion:$,closable:!0,closeIcon:tE(k),duration:DV,getContainer:()=>(f==null?void 0:f())||(M==null?void 0:M())||document.body,maxCount:y,onAllRemoved:w,renderNotifications:FV,stack:E===!1?!1:{threshold:typeof E=="object"?E==null?void 0:E.threshold:void 0,offset:8,gap:F.margin}});return T.useImperativeHandle(t,()=>Object.assign(Object.assign({},j),{prefixCls:k,notification:z})),V});function iL(e){const t=T.useRef(null);return kS(),[T.useMemo(()=>{const o=l=>{var w;if(!t.current)return;const{open:E,prefixCls:P,notification:M}=t.current,z=`${P}-notice`,{message:F,description:k,icon:U,type:X,btn:$,className:j,style:V,role:Z="alert",closeIcon:ee}=l,ne=LV(l,["message","description","icon","type","btn","className","style","role","closeIcon"]),Q=tE(z,ee);return E(Object.assign(Object.assign({placement:(w=e==null?void 0:e.placement)!==null&&w!==void 0?w:kV},ne),{content:T.createElement(rL,{prefixCls:z,icon:U,type:X,message:F,description:k,btn:$,role:Z}),className:Tt(X&&`${z}-${X}`,j,M==null?void 0:M.className),style:Object.assign(Object.assign({},M==null?void 0:M.style),V),closeIcon:Q,closable:!!Q}))},f={open:o,destroy:l=>{var w,E;l!==void 0?(w=t.current)===null||w===void 0||w.close(l):(E=t.current)===null||E===void 0||E.destroy()}};return["success","info","warning","error"].forEach(l=>{f[l]=w=>o(Object.assign(Object.assign({},w),{type:l}))}),f},[]),T.createElement(BV,Object.assign({key:"notification-holder"},e,{ref:t}))]}function NV(e){return iL(e)}function jV(e){return function(r){return T.createElement(US,{theme:{token:{motion:!1,zIndexPopupBase:0}}},T.createElement(e,Object.assign({},r)))}}function UV(e,t,r,o){function c(f){const{prefixCls:y,style:l}=f,w=T.useRef(null),[E,P]=T.useState(0),[M,z]=T.useState(0),[F,k]=Bs(!1,{value:f.open}),{getPrefixCls:U}=T.useContext(ur),X=U(t||"select",y);T.useEffect(()=>{if(k(!0),typeof ResizeObserver<"u"){const j=new ResizeObserver(Z=>{const ee=Z[0].target;P(ee.offsetHeight+8),z(ee.offsetWidth)}),V=setInterval(()=>{var Z;const ee=r?`.${r(X)}`:`.${X}-dropdown`,ne=(Z=w.current)===null||Z===void 0?void 0:Z.querySelector(ee);ne&&(clearInterval(V),j.observe(ne))},10);return()=>{clearInterval(V),j.disconnect()}}},[]);let $=Object.assign(Object.assign({},f),{style:Object.assign(Object.assign({},l),{margin:0}),open:F,visible:F,getPopupContainer:()=>w.current});return o&&($=o($)),T.createElement("div",{ref:w,style:{paddingBottom:E,position:"relative",minWidth:M}},T.createElement(e,Object.assign({},$)))}return jV(c)}const oL=function(){if(typeof navigator>"u"||typeof window>"u")return!1;var e=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(e==null?void 0:e.substr(0,4))};var R0=function(t){var r=t.className,o=t.customizeIcon,c=t.customizeIconProps,f=t.onMouseDown,y=t.onClick,l=t.children,w;return typeof o=="function"?w=o(c):w=o,T.createElement("span",{className:r,onMouseDown:function(P){P.preventDefault(),f&&f(P)},style:{userSelect:"none",WebkitUserSelect:"none"},unselectable:"on",onClick:y,"aria-hidden":!0},w!==void 0?w:T.createElement("span",{className:Tt(r.split(/\s+/).map(function(E){return"".concat(E,"-icon")}))},l))};function VV(e,t,r,o,c){var f=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!1,y=arguments.length>6?arguments[6]:void 0,l=arguments.length>7?arguments[7]:void 0,w=lt.useMemo(function(){if(Zn(o)==="object")return o.clearIcon;if(c)return c},[o,c]),E=lt.useMemo(function(){return!!(!f&&o&&(r.length||y)&&!(l==="combobox"&&y===""))},[o,f,r.length,y,l]);return{allowClear:E,clearIcon:lt.createElement(R0,{className:"".concat(e,"-clear"),onMouseDown:t,customizeIcon:w},"")}}var aL=T.createContext(null);function HV(){return T.useContext(aL)}function GV(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:10,t=T.useState(!1),r=Bt(t,2),o=r[0],c=r[1],f=T.useRef(null),y=function(){window.clearTimeout(f.current)};T.useEffect(function(){return y},[]);var l=function(E,P){y(),f.current=window.setTimeout(function(){c(E),P&&P()},e)};return[o,l,y]}function sL(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:250,t=T.useRef(null),r=T.useRef(null);T.useEffect(function(){return function(){window.clearTimeout(r.current)}},[]);function o(c){(c||t.current===null)&&(t.current=c),window.clearTimeout(r.current),r.current=window.setTimeout(function(){t.current=null},e)}return[function(){return t.current},o]}function WV(e,t,r,o){var c=T.useRef(null);c.current={open:t,triggerOpen:r,customizedTrigger:o},T.useEffect(function(){function f(y){var l;if(!((l=c.current)!==null&&l!==void 0&&l.customizedTrigger)){var w=y.target;w.shadowRoot&&y.composed&&(w=y.composedPath()[0]||w),c.current.open&&e().filter(function(E){return E}).every(function(E){return!E.contains(w)&&E!==w})&&c.current.triggerOpen(!1)}}return window.addEventListener("mousedown",f),function(){return window.removeEventListener("mousedown",f)}},[])}var qV=["prefixCls","invalidate","item","renderItem","responsive","responsiveDisabled","registerSize","itemKey","className","style","children","display","order","component"],Od=void 0;function ZV(e,t){var r=e.prefixCls,o=e.invalidate,c=e.item,f=e.renderItem,y=e.responsive,l=e.responsiveDisabled,w=e.registerSize,E=e.itemKey,P=e.className,M=e.style,z=e.children,F=e.display,k=e.order,U=e.component,X=U===void 0?"div":U,$=Vr(e,qV),j=y&&!F;function V(ie){w(E,ie)}T.useEffect(function(){return function(){V(null)}},[]);var Z=f&&c!==Od?f(c):z,ee;o||(ee={opacity:j?0:1,height:j?0:Od,overflowY:j?"hidden":Od,order:y?k:Od,pointerEvents:j?"none":Od,position:j?"absolute":Od});var ne={};j&&(ne["aria-hidden"]=!0);var Q=T.createElement(X,Sn({className:Tt(!o&&r,P),style:st(st({},ee),M)},ne,$,{ref:t}),Z);return y&&(Q=T.createElement(bl,{onResize:function(te){var ge=te.offsetWidth;V(ge)},disabled:l},Q)),Q}var Fp=T.forwardRef(ZV);Fp.displayName="Item";function XV(e){if(typeof MessageChannel>"u")yi(e);else{var t=new MessageChannel;t.port1.onmessage=function(){return e()},t.port2.postMessage(void 0)}}function KV(){var e=T.useRef(null),t=function(o){e.current||(e.current=[],XV(function(){_c.unstable_batchedUpdates(function(){e.current.forEach(function(c){c()}),e.current=null})})),e.current.push(o)};return t}function hp(e,t){var r=T.useState(t),o=Bt(r,2),c=o[0],f=o[1],y=jo(function(l){e(function(){f(l)})});return[c,y]}var Fy=lt.createContext(null),YV=["component"],JV=["className"],QV=["className"],e9=function(t,r){var o=T.useContext(Fy);if(!o){var c=t.component,f=c===void 0?"div":c,y=Vr(t,YV);return T.createElement(f,Sn({},y,{ref:r}))}var l=o.className,w=Vr(o,JV),E=t.className,P=Vr(t,QV);return T.createElement(Fy.Provider,{value:null},T.createElement(Fp,Sn({ref:r,className:Tt(l,E)},w,P)))},lL=T.forwardRef(e9);lL.displayName="RawItem";var t9=["prefixCls","data","renderItem","renderRawItem","itemKey","itemWidth","ssr","style","className","maxCount","renderRest","renderRawRest","suffix","component","itemComponent","onVisibleChange"],cL="responsive",uL="invalidate";function n9(e){return"+ ".concat(e.length," ...")}function r9(e,t){var r=e.prefixCls,o=r===void 0?"rc-overflow":r,c=e.data,f=c===void 0?[]:c,y=e.renderItem,l=e.renderRawItem,w=e.itemKey,E=e.itemWidth,P=E===void 0?10:E,M=e.ssr,z=e.style,F=e.className,k=e.maxCount,U=e.renderRest,X=e.renderRawRest,$=e.suffix,j=e.component,V=j===void 0?"div":j,Z=e.itemComponent,ee=e.onVisibleChange,ne=Vr(e,t9),Q=M==="full",ie=KV(),te=hp(ie,null),ge=Bt(te,2),ue=ge[0],oe=ge[1],fe=ue||0,Ee=hp(ie,new Map),ke=Bt(Ee,2),Le=ke[0],Ne=ke[1],pe=hp(ie,0),He=Bt(pe,2),Be=He[0],Ge=He[1],Qe=hp(ie,0),gt=Bt(Qe,2),St=gt[0],xt=gt[1],jt=hp(ie,0),Ut=Bt(jt,2),bt=Ut[0],ut=Ut[1],It=T.useState(null),ft=Bt(It,2),yt=ft[0],ct=ft[1],Mt=T.useState(null),Ct=Bt(Mt,2),Qt=Ct[0],Vt=Ct[1],Nt=T.useMemo(function(){return Qt===null&&Q?Number.MAX_SAFE_INTEGER:Qt||0},[Qt,ue]),ot=T.useState(!1),rt=Bt(ot,2),kt=rt[0],Pt=rt[1],sn="".concat(o,"-item"),An=Math.max(Be,St),Mn=k===cL,on=f.length&&Mn,Vn=k===uL,Nn=on||typeof k=="number"&&f.length>k,zn=T.useMemo(function(){var we=f;return on?ue===null&&Q?we=f:we=f.slice(0,Math.min(f.length,fe/P)):typeof k=="number"&&(we=f.slice(0,k)),we},[f,P,ue,k,on]),yn=T.useMemo(function(){return on?f.slice(Nt+1):f.slice(zn.length)},[f,zn,on,Nt]),rn=T.useCallback(function(we,$e){var je;return typeof w=="function"?w(we):(je=w&&(we==null?void 0:we[w]))!==null&&je!==void 0?je:$e},[w]),Wn=T.useCallback(y||function(we){return we},[y]);function jn(we,$e,je){Qt===we&&($e===void 0||$e===yt)||(Vt(we),je||(Pt(we<f.length-1),ee==null||ee(we)),$e!==void 0&&ct($e))}function pr(we,$e){oe($e.clientWidth)}function ar(we,$e){Ne(function(je){var Je=new Map(je);return $e===null?Je.delete(we):Je.set(we,$e),Je})}function qn(we,$e){xt($e),Ge(St)}function Qn(we,$e){ut($e)}function Rr(we){return Le.get(rn(zn[we],we))}zr(function(){if(fe&&typeof An=="number"&&zn){var we=bt,$e=zn.length,je=$e-1;if(!$e){jn(0,null);return}for(var Je=0;Je<$e;Je+=1){var We=Rr(Je);if(Q&&(We=We||0),We===void 0){jn(Je-1,void 0,!0);break}if(we+=We,je===0&&we<=fe||Je===je-1&&we+Rr(je)<=fe){jn(je,null);break}else if(we+An>fe){jn(Je-1,we-We-bt+St);break}}$&&Rr(0)+bt>fe&&ct(null)}},[fe,Le,St,bt,rn,zn]);var _e=kt&&!!yn.length,W={};yt!==null&&on&&(W={position:"absolute",left:yt,top:0});var J={prefixCls:sn,responsive:on,component:Z,invalidate:Vn},de=l?function(we,$e){var je=rn(we,$e);return T.createElement(Fy.Provider,{key:je,value:st(st({},J),{},{order:$e,item:we,itemKey:je,registerSize:ar,display:$e<=Nt})},l(we,$e))}:function(we,$e){var je=rn(we,$e);return T.createElement(Fp,Sn({},J,{order:$e,key:je,item:we,renderItem:Wn,itemKey:je,registerSize:ar,display:$e<=Nt}))},Se,Ie={order:_e?Nt:Number.MAX_SAFE_INTEGER,className:"".concat(sn,"-rest"),registerSize:qn,display:_e};if(X)X&&(Se=T.createElement(Fy.Provider,{value:st(st({},J),Ie)},X(yn)));else{var Me=U||n9;Se=T.createElement(Fp,Sn({},J,Ie),typeof Me=="function"?Me(yn):Me)}var De=T.createElement(V,Sn({className:Tt(!Vn&&o,F),style:z,ref:t},ne),zn.map(de),Nn?Se:null,$&&T.createElement(Fp,Sn({},J,{responsive:Mn,responsiveDisabled:!on,order:Nt,className:"".concat(sn,"-suffix"),registerSize:Qn,display:!0,style:W}),$));return Mn&&(De=T.createElement(bl,{onResize:pr,disabled:!on},De)),De}var Tm=T.forwardRef(r9);Tm.displayName="Overflow";Tm.Item=lL;Tm.RESPONSIVE=cL;Tm.INVALIDATE=uL;var i9=function(t,r){var o,c=t.prefixCls,f=t.id,y=t.inputElement,l=t.disabled,w=t.tabIndex,E=t.autoFocus,P=t.autoComplete,M=t.editable,z=t.activeDescendantId,F=t.value,k=t.maxLength,U=t.onKeyDown,X=t.onMouseDown,$=t.onChange,j=t.onPaste,V=t.onCompositionStart,Z=t.onCompositionEnd,ee=t.open,ne=t.attrs,Q=y||T.createElement("input",null),ie=Q,te=ie.ref,ge=ie.props,ue=ge.onKeyDown,oe=ge.onChange,fe=ge.onMouseDown,Ee=ge.onCompositionStart,ke=ge.onCompositionEnd,Le=ge.style;return"maxLength"in Q.props,Q=T.cloneElement(Q,st(st(st({type:"search"},ge),{},{id:f,ref:Ba(r,te),disabled:l,tabIndex:w,autoComplete:P||"off",autoFocus:E,className:Tt("".concat(c,"-selection-search-input"),(o=Q)===null||o===void 0||(o=o.props)===null||o===void 0?void 0:o.className),role:"combobox","aria-expanded":ee||!1,"aria-haspopup":"listbox","aria-owns":"".concat(f,"_list"),"aria-autocomplete":"list","aria-controls":"".concat(f,"_list"),"aria-activedescendant":ee?z:void 0},ne),{},{value:M?F:"",maxLength:k,readOnly:!M,unselectable:M?null:"on",style:st(st({},Le),{},{opacity:M?null:0}),onKeyDown:function(pe){U(pe),ue&&ue(pe)},onMouseDown:function(pe){X(pe),fe&&fe(pe)},onChange:function(pe){$(pe),oe&&oe(pe)},onCompositionStart:function(pe){V(pe),Ee&&Ee(pe)},onCompositionEnd:function(pe){Z(pe),ke&&ke(pe)},onPaste:j})),Q},nE=T.forwardRef(i9);nE.displayName="Input";function dL(e){return Array.isArray(e)?e:e!==void 0?[e]:[]}var o9=typeof window<"u"&&window.document&&window.document.documentElement,a9=o9;function s9(e){return e!=null}function l9(e){return!e&&e!==0}function AM(e){return["string","number"].includes(Zn(e))}function hL(e){var t=void 0;return e&&(AM(e.title)?t=e.title.toString():AM(e.label)&&(t=e.label.toString())),t}function c9(e,t){a9?T.useLayoutEffect(e,t):T.useEffect(e,t)}function u9(e){var t;return(t=e.key)!==null&&t!==void 0?t:e.value}var RM=function(t){t.preventDefault(),t.stopPropagation()},d9=function(t){var r=t.id,o=t.prefixCls,c=t.values,f=t.open,y=t.searchValue,l=t.autoClearSearchValue,w=t.inputRef,E=t.placeholder,P=t.disabled,M=t.mode,z=t.showSearch,F=t.autoFocus,k=t.autoComplete,U=t.activeDescendantId,X=t.tabIndex,$=t.removeIcon,j=t.maxTagCount,V=t.maxTagTextLength,Z=t.maxTagPlaceholder,ee=Z===void 0?function(ct){return"+ ".concat(ct.length," ...")}:Z,ne=t.tagRender,Q=t.onToggleOpen,ie=t.onRemove,te=t.onInputChange,ge=t.onInputPaste,ue=t.onInputKeyDown,oe=t.onInputMouseDown,fe=t.onInputCompositionStart,Ee=t.onInputCompositionEnd,ke=T.useRef(null),Le=T.useState(0),Ne=Bt(Le,2),pe=Ne[0],He=Ne[1],Be=T.useState(!1),Ge=Bt(Be,2),Qe=Ge[0],gt=Ge[1],St="".concat(o,"-selection"),xt=f||M==="multiple"&&l===!1||M==="tags"?y:"",jt=M==="tags"||M==="multiple"&&l===!1||z&&(f||Qe);c9(function(){He(ke.current.scrollWidth)},[xt]);function Ut(ct,Mt,Ct,Qt,Vt){return T.createElement("span",{className:Tt("".concat(St,"-item"),Fe({},"".concat(St,"-item-disabled"),Ct)),title:hL(ct)},T.createElement("span",{className:"".concat(St,"-item-content")},Mt),Qt&&T.createElement(R0,{className:"".concat(St,"-item-remove"),onMouseDown:RM,onClick:Vt,customizeIcon:$},""))}function bt(ct,Mt,Ct,Qt,Vt){var Nt=function(rt){RM(rt),Q(!f)};return T.createElement("span",{onMouseDown:Nt},ne({label:Mt,value:ct,disabled:Ct,closable:Qt,onClose:Vt}))}function ut(ct){var Mt=ct.disabled,Ct=ct.label,Qt=ct.value,Vt=!P&&!Mt,Nt=Ct;if(typeof V=="number"&&(typeof Ct=="string"||typeof Ct=="number")){var ot=String(Nt);ot.length>V&&(Nt="".concat(ot.slice(0,V),"..."))}var rt=function(Pt){Pt&&Pt.stopPropagation(),ie(ct)};return typeof ne=="function"?bt(Qt,Nt,Mt,Vt,rt):Ut(ct,Nt,Mt,Vt,rt)}function It(ct){var Mt=typeof ee=="function"?ee(ct):ee;return Ut({title:Mt},Mt,!1)}var ft=T.createElement("div",{className:"".concat(St,"-search"),style:{width:pe},onFocus:function(){gt(!0)},onBlur:function(){gt(!1)}},T.createElement(nE,{ref:w,open:f,prefixCls:o,id:r,inputElement:null,disabled:P,autoFocus:F,autoComplete:k,editable:jt,activeDescendantId:U,value:xt,onKeyDown:ue,onMouseDown:oe,onChange:te,onPaste:ge,onCompositionStart:fe,onCompositionEnd:Ee,tabIndex:X,attrs:sm(t,!0)}),T.createElement("span",{ref:ke,className:"".concat(St,"-search-mirror"),"aria-hidden":!0},xt,"")),yt=T.createElement(Tm,{prefixCls:"".concat(St,"-overflow"),data:c,renderItem:ut,renderRest:It,suffix:ft,itemKey:u9,maxCount:j});return T.createElement(T.Fragment,null,yt,!c.length&&!xt&&T.createElement("span",{className:"".concat(St,"-placeholder")},E))},h9=function(t){var r=t.inputElement,o=t.prefixCls,c=t.id,f=t.inputRef,y=t.disabled,l=t.autoFocus,w=t.autoComplete,E=t.activeDescendantId,P=t.mode,M=t.open,z=t.values,F=t.placeholder,k=t.tabIndex,U=t.showSearch,X=t.searchValue,$=t.activeValue,j=t.maxLength,V=t.onInputKeyDown,Z=t.onInputMouseDown,ee=t.onInputChange,ne=t.onInputPaste,Q=t.onInputCompositionStart,ie=t.onInputCompositionEnd,te=t.title,ge=T.useState(!1),ue=Bt(ge,2),oe=ue[0],fe=ue[1],Ee=P==="combobox",ke=Ee||U,Le=z[0],Ne=X||"";Ee&&$&&!oe&&(Ne=$),T.useEffect(function(){Ee&&fe(!1)},[Ee,$]);var pe=P!=="combobox"&&!M&&!U?!1:!!Ne,He=te===void 0?hL(Le):te,Be=function(){if(Le)return null;var Qe=pe?{visibility:"hidden"}:void 0;return T.createElement("span",{className:"".concat(o,"-selection-placeholder"),style:Qe},F)};return T.createElement(T.Fragment,null,T.createElement("span",{className:"".concat(o,"-selection-search")},T.createElement(nE,{ref:f,prefixCls:o,id:c,open:M,inputElement:r,disabled:y,autoFocus:l,autoComplete:w,editable:ke,activeDescendantId:E,value:Ne,onKeyDown:V,onMouseDown:Z,onChange:function(Qe){fe(!0),ee(Qe)},onPaste:ne,onCompositionStart:Q,onCompositionEnd:ie,tabIndex:k,attrs:sm(t,!0),maxLength:Ee?j:void 0})),!Ee&&Le?T.createElement("span",{className:"".concat(o,"-selection-item"),title:He,style:pe?{visibility:"hidden"}:void 0},Le.label):null,Be())};function f9(e){return![Ht.ESC,Ht.SHIFT,Ht.BACKSPACE,Ht.TAB,Ht.WIN_KEY,Ht.ALT,Ht.META,Ht.WIN_KEY_RIGHT,Ht.CTRL,Ht.SEMICOLON,Ht.EQUALS,Ht.CAPS_LOCK,Ht.CONTEXT_MENU,Ht.F1,Ht.F2,Ht.F3,Ht.F4,Ht.F5,Ht.F6,Ht.F7,Ht.F8,Ht.F9,Ht.F10,Ht.F11,Ht.F12].includes(e)}var p9=function(t,r){var o=T.useRef(null),c=T.useRef(!1),f=t.prefixCls,y=t.open,l=t.mode,w=t.showSearch,E=t.tokenWithEnter,P=t.autoClearSearchValue,M=t.onSearch,z=t.onSearchSubmit,F=t.onToggleOpen,k=t.onInputKeyDown,U=t.domRef;T.useImperativeHandle(r,function(){return{focus:function(){o.current.focus()},blur:function(){o.current.blur()}}});var X=sL(0),$=Bt(X,2),j=$[0],V=$[1],Z=function(Ne){var pe=Ne.which;(pe===Ht.UP||pe===Ht.DOWN)&&Ne.preventDefault(),k&&k(Ne),pe===Ht.ENTER&&l==="tags"&&!c.current&&!y&&(z==null||z(Ne.target.value)),f9(pe)&&F(!0)},ee=function(){V(!0)},ne=T.useRef(null),Q=function(Ne){M(Ne,!0,c.current)!==!1&&F(!0)},ie=function(){c.current=!0},te=function(Ne){c.current=!1,l!=="combobox"&&Q(Ne.target.value)},ge=function(Ne){var pe=Ne.target.value;if(E&&ne.current&&/[\r\n]/.test(ne.current)){var He=ne.current.replace(/[\r\n]+$/,"").replace(/\r\n/g," ").replace(/[\r\n]/g," ");pe=pe.replace(He,ne.current)}ne.current=null,Q(pe)},ue=function(Ne){var pe=Ne.clipboardData,He=pe.getData("text");ne.current=He},oe=function(Ne){var pe=Ne.target;if(pe!==o.current){var He=document.body.style.msTouchAction!==void 0;He?setTimeout(function(){o.current.focus()}):o.current.focus()}},fe=function(Ne){var pe=j();Ne.target!==o.current&&!pe&&l!=="combobox"&&Ne.preventDefault(),(l!=="combobox"&&(!w||!pe)||!y)&&(y&&P!==!1&&M("",!0,!1),F())},Ee={inputRef:o,onInputKeyDown:Z,onInputMouseDown:ee,onInputChange:ge,onInputPaste:ue,onInputCompositionStart:ie,onInputCompositionEnd:te},ke=l==="multiple"||l==="tags"?T.createElement(d9,Sn({},t,Ee)):T.createElement(h9,Sn({},t,Ee));return T.createElement("div",{ref:U,className:"".concat(f,"-selector"),onClick:oe,onMouseDown:fe},ke)},fL=T.forwardRef(p9);fL.displayName="Selector";function dm(e){"@babel/helpers - typeof";return dm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dm(e)}function m9(e,t){if(dm(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var o=r.call(e,t||"default");if(dm(o)!=="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function g9(e){var t=m9(e,"string");return dm(t)==="symbol"?t:String(t)}function v9(e,t,r){return t=g9(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function OM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),r.push.apply(r,o)}return r}function Eo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?OM(Object(r),!0).forEach(function(o){v9(e,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):OM(Object(r)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(r,o))})}return e}function y9(e){if(Array.isArray(e))return e}function _9(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var o,c,f,y,l=[],w=!0,E=!1;try{if(f=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;w=!1}else for(;!(w=(o=f.call(r)).done)&&(l.push(o.value),l.length!==t);w=!0);}catch(P){E=!0,c=P}finally{try{if(!w&&r.return!=null&&(y=r.return(),Object(y)!==y))return}finally{if(E)throw c}}return l}}function gw(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,o=new Array(t);r<t;r++)o[r]=e[r];return o}function pL(e,t){if(e){if(typeof e=="string")return gw(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gw(e,t)}}function x9(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ki(e,t){return y9(e)||_9(e,t)||pL(e,t)||x9()}function b9(e,t){if(e==null)return{};var r={},o=Object.keys(e),c,f;for(f=0;f<o.length;f++)c=o[f],!(t.indexOf(c)>=0)&&(r[c]=e[c]);return r}function w9(e,t){if(e==null)return{};var r=b9(e,t),o,c;if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(e);for(c=0;c<f.length;c++)o=f[c],!(t.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(e,o)&&(r[o]=e[o])}return r}function By(){return By=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},By.apply(this,arguments)}function S9(e){var t=e.prefixCls,r=e.align,o=e.arrow,c=e.arrowPos,f=o||{},y=f.className,l=f.content,w=c.x,E=w===void 0?0:w,P=c.y,M=P===void 0?0:P,z=T.useRef();if(!r||!r.points)return null;var F={position:"absolute"};if(r.autoArrow!==!1){var k=r.points[0],U=r.points[1],X=k[0],$=k[1],j=U[0],V=U[1];X===j||!["t","b"].includes(X)?F.top=M:X==="t"?F.top=0:F.bottom=0,$===V||!["l","r"].includes($)?F.left=E:$==="l"?F.left=0:F.right=0}return T.createElement("div",{ref:z,className:Tt("".concat(t,"-arrow"),y),style:F},l)}function E9(e){var t=e.prefixCls,r=e.open,o=e.zIndex,c=e.mask,f=e.motion;return c?T.createElement(Ah,By({},f,{motionAppear:!0,visible:r,removeOnLeave:!0}),function(y){var l=y.className;return T.createElement("div",{style:{zIndex:o},className:Tt("".concat(t,"-mask"),l)})}):null}var C9=T.memo(function(e){var t=e.children;return t},function(e,t){return t.cache}),T9=T.forwardRef(function(e,t){var r=e.popup,o=e.className,c=e.prefixCls,f=e.style,y=e.target,l=e.onVisibleChanged,w=e.open,E=e.keepDom,P=e.fresh,M=e.onClick,z=e.mask,F=e.arrow,k=e.arrowPos,U=e.align,X=e.motion,$=e.maskMotion,j=e.forceRender,V=e.getPopupContainer,Z=e.autoDestroy,ee=e.portal,ne=e.zIndex,Q=e.onMouseEnter,ie=e.onMouseLeave,te=e.onPointerEnter,ge=e.ready,ue=e.offsetX,oe=e.offsetY,fe=e.offsetR,Ee=e.offsetB,ke=e.onAlign,Le=e.onPrepare,Ne=e.stretch,pe=e.targetWidth,He=e.targetHeight,Be=typeof r=="function"?r():r,Ge=w||E,Qe=(V==null?void 0:V.length)>0,gt=T.useState(!V||!Qe),St=ki(gt,2),xt=St[0],jt=St[1];if(zr(function(){!xt&&Qe&&y&&jt(!0)},[xt,Qe,y]),!xt)return null;var Ut="auto",bt={left:"-1000vw",top:"-1000vh",right:Ut,bottom:Ut};if(ge||!w){var ut,It=U.points,ft=U.dynamicInset||((ut=U._experimental)===null||ut===void 0?void 0:ut.dynamicInset),yt=ft&&It[0][1]==="r",ct=ft&&It[0][0]==="b";yt?(bt.right=fe,bt.left=Ut):(bt.left=ue,bt.right=Ut),ct?(bt.bottom=Ee,bt.top=Ut):(bt.top=oe,bt.bottom=Ut)}var Mt={};return Ne&&(Ne.includes("height")&&He?Mt.height=He:Ne.includes("minHeight")&&He&&(Mt.minHeight=He),Ne.includes("width")&&pe?Mt.width=pe:Ne.includes("minWidth")&&pe&&(Mt.minWidth=pe)),w||(Mt.pointerEvents="none"),T.createElement(ee,{open:j||Ge,getContainer:V&&function(){return V(y)},autoDestroy:Z},T.createElement(E9,{prefixCls:c,open:w,zIndex:ne,mask:z,motion:$}),T.createElement(bl,{onResize:ke,disabled:!w},function(Ct){return T.createElement(Ah,By({motionAppear:!0,motionEnter:!0,motionLeave:!0,removeOnLeave:!1,forceRender:j,leavedClassName:"".concat(c,"-hidden")},X,{onAppearPrepare:Le,onEnterPrepare:Le,visible:w,onVisibleChanged:function(Vt){var Nt;X==null||(Nt=X.onVisibleChanged)===null||Nt===void 0||Nt.call(X,Vt),l(Vt)}}),function(Qt,Vt){var Nt=Qt.className,ot=Qt.style,rt=Tt(c,Nt,o);return T.createElement("div",{ref:Ba(Ct,t,Vt),className:rt,style:Eo(Eo(Eo(Eo({"--arrow-x":"".concat(k.x||0,"px"),"--arrow-y":"".concat(k.y||0,"px")},bt),Mt),ot),{},{boxSizing:"border-box",zIndex:ne},f),onMouseEnter:Q,onMouseLeave:ie,onPointerEnter:te,onClick:M},F&&T.createElement(S9,{prefixCls:c,arrow:F,arrowPos:k,align:U}),T.createElement(C9,{cache:!w&&!P},Be))})}))}),I9=T.forwardRef(function(e,t){var r=e.children,o=e.getTriggerDOMNode,c=xm(r),f=T.useCallback(function(l){IS(t,o?o(l):l)},[o]),y=_0(f,r.ref);return c?T.cloneElement(r,{ref:y}):r}),zM=T.createContext(null);function LM(e){return e?Array.isArray(e)?e:[e]:[]}function M9(e,t,r,o){return T.useMemo(function(){var c=LM(r??t),f=LM(o??t),y=new Set(c),l=new Set(f);return e&&(y.has("hover")&&(y.delete("hover"),y.add("click")),l.has("hover")&&(l.delete("hover"),l.add("click"))),[y,l]},[e,t,r,o])}function P9(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0;return r?e[0]===t[0]:e[0]===t[0]&&e[1]===t[1]}function A9(e,t,r,o){for(var c=r.points,f=Object.keys(e),y=0;y<f.length;y+=1){var l,w=f[y];if(P9((l=e[w])===null||l===void 0?void 0:l.points,c,o))return"".concat(t,"-placement-").concat(w)}return""}function DM(e,t,r,o){return t||(r?{motionName:"".concat(e,"-").concat(r)}:o?{motionName:o}:null)}function Im(e){return e.ownerDocument.defaultView}function vw(e){for(var t=[],r=e==null?void 0:e.parentElement,o=["hidden","scroll","clip","auto"];r;){var c=Im(r).getComputedStyle(r),f=c.overflowX,y=c.overflowY,l=c.overflow;[f,y,l].some(function(w){return o.includes(w)})&&t.push(r),r=r.parentElement}return t}function hm(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return Number.isNaN(e)?t:e}function fp(e){return hm(parseFloat(e),0)}function kM(e,t){var r=Eo({},e);return(t||[]).forEach(function(o){if(!(o instanceof HTMLBodyElement||o instanceof HTMLHtmlElement)){var c=Im(o).getComputedStyle(o),f=c.overflow,y=c.overflowClipMargin,l=c.borderTopWidth,w=c.borderBottomWidth,E=c.borderLeftWidth,P=c.borderRightWidth,M=o.getBoundingClientRect(),z=o.offsetHeight,F=o.clientHeight,k=o.offsetWidth,U=o.clientWidth,X=fp(l),$=fp(w),j=fp(E),V=fp(P),Z=hm(Math.round(M.width/k*1e3)/1e3),ee=hm(Math.round(M.height/z*1e3)/1e3),ne=(k-U-j-V)*Z,Q=(z-F-X-$)*ee,ie=X*ee,te=$*ee,ge=j*Z,ue=V*Z,oe=0,fe=0;if(f==="clip"){var Ee=fp(y);oe=Ee*Z,fe=Ee*ee}var ke=M.x+ge-oe,Le=M.y+ie-fe,Ne=ke+M.width+2*oe-ge-ue-ne,pe=Le+M.height+2*fe-ie-te-Q;r.left=Math.max(r.left,ke),r.top=Math.max(r.top,Le),r.right=Math.min(r.right,Ne),r.bottom=Math.min(r.bottom,pe)}}),r}function $M(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r="".concat(t),o=r.match(/^(.*)\%$/);return o?e*(parseFloat(o[1])/100):parseFloat(r)}function FM(e,t){var r=t||[],o=ki(r,2),c=o[0],f=o[1];return[$M(e.width,c),$M(e.height,f)]}function BM(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return[e[0],e[1]]}function zd(e,t){var r=t[0],o=t[1],c,f;return r==="t"?f=e.y:r==="b"?f=e.y+e.height:f=e.y+e.height/2,o==="l"?c=e.x:o==="r"?c=e.x+e.width:c=e.x+e.width/2,{x:c,y:f}}function Jl(e,t){var r={t:"b",b:"t",l:"r",r:"l"};return e.map(function(o,c){return c===t?r[o]||"c":o}).join("")}function R9(e,t,r,o,c,f,y){var l=T.useState({ready:!1,offsetX:0,offsetY:0,offsetR:0,offsetB:0,arrowX:0,arrowY:0,scaleX:1,scaleY:1,align:c[o]||{}}),w=ki(l,2),E=w[0],P=w[1],M=T.useRef(0),z=T.useMemo(function(){return t?vw(t):[]},[t]),F=T.useRef({}),k=function(){F.current={}};e||k();var U=jo(function(){if(t&&r&&e){let Kn=function(xi,bo){var Oo=arguments.length>2&&arguments[2]!==void 0?arguments[2]:rt,pa=Be.x+xi,ys=Be.y+bo,Ko=pa+ut,ma=ys+bt,_s=Math.max(pa,Oo.left),ga=Math.max(ys,Oo.top),Ei=Math.min(Ko,Oo.right),Nr=Math.min(ma,Oo.bottom);return Math.max(0,(Ei-_s)*(Nr-ga))},js=function(){On=Be.y+Me,er=On+bt,Xn=Be.x+Ie,Zr=Xn+ut};var j,V,Z=t,ee=Z.ownerDocument,ne=Im(Z),Q=ne.getComputedStyle(Z),ie=Q.width,te=Q.height,ge=Q.position,ue=Z.style.left,oe=Z.style.top,fe=Z.style.right,Ee=Z.style.bottom,ke=Z.style.overflow,Le=Eo(Eo({},c[o]),f),Ne=ee.createElement("div");(j=Z.parentElement)===null||j===void 0||j.appendChild(Ne),Ne.style.left="".concat(Z.offsetLeft,"px"),Ne.style.top="".concat(Z.offsetTop,"px"),Ne.style.position=ge,Ne.style.height="".concat(Z.offsetHeight,"px"),Ne.style.width="".concat(Z.offsetWidth,"px"),Z.style.left="0",Z.style.top="0",Z.style.right="auto",Z.style.bottom="auto",Z.style.overflow="hidden";var pe;if(Array.isArray(r))pe={x:r[0],y:r[1],width:0,height:0};else{var He=r.getBoundingClientRect();pe={x:He.x,y:He.y,width:He.width,height:He.height}}var Be=Z.getBoundingClientRect(),Ge=ee.documentElement,Qe=Ge.clientWidth,gt=Ge.clientHeight,St=Ge.scrollWidth,xt=Ge.scrollHeight,jt=Ge.scrollTop,Ut=Ge.scrollLeft,bt=Be.height,ut=Be.width,It=pe.height,ft=pe.width,yt={left:0,top:0,right:Qe,bottom:gt},ct={left:-Ut,top:-jt,right:St-Ut,bottom:xt-jt},Mt=Le.htmlRegion,Ct="visible",Qt="visibleFirst";Mt!=="scroll"&&Mt!==Qt&&(Mt=Ct);var Vt=Mt===Qt,Nt=kM(ct,z),ot=kM(yt,z),rt=Mt===Ct?ot:Nt,kt=Vt?ot:rt;Z.style.left="auto",Z.style.top="auto",Z.style.right="0",Z.style.bottom="0";var Pt=Z.getBoundingClientRect();Z.style.left=ue,Z.style.top=oe,Z.style.right=fe,Z.style.bottom=Ee,Z.style.overflow=ke,(V=Z.parentElement)===null||V===void 0||V.removeChild(Ne);var sn=hm(Math.round(ut/parseFloat(ie)*1e3)/1e3),An=hm(Math.round(bt/parseFloat(te)*1e3)/1e3);if(sn===0||An===0||Cy(r)&&!Iz(r))return;var Mn=Le.offset,on=Le.targetOffset,Vn=FM(Be,Mn),Nn=ki(Vn,2),zn=Nn[0],yn=Nn[1],rn=FM(pe,on),Wn=ki(rn,2),jn=Wn[0],pr=Wn[1];pe.x-=jn,pe.y-=pr;var ar=Le.points||[],qn=ki(ar,2),Qn=qn[0],Rr=qn[1],_e=BM(Rr),W=BM(Qn),J=zd(pe,_e),de=zd(Be,W),Se=Eo({},Le),Ie=J.x-de.x+zn,Me=J.y-de.y+yn,De=Kn(Ie,Me),we=Kn(Ie,Me,ot),$e=zd(pe,["t","l"]),je=zd(Be,["t","l"]),Je=zd(pe,["b","r"]),We=zd(Be,["b","r"]),wt=Le.overflow||{},Yt=wt.adjustX,Xt=wt.adjustY,un=wt.shiftX,ln=wt.shiftY,Gn=function(bo){return typeof bo=="boolean"?bo:bo>=0},On,er,Xn,Zr;js();var an=Gn(Xt),nn=W[0]===_e[0];if(an&&W[0]==="t"&&(er>kt.bottom||F.current.bt)){var En=Me;nn?En-=bt-It:En=$e.y-We.y-yn;var Tr=Kn(Ie,En),ri=Kn(Ie,En,ot);Tr>De||Tr===De&&(!Vt||ri>=we)?(F.current.bt=!0,Me=En,yn=-yn,Se.points=[Jl(W,0),Jl(_e,0)]):F.current.bt=!1}if(an&&W[0]==="b"&&(On<kt.top||F.current.tb)){var Cn=Me;nn?Cn+=bt-It:Cn=Je.y-je.y-yn;var Ni=Kn(Ie,Cn),xo=Kn(Ie,Cn,ot);Ni>De||Ni===De&&(!Vt||xo>=we)?(F.current.tb=!0,Me=Cn,yn=-yn,Se.points=[Jl(W,0),Jl(_e,0)]):F.current.tb=!1}var Po=Gn(Yt),io=W[1]===_e[1];if(Po&&W[1]==="l"&&(Zr>kt.right||F.current.rl)){var Hr=Ie;io?Hr-=ut-ft:Hr=$e.x-We.x-zn;var ji=Kn(Hr,Me),fa=Kn(Hr,Me,ot);ji>De||ji===De&&(!Vt||fa>=we)?(F.current.rl=!0,Ie=Hr,zn=-zn,Se.points=[Jl(W,1),Jl(_e,1)]):F.current.rl=!1}if(Po&&W[1]==="r"&&(Xn<kt.left||F.current.lr)){var oo=Ie;io?oo+=ut-ft:oo=Je.x-je.x-zn;var ao=Kn(oo,Me),_i=Kn(oo,Me,ot);ao>De||ao===De&&(!Vt||_i>=we)?(F.current.lr=!0,Ie=oo,zn=-zn,Se.points=[Jl(W,1),Jl(_e,1)]):F.current.lr=!1}js();var Oi=un===!0?0:un;typeof Oi=="number"&&(Xn<ot.left&&(Ie-=Xn-ot.left-zn,pe.x+ft<ot.left+Oi&&(Ie+=pe.x-ot.left+ft-Oi)),Zr>ot.right&&(Ie-=Zr-ot.right-zn,pe.x>ot.right-Oi&&(Ie+=pe.x-ot.right+Oi)));var nt=ln===!0?0:ln;typeof nt=="number"&&(On<ot.top&&(Me-=On-ot.top-yn,pe.y+It<ot.top+nt&&(Me+=pe.y-ot.top+It-nt)),er>ot.bottom&&(Me-=er-ot.bottom-yn,pe.y>ot.bottom-nt&&(Me+=pe.y-ot.bottom+nt)));var Si=Be.x+Ie,vr=Si+ut,mr=Be.y+Me,Xo=mr+bt,Tn=pe.x,Pn=Tn+ft,Xr=pe.y,Gr=Xr+It,zt=Math.max(Si,Tn),xn=Math.min(vr,Pn),bn=(zt+xn)/2,Qr=bn-Si,Kr=Math.max(mr,Xr),In=Math.min(Xo,Gr),Br=(Kr+In)/2,Ao=Br-mr;y==null||y(t,Se);var Ro=Pt.right-Be.x-(Ie+Be.width),Ui=Pt.bottom-Be.y-(Me+Be.height);P({ready:!0,offsetX:Ie/sn,offsetY:Me/An,offsetR:Ro/sn,offsetB:Ui/An,arrowX:Qr/sn,arrowY:Ao/An,scaleX:sn,scaleY:An,align:Se})}}),X=function(){M.current+=1;var V=M.current;Promise.resolve().then(function(){M.current===V&&U()})},$=function(){P(function(V){return Eo(Eo({},V),{},{ready:!1})})};return zr($,[o]),zr(function(){e||$()},[e]),[E.ready,E.offsetX,E.offsetY,E.offsetR,E.offsetB,E.arrowX,E.arrowY,E.scaleX,E.scaleY,E.align,X]}function O9(e){if(Array.isArray(e))return gw(e)}function z9(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function L9(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function NM(e){return O9(e)||z9(e)||pL(e)||L9()}function D9(e,t,r,o,c){zr(function(){if(e&&t&&r){let M=function(){o(),c()};var f=t,y=r,l=vw(f),w=vw(y),E=Im(y),P=new Set([E].concat(NM(l),NM(w)));return P.forEach(function(z){z.addEventListener("scroll",M,{passive:!0})}),E.addEventListener("resize",M,{passive:!0}),o(),function(){P.forEach(function(z){z.removeEventListener("scroll",M),E.removeEventListener("resize",M)})}}},[e,t,r])}function k9(e,t,r,o,c,f,y,l){var w=T.useRef(e),E=T.useRef(!1);w.current!==e&&(E.current=!0,w.current=e),T.useEffect(function(){var P=yi(function(){E.current=!1});return function(){yi.cancel(P)}},[e]),T.useEffect(function(){if(t&&o&&(!c||f)){var P=function(){var ne=!1,Q=function(ge){var ue=ge.target;ne=y(ue)},ie=function(ge){var ue=ge.target;!E.current&&w.current&&!ne&&!y(ue)&&l(!1)};return[Q,ie]},M=P(),z=ki(M,2),F=z[0],k=z[1],U=P(),X=ki(U,2),$=X[0],j=X[1],V=Im(o);V.addEventListener("mousedown",F,!0),V.addEventListener("click",k,!0),V.addEventListener("contextmenu",k,!0);var Z=Ly(r);return Z&&(Z.addEventListener("mousedown",$,!0),Z.addEventListener("click",j,!0),Z.addEventListener("contextmenu",j,!0)),function(){V.removeEventListener("mousedown",F,!0),V.removeEventListener("click",k,!0),V.removeEventListener("contextmenu",k,!0),Z&&(Z.removeEventListener("mousedown",$,!0),Z.removeEventListener("click",j,!0),Z.removeEventListener("contextmenu",j,!0))}}},[t,r,o,c,f])}var $9=["prefixCls","children","action","showAction","hideAction","popupVisible","defaultPopupVisible","onPopupVisibleChange","afterPopupVisibleChange","mouseEnterDelay","mouseLeaveDelay","focusDelay","blurDelay","mask","maskClosable","getPopupContainer","forceRender","autoDestroy","destroyPopupOnHide","popup","popupClassName","popupStyle","popupPlacement","builtinPlacements","popupAlign","zIndex","stretch","getPopupClassNameFromAlign","fresh","alignPoint","onPopupClick","onPopupAlign","arrow","popupMotion","maskMotion","popupTransitionName","popupAnimation","maskTransitionName","maskAnimation","className","getTriggerDOMNode"];function F9(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Fz,t=T.forwardRef(function(r,o){var c=r.prefixCls,f=c===void 0?"rc-trigger-popup":c,y=r.children,l=r.action,w=l===void 0?"hover":l,E=r.showAction,P=r.hideAction,M=r.popupVisible,z=r.defaultPopupVisible,F=r.onPopupVisibleChange,k=r.afterPopupVisibleChange,U=r.mouseEnterDelay,X=r.mouseLeaveDelay,$=X===void 0?.1:X,j=r.focusDelay,V=r.blurDelay,Z=r.mask,ee=r.maskClosable,ne=ee===void 0?!0:ee,Q=r.getPopupContainer,ie=r.forceRender,te=r.autoDestroy,ge=r.destroyPopupOnHide,ue=r.popup,oe=r.popupClassName,fe=r.popupStyle,Ee=r.popupPlacement,ke=r.builtinPlacements,Le=ke===void 0?{}:ke,Ne=r.popupAlign,pe=r.zIndex,He=r.stretch,Be=r.getPopupClassNameFromAlign,Ge=r.fresh,Qe=r.alignPoint,gt=r.onPopupClick,St=r.onPopupAlign,xt=r.arrow,jt=r.popupMotion,Ut=r.maskMotion,bt=r.popupTransitionName,ut=r.popupAnimation,It=r.maskTransitionName,ft=r.maskAnimation,yt=r.className,ct=r.getTriggerDOMNode,Mt=w9(r,$9),Ct=te||ge||!1,Qt=T.useState(!1),Vt=ki(Qt,2),Nt=Vt[0],ot=Vt[1];zr(function(){ot(oL())},[]);var rt=T.useRef({}),kt=T.useContext(zM),Pt=T.useMemo(function(){return{registerSubPopup:function($n,Yn){rt.current[$n]=Yn,kt==null||kt.registerSubPopup($n,Yn)}}},[kt]),sn=j8(),An=T.useState(null),Mn=ki(An,2),on=Mn[0],Vn=Mn[1],Nn=jo(function(hn){Cy(hn)&&on!==hn&&Vn(hn),kt==null||kt.registerSubPopup(sn,hn)}),zn=T.useState(null),yn=ki(zn,2),rn=yn[0],Wn=yn[1],jn=T.useRef(null),pr=jo(function(hn){Cy(hn)&&rn!==hn&&(Wn(hn),jn.current=hn)}),ar=T.Children.only(y),qn=(ar==null?void 0:ar.props)||{},Qn={},Rr=jo(function(hn){var $n,Yn,hr=rn;return(hr==null?void 0:hr.contains(hn))||(($n=Ly(hr))===null||$n===void 0?void 0:$n.host)===hn||hn===hr||(on==null?void 0:on.contains(hn))||((Yn=Ly(on))===null||Yn===void 0?void 0:Yn.host)===hn||hn===on||Object.values(rt.current).some(function(Wr){return(Wr==null?void 0:Wr.contains(hn))||hn===Wr})}),_e=DM(f,jt,ut,bt),W=DM(f,Ut,ft,It),J=T.useState(z||!1),de=ki(J,2),Se=de[0],Ie=de[1],Me=M??Se,De=jo(function(hn){M===void 0&&Ie(hn)});zr(function(){Ie(M||!1)},[M]);var we=T.useRef(Me);we.current=Me;var $e=T.useRef([]);$e.current=[];var je=jo(function(hn){var $n;De(hn),(($n=$e.current[$e.current.length-1])!==null&&$n!==void 0?$n:Me)!==hn&&($e.current.push(hn),F==null||F(hn))}),Je=T.useRef(),We=function(){clearTimeout(Je.current)},wt=function($n){var Yn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;We(),Yn===0?je($n):Je.current=setTimeout(function(){je($n)},Yn*1e3)};T.useEffect(function(){return We},[]);var Yt=T.useState(!1),Xt=ki(Yt,2),un=Xt[0],ln=Xt[1];zr(function(hn){(!hn||Me)&&ln(!0)},[Me]);var Gn=T.useState(null),On=ki(Gn,2),er=On[0],Xn=On[1],Zr=T.useState([0,0]),an=ki(Zr,2),nn=an[0],En=an[1],Tr=function($n){En([$n.clientX,$n.clientY])},ri=R9(Me,on,Qe?nn:rn,Ee,Le,Ne,St),Cn=ki(ri,11),Ni=Cn[0],xo=Cn[1],Po=Cn[2],io=Cn[3],Hr=Cn[4],ji=Cn[5],fa=Cn[6],oo=Cn[7],ao=Cn[8],_i=Cn[9],Oi=Cn[10],nt=M9(Nt,w,E,P),Si=ki(nt,2),vr=Si[0],mr=Si[1],Xo=vr.has("click"),Tn=mr.has("click")||mr.has("contextMenu"),Pn=jo(function(){un||Oi()}),Xr=function(){we.current&&Qe&&Tn&&wt(!1)};D9(Me,rn,on,Pn,Xr),zr(function(){Pn()},[nn,Ee]),zr(function(){Me&&!(Le!=null&&Le[Ee])&&Pn()},[JSON.stringify(Ne)]);var Gr=T.useMemo(function(){var hn=A9(Le,f,_i,Qe);return Tt(hn,Be==null?void 0:Be(_i))},[_i,Be,Le,f,Qe]);T.useImperativeHandle(o,function(){return{nativeElement:jn.current,forceAlign:Pn}});var zt=T.useState(0),xn=ki(zt,2),bn=xn[0],Qr=xn[1],Kr=T.useState(0),In=ki(Kr,2),Br=In[0],Ao=In[1],Ro=function(){if(He&&rn){var $n=rn.getBoundingClientRect();Qr($n.width),Ao($n.height)}},Ui=function(){Ro(),Pn()},Kn=function($n){ln(!1),Oi(),k==null||k($n)},js=function(){return new Promise(function($n){Ro(),Xn(function(){return $n})})};zr(function(){er&&(Oi(),er(),Xn(null))},[er]);function xi(hn,$n,Yn,hr){Qn[hn]=function(Wr){var va;hr==null||hr(Wr),wt($n,Yn);for(var Dr=arguments.length,xs=new Array(Dr>1?Dr-1:0),bs=1;bs<Dr;bs++)xs[bs-1]=arguments[bs];(va=qn[hn])===null||va===void 0||va.call.apply(va,[qn,Wr].concat(xs))}}(Xo||Tn)&&(Qn.onClick=function(hn){var $n;we.current&&Tn?wt(!1):!we.current&&Xo&&(Tr(hn),wt(!0));for(var Yn=arguments.length,hr=new Array(Yn>1?Yn-1:0),Wr=1;Wr<Yn;Wr++)hr[Wr-1]=arguments[Wr];($n=qn.onClick)===null||$n===void 0||$n.call.apply($n,[qn,hn].concat(hr))}),k9(Me,Tn,rn,on,Z,ne,Rr,wt);var bo=vr.has("hover"),Oo=mr.has("hover"),pa,ys;bo&&(xi("onMouseEnter",!0,U,function(hn){Tr(hn)}),xi("onPointerEnter",!0,U,function(hn){Tr(hn)}),pa=function(){(Me||un)&&wt(!0,U)},Qe&&(Qn.onMouseMove=function(hn){var $n;($n=qn.onMouseMove)===null||$n===void 0||$n.call(qn,hn)})),Oo&&(xi("onMouseLeave",!1,$),xi("onPointerLeave",!1,$),ys=function(){wt(!1,$)}),vr.has("focus")&&xi("onFocus",!0,j),mr.has("focus")&&xi("onBlur",!1,V),vr.has("contextMenu")&&(Qn.onContextMenu=function(hn){var $n;we.current&&mr.has("contextMenu")?wt(!1):(Tr(hn),wt(!0)),hn.preventDefault();for(var Yn=arguments.length,hr=new Array(Yn>1?Yn-1:0),Wr=1;Wr<Yn;Wr++)hr[Wr-1]=arguments[Wr];($n=qn.onContextMenu)===null||$n===void 0||$n.call.apply($n,[qn,hn].concat(hr))}),yt&&(Qn.className=Tt(qn.className,yt));var Ko=Eo(Eo({},qn),Qn),ma={},_s=["onContextMenu","onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur"];_s.forEach(function(hn){Mt[hn]&&(ma[hn]=function(){for(var $n,Yn=arguments.length,hr=new Array(Yn),Wr=0;Wr<Yn;Wr++)hr[Wr]=arguments[Wr];($n=Ko[hn])===null||$n===void 0||$n.call.apply($n,[Ko].concat(hr)),Mt[hn].apply(Mt,hr)})});var ga=T.cloneElement(ar,Eo(Eo({},Ko),ma)),Ei={x:ji,y:fa},Nr=xt?Eo({},xt!==!0?xt:{}):null;return T.createElement(T.Fragment,null,T.createElement(bl,{disabled:!Me,ref:pr,onResize:Ui},T.createElement(I9,{getTriggerDOMNode:ct},ga)),T.createElement(zM.Provider,{value:Pt},T.createElement(T9,{portal:e,ref:Nn,prefixCls:f,popup:ue,className:Tt(oe,Gr),style:fe,target:rn,onMouseEnter:pa,onMouseLeave:ys,onPointerEnter:pa,zIndex:pe,open:Me,keepDom:un,fresh:Ge,onClick:gt,mask:Z,motion:_e,maskMotion:W,onVisibleChanged:Kn,onPrepare:js,forceRender:ie,autoDestroy:Ct,getPopupContainer:Q,align:_i,arrow:Nr,arrowPos:Ei,ready:Ni,offsetX:xo,offsetY:Po,offsetR:io,offsetB:Hr,onAlign:Pn,stretch:He,targetWidth:bn/oo,targetHeight:Br/ao})))});return t}const mL=F9(Fz);var B9=["prefixCls","disabled","visible","children","popupElement","animation","transitionName","dropdownStyle","dropdownClassName","direction","placement","builtinPlacements","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","getPopupContainer","empty","getTriggerDOMNode","onPopupVisibleChange","onPopupMouseEnter"],N9=function(t){var r=t===!0?0:1;return{bottomLeft:{points:["tl","bl"],offset:[0,4],overflow:{adjustX:r,adjustY:1},htmlRegion:"scroll"},bottomRight:{points:["tr","br"],offset:[0,4],overflow:{adjustX:r,adjustY:1},htmlRegion:"scroll"},topLeft:{points:["bl","tl"],offset:[0,-4],overflow:{adjustX:r,adjustY:1},htmlRegion:"scroll"},topRight:{points:["br","tr"],offset:[0,-4],overflow:{adjustX:r,adjustY:1},htmlRegion:"scroll"}}},j9=function(t,r){var o=t.prefixCls;t.disabled;var c=t.visible,f=t.children,y=t.popupElement,l=t.animation,w=t.transitionName,E=t.dropdownStyle,P=t.dropdownClassName,M=t.direction,z=M===void 0?"ltr":M,F=t.placement,k=t.builtinPlacements,U=t.dropdownMatchSelectWidth,X=t.dropdownRender,$=t.dropdownAlign,j=t.getPopupContainer,V=t.empty,Z=t.getTriggerDOMNode,ee=t.onPopupVisibleChange,ne=t.onPopupMouseEnter,Q=Vr(t,B9),ie="".concat(o,"-dropdown"),te=y;X&&(te=X(y));var ge=T.useMemo(function(){return k||N9(U)},[k,U]),ue=l?"".concat(ie,"-").concat(l):w,oe=typeof U=="number",fe=T.useMemo(function(){return oe?null:U===!1?"minWidth":"width"},[U,oe]),Ee=E;oe&&(Ee=st(st({},Ee),{},{width:U}));var ke=T.useRef(null);return T.useImperativeHandle(r,function(){return{getPopupElement:function(){return ke.current}}}),T.createElement(mL,Sn({},Q,{showAction:ee?["click"]:[],hideAction:ee?["click"]:[],popupPlacement:F||(z==="rtl"?"bottomRight":"bottomLeft"),builtinPlacements:ge,prefixCls:ie,popupTransitionName:ue,popup:T.createElement("div",{ref:ke,onMouseEnter:ne},te),stretch:fe,popupAlign:$,popupVisible:c,getPopupContainer:j,popupClassName:Tt(P,Fe({},"".concat(ie,"-empty"),V)),popupStyle:Ee,getTriggerDOMNode:Z,onPopupVisibleChange:ee}),f)},gL=T.forwardRef(j9);gL.displayName="SelectTrigger";function jM(e,t){var r=e.key,o;return"value"in e&&(o=e.value),r??(o!==void 0?o:"rc-index-key-".concat(t))}function vL(e,t){var r=e||{},o=r.label,c=r.value,f=r.options,y=r.groupLabel,l=o||(t?"children":"label");return{label:l,value:c||"value",options:f||"options",groupLabel:y||l}}function U9(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=t.fieldNames,o=t.childrenAsData,c=[],f=vL(r,!1),y=f.label,l=f.value,w=f.options,E=f.groupLabel;function P(M,z){M.forEach(function(F){if(z||!(w in F)){var k=F[l];c.push({key:jM(F,c.length),groupOption:z,data:F,label:F[y],value:k})}else{var U=F[E];U===void 0&&o&&(U=F.label),c.push({key:jM(F,c.length),group:!0,data:F,label:U}),P(F[w],!0)}})}return P(e,!1),c}function yw(e){var t=st({},e);return"props"in t||Object.defineProperty(t,"props",{get:function(){return Vo(!1,"Return type is option instead of Option instance. Please read value directly instead of reading from `props`."),t}}),t}function V9(e,t){if(!t||!t.length)return null;var r=!1;function o(f,y){var l=kO(y),w=l[0],E=l.slice(1);if(!w)return[f];var P=f.split(w);return r=r||P.length>1,P.reduce(function(M,z){return[].concat(mn(M),mn(o(z,E)))},[]).filter(function(M){return M})}var c=o(e,t);return r?c:null}var H9=["id","prefixCls","className","showSearch","tagRender","direction","omitDomProps","displayValues","onDisplayValuesChange","emptyOptions","notFoundContent","onClear","mode","disabled","loading","getInputElement","getRawInputElement","open","defaultOpen","onDropdownVisibleChange","activeValue","onActiveValueChange","activeDescendantId","searchValue","autoClearSearchValue","onSearch","onSearchSplit","tokenSeparators","allowClear","suffixIcon","clearIcon","OptionList","animation","transitionName","dropdownStyle","dropdownClassName","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","placement","builtinPlacements","getPopupContainer","showAction","onFocus","onBlur","onKeyUp","onKeyDown","onMouseDown"],G9=["value","onChange","removeIcon","placeholder","autoFocus","maxTagCount","maxTagTextLength","maxTagPlaceholder","choiceTransitionName","onInputKeyDown","onPopupScroll","tabIndex"];function _w(e){return e==="tags"||e==="multiple"}var W9=T.forwardRef(function(e,t){var r,o,c=e.id,f=e.prefixCls,y=e.className,l=e.showSearch,w=e.tagRender,E=e.direction,P=e.omitDomProps,M=e.displayValues,z=e.onDisplayValuesChange,F=e.emptyOptions,k=e.notFoundContent,U=k===void 0?"Not Found":k,X=e.onClear,$=e.mode,j=e.disabled,V=e.loading,Z=e.getInputElement,ee=e.getRawInputElement,ne=e.open,Q=e.defaultOpen,ie=e.onDropdownVisibleChange,te=e.activeValue,ge=e.onActiveValueChange,ue=e.activeDescendantId,oe=e.searchValue,fe=e.autoClearSearchValue,Ee=e.onSearch,ke=e.onSearchSplit,Le=e.tokenSeparators,Ne=e.allowClear,pe=e.suffixIcon,He=e.clearIcon,Be=e.OptionList,Ge=e.animation,Qe=e.transitionName,gt=e.dropdownStyle,St=e.dropdownClassName,xt=e.dropdownMatchSelectWidth,jt=e.dropdownRender,Ut=e.dropdownAlign,bt=e.placement,ut=e.builtinPlacements,It=e.getPopupContainer,ft=e.showAction,yt=ft===void 0?[]:ft,ct=e.onFocus,Mt=e.onBlur,Ct=e.onKeyUp,Qt=e.onKeyDown,Vt=e.onMouseDown,Nt=Vr(e,H9),ot=_w($),rt=(l!==void 0?l:ot)||$==="combobox",kt=st({},Nt);G9.forEach(function(Tn){delete kt[Tn]}),P==null||P.forEach(function(Tn){delete kt[Tn]});var Pt=T.useState(!1),sn=Bt(Pt,2),An=sn[0],Mn=sn[1];T.useEffect(function(){Mn(oL())},[]);var on=T.useRef(null),Vn=T.useRef(null),Nn=T.useRef(null),zn=T.useRef(null),yn=T.useRef(null),rn=T.useRef(!1),Wn=GV(),jn=Bt(Wn,3),pr=jn[0],ar=jn[1],qn=jn[2];T.useImperativeHandle(t,function(){var Tn,Pn;return{focus:(Tn=zn.current)===null||Tn===void 0?void 0:Tn.focus,blur:(Pn=zn.current)===null||Pn===void 0?void 0:Pn.blur,scrollTo:function(Gr){var zt;return(zt=yn.current)===null||zt===void 0?void 0:zt.scrollTo(Gr)}}});var Qn=T.useMemo(function(){var Tn;if($!=="combobox")return oe;var Pn=(Tn=M[0])===null||Tn===void 0?void 0:Tn.value;return typeof Pn=="string"||typeof Pn=="number"?String(Pn):""},[oe,$,M]),Rr=$==="combobox"&&typeof Z=="function"&&Z()||null,_e=typeof ee=="function"&&ee(),W=_0(Vn,_e==null||(r=_e.props)===null||r===void 0?void 0:r.ref),J=T.useState(!1),de=Bt(J,2),Se=de[0],Ie=de[1];zr(function(){Ie(!0)},[]);var Me=Bs(!1,{defaultValue:Q,value:ne}),De=Bt(Me,2),we=De[0],$e=De[1],je=Se?we:!1,Je=!U&&F;(j||Je&&je&&$==="combobox")&&(je=!1);var We=Je?!1:je,wt=T.useCallback(function(Tn){var Pn=Tn!==void 0?Tn:!je;j||($e(Pn),je!==Pn&&(ie==null||ie(Pn)))},[j,je,$e,ie]),Yt=T.useMemo(function(){return(Le||[]).some(function(Tn){return[`
`,`\r
`].includes(Tn)})},[Le]),Xt=function(Pn,Xr,Gr){var zt=!0,xn=Pn;ge==null||ge(null);var bn=Gr?null:V9(Pn,Le);return $!=="combobox"&&bn&&(xn="",ke==null||ke(bn),wt(!1),zt=!1),Ee&&Qn!==xn&&Ee(xn,{source:Xr?"typing":"effect"}),zt},un=function(Pn){!Pn||!Pn.trim()||Ee(Pn,{source:"submit"})};T.useEffect(function(){!je&&!ot&&$!=="combobox"&&Xt("",!1,!1)},[je]),T.useEffect(function(){we&&j&&$e(!1),j&&!rn.current&&ar(!1)},[j]);var ln=sL(),Gn=Bt(ln,2),On=Gn[0],er=Gn[1],Xn=function(Pn){var Xr=On(),Gr=Pn.which;if(Gr===Ht.ENTER&&($!=="combobox"&&Pn.preventDefault(),je||wt(!0)),er(!!Qn),Gr===Ht.BACKSPACE&&!Xr&&ot&&!Qn&&M.length){for(var zt=mn(M),xn=null,bn=zt.length-1;bn>=0;bn-=1){var Qr=zt[bn];if(!Qr.disabled){zt.splice(bn,1),xn=Qr;break}}xn&&z(zt,{type:"remove",values:[xn]})}for(var Kr=arguments.length,In=new Array(Kr>1?Kr-1:0),Br=1;Br<Kr;Br++)In[Br-1]=arguments[Br];if(je&&yn.current){var Ao;(Ao=yn.current).onKeyDown.apply(Ao,[Pn].concat(In))}Qt==null||Qt.apply(void 0,[Pn].concat(In))},Zr=function(Pn){for(var Xr=arguments.length,Gr=new Array(Xr>1?Xr-1:0),zt=1;zt<Xr;zt++)Gr[zt-1]=arguments[zt];if(je&&yn.current){var xn;(xn=yn.current).onKeyUp.apply(xn,[Pn].concat(Gr))}Ct==null||Ct.apply(void 0,[Pn].concat(Gr))},an=function(Pn){var Xr=M.filter(function(Gr){return Gr!==Pn});z(Xr,{type:"remove",values:[Pn]})},nn=T.useRef(!1),En=function(){ar(!0),j||(ct&&!nn.current&&ct.apply(void 0,arguments),yt.includes("focus")&&wt(!0)),nn.current=!0},Tr=function(){rn.current=!0,ar(!1,function(){nn.current=!1,rn.current=!1,wt(!1)}),!j&&(Qn&&($==="tags"?Ee(Qn,{source:"submit"}):$==="multiple"&&Ee("",{source:"blur"})),Mt&&Mt.apply(void 0,arguments))},ri=[];T.useEffect(function(){return function(){ri.forEach(function(Tn){return clearTimeout(Tn)}),ri.splice(0,ri.length)}},[]);var Cn=function(Pn){var Xr,Gr=Pn.target,zt=(Xr=Nn.current)===null||Xr===void 0?void 0:Xr.getPopupElement();if(zt&&zt.contains(Gr)){var xn=setTimeout(function(){var In=ri.indexOf(xn);if(In!==-1&&ri.splice(In,1),qn(),!An&&!zt.contains(document.activeElement)){var Br;(Br=zn.current)===null||Br===void 0||Br.focus()}});ri.push(xn)}for(var bn=arguments.length,Qr=new Array(bn>1?bn-1:0),Kr=1;Kr<bn;Kr++)Qr[Kr-1]=arguments[Kr];Vt==null||Vt.apply(void 0,[Pn].concat(Qr))},Ni=T.useState({}),xo=Bt(Ni,2),Po=xo[1];function io(){Po({})}var Hr;_e&&(Hr=function(Pn){wt(Pn)}),WV(function(){var Tn;return[on.current,(Tn=Nn.current)===null||Tn===void 0?void 0:Tn.getPopupElement()]},We,wt,!!_e);var ji=T.useMemo(function(){return st(st({},e),{},{notFoundContent:U,open:je,triggerOpen:We,id:c,showSearch:rt,multiple:ot,toggleOpen:wt})},[e,U,We,je,c,rt,ot,wt]),fa=!!pe||V,oo;fa&&(oo=T.createElement(R0,{className:Tt("".concat(f,"-arrow"),Fe({},"".concat(f,"-arrow-loading"),V)),customizeIcon:pe,customizeIconProps:{loading:V,searchValue:Qn,open:je,focused:pr,showSearch:rt}}));var ao=function(){var Pn;X==null||X(),(Pn=zn.current)===null||Pn===void 0||Pn.focus(),z([],{type:"clear",values:M}),Xt("",!1,!1)},_i=VV(f,ao,M,Ne,He,j,Qn,$),Oi=_i.allowClear,nt=_i.clearIcon,Si=T.createElement(Be,{ref:yn}),vr=Tt(f,y,(o={},Fe(o,"".concat(f,"-focused"),pr),Fe(o,"".concat(f,"-multiple"),ot),Fe(o,"".concat(f,"-single"),!ot),Fe(o,"".concat(f,"-allow-clear"),Ne),Fe(o,"".concat(f,"-show-arrow"),fa),Fe(o,"".concat(f,"-disabled"),j),Fe(o,"".concat(f,"-loading"),V),Fe(o,"".concat(f,"-open"),je),Fe(o,"".concat(f,"-customize-input"),Rr),Fe(o,"".concat(f,"-show-search"),rt),o)),mr=T.createElement(gL,{ref:Nn,disabled:j,prefixCls:f,visible:We,popupElement:Si,animation:Ge,transitionName:Qe,dropdownStyle:gt,dropdownClassName:St,direction:E,dropdownMatchSelectWidth:xt,dropdownRender:jt,dropdownAlign:Ut,placement:bt,builtinPlacements:ut,getPopupContainer:It,empty:F,getTriggerDOMNode:function(){return Vn.current},onPopupVisibleChange:Hr,onPopupMouseEnter:io},_e?T.cloneElement(_e,{ref:W}):T.createElement(fL,Sn({},e,{domRef:Vn,prefixCls:f,inputElement:Rr,ref:zn,id:c,showSearch:rt,autoClearSearchValue:fe,mode:$,activeDescendantId:ue,tagRender:w,values:M,open:je,onToggleOpen:wt,activeValue:te,searchValue:Qn,onSearch:Xt,onSearchSubmit:un,onRemove:an,tokenWithEnter:Yt}))),Xo;return _e?Xo=mr:Xo=T.createElement("div",Sn({className:vr},kt,{ref:on,onMouseDown:Cn,onKeyDown:Xn,onKeyUp:Zr,onFocus:En,onBlur:Tr}),pr&&!je&&T.createElement("span",{style:{width:0,height:0,position:"absolute",overflow:"hidden",opacity:0},"aria-live":"polite"},"".concat(M.map(function(Tn){var Pn=Tn.label,Xr=Tn.value;return["number","string"].includes(Zn(Pn))?Pn:Xr}).join(", "))),mr,oo,Oi&&nt),T.createElement(aL.Provider,{value:ji},Xo)}),rE=function(){return null};rE.isSelectOptGroup=!0;var iE=function(){return null};iE.isSelectOption=!0;var yL=T.forwardRef(function(e,t){var r=e.height,o=e.offsetY,c=e.offsetX,f=e.children,y=e.prefixCls,l=e.onInnerResize,w=e.innerProps,E=e.rtl,P=e.extra,M={},z={display:"flex",flexDirection:"column"};if(o!==void 0){var F;M={height:r,position:"relative",overflow:"hidden"},z=st(st({},z),{},(F={transform:"translateY(".concat(o,"px)")},Fe(F,E?"marginRight":"marginLeft",-c),Fe(F,"position","absolute"),Fe(F,"left",0),Fe(F,"right",0),Fe(F,"top",0),F))}return T.createElement("div",{style:M},T.createElement(bl,{onResize:function(U){var X=U.offsetHeight;X&&l&&l()}},T.createElement("div",Sn({style:z,className:Tt(Fe({},"".concat(y,"-holder-inner"),y)),ref:t},w),f,P)))});yL.displayName="Filler";function UM(e,t){var r="touches"in e?e.touches[0]:e;return r[t?"pageX":"pageY"]}var VM=T.forwardRef(function(e,t){var r,o=e.prefixCls,c=e.rtl,f=e.scrollOffset,y=e.scrollRange,l=e.onStartMove,w=e.onStopMove,E=e.onScroll,P=e.horizontal,M=e.spinSize,z=e.containerSize,F=e.style,k=e.thumbStyle,U=T.useState(!1),X=Bt(U,2),$=X[0],j=X[1],V=T.useState(null),Z=Bt(V,2),ee=Z[0],ne=Z[1],Q=T.useState(null),ie=Bt(Q,2),te=ie[0],ge=ie[1],ue=!c,oe=T.useRef(),fe=T.useRef(),Ee=T.useState(!1),ke=Bt(Ee,2),Le=ke[0],Ne=ke[1],pe=T.useRef(),He=function(){clearTimeout(pe.current),Ne(!0),pe.current=setTimeout(function(){Ne(!1)},3e3)},Be=y-z||0,Ge=z-M||0,Qe=Be>0,gt=T.useMemo(function(){if(f===0||Be===0)return 0;var yt=f/Be;return yt*Ge},[f,Be,Ge]),St=function(ct){ct.stopPropagation(),ct.preventDefault()},xt=T.useRef({top:gt,dragging:$,pageY:ee,startTop:te});xt.current={top:gt,dragging:$,pageY:ee,startTop:te};var jt=function(ct){j(!0),ne(UM(ct,P)),ge(xt.current.top),l(),ct.stopPropagation(),ct.preventDefault()};T.useEffect(function(){var yt=function(Qt){Qt.preventDefault()},ct=oe.current,Mt=fe.current;return ct.addEventListener("touchstart",yt),Mt.addEventListener("touchstart",jt),function(){ct.removeEventListener("touchstart",yt),Mt.removeEventListener("touchstart",jt)}},[]);var Ut=T.useRef();Ut.current=Be;var bt=T.useRef();bt.current=Ge,T.useEffect(function(){if($){var yt,ct=function(Qt){var Vt=xt.current,Nt=Vt.dragging,ot=Vt.pageY,rt=Vt.startTop;if(yi.cancel(yt),Nt){var kt=UM(Qt,P)-ot,Pt=rt;!ue&&P?Pt-=kt:Pt+=kt;var sn=Ut.current,An=bt.current,Mn=An?Pt/An:0,on=Math.ceil(Mn*sn);on=Math.max(on,0),on=Math.min(on,sn),yt=yi(function(){E(on,P)})}},Mt=function(){j(!1),w()};return window.addEventListener("mousemove",ct),window.addEventListener("touchmove",ct),window.addEventListener("mouseup",Mt),window.addEventListener("touchend",Mt),function(){window.removeEventListener("mousemove",ct),window.removeEventListener("touchmove",ct),window.removeEventListener("mouseup",Mt),window.removeEventListener("touchend",Mt),yi.cancel(yt)}}},[$]),T.useEffect(function(){He()},[f]),T.useImperativeHandle(t,function(){return{delayHidden:He}});var ut="".concat(o,"-scrollbar"),It={position:"absolute",visibility:Le&&Qe?null:"hidden"},ft={position:"absolute",background:"rgba(0, 0, 0, 0.5)",borderRadius:99,cursor:"pointer",userSelect:"none"};return P?(It.height=8,It.left=0,It.right=0,It.bottom=0,ft.height="100%",ft.width=M,ue?ft.left=gt:ft.right=gt):(It.width=8,It.top=0,It.bottom=0,ue?It.right=0:It.left=0,ft.width="100%",ft.height=M,ft.top=gt),T.createElement("div",{ref:oe,className:Tt(ut,(r={},Fe(r,"".concat(ut,"-horizontal"),P),Fe(r,"".concat(ut,"-vertical"),!P),Fe(r,"".concat(ut,"-visible"),Le),r)),style:st(st({},It),F),onMouseDown:St,onMouseMove:He},T.createElement("div",{ref:fe,className:Tt("".concat(ut,"-thumb"),Fe({},"".concat(ut,"-thumb-moving"),$)),style:st(st({},ft),k),onMouseDown:jt}))});function q9(e){var t=e.children,r=e.setRef,o=T.useCallback(function(c){r(c)},[]);return T.cloneElement(t,{ref:o})}function Z9(e,t,r,o,c,f,y){var l=y.getKey;return e.slice(t,r+1).map(function(w,E){var P=t+E,M=f(w,P,{style:{width:o}}),z=l(w);return T.createElement(q9,{key:z,setRef:function(k){return c(w,k)}},M)})}var X9=function(){function e(){qo(this,e),this.maps=void 0,this.id=0,this.maps=Object.create(null)}return Zo(e,[{key:"set",value:function(r,o){this.maps[r]=o,this.id+=1}},{key:"get",value:function(r){return this.maps[r]}}]),e}();function K9(e,t,r){var o=T.useState(0),c=Bt(o,2),f=c[0],y=c[1],l=T.useRef(new Map),w=T.useRef(new X9),E=T.useRef();function P(){yi.cancel(E.current)}function M(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;P();var k=function(){l.current.forEach(function(X,$){if(X&&X.offsetParent){var j=zp(X),V=j.offsetHeight;w.current.get($)!==V&&w.current.set($,j.offsetHeight)}}),y(function(X){return X+1})};F?k():E.current=yi(k)}function z(F,k){var U=e(F),X=l.current.get(U);k?(l.current.set(U,k),M()):l.current.delete(U),!X!=!k&&(k?t==null||t(F):r==null||r(F))}return T.useEffect(function(){return P},[]),[z,M,w.current,f]}var Y9=10;function J9(e,t,r,o,c,f,y,l){var w=T.useRef(),E=T.useState(null),P=Bt(E,2),M=P[0],z=P[1];return zr(function(){if(M&&M.times<Y9){if(!e.current){z(function(He){return st({},He)});return}f();var F=M.targetAlign,k=M.originAlign,U=M.index,X=M.offset,$=e.current.clientHeight,j=!1,V=F,Z=null;if($){for(var ee=F||k,ne=0,Q=0,ie=0,te=Math.min(t.length-1,U),ge=0;ge<=te;ge+=1){var ue=c(t[ge]);Q=ne;var oe=r.get(ue);ie=Q+(oe===void 0?o:oe),ne=ie}for(var fe=ee==="top"?X:$-X,Ee=te;Ee>=0;Ee-=1){var ke=c(t[Ee]),Le=r.get(ke);if(Le===void 0){j=!0;break}if(fe-=Le,fe<=0)break}switch(ee){case"top":Z=Q-X;break;case"bottom":Z=ie-$+X;break;default:{var Ne=e.current.scrollTop,pe=Ne+$;Q<Ne?V="top":ie>pe&&(V="bottom")}}Z!==null&&y(Z),Z!==M.lastTop&&(j=!0)}j&&z(st(st({},M),{},{times:M.times+1,targetAlign:V,lastTop:Z}))}},[M,e.current]),function(F){if(F==null){l();return}if(yi.cancel(w.current),typeof F=="number")y(F);else if(F&&Zn(F)==="object"){var k,U=F.align;"index"in F?k=F.index:k=t.findIndex(function(j){return c(j)===F.key});var X=F.offset,$=X===void 0?0:X;z({times:0,index:k,offset:$,originAlign:U})}}}function Q9(e,t,r){var o=e.length,c=t.length,f,y;if(o===0&&c===0)return null;o<c?(f=e,y=t):(f=t,y=e);var l={__EMPTY_ITEM__:!0};function w(k){return k!==void 0?r(k):l}for(var E=null,P=Math.abs(o-c)!==1,M=0;M<y.length;M+=1){var z=w(f[M]),F=w(y[M]);if(z!==F){E=M,P=P||z!==w(y[M+1]);break}}return E===null?null:{index:E,multiple:P}}function e7(e,t,r){var o=T.useState(e),c=Bt(o,2),f=c[0],y=c[1],l=T.useState(null),w=Bt(l,2),E=w[0],P=w[1];return T.useEffect(function(){var M=Q9(f||[],e||[],t);(M==null?void 0:M.index)!==void 0&&(r==null||r(M.index),P(e[M.index])),y(e)},[e]),[E]}var HM=(typeof navigator>"u"?"undefined":Zn(navigator))==="object"&&/Firefox/i.test(navigator.userAgent);const _L=function(e,t){var r=T.useRef(!1),o=T.useRef(null);function c(){clearTimeout(o.current),r.current=!0,o.current=setTimeout(function(){r.current=!1},50)}var f=T.useRef({top:e,bottom:t});return f.current.top=e,f.current.bottom=t,function(y){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,w=y<0&&f.current.top||y>0&&f.current.bottom;return l&&w?(clearTimeout(o.current),r.current=!1):(!w||r.current)&&c(),!r.current&&w}};function t7(e,t,r,o,c){var f=T.useRef(0),y=T.useRef(null),l=T.useRef(null),w=T.useRef(!1),E=_L(t,r);function P(X,$){yi.cancel(y.current),f.current+=$,l.current=$,!E($)&&(HM||X.preventDefault(),y.current=yi(function(){var j=w.current?10:1;c(f.current*j),f.current=0}))}function M(X,$){c($,!0),HM||X.preventDefault()}var z=T.useRef(null),F=T.useRef(null);function k(X){if(e){yi.cancel(F.current),F.current=yi(function(){z.current=null},2);var $=X.deltaX,j=X.deltaY,V=X.shiftKey,Z=$,ee=j;(z.current==="sx"||!z.current&&V&&j&&!$)&&(Z=j,ee=0,z.current="sx");var ne=Math.abs(Z),Q=Math.abs(ee);z.current===null&&(z.current=o&&ne>Q?"x":"y"),z.current==="y"?P(X,ee):M(X,Z)}}function U(X){e&&(w.current=X.detail===l.current)}return[k,U]}var n7=14/15;function r7(e,t,r){var o=T.useRef(!1),c=T.useRef(0),f=T.useRef(null),y=T.useRef(null),l,w=function(z){if(o.current){var F=Math.ceil(z.touches[0].pageY),k=c.current-F;c.current=F,r(k)&&z.preventDefault(),clearInterval(y.current),y.current=setInterval(function(){k*=n7,(!r(k,!0)||Math.abs(k)<=.1)&&clearInterval(y.current)},16)}},E=function(){o.current=!1,l()},P=function(z){l(),z.touches.length===1&&!o.current&&(o.current=!0,c.current=Math.ceil(z.touches[0].pageY),f.current=z.target,f.current.addEventListener("touchmove",w),f.current.addEventListener("touchend",E))};l=function(){f.current&&(f.current.removeEventListener("touchmove",w),f.current.removeEventListener("touchend",E))},zr(function(){return e&&t.current.addEventListener("touchstart",P),function(){var M;(M=t.current)===null||M===void 0||M.removeEventListener("touchstart",P),l(),clearInterval(y.current)}},[e])}var i7=20;function GM(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=e/t*100;return isNaN(r)&&(r=0),r=Math.max(r,i7),r=Math.min(r,e/2),Math.floor(r)}function o7(e,t,r,o){var c=T.useMemo(function(){return[new Map,[]]},[e,r.id,o]),f=Bt(c,2),y=f[0],l=f[1],w=function(P){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:P,z=y.get(P),F=y.get(M);if(z===void 0||F===void 0)for(var k=e.length,U=l.length;U<k;U+=1){var X,$=e[U],j=t($);y.set(j,U);var V=(X=r.get(j))!==null&&X!==void 0?X:o;if(l[U]=(l[U-1]||0)+V,j===P&&(z=U),j===M&&(F=U),z!==void 0&&F!==void 0)break}return{top:l[z-1]||0,bottom:l[F]}};return w}var a7=["prefixCls","className","height","itemHeight","fullHeight","style","data","children","itemKey","virtual","direction","scrollWidth","component","onScroll","onVirtualScroll","onVisibleChange","innerProps","extraRender","styles"],s7=[],l7={overflowY:"auto",overflowAnchor:"none"};function c7(e,t){var r=e.prefixCls,o=r===void 0?"rc-virtual-list":r,c=e.className,f=e.height,y=e.itemHeight,l=e.fullHeight,w=l===void 0?!0:l,E=e.style,P=e.data,M=e.children,z=e.itemKey,F=e.virtual,k=e.direction,U=e.scrollWidth,X=e.component,$=X===void 0?"div":X,j=e.onScroll,V=e.onVirtualScroll,Z=e.onVisibleChange,ee=e.innerProps,ne=e.extraRender,Q=e.styles,ie=Vr(e,a7),te=!!(F!==!1&&f&&y),ge=te&&P&&(y*P.length>f||!!U),ue=k==="rtl",oe=Tt(o,Fe({},"".concat(o,"-rtl"),ue),c),fe=P||s7,Ee=T.useRef(),ke=T.useRef(),Le=T.useState(0),Ne=Bt(Le,2),pe=Ne[0],He=Ne[1],Be=T.useState(0),Ge=Bt(Be,2),Qe=Ge[0],gt=Ge[1],St=T.useState(!1),xt=Bt(St,2),jt=xt[0],Ut=xt[1],bt=function(){Ut(!0)},ut=function(){Ut(!1)},It=T.useCallback(function(an){return typeof z=="function"?z(an):an==null?void 0:an[z]},[z]),ft={getKey:It};function yt(an){He(function(nn){var En;typeof an=="function"?En=an(nn):En=an;var Tr=W(En);return Ee.current.scrollTop=Tr,Tr})}var ct=T.useRef({start:0,end:fe.length}),Mt=T.useRef(),Ct=e7(fe,It),Qt=Bt(Ct,1),Vt=Qt[0];Mt.current=Vt;var Nt=K9(It,null,null),ot=Bt(Nt,4),rt=ot[0],kt=ot[1],Pt=ot[2],sn=ot[3],An=T.useMemo(function(){if(!te)return{scrollHeight:void 0,start:0,end:fe.length-1,offset:void 0};if(!ge){var an;return{scrollHeight:((an=ke.current)===null||an===void 0?void 0:an.offsetHeight)||0,start:0,end:fe.length-1,offset:void 0}}for(var nn=0,En,Tr,ri,Cn=fe.length,Ni=0;Ni<Cn;Ni+=1){var xo=fe[Ni],Po=It(xo),io=Pt.get(Po),Hr=nn+(io===void 0?y:io);Hr>=pe&&En===void 0&&(En=Ni,Tr=nn),Hr>pe+f&&ri===void 0&&(ri=Ni),nn=Hr}return En===void 0&&(En=0,Tr=0,ri=Math.ceil(f/y)),ri===void 0&&(ri=fe.length-1),ri=Math.min(ri+1,fe.length-1),{scrollHeight:nn,start:En,end:ri,offset:Tr}},[ge,te,pe,fe,sn,f]),Mn=An.scrollHeight,on=An.start,Vn=An.end,Nn=An.offset;ct.current.start=on,ct.current.end=Vn;var zn=T.useState({width:0,height:f}),yn=Bt(zn,2),rn=yn[0],Wn=yn[1],jn=function(nn){Wn({width:nn.width||nn.offsetWidth,height:nn.height||nn.offsetHeight})},pr=T.useRef(),ar=T.useRef(),qn=T.useMemo(function(){return GM(rn.width,U)},[rn.width,U]),Qn=T.useMemo(function(){return GM(rn.height,Mn)},[rn.height,Mn]),Rr=Mn-f,_e=T.useRef(Rr);_e.current=Rr;function W(an){var nn=an;return Number.isNaN(_e.current)||(nn=Math.min(nn,_e.current)),nn=Math.max(nn,0),nn}var J=pe<=0,de=pe>=Rr,Se=_L(J,de),Ie=function(){return{x:ue?-Qe:Qe,y:pe}},Me=T.useRef(Ie()),De=jo(function(){if(V){var an=Ie();(Me.current.x!==an.x||Me.current.y!==an.y)&&(V(an),Me.current=an)}});function we(an,nn){var En=an;nn?(_c.flushSync(function(){gt(En)}),De()):yt(En)}function $e(an){var nn=an.currentTarget.scrollTop;nn!==pe&&yt(nn),j==null||j(an),De()}var je=function(nn){var En=nn,Tr=U-rn.width;return En=Math.max(En,0),En=Math.min(En,Tr),En},Je=jo(function(an,nn){nn?(_c.flushSync(function(){gt(function(En){var Tr=En+(ue?-an:an);return je(Tr)})}),De()):yt(function(En){var Tr=En+an;return Tr})}),We=t7(te,J,de,!!U,Je),wt=Bt(We,2),Yt=wt[0],Xt=wt[1];r7(te,Ee,function(an,nn){return Se(an,nn)?!1:(Yt({preventDefault:function(){},deltaY:an}),!0)}),zr(function(){function an(En){te&&En.preventDefault()}var nn=Ee.current;return nn.addEventListener("wheel",Yt),nn.addEventListener("DOMMouseScroll",Xt),nn.addEventListener("MozMousePixelScroll",an),function(){nn.removeEventListener("wheel",Yt),nn.removeEventListener("DOMMouseScroll",Xt),nn.removeEventListener("MozMousePixelScroll",an)}},[te]),zr(function(){U&&gt(function(an){return je(an)})},[rn.width,U]);var un=function(){var nn,En;(nn=pr.current)===null||nn===void 0||nn.delayHidden(),(En=ar.current)===null||En===void 0||En.delayHidden()},ln=J9(Ee,fe,Pt,y,It,function(){return kt(!0)},yt,un);T.useImperativeHandle(t,function(){return{getScrollInfo:Ie,scrollTo:function(nn){function En(Tr){return Tr&&Zn(Tr)==="object"&&("left"in Tr||"top"in Tr)}En(nn)?(nn.left!==void 0&&gt(je(nn.left)),ln(nn.top)):ln(nn)}}}),zr(function(){if(Z){var an=fe.slice(on,Vn+1);Z(an,fe)}},[on,Vn,fe]);var Gn=o7(fe,It,Pt,y),On=ne==null?void 0:ne({start:on,end:Vn,virtual:ge,offsetX:Qe,offsetY:Nn,rtl:ue,getSize:Gn}),er=Z9(fe,on,Vn,U,rt,M,ft),Xn=null;f&&(Xn=st(Fe({},w?"height":"maxHeight",f),l7),te&&(Xn.overflowY="hidden",U&&(Xn.overflowX="hidden"),jt&&(Xn.pointerEvents="none")));var Zr={};return ue&&(Zr.dir="rtl"),T.createElement("div",Sn({style:st(st({},E),{},{position:"relative"}),className:oe},Zr,ie),T.createElement(bl,{onResize:jn},T.createElement($,{className:"".concat(o,"-holder"),style:Xn,ref:Ee,onScroll:$e,onMouseEnter:un},T.createElement(yL,{prefixCls:o,height:Mn,offsetX:Qe,offsetY:Nn,scrollWidth:U,onInnerResize:kt,ref:ke,innerProps:ee,rtl:ue,extra:On},er))),ge&&Mn>f&&T.createElement(VM,{ref:pr,prefixCls:o,scrollOffset:pe,scrollRange:Mn,rtl:ue,onScroll:we,onStartMove:bt,onStopMove:ut,spinSize:Qn,containerSize:rn.height,style:Q==null?void 0:Q.verticalScrollBar,thumbStyle:Q==null?void 0:Q.verticalScrollBarThumb}),ge&&U&&T.createElement(VM,{ref:ar,prefixCls:o,scrollOffset:Qe,scrollRange:U,rtl:ue,onScroll:we,onStartMove:bt,onStopMove:ut,spinSize:qn,containerSize:rn.width,horizontal:!0,style:Q==null?void 0:Q.horizontalScrollBar,thumbStyle:Q==null?void 0:Q.horizontalScrollBarThumb}))}var xL=T.forwardRef(c7);xL.displayName="List";var bL=T.createContext(null);function u7(){return/(mac\sos|macintosh)/i.test(navigator.appVersion)}var d7=["disabled","title","children","style","className"];function WM(e){return typeof e=="string"||typeof e=="number"}var h7=function(t,r){var o=HV(),c=o.prefixCls,f=o.id,y=o.open,l=o.multiple,w=o.mode,E=o.searchValue,P=o.toggleOpen,M=o.notFoundContent,z=o.onPopupScroll,F=T.useContext(bL),k=F.flattenOptions,U=F.onActiveValue,X=F.defaultActiveFirstOption,$=F.onSelect,j=F.menuItemSelectedIcon,V=F.rawValues,Z=F.fieldNames,ee=F.virtual,ne=F.direction,Q=F.listHeight,ie=F.listItemHeight,te=F.optionRender,ge="".concat(c,"-item"),ue=y0(function(){return k},[y,k],function(bt,ut){return ut[0]&&bt[1]!==ut[1]}),oe=T.useRef(null),fe=function(ut){ut.preventDefault()},Ee=function(ut){oe.current&&oe.current.scrollTo(typeof ut=="number"?{index:ut}:ut)},ke=function(ut){for(var It=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,ft=ue.length,yt=0;yt<ft;yt+=1){var ct=(ut+yt*It+ft)%ft,Mt=ue[ct],Ct=Mt.group,Qt=Mt.data;if(!Ct&&!Qt.disabled)return ct}return-1},Le=T.useState(function(){return ke(0)}),Ne=Bt(Le,2),pe=Ne[0],He=Ne[1],Be=function(ut){var It=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;He(ut);var ft={source:It?"keyboard":"mouse"},yt=ue[ut];if(!yt){U(null,-1,ft);return}U(yt.value,ut,ft)};T.useEffect(function(){Be(X!==!1?ke(0):-1)},[ue.length,E]);var Ge=T.useCallback(function(bt){return V.has(bt)&&w!=="combobox"},[w,mn(V).toString(),V.size]);T.useEffect(function(){var bt=setTimeout(function(){if(!l&&y&&V.size===1){var It=Array.from(V)[0],ft=ue.findIndex(function(yt){var ct=yt.data;return ct.value===It});ft!==-1&&(Be(ft),Ee(ft))}});if(y){var ut;(ut=oe.current)===null||ut===void 0||ut.scrollTo(void 0)}return function(){return clearTimeout(bt)}},[y,E]);var Qe=function(ut){ut!==void 0&&$(ut,{selected:!V.has(ut)}),l||P(!1)};if(T.useImperativeHandle(r,function(){return{onKeyDown:function(ut){var It=ut.which,ft=ut.ctrlKey;switch(It){case Ht.N:case Ht.P:case Ht.UP:case Ht.DOWN:{var yt=0;if(It===Ht.UP?yt=-1:It===Ht.DOWN?yt=1:u7()&&ft&&(It===Ht.N?yt=1:It===Ht.P&&(yt=-1)),yt!==0){var ct=ke(pe+yt,yt);Ee(ct),Be(ct,!0)}break}case Ht.ENTER:{var Mt=ue[pe];Mt&&!Mt.data.disabled?Qe(Mt.value):Qe(void 0),y&&ut.preventDefault();break}case Ht.ESC:P(!1),y&&ut.stopPropagation()}},onKeyUp:function(){},scrollTo:function(ut){Ee(ut)}}}),ue.length===0)return T.createElement("div",{role:"listbox",id:"".concat(f,"_list"),className:"".concat(ge,"-empty"),onMouseDown:fe},M);var gt=Object.keys(Z).map(function(bt){return Z[bt]}),St=function(ut){return ut.label};function xt(bt,ut){var It=bt.group;return{role:It?"presentation":"option",id:"".concat(f,"_list_").concat(ut)}}var jt=function(ut){var It=ue[ut];if(!It)return null;var ft=It.data||{},yt=ft.value,ct=It.group,Mt=sm(ft,!0),Ct=St(It);return It?T.createElement("div",Sn({"aria-label":typeof Ct=="string"&&!ct?Ct:null},Mt,{key:ut},xt(It,ut),{"aria-selected":Ge(yt)}),yt):null},Ut={role:"listbox",id:"".concat(f,"_list")};return T.createElement(T.Fragment,null,ee&&T.createElement("div",Sn({},Ut,{style:{height:0,width:0,overflow:"hidden"}}),jt(pe-1),jt(pe),jt(pe+1)),T.createElement(xL,{itemKey:"key",ref:oe,data:ue,height:Q,itemHeight:ie,fullHeight:!1,onMouseDown:fe,onScroll:z,virtual:ee,direction:ne,innerProps:ee?null:Ut},function(bt,ut){var It,ft=bt.group,yt=bt.groupOption,ct=bt.data,Mt=bt.label,Ct=bt.value,Qt=ct.key;if(ft){var Vt,Nt=(Vt=ct.title)!==null&&Vt!==void 0?Vt:WM(Mt)?Mt.toString():void 0;return T.createElement("div",{className:Tt(ge,"".concat(ge,"-group")),title:Nt},Mt!==void 0?Mt:Qt)}var ot=ct.disabled,rt=ct.title;ct.children;var kt=ct.style,Pt=ct.className,sn=Vr(ct,d7),An=wl(sn,gt),Mn=Ge(Ct),on="".concat(ge,"-option"),Vn=Tt(ge,on,Pt,(It={},Fe(It,"".concat(on,"-grouped"),yt),Fe(It,"".concat(on,"-active"),pe===ut&&!ot),Fe(It,"".concat(on,"-disabled"),ot),Fe(It,"".concat(on,"-selected"),Mn),It)),Nn=St(bt),zn=!j||typeof j=="function"||Mn,yn=typeof Nn=="number"?Nn:Nn||Ct,rn=WM(yn)?yn.toString():void 0;return rt!==void 0&&(rn=rt),T.createElement("div",Sn({},sm(An),ee?{}:xt(bt,ut),{"aria-selected":Mn,className:Vn,title:rn,onMouseMove:function(){pe===ut||ot||Be(ut)},onClick:function(){ot||Qe(Ct)},style:kt}),T.createElement("div",{className:"".concat(on,"-content")},typeof te=="function"?te(bt,{index:ut}):yn),T.isValidElement(j)||Mn,zn&&T.createElement(R0,{className:"".concat(ge,"-option-state"),customizeIcon:j,customizeIconProps:{value:Ct,disabled:ot,isSelected:Mn}},Mn?"":null))}))},wL=T.forwardRef(h7);wL.displayName="OptionList";const f7=function(e,t){var r=T.useRef({values:new Map,options:new Map}),o=T.useMemo(function(){var f=r.current,y=f.values,l=f.options,w=e.map(function(M){if(M.label===void 0){var z;return st(st({},M),{},{label:(z=y.get(M.value))===null||z===void 0?void 0:z.label})}return M}),E=new Map,P=new Map;return w.forEach(function(M){E.set(M.value,M),P.set(M.value,t.get(M.value)||l.get(M.value))}),r.current.values=E,r.current.options=P,w},[e,t]),c=T.useCallback(function(f){return t.get(f)||r.current.options.get(f)},[t]);return[o,c]};function y1(e,t){return dL(e).join("").toUpperCase().includes(t)}const p7=function(e,t,r,o,c){return T.useMemo(function(){if(!r||o===!1)return e;var f=t.options,y=t.label,l=t.value,w=[],E=typeof o=="function",P=r.toUpperCase(),M=E?o:function(F,k){return c?y1(k[c],P):k[f]?y1(k[y!=="children"?y:"label"],P):y1(k[l],P)},z=E?function(F){return yw(F)}:function(F){return F};return e.forEach(function(F){if(F[f]){var k=M(r,z(F));if(k)w.push(F);else{var U=F[f].filter(function(X){return M(r,z(X))});U.length&&w.push(st(st({},F),{},Fe({},f,U)))}return}M(r,z(F))&&w.push(F)}),w},[e,o,c,r,t])};var qM=0,m7=no();function g7(){var e;return m7?(e=qM,qM+=1):e="TEST_OR_SSR",e}function v7(e){var t=T.useState(),r=Bt(t,2),o=r[0],c=r[1];return T.useEffect(function(){c("rc_select_".concat(g7()))},[]),e||o}var y7=["children","value"],_7=["children"];function x7(e){var t=e,r=t.key,o=t.props,c=o.children,f=o.value,y=Vr(o,y7);return st({key:r,value:f!==void 0?f:r,children:c},y)}function SL(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return fl(e).map(function(r,o){if(!T.isValidElement(r)||!r.type)return null;var c=r,f=c.type.isSelectOptGroup,y=c.key,l=c.props,w=l.children,E=Vr(l,_7);return t||!f?x7(r):st(st({key:"__RC_SELECT_GRP__".concat(y===null?o:y,"__"),label:y},E),{},{options:SL(w)})}).filter(function(r){return r})}function b7(e,t,r,o,c){return T.useMemo(function(){var f=e,y=!e;y&&(f=SL(t));var l=new Map,w=new Map,E=function(z,F,k){k&&typeof k=="string"&&z.set(F[k],F)};function P(M){for(var z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,F=0;F<M.length;F+=1){var k=M[F];!k[r.options]||z?(l.set(k[r.value],k),E(w,k,r.label),E(w,k,o),E(w,k,c)):P(k[r.options],!0)}}return P(f),{options:f,valueOptions:l,labelOptions:w}},[e,t,r,o,c])}function ZM(e){var t=T.useRef();t.current=e;var r=T.useCallback(function(){return t.current.apply(t,arguments)},[]);return r}var w7=["id","mode","prefixCls","backfill","fieldNames","inputValue","searchValue","onSearch","autoClearSearchValue","onSelect","onDeselect","dropdownMatchSelectWidth","filterOption","filterSort","optionFilterProp","optionLabelProp","options","optionRender","children","defaultActiveFirstOption","menuItemSelectedIcon","virtual","direction","listHeight","listItemHeight","value","defaultValue","labelInValue","onChange"],S7=["inputValue"];function E7(e){return!e||Zn(e)!=="object"}var C7=T.forwardRef(function(e,t){var r=e.id,o=e.mode,c=e.prefixCls,f=c===void 0?"rc-select":c,y=e.backfill,l=e.fieldNames,w=e.inputValue,E=e.searchValue,P=e.onSearch,M=e.autoClearSearchValue,z=M===void 0?!0:M,F=e.onSelect,k=e.onDeselect,U=e.dropdownMatchSelectWidth,X=U===void 0?!0:U,$=e.filterOption,j=e.filterSort,V=e.optionFilterProp,Z=e.optionLabelProp,ee=e.options,ne=e.optionRender,Q=e.children,ie=e.defaultActiveFirstOption,te=e.menuItemSelectedIcon,ge=e.virtual,ue=e.direction,oe=e.listHeight,fe=oe===void 0?200:oe,Ee=e.listItemHeight,ke=Ee===void 0?20:Ee,Le=e.value,Ne=e.defaultValue,pe=e.labelInValue,He=e.onChange,Be=Vr(e,w7),Ge=v7(r),Qe=_w(o),gt=!!(!ee&&Q),St=T.useMemo(function(){return $===void 0&&o==="combobox"?!1:$},[$,o]),xt=T.useMemo(function(){return vL(l,gt)},[JSON.stringify(l),gt]),jt=Bs("",{value:E!==void 0?E:w,postState:function(Je){return Je||""}}),Ut=Bt(jt,2),bt=Ut[0],ut=Ut[1],It=b7(ee,Q,xt,V,Z),ft=It.valueOptions,yt=It.labelOptions,ct=It.options,Mt=T.useCallback(function(je){var Je=dL(je);return Je.map(function(We){var wt,Yt,Xt,un,ln;if(E7(We))wt=We;else{var Gn;Xt=We.key,Yt=We.label,wt=(Gn=We.value)!==null&&Gn!==void 0?Gn:Xt}var On=ft.get(wt);if(On){var er;Yt===void 0&&(Yt=On==null?void 0:On[Z||xt.label]),Xt===void 0&&(Xt=(er=On==null?void 0:On.key)!==null&&er!==void 0?er:wt),un=On==null?void 0:On.disabled,ln=On==null?void 0:On.title}return{label:Yt,value:wt,key:Xt,disabled:un,title:ln}})},[xt,Z,ft]),Ct=Bs(Ne,{value:Le}),Qt=Bt(Ct,2),Vt=Qt[0],Nt=Qt[1],ot=T.useMemo(function(){var je,Je=Mt(Vt);return o==="combobox"&&l9((je=Je[0])===null||je===void 0?void 0:je.value)?[]:Je},[Vt,Mt,o]),rt=f7(ot,ft),kt=Bt(rt,2),Pt=kt[0],sn=kt[1],An=T.useMemo(function(){if(!o&&Pt.length===1){var je=Pt[0];if(je.value===null&&(je.label===null||je.label===void 0))return[]}return Pt.map(function(Je){var We;return st(st({},Je),{},{label:(We=Je.label)!==null&&We!==void 0?We:Je.value})})},[o,Pt]),Mn=T.useMemo(function(){return new Set(Pt.map(function(je){return je.value}))},[Pt]);T.useEffect(function(){if(o==="combobox"){var je,Je=(je=Pt[0])===null||je===void 0?void 0:je.value;ut(s9(Je)?String(Je):"")}},[Pt]);var on=ZM(function(je,Je){var We,wt=Je??je;return We={},Fe(We,xt.value,je),Fe(We,xt.label,wt),We}),Vn=T.useMemo(function(){if(o!=="tags")return ct;var je=mn(ct),Je=function(wt){return ft.has(wt)};return mn(Pt).sort(function(We,wt){return We.value<wt.value?-1:1}).forEach(function(We){var wt=We.value;Je(wt)||je.push(on(wt,We.label))}),je},[on,ct,ft,Pt,o]),Nn=p7(Vn,xt,bt,St,V),zn=T.useMemo(function(){return o!=="tags"||!bt||Nn.some(function(je){return je[V||"value"]===bt})||Nn.some(function(je){return je[xt.value]===bt})?Nn:[on(bt)].concat(mn(Nn))},[on,V,o,Nn,bt,xt]),yn=T.useMemo(function(){return j?mn(zn).sort(function(je,Je){return j(je,Je)}):zn},[zn,j]),rn=T.useMemo(function(){return U9(yn,{fieldNames:xt,childrenAsData:gt})},[yn,xt,gt]),Wn=function(Je){var We=Mt(Je);if(Nt(We),He&&(We.length!==Pt.length||We.some(function(Xt,un){var ln;return((ln=Pt[un])===null||ln===void 0?void 0:ln.value)!==(Xt==null?void 0:Xt.value)}))){var wt=pe?We:We.map(function(Xt){return Xt.value}),Yt=We.map(function(Xt){return yw(sn(Xt.value))});He(Qe?wt:wt[0],Qe?Yt:Yt[0])}},jn=T.useState(null),pr=Bt(jn,2),ar=pr[0],qn=pr[1],Qn=T.useState(0),Rr=Bt(Qn,2),_e=Rr[0],W=Rr[1],J=ie!==void 0?ie:o!=="combobox",de=T.useCallback(function(je,Je){var We=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},wt=We.source,Yt=wt===void 0?"keyboard":wt;W(Je),y&&o==="combobox"&&je!==null&&Yt==="keyboard"&&qn(String(je))},[y,o]),Se=function(Je,We,wt){var Yt=function(){var nn,En=sn(Je);return[pe?{label:En==null?void 0:En[xt.label],value:Je,key:(nn=En==null?void 0:En.key)!==null&&nn!==void 0?nn:Je}:Je,yw(En)]};if(We&&F){var Xt=Yt(),un=Bt(Xt,2),ln=un[0],Gn=un[1];F(ln,Gn)}else if(!We&&k&&wt!=="clear"){var On=Yt(),er=Bt(On,2),Xn=er[0],Zr=er[1];k(Xn,Zr)}},Ie=ZM(function(je,Je){var We,wt=Qe?Je.selected:!0;wt?We=Qe?[].concat(mn(Pt),[je]):[je]:We=Pt.filter(function(Yt){return Yt.value!==je}),Wn(We),Se(je,wt),o==="combobox"?qn(""):(!_w||z)&&(ut(""),qn(""))}),Me=function(Je,We){Wn(Je);var wt=We.type,Yt=We.values;(wt==="remove"||wt==="clear")&&Yt.forEach(function(Xt){Se(Xt.value,!1,wt)})},De=function(Je,We){if(ut(Je),qn(null),We.source==="submit"){var wt=(Je||"").trim();if(wt){var Yt=Array.from(new Set([].concat(mn(Mn),[wt])));Wn(Yt),Se(wt,!0),ut("")}return}We.source!=="blur"&&(o==="combobox"&&Wn(Je),P==null||P(Je))},we=function(Je){var We=Je;o!=="tags"&&(We=Je.map(function(Yt){var Xt=yt.get(Yt);return Xt==null?void 0:Xt.value}).filter(function(Yt){return Yt!==void 0}));var wt=Array.from(new Set([].concat(mn(Mn),mn(We))));Wn(wt),wt.forEach(function(Yt){Se(Yt,!0)})},$e=T.useMemo(function(){var je=ge!==!1&&X!==!1;return st(st({},It),{},{flattenOptions:rn,onActiveValue:de,defaultActiveFirstOption:J,onSelect:Ie,menuItemSelectedIcon:te,rawValues:Mn,fieldNames:xt,virtual:je,direction:ue,listHeight:fe,listItemHeight:ke,childrenAsData:gt,optionRender:ne})},[It,rn,de,J,Ie,te,Mn,xt,ge,X,fe,ke,gt,ne]);return T.createElement(bL.Provider,{value:$e},T.createElement(W9,Sn({},Be,{id:Ge,prefixCls:f,ref:t,omitDomProps:S7,mode:o,displayValues:An,onDisplayValuesChange:Me,direction:ue,searchValue:bt,onSearch:De,autoClearSearchValue:z,onSearchSplit:we,dropdownMatchSelectWidth:X,OptionList:wL,emptyOptions:!rn.length,activeValue:ar,activeDescendantId:"".concat(Ge,"_list_").concat(_e)})))}),oE=C7;oE.Option=iE;oE.OptGroup=rE;function dh(e,t,r){return Tt({[`${e}-status-success`]:t==="success",[`${e}-status-warning`]:t==="warning",[`${e}-status-error`]:t==="error",[`${e}-status-validating`]:t==="validating",[`${e}-has-feedback`]:r})}const aE=(e,t)=>t||e,T7=()=>{const[,e]=Na(),r=new Ji(e.colorBgBase).toHsl().l<.5?{opacity:.65}:{};return T.createElement("svg",{style:r,width:"184",height:"152",viewBox:"0 0 184 152",xmlns:"http://www.w3.org/2000/svg"},T.createElement("g",{fill:"none",fillRule:"evenodd"},T.createElement("g",{transform:"translate(24 31.67)"},T.createElement("ellipse",{fillOpacity:".8",fill:"#F5F5F7",cx:"67.797",cy:"106.89",rx:"67.797",ry:"12.668"}),T.createElement("path",{d:"M122.034 69.674L98.109 40.229c-1.148-1.386-2.826-2.225-4.593-2.225h-51.44c-1.766 0-3.444.839-4.592 2.225L13.56 69.674v15.383h108.475V69.674z",fill:"#AEB8C2"}),T.createElement("path",{d:"M101.537 86.214L80.63 61.102c-1.001-1.207-2.507-1.867-4.048-1.867H31.724c-1.54 0-3.047.66-4.048 1.867L6.769 86.214v13.792h94.768V86.214z",fill:"url(#linearGradient-1)",transform:"translate(13.56)"}),T.createElement("path",{d:"M33.83 0h67.933a4 4 0 0 1 4 4v93.344a4 4 0 0 1-4 4H33.83a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4z",fill:"#F5F5F7"}),T.createElement("path",{d:"M42.678 9.953h50.237a2 2 0 0 1 2 2V36.91a2 2 0 0 1-2 2H42.678a2 2 0 0 1-2-2V11.953a2 2 0 0 1 2-2zM42.94 49.767h49.713a2.262 2.262 0 1 1 0 4.524H42.94a2.262 2.262 0 0 1 0-4.524zM42.94 61.53h49.713a2.262 2.262 0 1 1 0 4.525H42.94a2.262 2.262 0 0 1 0-4.525zM121.813 105.032c-.775 3.071-3.497 5.36-6.735 5.36H20.515c-3.238 0-5.96-2.29-6.734-5.36a7.309 7.309 0 0 1-.222-1.79V69.675h26.318c2.907 0 5.25 2.448 5.25 5.42v.04c0 2.971 2.37 5.37 5.277 5.37h34.785c2.907 0 5.277-2.421 5.277-5.393V75.1c0-2.972 2.343-5.426 5.25-5.426h26.318v33.569c0 .617-.077 1.216-.221 1.789z",fill:"#DCE0E6"})),T.createElement("path",{d:"M149.121 33.292l-6.83 2.65a1 1 0 0 1-1.317-1.23l1.937-6.207c-2.589-2.944-4.109-6.534-4.109-10.408C138.802 8.102 148.92 0 161.402 0 173.881 0 184 8.102 184 18.097c0 9.995-10.118 18.097-22.599 18.097-4.528 0-8.744-1.066-12.28-2.902z",fill:"#DCE0E6"}),T.createElement("g",{transform:"translate(149.65 15.383)",fill:"#FFF"},T.createElement("ellipse",{cx:"20.654",cy:"3.167",rx:"2.849",ry:"2.815"}),T.createElement("path",{d:"M5.698 5.63H0L2.898.704zM9.259.704h4.985V5.63H9.259z"}))))},I7=T7,M7=()=>{const[,e]=Na(),{colorFill:t,colorFillTertiary:r,colorFillQuaternary:o,colorBgContainer:c}=e,{borderColor:f,shadowColor:y,contentColor:l}=T.useMemo(()=>({borderColor:new Ji(t).onBackground(c).toHexShortString(),shadowColor:new Ji(r).onBackground(c).toHexShortString(),contentColor:new Ji(o).onBackground(c).toHexShortString()}),[t,r,o,c]);return T.createElement("svg",{width:"64",height:"41",viewBox:"0 0 64 41",xmlns:"http://www.w3.org/2000/svg"},T.createElement("g",{transform:"translate(0 1)",fill:"none",fillRule:"evenodd"},T.createElement("ellipse",{fill:y,cx:"32",cy:"33",rx:"32",ry:"7"}),T.createElement("g",{fillRule:"nonzero",stroke:f},T.createElement("path",{d:"M55 12.76L44.854 1.258C44.367.474 43.656 0 42.907 0H21.093c-.749 0-1.46.474-1.947 1.257L9 12.761V22h46v-9.24z"}),T.createElement("path",{d:"M41.613 15.931c0-1.605.994-2.93 2.227-2.931H55v18.137C55 33.26 53.68 35 52.05 35h-40.1C10.32 35 9 33.259 9 31.137V13h11.16c1.233 0 2.227 1.323 2.227 2.928v.022c0 1.605 1.005 2.901 2.237 2.901h14.752c1.232 0 2.237-1.308 2.237-2.913v-.007z",fill:l}))))},P7=M7,A7=e=>{const{componentCls:t,margin:r,marginXS:o,marginXL:c,fontSize:f,lineHeight:y}=e;return{[t]:{marginInline:o,fontSize:f,lineHeight:y,textAlign:"center",[`${t}-image`]:{height:e.emptyImgHeight,marginBottom:o,opacity:e.opacityImage,img:{height:"100%"},svg:{maxWidth:"100%",height:"100%",margin:"auto"}},[`${t}-description`]:{color:e.colorText},[`${t}-footer`]:{marginTop:r},"&-normal":{marginBlock:c,color:e.colorTextDisabled,[`${t}-description`]:{color:e.colorTextDisabled},[`${t}-image`]:{height:e.emptyImgHeightMD}},"&-small":{marginBlock:o,color:e.colorTextDisabled,[`${t}-image`]:{height:e.emptyImgHeightSM}}}}},R7=ro("Empty",e=>{const{componentCls:t,controlHeightLG:r}=e,o=Lr(e,{emptyImgCls:`${t}-img`,emptyImgHeight:r*2.5,emptyImgHeightMD:r,emptyImgHeightSM:r*.875});return[A7(o)]});var O7=globalThis&&globalThis.__rest||function(e,t){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(e);c<o.length;c++)t.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(e,o[c])&&(r[o[c]]=e[o[c]]);return r};const EL=T.createElement(I7,null),CL=T.createElement(P7,null),sE=e=>{var{className:t,rootClassName:r,prefixCls:o,image:c=EL,description:f,children:y,imageStyle:l,style:w}=e,E=O7(e,["className","rootClassName","prefixCls","image","description","children","imageStyle","style"]);const{getPrefixCls:P,direction:M,empty:z}=T.useContext(ur),F=P("empty",o),[k,U]=R7(F),[X]=FS("Empty"),$=typeof f<"u"?f:X==null?void 0:X.description,j=typeof $=="string"?$:"empty";let V=null;return typeof c=="string"?V=T.createElement("img",{alt:j,src:c}):V=c,k(T.createElement("div",Object.assign({className:Tt(U,F,z==null?void 0:z.className,{[`${F}-normal`]:c===CL,[`${F}-rtl`]:M==="rtl"},t,r),style:Object.assign(Object.assign({},z==null?void 0:z.style),w)},E),T.createElement("div",{className:`${F}-image`,style:l},V),$&&T.createElement("div",{className:`${F}-description`},$),y&&T.createElement("div",{className:`${F}-footer`},y)))};sE.PRESENTED_IMAGE_DEFAULT=EL;sE.PRESENTED_IMAGE_SIMPLE=CL;const pp=sE,z7=e=>{const{componentName:t}=e,{getPrefixCls:r}=T.useContext(ur),o=r("empty");switch(t){case"Table":case"List":return lt.createElement(pp,{image:pp.PRESENTED_IMAGE_SIMPLE});case"Select":case"TreeSelect":case"Cascader":case"Transfer":case"Mentions":return lt.createElement(pp,{image:pp.PRESENTED_IMAGE_SIMPLE,className:`${o}-small`});default:return lt.createElement(pp,null)}},TL=z7,L7=e=>{const{optionHeight:t,optionFontSize:r,optionLineHeight:o,optionPadding:c}=e;return{position:"relative",display:"block",minHeight:t,padding:c,color:e.colorText,fontWeight:"normal",fontSize:r,lineHeight:o,boxSizing:"border-box"}},D7=e=>{const{antCls:t,componentCls:r}=e,o=`${r}-item`,c=`&${t}-slide-up-enter${t}-slide-up-enter-active`,f=`&${t}-slide-up-appear${t}-slide-up-appear-active`,y=`&${t}-slide-up-leave${t}-slide-up-leave-active`,l=`${r}-dropdown-placement-`;return[{[`${r}-dropdown`]:Object.assign(Object.assign({},ja(e)),{position:"absolute",top:-9999,zIndex:e.zIndexPopup,boxSizing:"border-box",padding:e.paddingXXS,overflow:"hidden",fontSize:e.fontSize,fontVariant:"initial",backgroundColor:e.colorBgElevated,borderRadius:e.borderRadiusLG,outline:"none",boxShadow:e.boxShadowSecondary,[`
          ${c}${l}bottomLeft,
          ${f}${l}bottomLeft
        `]:{animationName:qz},[`
          ${c}${l}topLeft,
          ${f}${l}topLeft,
          ${c}${l}topRight,
          ${f}${l}topRight
        `]:{animationName:Xz},[`${y}${l}bottomLeft`]:{animationName:Zz},[`
          ${y}${l}topLeft,
          ${y}${l}topRight
        `]:{animationName:Kz},"&-hidden":{display:"none"},[`${o}`]:Object.assign(Object.assign({},L7(e)),{cursor:"pointer",transition:`background ${e.motionDurationSlow} ease`,borderRadius:e.borderRadiusSM,"&-group":{color:e.colorTextDescription,fontSize:e.fontSizeSM,cursor:"default"},"&-option":{display:"flex","&-content":Object.assign({flex:"auto"},Oy),"&-state":{flex:"none",display:"flex",alignItems:"center"},[`&-active:not(${o}-option-disabled)`]:{backgroundColor:e.optionActiveBg},[`&-selected:not(${o}-option-disabled)`]:{color:e.optionSelectedColor,fontWeight:e.optionSelectedFontWeight,backgroundColor:e.optionSelectedBg,[`${o}-option-state`]:{color:e.colorPrimary}},"&-disabled":{[`&${o}-option-selected`]:{backgroundColor:e.colorBgContainerDisabled},color:e.colorTextDisabled,cursor:"not-allowed"},"&-grouped":{paddingInlineStart:e.controlPaddingHorizontal*2}}}),"&-rtl":{direction:"rtl"}})},TM(e,"slide-up"),TM(e,"slide-down"),CM(e,"move-up"),CM(e,"move-down")]},k7=D7,Ld=2,IL=e=>{let{multipleSelectItemHeight:t,selectHeight:r,lineWidth:o}=e;const c=(r-t)/2-o,f=Math.ceil(c/2);return[c,f]};function _1(e,t){const{componentCls:r,iconCls:o}=e,c=`${r}-selection-overflow`,f=e.multipleSelectItemHeight,[y]=IL(e),l=t?`${r}-${t}`:"";return{[`${r}-multiple${l}`]:{fontSize:e.fontSize,[c]:{position:"relative",display:"flex",flex:"auto",flexWrap:"wrap",maxWidth:"100%","&-item":{flex:"none",alignSelf:"center",maxWidth:"100%",display:"inline-flex"}},[`${r}-selector`]:{display:"flex",flexWrap:"wrap",alignItems:"center",height:"100%",padding:`${y-Ld}px ${Ld*2}px`,borderRadius:e.borderRadius,[`${r}-show-search&`]:{cursor:"text"},[`${r}-disabled&`]:{background:e.multipleSelectorBgDisabled,cursor:"not-allowed"},"&:after":{display:"inline-block",width:0,margin:`${Ld}px 0`,lineHeight:`${f}px`,visibility:"hidden",content:'"\\a0"'}},[`
        &${r}-show-arrow ${r}-selector,
        &${r}-allow-clear ${r}-selector
      `]:{paddingInlineEnd:e.fontSizeIcon+e.controlPaddingHorizontal},[`${r}-selection-item`]:{display:"flex",alignSelf:"center",flex:"none",boxSizing:"border-box",maxWidth:"100%",height:f,marginTop:Ld,marginBottom:Ld,lineHeight:`${f-e.lineWidth*2}px`,background:e.multipleItemBg,border:`${e.lineWidth}px ${e.lineType} ${e.multipleItemBorderColor}`,borderRadius:e.borderRadiusSM,cursor:"default",transition:`font-size ${e.motionDurationSlow}, line-height ${e.motionDurationSlow}, height ${e.motionDurationSlow}`,marginInlineEnd:Ld*2,paddingInlineStart:e.paddingXS,paddingInlineEnd:e.paddingXS/2,[`${r}-disabled&`]:{color:e.multipleItemColorDisabled,borderColor:e.multipleItemBorderColorDisabled,cursor:"not-allowed"},"&-content":{display:"inline-block",marginInlineEnd:e.paddingXS/2,overflow:"hidden",whiteSpace:"pre",textOverflow:"ellipsis"},"&-remove":Object.assign(Object.assign({},NS()),{display:"inline-flex",alignItems:"center",color:e.colorIcon,fontWeight:"bold",fontSize:10,lineHeight:"inherit",cursor:"pointer",[`> ${o}`]:{verticalAlign:"-0.2em"},"&:hover":{color:e.colorIconHover}})},[`${c}-item + ${c}-item`]:{[`${r}-selection-search`]:{marginInlineStart:0}},[`${c}-item-suffix`]:{height:"100%"},[`${r}-selection-search`]:{display:"inline-flex",position:"relative",maxWidth:"100%",marginInlineStart:e.inputPaddingHorizontalBase-y,"\n          &-input,\n          &-mirror\n        ":{height:f,fontFamily:e.fontFamily,lineHeight:`${f}px`,transition:`all ${e.motionDurationSlow}`},"&-input":{width:"100%",minWidth:4.1},"&-mirror":{position:"absolute",top:0,insetInlineStart:0,insetInlineEnd:"auto",zIndex:999,whiteSpace:"pre",visibility:"hidden"}},[`${r}-selection-placeholder`]:{position:"absolute",top:"50%",insetInlineStart:e.inputPaddingHorizontalBase,insetInlineEnd:e.inputPaddingHorizontalBase,transform:"translateY(-50%)",transition:`all ${e.motionDurationSlow}`}}}}const $7=e=>{const{componentCls:t}=e,r=Lr(e,{selectHeight:e.controlHeightSM,multipleSelectItemHeight:e.controlHeightXS,borderRadius:e.borderRadiusSM,borderRadiusSM:e.borderRadiusXS}),o=Lr(e,{fontSize:e.fontSizeLG,selectHeight:e.controlHeightLG,multipleSelectItemHeight:e.multipleItemHeightLG,borderRadius:e.borderRadiusLG,borderRadiusSM:e.borderRadius}),[,c]=IL(e);return[_1(e),_1(r,"sm"),{[`${t}-multiple${t}-sm`]:{[`${t}-selection-placeholder`]:{insetInline:e.controlPaddingHorizontalSM-e.lineWidth},[`${t}-selection-search`]:{marginInlineStart:c}}},_1(o,"lg")]},F7=$7;function x1(e,t){const{componentCls:r,inputPaddingHorizontalBase:o,borderRadius:c}=e,f=e.controlHeight-e.lineWidth*2,y=Math.ceil(e.fontSize*1.25),l=t?`${r}-${t}`:"";return{[`${r}-single${l}`]:{fontSize:e.fontSize,height:e.controlHeight,[`${r}-selector`]:Object.assign(Object.assign({},ja(e,!0)),{display:"flex",borderRadius:c,[`${r}-selection-search`]:{position:"absolute",top:0,insetInlineStart:o,insetInlineEnd:o,bottom:0,"&-input":{width:"100%"}},[`
          ${r}-selection-item,
          ${r}-selection-placeholder
        `]:{padding:0,lineHeight:`${f}px`,transition:`all ${e.motionDurationSlow}, visibility 0s`,alignSelf:"center"},[`${r}-selection-placeholder`]:{transition:"none",pointerEvents:"none"},[["&:after",`${r}-selection-item:empty:after`,`${r}-selection-placeholder:empty:after`].join(",")]:{display:"inline-block",width:0,visibility:"hidden",content:'"\\a0"'}}),[`
        &${r}-show-arrow ${r}-selection-item,
        &${r}-show-arrow ${r}-selection-placeholder
      `]:{paddingInlineEnd:y},[`&${r}-open ${r}-selection-item`]:{color:e.colorTextPlaceholder},[`&:not(${r}-customize-input)`]:{[`${r}-selector`]:{width:"100%",height:"100%",padding:`0 ${o}px`,[`${r}-selection-search-input`]:{height:f},"&:after":{lineHeight:`${f}px`}}},[`&${r}-customize-input`]:{[`${r}-selector`]:{"&:after":{display:"none"},[`${r}-selection-search`]:{position:"static",width:"100%"},[`${r}-selection-placeholder`]:{position:"absolute",insetInlineStart:0,insetInlineEnd:0,padding:`0 ${o}px`,"&:after":{display:"none"}}}}}}}function B7(e){const{componentCls:t}=e,r=e.controlPaddingHorizontalSM-e.lineWidth;return[x1(e),x1(Lr(e,{controlHeight:e.controlHeightSM,borderRadius:e.borderRadiusSM}),"sm"),{[`${t}-single${t}-sm`]:{[`&:not(${t}-customize-input)`]:{[`${t}-selection-search`]:{insetInlineStart:r,insetInlineEnd:r},[`${t}-selector`]:{padding:`0 ${r}px`},[`&${t}-show-arrow ${t}-selection-search`]:{insetInlineEnd:r+e.fontSize*1.5},[`
            &${t}-show-arrow ${t}-selection-item,
            &${t}-show-arrow ${t}-selection-placeholder
          `]:{paddingInlineEnd:e.fontSize*1.5}}}},x1(Lr(e,{controlHeight:e.singleItemHeightLG,fontSize:e.fontSizeLG,borderRadius:e.borderRadiusLG}),"lg")]}const N7=e=>{const{componentCls:t,selectorBg:r}=e;return{position:"relative",backgroundColor:r,border:`${e.lineWidth}px ${e.lineType} ${e.colorBorder}`,transition:`all ${e.motionDurationMid} ${e.motionEaseInOut}`,input:{cursor:"pointer"},[`${t}-show-search&`]:{cursor:"text",input:{cursor:"auto",color:"inherit",height:"100%"}},[`${t}-disabled&`]:{color:e.colorTextDisabled,background:e.colorBgContainerDisabled,cursor:"not-allowed",[`${t}-multiple&`]:{background:e.multipleSelectorBgDisabled},input:{cursor:"not-allowed"}}}},b1=function(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const{componentCls:o,borderHoverColor:c,antCls:f,borderActiveColor:y,outlineColor:l,controlOutlineWidth:w}=t,E=r?{[`${o}-selector`]:{borderColor:y}}:{};return{[e]:{[`&:not(${o}-disabled):not(${o}-customize-input):not(${f}-pagination-size-changer)`]:Object.assign(Object.assign({},E),{[`&:hover ${o}-selector`]:{borderColor:c},[`${o}-focused& ${o}-selector`]:{borderColor:y,boxShadow:`0 0 0 ${w}px ${l}`,outline:0}})}}},j7=e=>{const{componentCls:t}=e;return{[`${t}-selection-search-input`]:{margin:0,padding:0,background:"transparent",border:"none",outline:"none",appearance:"none",fontFamily:"inherit","&::-webkit-search-cancel-button":{display:"none","-webkit-appearance":"none"}}}},U7=e=>{const{antCls:t,componentCls:r,inputPaddingHorizontalBase:o,iconCls:c}=e;return{[r]:Object.assign(Object.assign({},ja(e)),{position:"relative",display:"inline-block",cursor:"pointer",[`&:not(${r}-customize-input) ${r}-selector`]:Object.assign(Object.assign({},N7(e)),j7(e)),[`${r}-selection-item`]:Object.assign(Object.assign({flex:1,fontWeight:"normal",position:"relative",userSelect:"none"},Oy),{[`> ${t}-typography`]:{display:"inline"}}),[`${r}-selection-placeholder`]:Object.assign(Object.assign({},Oy),{flex:1,color:e.colorTextPlaceholder,pointerEvents:"none"}),[`${r}-arrow`]:Object.assign(Object.assign({},NS()),{position:"absolute",top:"50%",insetInlineStart:"auto",insetInlineEnd:o,height:e.fontSizeIcon,marginTop:-e.fontSizeIcon/2,color:e.colorTextQuaternary,fontSize:e.fontSizeIcon,lineHeight:1,textAlign:"center",pointerEvents:"none",display:"flex",alignItems:"center",[c]:{verticalAlign:"top",transition:`transform ${e.motionDurationSlow}`,"> svg":{verticalAlign:"top"},[`&:not(${r}-suffix)`]:{pointerEvents:"auto"}},[`${r}-disabled &`]:{cursor:"not-allowed"},"> *:not(:last-child)":{marginInlineEnd:8}}),[`${r}-clear`]:{position:"absolute",top:"50%",insetInlineStart:"auto",insetInlineEnd:o,zIndex:1,display:"inline-block",width:e.fontSizeIcon,height:e.fontSizeIcon,marginTop:-e.fontSizeIcon/2,color:e.colorTextQuaternary,fontSize:e.fontSizeIcon,fontStyle:"normal",lineHeight:1,textAlign:"center",textTransform:"none",background:e.clearBg,cursor:"pointer",opacity:0,transition:`color ${e.motionDurationMid} ease, opacity ${e.motionDurationSlow} ease`,textRendering:"auto","&:before":{display:"block"},"&:hover":{color:e.colorTextTertiary}},"&:hover":{[`${r}-clear`]:{opacity:1}}}),[`${r}-has-feedback`]:{[`${r}-clear`]:{insetInlineEnd:o+e.fontSize+e.paddingXS}}}},V7=e=>{const{componentCls:t}=e;return[{[t]:{[`&-borderless ${t}-selector`]:{backgroundColor:"transparent !important",borderColor:"transparent !important",boxShadow:"none !important"},[`&${t}-in-form-item`]:{width:"100%"}}},U7(e),B7(e),F7(e),k7(e),{[`${t}-rtl`]:{direction:"rtl"}},b1(t,Lr(e,{borderHoverColor:e.colorPrimaryHover,borderActiveColor:e.colorPrimary,outlineColor:e.controlOutline})),b1(`${t}-status-error`,Lr(e,{borderHoverColor:e.colorErrorHover,borderActiveColor:e.colorError,outlineColor:e.colorErrorOutline}),!0),b1(`${t}-status-warning`,Lr(e,{borderHoverColor:e.colorWarningHover,borderActiveColor:e.colorWarning,outlineColor:e.colorWarningOutline}),!0),YS(e,{borderElCls:`${t}-selector`,focusElCls:`${t}-focused`})]},H7=ro("Select",(e,t)=>{let{rootPrefixCls:r}=t;const o=Lr(e,{rootPrefixCls:r,inputPaddingHorizontalBase:e.paddingSM-1,multipleSelectItemHeight:e.multipleItemHeight,selectHeight:e.controlHeight});return[V7(o)]},e=>{const{fontSize:t,lineHeight:r,controlHeight:o,controlPaddingHorizontal:c,zIndexPopupBase:f,colorText:y,fontWeightStrong:l,controlItemBgActive:w,controlItemBgHover:E,colorBgContainer:P,colorFillSecondary:M,controlHeightLG:z,controlHeightSM:F,colorBgContainerDisabled:k,colorTextDisabled:U}=e;return{zIndexPopup:f+50,optionSelectedColor:y,optionSelectedFontWeight:l,optionSelectedBg:w,optionActiveBg:E,optionPadding:`${(o-t*r)/2}px ${c}px`,optionFontSize:t,optionLineHeight:r,optionHeight:o,selectorBg:P,clearBg:P,singleItemHeightLG:z,multipleItemBg:M,multipleItemBorderColor:"transparent",multipleItemHeight:F,multipleItemHeightLG:o,multipleSelectorBgDisabled:k,multipleItemColorDisabled:U,multipleItemBorderColorDisabled:"transparent"}}),G7=e=>{const r={overflow:{adjustX:!0,adjustY:!0,shiftY:!0},htmlRegion:e==="scroll"?"scroll":"visible",dynamicInset:!0};return{bottomLeft:Object.assign(Object.assign({},r),{points:["tl","bl"],offset:[0,4]}),bottomRight:Object.assign(Object.assign({},r),{points:["tr","br"],offset:[0,4]}),topLeft:Object.assign(Object.assign({},r),{points:["bl","tl"],offset:[0,-4]}),topRight:Object.assign(Object.assign({},r),{points:["br","tr"],offset:[0,-4]})}};function W7(e,t){return e||G7(t)}var q7={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"};const Z7=q7;var X7=function(t,r){return T.createElement(Xi,Sn({},t,{ref:r,icon:Z7}))};const ML=T.forwardRef(X7);var K7={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"}}]},name:"down",theme:"outlined"};const Y7=K7;var J7=function(t,r){return T.createElement(Xi,Sn({},t,{ref:r,icon:Y7}))};const Q7=T.forwardRef(J7);var eH={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0011.6 0l43.6-43.5a8.2 8.2 0 000-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z"}}]},name:"search",theme:"outlined"};const tH=eH;var nH=function(t,r){return T.createElement(Xi,Sn({},t,{ref:r,icon:tH}))};const PL=T.forwardRef(nH);function rH(e){let{suffixIcon:t,clearIcon:r,menuItemSelectedIcon:o,removeIcon:c,loading:f,multiple:y,hasFeedback:l,prefixCls:w,showSuffixIcon:E,feedbackIcon:P,showArrow:M,componentName:z}=e;const F=r??T.createElement(wm,null),k=j=>t===null&&!l&&!M?null:T.createElement(T.Fragment,null,E!==!1&&j,l&&P);let U=null;if(t!==void 0)U=k(t);else if(f)U=k(T.createElement(WS,{spin:!0}));else{const j=`${w}-suffix`;U=V=>{let{open:Z,showSearch:ee}=V;return k(Z&&ee?T.createElement(PL,{className:j}):T.createElement(Q7,{className:j}))}}let X=null;o!==void 0?X=o:y?X=T.createElement(ML,null):X=null;let $=null;return c!==void 0?$=c:$=T.createElement(HS,null),{clearIcon:F,suffixIcon:U,itemIcon:X,removeIcon:$}}function iH(e,t){return t!==void 0?t:e!==null}var oH=globalThis&&globalThis.__rest||function(e,t){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(e);c<o.length;c++)t.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(e,o[c])&&(r[o[c]]=e[o[c]]);return r};const AL="SECRET_COMBOBOX_MODE_DO_NOT_USE",aH=(e,t)=>{var r,o,{prefixCls:c,bordered:f=!0,className:y,rootClassName:l,getPopupContainer:w,popupClassName:E,dropdownClassName:P,listHeight:M=256,placement:z,listItemHeight:F=24,size:k,disabled:U,notFoundContent:X,status:$,builtinPlacements:j,dropdownMatchSelectWidth:V,popupMatchSelectWidth:Z,direction:ee,style:ne,allowClear:Q}=e,ie=oH(e,["prefixCls","bordered","className","rootClassName","getPopupContainer","popupClassName","dropdownClassName","listHeight","placement","listItemHeight","size","disabled","notFoundContent","status","builtinPlacements","dropdownMatchSelectWidth","popupMatchSelectWidth","direction","style","allowClear"]);const{getPopupContainer:te,getPrefixCls:ge,renderEmpty:ue,direction:oe,virtual:fe,popupMatchSelectWidth:Ee,popupOverflow:ke,select:Le}=T.useContext(ur),Ne=ge("select",c),pe=ge(),He=ee??oe,{compactSize:Be,compactItemClassnames:Ge}=A0(Ne,He),[Qe,gt]=H7(Ne),St=T.useMemo(()=>{const{mode:Nn}=ie;if(Nn!=="combobox")return Nn===AL?"combobox":Nn},[ie.mode]),xt=St==="multiple"||St==="tags",jt=iH(ie.suffixIcon,ie.showArrow),Ut=(r=Z??V)!==null&&r!==void 0?r:Ee,{status:bt,hasFeedback:ut,isFormItemInput:It,feedbackIcon:ft}=T.useContext(Tu),yt=aE(bt,$);let ct;X!==void 0?ct=X:St==="combobox"?ct=null:ct=(ue==null?void 0:ue("Select"))||T.createElement(TL,{componentName:"Select"});const{suffixIcon:Mt,itemIcon:Ct,removeIcon:Qt,clearIcon:Vt}=rH(Object.assign(Object.assign({},ie),{multiple:xt,hasFeedback:ut,feedbackIcon:ft,showSuffixIcon:jt,prefixCls:Ne,showArrow:ie.showArrow,componentName:"Select"})),Nt=Q===!0?{clearIcon:Vt}:Q,ot=wl(ie,["suffixIcon","itemIcon"]),rt=Tt(E||P,{[`${Ne}-dropdown-${He}`]:He==="rtl"},l,gt),kt=Sl(Nn=>{var zn;return(zn=k??Be)!==null&&zn!==void 0?zn:Nn}),Pt=T.useContext(bm),sn=U??Pt,An=Tt({[`${Ne}-lg`]:kt==="large",[`${Ne}-sm`]:kt==="small",[`${Ne}-rtl`]:He==="rtl",[`${Ne}-borderless`]:!f,[`${Ne}-in-form-item`]:It},dh(Ne,yt,ut),Ge,Le==null?void 0:Le.className,y,l,gt),Mn=T.useMemo(()=>z!==void 0?z:He==="rtl"?"bottomRight":"bottomLeft",[z,He]),on=W7(j,ke),[Vn]=Jz("SelectLike",(o=ie.dropdownStyle)===null||o===void 0?void 0:o.zIndex);return Qe(T.createElement(oE,Object.assign({ref:t,virtual:fe,showSearch:Le==null?void 0:Le.showSearch},ot,{style:Object.assign(Object.assign({},Le==null?void 0:Le.style),ne),dropdownMatchSelectWidth:Ut,builtinPlacements:on,transitionName:Tz(pe,"slide-up",ie.transitionName),listHeight:M,listItemHeight:F,mode:St,prefixCls:Ne,placement:Mn,direction:He,suffixIcon:Mt,menuItemSelectedIcon:Ct,removeIcon:Qt,allowClear:Nt,notFoundContent:ct,className:An,getPopupContainer:w||te,dropdownClassName:rt,disabled:sn,dropdownStyle:Object.assign(Object.assign({},ie==null?void 0:ie.dropdownStyle),{zIndex:Vn})})))},Oh=T.forwardRef(aH),sH=UV(Oh);Oh.SECRET_COMBOBOX_MODE_DO_NOT_USE=AL;Oh.Option=iE;Oh.OptGroup=rE;Oh._InternalPanelDoNotUseOrYouWillBeFired=sH;const O0=Oh,Iu=["xxl","xl","lg","md","sm","xs"],lH=e=>({xs:`(max-width: ${e.screenXSMax}px)`,sm:`(min-width: ${e.screenSM}px)`,md:`(min-width: ${e.screenMD}px)`,lg:`(min-width: ${e.screenLG}px)`,xl:`(min-width: ${e.screenXL}px)`,xxl:`(min-width: ${e.screenXXL}px)`}),cH=e=>{const t=e,r=[].concat(Iu).reverse();return r.forEach((o,c)=>{const f=o.toUpperCase(),y=`screen${f}Min`,l=`screen${f}`;if(!(t[y]<=t[l]))throw new Error(`${y}<=${l} fails : !(${t[y]}<=${t[l]})`);if(c<r.length-1){const w=`screen${f}Max`;if(!(t[l]<=t[w]))throw new Error(`${l}<=${w} fails : !(${t[l]}<=${t[w]})`);const P=`screen${r[c+1].toUpperCase()}Min`;if(!(t[w]<=t[P]))throw new Error(`${w}<=${P} fails : !(${t[w]}<=${t[P]})`)}}),e};function RL(){const[,e]=Na(),t=lH(cH(e));return lt.useMemo(()=>{const r=new Map;let o=-1,c={};return{matchHandlers:{},dispatch(f){return c=f,r.forEach(y=>y(c)),r.size>=1},subscribe(f){return r.size||this.register(),o+=1,r.set(o,f),f(c),o},unsubscribe(f){r.delete(f),r.size||this.unregister()},unregister(){Object.keys(t).forEach(f=>{const y=t[f],l=this.matchHandlers[y];l==null||l.mql.removeListener(l==null?void 0:l.listener)}),r.clear()},register(){Object.keys(t).forEach(f=>{const y=t[f],l=E=>{let{matches:P}=E;this.dispatch(Object.assign(Object.assign({},c),{[f]:P}))},w=window.matchMedia(y);w.addListener(l),this.matchHandlers[y]={mql:w,listener:l},l(w)})},responsiveMap:t}},[e])}function uH(){const[,e]=T.useReducer(t=>t+1,0);return e}function OL(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;const t=T.useRef({}),r=uH(),o=RL();return zr(()=>{const c=o.subscribe(f=>{t.current=f,e&&r()});return()=>o.unsubscribe(c)},[]),t.current}function zL(e){var t=e.children,r=e.prefixCls,o=e.id,c=e.overlayInnerStyle,f=e.className,y=e.style;return T.createElement("div",{className:Tt("".concat(r,"-content"),f),style:y},T.createElement("div",{className:"".concat(r,"-inner"),id:o,role:"tooltip",style:c},typeof t=="function"?t():t))}var Dd={shiftX:64,adjustY:1},kd={adjustX:1,shiftY:!0},Ia=[0,0],dH={left:{points:["cr","cl"],overflow:kd,offset:[-4,0],targetOffset:Ia},right:{points:["cl","cr"],overflow:kd,offset:[4,0],targetOffset:Ia},top:{points:["bc","tc"],overflow:Dd,offset:[0,-4],targetOffset:Ia},bottom:{points:["tc","bc"],overflow:Dd,offset:[0,4],targetOffset:Ia},topLeft:{points:["bl","tl"],overflow:Dd,offset:[0,-4],targetOffset:Ia},leftTop:{points:["tr","tl"],overflow:kd,offset:[-4,0],targetOffset:Ia},topRight:{points:["br","tr"],overflow:Dd,offset:[0,-4],targetOffset:Ia},rightTop:{points:["tl","tr"],overflow:kd,offset:[4,0],targetOffset:Ia},bottomRight:{points:["tr","br"],overflow:Dd,offset:[0,4],targetOffset:Ia},rightBottom:{points:["bl","br"],overflow:kd,offset:[4,0],targetOffset:Ia},bottomLeft:{points:["tl","bl"],overflow:Dd,offset:[0,4],targetOffset:Ia},leftBottom:{points:["br","bl"],overflow:kd,offset:[-4,0],targetOffset:Ia}},hH=["overlayClassName","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle","prefixCls","children","onVisibleChange","afterVisibleChange","transitionName","animation","motion","placement","align","destroyTooltipOnHide","defaultVisible","getTooltipContainer","overlayInnerStyle","arrowContent","overlay","id","showArrow"],fH=function(t,r){var o=t.overlayClassName,c=t.trigger,f=c===void 0?["hover"]:c,y=t.mouseEnterDelay,l=y===void 0?0:y,w=t.mouseLeaveDelay,E=w===void 0?.1:w,P=t.overlayStyle,M=t.prefixCls,z=M===void 0?"rc-tooltip":M,F=t.children,k=t.onVisibleChange,U=t.afterVisibleChange,X=t.transitionName,$=t.animation,j=t.motion,V=t.placement,Z=V===void 0?"right":V,ee=t.align,ne=ee===void 0?{}:ee,Q=t.destroyTooltipOnHide,ie=Q===void 0?!1:Q,te=t.defaultVisible,ge=t.getTooltipContainer,ue=t.overlayInnerStyle;t.arrowContent;var oe=t.overlay,fe=t.id,Ee=t.showArrow,ke=Ee===void 0?!0:Ee,Le=Vr(t,hH),Ne=T.useRef(null);T.useImperativeHandle(r,function(){return Ne.current});var pe=st({},Le);"visible"in t&&(pe.popupVisible=t.visible);var He=function(){return T.createElement(zL,{key:"content",prefixCls:z,id:fe,overlayInnerStyle:ue},oe)};return T.createElement(mL,Sn({popupClassName:o,prefixCls:z,popup:He,action:f,builtinPlacements:dH,popupPlacement:Z,ref:Ne,popupAlign:ne,getPopupContainer:ge,onPopupVisibleChange:k,afterPopupVisibleChange:U,popupTransitionName:X,popupAnimation:$,popupMotion:j,defaultPopupVisible:te,autoDestroy:ie,mouseLeaveDelay:E,popupStyle:P,mouseEnterDelay:l,arrow:ke},pe),F)};const pH=T.forwardRef(fH),LL=8;function DL(e){const t=LL,{contentRadius:r,limitVerticalRadius:o}=e,c=r>12?r+2:12;return{dropdownArrowOffset:c,dropdownArrowOffsetVertical:o?t:c}}function Iv(e,t){return e?t:{}}function mH(e,t){const{componentCls:r,sizePopupArrow:o,borderRadiusXS:c,borderRadiusOuter:f,boxShadowPopoverArrow:y}=e,{colorBg:l,contentRadius:w=e.borderRadiusLG,limitVerticalRadius:E,arrowDistance:P=0,arrowPlacement:M={left:!0,right:!0,top:!0,bottom:!0}}=t,{dropdownArrowOffsetVertical:z,dropdownArrowOffset:F}=DL({contentRadius:w,limitVerticalRadius:E});return{[r]:Object.assign(Object.assign(Object.assign(Object.assign({[`${r}-arrow`]:[Object.assign(Object.assign({position:"absolute",zIndex:1,display:"block"},jN(o,c,f,l,y)),{"&:before":{background:l}})]},Iv(!!M.top,{[[`&-placement-top ${r}-arrow`,`&-placement-topLeft ${r}-arrow`,`&-placement-topRight ${r}-arrow`].join(",")]:{bottom:P,transform:"translateY(100%) rotate(180deg)"},[`&-placement-top ${r}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(100%) rotate(180deg)"},[`&-placement-topLeft ${r}-arrow`]:{left:{_skip_check_:!0,value:F}},[`&-placement-topRight ${r}-arrow`]:{right:{_skip_check_:!0,value:F}}})),Iv(!!M.bottom,{[[`&-placement-bottom ${r}-arrow`,`&-placement-bottomLeft ${r}-arrow`,`&-placement-bottomRight ${r}-arrow`].join(",")]:{top:P,transform:"translateY(-100%)"},[`&-placement-bottom ${r}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(-100%)"},[`&-placement-bottomLeft ${r}-arrow`]:{left:{_skip_check_:!0,value:F}},[`&-placement-bottomRight ${r}-arrow`]:{right:{_skip_check_:!0,value:F}}})),Iv(!!M.left,{[[`&-placement-left ${r}-arrow`,`&-placement-leftTop ${r}-arrow`,`&-placement-leftBottom ${r}-arrow`].join(",")]:{right:{_skip_check_:!0,value:P},transform:"translateX(100%) rotate(90deg)"},[`&-placement-left ${r}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(100%) rotate(90deg)"},[`&-placement-leftTop ${r}-arrow`]:{top:z},[`&-placement-leftBottom ${r}-arrow`]:{bottom:z}})),Iv(!!M.right,{[[`&-placement-right ${r}-arrow`,`&-placement-rightTop ${r}-arrow`,`&-placement-rightBottom ${r}-arrow`].join(",")]:{left:{_skip_check_:!0,value:P},transform:"translateX(-100%) rotate(-90deg)"},[`&-placement-right ${r}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(-100%) rotate(-90deg)"},[`&-placement-rightTop ${r}-arrow`]:{top:z},[`&-placement-rightBottom ${r}-arrow`]:{bottom:z}}))}}function gH(e,t,r,o){if(o===!1)return{adjustX:!1,adjustY:!1};const c=o&&typeof o=="object"?o:{},f={};switch(e){case"top":case"bottom":f.shiftX=t.dropdownArrowOffset*2+r,f.shiftY=!0,f.adjustY=!0;break;case"left":case"right":f.shiftY=t.dropdownArrowOffsetVertical*2+r,f.shiftX=!0,f.adjustX=!0;break}const y=Object.assign(Object.assign({},f),c);return y.shiftX||(y.adjustX=!0),y.shiftY||(y.adjustY=!0),y}const XM={left:{points:["cr","cl"]},right:{points:["cl","cr"]},top:{points:["bc","tc"]},bottom:{points:["tc","bc"]},topLeft:{points:["bl","tl"]},leftTop:{points:["tr","tl"]},topRight:{points:["br","tr"]},rightTop:{points:["tl","tr"]},bottomRight:{points:["tr","br"]},rightBottom:{points:["bl","br"]},bottomLeft:{points:["tl","bl"]},leftBottom:{points:["br","bl"]}},vH={topLeft:{points:["bl","tc"]},leftTop:{points:["tr","cl"]},topRight:{points:["br","tc"]},rightTop:{points:["tl","cr"]},bottomRight:{points:["tr","bc"]},rightBottom:{points:["bl","cr"]},bottomLeft:{points:["tl","bc"]},leftBottom:{points:["br","cl"]}},yH=new Set(["topLeft","topRight","bottomLeft","bottomRight","leftTop","leftBottom","rightTop","rightBottom"]);function _H(e){const{arrowWidth:t,autoAdjustOverflow:r,arrowPointAtCenter:o,offset:c,borderRadius:f,visibleFirst:y}=e,l=t/2,w={};return Object.keys(XM).forEach(E=>{const P=o&&vH[E]||XM[E],M=Object.assign(Object.assign({},P),{offset:[0,0],dynamicInset:!0});switch(w[E]=M,yH.has(E)&&(M.autoArrow=!1),E){case"top":case"topLeft":case"topRight":M.offset[1]=-l-c;break;case"bottom":case"bottomLeft":case"bottomRight":M.offset[1]=l+c;break;case"left":case"leftTop":case"leftBottom":M.offset[0]=-l-c;break;case"right":case"rightTop":case"rightBottom":M.offset[0]=l+c;break}const z=DL({contentRadius:f,limitVerticalRadius:!0});if(o)switch(E){case"topLeft":case"bottomLeft":M.offset[0]=-z.dropdownArrowOffset-l;break;case"topRight":case"bottomRight":M.offset[0]=z.dropdownArrowOffset+l;break;case"leftTop":case"rightTop":M.offset[1]=-z.dropdownArrowOffset-l;break;case"leftBottom":case"rightBottom":M.offset[1]=z.dropdownArrowOffset+l;break}M.overflow=gH(E,z,t,r),y&&(M.htmlRegion="visibleFirst")}),w}const xH=e=>{const{componentCls:t,tooltipMaxWidth:r,tooltipColor:o,tooltipBg:c,tooltipBorderRadius:f,zIndexPopup:y,controlHeight:l,boxShadowSecondary:w,paddingSM:E,paddingXS:P,tooltipRadiusOuter:M}=e;return[{[t]:Object.assign(Object.assign(Object.assign(Object.assign({},ja(e)),{position:"absolute",zIndex:y,display:"block",width:"max-content",maxWidth:r,visibility:"visible",transformOrigin:"var(--arrow-x, 50%) var(--arrow-y, 50%)","&-hidden":{display:"none"},"--antd-arrow-background-color":c,[`${t}-inner`]:{minWidth:l,minHeight:l,padding:`${E/2}px ${P}px`,color:o,textAlign:"start",textDecoration:"none",wordWrap:"break-word",backgroundColor:c,borderRadius:f,boxShadow:w,boxSizing:"border-box"},[["&-placement-left","&-placement-leftTop","&-placement-leftBottom","&-placement-right","&-placement-rightTop","&-placement-rightBottom"].join(",")]:{[`${t}-inner`]:{borderRadius:Math.min(f,LL)}},[`${t}-content`]:{position:"relative"}}),ZN(e,(z,F)=>{let{darkColor:k}=F;return{[`&${t}-${z}`]:{[`${t}-inner`]:{backgroundColor:k},[`${t}-arrow`]:{"--antd-arrow-background-color":k}}}})),{"&-rtl":{direction:"rtl"}})},mH(Lr(e,{borderRadiusOuter:M}),{colorBg:"var(--antd-arrow-background-color)",contentRadius:f,limitVerticalRadius:!0}),{[`${t}-pure`]:{position:"relative",maxWidth:"none",margin:e.sizePopupArrow}}]},kL=(e,t)=>ro("Tooltip",o=>{if(t===!1)return[];const{borderRadius:c,colorTextLightSolid:f,colorBgDefault:y,borderRadiusOuter:l}=o,w=Lr(o,{tooltipMaxWidth:250,tooltipColor:f,tooltipBorderRadius:c,tooltipBg:y,tooltipRadiusOuter:l>4?4:l});return[xH(w),pV(o,"zoom-big-fast")]},o=>{let{zIndexPopupBase:c,colorBgSpotlight:f}=o;return{zIndexPopup:c+70,colorBgDefault:f}},{resetStyle:!1})(e),bH=Ry.map(e=>`${e}-inverse`);function wH(e){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0)?[].concat(mn(bH),mn(Ry)).includes(e):Ry.includes(e)}function $L(e,t){const r=wH(t),o=Tt({[`${e}-${t}`]:t&&r}),c={},f={};return t&&!r&&(c.background=t,f["--antd-arrow-background-color"]=t),{className:o,overlayStyle:c,arrowStyle:f}}const SH=e=>{const{prefixCls:t,className:r,placement:o="top",title:c,color:f,overlayInnerStyle:y}=e,{getPrefixCls:l}=T.useContext(ur),w=l("tooltip",t),[E,P]=kL(w,!0),M=$L(w,f),z=M.arrowStyle,F=Object.assign(Object.assign({},y),M.overlayStyle),k=Tt(P,w,`${w}-pure`,`${w}-placement-${o}`,r,M.className);return E(T.createElement("div",{className:k,style:z},T.createElement("div",{className:`${w}-arrow`}),T.createElement(zL,Object.assign({},e,{className:P,prefixCls:w,overlayInnerStyle:F}),c)))},EH=SH;var CH=globalThis&&globalThis.__rest||function(e,t){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(e);c<o.length;c++)t.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(e,o[c])&&(r[o[c]]=e[o[c]]);return r};const FL=T.forwardRef((e,t)=>{var r,o;const{prefixCls:c,openClassName:f,getTooltipContainer:y,overlayClassName:l,color:w,overlayInnerStyle:E,children:P,afterOpenChange:M,afterVisibleChange:z,destroyTooltipOnHide:F,arrow:k=!0,title:U,overlay:X,builtinPlacements:$,arrowPointAtCenter:j=!1,autoAdjustOverflow:V=!0}=e,Z=!!k,[,ee]=Na(),{getPopupContainer:ne,getPrefixCls:Q,direction:ie}=T.useContext(ur),te=kS(),ge=T.useRef(null),ue=()=>{var Pt;(Pt=ge.current)===null||Pt===void 0||Pt.forceAlign()};T.useImperativeHandle(t,()=>({forceAlign:ue,forcePopupAlign:()=>{te.deprecated(!1,"forcePopupAlign","forceAlign"),ue()}}));const[oe,fe]=Bs(!1,{value:(r=e.open)!==null&&r!==void 0?r:e.visible,defaultValue:(o=e.defaultOpen)!==null&&o!==void 0?o:e.defaultVisible}),Ee=!U&&!X&&U!==0,ke=Pt=>{var sn,An;fe(Ee?!1:Pt),Ee||((sn=e.onOpenChange)===null||sn===void 0||sn.call(e,Pt),(An=e.onVisibleChange)===null||An===void 0||An.call(e,Pt))},Le=T.useMemo(()=>{var Pt,sn;let An=j;return typeof k=="object"&&(An=(sn=(Pt=k.pointAtCenter)!==null&&Pt!==void 0?Pt:k.arrowPointAtCenter)!==null&&sn!==void 0?sn:j),$||_H({arrowPointAtCenter:An,autoAdjustOverflow:V,arrowWidth:Z?ee.sizePopupArrow:0,borderRadius:ee.borderRadius,offset:ee.marginXXS,visibleFirst:!0})},[j,k,$,ee]),Ne=T.useMemo(()=>U===0?U:X||U||"",[X,U]),pe=T.createElement(rw,null,typeof Ne=="function"?Ne():Ne),{getPopupContainer:He,placement:Be="top",mouseEnterDelay:Ge=.1,mouseLeaveDelay:Qe=.1,overlayStyle:gt,rootClassName:St}=e,xt=CH(e,["getPopupContainer","placement","mouseEnterDelay","mouseLeaveDelay","overlayStyle","rootClassName"]),jt=Q("tooltip",c),Ut=Q(),bt=e["data-popover-inject"];let ut=oe;!("open"in e)&&!("visible"in e)&&Ee&&(ut=!1);const It=lm(P)&&!_z(P)?P:T.createElement("span",null,P),ft=It.props,yt=!ft.className||typeof ft.className=="string"?Tt(ft.className,f||`${jt}-open`):ft.className,[ct,Mt]=kL(jt,!bt),Ct=$L(jt,w),Qt=Ct.arrowStyle,Vt=Object.assign(Object.assign({},E),Ct.overlayStyle),Nt=Tt(l,{[`${jt}-rtl`]:ie==="rtl"},Ct.className,St,Mt),[ot,rt]=Jz("Tooltip",xt.zIndex),kt=T.createElement(pH,Object.assign({},xt,{zIndex:bt?xt.zIndex:ot,showArrow:Z,placement:Be,mouseEnterDelay:Ge,mouseLeaveDelay:Qe,prefixCls:jt,overlayClassName:Nt,overlayStyle:Object.assign(Object.assign({},Qt),gt),getTooltipContainer:He||y||ne,ref:ge,builtinPlacements:Le,overlay:pe,visible:ut,onVisibleChange:ke,afterVisibleChange:M??z,overlayInnerStyle:Vt,arrowContent:T.createElement("span",{className:`${jt}-arrow-content`}),motion:{motionName:Tz(Ut,"zoom-big-fast",e.transitionName),motionDeadline:1e3},destroyTooltipOnHide:!!F}),ut?yl(It,{className:yt}):It);return ct(T.createElement(Nz.Provider,{value:rt},kt))});FL._InternalPanelDoNotUseOrYouWillBeFired=EH;const xw=FL;var TH={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M765.7 486.8L314.9 134.7A7.97 7.97 0 00302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 000-50.4z"}}]},name:"right",theme:"outlined"};const IH=TH;var MH=function(t,r){return T.createElement(Xi,Sn({},t,{ref:r,icon:IH}))};const KM=T.forwardRef(MH);var PH={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 000 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"}}]},name:"left",theme:"outlined"};const AH=PH;var RH=function(t,r){return T.createElement(Xi,Sn({},t,{ref:r,icon:AH}))};const YM=T.forwardRef(RH),OH=e=>({"&::-moz-placeholder":{opacity:1},"&::placeholder":{color:e,userSelect:"none"},"&:placeholder-shown":{textOverflow:"ellipsis"}}),BL=e=>({borderColor:e.hoverBorderColor,backgroundColor:e.hoverBg}),bw=e=>({borderColor:e.activeBorderColor,boxShadow:e.activeShadow,outline:0,backgroundColor:e.activeBg}),NL=e=>({color:e.colorTextDisabled,backgroundColor:e.colorBgContainerDisabled,borderColor:e.colorBorder,boxShadow:"none",cursor:"not-allowed",opacity:1,"&:hover":Object.assign({},BL(Lr(e,{hoverBorderColor:e.colorBorder,hoverBg:e.colorBgContainerDisabled})))}),jL=e=>{const{paddingBlockLG:t,fontSizeLG:r,lineHeightLG:o,borderRadiusLG:c,paddingInlineLG:f}=e;return{padding:`${t}px ${f}px`,fontSize:r,lineHeight:o,borderRadius:c}},lE=e=>({padding:`${e.paddingBlockSM}px ${e.paddingInlineSM}px`,borderRadius:e.borderRadiusSM}),UL=(e,t)=>{const{componentCls:r,colorError:o,colorWarning:c,errorActiveShadow:f,warningActiveShadow:y,colorErrorBorderHover:l,colorWarningBorderHover:w}=e;return{[`&-status-error:not(${t}-disabled):not(${t}-borderless)${t}`]:{borderColor:o,"&:hover":{borderColor:l},"&:focus, &:focus-within":Object.assign({},bw(Lr(e,{activeBorderColor:o,activeShadow:f}))),[`${r}-prefix, ${r}-suffix`]:{color:o}},[`&-status-warning:not(${t}-disabled):not(${t}-borderless)${t}`]:{borderColor:c,"&:hover":{borderColor:w},"&:focus, &:focus-within":Object.assign({},bw(Lr(e,{activeBorderColor:c,activeShadow:y}))),[`${r}-prefix, ${r}-suffix`]:{color:c}}}},cE=e=>Object.assign(Object.assign({position:"relative",display:"inline-block",width:"100%",minWidth:0,padding:`${e.paddingBlock}px ${e.paddingInline}px`,color:e.colorText,fontSize:e.fontSize,lineHeight:e.lineHeight,backgroundColor:e.colorBgContainer,backgroundImage:"none",borderWidth:e.lineWidth,borderStyle:e.lineType,borderColor:e.colorBorder,borderRadius:e.borderRadius,transition:`all ${e.motionDurationMid}`},OH(e.colorTextPlaceholder)),{"&:hover":Object.assign({},BL(e)),"&:focus, &:focus-within":Object.assign({},bw(e)),"&-disabled, &[disabled]":Object.assign({},NL(e)),"&-borderless":{"&, &:hover, &:focus, &-focused, &-disabled, &[disabled]":{backgroundColor:"transparent",border:"none",boxShadow:"none"}},"textarea&":{maxWidth:"100%",height:"auto",minHeight:e.controlHeight,lineHeight:e.lineHeight,verticalAlign:"bottom",transition:`all ${e.motionDurationSlow}, height 0s`,resize:"vertical"},"&-lg":Object.assign({},jL(e)),"&-sm":Object.assign({},lE(e)),"&-rtl":{direction:"rtl"},"&-textarea-rtl":{direction:"rtl"}}),zH=e=>{const{componentCls:t,antCls:r}=e;return{position:"relative",display:"table",width:"100%",borderCollapse:"separate",borderSpacing:0,"&[class*='col-']":{paddingInlineEnd:e.paddingXS,"&:last-child":{paddingInlineEnd:0}},[`&-lg ${t}, &-lg > ${t}-group-addon`]:Object.assign({},jL(e)),[`&-sm ${t}, &-sm > ${t}-group-addon`]:Object.assign({},lE(e)),[`&-lg ${r}-select-single ${r}-select-selector`]:{height:e.controlHeightLG},[`&-sm ${r}-select-single ${r}-select-selector`]:{height:e.controlHeightSM},[`> ${t}`]:{display:"table-cell","&:not(:first-child):not(:last-child)":{borderRadius:0}},[`${t}-group`]:{"&-addon, &-wrap":{display:"table-cell",width:1,whiteSpace:"nowrap",verticalAlign:"middle","&:not(:first-child):not(:last-child)":{borderRadius:0}},"&-wrap > *":{display:"block !important"},"&-addon":{position:"relative",padding:`0 ${e.paddingInline}px`,color:e.colorText,fontWeight:"normal",fontSize:e.fontSize,textAlign:"center",backgroundColor:e.addonBg,border:`${e.lineWidth}px ${e.lineType} ${e.colorBorder}`,borderRadius:e.borderRadius,transition:`all ${e.motionDurationSlow}`,lineHeight:1,[`${r}-select`]:{margin:`-${e.paddingBlock+1}px -${e.paddingInline}px`,[`&${r}-select-single:not(${r}-select-customize-input):not(${r}-pagination-size-changer)`]:{[`${r}-select-selector`]:{backgroundColor:"inherit",border:`${e.lineWidth}px ${e.lineType} transparent`,boxShadow:"none"}},"&-open, &-focused":{[`${r}-select-selector`]:{color:e.colorPrimary}}},[`${r}-cascader-picker`]:{margin:`-9px -${e.paddingInline}px`,backgroundColor:"transparent",[`${r}-cascader-input`]:{textAlign:"start",border:0,boxShadow:"none"}}},"&-addon:first-child":{borderInlineEnd:0},"&-addon:last-child":{borderInlineStart:0}},[`${t}`]:{width:"100%",marginBottom:0,textAlign:"inherit","&:focus":{zIndex:1,borderInlineEndWidth:1},"&:hover":{zIndex:1,borderInlineEndWidth:1,[`${t}-search-with-button &`]:{zIndex:0}}},[`> ${t}:first-child, ${t}-group-addon:first-child`]:{borderStartEndRadius:0,borderEndEndRadius:0,[`${r}-select ${r}-select-selector`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`> ${t}-affix-wrapper`]:{[`&:not(:first-child) ${t}`]:{borderStartStartRadius:0,borderEndStartRadius:0},[`&:not(:last-child) ${t}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`> ${t}:last-child, ${t}-group-addon:last-child`]:{borderStartStartRadius:0,borderEndStartRadius:0,[`${r}-select ${r}-select-selector`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`${t}-affix-wrapper`]:{"&:not(:last-child)":{borderStartEndRadius:0,borderEndEndRadius:0,[`${t}-search &`]:{borderStartStartRadius:e.borderRadius,borderEndStartRadius:e.borderRadius}},[`&:not(:first-child), ${t}-search &:not(:first-child)`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`&${t}-group-compact`]:Object.assign(Object.assign({display:"block"},UN()),{[`${t}-group-addon, ${t}-group-wrap, > ${t}`]:{"&:not(:first-child):not(:last-child)":{borderInlineEndWidth:e.lineWidth,"&:hover":{zIndex:1},"&:focus":{zIndex:1}}},"& > *":{display:"inline-block",float:"none",verticalAlign:"top",borderRadius:0},[`
        & > ${t}-affix-wrapper,
        & > ${t}-number-affix-wrapper,
        & > ${r}-picker-range
      `]:{display:"inline-flex"},"& > *:not(:last-child)":{marginInlineEnd:-e.lineWidth,borderInlineEndWidth:e.lineWidth},[`${t}`]:{float:"none"},[`& > ${r}-select > ${r}-select-selector,
      & > ${r}-select-auto-complete ${t},
      & > ${r}-cascader-picker ${t},
      & > ${t}-group-wrapper ${t}`]:{borderInlineEndWidth:e.lineWidth,borderRadius:0,"&:hover":{zIndex:1},"&:focus":{zIndex:1}},[`& > ${r}-select-focused`]:{zIndex:1},[`& > ${r}-select > ${r}-select-arrow`]:{zIndex:1},[`& > *:first-child,
      & > ${r}-select:first-child > ${r}-select-selector,
      & > ${r}-select-auto-complete:first-child ${t},
      & > ${r}-cascader-picker:first-child ${t}`]:{borderStartStartRadius:e.borderRadius,borderEndStartRadius:e.borderRadius},[`& > *:last-child,
      & > ${r}-select:last-child > ${r}-select-selector,
      & > ${r}-cascader-picker:last-child ${t},
      & > ${r}-cascader-picker-focused:last-child ${t}`]:{borderInlineEndWidth:e.lineWidth,borderStartEndRadius:e.borderRadius,borderEndEndRadius:e.borderRadius},[`& > ${r}-select-auto-complete ${t}`]:{verticalAlign:"top"},[`${t}-group-wrapper + ${t}-group-wrapper`]:{marginInlineStart:-e.lineWidth,[`${t}-affix-wrapper`]:{borderRadius:0}},[`${t}-group-wrapper:not(:last-child)`]:{[`&${t}-search > ${t}-group`]:{[`& > ${t}-group-addon > ${t}-search-button`]:{borderRadius:0},[`& > ${t}`]:{borderStartStartRadius:e.borderRadius,borderStartEndRadius:0,borderEndEndRadius:0,borderEndStartRadius:e.borderRadius}}}})}},LH=e=>{const{componentCls:t,controlHeightSM:r,lineWidth:o}=e,c=16,f=(r-o*2-c)/2;return{[t]:Object.assign(Object.assign(Object.assign(Object.assign({},ja(e)),cE(e)),UL(e,t)),{'&[type="color"]':{height:e.controlHeight,[`&${t}-lg`]:{height:e.controlHeightLG},[`&${t}-sm`]:{height:r,paddingTop:f,paddingBottom:f}},'&[type="search"]::-webkit-search-cancel-button, &[type="search"]::-webkit-search-decoration':{"-webkit-appearance":"none"}})}},DH=e=>{const{componentCls:t}=e;return{[`${t}-clear-icon`]:{margin:0,color:e.colorTextQuaternary,fontSize:e.fontSizeIcon,verticalAlign:-1,cursor:"pointer",transition:`color ${e.motionDurationSlow}`,"&:hover":{color:e.colorTextTertiary},"&:active":{color:e.colorText},"&-hidden":{visibility:"hidden"},"&-has-suffix":{margin:`0 ${e.inputAffixPadding}px`}}}},kH=e=>{const{componentCls:t,inputAffixPadding:r,colorTextDescription:o,motionDurationSlow:c,colorIcon:f,colorIconHover:y,iconCls:l}=e;return{[`${t}-affix-wrapper`]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},cE(e)),{display:"inline-flex",[`&:not(${t}-affix-wrapper-disabled):hover`]:{zIndex:1,[`${t}-search-with-button &`]:{zIndex:0}},"&-focused, &:focus":{zIndex:1},"&-disabled":{[`${t}[disabled]`]:{background:"transparent"}},[`> input${t}`]:{padding:0,fontSize:"inherit",border:"none",borderRadius:0,outline:"none","&::-ms-reveal":{display:"none"},"&:focus":{boxShadow:"none !important"}},"&::before":{display:"inline-block",width:0,visibility:"hidden",content:'"\\a0"'},[`${t}`]:{"&-prefix, &-suffix":{display:"flex",flex:"none",alignItems:"center","> *:not(:last-child)":{marginInlineEnd:e.paddingXS}},"&-show-count-suffix":{color:o},"&-show-count-has-suffix":{marginInlineEnd:e.paddingXXS},"&-prefix":{marginInlineEnd:r},"&-suffix":{marginInlineStart:r}}}),DH(e)),{[`${l}${t}-password-icon`]:{color:f,cursor:"pointer",transition:`all ${c}`,"&:hover":{color:y}}}),UL(e,`${t}-affix-wrapper`))}},$H=e=>{const{componentCls:t,colorError:r,colorWarning:o,borderRadiusLG:c,borderRadiusSM:f}=e;return{[`${t}-group`]:Object.assign(Object.assign(Object.assign({},ja(e)),zH(e)),{"&-rtl":{direction:"rtl"},"&-wrapper":{display:"inline-block",width:"100%",textAlign:"start",verticalAlign:"top","&-rtl":{direction:"rtl"},"&-lg":{[`${t}-group-addon`]:{borderRadius:c,fontSize:e.fontSizeLG}},"&-sm":{[`${t}-group-addon`]:{borderRadius:f}},"&-status-error":{[`${t}-group-addon`]:{color:r,borderColor:r}},"&-status-warning":{[`${t}-group-addon`]:{color:o,borderColor:o}},"&-disabled":{[`${t}-group-addon`]:Object.assign({},NL(e))},[`&:not(${t}-compact-first-item):not(${t}-compact-last-item)${t}-compact-item`]:{[`${t}, ${t}-group-addon`]:{borderRadius:0}},[`&:not(${t}-compact-last-item)${t}-compact-first-item`]:{[`${t}, ${t}-group-addon`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&:not(${t}-compact-first-item)${t}-compact-last-item`]:{[`${t}, ${t}-group-addon`]:{borderStartStartRadius:0,borderEndStartRadius:0}}}})}},FH=e=>{const{componentCls:t,antCls:r}=e,o=`${t}-search`;return{[o]:{[`${t}`]:{"&:hover, &:focus":{borderColor:e.colorPrimaryHover,[`+ ${t}-group-addon ${o}-button:not(${r}-btn-primary)`]:{borderInlineStartColor:e.colorPrimaryHover}}},[`${t}-affix-wrapper`]:{borderRadius:0},[`${t}-lg`]:{lineHeight:e.lineHeightLG-2e-4},[`> ${t}-group`]:{[`> ${t}-group-addon:last-child`]:{insetInlineStart:-1,padding:0,border:0,[`${o}-button`]:{paddingTop:0,paddingBottom:0,borderStartStartRadius:0,borderStartEndRadius:e.borderRadius,borderEndEndRadius:e.borderRadius,borderEndStartRadius:0,boxShadow:"none"},[`${o}-button:not(${r}-btn-primary)`]:{color:e.colorTextDescription,"&:hover":{color:e.colorPrimaryHover},"&:active":{color:e.colorPrimaryActive},[`&${r}-btn-loading::before`]:{insetInlineStart:0,insetInlineEnd:0,insetBlockStart:0,insetBlockEnd:0}}}},[`${o}-button`]:{height:e.controlHeight,"&:hover, &:focus":{zIndex:1}},[`&-large ${o}-button`]:{height:e.controlHeightLG},[`&-small ${o}-button`]:{height:e.controlHeightSM},"&-rtl":{direction:"rtl"},[`&${t}-compact-item`]:{[`&:not(${t}-compact-last-item)`]:{[`${t}-group-addon`]:{[`${t}-search-button`]:{marginInlineEnd:-e.lineWidth,borderRadius:0}}},[`&:not(${t}-compact-first-item)`]:{[`${t},${t}-affix-wrapper`]:{borderRadius:0}},[`> ${t}-group-addon ${t}-search-button,
        > ${t},
        ${t}-affix-wrapper`]:{"&:hover,&:focus,&:active":{zIndex:2}},[`> ${t}-affix-wrapper-focused`]:{zIndex:2}}}}},BH=e=>{const{componentCls:t,paddingLG:r}=e,o=`${t}-textarea`;return{[o]:{position:"relative","&-show-count":{[`> ${t}`]:{height:"100%"},[`${t}-data-count`]:{position:"absolute",bottom:-e.fontSize*e.lineHeight,insetInlineEnd:0,color:e.colorTextDescription,whiteSpace:"nowrap",pointerEvents:"none"}},"&-allow-clear":{[`> ${t}`]:{paddingInlineEnd:r}},[`&-affix-wrapper${o}-has-feedback`]:{[`${t}`]:{paddingInlineEnd:r}},[`&-affix-wrapper${t}-affix-wrapper`]:{padding:0,[`> textarea${t}`]:{fontSize:"inherit",border:"none",outline:"none","&:focus":{boxShadow:"none !important"}},[`${t}-suffix`]:{margin:0,"> *:not(:last-child)":{marginInline:0},[`${t}-clear-icon`]:{position:"absolute",insetInlineEnd:e.paddingXS,insetBlockStart:e.paddingXS},[`${o}-suffix`]:{position:"absolute",top:0,insetInlineEnd:e.paddingInline,bottom:0,zIndex:1,display:"inline-flex",alignItems:"center",margin:"auto",pointerEvents:"none"}}}}}},NH=e=>{const{componentCls:t}=e;return{[`${t}-out-of-range`]:{[`&, & input, & textarea, ${t}-show-count-suffix, ${t}-data-count`]:{color:e.colorError}}}};function VL(e){return Lr(e,{inputAffixPadding:e.paddingXXS})}const HL=e=>{const{controlHeight:t,fontSize:r,lineHeight:o,lineWidth:c,controlHeightSM:f,controlHeightLG:y,fontSizeLG:l,lineHeightLG:w,paddingSM:E,controlPaddingHorizontalSM:P,controlPaddingHorizontal:M,colorFillAlter:z,colorPrimaryHover:F,colorPrimary:k,controlOutlineWidth:U,controlOutline:X,colorErrorOutline:$,colorWarningOutline:j}=e;return{paddingBlock:Math.max(Math.round((t-r*o)/2*10)/10-c,0),paddingBlockSM:Math.max(Math.round((f-r*o)/2*10)/10-c,0),paddingBlockLG:Math.ceil((y-l*w)/2*10)/10-c,paddingInline:E-c,paddingInlineSM:P-c,paddingInlineLG:M-c,addonBg:z,activeBorderColor:k,hoverBorderColor:F,activeShadow:`0 0 0 ${U}px ${X}`,errorActiveShadow:`0 0 0 ${U}px ${$}`,warningActiveShadow:`0 0 0 ${U}px ${j}`,hoverBg:"",activeBg:""}},uE=ro("Input",e=>{const t=Lr(e,VL(e));return[LH(t),BH(t),kH(t),$H(t),FH(t),NH(t),YS(t)]},HL);function jH(e,t,r){var o=r||{},c=o.noTrailing,f=c===void 0?!1:c,y=o.noLeading,l=y===void 0?!1:y,w=o.debounceMode,E=w===void 0?void 0:w,P,M=!1,z=0;function F(){P&&clearTimeout(P)}function k(X){var $=X||{},j=$.upcomingOnly,V=j===void 0?!1:j;F(),M=!V}function U(){for(var X=arguments.length,$=new Array(X),j=0;j<X;j++)$[j]=arguments[j];var V=this,Z=Date.now()-z;if(M)return;function ee(){z=Date.now(),t.apply(V,$)}function ne(){P=void 0}!l&&E&&!P&&ee(),F(),E===void 0&&Z>e?l?(z=Date.now(),f||(P=setTimeout(E?ne:ee,e))):ee():f!==!0&&(P=setTimeout(E?ne:ee,E===void 0?e-Z:e))}return U.cancel=k,U}function UH(e,t,r){var o=r||{},c=o.atBegin,f=c===void 0?!1:c;return jH(e,t,{debounceMode:f!==!1})}const VH=T.createContext({}),GL=VH,HH=e=>{const{componentCls:t}=e;return{[t]:{display:"flex",flexFlow:"row wrap",minWidth:0,"&::before, &::after":{display:"flex"},"&-no-wrap":{flexWrap:"nowrap"},"&-start":{justifyContent:"flex-start"},"&-center":{justifyContent:"center"},"&-end":{justifyContent:"flex-end"},"&-space-between":{justifyContent:"space-between"},"&-space-around":{justifyContent:"space-around"},"&-space-evenly":{justifyContent:"space-evenly"},"&-top":{alignItems:"flex-start"},"&-middle":{alignItems:"center"},"&-bottom":{alignItems:"flex-end"}}}},GH=e=>{const{componentCls:t}=e;return{[t]:{position:"relative",maxWidth:"100%",minHeight:1}}},WH=(e,t)=>{const{componentCls:r,gridColumns:o}=e,c={};for(let f=o;f>=0;f--)f===0?(c[`${r}${t}-${f}`]={display:"none"},c[`${r}-push-${f}`]={insetInlineStart:"auto"},c[`${r}-pull-${f}`]={insetInlineEnd:"auto"},c[`${r}${t}-push-${f}`]={insetInlineStart:"auto"},c[`${r}${t}-pull-${f}`]={insetInlineEnd:"auto"},c[`${r}${t}-offset-${f}`]={marginInlineStart:0},c[`${r}${t}-order-${f}`]={order:0}):(c[`${r}${t}-${f}`]=[{"--ant-display":"block",display:"block"},{display:"var(--ant-display)",flex:`0 0 ${f/o*100}%`,maxWidth:`${f/o*100}%`}],c[`${r}${t}-push-${f}`]={insetInlineStart:`${f/o*100}%`},c[`${r}${t}-pull-${f}`]={insetInlineEnd:`${f/o*100}%`},c[`${r}${t}-offset-${f}`]={marginInlineStart:`${f/o*100}%`},c[`${r}${t}-order-${f}`]={order:f});return c},ww=(e,t)=>WH(e,t),qH=(e,t,r)=>({[`@media (min-width: ${t}px)`]:Object.assign({},ww(e,r))}),ZH=ro("Grid",e=>[HH(e)]),XH=ro("Grid",e=>{const t=Lr(e,{gridColumns:24}),r={"-sm":t.screenSMMin,"-md":t.screenMDMin,"-lg":t.screenLGMin,"-xl":t.screenXLMin,"-xxl":t.screenXXLMin};return[GH(t),ww(t,""),ww(t,"-xs"),Object.keys(r).map(o=>qH(t,r[o],o)).reduce((o,c)=>Object.assign(Object.assign({},o),c),{})]});var KH=globalThis&&globalThis.__rest||function(e,t){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(e);c<o.length;c++)t.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(e,o[c])&&(r[o[c]]=e[o[c]]);return r};function YH(e){return typeof e=="number"?`${e} ${e} auto`:/^\d+(\.\d+)?(px|em|rem|%)$/.test(e)?`0 0 ${e}`:e}const JH=["xs","sm","md","lg","xl","xxl"],QH=T.forwardRef((e,t)=>{const{getPrefixCls:r,direction:o}=T.useContext(ur),{gutter:c,wrap:f}=T.useContext(GL),{prefixCls:y,span:l,order:w,offset:E,push:P,pull:M,className:z,children:F,flex:k,style:U}=e,X=KH(e,["prefixCls","span","order","offset","push","pull","className","children","flex","style"]),$=r("col",y),[j,V]=XH($);let Z={};JH.forEach(Q=>{let ie={};const te=e[Q];typeof te=="number"?ie.span=te:typeof te=="object"&&(ie=te||{}),delete X[Q],Z=Object.assign(Object.assign({},Z),{[`${$}-${Q}-${ie.span}`]:ie.span!==void 0,[`${$}-${Q}-order-${ie.order}`]:ie.order||ie.order===0,[`${$}-${Q}-offset-${ie.offset}`]:ie.offset||ie.offset===0,[`${$}-${Q}-push-${ie.push}`]:ie.push||ie.push===0,[`${$}-${Q}-pull-${ie.pull}`]:ie.pull||ie.pull===0,[`${$}-${Q}-flex-${ie.flex}`]:ie.flex||ie.flex==="auto",[`${$}-rtl`]:o==="rtl"})});const ee=Tt($,{[`${$}-${l}`]:l!==void 0,[`${$}-order-${w}`]:w,[`${$}-offset-${E}`]:E,[`${$}-push-${P}`]:P,[`${$}-pull-${M}`]:M},z,Z,V),ne={};if(c&&c[0]>0){const Q=c[0]/2;ne.paddingLeft=Q,ne.paddingRight=Q}return k&&(ne.flex=YH(k),f===!1&&!ne.minWidth&&(ne.minWidth=0)),j(T.createElement("div",Object.assign({},X,{style:Object.assign(Object.assign({},ne),U),className:ee,ref:t}),F))}),eG=QH;var tG=globalThis&&globalThis.__rest||function(e,t){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(e);c<o.length;c++)t.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(e,o[c])&&(r[o[c]]=e[o[c]]);return r};function JM(e,t){const[r,o]=T.useState(typeof e=="string"?e:""),c=()=>{if(typeof e=="string"&&o(e),typeof e=="object")for(let f=0;f<Iu.length;f++){const y=Iu[f];if(!t[y])continue;const l=e[y];if(l!==void 0){o(l);return}}};return T.useEffect(()=>{c()},[JSON.stringify(e),t]),r}const nG=T.forwardRef((e,t)=>{const{prefixCls:r,justify:o,align:c,className:f,style:y,children:l,gutter:w=0,wrap:E}=e,P=tG(e,["prefixCls","justify","align","className","style","children","gutter","wrap"]),{getPrefixCls:M,direction:z}=T.useContext(ur),[F,k]=T.useState({xs:!0,sm:!0,md:!0,lg:!0,xl:!0,xxl:!0}),[U,X]=T.useState({xs:!1,sm:!1,md:!1,lg:!1,xl:!1,xxl:!1}),$=JM(c,U),j=JM(o,U),V=T.useRef(w),Z=RL();T.useEffect(()=>{const Le=Z.subscribe(Ne=>{X(Ne);const pe=V.current||0;(!Array.isArray(pe)&&typeof pe=="object"||Array.isArray(pe)&&(typeof pe[0]=="object"||typeof pe[1]=="object"))&&k(Ne)});return()=>Z.unsubscribe(Le)},[]);const ee=()=>{const Le=[void 0,void 0];return(Array.isArray(w)?w:[w,void 0]).forEach((pe,He)=>{if(typeof pe=="object")for(let Be=0;Be<Iu.length;Be++){const Ge=Iu[Be];if(F[Ge]&&pe[Ge]!==void 0){Le[He]=pe[Ge];break}}else Le[He]=pe}),Le},ne=M("row",r),[Q,ie]=ZH(ne),te=ee(),ge=Tt(ne,{[`${ne}-no-wrap`]:E===!1,[`${ne}-${j}`]:j,[`${ne}-${$}`]:$,[`${ne}-rtl`]:z==="rtl"},f,ie),ue={},oe=te[0]!=null&&te[0]>0?te[0]/-2:void 0;oe&&(ue.marginLeft=oe,ue.marginRight=oe),[,ue.rowGap]=te;const[fe,Ee]=te,ke=T.useMemo(()=>({gutter:[fe,Ee],wrap:E}),[fe,Ee,E]);return Q(T.createElement(GL.Provider,{value:ke},T.createElement("div",Object.assign({},P,{className:ge,style:Object.assign(Object.assign({},ue),y),ref:t}),l)))}),rG=nG;function $d(e){return!!(e.addonBefore||e.addonAfter)}function w1(e){return!!(e.prefix||e.suffix||e.allowClear)}function Ny(e,t,r,o){if(r){var c=t;if(t.type==="click"){var f=e.cloneNode(!0);c=Object.create(t,{target:{value:f},currentTarget:{value:f}}),f.value="",r(c);return}if(o!==void 0){c=Object.create(t,{target:{value:e},currentTarget:{value:e}}),e.type!=="file"&&(e.value=o),r(c);return}r(c)}}function iG(e,t){if(e){e.focus(t);var r=t||{},o=r.cursor;if(o){var c=e.value.length;switch(o){case"start":e.setSelectionRange(0,0);break;case"end":e.setSelectionRange(c,c);break;default:e.setSelectionRange(0,c)}}}}var WL=function(t){var r,o,c=t.inputElement,f=t.prefixCls,y=t.prefix,l=t.suffix,w=t.addonBefore,E=t.addonAfter,P=t.className,M=t.style,z=t.disabled,F=t.readOnly,k=t.focused,U=t.triggerFocus,X=t.allowClear,$=t.value,j=t.handleReset,V=t.hidden,Z=t.classes,ee=t.classNames,ne=t.dataAttrs,Q=t.styles,ie=t.components,te=(ie==null?void 0:ie.affixWrapper)||"span",ge=(ie==null?void 0:ie.groupWrapper)||"span",ue=(ie==null?void 0:ie.wrapper)||"span",oe=(ie==null?void 0:ie.groupAddon)||"span",fe=T.useRef(null),Ee=function(jt){var Ut;(Ut=fe.current)!==null&&Ut!==void 0&&Ut.contains(jt.target)&&(U==null||U())},ke=function(){var jt;if(!X)return null;var Ut=!z&&!F&&$,bt="".concat(f,"-clear-icon"),ut=Zn(X)==="object"&&X!==null&&X!==void 0&&X.clearIcon?X.clearIcon:"";return lt.createElement("span",{onClick:j,onMouseDown:function(ft){return ft.preventDefault()},className:Tt(bt,(jt={},Fe(jt,"".concat(bt,"-hidden"),!Ut),Fe(jt,"".concat(bt,"-has-suffix"),!!l),jt)),role:"button",tabIndex:-1},ut)},Le=T.cloneElement(c,{value:$,hidden:V,className:Tt((r=c.props)===null||r===void 0?void 0:r.className,!w1(t)&&!$d(t)&&P)||null,style:st(st({},(o=c.props)===null||o===void 0?void 0:o.style),!w1(t)&&!$d(t)?M:{})});if(w1(t)){var Ne,pe="".concat(f,"-affix-wrapper"),He=Tt(pe,(Ne={},Fe(Ne,"".concat(pe,"-disabled"),z),Fe(Ne,"".concat(pe,"-focused"),k),Fe(Ne,"".concat(pe,"-readonly"),F),Fe(Ne,"".concat(pe,"-input-with-clear-btn"),l&&X&&$),Ne),!$d(t)&&P,Z==null?void 0:Z.affixWrapper,ee==null?void 0:ee.affixWrapper),Be=(l||X)&&lt.createElement("span",{className:Tt("".concat(f,"-suffix"),ee==null?void 0:ee.suffix),style:Q==null?void 0:Q.suffix},ke(),l);Le=lt.createElement(te,Sn({className:He,style:st(st({},$d(t)?void 0:M),Q==null?void 0:Q.affixWrapper),hidden:!$d(t)&&V,onClick:Ee},ne==null?void 0:ne.affixWrapper,{ref:fe}),y&&lt.createElement("span",{className:Tt("".concat(f,"-prefix"),ee==null?void 0:ee.prefix),style:Q==null?void 0:Q.prefix},y),T.cloneElement(c,{value:$,hidden:null}),Be)}if($d(t)){var Ge="".concat(f,"-group"),Qe="".concat(Ge,"-addon"),gt=Tt("".concat(f,"-wrapper"),Ge,Z==null?void 0:Z.wrapper),St=Tt("".concat(f,"-group-wrapper"),P,Z==null?void 0:Z.group);return lt.createElement(ge,{className:St,style:M,hidden:V},lt.createElement(ue,{className:gt},w&&lt.createElement(oe,{className:Qe},w),T.cloneElement(Le,{hidden:null}),E&&lt.createElement(oe,{className:Qe},E)))}return Le},oG=["show"];function qL(e,t){return T.useMemo(function(){var r={};t&&(r.show=Zn(t)==="object"&&t.formatter?t.formatter:!!t),r=st(st({},r),e);var o=r,c=o.show,f=Vr(o,oG);return st(st({},f),{},{show:!!c,showFormatter:typeof c=="function"?c:void 0,strategy:f.strategy||function(y){return y.length}})},[e,t])}var aG=["autoComplete","onChange","onFocus","onBlur","onPressEnter","onKeyDown","prefixCls","disabled","htmlSize","className","maxLength","suffix","showCount","count","type","classes","classNames","styles","onCompositionStart","onCompositionEnd"],sG=T.forwardRef(function(e,t){var r=e.autoComplete,o=e.onChange,c=e.onFocus,f=e.onBlur,y=e.onPressEnter,l=e.onKeyDown,w=e.prefixCls,E=w===void 0?"rc-input":w,P=e.disabled,M=e.htmlSize,z=e.className,F=e.maxLength,k=e.suffix,U=e.showCount,X=e.count,$=e.type,j=$===void 0?"text":$,V=e.classes,Z=e.classNames,ee=e.styles,ne=e.onCompositionStart,Q=e.onCompositionEnd,ie=Vr(e,aG),te=T.useState(!1),ge=Bt(te,2),ue=ge[0],oe=ge[1],fe=lt.useRef(!1),Ee=T.useRef(null),ke=function(rt){Ee.current&&iG(Ee.current,rt)},Le=Bs(e.defaultValue,{value:e.value}),Ne=Bt(Le,2),pe=Ne[0],He=Ne[1],Be=pe==null?"":String(pe),Ge=lt.useState(null),Qe=Bt(Ge,2),gt=Qe[0],St=Qe[1],xt=qL(X,U),jt=xt.max||F,Ut=xt.strategy(Be),bt=!!jt&&Ut>jt;T.useImperativeHandle(t,function(){return{focus:ke,blur:function(){var rt;(rt=Ee.current)===null||rt===void 0||rt.blur()},setSelectionRange:function(rt,kt,Pt){var sn;(sn=Ee.current)===null||sn===void 0||sn.setSelectionRange(rt,kt,Pt)},select:function(){var rt;(rt=Ee.current)===null||rt===void 0||rt.select()},input:Ee.current}}),T.useEffect(function(){oe(function(ot){return ot&&P?!1:ot})},[P]);var ut=function(rt,kt){var Pt=kt;if(!fe.current&&xt.exceedFormatter&&xt.max&&xt.strategy(kt)>xt.max&&(Pt=xt.exceedFormatter(kt,{max:xt.max}),kt!==Pt)){var sn,An;St([((sn=Ee.current)===null||sn===void 0?void 0:sn.selectionStart)||0,((An=Ee.current)===null||An===void 0?void 0:An.selectionEnd)||0])}He(Pt),Ee.current&&Ny(Ee.current,rt,o,Pt)};lt.useEffect(function(){if(gt){var ot;(ot=Ee.current)===null||ot===void 0||ot.setSelectionRange.apply(ot,mn(gt))}},[gt]);var It=function(rt){ut(rt,rt.target.value)},ft=function(rt){fe.current=!1,ut(rt,rt.currentTarget.value),Q==null||Q(rt)},yt=function(rt){y&&rt.key==="Enter"&&y(rt),l==null||l(rt)},ct=function(rt){oe(!0),c==null||c(rt)},Mt=function(rt){oe(!1),f==null||f(rt)},Ct=function(rt){He(""),ke(),Ee.current&&Ny(Ee.current,rt,o)},Qt=bt&&"".concat(E,"-out-of-range"),Vt=function(){var rt=wl(e,["prefixCls","onPressEnter","addonBefore","addonAfter","prefix","suffix","allowClear","defaultValue","showCount","count","classes","htmlSize","styles","classNames"]);return lt.createElement("input",Sn({autoComplete:r},rt,{onChange:It,onFocus:ct,onBlur:Mt,onKeyDown:yt,className:Tt(E,Fe({},"".concat(E,"-disabled"),P),Z==null?void 0:Z.input),style:ee==null?void 0:ee.input,ref:Ee,size:M,type:j,onCompositionStart:function(Pt){fe.current=!0,ne==null||ne(Pt)},onCompositionEnd:ft}))},Nt=function(){var rt=Number(jt)>0;if(k||xt.show){var kt=xt.showFormatter?xt.showFormatter({value:Be,count:Ut,maxLength:jt}):"".concat(Ut).concat(rt?" / ".concat(jt):"");return lt.createElement(lt.Fragment,null,xt.show&&lt.createElement("span",{className:Tt("".concat(E,"-show-count-suffix"),Fe({},"".concat(E,"-show-count-has-suffix"),!!k),Z==null?void 0:Z.count),style:st({},ee==null?void 0:ee.count)},kt),k)}return null};return lt.createElement(WL,Sn({},ie,{prefixCls:E,className:Tt(z,Qt),inputElement:Vt(),handleReset:Ct,value:Be,focused:ue,triggerFocus:ke,suffix:Nt(),disabled:P,classes:V,classNames:Z,styles:ee}))});const lG=e=>{const{getPrefixCls:t,direction:r}=T.useContext(ur),{prefixCls:o,className:c}=e,f=t("input-group",o),y=t("input"),[l,w]=uE(y),E=Tt(f,{[`${f}-lg`]:e.size==="large",[`${f}-sm`]:e.size==="small",[`${f}-compact`]:e.compact,[`${f}-rtl`]:r==="rtl"},w,c),P=T.useContext(Tu),M=T.useMemo(()=>Object.assign(Object.assign({},P),{isFormItemInput:!1}),[P]);return l(T.createElement("span",{className:E,style:e.style,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,onFocus:e.onFocus,onBlur:e.onBlur},T.createElement(Tu.Provider,{value:M},e.children)))},cG=lG;function ZL(e,t){const r=T.useRef([]),o=()=>{r.current.push(setTimeout(()=>{var c,f,y,l;!((c=e.current)===null||c===void 0)&&c.input&&((f=e.current)===null||f===void 0?void 0:f.input.getAttribute("type"))==="password"&&(!((y=e.current)===null||y===void 0)&&y.input.hasAttribute("value"))&&((l=e.current)===null||l===void 0||l.input.removeAttribute("value"))}))};return T.useEffect(()=>(t&&o(),()=>r.current.forEach(c=>{c&&clearTimeout(c)})),[]),o}function uG(e){return!!(e.prefix||e.suffix||e.allowClear)}var dG=globalThis&&globalThis.__rest||function(e,t){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(e);c<o.length;c++)t.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(e,o[c])&&(r[o[c]]=e[o[c]]);return r};function hG(e,t){if(!e)return;e.focus(t);const{cursor:r}=t||{};if(r){const o=e.value.length;switch(r){case"start":e.setSelectionRange(0,0);break;case"end":e.setSelectionRange(o,o);break;default:e.setSelectionRange(0,o);break}}}const fG=T.forwardRef((e,t)=>{var r;const{prefixCls:o,bordered:c=!0,status:f,size:y,disabled:l,onBlur:w,onFocus:E,suffix:P,allowClear:M,addonAfter:z,addonBefore:F,className:k,style:U,styles:X,rootClassName:$,onChange:j,classNames:V}=e,Z=dG(e,["prefixCls","bordered","status","size","disabled","onBlur","onFocus","suffix","allowClear","addonAfter","addonBefore","className","style","styles","rootClassName","onChange","classNames"]),{getPrefixCls:ee,direction:ne,input:Q}=lt.useContext(ur),ie=ee("input",o),te=T.useRef(null),[ge,ue]=uE(ie),{compactSize:oe,compactItemClassnames:fe}=A0(ie,ne),Ee=Sl(bt=>{var ut;return(ut=y??oe)!==null&&ut!==void 0?ut:bt}),ke=lt.useContext(bm),Le=l??ke,{status:Ne,hasFeedback:pe,feedbackIcon:He}=T.useContext(Tu),Be=aE(Ne,f),Ge=uG(e)||!!pe;T.useRef(Ge);const Qe=ZL(te,!0),gt=bt=>{Qe(),w==null||w(bt)},St=bt=>{Qe(),E==null||E(bt)},xt=bt=>{Qe(),j==null||j(bt)},jt=(pe||P)&&lt.createElement(lt.Fragment,null,P,pe&&He);let Ut;return typeof M=="object"&&(M!=null&&M.clearIcon)?Ut=M:M&&(Ut={clearIcon:lt.createElement(wm,null)}),ge(lt.createElement(sG,Object.assign({ref:Ba(t,te),prefixCls:ie,autoComplete:Q==null?void 0:Q.autoComplete},Z,{disabled:Le,onBlur:gt,onFocus:St,style:Object.assign(Object.assign({},Q==null?void 0:Q.style),U),styles:Object.assign(Object.assign({},Q==null?void 0:Q.styles),X),suffix:jt,allowClear:Ut,className:Tt(k,$,fe,Q==null?void 0:Q.className),onChange:xt,addonAfter:z&&lt.createElement(rw,null,lt.createElement(SM,{override:!0,status:!0},z)),addonBefore:F&&lt.createElement(rw,null,lt.createElement(SM,{override:!0,status:!0},F)),classNames:Object.assign(Object.assign(Object.assign({},V),Q==null?void 0:Q.classNames),{input:Tt({[`${ie}-sm`]:Ee==="small",[`${ie}-lg`]:Ee==="large",[`${ie}-rtl`]:ne==="rtl",[`${ie}-borderless`]:!c},!Ge&&dh(ie,Be),V==null?void 0:V.input,(r=Q==null?void 0:Q.classNames)===null||r===void 0?void 0:r.input,ue)}),classes:{affixWrapper:Tt({[`${ie}-affix-wrapper-sm`]:Ee==="small",[`${ie}-affix-wrapper-lg`]:Ee==="large",[`${ie}-affix-wrapper-rtl`]:ne==="rtl",[`${ie}-affix-wrapper-borderless`]:!c},dh(`${ie}-affix-wrapper`,Be,pe),ue),wrapper:Tt({[`${ie}-group-rtl`]:ne==="rtl"},ue),group:Tt({[`${ie}-group-wrapper-sm`]:Ee==="small",[`${ie}-group-wrapper-lg`]:Ee==="large",[`${ie}-group-wrapper-rtl`]:ne==="rtl",[`${ie}-group-wrapper-disabled`]:Le},dh(`${ie}-group-wrapper`,Be,pe),ue)}})))}),dE=fG;var pG={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2Q889.47 375.11 816.7 305l-50.88 50.88C807.31 395.53 843.45 447.4 874.7 512 791.5 684.2 673.4 766 512 766q-72.67 0-133.87-22.38L323 798.75Q408 838 512 838q288.3 0 430.2-300.3a60.29 60.29 0 000-51.5zm-63.57-320.64L836 122.88a8 8 0 00-11.32 0L715.31 232.2Q624.86 186 512 186q-288.3 0-430.2 300.3a60.3 60.3 0 000 51.5q56.69 119.4 136.5 191.41L112.48 835a8 8 0 000 11.31L155.17 889a8 8 0 0011.31 0l712.15-712.12a8 8 0 000-11.32zM149.3 512C232.6 339.8 350.7 258 512 258c54.54 0 104.13 9.36 149.12 28.39l-70.3 70.3a176 176 0 00-238.13 238.13l-83.42 83.42C223.1 637.49 183.3 582.28 149.3 512zm246.7 0a112.11 112.11 0 01146.2-106.69L401.31 546.2A112 112 0 01396 512z"}},{tag:"path",attrs:{d:"M508 624c-3.46 0-6.87-.16-10.25-.47l-52.82 52.82a176.09 176.09 0 00227.42-227.42l-52.82 52.82c.31 3.38.47 6.79.47 10.25a111.94 111.94 0 01-112 112z"}}]},name:"eye-invisible",theme:"outlined"};const mG=pG;var gG=function(t,r){return T.createElement(Xi,Sn({},t,{ref:r,icon:mG}))};const vG=T.forwardRef(gG);var yG={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"}}]},name:"eye",theme:"outlined"};const _G=yG;var xG=function(t,r){return T.createElement(Xi,Sn({},t,{ref:r,icon:_G}))};const bG=T.forwardRef(xG);var wG=globalThis&&globalThis.__rest||function(e,t){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(e);c<o.length;c++)t.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(e,o[c])&&(r[o[c]]=e[o[c]]);return r};const SG=e=>e?T.createElement(bG,null):T.createElement(vG,null),EG={click:"onClick",hover:"onMouseOver"},CG=T.forwardRef((e,t)=>{const{visibilityToggle:r=!0}=e,o=typeof r=="object"&&r.visible!==void 0,[c,f]=T.useState(()=>o?r.visible:!1),y=T.useRef(null);T.useEffect(()=>{o&&f(r.visible)},[o,r]);const l=ZL(y),w=()=>{const{disabled:ee}=e;ee||(c&&l(),f(ne=>{var Q;const ie=!ne;return typeof r=="object"&&((Q=r.onVisibleChange)===null||Q===void 0||Q.call(r,ie)),ie}))},E=ee=>{const{action:ne="click",iconRender:Q=SG}=e,ie=EG[ne]||"",te=Q(c),ge={[ie]:w,className:`${ee}-icon`,key:"passwordIcon",onMouseDown:ue=>{ue.preventDefault()},onMouseUp:ue=>{ue.preventDefault()}};return T.cloneElement(T.isValidElement(te)?te:T.createElement("span",null,te),ge)},{className:P,prefixCls:M,inputPrefixCls:z,size:F}=e,k=wG(e,["className","prefixCls","inputPrefixCls","size"]),{getPrefixCls:U}=T.useContext(ur),X=U("input",z),$=U("input-password",M),j=r&&E($),V=Tt($,P,{[`${$}-${F}`]:!!F}),Z=Object.assign(Object.assign({},wl(k,["suffix","iconRender","visibilityToggle"])),{type:c?"text":"password",className:V,prefixCls:X,suffix:j});return F&&(Z.size=F),T.createElement(dE,Object.assign({ref:Ba(t,y)},Z))}),TG=CG;var IG=globalThis&&globalThis.__rest||function(e,t){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(e);c<o.length;c++)t.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(e,o[c])&&(r[o[c]]=e[o[c]]);return r};const MG=T.forwardRef((e,t)=>{const{prefixCls:r,inputPrefixCls:o,className:c,size:f,suffix:y,enterButton:l=!1,addonAfter:w,loading:E,disabled:P,onSearch:M,onChange:z,onCompositionStart:F,onCompositionEnd:k}=e,U=IG(e,["prefixCls","inputPrefixCls","className","size","suffix","enterButton","addonAfter","loading","disabled","onSearch","onChange","onCompositionStart","onCompositionEnd"]),{getPrefixCls:X,direction:$}=T.useContext(ur),j=T.useRef(!1),V=X("input-search",r),Z=X("input",o),{compactSize:ee}=A0(V,$),ne=Sl(Be=>{var Ge;return(Ge=f??ee)!==null&&Ge!==void 0?Ge:Be}),Q=T.useRef(null),ie=Be=>{Be&&Be.target&&Be.type==="click"&&M&&M(Be.target.value,Be,{source:"clear"}),z&&z(Be)},te=Be=>{var Ge;document.activeElement===((Ge=Q.current)===null||Ge===void 0?void 0:Ge.input)&&Be.preventDefault()},ge=Be=>{var Ge,Qe;M&&M((Qe=(Ge=Q.current)===null||Ge===void 0?void 0:Ge.input)===null||Qe===void 0?void 0:Qe.value,Be,{source:"input"})},ue=Be=>{j.current||E||ge(Be)},oe=typeof l=="boolean"?T.createElement(PL,null):null,fe=`${V}-button`;let Ee;const ke=l||{},Le=ke.type&&ke.type.__ANT_BUTTON===!0;Le||ke.type==="button"?Ee=yl(ke,Object.assign({onMouseDown:te,onClick:Be=>{var Ge,Qe;(Qe=(Ge=ke==null?void 0:ke.props)===null||Ge===void 0?void 0:Ge.onClick)===null||Qe===void 0||Qe.call(Ge,Be),ge(Be)},key:"enterButton"},Le?{className:fe,size:ne}:{})):Ee=T.createElement(O8,{className:fe,type:l?"primary":void 0,size:ne,disabled:P,key:"enterButton",onMouseDown:te,onClick:ge,loading:E,icon:oe},l),w&&(Ee=[Ee,yl(w,{key:"addonAfter"})]);const Ne=Tt(V,{[`${V}-rtl`]:$==="rtl",[`${V}-${ne}`]:!!ne,[`${V}-with-button`]:!!l},c),pe=Be=>{j.current=!0,F==null||F(Be)},He=Be=>{j.current=!1,k==null||k(Be)};return T.createElement(dE,Object.assign({ref:Ba(Q,t),onPressEnter:ue},U,{size:ne,onCompositionStart:pe,onCompositionEnd:He,prefixCls:Z,addonAfter:Ee,suffix:y,onChange:ie,className:Ne,disabled:P}))}),PG=MG;var AG=`
  min-height:0 !important;
  max-height:none !important;
  height:0 !important;
  visibility:hidden !important;
  overflow:hidden !important;
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
  pointer-events: none !important;
`,RG=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","font-variant","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing","word-break","white-space"],S1={},Ma;function OG(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=e.getAttribute("id")||e.getAttribute("data-reactid")||e.getAttribute("name");if(t&&S1[r])return S1[r];var o=window.getComputedStyle(e),c=o.getPropertyValue("box-sizing")||o.getPropertyValue("-moz-box-sizing")||o.getPropertyValue("-webkit-box-sizing"),f=parseFloat(o.getPropertyValue("padding-bottom"))+parseFloat(o.getPropertyValue("padding-top")),y=parseFloat(o.getPropertyValue("border-bottom-width"))+parseFloat(o.getPropertyValue("border-top-width")),l=RG.map(function(E){return"".concat(E,":").concat(o.getPropertyValue(E))}).join(";"),w={sizingStyle:l,paddingSize:f,borderSize:y,boxSizing:c};return t&&r&&(S1[r]=w),w}function zG(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;Ma||(Ma=document.createElement("textarea"),Ma.setAttribute("tab-index","-1"),Ma.setAttribute("aria-hidden","true"),document.body.appendChild(Ma)),e.getAttribute("wrap")?Ma.setAttribute("wrap",e.getAttribute("wrap")):Ma.removeAttribute("wrap");var c=OG(e,t),f=c.paddingSize,y=c.borderSize,l=c.boxSizing,w=c.sizingStyle;Ma.setAttribute("style","".concat(w,";").concat(AG)),Ma.value=e.value||e.placeholder||"";var E=void 0,P=void 0,M,z=Ma.scrollHeight;if(l==="border-box"?z+=y:l==="content-box"&&(z-=f),r!==null||o!==null){Ma.value=" ";var F=Ma.scrollHeight-f;r!==null&&(E=F*r,l==="border-box"&&(E=E+f+y),z=Math.max(E,z)),o!==null&&(P=F*o,l==="border-box"&&(P=P+f+y),M=z>P?"":"hidden",z=Math.min(P,z))}var k={height:z,overflowY:M,resize:"none"};return E&&(k.minHeight=E),P&&(k.maxHeight=P),k}var LG=["prefixCls","onPressEnter","defaultValue","value","autoSize","onResize","className","style","disabled","onChange","onInternalAutoSize"],E1=0,C1=1,T1=2,DG=T.forwardRef(function(e,t){var r=e,o=r.prefixCls;r.onPressEnter;var c=r.defaultValue,f=r.value,y=r.autoSize,l=r.onResize,w=r.className,E=r.style,P=r.disabled,M=r.onChange;r.onInternalAutoSize;var z=Vr(r,LG),F=Bs(c,{value:f,postState:function(St){return St??""}}),k=Bt(F,2),U=k[0],X=k[1],$=function(St){X(St.target.value),M==null||M(St)},j=T.useRef();T.useImperativeHandle(t,function(){return{textArea:j.current}});var V=T.useMemo(function(){return y&&Zn(y)==="object"?[y.minRows,y.maxRows]:[]},[y]),Z=Bt(V,2),ee=Z[0],ne=Z[1],Q=!!y,ie=function(){try{if(document.activeElement===j.current){var St=j.current,xt=St.selectionStart,jt=St.selectionEnd,Ut=St.scrollTop;j.current.setSelectionRange(xt,jt),j.current.scrollTop=Ut}}catch{}},te=T.useState(T1),ge=Bt(te,2),ue=ge[0],oe=ge[1],fe=T.useState(),Ee=Bt(fe,2),ke=Ee[0],Le=Ee[1],Ne=function(){oe(E1)};zr(function(){Q&&Ne()},[f,ee,ne,Q]),zr(function(){if(ue===E1)oe(C1);else if(ue===C1){var gt=zG(j.current,!1,ee,ne);oe(T1),Le(gt)}else ie()},[ue]);var pe=T.useRef(),He=function(){yi.cancel(pe.current)},Be=function(St){ue===T1&&(l==null||l(St),y&&(He(),pe.current=yi(function(){Ne()})))};T.useEffect(function(){return He},[]);var Ge=Q?ke:null,Qe=st(st({},E),Ge);return(ue===E1||ue===C1)&&(Qe.overflowY="hidden",Qe.overflowX="hidden"),T.createElement(bl,{onResize:Be,disabled:!(y||l)},T.createElement("textarea",Sn({},z,{ref:j,style:Qe,className:Tt(o,w,Fe({},"".concat(o,"-disabled"),P)),disabled:P,value:U,onChange:$})))}),kG=["defaultValue","value","onFocus","onBlur","onChange","allowClear","maxLength","onCompositionStart","onCompositionEnd","suffix","prefixCls","classes","showCount","count","className","style","disabled","hidden","classNames","styles","onResize"],$G=lt.forwardRef(function(e,t){var r,o,c=e.defaultValue,f=e.value,y=e.onFocus,l=e.onBlur,w=e.onChange,E=e.allowClear,P=e.maxLength,M=e.onCompositionStart,z=e.onCompositionEnd,F=e.suffix,k=e.prefixCls,U=k===void 0?"rc-textarea":k,X=e.classes,$=e.showCount,j=e.count,V=e.className,Z=e.style,ee=e.disabled,ne=e.hidden,Q=e.classNames,ie=e.styles,te=e.onResize,ge=Vr(e,kG),ue=Bs(c,{value:f,defaultValue:c}),oe=Bt(ue,2),fe=oe[0],Ee=oe[1],ke=fe==null?"":String(fe),Le=lt.useState(!1),Ne=Bt(Le,2),pe=Ne[0],He=Ne[1],Be=lt.useRef(!1),Ge=lt.useState(null),Qe=Bt(Ge,2),gt=Qe[0],St=Qe[1],xt=T.useRef(null),jt=function(){var rn;return(rn=xt.current)===null||rn===void 0?void 0:rn.textArea},Ut=function(){jt().focus()};T.useImperativeHandle(t,function(){return{resizableTextArea:xt.current,focus:Ut,blur:function(){jt().blur()}}}),T.useEffect(function(){He(function(yn){return!ee&&yn})},[ee]);var bt=lt.useState(null),ut=Bt(bt,2),It=ut[0],ft=ut[1];lt.useEffect(function(){if(It){var yn;(yn=jt()).setSelectionRange.apply(yn,mn(It))}},[It]);var yt=qL(j,$),ct=(r=yt.max)!==null&&r!==void 0?r:P,Mt=Number(ct)>0,Ct=yt.strategy(ke),Qt=!!ct&&Ct>ct,Vt=function(rn,Wn){var jn=Wn;!Be.current&&yt.exceedFormatter&&yt.max&&yt.strategy(Wn)>yt.max&&(jn=yt.exceedFormatter(Wn,{max:yt.max}),Wn!==jn&&ft([jt().selectionStart||0,jt().selectionEnd||0])),Ee(jn),Ny(rn.currentTarget,rn,w,jn)},Nt=function(rn){Be.current=!0,M==null||M(rn)},ot=function(rn){Be.current=!1,Vt(rn,rn.currentTarget.value),z==null||z(rn)},rt=function(rn){Vt(rn,rn.target.value)},kt=function(rn){var Wn=ge.onPressEnter,jn=ge.onKeyDown;rn.key==="Enter"&&Wn&&Wn(rn),jn==null||jn(rn)},Pt=function(rn){He(!0),y==null||y(rn)},sn=function(rn){He(!1),l==null||l(rn)},An=function(rn){Ee(""),Ut(),Ny(jt(),rn,w)},Mn=F,on;yt.show&&(yt.showFormatter?on=yt.showFormatter({value:ke,count:Ct,maxLength:ct}):on="".concat(Ct).concat(Mt?" / ".concat(ct):""),Mn=lt.createElement(lt.Fragment,null,Mn,lt.createElement("span",{className:Tt("".concat(U,"-data-count"),Q==null?void 0:Q.count),style:ie==null?void 0:ie.count},on)));var Vn=function(rn){var Wn;te==null||te(rn),(Wn=jt())!==null&&Wn!==void 0&&Wn.style.height&&St(!0)},Nn=!ge.autoSize&&!$&&!E,zn=lt.createElement(WL,{value:ke,allowClear:E,handleReset:An,suffix:Mn,prefixCls:U,classes:{affixWrapper:Tt(X==null?void 0:X.affixWrapper,(o={},Fe(o,"".concat(U,"-show-count"),$),Fe(o,"".concat(U,"-textarea-allow-clear"),E),o))},disabled:ee,focused:pe,className:Tt(V,Qt&&"".concat(U,"-out-of-range")),style:st(st({},Z),gt&&!Nn?{height:"auto"}:{}),dataAttrs:{affixWrapper:{"data-count":typeof on=="string"?on:void 0}},hidden:ne,inputElement:lt.createElement(DG,Sn({},ge,{maxLength:P,onKeyDown:kt,onChange:rt,onFocus:Pt,onBlur:sn,onCompositionStart:Nt,onCompositionEnd:ot,className:Tt(Q==null?void 0:Q.textarea),style:st(st({},ie==null?void 0:ie.textarea),{},{resize:Z==null?void 0:Z.resize}),disabled:ee,prefixCls:U,onResize:Vn,ref:xt}))});return zn}),FG=globalThis&&globalThis.__rest||function(e,t){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(e);c<o.length;c++)t.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(e,o[c])&&(r[o[c]]=e[o[c]]);return r};const BG=T.forwardRef((e,t)=>{var r;const{prefixCls:o,bordered:c=!0,size:f,disabled:y,status:l,allowClear:w,classNames:E,rootClassName:P,className:M}=e,z=FG(e,["prefixCls","bordered","size","disabled","status","allowClear","classNames","rootClassName","className"]),{getPrefixCls:F,direction:k}=T.useContext(ur),U=Sl(f),X=T.useContext(bm),$=y??X,{status:j,hasFeedback:V,feedbackIcon:Z}=T.useContext(Tu),ee=aE(j,l),ne=T.useRef(null);T.useImperativeHandle(t,()=>{var ue;return{resizableTextArea:(ue=ne.current)===null||ue===void 0?void 0:ue.resizableTextArea,focus:oe=>{var fe,Ee;hG((Ee=(fe=ne.current)===null||fe===void 0?void 0:fe.resizableTextArea)===null||Ee===void 0?void 0:Ee.textArea,oe)},blur:()=>{var oe;return(oe=ne.current)===null||oe===void 0?void 0:oe.blur()}}});const Q=F("input",o);let ie;typeof w=="object"&&(w!=null&&w.clearIcon)?ie=w:w&&(ie={clearIcon:T.createElement(wm,null)});const[te,ge]=uE(Q);return te(T.createElement($G,Object.assign({},z,{disabled:$,allowClear:ie,className:Tt(M,P),classes:{affixWrapper:Tt(`${Q}-textarea-affix-wrapper`,{[`${Q}-affix-wrapper-rtl`]:k==="rtl",[`${Q}-affix-wrapper-borderless`]:!c,[`${Q}-affix-wrapper-sm`]:U==="small",[`${Q}-affix-wrapper-lg`]:U==="large",[`${Q}-textarea-show-count`]:e.showCount||((r=e.count)===null||r===void 0?void 0:r.show)},dh(`${Q}-affix-wrapper`,ee),ge)},classNames:Object.assign(Object.assign({},E),{textarea:Tt({[`${Q}-borderless`]:!c,[`${Q}-sm`]:U==="small",[`${Q}-lg`]:U==="large"},dh(Q,ee),ge,E==null?void 0:E.textarea)}),prefixCls:Q,suffix:V&&T.createElement("span",{className:`${Q}-textarea-suffix`},Z),ref:ne})))}),XL=BG,Mm=dE;Mm.Group=cG;Mm.Search=PG;Mm.TextArea=XL;Mm.Password=TG;const uJ=Mm;function QM(e){return["small","middle","large"].includes(e)}function eP(e){return e?typeof e=="number"&&!Number.isNaN(e):!1}const KL=lt.createContext({latestIndex:0}),NG=KL.Provider,jG=e=>{let{className:t,index:r,children:o,split:c,style:f}=e;const{latestIndex:y}=T.useContext(KL);return o==null?null:T.createElement(T.Fragment,null,T.createElement("div",{className:t,style:f},o),r<y&&c&&T.createElement("span",{className:`${t}-split`},c))},UG=jG;var VG=globalThis&&globalThis.__rest||function(e,t){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(e);c<o.length;c++)t.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(e,o[c])&&(r[o[c]]=e[o[c]]);return r};const HG=T.forwardRef((e,t)=>{var r,o;const{getPrefixCls:c,space:f,direction:y}=T.useContext(ur),{size:l=(f==null?void 0:f.size)||"small",align:w,className:E,rootClassName:P,children:M,direction:z="horizontal",prefixCls:F,split:k,style:U,wrap:X=!1,classNames:$,styles:j}=e,V=VG(e,["size","align","className","rootClassName","children","direction","prefixCls","split","style","wrap","classNames","styles"]),[Z,ee]=Array.isArray(l)?l:[l,l],ne=QM(ee),Q=QM(Z),ie=eP(ee),te=eP(Z),ge=fl(M,{keepEmpty:!0}),ue=w===void 0&&z==="horizontal"?"center":w,oe=c("space",F),[fe,Ee]=Pz(oe),ke=Tt(oe,f==null?void 0:f.className,Ee,`${oe}-${z}`,{[`${oe}-rtl`]:y==="rtl",[`${oe}-align-${ue}`]:ue,[`${oe}-gap-row-${ee}`]:ne,[`${oe}-gap-col-${Z}`]:Q},E,P),Le=Tt(`${oe}-item`,(r=$==null?void 0:$.item)!==null&&r!==void 0?r:(o=f==null?void 0:f.classNames)===null||o===void 0?void 0:o.item);let Ne=0;const pe=ge.map((Ge,Qe)=>{var gt,St;Ge!=null&&(Ne=Qe);const xt=Ge&&Ge.key||`${Le}-${Qe}`;return T.createElement(UG,{className:Le,key:xt,index:Qe,split:k,style:(gt=j==null?void 0:j.item)!==null&&gt!==void 0?gt:(St=f==null?void 0:f.styles)===null||St===void 0?void 0:St.item},Ge)}),He=T.useMemo(()=>({latestIndex:Ne}),[Ne]);if(ge.length===0)return null;const Be={};return X&&(Be.flexWrap="wrap"),!Q&&te&&(Be.columnGap=Z),!ne&&ie&&(Be.rowGap=ee),fe(T.createElement("div",Object.assign({ref:t,className:ke,style:Object.assign(Object.assign(Object.assign({},Be),f==null?void 0:f.style),U)},V),T.createElement(NG,{value:He},pe)))}),YL=HG;YL.Compact=Jj;const dJ=YL;function GG(){const e=Object.assign({},arguments.length<=0?void 0:arguments[0]);for(let t=1;t<arguments.length;t++){const r=t<0||arguments.length<=t?void 0:arguments[t];r&&Object.keys(r).forEach(o=>{const c=r[o];c!==void 0&&(e[o]=c)})}return e}var WG={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M272.9 512l265.4-339.1c4.1-5.2.4-12.9-6.3-12.9h-77.3c-4.9 0-9.6 2.3-12.6 6.1L186.8 492.3a31.99 31.99 0 000 39.5l255.3 326.1c3 3.9 7.7 6.1 12.6 6.1H532c6.7 0 10.4-7.7 6.3-12.9L272.9 512zm304 0l265.4-339.1c4.1-5.2.4-12.9-6.3-12.9h-77.3c-4.9 0-9.6 2.3-12.6 6.1L490.8 492.3a31.99 31.99 0 000 39.5l255.3 326.1c3 3.9 7.7 6.1 12.6 6.1H836c6.7 0 10.4-7.7 6.3-12.9L576.9 512z"}}]},name:"double-left",theme:"outlined"};const qG=WG;var ZG=function(t,r){return T.createElement(Xi,Sn({},t,{ref:r,icon:qG}))};const tP=T.forwardRef(ZG);var XG={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M533.2 492.3L277.9 166.1c-3-3.9-7.7-6.1-12.6-6.1H188c-6.7 0-10.4 7.7-6.3 12.9L447.1 512 181.7 851.1A7.98 7.98 0 00188 864h77.3c4.9 0 9.6-2.3 12.6-6.1l255.3-326.1c9.1-11.7 9.1-27.9 0-39.5zm304 0L581.9 166.1c-3-3.9-7.7-6.1-12.6-6.1H492c-6.7 0-10.4 7.7-6.3 12.9L751.1 512 485.7 851.1A7.98 7.98 0 00492 864h77.3c4.9 0 9.6-2.3 12.6-6.1l255.3-326.1c9.1-11.7 9.1-27.9 0-39.5z"}}]},name:"double-right",theme:"outlined"};const KG=XG;var YG=function(t,r){return T.createElement(Xi,Sn({},t,{ref:r,icon:KG}))};const nP=T.forwardRef(YG);var ou={ZERO:48,NINE:57,NUMPAD_ZERO:96,NUMPAD_NINE:105,BACKSPACE:8,DELETE:46,ENTER:13,ARROW_UP:38,ARROW_DOWN:40};const JG={items_per_page:"/",jump_to:"",jump_to_confirm:"",page:"",prev_page:"",next_page:"",prev_5:" 5 ",next_5:" 5 ",prev_3:" 3 ",next_3:" 3 ",page_size:""};var Sw=function(e){Au(r,e);var t=Ru(r);function r(){var o;qo(this,r);for(var c=arguments.length,f=new Array(c),y=0;y<c;y++)f[y]=arguments[y];return o=t.call.apply(t,[this].concat(f)),Fe(vn(o),"state",{goInputText:""}),Fe(vn(o),"getValidValue",function(){var l=o.state.goInputText;return!l||Number.isNaN(l)?void 0:Number(l)}),Fe(vn(o),"buildOptionText",function(l){return"".concat(l," ").concat(o.props.locale.items_per_page)}),Fe(vn(o),"changeSize",function(l){o.props.changeSize(Number(l))}),Fe(vn(o),"handleChange",function(l){o.setState({goInputText:l.target.value})}),Fe(vn(o),"handleBlur",function(l){var w=o.props,E=w.goButton,P=w.quickGo,M=w.rootPrefixCls,z=o.state.goInputText;E||z===""||(o.setState({goInputText:""}),!(l.relatedTarget&&(l.relatedTarget.className.indexOf("".concat(M,"-item-link"))>=0||l.relatedTarget.className.indexOf("".concat(M,"-item"))>=0))&&P(o.getValidValue()))}),Fe(vn(o),"go",function(l){var w=o.state.goInputText;w!==""&&(l.keyCode===ou.ENTER||l.type==="click")&&(o.setState({goInputText:""}),o.props.quickGo(o.getValidValue()))}),o}return Zo(r,[{key:"getPageSizeOptions",value:function(){var c=this.props,f=c.pageSize,y=c.pageSizeOptions;return y.some(function(l){return l.toString()===f.toString()})?y:y.concat([f.toString()]).sort(function(l,w){var E=Number.isNaN(Number(l))?0:Number(l),P=Number.isNaN(Number(w))?0:Number(w);return E-P})}},{key:"render",value:function(){var c=this,f=this.props,y=f.pageSize,l=f.locale,w=f.rootPrefixCls,E=f.changeSize,P=f.quickGo,M=f.goButton,z=f.selectComponentClass,F=f.buildOptionText,k=f.selectPrefixCls,U=f.disabled,X=this.state.goInputText,$="".concat(w,"-options"),j=z,V=null,Z=null,ee=null;if(!E&&!P)return null;var ne=this.getPageSizeOptions();if(E&&j){var Q=ne.map(function(ie,te){return lt.createElement(j.Option,{key:te,value:ie.toString()},(F||c.buildOptionText)(ie))});V=lt.createElement(j,{disabled:U,prefixCls:k,showSearch:!1,className:"".concat($,"-size-changer"),optionLabelProp:"children",popupMatchSelectWidth:!1,value:(y||ne[0]).toString(),onChange:this.changeSize,getPopupContainer:function(te){return te.parentNode},"aria-label":l.page_size,defaultOpen:!1},Q)}return P&&(M&&(ee=typeof M=="boolean"?lt.createElement("button",{type:"button",onClick:this.go,onKeyUp:this.go,disabled:U,className:"".concat($,"-quick-jumper-button")},l.jump_to_confirm):lt.createElement("span",{onClick:this.go,onKeyUp:this.go},M)),Z=lt.createElement("div",{className:"".concat($,"-quick-jumper")},l.jump_to,lt.createElement("input",{disabled:U,type:"text",value:X,onChange:this.handleChange,onKeyUp:this.go,onBlur:this.handleBlur,"aria-label":l.page}),l.page,ee)),lt.createElement("li",{className:"".concat($)},V,Z)}}]),r}(lt.Component);Fe(Sw,"defaultProps",{pageSizeOptions:["10","20","50","100"]});var mp=function(t){var r,o=t.rootPrefixCls,c=t.page,f=t.active,y=t.className,l=t.showTitle,w=t.onClick,E=t.onKeyPress,P=t.itemRender,M="".concat(o,"-item"),z=Tt(M,"".concat(M,"-").concat(c),(r={},Fe(r,"".concat(M,"-active"),f),Fe(r,"".concat(M,"-disabled"),!c),Fe(r,t.className,y),r)),F=function(){w(c)},k=function($){E($,w,c)},U=P(c,"page",lt.createElement("a",{rel:"nofollow"},c));return U?lt.createElement("li",{title:l?c.toString():null,className:z,onClick:F,onKeyPress:k,tabIndex:0},U):null};function Ew(){}function rP(e){var t=Number(e);return typeof t=="number"&&!Number.isNaN(t)&&isFinite(t)&&Math.floor(t)===t}var QG=function(t,r,o){return o};function Ql(e,t,r){var o=typeof e>"u"?t.pageSize:e;return Math.floor((r.total-1)/o)+1}var JL=function(e){Au(r,e);var t=Ru(r);function r(o){var c;qo(this,r),c=t.call(this,o),Fe(vn(c),"paginationNode",lt.createRef()),Fe(vn(c),"getJumpPrevPage",function(){return Math.max(1,c.state.current-(c.props.showLessItems?3:5))}),Fe(vn(c),"getJumpNextPage",function(){return Math.min(Ql(void 0,c.state,c.props),c.state.current+(c.props.showLessItems?3:5))}),Fe(vn(c),"getItemIcon",function(E,P){var M=c.props.prefixCls,z=E||lt.createElement("button",{type:"button","aria-label":P,className:"".concat(M,"-item-link")});return typeof E=="function"&&(z=lt.createElement(E,st({},c.props))),z}),Fe(vn(c),"isValid",function(E){var P=c.props.total;return rP(E)&&E!==c.state.current&&rP(P)&&P>0}),Fe(vn(c),"shouldDisplayQuickJumper",function(){var E=c.props,P=E.showQuickJumper,M=E.total,z=c.state.pageSize;return M<=z?!1:P}),Fe(vn(c),"handleKeyDown",function(E){(E.keyCode===ou.ARROW_UP||E.keyCode===ou.ARROW_DOWN)&&E.preventDefault()}),Fe(vn(c),"handleKeyUp",function(E){var P=c.getValidValue(E),M=c.state.currentInputValue;P!==M&&c.setState({currentInputValue:P}),E.keyCode===ou.ENTER?c.handleChange(P):E.keyCode===ou.ARROW_UP?c.handleChange(P-1):E.keyCode===ou.ARROW_DOWN&&c.handleChange(P+1)}),Fe(vn(c),"handleBlur",function(E){var P=c.getValidValue(E);c.handleChange(P)}),Fe(vn(c),"changePageSize",function(E){var P=c.state.current,M=Ql(E,c.state,c.props);P=P>M?M:P,M===0&&(P=c.state.current),typeof E=="number"&&("pageSize"in c.props||c.setState({pageSize:E}),"current"in c.props||c.setState({current:P,currentInputValue:P})),c.props.onShowSizeChange(P,E),"onChange"in c.props&&c.props.onChange&&c.props.onChange(P,E)}),Fe(vn(c),"handleChange",function(E){var P=c.props,M=P.disabled,z=P.onChange,F=c.state,k=F.pageSize,U=F.current,X=F.currentInputValue;if(c.isValid(E)&&!M){var $=Ql(void 0,c.state,c.props),j=E;return E>$?j=$:E<1&&(j=1),"current"in c.props||c.setState({current:j}),j!==X&&c.setState({currentInputValue:j}),z(j,k),j}return U}),Fe(vn(c),"prev",function(){c.hasPrev()&&c.handleChange(c.state.current-1)}),Fe(vn(c),"next",function(){c.hasNext()&&c.handleChange(c.state.current+1)}),Fe(vn(c),"jumpPrev",function(){c.handleChange(c.getJumpPrevPage())}),Fe(vn(c),"jumpNext",function(){c.handleChange(c.getJumpNextPage())}),Fe(vn(c),"hasPrev",function(){return c.state.current>1}),Fe(vn(c),"hasNext",function(){return c.state.current<Ql(void 0,c.state,c.props)}),Fe(vn(c),"runIfEnter",function(E,P){if(E.key==="Enter"||E.charCode===13){for(var M=arguments.length,z=new Array(M>2?M-2:0),F=2;F<M;F++)z[F-2]=arguments[F];P.apply(void 0,z)}}),Fe(vn(c),"runIfEnterPrev",function(E){c.runIfEnter(E,c.prev)}),Fe(vn(c),"runIfEnterNext",function(E){c.runIfEnter(E,c.next)}),Fe(vn(c),"runIfEnterJumpPrev",function(E){c.runIfEnter(E,c.jumpPrev)}),Fe(vn(c),"runIfEnterJumpNext",function(E){c.runIfEnter(E,c.jumpNext)}),Fe(vn(c),"handleGoTO",function(E){(E.keyCode===ou.ENTER||E.type==="click")&&c.handleChange(c.state.currentInputValue)}),Fe(vn(c),"renderPrev",function(E){var P=c.props,M=P.prevIcon,z=P.itemRender,F=z(E,"prev",c.getItemIcon(M,"prev page")),k=!c.hasPrev();return T.isValidElement(F)?T.cloneElement(F,{disabled:k}):F}),Fe(vn(c),"renderNext",function(E){var P=c.props,M=P.nextIcon,z=P.itemRender,F=z(E,"next",c.getItemIcon(M,"next page")),k=!c.hasNext();return T.isValidElement(F)?T.cloneElement(F,{disabled:k}):F});var f=o.onChange!==Ew,y="current"in o;y&&!f&&console.warn("Warning: You provided a `current` prop to a Pagination component without an `onChange` handler. This will render a read-only component.");var l=o.defaultCurrent;"current"in o&&(l=o.current);var w=o.defaultPageSize;return"pageSize"in o&&(w=o.pageSize),l=Math.min(l,Ql(w,void 0,o)),c.state={current:l,currentInputValue:l,pageSize:w},c}return Zo(r,[{key:"componentDidUpdate",value:function(c,f){var y=this.props.prefixCls;if(f.current!==this.state.current&&this.paginationNode.current){var l=this.paginationNode.current.querySelector(".".concat(y,"-item-").concat(f.current));if(l&&document.activeElement===l){var w;l==null||(w=l.blur)===null||w===void 0||w.call(l)}}}},{key:"getValidValue",value:function(c){var f=c.target.value,y=Ql(void 0,this.state,this.props),l=this.state.currentInputValue,w;return f===""?w=f:Number.isNaN(Number(f))?w=l:f>=y?w=y:w=Number(f),w}},{key:"getShowSizeChanger",value:function(){var c=this.props,f=c.showSizeChanger,y=c.total,l=c.totalBoundaryShowSizeChanger;return typeof f<"u"?f:y>l}},{key:"render",value:function(){var c=this.props,f=c.prefixCls,y=c.className,l=c.style,w=c.disabled,E=c.hideOnSinglePage,P=c.total,M=c.locale,z=c.showQuickJumper,F=c.showLessItems,k=c.showTitle,U=c.showTotal,X=c.simple,$=c.itemRender,j=c.showPrevNextJumpers,V=c.jumpPrevIcon,Z=c.jumpNextIcon,ee=c.selectComponentClass,ne=c.selectPrefixCls,Q=c.pageSizeOptions,ie=this.state,te=ie.current,ge=ie.pageSize,ue=ie.currentInputValue;if(E===!0&&P<=ge)return null;var oe=Ql(void 0,this.state,this.props),fe=[],Ee=null,ke=null,Le=null,Ne=null,pe=null,He=z&&z.goButton,Be=F?1:2,Ge=te-1>0?te-1:0,Qe=te+1<oe?te+1:oe,gt=sm(this.props,{aria:!0,data:!0}),St=U&&lt.createElement("li",{className:"".concat(f,"-total-text")},U(P,[P===0?0:(te-1)*ge+1,te*ge>P?P:te*ge]));if(X){He&&(typeof He=="boolean"?pe=lt.createElement("button",{type:"button",onClick:this.handleGoTO,onKeyUp:this.handleGoTO},M.jump_to_confirm):pe=lt.createElement("span",{onClick:this.handleGoTO,onKeyUp:this.handleGoTO},He),pe=lt.createElement("li",{title:k?"".concat(M.jump_to).concat(te,"/").concat(oe):null,className:"".concat(f,"-simple-pager")},pe));var xt=this.renderPrev(Ge);return lt.createElement("ul",Sn({className:Tt(f,"".concat(f,"-simple"),Fe({},"".concat(f,"-disabled"),w),y),style:l,ref:this.paginationNode},gt),St,xt?lt.createElement("li",{title:k?M.prev_page:null,onClick:this.prev,tabIndex:this.hasPrev()?0:null,onKeyPress:this.runIfEnterPrev,className:Tt("".concat(f,"-prev"),Fe({},"".concat(f,"-disabled"),!this.hasPrev())),"aria-disabled":!this.hasPrev()},xt):null,lt.createElement("li",{title:k?"".concat(te,"/").concat(oe):null,className:"".concat(f,"-simple-pager")},lt.createElement("input",{type:"text",value:ue,disabled:w,onKeyDown:this.handleKeyDown,onKeyUp:this.handleKeyUp,onChange:this.handleKeyUp,onBlur:this.handleBlur,size:3}),lt.createElement("span",{className:"".concat(f,"-slash")},"/"),oe),lt.createElement("li",{title:k?M.next_page:null,onClick:this.next,tabIndex:this.hasPrev()?0:null,onKeyPress:this.runIfEnterNext,className:Tt("".concat(f,"-next"),Fe({},"".concat(f,"-disabled"),!this.hasNext())),"aria-disabled":!this.hasNext()},this.renderNext(Qe)),lt.createElement(Sw,{disabled:w,locale:M,rootPrefixCls:f,selectComponentClass:ee,selectPrefixCls:ne,changeSize:this.getShowSizeChanger()?this.changePageSize:null,current:te,pageSize:ge,pageSizeOptions:Q,quickGo:this.shouldDisplayQuickJumper()?this.handleChange:null,goButton:pe}))}if(oe<=3+Be*2){var jt={locale:M,rootPrefixCls:f,onClick:this.handleChange,onKeyPress:this.runIfEnter,showTitle:k,itemRender:$};oe||fe.push(lt.createElement(mp,Sn({},jt,{key:"noPager",page:1,className:"".concat(f,"-item-disabled")})));for(var Ut=1;Ut<=oe;Ut+=1){var bt=te===Ut;fe.push(lt.createElement(mp,Sn({},jt,{key:Ut,page:Ut,active:bt})))}}else{var ut=F?M.prev_3:M.prev_5,It=F?M.next_3:M.next_5,ft=$(this.getJumpPrevPage(),"jump-prev",this.getItemIcon(V,"prev page")),yt=$(this.getJumpNextPage(),"jump-next",this.getItemIcon(Z,"next page"));j&&(Ee=ft?lt.createElement("li",{title:k?ut:null,key:"prev",onClick:this.jumpPrev,tabIndex:0,onKeyPress:this.runIfEnterJumpPrev,className:Tt("".concat(f,"-jump-prev"),Fe({},"".concat(f,"-jump-prev-custom-icon"),!!V))},ft):null,ke=yt?lt.createElement("li",{title:k?It:null,key:"next",tabIndex:0,onClick:this.jumpNext,onKeyPress:this.runIfEnterJumpNext,className:Tt("".concat(f,"-jump-next"),Fe({},"".concat(f,"-jump-next-custom-icon"),!!Z))},yt):null),Ne=lt.createElement(mp,{locale:M,last:!0,rootPrefixCls:f,onClick:this.handleChange,onKeyPress:this.runIfEnter,key:oe,page:oe,active:!1,showTitle:k,itemRender:$}),Le=lt.createElement(mp,{locale:M,rootPrefixCls:f,onClick:this.handleChange,onKeyPress:this.runIfEnter,key:1,page:1,active:!1,showTitle:k,itemRender:$});var ct=Math.max(1,te-Be),Mt=Math.min(te+Be,oe);te-1<=Be&&(Mt=1+Be*2),oe-te<=Be&&(ct=oe-Be*2);for(var Ct=ct;Ct<=Mt;Ct+=1){var Qt=te===Ct;fe.push(lt.createElement(mp,{locale:M,rootPrefixCls:f,onClick:this.handleChange,onKeyPress:this.runIfEnter,key:Ct,page:Ct,active:Qt,showTitle:k,itemRender:$}))}te-1>=Be*2&&te!==1+2&&(fe[0]=T.cloneElement(fe[0],{className:"".concat(f,"-item-after-jump-prev")}),fe.unshift(Ee)),oe-te>=Be*2&&te!==oe-2&&(fe[fe.length-1]=T.cloneElement(fe[fe.length-1],{className:"".concat(f,"-item-before-jump-next")}),fe.push(ke)),ct!==1&&fe.unshift(Le),Mt!==oe&&fe.push(Ne)}var Vt=!this.hasPrev()||!oe,Nt=!this.hasNext()||!oe,ot=this.renderPrev(Ge),rt=this.renderNext(Qe);return lt.createElement("ul",Sn({className:Tt(f,y,Fe({},"".concat(f,"-disabled"),w)),style:l,ref:this.paginationNode},gt),St,ot?lt.createElement("li",{title:k?M.prev_page:null,onClick:this.prev,tabIndex:Vt?null:0,onKeyPress:this.runIfEnterPrev,className:Tt("".concat(f,"-prev"),Fe({},"".concat(f,"-disabled"),Vt)),"aria-disabled":Vt},ot):null,fe,rt?lt.createElement("li",{title:k?M.next_page:null,onClick:this.next,tabIndex:Nt?null:0,onKeyPress:this.runIfEnterNext,className:Tt("".concat(f,"-next"),Fe({},"".concat(f,"-disabled"),Nt)),"aria-disabled":Nt},rt):null,lt.createElement(Sw,{disabled:w,locale:M,rootPrefixCls:f,selectComponentClass:ee,selectPrefixCls:ne,changeSize:this.getShowSizeChanger()?this.changePageSize:null,current:te,pageSize:ge,pageSizeOptions:Q,quickGo:this.shouldDisplayQuickJumper()?this.handleChange:null,goButton:He}))}}],[{key:"getDerivedStateFromProps",value:function(c,f){var y={};if("current"in c&&(y.current=c.current,c.current!==f.current&&(y.currentInputValue=y.current)),"pageSize"in c&&c.pageSize!==f.pageSize){var l=f.current,w=Ql(c.pageSize,f,c);l=l>w?w:l,"current"in c||(y.current=l,y.currentInputValue=l),y.pageSize=c.pageSize}return y}}]),r}(lt.Component);Fe(JL,"defaultProps",{defaultCurrent:1,total:0,defaultPageSize:10,onChange:Ew,className:"",selectPrefixCls:"rc-select",prefixCls:"rc-pagination",selectComponentClass:null,hideOnSinglePage:!1,showPrevNextJumpers:!0,showQuickJumper:!1,showLessItems:!1,showTitle:!0,onShowSizeChange:Ew,locale:JG,style:{},itemRender:QG,totalBoundaryShowSizeChanger:50});const QL=e=>T.createElement(O0,Object.assign({},e,{showSearch:!0,size:"small"})),eD=e=>T.createElement(O0,Object.assign({},e,{showSearch:!0,size:"middle"}));QL.Option=O0.Option;eD.Option=O0.Option;const eW=e=>{const{componentCls:t}=e;return{[`${t}-disabled`]:{"&, &:hover":{cursor:"not-allowed",[`${t}-item-link`]:{color:e.colorTextDisabled,cursor:"not-allowed"}},"&:focus-visible":{cursor:"not-allowed",[`${t}-item-link`]:{color:e.colorTextDisabled,cursor:"not-allowed"}}},[`&${t}-disabled`]:{cursor:"not-allowed",[`${t}-item`]:{cursor:"not-allowed","&:hover, &:active":{backgroundColor:"transparent"},a:{color:e.colorTextDisabled,backgroundColor:"transparent",border:"none",cursor:"not-allowed"},"&-active":{borderColor:e.colorBorder,backgroundColor:e.itemActiveBgDisabled,"&:hover, &:active":{backgroundColor:e.itemActiveBgDisabled},a:{color:e.itemActiveColorDisabled}}},[`${t}-item-link`]:{color:e.colorTextDisabled,cursor:"not-allowed","&:hover, &:active":{backgroundColor:"transparent"},[`${t}-simple&`]:{backgroundColor:"transparent","&:hover, &:active":{backgroundColor:"transparent"}}},[`${t}-simple-pager`]:{color:e.colorTextDisabled},[`${t}-jump-prev, ${t}-jump-next`]:{[`${t}-item-link-icon`]:{opacity:0},[`${t}-item-ellipsis`]:{opacity:1}}},[`&${t}-simple`]:{[`${t}-prev, ${t}-next`]:{[`&${t}-disabled ${t}-item-link`]:{"&:hover, &:active":{backgroundColor:"transparent"}}}}}},tW=e=>{const{componentCls:t}=e;return{[`&${t}-mini ${t}-total-text, &${t}-mini ${t}-simple-pager`]:{height:e.itemSizeSM,lineHeight:`${e.itemSizeSM}px`},[`&${t}-mini ${t}-item`]:{minWidth:e.itemSizeSM,height:e.itemSizeSM,margin:0,lineHeight:`${e.itemSizeSM-2}px`},[`&${t}-mini:not(${t}-disabled) ${t}-item:not(${t}-item-active)`]:{backgroundColor:"transparent",borderColor:"transparent","&:hover":{backgroundColor:e.colorBgTextHover},"&:active":{backgroundColor:e.colorBgTextActive}},[`&${t}-mini ${t}-prev, &${t}-mini ${t}-next`]:{minWidth:e.itemSizeSM,height:e.itemSizeSM,margin:0,lineHeight:`${e.itemSizeSM}px`},[`&${t}-mini:not(${t}-disabled)`]:{[`${t}-prev, ${t}-next`]:{[`&:hover ${t}-item-link`]:{backgroundColor:e.colorBgTextHover},[`&:active ${t}-item-link`]:{backgroundColor:e.colorBgTextActive},[`&${t}-disabled:hover ${t}-item-link`]:{backgroundColor:"transparent"}}},[`
    &${t}-mini ${t}-prev ${t}-item-link,
    &${t}-mini ${t}-next ${t}-item-link
    `]:{backgroundColor:"transparent",borderColor:"transparent","&::after":{height:e.itemSizeSM,lineHeight:`${e.itemSizeSM}px`}},[`&${t}-mini ${t}-jump-prev, &${t}-mini ${t}-jump-next`]:{height:e.itemSizeSM,marginInlineEnd:0,lineHeight:`${e.itemSizeSM}px`},[`&${t}-mini ${t}-options`]:{marginInlineStart:e.paginationMiniOptionsMarginInlineStart,"&-size-changer":{top:e.miniOptionsSizeChangerTop},"&-quick-jumper":{height:e.itemSizeSM,lineHeight:`${e.itemSizeSM}px`,input:Object.assign(Object.assign({},lE(e)),{width:e.paginationMiniQuickJumperInputWidth,height:e.controlHeightSM})}}}},nW=e=>{const{componentCls:t}=e;return{[`
    &${t}-simple ${t}-prev,
    &${t}-simple ${t}-next
    `]:{height:e.itemSizeSM,lineHeight:`${e.itemSizeSM}px`,verticalAlign:"top",[`${t}-item-link`]:{height:e.itemSizeSM,backgroundColor:"transparent",border:0,"&:hover":{backgroundColor:e.colorBgTextHover},"&:active":{backgroundColor:e.colorBgTextActive},"&::after":{height:e.itemSizeSM,lineHeight:`${e.itemSizeSM}px`}}},[`&${t}-simple ${t}-simple-pager`]:{display:"inline-block",height:e.itemSizeSM,marginInlineEnd:e.marginXS,input:{boxSizing:"border-box",height:"100%",marginInlineEnd:e.marginXS,padding:`0 ${e.paginationItemPaddingInline}px`,textAlign:"center",backgroundColor:e.itemInputBg,border:`${e.lineWidth}px ${e.lineType} ${e.colorBorder}`,borderRadius:e.borderRadius,outline:"none",transition:`border-color ${e.motionDurationMid}`,color:"inherit","&:hover":{borderColor:e.colorPrimary},"&:focus":{borderColor:e.colorPrimaryHover,boxShadow:`${e.inputOutlineOffset}px 0 ${e.controlOutlineWidth}px ${e.controlOutline}`},"&[disabled]":{color:e.colorTextDisabled,backgroundColor:e.colorBgContainerDisabled,borderColor:e.colorBorder,cursor:"not-allowed"}}}}},rW=e=>{const{componentCls:t}=e;return{[`${t}-jump-prev, ${t}-jump-next`]:{outline:0,[`${t}-item-container`]:{position:"relative",[`${t}-item-link-icon`]:{color:e.colorPrimary,fontSize:e.fontSizeSM,opacity:0,transition:`all ${e.motionDurationMid}`,"&-svg":{top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,margin:"auto"}},[`${t}-item-ellipsis`]:{position:"absolute",top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,display:"block",margin:"auto",color:e.colorTextDisabled,fontFamily:"Arial, Helvetica, sans-serif",letterSpacing:e.paginationEllipsisLetterSpacing,textAlign:"center",textIndent:e.paginationEllipsisTextIndent,opacity:1,transition:`all ${e.motionDurationMid}`}},"&:hover":{[`${t}-item-link-icon`]:{opacity:1},[`${t}-item-ellipsis`]:{opacity:0}}},[`
    ${t}-prev,
    ${t}-jump-prev,
    ${t}-jump-next
    `]:{marginInlineEnd:e.marginXS},[`
    ${t}-prev,
    ${t}-next,
    ${t}-jump-prev,
    ${t}-jump-next
    `]:{display:"inline-block",minWidth:e.itemSize,height:e.itemSize,color:e.colorText,fontFamily:e.fontFamily,lineHeight:`${e.itemSize}px`,textAlign:"center",verticalAlign:"middle",listStyle:"none",borderRadius:e.borderRadius,cursor:"pointer",transition:`all ${e.motionDurationMid}`},[`${t}-prev, ${t}-next`]:{fontFamily:"Arial, Helvetica, sans-serif",outline:0,button:{color:e.colorText,cursor:"pointer",userSelect:"none"},[`${t}-item-link`]:{display:"block",width:"100%",height:"100%",padding:0,fontSize:e.fontSizeSM,textAlign:"center",backgroundColor:"transparent",border:`${e.lineWidth}px ${e.lineType} transparent`,borderRadius:e.borderRadius,outline:"none",transition:`all ${e.motionDurationMid}`},[`&:hover ${t}-item-link`]:{backgroundColor:e.colorBgTextHover},[`&:active ${t}-item-link`]:{backgroundColor:e.colorBgTextActive},[`&${t}-disabled:hover`]:{[`${t}-item-link`]:{backgroundColor:"transparent"}}},[`${t}-slash`]:{marginInlineEnd:e.paginationSlashMarginInlineEnd,marginInlineStart:e.paginationSlashMarginInlineStart},[`${t}-options`]:{display:"inline-block",marginInlineStart:e.margin,verticalAlign:"middle","&-size-changer.-select":{display:"inline-block",width:"auto"},"&-quick-jumper":{display:"inline-block",height:e.controlHeight,marginInlineStart:e.marginXS,lineHeight:`${e.controlHeight}px`,verticalAlign:"top",input:Object.assign(Object.assign({},cE(e)),{width:e.controlHeightLG*1.25,height:e.controlHeight,boxSizing:"border-box",margin:0,marginInlineStart:e.marginXS,marginInlineEnd:e.marginXS})}}}},iW=e=>{const{componentCls:t}=e;return{[`${t}-item`]:{display:"inline-block",minWidth:e.itemSize,height:e.itemSize,marginInlineEnd:e.marginXS,fontFamily:e.fontFamily,lineHeight:`${e.itemSize-2}px`,textAlign:"center",verticalAlign:"middle",listStyle:"none",backgroundColor:"transparent",border:`${e.lineWidth}px ${e.lineType} transparent`,borderRadius:e.borderRadius,outline:0,cursor:"pointer",userSelect:"none",a:{display:"block",padding:`0 ${e.paginationItemPaddingInline}px`,color:e.colorText,"&:hover":{textDecoration:"none"}},[`&:not(${t}-item-active)`]:{"&:hover":{transition:`all ${e.motionDurationMid}`,backgroundColor:e.colorBgTextHover},"&:active":{backgroundColor:e.colorBgTextActive}},"&-active":{fontWeight:e.fontWeightStrong,backgroundColor:e.itemActiveBg,borderColor:e.colorPrimary,a:{color:e.colorPrimary},"&:hover":{borderColor:e.colorPrimaryHover},"&:hover a":{color:e.colorPrimaryHover}}}}},oW=e=>{const{componentCls:t}=e;return{[t]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},ja(e)),{"ul, ol":{margin:0,padding:0,listStyle:"none"},"&::after":{display:"block",clear:"both",height:0,overflow:"hidden",visibility:"hidden",content:'""'},[`${t}-total-text`]:{display:"inline-block",height:e.itemSize,marginInlineEnd:e.marginXS,lineHeight:`${e.itemSize-2}px`,verticalAlign:"middle"}}),iW(e)),rW(e)),nW(e)),tW(e)),eW(e)),{[`@media only screen and (max-width: ${e.screenLG}px)`]:{[`${t}-item`]:{"&-after-jump-prev, &-before-jump-next":{display:"none"}}},[`@media only screen and (max-width: ${e.screenSM}px)`]:{[`${t}-options`]:{display:"none"}}}),[`&${e.componentCls}-rtl`]:{direction:"rtl"}}},aW=e=>{const{componentCls:t}=e;return{[`${t}${t}-disabled:not(${t}-mini)`]:{"&, &:hover":{[`${t}-item-link`]:{borderColor:e.colorBorder}},"&:focus-visible":{[`${t}-item-link`]:{borderColor:e.colorBorder}},[`${t}-item, ${t}-item-link`]:{backgroundColor:e.colorBgContainerDisabled,borderColor:e.colorBorder,[`&:hover:not(${t}-item-active)`]:{backgroundColor:e.colorBgContainerDisabled,borderColor:e.colorBorder,a:{color:e.colorTextDisabled}},[`&${t}-item-active`]:{backgroundColor:e.itemActiveBgDisabled}},[`${t}-prev, ${t}-next`]:{"&:hover button":{backgroundColor:e.colorBgContainerDisabled,borderColor:e.colorBorder,color:e.colorTextDisabled},[`${t}-item-link`]:{backgroundColor:e.colorBgContainerDisabled,borderColor:e.colorBorder}}},[`${t}:not(${t}-mini)`]:{[`${t}-prev, ${t}-next`]:{"&:hover button":{borderColor:e.colorPrimaryHover,backgroundColor:e.itemBg},[`${t}-item-link`]:{backgroundColor:e.itemLinkBg,borderColor:e.colorBorder},[`&:hover ${t}-item-link`]:{borderColor:e.colorPrimary,backgroundColor:e.itemBg,color:e.colorPrimary},[`&${t}-disabled`]:{[`${t}-item-link`]:{borderColor:e.colorBorder,color:e.colorTextDisabled}}},[`${t}-item`]:{backgroundColor:e.itemBg,border:`${e.lineWidth}px ${e.lineType} ${e.colorBorder}`,[`&:hover:not(${t}-item-active)`]:{borderColor:e.colorPrimary,backgroundColor:e.itemBg,a:{color:e.colorPrimary}},"&-active":{borderColor:e.colorPrimary}}}}},sW=e=>{const{componentCls:t}=e;return{[`${t}:not(${t}-disabled)`]:{[`${t}-item`]:Object.assign({},KO(e)),[`${t}-jump-prev, ${t}-jump-next`]:{"&:focus-visible":Object.assign({[`${t}-item-link-icon`]:{opacity:1},[`${t}-item-ellipsis`]:{opacity:0}},Zb(e))},[`${t}-prev, ${t}-next`]:{[`&:focus-visible ${t}-item-link`]:Object.assign({},Zb(e))}}}},lW=ro("Pagination",e=>{const t=Lr(e,{inputOutlineOffset:0,paginationMiniOptionsMarginInlineStart:e.marginXXS/2,paginationMiniQuickJumperInputWidth:e.controlHeightLG*1.1,paginationItemPaddingInline:e.marginXXS*1.5,paginationEllipsisLetterSpacing:e.marginXXS/2,paginationSlashMarginInlineStart:e.marginXXS,paginationSlashMarginInlineEnd:e.marginSM,paginationEllipsisTextIndent:"0.13em"},VL(e),HL(e));return[oW(t),sW(t),e.wireframe&&aW(t)]},e=>({itemBg:e.colorBgContainer,itemSize:e.controlHeight,itemSizeSM:e.controlHeightSM,itemActiveBg:e.colorBgContainer,itemLinkBg:e.colorBgContainer,itemActiveColorDisabled:e.colorTextDisabled,itemActiveBgDisabled:e.controlItemBgActiveDisabled,itemInputBg:e.colorBgContainer,miniOptionsSizeChangerTop:0}));var cW=globalThis&&globalThis.__rest||function(e,t){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(e);c<o.length;c++)t.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(e,o[c])&&(r[o[c]]=e[o[c]]);return r};const uW=e=>{const{prefixCls:t,selectPrefixCls:r,className:o,rootClassName:c,style:f,size:y,locale:l,selectComponentClass:w,responsive:E,showSizeChanger:P}=e,M=cW(e,["prefixCls","selectPrefixCls","className","rootClassName","style","size","locale","selectComponentClass","responsive","showSizeChanger"]),{xs:z}=OL(E),{getPrefixCls:F,direction:k,pagination:U={}}=T.useContext(ur),X=F("pagination",t),[$,j]=lW(X),V=P??U.showSizeChanger,Z=T.useMemo(()=>{const oe=T.createElement("span",{className:`${X}-item-ellipsis`},""),fe=T.createElement("button",{className:`${X}-item-link`,type:"button",tabIndex:-1},k==="rtl"?T.createElement(KM,null):T.createElement(YM,null)),Ee=T.createElement("button",{className:`${X}-item-link`,type:"button",tabIndex:-1},k==="rtl"?T.createElement(YM,null):T.createElement(KM,null)),ke=T.createElement("a",{className:`${X}-item-link`},T.createElement("div",{className:`${X}-item-container`},k==="rtl"?T.createElement(nP,{className:`${X}-item-link-icon`}):T.createElement(tP,{className:`${X}-item-link-icon`}),oe)),Le=T.createElement("a",{className:`${X}-item-link`},T.createElement("div",{className:`${X}-item-container`},k==="rtl"?T.createElement(tP,{className:`${X}-item-link-icon`}):T.createElement(nP,{className:`${X}-item-link-icon`}),oe));return{prevIcon:fe,nextIcon:Ee,jumpPrevIcon:ke,jumpNextIcon:Le}},[k,X]),[ee]=FS("Pagination",FO),ne=Object.assign(Object.assign({},ee),l),Q=Sl(y),ie=Q==="small"||!!(z&&!Q&&E),te=F("select",r),ge=Tt({[`${X}-mini`]:ie,[`${X}-rtl`]:k==="rtl"},U==null?void 0:U.className,o,c,j),ue=Object.assign(Object.assign({},U==null?void 0:U.style),f);return $(T.createElement(JL,Object.assign({},Z,M,{style:ue,prefixCls:X,selectPrefixCls:te,className:ge,selectComponentClass:w||(ie?QL:eD),locale:ne,showSizeChanger:V})))},dW=uW,hW=new or("antSpinMove",{to:{opacity:1}}),fW=new or("antRotate",{to:{transform:"rotate(405deg)"}}),pW=e=>(e.dotSize-e.fontSize)/2+2,mW=e=>({[`${e.componentCls}`]:Object.assign(Object.assign({},ja(e)),{position:"absolute",display:"none",color:e.colorPrimary,fontSize:0,textAlign:"center",verticalAlign:"middle",opacity:0,transition:`transform ${e.motionDurationSlow} ${e.motionEaseInOutCirc}`,"&-spinning":{position:"static",display:"inline-block",opacity:1},[`${e.componentCls}-text`]:{fontSize:e.fontSize,paddingTop:pW(e)},"&-fullscreen":{position:"fixed",width:"100vw",height:"100vh",backgroundColor:e.colorBgMask,zIndex:e.zIndexPopupBase,inset:0,display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"center",pointerEvents:"none",opacity:0,visibility:"hidden",transition:`all ${e.motionDurationMid}`,"&-show":{opacity:1,visibility:"visible"},[`${e.componentCls}-dot ${e.componentCls}-dot-item`]:{backgroundColor:e.colorWhite},[`${e.componentCls}-text`]:{color:e.colorTextLightSolid}},"&-nested-loading":{position:"relative",[`> div > ${e.componentCls}`]:{position:"absolute",top:0,insetInlineStart:0,zIndex:4,display:"block",width:"100%",height:"100%",maxHeight:e.contentHeight,[`${e.componentCls}-dot`]:{position:"absolute",top:"50%",insetInlineStart:"50%",margin:-e.dotSize/2},[`${e.componentCls}-text`]:{position:"absolute",top:"50%",width:"100%",textShadow:`0 1px 2px ${e.colorBgContainer}`},[`&${e.componentCls}-show-text ${e.componentCls}-dot`]:{marginTop:-(e.dotSize/2)-10},"&-sm":{[`${e.componentCls}-dot`]:{margin:-e.dotSizeSM/2},[`${e.componentCls}-text`]:{paddingTop:(e.dotSizeSM-e.fontSize)/2+2},[`&${e.componentCls}-show-text ${e.componentCls}-dot`]:{marginTop:-(e.dotSizeSM/2)-10}},"&-lg":{[`${e.componentCls}-dot`]:{margin:-(e.dotSizeLG/2)},[`${e.componentCls}-text`]:{paddingTop:(e.dotSizeLG-e.fontSize)/2+2},[`&${e.componentCls}-show-text ${e.componentCls}-dot`]:{marginTop:-(e.dotSizeLG/2)-10}}},[`${e.componentCls}-container`]:{position:"relative",transition:`opacity ${e.motionDurationSlow}`,"&::after":{position:"absolute",top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,zIndex:10,width:"100%",height:"100%",background:e.colorBgContainer,opacity:0,transition:`all ${e.motionDurationSlow}`,content:'""',pointerEvents:"none"}},[`${e.componentCls}-blur`]:{clear:"both",opacity:.5,userSelect:"none",pointerEvents:"none","&::after":{opacity:.4,pointerEvents:"auto"}}},"&-tip":{color:e.spinDotDefault},[`${e.componentCls}-dot`]:{position:"relative",display:"inline-block",fontSize:e.dotSize,width:"1em",height:"1em","&-item":{position:"absolute",display:"block",width:(e.dotSize-e.marginXXS/2)/2,height:(e.dotSize-e.marginXXS/2)/2,backgroundColor:e.colorPrimary,borderRadius:"100%",transform:"scale(0.75)",transformOrigin:"50% 50%",opacity:.3,animationName:hW,animationDuration:"1s",animationIterationCount:"infinite",animationTimingFunction:"linear",animationDirection:"alternate","&:nth-child(1)":{top:0,insetInlineStart:0},"&:nth-child(2)":{top:0,insetInlineEnd:0,animationDelay:"0.4s"},"&:nth-child(3)":{insetInlineEnd:0,bottom:0,animationDelay:"0.8s"},"&:nth-child(4)":{bottom:0,insetInlineStart:0,animationDelay:"1.2s"}},"&-spin":{transform:"rotate(45deg)",animationName:fW,animationDuration:"1.2s",animationIterationCount:"infinite",animationTimingFunction:"linear"}},[`&-sm ${e.componentCls}-dot`]:{fontSize:e.dotSizeSM,i:{width:(e.dotSizeSM-e.marginXXS/2)/2,height:(e.dotSizeSM-e.marginXXS/2)/2}},[`&-lg ${e.componentCls}-dot`]:{fontSize:e.dotSizeLG,i:{width:(e.dotSizeLG-e.marginXXS)/2,height:(e.dotSizeLG-e.marginXXS)/2}},[`&${e.componentCls}-show-text ${e.componentCls}-text`]:{display:"block"}})}),gW=ro("Spin",e=>{const t=Lr(e,{spinDotDefault:e.colorTextDescription});return[mW(t)]},e=>({contentHeight:400,dotSize:e.controlHeightLG/2,dotSizeSM:e.controlHeightLG*.35,dotSizeLG:e.controlHeight}));var vW=globalThis&&globalThis.__rest||function(e,t){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(e);c<o.length;c++)t.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(e,o[c])&&(r[o[c]]=e[o[c]]);return r};let Zv=null;function yW(e,t){const{indicator:r}=t,o=`${e}-dot`;return r===null?null:lm(r)?yl(r,{className:Tt(r.props.className,o)}):lm(Zv)?yl(Zv,{className:Tt(Zv.props.className,o)}):T.createElement("span",{className:Tt(o,`${e}-dot-spin`)},T.createElement("i",{className:`${e}-dot-item`,key:1}),T.createElement("i",{className:`${e}-dot-item`,key:2}),T.createElement("i",{className:`${e}-dot-item`,key:3}),T.createElement("i",{className:`${e}-dot-item`,key:4}))}function _W(e,t){return!!e&&!!t&&!isNaN(Number(t))}const xW=e=>{const{spinPrefixCls:t,spinning:r=!0,delay:o=0,className:c,rootClassName:f,size:y="default",tip:l,wrapperClassName:w,style:E,children:P,hashId:M,fullscreen:z}=e,F=vW(e,["spinPrefixCls","spinning","delay","className","rootClassName","size","tip","wrapperClassName","style","children","hashId","fullscreen"]),[k,U]=T.useState(()=>r&&!_W(r,o));T.useEffect(()=>{if(r){const ie=UH(o,()=>{U(!0)});return ie(),()=>{var te;(te=ie==null?void 0:ie.cancel)===null||te===void 0||te.call(ie)}}U(!1)},[o,r]);const X=T.useMemo(()=>typeof P<"u"&&!z,[P,z]),{direction:$,spin:j}=T.useContext(ur),V=Tt(t,j==null?void 0:j.className,{[`${t}-sm`]:y==="small",[`${t}-lg`]:y==="large",[`${t}-spinning`]:k,[`${t}-show-text`]:!!l,[`${t}-fullscreen`]:z,[`${t}-fullscreen-show`]:z&&k,[`${t}-rtl`]:$==="rtl"},c,f,M),Z=Tt(`${t}-container`,{[`${t}-blur`]:k}),ee=wl(F,["indicator","prefixCls"]),ne=Object.assign(Object.assign({},j==null?void 0:j.style),E),Q=T.createElement("div",Object.assign({},ee,{style:ne,className:V,"aria-live":"polite","aria-busy":k}),yW(t,e),l&&(X||z)?T.createElement("div",{className:`${t}-text`},l):null);return X?T.createElement("div",Object.assign({},ee,{className:Tt(`${t}-nested-loading`,w,M)}),k&&T.createElement("div",{key:"loading"},Q),T.createElement("div",{className:Z,key:"container"},P)):Q},tD=e=>{const{prefixCls:t}=e,{getPrefixCls:r}=T.useContext(ur),o=r("spin",t),[c,f]=gW(o),y=Object.assign(Object.assign({},e),{spinPrefixCls:o,hashId:f});return c(T.createElement(xW,Object.assign({},y)))};tD.setDefaultIndicator=e=>{Zv=e};const bW=tD,hE=lt.createContext({});hE.Consumer;var nD=globalThis&&globalThis.__rest||function(e,t){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(e);c<o.length;c++)t.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(e,o[c])&&(r[o[c]]=e[o[c]]);return r};const wW=e=>{var{prefixCls:t,className:r,avatar:o,title:c,description:f}=e,y=nD(e,["prefixCls","className","avatar","title","description"]);const{getPrefixCls:l}=T.useContext(ur),w=l("list",t),E=Tt(`${w}-item-meta`,r),P=lt.createElement("div",{className:`${w}-item-meta-content`},c&&lt.createElement("h4",{className:`${w}-item-meta-title`},c),f&&lt.createElement("div",{className:`${w}-item-meta-description`},f));return lt.createElement("div",Object.assign({},y,{className:E}),o&&lt.createElement("div",{className:`${w}-item-meta-avatar`},o),(c||f)&&P)},SW=(e,t)=>{var{prefixCls:r,children:o,actions:c,extra:f,className:y,colStyle:l}=e,w=nD(e,["prefixCls","children","actions","extra","className","colStyle"]);const{grid:E,itemLayout:P}=T.useContext(hE),{getPrefixCls:M}=T.useContext(ur),z=()=>{let j;return T.Children.forEach(o,V=>{typeof V=="string"&&(j=!0)}),j&&T.Children.count(o)>1},F=()=>P==="vertical"?!!f:!z(),k=M("list",r),U=c&&c.length>0&&lt.createElement("ul",{className:`${k}-item-action`,key:"actions"},c.map((j,V)=>lt.createElement("li",{key:`${k}-item-action-${V}`},j,V!==c.length-1&&lt.createElement("em",{className:`${k}-item-action-split`})))),X=E?"div":"li",$=lt.createElement(X,Object.assign({},w,E?{}:{ref:t},{className:Tt(`${k}-item`,{[`${k}-item-no-flex`]:!F()},y)}),P==="vertical"&&f?[lt.createElement("div",{className:`${k}-item-main`,key:"content"},o,U),lt.createElement("div",{className:`${k}-item-extra`,key:"extra"},f)]:[o,U,yl(f,{key:"extra"})]);return E?lt.createElement(eG,{ref:t,flex:1,style:l},$):$},rD=T.forwardRef(SW);rD.Meta=wW;const EW=rD,CW=e=>{const{listBorderedCls:t,componentCls:r,paddingLG:o,margin:c,itemPaddingSM:f,itemPaddingLG:y,marginLG:l,borderRadiusLG:w}=e;return{[`${t}`]:{border:`${e.lineWidth}px ${e.lineType} ${e.colorBorder}`,borderRadius:w,[`${r}-header,${r}-footer,${r}-item`]:{paddingInline:o},[`${r}-pagination`]:{margin:`${c}px ${l}px`}},[`${t}${r}-sm`]:{[`${r}-item,${r}-header,${r}-footer`]:{padding:f}},[`${t}${r}-lg`]:{[`${r}-item,${r}-header,${r}-footer`]:{padding:y}}}},TW=e=>{const{componentCls:t,screenSM:r,screenMD:o,marginLG:c,marginSM:f,margin:y}=e;return{[`@media screen and (max-width:${o})`]:{[`${t}`]:{[`${t}-item`]:{[`${t}-item-action`]:{marginInlineStart:c}}},[`${t}-vertical`]:{[`${t}-item`]:{[`${t}-item-extra`]:{marginInlineStart:c}}}},[`@media screen and (max-width: ${r})`]:{[`${t}`]:{[`${t}-item`]:{flexWrap:"wrap",[`${t}-action`]:{marginInlineStart:f}}},[`${t}-vertical`]:{[`${t}-item`]:{flexWrap:"wrap-reverse",[`${t}-item-main`]:{minWidth:e.contentWidth},[`${t}-item-extra`]:{margin:`auto auto ${y}px`}}}}}},IW=e=>{const{componentCls:t,antCls:r,controlHeight:o,minHeight:c,paddingSM:f,marginLG:y,padding:l,itemPadding:w,colorPrimary:E,itemPaddingSM:P,itemPaddingLG:M,paddingXS:z,margin:F,colorText:k,colorTextDescription:U,motionDurationSlow:X,lineWidth:$,headerBg:j,footerBg:V,emptyTextPadding:Z,metaMarginBottom:ee,avatarMarginRight:ne,titleMarginBottom:Q,descriptionFontSize:ie}=e,te={};return["start","center","end"].forEach(ge=>{te[`&-align-${ge}`]={textAlign:ge}}),{[`${t}`]:Object.assign(Object.assign({},ja(e)),{position:"relative","*":{outline:"none"},[`${t}-header`]:{background:j},[`${t}-footer`]:{background:V},[`${t}-header, ${t}-footer`]:{paddingBlock:f},[`${t}-pagination`]:Object.assign(Object.assign({marginBlockStart:y},te),{[`${r}-pagination-options`]:{textAlign:"start"}}),[`${t}-spin`]:{minHeight:c,textAlign:"center"},[`${t}-items`]:{margin:0,padding:0,listStyle:"none"},[`${t}-item`]:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:w,color:k,[`${t}-item-meta`]:{display:"flex",flex:1,alignItems:"flex-start",maxWidth:"100%",[`${t}-item-meta-avatar`]:{marginInlineEnd:ne},[`${t}-item-meta-content`]:{flex:"1 0",width:0,color:k},[`${t}-item-meta-title`]:{margin:`0 0 ${e.marginXXS}px 0`,color:k,fontSize:e.fontSize,lineHeight:e.lineHeight,"> a":{color:k,transition:`all ${X}`,"&:hover":{color:E}}},[`${t}-item-meta-description`]:{color:U,fontSize:ie,lineHeight:e.lineHeight}},[`${t}-item-action`]:{flex:"0 0 auto",marginInlineStart:e.marginXXL,padding:0,fontSize:0,listStyle:"none","& > li":{position:"relative",display:"inline-block",padding:`0 ${z}px`,color:U,fontSize:e.fontSize,lineHeight:e.lineHeight,textAlign:"center","&:first-child":{paddingInlineStart:0}},[`${t}-item-action-split`]:{position:"absolute",insetBlockStart:"50%",insetInlineEnd:0,width:$,height:Math.ceil(e.fontSize*e.lineHeight)-e.marginXXS*2,transform:"translateY(-50%)",backgroundColor:e.colorSplit}}},[`${t}-empty`]:{padding:`${l}px 0`,color:U,fontSize:e.fontSizeSM,textAlign:"center"},[`${t}-empty-text`]:{padding:Z,color:e.colorTextDisabled,fontSize:e.fontSize,textAlign:"center"},[`${t}-item-no-flex`]:{display:"block"}}),[`${t}-grid ${r}-col > ${t}-item`]:{display:"block",maxWidth:"100%",marginBlockEnd:F,paddingBlock:0,borderBlockEnd:"none"},[`${t}-vertical ${t}-item`]:{alignItems:"initial",[`${t}-item-main`]:{display:"block",flex:1},[`${t}-item-extra`]:{marginInlineStart:y},[`${t}-item-meta`]:{marginBlockEnd:ee,[`${t}-item-meta-title`]:{marginBlockStart:0,marginBlockEnd:Q,color:k,fontSize:e.fontSizeLG,lineHeight:e.lineHeightLG}},[`${t}-item-action`]:{marginBlockStart:l,marginInlineStart:"auto","> li":{padding:`0 ${l}px`,"&:first-child":{paddingInlineStart:0}}}},[`${t}-split ${t}-item`]:{borderBlockEnd:`${e.lineWidth}px ${e.lineType} ${e.colorSplit}`,"&:last-child":{borderBlockEnd:"none"}},[`${t}-split ${t}-header`]:{borderBlockEnd:`${e.lineWidth}px ${e.lineType} ${e.colorSplit}`},[`${t}-split${t}-empty ${t}-footer`]:{borderTop:`${e.lineWidth}px ${e.lineType} ${e.colorSplit}`},[`${t}-loading ${t}-spin-nested-loading`]:{minHeight:o},[`${t}-split${t}-something-after-last-item ${r}-spin-container > ${t}-items > ${t}-item:last-child`]:{borderBlockEnd:`${e.lineWidth}px ${e.lineType} ${e.colorSplit}`},[`${t}-lg ${t}-item`]:{padding:M},[`${t}-sm ${t}-item`]:{padding:P},[`${t}:not(${t}-vertical)`]:{[`${t}-item-no-flex`]:{[`${t}-item-action`]:{float:"right"}}}}},MW=ro("List",e=>{const t=Lr(e,{listBorderedCls:`${e.componentCls}-bordered`,minHeight:e.controlHeightLG});return[IW(t),CW(t),TW(t)]},e=>({contentWidth:220,itemPadding:`${e.paddingContentVertical}px 0`,itemPaddingSM:`${e.paddingContentVerticalSM}px ${e.paddingContentHorizontal}px`,itemPaddingLG:`${e.paddingContentVerticalLG}px ${e.paddingContentHorizontalLG}px`,headerBg:"transparent",footerBg:"transparent",emptyTextPadding:e.padding,metaMarginBottom:e.padding,avatarMarginRight:e.padding,titleMarginBottom:e.paddingSM,descriptionFontSize:e.fontSize}));var PW=globalThis&&globalThis.__rest||function(e,t){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(e);c<o.length;c++)t.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(e,o[c])&&(r[o[c]]=e[o[c]]);return r};function AW(e){var t,{pagination:r=!1,prefixCls:o,bordered:c=!1,split:f=!0,className:y,rootClassName:l,style:w,children:E,itemLayout:P,loadMore:M,grid:z,dataSource:F=[],size:k,header:U,footer:X,loading:$=!1,rowKey:j,renderItem:V,locale:Z}=e,ee=PW(e,["pagination","prefixCls","bordered","split","className","rootClassName","style","children","itemLayout","loadMore","grid","dataSource","size","header","footer","loading","rowKey","renderItem","locale"]);const ne=r&&typeof r=="object"?r:{},[Q,ie]=T.useState(ne.defaultCurrent||1),[te,ge]=T.useState(ne.defaultPageSize||10),{getPrefixCls:ue,renderEmpty:oe,direction:fe,list:Ee}=T.useContext(ur),ke={current:1,total:0},Le=rt=>(kt,Pt)=>{var sn;ie(kt),ge(Pt),r&&r[rt]&&((sn=r==null?void 0:r[rt])===null||sn===void 0||sn.call(r,kt,Pt))},Ne=Le("onChange"),pe=Le("onShowSizeChange"),He=(rt,kt)=>{if(!V)return null;let Pt;return typeof j=="function"?Pt=j(rt):j?Pt=rt[j]:Pt=rt.key,Pt||(Pt=`list-item-${kt}`),T.createElement(T.Fragment,{key:Pt},V(rt,kt))},Be=()=>!!(M||r||X),Ge=ue("list",o),[Qe,gt]=MW(Ge);let St=$;typeof St=="boolean"&&(St={spinning:St});const xt=St&&St.spinning,jt=Sl(k);let Ut="";switch(jt){case"large":Ut="lg";break;case"small":Ut="sm";break}const bt=Tt(Ge,{[`${Ge}-vertical`]:P==="vertical",[`${Ge}-${Ut}`]:Ut,[`${Ge}-split`]:f,[`${Ge}-bordered`]:c,[`${Ge}-loading`]:xt,[`${Ge}-grid`]:!!z,[`${Ge}-something-after-last-item`]:Be(),[`${Ge}-rtl`]:fe==="rtl"},Ee==null?void 0:Ee.className,y,l,gt),ut=GG(ke,{total:F.length,current:Q,pageSize:te},r||{}),It=Math.ceil(ut.total/ut.pageSize);ut.current>It&&(ut.current=It);const ft=r?T.createElement("div",{className:Tt(`${Ge}-pagination`,`${Ge}-pagination-align-${(t=ut==null?void 0:ut.align)!==null&&t!==void 0?t:"end"}`)},T.createElement(dW,Object.assign({},ut,{onChange:Ne,onShowSizeChange:pe}))):null;let yt=mn(F);r&&F.length>(ut.current-1)*ut.pageSize&&(yt=mn(F).splice((ut.current-1)*ut.pageSize,ut.pageSize));const ct=Object.keys(z||{}).some(rt=>["xs","sm","md","lg","xl","xxl"].includes(rt)),Mt=OL(ct),Ct=T.useMemo(()=>{for(let rt=0;rt<Iu.length;rt+=1){const kt=Iu[rt];if(Mt[kt])return kt}},[Mt]),Qt=T.useMemo(()=>{if(!z)return;const rt=Ct&&z[Ct]?z[Ct]:z.column;if(rt)return{width:`${100/rt}%`,maxWidth:`${100/rt}%`}},[z==null?void 0:z.column,Ct]);let Vt=xt&&T.createElement("div",{style:{minHeight:53}});if(yt.length>0){const rt=yt.map((kt,Pt)=>He(kt,Pt));Vt=z?T.createElement(rG,{gutter:z.gutter},T.Children.map(rt,kt=>T.createElement("div",{key:kt==null?void 0:kt.key,style:Qt},kt))):T.createElement("ul",{className:`${Ge}-items`},rt)}else!E&&!xt&&(Vt=T.createElement("div",{className:`${Ge}-empty-text`},Z&&Z.emptyText||(oe==null?void 0:oe("List"))||T.createElement(TL,{componentName:"List"})));const Nt=ut.position||"bottom",ot=T.useMemo(()=>({grid:z,itemLayout:P}),[JSON.stringify(z),P]);return Qe(T.createElement(hE.Provider,{value:ot},T.createElement("div",Object.assign({style:Object.assign(Object.assign({},Ee==null?void 0:Ee.style),w),className:bt},ee),(Nt==="top"||Nt==="both")&&ft,U&&T.createElement("div",{className:`${Ge}-header`},U),T.createElement(bW,Object.assign({},St),Vt,E),X&&T.createElement("div",{className:`${Ge}-footer`},X),M||(Nt==="bottom"||Nt==="both")&&ft)))}AW.Item=EW;let Pa=null,pu=e=>e(),fm=[],jy={};function iP(){const{prefixCls:e,getContainer:t,duration:r,rtl:o,maxCount:c,top:f}=jy,y=e??C0().getPrefixCls("message"),l=(t==null?void 0:t())||document.body;return{prefixCls:y,getContainer:()=>l,duration:r,rtl:o,maxCount:c,top:f}}const RW=T.forwardRef((e,t)=>{const[r,o]=T.useState(iP),[c,f]=Cz(r),y=C0(),l=y.getRootPrefixCls(),w=y.getIconPrefixCls(),E=y.getTheme(),P=()=>{o(iP)};return T.useEffect(P,[]),T.useImperativeHandle(t,()=>{const M=Object.assign({},c);return Object.keys(M).forEach(z=>{M[z]=function(){return P(),c[z].apply(c,arguments)}}),{instance:M,sync:P}}),T.createElement(US,{prefixCls:l,iconPrefixCls:w,theme:E},f)});function z0(){if(!Pa){const e=document.createDocumentFragment(),t={fragment:e};Pa=t,pu(()=>{ZS(T.createElement(RW,{ref:r=>{const{instance:o,sync:c}=r||{};Promise.resolve().then(()=>{!t.instance&&o&&(t.instance=o,t.sync=c,z0())})}}),e)});return}Pa.instance&&(fm.forEach(e=>{const{type:t,skipped:r}=e;if(!r)switch(t){case"open":{pu(()=>{const o=Pa.instance.open(Object.assign(Object.assign({},jy),e.config));o==null||o.then(e.resolve),e.setCloseFn(o)});break}case"destroy":pu(()=>{Pa==null||Pa.instance.destroy(e.key)});break;default:pu(()=>{var o;const c=(o=Pa.instance)[t].apply(o,mn(e.args));c==null||c.then(e.resolve),e.setCloseFn(c)})}}),fm=[])}function OW(e){jy=Object.assign(Object.assign({},jy),e),pu(()=>{var t;(t=Pa==null?void 0:Pa.sync)===null||t===void 0||t.call(Pa)})}function zW(e){const t=qS(r=>{let o;const c={type:"open",config:e,resolve:r,setCloseFn:f=>{o=f}};return fm.push(c),()=>{o?pu(()=>{o()}):c.skipped=!0}});return z0(),t}function LW(e,t){const r=qS(o=>{let c;const f={type:e,args:t,resolve:o,setCloseFn:y=>{c=y}};return fm.push(f),()=>{c?pu(()=>{c()}):f.skipped=!0}});return z0(),r}function DW(e){fm.push({type:"destroy",key:e}),z0()}const kW=["success","info","warning","error","loading"],$W={open:zW,destroy:DW,config:OW,useMessage:Cj,_InternalPanelDoNotUseOrYouWillBeFired:vj},iD=$W;kW.forEach(e=>{iD[e]=function(){for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return LW(e,r)}});const hJ=iD;let us=null,Xv=e=>e(),Uy=[],Vy={};function oP(){const{prefixCls:e,getContainer:t,rtl:r,maxCount:o,top:c,bottom:f}=Vy,y=e??C0().getPrefixCls("notification"),l=(t==null?void 0:t())||document.body;return{prefixCls:y,getContainer:()=>l,rtl:r,maxCount:o,top:c,bottom:f}}const FW=T.forwardRef((e,t)=>{const[r,o]=T.useState(oP),[c,f]=iL(r),y=C0(),l=y.getRootPrefixCls(),w=y.getIconPrefixCls(),E=y.getTheme(),P=()=>{o(oP)};return T.useEffect(P,[]),T.useImperativeHandle(t,()=>{const M=Object.assign({},c);return Object.keys(M).forEach(z=>{M[z]=function(){return P(),c[z].apply(c,arguments)}}),{instance:M,sync:P}}),T.createElement(US,{prefixCls:l,iconPrefixCls:w,theme:E},f)});function fE(){if(!us){const e=document.createDocumentFragment(),t={fragment:e};us=t,Xv(()=>{ZS(T.createElement(FW,{ref:r=>{const{instance:o,sync:c}=r||{};Promise.resolve().then(()=>{!t.instance&&o&&(t.instance=o,t.sync=c,fE())})}}),e)});return}us.instance&&(Uy.forEach(e=>{switch(e.type){case"open":{Xv(()=>{us.instance.open(Object.assign(Object.assign({},Vy),e.config))});break}case"destroy":Xv(()=>{us==null||us.instance.destroy(e.key)});break}}),Uy=[])}function BW(e){Vy=Object.assign(Object.assign({},Vy),e),Xv(()=>{var t;(t=us==null?void 0:us.sync)===null||t===void 0||t.call(us)})}function oD(e){Uy.push({type:"open",config:e}),fE()}function NW(e){Uy.push({type:"destroy",key:e}),fE()}const jW=["success","info","warning","error"],UW={open:oD,destroy:NW,config:BW,useNotification:NV,_InternalPanelDoNotUseOrYouWillBeFired:RV},aD=UW;jW.forEach(e=>{aD[e]=t=>oD(Object.assign(Object.assign({},t),{type:e}))});const fJ=aD;var aP=function(t){return t?{left:t.offsetLeft,right:t.parentElement.clientWidth-t.clientWidth-t.offsetLeft,width:t.clientWidth}:null},Fd=function(t){return t!==void 0?"".concat(t,"px"):void 0};function VW(e){var t=e.prefixCls,r=e.containerRef,o=e.value,c=e.getValueIndex,f=e.motionName,y=e.onMotionStart,l=e.onMotionEnd,w=e.direction,E=T.useRef(null),P=T.useState(o),M=Bt(P,2),z=M[0],F=M[1],k=function(fe){var Ee,ke=c(fe),Le=(Ee=r.current)===null||Ee===void 0?void 0:Ee.querySelectorAll(".".concat(t,"-item"))[ke];return(Le==null?void 0:Le.offsetParent)&&Le},U=T.useState(null),X=Bt(U,2),$=X[0],j=X[1],V=T.useState(null),Z=Bt(V,2),ee=Z[0],ne=Z[1];zr(function(){if(z!==o){var oe=k(z),fe=k(o),Ee=aP(oe),ke=aP(fe);F(o),j(Ee),ne(ke),oe&&fe?y():l()}},[o]);var Q=T.useMemo(function(){return Fd(w==="rtl"?-($==null?void 0:$.right):$==null?void 0:$.left)},[w,$]),ie=T.useMemo(function(){return Fd(w==="rtl"?-(ee==null?void 0:ee.right):ee==null?void 0:ee.left)},[w,ee]),te=function(){return{transform:"translateX(var(--thumb-start-left))",width:"var(--thumb-start-width)"}},ge=function(){return{transform:"translateX(var(--thumb-active-left))",width:"var(--thumb-active-width)"}},ue=function(){j(null),ne(null),l()};return!$||!ee?null:T.createElement(Ah,{visible:!0,motionName:f,motionAppear:!0,onAppearStart:te,onAppearActive:ge,onVisibleChanged:ue},function(oe,fe){var Ee=oe.className,ke=oe.style,Le=st(st({},ke),{},{"--thumb-start-left":Q,"--thumb-start-width":Fd($==null?void 0:$.width),"--thumb-active-left":ie,"--thumb-active-width":Fd(ee==null?void 0:ee.width)}),Ne={ref:Ba(E,fe),style:Le,className:Tt("".concat(t,"-thumb"),Ee)};return T.createElement("div",Ne)})}var HW=["prefixCls","direction","options","disabled","defaultValue","value","onChange","className","motionName"];function GW(e){if(typeof e.title<"u")return e.title;if(Zn(e.label)!=="object"){var t;return(t=e.label)===null||t===void 0?void 0:t.toString()}}function WW(e){return e.map(function(t){if(Zn(t)==="object"&&t!==null){var r=GW(t);return st(st({},t),{},{title:r})}return{label:t==null?void 0:t.toString(),title:t==null?void 0:t.toString(),value:t}})}var qW=function(t){var r=t.prefixCls,o=t.className,c=t.disabled,f=t.checked,y=t.label,l=t.title,w=t.value,E=t.onChange,P=function(z){c||E(z,w)};return T.createElement("label",{className:Tt(o,Fe({},"".concat(r,"-item-disabled"),c))},T.createElement("input",{className:"".concat(r,"-item-input"),type:"radio",disabled:c,checked:f,onChange:P}),T.createElement("div",{className:"".concat(r,"-item-label"),title:l},y))},pE=T.forwardRef(function(e,t){var r,o,c=e.prefixCls,f=c===void 0?"rc-segmented":c,y=e.direction,l=e.options,w=e.disabled,E=e.defaultValue,P=e.value,M=e.onChange,z=e.className,F=z===void 0?"":z,k=e.motionName,U=k===void 0?"thumb-motion":k,X=Vr(e,HW),$=T.useRef(null),j=T.useMemo(function(){return Ba($,t)},[$,t]),V=T.useMemo(function(){return WW(l)},[l]),Z=Bs((r=V[0])===null||r===void 0?void 0:r.value,{value:P,defaultValue:E}),ee=Bt(Z,2),ne=ee[0],Q=ee[1],ie=T.useState(!1),te=Bt(ie,2),ge=te[0],ue=te[1],oe=function(ke,Le){w||(Q(Le),M==null||M(Le))},fe=wl(X,["children"]);return T.createElement("div",Sn({},fe,{className:Tt(f,(o={},Fe(o,"".concat(f,"-rtl"),y==="rtl"),Fe(o,"".concat(f,"-disabled"),w),o),F),ref:j}),T.createElement("div",{className:"".concat(f,"-group")},T.createElement(VW,{prefixCls:f,value:ne,containerRef:$,motionName:"".concat(f,"-").concat(U),direction:y,getValueIndex:function(ke){return V.findIndex(function(Le){return Le.value===ke})},onMotionStart:function(){ue(!0)},onMotionEnd:function(){ue(!1)}}),V.map(function(Ee){return T.createElement(qW,Sn({},Ee,{key:Ee.value,prefixCls:f,className:Tt(Ee.className,"".concat(f,"-item"),Fe({},"".concat(f,"-item-selected"),Ee.value===ne&&!ge)),checked:Ee.value===ne,onChange:oe,disabled:!!w||!!Ee.disabled}))})))});pE.displayName="Segmented";pE.defaultProps={options:[]};function sP(e,t){return{[`${e}, ${e}:hover, ${e}:focus`]:{color:t.colorTextDisabled,cursor:"not-allowed"}}}function lP(e){return{backgroundColor:e.itemSelectedBg,boxShadow:e.boxShadowTertiary}}const ZW=Object.assign({overflow:"hidden"},Oy),XW=e=>{const{componentCls:t}=e;return{[t]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},ja(e)),{display:"inline-block",padding:e.segmentedPadding,color:e.itemColor,backgroundColor:e.segmentedBgColor,borderRadius:e.borderRadius,transition:`all ${e.motionDurationMid} ${e.motionEaseInOut}`,[`${t}-group`]:{position:"relative",display:"flex",alignItems:"stretch",justifyItems:"flex-start",width:"100%"},[`&${t}-rtl`]:{direction:"rtl"},[`&${t}-block`]:{display:"flex"},[`&${t}-block ${t}-item`]:{flex:1,minWidth:0},[`${t}-item`]:{position:"relative",textAlign:"center",cursor:"pointer",transition:`color ${e.motionDurationMid} ${e.motionEaseInOut}`,borderRadius:e.borderRadiusSM,transform:"translateZ(0)","&-selected":Object.assign(Object.assign({},lP(e)),{color:e.itemSelectedColor}),"&::after":{content:'""',position:"absolute",width:"100%",height:"100%",top:0,insetInlineStart:0,borderRadius:"inherit",transition:`background-color ${e.motionDurationMid}`,pointerEvents:"none"},[`&:hover:not(${t}-item-selected):not(${t}-item-disabled)`]:{color:e.itemHoverColor,"&::after":{backgroundColor:e.itemHoverBg}},[`&:active:not(${t}-item-selected):not(${t}-item-disabled)`]:{color:e.itemHoverColor,"&::after":{backgroundColor:e.itemActiveBg}},"&-label":Object.assign({minHeight:e.controlHeight-e.segmentedPadding*2,lineHeight:`${e.controlHeight-e.segmentedPadding*2}px`,padding:`0 ${e.segmentedPaddingHorizontal}px`},ZW),"&-icon + *":{marginInlineStart:e.marginSM/2},"&-input":{position:"absolute",insetBlockStart:0,insetInlineStart:0,width:0,height:0,opacity:0,pointerEvents:"none"}},[`${t}-thumb`]:Object.assign(Object.assign({},lP(e)),{position:"absolute",insetBlockStart:0,insetInlineStart:0,width:0,height:"100%",padding:`${e.paddingXXS}px 0`,borderRadius:e.borderRadiusSM,[`& ~ ${t}-item:not(${t}-item-selected):not(${t}-item-disabled)::after`]:{backgroundColor:"transparent"}}),[`&${t}-lg`]:{borderRadius:e.borderRadiusLG,[`${t}-item-label`]:{minHeight:e.controlHeightLG-e.segmentedPadding*2,lineHeight:`${e.controlHeightLG-e.segmentedPadding*2}px`,padding:`0 ${e.segmentedPaddingHorizontal}px`,fontSize:e.fontSizeLG},[`${t}-item, ${t}-thumb`]:{borderRadius:e.borderRadius}},[`&${t}-sm`]:{borderRadius:e.borderRadiusSM,[`${t}-item-label`]:{minHeight:e.controlHeightSM-e.segmentedPadding*2,lineHeight:`${e.controlHeightSM-e.segmentedPadding*2}px`,padding:`0 ${e.segmentedPaddingHorizontalSM}px`},[`${t}-item, ${t}-thumb`]:{borderRadius:e.borderRadiusXS}}}),sP(`&-disabled ${t}-item`,e)),sP(`${t}-item-disabled`,e)),{[`${t}-thumb-motion-appear-active`]:{transition:`transform ${e.motionDurationSlow} ${e.motionEaseInOut}, width ${e.motionDurationSlow} ${e.motionEaseInOut}`,willChange:"transform, width"}})}},KW=ro("Segmented",e=>{const{lineWidth:t,lineWidthBold:r,colorBgLayout:o}=e,c=Lr(e,{segmentedPadding:r,segmentedBgColor:o,segmentedPaddingHorizontal:e.controlPaddingHorizontal-t,segmentedPaddingHorizontalSM:e.controlPaddingHorizontalSM-t});return[XW(c)]},e=>{const{colorTextLabel:t,colorText:r,colorFillSecondary:o,colorBgElevated:c,colorFill:f}=e;return{itemColor:t,itemHoverColor:r,itemHoverBg:o,itemSelectedBg:c,itemActiveBg:f,itemSelectedColor:r}});var cP=globalThis&&globalThis.__rest||function(e,t){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(e);c<o.length;c++)t.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(e,o[c])&&(r[o[c]]=e[o[c]]);return r};function YW(e){return typeof e=="object"&&!!(e!=null&&e.icon)}const JW=T.forwardRef((e,t)=>{const{prefixCls:r,className:o,rootClassName:c,block:f,options:y=[],size:l="middle",style:w}=e,E=cP(e,["prefixCls","className","rootClassName","block","options","size","style"]),{getPrefixCls:P,direction:M,segmented:z}=T.useContext(ur),F=P("segmented",r),[k,U]=KW(F),X=Sl(l),$=T.useMemo(()=>y.map(Z=>{if(YW(Z)){const{icon:ee,label:ne}=Z,Q=cP(Z,["icon","label"]);return Object.assign(Object.assign({},Q),{label:T.createElement(T.Fragment,null,T.createElement("span",{className:`${F}-item-icon`},ee),ne&&T.createElement("span",null,ne))})}return Z}),[y,F]),j=Tt(o,c,z==null?void 0:z.className,{[`${F}-block`]:f,[`${F}-sm`]:X==="small",[`${F}-lg`]:X==="large"},U),V=Object.assign(Object.assign({},z==null?void 0:z.style),w);return k(T.createElement(pE,Object.assign({},E,{className:j,style:V,options:$,ref:t,prefixCls:F,direction:M})))}),pJ=JW;var QW=globalThis&&globalThis.__rest||function(e,t){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(e);c<o.length;c++)t.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(e,o[c])&&(r[o[c]]=e[o[c]]);return r};const eq={border:0,background:"transparent",padding:0,lineHeight:"inherit",display:"inline-block"},tq=T.forwardRef((e,t)=>{const r=E=>{const{keyCode:P}=E;P===Ht.ENTER&&E.preventDefault()},o=E=>{const{keyCode:P}=E,{onClick:M}=e;P===Ht.ENTER&&M&&M()},{style:c,noStyle:f,disabled:y}=e,l=QW(e,["style","noStyle","disabled"]);let w={};return f||(w=Object.assign({},eq)),y&&(w.pointerEvents="none"),w=Object.assign(Object.assign({},w),c),T.createElement("div",Object.assign({role:"button",tabIndex:0,ref:t},l,{onKeyDown:r,onKeyUp:o,style:w}))}),uP=tq;var nq={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2L263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"}}]},name:"copy",theme:"outlined"};const rq=nq;var iq=function(t,r){return T.createElement(Xi,Sn({},t,{ref:r,icon:rq}))};const oq=T.forwardRef(iq);var aq={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"};const sq=aq;var lq=function(t,r){return T.createElement(Xi,Sn({},t,{ref:r,icon:sq}))};const cq=T.forwardRef(lq);var uq=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,r=[],o=0;o<e.rangeCount;o++)r.push(e.getRangeAt(o));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null;break}return e.removeAllRanges(),function(){e.type==="Caret"&&e.removeAllRanges(),e.rangeCount||r.forEach(function(c){e.addRange(c)}),t&&t.focus()}},dq=uq,dP={"text/plain":"Text","text/html":"Url",default:"Text"},hq="Copy to clipboard: #{key}, Enter";function fq(e){var t=(/mac os x/i.test(navigator.userAgent)?"":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}function pq(e,t){var r,o,c,f,y,l,w=!1;t||(t={}),r=t.debug||!1;try{c=dq(),f=document.createRange(),y=document.getSelection(),l=document.createElement("span"),l.textContent=e,l.ariaHidden="true",l.style.all="unset",l.style.position="fixed",l.style.top=0,l.style.clip="rect(0, 0, 0, 0)",l.style.whiteSpace="pre",l.style.webkitUserSelect="text",l.style.MozUserSelect="text",l.style.msUserSelect="text",l.style.userSelect="text",l.addEventListener("copy",function(P){if(P.stopPropagation(),t.format)if(P.preventDefault(),typeof P.clipboardData>"u"){r&&console.warn("unable to use e.clipboardData"),r&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var M=dP[t.format]||dP.default;window.clipboardData.setData(M,e)}else P.clipboardData.clearData(),P.clipboardData.setData(t.format,e);t.onCopy&&(P.preventDefault(),t.onCopy(P.clipboardData))}),document.body.appendChild(l),f.selectNodeContents(l),y.addRange(f);var E=document.execCommand("copy");if(!E)throw new Error("copy command was unsuccessful");w=!0}catch(P){r&&console.error("unable to copy using execCommand: ",P),r&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),w=!0}catch(M){r&&console.error("unable to copy using clipboardData: ",M),r&&console.error("falling back to prompt"),o=fq("message"in t?t.message:hq),window.prompt(o,e)}}finally{y&&(typeof y.removeRange=="function"?y.removeRange(f):y.removeAllRanges()),l&&document.body.removeChild(l),c()}return w}var mq=pq;const gq=xc(mq);var vq={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 170h-60c-4.4 0-8 3.6-8 8v518H310v-73c0-6.7-7.8-10.5-13-6.3l-141.9 112a8 8 0 000 12.6l141.9 112c5.3 4.2 13 .4 13-6.3v-75h498c35.3 0 64-28.7 64-64V178c0-4.4-3.6-8-8-8z"}}]},name:"enter",theme:"outlined"};const yq=vq;var _q=function(t,r){return T.createElement(Xi,Sn({},t,{ref:r,icon:yq}))};const xq=T.forwardRef(_q),bq=(e,t,r,o)=>{const{titleMarginBottom:c,fontWeightStrong:f}=o;return{marginBottom:c,color:r,fontWeight:f,fontSize:e,lineHeight:t}},wq=e=>{const t=[1,2,3,4,5],r={};return t.forEach(o=>{r[`
      h${o}&,
      div&-h${o},
      div&-h${o} > textarea,
      h${o}
    `]=bq(e[`fontSizeHeading${o}`],e[`lineHeightHeading${o}`],e.colorTextHeading,e)}),r},Sq=e=>{const{componentCls:t}=e;return{"a&, a":Object.assign(Object.assign({},XO(e)),{textDecoration:e.linkDecoration,"&:active, &:hover":{textDecoration:e.linkHoverDecoration},[`&[disabled], &${t}-disabled`]:{color:e.colorTextDisabled,cursor:"not-allowed","&:active, &:hover":{color:e.colorTextDisabled},"&:active":{pointerEvents:"none"}}})}},Eq=e=>({code:{margin:"0 0.2em",paddingInline:"0.4em",paddingBlock:"0.2em 0.1em",fontSize:"85%",fontFamily:e.fontFamilyCode,background:"rgba(150, 150, 150, 0.1)",border:"1px solid rgba(100, 100, 100, 0.2)",borderRadius:3},kbd:{margin:"0 0.2em",paddingInline:"0.4em",paddingBlock:"0.15em 0.1em",fontSize:"90%",fontFamily:e.fontFamilyCode,background:"rgba(150, 150, 150, 0.06)",border:"1px solid rgba(100, 100, 100, 0.2)",borderBottomWidth:2,borderRadius:3},mark:{padding:0,backgroundColor:gN[2]},"u, ins":{textDecoration:"underline",textDecorationSkipInk:"auto"},"s, del":{textDecoration:"line-through"},strong:{fontWeight:600},"ul, ol":{marginInline:0,marginBlock:"0 1em",padding:0,li:{marginInline:"20px 0",marginBlock:0,paddingInline:"4px 0",paddingBlock:0}},ul:{listStyleType:"circle",ul:{listStyleType:"disc"}},ol:{listStyleType:"decimal"},"pre, blockquote":{margin:"1em 0"},pre:{padding:"0.4em 0.6em",whiteSpace:"pre-wrap",wordWrap:"break-word",background:"rgba(150, 150, 150, 0.1)",border:"1px solid rgba(100, 100, 100, 0.2)",borderRadius:3,fontFamily:e.fontFamilyCode,code:{display:"inline",margin:0,padding:0,fontSize:"inherit",fontFamily:"inherit",background:"transparent",border:0}},blockquote:{paddingInline:"0.6em 0",paddingBlock:0,borderInlineStart:"4px solid rgba(100, 100, 100, 0.2)",opacity:.85}}),Cq=e=>{const{componentCls:t,paddingSM:r}=e,o=r;return{"&-edit-content":{position:"relative","div&":{insetInlineStart:-e.paddingSM,marginTop:-o,marginBottom:`calc(1em - ${o}px)`},[`${t}-edit-content-confirm`]:{position:"absolute",insetInlineEnd:e.marginXS+2,insetBlockEnd:e.marginXS,color:e.colorTextDescription,fontWeight:"normal",fontSize:e.fontSize,fontStyle:"normal",pointerEvents:"none"},textarea:{margin:"0!important",MozTransition:"none",height:"1em"}}}},Tq=e=>({"&-copy-success":{"\n    &,\n    &:hover,\n    &:focus":{color:e.colorSuccess}}}),Iq=()=>({"\n  a&-ellipsis,\n  span&-ellipsis\n  ":{display:"inline-block",maxWidth:"100%"},"&-single-line":{whiteSpace:"nowrap"},"&-ellipsis-single-line":{overflow:"hidden",textOverflow:"ellipsis","a&, span&":{verticalAlign:"bottom"},"> code":{paddingBlock:0,maxWidth:"calc(100% - 1.2em)",display:"inline-block",overflow:"hidden",textOverflow:"ellipsis",verticalAlign:"bottom"}},"&-ellipsis-multiple-line":{display:"-webkit-box",overflow:"hidden",WebkitLineClamp:3,WebkitBoxOrient:"vertical"}}),Mq=e=>{const{componentCls:t,titleMarginTop:r}=e;return{[t]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:e.colorText,wordBreak:"break-word",lineHeight:e.lineHeight,[`&${t}-secondary`]:{color:e.colorTextDescription},[`&${t}-success`]:{color:e.colorSuccess},[`&${t}-warning`]:{color:e.colorWarning},[`&${t}-danger`]:{color:e.colorError,"a&:active, a&:focus":{color:e.colorErrorActive},"a&:hover":{color:e.colorErrorHover}},[`&${t}-disabled`]:{color:e.colorTextDisabled,cursor:"not-allowed",userSelect:"none"},"\n        div&,\n        p\n      ":{marginBottom:"1em"}},wq(e)),{[`
      & + h1${t},
      & + h2${t},
      & + h3${t},
      & + h4${t},
      & + h5${t}
      `]:{marginTop:r},"\n      div,\n      ul,\n      li,\n      p,\n      h1,\n      h2,\n      h3,\n      h4,\n      h5":{"\n        + h1,\n        + h2,\n        + h3,\n        + h4,\n        + h5\n        ":{marginTop:r}}}),Eq(e)),Sq(e)),{[`
        ${t}-expand,
        ${t}-edit,
        ${t}-copy
      `]:Object.assign(Object.assign({},XO(e)),{marginInlineStart:e.marginXXS})}),Cq(e)),Tq(e)),Iq()),{"&-rtl":{direction:"rtl"}})}},sD=ro("Typography",e=>[Mq(e)],()=>({titleMarginTop:"1.2em",titleMarginBottom:"0.5em"})),Pq=e=>{const{prefixCls:t,"aria-label":r,className:o,style:c,direction:f,maxLength:y,autoSize:l=!0,value:w,onSave:E,onCancel:P,onEnd:M,component:z,enterIcon:F=T.createElement(xq,null)}=e,k=T.useRef(null),U=T.useRef(!1),X=T.useRef(),[$,j]=T.useState(w);T.useEffect(()=>{j(w)},[w]),T.useEffect(()=>{if(k.current&&k.current.resizableTextArea){const{textArea:Ee}=k.current.resizableTextArea;Ee.focus();const{length:ke}=Ee.value;Ee.setSelectionRange(ke,ke)}},[]);const V=Ee=>{let{target:ke}=Ee;j(ke.value.replace(/[\n\r]/g,""))},Z=()=>{U.current=!0},ee=()=>{U.current=!1},ne=Ee=>{let{keyCode:ke}=Ee;U.current||(X.current=ke)},Q=()=>{E($.trim())},ie=Ee=>{let{keyCode:ke,ctrlKey:Le,altKey:Ne,metaKey:pe,shiftKey:He}=Ee;X.current===ke&&!U.current&&!Le&&!Ne&&!pe&&!He&&(ke===Ht.ENTER?(Q(),M==null||M()):ke===Ht.ESC&&P())},te=()=>{Q()},ge=z?`${t}-${z}`:"",[ue,oe]=sD(t),fe=Tt(t,`${t}-edit-content`,{[`${t}-rtl`]:f==="rtl"},o,ge,oe);return ue(T.createElement("div",{className:fe,style:c},T.createElement(XL,{ref:k,maxLength:y,value:$,onChange:V,onKeyDown:ne,onKeyUp:ie,onCompositionStart:Z,onCompositionEnd:ee,onBlur:te,"aria-label":r,rows:1,autoSize:l}),F!==null?yl(F,{className:`${t}-edit-content-confirm`}):null))},Aq=Pq;var Rq=globalThis&&globalThis.__rest||function(e,t){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(e);c<o.length;c++)t.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(e,o[c])&&(r[o[c]]=e[o[c]]);return r};const Oq=T.forwardRef((e,t)=>{const{prefixCls:r,component:o="article",className:c,rootClassName:f,setContentRef:y,children:l,direction:w,style:E}=e,P=Rq(e,["prefixCls","component","className","rootClassName","setContentRef","children","direction","style"]),{getPrefixCls:M,direction:z,typography:F}=T.useContext(ur),k=w??z;let U=t;y&&(U=Ba(t,y));const X=M("typography",r),[$,j]=sD(X),V=Tt(X,F==null?void 0:F.className,{[`${X}-rtl`]:k==="rtl"},c,f,j),Z=Object.assign(Object.assign({},F==null?void 0:F.style),E);return $(T.createElement(o,Object.assign({className:V,style:Z,ref:U},P),l))}),lD=Oq;function I1(e,t){return T.useMemo(()=>{const r=!!e;return[r,Object.assign(Object.assign({},t),r&&typeof e=="object"?e:null)]},[e])}const zq=(e,t)=>{const r=T.useRef(!1);T.useEffect(()=>{r.current?e():r.current=!0},t)},Lq=zq;function cD(e){const t=typeof e;return t==="string"||t==="number"}function Dq(e){let t=0;return e.forEach(r=>{cD(r)?t+=String(r).length:t+=1}),t}function M1(e,t){let r=0;const o=[];for(let c=0;c<e.length;c+=1){if(r===t)return o;const f=e[c],l=cD(f)?String(f).length:1,w=r+l;if(w>t){const E=t-r;return o.push(String(f).slice(0,E)),o}o.push(f),r=w}return e}const kq=0,Mv=1,hP=2,P1=3,A1=4,$q=e=>{let{enabledMeasure:t,children:r,text:o,width:c,fontSize:f,rows:y,onEllipsis:l}=e;const[[w,E,P],M]=T.useState([0,0,0]),[z,F]=T.useState(0),[k,U]=T.useState(kq),[X,$]=T.useState(0),j=T.useRef(null),V=T.useRef(null),Z=T.useMemo(()=>fl(o),[o]),ee=T.useMemo(()=>Dq(Z),[Z]),ne=T.useMemo(()=>!t||k!==P1?z&&k!==A1&&t?r(M1(Z,z),z<ee):r(Z,!1):r(M1(Z,E),E<ee),[t,k,r,Z,E,ee]);zr(()=>{t&&c&&f&&ee&&(U(Mv),M([0,Math.ceil(ee/2),ee]))},[t,c,f,o,ee,y]),zr(()=>{var ge;k===Mv&&$(((ge=j.current)===null||ge===void 0?void 0:ge.offsetHeight)||0)},[k]),zr(()=>{var ge,ue;if(X){if(k===Mv){const oe=((ge=V.current)===null||ge===void 0?void 0:ge.offsetHeight)||0,fe=y*X;oe<=fe?(U(A1),l(!1)):U(hP)}else if(k===hP)if(w!==P){const oe=((ue=V.current)===null||ue===void 0?void 0:ue.offsetHeight)||0,fe=y*X;let Ee=w,ke=P;w===P-1?ke=w:oe<=fe?Ee=E:ke=E;const Le=Math.ceil((Ee+ke)/2);M([Ee,Le,ke])}else U(P1),F(E),l(!0)}},[k,w,P,y,X]);const Q={width:c,whiteSpace:"normal",margin:0,padding:0},ie=(ge,ue,oe)=>T.createElement("span",{"aria-hidden":!0,ref:ue,style:Object.assign({position:"fixed",display:"block",left:0,top:0,zIndex:-9999,visibility:"hidden",pointerEvents:"none",fontSize:Math.ceil(f/2)*2},oe)},ge),te=(ge,ue)=>{const oe=M1(Z,ge);return ie(r(oe,!0),ue,Q)};return T.createElement(T.Fragment,null,ne,t&&k!==P1&&k!==A1&&T.createElement(T.Fragment,null,ie("lg",j,{wordBreak:"keep-all",whiteSpace:"nowrap"}),k===Mv?ie(r(Z,!1),V,Q):te(E,V)))},Fq=$q,Bq=e=>{let{enabledEllipsis:t,isEllipsis:r,children:o,tooltipProps:c}=e;return!(c!=null&&c.title)||!t?o:T.createElement(xw,Object.assign({open:r?void 0:!1},c),o)},Nq=Bq;var jq=globalThis&&globalThis.__rest||function(e,t){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(e);c<o.length;c++)t.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(e,o[c])&&(r[o[c]]=e[o[c]]);return r};function Uq(e,t){let{mark:r,code:o,underline:c,delete:f,strong:y,keyboard:l,italic:w}=e,E=t;function P(M,z){z&&(E=T.createElement(M,{},E))}return P("strong",y),P("u",c),P("del",f),P("code",o),P("mark",r),P("kbd",l),P("i",w),E}function Pv(e,t,r){return e===!0||e===void 0?t:e||r&&t}function fP(e){return e===!1?[!1,!1]:Array.isArray(e)?e:[e]}const Vq="...",Hq=T.forwardRef((e,t)=>{var r,o,c;const{prefixCls:f,className:y,style:l,type:w,disabled:E,children:P,ellipsis:M,editable:z,copyable:F,component:k,title:U}=e,X=jq(e,["prefixCls","className","style","type","disabled","children","ellipsis","editable","copyable","component","title"]),{getPrefixCls:$,direction:j}=T.useContext(ur),[V]=FS("Text"),Z=T.useRef(null),ee=T.useRef(null),ne=$("typography",f),Q=wl(X,["mark","code","delete","underline","strong","keyboard","italic"]),[ie,te]=I1(z),[ge,ue]=Bs(!1,{value:te.editing}),{triggerType:oe=["icon"]}=te,fe=W=>{var J;W&&((J=te.onStart)===null||J===void 0||J.call(te)),ue(W)};Lq(()=>{var W;ge||(W=ee.current)===null||W===void 0||W.focus()},[ge]);const Ee=W=>{W==null||W.preventDefault(),fe(!0)},ke=W=>{var J;(J=te.onChange)===null||J===void 0||J.call(te,W),fe(!1)},Le=()=>{var W;(W=te.onCancel)===null||W===void 0||W.call(te),fe(!1)},[Ne,pe]=I1(F),[He,Be]=T.useState(!1),Ge=T.useRef(null),Qe={};pe.format&&(Qe.format=pe.format);const gt=()=>{Ge.current&&clearTimeout(Ge.current)},St=W=>{var J;W==null||W.preventDefault(),W==null||W.stopPropagation(),gq(pe.text||String(P)||"",Qe),Be(!0),gt(),Ge.current=setTimeout(()=>{Be(!1)},3e3),(J=pe.onCopy)===null||J===void 0||J.call(pe,W)};T.useEffect(()=>gt,[]);const[xt,jt]=T.useState(!1),[Ut,bt]=T.useState(!1),[ut,It]=T.useState(!1),[ft,yt]=T.useState(!1),[ct,Mt]=T.useState(!1),[Ct,Qt]=T.useState(!0),[Vt,Nt]=I1(M,{expandable:!1}),ot=Vt&&!ut,{rows:rt=1}=Nt,kt=T.useMemo(()=>!ot||Nt.suffix!==void 0||Nt.onEllipsis||Nt.expandable||ie||Ne,[ot,Nt,ie,Ne]);zr(()=>{Vt&&!kt&&(jt(dM("webkitLineClamp")),bt(dM("textOverflow")))},[kt,Vt]);const Pt=T.useMemo(()=>kt?!1:rt===1?Ut:xt,[kt,Ut,xt]),sn=ot&&(Pt?ct:ft),An=ot&&rt===1&&Pt,Mn=ot&&rt>1&&Pt,on=W=>{var J;It(!0),(J=Nt.onExpand)===null||J===void 0||J.call(Nt,W)},[Vn,Nn]=T.useState(0),[zn,yn]=T.useState(0),rn=(W,J)=>{let{offsetWidth:de}=W;var Se;Nn(de),yn(parseInt((Se=window.getComputedStyle)===null||Se===void 0?void 0:Se.call(window,J).fontSize,10)||0)},Wn=W=>{var J;yt(W),ft!==W&&((J=Nt.onEllipsis)===null||J===void 0||J.call(Nt,W))};T.useEffect(()=>{const W=Z.current;if(Vt&&Pt&&W){const J=Mn?W.offsetHeight<W.scrollHeight:W.offsetWidth<W.scrollWidth;ct!==J&&Mt(J)}},[Vt,Pt,P,Mn,Ct]),T.useEffect(()=>{const W=Z.current;if(typeof IntersectionObserver>"u"||!W||!Pt||!ot)return;const J=new IntersectionObserver(()=>{Qt(!!W.offsetParent)});return J.observe(W),()=>{J.disconnect()}},[Pt,ot]);let jn={};Nt.tooltip===!0?jn={title:(r=te.text)!==null&&r!==void 0?r:P}:T.isValidElement(Nt.tooltip)?jn={title:Nt.tooltip}:typeof Nt.tooltip=="object"?jn=Object.assign({title:(o=te.text)!==null&&o!==void 0?o:P},Nt.tooltip):jn={title:Nt.tooltip};const pr=T.useMemo(()=>{const W=J=>["string","number"].includes(typeof J);if(!(!Vt||Pt)){if(W(te.text))return te.text;if(W(P))return P;if(W(U))return U;if(W(jn.title))return jn.title}},[Vt,Pt,U,jn.title,sn]);if(ge)return T.createElement(Aq,{value:(c=te.text)!==null&&c!==void 0?c:typeof P=="string"?P:"",onSave:ke,onCancel:Le,onEnd:te.onEnd,prefixCls:ne,className:y,style:l,direction:j,component:k,maxLength:te.maxLength,autoSize:te.autoSize,enterIcon:te.enterIcon});const ar=()=>{const{expandable:W,symbol:J}=Nt;if(!W)return null;let de;return J?de=J:de=V==null?void 0:V.expand,T.createElement("a",{key:"expand",className:`${ne}-expand`,onClick:on,"aria-label":V==null?void 0:V.expand},de)},qn=()=>{if(!ie)return;const{icon:W,tooltip:J}=te,de=fl(J)[0]||(V==null?void 0:V.edit),Se=typeof de=="string"?de:"";return oe.includes("icon")?T.createElement(xw,{key:"edit",title:J===!1?"":de},T.createElement(uP,{ref:ee,className:`${ne}-edit`,onClick:Ee,"aria-label":Se},W||T.createElement(cq,{role:"button"}))):null},Qn=()=>{if(!Ne)return;const{tooltips:W,icon:J}=pe,de=fP(W),Se=fP(J),Ie=He?Pv(de[1],V==null?void 0:V.copied):Pv(de[0],V==null?void 0:V.copy),Me=He?V==null?void 0:V.copied:V==null?void 0:V.copy,De=typeof Ie=="string"?Ie:Me;return T.createElement(xw,{key:"copy",title:Ie},T.createElement(uP,{className:Tt(`${ne}-copy`,He&&`${ne}-copy-success`),onClick:St,"aria-label":De},He?Pv(Se[1],T.createElement(ML,null),!0):Pv(Se[0],T.createElement(oq,null),!0)))},Rr=W=>[W&&ar(),qn(),Qn()],_e=W=>[W&&T.createElement("span",{"aria-hidden":!0,key:"ellipsis"},Vq),Nt.suffix,Rr(W)];return T.createElement(bl,{onResize:rn,disabled:!ot||Pt},W=>T.createElement(Nq,{tooltipProps:jn,enabledEllipsis:ot,isEllipsis:sn},T.createElement(lD,Object.assign({className:Tt({[`${ne}-${w}`]:w,[`${ne}-disabled`]:E,[`${ne}-ellipsis`]:Vt,[`${ne}-single-line`]:ot&&rt===1,[`${ne}-ellipsis-single-line`]:An,[`${ne}-ellipsis-multiple-line`]:Mn},y),prefixCls:f,style:Object.assign(Object.assign({},l),{WebkitLineClamp:Mn?rt:void 0}),component:k,ref:Ba(W,Z,t),direction:j,onClick:oe.includes("text")?Ee:void 0,"aria-label":pr==null?void 0:pr.toString(),title:U},Q),T.createElement(Fq,{enabledMeasure:ot&&!Pt,text:P,rows:rt,width:Vn,fontSize:zn,onEllipsis:Wn},(J,de)=>{let Se=J;return J.length&&de&&pr&&(Se=T.createElement("span",{key:"show-content","aria-hidden":!0},Se)),Uq(e,T.createElement(T.Fragment,null,Se,_e(de)))}))))}),L0=Hq;var Gq=globalThis&&globalThis.__rest||function(e,t){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(e);c<o.length;c++)t.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(e,o[c])&&(r[o[c]]=e[o[c]]);return r};const Wq=T.forwardRef((e,t)=>{var{ellipsis:r,rel:o}=e,c=Gq(e,["ellipsis","rel"]);const f=Object.assign(Object.assign({},c),{rel:o===void 0&&c.target==="_blank"?"noopener noreferrer":o});return delete f.navigate,T.createElement(L0,Object.assign({},f,{ref:t,ellipsis:!!r,component:"a"}))}),qq=Wq,Zq=T.forwardRef((e,t)=>T.createElement(L0,Object.assign({ref:t},e,{component:"div"}))),Xq=Zq;var Kq=globalThis&&globalThis.__rest||function(e,t){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(e);c<o.length;c++)t.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(e,o[c])&&(r[o[c]]=e[o[c]]);return r};const Yq=(e,t)=>{var{ellipsis:r}=e,o=Kq(e,["ellipsis"]);const c=T.useMemo(()=>r&&typeof r=="object"?wl(r,["expandable","rows"]):r,[r]);return T.createElement(L0,Object.assign({ref:t},o,{ellipsis:c,component:"span"}))},Jq=T.forwardRef(Yq);var Qq=globalThis&&globalThis.__rest||function(e,t){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(e);c<o.length;c++)t.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(e,o[c])&&(r[o[c]]=e[o[c]]);return r};const eZ=[1,2,3,4,5],tZ=T.forwardRef((e,t)=>{const{level:r=1}=e,o=Qq(e,["level"]);let c;return eZ.includes(r)?c=`h${r}`:c="h1",T.createElement(L0,Object.assign({ref:t},o,{component:c}))}),nZ=tZ,Pm=lD;Pm.Text=Jq;Pm.Link=qq;Pm.Title=nZ;Pm.Paragraph=Xq;const mJ=Pm;lt.Component;var rZ={subtree:!0,childList:!0,attributeFilter:["style","class"]};function iZ(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:rZ;T.useEffect(function(){if(!(!no()||!e)){var o,c=Array.isArray(e)?e:[e];return"MutationObserver"in window&&(o=new MutationObserver(t),c.forEach(function(f){o.observe(f,r)})),function(){var f,y;(f=o)===null||f===void 0||f.takeRecords(),(y=o)===null||y===void 0||y.disconnect()}}},[r,e])}const uD=3;function R1(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;const o=document.createElement("canvas"),c=o.getContext("2d"),f=e*r,y=t*r;return o.setAttribute("width",`${f}px`),o.setAttribute("height",`${y}px`),c.save(),[c,o,f,y]}function oZ(){function e(t,r,o,c,f,y,l,w){const[E,P,M,z]=R1(c,f,o);if(t instanceof HTMLImageElement)E.drawImage(t,0,0,M,z);else{const{color:Ge,fontSize:Qe,fontStyle:gt,fontWeight:St,fontFamily:xt,textAlign:jt}=y,Ut=Number(Qe)*o;E.font=`${gt} normal ${St} ${Ut}px/${f}px ${xt}`,E.fillStyle=Ge,E.textAlign=jt,E.textBaseline="top";const bt=Array.isArray(t)?t:[t];bt==null||bt.forEach((ut,It)=>{E.fillText(ut??"",M/2,It*(Ut+uD*o))})}const F=Math.PI/180*Number(r),k=Math.max(c,f),[U,X,$]=R1(k,k,o);U.translate($/2,$/2),U.rotate(F),M>0&&z>0&&U.drawImage(P,-M/2,-z/2);function j(Ge,Qe){const gt=Ge*Math.cos(F)-Qe*Math.sin(F),St=Ge*Math.sin(F)+Qe*Math.cos(F);return[gt,St]}let V=0,Z=0,ee=0,ne=0;const Q=M/2,ie=z/2;[[0-Q,0-ie],[0+Q,0-ie],[0+Q,0+ie],[0-Q,0+ie]].forEach(Ge=>{let[Qe,gt]=Ge;const[St,xt]=j(Qe,gt);V=Math.min(V,St),Z=Math.max(Z,St),ee=Math.min(ee,xt),ne=Math.max(ne,xt)});const ge=V+$/2,ue=ee+$/2,oe=Z-V,fe=ne-ee,Ee=l*o,ke=w*o,Le=(oe+Ee)*2,Ne=fe+ke,[pe,He]=R1(Le,Ne);function Be(){let Ge=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,Qe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;pe.drawImage(X,ge,ue,oe,fe,Ge,Qe,oe,fe)}return Be(),Be(oe+Ee,-fe/2-ke/2),Be(oe+Ee,+fe/2+ke/2),[He.toDataURL(),Le/o,Ne/o]}return e}function aZ(e){const t=lt.useRef(!1),r=lt.useRef(),o=jo(e);return()=>{t.current||(t.current=!0,o(),r.current=yi(()=>{t.current=!1}))}}function sZ(e){return e.replace(/([A-Z])/g,"-$1").toLowerCase()}function lZ(e){return Object.keys(e).map(t=>`${sZ(t)}: ${e[t]};`).join(" ")}function cZ(){return window.devicePixelRatio||1}const uZ=(e,t)=>{let r=!1;return e.removedNodes.length&&(r=Array.from(e.removedNodes).some(o=>t(o))),e.type==="attributes"&&t(e.target)&&(r=!0),r},dZ={visibility:"visible !important"};function hZ(e){const[t]=T.useState(()=>new Map);return[(f,y,l)=>{if(l){if(!t.get(l)){const E=document.createElement("div");t.set(l,E)}const w=t.get(l);w.setAttribute("style",lZ(Object.assign(Object.assign(Object.assign({},e),{backgroundImage:`url('${f}')`,backgroundSize:`${Math.floor(y)}px`}),dZ))),w.removeAttribute("class"),l.append(w)}},f=>{const y=t.get(f);y&&f&&f.removeChild(y),t.delete(f)},f=>Array.from(t.values()).includes(f)]}function pP(e,t){return e.size===t.size?e:t}const mP=100,gP=100,fZ=e=>{var t,r;const{zIndex:o=9,rotate:c=-22,width:f,height:y,image:l,content:w,font:E={},style:P,className:M,rootClassName:z,gap:F=[mP,gP],offset:k,children:U,inherit:X=!0}=e,[,$]=Na(),{color:j=$.colorFill,fontSize:V=$.fontSizeLG,fontWeight:Z="normal",fontStyle:ee="normal",fontFamily:ne="sans-serif",textAlign:Q="center"}=E,[ie=mP,te=gP]=F,ge=ie/2,ue=te/2,oe=(t=k==null?void 0:k[0])!==null&&t!==void 0?t:ge,fe=(r=k==null?void 0:k[1])!==null&&r!==void 0?r:ue,Ee=lt.useMemo(()=>{const yt={zIndex:o,position:"absolute",left:0,top:0,width:"100%",height:"100%",pointerEvents:"none",backgroundRepeat:"repeat"};let ct=oe-ge,Mt=fe-ue;return ct>0&&(yt.left=`${ct}px`,yt.width=`calc(100% - ${ct}px)`,ct=0),Mt>0&&(yt.top=`${Mt}px`,yt.height=`calc(100% - ${Mt}px)`,Mt=0),yt.backgroundPosition=`${ct}px ${Mt}px`,yt},[o,oe,ge,fe,ue]),[ke,Le]=lt.useState(),[Ne,pe]=lt.useState(new Set),He=lt.useMemo(()=>{const yt=ke?[ke]:[];return[].concat(yt,mn(Array.from(Ne)))},[ke,Ne]),Be=yt=>{let ct=120,Mt=64;if(!l&&yt.measureText){yt.font=`${Number(V)}px ${ne}`;const Ct=Array.isArray(w)?w:[w],Qt=Ct.map(Vt=>{const Nt=yt.measureText(Vt);return[Nt.width,Nt.fontBoundingBoxAscent+Nt.fontBoundingBoxDescent]});ct=Math.ceil(Math.max.apply(Math,mn(Qt.map(Vt=>Vt[0])))),Mt=Math.ceil(Math.max.apply(Math,mn(Qt.map(Vt=>Vt[1]))))*Ct.length+(Ct.length-1)*uD}return[f??ct,y??Mt]},Ge=oZ(),[Qe,gt]=lt.useState(null),xt=aZ(()=>{const ct=document.createElement("canvas").getContext("2d");if(ct){const Mt=cZ(),[Ct,Qt]=Be(ct),Vt=Nt=>{const[ot,rt]=Ge(Nt||"",c,Mt,Ct,Qt,{color:j,fontSize:V,fontStyle:ee,fontWeight:Z,fontFamily:ne,textAlign:Q},ie,te);gt([ot,rt])};if(l){const Nt=new Image;Nt.onload=()=>{Vt(Nt)},Nt.onerror=()=>{Vt(w)},Nt.crossOrigin="anonymous",Nt.referrerPolicy="no-referrer",Nt.src=l}else Vt(w)}}),[jt,Ut,bt]=hZ(Ee);T.useEffect(()=>{Qe&&He.forEach(yt=>{jt(Qe[0],Qe[1],yt)})},[Qe,He]),iZ(He,yt=>{yt.forEach(ct=>{uZ(ct,bt)&&xt()})}),T.useEffect(xt,[c,o,f,y,l,w,j,V,Z,ee,ne,Q,ie,te,oe,fe]);const It=lt.useMemo(()=>({add:yt=>{pe(ct=>{const Mt=new Set(ct);return Mt.add(yt),pP(ct,Mt)})},remove:yt=>{Ut(yt),pe(ct=>{const Mt=new Set(ct);return Mt.delete(yt),pP(ct,Mt)})}}),[]),ft=X?lt.createElement(NU.Provider,{value:It},U):U;return lt.createElement("div",{ref:Le,className:Tt(M,z),style:Object.assign({position:"relative"},P)},ft)},gJ=fZ;var mE={},dD={exports:{}};(function(e){function t(r){return r&&r.__esModule?r:{default:r}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(dD);var gE=dD.exports,D0={};Object.defineProperty(D0,"__esModule",{value:!0});D0.default=void 0;D0.default={items_per_page:"/",jump_to:"",jump_to_confirm:"",page:"",prev_page:"",next_page:"",prev_5:" 5 ",next_5:" 5 ",prev_3:" 3 ",next_3:" 3 ",page_size:""};var k0={},Am={},$0={};Object.defineProperty($0,"__esModule",{value:!0});$0.default=void 0;var pZ={locale:"zh_CN",today:"",now:"",backToToday:"",ok:"",timeSelect:"",dateSelect:"",weekSelect:"",clear:"",month:"",year:"",previousMonth:" ()",nextMonth:" ()",monthSelect:"",yearSelect:"",decadeSelect:"",yearFormat:"YYYY",dayFormat:"D",dateFormat:"YYYYMD",dateTimeFormat:"YYYYMD HHmmss",previousYear:" (Control)",nextYear:" (Control)",previousDecade:"",nextDecade:"",previousCentury:"",nextCentury:""};$0.default=pZ;var Rm={};Object.defineProperty(Rm,"__esModule",{value:!0});Rm.default=void 0;const mZ={placeholder:"",rangePlaceholder:["",""]};Rm.default=mZ;var hD=gE.default;Object.defineProperty(Am,"__esModule",{value:!0});Am.default=void 0;var gZ=hD($0),vZ=hD(Rm);const fD={lang:Object.assign({placeholder:"",yearPlaceholder:"",quarterPlaceholder:"",monthPlaceholder:"",weekPlaceholder:"",rangePlaceholder:["",""],rangeYearPlaceholder:["",""],rangeMonthPlaceholder:["",""],rangeQuarterPlaceholder:["",""],rangeWeekPlaceholder:["",""]},gZ.default),timePickerLocale:Object.assign({},vZ.default)};fD.lang.ok="";Am.default=fD;var yZ=gE.default;Object.defineProperty(k0,"__esModule",{value:!0});k0.default=void 0;var _Z=yZ(Am);k0.default=_Z.default;var F0=gE.default;Object.defineProperty(mE,"__esModule",{value:!0});var xZ=mE.default=void 0,bZ=F0(D0),wZ=F0(k0),SZ=F0(Am),EZ=F0(Rm);const ia="${label}${type}",CZ={locale:"zh-cn",Pagination:bZ.default,DatePicker:SZ.default,TimePicker:EZ.default,Calendar:wZ.default,global:{placeholder:""},Table:{filterTitle:"",filterConfirm:"",filterReset:"",filterEmptyText:"",filterCheckall:"",filterSearchPlaceholder:"",selectAll:"",selectInvert:"",selectNone:"",selectionAll:"",sortTitle:"",expand:"",collapse:"",triggerDesc:"",triggerAsc:"",cancelSort:""},Modal:{okText:"",cancelText:"",justOkText:""},Tour:{Next:"",Previous:"",Finish:""},Popconfirm:{cancelText:"",okText:""},Transfer:{titles:["",""],searchPlaceholder:"",itemUnit:"",itemsUnit:"",remove:"",selectCurrent:"",removeCurrent:"",selectAll:"",removeAll:"",selectInvert:""},Upload:{uploading:"",removeFile:"",uploadError:"",previewFile:"",downloadFile:""},Empty:{description:""},Icon:{icon:""},Text:{edit:"",copy:"",copied:"",expand:""},PageHeader:{back:""},Form:{optional:"",defaultValidateMessages:{default:"${label}",required:"${label}",enum:"${label}[${enum}]",whitespace:"${label}",date:{format:"${label}",parse:"${label}",invalid:"${label}"},types:{string:ia,method:ia,array:ia,object:ia,number:ia,date:ia,boolean:ia,integer:ia,float:ia,regexp:ia,email:ia,url:ia,hex:ia},string:{len:"${label}${len}",min:"${label}${min}",max:"${label}${max}",range:"${label}${min}-${max}"},number:{len:"${label}${len}",min:"${label}${min}",max:"${label}${max}",range:"${label}${min}-${max}"},array:{len:"${len}${label}",min:"${min}${label}",max:"${max}${label}",range:"${label}${min}-${max}"},pattern:{mismatch:"${label}${pattern}"}}},Image:{preview:""},QRCode:{expired:"",refresh:""},ColorPicker:{presetEmpty:""}};xZ=mE.default=CZ;var vP={},TZ,yP=_c;TZ=vP.createRoot=yP.createRoot,vP.hydrateRoot=yP.hydrateRoot;const _P=e=>{let t;const r=new Set,o=(w,E)=>{const P=typeof w=="function"?w(t):w;if(!Object.is(P,t)){const M=t;t=E??typeof P!="object"?P:Object.assign({},t,P),r.forEach(z=>z(t,M))}},c=()=>t,l={setState:o,getState:c,subscribe:w=>(r.add(w),()=>r.delete(w)),destroy:()=>{r.clear()}};return t=e(o,c,l),l},IZ=e=>e?_P(e):_P;var pD={exports:{}},mD={},gD={exports:{}},vD={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Eh=T;function MZ(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var PZ=typeof Object.is=="function"?Object.is:MZ,AZ=Eh.useState,RZ=Eh.useEffect,OZ=Eh.useLayoutEffect,zZ=Eh.useDebugValue;function LZ(e,t){var r=t(),o=AZ({inst:{value:r,getSnapshot:t}}),c=o[0].inst,f=o[1];return OZ(function(){c.value=r,c.getSnapshot=t,O1(c)&&f({inst:c})},[e,r,t]),RZ(function(){return O1(c)&&f({inst:c}),e(function(){O1(c)&&f({inst:c})})},[e]),zZ(r),r}function O1(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!PZ(e,r)}catch{return!0}}function DZ(e,t){return t()}var kZ=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?DZ:LZ;vD.useSyncExternalStore=Eh.useSyncExternalStore!==void 0?Eh.useSyncExternalStore:kZ;gD.exports=vD;var $Z=gD.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B0=T,FZ=$Z;function BZ(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var NZ=typeof Object.is=="function"?Object.is:BZ,jZ=FZ.useSyncExternalStore,UZ=B0.useRef,VZ=B0.useEffect,HZ=B0.useMemo,GZ=B0.useDebugValue;mD.useSyncExternalStoreWithSelector=function(e,t,r,o,c){var f=UZ(null);if(f.current===null){var y={hasValue:!1,value:null};f.current=y}else y=f.current;f=HZ(function(){function w(F){if(!E){if(E=!0,P=F,F=o(F),c!==void 0&&y.hasValue){var k=y.value;if(c(k,F))return M=k}return M=F}if(k=M,NZ(P,F))return k;var U=o(F);return c!==void 0&&c(k,U)?k:(P=F,M=U)}var E=!1,P,M,z=r===void 0?null:r;return[function(){return w(t())},z===null?void 0:function(){return w(z())}]},[t,r,o,c]);var l=jZ(e,f[0],f[1]);return VZ(function(){y.hasValue=!0,y.value=l},[l]),GZ(l),l};pD.exports=mD;var WZ=pD.exports;const qZ=xc(WZ),{useDebugValue:ZZ}=lt,{useSyncExternalStoreWithSelector:XZ}=qZ;function KZ(e,t=e.getState,r){const o=XZ(e.subscribe,e.getState,e.getServerState||e.getState,t,r);return ZZ(o),o}const xP=e=>{const t=typeof e=="function"?IZ(e):e,r=(o,c)=>KZ(t,o,c);return Object.assign(r,t),r},vJ=e=>e?xP(e):xP;function yD(e,t){return function(){return e.apply(t,arguments)}}const{toString:YZ}=Object.prototype,{getPrototypeOf:vE}=Object,N0=(e=>t=>{const r=YZ.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),Ns=e=>(e=e.toLowerCase(),t=>N0(t)===e),j0=e=>t=>typeof t===e,{isArray:zh}=Array,pm=j0("undefined");function JZ(e){return e!==null&&!pm(e)&&e.constructor!==null&&!pm(e.constructor)&&La(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const _D=Ns("ArrayBuffer");function QZ(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&_D(e.buffer),t}const eX=j0("string"),La=j0("function"),xD=j0("number"),U0=e=>e!==null&&typeof e=="object",tX=e=>e===!0||e===!1,Kv=e=>{if(N0(e)!=="object")return!1;const t=vE(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},nX=Ns("Date"),rX=Ns("File"),iX=Ns("Blob"),oX=Ns("FileList"),aX=e=>U0(e)&&La(e.pipe),sX=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||La(e.append)&&((t=N0(e))==="formdata"||t==="object"&&La(e.toString)&&e.toString()==="[object FormData]"))},lX=Ns("URLSearchParams"),cX=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Om(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let o,c;if(typeof e!="object"&&(e=[e]),zh(e))for(o=0,c=e.length;o<c;o++)t.call(null,e[o],o,e);else{const f=r?Object.getOwnPropertyNames(e):Object.keys(e),y=f.length;let l;for(o=0;o<y;o++)l=f[o],t.call(null,e[l],l,e)}}function bD(e,t){t=t.toLowerCase();const r=Object.keys(e);let o=r.length,c;for(;o-- >0;)if(c=r[o],t===c.toLowerCase())return c;return null}const wD=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),SD=e=>!pm(e)&&e!==wD;function Cw(){const{caseless:e}=SD(this)&&this||{},t={},r=(o,c)=>{const f=e&&bD(t,c)||c;Kv(t[f])&&Kv(o)?t[f]=Cw(t[f],o):Kv(o)?t[f]=Cw({},o):zh(o)?t[f]=o.slice():t[f]=o};for(let o=0,c=arguments.length;o<c;o++)arguments[o]&&Om(arguments[o],r);return t}const uX=(e,t,r,{allOwnKeys:o}={})=>(Om(t,(c,f)=>{r&&La(c)?e[f]=yD(c,r):e[f]=c},{allOwnKeys:o}),e),dX=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),hX=(e,t,r,o)=>{e.prototype=Object.create(t.prototype,o),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},fX=(e,t,r,o)=>{let c,f,y;const l={};if(t=t||{},e==null)return t;do{for(c=Object.getOwnPropertyNames(e),f=c.length;f-- >0;)y=c[f],(!o||o(y,e,t))&&!l[y]&&(t[y]=e[y],l[y]=!0);e=r!==!1&&vE(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},pX=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const o=e.indexOf(t,r);return o!==-1&&o===r},mX=e=>{if(!e)return null;if(zh(e))return e;let t=e.length;if(!xD(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},gX=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&vE(Uint8Array)),vX=(e,t)=>{const o=(e&&e[Symbol.iterator]).call(e);let c;for(;(c=o.next())&&!c.done;){const f=c.value;t.call(e,f[0],f[1])}},yX=(e,t)=>{let r;const o=[];for(;(r=e.exec(t))!==null;)o.push(r);return o},_X=Ns("HTMLFormElement"),xX=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,o,c){return o.toUpperCase()+c}),bP=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),bX=Ns("RegExp"),ED=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),o={};Om(r,(c,f)=>{let y;(y=t(c,f,e))!==!1&&(o[f]=y||c)}),Object.defineProperties(e,o)},wX=e=>{ED(e,(t,r)=>{if(La(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const o=e[r];if(La(o)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},SX=(e,t)=>{const r={},o=c=>{c.forEach(f=>{r[f]=!0})};return zh(e)?o(e):o(String(e).split(t)),r},EX=()=>{},CX=(e,t)=>(e=+e,Number.isFinite(e)?e:t),z1="abcdefghijklmnopqrstuvwxyz",wP="0123456789",CD={DIGIT:wP,ALPHA:z1,ALPHA_DIGIT:z1+z1.toUpperCase()+wP},TX=(e=16,t=CD.ALPHA_DIGIT)=>{let r="";const{length:o}=t;for(;e--;)r+=t[Math.random()*o|0];return r};function IX(e){return!!(e&&La(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const MX=e=>{const t=new Array(10),r=(o,c)=>{if(U0(o)){if(t.indexOf(o)>=0)return;if(!("toJSON"in o)){t[c]=o;const f=zh(o)?[]:{};return Om(o,(y,l)=>{const w=r(y,c+1);!pm(w)&&(f[l]=w)}),t[c]=void 0,f}}return o};return r(e,0)},PX=Ns("AsyncFunction"),AX=e=>e&&(U0(e)||La(e))&&La(e.then)&&La(e.catch),Ot={isArray:zh,isArrayBuffer:_D,isBuffer:JZ,isFormData:sX,isArrayBufferView:QZ,isString:eX,isNumber:xD,isBoolean:tX,isObject:U0,isPlainObject:Kv,isUndefined:pm,isDate:nX,isFile:rX,isBlob:iX,isRegExp:bX,isFunction:La,isStream:aX,isURLSearchParams:lX,isTypedArray:gX,isFileList:oX,forEach:Om,merge:Cw,extend:uX,trim:cX,stripBOM:dX,inherits:hX,toFlatObject:fX,kindOf:N0,kindOfTest:Ns,endsWith:pX,toArray:mX,forEachEntry:vX,matchAll:yX,isHTMLForm:_X,hasOwnProperty:bP,hasOwnProp:bP,reduceDescriptors:ED,freezeMethods:wX,toObjectSet:SX,toCamelCase:xX,noop:EX,toFiniteNumber:CX,findKey:bD,global:wD,isContextDefined:SD,ALPHABET:CD,generateString:TX,isSpecCompliantForm:IX,toJSONObject:MX,isAsyncFn:PX,isThenable:AX};function fr(e,t,r,o,c){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),o&&(this.request=o),c&&(this.response=c)}Ot.inherits(fr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Ot.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const TD=fr.prototype,ID={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{ID[e]={value:e}});Object.defineProperties(fr,ID);Object.defineProperty(TD,"isAxiosError",{value:!0});fr.from=(e,t,r,o,c,f)=>{const y=Object.create(TD);return Ot.toFlatObject(e,y,function(w){return w!==Error.prototype},l=>l!=="isAxiosError"),fr.call(y,e.message,t,r,o,c),y.cause=e,y.name=e.name,f&&Object.assign(y,f),y};const RX=null;function Tw(e){return Ot.isPlainObject(e)||Ot.isArray(e)}function MD(e){return Ot.endsWith(e,"[]")?e.slice(0,-2):e}function SP(e,t,r){return e?e.concat(t).map(function(c,f){return c=MD(c),!r&&f?"["+c+"]":c}).join(r?".":""):t}function OX(e){return Ot.isArray(e)&&!e.some(Tw)}const zX=Ot.toFlatObject(Ot,{},null,function(t){return/^is[A-Z]/.test(t)});function V0(e,t,r){if(!Ot.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=Ot.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(U,X){return!Ot.isUndefined(X[U])});const o=r.metaTokens,c=r.visitor||P,f=r.dots,y=r.indexes,w=(r.Blob||typeof Blob<"u"&&Blob)&&Ot.isSpecCompliantForm(t);if(!Ot.isFunction(c))throw new TypeError("visitor must be a function");function E(k){if(k===null)return"";if(Ot.isDate(k))return k.toISOString();if(!w&&Ot.isBlob(k))throw new fr("Blob is not supported. Use a Buffer instead.");return Ot.isArrayBuffer(k)||Ot.isTypedArray(k)?w&&typeof Blob=="function"?new Blob([k]):Buffer.from(k):k}function P(k,U,X){let $=k;if(k&&!X&&typeof k=="object"){if(Ot.endsWith(U,"{}"))U=o?U:U.slice(0,-2),k=JSON.stringify(k);else if(Ot.isArray(k)&&OX(k)||(Ot.isFileList(k)||Ot.endsWith(U,"[]"))&&($=Ot.toArray(k)))return U=MD(U),$.forEach(function(V,Z){!(Ot.isUndefined(V)||V===null)&&t.append(y===!0?SP([U],Z,f):y===null?U:U+"[]",E(V))}),!1}return Tw(k)?!0:(t.append(SP(X,U,f),E(k)),!1)}const M=[],z=Object.assign(zX,{defaultVisitor:P,convertValue:E,isVisitable:Tw});function F(k,U){if(!Ot.isUndefined(k)){if(M.indexOf(k)!==-1)throw Error("Circular reference detected in "+U.join("."));M.push(k),Ot.forEach(k,function($,j){(!(Ot.isUndefined($)||$===null)&&c.call(t,$,Ot.isString(j)?j.trim():j,U,z))===!0&&F($,U?U.concat(j):[j])}),M.pop()}}if(!Ot.isObject(e))throw new TypeError("data must be an object");return F(e),t}function EP(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(o){return t[o]})}function yE(e,t){this._pairs=[],e&&V0(e,this,t)}const PD=yE.prototype;PD.append=function(t,r){this._pairs.push([t,r])};PD.toString=function(t){const r=t?function(o){return t.call(this,o,EP)}:EP;return this._pairs.map(function(c){return r(c[0])+"="+r(c[1])},"").join("&")};function LX(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function AD(e,t,r){if(!t)return e;const o=r&&r.encode||LX,c=r&&r.serialize;let f;if(c?f=c(t,r):f=Ot.isURLSearchParams(t)?t.toString():new yE(t,r).toString(o),f){const y=e.indexOf("#");y!==-1&&(e=e.slice(0,y)),e+=(e.indexOf("?")===-1?"?":"&")+f}return e}class DX{constructor(){this.handlers=[]}use(t,r,o){return this.handlers.push({fulfilled:t,rejected:r,synchronous:o?o.synchronous:!1,runWhen:o?o.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){Ot.forEach(this.handlers,function(o){o!==null&&t(o)})}}const CP=DX,RD={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},kX=typeof URLSearchParams<"u"?URLSearchParams:yE,$X=typeof FormData<"u"?FormData:null,FX=typeof Blob<"u"?Blob:null,BX={isBrowser:!0,classes:{URLSearchParams:kX,FormData:$X,Blob:FX},protocols:["http","https","file","blob","url","data"]},OD=typeof window<"u"&&typeof document<"u",NX=(e=>OD&&["ReactNative","NativeScript","NS"].indexOf(e)<0)(typeof navigator<"u"&&navigator.product),jX=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),UX=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:OD,hasStandardBrowserEnv:NX,hasStandardBrowserWebWorkerEnv:jX},Symbol.toStringTag,{value:"Module"})),ks={...UX,...BX};function VX(e,t){return V0(e,new ks.classes.URLSearchParams,Object.assign({visitor:function(r,o,c,f){return ks.isNode&&Ot.isBuffer(r)?(this.append(o,r.toString("base64")),!1):f.defaultVisitor.apply(this,arguments)}},t))}function HX(e){return Ot.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function GX(e){const t={},r=Object.keys(e);let o;const c=r.length;let f;for(o=0;o<c;o++)f=r[o],t[f]=e[f];return t}function zD(e){function t(r,o,c,f){let y=r[f++];const l=Number.isFinite(+y),w=f>=r.length;return y=!y&&Ot.isArray(c)?c.length:y,w?(Ot.hasOwnProp(c,y)?c[y]=[c[y],o]:c[y]=o,!l):((!c[y]||!Ot.isObject(c[y]))&&(c[y]=[]),t(r,o,c[y],f)&&Ot.isArray(c[y])&&(c[y]=GX(c[y])),!l)}if(Ot.isFormData(e)&&Ot.isFunction(e.entries)){const r={};return Ot.forEachEntry(e,(o,c)=>{t(HX(o),c,r,0)}),r}return null}function WX(e,t,r){if(Ot.isString(e))try{return(t||JSON.parse)(e),Ot.trim(e)}catch(o){if(o.name!=="SyntaxError")throw o}return(r||JSON.stringify)(e)}const _E={transitional:RD,adapter:["xhr","http"],transformRequest:[function(t,r){const o=r.getContentType()||"",c=o.indexOf("application/json")>-1,f=Ot.isObject(t);if(f&&Ot.isHTMLForm(t)&&(t=new FormData(t)),Ot.isFormData(t))return c&&c?JSON.stringify(zD(t)):t;if(Ot.isArrayBuffer(t)||Ot.isBuffer(t)||Ot.isStream(t)||Ot.isFile(t)||Ot.isBlob(t))return t;if(Ot.isArrayBufferView(t))return t.buffer;if(Ot.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let l;if(f){if(o.indexOf("application/x-www-form-urlencoded")>-1)return VX(t,this.formSerializer).toString();if((l=Ot.isFileList(t))||o.indexOf("multipart/form-data")>-1){const w=this.env&&this.env.FormData;return V0(l?{"files[]":t}:t,w&&new w,this.formSerializer)}}return f||c?(r.setContentType("application/json",!1),WX(t)):t}],transformResponse:[function(t){const r=this.transitional||_E.transitional,o=r&&r.forcedJSONParsing,c=this.responseType==="json";if(t&&Ot.isString(t)&&(o&&!this.responseType||c)){const y=!(r&&r.silentJSONParsing)&&c;try{return JSON.parse(t)}catch(l){if(y)throw l.name==="SyntaxError"?fr.from(l,fr.ERR_BAD_RESPONSE,this,null,this.response):l}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ks.classes.FormData,Blob:ks.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Ot.forEach(["delete","get","head","post","put","patch"],e=>{_E.headers[e]={}});const xE=_E,qX=Ot.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),ZX=e=>{const t={};let r,o,c;return e&&e.split(`
`).forEach(function(y){c=y.indexOf(":"),r=y.substring(0,c).trim().toLowerCase(),o=y.substring(c+1).trim(),!(!r||t[r]&&qX[r])&&(r==="set-cookie"?t[r]?t[r].push(o):t[r]=[o]:t[r]=t[r]?t[r]+", "+o:o)}),t},TP=Symbol("internals");function gp(e){return e&&String(e).trim().toLowerCase()}function Yv(e){return e===!1||e==null?e:Ot.isArray(e)?e.map(Yv):String(e)}function XX(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let o;for(;o=r.exec(e);)t[o[1]]=o[2];return t}const KX=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function L1(e,t,r,o,c){if(Ot.isFunction(o))return o.call(this,t,r);if(c&&(t=r),!!Ot.isString(t)){if(Ot.isString(o))return t.indexOf(o)!==-1;if(Ot.isRegExp(o))return o.test(t)}}function YX(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,o)=>r.toUpperCase()+o)}function JX(e,t){const r=Ot.toCamelCase(" "+t);["get","set","has"].forEach(o=>{Object.defineProperty(e,o+r,{value:function(c,f,y){return this[o].call(this,t,c,f,y)},configurable:!0})})}class H0{constructor(t){t&&this.set(t)}set(t,r,o){const c=this;function f(l,w,E){const P=gp(w);if(!P)throw new Error("header name must be a non-empty string");const M=Ot.findKey(c,P);(!M||c[M]===void 0||E===!0||E===void 0&&c[M]!==!1)&&(c[M||w]=Yv(l))}const y=(l,w)=>Ot.forEach(l,(E,P)=>f(E,P,w));return Ot.isPlainObject(t)||t instanceof this.constructor?y(t,r):Ot.isString(t)&&(t=t.trim())&&!KX(t)?y(ZX(t),r):t!=null&&f(r,t,o),this}get(t,r){if(t=gp(t),t){const o=Ot.findKey(this,t);if(o){const c=this[o];if(!r)return c;if(r===!0)return XX(c);if(Ot.isFunction(r))return r.call(this,c,o);if(Ot.isRegExp(r))return r.exec(c);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=gp(t),t){const o=Ot.findKey(this,t);return!!(o&&this[o]!==void 0&&(!r||L1(this,this[o],o,r)))}return!1}delete(t,r){const o=this;let c=!1;function f(y){if(y=gp(y),y){const l=Ot.findKey(o,y);l&&(!r||L1(o,o[l],l,r))&&(delete o[l],c=!0)}}return Ot.isArray(t)?t.forEach(f):f(t),c}clear(t){const r=Object.keys(this);let o=r.length,c=!1;for(;o--;){const f=r[o];(!t||L1(this,this[f],f,t,!0))&&(delete this[f],c=!0)}return c}normalize(t){const r=this,o={};return Ot.forEach(this,(c,f)=>{const y=Ot.findKey(o,f);if(y){r[y]=Yv(c),delete r[f];return}const l=t?YX(f):String(f).trim();l!==f&&delete r[f],r[l]=Yv(c),o[l]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return Ot.forEach(this,(o,c)=>{o!=null&&o!==!1&&(r[c]=t&&Ot.isArray(o)?o.join(", "):o)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const o=new this(t);return r.forEach(c=>o.set(c)),o}static accessor(t){const o=(this[TP]=this[TP]={accessors:{}}).accessors,c=this.prototype;function f(y){const l=gp(y);o[l]||(JX(c,y),o[l]=!0)}return Ot.isArray(t)?t.forEach(f):f(t),this}}H0.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Ot.reduceDescriptors(H0.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(o){this[r]=o}}});Ot.freezeMethods(H0);const hl=H0;function D1(e,t){const r=this||xE,o=t||r,c=hl.from(o.headers);let f=o.data;return Ot.forEach(e,function(l){f=l.call(r,f,c.normalize(),t?t.status:void 0)}),c.normalize(),f}function LD(e){return!!(e&&e.__CANCEL__)}function zm(e,t,r){fr.call(this,e??"canceled",fr.ERR_CANCELED,t,r),this.name="CanceledError"}Ot.inherits(zm,fr,{__CANCEL__:!0});function QX(e,t,r){const o=r.config.validateStatus;!r.status||!o||o(r.status)?e(r):t(new fr("Request failed with status code "+r.status,[fr.ERR_BAD_REQUEST,fr.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}const eK=ks.hasStandardBrowserEnv?{write(e,t,r,o,c,f){const y=[e+"="+encodeURIComponent(t)];Ot.isNumber(r)&&y.push("expires="+new Date(r).toGMTString()),Ot.isString(o)&&y.push("path="+o),Ot.isString(c)&&y.push("domain="+c),f===!0&&y.push("secure"),document.cookie=y.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function tK(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function nK(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}function DD(e,t){return e&&!tK(t)?nK(e,t):t}const rK=ks.hasStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");let o;function c(f){let y=f;return t&&(r.setAttribute("href",y),y=r.href),r.setAttribute("href",y),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return o=c(window.location.href),function(y){const l=Ot.isString(y)?c(y):y;return l.protocol===o.protocol&&l.host===o.host}}():function(){return function(){return!0}}();function iK(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function oK(e,t){e=e||10;const r=new Array(e),o=new Array(e);let c=0,f=0,y;return t=t!==void 0?t:1e3,function(w){const E=Date.now(),P=o[f];y||(y=E),r[c]=w,o[c]=E;let M=f,z=0;for(;M!==c;)z+=r[M++],M=M%e;if(c=(c+1)%e,c===f&&(f=(f+1)%e),E-y<t)return;const F=P&&E-P;return F?Math.round(z*1e3/F):void 0}}function IP(e,t){let r=0;const o=oK(50,250);return c=>{const f=c.loaded,y=c.lengthComputable?c.total:void 0,l=f-r,w=o(l),E=f<=y;r=f;const P={loaded:f,total:y,progress:y?f/y:void 0,bytes:l,rate:w||void 0,estimated:w&&y&&E?(y-f)/w:void 0,event:c};P[t?"download":"upload"]=!0,e(P)}}const aK=typeof XMLHttpRequest<"u",sK=aK&&function(e){return new Promise(function(r,o){let c=e.data;const f=hl.from(e.headers).normalize();let{responseType:y,withXSRFToken:l}=e,w;function E(){e.cancelToken&&e.cancelToken.unsubscribe(w),e.signal&&e.signal.removeEventListener("abort",w)}let P;if(Ot.isFormData(c)){if(ks.hasStandardBrowserEnv||ks.hasStandardBrowserWebWorkerEnv)f.setContentType(!1);else if((P=f.getContentType())!==!1){const[U,...X]=P?P.split(";").map($=>$.trim()).filter(Boolean):[];f.setContentType([U||"multipart/form-data",...X].join("; "))}}let M=new XMLHttpRequest;if(e.auth){const U=e.auth.username||"",X=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";f.set("Authorization","Basic "+btoa(U+":"+X))}const z=DD(e.baseURL,e.url);M.open(e.method.toUpperCase(),AD(z,e.params,e.paramsSerializer),!0),M.timeout=e.timeout;function F(){if(!M)return;const U=hl.from("getAllResponseHeaders"in M&&M.getAllResponseHeaders()),$={data:!y||y==="text"||y==="json"?M.responseText:M.response,status:M.status,statusText:M.statusText,headers:U,config:e,request:M};QX(function(V){r(V),E()},function(V){o(V),E()},$),M=null}if("onloadend"in M?M.onloadend=F:M.onreadystatechange=function(){!M||M.readyState!==4||M.status===0&&!(M.responseURL&&M.responseURL.indexOf("file:")===0)||setTimeout(F)},M.onabort=function(){M&&(o(new fr("Request aborted",fr.ECONNABORTED,e,M)),M=null)},M.onerror=function(){o(new fr("Network Error",fr.ERR_NETWORK,e,M)),M=null},M.ontimeout=function(){let X=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const $=e.transitional||RD;e.timeoutErrorMessage&&(X=e.timeoutErrorMessage),o(new fr(X,$.clarifyTimeoutError?fr.ETIMEDOUT:fr.ECONNABORTED,e,M)),M=null},ks.hasStandardBrowserEnv&&(l&&Ot.isFunction(l)&&(l=l(e)),l||l!==!1&&rK(z))){const U=e.xsrfHeaderName&&e.xsrfCookieName&&eK.read(e.xsrfCookieName);U&&f.set(e.xsrfHeaderName,U)}c===void 0&&f.setContentType(null),"setRequestHeader"in M&&Ot.forEach(f.toJSON(),function(X,$){M.setRequestHeader($,X)}),Ot.isUndefined(e.withCredentials)||(M.withCredentials=!!e.withCredentials),y&&y!=="json"&&(M.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&M.addEventListener("progress",IP(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&M.upload&&M.upload.addEventListener("progress",IP(e.onUploadProgress)),(e.cancelToken||e.signal)&&(w=U=>{M&&(o(!U||U.type?new zm(null,e,M):U),M.abort(),M=null)},e.cancelToken&&e.cancelToken.subscribe(w),e.signal&&(e.signal.aborted?w():e.signal.addEventListener("abort",w)));const k=iK(z);if(k&&ks.protocols.indexOf(k)===-1){o(new fr("Unsupported protocol "+k+":",fr.ERR_BAD_REQUEST,e));return}M.send(c||null)})},Iw={http:RX,xhr:sK};Ot.forEach(Iw,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const MP=e=>`- ${e}`,lK=e=>Ot.isFunction(e)||e===null||e===!1,kD={getAdapter:e=>{e=Ot.isArray(e)?e:[e];const{length:t}=e;let r,o;const c={};for(let f=0;f<t;f++){r=e[f];let y;if(o=r,!lK(r)&&(o=Iw[(y=String(r)).toLowerCase()],o===void 0))throw new fr(`Unknown adapter '${y}'`);if(o)break;c[y||"#"+f]=o}if(!o){const f=Object.entries(c).map(([l,w])=>`adapter ${l} `+(w===!1?"is not supported by the environment":"is not available in the build"));let y=t?f.length>1?`since :
`+f.map(MP).join(`
`):" "+MP(f[0]):"as no adapter specified";throw new fr("There is no suitable adapter to dispatch the request "+y,"ERR_NOT_SUPPORT")}return o},adapters:Iw};function k1(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new zm(null,e)}function PP(e){return k1(e),e.headers=hl.from(e.headers),e.data=D1.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),kD.getAdapter(e.adapter||xE.adapter)(e).then(function(o){return k1(e),o.data=D1.call(e,e.transformResponse,o),o.headers=hl.from(o.headers),o},function(o){return LD(o)||(k1(e),o&&o.response&&(o.response.data=D1.call(e,e.transformResponse,o.response),o.response.headers=hl.from(o.response.headers))),Promise.reject(o)})}const AP=e=>e instanceof hl?e.toJSON():e;function Ch(e,t){t=t||{};const r={};function o(E,P,M){return Ot.isPlainObject(E)&&Ot.isPlainObject(P)?Ot.merge.call({caseless:M},E,P):Ot.isPlainObject(P)?Ot.merge({},P):Ot.isArray(P)?P.slice():P}function c(E,P,M){if(Ot.isUndefined(P)){if(!Ot.isUndefined(E))return o(void 0,E,M)}else return o(E,P,M)}function f(E,P){if(!Ot.isUndefined(P))return o(void 0,P)}function y(E,P){if(Ot.isUndefined(P)){if(!Ot.isUndefined(E))return o(void 0,E)}else return o(void 0,P)}function l(E,P,M){if(M in t)return o(E,P);if(M in e)return o(void 0,E)}const w={url:f,method:f,data:f,baseURL:y,transformRequest:y,transformResponse:y,paramsSerializer:y,timeout:y,timeoutMessage:y,withCredentials:y,withXSRFToken:y,adapter:y,responseType:y,xsrfCookieName:y,xsrfHeaderName:y,onUploadProgress:y,onDownloadProgress:y,decompress:y,maxContentLength:y,maxBodyLength:y,beforeRedirect:y,transport:y,httpAgent:y,httpsAgent:y,cancelToken:y,socketPath:y,responseEncoding:y,validateStatus:l,headers:(E,P)=>c(AP(E),AP(P),!0)};return Ot.forEach(Object.keys(Object.assign({},e,t)),function(P){const M=w[P]||c,z=M(e[P],t[P],P);Ot.isUndefined(z)&&M!==l||(r[P]=z)}),r}const $D="1.6.2",bE={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{bE[e]=function(o){return typeof o===e||"a"+(t<1?"n ":" ")+e}});const RP={};bE.transitional=function(t,r,o){function c(f,y){return"[Axios v"+$D+"] Transitional option '"+f+"'"+y+(o?". "+o:"")}return(f,y,l)=>{if(t===!1)throw new fr(c(y," has been removed"+(r?" in "+r:"")),fr.ERR_DEPRECATED);return r&&!RP[y]&&(RP[y]=!0,console.warn(c(y," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(f,y,l):!0}};function cK(e,t,r){if(typeof e!="object")throw new fr("options must be an object",fr.ERR_BAD_OPTION_VALUE);const o=Object.keys(e);let c=o.length;for(;c-- >0;){const f=o[c],y=t[f];if(y){const l=e[f],w=l===void 0||y(l,f,e);if(w!==!0)throw new fr("option "+f+" must be "+w,fr.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new fr("Unknown option "+f,fr.ERR_BAD_OPTION)}}const Mw={assertOptions:cK,validators:bE},ec=Mw.validators;class Hy{constructor(t){this.defaults=t,this.interceptors={request:new CP,response:new CP}}request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=Ch(this.defaults,r);const{transitional:o,paramsSerializer:c,headers:f}=r;o!==void 0&&Mw.assertOptions(o,{silentJSONParsing:ec.transitional(ec.boolean),forcedJSONParsing:ec.transitional(ec.boolean),clarifyTimeoutError:ec.transitional(ec.boolean)},!1),c!=null&&(Ot.isFunction(c)?r.paramsSerializer={serialize:c}:Mw.assertOptions(c,{encode:ec.function,serialize:ec.function},!0)),r.method=(r.method||this.defaults.method||"get").toLowerCase();let y=f&&Ot.merge(f.common,f[r.method]);f&&Ot.forEach(["delete","get","head","post","put","patch","common"],k=>{delete f[k]}),r.headers=hl.concat(y,f);const l=[];let w=!0;this.interceptors.request.forEach(function(U){typeof U.runWhen=="function"&&U.runWhen(r)===!1||(w=w&&U.synchronous,l.unshift(U.fulfilled,U.rejected))});const E=[];this.interceptors.response.forEach(function(U){E.push(U.fulfilled,U.rejected)});let P,M=0,z;if(!w){const k=[PP.bind(this),void 0];for(k.unshift.apply(k,l),k.push.apply(k,E),z=k.length,P=Promise.resolve(r);M<z;)P=P.then(k[M++],k[M++]);return P}z=l.length;let F=r;for(M=0;M<z;){const k=l[M++],U=l[M++];try{F=k(F)}catch(X){U.call(this,X);break}}try{P=PP.call(this,F)}catch(k){return Promise.reject(k)}for(M=0,z=E.length;M<z;)P=P.then(E[M++],E[M++]);return P}getUri(t){t=Ch(this.defaults,t);const r=DD(t.baseURL,t.url);return AD(r,t.params,t.paramsSerializer)}}Ot.forEach(["delete","get","head","options"],function(t){Hy.prototype[t]=function(r,o){return this.request(Ch(o||{},{method:t,url:r,data:(o||{}).data}))}});Ot.forEach(["post","put","patch"],function(t){function r(o){return function(f,y,l){return this.request(Ch(l||{},{method:t,headers:o?{"Content-Type":"multipart/form-data"}:{},url:f,data:y}))}}Hy.prototype[t]=r(),Hy.prototype[t+"Form"]=r(!0)});const Jv=Hy;class wE{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(f){r=f});const o=this;this.promise.then(c=>{if(!o._listeners)return;let f=o._listeners.length;for(;f-- >0;)o._listeners[f](c);o._listeners=null}),this.promise.then=c=>{let f;const y=new Promise(l=>{o.subscribe(l),f=l}).then(c);return y.cancel=function(){o.unsubscribe(f)},y},t(function(f,y,l){o.reason||(o.reason=new zm(f,y,l),r(o.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}static source(){let t;return{token:new wE(function(c){t=c}),cancel:t}}}const uK=wE;function dK(e){return function(r){return e.apply(null,r)}}function hK(e){return Ot.isObject(e)&&e.isAxiosError===!0}const Pw={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Pw).forEach(([e,t])=>{Pw[t]=e});const fK=Pw;function FD(e){const t=new Jv(e),r=yD(Jv.prototype.request,t);return Ot.extend(r,Jv.prototype,t,{allOwnKeys:!0}),Ot.extend(r,t,null,{allOwnKeys:!0}),r.create=function(c){return FD(Ch(e,c))},r}const Ri=FD(xE);Ri.Axios=Jv;Ri.CanceledError=zm;Ri.CancelToken=uK;Ri.isCancel=LD;Ri.VERSION=$D;Ri.toFormData=V0;Ri.AxiosError=fr;Ri.Cancel=Ri.CanceledError;Ri.all=function(t){return Promise.all(t)};Ri.spread=dK;Ri.isAxiosError=hK;Ri.mergeConfig=Ch;Ri.AxiosHeaders=hl;Ri.formToJSON=e=>zD(Ot.isHTMLForm(e)?new FormData(e):e);Ri.getAdapter=kD.getAdapter;Ri.HttpStatusCode=fK;Ri.default=Ri;const yJ=Ri;var pK=function(e){return function(t,r){var o=T.useRef(!1);e(function(){return function(){o.current=!1}},[]),e(function(){if(!o.current)o.current=!0;else return t()},r)}},hs=function(){return hs=Object.assign||function(t){for(var r,o=1,c=arguments.length;o<c;o++){r=arguments[o];for(var f in r)Object.prototype.hasOwnProperty.call(r,f)&&(t[f]=r[f])}return t},hs.apply(this,arguments)};function BD(e,t){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(e);c<o.length;c++)t.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(e,o[c])&&(r[o[c]]=e[o[c]]);return r}function mK(e,t,r,o){function c(f){return f instanceof r?f:new r(function(y){y(f)})}return new(r||(r=Promise))(function(f,y){function l(P){try{E(o.next(P))}catch(M){y(M)}}function w(P){try{E(o.throw(P))}catch(M){y(M)}}function E(P){P.done?f(P.value):c(P.value).then(l,w)}E((o=o.apply(e,t||[])).next())})}function gK(e,t){var r={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},o,c,f,y;return y={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function l(E){return function(P){return w([E,P])}}function w(E){if(o)throw new TypeError("Generator is already executing.");for(;y&&(y=0,E[0]&&(r=0)),r;)try{if(o=1,c&&(f=E[0]&2?c.return:E[0]?c.throw||((f=c.return)&&f.call(c),0):c.next)&&!(f=f.call(c,E[1])).done)return f;switch(c=0,f&&(E=[E[0]&2,f.value]),E[0]){case 0:case 1:f=E;break;case 4:return r.label++,{value:E[1],done:!1};case 5:r.label++,c=E[1],E=[0];continue;case 7:E=r.ops.pop(),r.trys.pop();continue;default:if(f=r.trys,!(f=f.length>0&&f[f.length-1])&&(E[0]===6||E[0]===2)){r=0;continue}if(E[0]===3&&(!f||E[1]>f[0]&&E[1]<f[3])){r.label=E[1];break}if(E[0]===6&&r.label<f[1]){r.label=f[1],f=E;break}if(f&&r.label<f[2]){r.label=f[2],r.ops.push(E);break}f[2]&&r.ops.pop(),r.trys.pop();continue}E=t.call(e,r)}catch(P){E=[6,P],c=0}finally{o=f=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}}function vo(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var o=r.call(e),c,f=[],y;try{for(;(t===void 0||t-- >0)&&!(c=o.next()).done;)f.push(c.value)}catch(l){y={error:l}}finally{try{c&&!c.done&&(r=o.return)&&r.call(o)}finally{if(y)throw y.error}}return f}function yo(e,t,r){if(r||arguments.length===2)for(var o=0,c=t.length,f;o<c;o++)(f||!(o in t))&&(f||(f=Array.prototype.slice.call(t,0,o)),f[o]=t[o]);return e.concat(f||Array.prototype.slice.call(t))}var G0=function(e){return typeof e=="function"},vK=!1;const W0=vK;function Bd(e){W0&&(G0(e)||console.error("useMemoizedFn expected parameter is a function, got ".concat(typeof e)));var t=T.useRef(e);t.current=T.useMemo(function(){return e},[e]);var r=T.useRef();return r.current||(r.current=function(){for(var o=[],c=0;c<arguments.length;c++)o[c]=arguments[c];return t.current.apply(this,o)}),r.current}const Aw=pK(T.useEffect);var ND=function(e,t){var r=t.manual,o=t.ready,c=o===void 0?!0:o,f=t.defaultParams,y=f===void 0?[]:f,l=t.refreshDeps,w=l===void 0?[]:l,E=t.refreshDepsAction,P=T.useRef(!1);return P.current=!1,Aw(function(){!r&&c&&(P.current=!0,e.run.apply(e,yo([],vo(y),!1)))},[c]),Aw(function(){P.current||r||(P.current=!0,E?E():e.refresh())},yo([],vo(w),!1)),{onBefore:function(){if(!c)return{stopNow:!0}}}};ND.onInit=function(e){var t=e.ready,r=t===void 0?!0:t,o=e.manual;return{loading:!o&&r}};const yK=ND;function _K(e,t){if(e===t)return!0;for(var r=0;r<e.length;r++)if(!Object.is(e[r],t[r]))return!1;return!0}function jD(e,t){var r=T.useRef({deps:t,obj:void 0,initialized:!1}).current;return(r.initialized===!1||!_K(r.deps,t))&&(r.deps=t,r.obj=e(),r.initialized=!0),r.obj}function UD(e){var t=T.useRef(e);return t.current=e,t}var xK=function(e){W0&&(G0(e)||console.error("useUnmount expected parameter is a function, got ".concat(typeof e)));var t=UD(e);T.useEffect(function(){return function(){t.current()}},[])};const SE=xK;var Qv=new Map,bK=function(e,t,r){var o=Qv.get(e);o!=null&&o.timer&&clearTimeout(o.timer);var c=void 0;t>-1&&(c=setTimeout(function(){Qv.delete(e)},t)),Qv.set(e,hs(hs({},r),{timer:c}))},wK=function(e){return Qv.get(e)},ey=new Map,SK=function(e){return ey.get(e)},EK=function(e,t){ey.set(e,t),t.then(function(r){return ey.delete(e),r}).catch(function(){ey.delete(e)})},su={},CK=function(e,t){su[e]&&su[e].forEach(function(r){return r(t)})},$1=function(e,t){return su[e]||(su[e]=[]),su[e].push(t),function(){var o=su[e].indexOf(t);su[e].splice(o,1)}},TK=function(e,t){var r=t.cacheKey,o=t.cacheTime,c=o===void 0?5*60*1e3:o,f=t.staleTime,y=f===void 0?0:f,l=t.setCache,w=t.getCache,E=T.useRef(),P=T.useRef(),M=function(F,k){l?l(k):bK(F,c,k),CK(F,k.data)},z=function(F,k){return k===void 0&&(k=[]),w?w(k):wK(F)};return jD(function(){if(r){var F=z(r);F&&Object.hasOwnProperty.call(F,"data")&&(e.state.data=F.data,e.state.params=F.params,(y===-1||new Date().getTime()-F.time<=y)&&(e.state.loading=!1)),E.current=$1(r,function(k){e.setState({data:k})})}},[]),SE(function(){var F;(F=E.current)===null||F===void 0||F.call(E)}),r?{onBefore:function(F){var k=z(r,F);return!k||!Object.hasOwnProperty.call(k,"data")?{}:y===-1||new Date().getTime()-k.time<=y?{loading:!1,data:k==null?void 0:k.data,error:void 0,returnNow:!0}:{data:k==null?void 0:k.data,error:void 0}},onRequest:function(F,k){var U=SK(r);return U&&U!==P.current?{servicePromise:U}:(U=F.apply(void 0,yo([],vo(k),!1)),P.current=U,EK(r,U),{servicePromise:U})},onSuccess:function(F,k){var U;r&&((U=E.current)===null||U===void 0||U.call(E),M(r,{data:F,params:k,time:new Date().getTime()}),E.current=$1(r,function(X){e.setState({data:X})}))},onMutate:function(F){var k;r&&((k=E.current)===null||k===void 0||k.call(E),M(r,{data:F,params:e.state.params,time:new Date().getTime()}),E.current=$1(r,function(U){e.setState({data:U})}))}}:{}};const IK=TK;function MK(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var EE=MK,PK=typeof yp=="object"&&yp&&yp.Object===Object&&yp,AK=PK,RK=AK,OK=typeof self=="object"&&self&&self.Object===Object&&self,zK=RK||OK||Function("return this")(),VD=zK,LK=VD,DK=function(){return LK.Date.now()},kK=DK,$K=/\s/;function FK(e){for(var t=e.length;t--&&$K.test(e.charAt(t)););return t}var BK=FK,NK=BK,jK=/^\s+/;function UK(e){return e&&e.slice(0,NK(e)+1).replace(jK,"")}var VK=UK,HK=VD,GK=HK.Symbol,HD=GK,OP=HD,GD=Object.prototype,WK=GD.hasOwnProperty,qK=GD.toString,vp=OP?OP.toStringTag:void 0;function ZK(e){var t=WK.call(e,vp),r=e[vp];try{e[vp]=void 0;var o=!0}catch{}var c=qK.call(e);return o&&(t?e[vp]=r:delete e[vp]),c}var XK=ZK,KK=Object.prototype,YK=KK.toString;function JK(e){return YK.call(e)}var QK=JK,zP=HD,eY=XK,tY=QK,nY="[object Null]",rY="[object Undefined]",LP=zP?zP.toStringTag:void 0;function iY(e){return e==null?e===void 0?rY:nY:LP&&LP in Object(e)?eY(e):tY(e)}var oY=iY;function aY(e){return e!=null&&typeof e=="object"}var sY=aY,lY=oY,cY=sY,uY="[object Symbol]";function dY(e){return typeof e=="symbol"||cY(e)&&lY(e)==uY}var hY=dY,fY=VK,DP=EE,pY=hY,kP=0/0,mY=/^[-+]0x[0-9a-f]+$/i,gY=/^0b[01]+$/i,vY=/^0o[0-7]+$/i,yY=parseInt;function _Y(e){if(typeof e=="number")return e;if(pY(e))return kP;if(DP(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=DP(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=fY(e);var r=gY.test(e);return r||vY.test(e)?yY(e.slice(2),r?2:8):mY.test(e)?kP:+e}var xY=_Y,bY=EE,F1=kK,$P=xY,wY="Expected a function",SY=Math.max,EY=Math.min;function CY(e,t,r){var o,c,f,y,l,w,E=0,P=!1,M=!1,z=!0;if(typeof e!="function")throw new TypeError(wY);t=$P(t)||0,bY(r)&&(P=!!r.leading,M="maxWait"in r,f=M?SY($P(r.maxWait)||0,t):f,z="trailing"in r?!!r.trailing:z);function F(ne){var Q=o,ie=c;return o=c=void 0,E=ne,y=e.apply(ie,Q),y}function k(ne){return E=ne,l=setTimeout($,t),P?F(ne):y}function U(ne){var Q=ne-w,ie=ne-E,te=t-Q;return M?EY(te,f-ie):te}function X(ne){var Q=ne-w,ie=ne-E;return w===void 0||Q>=t||Q<0||M&&ie>=f}function $(){var ne=F1();if(X(ne))return j(ne);l=setTimeout($,U(ne))}function j(ne){return l=void 0,z&&o?F(ne):(o=c=void 0,y)}function V(){l!==void 0&&clearTimeout(l),E=0,o=w=c=l=void 0}function Z(){return l===void 0?y:j(F1())}function ee(){var ne=F1(),Q=X(ne);if(o=arguments,c=this,w=ne,Q){if(l===void 0)return k(w);if(M)return clearTimeout(l),l=setTimeout($,t),F(w)}return l===void 0&&(l=setTimeout($,t)),y}return ee.cancel=V,ee.flush=Z,ee}var WD=CY;const TY=xc(WD);var IY=function(e,t){var r=t.debounceWait,o=t.debounceLeading,c=t.debounceTrailing,f=t.debounceMaxWait,y=T.useRef(),l=T.useMemo(function(){var w={};return o!==void 0&&(w.leading=o),c!==void 0&&(w.trailing=c),f!==void 0&&(w.maxWait=f),w},[o,c,f]);return T.useEffect(function(){if(r){var w=e.runAsync.bind(e);return y.current=TY(function(E){E()},r,l),e.runAsync=function(){for(var E=[],P=0;P<arguments.length;P++)E[P]=arguments[P];return new Promise(function(M,z){var F;(F=y.current)===null||F===void 0||F.call(y,function(){w.apply(void 0,yo([],vo(E),!1)).then(M).catch(z)})})},function(){var E;(E=y.current)===null||E===void 0||E.cancel(),e.runAsync=w}}},[r,l]),r?{onCancel:function(){var w;(w=y.current)===null||w===void 0||w.cancel()}}:{}};const MY=IY;var PY=function(e,t){var r=t.loadingDelay,o=t.ready,c=T.useRef();if(!r)return{};var f=function(){c.current&&clearTimeout(c.current)};return{onBefore:function(){return f(),o!==!1&&(c.current=setTimeout(function(){e.setState({loading:!0})},r)),{loading:!1}},onFinally:function(){f()},onCancel:function(){f()}}};const AY=PY;var RY=!!(typeof window<"u"&&window.document&&window.document.createElement);const q0=RY;function CE(){return q0?document.visibilityState!=="hidden":!0}var Bp=[];function OY(e){return Bp.push(e),function(){var r=Bp.indexOf(e);Bp.splice(r,1)}}if(q0){var zY=function(){if(CE())for(var e=0;e<Bp.length;e++){var t=Bp[e];t()}};window.addEventListener("visibilitychange",zY,!1)}var LY=function(e,t){var r=t.pollingInterval,o=t.pollingWhenHidden,c=o===void 0?!0:o,f=t.pollingErrorRetryCount,y=f===void 0?-1:f,l=T.useRef(),w=T.useRef(),E=T.useRef(0),P=function(){var M;l.current&&clearTimeout(l.current),(M=w.current)===null||M===void 0||M.call(w)};return Aw(function(){r||P()},[r]),r?{onBefore:function(){P()},onError:function(){E.current+=1},onSuccess:function(){E.current=0},onFinally:function(){y===-1||y!==-1&&E.current<=y?l.current=setTimeout(function(){!c&&!CE()?w.current=OY(function(){e.refresh()}):e.refresh()},r):E.current=0},onCancel:function(){P()}}:{}};const DY=LY;function kY(e,t){var r=!1;return function(){for(var o=[],c=0;c<arguments.length;c++)o[c]=arguments[c];r||(r=!0,e.apply(void 0,yo([],vo(o),!1)),setTimeout(function(){r=!1},t))}}function $Y(){return q0&&typeof navigator.onLine<"u"?navigator.onLine:!0}var Np=[];function FY(e){return Np.push(e),function(){var r=Np.indexOf(e);r>-1&&Np.splice(r,1)}}if(q0){var FP=function(){if(!(!CE()||!$Y()))for(var e=0;e<Np.length;e++){var t=Np[e];t()}};window.addEventListener("visibilitychange",FP,!1),window.addEventListener("focus",FP,!1)}var BY=function(e,t){var r=t.refreshOnWindowFocus,o=t.focusTimespan,c=o===void 0?5e3:o,f=T.useRef(),y=function(){var l;(l=f.current)===null||l===void 0||l.call(f)};return T.useEffect(function(){if(r){var l=kY(e.refresh.bind(e),c);f.current=FY(function(){l()})}return function(){y()}},[r,c]),SE(function(){y()}),{}};const NY=BY;var jY=function(e,t){var r=t.retryInterval,o=t.retryCount,c=T.useRef(),f=T.useRef(0),y=T.useRef(!1);return o?{onBefore:function(){y.current||(f.current=0),y.current=!1,c.current&&clearTimeout(c.current)},onSuccess:function(){f.current=0},onError:function(){if(f.current+=1,o===-1||f.current<=o){var l=r??Math.min(1e3*Math.pow(2,f.current),3e4);c.current=setTimeout(function(){y.current=!0,e.refresh()},l)}else f.current=0},onCancel:function(){f.current=0,c.current&&clearTimeout(c.current)}}:{}};const UY=jY;var VY=WD,HY=EE,GY="Expected a function";function WY(e,t,r){var o=!0,c=!0;if(typeof e!="function")throw new TypeError(GY);return HY(r)&&(o="leading"in r?!!r.leading:o,c="trailing"in r?!!r.trailing:c),VY(e,t,{leading:o,maxWait:t,trailing:c})}var qY=WY;const ZY=xc(qY);var XY=function(e,t){var r=t.throttleWait,o=t.throttleLeading,c=t.throttleTrailing,f=T.useRef(),y={};return o!==void 0&&(y.leading=o),c!==void 0&&(y.trailing=c),T.useEffect(function(){if(r){var l=e.runAsync.bind(e);return f.current=ZY(function(w){w()},r,y),e.runAsync=function(){for(var w=[],E=0;E<arguments.length;E++)w[E]=arguments[E];return new Promise(function(P,M){var z;(z=f.current)===null||z===void 0||z.call(f,function(){l.apply(void 0,yo([],vo(w),!1)).then(P).catch(M)})})},function(){var w;e.runAsync=l,(w=f.current)===null||w===void 0||w.cancel()}}},[r,o,c]),r?{onCancel:function(){var l;(l=f.current)===null||l===void 0||l.cancel()}}:{}};const KY=XY;var YY=function(e){W0&&(G0(e)||console.error('useMount: parameter `fn` expected to be a function, but got "'.concat(typeof e,'".'))),T.useEffect(function(){e==null||e()},[])};const JY=YY;var QY=function(){var e=vo(T.useState({}),2),t=e[1];return T.useCallback(function(){return t({})},[])};const eJ=QY;var tJ=function(){function e(t,r,o,c){c===void 0&&(c={}),this.serviceRef=t,this.options=r,this.subscribe=o,this.initState=c,this.count=0,this.state={loading:!1,params:void 0,data:void 0,error:void 0},this.state=hs(hs(hs({},this.state),{loading:!r.manual}),c)}return e.prototype.setState=function(t){t===void 0&&(t={}),this.state=hs(hs({},this.state),t),this.subscribe()},e.prototype.runPluginHandler=function(t){for(var r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];var c=this.pluginImpls.map(function(f){var y;return(y=f[t])===null||y===void 0?void 0:y.call.apply(y,yo([f],vo(r),!1))}).filter(Boolean);return Object.assign.apply(Object,yo([{}],vo(c),!1))},e.prototype.runAsync=function(){for(var t,r,o,c,f,y,l,w,E,P,M=[],z=0;z<arguments.length;z++)M[z]=arguments[z];return mK(this,void 0,void 0,function(){var F,k,U,X,$,j,V,Z,ee,ne,Q;return gK(this,function(ie){switch(ie.label){case 0:if(this.count+=1,F=this.count,k=this.runPluginHandler("onBefore",M),U=k.stopNow,X=U===void 0?!1:U,$=k.returnNow,j=$===void 0?!1:$,V=BD(k,["stopNow","returnNow"]),X)return[2,new Promise(function(){})];if(this.setState(hs({loading:!0,params:M},V)),j)return[2,Promise.resolve(V.data)];(r=(t=this.options).onBefore)===null||r===void 0||r.call(t,M),ie.label=1;case 1:return ie.trys.push([1,3,,4]),Z=this.runPluginHandler("onRequest",this.serviceRef.current,M).servicePromise,Z||(Z=(Q=this.serviceRef).current.apply(Q,yo([],vo(M),!1))),[4,Z];case 2:return ee=ie.sent(),F!==this.count?[2,new Promise(function(){})]:(this.setState({data:ee,error:void 0,loading:!1}),(c=(o=this.options).onSuccess)===null||c===void 0||c.call(o,ee,M),this.runPluginHandler("onSuccess",ee,M),(y=(f=this.options).onFinally)===null||y===void 0||y.call(f,M,ee,void 0),F===this.count&&this.runPluginHandler("onFinally",M,ee,void 0),[2,ee]);case 3:if(ne=ie.sent(),F!==this.count)return[2,new Promise(function(){})];throw this.setState({error:ne,loading:!1}),(w=(l=this.options).onError)===null||w===void 0||w.call(l,ne,M),this.runPluginHandler("onError",ne,M),(P=(E=this.options).onFinally)===null||P===void 0||P.call(E,M,void 0,ne),F===this.count&&this.runPluginHandler("onFinally",M,void 0,ne),ne;case 4:return[2]}})})},e.prototype.run=function(){for(var t=this,r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];this.runAsync.apply(this,yo([],vo(r),!1)).catch(function(c){t.options.onError||console.error(c)})},e.prototype.cancel=function(){this.count+=1,this.setState({loading:!1}),this.runPluginHandler("onCancel")},e.prototype.refresh=function(){this.run.apply(this,yo([],vo(this.state.params||[]),!1))},e.prototype.refreshAsync=function(){return this.runAsync.apply(this,yo([],vo(this.state.params||[]),!1))},e.prototype.mutate=function(t){var r=G0(t)?t(this.state.data):t;this.runPluginHandler("onMutate",r),this.setState({data:r})},e}();const nJ=tJ;function rJ(e,t,r){t===void 0&&(t={}),r===void 0&&(r=[]);var o=t.manual,c=o===void 0?!1:o,f=BD(t,["manual"]);W0&&t.defaultParams&&!Array.isArray(t.defaultParams)&&console.warn("expected defaultParams is array, got ".concat(typeof t.defaultParams));var y=hs({manual:c},f),l=UD(e),w=eJ(),E=jD(function(){var P=r.map(function(M){var z;return(z=M==null?void 0:M.onInit)===null||z===void 0?void 0:z.call(M,y)}).filter(Boolean);return new nJ(l,y,w,Object.assign.apply(Object,yo([{}],vo(P),!1)))},[]);return E.options=y,E.pluginImpls=r.map(function(P){return P(E,y)}),JY(function(){if(!c){var P=E.state.params||t.defaultParams||[];E.run.apply(E,yo([],vo(P),!1))}}),SE(function(){E.cancel()}),{loading:E.state.loading,data:E.state.data,error:E.state.error,params:E.state.params||[],cancel:Bd(E.cancel.bind(E)),refresh:Bd(E.refresh.bind(E)),refreshAsync:Bd(E.refreshAsync.bind(E)),run:Bd(E.run.bind(E)),runAsync:Bd(E.runAsync.bind(E)),mutate:Bd(E.mutate.bind(E))}}function _J(e,t,r){return rJ(e,t,yo(yo([],vo(r||[]),!1),[MY,AY,DY,NY,KY,yK,IK,UY],!1))}var qD={exports:{}};(function(e,t){(function(r,o){e.exports=o()})(yp,function(){var r,o,c;function f(l,w){if(!r)r=w;else if(!o)o=w;else{var E="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+r+")(sharedChunk); ("+o+")(sharedChunk); self.onerror = null;",P={};r(P),c=w(P),typeof window<"u"&&window&&window.URL&&window.URL.createObjectURL&&(c.workerUrl=window.URL.createObjectURL(new Blob([E],{type:"text/javascript"})))}}f(["exports"],function(l){var w=typeof self<"u"?self:{},E="2.15.0";let P;const M={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(P==null){const i=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{P={}.API_URL_REGEX!=null?new RegExp({}.API_URL_REGEX):i}catch{P=i}}return P},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!M.API_URL)return null;try{const i=new URL(M.API_URL);return i.hostname==="api.mapbox.cn"?"https://events.mapbox.cn/events/v2":i.hostname==="api.mapbox.com"?"https://events.mapbox.com/events/v2":null}catch{return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},z={supported:!1,testSupport:function(i){!U&&k&&(X?$(i):F=i)}};let F,k,U=!1,X=!1;function $(i){const n=i.createTexture();i.bindTexture(i.TEXTURE_2D,n);try{if(i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,k),i.isContextLost())return;z.supported=!0}catch{}i.deleteTexture(n),U=!0}w.document&&(k=w.document.createElement("img"),k.onload=function(){F&&$(F),F=null,X=!0},k.onerror=function(){U=!0,F=null},k.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const j="01";function V(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Z=ee;function ee(i,n,a,u){this.cx=3*i,this.bx=3*(a-i)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(u-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=i,this.p1y=n,this.p2x=a,this.p2y=u}ee.prototype={sampleCurveX:function(i){return((this.ax*i+this.bx)*i+this.cx)*i},sampleCurveY:function(i){return((this.ay*i+this.by)*i+this.cy)*i},sampleCurveDerivativeX:function(i){return(3*this.ax*i+2*this.bx)*i+this.cx},solveCurveX:function(i,n){if(n===void 0&&(n=1e-6),i<0)return 0;if(i>1)return 1;for(var a=i,u=0;u<8;u++){var h=this.sampleCurveX(a)-i;if(Math.abs(h)<n)return a;var m=this.sampleCurveDerivativeX(a);if(Math.abs(m)<1e-6)break;a-=h/m}var v=0,x=1;for(a=i,u=0;u<20&&(h=this.sampleCurveX(a),!(Math.abs(h-i)<n));u++)i>h?v=a:x=a,a=.5*(x-v)+v;return a},solve:function(i,n){return this.sampleCurveY(this.solveCurveX(i,n))}};var ne=V(Z),Q=ie;function ie(i,n){this.x=i,this.y=n}ie.prototype={clone:function(){return new ie(this.x,this.y)},add:function(i){return this.clone()._add(i)},sub:function(i){return this.clone()._sub(i)},multByPoint:function(i){return this.clone()._multByPoint(i)},divByPoint:function(i){return this.clone()._divByPoint(i)},mult:function(i){return this.clone()._mult(i)},div:function(i){return this.clone()._div(i)},rotate:function(i){return this.clone()._rotate(i)},rotateAround:function(i,n){return this.clone()._rotateAround(i,n)},matMult:function(i){return this.clone()._matMult(i)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(i){return this.x===i.x&&this.y===i.y},dist:function(i){return Math.sqrt(this.distSqr(i))},distSqr:function(i){var n=i.x-this.x,a=i.y-this.y;return n*n+a*a},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(i){return Math.atan2(this.y-i.y,this.x-i.x)},angleWith:function(i){return this.angleWithSep(i.x,i.y)},angleWithSep:function(i,n){return Math.atan2(this.x*n-this.y*i,this.x*i+this.y*n)},_matMult:function(i){var n=i[2]*this.x+i[3]*this.y;return this.x=i[0]*this.x+i[1]*this.y,this.y=n,this},_add:function(i){return this.x+=i.x,this.y+=i.y,this},_sub:function(i){return this.x-=i.x,this.y-=i.y,this},_mult:function(i){return this.x*=i,this.y*=i,this},_div:function(i){return this.x/=i,this.y/=i,this},_multByPoint:function(i){return this.x*=i.x,this.y*=i.y,this},_divByPoint:function(i){return this.x/=i.x,this.y/=i.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var i=this.y;return this.y=this.x,this.x=-i,this},_rotate:function(i){var n=Math.cos(i),a=Math.sin(i),u=a*this.x+n*this.y;return this.x=n*this.x-a*this.y,this.y=u,this},_rotateAround:function(i,n){var a=Math.cos(i),u=Math.sin(i),h=n.y+u*(this.x-n.x)+a*(this.y-n.y);return this.x=n.x+a*(this.x-n.x)-u*(this.y-n.y),this.y=h,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},ie.convert=function(i){return i instanceof ie?i:Array.isArray(i)?new ie(i[0],i[1]):i};var te=V(Q);const ge=Math.PI/180,ue=180/Math.PI;function oe(i){return i*ge}function fe(i){return i*ue}const Ee=[[0,0],[1,0],[1,1],[0,1]];function ke(i){if(i<=0)return 0;if(i>=1)return 1;const n=i*i,a=n*i;return 4*(i<.5?a:3*(i-n)+a-.75)}function Le(i,n,a,u){const h=new ne(i,n,a,u);return function(m){return h.solve(m)}}const Ne=Le(.25,.1,.25,1);function pe(i,n,a){return Math.min(a,Math.max(n,i))}function He(i,n,a){return(a=pe((a-i)/(n-i),0,1))*a*(3-2*a)}function Be(i,n,a){const u=a-n,h=((i-n)%u+u)%u+n;return h===n?a:h}function Ge(i,n,a){if(!i.length)return a(null,[]);let u=i.length;const h=new Array(i.length);let m=null;i.forEach((v,x)=>{n(v,(S,C)=>{S&&(m=S),h[x]=C,--u==0&&a(m,h)})})}function Qe(i){const n=[];for(const a in i)n.push(i[a]);return n}function gt(i,...n){for(const a of n)for(const u in a)i[u]=a[u];return i}let St=1;function xt(){return St++}function jt(){return function i(n){return n?(n^Math.random()*(16>>n/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,i)}()}function Ut(i){return i<=1?1:Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))}function bt(i){return!!i&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(i)}function ut(i,n){i.forEach(a=>{n[a]&&(n[a]=n[a].bind(n))})}function It(i,n){return i.indexOf(n,i.length-n.length)!==-1}function ft(i,n,a){const u={};for(const h in i)u[h]=n.call(a||this,i[h],h,i);return u}function yt(i,n,a){const u={};for(const h in i)n.call(a||this,i[h],h,i)&&(u[h]=i[h]);return u}function ct(i){return Array.isArray(i)?i.map(ct):typeof i=="object"&&i?ft(i,ct):i}const Mt={};function Ct(i){Mt[i]||(typeof console<"u"&&console.warn(i),Mt[i]=!0)}function Qt(i,n,a){return(a.y-i.y)*(n.x-i.x)>(n.y-i.y)*(a.x-i.x)}function Vt(i){let n=0;for(let a,u,h=0,m=i.length,v=m-1;h<m;v=h++)a=i[h],u=i[v],n+=(u.x-a.x)*(a.y+u.y);return n}function Nt(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function ot(i){const n={};if(i.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(a,u,h,m)=>{const v=h||m;return n[u]=!v||v.toLowerCase(),""}),n["max-age"]){const a=parseInt(n["max-age"],10);isNaN(a)?delete n["max-age"]:n["max-age"]=a}return n}let rt=null;function kt(i){if(rt==null){const n=i.navigator?i.navigator.userAgent:null;rt=!!i.safari||!(!n||!(/\b(iPad|iPhone|iPod)\b/.test(n)||n.match("Safari")&&!n.match("Chrome")))}return rt}function Pt(i){try{const n=w[i];return n.setItem("_mapbox_test_",1),n.removeItem("_mapbox_test_"),!0}catch{return!1}}function sn(i,n){return[i[4*n],i[4*n+1],i[4*n+2],i[4*n+3]]}const An="mapbox-tiles";let Mn=500,on=50,Vn,Nn;function zn(){try{return w.caches}catch{}}function yn(){zn()&&!Vn&&(Vn=w.caches.open(An))}function rn(i){const n=i.indexOf("?");if(n<0)return i;const a=function(h){const m=h.indexOf("?");return m>0?h.slice(m+1).split("&"):[]}(i),u=a.filter(h=>{const m=h.split("=");return m[0]==="language"||m[0]==="worldview"});return u.length?`${i.slice(0,n)}?${u.join("&")}`:i.slice(0,n)}let Wn=1/0;const jn={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(jn);class pr extends Error{constructor(n,a,u){a===401&&Me(u)&&(n+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(n),this.status=a,this.url=u}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const ar=Nt()?()=>self.worker&&self.worker.referrer:()=>(w.location.protocol==="blob:"?w.parent:w).location.href,qn=function(i,n){if(!(/^file:/.test(a=i.url)||/^file:/.test(ar())&&!/^\w+:/.test(a))){if(w.fetch&&w.Request&&w.AbortController&&w.Request.prototype.hasOwnProperty("signal"))return function(u,h){const m=new w.AbortController,v=new w.Request(u.url,{method:u.method||"GET",body:u.body,credentials:u.credentials,headers:u.headers,referrer:ar(),referrerPolicy:u.referrerPolicy,signal:m.signal});let x=!1,S=!1;const C=(R=v.url).indexOf("sku=")>0&&Me(R);var R;u.type==="json"&&v.headers.set("Accept","application/json");const L=(H,G,Y)=>{if(S)return;if(H&&H.message!=="SecurityError"&&Ct(H.toString()),G&&Y)return D(G);const ae=Date.now();w.fetch(v).then(ve=>{if(ve.ok){const Te=C?ve.clone():null;return D(ve,Te,ae)}return h(new pr(ve.statusText,ve.status,u.url))}).catch(ve=>{ve.name!=="AbortError"&&h(new Error(`${ve.message} ${u.url}`))})},D=(H,G,Y)=>{(u.type==="arrayBuffer"?H.arrayBuffer():u.type==="json"?H.json():H.text()).then(ae=>{S||(G&&Y&&function(ve,Te,ye){if(yn(),!Vn)return;const Ce={status:Te.status,statusText:Te.statusText,headers:new w.Headers};Te.headers.forEach((Ye,Ze)=>Ce.headers.set(Ze,Ye));const Ae=ot(Te.headers.get("Cache-Control")||"");if(Ae["no-store"])return;Ae["max-age"]&&Ce.headers.set("Expires",new Date(ye+1e3*Ae["max-age"]).toUTCString());const Pe=Ce.headers.get("Expires");Pe&&(new Date(Pe).getTime()-ye<42e4||function(Ye,Ze){if(Nn===void 0)try{new Response(new ReadableStream),Nn=!0}catch{Nn=!1}Nn?Ze(Ye.body):Ye.blob().then(Ze)}(Te,Ye=>{const Ze=new w.Response(Ye,Ce);yn(),Vn&&Vn.then(at=>at.put(rn(ve.url),Ze)).catch(at=>Ct(at.message))}))}(v,G,Y),x=!0,h(null,ae,H.headers.get("Cache-Control"),H.headers.get("Expires")))}).catch(ae=>{S||h(new Error(ae.message))})};return C?function(H,G){if(yn(),!Vn)return G(null);const Y=rn(H.url);Vn.then(ae=>{ae.match(Y).then(ve=>{const Te=function(ye){if(!ye)return!1;const Ce=new Date(ye.headers.get("Expires")||0),Ae=ot(ye.headers.get("Cache-Control")||"");return Ce>Date.now()&&!Ae["no-cache"]}(ve);ae.delete(Y),Te&&ae.put(Y,ve.clone()),G(null,ve,Te)}).catch(G)}).catch(G)}(v,L):L(null,null),{cancel:()=>{S=!0,x||m.abort()}}}(i,n);if(Nt()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",i,n,void 0,!0)}var a;return function(u,h){const m=new w.XMLHttpRequest;m.open(u.method||"GET",u.url,!0),u.type==="arrayBuffer"&&(m.responseType="arraybuffer");for(const v in u.headers)m.setRequestHeader(v,u.headers[v]);return u.type==="json"&&(m.responseType="text",m.setRequestHeader("Accept","application/json")),m.withCredentials=u.credentials==="include",m.onerror=()=>{h(new Error(m.statusText))},m.onload=()=>{if((m.status>=200&&m.status<300||m.status===0)&&m.response!==null){let v=m.response;if(u.type==="json")try{v=JSON.parse(m.response)}catch(x){return h(x)}h(null,v,m.getResponseHeader("Cache-Control"),m.getResponseHeader("Expires"))}else h(new pr(m.statusText,m.status,u.url))},m.send(u.body),{cancel:()=>m.abort()}}(i,n)},Qn=function(i,n){return qn(gt(i,{type:"arrayBuffer"}),n)};function Rr(i){const n=w.document.createElement("a");return n.href=i,n.protocol===w.document.location.protocol&&n.host===w.document.location.host}const _e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let W,J;W=[],J=0;const de=function(i,n){if(z.supported&&(i.headers||(i.headers={}),i.headers.accept="image/webp,*/*"),J>=M.MAX_PARALLEL_IMAGE_REQUESTS){const m={requestParameters:i,callback:n,cancelled:!1,cancel(){this.cancelled=!0}};return W.push(m),m}J++;let a=!1;const u=()=>{if(!a)for(a=!0,J--;W.length&&J<M.MAX_PARALLEL_IMAGE_REQUESTS;){const m=W.shift(),{requestParameters:v,callback:x,cancelled:S}=m;S||(m.cancel=de(v,x).cancel)}},h=Qn(i,(m,v,x,S)=>{u(),m?n(m):v&&(w.createImageBitmap?function(C,R){const L=new w.Blob([new Uint8Array(C)],{type:"image/png"});w.createImageBitmap(L).then(D=>{R(null,D)}).catch(D=>{R(new Error(`Could not load image because of ${D.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(v,(C,R)=>n(C,R,x,S)):function(C,R){const L=new w.Image,D=w.URL;L.onload=()=>{R(null,L),D.revokeObjectURL(L.src),L.onload=null,w.requestAnimationFrame(()=>{L.src=_e})},L.onerror=()=>R(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const H=new w.Blob([new Uint8Array(C)],{type:"image/png"});L.src=C.byteLength?D.createObjectURL(H):_e}(v,(C,R)=>n(C,R,x,S)))});return{cancel:()=>{h.cancel(),u()}}},Se="NO_ACCESS_TOKEN";function Ie(i){return i.indexOf("mapbox:")===0}function Me(i){return M.API_URL_REGEX.test(i)}function De(i){return M.API_CDN_URL_REGEX.test(i)}function we(i){return M.API_STYLE_REGEX.test(i)&&!$e(i)}function $e(i){return M.API_SPRITE_REGEX.test(i)}const je=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Je(i){const n=i.match(je);if(!n)throw new Error("Unable to parse URL object");return{protocol:n[1],authority:n[2],path:n[3]||"/",params:n[4]?n[4].split("&"):[]}}function We(i){const n=i.params.length?`?${i.params.join("&")}`:"";return`${i.protocol}://${i.authority}${i.path}${n}`}const wt="mapbox.eventData";function Yt(i){if(!i)return null;const n=i.split(".");if(!n||n.length!==3)return null;try{return JSON.parse(decodeURIComponent(w.atob(n[1]).split("").map(a=>"%"+("00"+a.charCodeAt(0).toString(16)).slice(-2)).join("")))}catch{return null}}class Xt{constructor(n){this.type=n,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(n){const a=Yt(M.ACCESS_TOKEN);let u="";return u=a&&a.u?w.btoa(encodeURIComponent(a.u).replace(/%([0-9A-F]{2})/g,(h,m)=>String.fromCharCode(+("0x"+m)))):M.ACCESS_TOKEN||"",n?`${wt}.${n}:${u}`:`${wt}:${u}`}fetchEventData(){const n=Pt("localStorage"),a=this.getStorageKey(),u=this.getStorageKey("uuid");if(n)try{const h=w.localStorage.getItem(a);h&&(this.eventData=JSON.parse(h));const m=w.localStorage.getItem(u);m&&(this.anonId=m)}catch{Ct("Unable to read from LocalStorage")}}saveEventData(){const n=Pt("localStorage"),a=this.getStorageKey(),u=this.getStorageKey("uuid");if(n)try{w.localStorage.setItem(u,this.anonId),Object.keys(this.eventData).length>=1&&w.localStorage.setItem(a,JSON.stringify(this.eventData))}catch{Ct("Unable to write to LocalStorage")}}processRequests(n){}postEvent(n,a,u,h){if(!M.EVENTS_URL)return;const m=Je(M.EVENTS_URL);m.params.push(`access_token=${h||M.ACCESS_TOKEN||""}`);const v={event:this.type,created:new Date(n).toISOString()},x=a?gt(v,a):v,S={url:We(m),headers:{"Content-Type":"text/plain"},body:JSON.stringify([x])};this.pendingRequest=function(C,R){return qn(gt(C,{method:"POST"}),R)}(S,C=>{this.pendingRequest=null,u(C),this.saveEventData(),this.processRequests(h)})}queueRequest(n,a){this.queue.push(n),this.processRequests(a)}}const un=new class extends Xt{constructor(i){super("appUserTurnstile"),this._customAccessToken=i}postTurnstileEvent(i,n){M.EVENTS_URL&&M.ACCESS_TOKEN&&Array.isArray(i)&&i.some(a=>Ie(a)||Me(a))&&this.queueRequest(Date.now(),n)}processRequests(i){if(this.pendingRequest||this.queue.length===0)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const n=Yt(M.ACCESS_TOKEN),a=n?n.u:M.ACCESS_TOKEN;let u=a!==this.eventData.tokenU;bt(this.anonId)||(this.anonId=jt(),u=!0);const h=this.queue.shift();if(this.eventData.lastSuccess){const m=new Date(this.eventData.lastSuccess),v=new Date(h),x=(h-this.eventData.lastSuccess)/864e5;u=u||x>=1||x<-1||m.getDate()!==v.getDate()}else u=!0;u?this.postEvent(h,{sdkIdentifier:"mapbox-gl-js",sdkVersion:E,skuId:j,"enabled.telemetry":!1,userId:this.anonId},m=>{m||(this.eventData.lastSuccess=h,this.eventData.tokenU=a)},i):this.processRequests()}},ln=un.postTurnstileEvent.bind(un),Gn=new class extends Xt{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(i,n,a,u){this.skuToken=n,this.errorCb=u,M.EVENTS_URL&&(a||M.ACCESS_TOKEN?this.queueRequest({id:i,timestamp:Date.now()},a):this.errorCb(new Error(Se)))}processRequests(i){if(this.pendingRequest||this.queue.length===0)return;const{id:n,timestamp:a}=this.queue.shift();n&&this.success[n]||(this.anonId||this.fetchEventData(),bt(this.anonId)||(this.anonId=jt()),this.postEvent(a,{sdkIdentifier:"mapbox-gl-js",sdkVersion:E,skuId:j,skuToken:this.skuToken,userId:this.anonId},u=>{u?this.errorCb(u):n&&(this.success[n]=!0)},i))}},On=Gn.postMapLoadEvent.bind(Gn),er=new class extends Xt{constructor(){super("gljs.performance")}postPerformanceEvent(i,n){M.EVENTS_URL&&(i||M.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:n},i)}processRequests(i){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:n,performanceData:a}=this.queue.shift(),u=function(h){const m=w.performance.getEntriesByType("resource"),v=w.performance.getEntriesByType("mark"),x=function(D){const H={};if(D){for(const G in D)if(G!=="other")for(const Y of D[G]){const ae=`${G}ResolveRangeMin`,ve=`${G}ResolveRangeMax`,Te=`${G}RequestCount`,ye=`${G}RequestCachedCount`;H[ae]=Math.min(H[ae]||1/0,Y.startTime),H[ve]=Math.max(H[ve]||-1/0,Y.responseEnd);const Ce=Ae=>{H[Ae]===void 0&&(H[Ae]=0),++H[Ae]};Y.transferSize!==void 0&&Y.transferSize===0&&Ce(ye),Ce(Te)}}return H}(function(D,H){const G={};if(D)for(const Y of D){const ae=H(Y);G[ae]===void 0&&(G[ae]=[]),G[ae].push(Y)}return G}(m,ri)),S=w.devicePixelRatio,C=w.navigator.connection||w.navigator.mozConnection||w.navigator.webkitConnection,R={counters:[],metadata:[],attributes:[]},L=(D,H,G)=>{G!=null&&D.push({name:H,value:G.toString()})};for(const D in x)L(R.counters,D,x[D]);if(h.interactionRange[0]!==1/0&&h.interactionRange[1]!==-1/0&&(L(R.counters,"interactionRangeMin",h.interactionRange[0]),L(R.counters,"interactionRangeMax",h.interactionRange[1])),v)for(const D of Object.keys(En)){const H=En[D],G=v.find(Y=>Y.name===H);G&&L(R.counters,H,G.startTime)}return L(R.counters,"visibilityHidden",h.visibilityHidden),L(R.attributes,"style",function(D){if(D)for(const H of D){const G=H.name.split("?")[0];if(we(G)){const Y=G.split("/").slice(-2);if(Y.length===2)return`mapbox://styles/${Y[0]}/${Y[1]}`}}}(m)),L(R.attributes,"terrainEnabled",h.terrainEnabled?"true":"false"),L(R.attributes,"fogEnabled",h.fogEnabled?"true":"false"),L(R.attributes,"projection",h.projection),L(R.attributes,"zoom",h.zoom),L(R.metadata,"devicePixelRatio",S),L(R.metadata,"connectionEffectiveType",C?C.effectiveType:void 0),L(R.metadata,"navigatorUserAgent",w.navigator.userAgent),L(R.metadata,"screenWidth",w.screen.width),L(R.metadata,"screenHeight",w.screen.height),L(R.metadata,"windowWidth",w.innerWidth),L(R.metadata,"windowHeight",w.innerHeight),L(R.metadata,"mapWidth",h.width/S),L(R.metadata,"mapHeight",h.height/S),L(R.metadata,"webglRenderer",h.renderer),L(R.metadata,"webglVendor",h.vendor),L(R.metadata,"sdkVersion",E),L(R.metadata,"sdkIdentifier","mapbox-gl-js"),R}(a);for(const h of u.metadata);for(const h of u.counters);for(const h of u.attributes);this.postEvent(n,u,()=>{},i)}},Xn=er.postPerformanceEvent.bind(er),Zr=new class extends Xt{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(i,n,a,u){if(!M.API_URL||!M.SESSION_PATH)return;const h=Je(M.API_URL+M.SESSION_PATH);h.params.push(`sku=${n||""}`),h.params.push(`access_token=${u||M.ACCESS_TOKEN||""}`);const m={url:We(h),headers:{"Content-Type":"text/plain"}};this.pendingRequest=function(v,x){return qn(gt(v,{method:"GET"}),x)}(m,v=>{this.pendingRequest=null,a(v),this.saveEventData(),this.processRequests(u)})}getSessionAPI(i,n,a,u){this.skuToken=n,this.errorCb=u,M.SESSION_PATH&&M.API_URL&&(a||M.ACCESS_TOKEN?this.queueRequest({id:i,timestamp:Date.now()},a):this.errorCb(new Error(Se)))}processRequests(i){if(this.pendingRequest||this.queue.length===0)return;const{id:n,timestamp:a}=this.queue.shift();n&&this.success[n]||this.getSession(a,this.skuToken,u=>{u?this.errorCb(u):n&&(this.success[n]=!0)},i)}},an=Zr.getSessionAPI.bind(Zr),nn=new Set,En={create:"create",load:"load",fullLoad:"fullLoad"},Tr={mark(i){w.performance.mark(i)},measure(i,n,a){w.performance.measure(i,n,a)}};function ri(i){const n=i.name.split("?")[0];return De(n)&&n.includes("mapbox-gl.js")?"javascript":De(n)&&n.includes("mapbox-gl.css")?"css":function(a){return M.API_FONTS_REGEX.test(a)}(n)?"fontRange":$e(n)?"sprite":we(n)?"style":function(a){return M.API_TILEJSON_REGEX.test(a)}(n)?"tilejson":"other"}const Cn=w.performance;function Ni(i){const n=i?i.url.toString():void 0;return Cn.getEntriesByName(n)}let xo,Po,io,Hr;const ji={now:()=>io!==void 0?io:w.performance.now(),setNow(i){io=i},restoreNow(){io=void 0},frame(i){const n=w.requestAnimationFrame(i);return{cancel:()=>w.cancelAnimationFrame(n)}},getImageData(i,n=0){const{width:a,height:u}=i;Hr||(Hr=w.document.createElement("canvas"));const h=Hr.getContext("2d",{willReadFrequently:!0});if(!h)throw new Error("failed to create canvas 2d context");return(a>Hr.width||u>Hr.height)&&(Hr.width=a,Hr.height=u),h.clearRect(-n,-n,a+2*n,u+2*n),h.drawImage(i,0,0,a,u),h.getImageData(-n,-n,a+2*n,u+2*n)},resolveURL:i=>(xo||(xo=w.document.createElement("a")),xo.href=i,xo.href),get devicePixelRatio(){return w.devicePixelRatio},get prefersReducedMotion(){return!!w.matchMedia&&(Po==null&&(Po=w.matchMedia("(prefers-reduced-motion: reduce)")),Po.matches)}};function fa(i,n,a){a[i]&&a[i].indexOf(n)!==-1||(a[i]=a[i]||[],a[i].push(n))}function oo(i,n,a){if(a&&a[i]){const u=a[i].indexOf(n);u!==-1&&a[i].splice(u,1)}}class ao{constructor(n,a={}){gt(this,a),this.type=n}}class _i extends ao{constructor(n,a={}){super("error",gt({error:n},a))}}class Oi{on(n,a){return this._listeners=this._listeners||{},fa(n,a,this._listeners),this}off(n,a){return oo(n,a,this._listeners),oo(n,a,this._oneTimeListeners),this}once(n,a){return a?(this._oneTimeListeners=this._oneTimeListeners||{},fa(n,a,this._oneTimeListeners),this):new Promise(u=>this.once(n,u))}fire(n,a){typeof n=="string"&&(n=new ao(n,a||{}));const u=n.type;if(this.listens(u)){n.target=this;const h=this._listeners&&this._listeners[u]?this._listeners[u].slice():[];for(const x of h)x.call(this,n);const m=this._oneTimeListeners&&this._oneTimeListeners[u]?this._oneTimeListeners[u].slice():[];for(const x of m)oo(u,x,this._oneTimeListeners),x.call(this,n);const v=this._eventedParent;v&&(gt(n,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),v.fire(n))}else n instanceof _i&&console.error(n.error);return this}listens(n){return!!(this._listeners&&this._listeners[n]&&this._listeners[n].length>0||this._oneTimeListeners&&this._oneTimeListeners[n]&&this._oneTimeListeners[n].length>0||this._eventedParent&&this._eventedParent.listens(n))}setEventedParent(n,a){return this._eventedParent=n,this._eventedParentData=a,this}}var nt=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{},"globe":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["source"]}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["fill-extrusion-edge-radius"]},"fill-extrusion-rounded-roof":{"type":"boolean","default":true,"requires":["fill-extrusion-edge-radius"],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":false,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"transition":false,"requires":[{"source":"geojson","has":{"lineMetrics":true}}],"property-type":"constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function Si(i,...n){for(const a of n)for(const u in a)i[u]=a[u];return i}function vr(i){return i instanceof Number||i instanceof String||i instanceof Boolean?i.valueOf():i}function mr(i){if(Array.isArray(i))return i.map(mr);if(i instanceof Object&&!(i instanceof Number||i instanceof String||i instanceof Boolean)){const n={};for(const a in i)n[a]=mr(i[a]);return n}return vr(i)}class Xo extends Error{constructor(n,a){super(a),this.message=a,this.key=n}}var Tn=Xo;class Pn{constructor(n,a=[]){this.parent=n,this.bindings={};for(const[u,h]of a)this.bindings[u]=h}concat(n){return new Pn(this,n)}get(n){if(this.bindings[n])return this.bindings[n];if(this.parent)return this.parent.get(n);throw new Error(`${n} not found in scope.`)}has(n){return!!this.bindings[n]||!!this.parent&&this.parent.has(n)}}var Xr=Pn;const Gr={kind:"null"},zt={kind:"number"},xn={kind:"string"},bn={kind:"boolean"},Qr={kind:"color"},Kr={kind:"object"},In={kind:"value"},Br={kind:"collator"},Ao={kind:"formatted"},Ro={kind:"resolvedImage"};function Ui(i,n){return{kind:"array",itemType:i,N:n}}function Kn(i){if(i.kind==="array"){const n=Kn(i.itemType);return typeof i.N=="number"?`array<${n}, ${i.N}>`:i.itemType.kind==="value"?"array":`array<${n}>`}return i.kind}const js=[Gr,zt,xn,bn,Qr,Ao,Kr,Ui(In),Ro];function xi(i,n){if(n.kind==="error")return null;if(i.kind==="array"){if(n.kind==="array"&&(n.N===0&&n.itemType.kind==="value"||!xi(i.itemType,n.itemType))&&(typeof i.N!="number"||i.N===n.N))return null}else{if(i.kind===n.kind)return null;if(i.kind==="value"){for(const a of js)if(!xi(a,n))return null}}return`Expected ${Kn(i)} but found ${Kn(n)} instead.`}function bo(i,n){return n.some(a=>a.kind===i.kind)}function Oo(i,n){return n.some(a=>a==="null"?i===null:a==="array"?Array.isArray(i):a==="object"?i&&!Array.isArray(i)&&typeof i=="object":a===typeof i)}var pa,ys={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Ko(i){return(i=Math.round(i))<0?0:i>255?255:i}function ma(i){return Ko(i[i.length-1]==="%"?parseFloat(i)/100*255:parseInt(i))}function _s(i){return(n=i[i.length-1]==="%"?parseFloat(i)/100:parseFloat(i))<0?0:n>1?1:n;var n}function ga(i,n,a){return a<0?a+=1:a>1&&(a-=1),6*a<1?i+(n-i)*a*6:2*a<1?n:3*a<2?i+(n-i)*(2/3-a)*6:i}try{pa={}.parseCSSColor=function(i){var n,a=i.replace(/ /g,"").toLowerCase();if(a in ys)return ys[a].slice();if(a[0]==="#")return a.length===4?(n=parseInt(a.substr(1),16))>=0&&n<=4095?[(3840&n)>>4|(3840&n)>>8,240&n|(240&n)>>4,15&n|(15&n)<<4,1]:null:a.length===7&&(n=parseInt(a.substr(1),16))>=0&&n<=16777215?[(16711680&n)>>16,(65280&n)>>8,255&n,1]:null;var u=a.indexOf("("),h=a.indexOf(")");if(u!==-1&&h+1===a.length){var m=a.substr(0,u),v=a.substr(u+1,h-(u+1)).split(","),x=1;switch(m){case"rgba":if(v.length!==4)return null;x=_s(v.pop());case"rgb":return v.length!==3?null:[ma(v[0]),ma(v[1]),ma(v[2]),x];case"hsla":if(v.length!==4)return null;x=_s(v.pop());case"hsl":if(v.length!==3)return null;var S=(parseFloat(v[0])%360+360)%360/360,C=_s(v[1]),R=_s(v[2]),L=R<=.5?R*(C+1):R+C-R*C,D=2*R-L;return[Ko(255*ga(D,L,S+1/3)),Ko(255*ga(D,L,S)),Ko(255*ga(D,L,S-1/3)),x];default:return null}}return null}}catch{}class Ei{constructor(n,a,u,h=1){this.r=n,this.g=a,this.b=u,this.a=h}static parse(n){if(!n)return;if(n instanceof Ei)return n;if(typeof n!="string")return;const a=pa(n);return a?new Ei(a[0]/255*a[3],a[1]/255*a[3],a[2]/255*a[3],a[3]):void 0}toString(){const[n,a,u,h]=this.toArray();return`rgba(${Math.round(n)},${Math.round(a)},${Math.round(u)},${h})`}toArray(){const{r:n,g:a,b:u,a:h}=this;return h===0?[0,0,0,0]:[255*n/h,255*a/h,255*u/h,h]}toArray01(){const{r:n,g:a,b:u,a:h}=this;return h===0?[0,0,0,0]:[n/h,a/h,u/h,h]}toArray01PremultipliedAlpha(){const{r:n,g:a,b:u,a:h}=this;return[n,a,u,h]}}Ei.black=new Ei(0,0,0,1),Ei.white=new Ei(1,1,1,1),Ei.transparent=new Ei(0,0,0,0),Ei.red=new Ei(1,0,0,1),Ei.blue=new Ei(0,0,1,1);var Nr=Ei;class hn{constructor(n,a,u){this.sensitivity=n?a?"variant":"case":a?"accent":"base",this.locale=u,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(n,a){return this.collator.compare(n,a)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class $n{constructor(n,a,u,h,m){this.text=n.normalize?n.normalize():n,this.image=a,this.scale=u,this.fontStack=h,this.textColor=m}}class Yn{constructor(n){this.sections=n}static fromString(n){return new Yn([new $n(n,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(n=>n.text.length!==0||n.image&&n.image.name.length!==0)}static factory(n){return n instanceof Yn?n:Yn.fromString(n)}toString(){return this.sections.length===0?"":this.sections.map(n=>n.text).join("")}serialize(){const n=["format"];for(const a of this.sections){if(a.image){n.push(["image",a.image.name]);continue}n.push(a.text);const u={};a.fontStack&&(u["text-font"]=["literal",a.fontStack.split(",")]),a.scale&&(u["font-scale"]=a.scale),a.textColor&&(u["text-color"]=["rgba"].concat(a.textColor.toArray())),n.push(u)}return n}}class hr{constructor(n){this.name=n.name,this.available=n.available}toString(){return this.name}static fromString(n){return n?new hr({name:n,available:!1}):null}serialize(){return["image",this.name]}}function Wr(i,n,a,u){return typeof i=="number"&&i>=0&&i<=255&&typeof n=="number"&&n>=0&&n<=255&&typeof a=="number"&&a>=0&&a<=255?u===void 0||typeof u=="number"&&u>=0&&u<=1?null:`Invalid rgba value [${[i,n,a,u].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof u=="number"?[i,n,a,u]:[i,n,a]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function va(i){if(i===null||typeof i=="string"||typeof i=="boolean"||typeof i=="number"||i instanceof Nr||i instanceof hn||i instanceof Yn||i instanceof hr)return!0;if(Array.isArray(i)){for(const n of i)if(!va(n))return!1;return!0}if(typeof i=="object"){for(const n in i)if(!va(i[n]))return!1;return!0}return!1}function Dr(i){if(i===null)return Gr;if(typeof i=="string")return xn;if(typeof i=="boolean")return bn;if(typeof i=="number")return zt;if(i instanceof Nr)return Qr;if(i instanceof hn)return Br;if(i instanceof Yn)return Ao;if(i instanceof hr)return Ro;if(Array.isArray(i)){const n=i.length;let a;for(const u of i){const h=Dr(u);if(a){if(a===h)continue;a=In;break}a=h}return Ui(a||In,n)}return Kr}function xs(i){const n=typeof i;return i===null?"":n==="string"||n==="number"||n==="boolean"?String(i):i instanceof Nr||i instanceof Yn||i instanceof hr?i.toString():JSON.stringify(i)}class bs{constructor(n,a){this.type=n,this.value=a}static parse(n,a){if(n.length!==2)return a.error(`'literal' expression requires exactly one argument, but found ${n.length-1} instead.`);if(!va(n[1]))return a.error("invalid value");const u=n[1];let h=Dr(u);const m=a.expectedType;return h.kind!=="array"||h.N!==0||!m||m.kind!=="array"||typeof m.N=="number"&&m.N!==0||(h=m),new bs(h,u)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Nr?["rgba"].concat(this.value.toArray()):this.value instanceof Yn?this.value.serialize():this.value}}var Us=bs,zi=class{constructor(i){this.name="ExpressionEvaluationError",this.message=i}toJSON(){return this.message}};const Lh={string:xn,number:zt,boolean:bn,object:Kr};class Dh{constructor(n,a){this.type=n,this.args=a}static parse(n,a){if(n.length<2)return a.error("Expected at least one argument.");let u,h=1;const m=n[0];if(m==="array"){let x,S;if(n.length>2){const C=n[1];if(typeof C!="string"||!(C in Lh)||C==="object")return a.error('The item type argument of "array" must be one of string, number, boolean',1);x=Lh[C],h++}else x=In;if(n.length>3){if(n[2]!==null&&(typeof n[2]!="number"||n[2]<0||n[2]!==Math.floor(n[2])))return a.error('The length argument to "array" must be a positive integer literal',2);S=n[2],h++}u=Ui(x,S)}else u=Lh[m];const v=[];for(;h<n.length;h++){const x=a.parse(n[h],h,In);if(!x)return null;v.push(x)}return new Dh(u,v)}evaluate(n){for(let a=0;a<this.args.length;a++){const u=this.args[a].evaluate(n);if(!xi(this.type,Dr(u)))return u;if(a===this.args.length-1)throw new zi(`Expected value to be of type ${Kn(this.type)}, but found ${Kn(Dr(u))} instead.`)}return null}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}serialize(){const n=this.type,a=[n.kind];if(n.kind==="array"){const u=n.itemType;if(u.kind==="string"||u.kind==="number"||u.kind==="boolean"){a.push(u.kind);const h=n.N;(typeof h=="number"||this.args.length>1)&&a.push(h)}}return a.concat(this.args.map(u=>u.serialize()))}}var Ua=Dh;class ws{constructor(n){this.type=Ao,this.sections=n}static parse(n,a){if(n.length<2)return a.error("Expected at least one argument.");const u=n[1];if(!Array.isArray(u)&&typeof u=="object")return a.error("First argument must be an image or text section.");const h=[];let m=!1;for(let v=1;v<=n.length-1;++v){const x=n[v];if(m&&typeof x=="object"&&!Array.isArray(x)){m=!1;let S=null;if(x["font-scale"]&&(S=a.parse(x["font-scale"],1,zt),!S))return null;let C=null;if(x["text-font"]&&(C=a.parse(x["text-font"],1,Ui(xn)),!C))return null;let R=null;if(x["text-color"]&&(R=a.parse(x["text-color"],1,Qr),!R))return null;const L=h[h.length-1];L.scale=S,L.font=C,L.textColor=R}else{const S=a.parse(n[v],1,In);if(!S)return null;const C=S.type.kind;if(C!=="string"&&C!=="value"&&C!=="null"&&C!=="resolvedImage")return a.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");m=!0,h.push({content:S,scale:null,font:null,textColor:null})}}return new ws(h)}evaluate(n){return new Yn(this.sections.map(a=>{const u=a.content.evaluate(n);return Dr(u)===Ro?new $n("",u,null,null,null):new $n(xs(u),null,a.scale?a.scale.evaluate(n):null,a.font?a.font.evaluate(n).join(","):null,a.textColor?a.textColor.evaluate(n):null)}))}eachChild(n){for(const a of this.sections)n(a.content),a.scale&&n(a.scale),a.font&&n(a.font),a.textColor&&n(a.textColor)}outputDefined(){return!1}serialize(){const n=["format"];for(const a of this.sections){n.push(a.content.serialize());const u={};a.scale&&(u["font-scale"]=a.scale.serialize()),a.font&&(u["text-font"]=a.font.serialize()),a.textColor&&(u["text-color"]=a.textColor.serialize()),n.push(u)}return n}}class zu{constructor(n){this.type=Ro,this.input=n}static parse(n,a){if(n.length!==2)return a.error("Expected two arguments.");const u=a.parse(n[1],1,xn);return u?new zu(u):a.error("No image name provided.")}evaluate(n){const a=this.input.evaluate(n),u=hr.fromString(a);return u&&n.availableImages&&(u.available=n.availableImages.indexOf(a)>-1),u}eachChild(n){n(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const Z0={"to-boolean":bn,"to-color":Qr,"to-number":zt,"to-string":xn};class kh{constructor(n,a){this.type=n,this.args=a}static parse(n,a){if(n.length<2)return a.error("Expected at least one argument.");const u=n[0];if((u==="to-boolean"||u==="to-string")&&n.length!==2)return a.error("Expected one argument.");const h=Z0[u],m=[];for(let v=1;v<n.length;v++){const x=a.parse(n[v],v,In);if(!x)return null;m.push(x)}return new kh(h,m)}evaluate(n){if(this.type.kind==="boolean")return!!this.args[0].evaluate(n);if(this.type.kind==="color"){let a,u;for(const h of this.args){if(a=h.evaluate(n),u=null,a instanceof Nr)return a;if(typeof a=="string"){const m=n.parseColor(a);if(m)return m}else if(Array.isArray(a)&&(u=a.length<3||a.length>4?`Invalid rbga value ${JSON.stringify(a)}: expected an array containing either three or four numeric values.`:Wr(a[0],a[1],a[2],a[3]),!u))return new Nr(a[0]/255,a[1]/255,a[2]/255,a[3])}throw new zi(u||`Could not parse color from value '${typeof a=="string"?a:String(JSON.stringify(a))}'`)}if(this.type.kind==="number"){let a=null;for(const u of this.args){if(a=u.evaluate(n),a===null)return 0;const h=Number(a);if(!isNaN(h))return h}throw new zi(`Could not convert ${JSON.stringify(a)} to number.`)}return this.type.kind==="formatted"?Yn.fromString(xs(this.args[0].evaluate(n))):this.type.kind==="resolvedImage"?hr.fromString(xs(this.args[0].evaluate(n))):xs(this.args[0].evaluate(n))}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}serialize(){if(this.type.kind==="formatted")return new ws([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new zu(this.args[0]).serialize();const n=[`to-${this.type.kind}`];return this.eachChild(a=>{n.push(a.serialize())}),n}}var El=kh;const ya=["Unknown","Point","LineString","Polygon"];var $h=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?ya[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const i=this.featureDistanceData.center,n=this.featureDistanceData.scale,{x:a,y:u}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(a*n-i[0])+this.featureDistanceData.bearing[1]*(u*n-i[1])}return 0}parseColor(i){let n=this._parseColorCache[i];return n||(n=this._parseColorCache[i]=Nr.parse(i)),n}};class Vs{constructor(n,a,u,h){this.name=n,this.type=a,this._evaluate=u,this.args=h}evaluate(n){return this._evaluate(n,this.args)}eachChild(n){this.args.forEach(n)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(n=>n.serialize()))}static parse(n,a){const u=n[0],h=Vs.definitions[u];if(!h)return a.error(`Unknown expression "${u}". If you wanted a literal array, use ["literal", [...]].`,0);const m=Array.isArray(h)?h[0]:h.type,v=Array.isArray(h)?[[h[1],h[2]]]:h.overloads,x=v.filter(([C])=>!Array.isArray(C)||C.length===n.length-1);let S=null;for(const[C,R]of x){S=new Vh(a.registry,a.path,null,a.scope);const L=[];let D=!1;for(let H=1;H<n.length;H++){const G=n[H],Y=Array.isArray(C)?C[H-1]:C.type,ae=S.parse(G,1+L.length,Y);if(!ae){D=!0;break}L.push(ae)}if(!D)if(Array.isArray(C)&&C.length!==L.length)S.error(`Expected ${C.length} arguments, but found ${L.length} instead.`);else{for(let H=0;H<L.length;H++){const G=Array.isArray(C)?C[H]:C.type,Y=L[H];S.concat(H+1).checkSubtype(G,Y.type)}if(S.errors.length===0)return new Vs(u,m,R,L)}}if(x.length===1)a.errors.push(...S.errors);else{const C=(x.length?x:v).map(([L])=>{return D=L,Array.isArray(D)?`(${D.map(Kn).join(", ")})`:`(${Kn(D.type)}...)`;var D}).join(" | "),R=[];for(let L=1;L<n.length;L++){const D=a.parse(n[L],1+R.length);if(!D)return null;R.push(Kn(D.type))}a.error(`Expected arguments of type ${C}, but found (${R.join(", ")}) instead.`)}return null}static register(n,a){Vs.definitions=a;for(const u in a)n[u]=Vs}}var Va=Vs;class Ec{constructor(n,a,u){this.type=Br,this.locale=u,this.caseSensitive=n,this.diacriticSensitive=a}static parse(n,a){if(n.length!==2)return a.error("Expected one argument.");const u=n[1];if(typeof u!="object"||Array.isArray(u))return a.error("Collator options argument must be an object.");const h=a.parse(u["case-sensitive"]!==void 0&&u["case-sensitive"],1,bn);if(!h)return null;const m=a.parse(u["diacritic-sensitive"]!==void 0&&u["diacritic-sensitive"],1,bn);if(!m)return null;let v=null;return u.locale&&(v=a.parse(u.locale,1,xn),!v)?null:new Ec(h,m,v)}evaluate(n){return new hn(this.caseSensitive.evaluate(n),this.diacriticSensitive.evaluate(n),this.locale?this.locale.evaluate(n):null)}eachChild(n){n(this.caseSensitive),n(this.diacriticSensitive),this.locale&&n(this.locale)}outputDefined(){return!1}serialize(){const n={};return n["case-sensitive"]=this.caseSensitive.serialize(),n["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(n.locale=this.locale.serialize()),["collator",n]}}const Ha=8192;function Lu(i,n){i[0]=Math.min(i[0],n[0]),i[1]=Math.min(i[1],n[1]),i[2]=Math.max(i[2],n[0]),i[3]=Math.max(i[3],n[1])}function Cl(i,n){return!(i[0]<=n[0]||i[2]>=n[2]||i[1]<=n[1]||i[3]>=n[3])}function Cc(i,n){const a=(180+i[0])/360,u=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+i[1]*Math.PI/360)))/360,h=Math.pow(2,n.z);return[Math.round(a*h*Ha),Math.round(u*h*Ha)]}function Lm(i,n,a){const u=i[0]-n[0],h=i[1]-n[1],m=i[0]-a[0],v=i[1]-a[1];return u*v-m*h==0&&u*m<=0&&h*v<=0}function Du(i,n){let a=!1;for(let v=0,x=n.length;v<x;v++){const S=n[v];for(let C=0,R=S.length;C<R-1;C++){if(Lm(i,S[C],S[C+1]))return!1;(h=S[C])[1]>(u=i)[1]!=(m=S[C+1])[1]>u[1]&&u[0]<(m[0]-h[0])*(u[1]-h[1])/(m[1]-h[1])+h[0]&&(a=!a)}}var u,h,m;return a}function Fh(i,n){for(let a=0;a<n.length;a++)if(Du(i,n[a]))return!0;return!1}function Bh(i,n,a,u){const h=u[0]-a[0],m=u[1]-a[1],v=(i[0]-a[0])*m-h*(i[1]-a[1]),x=(n[0]-a[0])*m-h*(n[1]-a[1]);return v>0&&x<0||v<0&&x>0}function Tl(i,n,a){for(const C of a)for(let R=0;R<C.length-1;++R)if((x=[(v=C[R+1])[0]-(m=C[R])[0],v[1]-m[1]])[0]*(S=[(h=n)[0]-(u=i)[0],h[1]-u[1]])[1]-x[1]*S[0]!=0&&Bh(u,h,m,v)&&Bh(m,v,u,h))return!0;var u,h,m,v,x,S;return!1}function sr(i,n){for(let a=0;a<i.length;++a)if(!Du(i[a],n))return!1;for(let a=0;a<i.length-1;++a)if(Tl(i[a],i[a+1],n))return!1;return!0}function X0(i,n){for(let a=0;a<n.length;a++)if(sr(i,n[a]))return!0;return!1}function Nh(i,n,a){const u=[];for(let h=0;h<i.length;h++){const m=[];for(let v=0;v<i[h].length;v++){const x=Cc(i[h][v],a);Lu(n,x),m.push(x)}u.push(m)}return u}function Dm(i,n,a){const u=[];for(let h=0;h<i.length;h++){const m=Nh(i[h],n,a);u.push(m)}return u}function jh(i,n,a,u){if(i[0]<a[0]||i[0]>a[2]){const h=.5*u;let m=i[0]-a[0]>h?-u:a[0]-i[0]>h?u:0;m===0&&(m=i[0]-a[2]>h?-u:a[2]-i[0]>h?u:0),i[0]+=m}Lu(n,i)}function km(i,n,a,u){const h=Math.pow(2,u.z)*Ha,m=[u.x*Ha,u.y*Ha],v=[];if(!i)return v;for(const x of i)for(const S of x){const C=[S.x+m[0],S.y+m[1]];jh(C,n,a,h),v.push(C)}return v}function Uh(i,n,a,u){const h=Math.pow(2,u.z)*Ha,m=[u.x*Ha,u.y*Ha],v=[];if(!i)return v;for(const S of i){const C=[];for(const R of S){const L=[R.x+m[0],R.y+m[1]];Lu(n,L),C.push(L)}v.push(C)}if(n[2]-n[0]<=h/2){(x=n)[0]=x[1]=1/0,x[2]=x[3]=-1/0;for(const S of v)for(const C of S)jh(C,n,a,h)}var x;return v}class Il{constructor(n,a){this.type=bn,this.geojson=n,this.geometries=a}static parse(n,a){if(n.length!==2)return a.error(`'within' expression requires exactly one argument, but found ${n.length-1} instead.`);if(va(n[1])){const u=n[1];if(u.type==="FeatureCollection")for(let h=0;h<u.features.length;++h){const m=u.features[h].geometry.type;if(m==="Polygon"||m==="MultiPolygon")return new Il(u,u.features[h].geometry)}else if(u.type==="Feature"){const h=u.geometry.type;if(h==="Polygon"||h==="MultiPolygon")return new Il(u,u.geometry)}else if(u.type==="Polygon"||u.type==="MultiPolygon")return new Il(u,u)}return a.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return function(a,u){const h=[1/0,1/0,-1/0,-1/0],m=[1/0,1/0,-1/0,-1/0],v=a.canonicalID();if(!v)return!1;if(u.type==="Polygon"){const x=Nh(u.coordinates,m,v),S=km(a.geometry(),h,m,v);if(!Cl(h,m))return!1;for(const C of S)if(!Du(C,x))return!1}if(u.type==="MultiPolygon"){const x=Dm(u.coordinates,m,v),S=km(a.geometry(),h,m,v);if(!Cl(h,m))return!1;for(const C of S)if(!Fh(C,x))return!1}return!0}(n,this.geometries);if(n.geometryType()==="LineString")return function(a,u){const h=[1/0,1/0,-1/0,-1/0],m=[1/0,1/0,-1/0,-1/0],v=a.canonicalID();if(!v)return!1;if(u.type==="Polygon"){const x=Nh(u.coordinates,m,v),S=Uh(a.geometry(),h,m,v);if(!Cl(h,m))return!1;for(const C of S)if(!sr(C,x))return!1}if(u.type==="MultiPolygon"){const x=Dm(u.coordinates,m,v),S=Uh(a.geometry(),h,m,v);if(!Cl(h,m))return!1;for(const C of S)if(!X0(C,x))return!1}return!0}(n,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var ku=Il;function Ml(i){if(i instanceof Va&&(i.name==="get"&&i.args.length===1||i.name==="feature-state"||i.name==="has"&&i.args.length===1||i.name==="properties"||i.name==="geometry-type"||i.name==="id"||/^filter-/.test(i.name))||i instanceof ku)return!1;let n=!0;return i.eachChild(a=>{n&&!Ml(a)&&(n=!1)}),n}function Ga(i){if(i instanceof Va&&i.name==="feature-state")return!1;let n=!0;return i.eachChild(a=>{n&&!Ga(a)&&(n=!1)}),n}function Hs(i,n){if(i instanceof Va&&n.indexOf(i.name)>=0)return!1;let a=!0;return i.eachChild(u=>{a&&!Hs(u,n)&&(a=!1)}),a}class $u{constructor(n,a){this.type=a.type,this.name=n,this.boundExpression=a}static parse(n,a){if(n.length!==2||typeof n[1]!="string")return a.error("'var' expression requires exactly one string literal argument.");const u=n[1];return a.scope.has(u)?new $u(u,a.scope.get(u)):a.error(`Unknown variable "${u}". Make sure "${u}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(n){return this.boundExpression.evaluate(n)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var $m=$u;class Tc{constructor(n,a=[],u,h=new Xr,m=[]){this.registry=n,this.path=a,this.key=a.map(v=>`[${v}]`).join(""),this.scope=h,this.errors=m,this.expectedType=u}parse(n,a,u,h,m={}){return a?this.concat(a,u,h)._parse(n,m):this._parse(n,m)}_parse(n,a){function u(h,m,v){return v==="assert"?new Ua(m,[h]):v==="coerce"?new El(m,[h]):h}if(n!==null&&typeof n!="string"&&typeof n!="boolean"&&typeof n!="number"||(n=["literal",n]),Array.isArray(n)){if(n.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const h=n[0];if(typeof h!="string")return this.error(`Expression name must be a string, but found ${typeof h} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const m=this.registry[h];if(m){let v=m.parse(n,this);if(!v)return null;if(this.expectedType){const x=this.expectedType,S=v.type;if(x.kind!=="string"&&x.kind!=="number"&&x.kind!=="boolean"&&x.kind!=="object"&&x.kind!=="array"||S.kind!=="value")if(x.kind!=="color"&&x.kind!=="formatted"&&x.kind!=="resolvedImage"||S.kind!=="value"&&S.kind!=="string"){if(this.checkSubtype(x,S))return null}else v=u(v,x,a.typeAnnotation||"coerce");else v=u(v,x,a.typeAnnotation||"assert")}if(!(v instanceof Us)&&v.type.kind!=="resolvedImage"&&Hh(v)){const x=new $h;try{v=new Us(v.type,v.evaluate(x))}catch(S){return this.error(S.message),null}}return v}return this.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(n===void 0?"'undefined' value invalid. Use null instead.":typeof n=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof n} instead.`)}concat(n,a,u){const h=typeof n=="number"?this.path.concat(n):this.path,m=u?this.scope.concat(u):this.scope;return new Tc(this.registry,h,a||null,m,this.errors)}error(n,...a){const u=`${this.key}${a.map(h=>`[${h}]`).join("")}`;this.errors.push(new Tn(u,n))}checkSubtype(n,a){const u=xi(n,a);return u&&this.error(u),u}}var Vh=Tc;function Hh(i){if(i instanceof $m)return Hh(i.boundExpression);if(i instanceof Va&&i.name==="error"||i instanceof Ec||i instanceof ku)return!1;const n=i instanceof El||i instanceof Ua;let a=!0;return i.eachChild(u=>{a=n?a&&Hh(u):a&&u instanceof Us}),!!a&&Ml(i)&&Hs(i,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function Fu(i,n){const a=i.length-1;let u,h,m=0,v=a,x=0;for(;m<=v;)if(x=Math.floor((m+v)/2),u=i[x],h=i[x+1],u<=n){if(x===a||n<h)return x;m=x+1}else{if(!(u>n))throw new zi("Input is not a number.");v=x-1}return 0}class Bu{constructor(n,a,u){this.type=n,this.input=a,this.labels=[],this.outputs=[];for(const[h,m]of u)this.labels.push(h),this.outputs.push(m)}static parse(n,a){if(n.length-1<4)return a.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return a.error("Expected an even number of arguments.");const u=a.parse(n[1],1,zt);if(!u)return null;const h=[];let m=null;a.expectedType&&a.expectedType.kind!=="value"&&(m=a.expectedType);for(let v=1;v<n.length;v+=2){const x=v===1?-1/0:n[v],S=n[v+1],C=v,R=v+1;if(typeof x!="number")return a.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',C);if(h.length&&h[h.length-1][0]>=x)return a.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',C);const L=a.parse(S,R,m);if(!L)return null;m=m||L.type,h.push([x,L])}return new Bu(m,u,h)}evaluate(n){const a=this.labels,u=this.outputs;if(a.length===1)return u[0].evaluate(n);const h=this.input.evaluate(n);if(h<=a[0])return u[0].evaluate(n);const m=a.length;return h>=a[m-1]?u[m-1].evaluate(n):u[Fu(a,h)].evaluate(n)}eachChild(n){n(this.input);for(const a of this.outputs)n(a)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}serialize(){const n=["step",this.input.serialize()];for(let a=0;a<this.labels.length;a++)a>0&&n.push(this.labels[a]),n.push(this.outputs[a].serialize());return n}}var Gh=Bu;function Jn(i,n,a){return i*(1-a)+n*a}var Ic=Object.freeze({__proto__:null,array:function(i,n,a){return i.map((u,h)=>Jn(u,n[h],a))},color:function(i,n,a){return new Nr(Jn(i.r,n.r,a),Jn(i.g,n.g,a),Jn(i.b,n.b,a),Jn(i.a,n.a,a))},number:Jn});const Fm=.95047,Wh=1.08883,Bm=4/29,Gs=6/29,qh=3*Gs*Gs,K0=Gs*Gs*Gs,Y0=Math.PI/180,J0=180/Math.PI;function Zh(i){return i>K0?Math.pow(i,1/3):i/qh+Bm}function Xh(i){return i>Gs?i*i*i:qh*(i-Bm)}function Kh(i){return 255*(i<=.0031308?12.92*i:1.055*Math.pow(i,1/2.4)-.055)}function Nu(i){return(i/=255)<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4)}function Nm(i){const n=Nu(i.r),a=Nu(i.g),u=Nu(i.b),h=Zh((.4124564*n+.3575761*a+.1804375*u)/Fm),m=Zh((.2126729*n+.7151522*a+.072175*u)/1);return{l:116*m-16,a:500*(h-m),b:200*(m-Zh((.0193339*n+.119192*a+.9503041*u)/Wh)),alpha:i.a}}function jm(i){let n=(i.l+16)/116,a=isNaN(i.a)?n:n+i.a/500,u=isNaN(i.b)?n:n-i.b/200;return n=1*Xh(n),a=Fm*Xh(a),u=Wh*Xh(u),new Nr(Kh(3.2404542*a-1.5371385*n-.4985314*u),Kh(-.969266*a+1.8760108*n+.041556*u),Kh(.0556434*a-.2040259*n+1.0572252*u),i.alpha)}function Q0(i,n,a){const u=n-i;return i+a*(u>180||u<-180?u-360*Math.round(u/360):u)}const Mc={forward:Nm,reverse:jm,interpolate:function(i,n,a){return{l:Jn(i.l,n.l,a),a:Jn(i.a,n.a,a),b:Jn(i.b,n.b,a),alpha:Jn(i.alpha,n.alpha,a)}}},Pl={forward:function(i){const{l:n,a,b:u}=Nm(i),h=Math.atan2(u,a)*J0;return{h:h<0?h+360:h,c:Math.sqrt(a*a+u*u),l:n,alpha:i.a}},reverse:function(i){const n=i.h*Y0,a=i.c;return jm({l:i.l,a:Math.cos(n)*a,b:Math.sin(n)*a,alpha:i.alpha})},interpolate:function(i,n,a){return{h:Q0(i.h,n.h,a),c:Jn(i.c,n.c,a),l:Jn(i.l,n.l,a),alpha:Jn(i.alpha,n.alpha,a)}}};var Yh=Object.freeze({__proto__:null,hcl:Pl,lab:Mc});class Pc{constructor(n,a,u,h,m){this.type=n,this.operator=a,this.interpolation=u,this.input=h,this.labels=[],this.outputs=[];for(const[v,x]of m)this.labels.push(v),this.outputs.push(x)}static interpolationFactor(n,a,u,h){let m=0;if(n.name==="exponential")m=Jh(a,n.base,u,h);else if(n.name==="linear")m=Jh(a,1,u,h);else if(n.name==="cubic-bezier"){const v=n.controlPoints;m=new ne(v[0],v[1],v[2],v[3]).solve(Jh(a,1,u,h))}return m}static parse(n,a){let[u,h,m,...v]=n;if(!Array.isArray(h)||h.length===0)return a.error("Expected an interpolation type expression.",1);if(h[0]==="linear")h={name:"linear"};else if(h[0]==="exponential"){const C=h[1];if(typeof C!="number")return a.error("Exponential interpolation requires a numeric base.",1,1);h={name:"exponential",base:C}}else{if(h[0]!=="cubic-bezier")return a.error(`Unknown interpolation type ${String(h[0])}`,1,0);{const C=h.slice(1);if(C.length!==4||C.some(R=>typeof R!="number"||R<0||R>1))return a.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);h={name:"cubic-bezier",controlPoints:C}}}if(n.length-1<4)return a.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return a.error("Expected an even number of arguments.");if(m=a.parse(m,2,zt),!m)return null;const x=[];let S=null;u==="interpolate-hcl"||u==="interpolate-lab"?S=Qr:a.expectedType&&a.expectedType.kind!=="value"&&(S=a.expectedType);for(let C=0;C<v.length;C+=2){const R=v[C],L=v[C+1],D=C+3,H=C+4;if(typeof R!="number")return a.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',D);if(x.length&&x[x.length-1][0]>=R)return a.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',D);const G=a.parse(L,H,S);if(!G)return null;S=S||G.type,x.push([R,G])}return S.kind==="number"||S.kind==="color"||S.kind==="array"&&S.itemType.kind==="number"&&typeof S.N=="number"?new Pc(S,u,h,m,x):a.error(`Type ${Kn(S)} is not interpolatable.`)}evaluate(n){const a=this.labels,u=this.outputs;if(a.length===1)return u[0].evaluate(n);const h=this.input.evaluate(n);if(h<=a[0])return u[0].evaluate(n);const m=a.length;if(h>=a[m-1])return u[m-1].evaluate(n);const v=Fu(a,h),x=Pc.interpolationFactor(this.interpolation,h,a[v],a[v+1]),S=u[v].evaluate(n),C=u[v+1].evaluate(n);return this.operator==="interpolate"?Ic[this.type.kind.toLowerCase()](S,C,x):this.operator==="interpolate-hcl"?Pl.reverse(Pl.interpolate(Pl.forward(S),Pl.forward(C),x)):Mc.reverse(Mc.interpolate(Mc.forward(S),Mc.forward(C),x))}eachChild(n){n(this.input);for(const a of this.outputs)n(a)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}serialize(){let n;n=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const a=[this.operator,n,this.input.serialize()];for(let u=0;u<this.labels.length;u++)a.push(this.labels[u],this.outputs[u].serialize());return a}}function Jh(i,n,a,u){const h=u-a,m=i-a;return h===0?0:n===1?m/h:(Math.pow(n,m)-1)/(Math.pow(n,h)-1)}var _a=Pc;class ju{constructor(n,a){this.type=n,this.args=a}static parse(n,a){if(n.length<2)return a.error("Expectected at least one argument.");let u=null;const h=a.expectedType;h&&h.kind!=="value"&&(u=h);const m=[];for(const x of n.slice(1)){const S=a.parse(x,1+m.length,u,void 0,{typeAnnotation:"omit"});if(!S)return null;u=u||S.type,m.push(S)}const v=h&&m.some(x=>xi(h,x.type));return new ju(v?In:u,m)}evaluate(n){let a,u=null,h=0;for(const m of this.args){if(h++,u=m.evaluate(n),u&&u instanceof hr&&!u.available&&(a||(a=u),u=null,h===this.args.length))return a;if(u!==null)break}return u}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}serialize(){const n=["coalesce"];return this.eachChild(a=>{n.push(a.serialize())}),n}}var Qh=ju;class Uu{constructor(n,a){this.type=a.type,this.bindings=[].concat(n),this.result=a}evaluate(n){return this.result.evaluate(n)}eachChild(n){for(const a of this.bindings)n(a[1]);n(this.result)}static parse(n,a){if(n.length<4)return a.error(`Expected at least 3 arguments, but found ${n.length-1} instead.`);const u=[];for(let m=1;m<n.length-1;m+=2){const v=n[m];if(typeof v!="string")return a.error(`Expected string, but found ${typeof v} instead.`,m);if(/[^a-zA-Z0-9_]/.test(v))return a.error("Variable names must contain only alphanumeric characters or '_'.",m);const x=a.parse(n[m+1],m+1);if(!x)return null;u.push([v,x])}const h=a.parse(n[n.length-1],n.length-1,a.expectedType,u);return h?new Uu(u,h):null}outputDefined(){return this.result.outputDefined()}serialize(){const n=["let"];for(const[a,u]of this.bindings)n.push(a,u.serialize());return n.push(this.result.serialize()),n}}var Um=Uu;class ef{constructor(n,a,u){this.type=n,this.index=a,this.input=u}static parse(n,a){if(n.length!==3)return a.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const u=a.parse(n[1],1,zt),h=a.parse(n[2],2,Ui(a.expectedType||In));return u&&h?new ef(h.type.itemType,u,h):null}evaluate(n){const a=this.index.evaluate(n),u=this.input.evaluate(n);if(a<0)throw new zi(`Array index out of bounds: ${a} < 0.`);if(a>=u.length)throw new zi(`Array index out of bounds: ${a} > ${u.length-1}.`);if(a!==Math.floor(a))throw new zi(`Array index must be an integer, but found ${a} instead.`);return u[a]}eachChild(n){n(this.index),n(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var e_=ef;class tf{constructor(n,a){this.type=bn,this.needle=n,this.haystack=a}static parse(n,a){if(n.length!==3)return a.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const u=a.parse(n[1],1,In),h=a.parse(n[2],2,In);return u&&h?bo(u.type,[bn,xn,zt,Gr,In])?new tf(u,h):a.error(`Expected first argument to be of type boolean, string, number or null, but found ${Kn(u.type)} instead`):null}evaluate(n){const a=this.needle.evaluate(n),u=this.haystack.evaluate(n);if(u==null)return!1;if(!Oo(a,["boolean","string","number","null"]))throw new zi(`Expected first argument to be of type boolean, string, number or null, but found ${Kn(Dr(a))} instead.`);if(!Oo(u,["string","array"]))throw new zi(`Expected second argument to be of type array or string, but found ${Kn(Dr(u))} instead.`);return u.indexOf(a)>=0}eachChild(n){n(this.needle),n(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var Vu=tf;class Ac{constructor(n,a,u){this.type=zt,this.needle=n,this.haystack=a,this.fromIndex=u}static parse(n,a){if(n.length<=2||n.length>=5)return a.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const u=a.parse(n[1],1,In),h=a.parse(n[2],2,In);if(!u||!h)return null;if(!bo(u.type,[bn,xn,zt,Gr,In]))return a.error(`Expected first argument to be of type boolean, string, number or null, but found ${Kn(u.type)} instead`);if(n.length===4){const m=a.parse(n[3],3,zt);return m?new Ac(u,h,m):null}return new Ac(u,h)}evaluate(n){const a=this.needle.evaluate(n),u=this.haystack.evaluate(n);if(!Oo(a,["boolean","string","number","null"]))throw new zi(`Expected first argument to be of type boolean, string, number or null, but found ${Kn(Dr(a))} instead.`);if(!Oo(u,["string","array"]))throw new zi(`Expected second argument to be of type array or string, but found ${Kn(Dr(u))} instead.`);if(this.fromIndex){const h=this.fromIndex.evaluate(n);return u.indexOf(a,h)}return u.indexOf(a)}eachChild(n){n(this.needle),n(this.haystack),this.fromIndex&&n(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const n=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),n]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var Vm=Ac;class nf{constructor(n,a,u,h,m,v){this.inputType=n,this.type=a,this.input=u,this.cases=h,this.outputs=m,this.otherwise=v}static parse(n,a){if(n.length<5)return a.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if(n.length%2!=1)return a.error("Expected an even number of arguments.");let u,h;a.expectedType&&a.expectedType.kind!=="value"&&(h=a.expectedType);const m={},v=[];for(let C=2;C<n.length-1;C+=2){let R=n[C];const L=n[C+1];Array.isArray(R)||(R=[R]);const D=a.concat(C);if(R.length===0)return D.error("Expected at least one branch label.");for(const G of R){if(typeof G!="number"&&typeof G!="string")return D.error("Branch labels must be numbers or strings.");if(typeof G=="number"&&Math.abs(G)>Number.MAX_SAFE_INTEGER)return D.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof G=="number"&&Math.floor(G)!==G)return D.error("Numeric branch labels must be integer values.");if(u){if(D.checkSubtype(u,Dr(G)))return null}else u=Dr(G);if(m[String(G)]!==void 0)return D.error("Branch labels must be unique.");m[String(G)]=v.length}const H=a.parse(L,C,h);if(!H)return null;h=h||H.type,v.push(H)}const x=a.parse(n[1],1,In);if(!x)return null;const S=a.parse(n[n.length-1],n.length-1,h);return S?x.type.kind!=="value"&&a.concat(1).checkSubtype(u,x.type)?null:new nf(u,h,x,m,v,S):null}evaluate(n){const a=this.input.evaluate(n);return(Dr(a)===this.inputType&&this.outputs[this.cases[a]]||this.otherwise).evaluate(n)}eachChild(n){n(this.input),this.outputs.forEach(n),n(this.otherwise)}outputDefined(){return this.outputs.every(n=>n.outputDefined())&&this.otherwise.outputDefined()}serialize(){const n=["match",this.input.serialize()],a=Object.keys(this.cases).sort(),u=[],h={};for(const v of a){const x=h[this.cases[v]];x===void 0?(h[this.cases[v]]=u.length,u.push([this.cases[v],[v]])):u[x][1].push(v)}const m=v=>this.inputType.kind==="number"?Number(v):v;for(const[v,x]of u)n.push(x.length===1?m(x[0]):x.map(m)),n.push(this.outputs[v].serialize());return n.push(this.otherwise.serialize()),n}}var t_=nf;class rf{constructor(n,a,u){this.type=n,this.branches=a,this.otherwise=u}static parse(n,a){if(n.length<4)return a.error(`Expected at least 3 arguments, but found only ${n.length-1}.`);if(n.length%2!=0)return a.error("Expected an odd number of arguments.");let u;a.expectedType&&a.expectedType.kind!=="value"&&(u=a.expectedType);const h=[];for(let v=1;v<n.length-1;v+=2){const x=a.parse(n[v],v,bn);if(!x)return null;const S=a.parse(n[v+1],v+1,u);if(!S)return null;h.push([x,S]),u=u||S.type}const m=a.parse(n[n.length-1],n.length-1,u);return m?new rf(u,h,m):null}evaluate(n){for(const[a,u]of this.branches)if(a.evaluate(n))return u.evaluate(n);return this.otherwise.evaluate(n)}eachChild(n){for(const[a,u]of this.branches)n(a),n(u);n(this.otherwise)}outputDefined(){return this.branches.every(([n,a])=>a.outputDefined())&&this.otherwise.outputDefined()}serialize(){const n=["case"];return this.eachChild(a=>{n.push(a.serialize())}),n}}var Hm=rf;class Rc{constructor(n,a,u,h){this.type=n,this.input=a,this.beginIndex=u,this.endIndex=h}static parse(n,a){if(n.length<=2||n.length>=5)return a.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const u=a.parse(n[1],1,In),h=a.parse(n[2],2,zt);if(!u||!h)return null;if(!bo(u.type,[Ui(In),xn,In]))return a.error(`Expected first argument to be of type array or string, but found ${Kn(u.type)} instead`);if(n.length===4){const m=a.parse(n[3],3,zt);return m?new Rc(u.type,u,h,m):null}return new Rc(u.type,u,h)}evaluate(n){const a=this.input.evaluate(n),u=this.beginIndex.evaluate(n);if(!Oo(a,["string","array"]))throw new zi(`Expected first argument to be of type array or string, but found ${Kn(Dr(a))} instead.`);if(this.endIndex){const h=this.endIndex.evaluate(n);return a.slice(u,h)}return a.slice(u)}eachChild(n){n(this.input),n(this.beginIndex),this.endIndex&&n(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const n=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),n]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var Gm=Rc;function Hu(i,n){return i==="=="||i==="!="?n.kind==="boolean"||n.kind==="string"||n.kind==="number"||n.kind==="null"||n.kind==="value":n.kind==="string"||n.kind==="number"||n.kind==="value"}function Wm(i,n,a,u){return u.compare(n,a)===0}function Al(i,n,a){const u=i!=="=="&&i!=="!=";return class ZD{constructor(m,v,x){this.type=bn,this.lhs=m,this.rhs=v,this.collator=x,this.hasUntypedArgument=m.type.kind==="value"||v.type.kind==="value"}static parse(m,v){if(m.length!==3&&m.length!==4)return v.error("Expected two or three arguments.");const x=m[0];let S=v.parse(m[1],1,In);if(!S)return null;if(!Hu(x,S.type))return v.concat(1).error(`"${x}" comparisons are not supported for type '${Kn(S.type)}'.`);let C=v.parse(m[2],2,In);if(!C)return null;if(!Hu(x,C.type))return v.concat(2).error(`"${x}" comparisons are not supported for type '${Kn(C.type)}'.`);if(S.type.kind!==C.type.kind&&S.type.kind!=="value"&&C.type.kind!=="value")return v.error(`Cannot compare types '${Kn(S.type)}' and '${Kn(C.type)}'.`);u&&(S.type.kind==="value"&&C.type.kind!=="value"?S=new Ua(C.type,[S]):S.type.kind!=="value"&&C.type.kind==="value"&&(C=new Ua(S.type,[C])));let R=null;if(m.length===4){if(S.type.kind!=="string"&&C.type.kind!=="string"&&S.type.kind!=="value"&&C.type.kind!=="value")return v.error("Cannot use collator to compare non-string types.");if(R=v.parse(m[3],3,Br),!R)return null}return new ZD(S,C,R)}evaluate(m){const v=this.lhs.evaluate(m),x=this.rhs.evaluate(m);if(u&&this.hasUntypedArgument){const S=Dr(v),C=Dr(x);if(S.kind!==C.kind||S.kind!=="string"&&S.kind!=="number")throw new zi(`Expected arguments for "${i}" to be (string, string) or (number, number), but found (${S.kind}, ${C.kind}) instead.`)}if(this.collator&&!u&&this.hasUntypedArgument){const S=Dr(v),C=Dr(x);if(S.kind!=="string"||C.kind!=="string")return n(m,v,x)}return this.collator?a(m,v,x,this.collator.evaluate(m)):n(m,v,x)}eachChild(m){m(this.lhs),m(this.rhs),this.collator&&m(this.collator)}outputDefined(){return!0}serialize(){const m=[i];return this.eachChild(v=>{m.push(v.serialize())}),m}}}const n_=Al("==",function(i,n,a){return n===a},Wm),r_=Al("!=",function(i,n,a){return n!==a},function(i,n,a,u){return!Wm(0,n,a,u)}),i_=Al("<",function(i,n,a){return n<a},function(i,n,a,u){return u.compare(n,a)<0}),o_=Al(">",function(i,n,a){return n>a},function(i,n,a,u){return u.compare(n,a)>0}),a_=Al("<=",function(i,n,a){return n<=a},function(i,n,a,u){return u.compare(n,a)<=0}),qm=Al(">=",function(i,n,a){return n>=a},function(i,n,a,u){return u.compare(n,a)>=0});class Gu{constructor(n,a,u,h,m,v){this.type=xn,this.number=n,this.locale=a,this.currency=u,this.unit=h,this.minFractionDigits=m,this.maxFractionDigits=v}static parse(n,a){if(n.length!==3)return a.error("Expected two arguments.");const u=a.parse(n[1],1,zt);if(!u)return null;const h=n[2];if(typeof h!="object"||Array.isArray(h))return a.error("NumberFormat options argument must be an object.");let m=null;if(h.locale&&(m=a.parse(h.locale,1,xn),!m))return null;let v=null;if(h.currency&&(v=a.parse(h.currency,1,xn),!v))return null;let x=null;if(h.unit&&(x=a.parse(h.unit,1,xn),!x))return null;let S=null;if(h["min-fraction-digits"]&&(S=a.parse(h["min-fraction-digits"],1,zt),!S))return null;let C=null;return h["max-fraction-digits"]&&(C=a.parse(h["max-fraction-digits"],1,zt),!C)?null:new Gu(u,m,v,x,S,C)}evaluate(n){return new Intl.NumberFormat(this.locale?this.locale.evaluate(n):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(n):void 0,unit:this.unit?this.unit.evaluate(n):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(n):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(n):void 0}).format(this.number.evaluate(n))}eachChild(n){n(this.number),this.locale&&n(this.locale),this.currency&&n(this.currency),this.unit&&n(this.unit),this.minFractionDigits&&n(this.minFractionDigits),this.maxFractionDigits&&n(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const n={};return this.locale&&(n.locale=this.locale.serialize()),this.currency&&(n.currency=this.currency.serialize()),this.unit&&(n.unit=this.unit.serialize()),this.minFractionDigits&&(n["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(n["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),n]}}class Rl{constructor(n){this.type=zt,this.input=n}static parse(n,a){if(n.length!==2)return a.error(`Expected 1 argument, but found ${n.length-1} instead.`);const u=a.parse(n[1],1);return u?u.type.kind!=="array"&&u.type.kind!=="string"&&u.type.kind!=="value"?a.error(`Expected argument of type string or array, but found ${Kn(u.type)} instead.`):new Rl(u):null}evaluate(n){const a=this.input.evaluate(n);if(typeof a=="string"||Array.isArray(a))return a.length;throw new zi(`Expected value to be of type string or array, but found ${Kn(Dr(a))} instead.`)}eachChild(n){n(this.input)}outputDefined(){return!1}serialize(){const n=["length"];return this.eachChild(a=>{n.push(a.serialize())}),n}}const Zm={"==":n_,"!=":r_,">":o_,"<":i_,">=":qm,"<=":a_,array:Ua,at:e_,boolean:Ua,case:Hm,coalesce:Qh,collator:Ec,format:ws,image:zu,in:Vu,"index-of":Vm,interpolate:_a,"interpolate-hcl":_a,"interpolate-lab":_a,length:Rl,let:Um,literal:Us,match:t_,number:Ua,"number-format":Gu,object:Ua,slice:Gm,step:Gh,string:Ua,"to-boolean":El,"to-color":El,"to-number":El,"to-string":El,var:$m,within:ku};function Xm(i,[n,a,u,h]){n=n.evaluate(i),a=a.evaluate(i),u=u.evaluate(i);const m=h?h.evaluate(i):1,v=Wr(n,a,u,m);if(v)throw new zi(v);return new Nr(n/255*m,a/255*m,u/255*m,m)}function Wa(i,n){return i in n}function Wu(i,n){const a=n[i];return a===void 0?null:a}function zo(i){return{type:i}}Va.register(Zm,{error:[{kind:"error"},[xn],(i,[n])=>{throw new zi(n.evaluate(i))}],typeof:[xn,[In],(i,[n])=>Kn(Dr(n.evaluate(i)))],"to-rgba":[Ui(zt,4),[Qr],(i,[n])=>n.evaluate(i).toArray()],rgb:[Qr,[zt,zt,zt],Xm],rgba:[Qr,[zt,zt,zt,zt],Xm],has:{type:bn,overloads:[[[xn],(i,[n])=>Wa(n.evaluate(i),i.properties())],[[xn,Kr],(i,[n,a])=>Wa(n.evaluate(i),a.evaluate(i))]]},get:{type:In,overloads:[[[xn],(i,[n])=>Wu(n.evaluate(i),i.properties())],[[xn,Kr],(i,[n,a])=>Wu(n.evaluate(i),a.evaluate(i))]]},"feature-state":[In,[xn],(i,[n])=>Wu(n.evaluate(i),i.featureState||{})],properties:[Kr,[],i=>i.properties()],"geometry-type":[xn,[],i=>i.geometryType()],id:[In,[],i=>i.id()],zoom:[zt,[],i=>i.globals.zoom],pitch:[zt,[],i=>i.globals.pitch||0],"distance-from-center":[zt,[],i=>i.distanceFromCenter()],"heatmap-density":[zt,[],i=>i.globals.heatmapDensity||0],"line-progress":[zt,[],i=>i.globals.lineProgress||0],"sky-radial-progress":[zt,[],i=>i.globals.skyRadialProgress||0],accumulated:[In,[],i=>i.globals.accumulated===void 0?null:i.globals.accumulated],"+":[zt,zo(zt),(i,n)=>{let a=0;for(const u of n)a+=u.evaluate(i);return a}],"*":[zt,zo(zt),(i,n)=>{let a=1;for(const u of n)a*=u.evaluate(i);return a}],"-":{type:zt,overloads:[[[zt,zt],(i,[n,a])=>n.evaluate(i)-a.evaluate(i)],[[zt],(i,[n])=>-n.evaluate(i)]]},"/":[zt,[zt,zt],(i,[n,a])=>n.evaluate(i)/a.evaluate(i)],"%":[zt,[zt,zt],(i,[n,a])=>n.evaluate(i)%a.evaluate(i)],ln2:[zt,[],()=>Math.LN2],pi:[zt,[],()=>Math.PI],e:[zt,[],()=>Math.E],"^":[zt,[zt,zt],(i,[n,a])=>Math.pow(n.evaluate(i),a.evaluate(i))],sqrt:[zt,[zt],(i,[n])=>Math.sqrt(n.evaluate(i))],log10:[zt,[zt],(i,[n])=>Math.log(n.evaluate(i))/Math.LN10],ln:[zt,[zt],(i,[n])=>Math.log(n.evaluate(i))],log2:[zt,[zt],(i,[n])=>Math.log(n.evaluate(i))/Math.LN2],sin:[zt,[zt],(i,[n])=>Math.sin(n.evaluate(i))],cos:[zt,[zt],(i,[n])=>Math.cos(n.evaluate(i))],tan:[zt,[zt],(i,[n])=>Math.tan(n.evaluate(i))],asin:[zt,[zt],(i,[n])=>Math.asin(n.evaluate(i))],acos:[zt,[zt],(i,[n])=>Math.acos(n.evaluate(i))],atan:[zt,[zt],(i,[n])=>Math.atan(n.evaluate(i))],min:[zt,zo(zt),(i,n)=>Math.min(...n.map(a=>a.evaluate(i)))],max:[zt,zo(zt),(i,n)=>Math.max(...n.map(a=>a.evaluate(i)))],abs:[zt,[zt],(i,[n])=>Math.abs(n.evaluate(i))],round:[zt,[zt],(i,[n])=>{const a=n.evaluate(i);return a<0?-Math.round(-a):Math.round(a)}],floor:[zt,[zt],(i,[n])=>Math.floor(n.evaluate(i))],ceil:[zt,[zt],(i,[n])=>Math.ceil(n.evaluate(i))],"filter-==":[bn,[xn,In],(i,[n,a])=>i.properties()[n.value]===a.value],"filter-id-==":[bn,[In],(i,[n])=>i.id()===n.value],"filter-type-==":[bn,[xn],(i,[n])=>i.geometryType()===n.value],"filter-<":[bn,[xn,In],(i,[n,a])=>{const u=i.properties()[n.value],h=a.value;return typeof u==typeof h&&u<h}],"filter-id-<":[bn,[In],(i,[n])=>{const a=i.id(),u=n.value;return typeof a==typeof u&&a<u}],"filter->":[bn,[xn,In],(i,[n,a])=>{const u=i.properties()[n.value],h=a.value;return typeof u==typeof h&&u>h}],"filter-id->":[bn,[In],(i,[n])=>{const a=i.id(),u=n.value;return typeof a==typeof u&&a>u}],"filter-<=":[bn,[xn,In],(i,[n,a])=>{const u=i.properties()[n.value],h=a.value;return typeof u==typeof h&&u<=h}],"filter-id-<=":[bn,[In],(i,[n])=>{const a=i.id(),u=n.value;return typeof a==typeof u&&a<=u}],"filter->=":[bn,[xn,In],(i,[n,a])=>{const u=i.properties()[n.value],h=a.value;return typeof u==typeof h&&u>=h}],"filter-id->=":[bn,[In],(i,[n])=>{const a=i.id(),u=n.value;return typeof a==typeof u&&a>=u}],"filter-has":[bn,[In],(i,[n])=>n.value in i.properties()],"filter-has-id":[bn,[],i=>i.id()!==null&&i.id()!==void 0],"filter-type-in":[bn,[Ui(xn)],(i,[n])=>n.value.indexOf(i.geometryType())>=0],"filter-id-in":[bn,[Ui(In)],(i,[n])=>n.value.indexOf(i.id())>=0],"filter-in-small":[bn,[xn,Ui(In)],(i,[n,a])=>a.value.indexOf(i.properties()[n.value])>=0],"filter-in-large":[bn,[xn,Ui(In)],(i,[n,a])=>function(u,h,m,v){for(;m<=v;){const x=m+v>>1;if(h[x]===u)return!0;h[x]>u?v=x-1:m=x+1}return!1}(i.properties()[n.value],a.value,0,a.value.length-1)],all:{type:bn,overloads:[[[bn,bn],(i,[n,a])=>n.evaluate(i)&&a.evaluate(i)],[zo(bn),(i,n)=>{for(const a of n)if(!a.evaluate(i))return!1;return!0}]]},any:{type:bn,overloads:[[[bn,bn],(i,[n,a])=>n.evaluate(i)||a.evaluate(i)],[zo(bn),(i,n)=>{for(const a of n)if(a.evaluate(i))return!0;return!1}]]},"!":[bn,[bn],(i,[n])=>!n.evaluate(i)],"is-supported-script":[bn,[xn],(i,[n])=>{const a=i.globals&&i.globals.isSupportedScript;return!a||a(n.evaluate(i))}],upcase:[xn,[xn],(i,[n])=>n.evaluate(i).toUpperCase()],downcase:[xn,[xn],(i,[n])=>n.evaluate(i).toLowerCase()],concat:[xn,zo(In),(i,n)=>n.map(a=>xs(a.evaluate(i))).join("")],"resolved-locale":[xn,[Br],(i,[n])=>n.evaluate(i).resolvedLocale()]});var Oc=Zm;function Km(i){return{result:"success",value:i}}function Ws(i){return{result:"error",value:i}}function Ol(i){return i["property-type"]==="data-driven"}function qu(i){return!!i.expression&&i.expression.parameters.indexOf("zoom")>-1}function Zu(i){return!!i.expression&&i.expression.interpolated}function tr(i){return i instanceof Number?"number":i instanceof String?"string":i instanceof Boolean?"boolean":Array.isArray(i)?"array":i===null?"null":typeof i}function zc(i){return typeof i=="object"&&i!==null&&!Array.isArray(i)}function Ym(i){return i}function Xu(i,n){const a=n.type==="color",u=i.stops&&typeof i.stops[0][0]=="object",h=u||!(u||i.property!==void 0),m=i.type||(Zu(n)?"exponential":"interval");if(a&&((i=Si({},i)).stops&&(i.stops=i.stops.map(C=>[C[0],Nr.parse(C[1])])),i.default=Nr.parse(i.default?i.default:n.default)),i.colorSpace&&i.colorSpace!=="rgb"&&!Yh[i.colorSpace])throw new Error(`Unknown color space: ${i.colorSpace}`);let v,x,S;if(m==="exponential")v=qa;else if(m==="interval")v=Ku;else if(m==="categorical"){v=Jm,x=Object.create(null);for(const C of i.stops)x[C[0]]=C[1];S=typeof i.stops[0][0]}else{if(m!=="identity")throw new Error(`Unknown function type "${m}"`);v=Qm}if(u){const C={},R=[];for(let H=0;H<i.stops.length;H++){const G=i.stops[H],Y=G[0].zoom;C[Y]===void 0&&(C[Y]={zoom:Y,type:i.type,property:i.property,default:i.default,stops:[]},R.push(Y)),C[Y].stops.push([G[0].value,G[1]])}const L=[];for(const H of R)L.push([C[H].zoom,Xu(C[H],n)]);const D={name:"linear"};return{kind:"composite",interpolationType:D,interpolationFactor:_a.interpolationFactor.bind(void 0,D),zoomStops:L.map(H=>H[0]),evaluate:({zoom:H},G)=>qa({stops:L,base:i.base},n,H).evaluate(H,G)}}if(h){const C=m==="exponential"?{name:"exponential",base:i.base!==void 0?i.base:1}:null;return{kind:"camera",interpolationType:C,interpolationFactor:_a.interpolationFactor.bind(void 0,C),zoomStops:i.stops.map(R=>R[0]),evaluate:({zoom:R})=>v(i,n,R,x,S)}}return{kind:"source",evaluate(C,R){const L=R&&R.properties?R.properties[i.property]:void 0;return L===void 0?zl(i.default,n.default):v(i,n,L,x,S)}}}function zl(i,n,a){return i!==void 0?i:n!==void 0?n:a!==void 0?a:void 0}function Jm(i,n,a,u,h){return zl(typeof a===h?u[a]:void 0,i.default,n.default)}function Ku(i,n,a){if(tr(a)!=="number")return zl(i.default,n.default);const u=i.stops.length;if(u===1||a<=i.stops[0][0])return i.stops[0][1];if(a>=i.stops[u-1][0])return i.stops[u-1][1];const h=Fu(i.stops.map(m=>m[0]),a);return i.stops[h][1]}function qa(i,n,a){const u=i.base!==void 0?i.base:1;if(tr(a)!=="number")return zl(i.default,n.default);const h=i.stops.length;if(h===1||a<=i.stops[0][0])return i.stops[0][1];if(a>=i.stops[h-1][0])return i.stops[h-1][1];const m=Fu(i.stops.map(R=>R[0]),a),v=function(R,L,D,H){const G=H-D,Y=R-D;return G===0?0:L===1?Y/G:(Math.pow(L,Y)-1)/(Math.pow(L,G)-1)}(a,u,i.stops[m][0],i.stops[m+1][0]),x=i.stops[m][1],S=i.stops[m+1][1];let C=Ic[n.type]||Ym;if(i.colorSpace&&i.colorSpace!=="rgb"){const R=Yh[i.colorSpace];C=(L,D)=>R.reverse(R.interpolate(R.forward(L),R.forward(D),v))}return typeof x.evaluate=="function"?{evaluate(...R){const L=x.evaluate.apply(void 0,R),D=S.evaluate.apply(void 0,R);if(L!==void 0&&D!==void 0)return C(L,D,v)}}:C(x,S,v)}function Qm(i,n,a){return n.type==="color"?a=Nr.parse(a):n.type==="formatted"?a=Yn.fromString(a.toString()):n.type==="resolvedImage"?a=hr.fromString(a.toString()):tr(a)===n.type||n.type==="enum"&&n.values[a]||(a=void 0),zl(a,i.default,n.default)}class Yu{constructor(n,a){this.expression=n,this._warningHistory={},this._evaluator=new $h,this._defaultValue=a?function(u){return u.type==="color"&&(zc(u.default)||Array.isArray(u.default))?new Nr(0,0,0,0):u.type==="color"?Nr.parse(u.default)||null:u.default===void 0?null:u.default}(a):null,this._enumValues=a&&a.type==="enum"?a.values:null}evaluateWithoutErrorHandling(n,a,u,h,m,v,x,S){return this._evaluator.globals=n,this._evaluator.feature=a,this._evaluator.featureState=u,this._evaluator.canonical=h||null,this._evaluator.availableImages=m||null,this._evaluator.formattedSection=v,this._evaluator.featureTileCoord=x||null,this._evaluator.featureDistanceData=S||null,this.expression.evaluate(this._evaluator)}evaluate(n,a,u,h,m,v,x,S){this._evaluator.globals=n,this._evaluator.feature=a||null,this._evaluator.featureState=u||null,this._evaluator.canonical=h||null,this._evaluator.availableImages=m||null,this._evaluator.formattedSection=v||null,this._evaluator.featureTileCoord=x||null,this._evaluator.featureDistanceData=S||null;try{const C=this.expression.evaluate(this._evaluator);if(C==null||typeof C=="number"&&C!=C)return this._defaultValue;if(this._enumValues&&!(C in this._enumValues))throw new zi(`Expected value to be one of ${Object.keys(this._enumValues).map(R=>JSON.stringify(R)).join(", ")}, but found ${JSON.stringify(C)} instead.`);return C}catch(C){return this._warningHistory[C.message]||(this._warningHistory[C.message]=!0,typeof console<"u"&&console.warn(C.message)),this._defaultValue}}}function Ll(i){return Array.isArray(i)&&i.length>0&&typeof i[0]=="string"&&i[0]in Oc}function Dl(i,n){const a=new Vh(Oc,[],n?function(h){const m={color:Qr,string:xn,number:zt,enum:xn,boolean:bn,formatted:Ao,resolvedImage:Ro};return h.type==="array"?Ui(m[h.value]||In,h.length):m[h.type]}(n):void 0),u=a.parse(i,void 0,void 0,void 0,n&&n.type==="string"?{typeAnnotation:"coerce"}:void 0);return u?Km(new Yu(u,n)):Ws(a.errors)}class of{constructor(n,a){this.kind=n,this._styleExpression=a,this.isStateDependent=n!=="constant"&&!Ga(a.expression)}evaluateWithoutErrorHandling(n,a,u,h,m,v){return this._styleExpression.evaluateWithoutErrorHandling(n,a,u,h,m,v)}evaluate(n,a,u,h,m,v){return this._styleExpression.evaluate(n,a,u,h,m,v)}}class Lc{constructor(n,a,u,h){this.kind=n,this.zoomStops=u,this._styleExpression=a,this.isStateDependent=n!=="camera"&&!Ga(a.expression),this.interpolationType=h}evaluateWithoutErrorHandling(n,a,u,h,m,v){return this._styleExpression.evaluateWithoutErrorHandling(n,a,u,h,m,v)}evaluate(n,a,u,h,m,v){return this._styleExpression.evaluate(n,a,u,h,m,v)}interpolationFactor(n,a,u){return this.interpolationType?_a.interpolationFactor(this.interpolationType,n,a,u):0}}function Dc(i,n){if((i=Dl(i,n)).result==="error")return i;const a=i.value.expression,u=Ml(a);if(!u&&!Ol(n))return Ws([new Tn("","data expressions not supported")]);const h=Hs(a,["zoom","pitch","distance-from-center"]);if(!h&&!qu(n))return Ws([new Tn("","zoom expressions not supported")]);const m=Qu(a);return m||h?m instanceof Tn?Ws([m]):m instanceof _a&&!Zu(n)?Ws([new Tn("",'"interpolate" expressions cannot be used with this property')]):Km(m?new Lc(u?"camera":"composite",i.value,m.labels,m instanceof _a?m.interpolation:void 0):new of(u?"constant":"source",i.value)):Ws([new Tn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Ju{constructor(n,a){this._parameters=n,this._specification=a,Si(this,Xu(this._parameters,this._specification))}static deserialize(n){return new Ju(n._parameters,n._specification)}static serialize(n){return{_parameters:n._parameters,_specification:n._specification}}}function Qu(i){let n=null;if(i instanceof Um)n=Qu(i.result);else if(i instanceof Qh){for(const a of i.args)if(n=Qu(a),n)break}else(i instanceof Gh||i instanceof _a)&&i.input instanceof Va&&i.input.name==="zoom"&&(n=i);return n instanceof Tn||i.eachChild(a=>{const u=Qu(a);u instanceof Tn?n=u:!n&&u?n=new Tn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&u&&n!==u&&(n=new Tn("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),n}class Kt{constructor(n,a,u,h){this.message=(n?`${n}: `:"")+u,h&&(this.identifier=h),a!=null&&a.__line__&&(this.line=a.__line__)}}function Yo(i){const n=i.key,a=i.value,u=i.valueSpec||{},h=i.objectElementValidators||{},m=i.style,v=i.styleSpec;let x=[];const S=tr(a);if(S!=="object")return[new Kt(n,a,`object expected, ${S} found`)];for(const C in a){const R=C.split(".")[0];let L;h[R]?L=h[R]:u[R]?L=Vi:h["*"]?L=h["*"]:u["*"]&&(L=Vi),L?x=x.concat(L({key:(n&&`${n}.`)+C,value:a[C],valueSpec:u[R]||u["*"],style:m,styleSpec:v,object:a,objectKey:C},a)):x.push(new Kt(n,a[C],`unknown property "${C}"`))}for(const C in u)h[C]||u[C].required&&u[C].default===void 0&&a[C]===void 0&&x.push(new Kt(n,a,`missing required property "${C}"`));return x}function eg(i){const n=i.value,a=i.valueSpec,u=i.style,h=i.styleSpec,m=i.key,v=i.arrayElementValidator||Vi;if(tr(n)!=="array")return[new Kt(m,n,`array expected, ${tr(n)} found`)];if(a.length&&n.length!==a.length)return[new Kt(m,n,`array length ${a.length} expected, length ${n.length} found`)];if(a["min-length"]&&n.length<a["min-length"])return[new Kt(m,n,`array length at least ${a["min-length"]} expected, length ${n.length} found`)];let x={type:a.value,values:a.values,minimum:a.minimum,maximum:a.maximum,function:void 0};h.$version<7&&(x.function=a.function),tr(a.value)==="object"&&(x=a.value);let S=[];for(let C=0;C<n.length;C++)S=S.concat(v({array:n,arrayIndex:C,value:n[C],valueSpec:x,style:u,styleSpec:h,key:`${m}[${C}]`}));return S}function kc(i){const n=i.key,a=i.value,u=i.valueSpec;let h=tr(a);if(h==="number"&&a!=a&&(h="NaN"),h!=="number")return[new Kt(n,a,`number expected, ${h} found`)];if("minimum"in u){let m=u.minimum;if(tr(u.minimum)==="array"&&(m=u.minimum[i.arrayIndex]),a<m)return[new Kt(n,a,`${a} is less than the minimum value ${m}`)]}if("maximum"in u){let m=u.maximum;if(tr(u.maximum)==="array"&&(m=u.maximum[i.arrayIndex]),a>m)return[new Kt(n,a,`${a} is greater than the maximum value ${m}`)]}return[]}function $c(i){const n=i.valueSpec,a=vr(i.value.type);let u,h,m,v={};const x=a!=="categorical"&&i.value.property===void 0,S=!x,C=tr(i.value.stops)==="array"&&tr(i.value.stops[0])==="array"&&tr(i.value.stops[0][0])==="object",R=Yo({key:i.key,value:i.value,valueSpec:i.styleSpec.function,style:i.style,styleSpec:i.styleSpec,objectElementValidators:{stops:function(H){if(a==="identity")return[new Kt(H.key,H.value,'identity function may not have a "stops" property')];let G=[];const Y=H.value;return G=G.concat(eg({key:H.key,value:Y,valueSpec:H.valueSpec,style:H.style,styleSpec:H.styleSpec,arrayElementValidator:L})),tr(Y)==="array"&&Y.length===0&&G.push(new Kt(H.key,Y,"array must have at least one stop")),G},default:function(H){return Vi({key:H.key,value:H.value,valueSpec:n,style:H.style,styleSpec:H.styleSpec})}}});return a==="identity"&&x&&R.push(new Kt(i.key,i.value,'missing required property "property"')),a==="identity"||i.value.stops||R.push(new Kt(i.key,i.value,'missing required property "stops"')),a==="exponential"&&i.valueSpec.expression&&!Zu(i.valueSpec)&&R.push(new Kt(i.key,i.value,"exponential functions not supported")),i.styleSpec.$version>=8&&(S&&!Ol(i.valueSpec)?R.push(new Kt(i.key,i.value,"property functions not supported")):x&&!qu(i.valueSpec)&&R.push(new Kt(i.key,i.value,"zoom functions not supported"))),a!=="categorical"&&!C||i.value.property!==void 0||R.push(new Kt(i.key,i.value,'"property" property is required')),R;function L(H){let G=[];const Y=H.value,ae=H.key;if(tr(Y)!=="array")return[new Kt(ae,Y,`array expected, ${tr(Y)} found`)];if(Y.length!==2)return[new Kt(ae,Y,`array length 2 expected, length ${Y.length} found`)];if(C){if(tr(Y[0])!=="object")return[new Kt(ae,Y,`object expected, ${tr(Y[0])} found`)];if(Y[0].zoom===void 0)return[new Kt(ae,Y,"object stop key must have zoom")];if(Y[0].value===void 0)return[new Kt(ae,Y,"object stop key must have value")];const ve=vr(Y[0].zoom);if(typeof ve!="number")return[new Kt(ae,Y[0].zoom,"stop zoom values must be numbers")];if(m&&m>ve)return[new Kt(ae,Y[0].zoom,"stop zoom values must appear in ascending order")];ve!==m&&(m=ve,h=void 0,v={}),G=G.concat(Yo({key:`${ae}[0]`,value:Y[0],valueSpec:{zoom:{}},style:H.style,styleSpec:H.styleSpec,objectElementValidators:{zoom:kc,value:D}}))}else G=G.concat(D({key:`${ae}[0]`,value:Y[0],valueSpec:{},style:H.style,styleSpec:H.styleSpec},Y));return Ll(mr(Y[1]))?G.concat([new Kt(`${ae}[1]`,Y[1],"expressions are not allowed in function stops.")]):G.concat(Vi({key:`${ae}[1]`,value:Y[1],valueSpec:n,style:H.style,styleSpec:H.styleSpec}))}function D(H,G){const Y=tr(H.value),ae=vr(H.value),ve=H.value!==null?H.value:G;if(u){if(Y!==u)return[new Kt(H.key,ve,`${Y} stop domain type must match previous stop domain type ${u}`)]}else u=Y;if(Y!=="number"&&Y!=="string"&&Y!=="boolean"&&typeof ae!="number"&&typeof ae!="string"&&typeof ae!="boolean")return[new Kt(H.key,ve,"stop domain value must be a number, string, or boolean")];if(Y!=="number"&&a!=="categorical"){let Te=`number expected, ${Y} found`;return Ol(n)&&a===void 0&&(Te+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Kt(H.key,ve,Te)]}return a!=="categorical"||Y!=="number"||typeof ae=="number"&&isFinite(ae)&&Math.floor(ae)===ae?a!=="categorical"&&Y==="number"&&typeof ae=="number"&&typeof h=="number"&&h!==void 0&&ae<h?[new Kt(H.key,ve,"stop domain values must appear in ascending order")]:(h=ae,a==="categorical"&&ae in v?[new Kt(H.key,ve,"stop domain values must be unique")]:(v[ae]=!0,[])):[new Kt(H.key,ve,`integer expected, found ${String(ae)}`)]}}function Ci(i){const n=(i.expressionContext==="property"?Dc:Dl)(mr(i.value),i.valueSpec);if(n.result==="error")return n.value.map(u=>new Kt(`${i.key}${u.key}`,i.value,u.message));const a=n.value.expression||n.value._styleExpression.expression;if(i.expressionContext==="property"&&i.propertyKey==="text-font"&&!a.outputDefined())return[new Kt(i.key,i.value,`Invalid data expression for "${i.propertyKey}". Output values must be contained as literals within the expression.`)];if(i.expressionContext==="property"&&i.propertyType==="layout"&&!Ga(a))return[new Kt(i.key,i.value,'"feature-state" data expressions are not supported with layout properties.')];if(i.expressionContext==="filter")return Fc(a,i);if(i.expressionContext&&i.expressionContext.indexOf("cluster")===0){if(!Hs(a,["zoom","feature-state"]))return[new Kt(i.key,i.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(i.expressionContext==="cluster-initial"&&!Ml(a))return[new Kt(i.key,i.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Fc(i,n){const a=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(n.valueSpec&&n.valueSpec.expression)for(const h of n.valueSpec.expression.parameters)a.delete(h);if(a.size===0)return[];const u=[];return i instanceof Va&&a.has(i.name)?[new Kt(n.key,n.value,`["${i.name}"] expression is not supported in a filter for a ${n.object.type} layer with id: ${n.object.id}`)]:(i.eachChild(h=>{u.push(...Fc(h,n))}),u)}function ed(i){const n=i.key,a=i.value,u=i.valueSpec,h=[];return Array.isArray(u.values)?u.values.indexOf(vr(a))===-1&&h.push(new Kt(n,a,`expected one of [${u.values.join(", ")}], ${JSON.stringify(a)} found`)):Object.keys(u.values).indexOf(vr(a))===-1&&h.push(new Kt(n,a,`expected one of [${Object.keys(u.values).join(", ")}], ${JSON.stringify(a)} found`)),h}function af(i){if(i===!0||i===!1)return!0;if(!Array.isArray(i)||i.length===0)return!1;switch(i[0]){case"has":return i.length>=2&&i[1]!=="$id"&&i[1]!=="$type";case"in":return i.length>=3&&(typeof i[1]!="string"||Array.isArray(i[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return i.length!==3||Array.isArray(i[1])||Array.isArray(i[2]);case"any":case"all":for(const n of i.slice(1))if(!af(n)&&typeof n!="boolean")return!1;return!0;default:return!0}}function td(i,n="fill"){if(i==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};af(i)||(i=$l(i));const a=i;let u=!0;try{u=function(C){if(!kl(C))return C;let R=mr(C);return nd(R),R=tg(R),R}(a)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(a,null,2)}
        `)}const h=nt[`filter_${n}`],m=Dl(u,h);let v=null;if(m.result==="error")throw new Error(m.value.map(C=>`${C.key}: ${C.message}`).join(", "));v=(C,R,L)=>m.value.evaluate(C,R,{},L);let x=null,S=null;if(u!==a){const C=Dl(a,h);if(C.result==="error")throw new Error(C.value.map(R=>`${R.key}: ${R.message}`).join(", "));x=(R,L,D,H,G)=>C.value.evaluate(R,L,{},D,void 0,void 0,H,G),S=!Ml(C.value.expression)}return{filter:v,dynamicFilter:x||void 0,needGeometry:ng(u),needFeature:!!S}}function tg(i){if(!Array.isArray(i))return i;const n=function(a){if(sf.has(a[0])){for(let u=1;u<a.length;u++)if(kl(a[u]))return!0}return a}(i);return n===!0?n:n.map(a=>tg(a))}function nd(i){let n=!1;const a=[];if(i[0]==="case"){for(let u=1;u<i.length-1;u+=2)n=n||kl(i[u]),a.push(i[u+1]);a.push(i[i.length-1])}else if(i[0]==="match"){n=n||kl(i[1]);for(let u=2;u<i.length-1;u+=2)a.push(i[u+1]);a.push(i[i.length-1])}else if(i[0]==="step"){n=n||kl(i[1]);for(let u=1;u<i.length-1;u+=2)a.push(i[u+1])}n&&(i.length=0,i.push("any",...a));for(let u=1;u<i.length;u++)nd(i[u])}function kl(i){if(!Array.isArray(i))return!1;if((n=i[0])==="pitch"||n==="distance-from-center")return!0;var n;for(let a=1;a<i.length;a++)if(kl(i[a]))return!0;return!1}const sf=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function s_(i,n){return i<n?-1:i>n?1:0}function ng(i){if(!Array.isArray(i))return!1;if(i[0]==="within")return!0;for(let n=1;n<i.length;n++)if(ng(i[n]))return!0;return!1}function $l(i){if(!i)return!0;const n=i[0];return i.length<=1?n!=="any":n==="=="?lf(i[1],i[2],"=="):n==="!="?rd(lf(i[1],i[2],"==")):n==="<"||n===">"||n==="<="||n===">="?lf(i[1],i[2],n):n==="any"?(a=i.slice(1),["any"].concat(a.map($l))):n==="all"?["all"].concat(i.slice(1).map($l)):n==="none"?["all"].concat(i.slice(1).map($l).map(rd)):n==="in"?cf(i[1],i.slice(2)):n==="!in"?rd(cf(i[1],i.slice(2))):n==="has"?uf(i[1]):n==="!has"?rd(uf(i[1])):n!=="within"||i;var a}function lf(i,n,a){switch(i){case"$type":return[`filter-type-${a}`,n];case"$id":return[`filter-id-${a}`,n];default:return[`filter-${a}`,i,n]}}function cf(i,n){if(n.length===0)return!1;switch(i){case"$type":return["filter-type-in",["literal",n]];case"$id":return["filter-id-in",["literal",n]];default:return n.length>200&&!n.some(a=>typeof a!=typeof n[0])?["filter-in-large",i,["literal",n.sort(s_)]]:["filter-in-small",i,["literal",n]]}}function uf(i){switch(i){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",i]}}function rd(i){return["!",i]}function Bc(i){return af(mr(i.value))?Ci(Si({},i,{expressionContext:"filter",valueSpec:i.styleSpec[`filter_${i.layerType||"fill"}`]})):Nc(i)}function Nc(i){const n=i.value,a=i.key;if(tr(n)!=="array")return[new Kt(a,n,`array expected, ${tr(n)} found`)];const u=i.styleSpec;let h,m=[];if(n.length<1)return[new Kt(a,n,"filter array must have at least 1 element")];switch(m=m.concat(ed({key:`${a}[0]`,value:n[0],valueSpec:u.filter_operator,style:i.style,styleSpec:i.styleSpec})),vr(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&vr(n[1])==="$type"&&m.push(new Kt(a,n,`"$type" cannot be use with operator "${n[0]}"`));case"==":case"!=":n.length!==3&&m.push(new Kt(a,n,`filter array for operator "${n[0]}" must have 3 elements`));case"in":case"!in":n.length>=2&&(h=tr(n[1]),h!=="string"&&m.push(new Kt(`${a}[1]`,n[1],`string expected, ${h} found`)));for(let v=2;v<n.length;v++)h=tr(n[v]),vr(n[1])==="$type"?m=m.concat(ed({key:`${a}[${v}]`,value:n[v],valueSpec:u.geometry_type,style:i.style,styleSpec:i.styleSpec})):h!=="string"&&h!=="number"&&h!=="boolean"&&m.push(new Kt(`${a}[${v}]`,n[v],`string, number, or boolean expected, ${h} found`));break;case"any":case"all":case"none":for(let v=1;v<n.length;v++)m=m.concat(Nc({key:`${a}[${v}]`,value:n[v],style:i.style,styleSpec:i.styleSpec}));break;case"has":case"!has":h=tr(n[1]),n.length!==2?m.push(new Kt(a,n,`filter array for "${n[0]}" operator must have 2 elements`)):h!=="string"&&m.push(new Kt(`${a}[1]`,n[1],`string expected, ${h} found`));break;case"within":h=tr(n[1]),n.length!==2?m.push(new Kt(a,n,`filter array for "${n[0]}" operator must have 2 elements`)):h!=="object"&&m.push(new Kt(`${a}[1]`,n[1],`object expected, ${h} found`))}return m}function df(i,n){const a=i.key,u=i.style,h=i.styleSpec,m=i.value,v=i.objectKey,x=h[`${n}_${i.layerType}`];if(!x)return[];const S=v.match(/^(.*)-transition$/);if(n==="paint"&&S&&x[S[1]]&&x[S[1]].transition)return Vi({key:a,value:m,valueSpec:h.transition,style:u,styleSpec:h});const C=i.valueSpec||x[v];if(!C)return[new Kt(a,m,`unknown property "${v}"`)];let R;if(tr(m)==="string"&&Ol(C)&&!C.tokens&&(R=/^{([^}]+)}$/.exec(m))){const D=`\`{ "type": "identity", "property": ${R?JSON.stringify(R[1]):'"_"'} }\``;return[new Kt(a,m,`"${v}" does not support interpolation syntax
Use an identity property function instead: ${D}.`)]}const L=[];return i.layerType==="symbol"&&(v==="text-field"&&u&&!u.glyphs&&L.push(new Kt(a,m,'use of "text-field" requires a style "glyphs" property')),v==="text-font"&&zc(mr(m))&&vr(m.type)==="identity"&&L.push(new Kt(a,m,'"text-font" does not support identity functions'))),L.concat(Vi({key:i.key,value:m,valueSpec:C,style:u,styleSpec:h,expressionContext:"property",propertyType:n,propertyKey:v}))}function rg(i){return df(i,"paint")}function hf(i){return df(i,"layout")}function ig(i){let n=[];const a=i.value,u=i.key,h=i.style,m=i.styleSpec;a.type||a.ref||n.push(new Kt(u,a,'either "type" or "ref" is required'));let v=vr(a.type);const x=vr(a.ref);if(a.id){const S=vr(a.id);for(let C=0;C<i.arrayIndex;C++){const R=h.layers[C];vr(R.id)===S&&n.push(new Kt(u,a.id,`duplicate layer id "${a.id}", previously used at line ${R.id.__line__}`))}}if("ref"in a){let S;["type","source","source-layer","filter","layout"].forEach(C=>{C in a&&n.push(new Kt(u,a[C],`"${C}" is prohibited for ref layers`))}),h.layers.forEach(C=>{vr(C.id)===x&&(S=C)}),S?S.ref?n.push(new Kt(u,a.ref,"ref cannot reference another ref layer")):v=vr(S.type):typeof x=="string"&&n.push(new Kt(u,a.ref,`ref layer "${x}" not found`))}else if(v!=="background"&&v!=="sky")if(a.source){const S=h.sources&&h.sources[a.source],C=S&&vr(S.type);S?C==="vector"&&v==="raster"?n.push(new Kt(u,a.source,`layer "${a.id}" requires a raster source`)):C==="raster"&&v!=="raster"?n.push(new Kt(u,a.source,`layer "${a.id}" requires a vector source`)):C!=="vector"||a["source-layer"]?C==="raster-dem"&&v!=="hillshade"?n.push(new Kt(u,a.source,"raster-dem source can only be used with layer type 'hillshade'.")):v!=="line"||!a.paint||!a.paint["line-gradient"]&&!a.paint["line-trim-offset"]||C==="geojson"&&S.lineMetrics||n.push(new Kt(u,a,`layer "${a.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):n.push(new Kt(u,a,`layer "${a.id}" must specify a "source-layer"`)):n.push(new Kt(u,a.source,`source "${a.source}" not found`))}else n.push(new Kt(u,a,'missing required property "source"'));return n=n.concat(Yo({key:u,value:a,valueSpec:m.layer,style:i.style,styleSpec:i.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Vi({key:`${u}.type`,value:a.type,valueSpec:m.layer.type,style:i.style,styleSpec:i.styleSpec,object:a,objectKey:"type"}),filter:S=>Bc(Si({layerType:v},S)),layout:S=>Yo({layer:a,key:S.key,value:S.value,valueSpec:{},style:S.style,styleSpec:S.styleSpec,objectElementValidators:{"*":C=>hf(Si({layerType:v},C))}}),paint:S=>Yo({layer:a,key:S.key,value:S.value,valueSpec:{},style:S.style,styleSpec:S.styleSpec,objectElementValidators:{"*":C=>rg(Si({layerType:v},C))}})}})),n}function Ss(i){const n=i.value,a=i.key,u=tr(n);return u!=="string"?[new Kt(a,n,`string expected, ${u} found`)]:[]}const og={promoteId:function({key:i,value:n}){if(tr(n)==="string")return Ss({key:i,value:n});{const a=[];for(const u in n)a.push(...Ss({key:`${i}.${u}`,value:n[u]}));return a}}};function ag(i){const n=i.value,a=i.key,u=i.styleSpec,h=i.style;if(!n.type)return[new Kt(a,n,'"type" is required')];const m=vr(n.type);let v;switch(m){case"vector":case"raster":case"raster-dem":return v=Yo({key:a,value:n,valueSpec:u[`source_${m.replace("-","_")}`],style:i.style,styleSpec:u,objectElementValidators:og}),v;case"geojson":if(v=Yo({key:a,value:n,valueSpec:u.source_geojson,style:h,styleSpec:u,objectElementValidators:og}),n.cluster)for(const x in n.clusterProperties){const[S,C]=n.clusterProperties[x],R=typeof S=="string"?[S,["accumulated"],["get",x]]:S;v.push(...Ci({key:`${a}.${x}.map`,value:C,expressionContext:"cluster-map"})),v.push(...Ci({key:`${a}.${x}.reduce`,value:R,expressionContext:"cluster-reduce"}))}return v;case"video":return Yo({key:a,value:n,valueSpec:u.source_video,style:h,styleSpec:u});case"image":return Yo({key:a,value:n,valueSpec:u.source_image,style:h,styleSpec:u});case"canvas":return[new Kt(a,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ed({key:`${a}.type`,value:n.type,valueSpec:{values:l_(u)},style:h,styleSpec:u})}}function l_(i){return i.source.reduce((n,a)=>{const u=i[a];return u.type.type==="enum"&&(n=n.concat(Object.keys(u.type.values))),n},[])}function sg(i){const n=i.value,a=i.styleSpec,u=a.light,h=i.style;let m=[];const v=tr(n);if(n===void 0)return m;if(v!=="object")return m=m.concat([new Kt("light",n,`object expected, ${v} found`)]),m;for(const x in n){const S=x.match(/^(.*)-transition$/);m=m.concat(S&&u[S[1]]&&u[S[1]].transition?Vi({key:x,value:n[x],valueSpec:a.transition,style:h,styleSpec:a}):u[x]?Vi({key:x,value:n[x],valueSpec:u[x],style:h,styleSpec:a}):[new Kt(x,n[x],`unknown property "${x}"`)])}return m}function ff(i){const n=i.value,a=i.key,u=i.style,h=i.styleSpec,m=h.terrain;let v=[];const x=tr(n);if(n===void 0)return v;if(x!=="object")return v=v.concat([new Kt("terrain",n,`object expected, ${x} found`)]),v;for(const S in n){const C=S.match(/^(.*)-transition$/);v=v.concat(C&&m[C[1]]&&m[C[1]].transition?Vi({key:S,value:n[S],valueSpec:h.transition,style:u,styleSpec:h}):m[S]?Vi({key:S,value:n[S],valueSpec:m[S],style:u,styleSpec:h}):[new Kt(S,n[S],`unknown property "${S}"`)])}if(n.source){const S=u.sources&&u.sources[n.source],C=S&&vr(S.type);S?C!=="raster-dem"&&v.push(new Kt(a,n.source,`terrain cannot be used with a source of type ${String(C)}, it only be used with a "raster-dem" source type`)):v.push(new Kt(a,n.source,`source "${n.source}" not found`))}else v.push(new Kt(a,n,'terrain is missing required property "source"'));return v}function lg(i){const n=i.value,a=i.style,u=i.styleSpec,h=u.fog;let m=[];const v=tr(n);if(n===void 0)return m;if(v!=="object")return m=m.concat([new Kt("fog",n,`object expected, ${v} found`)]),m;for(const x in n){const S=x.match(/^(.*)-transition$/);m=m.concat(S&&h[S[1]]&&h[S[1]].transition?Vi({key:x,value:n[x],valueSpec:u.transition,style:a,styleSpec:u}):h[x]?Vi({key:x,value:n[x],valueSpec:h[x],style:a,styleSpec:u}):[new Kt(x,n[x],`unknown property "${x}"`)])}return m}const cg={"*":()=>[],array:eg,boolean:function(i){const n=i.value,a=i.key,u=tr(n);return u!=="boolean"?[new Kt(a,n,`boolean expected, ${u} found`)]:[]},number:kc,color:function(i){const n=i.key,a=i.value,u=tr(a);return u!=="string"?[new Kt(n,a,`color expected, ${u} found`)]:pa(a)===null?[new Kt(n,a,`color expected, "${a}" found`)]:[]},enum:ed,filter:Bc,function:$c,layer:ig,object:Yo,source:ag,light:sg,terrain:ff,fog:lg,string:Ss,formatted:function(i){return Ss(i).length===0?[]:Ci(i)},resolvedImage:function(i){return Ss(i).length===0?[]:Ci(i)},projection:function(i){const n=i.value,a=i.styleSpec,u=a.projection,h=i.style;let m=[];const v=tr(n);if(v==="object")for(const x in n)m=m.concat(Vi({key:x,value:n[x],valueSpec:u[x],style:h,styleSpec:a}));else v!=="string"&&(m=m.concat([new Kt("projection",n,`object or string expected, ${v} found`)]));return m}};function Vi(i){const n=i.value,a=i.valueSpec,u=i.styleSpec;return a.expression&&zc(vr(n))?$c(i):a.expression&&Ll(mr(n))?Ci(i):a.type&&cg[a.type]?cg[a.type](i):Yo(Si({},i,{valueSpec:a.type?u[a.type]:a}))}function c_(i){const n=i.value,a=i.key,u=Ss(i);return u.length||(n.indexOf("{fontstack}")===-1&&u.push(new Kt(a,n,'"glyphs" url must include a "{fontstack}" token')),n.indexOf("{range}")===-1&&u.push(new Kt(a,n,'"glyphs" url must include a "{range}" token'))),u}function ug(i,n=nt){return Lo(Vi({key:"",value:i,valueSpec:n.$root,styleSpec:n,style:i,objectElementValidators:{glyphs:c_,"*":()=>[]}}))}const u_=i=>Lo(rg(i)),d_=i=>Lo(hf(i));function Lo(i){return i.slice().sort((n,a)=>n.line&&a.line?n.line-a.line:0)}function dg(i,n){let a=!1;if(n&&n.length)for(const u of n)i.fire(new _i(new Error(u.message))),a=!0;return a}var h_=xa,Jo=3;function xa(i,n,a){var u=this.cells=[];if(i instanceof ArrayBuffer){this.arrayBuffer=i;var h=new Int32Array(this.arrayBuffer);i=h[0],this.d=(n=h[1])+2*(a=h[2]);for(var m=0;m<this.d*this.d;m++){var v=h[Jo+m],x=h[Jo+m+1];u.push(v===x?null:h.subarray(v,x))}var S=h[Jo+u.length+1];this.keys=h.subarray(h[Jo+u.length],S),this.bboxes=h.subarray(S),this.insert=this._insertReadonly}else{this.d=n+2*a;for(var C=0;C<this.d*this.d;C++)u.push([]);this.keys=[],this.bboxes=[]}this.n=n,this.extent=i,this.padding=a,this.scale=n/i,this.uid=0;var R=a/n*i;this.min=-R,this.max=i+R}xa.prototype.insert=function(i,n,a,u,h){this._forEachCell(n,a,u,h,this._insertCell,this.uid++),this.keys.push(i),this.bboxes.push(n),this.bboxes.push(a),this.bboxes.push(u),this.bboxes.push(h)},xa.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},xa.prototype._insertCell=function(i,n,a,u,h,m){this.cells[h].push(m)},xa.prototype.query=function(i,n,a,u,h){var m=this.min,v=this.max;if(i<=m&&n<=m&&v<=a&&v<=u&&!h)return Array.prototype.slice.call(this.keys);var x=[];return this._forEachCell(i,n,a,u,this._queryCell,x,{},h),x},xa.prototype._queryCell=function(i,n,a,u,h,m,v,x){var S=this.cells[h];if(S!==null)for(var C=this.keys,R=this.bboxes,L=0;L<S.length;L++){var D=S[L];if(v[D]===void 0){var H=4*D;(x?x(R[H+0],R[H+1],R[H+2],R[H+3]):i<=R[H+2]&&n<=R[H+3]&&a>=R[H+0]&&u>=R[H+1])?(v[D]=!0,m.push(C[D])):v[D]=!1}}},xa.prototype._forEachCell=function(i,n,a,u,h,m,v,x){for(var S=this._convertToCellCoord(i),C=this._convertToCellCoord(n),R=this._convertToCellCoord(a),L=this._convertToCellCoord(u),D=S;D<=R;D++)for(var H=C;H<=L;H++){var G=this.d*H+D;if((!x||x(this._convertFromCellCoord(D),this._convertFromCellCoord(H),this._convertFromCellCoord(D+1),this._convertFromCellCoord(H+1)))&&h.call(this,i,n,a,u,G,m,v,x))return}},xa.prototype._convertFromCellCoord=function(i){return(i-this.padding)/this.scale},xa.prototype._convertToCellCoord=function(i){return Math.max(0,Math.min(this.d-1,Math.floor(i*this.scale)+this.padding))},xa.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var i=this.cells,n=Jo+this.cells.length+1+1,a=0,u=0;u<this.cells.length;u++)a+=this.cells[u].length;var h=new Int32Array(n+a+this.keys.length+this.bboxes.length);h[0]=this.extent,h[1]=this.n,h[2]=this.padding;for(var m=n,v=0;v<i.length;v++){var x=i[v];h[Jo+v]=m,h.set(x,m),m+=x.length}return h[Jo+i.length]=m,h.set(this.keys,m),h[Jo+i.length+1]=m+=this.keys.length,h.set(this.bboxes,m),m+=this.bboxes.length,h.buffer};var qs=V(h_);const id={};function Jt(i,n,a={}){Object.defineProperty(i,"_classRegistryKey",{value:n,writeable:!1}),id[n]={klass:i,omit:a.omit||[]}}Jt(Object,"Object"),qs.serialize=function(i,n){const a=i.toArrayBuffer();return n&&n.push(a),{buffer:a}},qs.deserialize=function(i){return new qs(i.buffer)},Object.defineProperty(qs,"name",{value:"Grid"}),Jt(qs,"Grid"),Jt(Nr,"Color"),Jt(Error,"Error"),Jt(pr,"AJAXError"),Jt(hr,"ResolvedImage"),Jt(Ju,"StylePropertyFunction"),Jt(Yu,"StyleExpression",{omit:["_evaluator"]}),Jt(Lc,"ZoomDependentExpression"),Jt(of,"ZoomConstantExpression"),Jt(Va,"CompoundExpression",{omit:["_evaluate"]});for(const i in Oc)id[Oc[i]._classRegistryKey]||Jt(Oc[i],`Expression${i}`);function pf(i){return i&&typeof ArrayBuffer<"u"&&(i instanceof ArrayBuffer||i.constructor&&i.constructor.name==="ArrayBuffer")}function mf(i){return w.ImageBitmap&&i instanceof w.ImageBitmap}function Fl(i,n){if(i==null||typeof i=="boolean"||typeof i=="number"||typeof i=="string"||i instanceof Boolean||i instanceof Number||i instanceof String||i instanceof Date||i instanceof RegExp)return i;if(pf(i)||mf(i))return n&&n.push(i),i;if(ArrayBuffer.isView(i)){const a=i;return n&&n.push(a.buffer),a}if(i instanceof w.ImageData)return n&&n.push(i.data.buffer),i;if(Array.isArray(i)){const a=[];for(const u of i)a.push(Fl(u,n));return a}if(typeof i=="object"){const a=i.constructor,u=a._classRegistryKey;if(!u)throw new Error(`can't serialize object of unregistered class ${u}`);const h=a.serialize?a.serialize(i,n):{};if(!a.serialize){for(const m in i)i.hasOwnProperty(m)&&(id[u].omit.indexOf(m)>=0||(h[m]=Fl(i[m],n)));i instanceof Error&&(h.message=i.message)}if(h.$name)throw new Error("$name property is reserved for worker serialization logic.");return u!=="Object"&&(h.$name=u),h}throw new Error("can't serialize object of type "+typeof i)}function Zs(i){if(i==null||typeof i=="boolean"||typeof i=="number"||typeof i=="string"||i instanceof Boolean||i instanceof Number||i instanceof String||i instanceof Date||i instanceof RegExp||pf(i)||mf(i)||ArrayBuffer.isView(i)||i instanceof w.ImageData)return i;if(Array.isArray(i))return i.map(Zs);if(typeof i=="object"){const n=i.$name||"Object",{klass:a}=id[n];if(!a)throw new Error(`can't deserialize unregistered class ${n}`);if(a.deserialize)return a.deserialize(i);const u=Object.create(a.prototype);for(const h of Object.keys(i))h!=="$name"&&(u[h]=Zs(i[h]));return u}throw new Error("can't deserialize object of type "+typeof i)}const Zt={"Latin-1 Supplement":i=>i>=128&&i<=255,Arabic:i=>i>=1536&&i<=1791,"Arabic Supplement":i=>i>=1872&&i<=1919,"Arabic Extended-A":i=>i>=2208&&i<=2303,"Hangul Jamo":i=>i>=4352&&i<=4607,"Unified Canadian Aboriginal Syllabics":i=>i>=5120&&i<=5759,Khmer:i=>i>=6016&&i<=6143,"Unified Canadian Aboriginal Syllabics Extended":i=>i>=6320&&i<=6399,"General Punctuation":i=>i>=8192&&i<=8303,"Letterlike Symbols":i=>i>=8448&&i<=8527,"Number Forms":i=>i>=8528&&i<=8591,"Miscellaneous Technical":i=>i>=8960&&i<=9215,"Control Pictures":i=>i>=9216&&i<=9279,"Optical Character Recognition":i=>i>=9280&&i<=9311,"Enclosed Alphanumerics":i=>i>=9312&&i<=9471,"Geometric Shapes":i=>i>=9632&&i<=9727,"Miscellaneous Symbols":i=>i>=9728&&i<=9983,"Miscellaneous Symbols and Arrows":i=>i>=11008&&i<=11263,"CJK Radicals Supplement":i=>i>=11904&&i<=12031,"Kangxi Radicals":i=>i>=12032&&i<=12255,"Ideographic Description Characters":i=>i>=12272&&i<=12287,"CJK Symbols and Punctuation":i=>i>=12288&&i<=12351,Hiragana:i=>i>=12352&&i<=12447,Katakana:i=>i>=12448&&i<=12543,Bopomofo:i=>i>=12544&&i<=12591,"Hangul Compatibility Jamo":i=>i>=12592&&i<=12687,Kanbun:i=>i>=12688&&i<=12703,"Bopomofo Extended":i=>i>=12704&&i<=12735,"CJK Strokes":i=>i>=12736&&i<=12783,"Katakana Phonetic Extensions":i=>i>=12784&&i<=12799,"Enclosed CJK Letters and Months":i=>i>=12800&&i<=13055,"CJK Compatibility":i=>i>=13056&&i<=13311,"CJK Unified Ideographs Extension A":i=>i>=13312&&i<=19903,"Yijing Hexagram Symbols":i=>i>=19904&&i<=19967,"CJK Unified Ideographs":i=>i>=19968&&i<=40959,"Yi Syllables":i=>i>=40960&&i<=42127,"Yi Radicals":i=>i>=42128&&i<=42191,"Hangul Jamo Extended-A":i=>i>=43360&&i<=43391,"Hangul Syllables":i=>i>=44032&&i<=55215,"Hangul Jamo Extended-B":i=>i>=55216&&i<=55295,"Private Use Area":i=>i>=57344&&i<=63743,"CJK Compatibility Ideographs":i=>i>=63744&&i<=64255,"Arabic Presentation Forms-A":i=>i>=64336&&i<=65023,"Vertical Forms":i=>i>=65040&&i<=65055,"CJK Compatibility Forms":i=>i>=65072&&i<=65103,"Small Form Variants":i=>i>=65104&&i<=65135,"Arabic Presentation Forms-B":i=>i>=65136&&i<=65279,"Halfwidth and Fullwidth Forms":i=>i>=65280&&i<=65519};function gf(i){for(const n of i)if(vf(n.charCodeAt(0)))return!0;return!1}function f_(i){for(const n of i)if(!hg(n.charCodeAt(0)))return!1;return!0}function hg(i){return!(Zt.Arabic(i)||Zt["Arabic Supplement"](i)||Zt["Arabic Extended-A"](i)||Zt["Arabic Presentation Forms-A"](i)||Zt["Arabic Presentation Forms-B"](i))}function vf(i){return!(i!==746&&i!==747&&(i<4352||!(Zt["Bopomofo Extended"](i)||Zt.Bopomofo(i)||Zt["CJK Compatibility Forms"](i)&&!(i>=65097&&i<=65103)||Zt["CJK Compatibility Ideographs"](i)||Zt["CJK Compatibility"](i)||Zt["CJK Radicals Supplement"](i)||Zt["CJK Strokes"](i)||!(!Zt["CJK Symbols and Punctuation"](i)||i>=12296&&i<=12305||i>=12308&&i<=12319||i===12336)||Zt["CJK Unified Ideographs Extension A"](i)||Zt["CJK Unified Ideographs"](i)||Zt["Enclosed CJK Letters and Months"](i)||Zt["Hangul Compatibility Jamo"](i)||Zt["Hangul Jamo Extended-A"](i)||Zt["Hangul Jamo Extended-B"](i)||Zt["Hangul Jamo"](i)||Zt["Hangul Syllables"](i)||Zt.Hiragana(i)||Zt["Ideographic Description Characters"](i)||Zt.Kanbun(i)||Zt["Kangxi Radicals"](i)||Zt["Katakana Phonetic Extensions"](i)||Zt.Katakana(i)&&i!==12540||!(!Zt["Halfwidth and Fullwidth Forms"](i)||i===65288||i===65289||i===65293||i>=65306&&i<=65310||i===65339||i===65341||i===65343||i>=65371&&i<=65503||i===65507||i>=65512&&i<=65519)||!(!Zt["Small Form Variants"](i)||i>=65112&&i<=65118||i>=65123&&i<=65126)||Zt["Unified Canadian Aboriginal Syllabics"](i)||Zt["Unified Canadian Aboriginal Syllabics Extended"](i)||Zt["Vertical Forms"](i)||Zt["Yijing Hexagram Symbols"](i)||Zt["Yi Syllables"](i)||Zt["Yi Radicals"](i))))}function fg(i){return!(vf(i)||function(n){return!!(Zt["Latin-1 Supplement"](n)&&(n===167||n===169||n===174||n===177||n===188||n===189||n===190||n===215||n===247)||Zt["General Punctuation"](n)&&(n===8214||n===8224||n===8225||n===8240||n===8241||n===8251||n===8252||n===8258||n===8263||n===8264||n===8265||n===8273)||Zt["Letterlike Symbols"](n)||Zt["Number Forms"](n)||Zt["Miscellaneous Technical"](n)&&(n>=8960&&n<=8967||n>=8972&&n<=8991||n>=8996&&n<=9e3||n===9003||n>=9085&&n<=9114||n>=9150&&n<=9165||n===9167||n>=9169&&n<=9179||n>=9186&&n<=9215)||Zt["Control Pictures"](n)&&n!==9251||Zt["Optical Character Recognition"](n)||Zt["Enclosed Alphanumerics"](n)||Zt["Geometric Shapes"](n)||Zt["Miscellaneous Symbols"](n)&&!(n>=9754&&n<=9759)||Zt["Miscellaneous Symbols and Arrows"](n)&&(n>=11026&&n<=11055||n>=11088&&n<=11097||n>=11192&&n<=11243)||Zt["CJK Symbols and Punctuation"](n)||Zt.Katakana(n)||Zt["Private Use Area"](n)||Zt["CJK Compatibility Forms"](n)||Zt["Small Form Variants"](n)||Zt["Halfwidth and Fullwidth Forms"](n)||n===8734||n===8756||n===8757||n>=9984&&n<=10087||n>=10102&&n<=10131||n===65532||n===65533)}(i))}function pg(i){return i>=1424&&i<=2303||Zt["Arabic Presentation Forms-A"](i)||Zt["Arabic Presentation Forms-B"](i)}function p_(i,n){return!(!n&&pg(i)||i>=2304&&i<=3583||i>=3840&&i<=4255||Zt.Khmer(i))}function m_(i){for(const n of i)if(pg(n.charCodeAt(0)))return!0;return!1}const yf="deferred",_f="loading",xf="loaded";let Bl=null,p="unavailable",s=null;const d=function(i){i&&typeof i=="string"&&i.indexOf("NetworkError")>-1&&(p="error"),Bl&&Bl(i)};function g(){_.fire(new ao("pluginStateChange",{pluginStatus:p,pluginURL:s}))}const _=new Oi,b=function(){return p},I=function(){if(p!==yf||!s)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");p=_f,g(),s&&Qn({url:s},i=>{i?d(i):(p=xf,g())})},A={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>p===xf||A.applyArabicShaping!=null,isLoading:()=>p===_f,setState(i){p=i.pluginStatus,s=i.pluginURL},isParsed:()=>A.applyArabicShaping!=null&&A.processBidirectionalText!=null&&A.processStyledBidirectionalText!=null,getPluginURL:()=>s};class O{constructor(n,a){this.zoom=n,a?(this.now=a.now,this.fadeDuration=a.fadeDuration,this.transition=a.transition,this.pitch=a.pitch):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0)}isSupportedScript(n){return function(a,u){for(const h of a)if(!p_(h.charCodeAt(0),u))return!1;return!0}(n,A.isLoaded())}}class N{constructor(n,a){this.property=n,this.value=a,this.expression=function(u,h){if(zc(u))return new Ju(u,h);if(Ll(u)){const m=Dc(u,h);if(m.result==="error")throw new Error(m.value.map(v=>`${v.key}: ${v.message}`).join(", "));return m.value}{let m=u;return typeof u=="string"&&h.type==="color"&&(m=Nr.parse(u)),{kind:"constant",evaluate:()=>m}}}(a===void 0?n.specification.default:a,n.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(n,a,u){return this.property.possiblyEvaluate(this,n,a,u)}}class B{constructor(n){this.property=n,this.value=new N(n,void 0)}transitioned(n,a){return new re(this.property,this.value,a,gt({},n.transition,this.transition),n.now)}untransitioned(){return new re(this.property,this.value,null,{},0)}}class q{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitionablePropertyValues)}getValue(n){return ct(this._values[n].value.value)}setValue(n,a){this._values.hasOwnProperty(n)||(this._values[n]=new B(this._values[n].property)),this._values[n].value=new N(this._values[n].property,a===null?void 0:ct(a))}getTransition(n){return ct(this._values[n].transition)}setTransition(n,a){this._values.hasOwnProperty(n)||(this._values[n]=new B(this._values[n].property)),this._values[n].transition=ct(a)||void 0}serialize(){const n={};for(const a of Object.keys(this._values)){const u=this.getValue(a);u!==void 0&&(n[a]=u);const h=this.getTransition(a);h!==void 0&&(n[`${a}-transition`]=h)}return n}transitioned(n,a){const u=new le(this._properties);for(const h of Object.keys(this._values))u._values[h]=this._values[h].transitioned(n,a._values[h]);return u}untransitioned(){const n=new le(this._properties);for(const a of Object.keys(this._values))n._values[a]=this._values[a].untransitioned();return n}}class re{constructor(n,a,u,h,m){const v=h.delay||0,x=h.duration||0;m=m||0,this.property=n,this.value=a,this.begin=m+v,this.end=this.begin+x,n.specification.transition&&(h.delay||h.duration)&&(this.prior=u)}possiblyEvaluate(n,a,u){const h=n.now||0,m=this.value.possiblyEvaluate(n,a,u),v=this.prior;if(v){if(h>this.end)return this.prior=null,m;if(this.value.isDataDriven())return this.prior=null,m;if(h<this.begin)return v.possiblyEvaluate(n,a,u);{const x=(h-this.begin)/(this.end-this.begin);return this.property.interpolate(v.possiblyEvaluate(n,a,u),m,ke(x))}}return m}}class le{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitioningPropertyValues)}possiblyEvaluate(n,a,u){const h=new me(this._properties);for(const m of Object.keys(this._values))h._values[m]=this._values[m].possiblyEvaluate(n,a,u);return h}hasTransition(){for(const n of Object.keys(this._values))if(this._values[n].prior)return!0;return!1}}class he{constructor(n){this._properties=n,this._values=Object.create(n.defaultPropertyValues)}getValue(n){return ct(this._values[n].value)}setValue(n,a){this._values[n]=new N(this._values[n].property,a===null?void 0:ct(a))}serialize(){const n={};for(const a of Object.keys(this._values)){const u=this.getValue(a);u!==void 0&&(n[a]=u)}return n}possiblyEvaluate(n,a,u){const h=new me(this._properties);for(const m of Object.keys(this._values))h._values[m]=this._values[m].possiblyEvaluate(n,a,u);return h}}class ce{constructor(n,a,u){this.property=n,this.value=a,this.parameters=u}isConstant(){return this.value.kind==="constant"}constantOr(n){return this.value.kind==="constant"?this.value.value:n}evaluate(n,a,u,h){return this.property.evaluate(this.value,this.parameters,n,a,u,h)}}class me{constructor(n){this._properties=n,this._values=Object.create(n.defaultPossiblyEvaluatedValues)}get(n){return this._values[n]}}class K{constructor(n){this.specification=n}possiblyEvaluate(n,a){return n.expression.evaluate(a)}interpolate(n,a,u){const h=Ic[this.specification.type];return h?h(n,a,u):n}}class se{constructor(n,a){this.specification=n,this.overrides=a}possiblyEvaluate(n,a,u,h){return new ce(this,n.expression.kind==="constant"||n.expression.kind==="camera"?{kind:"constant",value:n.expression.evaluate(a,null,{},u,h)}:n.expression,a)}interpolate(n,a,u){if(n.value.kind!=="constant"||a.value.kind!=="constant")return n;if(n.value.value===void 0||a.value.value===void 0)return new ce(this,{kind:"constant",value:void 0},n.parameters);const h=Ic[this.specification.type];return h?new ce(this,{kind:"constant",value:h(n.value.value,a.value.value,u)},n.parameters):n}evaluate(n,a,u,h,m,v){return n.kind==="constant"?n.value:n.evaluate(a,u,h,m,v)}}class xe{constructor(n){this.specification=n}possiblyEvaluate(n,a,u,h){return!!n.expression.evaluate(a,null,{},u,h)}interpolate(){return!1}}class be{constructor(n){this.properties=n,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const a=new O(0,{});for(const u in n){const h=n[u];h.specification.overridable&&this.overridableProperties.push(u);const m=this.defaultPropertyValues[u]=new N(h,void 0),v=this.defaultTransitionablePropertyValues[u]=new B(h);this.defaultTransitioningPropertyValues[u]=v.untransitioned(),this.defaultPossiblyEvaluatedValues[u]=m.possiblyEvaluate(a)}}}function Re(i,n){return 256*(i=pe(Math.floor(i),0,255))+pe(Math.floor(n),0,255)}Jt(se,"DataDrivenProperty"),Jt(K,"DataConstantProperty"),Jt(xe,"ColorRampProperty");const ze={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Oe{constructor(n,a){this._structArray=n,this._pos1=a*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Ve{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(n,a){return n._trim(),a&&(n.isTransferred=!0,a.push(n.arrayBuffer)),{length:n.length,arrayBuffer:n.arrayBuffer}}static deserialize(n){const a=Object.create(this.prototype);return a.arrayBuffer=n.arrayBuffer,a.length=n.length,a.capacity=n.arrayBuffer.byteLength/a.bytesPerElement,a._refreshViews(),a}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(n){this.reserve(n),this.length=n}reserve(n){if(n>this.capacity){this.capacity=Math.max(n,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const a=this.uint8;this._refreshViews(),a&&this.uint8.set(a)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function Ue(i,n=1){let a=0,u=0;return{members:i.map(h=>{const m=ze[h.type].BYTES_PER_ELEMENT,v=a=Ke(a,Math.max(n,m)),x=h.components||1;return u=Math.max(u,m),a+=m*x,{name:h.name,type:h.type,components:x,offset:v}}),size:Ke(a,Math.max(u,n)),alignment:n}}function Ke(i,n){return Math.ceil(i/n)*n}class At extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a){const u=this.length;return this.resize(u+1),this.emplace(u,n,a)}emplace(n,a,u){const h=2*n;return this.int16[h+0]=a,this.int16[h+1]=u,n}}At.prototype.bytesPerElement=4,Jt(At,"StructArrayLayout2i4");class qe extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a,u){const h=this.length;return this.resize(h+1),this.emplace(h,n,a,u)}emplace(n,a,u,h){const m=3*n;return this.int16[m+0]=a,this.int16[m+1]=u,this.int16[m+2]=h,n}}qe.prototype.bytesPerElement=6,Jt(qe,"StructArrayLayout3i6");class ht extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a,u,h){const m=this.length;return this.resize(m+1),this.emplace(m,n,a,u,h)}emplace(n,a,u,h,m){const v=4*n;return this.int16[v+0]=a,this.int16[v+1]=u,this.int16[v+2]=h,this.int16[v+3]=m,n}}ht.prototype.bytesPerElement=8,Jt(ht,"StructArrayLayout4i8");class et extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a,u,h,m,v,x){const S=this.length;return this.resize(S+1),this.emplace(S,n,a,u,h,m,v,x)}emplace(n,a,u,h,m,v,x,S){const C=6*n,R=12*n,L=3*n;return this.int16[C+0]=a,this.int16[C+1]=u,this.uint8[R+4]=h,this.uint8[R+5]=m,this.uint8[R+6]=v,this.uint8[R+7]=x,this.float32[L+2]=S,n}}et.prototype.bytesPerElement=12,Jt(et,"StructArrayLayout2i4ub1f12");class Et extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a,u,h){const m=this.length;return this.resize(m+1),this.emplace(m,n,a,u,h)}emplace(n,a,u,h,m){const v=4*n;return this.float32[v+0]=a,this.float32[v+1]=u,this.float32[v+2]=h,this.float32[v+3]=m,n}}Et.prototype.bytesPerElement=16,Jt(Et,"StructArrayLayout4f16");class Xe extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a,u,h,m){const v=this.length;return this.resize(v+1),this.emplace(v,n,a,u,h,m)}emplace(n,a,u,h,m,v){const x=6*n,S=3*n;return this.uint16[x+0]=a,this.uint16[x+1]=u,this.uint16[x+2]=h,this.uint16[x+3]=m,this.float32[S+2]=v,n}}Xe.prototype.bytesPerElement=12,Jt(Xe,"StructArrayLayout4ui1f12");class dt extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,a,u,h){const m=this.length;return this.resize(m+1),this.emplace(m,n,a,u,h)}emplace(n,a,u,h,m){const v=4*n;return this.uint16[v+0]=a,this.uint16[v+1]=u,this.uint16[v+2]=h,this.uint16[v+3]=m,n}}dt.prototype.bytesPerElement=8,Jt(dt,"StructArrayLayout4ui8");class Lt extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a,u,h,m,v){const x=this.length;return this.resize(x+1),this.emplace(x,n,a,u,h,m,v)}emplace(n,a,u,h,m,v,x){const S=6*n;return this.int16[S+0]=a,this.int16[S+1]=u,this.int16[S+2]=h,this.int16[S+3]=m,this.int16[S+4]=v,this.int16[S+5]=x,n}}Lt.prototype.bytesPerElement=12,Jt(Lt,"StructArrayLayout6i12");class vt extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,a,u,h,m,v,x,S,C,R,L,D){const H=this.length;return this.resize(H+1),this.emplace(H,n,a,u,h,m,v,x,S,C,R,L,D)}emplace(n,a,u,h,m,v,x,S,C,R,L,D,H){const G=12*n;return this.int16[G+0]=a,this.int16[G+1]=u,this.int16[G+2]=h,this.int16[G+3]=m,this.uint16[G+4]=v,this.uint16[G+5]=x,this.uint16[G+6]=S,this.uint16[G+7]=C,this.int16[G+8]=R,this.int16[G+9]=L,this.int16[G+10]=D,this.int16[G+11]=H,n}}vt.prototype.bytesPerElement=24,Jt(vt,"StructArrayLayout4i4ui4i24");class Dt extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a,u,h,m,v){const x=this.length;return this.resize(x+1),this.emplace(x,n,a,u,h,m,v)}emplace(n,a,u,h,m,v,x){const S=10*n,C=5*n;return this.int16[S+0]=a,this.int16[S+1]=u,this.int16[S+2]=h,this.float32[C+2]=m,this.float32[C+3]=v,this.float32[C+4]=x,n}}Dt.prototype.bytesPerElement=20,Jt(Dt,"StructArrayLayout3i3f20");class dn extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n){const a=this.length;return this.resize(a+1),this.emplace(a,n)}emplace(n,a){return this.uint32[1*n+0]=a,n}}dn.prototype.bytesPerElement=4,Jt(dn,"StructArrayLayout1ul4");class Rn extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,a,u,h,m,v,x,S,C,R,L,D,H){const G=this.length;return this.resize(G+1),this.emplace(G,n,a,u,h,m,v,x,S,C,R,L,D,H)}emplace(n,a,u,h,m,v,x,S,C,R,L,D,H,G){const Y=20*n,ae=10*n;return this.int16[Y+0]=a,this.int16[Y+1]=u,this.int16[Y+2]=h,this.int16[Y+3]=m,this.int16[Y+4]=v,this.float32[ae+3]=x,this.float32[ae+4]=S,this.float32[ae+5]=C,this.float32[ae+6]=R,this.int16[Y+14]=L,this.uint32[ae+8]=D,this.uint16[Y+18]=H,this.uint16[Y+19]=G,n}}Rn.prototype.bytesPerElement=40,Jt(Rn,"StructArrayLayout5i4f1i1ul2ui40");class en extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a,u,h,m,v,x){const S=this.length;return this.resize(S+1),this.emplace(S,n,a,u,h,m,v,x)}emplace(n,a,u,h,m,v,x,S){const C=8*n;return this.int16[C+0]=a,this.int16[C+1]=u,this.int16[C+2]=h,this.int16[C+4]=m,this.int16[C+5]=v,this.int16[C+6]=x,this.int16[C+7]=S,n}}en.prototype.bytesPerElement=16,Jt(en,"StructArrayLayout3i2i2i16");class _n extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a,u,h,m){const v=this.length;return this.resize(v+1),this.emplace(v,n,a,u,h,m)}emplace(n,a,u,h,m,v){const x=4*n,S=8*n;return this.float32[x+0]=a,this.float32[x+1]=u,this.float32[x+2]=h,this.int16[S+6]=m,this.int16[S+7]=v,n}}_n.prototype.bytesPerElement=16,Jt(_n,"StructArrayLayout2f1f2i16");class Hn extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a,u,h){const m=this.length;return this.resize(m+1),this.emplace(m,n,a,u,h)}emplace(n,a,u,h,m){const v=12*n,x=3*n;return this.uint8[v+0]=a,this.uint8[v+1]=u,this.float32[x+1]=h,this.float32[x+2]=m,n}}Hn.prototype.bytesPerElement=12,Jt(Hn,"StructArrayLayout2ub2f12");class Un extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a,u){const h=this.length;return this.resize(h+1),this.emplace(h,n,a,u)}emplace(n,a,u,h){const m=3*n;return this.float32[m+0]=a,this.float32[m+1]=u,this.float32[m+2]=h,n}}Un.prototype.bytesPerElement=12,Jt(Un,"StructArrayLayout3f12");class cn extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,a,u){const h=this.length;return this.resize(h+1),this.emplace(h,n,a,u)}emplace(n,a,u,h){const m=3*n;return this.uint16[m+0]=a,this.uint16[m+1]=u,this.uint16[m+2]=h,n}}cn.prototype.bytesPerElement=6,Jt(cn,"StructArrayLayout3ui6");class dr extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n,a,u,h,m,v,x,S,C,R,L,D,H,G,Y,ae,ve,Te,ye,Ce,Ae){const Pe=this.length;return this.resize(Pe+1),this.emplace(Pe,n,a,u,h,m,v,x,S,C,R,L,D,H,G,Y,ae,ve,Te,ye,Ce,Ae)}emplace(n,a,u,h,m,v,x,S,C,R,L,D,H,G,Y,ae,ve,Te,ye,Ce,Ae,Pe){const Ye=30*n,Ze=15*n,at=60*n;return this.int16[Ye+0]=a,this.int16[Ye+1]=u,this.int16[Ye+2]=h,this.float32[Ze+2]=m,this.float32[Ze+3]=v,this.uint16[Ye+8]=x,this.uint16[Ye+9]=S,this.uint32[Ze+5]=C,this.uint32[Ze+6]=R,this.uint32[Ze+7]=L,this.uint16[Ye+16]=D,this.uint16[Ye+17]=H,this.uint16[Ye+18]=G,this.float32[Ze+10]=Y,this.float32[Ze+11]=ae,this.uint8[at+48]=ve,this.uint8[at+49]=Te,this.uint8[at+50]=ye,this.uint32[Ze+13]=Ce,this.int16[Ye+28]=Ae,this.uint8[at+58]=Pe,n}}dr.prototype.bytesPerElement=60,Jt(dr,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class yr extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n,a,u,h,m,v,x,S,C,R,L,D,H,G,Y,ae,ve,Te,ye,Ce,Ae,Pe,Ye,Ze,at,Rt,tt,pt,mt,_t){const $t=this.length;return this.resize($t+1),this.emplace($t,n,a,u,h,m,v,x,S,C,R,L,D,H,G,Y,ae,ve,Te,ye,Ce,Ae,Pe,Ye,Ze,at,Rt,tt,pt,mt,_t)}emplace(n,a,u,h,m,v,x,S,C,R,L,D,H,G,Y,ae,ve,Te,ye,Ce,Ae,Pe,Ye,Ze,at,Rt,tt,pt,mt,_t,$t){const it=38*n,Wt=19*n;return this.int16[it+0]=a,this.int16[it+1]=u,this.int16[it+2]=h,this.float32[Wt+2]=m,this.float32[Wt+3]=v,this.int16[it+8]=x,this.int16[it+9]=S,this.int16[it+10]=C,this.int16[it+11]=R,this.int16[it+12]=L,this.int16[it+13]=D,this.uint16[it+14]=H,this.uint16[it+15]=G,this.uint16[it+16]=Y,this.uint16[it+17]=ae,this.uint16[it+18]=ve,this.uint16[it+19]=Te,this.uint16[it+20]=ye,this.uint16[it+21]=Ce,this.uint16[it+22]=Ae,this.uint16[it+23]=Pe,this.uint16[it+24]=Ye,this.uint16[it+25]=Ze,this.uint16[it+26]=at,this.uint16[it+27]=Rt,this.uint16[it+28]=tt,this.uint32[Wt+15]=pt,this.float32[Wt+16]=mt,this.float32[Wt+17]=_t,this.float32[Wt+18]=$t,n}}yr.prototype.bytesPerElement=76,Jt(yr,"StructArrayLayout3i2f6i15ui1ul3f76");class _r extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n){const a=this.length;return this.resize(a+1),this.emplace(a,n)}emplace(n,a){return this.float32[1*n+0]=a,n}}_r.prototype.bytesPerElement=4,Jt(_r,"StructArrayLayout1f4");class xr extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a,u,h,m){const v=this.length;return this.resize(v+1),this.emplace(v,n,a,u,h,m)}emplace(n,a,u,h,m,v){const x=5*n;return this.float32[x+0]=a,this.float32[x+1]=u,this.float32[x+2]=h,this.float32[x+3]=m,this.float32[x+4]=v,n}}xr.prototype.bytesPerElement=20,Jt(xr,"StructArrayLayout5f20");class Hi extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,a,u,h){const m=this.length;return this.resize(m+1),this.emplace(m,n,a,u,h)}emplace(n,a,u,h,m){const v=6*n;return this.uint32[3*n+0]=a,this.uint16[v+2]=u,this.uint16[v+3]=h,this.uint16[v+4]=m,n}}Hi.prototype.bytesPerElement=12,Jt(Hi,"StructArrayLayout1ul3ui12");class Ti extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,a){const u=this.length;return this.resize(u+1),this.emplace(u,n,a)}emplace(n,a,u){const h=2*n;return this.uint16[h+0]=a,this.uint16[h+1]=u,n}}Ti.prototype.bytesPerElement=4,Jt(Ti,"StructArrayLayout2ui4");class Do extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n){const a=this.length;return this.resize(a+1),this.emplace(a,n)}emplace(n,a){return this.uint16[1*n+0]=a,n}}Do.prototype.bytesPerElement=2,Jt(Do,"StructArrayLayout1ui2");class ba extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a){const u=this.length;return this.resize(u+1),this.emplace(u,n,a)}emplace(n,a,u){const h=2*n;return this.float32[h+0]=a,this.float32[h+1]=u,n}}ba.prototype.bytesPerElement=8,Jt(ba,"StructArrayLayout2f8");class jr extends Oe{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}jr.prototype.size=40;class br extends Rn{get(n){return new jr(this,n)}}Jt(br,"CollisionBoxArray");class rr extends Oe{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(n){this._structArray.uint8[this._pos1+49]=n}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(n){this._structArray.uint8[this._pos1+50]=n}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(n){this._structArray.uint32[this._pos4+13]=n}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(n){this._structArray.uint8[this._pos1+58]=n}}rr.prototype.size=60;class ai extends dr{get(n){return new rr(this,n)}}Jt(ai,"PlacedSymbolArray");class Ki extends Oe{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(n){this._structArray.uint32[this._pos4+15]=n}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}Ki.prototype.size=76;class kr extends yr{get(n){return new Ki(this,n)}}Jt(kr,"SymbolInstanceArray");class so extends _r{getoffsetX(n){return this.float32[1*n+0]}}Jt(so,"GlyphOffsetArray");class od extends At{getx(n){return this.int16[2*n+0]}gety(n){return this.int16[2*n+1]}}Jt(od,"SymbolLineVertexArray");class Xs extends Oe{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}Xs.prototype.size=12;class jc extends Hi{get(n){return new Xs(this,n)}}Jt(jc,"FeatureIndexArray");class Za extends Ti{geta_centroid_pos0(n){return this.uint16[2*n+0]}geta_centroid_pos1(n){return this.uint16[2*n+1]}}Jt(Za,"FillExtrusionCentroidArray");const Es=Ue([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),Ks=Ue([{name:"a_dash",components:4,type:"Uint16"}]);var ad={exports:{}},Uc={exports:{}};Uc.exports=function(i,n){var a,u,h,m,v,x,S,C;for(u=i.length-(a=3&i.length),h=n,v=3432918353,x=461845907,C=0;C<u;)S=255&i.charCodeAt(C)|(255&i.charCodeAt(++C))<<8|(255&i.charCodeAt(++C))<<16|(255&i.charCodeAt(++C))<<24,++C,h=27492+(65535&(m=5*(65535&(h=(h^=S=(65535&(S=(S=(65535&S)*v+(((S>>>16)*v&65535)<<16)&4294967295)<<15|S>>>17))*x+(((S>>>16)*x&65535)<<16)&4294967295)<<13|h>>>19))+((5*(h>>>16)&65535)<<16)&4294967295))+((58964+(m>>>16)&65535)<<16);switch(S=0,a){case 3:S^=(255&i.charCodeAt(C+2))<<16;case 2:S^=(255&i.charCodeAt(C+1))<<8;case 1:h^=S=(65535&(S=(S=(65535&(S^=255&i.charCodeAt(C)))*v+(((S>>>16)*v&65535)<<16)&4294967295)<<15|S>>>17))*x+(((S>>>16)*x&65535)<<16)&4294967295}return h^=i.length,h=2246822507*(65535&(h^=h>>>16))+((2246822507*(h>>>16)&65535)<<16)&4294967295,h=3266489909*(65535&(h^=h>>>13))+((3266489909*(h>>>16)&65535)<<16)&4294967295,(h^=h>>>16)>>>0};var bf=Uc.exports,TE={exports:{}};TE.exports=function(i,n){for(var a,u=i.length,h=n^u,m=0;u>=4;)a=1540483477*(65535&(a=255&i.charCodeAt(m)|(255&i.charCodeAt(++m))<<8|(255&i.charCodeAt(++m))<<16|(255&i.charCodeAt(++m))<<24))+((1540483477*(a>>>16)&65535)<<16),h=1540483477*(65535&h)+((1540483477*(h>>>16)&65535)<<16)^(a=1540483477*(65535&(a^=a>>>24))+((1540483477*(a>>>16)&65535)<<16)),u-=4,++m;switch(u){case 3:h^=(255&i.charCodeAt(m+2))<<16;case 2:h^=(255&i.charCodeAt(m+1))<<8;case 1:h=1540483477*(65535&(h^=255&i.charCodeAt(m)))+((1540483477*(h>>>16)&65535)<<16)}return h=1540483477*(65535&(h^=h>>>13))+((1540483477*(h>>>16)&65535)<<16),(h^=h>>>15)>>>0};var IE=bf,KD=TE.exports;ad.exports=IE,ad.exports.murmur3=IE,ad.exports.murmur2=KD;var g_=V(ad.exports);class mg{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(n,a,u,h){this.ids.push(ME(n)),this.positions.push(a,u,h)}getPositions(n){const a=ME(n);let u=0,h=this.ids.length-1;for(;u<h;){const v=u+h>>1;this.ids[v]>=a?h=v:u=v+1}const m=[];for(;this.ids[u]===a;)m.push({index:this.positions[3*u],start:this.positions[3*u+1],end:this.positions[3*u+2]}),u++;return m}static serialize(n,a){const u=new Float64Array(n.ids),h=new Uint32Array(n.positions);return v_(u,h,0,u.length-1),a&&a.push(u.buffer,h.buffer),{ids:u,positions:h}}static deserialize(n){const a=new mg;return a.ids=n.ids,a.positions=n.positions,a.indexed=!0,a}}function ME(i){const n=+i;return!isNaN(n)&&Number.MIN_SAFE_INTEGER<=n&&n<=Number.MAX_SAFE_INTEGER?n:g_(String(i))}function v_(i,n,a,u){for(;a<u;){const h=i[a+u>>1];let m=a-1,v=u+1;for(;;){do m++;while(i[m]<h);do v--;while(i[v]>h);if(m>=v)break;gg(i,m,v),gg(n,3*m,3*v),gg(n,3*m+1,3*v+1),gg(n,3*m+2,3*v+2)}v-a<u-v?(v_(i,n,a,v),a=v+1):(v_(i,n,v+1,u),u=v)}}function gg(i,n,a){const u=i[n];i[n]=i[a],i[a]=u}Jt(mg,"FeaturePositionMap");class Ys{constructor(n){this.gl=n.gl,this.initialized=!1}fetchUniformLocation(n,a){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(n,a),this.initialized=!0),!!this.location}}class vg extends Ys{constructor(n){super(n),this.current=0}set(n,a,u){this.fetchUniformLocation(n,a)&&this.current!==u&&(this.current=u,this.gl.uniform1f(this.location,u))}}class PE extends Ys{constructor(n){super(n),this.current=[0,0,0,0]}set(n,a,u){this.fetchUniformLocation(n,a)&&(u[0]===this.current[0]&&u[1]===this.current[1]&&u[2]===this.current[2]&&u[3]===this.current[3]||(this.current=u,this.gl.uniform4f(this.location,u[0],u[1],u[2],u[3])))}}class AE extends Ys{constructor(n){super(n),this.current=Nr.transparent}set(n,a,u){this.fetchUniformLocation(n,a)&&(u.r===this.current.r&&u.g===this.current.g&&u.b===this.current.b&&u.a===this.current.a||(this.current=u,this.gl.uniform4f(this.location,u.r,u.g,u.b,u.a)))}}const YD=new Float32Array(16),JD=new Float32Array(9),QD=new Float32Array(4);function y_(i){return[Re(255*i.r,255*i.g),Re(255*i.b,255*i.a)]}class wf{constructor(n,a,u){this.value=n,this.uniformNames=a.map(h=>`u_${h}`),this.type=u}setUniform(n,a,u,h,m){a.set(n,m,h.constantOr(this.value))}getBinding(n,a){return this.type==="color"?new AE(n):new vg(n)}}class sd{constructor(n,a){this.uniformNames=a.map(u=>`u_${u}`),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(n){this.pixelRatio=n.pixelRatio||1,this.pattern=n.tl.concat(n.br)}setUniform(n,a,u,h,m){const v=m==="u_pattern"||m==="u_dash"?this.pattern:m==="u_pixel_ratio"?this.pixelRatio:null;v&&a.set(n,m,v)}getBinding(n,a){return a==="u_pattern"||a==="u_dash"?new PE(n):new vg(n)}}class Js{constructor(n,a,u,h){this.expression=n,this.type=u,this.maxValue=0,this.paintVertexAttributes=a.map(m=>({name:`a_${m}`,type:"Float32",components:u==="color"?2:1,offset:0})),this.paintVertexArray=new h}populatePaintArray(n,a,u,h,m,v){const x=this.paintVertexArray.length,S=this.expression.evaluate(new O(0),a,{},m,h,v);this.paintVertexArray.resize(n),this._setPaintValue(x,n,S)}updatePaintArray(n,a,u,h,m){const v=this.expression.evaluate({zoom:0},u,h,void 0,m);this._setPaintValue(n,a,v)}_setPaintValue(n,a,u){if(this.type==="color"){const h=y_(u);for(let m=n;m<a;m++)this.paintVertexArray.emplace(m,h[0],h[1])}else{for(let h=n;h<a;h++)this.paintVertexArray.emplace(h,u);this.maxValue=Math.max(this.maxValue,Math.abs(u))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Xa{constructor(n,a,u,h,m,v){this.expression=n,this.uniformNames=a.map(x=>`u_${x}_t`),this.type=u,this.useIntegerZoom=h,this.zoom=m,this.maxValue=0,this.paintVertexAttributes=a.map(x=>({name:`a_${x}`,type:"Float32",components:u==="color"?4:2,offset:0})),this.paintVertexArray=new v}populatePaintArray(n,a,u,h,m,v){const x=this.expression.evaluate(new O(this.zoom),a,{},m,h,v),S=this.expression.evaluate(new O(this.zoom+1),a,{},m,h,v),C=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValue(C,n,x,S)}updatePaintArray(n,a,u,h,m){const v=this.expression.evaluate({zoom:this.zoom},u,h,void 0,m),x=this.expression.evaluate({zoom:this.zoom+1},u,h,void 0,m);this._setPaintValue(n,a,v,x)}_setPaintValue(n,a,u,h){if(this.type==="color"){const m=y_(u),v=y_(h);for(let x=n;x<a;x++)this.paintVertexArray.emplace(x,m[0],m[1],v[0],v[1])}else{for(let m=n;m<a;m++)this.paintVertexArray.emplace(m,u,h);this.maxValue=Math.max(this.maxValue,Math.abs(u),Math.abs(h))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(n,a,u,h,m){const v=this.useIntegerZoom?Math.floor(u.zoom):u.zoom,x=pe(this.expression.interpolationFactor(v,this.zoom,this.zoom+1),0,1);a.set(n,m,x)}getBinding(n,a){return new vg(n)}}class Nl{constructor(n,a,u,h,m){this.expression=n,this.layerId=m,this.paintVertexAttributes=(u==="array"?Ks:Es).members;for(let v=0;v<a.length;++v);this.paintVertexArray=new h}populatePaintArray(n,a,u){const h=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValues(h,n,a.patterns&&a.patterns[this.layerId],u)}updatePaintArray(n,a,u,h,m,v){this._setPaintValues(n,a,u.patterns&&u.patterns[this.layerId],v)}_setPaintValues(n,a,u,h){if(!h||!u)return;const m=h[u];if(!m)return;const{tl:v,br:x,pixelRatio:S}=m;for(let C=n;C<a;C++)this.paintVertexArray.emplace(C,v[0],v[1],x[0],x[1],S)}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class jl{constructor(n,a,u=()=>!0){this.binders={},this._buffers=[];const h=[];for(const m in n.paint._values){if(!u(m))continue;const v=n.paint.get(m);if(!(v instanceof ce&&Ol(v.property.specification)))continue;const x=tk(m,n.type),S=v.value,C=v.property.specification.type,R=!!v.property.useIntegerZoom,L=m==="line-dasharray"||m.endsWith("pattern"),D=m==="line-dasharray"&&n.layout.get("line-cap").value.kind!=="constant";if(S.kind!=="constant"||D)if(S.kind==="source"||D||L){const H=RE(m,C,"source");this.binders[m]=L?new Nl(S,x,C,H,n.id):new Js(S,x,C,H),h.push(`/a_${m}`)}else{const H=RE(m,C,"composite");this.binders[m]=new Xa(S,x,C,R,a,H),h.push(`/z_${m}`)}else this.binders[m]=L?new sd(S.value,x):new wf(S.value,x,C),h.push(`/u_${m}`)}this.cacheKey=h.sort().join("")}getMaxValue(n){const a=this.binders[n];return a instanceof Js||a instanceof Xa?a.maxValue:0}populatePaintArrays(n,a,u,h,m,v){for(const x in this.binders){const S=this.binders[x];(S instanceof Js||S instanceof Xa||S instanceof Nl)&&S.populatePaintArray(n,a,u,h,m,v)}}setConstantPatternPositions(n){for(const a in this.binders){const u=this.binders[a];u instanceof sd&&u.setConstantPatternPositions(n)}}updatePaintArrays(n,a,u,h,m,v){let x=!1;for(const S in n){const C=a.getPositions(S);for(const R of C){const L=u.feature(R.index);for(const D in this.binders){const H=this.binders[D];if((H instanceof Js||H instanceof Xa||H instanceof Nl)&&H.expression.isStateDependent===!0){const G=h.paint.get(D);H.expression=G.value,H.updatePaintArray(R.start,R.end,L,n[S],m,v),x=!0}}}}return x}defines(){const n=[];for(const a in this.binders){const u=this.binders[a];(u instanceof wf||u instanceof sd)&&n.push(...u.uniformNames.map(h=>`#define HAS_UNIFORM_${h}`))}return n}getBinderAttributes(){const n=[];for(const a in this.binders){const u=this.binders[a];if(u instanceof Js||u instanceof Xa||u instanceof Nl)for(let h=0;h<u.paintVertexAttributes.length;h++)n.push(u.paintVertexAttributes[h].name)}return n}getBinderUniforms(){const n=[];for(const a in this.binders){const u=this.binders[a];if(u instanceof wf||u instanceof sd||u instanceof Xa)for(const h of u.uniformNames)n.push(h)}return n}getPaintVertexBuffers(){return this._buffers}getUniforms(n){const a=[];for(const u in this.binders){const h=this.binders[u];if(h instanceof wf||h instanceof sd||h instanceof Xa)for(const m of h.uniformNames)a.push({name:m,property:u,binding:h.getBinding(n,m)})}return a}setUniforms(n,a,u,h,m){for(const{name:v,property:x,binding:S}of u)this.binders[x].setUniform(n,S,m,h.get(x),v)}updatePaintBuffers(){this._buffers=[];for(const n in this.binders){const a=this.binders[n];(a instanceof Js||a instanceof Xa||a instanceof Nl)&&a.paintVertexBuffer&&this._buffers.push(a.paintVertexBuffer)}}upload(n){for(const a in this.binders){const u=this.binders[a];(u instanceof Js||u instanceof Xa||u instanceof Nl)&&u.upload(n)}this.updatePaintBuffers()}destroy(){for(const n in this.binders){const a=this.binders[n];(a instanceof Js||a instanceof Xa||a instanceof Nl)&&a.destroy()}}}class Vc{constructor(n,a,u=()=>!0){this.programConfigurations={};for(const h of n)this.programConfigurations[h.id]=new jl(h,a,u);this.needsUpload=!1,this._featureMap=new mg,this._bufferOffset=0}populatePaintArrays(n,a,u,h,m,v,x){for(const S in this.programConfigurations)this.programConfigurations[S].populatePaintArrays(n,a,h,m,v,x);a.id!==void 0&&this._featureMap.add(a.id,u,this._bufferOffset,n),this._bufferOffset=n,this.needsUpload=!0}updatePaintArrays(n,a,u,h,m){for(const v of u)this.needsUpload=this.programConfigurations[v.id].updatePaintArrays(n,this._featureMap,a,v,h,m)||this.needsUpload}get(n){return this.programConfigurations[n]}upload(n){if(this.needsUpload){for(const a in this.programConfigurations)this.programConfigurations[a].upload(n);this.needsUpload=!1}}destroy(){for(const n in this.programConfigurations)this.programConfigurations[n].destroy()}}const ek={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function tk(i,n){return ek[i]||[i.replace(`${n}-`,"").replace(/-/g,"_")]}const nk={"line-pattern":{source:Xe,composite:Xe},"fill-pattern":{source:Xe,composite:Xe},"fill-extrusion-pattern":{source:Xe,composite:Xe},"line-dasharray":{source:dt,composite:dt}},rk={color:{source:ba,composite:Et},number:{source:_r,composite:ba}};function RE(i,n,a){const u=nk[i];return u&&u[a]||rk[n][a]}Jt(wf,"ConstantBinder"),Jt(sd,"PatternConstantBinder"),Jt(Js,"SourceExpressionBinder"),Jt(Nl,"PatternCompositeBinder"),Jt(Xa,"CompositeExpressionBinder"),Jt(jl,"ProgramConfiguration",{omit:["_buffers"]}),Jt(Vc,"ProgramConfigurationSet");const OE="-transition";class Ka extends Oi{constructor(n,a){if(super(),this.id=n.id,this.type=n.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,n.type!=="custom"&&(this.metadata=n.metadata,this.minzoom=n.minzoom,this.maxzoom=n.maxzoom,n.type!=="background"&&n.type!=="sky"&&(this.source=n.source,this.sourceLayer=n["source-layer"],this.filter=n.filter),a.layout&&(this._unevaluatedLayout=new he(a.layout)),a.paint)){this._transitionablePaint=new q(a.paint);for(const u in n.paint)this.setPaintProperty(u,n.paint[u],{validate:!1});for(const u in n.layout)this.setLayoutProperty(u,n.layout[u],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new me(a.paint)}}getLayoutProperty(n){return n==="visibility"?this.visibility:this._unevaluatedLayout.getValue(n)}setLayoutProperty(n,a,u={}){a!=null&&this._validate(d_,`layers.${this.id}.layout.${n}`,n,a,u)||(n!=="visibility"?this._unevaluatedLayout.setValue(n,a):this.visibility=a)}getPaintProperty(n){return It(n,OE)?this._transitionablePaint.getTransition(n.slice(0,-11)):this._transitionablePaint.getValue(n)}setPaintProperty(n,a,u={}){if(a!=null&&this._validate(u_,`layers.${this.id}.paint.${n}`,n,a,u))return!1;if(It(n,OE))return this._transitionablePaint.setTransition(n.slice(0,-11),a||void 0),!1;{const h=this._transitionablePaint._values[n],m=h.value.isDataDriven(),v=h.value;this._transitionablePaint.setValue(n,a),this._handleSpecialPaintPropertyUpdate(n);const x=this._transitionablePaint._values[n].value,S=x.isDataDriven(),C=It(n,"pattern")||n==="line-dasharray";return S||m||C||this._handleOverridablePaintPropertyUpdate(n,v,x)}}_handleSpecialPaintPropertyUpdate(n){}getProgramIds(){return null}getProgramConfiguration(n){return null}_handleOverridablePaintPropertyUpdate(n,a,u){return!1}isHidden(n){return!!(this.minzoom&&n<this.minzoom)||!!(this.maxzoom&&n>=this.maxzoom)||this.visibility==="none"}updateTransitions(n){this._transitioningPaint=this._transitionablePaint.transitioned(n,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(n,a){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(n,void 0,a)),this.paint=this._transitioningPaint.possiblyEvaluate(n,void 0,a)}serialize(){const n={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(n.layout=n.layout||{},n.layout.visibility=this.visibility),yt(n,(a,u)=>!(a===void 0||u==="layout"&&!Object.keys(a).length||u==="paint"&&!Object.keys(a).length))}_validate(n,a,u,h,m={}){return(!m||m.validate!==!1)&&dg(this,n.call(ug,{key:a,layerType:this.type,objectKey:u,value:h,styleSpec:nt,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const n in this.paint._values){const a=this.paint.get(n);if(a instanceof ce&&Ol(a.property.specification)&&(a.value.kind==="source"||a.value.kind==="composite")&&a.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=td(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}const ik=Ue([{name:"a_pos",components:2,type:"Int16"}],4),ok=Ue([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class si{constructor(n=[]){this.segments=n}prepareSegment(n,a,u,h){let m=this.segments[this.segments.length-1];return n>si.MAX_VERTEX_ARRAY_LENGTH&&Ct(`Max vertices per segment is ${si.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${n}`),(!m||m.vertexLength+n>si.MAX_VERTEX_ARRAY_LENGTH||m.sortKey!==h)&&(m={vertexOffset:a.length,primitiveOffset:u.length,vertexLength:0,primitiveLength:0},h!==void 0&&(m.sortKey=h),this.segments.push(m)),m}get(){return this.segments}destroy(){for(const n of this.segments)for(const a in n.vaos)n.vaos[a].destroy()}static simpleSegment(n,a,u,h){return new si([{vertexOffset:n,primitiveOffset:a,vertexLength:u,primitiveLength:h,vaos:{},sortKey:0}])}}si.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Jt(si,"SegmentVector");var gn=8192;class Ul{constructor(n,a){n&&(a?this.setSouthWest(n).setNorthEast(a):n.length===4?this.setSouthWest([n[0],n[1]]).setNorthEast([n[2],n[3]]):this.setSouthWest(n[0]).setNorthEast(n[1]))}setNorthEast(n){return this._ne=n instanceof wr?new wr(n.lng,n.lat):wr.convert(n),this}setSouthWest(n){return this._sw=n instanceof wr?new wr(n.lng,n.lat):wr.convert(n),this}extend(n){const a=this._sw,u=this._ne;let h,m;if(n instanceof wr)h=n,m=n;else{if(!(n instanceof Ul))return Array.isArray(n)?n.length===4||n.every(Array.isArray)?this.extend(Ul.convert(n)):this.extend(wr.convert(n)):typeof n=="object"&&n!==null&&n.hasOwnProperty("lat")&&(n.hasOwnProperty("lon")||n.hasOwnProperty("lng"))?this.extend(wr.convert(n)):this;if(h=n._sw,m=n._ne,!h||!m)return this}return a||u?(a.lng=Math.min(h.lng,a.lng),a.lat=Math.min(h.lat,a.lat),u.lng=Math.max(m.lng,u.lng),u.lat=Math.max(m.lat,u.lat)):(this._sw=new wr(h.lng,h.lat),this._ne=new wr(m.lng,m.lat)),this}getCenter(){return new wr((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new wr(this.getWest(),this.getNorth())}getSouthEast(){return new wr(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(n){const{lng:a,lat:u}=wr.convert(n);let h=this._sw.lng<=a&&a<=this._ne.lng;return this._sw.lng>this._ne.lng&&(h=this._sw.lng>=a&&a>=this._ne.lng),this._sw.lat<=u&&u<=this._ne.lat&&h}static convert(n){return!n||n instanceof Ul?n:new Ul(n)}}var yg=1e-6,ko=typeof Float32Array<"u"?Float32Array:Array;function zE(){var i=new ko(9);return ko!=Float32Array&&(i[1]=0,i[2]=0,i[3]=0,i[5]=0,i[6]=0,i[7]=0),i[0]=1,i[4]=1,i[8]=1,i}function LE(i,n,a){var u=n[0],h=n[1],m=n[2],v=n[3],x=n[4],S=n[5],C=n[6],R=n[7],L=n[8],D=a[0],H=a[1],G=a[2],Y=a[3],ae=a[4],ve=a[5],Te=a[6],ye=a[7],Ce=a[8];return i[0]=D*u+H*v+G*C,i[1]=D*h+H*x+G*R,i[2]=D*m+H*S+G*L,i[3]=Y*u+ae*v+ve*C,i[4]=Y*h+ae*x+ve*R,i[5]=Y*m+ae*S+ve*L,i[6]=Te*u+ye*v+Ce*C,i[7]=Te*h+ye*x+Ce*R,i[8]=Te*m+ye*S+Ce*L,i}function Ya(i){return i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}function __(i,n){var a=n[0],u=n[1],h=n[2],m=n[3],v=n[4],x=n[5],S=n[6],C=n[7],R=n[8],L=n[9],D=n[10],H=n[11],G=n[12],Y=n[13],ae=n[14],ve=n[15],Te=a*x-u*v,ye=a*S-h*v,Ce=a*C-m*v,Ae=u*S-h*x,Pe=u*C-m*x,Ye=h*C-m*S,Ze=R*Y-L*G,at=R*ae-D*G,Rt=R*ve-H*G,tt=L*ae-D*Y,pt=L*ve-H*Y,mt=D*ve-H*ae,_t=Te*mt-ye*pt+Ce*tt+Ae*Rt-Pe*at+Ye*Ze;return _t?(i[0]=(x*mt-S*pt+C*tt)*(_t=1/_t),i[1]=(h*pt-u*mt-m*tt)*_t,i[2]=(Y*Ye-ae*Pe+ve*Ae)*_t,i[3]=(D*Pe-L*Ye-H*Ae)*_t,i[4]=(S*Rt-v*mt-C*at)*_t,i[5]=(a*mt-h*Rt+m*at)*_t,i[6]=(ae*Ce-G*Ye-ve*ye)*_t,i[7]=(R*Ye-D*Ce+H*ye)*_t,i[8]=(v*pt-x*Rt+C*Ze)*_t,i[9]=(u*Rt-a*pt-m*Ze)*_t,i[10]=(G*Pe-Y*Ce+ve*Te)*_t,i[11]=(L*Ce-R*Pe-H*Te)*_t,i[12]=(x*at-v*tt-S*Ze)*_t,i[13]=(a*tt-u*at+h*Ze)*_t,i[14]=(Y*ye-G*Ae-ae*Te)*_t,i[15]=(R*Ae-L*ye+D*Te)*_t,i):null}function Hc(i,n,a){var u=n[0],h=n[1],m=n[2],v=n[3],x=n[4],S=n[5],C=n[6],R=n[7],L=n[8],D=n[9],H=n[10],G=n[11],Y=n[12],ae=n[13],ve=n[14],Te=n[15],ye=a[0],Ce=a[1],Ae=a[2],Pe=a[3];return i[0]=ye*u+Ce*x+Ae*L+Pe*Y,i[1]=ye*h+Ce*S+Ae*D+Pe*ae,i[2]=ye*m+Ce*C+Ae*H+Pe*ve,i[3]=ye*v+Ce*R+Ae*G+Pe*Te,i[4]=(ye=a[4])*u+(Ce=a[5])*x+(Ae=a[6])*L+(Pe=a[7])*Y,i[5]=ye*h+Ce*S+Ae*D+Pe*ae,i[6]=ye*m+Ce*C+Ae*H+Pe*ve,i[7]=ye*v+Ce*R+Ae*G+Pe*Te,i[8]=(ye=a[8])*u+(Ce=a[9])*x+(Ae=a[10])*L+(Pe=a[11])*Y,i[9]=ye*h+Ce*S+Ae*D+Pe*ae,i[10]=ye*m+Ce*C+Ae*H+Pe*ve,i[11]=ye*v+Ce*R+Ae*G+Pe*Te,i[12]=(ye=a[12])*u+(Ce=a[13])*x+(Ae=a[14])*L+(Pe=a[15])*Y,i[13]=ye*h+Ce*S+Ae*D+Pe*ae,i[14]=ye*m+Ce*C+Ae*H+Pe*ve,i[15]=ye*v+Ce*R+Ae*G+Pe*Te,i}function Sf(i,n,a){var u,h,m,v,x,S,C,R,L,D,H,G,Y=a[0],ae=a[1],ve=a[2];return n===i?(i[12]=n[0]*Y+n[4]*ae+n[8]*ve+n[12],i[13]=n[1]*Y+n[5]*ae+n[9]*ve+n[13],i[14]=n[2]*Y+n[6]*ae+n[10]*ve+n[14],i[15]=n[3]*Y+n[7]*ae+n[11]*ve+n[15]):(h=n[1],m=n[2],v=n[3],x=n[4],S=n[5],C=n[6],R=n[7],L=n[8],D=n[9],H=n[10],G=n[11],i[0]=u=n[0],i[1]=h,i[2]=m,i[3]=v,i[4]=x,i[5]=S,i[6]=C,i[7]=R,i[8]=L,i[9]=D,i[10]=H,i[11]=G,i[12]=u*Y+x*ae+L*ve+n[12],i[13]=h*Y+S*ae+D*ve+n[13],i[14]=m*Y+C*ae+H*ve+n[14],i[15]=v*Y+R*ae+G*ve+n[15]),i}function Gc(i,n,a){var u=a[0],h=a[1],m=a[2];return i[0]=n[0]*u,i[1]=n[1]*u,i[2]=n[2]*u,i[3]=n[3]*u,i[4]=n[4]*h,i[5]=n[5]*h,i[6]=n[6]*h,i[7]=n[7]*h,i[8]=n[8]*m,i[9]=n[9]*m,i[10]=n[10]*m,i[11]=n[11]*m,i[12]=n[12],i[13]=n[13],i[14]=n[14],i[15]=n[15],i}function x_(i,n,a){var u=Math.sin(a),h=Math.cos(a),m=n[4],v=n[5],x=n[6],S=n[7],C=n[8],R=n[9],L=n[10],D=n[11];return n!==i&&(i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=n[3],i[12]=n[12],i[13]=n[13],i[14]=n[14],i[15]=n[15]),i[4]=m*h+C*u,i[5]=v*h+R*u,i[6]=x*h+L*u,i[7]=S*h+D*u,i[8]=C*h-m*u,i[9]=R*h-v*u,i[10]=L*h-x*u,i[11]=D*h-S*u,i}function _g(i,n,a){var u=Math.sin(a),h=Math.cos(a),m=n[0],v=n[1],x=n[2],S=n[3],C=n[8],R=n[9],L=n[10],D=n[11];return n!==i&&(i[4]=n[4],i[5]=n[5],i[6]=n[6],i[7]=n[7],i[12]=n[12],i[13]=n[13],i[14]=n[14],i[15]=n[15]),i[0]=m*h-C*u,i[1]=v*h-R*u,i[2]=x*h-L*u,i[3]=S*h-D*u,i[8]=m*u+C*h,i[9]=v*u+R*h,i[10]=x*u+L*h,i[11]=S*u+D*h,i}function DE(i,n){return i[0]=n[0],i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=n[1],i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=n[2],i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}function kE(i,n,a){var u,h,m,v=a[0],x=a[1],S=a[2],C=Math.hypot(v,x,S);return C<yg?null:(v*=C=1/C,x*=C,S*=C,u=Math.sin(n),h=Math.cos(n),i[0]=v*v*(m=1-h)+h,i[1]=x*v*m+S*u,i[2]=S*v*m-x*u,i[3]=0,i[4]=v*x*m-S*u,i[5]=x*x*m+h,i[6]=S*x*m+v*u,i[7]=0,i[8]=v*S*m+x*u,i[9]=x*S*m-v*u,i[10]=S*S*m+h,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i)}Math.hypot||(Math.hypot=function(){for(var i=0,n=arguments.length;n--;)i+=arguments[n]*arguments[n];return Math.sqrt(i)});var ak=Hc;function b_(){var i=new ko(3);return ko!=Float32Array&&(i[0]=0,i[1]=0,i[2]=0),i}function $E(i){var n=new ko(3);return n[0]=i[0],n[1]=i[1],n[2]=i[2],n}function Ef(i){return Math.hypot(i[0],i[1],i[2])}function ld(i,n,a){var u=new ko(3);return u[0]=i,u[1]=n,u[2]=a,u}function Qs(i,n,a){return i[0]=n[0]+a[0],i[1]=n[1]+a[1],i[2]=n[2]+a[2],i}function w_(i,n,a){return i[0]=n[0]-a[0],i[1]=n[1]-a[1],i[2]=n[2]-a[2],i}function FE(i,n,a){return i[0]=n[0]*a[0],i[1]=n[1]*a[1],i[2]=n[2]*a[2],i}function Cf(i,n,a){return i[0]=Math.min(n[0],a[0]),i[1]=Math.min(n[1],a[1]),i[2]=Math.min(n[2],a[2]),i}function Tf(i,n,a){return i[0]=Math.max(n[0],a[0]),i[1]=Math.max(n[1],a[1]),i[2]=Math.max(n[2],a[2]),i}function Qo(i,n,a){return i[0]=n[0]*a,i[1]=n[1]*a,i[2]=n[2]*a,i}function If(i,n,a,u){return i[0]=n[0]+a[0]*u,i[1]=n[1]+a[1]*u,i[2]=n[2]+a[2]*u,i}function lo(i,n){var a=n[0],u=n[1],h=n[2],m=a*a+u*u+h*h;return m>0&&(m=1/Math.sqrt(m)),i[0]=n[0]*m,i[1]=n[1]*m,i[2]=n[2]*m,i}function wa(i,n){return i[0]*n[0]+i[1]*n[1]+i[2]*n[2]}function S_(i,n,a){var u=n[0],h=n[1],m=n[2],v=a[0],x=a[1],S=a[2];return i[0]=h*S-m*x,i[1]=m*v-u*S,i[2]=u*x-h*v,i}function ii(i,n,a){var u=n[0],h=n[1],m=n[2],v=a[3]*u+a[7]*h+a[11]*m+a[15];return i[0]=(a[0]*u+a[4]*h+a[8]*m+a[12])/(v=v||1),i[1]=(a[1]*u+a[5]*h+a[9]*m+a[13])/v,i[2]=(a[2]*u+a[6]*h+a[10]*m+a[14])/v,i}function BE(i,n,a){var u=a[0],h=a[1],m=a[2],v=n[0],x=n[1],S=n[2],C=h*S-m*x,R=m*v-u*S,L=u*x-h*v,D=h*L-m*R,H=m*C-u*L,G=u*R-h*C,Y=2*a[3];return R*=Y,L*=Y,H*=2,G*=2,i[0]=v+(C*=Y)+(D*=2),i[1]=x+R+H,i[2]=S+L+G,i}var Mf,Ja=w_,sk=FE,lk=Ef;function NE(i,n,a){return i[0]=n[0]*a,i[1]=n[1]*a,i[2]=n[2]*a,i[3]=n[3]*a,i}function jE(i,n){var a=n[0],u=n[1],h=n[2],m=n[3],v=a*a+u*u+h*h+m*m;return v>0&&(v=1/Math.sqrt(v)),i[0]=a*v,i[1]=u*v,i[2]=h*v,i[3]=m*v,i}function Wc(i,n,a){var u=n[0],h=n[1],m=n[2],v=n[3];return i[0]=a[0]*u+a[4]*h+a[8]*m+a[12]*v,i[1]=a[1]*u+a[5]*h+a[9]*m+a[13]*v,i[2]=a[2]*u+a[6]*h+a[10]*m+a[14]*v,i[3]=a[3]*u+a[7]*h+a[11]*m+a[15]*v,i}function UE(){var i=new ko(4);return ko!=Float32Array&&(i[0]=0,i[1]=0,i[2]=0),i[3]=1,i}function VE(i){return i[0]=0,i[1]=0,i[2]=0,i[3]=1,i}function HE(i,n,a){a*=.5;var u=n[0],h=n[1],m=n[2],v=n[3],x=Math.sin(a),S=Math.cos(a);return i[0]=u*S+v*x,i[1]=h*S+m*x,i[2]=m*S-h*x,i[3]=v*S-u*x,i}function GE(i,n,a){a*=.5;var u=n[0],h=n[1],m=n[2],v=n[3],x=Math.sin(a),S=Math.cos(a);return i[0]=u*S-m*x,i[1]=h*S+v*x,i[2]=m*S+u*x,i[3]=v*S-h*x,i}b_(),Mf=new ko(4),ko!=Float32Array&&(Mf[0]=0,Mf[1]=0,Mf[2]=0,Mf[3]=0);var ck=jE;b_(),ld(1,0,0),ld(0,1,0),UE(),UE(),zE();const uk=Ue([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:WE}=uk,qE=Ue([{name:"a_pos_3",components:3,type:"Int16"}]);var Pf=Ue([{name:"a_pos",type:"Int16",components:2}]);class E_{constructor(n,a){this.pos=n,this.dir=a}intersectsPlane(n,a,u){const h=wa(a,this.dir);if(Math.abs(h)<1e-6)return!1;const m=((n[0]-this.pos[0])*a[0]+(n[1]-this.pos[1])*a[1]+(n[2]-this.pos[2])*a[2])/h;return u[0]=this.pos[0]+this.dir[0]*m,u[1]=this.pos[1]+this.dir[1]*m,u[2]=this.pos[2]+this.dir[2]*m,!0}closestPointOnSphere(n,a,u){if(function(H,G){var Y=H[0],ae=H[1],ve=H[2],Te=G[0],ye=G[1],Ce=G[2];return Math.abs(Y-Te)<=yg*Math.max(1,Math.abs(Y),Math.abs(Te))&&Math.abs(ae-ye)<=yg*Math.max(1,Math.abs(ae),Math.abs(ye))&&Math.abs(ve-Ce)<=yg*Math.max(1,Math.abs(ve),Math.abs(Ce))}(this.pos,n)||a===0)return u[0]=u[1]=u[2]=0,!1;const[h,m,v]=this.dir,x=this.pos[0]-n[0],S=this.pos[1]-n[1],C=this.pos[2]-n[2],R=h*h+m*m+v*v,L=2*(x*h+S*m+C*v),D=L*L-4*R*(x*x+S*S+C*C-a*a);if(D<0){const H=Math.max(-L/2,0),G=x+h*H,Y=S+m*H,ae=C+v*H,ve=Math.hypot(G,Y,ae);return u[0]=G*a/ve,u[1]=Y*a/ve,u[2]=ae*a/ve,!1}{const H=(-L-Math.sqrt(D))/(2*R);if(H<0){const G=Math.hypot(x,S,C);return u[0]=x*a/G,u[1]=S*a/G,u[2]=C*a/G,!1}return u[0]=x+h*H,u[1]=S+m*H,u[2]=C+v*H,!0}}}class C_{constructor(n,a,u,h,m){this.TL=n,this.TR=a,this.BR=u,this.BL=h,this.horizon=m}static fromInvProjectionMatrix(n,a,u){const h=[-1,1,1],m=[1,1,1],v=[1,-1,1],x=[-1,-1,1],S=ii(h,h,n),C=ii(m,m,n),R=ii(v,v,n),L=ii(x,x,n);return new C_(S,C,R,L,a/u)}}class T_{constructor(n,a){this.points=n,this.planes=a}static fromInvProjectionMatrix(n,a,u,h){const m=Math.pow(2,u),v=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(S=>{const C=Wc([],S,n),R=1/C[3]/a*m;return function(L,D,H){return L[0]=D[0]*H[0],L[1]=D[1]*H[1],L[2]=D[2]*H[2],L[3]=D[3]*H[3],L}(C,C,[R,R,h?1/C[3]:R,R])}),x=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(S=>{const C=lo([],S_([],Ja([],v[S[0]],v[S[1]]),Ja([],v[S[2]],v[S[1]]))),R=-wa(C,v[S[1]]);return C.concat(R)});return new T_(v,x)}}class co{static fromPoints(n){const a=[1/0,1/0,1/0],u=[-1/0,-1/0,-1/0];for(const h of n)Cf(a,a,h),Tf(u,u,h);return new co(a,u)}static applyTransform(n,a){const u=n.getCorners();for(let h=0;h<u.length;++h)ii(u[h],u[h],a);return co.fromPoints(u)}constructor(n,a){this.min=n,this.max=a,this.center=Qo([],Qs([],this.min,this.max),.5)}quadrant(n){const a=[n%2==0,n<2],u=$E(this.min),h=$E(this.max);for(let m=0;m<a.length;m++)u[m]=a[m]?this.min[m]:this.center[m],h[m]=a[m]?this.center[m]:this.max[m];return h[2]=this.max[2],new co(u,h)}distanceX(n){return Math.max(Math.min(this.max[0],n[0]),this.min[0])-n[0]}distanceY(n){return Math.max(Math.min(this.max[1],n[1]),this.min[1])-n[1]}distanceZ(n){return Math.max(Math.min(this.max[2],n[2]),this.min[2])-n[2]}getCorners(){const n=this.min,a=this.max;return[[n[0],n[1],n[2]],[a[0],n[1],n[2]],[a[0],a[1],n[2]],[n[0],a[1],n[2]],[n[0],n[1],a[2]],[a[0],n[1],a[2]],[a[0],a[1],a[2]],[n[0],a[1],a[2]]]}intersects(n){const a=this.getCorners();let u=!0;for(let h=0;h<n.planes.length;h++){const m=n.planes[h];let v=0;for(let x=0;x<a.length;x++)v+=wa(m,a[x])+m[3]>=0;if(v===0)return 0;v!==a.length&&(u=!1)}if(u)return 2;for(let h=0;h<3;h++){let m=Number.MAX_VALUE,v=-Number.MAX_VALUE;for(let x=0;x<n.points.length;x++){const S=n.points[x][h]-this.min[h];m=Math.min(m,S),v=Math.max(v,S)}if(v<0||m>this.max[h]-this.min[h])return 0}return 1}}const I_=5,ZE=6,Cs=gn/Math.PI/2,dk=16383,qc=64,Af=[qc,32,16],Sa=-Cs,Ea=Cs,hk=[new co([Sa,Sa,Sa],[Ea,Ea,Ea]),new co([Sa,Sa,Sa],[0,0,Ea]),new co([0,Sa,Sa],[Ea,0,Ea]),new co([Sa,0,Sa],[0,Ea,Ea]),new co([0,0,Sa],[Ea,Ea,Ea])];function xg(i){return i*Cs/zf}function XE(i,n,a,u=!0){const h=Qo([],i._camera.position,i.worldSize),m=[n,a,1,1];Wc(m,m,i.pixelMatrixInverse),NE(m,m,1/m[3]);const v=lo([],Ja([],m,h)),x=i.globeMatrix,S=[x[12],x[13],x[14]],C=Ja([],S,h),R=Ef(C),L=lo([],C),D=i.worldSize/(2*Math.PI),H=wa(L,v),G=Math.asin(D/R);if(G<Math.acos(H)){if(!u)return null;const Rt=[],tt=[];Qo(Rt,v,R/H),lo(tt,Ja(tt,Rt,C)),lo(v,Qs(v,C,Qo(v,tt,Math.tan(G)*R)))}const Y=[];new E_(h,v).closestPointOnSphere(S,D,Y);const ae=lo([],sn(x,0)),ve=lo([],sn(x,1)),Te=lo([],sn(x,2)),ye=wa(ae,Y),Ce=wa(ve,Y),Ae=wa(Te,Y),Pe=fe(Math.asin(-Ce/D));let Ye=fe(Math.atan2(ye,Ae));Ye=i.center.lng+function(Rt,tt){const pt=(tt-Rt+180)%360-180;return pt<-180?pt+360:pt}(i.center.lng,Ye);const Ze=Is(Ye),at=pe(Ms(Pe),0,1);return new hd(Ze,at)}class fk{constructor(n,a,u){this.a=Ja([],n,u),this.b=Ja([],a,u),this.center=u;const h=lo([],this.a),m=lo([],this.b);this.angle=Math.acos(wa(h,m))}}function M_(i,n){if(i.angle===0)return null;let a;return a=i.a[n]===0?1/i.angle*.5*Math.PI:1/i.angle*Math.atan(i.b[n]/i.a[n]/Math.sin(i.angle)-1/Math.tan(i.angle)),a<0||a>1?null:function(u,h,m,v){const x=Math.sin(m);return u*(Math.sin((1-v)*m)/x)+h*(Math.sin(v*m)/x)}(i.a[n],i.b[n],i.angle,pe(a,0,1))+i.center[n]}function Ts(i){if(i.z<=1)return hk[i.z+2*i.y+i.x];const n=P_(bg(i));return co.fromPoints(n)}function Zc(i,n,a){return Qo(i,i,1-a),If(i,i,n,a)}function KE(i,n){const a=dd(n.zoom);if(a===0)return Ts(i);const u=bg(i),h=P_(u),m=Is(u.getWest())*n.worldSize,v=Is(u.getEast())*n.worldSize,x=Ms(u.getNorth())*n.worldSize,S=Ms(u.getSouth())*n.worldSize,C=[m,x,0],R=[v,x,0],L=[m,S,0],D=[v,S,0],H=__([],n.globeMatrix);return ii(C,C,H),ii(R,R,H),ii(L,L,H),ii(D,D,H),h[0]=Zc(h[0],L,a),h[1]=Zc(h[1],D,a),h[2]=Zc(h[2],R,a),h[3]=Zc(h[3],C,a),co.fromPoints(h)}function YE(i,n,a){for(const u of i)ii(u,u,n),Qo(u,u,a)}function pk(i,n,a){const u=n/i.worldSize,h=i.globeMatrix;if(a.z<=1){const Ze=Ts(a).getCorners();return YE(Ze,h,u),co.fromPoints(Ze)}const m=bg(a),v=P_(m);YE(v,h,u);const x=Number.MAX_VALUE,S=[-x,-x,-x],C=[x,x,x];if(m.contains(i.center)){for(const Rt of v)Cf(C,C,Rt),Tf(S,S,Rt);S[2]=0;const Ze=i.point,at=[Ze.x*u,Ze.y*u,0];return Cf(C,C,at),Tf(S,S,at),new co(C,S)}const R=[h[12]*u,h[13]*u,h[14]*u],L=m.getCenter(),D=pe(i.center.lat,-Wi,Wi),H=pe(L.lat,-Wi,Wi),G=Is(i.center.lng),Y=Ms(D);let ae=G-Is(L.lng);const ve=Y-Ms(H);ae>.5?ae-=1:ae<-.5&&(ae+=1);let Te=0;Math.abs(ae)>Math.abs(ve)?Te=ae>=0?1:3:(Te=ve>=0?0:2,If(R,R,[h[4]*u,h[5]*u,h[6]*u],-Math.sin(oe(ve>=0?m.getSouth():m.getNorth()))*Cs));const ye=v[Te],Ce=v[(Te+1)%4],Ae=new fk(ye,Ce,R),Pe=[M_(Ae,0)||ye[0],M_(Ae,1)||ye[1],M_(Ae,2)||ye[2]],Ye=dd(i.zoom);if(Ye>0){const Ze=function({x:Rt,y:tt,z:pt},mt,_t,$t,it){const Wt=1/(1<<pt);let tn=Rt*Wt,qt=tn+Wt,Ln=tt*Wt,Ft=Ln+Wt,fn=0;const Dn=(tn+qt)/2-$t;return Dn>.5?fn=-1:Dn<-.5&&(fn=1),tn=((tn+fn)*mt-($t*=mt))*_t+$t,qt=((qt+fn)*mt-$t)*_t+$t,Ln=(Ln*mt-(it*=mt))*_t+it,Ft=(Ft*mt-it)*_t+it,[[tn,Ft,0],[qt,Ft,0],[qt,Ln,0],[tn,Ln,0]]}(a,n,i._pixelsPerMercatorPixel,G,Y);for(let Rt=0;Rt<v.length;Rt++)Zc(v[Rt],Ze[Rt],Ye);const at=Qs([],Ze[Te],Ze[(Te+1)%4]);Qo(at,at,.5),Zc(Pe,at,Ye)}for(const Ze of v)Cf(C,C,Ze),Tf(S,S,Ze);return C[2]=Math.min(ye[2],Ce[2]),Cf(C,C,Pe),Tf(S,S,Pe),new co(C,S)}function bg({x:i,y:n,z:a}){const u=1/(1<<a),h=new wr(ea(i*u),Gi((n+1)*u)),m=new wr(ea((i+1)*u),Gi(n*u));return new Ul(h,m)}function P_(i){const n=oe(i.getNorth()),a=oe(i.getSouth()),u=Math.cos(n),h=Math.cos(a),m=Math.sin(n),v=Math.sin(a),x=i.getWest(),S=i.getEast();return[cd(h,v,x),cd(h,v,S),cd(u,m,S),cd(u,m,x)]}function cd(i,n,a,u=Cs){return a=oe(a),[i*Math.sin(a)*u,-n*u,i*Math.cos(a)*u]}function ud(i,n,a){return cd(Math.cos(oe(i)),Math.sin(oe(i)),n,a)}function Rf(i,n,a,u){const h=1<<a.z,m=(i/gn+a.x)/h;return ud(Gi((n/gn+a.y)/h),ea(m),u)}function wg({min:i,max:n}){return dk/Math.max(n[0]-i[0],n[1]-i[1],n[2]-i[2])}const JE=new Float64Array(16);function Of(i){const n=wg(i),a=DE(JE,[n,n,n]);return Sf(a,a,((u=[])[0]=-(h=i.min)[0],u[1]=-h[1],u[2]=-h[2],u));var u,h}function A_(i){const n=(u=i.min,(a=JE)[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=u[0],a[13]=u[1],a[14]=u[2],a[15]=1,a);var a,u;const h=1/wg(i);return Gc(n,n,[h,h,h])}function QE(i,n,a,u,h){const m=function(S){const C=gn/(2*Math.PI);return S/(2*Math.PI)/C}(a),v=[i,n,-a/(2*Math.PI)],x=Ya(new Float64Array(16));return Sf(x,x,v),Gc(x,x,[m,m,m]),x_(x,x,oe(-h)),_g(x,x,oe(-u)),x}function dd(i){return He(I_,ZE,i)}function eC(i,n){const a=ud(n.lat,n.lng),u=function(G){const Y=ud(G._center.lat,G._center.lng);let ae=S_([],ld(0,1,0),Y);const ve=kE([],-G.angle,Y);ae=ii(ae,ae,ve),kE(ve,-G._pitch,ae);const Te=lo([],Y);return Qo(Te,Te,xg(G.cameraToCenterDistance/G.pixelsPerMeter)),ii(Te,Te,ve),Qs([],Y,Te)}(i);return v=(h=w_([],u,a))[0],x=h[1],S=h[2],C=(m=a)[0],R=m[1],L=m[2],H=(D=Math.sqrt(v*v+x*x+S*S)*Math.sqrt(C*C+R*R+L*L))&&wa(h,m)/D,Math.acos(Math.min(Math.max(H,-1),1));var h,m,v,x,S,C,R,L,D,H}function R_(i,n){return eC(i,n)>Math.PI/2*1.01}const tC=oe(85),mk=Math.cos(tC),gk=Math.sin(tC),zf=63710088e-1,nC=2*Math.PI*zf;class Vl{constructor(n,a){if(isNaN(n)||isNaN(a))throw new Error(`Invalid LngLat object: (${n}, ${a})`);if(this.lng=+n,this.lat=+a,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Vl(Be(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(n){const a=Math.PI/180,u=this.lat*a,h=n.lat*a,m=Math.sin(u)*Math.sin(h)+Math.cos(u)*Math.cos(h)*Math.cos((n.lng-this.lng)*a);return zf*Math.acos(Math.min(m,1))}toBounds(n=0){const a=360*n/40075017,u=a/Math.cos(Math.PI/180*this.lat);return new Ul(new Vl(this.lng-u,this.lat-a),new Vl(this.lng+u,this.lat+a))}toEcef(n){const a=xg(n);return ud(this.lat,this.lng,Cs+a)}static convert(n){if(n instanceof Vl)return n;if(Array.isArray(n)&&(n.length===2||n.length===3))return new Vl(Number(n[0]),Number(n[1]));if(!Array.isArray(n)&&typeof n=="object"&&n!==null)return new Vl(Number("lng"in n?n.lng:n.lon),Number(n.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}var wr=Vl;function O_(i){return nC*Math.cos(i*Math.PI/180)}function Is(i){return(180+i)/360}function Ms(i){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+i*Math.PI/360)))/360}function Qa(i,n){return i/O_(n)}function ea(i){return 360*i-180}function Gi(i){return 360/Math.PI*Math.atan(Math.exp((180-360*i)*Math.PI/180))-90}function rC(i,n){return i*O_(Gi(n))}const Wi=85.051129;function iC(i){return 1/Math.cos(i*Math.PI/180)}class hd{constructor(n,a,u=0){this.x=+n,this.y=+a,this.z=+u}static fromLngLat(n,a=0){const u=wr.convert(n);return new hd(Is(u.lng),Ms(u.lat),Qa(a,u.lat))}toLngLat(){return new wr(ea(this.x),Gi(this.y))}toAltitude(){return rC(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/nC*iC(Gi(this.y))}}function z_(i,n,a,u,h,m,v,x,S){const C=(n+u)/2,R=(a+h)/2,L=new te(C,R);x(L),function(D,H,G,Y,ae,ve){const Te=G-ae,ye=Y-ve;return Math.abs((Y-H)*Te-(G-D)*ye)/Math.hypot(Te,ye)}(L.x,L.y,m.x,m.y,v.x,v.y)>=S?(z_(i,n,a,C,R,m,L,x,S),z_(i,C,R,u,h,L,v,x,S)):i.push(v)}function oC(i,n,a){let u=i[0],h=u.x,m=u.y;n(u);const v=[u];for(let x=1;x<i.length;x++){const S=i[x],{x:C,y:R}=S;n(S),z_(v,h,m,C,R,u,S,n,a),h=C,m=R,u=S}return v}function L_(i,n,a,u){if(u(n,a)){const h=n.add(a)._mult(.5);L_(i,n,h,u),L_(i,h,a,u)}else i.push(a)}function vk(i,n){let a=i[0];const u=[a];for(let h=1;h<i.length;h++){const m=i[h];L_(u,a,m,n),a=m}return u}const D_=Math.pow(2,14)-1,aC=-D_-1;function yk(i,n){const a=Math.round(i.x*n),u=Math.round(i.y*n);return i.x=pe(a,aC,D_),i.y=pe(u,aC,D_),(a<i.x||a>i.x+1||u<i.y||u>i.y+1)&&Ct("Geometry exceeds allowed extent, reduce your vector tile buffer size"),i}function el(i,n,a){const u=i.loadGeometry(),h=i.extent,m=gn/h;if(n&&a&&a.projection.isReprojectedInTileSpace){const v=1<<n.z,{scale:x,x:S,y:C,projection:R}=a,L=D=>{const H=ea((n.x+D.x/h)/v),G=Gi((n.y+D.y/h)/v),Y=R.project(H,G);D.x=(Y.x*x-S)*h,D.y=(Y.y*x-C)*h};for(let D=0;D<u.length;D++)if(i.type!==1)u[D]=oC(u[D],L,1);else{const H=[];for(const G of u[D])G.x<0||G.x>=h||G.y<0||G.y>=h||(L(G),H.push(G));u[D]=H}}for(const v of u)for(const x of v)yk(x,m);return u}function Xc(i,n){return{type:i.type,id:i.id,properties:i.properties,geometry:n?el(i):[]}}function Sg(i,n,a,u,h){i.emplaceBack(2*n+(u+1)/2,2*a+(h+1)/2)}function Eg(i,n,a){i.emplaceBack(n.x,n.y,n.z,a[0]*16384,a[1]*16384,a[2]*16384)}class k_{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(a=>a.id),this.index=n.index,this.hasPattern=!1,this.projection=n.projection,this.layoutVertexArray=new At,this.indexArray=new cn,this.segments=new si,this.programConfigurations=new Vc(n.layers,n.zoom),this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(n,a,u,h){const m=this.layers[0],v=[];let x=null;m.type==="circle"&&(x=m.layout.get("circle-sort-key"));for(const{feature:C,id:R,index:L,sourceLayerIndex:D}of n){const H=this.layers[0]._featureFilter.needGeometry,G=Xc(C,H);if(!this.layers[0]._featureFilter.filter(new O(this.zoom),G,u))continue;const Y=x?x.evaluate(G,{},u):void 0,ae={id:R,properties:C.properties,type:C.type,sourceLayerIndex:D,index:L,geometry:H?G.geometry:el(C,u,h),patterns:{},sortKey:Y};v.push(ae)}x&&v.sort((C,R)=>C.sortKey-R.sortKey);let S=null;h.projection.name==="globe"&&(this.globeExtVertexArray=new Lt,S=h.projection);for(const C of v){const{geometry:R,index:L,sourceLayerIndex:D}=C,H=n[L].feature;this.addFeature(C,R,L,a.availableImages,u,S),a.featureIndex.insert(H,R,L,D,this.index)}}update(n,a,u,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,a,this.stateDependentLayers,u,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,ik.members),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=n.createVertexBuffer(this.globeExtVertexArray,ok.members))),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(n,a,u,h,m,v){for(const x of a)for(const S of x){const C=S.x,R=S.y;if(C<0||C>=gn||R<0||R>=gn)continue;if(v){const H=v.projectTilePoint(C,R,m),G=v.upVector(m,C,R),Y=this.globeExtVertexArray;Eg(Y,H,G),Eg(Y,H,G),Eg(Y,H,G),Eg(Y,H,G)}const L=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,n.sortKey),D=L.vertexLength;Sg(this.layoutVertexArray,C,R,-1,-1),Sg(this.layoutVertexArray,C,R,1,-1),Sg(this.layoutVertexArray,C,R,1,1),Sg(this.layoutVertexArray,C,R,-1,1),this.indexArray.emplaceBack(D,D+1,D+2),this.indexArray.emplaceBack(D,D+2,D+3),L.vertexLength+=4,L.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,u,{},h,m)}}function sC(i,n){for(let a=0;a<i.length;a++)if(Kc(n,i[a]))return!0;for(let a=0;a<n.length;a++)if(Kc(i,n[a]))return!0;return!!$_(i,n)}function _k(i,n,a){return!!Kc(i,n)||!!F_(n,i,a)}function lC(i,n){if(i.length===1)return uC(n,i[0]);for(let a=0;a<n.length;a++){const u=n[a];for(let h=0;h<u.length;h++)if(Kc(i,u[h]))return!0}for(let a=0;a<i.length;a++)if(uC(n,i[a]))return!0;for(let a=0;a<n.length;a++)if($_(i,n[a]))return!0;return!1}function xk(i,n,a){if(i.length>1){if($_(i,n))return!0;for(let u=0;u<n.length;u++)if(F_(n[u],i,a))return!0}for(let u=0;u<i.length;u++)if(F_(i[u],n,a))return!0;return!1}function $_(i,n){if(i.length===0||n.length===0)return!1;for(let a=0;a<i.length-1;a++){const u=i[a],h=i[a+1];for(let m=0;m<n.length-1;m++)if(bk(u,h,n[m],n[m+1]))return!0}return!1}function bk(i,n,a,u){return Qt(i,a,u)!==Qt(n,a,u)&&Qt(i,n,a)!==Qt(i,n,u)}function F_(i,n,a){const u=a*a;if(n.length===1)return i.distSqr(n[0])<u;for(let h=1;h<n.length;h++)if(cC(i,n[h-1],n[h])<u)return!0;return!1}function cC(i,n,a){const u=n.distSqr(a);if(u===0)return i.distSqr(n);const h=((i.x-n.x)*(a.x-n.x)+(i.y-n.y)*(a.y-n.y))/u;return i.distSqr(h<0?n:h>1?a:a.sub(n)._mult(h)._add(n))}function uC(i,n){let a,u,h,m=!1;for(let v=0;v<i.length;v++){a=i[v];for(let x=0,S=a.length-1;x<a.length;S=x++)u=a[x],h=a[S],u.y>n.y!=h.y>n.y&&n.x<(h.x-u.x)*(n.y-u.y)/(h.y-u.y)+u.x&&(m=!m)}return m}function Kc(i,n){let a=!1;for(let u=0,h=i.length-1;u<i.length;h=u++){const m=i[u],v=i[h];m.y>n.y!=v.y>n.y&&n.x<(v.x-m.x)*(n.y-m.y)/(v.y-m.y)+m.x&&(a=!a)}return a}function dC(i,n,a,u,h){for(const v of i)if(n<=v.x&&a<=v.y&&u>=v.x&&h>=v.y)return!0;const m=[new te(n,a),new te(n,h),new te(u,h),new te(u,a)];if(i.length>2){for(const v of m)if(Kc(i,v))return!0}for(let v=0;v<i.length-1;v++)if(wk(i[v],i[v+1],m))return!0;return!1}function wk(i,n,a){const u=a[0],h=a[2];if(i.x<u.x&&n.x<u.x||i.x>h.x&&n.x>h.x||i.y<u.y&&n.y<u.y||i.y>h.y&&n.y>h.y)return!1;const m=Qt(i,n,a[0]);return m!==Qt(i,n,a[1])||m!==Qt(i,n,a[2])||m!==Qt(i,n,a[3])}function fd(i,n,a){const u=n.paint.get(i).value;return u.kind==="constant"?u.value:a.programConfigurations.get(n.id).getMaxValue(i)}function Cg(i){return Math.sqrt(i[0]*i[0]+i[1]*i[1])}function hC(i,n,a,u,h){if(!n[0]&&!n[1])return i;const m=te.convert(n)._mult(h);a==="viewport"&&m._rotate(-u);const v=[];for(let x=0;x<i.length;x++)v.push(i[x].sub(m));return v}function fC(i,n,a,u){const h=te.convert(i)._mult(u);return n==="viewport"&&h._rotate(-a),h}Jt(k_,"CircleBucket",{omit:["layers"]});const Sk=new be({"circle-sort-key":new se(nt.layout_circle["circle-sort-key"])});var Ek={paint:new be({"circle-radius":new se(nt.paint_circle["circle-radius"]),"circle-color":new se(nt.paint_circle["circle-color"]),"circle-blur":new se(nt.paint_circle["circle-blur"]),"circle-opacity":new se(nt.paint_circle["circle-opacity"]),"circle-translate":new K(nt.paint_circle["circle-translate"]),"circle-translate-anchor":new K(nt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new K(nt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new K(nt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new se(nt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new se(nt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new se(nt.paint_circle["circle-stroke-opacity"])}),layout:Sk};function pC(i,n,a,u,h,m,v,x,S){if(m&&i.queryGeometry.isAboveHorizon)return!1;m&&(S*=i.pixelToTileUnitsFactor);const C=i.tileID.canonical,R=a.projection.upVectorScale(C,a.center.lat,a.worldSize).metersToTile;for(const L of n)for(const D of L){const H=D.add(x),G=h&&a.elevation?a.elevation.exaggeration()*h.getElevationAt(H.x,H.y,!0):0,Y=a.projection.projectTilePoint(H.x,H.y,C);if(G>0){const ye=a.projection.upVector(C,H.x,H.y);Y.x+=ye[0]*R*G,Y.y+=ye[1]*R*G,Y.z+=ye[2]*R*G}const ae=m?H:Ck(Y.x,Y.y,Y.z,u),ve=m?i.tilespaceRays.map(ye=>Ik(ye,G)):i.queryGeometry.screenGeometry,Te=Wc([],[Y.x,Y.y,Y.z,1],u);if(!v&&m?S*=Te[3]/a.cameraToCenterDistance:v&&!m&&(S*=a.cameraToCenterDistance/Te[3]),m){const ye=Gi((D.y/gn+C.y)/(1<<C.z));S/=a.projection.pixelsPerMeter(ye,1)/Qa(1,ye)}if(_k(ve,ae,S))return!0}return!1}function Ck(i,n,a,u){const h=Wc([],[i,n,a,1],u);return new te(h[0]/h[3],h[1]/h[3])}const mC=ld(0,0,0),Tk=ld(0,0,1);function Ik(i,n){const a=b_();return mC[2]=n,i.intersectsPlane(mC,Tk,a),new te(a[0],a[1])}class gC extends k_{}function vC(i,{width:n,height:a},u,h){if(h){if(h instanceof Uint8ClampedArray)h=new Uint8Array(h.buffer);else if(h.length!==n*a*u)throw new RangeError("mismatched image size")}else h=new Uint8Array(n*a*u);return i.width=n,i.height=a,i.data=h,i}function yC(i,n,a){const{width:u,height:h}=n;u===i.width&&h===i.height||(B_(i,n,{x:0,y:0},{x:0,y:0},{width:Math.min(i.width,u),height:Math.min(i.height,h)},a),i.width=u,i.height=h,i.data=n.data)}function B_(i,n,a,u,h,m){if(h.width===0||h.height===0)return n;if(h.width>i.width||h.height>i.height||a.x>i.width-h.width||a.y>i.height-h.height)throw new RangeError("out of range source coordinates for image copy");if(h.width>n.width||h.height>n.height||u.x>n.width-h.width||u.y>n.height-h.height)throw new RangeError("out of range destination coordinates for image copy");const v=i.data,x=n.data;for(let S=0;S<h.height;S++){const C=((a.y+S)*i.width+a.x)*m,R=((u.y+S)*n.width+u.x)*m;for(let L=0;L<h.width*m;L++)x[R+L]=v[C+L]}return n}Jt(gC,"HeatmapBucket",{omit:["layers"]});class tl{constructor(n,a){vC(this,n,1,a)}resize(n){yC(this,new tl(n),1)}clone(){return new tl({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,a,u,h,m){B_(n,a,u,h,m,1)}}class $o{constructor(n,a){vC(this,n,4,a)}resize(n){yC(this,new $o(n),4)}replace(n,a){a?this.data.set(n):this.data=n instanceof Uint8ClampedArray?new Uint8Array(n.buffer):n}clone(){return new $o({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,a,u,h,m){B_(n,a,u,h,m,4)}}Jt(tl,"AlphaImage"),Jt($o,"RGBAImage");var Mk={paint:new be({"heatmap-radius":new se(nt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new se(nt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new K(nt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new xe(nt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new K(nt.paint_heatmap["heatmap-opacity"])})};function N_(i){const n={},a=i.resolution||256,u=i.clips?i.clips.length:1,h=i.image||new $o({width:a,height:u}),m=(v,x,S)=>{n[i.evaluationKey]=S;const C=i.expression.evaluate(n);h.data[v+x+0]=Math.floor(255*C.r/C.a),h.data[v+x+1]=Math.floor(255*C.g/C.a),h.data[v+x+2]=Math.floor(255*C.b/C.a),h.data[v+x+3]=Math.floor(255*C.a)};if(i.clips)for(let v=0,x=0;v<u;++v,x+=4*a)for(let S=0,C=0;S<a;S++,C+=4){const R=S/(a-1),{start:L,end:D}=i.clips[v];m(x,C,L*(1-R)+D*R)}else for(let v=0,x=0;v<a;v++,x+=4)m(0,x,v/(a-1));return h}var Pk={paint:new be({"hillshade-illumination-direction":new K(nt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new K(nt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new K(nt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new K(nt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new K(nt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new K(nt.paint_hillshade["hillshade-accent-color"])})};const Ak=Ue([{name:"a_pos",components:2,type:"Int16"}],4),{members:Rk}=Ak;var j_={exports:{}};function Tg(i,n,a){a=a||2;var u,h,m,v,x,S,C,R=n&&n.length,L=R?n[0]*a:i.length,D=_C(i,0,L,a,!0),H=[];if(!D||D.next===D.prev)return H;if(R&&(D=function(Y,ae,ve,Te){var ye,Ce,Ae,Pe=[];for(ye=0,Ce=ae.length;ye<Ce;ye++)(Ae=_C(Y,ae[ye]*Te,ye<Ce-1?ae[ye+1]*Te:Y.length,Te,!1))===Ae.next&&(Ae.steiner=!0),Pe.push(Bk(Ae));for(Pe.sort(kk),ye=0;ye<Pe.length;ye++)ve=$k(Pe[ye],ve);return ve}(i,n,D,a)),i.length>80*a){u=m=i[0],h=v=i[1];for(var G=a;G<L;G+=a)(x=i[G])<u&&(u=x),(S=i[G+1])<h&&(h=S),x>m&&(m=x),S>v&&(v=S);C=(C=Math.max(m-u,v-h))!==0?32767/C:0}return Lf(D,H,a,u,h,C,0),H}function _C(i,n,a,u,h){var m,v;if(h===H_(i,n,a,u)>0)for(m=n;m<a;m+=u)v=wC(m,i[m],i[m+1],v);else for(m=a-u;m>=n;m-=u)v=wC(m,i[m],i[m+1],v);return v&&Ig(v,v.next)&&(kf(v),v=v.next),v}function Yc(i,n){if(!i)return i;n||(n=i);var a,u=i;do if(a=!1,u.steiner||!Ig(u,u.next)&&li(u.prev,u,u.next)!==0)u=u.next;else{if(kf(u),(u=n=u.prev)===u.next)break;a=!0}while(a||u!==n);return n}function Lf(i,n,a,u,h,m,v){if(i){!v&&m&&function(R,L,D,H){var G=R;do G.z===0&&(G.z=U_(G.x,G.y,L,D,H)),G.prevZ=G.prev,G.nextZ=G.next,G=G.next;while(G!==R);G.prevZ.nextZ=null,G.prevZ=null,function(Y){var ae,ve,Te,ye,Ce,Ae,Pe,Ye,Ze=1;do{for(ve=Y,Y=null,Ce=null,Ae=0;ve;){for(Ae++,Te=ve,Pe=0,ae=0;ae<Ze&&(Pe++,Te=Te.nextZ);ae++);for(Ye=Ze;Pe>0||Ye>0&&Te;)Pe!==0&&(Ye===0||!Te||ve.z<=Te.z)?(ye=ve,ve=ve.nextZ,Pe--):(ye=Te,Te=Te.nextZ,Ye--),Ce?Ce.nextZ=ye:Y=ye,ye.prevZ=Ce,Ce=ye;ve=Te}Ce.nextZ=null,Ze*=2}while(Ae>1)}(G)}(i,u,h,m);for(var x,S,C=i;i.prev!==i.next;)if(x=i.prev,S=i.next,m?zk(i,u,h,m):Ok(i))n.push(x.i/a|0),n.push(i.i/a|0),n.push(S.i/a|0),kf(i),i=S.next,C=S.next;else if((i=S)===C){v?v===1?Lf(i=Lk(Yc(i),n,a),n,a,u,h,m,2):v===2&&Dk(i,n,a,u,h,m):Lf(Yc(i),n,a,u,h,m,1);break}}}function Ok(i){var n=i.prev,a=i,u=i.next;if(li(n,a,u)>=0)return!1;for(var h=n.x,m=a.x,v=u.x,x=n.y,S=a.y,C=u.y,R=h<m?h<v?h:v:m<v?m:v,L=x<S?x<C?x:C:S<C?S:C,D=h>m?h>v?h:v:m>v?m:v,H=x>S?x>C?x:C:S>C?S:C,G=u.next;G!==n;){if(G.x>=R&&G.x<=D&&G.y>=L&&G.y<=H&&pd(h,x,m,S,v,C,G.x,G.y)&&li(G.prev,G,G.next)>=0)return!1;G=G.next}return!0}function zk(i,n,a,u){var h=i.prev,m=i,v=i.next;if(li(h,m,v)>=0)return!1;for(var x=h.x,S=m.x,C=v.x,R=h.y,L=m.y,D=v.y,H=x<S?x<C?x:C:S<C?S:C,G=R<L?R<D?R:D:L<D?L:D,Y=x>S?x>C?x:C:S>C?S:C,ae=R>L?R>D?R:D:L>D?L:D,ve=U_(H,G,n,a,u),Te=U_(Y,ae,n,a,u),ye=i.prevZ,Ce=i.nextZ;ye&&ye.z>=ve&&Ce&&Ce.z<=Te;){if(ye.x>=H&&ye.x<=Y&&ye.y>=G&&ye.y<=ae&&ye!==h&&ye!==v&&pd(x,R,S,L,C,D,ye.x,ye.y)&&li(ye.prev,ye,ye.next)>=0||(ye=ye.prevZ,Ce.x>=H&&Ce.x<=Y&&Ce.y>=G&&Ce.y<=ae&&Ce!==h&&Ce!==v&&pd(x,R,S,L,C,D,Ce.x,Ce.y)&&li(Ce.prev,Ce,Ce.next)>=0))return!1;Ce=Ce.nextZ}for(;ye&&ye.z>=ve;){if(ye.x>=H&&ye.x<=Y&&ye.y>=G&&ye.y<=ae&&ye!==h&&ye!==v&&pd(x,R,S,L,C,D,ye.x,ye.y)&&li(ye.prev,ye,ye.next)>=0)return!1;ye=ye.prevZ}for(;Ce&&Ce.z<=Te;){if(Ce.x>=H&&Ce.x<=Y&&Ce.y>=G&&Ce.y<=ae&&Ce!==h&&Ce!==v&&pd(x,R,S,L,C,D,Ce.x,Ce.y)&&li(Ce.prev,Ce,Ce.next)>=0)return!1;Ce=Ce.nextZ}return!0}function Lk(i,n,a){var u=i;do{var h=u.prev,m=u.next.next;!Ig(h,m)&&xC(h,u,u.next,m)&&Df(h,m)&&Df(m,h)&&(n.push(h.i/a|0),n.push(u.i/a|0),n.push(m.i/a|0),kf(u),kf(u.next),u=i=m),u=u.next}while(u!==i);return Yc(u)}function Dk(i,n,a,u,h,m){var v=i;do{for(var x=v.next.next;x!==v.prev;){if(v.i!==x.i&&Nk(v,x)){var S=bC(v,x);return v=Yc(v,v.next),S=Yc(S,S.next),Lf(v,n,a,u,h,m,0),void Lf(S,n,a,u,h,m,0)}x=x.next}v=v.next}while(v!==i)}function kk(i,n){return i.x-n.x}function $k(i,n){var a=function(h,m){var v,x=m,S=h.x,C=h.y,R=-1/0;do{if(C<=x.y&&C>=x.next.y&&x.next.y!==x.y){var L=x.x+(C-x.y)*(x.next.x-x.x)/(x.next.y-x.y);if(L<=S&&L>R&&(R=L,v=x.x<x.next.x?x:x.next,L===S))return v}x=x.next}while(x!==m);if(!v)return null;var D,H=v,G=v.x,Y=v.y,ae=1/0;x=v;do S>=x.x&&x.x>=G&&S!==x.x&&pd(C<Y?S:R,C,G,Y,C<Y?R:S,C,x.x,x.y)&&(D=Math.abs(C-x.y)/(S-x.x),Df(x,h)&&(D<ae||D===ae&&(x.x>v.x||x.x===v.x&&Fk(v,x)))&&(v=x,ae=D)),x=x.next;while(x!==H);return v}(i,n);if(!a)return n;var u=bC(a,i);return Yc(u,u.next),Yc(a,a.next)}function Fk(i,n){return li(i.prev,i,n.prev)<0&&li(n.next,i,i.next)<0}function U_(i,n,a,u,h){return(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=(i-a)*h|0)|i<<8))|i<<4))|i<<2))|i<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=(n-u)*h|0)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function Bk(i){var n=i,a=i;do(n.x<a.x||n.x===a.x&&n.y<a.y)&&(a=n),n=n.next;while(n!==i);return a}function pd(i,n,a,u,h,m,v,x){return(h-v)*(n-x)>=(i-v)*(m-x)&&(i-v)*(u-x)>=(a-v)*(n-x)&&(a-v)*(m-x)>=(h-v)*(u-x)}function Nk(i,n){return i.next.i!==n.i&&i.prev.i!==n.i&&!function(a,u){var h=a;do{if(h.i!==a.i&&h.next.i!==a.i&&h.i!==u.i&&h.next.i!==u.i&&xC(h,h.next,a,u))return!0;h=h.next}while(h!==a);return!1}(i,n)&&(Df(i,n)&&Df(n,i)&&function(a,u){var h=a,m=!1,v=(a.x+u.x)/2,x=(a.y+u.y)/2;do h.y>x!=h.next.y>x&&h.next.y!==h.y&&v<(h.next.x-h.x)*(x-h.y)/(h.next.y-h.y)+h.x&&(m=!m),h=h.next;while(h!==a);return m}(i,n)&&(li(i.prev,i,n.prev)||li(i,n.prev,n))||Ig(i,n)&&li(i.prev,i,i.next)>0&&li(n.prev,n,n.next)>0)}function li(i,n,a){return(n.y-i.y)*(a.x-n.x)-(n.x-i.x)*(a.y-n.y)}function Ig(i,n){return i.x===n.x&&i.y===n.y}function xC(i,n,a,u){var h=Pg(li(i,n,a)),m=Pg(li(i,n,u)),v=Pg(li(a,u,i)),x=Pg(li(a,u,n));return h!==m&&v!==x||!(h!==0||!Mg(i,a,n))||!(m!==0||!Mg(i,u,n))||!(v!==0||!Mg(a,i,u))||!(x!==0||!Mg(a,n,u))}function Mg(i,n,a){return n.x<=Math.max(i.x,a.x)&&n.x>=Math.min(i.x,a.x)&&n.y<=Math.max(i.y,a.y)&&n.y>=Math.min(i.y,a.y)}function Pg(i){return i>0?1:i<0?-1:0}function Df(i,n){return li(i.prev,i,i.next)<0?li(i,n,i.next)>=0&&li(i,i.prev,n)>=0:li(i,n,i.prev)<0||li(i,i.next,n)<0}function bC(i,n){var a=new V_(i.i,i.x,i.y),u=new V_(n.i,n.x,n.y),h=i.next,m=n.prev;return i.next=n,n.prev=i,a.next=h,h.prev=a,u.next=a,a.prev=u,m.next=u,u.prev=m,u}function wC(i,n,a,u){var h=new V_(i,n,a);return u?(h.next=u.next,h.prev=u,u.next.prev=h,u.next=h):(h.prev=h,h.next=h),h}function kf(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function V_(i,n,a){this.i=i,this.x=n,this.y=a,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function H_(i,n,a,u){for(var h=0,m=n,v=a-u;m<a;m+=u)h+=(i[v]-i[m])*(i[m+1]+i[v+1]),v=m;return h}j_.exports=Tg,j_.exports.default=Tg,Tg.deviation=function(i,n,a,u){var h=n&&n.length,m=Math.abs(H_(i,0,h?n[0]*a:i.length,a));if(h)for(var v=0,x=n.length;v<x;v++)m-=Math.abs(H_(i,n[v]*a,v<x-1?n[v+1]*a:i.length,a));var S=0;for(v=0;v<u.length;v+=3){var C=u[v]*a,R=u[v+1]*a,L=u[v+2]*a;S+=Math.abs((i[C]-i[L])*(i[R+1]-i[C+1])-(i[C]-i[R])*(i[L+1]-i[C+1]))}return m===0&&S===0?0:Math.abs((S-m)/m)},Tg.flatten=function(i){for(var n=i[0][0].length,a={vertices:[],holes:[],dimensions:n},u=0,h=0;h<i.length;h++){for(var m=0;m<i[h].length;m++)for(var v=0;v<n;v++)a.vertices.push(i[h][m][v]);h>0&&a.holes.push(u+=i[h-1].length)}return a};var G_=V(j_.exports);function jk(i,n,a,u,h){SC(i,n,a||0,u||i.length-1,h||Uk)}function SC(i,n,a,u,h){for(;u>a;){if(u-a>600){var m=u-a+1,v=n-a+1,x=Math.log(m),S=.5*Math.exp(2*x/3),C=.5*Math.sqrt(x*S*(m-S)/m)*(v-m/2<0?-1:1);SC(i,n,Math.max(a,Math.floor(n-v*S/m+C)),Math.min(u,Math.floor(n+(m-v)*S/m+C)),h)}var R=i[n],L=a,D=u;for($f(i,a,n),h(i[u],R)>0&&$f(i,a,u);L<D;){for($f(i,L,D),L++,D--;h(i[L],R)<0;)L++;for(;h(i[D],R)>0;)D--}h(i[a],R)===0?$f(i,a,D):$f(i,++D,u),D<=n&&(a=D+1),n<=D&&(u=D-1)}}function $f(i,n,a){var u=i[n];i[n]=i[a],i[a]=u}function Uk(i,n){return i<n?-1:i>n?1:0}function W_(i,n){const a=i.length;if(a<=1)return[i];const u=[];let h,m;for(let v=0;v<a;v++){const x=Vt(i[v]);x!==0&&(i[v].area=Math.abs(x),m===void 0&&(m=x<0),m===x<0?(h&&u.push(h),h=[i[v]]):h.push(i[v]))}if(h&&u.push(h),n>1)for(let v=0;v<u.length;v++)u[v].length<=n||(jk(u[v],n,1,u[v].length-1,Vk),u[v]=u[v].slice(0,n));return u}function Vk(i,n){return n.area-i.area}function q_(i,n,a){const u=a.patternDependencies;let h=!1;for(const m of n){const v=m.paint.get(`${i}-pattern`);v.isConstant()||(h=!0);const x=v.constantOr(null);x&&(h=!0,u[x]=!0)}return h}function Z_(i,n,a,u,h){const m=h.patternDependencies;for(const v of n){const x=v.paint.get(`${i}-pattern`).value;if(x.kind!=="constant"){let S=x.evaluate({zoom:u},a,{},h.availableImages);S=S&&S.name?S.name:S,m[S]=!0,a.patterns[v.id]=S}}return a}class Ag{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(a=>a.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new At,this.indexArray=new cn,this.indexArray2=new Ti,this.programConfigurations=new Vc(n.layers,n.zoom),this.segments=new si,this.segments2=new si,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id),this.projection=n.projection}populate(n,a,u,h){this.hasPattern=q_("fill",this.layers,a);const m=this.layers[0].layout.get("fill-sort-key"),v=[];for(const{feature:x,id:S,index:C,sourceLayerIndex:R}of n){const L=this.layers[0]._featureFilter.needGeometry,D=Xc(x,L);if(!this.layers[0]._featureFilter.filter(new O(this.zoom),D,u))continue;const H=m?m.evaluate(D,{},u,a.availableImages):void 0,G={id:S,properties:x.properties,type:x.type,sourceLayerIndex:R,index:C,geometry:L?D.geometry:el(x,u,h),patterns:{},sortKey:H};v.push(G)}m&&v.sort((x,S)=>x.sortKey-S.sortKey);for(const x of v){const{geometry:S,index:C,sourceLayerIndex:R}=x;if(this.hasPattern){const L=Z_("fill",this.layers,x,this.zoom,a);this.patternFeatures.push(L)}else this.addFeature(x,S,C,u,{},a.availableImages);a.featureIndex.insert(n[C].feature,S,C,R,this.index)}}update(n,a,u,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,a,this.stateDependentLayers,u,h)}addFeatures(n,a,u,h,m){for(const v of this.patternFeatures)this.addFeature(v,v.geometry,v.index,a,u,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Rk),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.indexBuffer2=n.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(n,a,u,h,m,v=[]){for(const x of W_(a,500)){let S=0;for(const G of x)S+=G.length;const C=this.segments.prepareSegment(S,this.layoutVertexArray,this.indexArray),R=C.vertexLength,L=[],D=[];for(const G of x){if(G.length===0)continue;G!==x[0]&&D.push(L.length/2);const Y=this.segments2.prepareSegment(G.length,this.layoutVertexArray,this.indexArray2),ae=Y.vertexLength;this.layoutVertexArray.emplaceBack(G[0].x,G[0].y),this.indexArray2.emplaceBack(ae+G.length-1,ae),L.push(G[0].x),L.push(G[0].y);for(let ve=1;ve<G.length;ve++)this.layoutVertexArray.emplaceBack(G[ve].x,G[ve].y),this.indexArray2.emplaceBack(ae+ve-1,ae+ve),L.push(G[ve].x),L.push(G[ve].y);Y.vertexLength+=G.length,Y.primitiveLength+=G.length}const H=G_(L,D);for(let G=0;G<H.length;G+=3)this.indexArray.emplaceBack(R+H[G],R+H[G+1],R+H[G+2]);C.vertexLength+=S,C.primitiveLength+=H.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,u,m,v,h)}}Jt(Ag,"FillBucket",{omit:["layers","patternFeatures"]});const Hk=new be({"fill-sort-key":new se(nt.layout_fill["fill-sort-key"])});var Gk={paint:new be({"fill-antialias":new K(nt.paint_fill["fill-antialias"]),"fill-opacity":new se(nt.paint_fill["fill-opacity"]),"fill-color":new se(nt.paint_fill["fill-color"]),"fill-outline-color":new se(nt.paint_fill["fill-outline-color"]),"fill-translate":new K(nt.paint_fill["fill-translate"]),"fill-translate-anchor":new K(nt.paint_fill["fill-translate-anchor"]),"fill-pattern":new se(nt.paint_fill["fill-pattern"])}),layout:Hk};const Wk=Ue([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),qk=Ue([{name:"a_centroid_pos",components:2,type:"Uint16"}]),Zk=Ue([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:Xk}=Wk;var Rg={},Kk=Q,EC=md;function md(i,n,a,u,h){this.properties={},this.extent=a,this.type=0,this._pbf=i,this._geometry=-1,this._keys=u,this._values=h,i.readFields(Yk,this,n)}function Yk(i,n,a){i==1?n.id=a.readVarint():i==2?function(u,h){for(var m=u.readVarint()+u.pos;u.pos<m;){var v=h._keys[u.readVarint()],x=h._values[u.readVarint()];h.properties[v]=x}}(a,n):i==3?n.type=a.readVarint():i==4&&(n._geometry=a.pos)}function Jk(i){for(var n,a,u=0,h=0,m=i.length,v=m-1;h<m;v=h++)u+=((a=i[v]).x-(n=i[h]).x)*(n.y+a.y);return u}md.types=["Unknown","Point","LineString","Polygon"],md.prototype.loadGeometry=function(){var i=this._pbf;i.pos=this._geometry;for(var n,a=i.readVarint()+i.pos,u=1,h=0,m=0,v=0,x=[];i.pos<a;){if(h<=0){var S=i.readVarint();u=7&S,h=S>>3}if(h--,u===1||u===2)m+=i.readSVarint(),v+=i.readSVarint(),u===1&&(n&&x.push(n),n=[]),n.push(new Kk(m,v));else{if(u!==7)throw new Error("unknown command "+u);n&&n.push(n[0].clone())}}return n&&x.push(n),x},md.prototype.bbox=function(){var i=this._pbf;i.pos=this._geometry;for(var n=i.readVarint()+i.pos,a=1,u=0,h=0,m=0,v=1/0,x=-1/0,S=1/0,C=-1/0;i.pos<n;){if(u<=0){var R=i.readVarint();a=7&R,u=R>>3}if(u--,a===1||a===2)(h+=i.readSVarint())<v&&(v=h),h>x&&(x=h),(m+=i.readSVarint())<S&&(S=m),m>C&&(C=m);else if(a!==7)throw new Error("unknown command "+a)}return[v,S,x,C]},md.prototype.toGeoJSON=function(i,n,a){var u,h,m=this.extent*Math.pow(2,a),v=this.extent*i,x=this.extent*n,S=this.loadGeometry(),C=md.types[this.type];function R(H){for(var G=0;G<H.length;G++){var Y=H[G];H[G]=[360*(Y.x+v)/m-180,360/Math.PI*Math.atan(Math.exp((180-360*(Y.y+x)/m)*Math.PI/180))-90]}}switch(this.type){case 1:var L=[];for(u=0;u<S.length;u++)L[u]=S[u][0];R(S=L);break;case 2:for(u=0;u<S.length;u++)R(S[u]);break;case 3:for(S=function(H){var G=H.length;if(G<=1)return[H];for(var Y,ae,ve=[],Te=0;Te<G;Te++){var ye=Jk(H[Te]);ye!==0&&(ae===void 0&&(ae=ye<0),ae===ye<0?(Y&&ve.push(Y),Y=[H[Te]]):Y.push(H[Te]))}return Y&&ve.push(Y),ve}(S),u=0;u<S.length;u++)for(h=0;h<S[u].length;h++)R(S[u][h])}S.length===1?S=S[0]:C="Multi"+C;var D={type:"Feature",geometry:{type:C,coordinates:S},properties:this.properties};return"id"in this&&(D.id=this.id),D};var Qk=EC,CC=TC;function TC(i,n){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=i,this._keys=[],this._values=[],this._features=[],i.readFields(e3,this,n),this.length=this._features.length}function e3(i,n,a){i===15?n.version=a.readVarint():i===1?n.name=a.readString():i===5?n.extent=a.readVarint():i===2?n._features.push(a.pos):i===3?n._keys.push(a.readString()):i===4&&n._values.push(function(u){for(var h=null,m=u.readVarint()+u.pos;u.pos<m;){var v=u.readVarint()>>3;h=v===1?u.readString():v===2?u.readFloat():v===3?u.readDouble():v===4?u.readVarint64():v===5?u.readVarint():v===6?u.readSVarint():v===7?u.readBoolean():null}return h}(a))}TC.prototype.feature=function(i){if(i<0||i>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[i];var n=this._pbf.readVarint()+this._pbf.pos;return new Qk(this._pbf,n,this.extent,this._keys,this._values)};var t3=CC;function n3(i,n,a){if(i===3){var u=new t3(a,a.readVarint()+a.pos);u.length&&(n[u.name]=u)}}var X_=Rg.VectorTile=function(i,n){this.layers=i.readFields(n3,{},n)},Og=Rg.VectorTileFeature=EC;function zg(i,n,a,u){const h=[],m=u===0?(v,x,S,C,R,L)=>{v.push(new te(L,S+(L-x)/(C-x)*(R-S)))}:(v,x,S,C,R,L)=>{v.push(new te(x+(L-S)/(R-S)*(C-x),L))};for(const v of i){const x=[];for(const S of v){if(S.length<=2)continue;const C=[];for(let D=0;D<S.length-1;D++){const H=S[D].x,G=S[D].y,Y=S[D+1].x,ae=S[D+1].y,ve=u===0?H:G,Te=u===0?Y:ae;ve<n?Te>n&&m(C,H,G,Y,ae,n):ve>a?Te<a&&m(C,H,G,Y,ae,a):C.push(S[D]),Te<n&&ve>=n&&m(C,H,G,Y,ae,n),Te>a&&ve<=a&&m(C,H,G,Y,ae,a)}let R=S[S.length-1];const L=u===0?R.x:R.y;L>=n&&L<=a&&C.push(R),C.length&&(R=C[C.length-1],C[0].x===R.x&&C[0].y===R.y||C.push(C[0]),x.push(C))}x.length&&h.push(x)}return h}Rg.VectorTileLayer=CC;const r3=Og.types,i3=Math.pow(2,13);function Ff(i,n,a,u,h,m,v,x){i.emplaceBack((n<<1)+v,(a<<1)+m,(Math.floor(u*i3)<<1)+h,Math.round(x))}function Bf(i,n,a){i.emplaceBack(n.x,n.y,n.z,a[0]*16384,a[1]*16384,a[2]*16384)}class IC{constructor(){this.acc=new te(0,0),this.polyCount=[]}startRing(n){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new te(n.x,n.y),this.max=new te(n.x,n.y))}append(n,a){this.currentPolyCount.edges++,this.acc._add(n);const u=this.min,h=this.max;n.x<u.x?u.x=n.x:n.x>h.x&&(h.x=n.x),n.y<u.y?u.y=n.y:n.y>h.y&&(h.y=n.y),((n.x===0||n.x===gn)&&n.x===a.x)!=((n.y===0||n.y===gn)&&n.y===a.y)&&this.processBorderOverlap(n,a),a.x<0!=n.x<0&&this.addBorderIntersection(0,Jn(a.y,n.y,(0-a.x)/(n.x-a.x))),a.x>gn!=n.x>gn&&this.addBorderIntersection(1,Jn(a.y,n.y,(gn-a.x)/(n.x-a.x))),a.y<0!=n.y<0&&this.addBorderIntersection(2,Jn(a.x,n.x,(0-a.y)/(n.y-a.y))),a.y>gn!=n.y>gn&&this.addBorderIntersection(3,Jn(a.x,n.x,(gn-a.y)/(n.y-a.y)))}addBorderIntersection(n,a){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const u=this.borders[n];a<u[0]&&(u[0]=a),a>u[1]&&(u[1]=a)}processBorderOverlap(n,a){if(n.x===a.x){if(n.y===a.y)return;const u=n.x===0?0:1;this.addBorderIntersection(u,a.y),this.addBorderIntersection(u,n.y)}else{const u=n.y===0?2:3;this.addBorderIntersection(u,a.x),this.addBorderIntersection(u,n.x)}}centroid(){const n=this.polyCount.reduce((a,u)=>a+u.edges,0);return n!==0?this.acc.div(n)._round():new te(0,0)}span(){return new te(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce((n,a)=>n+ +(a[0]!==Number.MAX_VALUE),0)}}class Nf{constructor(n){this.zoom=n.zoom,this.canonical=n.canonical,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(a=>a.id),this.index=n.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=n.projection,this.layoutVertexArray=new ht,this.centroidVertexArray=new Za,this.indexArray=new cn,this.programConfigurations=new Vc(n.layers,n.zoom),this.segments=new si,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id),this.enableTerrain=n.enableTerrain}populate(n,a,u,h){this.features=[],this.hasPattern=q_("fill-extrusion",this.layers,a),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=function(m){const v=Math.exp(Math.PI*(1-m.y/(1<<m.z)*2));return 80150034*v/(v*v+1)/gn/(1<<m.z)}(u),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;for(const{feature:m,id:v,index:x,sourceLayerIndex:S}of n){const C=this.layers[0]._featureFilter.needGeometry,R=Xc(m,C);if(!this.layers[0]._featureFilter.filter(new O(this.zoom),R,u))continue;const L={id:v,sourceLayerIndex:S,index:x,geometry:C?R.geometry:el(m,u,h),properties:m.properties,type:m.type,patterns:{}},D=this.layoutVertexArray.length;this.hasPattern?this.features.push(Z_("fill-extrusion",this.layers,L,this.zoom,a)):this.addFeature(L,L.geometry,x,u,{},a.availableImages,h),a.featureIndex.insert(m,L.geometry,x,S,this.index,D)}this.sortBorders()}addFeatures(n,a,u,h,m){for(const v of this.features){const{geometry:x}=v;this.addFeature(v,x,v.index,a,u,h,m)}this.sortBorders()}update(n,a,u,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,a,this.stateDependentLayers,u,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Xk),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=n.createVertexBuffer(this.layoutVertexExtArray,Zk.members,!0))),this.programConfigurations.upload(n),this.uploaded=!0}uploadCentroid(n){this.centroidVertexArray.length!==0&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=n.createVertexBuffer(this.centroidVertexArray,qk.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(n,a,u,h,m,v,x){const S=[new te(0,0),new te(gn,gn)],C=x.projection,R=C.name==="globe",L=this.enableTerrain&&!R?new IC:null,D=r3[n.type]==="Polygon";R&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new Lt);const H=W_(a,500);for(let ve=H.length-1;ve>=0;ve--){const Te=H[ve];(Te.length===0||(G=Te[0]).every(ye=>ye.x<=0)||G.every(ye=>ye.x>=gn)||G.every(ye=>ye.y<=0)||G.every(ye=>ye.y>=gn))&&H.splice(ve,1)}var G;let Y;if(R)Y=LC(H,S,h);else{Y=[];for(const ve of H)Y.push({polygon:ve,bounds:S})}const ae=D?this.edgeRadius:0;for(const{polygon:ve,bounds:Te}of Y){let ye=0,Ce=0;for(const Pe of ve)D&&!Pe[0].equals(Pe[Pe.length-1])&&Pe.push(Pe[0]),Ce+=D?Pe.length-1:Pe.length;const Ae=this.segments.prepareSegment((D?5:4)*Ce,this.layoutVertexArray,this.indexArray);if(D){const Pe=[],Ye=[];ye=Ae.vertexLength;for(const at of ve){let Rt,tt;at.length&&at!==ve[0]&&Ye.push(Pe.length/2),Rt=at[1].sub(at[0])._perp()._unit();for(let pt=1;pt<at.length;pt++){const mt=at[pt],_t=at[pt===at.length-1?1:pt+1];let{x:$t,y:it}=mt;if(ae){tt=_t.sub(mt)._perp()._unit();const Wt=Rt.add(tt)._unit(),tn=ae*Math.min(4,1/(Rt.x*Wt.x+Rt.y*Wt.y));$t+=tn*Wt.x,it+=tn*Wt.y,Rt=tt}Ff(this.layoutVertexArray,$t,it,0,0,1,1,0),Ae.vertexLength++,Pe.push(mt.x,mt.y),R&&Bf(this.layoutVertexExtArray,C.projectTilePoint($t,it,h),C.upVector(h,$t,it))}}const Ze=G_(Pe,Ye);for(let at=0;at<Ze.length;at+=3)this.indexArray.emplaceBack(ye+Ze[at],ye+Ze[at+2],ye+Ze[at+1]),Ae.primitiveLength++}for(const Pe of ve){L&&Pe.length&&L.startRing(Pe[0]);let Ye,Ze,at,Rt=Pe.length>4&&RC(Pe[Pe.length-2],Pe[0],Pe[1]),tt=ae?o3(Pe[Pe.length-2],Pe[0],Pe[1],ae):0;Ze=Pe[1].sub(Pe[0])._perp()._unit();let pt=!0;for(let mt=1,_t=0;mt<Pe.length;mt++){let $t=Pe[mt-1],it=Pe[mt];const Wt=Pe[mt===Pe.length-1?1:mt+1];if(L&&D&&L.currentPolyCount.top++,AC(it,$t,Te)){ae&&(Ze=Wt.sub(it)._perp()._unit(),pt=!pt);continue}L&&L.append(it,$t);const tn=it.sub($t)._perp(),qt=tn.x/(Math.abs(tn.x)+Math.abs(tn.y)),Ln=tn.y>0?1:0,Ft=$t.dist(it);if(_t+Ft>32768&&(_t=0),ae){at=Wt.sub(it)._perp()._unit();let kn=PC($t,it,Wt,MC(Ze,at),ae);isNaN(kn)&&(kn=0);const wn=it.sub($t)._unit();$t=$t.add(wn.mult(tt))._round(),it=it.add(wn.mult(-kn))._round(),tt=kn,Ze=at}const fn=Ae.vertexLength,Dn=Pe.length>4&&RC($t,it,Wt);let nr=OC(_t,Rt,pt);if(Ff(this.layoutVertexArray,$t.x,$t.y,qt,Ln,0,0,nr),Ff(this.layoutVertexArray,$t.x,$t.y,qt,Ln,0,1,nr),_t+=Ft,nr=OC(_t,Dn,!pt),Rt=Dn,Ff(this.layoutVertexArray,it.x,it.y,qt,Ln,0,0,nr),Ff(this.layoutVertexArray,it.x,it.y,qt,Ln,0,1,nr),Ae.vertexLength+=4,this.indexArray.emplaceBack(fn+0,fn+1,fn+2),this.indexArray.emplaceBack(fn+1,fn+3,fn+2),Ae.primitiveLength+=2,ae){const kn=ye+(mt===1?Pe.length-2:mt-2),wn=mt===1?ye:kn+1;if(this.indexArray.emplaceBack(fn+1,kn,fn+3),this.indexArray.emplaceBack(kn,wn,fn+3),Ae.primitiveLength+=2,Ye===void 0&&(Ye=fn),!AC(Wt,Pe[mt],Te)){const Or=mt===Pe.length-1?Ye:Ae.vertexLength;this.indexArray.emplaceBack(fn+2,fn+3,Or),this.indexArray.emplaceBack(fn+3,Or+1,Or),this.indexArray.emplaceBack(fn+3,wn,Or+1),Ae.primitiveLength+=3}pt=!pt}if(R){const kn=this.layoutVertexExtArray,wn=C.projectTilePoint($t.x,$t.y,h),Or=C.projectTilePoint(it.x,it.y,h),Fn=C.upVector(h,$t.x,$t.y),Bn=C.upVector(h,it.x,it.y);Bf(kn,wn,Fn),Bf(kn,wn,Fn),Bf(kn,Or,Bn),Bf(kn,Or,Bn)}}D&&(ye+=Pe.length-1)}}if(L&&L.polyCount.length>0){if(L.borders){L.vertexArrayOffset=this.centroidVertexArray.length;const ve=L.borders,Te=this.featuresOnBorder.push(L)-1;for(let ye=0;ye<4;ye++)ve[ye][0]!==Number.MAX_VALUE&&this.borders[ye].push(Te)}this.encodeCentroid(L.borders?void 0:L.centroid(),L)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,u,m,v,h)}sortBorders(){for(let n=0;n<4;n++)this.borders[n].sort((a,u)=>this.featuresOnBorder[a].borders[n][0]-this.featuresOnBorder[u].borders[n][0])}encodeCentroid(n,a,u=!0){let h,m;if(n)if(n.y!==0){const x=a.span()._mult(this.tileToMeter);h=(Math.max(n.x,1)<<3)+Math.min(7,Math.round(x.x/10)),m=(Math.max(n.y,1)<<3)+Math.min(7,Math.round(x.y/10))}else h=Math.ceil(7*(n.x+450)),m=0;else h=0,m=+u;let v=u?this.centroidVertexArray.length:a.vertexArrayOffset;for(const x of a.polyCount){u&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*x.edges+x.top);for(let S=0;S<x.top;S++)this.centroidVertexArray.emplace(v++,h,m);for(let S=0;S<2*x.edges;S++)this.centroidVertexArray.emplace(v++,0,m),this.centroidVertexArray.emplace(v++,h,m)}}}function MC(i,n){const a=i.add(n)._unit();return i.x*a.x+i.y*a.y}function o3(i,n,a,u){const h=n.sub(i)._perp()._unit(),m=a.sub(n)._perp()._unit();return PC(i,n,a,MC(h,m),u)}function PC(i,n,a,u,h){const m=Math.sqrt(1-u*u);return Math.min(i.dist(n)/3,n.dist(a)/3,h*m/u)}function AC(i,n,a){return i.x<a[0].x&&n.x<a[0].x||i.x>a[1].x&&n.x>a[1].x||i.y<a[0].y&&n.y<a[0].y||i.y>a[1].y&&n.y>a[1].y}function RC(i,n,a){if(i.x<0||i.x>=gn||n.x<0||n.x>=gn||a.x<0||a.x>=gn)return!1;const u=a.sub(n),h=u.perp(),m=i.sub(n);return(u.x*m.x+u.y*m.y)/Math.sqrt((u.x*u.x+u.y*u.y)*(m.x*m.x+m.y*m.y))>-.866&&h.x*m.x+h.y*m.y<0}function OC(i,n,a){const u=n?2|i:-3&i;return a?1|u:-2&u}function zC(){const i=Math.PI/32,n=Math.tan(i),a=zf;return a*Math.sqrt(1+2*n*n)-a}function LC(i,n,a){const u=1<<a.z,h=ea(a.x/u),m=ea((a.x+1)/u),v=Gi(a.y/u),x=Gi((a.y+1)/u);return function(S,C,R,L,D=0,H){const G=[];if(!S.length||!R||!L)return G;const Y=(Pe,Ye)=>{for(const Ze of Pe)G.push({polygon:Ze,bounds:Ye})},ae=Math.ceil(Math.log2(R)),ve=Math.ceil(Math.log2(L)),Te=ae-ve,ye=[];for(let Pe=0;Pe<Math.abs(Te);Pe++)ye.push(Te>0?0:1);for(let Pe=0;Pe<Math.min(ae,ve);Pe++)ye.push(0),ye.push(1);let Ce=S;if(Ce=zg(Ce,C[0].y-D,C[1].y+D,1),Ce=zg(Ce,C[0].x-D,C[1].x+D,0),!Ce.length)return G;const Ae=[];for(ye.length?Ae.push({polygons:Ce,bounds:C,depth:0}):Y(Ce,C);Ae.length;){const Pe=Ae.pop(),Ye=Pe.depth,Ze=ye[Ye],at=Pe.bounds[0],Rt=Pe.bounds[1],tt=Ze===0?at.x:at.y,pt=Ze===0?Rt.x:Rt.y,mt=H?H(Ze,tt,pt):.5*(tt+pt),_t=zg(Pe.polygons,tt-D,mt+D,Ze),$t=zg(Pe.polygons,mt-D,pt+D,Ze);if(_t.length){const it=[at,new te(Ze===0?mt:Rt.x,Ze===1?mt:Rt.y)];ye.length>Ye+1?Ae.push({polygons:_t,bounds:it,depth:Ye+1}):Y(_t,it)}if($t.length){const it=[new te(Ze===0?mt:at.x,Ze===1?mt:at.y),Rt];ye.length>Ye+1?Ae.push({polygons:$t,bounds:it,depth:Ye+1}):Y($t,it)}}return G}(i,n,Math.ceil((m-h)/11.25),Math.ceil((v-x)/11.25),1,(S,C,R)=>{if(S===0)return .5*(C+R);{const L=Gi((a.y+C/gn)/u);return(Ms(.5*(Gi((a.y+R/gn)/u)+L))*u-a.y)*gn}})}Jt(Nf,"FillExtrusionBucket",{omit:["layers","features"]}),Jt(IC,"PartMetadata");const a3=new be({"fill-extrusion-edge-radius":new K(nt["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var s3={paint:new be({"fill-extrusion-opacity":new K(nt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new se(nt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new K(nt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new K(nt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new se(nt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new se(nt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new se(nt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new K(nt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new K(nt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new K(nt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"]),"fill-extrusion-rounded-roof":new K(nt["paint_fill-extrusion"]["fill-extrusion-rounded-roof"])}),layout:a3};function DC(i,n,a){var u=2*Math.PI*6378137/256/Math.pow(2,a);return[i*u-2*Math.PI*6378137/2,n*u-2*Math.PI*6378137/2]}class Lg{constructor(n,a,u){this.z=n,this.x=a,this.y=u,this.key=jf(0,n,n,a,u)}equals(n){return this.z===n.z&&this.x===n.x&&this.y===n.y}url(n,a){const u=function(m,v,x){var S=DC(256*m,256*(v=Math.pow(2,x)-v-1),x),C=DC(256*(m+1),256*(v+1),x);return S[0]+","+S[1]+","+C[0]+","+C[1]}(this.x,this.y,this.z),h=function(m,v,x){let S,C="";for(let R=m;R>0;R--)S=1<<R-1,C+=(v&S?1:0)+(x&S?2:0);return C}(this.z,this.x,this.y);return n[(this.x+this.y)%n.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(a==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",h).replace("{bbox-epsg-3857}",u)}toString(){return`${this.z}/${this.x}/${this.y}`}}class kC{constructor(n,a){this.wrap=n,this.canonical=a,this.key=jf(n,a.z,a.z,a.x,a.y)}}class uo{constructor(n,a,u,h,m){this.overscaledZ=n,this.wrap=a,this.canonical=new Lg(u,+h,+m),this.key=a===0&&n===u?this.canonical.key:jf(a,n,u,h,m)}equals(n){return this.overscaledZ===n.overscaledZ&&this.wrap===n.wrap&&this.canonical.equals(n.canonical)}scaledTo(n){const a=this.canonical.z-n;return n>this.canonical.z?new uo(n,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new uo(n,this.wrap,n,this.canonical.x>>a,this.canonical.y>>a)}calculateScaledKey(n,a=!0){if(this.overscaledZ===n&&a)return this.key;if(n>this.canonical.z)return jf(this.wrap*+a,n,this.canonical.z,this.canonical.x,this.canonical.y);{const u=this.canonical.z-n;return jf(this.wrap*+a,n,n,this.canonical.x>>u,this.canonical.y>>u)}}isChildOf(n){if(n.wrap!==this.wrap)return!1;const a=this.canonical.z-n.canonical.z;return n.overscaledZ===0||n.overscaledZ<this.overscaledZ&&n.canonical.x===this.canonical.x>>a&&n.canonical.y===this.canonical.y>>a}children(n){if(this.overscaledZ>=n)return[new uo(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const a=this.canonical.z+1,u=2*this.canonical.x,h=2*this.canonical.y;return[new uo(a,this.wrap,a,u,h),new uo(a,this.wrap,a,u+1,h),new uo(a,this.wrap,a,u,h+1),new uo(a,this.wrap,a,u+1,h+1)]}isLessThan(n){return this.wrap<n.wrap||!(this.wrap>n.wrap)&&(this.overscaledZ<n.overscaledZ||!(this.overscaledZ>n.overscaledZ)&&(this.canonical.x<n.canonical.x||!(this.canonical.x>n.canonical.x)&&this.canonical.y<n.canonical.y))}wrapped(){return new uo(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(n){return new uo(this.overscaledZ,n,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new kC(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function jf(i,n,a,u,h){const m=1<<Math.min(a,22);let v=m*(h%m)+u%m;return i&&a<22&&(v+=m*m*((i<0?-2*i-1:2*i)%(1<<2*(22-a)))),16*(32*v+a)+(n-a)}Jt(Lg,"CanonicalTileID"),Jt(uo,"OverscaledTileID",{omit:["projMatrix"]});class gd extends te{constructor(n,a,u){super(n,a),this.z=u}}function Uf(i,n){return i.x*n.x+i.y*n.y}function $C(i,n){if(i.length===1){let a=0;const u=n[a++];let h;for(;!h||u.equals(h);)if(h=n[a++],!h)return 1/0;for(;a<n.length;a++){const m=n[a],v=i[0],x=h.sub(u),S=m.sub(u),C=v.sub(u),R=Uf(x,x),L=Uf(x,S),D=Uf(S,S),H=Uf(C,x),G=Uf(C,S),Y=R*D-L*L,ae=(D*H-L*G)/Y,ve=(R*G-L*H)/Y,Te=u.z*(1-ae-ve)+h.z*ae+m.z*ve;if(isFinite(Te))return Te}return 1/0}{let a=1/0;for(const u of n)a=Math.min(a,u.z);return a}}function FC(i,n,a,u,h,m,v,x){const S=v*h.getElevationAt(i,n,!0,!0),C=m[0]!==0,R=C?m[1]===0?v*(m[0]/7-450):v*function(L,D,H){const G=Math.floor(D[0]/8),Y=Math.floor(D[1]/8),ae=10*(D[0]-8*G),ve=10*(D[1]-8*Y),Te=L.getElevationAt(G,Y,!0,!0),ye=L.getMeterToDEM(H),Ce=Math.floor(.5*(ae*ye-1)),Ae=Math.floor(.5*(ve*ye-1)),Pe=L.tileCoordToPixel(G,Y),Ye=2*Ce+1,Ze=2*Ae+1,at=function($t,it,Wt,tn,qt){return[$t.getElevationAtPixel(it,Wt,!0),$t.getElevationAtPixel(it+qt,Wt,!0),$t.getElevationAtPixel(it,Wt+qt,!0),$t.getElevationAtPixel(it+tn,Wt+qt,!0)]}(L,Pe.x-Ce,Pe.y-Ae,Ye,Ze),Rt=Math.abs(at[0]-at[1]),tt=Math.abs(at[2]-at[3]),pt=Math.abs(at[0]-at[2])+Math.abs(at[1]-at[3]),mt=Math.min(.25,.5*ye*(Rt+tt)/Ye),_t=Math.min(.25,.5*ye*pt/Ze);return Te+Math.max(mt*ae,_t*ve)}(h,m,x):S;return{base:S+(a===0)?-1:a,top:C?Math.max(R+u,S+a+2):S+u}}const l3=Ue([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:c3}=l3,u3=Ue([{name:"a_packed",components:4,type:"Float32"}]),{members:d3}=u3,h3=Og.types,f3=Math.cos(Math.PI/180*37.5);class Dg{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(a=>a.id),this.index=n.index,this.projection=n.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(a=>{this.gradients[a.id]={}}),this.layoutVertexArray=new et,this.layoutVertexArray2=new Et,this.indexArray=new cn,this.programConfigurations=new Vc(n.layers,n.zoom),this.segments=new si,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(n,a,u,h){this.hasPattern=q_("line",this.layers,a);const m=this.layers[0].layout.get("line-sort-key"),v=[];for(const{feature:R,id:L,index:D,sourceLayerIndex:H}of n){const G=this.layers[0]._featureFilter.needGeometry,Y=Xc(R,G);if(!this.layers[0]._featureFilter.filter(new O(this.zoom),Y,u))continue;const ae=m?m.evaluate(Y,{},u):void 0,ve={id:L,properties:R.properties,type:R.type,sourceLayerIndex:H,index:D,geometry:G?Y.geometry:el(R,u,h),patterns:{},sortKey:ae};v.push(ve)}m&&v.sort((R,L)=>R.sortKey-L.sortKey);const{lineAtlas:x,featureIndex:S}=a,C=this.addConstantDashes(x);for(const R of v){const{geometry:L,index:D,sourceLayerIndex:H}=R;if(C&&this.addFeatureDashes(R,x),this.hasPattern){const G=Z_("line",this.layers,R,this.zoom,a);this.patternFeatures.push(G)}else this.addFeature(R,L,D,u,x.positions,a.availableImages);S.insert(n[D].feature,L,D,H,this.index)}}addConstantDashes(n){let a=!1;for(const u of this.layers){const h=u.paint.get("line-dasharray").value,m=u.layout.get("line-cap").value;if(h.kind!=="constant"||m.kind!=="constant")a=!0;else{const v=m.value,x=h.value;if(!x)continue;n.addDash(x,v)}}return a}addFeatureDashes(n,a){const u=this.zoom;for(const h of this.layers){const m=h.paint.get("line-dasharray").value,v=h.layout.get("line-cap").value;if(m.kind==="constant"&&v.kind==="constant")continue;let x,S;if(m.kind==="constant"){if(x=m.value,!x)continue}else x=m.evaluate({zoom:u},n);S=v.kind==="constant"?v.value:v.evaluate({zoom:u},n),a.addDash(x,S),n.patterns[h.id]=a.getKey(x,S)}}update(n,a,u,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,a,this.stateDependentLayers,u,h)}addFeatures(n,a,u,h,m){for(const v of this.patternFeatures)this.addFeature(v,v.geometry,v.index,a,u,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=n.createVertexBuffer(this.layoutVertexArray2,d3)),this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,c3),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(n){if(n.properties&&n.properties.hasOwnProperty("mapbox_clip_start")&&n.properties.hasOwnProperty("mapbox_clip_end"))return{start:+n.properties.mapbox_clip_start,end:+n.properties.mapbox_clip_end}}addFeature(n,a,u,h,m,v){const x=this.layers[0].layout,S=x.get("line-join").evaluate(n,{}),C=x.get("line-cap").evaluate(n,{}),R=x.get("line-miter-limit"),L=x.get("line-round-limit");this.lineClips=this.lineFeatureClips(n);for(const D of a)this.addLine(D,n,S,C,R,L);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,u,m,v,h)}addLine(n,a,u,h,m,v){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let ve=0;ve<n.length-1;ve++)this.totalDistance+=n[ve].dist(n[ve+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const x=h3[a.type]==="Polygon";let S=n.length;for(;S>=2&&n[S-1].equals(n[S-2]);)S--;let C=0;for(;C<S-1&&n[C].equals(n[C+1]);)C++;if(S<(x?3:2))return;u==="bevel"&&(m=1.05);const R=this.overscaling<=16?15*gn/(512*this.overscaling):0,L=this.segments.prepareSegment(10*S,this.layoutVertexArray,this.indexArray);let D,H,G,Y,ae;this.e1=this.e2=-1,x&&(D=n[S-2],ae=n[C].sub(D)._unit()._perp());for(let ve=C;ve<S;ve++){if(G=ve===S-1?x?n[C+1]:void 0:n[ve+1],G&&n[ve].equals(G))continue;ae&&(Y=ae),D&&(H=D),D=n[ve],ae=G?G.sub(D)._unit()._perp():Y,Y=Y||ae;let Te=Y.add(ae);Te.x===0&&Te.y===0||Te._unit();const ye=Y.x*ae.x+Y.y*ae.y,Ce=Te.x*ae.x+Te.y*ae.y,Ae=Ce!==0?1/Ce:1/0,Pe=2*Math.sqrt(2-2*Ce),Ye=Ce<f3&&H&&G,Ze=Y.x*ae.y-Y.y*ae.x>0;if(Ye&&ve>C){const tt=D.dist(H);if(tt>2*R){const pt=D.sub(D.sub(H)._mult(R/tt)._round());this.updateDistance(H,pt),this.addCurrentVertex(pt,Y,0,0,L),H=pt}}const at=H&&G;let Rt=at?u:x?"butt":h;if(at&&Rt==="round"&&(Ae<v?Rt="miter":Ae<=2&&(Rt="fakeround")),Rt==="miter"&&Ae>m&&(Rt="bevel"),Rt==="bevel"&&(Ae>2&&(Rt="flipbevel"),Ae<m&&(Rt="miter")),H&&this.updateDistance(H,D),Rt==="miter")Te._mult(Ae),this.addCurrentVertex(D,Te,0,0,L);else if(Rt==="flipbevel"){if(Ae>100)Te=ae.mult(-1);else{const tt=Ae*Y.add(ae).mag()/Y.sub(ae).mag();Te._perp()._mult(tt*(Ze?-1:1))}this.addCurrentVertex(D,Te,0,0,L),this.addCurrentVertex(D,Te.mult(-1),0,0,L)}else if(Rt==="bevel"||Rt==="fakeround"){const tt=-Math.sqrt(Ae*Ae-1),pt=Ze?tt:0,mt=Ze?0:tt;if(H&&this.addCurrentVertex(D,Y,pt,mt,L),Rt==="fakeround"){const _t=Math.round(180*Pe/Math.PI/20);for(let $t=1;$t<_t;$t++){let it=$t/_t;if(it!==.5){const tn=it-.5;it+=it*tn*(it-1)*((1.0904+ye*(ye*(3.55645-1.43519*ye)-3.2452))*tn*tn+(.848013+ye*(.215638*ye-1.06021)))}const Wt=ae.sub(Y)._mult(it)._add(Y)._unit()._mult(Ze?-1:1);this.addHalfVertex(D,Wt.x,Wt.y,!1,Ze,0,L)}}G&&this.addCurrentVertex(D,ae,-pt,-mt,L)}else if(Rt==="butt")this.addCurrentVertex(D,Te,0,0,L);else if(Rt==="square"){const tt=H?1:-1;H||this.addCurrentVertex(D,Te,tt,tt,L),this.addCurrentVertex(D,Te,0,0,L),H&&this.addCurrentVertex(D,Te,tt,tt,L)}else Rt==="round"&&(H&&(this.addCurrentVertex(D,Y,0,0,L),this.addCurrentVertex(D,Y,1,1,L,!0)),G&&(this.addCurrentVertex(D,ae,-1,-1,L,!0),this.addCurrentVertex(D,ae,0,0,L)));if(Ye&&ve<S-1){const tt=D.dist(G);if(tt>2*R){const pt=D.add(G.sub(D)._mult(R/tt)._round());this.updateDistance(D,pt),this.addCurrentVertex(pt,ae,0,0,L),D=pt}}}}addCurrentVertex(n,a,u,h,m,v=!1){const x=a.y*h-a.x,S=-a.y-a.x*h;this.addHalfVertex(n,a.x+a.y*u,a.y-a.x*u,v,!1,u,m),this.addHalfVertex(n,x,S,v,!0,-h,m)}addHalfVertex({x:n,y:a},u,h,m,v,x,S){this.layoutVertexArray.emplaceBack((n<<1)+(m?1:0),(a<<1)+(v?1:0),Math.round(63*u)+128,Math.round(63*h)+128,1+(x===0?0:x<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const C=S.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,C),S.primitiveLength++),v?this.e2=C:this.e1=C}updateScaledDistance(){if(this.lineClips){const n=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=n*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(n,a){this.distance+=n.dist(a),this.updateScaledDistance()}}Jt(Dg,"LineBucket",{omit:["layers","patternFeatures"]});const p3=new be({"line-cap":new se(nt.layout_line["line-cap"]),"line-join":new se(nt.layout_line["line-join"]),"line-miter-limit":new K(nt.layout_line["line-miter-limit"]),"line-round-limit":new K(nt.layout_line["line-round-limit"]),"line-sort-key":new se(nt.layout_line["line-sort-key"])});var BC={paint:new be({"line-opacity":new se(nt.paint_line["line-opacity"]),"line-color":new se(nt.paint_line["line-color"]),"line-translate":new K(nt.paint_line["line-translate"]),"line-translate-anchor":new K(nt.paint_line["line-translate-anchor"]),"line-width":new se(nt.paint_line["line-width"]),"line-gap-width":new se(nt.paint_line["line-gap-width"]),"line-offset":new se(nt.paint_line["line-offset"]),"line-blur":new se(nt.paint_line["line-blur"]),"line-dasharray":new se(nt.paint_line["line-dasharray"]),"line-pattern":new se(nt.paint_line["line-pattern"]),"line-gradient":new xe(nt.paint_line["line-gradient"]),"line-trim-offset":new K(nt.paint_line["line-trim-offset"])}),layout:p3};const NC=new class extends se{possiblyEvaluate(i,n){return n=new O(Math.floor(n.zoom),{now:n.now,fadeDuration:n.fadeDuration,transition:n.transition}),super.possiblyEvaluate(i,n)}evaluate(i,n,a,u){return n=gt({},n,{zoom:Math.floor(n.zoom)}),super.evaluate(i,n,a,u)}}(BC.paint.properties["line-width"].specification);function jC(i,n){return n>0?n+2*i:i}NC.useIntegerZoom=!0;const m3=Ue([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),g3=Ue([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),v3=Ue([{name:"a_projected_pos",components:4,type:"Float32"}],4);Ue([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const y3=Ue([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),_3=Ue([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);Ue([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const UC=Ue([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),x3=Ue([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);Ue([{name:"triangle",components:3,type:"Uint16"}]),Ue([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),Ue([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Ue([{type:"Float32",name:"offsetX"}]),Ue([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var Li=24;const es=128;function K_(i,n){const{expression:a}=n;if(a.kind==="constant")return{kind:"constant",layoutSize:a.evaluate(new O(i+1))};if(a.kind==="source")return{kind:"source"};{const{zoomStops:u,interpolationType:h}=a;let m=0;for(;m<u.length&&u[m]<=i;)m++;m=Math.max(0,m-1);let v=m;for(;v<u.length&&u[v]<i+1;)v++;v=Math.min(u.length-1,v);const x=u[m],S=u[v];return a.kind==="composite"?{kind:"composite",minZoom:x,maxZoom:S,interpolationType:h}:{kind:"camera",minZoom:x,maxZoom:S,minSize:a.evaluate(new O(x)),maxSize:a.evaluate(new O(S)),interpolationType:h}}}function kg(i,{uSize:n,uSizeT:a},{lowerSize:u,upperSize:h}){return i.kind==="source"?u/es:i.kind==="composite"?Jn(u/es,h/es,a):n}function vd(i,n){let a=0,u=0;if(i.kind==="constant")u=i.layoutSize;else if(i.kind!=="source"){const{interpolationType:h,minZoom:m,maxZoom:v}=i,x=h?pe(_a.interpolationFactor(h,n,m,v),0,1):0;i.kind==="camera"?u=Jn(i.minSize,i.maxSize,x):a=x}return{uSizeT:a,uSize:u}}var b3=Object.freeze({__proto__:null,SIZE_PACK_FACTOR:es,evaluateSizeForFeature:kg,evaluateSizeForZoom:vd,getSizeData:K_});function w3(i,n,a){return i.sections.forEach(u=>{u.text=function(h,m,v){const x=m.layout.get("text-transform").evaluate(v,{});return x==="uppercase"?h=h.toLocaleUpperCase():x==="lowercase"&&(h=h.toLocaleLowerCase()),A.applyArabicShaping&&(h=A.applyArabicShaping(h)),h}(u.text,n,a)}),i}const Vf={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};function S3(i){return i===""||i===""||i===""||i===""||i===""||i===""||i===""||i===""||i===""||i===""||i===""||i===""||i===""||i===""||i===""||i===""||i===""}function E3(i){return i===""||i===""||i===""||i===""||i===""||i===""||i===""||i===""||i===""||i===""}var VC=Ir,HC=function(i,n,a,u,h){var m,v,x=8*h-u-1,S=(1<<x)-1,C=S>>1,R=-7,L=a?h-1:0,D=a?-1:1,H=i[n+L];for(L+=D,m=H&(1<<-R)-1,H>>=-R,R+=x;R>0;m=256*m+i[n+L],L+=D,R-=8);for(v=m&(1<<-R)-1,m>>=-R,R+=u;R>0;v=256*v+i[n+L],L+=D,R-=8);if(m===0)m=1-C;else{if(m===S)return v?NaN:1/0*(H?-1:1);v+=Math.pow(2,u),m-=C}return(H?-1:1)*v*Math.pow(2,m-u)},GC=function(i,n,a,u,h,m){var v,x,S,C=8*m-h-1,R=(1<<C)-1,L=R>>1,D=h===23?Math.pow(2,-24)-Math.pow(2,-77):0,H=u?0:m-1,G=u?1:-1,Y=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(x=isNaN(n)?1:0,v=R):(v=Math.floor(Math.log(n)/Math.LN2),n*(S=Math.pow(2,-v))<1&&(v--,S*=2),(n+=v+L>=1?D/S:D*Math.pow(2,1-L))*S>=2&&(v++,S/=2),v+L>=R?(x=0,v=R):v+L>=1?(x=(n*S-1)*Math.pow(2,h),v+=L):(x=n*Math.pow(2,L-1)*Math.pow(2,h),v=0));h>=8;i[a+H]=255&x,H+=G,x/=256,h-=8);for(v=v<<h|x,C+=h;C>0;i[a+H]=255&v,H+=G,v/=256,C-=8);i[a+H-G]|=128*Y};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */function Ir(i){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(i)?i:new Uint8Array(i||0),this.pos=0,this.type=0,this.length=this.buf.length}Ir.Varint=0,Ir.Fixed64=1,Ir.Bytes=2,Ir.Fixed32=5;var Y_=4294967296,WC=1/Y_,qC=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function nl(i){return i.type===Ir.Bytes?i.readVarint()+i.pos:i.pos+1}function yd(i,n,a){return a?4294967296*n+(i>>>0):4294967296*(n>>>0)+(i>>>0)}function ZC(i,n,a){var u=n<=16383?1:n<=2097151?2:n<=268435455?3:Math.floor(Math.log(n)/(7*Math.LN2));a.realloc(u);for(var h=a.pos-1;h>=i;h--)a.buf[h+u]=a.buf[h]}function C3(i,n){for(var a=0;a<i.length;a++)n.writeVarint(i[a])}function T3(i,n){for(var a=0;a<i.length;a++)n.writeSVarint(i[a])}function I3(i,n){for(var a=0;a<i.length;a++)n.writeFloat(i[a])}function M3(i,n){for(var a=0;a<i.length;a++)n.writeDouble(i[a])}function P3(i,n){for(var a=0;a<i.length;a++)n.writeBoolean(i[a])}function A3(i,n){for(var a=0;a<i.length;a++)n.writeFixed32(i[a])}function R3(i,n){for(var a=0;a<i.length;a++)n.writeSFixed32(i[a])}function O3(i,n){for(var a=0;a<i.length;a++)n.writeFixed64(i[a])}function z3(i,n){for(var a=0;a<i.length;a++)n.writeSFixed64(i[a])}function $g(i,n){return(i[n]|i[n+1]<<8|i[n+2]<<16)+16777216*i[n+3]}function _d(i,n,a){i[a]=n,i[a+1]=n>>>8,i[a+2]=n>>>16,i[a+3]=n>>>24}function XC(i,n){return(i[n]|i[n+1]<<8|i[n+2]<<16)+(i[n+3]<<24)}Ir.prototype={destroy:function(){this.buf=null},readFields:function(i,n,a){for(a=a||this.length;this.pos<a;){var u=this.readVarint(),h=u>>3,m=this.pos;this.type=7&u,i(h,n,this),this.pos===m&&this.skip(u)}return n},readMessage:function(i,n){return this.readFields(i,n,this.readVarint()+this.pos)},readFixed32:function(){var i=$g(this.buf,this.pos);return this.pos+=4,i},readSFixed32:function(){var i=XC(this.buf,this.pos);return this.pos+=4,i},readFixed64:function(){var i=$g(this.buf,this.pos)+$g(this.buf,this.pos+4)*Y_;return this.pos+=8,i},readSFixed64:function(){var i=$g(this.buf,this.pos)+XC(this.buf,this.pos+4)*Y_;return this.pos+=8,i},readFloat:function(){var i=HC(this.buf,this.pos,!0,23,4);return this.pos+=4,i},readDouble:function(){var i=HC(this.buf,this.pos,!0,52,8);return this.pos+=8,i},readVarint:function(i){var n,a,u=this.buf;return n=127&(a=u[this.pos++]),a<128?n:(n|=(127&(a=u[this.pos++]))<<7,a<128?n:(n|=(127&(a=u[this.pos++]))<<14,a<128?n:(n|=(127&(a=u[this.pos++]))<<21,a<128?n:function(h,m,v){var x,S,C=v.buf;if(x=(112&(S=C[v.pos++]))>>4,S<128||(x|=(127&(S=C[v.pos++]))<<3,S<128)||(x|=(127&(S=C[v.pos++]))<<10,S<128)||(x|=(127&(S=C[v.pos++]))<<17,S<128)||(x|=(127&(S=C[v.pos++]))<<24,S<128)||(x|=(1&(S=C[v.pos++]))<<31,S<128))return yd(h,x,m);throw new Error("Expected varint not more than 10 bytes")}(n|=(15&(a=u[this.pos]))<<28,i,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var i=this.readVarint();return i%2==1?(i+1)/-2:i/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var i=this.readVarint()+this.pos,n=this.pos;return this.pos=i,i-n>=12&&qC?function(a,u,h){return qC.decode(a.subarray(u,h))}(this.buf,n,i):function(a,u,h){for(var m="",v=u;v<h;){var x,S,C,R=a[v],L=null,D=R>239?4:R>223?3:R>191?2:1;if(v+D>h)break;D===1?R<128&&(L=R):D===2?(192&(x=a[v+1]))==128&&(L=(31&R)<<6|63&x)<=127&&(L=null):D===3?(S=a[v+2],(192&(x=a[v+1]))==128&&(192&S)==128&&((L=(15&R)<<12|(63&x)<<6|63&S)<=2047||L>=55296&&L<=57343)&&(L=null)):D===4&&(S=a[v+2],C=a[v+3],(192&(x=a[v+1]))==128&&(192&S)==128&&(192&C)==128&&((L=(15&R)<<18|(63&x)<<12|(63&S)<<6|63&C)<=65535||L>=1114112)&&(L=null)),L===null?(L=65533,D=1):L>65535&&(L-=65536,m+=String.fromCharCode(L>>>10&1023|55296),L=56320|1023&L),m+=String.fromCharCode(L),v+=D}return m}(this.buf,n,i)},readBytes:function(){var i=this.readVarint()+this.pos,n=this.buf.subarray(this.pos,i);return this.pos=i,n},readPackedVarint:function(i,n){if(this.type!==Ir.Bytes)return i.push(this.readVarint(n));var a=nl(this);for(i=i||[];this.pos<a;)i.push(this.readVarint(n));return i},readPackedSVarint:function(i){if(this.type!==Ir.Bytes)return i.push(this.readSVarint());var n=nl(this);for(i=i||[];this.pos<n;)i.push(this.readSVarint());return i},readPackedBoolean:function(i){if(this.type!==Ir.Bytes)return i.push(this.readBoolean());var n=nl(this);for(i=i||[];this.pos<n;)i.push(this.readBoolean());return i},readPackedFloat:function(i){if(this.type!==Ir.Bytes)return i.push(this.readFloat());var n=nl(this);for(i=i||[];this.pos<n;)i.push(this.readFloat());return i},readPackedDouble:function(i){if(this.type!==Ir.Bytes)return i.push(this.readDouble());var n=nl(this);for(i=i||[];this.pos<n;)i.push(this.readDouble());return i},readPackedFixed32:function(i){if(this.type!==Ir.Bytes)return i.push(this.readFixed32());var n=nl(this);for(i=i||[];this.pos<n;)i.push(this.readFixed32());return i},readPackedSFixed32:function(i){if(this.type!==Ir.Bytes)return i.push(this.readSFixed32());var n=nl(this);for(i=i||[];this.pos<n;)i.push(this.readSFixed32());return i},readPackedFixed64:function(i){if(this.type!==Ir.Bytes)return i.push(this.readFixed64());var n=nl(this);for(i=i||[];this.pos<n;)i.push(this.readFixed64());return i},readPackedSFixed64:function(i){if(this.type!==Ir.Bytes)return i.push(this.readSFixed64());var n=nl(this);for(i=i||[];this.pos<n;)i.push(this.readSFixed64());return i},skip:function(i){var n=7&i;if(n===Ir.Varint)for(;this.buf[this.pos++]>127;);else if(n===Ir.Bytes)this.pos=this.readVarint()+this.pos;else if(n===Ir.Fixed32)this.pos+=4;else{if(n!==Ir.Fixed64)throw new Error("Unimplemented type: "+n);this.pos+=8}},writeTag:function(i,n){this.writeVarint(i<<3|n)},realloc:function(i){for(var n=this.length||16;n<this.pos+i;)n*=2;if(n!==this.length){var a=new Uint8Array(n);a.set(this.buf),this.buf=a,this.length=n}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(i){this.realloc(4),_d(this.buf,i,this.pos),this.pos+=4},writeSFixed32:function(i){this.realloc(4),_d(this.buf,i,this.pos),this.pos+=4},writeFixed64:function(i){this.realloc(8),_d(this.buf,-1&i,this.pos),_d(this.buf,Math.floor(i*WC),this.pos+4),this.pos+=8},writeSFixed64:function(i){this.realloc(8),_d(this.buf,-1&i,this.pos),_d(this.buf,Math.floor(i*WC),this.pos+4),this.pos+=8},writeVarint:function(i){(i=+i||0)>268435455||i<0?function(n,a){var u,h;if(n>=0?(u=n%4294967296|0,h=n/4294967296|0):(h=~(-n/4294967296),4294967295^(u=~(-n%4294967296))?u=u+1|0:(u=0,h=h+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");a.realloc(10),function(m,v,x){x.buf[x.pos++]=127&m|128,m>>>=7,x.buf[x.pos++]=127&m|128,m>>>=7,x.buf[x.pos++]=127&m|128,m>>>=7,x.buf[x.pos++]=127&m|128,x.buf[x.pos]=127&(m>>>=7)}(u,0,a),function(m,v){var x=(7&m)<<4;v.buf[v.pos++]|=x|((m>>>=3)?128:0),m&&(v.buf[v.pos++]=127&m|((m>>>=7)?128:0),m&&(v.buf[v.pos++]=127&m|((m>>>=7)?128:0),m&&(v.buf[v.pos++]=127&m|((m>>>=7)?128:0),m&&(v.buf[v.pos++]=127&m|((m>>>=7)?128:0),m&&(v.buf[v.pos++]=127&m)))))}(h,a)}(i,this):(this.realloc(4),this.buf[this.pos++]=127&i|(i>127?128:0),i<=127||(this.buf[this.pos++]=127&(i>>>=7)|(i>127?128:0),i<=127||(this.buf[this.pos++]=127&(i>>>=7)|(i>127?128:0),i<=127||(this.buf[this.pos++]=i>>>7&127))))},writeSVarint:function(i){this.writeVarint(i<0?2*-i-1:2*i)},writeBoolean:function(i){this.writeVarint(!!i)},writeString:function(i){i=String(i),this.realloc(4*i.length),this.pos++;var n=this.pos;this.pos=function(u,h,m){for(var v,x,S=0;S<h.length;S++){if((v=h.charCodeAt(S))>55295&&v<57344){if(!x){v>56319||S+1===h.length?(u[m++]=239,u[m++]=191,u[m++]=189):x=v;continue}if(v<56320){u[m++]=239,u[m++]=191,u[m++]=189,x=v;continue}v=x-55296<<10|v-56320|65536,x=null}else x&&(u[m++]=239,u[m++]=191,u[m++]=189,x=null);v<128?u[m++]=v:(v<2048?u[m++]=v>>6|192:(v<65536?u[m++]=v>>12|224:(u[m++]=v>>18|240,u[m++]=v>>12&63|128),u[m++]=v>>6&63|128),u[m++]=63&v|128)}return m}(this.buf,i,this.pos);var a=this.pos-n;a>=128&&ZC(n,a,this),this.pos=n-1,this.writeVarint(a),this.pos+=a},writeFloat:function(i){this.realloc(4),GC(this.buf,i,this.pos,!0,23,4),this.pos+=4},writeDouble:function(i){this.realloc(8),GC(this.buf,i,this.pos,!0,52,8),this.pos+=8},writeBytes:function(i){var n=i.length;this.writeVarint(n),this.realloc(n);for(var a=0;a<n;a++)this.buf[this.pos++]=i[a]},writeRawMessage:function(i,n){this.pos++;var a=this.pos;i(n,this);var u=this.pos-a;u>=128&&ZC(a,u,this),this.pos=a-1,this.writeVarint(u),this.pos+=u},writeMessage:function(i,n,a){this.writeTag(i,Ir.Bytes),this.writeRawMessage(n,a)},writePackedVarint:function(i,n){n.length&&this.writeMessage(i,C3,n)},writePackedSVarint:function(i,n){n.length&&this.writeMessage(i,T3,n)},writePackedBoolean:function(i,n){n.length&&this.writeMessage(i,P3,n)},writePackedFloat:function(i,n){n.length&&this.writeMessage(i,I3,n)},writePackedDouble:function(i,n){n.length&&this.writeMessage(i,M3,n)},writePackedFixed32:function(i,n){n.length&&this.writeMessage(i,A3,n)},writePackedSFixed32:function(i,n){n.length&&this.writeMessage(i,R3,n)},writePackedFixed64:function(i,n){n.length&&this.writeMessage(i,O3,n)},writePackedSFixed64:function(i,n){n.length&&this.writeMessage(i,z3,n)},writeBytesField:function(i,n){this.writeTag(i,Ir.Bytes),this.writeBytes(n)},writeFixed32Field:function(i,n){this.writeTag(i,Ir.Fixed32),this.writeFixed32(n)},writeSFixed32Field:function(i,n){this.writeTag(i,Ir.Fixed32),this.writeSFixed32(n)},writeFixed64Field:function(i,n){this.writeTag(i,Ir.Fixed64),this.writeFixed64(n)},writeSFixed64Field:function(i,n){this.writeTag(i,Ir.Fixed64),this.writeSFixed64(n)},writeVarintField:function(i,n){this.writeTag(i,Ir.Varint),this.writeVarint(n)},writeSVarintField:function(i,n){this.writeTag(i,Ir.Varint),this.writeSVarint(n)},writeStringField:function(i,n){this.writeTag(i,Ir.Bytes),this.writeString(n)},writeFloatField:function(i,n){this.writeTag(i,Ir.Fixed32),this.writeFloat(n)},writeDoubleField:function(i,n){this.writeTag(i,Ir.Fixed64),this.writeDouble(n)},writeBooleanField:function(i,n){this.writeVarintField(i,!!n)}};var Fg=V(VC);const J_=3;function L3(i,n,a){n.glyphs=[],i===1&&a.readMessage(D3,n)}function D3(i,n,a){if(i===3){const{id:u,bitmap:h,width:m,height:v,left:x,top:S,advance:C}=a.readMessage(k3,{});n.glyphs.push({id:u,bitmap:new tl({width:m+2*J_,height:v+2*J_},h),metrics:{width:m,height:v,left:x,top:S,advance:C}})}else i===4?n.ascender=a.readSVarint():i===5&&(n.descender=a.readSVarint())}function k3(i,n,a){i===1?n.id=a.readVarint():i===2?n.bitmap=a.readBytes():i===3?n.width=a.readVarint():i===4?n.height=a.readVarint():i===5?n.left=a.readSVarint():i===6?n.top=a.readSVarint():i===7&&(n.advance=a.readVarint())}const KC=J_;function Q_(i){let n=0,a=0;for(const v of i)n+=v.w*v.h,a=Math.max(a,v.w);i.sort((v,x)=>x.h-v.h);const u=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),a),h:1/0}];let h=0,m=0;for(const v of i)for(let x=u.length-1;x>=0;x--){const S=u[x];if(!(v.w>S.w||v.h>S.h)){if(v.x=S.x,v.y=S.y,m=Math.max(m,v.y+v.h),h=Math.max(h,v.x+v.w),v.w===S.w&&v.h===S.h){const C=u.pop();x<u.length&&(u[x]=C)}else v.h===S.h?(S.x+=v.w,S.w-=v.w):v.w===S.w?(S.y+=v.h,S.h-=v.h):(u.push({x:S.x+v.w,y:S.y,w:S.w-v.w,h:v.h}),S.y+=v.h,S.h-=v.h);break}}return{w:h,h:m,fill:n/(h*m)||0}}const wo=1;class ex{constructor(n,{pixelRatio:a,version:u,stretchX:h,stretchY:m,content:v}){this.paddedRect=n,this.pixelRatio=a,this.stretchX=h,this.stretchY=m,this.content=v,this.version=u}get tl(){return[this.paddedRect.x+wo,this.paddedRect.y+wo]}get br(){return[this.paddedRect.x+this.paddedRect.w-wo,this.paddedRect.y+this.paddedRect.h-wo]}get displaySize(){return[(this.paddedRect.w-2*wo)/this.pixelRatio,(this.paddedRect.h-2*wo)/this.pixelRatio]}}class YC{constructor(n,a){const u={},h={};this.haveRenderCallbacks=[];const m=[];this.addImages(n,u,m),this.addImages(a,h,m);const{w:v,h:x}=Q_(m),S=new $o({width:v||1,height:x||1});for(const C in n){const R=n[C],L=u[C].paddedRect;$o.copy(R.data,S,{x:0,y:0},{x:L.x+wo,y:L.y+wo},R.data)}for(const C in a){const R=a[C],L=h[C].paddedRect,D=L.x+wo,H=L.y+wo,G=R.data.width,Y=R.data.height;$o.copy(R.data,S,{x:0,y:0},{x:D,y:H},R.data),$o.copy(R.data,S,{x:0,y:Y-1},{x:D,y:H-1},{width:G,height:1}),$o.copy(R.data,S,{x:0,y:0},{x:D,y:H+Y},{width:G,height:1}),$o.copy(R.data,S,{x:G-1,y:0},{x:D-1,y:H},{width:1,height:Y}),$o.copy(R.data,S,{x:0,y:0},{x:D+G,y:H},{width:1,height:Y})}this.image=S,this.iconPositions=u,this.patternPositions=h}addImages(n,a,u){for(const h in n){const m=n[h],v={x:0,y:0,w:m.data.width+2*wo,h:m.data.height+2*wo};u.push(v),a[h]=new ex(v,m),m.hasRenderCallback&&this.haveRenderCallbacks.push(h)}}patchUpdatedImages(n,a){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(u=>n.hasImage(u)),n.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const u in n.updatedImages)this.patchUpdatedImage(this.iconPositions[u],n.getImage(u),a),this.patchUpdatedImage(this.patternPositions[u],n.getImage(u),a)}patchUpdatedImage(n,a,u){if(!n||!a||n.version===a.version)return;n.version=a.version;const[h,m]=n.tl;u.update(a.data,void 0,{x:h,y:m})}}Jt(ex,"ImagePosition"),Jt(YC,"ImageAtlas");const ta={horizontal:1,vertical:2,horizontalOnly:3},JC=-17;class Hf{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(n,a){const u=new Hf;return u.scale=n||1,u.fontStack=a,u}static forImage(n){const a=new Hf;return a.imageName=n,a}}class xd{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(n,a){const u=new xd;for(let h=0;h<n.sections.length;h++){const m=n.sections[h];m.image?u.addImageSection(m):u.addTextSection(m,a)}return u}length(){return this.text.length}getSection(n){return this.sections[this.sectionIndex[n]]}getSections(){return this.sections}getSectionIndex(n){return this.sectionIndex[n]}getCharCode(n){return this.text.charCodeAt(n)}verticalizePunctuation(n){this.text=function(a,u){let h="";for(let m=0;m<a.length;m++){const v=a.charCodeAt(m+1)||null,x=a.charCodeAt(m-1)||null;h+=!u&&(v&&fg(v)&&!Vf[a[m+1]]||x&&fg(x)&&!Vf[a[m-1]])||!Vf[a[m]]?a[m]:Vf[a[m]]}return h}(this.text,n)}trim(){let n=0;for(let u=0;u<this.text.length&&Bg[this.text.charCodeAt(u)];u++)n++;let a=this.text.length;for(let u=this.text.length-1;u>=0&&u>=n&&Bg[this.text.charCodeAt(u)];u--)a--;this.text=this.text.substring(n,a),this.sectionIndex=this.sectionIndex.slice(n,a)}substring(n,a){const u=new xd;return u.text=this.text.substring(n,a),u.sectionIndex=this.sectionIndex.slice(n,a),u.sections=this.sections,u}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((n,a)=>Math.max(n,this.sections[a].scale),0)}addTextSection(n,a){this.text+=n.text,this.sections.push(Hf.forText(n.scale,n.fontStack||a));const u=this.sections.length-1;for(let h=0;h<n.text.length;++h)this.sectionIndex.push(u)}addImageSection(n){const a=n.image?n.image.name:"";if(a.length===0)return void Ct("Can't add FormattedSection with an empty image.");const u=this.getNextImageSectionCharCode();u?(this.text+=String.fromCharCode(u),this.sections.push(Hf.forImage(a)),this.sectionIndex.push(this.sections.length-1)):Ct("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function tx(i,n,a,u,h,m,v,x,S,C,R,L,D,H,G){const Y=xd.fromFeature(i,h);L===ta.vertical&&Y.verticalizePunctuation(D);let ae=[];const ve=function(Pe,Ye,Ze,at,Rt,tt){if(!Pe)return[];const pt=[],mt=function(Wt,tn,qt,Ln,Ft,fn){let Dn=0;for(let nr=0;nr<Wt.length();nr++){const kn=Wt.getSection(nr);Dn+=QC(Wt.getCharCode(nr),kn,Ln,Ft,tn,fn)}return Dn/Math.max(1,Math.ceil(Dn/qt))}(Pe,Ye,Ze,at,Rt,tt),_t=Pe.text.indexOf("")>=0;let $t=0;for(let Wt=0;Wt<Pe.length();Wt++){const tn=Pe.getSection(Wt),qt=Pe.getCharCode(Wt);if(Bg[qt]||($t+=QC(qt,tn,at,Rt,Ye,tt)),Wt<Pe.length()-1){const Ln=!((it=qt)<11904||!(Zt["Bopomofo Extended"](it)||Zt.Bopomofo(it)||Zt["CJK Compatibility Forms"](it)||Zt["CJK Compatibility Ideographs"](it)||Zt["CJK Compatibility"](it)||Zt["CJK Radicals Supplement"](it)||Zt["CJK Strokes"](it)||Zt["CJK Symbols and Punctuation"](it)||Zt["CJK Unified Ideographs Extension A"](it)||Zt["CJK Unified Ideographs"](it)||Zt["Enclosed CJK Letters and Months"](it)||Zt["Halfwidth and Fullwidth Forms"](it)||Zt.Hiragana(it)||Zt["Ideographic Description Characters"](it)||Zt["Kangxi Radicals"](it)||Zt["Katakana Phonetic Extensions"](it)||Zt.Katakana(it)||Zt["Vertical Forms"](it)||Zt["Yi Radicals"](it)||Zt["Yi Syllables"](it)));($3[qt]||Ln||tn.imageName)&&pt.push(t2(Wt+1,$t,mt,pt,F3(qt,Pe.getCharCode(Wt+1),Ln&&_t),!1))}}var it;return n2(t2(Pe.length(),$t,mt,pt,0,!0))}(Y,C,m,n,u,H),{processBidirectionalText:Te,processStyledBidirectionalText:ye}=A;if(Te&&Y.sections.length===1){const Pe=Te(Y.toString(),ve);for(const Ye of Pe){const Ze=new xd;Ze.text=Ye,Ze.sections=Y.sections;for(let at=0;at<Ye.length;at++)Ze.sectionIndex.push(0);ae.push(Ze)}}else if(ye){const Pe=ye(Y.text,Y.sectionIndex,ve);for(const Ye of Pe){const Ze=new xd;Ze.text=Ye[0],Ze.sectionIndex=Ye[1],Ze.sections=Y.sections,ae.push(Ze)}}else ae=function(Pe,Ye){const Ze=[],at=Pe.text;let Rt=0;for(const tt of Ye)Ze.push(Pe.substring(Rt,tt)),Rt=tt;return Rt<at.length&&Ze.push(Pe.substring(Rt,at.length)),Ze}(Y,ve);const Ce=[],Ae={positionedLines:Ce,text:Y.toString(),top:R[1],bottom:R[1],left:R[0],right:R[0],writingMode:L,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(Pe,Ye,Ze,at,Rt,tt,pt,mt,_t,$t,it,Wt){let tn=0,qt=0,Ln=0;const Ft=mt==="right"?1:mt==="left"?0:.5;let fn=!1;for(const Fn of Rt){const Bn=Fn.getSections();for(const Sr of Bn){if(Sr.imageName)continue;const Mr=Ye[Sr.fontStack];if(Mr&&(fn=Mr.ascender!==void 0&&Mr.descender!==void 0,!fn))break}if(!fn)break}let Dn=0;for(const Fn of Rt){Fn.trim();const Bn=Fn.getMaxScale(),Sr=(Bn-1)*Li,Mr={positionedGlyphs:[],lineOffset:0};Pe.positionedLines[Dn]=Mr;const Pr=Mr.positionedGlyphs;let Er=0;if(!Fn.length()){qt+=tt,++Dn;continue}let qr=0,ei=0;for(let Cr=0;Cr<Fn.length();Cr++){const gi=Fn.getSection(Cr),ui=Fn.getSectionIndex(Cr),Yr=Fn.getCharCode(Cr);let ir=gi.scale,di=null,Ar=null,ho=null,hi=Li,Di=0;const Ii=!(_t===ta.horizontal||!it&&!vf(Yr)||it&&(Bg[Yr]||(nr=Yr,Zt.Arabic(nr)||Zt["Arabic Supplement"](nr)||Zt["Arabic Extended-A"](nr)||Zt["Arabic Presentation Forms-A"](nr)||Zt["Arabic Presentation Forms-B"](nr))));if(gi.imageName){const fo=at[gi.imageName];if(!fo)continue;ho=gi.imageName,Pe.iconsInText=Pe.iconsInText||!0,Ar=fo.paddedRect;const Mi=fo.displaySize;ir=ir*Li/Wt,di={width:Mi[0],height:Mi[1],left:wo,top:-KC,advance:Ii?Mi[1]:Mi[0],localGlyph:!1},Di=fn?-di.height*ir:JC+Bn*Li-Mi[1]*ir,hi=di.advance;const rs=(Ii?Mi[0]:Mi[1])*ir-Li*Bn;rs>0&&rs>Er&&(Er=rs)}else{const fo=Ze[gi.fontStack];if(!fo)continue;fo[Yr]&&(Ar=fo[Yr]);const Mi=Ye[gi.fontStack];if(!Mi)continue;const rs=Mi.glyphs[Yr];if(!rs)continue;if(di=rs.metrics,hi=Yr!==8203?Li:0,fn){const Id=Mi.ascender!==void 0?Math.abs(Mi.ascender):0,ep=Mi.descender!==void 0?Math.abs(Mi.descender):0,tp=(Id+ep)*ir;qr<tp&&(qr=tp,ei=(Id-ep)/2*ir),Di=-Id*ir}else Di=JC+(Bn-ir)*Li}Ii?(Pe.verticalizable=!0,Pr.push({glyph:Yr,imageName:ho,x:tn,y:qt+Di,vertical:Ii,scale:ir,localGlyph:di.localGlyph,fontStack:gi.fontStack,sectionIndex:ui,metrics:di,rect:Ar}),tn+=hi*ir+$t):(Pr.push({glyph:Yr,imageName:ho,x:tn,y:qt+Di,vertical:Ii,scale:ir,localGlyph:di.localGlyph,fontStack:gi.fontStack,sectionIndex:ui,metrics:di,rect:Ar}),tn+=di.advance*ir+$t)}Pr.length!==0&&(Ln=Math.max(tn-$t,Ln),fn?r2(Pr,Ft,Er,ei,tt*Bn/2):r2(Pr,Ft,Er,0,tt/2)),tn=0;const ci=tt*Bn+Er;Mr.lineOffset=Math.max(Er,Sr),qt+=ci,++Dn}var nr;const kn=qt,{horizontalAlign:wn,verticalAlign:Or}=nx(pt);(function(Fn,Bn,Sr,Mr,Pr,Er){const qr=(Bn-Sr)*Pr,ei=-Er*Mr;for(const ci of Fn)for(const Cr of ci.positionedGlyphs)Cr.x+=qr,Cr.y+=ei})(Pe.positionedLines,Ft,wn,Or,Ln,kn),Pe.top+=-Or*kn,Pe.bottom=Pe.top+kn,Pe.left+=-wn*Ln,Pe.right=Pe.left+Ln,Pe.hasBaseline=fn}(Ae,n,a,u,ae,v,x,S,L,C,D,G),!function(Pe){for(const Ye of Pe)if(Ye.positionedGlyphs.length!==0)return!1;return!0}(Ce)&&Ae}const Bg={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},$3={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function QC(i,n,a,u,h,m){if(n.imageName){const v=u[n.imageName];return v?v.displaySize[0]*n.scale*Li/m+h:0}{const v=a[n.fontStack],x=v&&v.glyphs[i];return x?x.metrics.advance*n.scale+h:0}}function e2(i,n,a,u){const h=Math.pow(i-n,2);return u?i<n?h/2:2*h:h+Math.abs(a)*a}function F3(i,n,a){let u=0;return i===10&&(u-=1e4),a&&(u+=150),i!==40&&i!==65288||(u+=50),n!==41&&n!==65289||(u+=50),u}function t2(i,n,a,u,h,m){let v=null,x=e2(n,a,h,m);for(const S of u){const C=e2(n-S.x,a,h,m)+S.badness;C<=x&&(v=S,x=C)}return{index:i,x:n,priorBreak:v,badness:x}}function n2(i){return i?n2(i.priorBreak).concat(i.index):[]}function nx(i){let n=.5,a=.5;switch(i){case"right":case"top-right":case"bottom-right":n=1;break;case"left":case"top-left":case"bottom-left":n=0}switch(i){case"bottom":case"bottom-right":case"bottom-left":a=1;break;case"top":case"top-right":case"top-left":a=0}return{horizontalAlign:n,verticalAlign:a}}function r2(i,n,a,u,h){if(!(n||a||u||h))return;const m=i.length-1,v=i[m],x=(v.x+v.metrics.advance*v.scale)*n;for(let S=0;S<=m;S++)i[S].x-=x,i[S].y+=a+u+h}function B3(i,n,a){const{horizontalAlign:u,verticalAlign:h}=nx(a),m=n[0]-i.displaySize[0]*u,v=n[1]-i.displaySize[1]*h;return{image:i,top:v,bottom:v+i.displaySize[1],left:m,right:m+i.displaySize[0]}}function i2(i,n,a,u,h,m){const v=i.image;let x;if(v.content){const ae=v.content,ve=v.pixelRatio||1;x=[ae[0]/ve,ae[1]/ve,v.displaySize[0]-ae[2]/ve,v.displaySize[1]-ae[3]/ve]}const S=n.left*m,C=n.right*m;let R,L,D,H;a==="width"||a==="both"?(H=h[0]+S-u[3],L=h[0]+C+u[1]):(H=h[0]+(S+C-v.displaySize[0])/2,L=H+v.displaySize[0]);const G=n.top*m,Y=n.bottom*m;return a==="height"||a==="both"?(R=h[1]+G-u[0],D=h[1]+Y+u[2]):(R=h[1]+(G+Y-v.displaySize[1])/2,D=R+v.displaySize[1]),{image:v,top:R,right:L,bottom:D,left:H,collisionPadding:x}}class rl extends te{constructor(n,a,u,h,m){super(n,a),this.angle=h,this.z=u,m!==void 0&&(this.segment=m)}clone(){return new rl(this.x,this.y,this.z,this.angle,this.segment)}}function o2(i,n,a,u,h){if(n.segment===void 0)return!0;let m=n,v=n.segment+1,x=0;for(;x>-a/2;){if(v--,v<0)return!1;x-=i[v].dist(m),m=i[v]}x+=i[v].dist(i[v+1]),v++;const S=[];let C=0;for(;x<a/2;){const R=i[v],L=i[v+1];if(!L)return!1;let D=i[v-1].angleTo(R)-R.angleTo(L);for(D=Math.abs((D+3*Math.PI)%(2*Math.PI)-Math.PI),S.push({distance:x,angleDelta:D}),C+=D;x-S[0].distance>u;)C-=S.shift().angleDelta;if(C>h)return!1;v++,x+=R.dist(L)}return!0}function a2(i){let n=0;for(let a=0;a<i.length-1;a++)n+=i[a].dist(i[a+1]);return n}function s2(i,n,a){return i?.6*n*a:0}function l2(i,n){return Math.max(i?i.right-i.left:0,n?n.right-n.left:0)}function N3(i,n,a,u,h,m){const v=s2(a,h,m),x=l2(a,u)*m;let S=0;const C=a2(i)/2;for(let R=0;R<i.length-1;R++){const L=i[R],D=i[R+1],H=L.dist(D);if(S+H>C){const G=(C-S)/H,Y=Jn(L.x,D.x,G),ae=Jn(L.y,D.y,G),ve=new rl(Y,ae,0,D.angleTo(L),R);return!v||o2(i,ve,x,v,n)?ve:void 0}S+=H}}function j3(i,n,a,u,h,m,v,x,S){const C=s2(u,m,v),R=l2(u,h),L=R*v,D=i[0].x===0||i[0].x===S||i[0].y===0||i[0].y===S;return n-L<n/4&&(n=L+n/4),c2(i,D?n/2*x%n:(R/2+2*m)*v*x%n,n,C,a,L,D,!1,S)}function c2(i,n,a,u,h,m,v,x,S){const C=m/2,R=a2(i);let L=0,D=n-a,H=[];for(let G=0;G<i.length-1;G++){const Y=i[G],ae=i[G+1],ve=Y.dist(ae),Te=ae.angleTo(Y);for(;D+a<L+ve;){D+=a;const ye=(D-L)/ve,Ce=Jn(Y.x,ae.x,ye),Ae=Jn(Y.y,ae.y,ye);if(Ce>=0&&Ce<S&&Ae>=0&&Ae<S&&D-C>=0&&D+C<=R){const Pe=new rl(Ce,Ae,0,Te,G);Pe._round(),u&&!o2(i,Pe,m,u,h)||H.push(Pe)}}L+=ve}return x||H.length||v||(H=c2(i,L/2,a,u,h,m,v,!0,S)),H}function u2(i,n,a,u,h){const m=[];for(let v=0;v<i.length;v++){const x=i[v];let S;for(let C=0;C<x.length-1;C++){let R=x[C],L=x[C+1];R.x<n&&L.x<n||(R.x<n?R=new te(n,R.y+(n-R.x)/(L.x-R.x)*(L.y-R.y))._round():L.x<n&&(L=new te(n,R.y+(n-R.x)/(L.x-R.x)*(L.y-R.y))._round()),R.y<a&&L.y<a||(R.y<a?R=new te(R.x+(a-R.y)/(L.y-R.y)*(L.x-R.x),a)._round():L.y<a&&(L=new te(R.x+(a-R.y)/(L.y-R.y)*(L.x-R.x),a)._round()),R.x>=u&&L.x>=u||(R.x>=u?R=new te(u,R.y+(u-R.x)/(L.x-R.x)*(L.y-R.y))._round():L.x>=u&&(L=new te(u,R.y+(u-R.x)/(L.x-R.x)*(L.y-R.y))._round()),R.y>=h&&L.y>=h||(R.y>=h?R=new te(R.x+(h-R.y)/(L.y-R.y)*(L.x-R.x),h)._round():L.y>=h&&(L=new te(R.x+(h-R.y)/(L.y-R.y)*(L.x-R.x),h)._round()),S&&R.equals(S[S.length-1])||(S=[R],m.push(S)),S.push(L)))))}}return m}Jt(rl,"Anchor");const Gf=1e20;function d2(i,n,a,u,h,m,v,x,S){for(let C=n;C<n+u;C++)h2(i,a*m+C,m,h,v,x,S);for(let C=a;C<a+h;C++)h2(i,C*m+n,1,u,v,x,S)}function h2(i,n,a,u,h,m,v){m[0]=0,v[0]=-Gf,v[1]=Gf,h[0]=i[n];for(let x=1,S=0,C=0;x<u;x++){h[x]=i[n+x*a];const R=x*x;do{const L=m[S];C=(h[x]-h[L]+R-L*L)/(x-L)/2}while(C<=v[S]&&--S>-1);S++,m[S]=x,v[S]=C,v[S+1]=Gf}for(let x=0,S=0;x<u;x++){for(;v[S+1]<x;)S++;const C=m[S],R=x-C;i[n+x*a]=h[C]+R*R}}const ts=2,rx={none:0,ideographs:1,all:2};class bd{constructor(n,a,u){this.requestManager=n,this.localGlyphMode=a,this.localFontFamily=u,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(n){this.url=n}getGlyphs(n,a){const u=[];for(const h in n)for(const m of n[h])u.push({stack:h,id:m});Ge(u,({stack:h,id:m},v)=>{let x=this.entries[h];x||(x=this.entries[h]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let S=x.glyphs[m];if(S!==void 0)return void v(null,{stack:h,id:m,glyph:S});if(S=this._tinySDF(x,h,m),S)return x.glyphs[m]=S,void v(null,{stack:h,id:m,glyph:S});const C=Math.floor(m/256);if(256*C>65535)return void v(new Error("glyphs > 65535 not supported"));if(x.ranges[C])return void v(null,{stack:h,id:m,glyph:S});let R=x.requests[C];R||(R=x.requests[C]=[],bd.loadGlyphRange(h,C,this.url,this.requestManager,(L,D)=>{if(D){x.ascender=D.ascender,x.descender=D.descender;for(const H in D.glyphs)this._doesCharSupportLocalGlyph(+H)||(x.glyphs[+H]=D.glyphs[+H]);x.ranges[C]=!0}for(const H of R)H(L,D);delete x.requests[C]})),R.push((L,D)=>{L?v(L):D&&v(null,{stack:h,id:m,glyph:D.glyphs[m]||null})})},(h,m)=>{if(h)a(h);else if(m){const v={};for(const{stack:x,id:S,glyph:C}of m)v[x]===void 0&&(v[x]={}),v[x].glyphs===void 0&&(v[x].glyphs={}),v[x].glyphs[S]=C&&{id:C.id,bitmap:C.bitmap.clone(),metrics:C.metrics},v[x].ascender=this.entries[x].ascender,v[x].descender=this.entries[x].descender;a(null,v)}})}_doesCharSupportLocalGlyph(n){return this.localGlyphMode!==rx.none&&(this.localGlyphMode===rx.all?!!this.localFontFamily:!!this.localFontFamily&&(Zt["CJK Unified Ideographs"](n)||Zt["Hangul Syllables"](n)||Zt.Hiragana(n)||Zt.Katakana(n)||Zt["CJK Symbols and Punctuation"](n)))}_tinySDF(n,a,u){const h=this.localFontFamily;if(!h||!this._doesCharSupportLocalGlyph(u))return;let m=n.tinySDF;if(!m){let Y="400";/bold/i.test(a)?Y="900":/medium/i.test(a)?Y="500":/light/i.test(a)&&(Y="200"),m=n.tinySDF=new bd.TinySDF({fontFamily:h,fontWeight:Y,fontSize:24*ts,buffer:3*ts,radius:8*ts}),m.fontWeight=Y}if(this.localGlyphs[m.fontWeight][u])return this.localGlyphs[m.fontWeight][u];const v=String.fromCharCode(u),{data:x,width:S,height:C,glyphWidth:R,glyphHeight:L,glyphLeft:D,glyphTop:H,glyphAdvance:G}=m.draw(v);return this.localGlyphs[m.fontWeight][u]={id:u,bitmap:new tl({width:S,height:C},x),metrics:{width:R/ts,height:L/ts,left:D/ts,top:H/ts-27,advance:G/ts,localGlyph:!0}}}}bd.loadGlyphRange=function(i,n,a,u,h){const m=256*n,v=m+255,x=u.transformRequest(u.normalizeGlyphsURL(a).replace("{fontstack}",i).replace("{range}",`${m}-${v}`),jn.Glyphs);Qn(x,(S,C)=>{if(S)h(S);else if(C){const R={},L=function(D){return new Fg(D).readFields(L3,{})}(C);for(const D of L.glyphs)R[D.id]=D;h(null,{glyphs:R,ascender:L.ascender,descender:L.descender})}})},bd.TinySDF=class{constructor({fontSize:i=24,buffer:n=3,radius:a=8,cutoff:u=.25,fontFamily:h="sans-serif",fontWeight:m="normal",fontStyle:v="normal"}={}){this.buffer=n,this.cutoff=u,this.radius=a;const x=this.size=i+4*n,S=this._createCanvas(x),C=this.ctx=S.getContext("2d",{willReadFrequently:!0});C.font=`${v} ${m} ${i}px ${h}`,C.textBaseline="alphabetic",C.textAlign="left",C.fillStyle="black",this.gridOuter=new Float64Array(x*x),this.gridInner=new Float64Array(x*x),this.f=new Float64Array(x),this.z=new Float64Array(x+1),this.v=new Uint16Array(x)}_createCanvas(i){const n=document.createElement("canvas");return n.width=n.height=i,n}draw(i){const{width:n,actualBoundingBoxAscent:a,actualBoundingBoxDescent:u,actualBoundingBoxLeft:h,actualBoundingBoxRight:m}=this.ctx.measureText(i),v=Math.ceil(a),x=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(m-h))),S=Math.min(this.size-this.buffer,v+Math.ceil(u)),C=x+2*this.buffer,R=S+2*this.buffer,L=Math.max(C*R,0),D=new Uint8ClampedArray(L),H={data:D,width:C,height:R,glyphWidth:x,glyphHeight:S,glyphTop:v,glyphLeft:0,glyphAdvance:n};if(x===0||S===0)return H;const{ctx:G,buffer:Y,gridInner:ae,gridOuter:ve}=this;G.clearRect(Y,Y,x,S),G.fillText(i,Y,Y+v);const Te=G.getImageData(Y,Y,x,S);ve.fill(Gf,0,L),ae.fill(0,0,L);for(let ye=0;ye<S;ye++)for(let Ce=0;Ce<x;Ce++){const Ae=Te.data[4*(ye*x+Ce)+3]/255;if(Ae===0)continue;const Pe=(ye+Y)*C+Ce+Y;if(Ae===1)ve[Pe]=0,ae[Pe]=Gf;else{const Ye=.5-Ae;ve[Pe]=Ye>0?Ye*Ye:0,ae[Pe]=Ye<0?Ye*Ye:0}}d2(ve,0,0,C,R,C,this.f,this.v,this.z),d2(ae,Y,Y,x,S,C,this.f,this.v,this.z);for(let ye=0;ye<L;ye++){const Ce=Math.sqrt(ve[ye])-Math.sqrt(ae[ye]);D[ye]=Math.round(255-255*(Ce/this.radius+this.cutoff))}return H}};const wd=wo;function f2(i,n,a,u){const h=[],m=i.image,v=m.pixelRatio,x=m.paddedRect.w-2*wd,S=m.paddedRect.h-2*wd,C=i.right-i.left,R=i.bottom-i.top,L=m.stretchX||[[0,x]],D=m.stretchY||[[0,S]],H=(tt,pt)=>tt+pt[1]-pt[0],G=L.reduce(H,0),Y=D.reduce(H,0),ae=x-G,ve=S-Y;let Te=0,ye=G,Ce=0,Ae=Y,Pe=0,Ye=ae,Ze=0,at=ve;if(m.content&&u){const tt=m.content;Te=Ng(L,0,tt[0]),Ce=Ng(D,0,tt[1]),ye=Ng(L,tt[0],tt[2]),Ae=Ng(D,tt[1],tt[3]),Pe=tt[0]-Te,Ze=tt[1]-Ce,Ye=tt[2]-tt[0]-ye,at=tt[3]-tt[1]-Ae}const Rt=(tt,pt,mt,_t)=>{const $t=jg(tt.stretch-Te,ye,C,i.left),it=Ug(tt.fixed-Pe,Ye,tt.stretch,G),Wt=jg(pt.stretch-Ce,Ae,R,i.top),tn=Ug(pt.fixed-Ze,at,pt.stretch,Y),qt=jg(mt.stretch-Te,ye,C,i.left),Ln=Ug(mt.fixed-Pe,Ye,mt.stretch,G),Ft=jg(_t.stretch-Ce,Ae,R,i.top),fn=Ug(_t.fixed-Ze,at,_t.stretch,Y),Dn=new te($t,Wt),nr=new te(qt,Wt),kn=new te(qt,Ft),wn=new te($t,Ft),Or=new te(it/v,tn/v),Fn=new te(Ln/v,fn/v),Bn=n*Math.PI/180;if(Bn){const Pr=Math.sin(Bn),Er=Math.cos(Bn),qr=[Er,-Pr,Pr,Er];Dn._matMult(qr),nr._matMult(qr),wn._matMult(qr),kn._matMult(qr)}const Sr=tt.stretch+tt.fixed,Mr=pt.stretch+pt.fixed;return{tl:Dn,tr:nr,bl:wn,br:kn,tex:{x:m.paddedRect.x+wd+Sr,y:m.paddedRect.y+wd+Mr,w:mt.stretch+mt.fixed-Sr,h:_t.stretch+_t.fixed-Mr},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Or,pixelOffsetBR:Fn,minFontScaleX:Ye/v/C,minFontScaleY:at/v/R,isSDF:a}};if(u&&(m.stretchX||m.stretchY)){const tt=p2(L,ae,G),pt=p2(D,ve,Y);for(let mt=0;mt<tt.length-1;mt++){const _t=tt[mt],$t=tt[mt+1];for(let it=0;it<pt.length-1;it++)h.push(Rt(_t,pt[it],$t,pt[it+1]))}}else h.push(Rt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:x+1},{fixed:0,stretch:S+1}));return h}function Ng(i,n,a){let u=0;for(const h of i)u+=Math.max(n,Math.min(a,h[1]))-Math.max(n,Math.min(a,h[0]));return u}function p2(i,n,a){const u=[{fixed:-wd,stretch:0}];for(const[h,m]of i){const v=u[u.length-1];u.push({fixed:h-v.stretch,stretch:v.stretch}),u.push({fixed:h-v.stretch,stretch:v.stretch+(m-h)})}return u.push({fixed:n+wd,stretch:a}),u}function jg(i,n,a,u){return i/n*a+u}function Ug(i,n,a,u){return i-n*a/u}function U3(i,n,a,u){const h=n+i.positionedLines[u].lineOffset;return u===0?a+h/2:a+(h+(n+i.positionedLines[u-1].lineOffset))/2}class V3{constructor(n=[],a=H3){if(this.data=n,this.length=this.data.length,this.compare=a,this.length>0)for(let u=(this.length>>1)-1;u>=0;u--)this._down(u)}push(n){this.data.push(n),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const n=this.data[0],a=this.data.pop();return this.length--,this.length>0&&(this.data[0]=a,this._down(0)),n}peek(){return this.data[0]}_up(n){const{data:a,compare:u}=this,h=a[n];for(;n>0;){const m=n-1>>1,v=a[m];if(u(h,v)>=0)break;a[n]=v,n=m}a[n]=h}_down(n){const{data:a,compare:u}=this,h=this.length>>1,m=a[n];for(;n<h;){let v=1+(n<<1),x=a[v];const S=v+1;if(S<this.length&&u(a[S],x)<0&&(v=S,x=a[S]),u(x,m)>=0)break;a[n]=x,n=v}a[n]=m}}function H3(i,n){return i<n?-1:i>n?1:0}function G3(i,n=1,a=!1){let u=1/0,h=1/0,m=-1/0,v=-1/0;const x=i[0];for(let H=0;H<x.length;H++){const G=x[H];(!H||G.x<u)&&(u=G.x),(!H||G.y<h)&&(h=G.y),(!H||G.x>m)&&(m=G.x),(!H||G.y>v)&&(v=G.y)}const S=Math.min(m-u,v-h);let C=S/2;const R=new V3([],W3);if(S===0)return new te(u,h);for(let H=u;H<m;H+=S)for(let G=h;G<v;G+=S)R.push(new Sd(H+C,G+C,C,i));let L=function(H){let G=0,Y=0,ae=0;const ve=H[0];for(let Te=0,ye=ve.length,Ce=ye-1;Te<ye;Ce=Te++){const Ae=ve[Te],Pe=ve[Ce],Ye=Ae.x*Pe.y-Pe.x*Ae.y;Y+=(Ae.x+Pe.x)*Ye,ae+=(Ae.y+Pe.y)*Ye,G+=3*Ye}return new Sd(Y/G,ae/G,0,H)}(i),D=R.length;for(;R.length;){const H=R.pop();(H.d>L.d||!L.d)&&(L=H,a&&console.log("found best %d after %d probes",Math.round(1e4*H.d)/1e4,D)),H.max-L.d<=n||(C=H.h/2,R.push(new Sd(H.p.x-C,H.p.y-C,C,i)),R.push(new Sd(H.p.x+C,H.p.y-C,C,i)),R.push(new Sd(H.p.x-C,H.p.y+C,C,i)),R.push(new Sd(H.p.x+C,H.p.y+C,C,i)),D+=4)}return a&&(console.log(`num probes: ${D}`),console.log(`best distance: ${L.d}`)),L.p}function W3(i,n){return n.max-i.max}class Sd{constructor(n,a,u,h){this.p=new te(n,a),this.h=u,this.d=function(m,v){let x=!1,S=1/0;for(let C=0;C<v.length;C++){const R=v[C];for(let L=0,D=R.length,H=D-1;L<D;H=L++){const G=R[L],Y=R[H];G.y>m.y!=Y.y>m.y&&m.x<(Y.x-G.x)*(m.y-G.y)/(Y.y-G.y)+G.x&&(x=!x),S=Math.min(S,cC(m,G,Y))}}return(x?1:-1)*Math.sqrt(S)}(this.p,h),this.max=this.d+this.h*Math.SQRT2}}const Ed=7,ix=Number.POSITIVE_INFINITY,q3=Math.sqrt(2);function m2(i,[n,a]){let u=0,h=0;if(a===ix){n<0&&(n=0);const m=n/q3;switch(i){case"top-right":case"top-left":h=m-Ed;break;case"bottom-right":case"bottom-left":h=-m+Ed;break;case"bottom":h=-n+Ed;break;case"top":h=n-Ed}switch(i){case"top-right":case"bottom-right":u=-m;break;case"top-left":case"bottom-left":u=m;break;case"left":u=n;break;case"right":u=-n}}else{switch(n=Math.abs(n),a=Math.abs(a),i){case"top-right":case"top-left":case"top":h=a-Ed;break;case"bottom-right":case"bottom-left":case"bottom":h=-a+Ed}switch(i){case"top-right":case"bottom-right":case"right":u=-n;break;case"top-left":case"bottom-left":case"left":u=n}}return[u,h]}function Z3(i,n,a,u,h,m,v,x,S,C){i.createArrays(),i.tilePixelRatio=gn/(512*i.overscaling),i.compareText={},i.iconsNeedLinear=!1;const R=i.layers[0].layout,L=i.layers[0]._unevaluatedLayout._values,D={};if(i.textSizeData.kind==="composite"){const{minZoom:Y,maxZoom:ae}=i.textSizeData;D.compositeTextSizes=[L["text-size"].possiblyEvaluate(new O(Y),x),L["text-size"].possiblyEvaluate(new O(ae),x)]}if(i.iconSizeData.kind==="composite"){const{minZoom:Y,maxZoom:ae}=i.iconSizeData;D.compositeIconSizes=[L["icon-size"].possiblyEvaluate(new O(Y),x),L["icon-size"].possiblyEvaluate(new O(ae),x)]}D.layoutTextSize=L["text-size"].possiblyEvaluate(new O(S+1),x),D.layoutIconSize=L["icon-size"].possiblyEvaluate(new O(S+1),x),D.textMaxSize=L["text-size"].possiblyEvaluate(new O(18),x);const H=R.get("text-rotation-alignment")==="map"&&R.get("symbol-placement")!=="point",G=R.get("text-size");for(const Y of i.features){const ae=R.get("text-font").evaluate(Y,{},x).join(","),ve=G.evaluate(Y,{},x),Te=D.layoutTextSize.evaluate(Y,{},x),ye=(D.layoutIconSize.evaluate(Y,{},x),{horizontal:{},vertical:void 0}),Ce=Y.text;let Ae,Pe=[0,0];if(Ce){const at=Ce.toString(),Rt=R.get("text-letter-spacing").evaluate(Y,{},x)*Li,tt=R.get("text-line-height").evaluate(Y,{},x)*Li,pt=f_(at)?Rt:0,mt=R.get("text-anchor").evaluate(Y,{},x),_t=R.get("text-variable-anchor");if(!_t){const qt=R.get("text-radial-offset").evaluate(Y,{},x);Pe=qt?m2(mt,[qt*Li,ix]):R.get("text-offset").evaluate(Y,{},x).map(Ln=>Ln*Li)}let $t=H?"center":R.get("text-justify").evaluate(Y,{},x);const it=R.get("symbol-placement")==="point",Wt=it?R.get("text-max-width").evaluate(Y,{},x)*Li:1/0,tn=qt=>{i.allowVerticalPlacement&&gf(at)&&(ye.vertical=tx(Ce,n,a,h,ae,Wt,tt,mt,qt,pt,Pe,ta.vertical,!0,Te,ve))};if(!H&&_t){const qt=$t==="auto"?_t.map(Ft=>ox(Ft)):[$t];let Ln=!1;for(let Ft=0;Ft<qt.length;Ft++){const fn=qt[Ft];if(!ye.horizontal[fn])if(Ln)ye.horizontal[fn]=ye.horizontal[0];else{const Dn=tx(Ce,n,a,h,ae,Wt,tt,"center",fn,pt,Pe,ta.horizontal,!1,Te,ve);Dn&&(ye.horizontal[fn]=Dn,Ln=Dn.positionedLines.length===1)}}tn("left")}else{if($t==="auto"&&($t=ox(mt)),it||R.get("text-writing-mode").indexOf("horizontal")>=0||!gf(at)){const qt=tx(Ce,n,a,h,ae,Wt,tt,mt,$t,pt,Pe,ta.horizontal,!1,Te,ve);qt&&(ye.horizontal[$t]=qt)}tn(it?"left":$t)}}let Ye=!1;if(Y.icon&&Y.icon.name){const at=u[Y.icon.name];at&&(Ae=B3(h[Y.icon.name],R.get("icon-offset").evaluate(Y,{},x),R.get("icon-anchor").evaluate(Y,{},x)),Ye=at.sdf,i.sdfIcons===void 0?i.sdfIcons=at.sdf:i.sdfIcons!==at.sdf&&Ct("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(at.pixelRatio!==i.pixelRatio||R.get("icon-rotate").constantOr(1)!==0)&&(i.iconsNeedLinear=!0))}const Ze=v2(ye.horizontal)||ye.vertical;i.iconsInText||(i.iconsInText=!!Ze&&Ze.iconsInText),(Ze||Ae)&&X3(i,Y,ye,Ae,u,D,Te,0,Pe,Ye,v,x,C)}m&&i.generateCollisionDebugBuffers(S,i.collisionBoxArray)}function ox(i){switch(i){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function X3(i,n,a,u,h,m,v,x,S,C,R,L,D){let H=m.textMaxSize.evaluate(n,{},L);H===void 0&&(H=v);const G=i.layers[0].layout,Y=G.get("icon-offset").evaluate(n,{},L),ae=v2(a.horizontal)||a.vertical,ve=D.name==="globe",Te=Li,ye=v/Te,Ce=i.tilePixelRatio*H/Te,Ae=(mt=i.overscaling,i.zoom>18&&mt>2&&(mt>>=1),Math.max(gn/(512*mt),1)*G.get("symbol-spacing")),Pe=G.get("text-padding")*i.tilePixelRatio,Ye=G.get("icon-padding")*i.tilePixelRatio,Ze=oe(G.get("text-max-angle")),at=G.get("text-rotation-alignment")==="map"&&G.get("symbol-placement")!=="point",Rt=G.get("icon-rotation-alignment")==="map"&&G.get("symbol-placement")!=="point",tt=G.get("symbol-placement"),pt=Ae/2;var mt;const _t=G.get("icon-text-fit");let $t;u&&_t!=="none"&&(i.allowVerticalPlacement&&a.vertical&&($t=i2(u,a.vertical,_t,G.get("icon-text-fit-padding"),Y,ye)),ae&&(u=i2(u,ae,_t,G.get("icon-text-fit-padding"),Y,ye)));const it=(Wt,tn,qt)=>{if(tn.x<0||tn.x>=gn||tn.y<0||tn.y>=gn)return;let Ln=null;if(ve){const{x:Ft,y:fn,z:Dn}=D.projectTilePoint(tn.x,tn.y,qt);Ln={anchor:new rl(Ft,fn,Dn,0,void 0),up:D.upVector(qt,tn.x,tn.y)}}(function(Ft,fn,Dn,nr,kn,wn,Or,Fn,Bn,Sr,Mr,Pr,Er,qr,ei,ci,Cr,gi,ui,Yr,ir,di,Ar,ho,hi){const Di=Ft.addToLineVertexArray(fn,nr);let Ii,fo,Mi,rs,Id,ep,tp,K2=0,Y2=0,J2=0,Q2=0,xx=-1,bx=-1;const Os={};let eT=g_("");const eu=Dn?Dn.anchor:fn;let wx=0,Sx=0;if(Bn._unevaluatedLayout.getValue("text-radial-offset")===void 0?[wx,Sx]=Bn.layout.get("text-offset").evaluate(ir,{},hi).map(Fo=>Fo*Li):(wx=Bn.layout.get("text-radial-offset").evaluate(ir,{},hi)*Li,Sx=ix),Ft.allowVerticalPlacement&&kn.vertical){const Fo=kn.vertical;if(ei)ep=ax(Fo),Fn&&(tp=ax(Fn));else{const Bo=Bn.layout.get("text-rotate").evaluate(ir,{},hi)+90;Mi=Vg(Sr,eu,fn,Mr,Pr,Er,Fo,qr,Bo,ci),Fn&&(rs=Vg(Sr,eu,fn,Mr,Pr,Er,Fn,gi,Bo))}}if(wn){const Fo=Bn.layout.get("icon-rotate").evaluate(ir,{},hi),Bo=Bn.layout.get("icon-text-fit")!=="none",np=f2(wn,Fo,Ar,Bo),Cx=Fn?f2(Fn,Fo,Ar,Bo):void 0;fo=Vg(Sr,eu,fn,Mr,Pr,Er,wn,gi,Fo),K2=4*np.length;const tT=Ft.iconSizeData;let tu=null;tT.kind==="source"?(tu=[es*Bn.layout.get("icon-size").evaluate(ir,{},hi)],tu[0]>Hl&&Ct(`${Ft.layerIds[0]}: Value for "icon-size" is >= ${Wf}. Reduce your "icon-size".`)):tT.kind==="composite"&&(tu=[es*di.compositeIconSizes[0].evaluate(ir,{},hi),es*di.compositeIconSizes[1].evaluate(ir,{},hi)],(tu[0]>Hl||tu[1]>Hl)&&Ct(`${Ft.layerIds[0]}: Value for "icon-size" is >= ${Wf}. Reduce your "icon-size".`)),Ft.addSymbols(Ft.icon,np,tu,Yr,ui,ir,!1,Dn,fn,Di.lineStartIndex,Di.lineLength,-1,ho,hi),xx=Ft.icon.placedSymbolArray.length-1,Cx&&(Y2=4*Cx.length,Ft.addSymbols(Ft.icon,Cx,tu,Yr,ui,ir,ta.vertical,Dn,fn,Di.lineStartIndex,Di.lineLength,-1,ho,hi),bx=Ft.icon.placedSymbolArray.length-1)}for(const Fo in kn.horizontal){const Bo=kn.horizontal[Fo];Ii||(eT=g_(Bo.text),ei?Id=ax(Bo):Ii=Vg(Sr,eu,fn,Mr,Pr,Er,Bo,qr,Bn.layout.get("text-rotate").evaluate(ir,{},hi),ci));const np=Bo.positionedLines.length===1;if(J2+=g2(Ft,Dn,fn,Bo,Or,Bn,ei,ir,ci,Di,kn.vertical?ta.horizontal:ta.horizontalOnly,np?Object.keys(kn.horizontal):[Fo],Os,xx,di,ho,hi),np)break}kn.vertical&&(Q2+=g2(Ft,Dn,fn,kn.vertical,Or,Bn,ei,ir,ci,Di,ta.vertical,["vertical"],Os,bx,di,ho,hi));let Kl=-1;const Ex=(Fo,Bo)=>Fo?Math.max(Fo,Bo):Bo;Kl=Ex(Id,Kl),Kl=Ex(ep,Kl),Kl=Ex(tp,Kl);const S$=Kl>-1?1:0;Ft.glyphOffsetArray.length>=Wl.MAX_GLYPHS&&Ct("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),ir.sortKey!==void 0&&Ft.addToSortKeyRanges(Ft.symbolInstances.length,ir.sortKey),Ft.symbolInstances.emplaceBack(eu.x,eu.y,eu.z,fn.x,fn.y,Os.right>=0?Os.right:-1,Os.center>=0?Os.center:-1,Os.left>=0?Os.left:-1,Os.vertical>=0?Os.vertical:-1,xx,bx,eT,Ii!==void 0?Ii:Ft.collisionBoxArray.length,Ii!==void 0?Ii+1:Ft.collisionBoxArray.length,Mi!==void 0?Mi:Ft.collisionBoxArray.length,Mi!==void 0?Mi+1:Ft.collisionBoxArray.length,fo!==void 0?fo:Ft.collisionBoxArray.length,fo!==void 0?fo+1:Ft.collisionBoxArray.length,rs||Ft.collisionBoxArray.length,rs?rs+1:Ft.collisionBoxArray.length,Mr,J2,Q2,K2,Y2,S$,0,wx,Sx,Kl)})(i,tn,Ln,Wt,a,u,h,$t,i.layers[0],i.collisionBoxArray,n.index,n.sourceLayerIndex,i.index,Pe,at,S,0,Ye,Rt,Y,n,m,C,R,L)};if(tt==="line")for(const Wt of u2(n.geometry,0,0,gn,gn)){const tn=j3(Wt,Ae,Ze,a.vertical||ae,u,Te,Ce,i.overscaling,gn);for(const qt of tn)ae&&K3(i,ae.text,pt,qt)||it(Wt,qt,L)}else if(tt==="line-center"){for(const Wt of n.geometry)if(Wt.length>1){const tn=N3(Wt,Ze,a.vertical||ae,u,Te,Ce);tn&&it(Wt,tn,L)}}else if(n.type==="Polygon")for(const Wt of W_(n.geometry,0)){const tn=G3(Wt,16);it(Wt[0],new rl(tn.x,tn.y,0,0,void 0),L)}else if(n.type==="LineString")for(const Wt of n.geometry)it(Wt,new rl(Wt[0].x,Wt[0].y,0,0,void 0),L);else if(n.type==="Point")for(const Wt of n.geometry)for(const tn of Wt)it([tn],new rl(tn.x,tn.y,0,0,void 0),L)}const Wf=255,Hl=Wf*es;function g2(i,n,a,u,h,m,v,x,S,C,R,L,D,H,G,Y,ae){const ve=function(Ce,Ae,Pe,Ye,Ze,at,Rt,tt){const pt=[];if(Ae.positionedLines.length===0)return pt;const mt=Ye.layout.get("text-rotate").evaluate(at,{})*Math.PI/180,_t=function(qt){const Ln=qt[0],Ft=qt[1],fn=Ln*Ft;return fn>0?[Ln,-Ft]:fn<0?[-Ln,Ft]:Ln===0?[Ft,Ln]:[Ft,-Ln]}(Pe);let $t=Math.abs(Ae.top-Ae.bottom);for(const qt of Ae.positionedLines)$t-=qt.lineOffset;const it=Ae.positionedLines.length,Wt=$t/it;let tn=Ae.top-Pe[1];for(let qt=0;qt<it;++qt){const Ln=Ae.positionedLines[qt];tn=U3(Ae,Wt,tn,qt);for(const Ft of Ln.positionedGlyphs){if(!Ft.rect)continue;const fn=Ft.rect||{};let Dn=KC+1,nr=!0,kn=1,wn=0;if(Ft.imageName){const Ar=Rt[Ft.imageName];if(!Ar)continue;if(Ar.sdf){Ct("SDF images are not supported in formatted text and will be ignored.");continue}nr=!1,kn=Ar.pixelRatio,Dn=wo/kn}const Or=(Ze||tt)&&Ft.vertical,Fn=Ft.metrics.advance*Ft.scale/2,Bn=Ft.metrics,Sr=Ft.rect;if(Sr===null)continue;tt&&Ae.verticalizable&&(wn=Ft.imageName?Fn-Ft.metrics.width*Ft.scale/2:0);const Mr=Ze?[Ft.x+Fn,Ft.y]:[0,0];let Pr=[0,0],Er=[0,0],qr=!1;Ze||(Or?(Er=[Ft.x+Fn+_t[0],Ft.y+_t[1]-wn],qr=!0):Pr=[Ft.x+Fn+Pe[0],Ft.y+Pe[1]-wn]);const ei=Sr.w*Ft.scale/(kn*(Ft.localGlyph?ts:1)),ci=Sr.h*Ft.scale/(kn*(Ft.localGlyph?ts:1));let Cr,gi,ui,Yr;if(Or){const Ar=Ft.y-tn,ho=new te(-Fn,Fn-Ar),hi=-Math.PI/2,Di=new te(...Er);Cr=new te(-Fn+Pr[0],Pr[1]),Cr._rotateAround(hi,ho)._add(Di),Cr.x+=-Ar+Fn,Cr.y-=(Bn.left-Dn)*Ft.scale;const Ii=Ft.imageName?Bn.advance*Ft.scale:Li*Ft.scale,fo=String.fromCharCode(Ft.glyph);S3(fo)?Cr.x+=(1-Dn)*Ft.scale:E3(fo)?Cr.x+=Ii-Bn.height*Ft.scale+(-Dn-1)*Ft.scale:Cr.x+=Ft.imageName||Bn.width+2*Dn===Sr.w&&Bn.height+2*Dn===Sr.h?(Ii-ci)/2:(Ii-(Bn.height+2*Dn)*Ft.scale)/2,gi=new te(Cr.x,Cr.y-ei),ui=new te(Cr.x+ci,Cr.y),Yr=new te(Cr.x+ci,Cr.y-ei)}else{const Ar=(Bn.left-Dn)*Ft.scale-Fn+Pr[0],ho=(-Bn.top-Dn)*Ft.scale+Pr[1],hi=Ar+ei,Di=ho+ci;Cr=new te(Ar,ho),gi=new te(hi,ho),ui=new te(Ar,Di),Yr=new te(hi,Di)}if(mt){let Ar;Ar=Ze?new te(0,0):qr?new te(_t[0],_t[1]):new te(Pe[0],Pe[1]),Cr._rotateAround(mt,Ar),gi._rotateAround(mt,Ar),ui._rotateAround(mt,Ar),Yr._rotateAround(mt,Ar)}const ir=new te(0,0),di=new te(0,0);pt.push({tl:Cr,tr:gi,bl:ui,br:Yr,tex:fn,writingMode:Ae.writingMode,glyphOffset:Mr,sectionIndex:Ft.sectionIndex,isSDF:nr,pixelOffsetTL:ir,pixelOffsetBR:di,minFontScaleX:0,minFontScaleY:0})}}return pt}(0,u,S,m,v,x,h,i.allowVerticalPlacement),Te=i.textSizeData;let ye=null;Te.kind==="source"?(ye=[es*m.layout.get("text-size").evaluate(x,{},ae)],ye[0]>Hl&&Ct(`${i.layerIds[0]}: Value for "text-size" is >= ${Wf}. Reduce your "text-size".`)):Te.kind==="composite"&&(ye=[es*G.compositeTextSizes[0].evaluate(x,{},ae),es*G.compositeTextSizes[1].evaluate(x,{},ae)],(ye[0]>Hl||ye[1]>Hl)&&Ct(`${i.layerIds[0]}: Value for "text-size" is >= ${Wf}. Reduce your "text-size".`)),i.addSymbols(i.text,ve,ye,S,v,x,R,n,a,C.lineStartIndex,C.lineLength,H,Y,ae);for(const Ce of L)D[Ce]=i.text.placedSymbolArray.length-1;return 4*ve.length}function v2(i){for(const n in i)return i[n];return null}function Vg(i,n,a,u,h,m,v,x,S,C){let R=v.top,L=v.bottom,D=v.left,H=v.right;const G=v.collisionPadding;if(G&&(D-=G[0],R-=G[1],H+=G[2],L+=G[3]),S){const Y=new te(D,R),ae=new te(H,R),ve=new te(D,L),Te=new te(H,L),ye=oe(S);let Ce=new te(0,0);C&&(Ce=new te(C[0],C[1])),Y._rotateAround(ye,Ce),ae._rotateAround(ye,Ce),ve._rotateAround(ye,Ce),Te._rotateAround(ye,Ce),D=Math.min(Y.x,ae.x,ve.x,Te.x),H=Math.max(Y.x,ae.x,ve.x,Te.x),R=Math.min(Y.y,ae.y,ve.y,Te.y),L=Math.max(Y.y,ae.y,ve.y,Te.y)}return i.emplaceBack(n.x,n.y,n.z,a.x,a.y,D,R,H,L,x,u,h,m),i.length-1}function ax(i){i.collisionPadding&&(i.top-=i.collisionPadding[1],i.bottom+=i.collisionPadding[3]);const n=i.bottom-i.top;return n>0?Math.max(10,n):null}function K3(i,n,a,u){const h=i.compareText;if(n in h){const m=h[n];for(let v=m.length-1;v>=0;v--)if(u.dist(m[v])<a)return!0}else h[n]=[];return h[n].push(u),!1}function y2(i,n){const a=i.fovAboveCenter,u=i.elevation?i.elevation.getMinElevationBelowMSL()*n:0,h=(i._camera.position[2]*i.worldSize-u)/Math.cos(i._pitch),m=Math.sin(a)*h/Math.sin(Math.max(Math.PI/2-i._pitch-a,.01)),v=Math.sin(i._pitch)*m+h;return Math.min(1.01*v,h*(1/i._horizonShift))}function Jc(i,n){if(!n.isReprojectedInTileSpace)return{scale:1<<i.z,x:i.x,y:i.y,x2:i.x+1,y2:i.y+1,projection:n};const a=Math.pow(2,-i.z),u=i.x*a,h=(i.x+1)*a,m=i.y*a,v=(i.y+1)*a,x=ea(u),S=ea(h),C=Gi(m),R=Gi(v),L=n.project(x,C),D=n.project(S,C),H=n.project(S,R),G=n.project(x,R);let Y=Math.min(L.x,D.x,H.x,G.x),ae=Math.min(L.y,D.y,H.y,G.y),ve=Math.max(L.x,D.x,H.x,G.x),Te=Math.max(L.y,D.y,H.y,G.y);const ye=a/16;function Ce(Pe,Ye,Ze,at,Rt,tt){const pt=(Ze+Rt)/2,mt=(at+tt)/2,_t=n.project(ea(pt),Gi(mt)),$t=Math.max(0,Y-_t.x,ae-_t.y,_t.x-ve,_t.y-Te);Y=Math.min(Y,_t.x),ve=Math.max(ve,_t.x),ae=Math.min(ae,_t.y),Te=Math.max(Te,_t.y),$t>ye&&(Ce(Pe,_t,Ze,at,pt,mt),Ce(_t,Ye,pt,mt,Rt,tt))}Ce(L,D,u,m,h,m),Ce(D,H,h,m,h,v),Ce(H,G,h,v,u,v),Ce(G,L,u,v,u,m),Y-=ye,ae-=ye,ve+=ye,Te+=ye;const Ae=1/Math.max(ve-Y,Te-ae);return{scale:Ae,x:Y*Ae,y:ae*Ae,x2:ve*Ae,y2:Te*Ae,projection:n}}const Y3=Ya(new Float32Array(16));class Gl{constructor(n){this.spec=n,this.name=n.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(n,a){return{x:0,y:0,z:0}}unproject(n,a){return new wr(0,0)}projectTilePoint(n,a,u){return{x:n,y:a,z:0}}locationPoint(n,a,u=!0){return n._coordinatePoint(n.locationCoordinate(a),u)}pixelsPerMeter(n,a){return Qa(1,n)*a}pixelSpaceConversion(n,a,u){return 1}farthestPixelDistance(n){return y2(n,n.pixelsPerMeter)}pointCoordinate(n,a,u,h){const m=n.horizonLineFromTop(!1),v=new te(a,Math.max(m,u));return n.rayIntersectionCoordinate(n.pointRayIntersection(v,h))}pointCoordinate3D(n,a,u){const h=new te(a,u);if(n.elevation)return n.elevation.pointCoordinate(h);{const m=this.pointCoordinate(n,h.x,h.y,0);return[m.x,m.y,m.z]}}isPointAboveHorizon(n,a){if(n.elevation)return!this.pointCoordinate3D(n,a.x,a.y);const u=n.horizonLineFromTop();return a.y<u}createInversionMatrix(n,a){return Y3}createTileMatrix(n,a,u){let h,m,v;const x=u.canonical,S=Ya(new Float64Array(16));if(this.isReprojectedInTileSpace){const C=Jc(x,this);h=1,m=C.x+u.wrap*C.scale,v=C.y,Gc(S,S,[h/C.scale,h/C.scale,n.pixelsPerMeter/a])}else h=a/n.zoomScale(x.z),m=(x.x+Math.pow(2,x.z)*u.wrap)*h,v=x.y*h;return Sf(S,S,[m,v,0]),Gc(S,S,[h/gn,h/gn,1]),S}upVector(n,a,u){return[0,0,1]}upVectorScale(n,a,u){return{metersToTile:1}}}class J3 extends Gl{constructor(n){super(n),this.range=[4,7],this.center=n.center||[-96,37.5];const[a,u]=this.parallels=n.parallels||[29.5,45.5],h=Math.sin(oe(a));this.n=(h+Math.sin(oe(u)))/2,this.c=1+h*(2*this.n-h),this.r0=Math.sqrt(this.c)/this.n}project(n,a){const{n:u,c:h,r0:m}=this,v=oe(n-this.center[0]),x=oe(a),S=Math.sqrt(h-2*u*Math.sin(x))/u;return{x:S*Math.sin(v*u),y:S*Math.cos(v*u)-m,z:0}}unproject(n,a){const{n:u,c:h,r0:m}=this,v=m+a;let x=Math.atan2(n,Math.abs(v))*Math.sign(v);v*u<0&&(x-=Math.PI*Math.sign(n)*Math.sign(v));const S=oe(this.center[0])*u;x=Be(x,-Math.PI-S,Math.PI-S);const C=pe(fe(x/u)+this.center[0],-180,180),R=Math.asin(pe((h-(n*n+v*v)*u*u)/(2*u),-1,1)),L=pe(fe(R),-Wi,Wi);return new wr(C,L)}}const qf=1.340264,Zf=-.081106,Xf=893e-6,Kf=.003796,Hg=Math.sqrt(3)/2;class Q3 extends Gl{project(n,a){a=a/180*Math.PI,n=n/180*Math.PI;const u=Math.asin(Hg*Math.sin(a)),h=u*u,m=h*h*h;return{x:.5*(n*Math.cos(u)/(Hg*(qf+3*Zf*h+m*(7*Xf+9*Kf*h)))/Math.PI+.5),y:1-.5*(u*(qf+Zf*h+m*(Xf+Kf*h))/Math.PI+1),z:0}}unproject(n,a){n=(2*n-.5)*Math.PI;let u=a=(2*(1-a)-1)*Math.PI,h=u*u,m=h*h*h;for(let R,L,D,H=0;H<12&&(L=u*(qf+Zf*h+m*(Xf+Kf*h))-a,D=qf+3*Zf*h+m*(7*Xf+9*Kf*h),R=L/D,u=pe(u-R,-Math.PI/3,Math.PI/3),h=u*u,m=h*h*h,!(Math.abs(R)<1e-12));++H);const v=Hg*n*(qf+3*Zf*h+m*(7*Xf+9*Kf*h))/Math.cos(u),x=Math.asin(Math.sin(u)/Hg),S=pe(180*v/Math.PI,-180,180),C=pe(180*x/Math.PI,-Wi,Wi);return new wr(S,C)}}class e$ extends Gl{constructor(n){super(n),this.wrap=!0,this.supportsWorldCopies=!0}project(n,a){return{x:.5+n/360,y:.5-a/360,z:0}}unproject(n,a){const u=360*(n-.5),h=pe(360*(.5-a),-Wi,Wi);return new wr(u,h)}}const Cd=Math.PI/2;function Gg(i){return Math.tan((Cd+i)/2)}class t$ extends Gl{constructor(n){super(n),this.center=n.center||[0,30];const[a,u]=this.parallels=n.parallels||[30,30];let h=oe(a),m=oe(u);this.southernCenter=h+m<0,this.southernCenter&&(h=-h,m=-m);const v=Math.cos(h),x=Gg(h);this.n=h===m?Math.sin(h):Math.log(v/Math.cos(m))/Math.log(Gg(m)/x),this.f=v*Math.pow(Gg(h),this.n)/this.n}project(n,a){a=oe(a),this.southernCenter&&(a=-a),n=oe(n-this.center[0]);const u=1e-6,{n:h,f:m}=this;m>0?a<-Cd+u&&(a=-Cd+u):a>Cd-u&&(a=Cd-u);const v=m/Math.pow(Gg(a),h);let x=v*Math.sin(h*n),S=m-v*Math.cos(h*n);return x=.5*(x/Math.PI+.5),S=.5*(S/Math.PI+.5),{x,y:this.southernCenter?S:1-S,z:0}}unproject(n,a){n=(2*n-.5)*Math.PI,this.southernCenter&&(a=1-a),a=(2*(1-a)-.5)*Math.PI;const{n:u,f:h}=this,m=h-a,v=Math.sign(m),x=Math.sign(u)*Math.sqrt(n*n+m*m);let S=Math.atan2(n,Math.abs(m))*v;m*u<0&&(S-=Math.PI*Math.sign(n)*v);const C=pe(fe(S/u)+this.center[0],-180,180),R=pe(fe(2*Math.atan(Math.pow(h/x,1/u))-Cd),-Wi,Wi);return new wr(C,this.southernCenter?-R:R)}}class _2 extends Gl{constructor(n){super(n),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(n,a){return{x:Is(n),y:Ms(a),z:0}}unproject(n,a){const u=ea(n),h=Gi(a);return new wr(u,h)}}const x2=oe(Wi);class n$ extends Gl{project(n,a){const u=(a=oe(a))*a,h=u*u;return{x:.5*((n=oe(n))*(.8707-.131979*u+h*(h*(.003971*u-.001529*h)-.013791))/Math.PI+.5),y:1-.5*(a*(1.007226+u*(.015085+h*(.028874*u-.044475-.005916*h)))/Math.PI+1),z:0}}unproject(n,a){n=(2*n-.5)*Math.PI;let u=a=(2*(1-a)-1)*Math.PI,h=25,m=0,v=u*u;do{v=u*u;const C=v*v;m=(u*(1.007226+v*(.015085+C*(.028874*v-.044475-.005916*C)))-a)/(1.007226+v*(.045255+C*(.259866*v-.311325-.005916*11*C))),u=pe(u-m,-x2,x2)}while(Math.abs(m)>1e-6&&--h>0);v=u*u;const x=pe(fe(n/(.8707+v*(v*(v*v*v*(.003971-.001529*v)-.013791)-.131979))),-180,180),S=fe(u);return new wr(x,S)}}const b2=oe(Wi);class r$ extends Gl{project(n,a){a=oe(a),n=oe(n);const u=Math.cos(a),h=2/Math.PI,m=Math.acos(u*Math.cos(n/2)),v=Math.sin(m)/m,x=.5*(n*h+2*u*Math.sin(n/2)/v)||0,S=.5*(a+Math.sin(a)/v)||0;return{x:.5*(x/Math.PI+.5),y:1-.5*(S/Math.PI+1),z:0}}unproject(n,a){let u=n=(2*n-.5)*Math.PI,h=a=(2*(1-a)-1)*Math.PI,m=25;const v=1e-6;let x=0,S=0;do{const C=Math.cos(h),R=Math.sin(h),L=2*R*C,D=R*R,H=C*C,G=Math.cos(u/2),Y=Math.sin(u/2),ae=2*G*Y,ve=Y*Y,Te=1-H*G*G,ye=Te?1/Te:0,Ce=Te?Math.acos(C*G)*Math.sqrt(1/Te):0,Ae=.5*(2*Ce*C*Y+2*u/Math.PI)-n,Pe=.5*(Ce*R+h)-a,Ye=.5*ye*(H*ve+Ce*C*G*D)+1/Math.PI,Ze=ye*(ae*L/4-Ce*R*Y),at=.125*ye*(L*Y-Ce*R*H*ae),Rt=.5*ye*(D*G+Ce*ve*C)+.5,tt=Ze*at-Rt*Ye;x=(Pe*Ze-Ae*Rt)/tt,S=(Ae*at-Pe*Ye)/tt,u=pe(u-x,-Math.PI,Math.PI),h=pe(h-S,-b2,b2)}while((Math.abs(x)>v||Math.abs(S)>v)&&--m>0);return new wr(fe(u),fe(h))}}class w2 extends Gl{constructor(n){super(n),this.center=n.center||[0,0],this.parallels=n.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(oe(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(n,a){const{scale:u,cosPhi:h}=this;return{x:oe(n)*h*u+.5,y:-Math.sin(oe(a))/h*u+.5,z:0}}unproject(n,a){const{scale:u,cosPhi:h}=this,m=-(a-.5)/u,v=pe(fe((n-.5)/u)/h,-180,180),x=Math.asin(pe(m*h,-1,1)),S=pe(fe(x),-Wi,Wi);return new wr(v,S)}}class i$ extends _2{constructor(n){super(n),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(n,a,u){const h=Rf(n,a,u);return ii(h,h,Of(Ts(u))),{x:h[0],y:h[1],z:h[2]}}locationPoint(n,a){const u=ud(a.lat,a.lng),h=lo([],u),m=n.elevation?n.elevation.getAtPointOrZero(n.locationCoordinate(a),n._centerAltitude):n._centerAltitude;If(u,u,h,Qa(1,0)*gn*m);const v=Ya(new Float64Array(16));return Hc(v,n.pixelMatrix,n.globeMatrix),ii(u,u,v),new te(u[0],u[1])}pixelsPerMeter(n,a){return Qa(1,0)*a}pixelSpaceConversion(n,a,u){const h=Qa(1,n)*a,m=Jn(Qa(1,45)*a,h,u);return this.pixelsPerMeter(n,a)/m}createTileMatrix(n,a,u){const h=A_(Ts(u.canonical));return Hc(new Float64Array(16),n.globeMatrix,h)}createInversionMatrix(n,a){const{center:u}=n,h=Of(Ts(a));return _g(h,h,oe(u.lng)),x_(h,h,oe(u.lat)),Gc(h,h,[n._pixelsPerMercatorPixel,n._pixelsPerMercatorPixel,1]),Float32Array.from(h)}pointCoordinate(n,a,u,h){return XE(n,a,u,!0)||new hd(0,0)}pointCoordinate3D(n,a,u){const h=this.pointCoordinate(n,a,u,0);return[h.x,h.y,h.z]}isPointAboveHorizon(n,a){return!XE(n,a.x,a.y,!1)}farthestPixelDistance(n){const a=function(h,m){const v=h.cameraToCenterDistance,x=h._centerAltitude*m,S=h._camera,C=h._camera.forward(),R=Qs([],Qo([],C,-v),[0,0,x]),L=h.worldSize/(2*Math.PI),D=[0,0,-L],H=h.width/h.height,G=Math.tan(h.fovAboveCenter),Y=Qo([],S.up(),G),ae=Qo([],S.right(),G*H),ve=lo([],Qs([],Qs([],C,Y),ae)),Te=[];let ye;if(new E_(R,ve).closestPointOnSphere(D,L,Te)){const Ce=Qs([],Te,D),Ae=Ja([],Ce,R);ye=Math.cos(h.fovAboveCenter)*Ef(Ae)}else{const Ce=Ja([],R,D),Ae=Ja([],D,R);lo(Ae,Ae);const Pe=Ef(Ce)-L;ye=Math.sqrt(Pe*(Pe+2*L));const Ye=Math.acos(ye/(L+Pe))-Math.acos(wa(C,Ae));ye*=Math.cos(Ye)}return 1.01*ye}(n,this.pixelsPerMeter(n.center.lat,n.worldSize)),u=dd(n.zoom);if(u>0){const h=y2(n,Qa(1,n.center.lat)*n.worldSize),m=n.worldSize/(2*Math.PI),v=Math.max(n.width,n.height)/n.worldSize*Math.PI;return Jn(a,h+m*(1-Math.cos(v)),Math.pow(u,10))}return a}upVector(n,a,u){return Rf(a,u,n,1)}upVectorScale(n){return{metersToTile:xg(wg(Ts(n)))}}}function S2(i){const n=i.parallels,a=!!n&&Math.abs(n[0]+n[1])<.01;switch(i.name){case"mercator":return new _2(i);case"equirectangular":return new e$(i);case"naturalEarth":return new n$(i);case"equalEarth":return new Q3(i);case"winkelTripel":return new r$(i);case"albers":return a?new w2(i):new J3(i);case"lambertConformalConic":return a?new w2(i):new t$(i);case"globe":return new i$(i)}throw new Error(`Invalid projection name: ${i.name}`)}const o$=Og.types,a$=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Wg(i,n,a,u,h,m,v,x,S,C,R,L,D){const H=x?Math.min(Hl,Math.round(x[0])):0,G=x?Math.min(Hl,Math.round(x[1])):0;i.emplaceBack(n,a,Math.round(32*u),Math.round(32*h),m,v,(H<<1)+(S?1:0),G,16*C,16*R,256*L,256*D)}function qg(i,n,a,u,h,m,v){i.emplaceBack(n,a,u,h,m,v)}function Zg(i,n,a,u,h){i.emplaceBack(n,a,u,h),i.emplaceBack(n,a,u,h),i.emplaceBack(n,a,u,h),i.emplaceBack(n,a,u,h)}function s$(i){for(const n of i.sections)if(m_(n.text))return!0;return!1}class sx{constructor(n){this.layoutVertexArray=new vt,this.indexArray=new cn,this.programConfigurations=n,this.segments=new si,this.dynamicLayoutVertexArray=new Et,this.opacityVertexArray=new dn,this.placedSymbolArray=new ai,this.globeExtVertexArray=new Dt}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(n,a,u,h){this.isEmpty()||(u&&(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,m3.members),this.indexBuffer=n.createIndexBuffer(this.indexArray,a),this.dynamicLayoutVertexBuffer=n.createVertexBuffer(this.dynamicLayoutVertexArray,v3.members,!0),this.opacityVertexBuffer=n.createVertexBuffer(this.opacityVertexArray,a$,!0),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=n.createVertexBuffer(this.globeExtVertexArray,g3.members,!0)),this.opacityVertexBuffer.itemSize=1),(u||h)&&this.programConfigurations.upload(n))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}}Jt(sx,"SymbolBuffers");class lx{constructor(n,a,u){this.layoutVertexArray=new n,this.layoutAttributes=a,this.indexArray=new u,this.segments=new si,this.collisionVertexArray=new Hn,this.collisionVertexArrayExt=new Un}upload(n){this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=n.createVertexBuffer(this.collisionVertexArray,y3.members,!0),this.collisionVertexBufferExt=n.createVertexBuffer(this.collisionVertexArrayExt,_3.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}Jt(lx,"CollisionBuffers");class Wl{constructor(n){this.collisionBoxArray=n.collisionBoxArray,this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(v=>v.id),this.index=n.index,this.pixelRatio=n.pixelRatio,this.sourceLayerIndex=n.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Ya([]),this.placementViewportMatrix=Ya([]);const a=this.layers[0]._unevaluatedLayout._values;this.textSizeData=K_(this.zoom,a["text-size"]),this.iconSizeData=K_(this.zoom,a["icon-size"]);const u=this.layers[0].layout,h=u.get("symbol-sort-key"),m=u.get("symbol-z-order");this.canOverlap=u.get("text-allow-overlap")||u.get("icon-allow-overlap")||u.get("text-ignore-placement")||u.get("icon-ignore-placement"),this.sortFeaturesByKey=m!=="viewport-y"&&h.constantOr(1)!==void 0,this.sortFeaturesByY=(m==="viewport-y"||m==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=u.get("text-writing-mode").map(v=>ta[v]),this.stateDependentLayerIds=this.layers.filter(v=>v.isStateDependent()).map(v=>v.id),this.sourceID=n.sourceID,this.projection=n.projection}createArrays(){this.text=new sx(new Vc(this.layers,this.zoom,n=>/^text/.test(n))),this.icon=new sx(new Vc(this.layers,this.zoom,n=>/^icon/.test(n))),this.glyphOffsetArray=new so,this.lineVertexArray=new od,this.symbolInstances=new kr}calculateGlyphDependencies(n,a,u,h,m){for(let v=0;v<n.length;v++)if(a[n.charCodeAt(v)]=!0,h&&m){const x=Vf[n.charAt(v)];x&&(a[x.charCodeAt(0)]=!0)}}populate(n,a,u,h){const m=this.layers[0],v=m.layout,x=this.projection.name==="globe",S=v.get("text-font"),C=v.get("text-field"),R=v.get("icon-image"),L=(C.value.kind!=="constant"||C.value.value instanceof Yn&&!C.value.value.isEmpty()||C.value.value.toString().length>0)&&(S.value.kind!=="constant"||S.value.value.length>0),D=R.value.kind!=="constant"||!!R.value.value||Object.keys(R.parameters).length>0,H=v.get("symbol-sort-key");if(this.features=[],!L&&!D)return;const G=a.iconDependencies,Y=a.glyphDependencies,ae=a.availableImages,ve=new O(this.zoom);for(const{feature:Te,id:ye,index:Ce,sourceLayerIndex:Ae}of n){const Pe=m._featureFilter.needGeometry,Ye=Xc(Te,Pe);if(!m._featureFilter.filter(ve,Ye,u))continue;if(Pe||(Ye.geometry=el(Te,u,h)),x&&Te.type!==1&&u.z<=5){const tt=Ye.geometry,pt=.98078528056,mt=(_t,$t)=>wa(Rf(_t.x,_t.y,u,1),Rf($t.x,$t.y,u,1))<pt;for(let _t=0;_t<tt.length;_t++)tt[_t]=vk(tt[_t],mt)}let Ze,at;if(L){const tt=m.getValueAndResolveTokens("text-field",Ye,u,ae),pt=Yn.factory(tt);s$(pt)&&(this.hasRTLText=!0),(!this.hasRTLText||b()==="unavailable"||this.hasRTLText&&A.isParsed())&&(Ze=w3(pt,m,Ye))}if(D){const tt=m.getValueAndResolveTokens("icon-image",Ye,u,ae);at=tt instanceof hr?tt:hr.fromString(tt)}if(!Ze&&!at)continue;const Rt=this.sortFeaturesByKey?H.evaluate(Ye,{},u):void 0;if(this.features.push({id:ye,text:Ze,icon:at,index:Ce,sourceLayerIndex:Ae,geometry:Ye.geometry,properties:Te.properties,type:o$[Te.type],sortKey:Rt}),at&&(G[at.name]=!0),Ze){const tt=S.evaluate(Ye,{},u).join(","),pt=v.get("text-rotation-alignment")==="map"&&v.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(ta.vertical)>=0;for(const mt of Ze.sections)if(mt.image)G[mt.image.name]=!0;else{const _t=gf(Ze.toString()),$t=mt.fontStack||tt,it=Y[$t]=Y[$t]||{};this.calculateGlyphDependencies(mt.text,it,pt,this.allowVerticalPlacement,_t)}}}v.get("symbol-placement")==="line"&&(this.features=function(Te){const ye={},Ce={},Ae=[];let Pe=0;function Ye(tt){Ae.push(Te[tt]),Pe++}function Ze(tt,pt,mt){const _t=Ce[tt];return delete Ce[tt],Ce[pt]=_t,Ae[_t].geometry[0].pop(),Ae[_t].geometry[0]=Ae[_t].geometry[0].concat(mt[0]),_t}function at(tt,pt,mt){const _t=ye[pt];return delete ye[pt],ye[tt]=_t,Ae[_t].geometry[0].shift(),Ae[_t].geometry[0]=mt[0].concat(Ae[_t].geometry[0]),_t}function Rt(tt,pt,mt){const _t=mt?pt[0][pt[0].length-1]:pt[0][0];return`${tt}:${_t.x}:${_t.y}`}for(let tt=0;tt<Te.length;tt++){const pt=Te[tt],mt=pt.geometry,_t=pt.text?pt.text.toString():null;if(!_t){Ye(tt);continue}const $t=Rt(_t,mt),it=Rt(_t,mt,!0);if($t in Ce&&it in ye&&Ce[$t]!==ye[it]){const Wt=at($t,it,mt),tn=Ze($t,it,Ae[Wt].geometry);delete ye[$t],delete Ce[it],Ce[Rt(_t,Ae[tn].geometry,!0)]=tn,Ae[Wt].geometry=null}else $t in Ce?Ze($t,it,mt):it in ye?at($t,it,mt):(Ye(tt),ye[$t]=Pe-1,Ce[it]=Pe-1)}return Ae.filter(tt=>tt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Te,ye)=>Te.sortKey-ye.sortKey)}update(n,a,u,h){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(n,a,this.layers,u,h),this.icon.programConfigurations.updatePaintArrays(n,a,this.layers,u,h))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(n){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(n),this.iconCollisionBox.upload(n)),this.text.upload(n,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(n,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=S2(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(n,a){const u=this.lineVertexArray.length;if(n.segment!==void 0)for(const{x:h,y:m}of a)this.lineVertexArray.emplaceBack(h,m);return{lineStartIndex:u,lineLength:this.lineVertexArray.length-u}}addSymbols(n,a,u,h,m,v,x,S,C,R,L,D,H,G){const Y=n.indexArray,ae=n.layoutVertexArray,ve=n.globeExtVertexArray,Te=n.segments.prepareSegment(4*a.length,ae,Y,this.canOverlap?v.sortKey:void 0),ye=this.glyphOffsetArray.length,Ce=Te.vertexLength,Ae=this.allowVerticalPlacement&&x===ta.vertical?Math.PI/2:0,Pe=v.text&&v.text.sections;for(let Ze=0;Ze<a.length;Ze++){const{tl:at,tr:Rt,bl:tt,br:pt,tex:mt,pixelOffsetTL:_t,pixelOffsetBR:$t,minFontScaleX:it,minFontScaleY:Wt,glyphOffset:tn,isSDF:qt,sectionIndex:Ln}=a[Ze],Ft=Te.vertexLength,fn=tn[1];if(Wg(ae,C.x,C.y,at.x,fn+at.y,mt.x,mt.y,u,qt,_t.x,_t.y,it,Wt),Wg(ae,C.x,C.y,Rt.x,fn+Rt.y,mt.x+mt.w,mt.y,u,qt,$t.x,_t.y,it,Wt),Wg(ae,C.x,C.y,tt.x,fn+tt.y,mt.x,mt.y+mt.h,u,qt,_t.x,$t.y,it,Wt),Wg(ae,C.x,C.y,pt.x,fn+pt.y,mt.x+mt.w,mt.y+mt.h,u,qt,$t.x,$t.y,it,Wt),S){const{x:Dn,y:nr,z:kn}=S.anchor,[wn,Or,Fn]=S.up;qg(ve,Dn,nr,kn,wn,Or,Fn),qg(ve,Dn,nr,kn,wn,Or,Fn),qg(ve,Dn,nr,kn,wn,Or,Fn),qg(ve,Dn,nr,kn,wn,Or,Fn),Zg(n.dynamicLayoutVertexArray,Dn,nr,kn,Ae)}else Zg(n.dynamicLayoutVertexArray,C.x,C.y,C.z,Ae);Y.emplaceBack(Ft,Ft+1,Ft+2),Y.emplaceBack(Ft+1,Ft+2,Ft+3),Te.vertexLength+=4,Te.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(tn[0]),Ze!==a.length-1&&Ln===a[Ze+1].sectionIndex||n.programConfigurations.populatePaintArrays(ae.length,v,v.index,{},H,G,Pe&&Pe[Ln])}const Ye=S?S.anchor:C;n.placedSymbolArray.emplaceBack(Ye.x,Ye.y,Ye.z,C.x,C.y,ye,this.glyphOffsetArray.length-ye,Ce,R,L,C.segment,u?u[0]:0,u?u[1]:0,h[0],h[1],x,0,!1,0,D,0)}_commitLayoutVertex(n,a,u,h,m,v,x){n.emplaceBack(a,u,h,m,v,Math.round(x.x),Math.round(x.y))}_addCollisionDebugVertices(n,a,u,h,m,v,x){const S=u.segments.prepareSegment(4,u.layoutVertexArray,u.indexArray),C=S.vertexLength,R=x.tileAnchorX,L=x.tileAnchorY;for(let H=0;H<4;H++)u.collisionVertexArray.emplaceBack(0,0,0,0);u.collisionVertexArrayExt.emplaceBack(a,-n.padding,-n.padding),u.collisionVertexArrayExt.emplaceBack(a,n.padding,-n.padding),u.collisionVertexArrayExt.emplaceBack(a,n.padding,n.padding),u.collisionVertexArrayExt.emplaceBack(a,-n.padding,n.padding),this._commitLayoutVertex(u.layoutVertexArray,h,m,v,R,L,new te(n.x1,n.y1)),this._commitLayoutVertex(u.layoutVertexArray,h,m,v,R,L,new te(n.x2,n.y1)),this._commitLayoutVertex(u.layoutVertexArray,h,m,v,R,L,new te(n.x2,n.y2)),this._commitLayoutVertex(u.layoutVertexArray,h,m,v,R,L,new te(n.x1,n.y2)),S.vertexLength+=4;const D=u.indexArray;D.emplaceBack(C,C+1),D.emplaceBack(C+1,C+2),D.emplaceBack(C+2,C+3),D.emplaceBack(C+3,C),S.primitiveLength+=4}_addTextDebugCollisionBoxes(n,a,u,h,m,v){for(let x=h;x<m;x++){const S=u.get(x),C=this.getSymbolInstanceTextSize(n,v,a,x);this._addCollisionDebugVertices(S,C,this.textCollisionBox,S.projectedAnchorX,S.projectedAnchorY,S.projectedAnchorZ,v)}}_addIconDebugCollisionBoxes(n,a,u,h,m,v){for(let x=h;x<m;x++){const S=u.get(x),C=this.getSymbolInstanceIconSize(n,a,v.placedIconSymbolIndex);this._addCollisionDebugVertices(S,C,this.iconCollisionBox,S.projectedAnchorX,S.projectedAnchorY,S.projectedAnchorZ,v)}}generateCollisionDebugBuffers(n,a){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new lx(en,UC.members,Ti),this.iconCollisionBox=new lx(en,UC.members,Ti);const u=vd(this.iconSizeData,n),h=vd(this.textSizeData,n);for(let m=0;m<this.symbolInstances.length;m++){const v=this.symbolInstances.get(m);this._addTextDebugCollisionBoxes(h,n,a,v.textBoxStartIndex,v.textBoxEndIndex,v),this._addTextDebugCollisionBoxes(h,n,a,v.verticalTextBoxStartIndex,v.verticalTextBoxEndIndex,v),this._addIconDebugCollisionBoxes(u,n,a,v.iconBoxStartIndex,v.iconBoxEndIndex,v),this._addIconDebugCollisionBoxes(u,n,a,v.verticalIconBoxStartIndex,v.verticalIconBoxEndIndex,v)}}getSymbolInstanceTextSize(n,a,u,h){const m=this.text.placedSymbolArray.get(a.rightJustifiedTextSymbolIndex>=0?a.rightJustifiedTextSymbolIndex:a.centerJustifiedTextSymbolIndex>=0?a.centerJustifiedTextSymbolIndex:a.leftJustifiedTextSymbolIndex>=0?a.leftJustifiedTextSymbolIndex:a.verticalPlacedTextSymbolIndex>=0?a.verticalPlacedTextSymbolIndex:h),v=kg(this.textSizeData,n,m)/Li;return this.tilePixelRatio*v}getSymbolInstanceIconSize(n,a,u){const h=this.icon.placedSymbolArray.get(u),m=kg(this.iconSizeData,n,h);return this.tilePixelRatio*m}_commitDebugCollisionVertexUpdate(n,a,u){n.emplaceBack(a,-u,-u),n.emplaceBack(a,u,-u),n.emplaceBack(a,u,u),n.emplaceBack(a,-u,u)}_updateTextDebugCollisionBoxes(n,a,u,h,m,v){for(let x=h;x<m;x++){const S=u.get(x),C=this.getSymbolInstanceTextSize(n,v,a,x);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,C,S.padding)}}_updateIconDebugCollisionBoxes(n,a,u,h,m,v){for(let x=h;x<m;x++){const S=u.get(x),C=this.getSymbolInstanceIconSize(n,a,v);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,C,S.padding)}}updateCollisionDebugBuffers(n,a){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const u=vd(this.iconSizeData,n),h=vd(this.textSizeData,n);for(let m=0;m<this.symbolInstances.length;m++){const v=this.symbolInstances.get(m);this._updateTextDebugCollisionBoxes(h,n,a,v.textBoxStartIndex,v.textBoxEndIndex,v),this._updateTextDebugCollisionBoxes(h,n,a,v.verticalTextBoxStartIndex,v.verticalTextBoxEndIndex,v),this._updateIconDebugCollisionBoxes(u,n,a,v.iconBoxStartIndex,v.iconBoxEndIndex,v.placedIconSymbolIndex),this._updateIconDebugCollisionBoxes(u,n,a,v.verticalIconBoxStartIndex,v.verticalIconBoxEndIndex,v.placedIconSymbolIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(n,a,u,h,m,v,x,S,C){const R={};if(a<u){const{x1:L,y1:D,x2:H,y2:G,padding:Y,projectedAnchorX:ae,projectedAnchorY:ve,projectedAnchorZ:Te,tileAnchorX:ye,tileAnchorY:Ce,featureIndex:Ae}=n.get(a);R.textBox={x1:L,y1:D,x2:H,y2:G,padding:Y,projectedAnchorX:ae,projectedAnchorY:ve,projectedAnchorZ:Te,tileAnchorX:ye,tileAnchorY:Ce},R.textFeatureIndex=Ae}if(h<m){const{x1:L,y1:D,x2:H,y2:G,padding:Y,projectedAnchorX:ae,projectedAnchorY:ve,projectedAnchorZ:Te,tileAnchorX:ye,tileAnchorY:Ce,featureIndex:Ae}=n.get(h);R.verticalTextBox={x1:L,y1:D,x2:H,y2:G,padding:Y,projectedAnchorX:ae,projectedAnchorY:ve,projectedAnchorZ:Te,tileAnchorX:ye,tileAnchorY:Ce},R.verticalTextFeatureIndex=Ae}if(v<x){const{x1:L,y1:D,x2:H,y2:G,padding:Y,projectedAnchorX:ae,projectedAnchorY:ve,projectedAnchorZ:Te,tileAnchorX:ye,tileAnchorY:Ce,featureIndex:Ae}=n.get(v);R.iconBox={x1:L,y1:D,x2:H,y2:G,padding:Y,projectedAnchorX:ae,projectedAnchorY:ve,projectedAnchorZ:Te,tileAnchorX:ye,tileAnchorY:Ce},R.iconFeatureIndex=Ae}if(S<C){const{x1:L,y1:D,x2:H,y2:G,padding:Y,projectedAnchorX:ae,projectedAnchorY:ve,projectedAnchorZ:Te,tileAnchorX:ye,tileAnchorY:Ce,featureIndex:Ae}=n.get(S);R.verticalIconBox={x1:L,y1:D,x2:H,y2:G,padding:Y,projectedAnchorX:ae,projectedAnchorY:ve,projectedAnchorZ:Te,tileAnchorX:ye,tileAnchorY:Ce},R.verticalIconFeatureIndex=Ae}return R}deserializeCollisionBoxes(n){this.collisionArrays=[];for(let a=0;a<this.symbolInstances.length;a++){const u=this.symbolInstances.get(a);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(n,u.textBoxStartIndex,u.textBoxEndIndex,u.verticalTextBoxStartIndex,u.verticalTextBoxEndIndex,u.iconBoxStartIndex,u.iconBoxEndIndex,u.verticalIconBoxStartIndex,u.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(n,a){const u=n.placedSymbolArray.get(a),h=u.vertexStartIndex+4*u.numGlyphs;for(let m=u.vertexStartIndex;m<h;m+=4)n.indexArray.emplaceBack(m,m+1,m+2),n.indexArray.emplaceBack(m+1,m+2,m+3)}getSortedSymbolIndexes(n){if(this.sortedAngle===n&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const a=Math.sin(n),u=Math.cos(n),h=[],m=[],v=[];for(let x=0;x<this.symbolInstances.length;++x){v.push(x);const S=this.symbolInstances.get(x);h.push(0|Math.round(a*S.tileAnchorX+u*S.tileAnchorY)),m.push(S.featureIndex)}return v.sort((x,S)=>h[x]-h[S]||m[S]-m[x]),v}addToSortKeyRanges(n,a){const u=this.sortKeyRanges[this.sortKeyRanges.length-1];u&&u.sortKey===a?u.symbolInstanceEnd=n+1:this.sortKeyRanges.push({sortKey:a,symbolInstanceStart:n,symbolInstanceEnd:n+1})}sortFeatures(n){if(this.sortFeaturesByY&&this.sortedAngle!==n&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(n),this.sortedAngle=n,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const a of this.symbolInstanceIndexes){const u=this.symbolInstances.get(a);this.featureSortOrder.push(u.featureIndex);const{rightJustifiedTextSymbolIndex:h,centerJustifiedTextSymbolIndex:m,leftJustifiedTextSymbolIndex:v,verticalPlacedTextSymbolIndex:x,placedIconSymbolIndex:S,verticalPlacedIconSymbolIndex:C}=u;h>=0&&this.addIndicesForPlacedSymbol(this.text,h),m>=0&&m!==h&&this.addIndicesForPlacedSymbol(this.text,m),v>=0&&v!==m&&v!==h&&this.addIndicesForPlacedSymbol(this.text,v),x>=0&&this.addIndicesForPlacedSymbol(this.text,x),S>=0&&this.addIndicesForPlacedSymbol(this.icon,S),C>=0&&this.addIndicesForPlacedSymbol(this.icon,C)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}Jt(Wl,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),Wl.MAX_GLYPHS=65535,Wl.addDynamicAttributes=Zg;const l$=new be({"symbol-placement":new K(nt.layout_symbol["symbol-placement"]),"symbol-spacing":new K(nt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new K(nt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new se(nt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new K(nt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new K(nt.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new K(nt.layout_symbol["icon-ignore-placement"]),"icon-optional":new K(nt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new K(nt.layout_symbol["icon-rotation-alignment"]),"icon-size":new se(nt.layout_symbol["icon-size"]),"icon-text-fit":new K(nt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new K(nt.layout_symbol["icon-text-fit-padding"]),"icon-image":new se(nt.layout_symbol["icon-image"]),"icon-rotate":new se(nt.layout_symbol["icon-rotate"]),"icon-padding":new K(nt.layout_symbol["icon-padding"]),"icon-keep-upright":new K(nt.layout_symbol["icon-keep-upright"]),"icon-offset":new se(nt.layout_symbol["icon-offset"]),"icon-anchor":new se(nt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new K(nt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new K(nt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new K(nt.layout_symbol["text-rotation-alignment"]),"text-field":new se(nt.layout_symbol["text-field"]),"text-font":new se(nt.layout_symbol["text-font"]),"text-size":new se(nt.layout_symbol["text-size"]),"text-max-width":new se(nt.layout_symbol["text-max-width"]),"text-line-height":new se(nt.layout_symbol["text-line-height"]),"text-letter-spacing":new se(nt.layout_symbol["text-letter-spacing"]),"text-justify":new se(nt.layout_symbol["text-justify"]),"text-radial-offset":new se(nt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new K(nt.layout_symbol["text-variable-anchor"]),"text-anchor":new se(nt.layout_symbol["text-anchor"]),"text-max-angle":new K(nt.layout_symbol["text-max-angle"]),"text-writing-mode":new K(nt.layout_symbol["text-writing-mode"]),"text-rotate":new se(nt.layout_symbol["text-rotate"]),"text-padding":new K(nt.layout_symbol["text-padding"]),"text-keep-upright":new K(nt.layout_symbol["text-keep-upright"]),"text-transform":new se(nt.layout_symbol["text-transform"]),"text-offset":new se(nt.layout_symbol["text-offset"]),"text-allow-overlap":new K(nt.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new K(nt.layout_symbol["text-ignore-placement"]),"text-optional":new K(nt.layout_symbol["text-optional"])});var cx={paint:new be({"icon-opacity":new se(nt.paint_symbol["icon-opacity"]),"icon-color":new se(nt.paint_symbol["icon-color"]),"icon-halo-color":new se(nt.paint_symbol["icon-halo-color"]),"icon-halo-width":new se(nt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new se(nt.paint_symbol["icon-halo-blur"]),"icon-translate":new K(nt.paint_symbol["icon-translate"]),"icon-translate-anchor":new K(nt.paint_symbol["icon-translate-anchor"]),"text-opacity":new se(nt.paint_symbol["text-opacity"]),"text-color":new se(nt.paint_symbol["text-color"],{runtimeType:Qr,getOverride:i=>i.textColor,hasOverride:i=>!!i.textColor}),"text-halo-color":new se(nt.paint_symbol["text-halo-color"]),"text-halo-width":new se(nt.paint_symbol["text-halo-width"]),"text-halo-blur":new se(nt.paint_symbol["text-halo-blur"]),"text-translate":new K(nt.paint_symbol["text-translate"]),"text-translate-anchor":new K(nt.paint_symbol["text-translate-anchor"])}),layout:l$};class E2{constructor(n){this.type=n.property.overrides?n.property.overrides.runtimeType:Gr,this.defaultValue=n}evaluate(n){if(n.formattedSection){const a=this.defaultValue.property.overrides;if(a&&a.hasOverride(n.formattedSection))return a.getOverride(n.formattedSection)}return n.feature&&n.featureState?this.defaultValue.evaluate(n.feature,n.featureState):this.defaultValue.property.specification.default}eachChild(n){this.defaultValue.isConstant()||n(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Jt(E2,"FormatSectionOverride",{omit:["defaultValue"]});class Xg extends Ka{constructor(n){super(n,cx)}recalculate(n,a){super.recalculate(n,a),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const u=this.layout.get("text-writing-mode");if(u){const h=[];for(const m of u)h.indexOf(m)<0&&h.push(m);this.layout._values["text-writing-mode"]=h}else this.layout._values["text-writing-mode"]=this.layout.get("symbol-placement")==="point"?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(n,a,u,h){const m=this.layout.get(n).evaluate(a,{},u,h),v=this._unevaluatedLayout._values[n];return v.isDataDriven()||Ll(v.value)||!m?m:function(x,S){return S.replace(/{([^{}]+)}/g,(C,R)=>R in x?String(x[R]):"")}(a.properties,m)}createBucket(n){return new Wl(n)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const n of cx.paint.overridableProperties){if(!Xg.hasPaintOverride(this.layout,n))continue;const a=this.paint.get(n),u=new E2(a),h=new Yu(u,a.property.specification);let m=null;m=a.value.kind==="constant"||a.value.kind==="source"?new of("source",h):new Lc("composite",h,a.value.zoomStops,a.value._interpolationType),this.paint._values[n]=new ce(a.property,m,a.parameters)}}_handleOverridablePaintPropertyUpdate(n,a,u){return!(!this.layout||a.isDataDriven()||u.isDataDriven())&&Xg.hasPaintOverride(this.layout,n)}static hasPaintOverride(n,a){const u=n.get("text-field"),h=cx.paint.properties[a];let m=!1;const v=x=>{for(const S of x)if(h.overrides&&h.overrides.hasOverride(S))return void(m=!0)};if(u.value.kind==="constant"&&u.value.value instanceof Yn)v(u.value.value.sections);else if(u.value.kind==="source"){const x=C=>{m||(C instanceof Us&&Dr(C.value)===Ao?v(C.value.sections):C instanceof ws?v(C.sections):C.eachChild(x))},S=u.value;S._styleExpression&&x(S._styleExpression.expression)}return m}getProgramConfiguration(n){return new jl(this,n)}}var c$={paint:new be({"background-color":new K(nt.paint_background["background-color"]),"background-pattern":new K(nt.paint_background["background-pattern"]),"background-opacity":new K(nt.paint_background["background-opacity"])})},u$={paint:new be({"raster-opacity":new K(nt.paint_raster["raster-opacity"]),"raster-hue-rotate":new K(nt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new K(nt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new K(nt.paint_raster["raster-brightness-max"]),"raster-saturation":new K(nt.paint_raster["raster-saturation"]),"raster-contrast":new K(nt.paint_raster["raster-contrast"]),"raster-resampling":new K(nt.paint_raster["raster-resampling"]),"raster-fade-duration":new K(nt.paint_raster["raster-fade-duration"])})};class d$ extends Ka{constructor(n){super(n,{}),this.implementation=n}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}isLayerDraped(){return this.implementation.renderToTile!==void 0}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(n){this.implementation.onAdd&&this.implementation.onAdd(n,n.painter.context.gl)}onRemove(n){this.implementation.onRemove&&this.implementation.onRemove(n,n.painter.context.gl)}}var h$={paint:new be({"sky-type":new K(nt.paint_sky["sky-type"]),"sky-atmosphere-sun":new K(nt.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new K(nt.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new K(nt.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new K(nt.paint_sky["sky-gradient-radius"]),"sky-gradient":new xe(nt.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new K(nt.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new K(nt.paint_sky["sky-atmosphere-color"]),"sky-opacity":new K(nt.paint_sky["sky-opacity"])})};function ux(i,n,a){const u=[0,0,1],h=VE([]);return GE(h,h,a?-oe(i)+Math.PI:oe(i)),HE(h,h,-oe(n)),BE(u,u,h),lo(u,u)}const f$={circle:class extends Ka{constructor(i){super(i,Ek)}createBucket(i){return new k_(i)}queryRadius(i){const n=i;return fd("circle-radius",this,n)+fd("circle-stroke-width",this,n)+Cg(this.paint.get("circle-translate"))}queryIntersectsFeature(i,n,a,u,h,m,v,x){const S=fC(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),m.angle,i.pixelToTileUnitsFactor),C=this.paint.get("circle-radius").evaluate(n,a)+this.paint.get("circle-stroke-width").evaluate(n,a);return pC(i,u,m,v,x,this.paint.get("circle-pitch-alignment")==="map",this.paint.get("circle-pitch-scale")==="map",S,C)}getProgramIds(){return["circle"]}getProgramConfiguration(i){return new jl(this,i)}},heatmap:class extends Ka{createBucket(i){return new gC(i)}constructor(i){super(i,Mk),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(i){i==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=N_({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(i){return fd("heatmap-radius",this,i)}queryIntersectsFeature(i,n,a,u,h,m,v,x){const S=this.paint.get("heatmap-radius").evaluate(n,a);return pC(i,u,m,v,x,!0,!0,new te(0,0),S)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(i){return new jl(this,i)}},hillshade:class extends Ka{constructor(i){super(i,Pk)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}getProgramIds(){return["hillshade","hillshadePrepare"]}},fill:class extends Ka{constructor(i){super(i,Gk)}getProgramIds(){const i=this.paint.get("fill-pattern"),n=i&&i.constantOr(1),a=[n?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&a.push(n&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),a}getProgramConfiguration(i){return new jl(this,i)}recalculate(i,n){super.recalculate(i,n);const a=this.paint._values["fill-outline-color"];a.value.kind==="constant"&&a.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(i){return new Ag(i)}queryRadius(){return Cg(this.paint.get("fill-translate"))}queryIntersectsFeature(i,n,a,u,h,m){return!i.queryGeometry.isAboveHorizon&&lC(hC(i.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),m.angle,i.pixelToTileUnitsFactor),u)}isTileClipped(){return!0}},"fill-extrusion":class extends Ka{constructor(i){super(i,s3)}createBucket(i){return new Nf(i)}queryRadius(){return Cg(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(i){return new jl(this,i)}queryIntersectsFeature(i,n,a,u,h,m,v,x,S){const C=fC(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),m.angle,i.pixelToTileUnitsFactor),R=this.paint.get("fill-extrusion-height").evaluate(n,a),L=this.paint.get("fill-extrusion-base").evaluate(n,a),D=[0,0],H=x&&m.elevation,G=m.elevation?m.elevation.exaggeration():1,Y=i.tile.getBucket(this);if(H&&Y instanceof Nf){const Ce=Y.centroidVertexArray,Ae=S+1;Ae<Ce.length&&(D[0]=Ce.geta_centroid_pos0(Ae),D[1]=Ce.geta_centroid_pos1(Ae))}if(D[0]===0&&D[1]===1)return!1;m.projection.name==="globe"&&(u=LC([u],[new te(0,0),new te(gn,gn)],i.tileID.canonical).map(Ce=>Ce.polygon).flat());const ae=H?x:null,[ve,Te]=function(Ce,Ae,Pe,Ye,Ze,at,Rt,tt,pt,mt,_t){return Ce.projection.name==="globe"?function($t,it,Wt,tn,qt,Ln,Ft,fn,Dn,nr,kn){const wn=[],Or=[],Fn=$t.projection.upVectorScale(kn,$t.center.lat,$t.worldSize).metersToTile,Bn=[0,0,0,1],Sr=[0,0,0,1],Mr=(Er,qr,ei,ci)=>{Er[0]=qr,Er[1]=ei,Er[2]=ci,Er[3]=1},Pr=zC();Wt>0&&(Wt+=Pr),tn+=Pr;for(const Er of it){const qr=[],ei=[];for(const ci of Er){const Cr=ci.x+qt.x,gi=ci.y+qt.y,ui=$t.projection.projectTilePoint(Cr,gi,kn),Yr=$t.projection.upVector(kn,ci.x,ci.y);let ir=Wt,di=tn;if(Ft){const Ar=FC(Cr,gi,Wt,tn,Ft,fn,Dn,nr);ir+=Ar.base,di+=Ar.top}Wt!==0?Mr(Bn,ui.x+Yr[0]*Fn*ir,ui.y+Yr[1]*Fn*ir,ui.z+Yr[2]*Fn*ir):Mr(Bn,ui.x,ui.y,ui.z),Mr(Sr,ui.x+Yr[0]*Fn*di,ui.y+Yr[1]*Fn*di,ui.z+Yr[2]*Fn*di),ii(Bn,Bn,Ln),ii(Sr,Sr,Ln),qr.push(new gd(Bn[0],Bn[1],Bn[2])),ei.push(new gd(Sr[0],Sr[1],Sr[2]))}wn.push(qr),Or.push(ei)}return[wn,Or]}(Ce,Ae,Pe,Ye,Ze,at,Rt,tt,pt,mt,_t):Rt?function($t,it,Wt,tn,qt,Ln,Ft,fn,Dn){const nr=[],kn=[],wn=[0,0,0,1];for(const Or of $t){const Fn=[],Bn=[];for(const Sr of Or){const Mr=Sr.x+tn.x,Pr=Sr.y+tn.y,Er=FC(Mr,Pr,it,Wt,Ln,Ft,fn,Dn);wn[0]=Mr,wn[1]=Pr,wn[2]=Er.base,wn[3]=1,Wc(wn,wn,qt),wn[3]=Math.max(wn[3],1e-5);const qr=new gd(wn[0]/wn[3],wn[1]/wn[3],wn[2]/wn[3]);wn[0]=Mr,wn[1]=Pr,wn[2]=Er.top,wn[3]=1,Wc(wn,wn,qt),wn[3]=Math.max(wn[3],1e-5);const ei=new gd(wn[0]/wn[3],wn[1]/wn[3],wn[2]/wn[3]);Fn.push(qr),Bn.push(ei)}nr.push(Fn),kn.push(Bn)}return[nr,kn]}(Ae,Pe,Ye,Ze,at,Rt,tt,pt,mt):function($t,it,Wt,tn,qt){const Ln=[],Ft=[],fn=qt[8]*it,Dn=qt[9]*it,nr=qt[10]*it,kn=qt[11]*it,wn=qt[8]*Wt,Or=qt[9]*Wt,Fn=qt[10]*Wt,Bn=qt[11]*Wt;for(const Sr of $t){const Mr=[],Pr=[];for(const Er of Sr){const qr=Er.x+tn.x,ei=Er.y+tn.y,ci=qt[0]*qr+qt[4]*ei+qt[12],Cr=qt[1]*qr+qt[5]*ei+qt[13],gi=qt[2]*qr+qt[6]*ei+qt[14],ui=qt[3]*qr+qt[7]*ei+qt[15],Yr=ci+fn,ir=Cr+Dn,di=gi+nr,Ar=Math.max(ui+kn,1e-5),ho=ci+wn,hi=Cr+Or,Di=gi+Fn,Ii=Math.max(ui+Bn,1e-5);Mr.push(new gd(Yr/Ar,ir/Ar,di/Ar)),Pr.push(new gd(ho/Ii,hi/Ii,Di/Ii))}Ln.push(Mr),Ft.push(Pr)}return[Ln,Ft]}(Ae,Pe,Ye,Ze,at)}(m,u,L,R,C,v,ae,D,G,m.center.lat,i.tileID.canonical),ye=i.queryGeometry;return function(Ce,Ae,Pe){let Ye=1/0;lC(Pe,Ae)&&(Ye=$C(Pe,Ae[0]));for(let Ze=0;Ze<Ae.length;Ze++){const at=Ae[Ze],Rt=Ce[Ze];for(let tt=0;tt<at.length-1;tt++){const pt=at[tt],mt=[pt,at[tt+1],Rt[tt+1],Rt[tt],pt];sC(Pe,mt)&&(Ye=Math.min(Ye,$C(Pe,mt)))}}return Ye!==1/0&&Ye}(ve,Te,ye.isPointQuery()?ye.screenBounds:ye.screenGeometry)}},line:class extends Ka{constructor(i){super(i,BC),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(i){if(i==="line-gradient"){const n=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=n._styleExpression&&n._styleExpression.expression instanceof Gh,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(i,n){super.recalculate(i,n),this.paint._values["line-floorwidth"]=NC.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,i)}createBucket(i){return new Dg(i)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration(i){return new jl(this,i)}queryRadius(i){const n=i,a=jC(fd("line-width",this,n),fd("line-gap-width",this,n)),u=fd("line-offset",this,n);return a/2+Math.abs(u)+Cg(this.paint.get("line-translate"))}queryIntersectsFeature(i,n,a,u,h,m){if(i.queryGeometry.isAboveHorizon)return!1;const v=hC(i.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),m.angle,i.pixelToTileUnitsFactor),x=i.pixelToTileUnitsFactor/2*jC(this.paint.get("line-width").evaluate(n,a),this.paint.get("line-gap-width").evaluate(n,a)),S=this.paint.get("line-offset").evaluate(n,a);return S&&(u=function(C,R){const L=[],D=new te(0,0);for(let H=0;H<C.length;H++){const G=C[H],Y=[];for(let ae=0;ae<G.length;ae++){const ve=G[ae],Te=G[ae+1],ye=ae===0?D:ve.sub(G[ae-1])._unit()._perp(),Ce=ae===G.length-1?D:Te.sub(ve)._unit()._perp(),Ae=ye._add(Ce)._unit();Ae._mult(1/(Ae.x*Ce.x+Ae.y*Ce.y)),Y.push(Ae._mult(R)._add(ve))}L.push(Y)}return L}(u,S*i.pixelToTileUnitsFactor)),function(C,R,L){for(let D=0;D<R.length;D++){const H=R[D];if(C.length>=3){for(let G=0;G<H.length;G++)if(Kc(C,H[G]))return!0}if(xk(C,H,L))return!0}return!1}(v,u,x)}isTileClipped(){return!0}},symbol:Xg,background:class extends Ka{constructor(i){super(i,c$)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends Ka{constructor(i){super(i,u$)}getProgramIds(){return["raster"]}},sky:class extends Ka{constructor(i){super(i,h$),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(i){i==="sky-gradient"?this._updateColorRamp():i!=="sky-atmosphere-sun"&&i!=="sky-atmosphere-halo-color"&&i!=="sky-atmosphere-color"&&i!=="sky-atmosphere-sun-intensity"||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=N_({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(i){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const n=i.style.light.properties.get("position");return this._lightPosition.azimuthal!==n.azimuthal||this._lightPosition.polar!==n.polar}return!1}getCenter(i,n){if(this.paint.get("sky-type")==="atmosphere"){const u=this.paint.get("sky-atmosphere-sun"),h=!u,m=i.style.light,v=m.properties.get("position");return h&&m.properties.get("anchor")==="viewport"&&Ct("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),h?ux(v.azimuthal,90-v.polar,n):ux(u[0],90-u[1],n)}const a=this.paint.get("sky-gradient-center");return ux(a[0],90-a[1],n)}is3D(){return!1}isSky(){return!0}markSkyboxValid(i){this._skyboxInvalidated=!1,this._lightPosition=i.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const i=this.paint.get("sky-type");return i==="atmosphere"?["skyboxCapture","skybox"]:i==="gradient"?["skyboxGradient"]:null}}};class Yf{constructor(n,a,u,h){this.context=n,this.format=u,this.texture=n.gl.createTexture(),this.update(a,h)}update(n,a,u){const{width:h,height:m}=n,{context:v}=this,{gl:x}=v,{HTMLImageElement:S,HTMLCanvasElement:C,HTMLVideoElement:R,ImageData:L,ImageBitmap:D}=w;if(x.bindTexture(x.TEXTURE_2D,this.texture),v.pixelStoreUnpackFlipY.set(!1),v.pixelStoreUnpack.set(1),v.pixelStoreUnpackPremultiplyAlpha.set(this.format===x.RGBA&&(!a||a.premultiply!==!1)),u||this.size&&this.size[0]===h&&this.size[1]===m){const{x:H,y:G}=u||{x:0,y:0};n instanceof S||n instanceof C||n instanceof R||n instanceof L||D&&n instanceof D?x.texSubImage2D(x.TEXTURE_2D,0,H,G,x.RGBA,x.UNSIGNED_BYTE,n):x.texSubImage2D(x.TEXTURE_2D,0,H,G,h,m,x.RGBA,x.UNSIGNED_BYTE,n.data)}else this.size=[h,m],n instanceof S||n instanceof C||n instanceof R||n instanceof L||D&&n instanceof D?x.texImage2D(x.TEXTURE_2D,0,this.format,this.format,x.UNSIGNED_BYTE,n):x.texImage2D(x.TEXTURE_2D,0,this.format,h,m,0,this.format,x.UNSIGNED_BYTE,n.data);this.useMipmap=!!(a&&a.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&x.generateMipmap(x.TEXTURE_2D)}bind(n,a){const{context:u}=this,{gl:h}=u;h.bindTexture(h.TEXTURE_2D,this.texture),n!==this.filter&&(h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,n),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,this.useMipmap?n===h.NEAREST?h.NEAREST_MIPMAP_NEAREST:h.LINEAR_MIPMAP_NEAREST:n),this.filter=n),a!==this.wrap&&(h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,a),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,a),this.wrap=a)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:n}=this.context;n.deleteTexture(this.texture),this.texture=null}}class p${constructor(n){this._callback=n,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class m${constructor(){this.tasks={},this.taskQueue=[],ut(["process"],this),this.invoker=new p$(this.process),this.nextId=0}add(n,a){const u=this.nextId++,h=function({type:m,isSymbolTile:v,zoom:x}){return x=x||0,m==="message"?0:m!=="maybePrepare"||v?m!=="parseTile"||v?m==="parseTile"&&v?300-x:m==="maybePrepare"&&v?400-x:500:200-x:100-x}(a);if(h===0){Nt();try{n()}finally{}return{cancel:()=>{}}}return this.tasks[u]={fn:n,metadata:a,priority:h,id:u},this.taskQueue.push(u),this.invoker.trigger(),{cancel:()=>{delete this.tasks[u]}}}process(){Nt();try{if(this.taskQueue=this.taskQueue.filter(u=>!!this.tasks[u]),!this.taskQueue.length)return;const n=this.pick();if(n===null)return;const a=this.tasks[n];if(delete this.tasks[n],this.taskQueue.length&&this.invoker.trigger(),!a)return;a.fn()}finally{}}pick(){let n=null,a=1/0;for(let h=0;h<this.taskQueue.length;h++){const m=this.tasks[this.taskQueue[h]];m.priority<a&&(a=m.priority,n=h)}if(n===null)return null;const u=this.taskQueue[n];return this.taskQueue.splice(n,1),u}remove(){this.invoker.remove()}}class C2{constructor(n){this._stringToNumber={},this._numberToString=[];for(let a=0;a<n.length;a++){const u=n[a];this._stringToNumber[u]=a,this._numberToString[a]=u}}encode(n){return this._stringToNumber[n]}decode(n){return this._numberToString[n]}}const g$=["tile","layer","source","sourceLayer","state"];class T2{constructor(n,a,u,h,m){this.type="Feature",this._vectorTileFeature=n,this._z=a,this._x=u,this._y=h,this.properties=n.properties,this.id=m}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(n){this._geometry=n}toJSON(){const n={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};this.id!==void 0&&(n.id=this.id);for(const a of g$)this[a]!==void 0&&(n[a]=this[a]);return n}}const Ca=32,Ps=33,ql=new Uint16Array(8184);for(let i=0;i<2046;i++){let n=i+2,a=0,u=0,h=0,m=0,v=0,x=0;for(1&n?h=m=v=Ca:a=u=x=Ca;(n>>=1)>1;){const C=a+h>>1,R=u+m>>1;1&n?(h=a,m=u,a=v,u=x):(a=h,u=m,h=v,m=x),v=C,x=R}const S=4*i;ql[S+0]=a,ql[S+1]=u,ql[S+2]=h,ql[S+3]=m}const As=new Uint16Array(2178),Zl=new Uint8Array(1089),Kg=new Uint16Array(1089);function I2(i){return i===0?-.03125:i===32?.03125:0}var M2=Ue([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const P2={type:2,extent:gn,loadGeometry:()=>[[new te(0,0),new te(gn+1,0),new te(gn+1,gn+1),new te(0,gn+1),new te(0,0)]]};class dx{constructor(n,a,u,h,m){this.tileID=n,this.uid=xt(),this.uses=0,this.tileSize=a,this.tileZoom=u,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=m,this.expiredRequestCount=0,this.state="loading",h&&h.transform&&(this.projection=h.transform.projection)}registerFadeDuration(n){const a=n+this.timeAdded;a<ji.now()||this.fadeEndTime&&a<this.fadeEndTime||(this.fadeEndTime=a)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}get tileTransform(){return this._tileTransform||(this._tileTransform=Jc(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(n,a,u){if(this.unloadVectorData(),this.state="loaded",n){n.featureIndex&&(this.latestFeatureIndex=n.featureIndex,n.rawTileData?(this.latestRawTileData=n.rawTileData,this.latestFeatureIndex.rawTileData=n.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=n.collisionBoxArray,this.buckets=function(h,m){const v={};if(!m)return v;for(const x of h){const S=x.layerIds.map(C=>m.getLayer(C)).filter(Boolean);if(S.length!==0){x.layers=S,x.stateDependentLayerIds&&(x.stateDependentLayers=x.stateDependentLayerIds.map(C=>S.filter(R=>R.id===C)[0]));for(const C of S)v[C.id]=x}}return v}(n.buckets,a.style),this.hasSymbolBuckets=!1;for(const h in this.buckets){const m=this.buckets[h];if(m instanceof Wl){if(this.hasSymbolBuckets=!0,!u)break;m.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const h in this.buckets){const m=this.buckets[h];if(m instanceof Wl&&m.hasRTLText){this.hasRTLText=!0,A.isLoading()||A.isLoaded()||b()!=="deferred"||I();break}}this.queryPadding=0;for(const h in this.buckets){const m=this.buckets[h];this.queryPadding=Math.max(this.queryPadding,a.style.getLayer(h).queryRadius(m))}n.imageAtlas&&(this.imageAtlas=n.imageAtlas),n.glyphAtlasImage&&(this.glyphAtlasImage=n.glyphAtlasImage),n.lineAtlas&&(this.lineAtlas=n.lineAtlas)}else this.collisionBoxArray=new br}unloadVectorData(){if(this.hasData()){for(const n in this.buckets)this.buckets[n].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(n){return this.buckets[n.id]}upload(n){for(const u in this.buckets){const h=this.buckets[u];h.uploadPending()&&h.upload(n)}const a=n.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Yf(n,this.imageAtlas.image,a.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Yf(n,this.glyphAtlasImage,a.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new Yf(n,this.lineAtlas.image,a.ALPHA),this.lineAtlas.uploaded=!0)}prepare(n){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(n,this.imageAtlasTexture)}queryRenderedFeatures(n,a,u,h,m,v,x,S){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:h,pixelPosMatrix:x,transform:v,params:m,tileTransform:this.tileTransform},n,a,u):{}}querySourceFeatures(n,a){const u=this.latestFeatureIndex;if(!u||!u.rawTileData)return;const h=u.loadVTLayers(),m=a?a.sourceLayer:"",v=h._geojsonTileLayer||h[m];if(!v)return;const x=td(a&&a.filter),{z:S,x:C,y:R}=this.tileID.canonical,L={z:S,x:C,y:R};for(let D=0;D<v.length;D++){const H=v.feature(D);if(x.needGeometry){const ae=Xc(H,!0);if(!x.filter(new O(this.tileID.overscaledZ),ae,this.tileID.canonical))continue}else if(!x.filter(new O(this.tileID.overscaledZ),H))continue;const G=u.getId(H,m),Y=new T2(H,S,C,R,G);Y.tile=L,n.push(Y)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(n){const a=this.expirationTime;if(n.cacheControl){const u=ot(n.cacheControl);u["max-age"]&&(this.expirationTime=Date.now()+1e3*u["max-age"])}else n.expires&&(this.expirationTime=new Date(n.expires).getTime());if(this.expirationTime){const u=Date.now();let h=!1;if(this.expirationTime>u)h=!1;else if(a)if(this.expirationTime<a)h=!0;else{const m=this.expirationTime-a;m?this.expirationTime=u+Math.max(m,3e4):h=!0}else h=!0;h?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(n,a){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(n).length===0||!a)return;const u=this.latestFeatureIndex.loadVTLayers(),h=a.style.listImages();for(const m in this.buckets){if(!a.style.hasLayer(m))continue;const v=this.buckets[m],x=v.layers[0].sourceLayer||"_geojsonTileLayer",S=u[x],C=n[x];if(!S||!C||Object.keys(C).length===0)continue;if(v.update(C,S,h,this.imageAtlas&&this.imageAtlas.patternPositions||{}),v instanceof Dg||v instanceof Ag){const L=a.style._getSourceCache(v.layers[0].source);a._terrain&&a._terrain.enabled&&L&&v.programConfigurations.needsUpload&&a._terrain._clearRenderCacheForTile(L.id,this.tileID)}const R=a&&a.style&&a.style.getLayer(m);R&&(this.queryPadding=Math.max(this.queryPadding,R.queryRadius(v)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<ji.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(n){this.symbolFadeHoldUntil=ji.now()+n}setTexture(n,a){const u=a.context,h=u.gl;this.texture=this.texture||a.getTileTexture(n.width),this.texture?this.texture.update(n,{useMipmap:!0}):(this.texture=new Yf(u,n,h.RGBA,{useMipmap:!0}),this.texture.bind(h.LINEAR,h.CLAMP_TO_EDGE))}setDependencies(n,a){const u={};for(const h of a)u[h]=!0;this.dependencies[n]=u}hasDependency(n,a){for(const u of n){const h=this.dependencies[u];if(h){for(const m of a)if(h[m])return!0}}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(n,a){if(!a||a.name==="mercator"||this._tileDebugBuffer)return;const u=el(P2,this.tileID.canonical,this.tileTransform)[0],h=new At,m=new Do;for(let v=0;v<u.length;v++){const{x,y:S}=u[v];h.emplaceBack(x,S),m.emplaceBack(v)}m.emplaceBack(0),this._tileDebugIndexBuffer=n.createIndexBuffer(m),this._tileDebugBuffer=n.createVertexBuffer(h,Pf.members),this._tileDebugSegments=si.simpleSegment(0,0,h.length,m.length)}_makeTileBoundsBuffers(n,a){if(this._tileBoundsBuffer||!a||a.name==="mercator")return;const u=el(P2,this.tileID.canonical,this.tileTransform)[0];let h,m;if(this.isRaster){const v=function(x,S){const C=Jc(x,S),R=Math.pow(2,x.z);for(let ae=0;ae<Ps;ae++)for(let ve=0;ve<Ps;ve++){const Te=ea((x.x+(ve+I2(ve))/Ca)/R),ye=Gi((x.y+(ae+I2(ae))/Ca)/R),Ce=S.project(Te,ye),Ae=ae*Ps+ve;As[2*Ae+0]=Math.round((Ce.x*C.scale-C.x)*gn),As[2*Ae+1]=Math.round((Ce.y*C.scale-C.y)*gn)}Zl.fill(0),Kg.fill(0);for(let ae=2045;ae>=0;ae--){const ve=4*ae,Te=ql[ve+0],ye=ql[ve+1],Ce=ql[ve+2],Ae=ql[ve+3],Pe=Te+Ce>>1,Ye=ye+Ae>>1,Ze=Pe+Ye-ye,at=Ye+Te-Pe,Rt=ye*Ps+Te,tt=Ae*Ps+Ce,pt=Ye*Ps+Pe,mt=Math.hypot((As[2*Rt+0]+As[2*tt+0])/2-As[2*pt+0],(As[2*Rt+1]+As[2*tt+1])/2-As[2*pt+1])>=16;Zl[pt]=Zl[pt]||(mt?1:0),ae<1022&&(Zl[pt]=Zl[pt]||Zl[(ye+at>>1)*Ps+(Te+Ze>>1)]||Zl[(Ae+at>>1)*Ps+(Ce+Ze>>1)])}const L=new ht,D=new cn;let H=0;function G(ae,ve){const Te=ve*Ps+ae;return Kg[Te]===0&&(L.emplaceBack(As[2*Te+0],As[2*Te+1],ae*gn/Ca,ve*gn/Ca),Kg[Te]=++H),Kg[Te]-1}function Y(ae,ve,Te,ye,Ce,Ae){const Pe=ae+Te>>1,Ye=ve+ye>>1;if(Math.abs(ae-Ce)+Math.abs(ve-Ae)>1&&Zl[Ye*Ps+Pe])Y(Ce,Ae,ae,ve,Pe,Ye),Y(Te,ye,Ce,Ae,Pe,Ye);else{const Ze=G(ae,ve),at=G(Te,ye),Rt=G(Ce,Ae);D.emplaceBack(Ze,at,Rt)}}return Y(0,0,Ca,Ca,Ca,0),Y(Ca,Ca,0,0,0,Ca),{vertices:L,indices:D}}(this.tileID.canonical,a);h=v.vertices,m=v.indices}else{h=new ht,m=new cn;for(const{x,y:S}of u)h.emplaceBack(x,S,0,0);const v=G_(h.int16,void 0,4);for(let x=0;x<v.length;x+=3)m.emplaceBack(v[x],v[x+1],v[x+2])}this._tileBoundsBuffer=n.createVertexBuffer(h,M2.members),this._tileBoundsIndexBuffer=n.createIndexBuffer(m),this._tileBoundsSegments=si.simpleSegment(0,0,h.length,m.length)}_makeGlobeTileDebugBuffers(n,a){const u=a.projection;if(!u||u.name!=="globe"||a.freezeTileCoverage)return;const h=this.tileID.canonical,m=Of(KE(h,a)),v=dd(a.zoom);let x;v>0&&(x=__(new Float64Array(16),a.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(n,h,a,m,x,v),this._makeGlobeTileDebugTextBuffer(n,h,a,m,x,v)}_globePoint(n,a,u,h,m,v,x){let S=Rf(n,a,u);if(v){const C=1<<u.z,R=Is(h.center.lng),L=Ms(h.center.lat),D=(u.x+.5)/C-R;let H=0;D>.5?H=-1:D<-.5&&(H=1);let G=(n/gn+u.x)/C+H,Y=(a/gn+u.y)/C;G=(G-R)*h._pixelsPerMercatorPixel+R,Y=(Y-L)*h._pixelsPerMercatorPixel+L;const ae=[G*h.worldSize,Y*h.worldSize,0];ii(ae,ae,v),S=Zc(S,ae,x)}return ii(S,S,m)}_makeGlobeTileDebugBorderBuffer(n,a,u,h,m,v){const x=new At,S=new Do,C=new qe,R=(D,H,G,Y,ae)=>{const ve=(G-D)/(ae-1),Te=(Y-H)/(ae-1),ye=x.length;for(let Ce=0;Ce<ae;Ce++){const Ae=D+Ce*ve,Pe=H+Ce*Te;x.emplaceBack(Ae,Pe);const Ye=this._globePoint(Ae,Pe,a,u,h,m,v);C.emplaceBack(Ye[0],Ye[1],Ye[2]),S.emplaceBack(ye+Ce)}},L=gn;R(0,0,L,0,16),R(L,0,L,L,16),R(L,L,0,L,16),R(0,L,0,0,16),this._tileDebugIndexBuffer=n.createIndexBuffer(S),this._tileDebugBuffer=n.createVertexBuffer(x,Pf.members),this._globeTileDebugBorderBuffer=n.createVertexBuffer(C,qE.members),this._tileDebugSegments=si.simpleSegment(0,0,x.length,S.length)}_makeGlobeTileDebugTextBuffer(n,a,u,h,m,v){const x=gn/4,S=new At,C=new cn,R=new qe,L=25;C.reserve(32),S.reserve(L),R.reserve(L);const D=(H,G)=>L*H+G;for(let H=0;H<L;H++){const G=H*x;for(let Y=0;Y<L;Y++){const ae=Y*x;S.emplaceBack(ae,G);const ve=this._globePoint(ae,G,a,u,h,m,v);R.emplaceBack(ve[0],ve[1],ve[2])}}for(let H=0;H<4;H++)for(let G=0;G<4;G++){const Y=D(H,G),ae=D(H,G+1),ve=D(H+1,G),Te=D(H+1,G+1);C.emplaceBack(Y,ae,ve),C.emplaceBack(ve,ae,Te)}this._tileDebugTextIndexBuffer=n.createIndexBuffer(C),this._tileDebugTextBuffer=n.createVertexBuffer(S,Pf.members),this._globeTileDebugTextBuffer=n.createVertexBuffer(R,qE.members),this._tileDebugTextSegments=si.simpleSegment(0,0,L,32)}}class v${constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(n,a,u){const h=String(a);if(this.stateChanges[n]=this.stateChanges[n]||{},this.stateChanges[n][h]=this.stateChanges[n][h]||{},gt(this.stateChanges[n][h],u),this.deletedStates[n]===null){this.deletedStates[n]={};for(const m in this.state[n])m!==h&&(this.deletedStates[n][m]=null)}else if(this.deletedStates[n]&&this.deletedStates[n][h]===null){this.deletedStates[n][h]={};for(const m in this.state[n][h])u[m]||(this.deletedStates[n][h][m]=null)}else for(const m in u)this.deletedStates[n]&&this.deletedStates[n][h]&&this.deletedStates[n][h][m]===null&&delete this.deletedStates[n][h][m]}removeFeatureState(n,a,u){if(this.deletedStates[n]===null)return;const h=String(a);if(this.deletedStates[n]=this.deletedStates[n]||{},u&&a!==void 0)this.deletedStates[n][h]!==null&&(this.deletedStates[n][h]=this.deletedStates[n][h]||{},this.deletedStates[n][h][u]=null);else if(a!==void 0)if(this.stateChanges[n]&&this.stateChanges[n][h])for(u in this.deletedStates[n][h]={},this.stateChanges[n][h])this.deletedStates[n][h][u]=null;else this.deletedStates[n][h]=null;else this.deletedStates[n]=null}getState(n,a){const u=String(a),h=gt({},(this.state[n]||{})[u],(this.stateChanges[n]||{})[u]);if(this.deletedStates[n]===null)return{};if(this.deletedStates[n]){const m=this.deletedStates[n][a];if(m===null)return{};for(const v in m)delete h[v]}return h}initializeTileState(n,a){n.setFeatureState(this.state,a)}coalesceChanges(n,a){const u={};for(const h in this.stateChanges){this.state[h]=this.state[h]||{};const m={};for(const v in this.stateChanges[h])this.state[h][v]||(this.state[h][v]={}),gt(this.state[h][v],this.stateChanges[h][v]),m[v]=this.state[h][v];u[h]=m}for(const h in this.deletedStates){this.state[h]=this.state[h]||{};const m={};if(this.deletedStates[h]===null)for(const v in this.state[h])m[v]={},this.state[h][v]={};else for(const v in this.deletedStates[h]){if(this.deletedStates[h][v]===null)this.state[h][v]={};else if(this.state[h][v])for(const x of Object.keys(this.deletedStates[h][v]))delete this.state[h][v][x];m[v]=this.state[h][v]}u[h]=u[h]||{},gt(u[h],m)}if(this.stateChanges={},this.deletedStates={},Object.keys(u).length!==0)for(const h in n)n[h].setFeatureState(u,a)}}class A2{constructor(n){this.size=n,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(n,a){const u=this.toIdx(n,a);return{min:this.minimums[u],max:this.maximums[u]}}isLeaf(n,a){return this.leaves[this.toIdx(n,a)]}toIdx(n,a){return a*this.size+n}}function R2(i,n,a,u){let h=0,m=Number.MAX_VALUE;for(let v=0;v<3;v++)if(Math.abs(u[v])<1e-15){if(a[v]<i[v]||a[v]>n[v])return null}else{const x=1/u[v];let S=(i[v]-a[v])*x,C=(n[v]-a[v])*x;if(S>C){const R=S;S=C,C=R}if(S>h&&(h=S),C<m&&(m=C),h>m)return null}return h}function O2(i,n,a,u,h,m,v,x,S,C,R){const L=u-i,D=h-n,H=m-a,G=v-i,Y=x-n,ae=S-a,ve=R[1]*ae-R[2]*Y,Te=R[2]*G-R[0]*ae,ye=R[0]*Y-R[1]*G,Ce=L*ve+D*Te+H*ye;if(Math.abs(Ce)<1e-15)return null;const Ae=1/Ce,Pe=C[0]-i,Ye=C[1]-n,Ze=C[2]-a,at=(Pe*ve+Ye*Te+Ze*ye)*Ae;if(at<0||at>1)return null;const Rt=Ye*H-Ze*D,tt=Ze*L-Pe*H,pt=Pe*D-Ye*L,mt=(R[0]*Rt+R[1]*tt+R[2]*pt)*Ae;return mt<0||at+mt>1?null:(G*Rt+Y*tt+ae*pt)*Ae}function z2(i,n,a){return(i-n)/(a-n)}function L2(i,n,a,u,h,m,v,x,S){const C=1<<a,R=m-u,L=v-h,D=(i+1)/C*R+u,H=(n+0)/C*L+h,G=(n+1)/C*L+h;x[0]=(i+0)/C*R+u,x[1]=H,S[0]=D,S[1]=G}class D2{constructor(n){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=n,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const a=function(m){const v=Math.ceil(Math.log2(m.dim/8)),x=[];let S=Math.ceil(Math.pow(2,v));const C=1/S,R=(H,G,Y,ae,ve)=>{const Te=ae?1:0,ye=(H+1)*Y-Te,Ce=G*Y,Ae=(G+1)*Y-Te;ve[0]=H*Y,ve[1]=Ce,ve[2]=ye,ve[3]=Ae};let L=new A2(S);const D=[];for(let H=0;H<S*S;H++){R(H%S,Math.floor(H/S),C,!1,D);const G=Xl(D[0],D[1],m),Y=Xl(D[2],D[1],m),ae=Xl(D[2],D[3],m),ve=Xl(D[0],D[3],m);L.minimums.push(Math.min(G,Y,ae,ve)),L.maximums.push(Math.max(G,Y,ae,ve)),L.leaves.push(1)}for(x.push(L),S/=2;S>=1;S/=2){const H=x[x.length-1];L=new A2(S);for(let G=0;G<S*S;G++){R(G%S,Math.floor(G/S),2,!0,D);const Y=H.getElevation(D[0],D[1]),ae=H.getElevation(D[2],D[1]),ve=H.getElevation(D[2],D[3]),Te=H.getElevation(D[0],D[3]),ye=H.isLeaf(D[0],D[1]),Ce=H.isLeaf(D[2],D[1]),Ae=H.isLeaf(D[2],D[3]),Pe=H.isLeaf(D[0],D[3]),Ye=Math.min(Y.min,ae.min,ve.min,Te.min),Ze=Math.max(Y.max,ae.max,ve.max,Te.max),at=ye&&Ce&&Ae&&Pe;L.maximums.push(Ze),L.minimums.push(Ye),L.leaves.push(Ze-Ye<=5&&at?1:0)}x.push(L)}return x}(this.dem),u=a.length-1,h=a[u];this._addNode(h.minimums[0],h.maximums[0],h.leaves[0]),this._construct(a,0,0,u,0)}raycastRoot(n,a,u,h,m,v,x=1){return R2([n,a,-100],[u,h,this.maximums[0]*x],m,v)}raycast(n,a,u,h,m,v,x=1){if(!this.nodeCount)return null;const S=this.raycastRoot(n,a,u,h,m,v,x);if(S==null)return null;const C=[],R=[],L=[],D=[],H=[{idx:0,t:S,nodex:0,nodey:0,depth:0}];for(;H.length>0;){const{idx:G,t:Y,nodex:ae,nodey:ve,depth:Te}=H.pop();if(this.leaves[G]){L2(ae,ve,Te,n,a,u,h,L,D);const Ce=1<<Te,Ae=(ae+0)/Ce,Pe=(ae+1)/Ce,Ye=(ve+0)/Ce,Ze=(ve+1)/Ce,at=Xl(Ae,Ye,this.dem)*x,Rt=Xl(Pe,Ye,this.dem)*x,tt=Xl(Pe,Ze,this.dem)*x,pt=Xl(Ae,Ze,this.dem)*x,mt=O2(L[0],L[1],at,D[0],L[1],Rt,D[0],D[1],tt,m,v),_t=O2(D[0],D[1],tt,L[0],D[1],pt,L[0],L[1],at,m,v),$t=Math.min(mt!==null?mt:Number.MAX_VALUE,_t!==null?_t:Number.MAX_VALUE);if($t!==Number.MAX_VALUE)return $t;{const it=If([],m,v,Y);if(k2(at,Rt,pt,tt,z2(it[0],L[0],D[0]),z2(it[1],L[1],D[1]))>=it[2])return Y}continue}let ye=0;for(let Ce=0;Ce<this._siblingOffset.length;Ce++){L2((ae<<1)+this._siblingOffset[Ce][0],(ve<<1)+this._siblingOffset[Ce][1],Te+1,n,a,u,h,L,D),L[2]=-100,D[2]=this.maximums[this.childOffsets[G]+Ce]*x;const Ae=R2(L,D,m,v);if(Ae!=null){const Pe=Ae;C[Ce]=Pe;let Ye=!1;for(let Ze=0;Ze<ye&&!Ye;Ze++)Pe>=C[R[Ze]]&&(R.splice(Ze,0,Ce),Ye=!0);Ye||(R[ye]=Ce),ye++}}for(let Ce=0;Ce<ye;Ce++){const Ae=R[Ce];H.push({idx:this.childOffsets[G]+Ae,t:C[Ae],nodex:(ae<<1)+this._siblingOffset[Ae][0],nodey:(ve<<1)+this._siblingOffset[Ae][1],depth:Te+1})}}return null}_addNode(n,a,u){return this.minimums.push(n),this.maximums.push(a),this.leaves.push(u),this.childOffsets.push(0),this.nodeCount++}_construct(n,a,u,h,m){if(n[h].isLeaf(a,u)===1)return;this.childOffsets[m]||(this.childOffsets[m]=this.nodeCount);const v=h-1,x=n[v];let S=0,C=0;for(let R=0;R<this._siblingOffset.length;R++){const L=2*a+this._siblingOffset[R][0],D=2*u+this._siblingOffset[R][1],H=x.getElevation(L,D),G=x.isLeaf(L,D),Y=this._addNode(H.min,H.max,G);G&&(S|=1<<R),C||(C=Y)}for(let R=0;R<this._siblingOffset.length;R++)S&1<<R||this._construct(n,2*a+this._siblingOffset[R][0],2*u+this._siblingOffset[R][1],v,C+R)}}function k2(i,n,a,u,h,m){return Jn(Jn(i,a,m),Jn(n,u,m),h)}function Xl(i,n,a){const u=a.dim,h=pe(i*u-.5,0,u-1),m=pe(n*u-.5,0,u-1),v=Math.floor(h),x=Math.floor(m),S=Math.min(v+1,u-1),C=Math.min(x+1,u-1);return k2(a.get(v,x),a.get(S,x),a.get(v,C),a.get(S,C),h-v,m-x)}const $2={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function y$(i,n,a){return(256*i*256+256*n+a)/10-1e4}function _$(i,n,a){return 256*i+n+a/256-32768}class Yg{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(n,a,u,h=!1,m=!1){if(this.uid=n,a.height!==a.width)throw new RangeError("DEM tiles must be square");if(u&&u!=="mapbox"&&u!=="terrarium")return Ct(`"${u}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=a.height;const v=this.dim=a.height-2,x=new Uint32Array(a.data.buffer);if(this.pixels=new Uint8Array(a.data.buffer),this.encoding=u||"mapbox",this.borderReady=h,!h){for(let S=0;S<v;S++)x[this._idx(-1,S)]=x[this._idx(0,S)],x[this._idx(v,S)]=x[this._idx(v-1,S)],x[this._idx(S,-1)]=x[this._idx(S,0)],x[this._idx(S,v)]=x[this._idx(S,v-1)];x[this._idx(-1,-1)]=x[this._idx(0,0)],x[this._idx(v,-1)]=x[this._idx(v-1,0)],x[this._idx(-1,v)]=x[this._idx(0,v-1)],x[this._idx(v,v)]=x[this._idx(v-1,v-1)],m&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new D2(this)}get(n,a,u=!1){u&&(n=pe(n,-1,this.dim),a=pe(a,-1,this.dim));const h=4*this._idx(n,a);return(this.encoding==="terrarium"?_$:y$)(this.pixels[h],this.pixels[h+1],this.pixels[h+2])}static getUnpackVector(n){return $2[n]}get unpackVector(){return $2[this.encoding]}_idx(n,a){if(n<-1||n>=this.dim+1||a<-1||a>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(a+1)*this.stride+(n+1)}static pack(n,a){const u=[0,0,0,0],h=Yg.getUnpackVector(a);let m=Math.floor((n+h[3])/h[2]);return u[2]=m%256,m=Math.floor(m/256),u[1]=m%256,m=Math.floor(m/256),u[0]=m,u}getPixels(){return new $o({width:this.stride,height:this.stride},this.pixels)}backfillBorder(n,a,u){if(this.dim!==n.dim)throw new Error("dem dimension mismatch");let h=a*this.dim,m=a*this.dim+this.dim,v=u*this.dim,x=u*this.dim+this.dim;switch(a){case-1:h=m-1;break;case 1:m=h+1}switch(u){case-1:v=x-1;break;case 1:x=v+1}const S=-a*this.dim,C=-u*this.dim;for(let R=v;R<x;R++)for(let L=h;L<m;L++){const D=4*this._idx(L,R),H=4*this._idx(L+S,R+C);this.pixels[D+0]=n.pixels[H+0],this.pixels[D+1]=n.pixels[H+1],this.pixels[D+2]=n.pixels[H+2],this.pixels[D+3]=n.pixels[H+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}Jt(Yg,"DEMData"),Jt(D2,"DemMinMaxQuadTree",{omit:["dem"]});class x${constructor(n,a){this.max=n,this.onRemove=a,this.reset()}reset(){for(const n in this.data)for(const a of this.data[n])a.timeout&&clearTimeout(a.timeout),this.onRemove(a.value);return this.data={},this.order=[],this}add(n,a,u){const h=n.wrapped().key;this.data[h]===void 0&&(this.data[h]=[]);const m={value:a,timeout:void 0};if(u!==void 0&&(m.timeout=setTimeout(()=>{this.remove(n,m)},u)),this.data[h].push(m),this.order.push(h),this.order.length>this.max){const v=this._getAndRemoveByKey(this.order[0]);v&&this.onRemove(v)}return this}has(n){return n.wrapped().key in this.data}getAndRemove(n){return this.has(n)?this._getAndRemoveByKey(n.wrapped().key):null}_getAndRemoveByKey(n){const a=this.data[n].shift();return a.timeout&&clearTimeout(a.timeout),this.data[n].length===0&&delete this.data[n],this.order.splice(this.order.indexOf(n),1),a.value}getByKey(n){const a=this.data[n];return a?a[0].value:null}get(n){return this.has(n)?this.data[n.wrapped().key][0].value:null}remove(n,a){if(!this.has(n))return this;const u=n.wrapped().key,h=a===void 0?0:this.data[u].indexOf(a),m=this.data[u][h];return this.data[u].splice(h,1),m.timeout&&clearTimeout(m.timeout),this.data[u].length===0&&delete this.data[u],this.onRemove(m.value),this.order.splice(this.order.indexOf(u),1),this}setMaxSize(n){for(this.max=n;this.order.length>this.max;){const a=this._getAndRemoveByKey(this.order[0]);a&&this.onRemove(a)}return this}filter(n){const a=[];for(const u in this.data)for(const h of this.data[u])n(h.value)||a.push(h);for(const u of a)this.remove(u.value.tileID,u)}}class Td{constructor(n,a,u){this.func=n,this.mask=a,this.range=u}}Td.ReadOnly=!1,Td.ReadWrite=!0,Td.disabled=new Td(519,Td.ReadOnly,[0,1]);const hx=7680;class fx{constructor(n,a,u,h,m,v){this.test=n,this.ref=a,this.mask=u,this.fail=h,this.depthFail=m,this.pass=v}}fx.disabled=new fx({func:519,mask:0},0,0,hx,hx,hx);class Rs{constructor(n,a,u){this.blendFunction=n,this.blendColor=a,this.mask=u}}Rs.Replace=[1,0],Rs.disabled=new Rs(Rs.Replace,Nr.transparent,[!1,!1,!1,!1]),Rs.unblended=new Rs(Rs.Replace,Nr.transparent,[!0,!0,!0,!0]),Rs.alphaBlended=new Rs([1,771],Nr.transparent,[!0,!0,!0,!0]);const px=1029,mx=2305;class ns{constructor(n,a,u){this.enable=n,this.mode=a,this.frontFace=u}}ns.disabled=new ns(!1,px,mx),ns.backCCW=new ns(!0,px,mx),ns.backCW=new ns(!0,px,2304),ns.frontCW=new ns(!0,1028,2304),ns.frontCCW=new ns(!0,1028,mx);class Qc extends Oi{constructor(n,a,u){super(),this.id=n,this._onlySymbols=u,a.on("data",h=>{h.dataType==="source"&&h.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&h.dataType==="source"&&h.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))}),a.on("error",()=>{this._sourceErrored=!0}),this._source=a,this._tiles={},this._cache=new x$(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=a.minTileCacheSize,this._maxTileCacheSize=a.maxTileCacheSize,this._loadedParentTiles={},this._coveredTiles={},this._state=new v$,this._isRaster=this._source.type==="raster"||this._source.type==="raster-dem"||this._source.type==="custom"&&this._source._dataType==="raster"}onAdd(n){this.map=n,this._minTileCacheSize=this._minTileCacheSize===void 0&&n?n._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=this._maxTileCacheSize===void 0&&n?n._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const n in this._tiles){const a=this._tiles[n];if(a.state!=="loaded"&&a.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const n=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,n&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(n,a){return n.isSymbolTile=this._onlySymbols,this._source.loadTile(n,a)}_unloadTile(n){if(this._source.unloadTile)return this._source.unloadTile(n,()=>{})}_abortTile(n){if(this._source.abortTile)return this._source.abortTile(n,()=>{})}serialize(){return this._source.serialize()}prepare(n){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const a in this._tiles){const u=this._tiles[a];u.upload(n),u.prepare(this.map.style.imageManager)}}getIds(){return Qe(this._tiles).map(n=>n.tileID).sort(F2).map(n=>n.key)}getRenderableIds(n){const a=[];for(const u in this._tiles)this._isIdRenderable(+u,n)&&a.push(this._tiles[u]);return n?a.sort((u,h)=>{const m=u.tileID,v=h.tileID,x=new te(m.canonical.x,m.canonical.y)._rotate(this.transform.angle),S=new te(v.canonical.x,v.canonical.y)._rotate(this.transform.angle);return m.overscaledZ-v.overscaledZ||S.y-x.y||S.x-x.x}).map(u=>u.tileID.key):a.map(u=>u.tileID).sort(F2).map(u=>u.key)}hasRenderableParent(n){const a=this.findLoadedParent(n,0);return!!a&&this._isIdRenderable(a.tileID.key)}_isIdRenderable(n,a){return this._tiles[n]&&this._tiles[n].hasData()&&!this._coveredTiles[n]&&(a||!this._tiles[n].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const n in this._tiles)this._tiles[n].state!=="errored"&&this._reloadTile(+n,"reloading")}}_reloadTile(n,a){const u=this._tiles[n];u&&(u.state!=="loading"&&(u.state=a),this._loadTile(u,this._tileLoaded.bind(this,u,n,a)))}_tileLoaded(n,a,u,h){if(h)if(n.state="errored",h.status!==404)this._source.fire(new _i(h,{tile:n}));else if(this._source.type==="raster-dem"&&this.usedForTerrain&&this.map.painter.terrain){const m=this.map.painter.terrain;this.update(this.transform,m.getScaledDemTileSize(),!0),m.resetTileLookupCache(this.id)}else this.update(this.transform);else n.timeAdded=ji.now(),u==="expired"&&(n.refreshedUponExpiration=!0),this._setTileReloadTimer(a,n),this._source.type==="raster-dem"&&n.dem&&this._backfillDEM(n),this._state.initializeTileState(n,this.map?this.map.painter:null),this._source.fire(new ao("data",{dataType:"source",tile:n,coord:n.tileID,sourceCacheId:this.id}))}_backfillDEM(n){const a=this.getRenderableIds();for(let h=0;h<a.length;h++){const m=a[h];if(n.neighboringTiles&&n.neighboringTiles[m]){const v=this.getTileByID(m);u(n,v),u(v,n)}}function u(h,m){if(!h.dem||h.dem.borderReady)return;h.needsHillshadePrepare=!0,h.needsDEMTextureUpload=!0;let v=m.tileID.canonical.x-h.tileID.canonical.x;const x=m.tileID.canonical.y-h.tileID.canonical.y,S=Math.pow(2,h.tileID.canonical.z),C=m.tileID.key;v===0&&x===0||Math.abs(x)>1||(Math.abs(v)>1&&(Math.abs(v+S)===1?v+=S:Math.abs(v-S)===1&&(v-=S)),m.dem&&h.dem&&(h.dem.backfillBorder(m.dem,v,x),h.neighboringTiles&&h.neighboringTiles[C]&&(h.neighboringTiles[C].backfilled=!0)))}}getTile(n){return this.getTileByID(n.key)}getTileByID(n){return this._tiles[n]}_retainLoadedChildren(n,a,u,h){for(const m in this._tiles){let v=this._tiles[m];if(h[m]||!v.hasData()||v.tileID.overscaledZ<=a||v.tileID.overscaledZ>u)continue;let x=v.tileID;for(;v&&v.tileID.overscaledZ>a+1;){const C=v.tileID.scaledTo(v.tileID.overscaledZ-1);v=this._tiles[C.key],v&&v.hasData()&&(x=C)}let S=x;for(;S.overscaledZ>a;)if(S=S.scaledTo(S.overscaledZ-1),n[S.key]){h[x.key]=x;break}}}findLoadedParent(n,a){if(n.key in this._loadedParentTiles){const u=this._loadedParentTiles[n.key];return u&&u.tileID.overscaledZ>=a?u:null}for(let u=n.overscaledZ-1;u>=a;u--){const h=n.scaledTo(u),m=this._getLoadedTile(h);if(m)return m}}_getLoadedTile(n){const a=this._tiles[n.key];return a&&a.hasData()?a:this._cache.getByKey(this._source.reparseOverscaled?n.wrapped().key:n.canonical.key)}updateCacheSize(n,a){a=a||this._source.tileSize;const u=Math.ceil(n.width/a)+1,h=Math.ceil(n.height/a)+1,m=Math.floor(u*h*5),v=typeof this._minTileCacheSize=="number"?Math.max(this._minTileCacheSize,m):m,x=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,v):v;this._cache.setMaxSize(x)}handleWrapJump(n){const a=Math.round((n-(this._prevLng===void 0?n:this._prevLng))/360);if(this._prevLng=n,a){const u={};for(const h in this._tiles){const m=this._tiles[h];m.tileID=m.tileID.unwrapTo(m.tileID.wrap+a),u[m.tileID.key]=m}this._tiles=u;for(const h in this._timers)clearTimeout(this._timers[h]),delete this._timers[h];for(const h in this._tiles)this._setTileReloadTimer(+h,this._tiles[h])}}update(n,a,u){if(this.transform=n,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!u)return;let h;this.updateCacheSize(n,a),this.transform.projection.name!=="globe"&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?h=n.getVisibleUnwrappedCoordinates(this._source.tileID).map(x=>new uo(x.canonical.z,x.wrap,x.canonical.z,x.canonical.x,x.canonical.y)):(h=n.coveringTiles({tileSize:a||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!u,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(h=h.filter(x=>this._source.hasTile(x)))):h=[];const m=this._updateRetainedTiles(h);if(B2(this._source.type)&&h.length!==0){const x={},S={},C=Object.keys(m);for(const L of C){const D=m[L],H=this._tiles[L];if(!H||H.fadeEndTime&&H.fadeEndTime<=ji.now())continue;const G=this.findLoadedParent(D,Math.max(D.overscaledZ-Qc.maxOverzooming,this._source.minzoom));G&&(this._addTile(G.tileID),x[G.tileID.key]=G.tileID),S[L]=D}const R=h[h.length-1].overscaledZ;for(const L in this._tiles){const D=this._tiles[L];if(m[L]||!D.hasData())continue;let H=D.tileID;for(;H.overscaledZ>R;){H=H.scaledTo(H.overscaledZ-1);const G=this._tiles[H.key];if(G&&G.hasData()&&S[H.key]){m[L]=D.tileID;break}}}for(const L in x)m[L]||(this._coveredTiles[L]=!0,m[L]=x[L])}for(const x in m)this._tiles[x].clearFadeHold();const v=function(x,S){const C=[];for(const R in x)R in S||C.push(R);return C}(this._tiles,m);for(const x of v){const S=this._tiles[x];S.hasSymbolBuckets&&!S.holdingForFade()?S.setHoldDuration(this.map._fadeDuration):S.hasSymbolBuckets&&!S.symbolFadeFinished()||this._removeTile(+x)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const n in this._tiles)this._tiles[n].holdingForFade()&&this._removeTile(+n)}_updateRetainedTiles(n){const a={};if(n.length===0)return a;const u={},h=n.reduce((C,R)=>Math.min(C,R.overscaledZ),1/0),m=n[0].overscaledZ,v=Math.max(m-Qc.maxOverzooming,this._source.minzoom),x=Math.max(m+Qc.maxUnderzooming,this._source.minzoom),S={};for(const C of n){const R=this._addTile(C);a[C.key]=C,R.hasData()||h<this._source.maxzoom&&(S[C.key]=C)}this._retainLoadedChildren(S,h,x,a);for(const C of n){let R=this._tiles[C.key];if(R.hasData())continue;if(C.canonical.z>=this._source.maxzoom){const D=C.children(this._source.maxzoom)[0],H=this.getTile(D);if(H&&H.hasData()){a[D.key]=D;continue}}else{const D=C.children(this._source.maxzoom);if(a[D[0].key]&&a[D[1].key]&&a[D[2].key]&&a[D[3].key])continue}let L=R.wasRequested();for(let D=C.overscaledZ-1;D>=v;--D){const H=C.scaledTo(D);if(u[H.key]||(u[H.key]=!0,R=this.getTile(H),!R&&L&&(R=this._addTile(H)),R&&(a[H.key]=H,L=R.wasRequested(),R.hasData())))break}}return a}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const n in this._tiles){const a=[];let u,h=this._tiles[n].tileID;for(;h.overscaledZ>0;){if(h.key in this._loadedParentTiles){u=this._loadedParentTiles[h.key];break}a.push(h.key);const m=h.scaledTo(h.overscaledZ-1);if(u=this._getLoadedTile(m),u)break;h=m}for(const m of a)this._loadedParentTiles[m]=u}}_addTile(n){let a=this._tiles[n.key];if(a)return a;a=this._cache.getAndRemove(n),a&&(this._setTileReloadTimer(n.key,a),a.tileID=n,this._state.initializeTileState(a,this.map?this.map.painter:null),this._cacheTimers[n.key]&&(clearTimeout(this._cacheTimers[n.key]),delete this._cacheTimers[n.key],this._setTileReloadTimer(n.key,a)));const u=!!a;if(!u){const h=this.map?this.map.painter:null;a=new dx(n,this._source.tileSize*n.overscaleFactor(),this.transform.tileZoom,h,this._isRaster),this._loadTile(a,this._tileLoaded.bind(this,a,n.key,a.state))}return a?(a.uses++,this._tiles[n.key]=a,u||this._source.fire(new ao("dataloading",{tile:a,coord:a.tileID,dataType:"source"})),a):null}_setTileReloadTimer(n,a){n in this._timers&&(clearTimeout(this._timers[n]),delete this._timers[n]);const u=a.getExpiryTimeout();u&&(this._timers[n]=setTimeout(()=>{this._reloadTile(n,"expired"),delete this._timers[n]},u))}_removeTile(n){const a=this._tiles[n];a&&(a.uses--,delete this._tiles[n],this._timers[n]&&(clearTimeout(this._timers[n]),delete this._timers[n]),a.uses>0||(a.hasData()&&a.state!=="reloading"?this._cache.add(a.tileID,a,a.getExpiryTimeout()):(a.aborted=!0,this._abortTile(a),this._unloadTile(a))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const n in this._tiles)this._removeTile(+n);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(n,a,u){const h=[],m=this.transform;if(!m)return h;const v=m.projection.name==="globe",x=Is(m.center.lng);for(const S in this._tiles){const C=this._tiles[S];if(u&&C.clearQueryDebugViz(),C.holdingForFade())continue;let R;if(v){const L=C.tileID.canonical;if(L.z===0){const D=[Math.abs(pe(x,...Jf(L,-1))-x),Math.abs(pe(x,...Jf(L,1))-x)];R=[0,2*D.indexOf(Math.min(...D))-1]}else{const D=[Math.abs(pe(x,...Jf(L,-1))-x),Math.abs(pe(x,...Jf(L,0))-x),Math.abs(pe(x,...Jf(L,1))-x)];R=[D.indexOf(Math.min(...D))-1]}}else R=[0];for(const L of R){const D=n.containsTile(C,m,a,L);D&&h.push(D)}}return h}getVisibleCoordinates(n){const a=this.getRenderableIds(n).map(u=>this._tiles[u].tileID);for(const u of a)u.projMatrix=this.transform.calculateProjMatrix(u.toUnwrapped());return a}hasTransition(){if(this._source.hasTransition())return!0;if(B2(this._source.type))for(const n in this._tiles){const a=this._tiles[n];if(a.fadeEndTime!==void 0&&a.fadeEndTime>=ji.now())return!0}return!1}setFeatureState(n,a,u){this._state.updateState(n=n||"_geojsonTileLayer",a,u)}removeFeatureState(n,a,u){this._state.removeFeatureState(n=n||"_geojsonTileLayer",a,u)}getFeatureState(n,a){return this._state.getState(n=n||"_geojsonTileLayer",a)}setDependencies(n,a,u){const h=this._tiles[n];h&&h.setDependencies(a,u)}reloadTilesForDependencies(n,a){for(const u in this._tiles)this._tiles[u].hasDependency(n,a)&&this._reloadTile(+u,"reloading");this._cache.filter(u=>!u.hasDependency(n,a))}_preloadTiles(n,a){if(!this._sourceLoaded){const x=()=>{this._sourceLoaded&&(this._source.off("data",x),this._preloadTiles(n,a))};return void this._source.on("data",x)}const u=new Map,h=Array.isArray(n)?n:[n],m=this.map.painter.terrain,v=this.usedForTerrain&&m?m.getScaledDemTileSize():this._source.tileSize;for(const x of h){const S=x.coveringTiles({tileSize:v,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const C of S)u.set(C.key,C);this.usedForTerrain&&x.updateElevation(!1)}Ge(Array.from(u.values()),(x,S)=>{const C=new dx(x,this._source.tileSize*x.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(C,R=>{this._source.type==="raster-dem"&&C.dem&&this._backfillDEM(C),S(R,C)})},a)}}function F2(i,n){const a=Math.abs(2*i.wrap)-+(i.wrap<0),u=Math.abs(2*n.wrap)-+(n.wrap<0);return i.overscaledZ-n.overscaledZ||u-a||n.canonical.y-i.canonical.y||n.canonical.x-i.canonical.x}function B2(i){return i==="raster"||i==="image"||i==="video"||i==="custom"}function Jf(i,n){const a=1<<i.z;return[i.x/a+n,(i.x+1)/a+n]}Qc.maxOverzooming=10,Qc.maxUnderzooming=3;class Jg{constructor(n,a,u){this._demTile=n,this._dem=this._demTile.dem,this._scale=a,this._offset=u}static create(n,a,u){const h=u||n.findDEMTileFor(a);if(!h||!h.dem)return;const m=h.dem,v=h.tileID,x=1<<a.canonical.z-v.canonical.z;return new Jg(h,h.tileSize/gn/x,[(a.canonical.x/x-v.canonical.x)*m.dim,(a.canonical.y/x-v.canonical.y)*m.dim])}tileCoordToPixel(n,a){const u=a*this._scale+this._offset[1],h=Math.floor(n*this._scale+this._offset[0]),m=Math.floor(u);return new te(h,m)}getElevationAt(n,a,u,h){const m=n*this._scale+this._offset[0],v=a*this._scale+this._offset[1],x=Math.floor(m),S=Math.floor(v),C=this._dem;return h=!!h,u?Jn(Jn(C.get(x,S,h),C.get(x,S+1,h),v-S),Jn(C.get(x+1,S,h),C.get(x+1,S+1,h),v-S),m-x):C.get(x,S,h)}getElevationAtPixel(n,a,u){return this._dem.get(n,a,!!u)}getMeterToDEM(n){return(1<<this._demTile.tileID.canonical.z)*Qa(1,n)*this._dem.stride}}class N2{constructor(n,a){this.tileID=n,this.x=n.canonical.x,this.y=n.canonical.y,this.z=n.canonical.z,this.grid=new qs(gn,16,0),this.featureIndexArray=new jc,this.promoteId=a}insert(n,a,u,h,m,v=0){const x=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(u,h,m,v);const S=this.grid;for(let C=0;C<a.length;C++){const R=a[C],L=[1/0,1/0,-1/0,-1/0];for(let D=0;D<R.length;D++){const H=R[D];L[0]=Math.min(L[0],H.x),L[1]=Math.min(L[1],H.y),L[2]=Math.max(L[2],H.x),L[3]=Math.max(L[3],H.y)}L[0]<gn&&L[1]<gn&&L[2]>=0&&L[3]>=0&&S.insert(x,L[0],L[1],L[2],L[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new X_(new Fg(this.rawTileData)).layers,this.sourceLayerCoder=new C2(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const n in this.vtLayers)this.vtFeatures[n]=[]}return this.vtLayers}query(n,a,u,h){this.loadVTLayers();const m=n.params||{},v=td(m.filter),x=n.tileResult,S=n.transform,C=x.bufferedTilespaceBounds,R=this.grid.query(C.min.x,C.min.y,C.max.x,C.max.y,(G,Y,ae,ve)=>dC(x.bufferedTilespaceGeometry,G,Y,ae,ve));R.sort(b$);let L=null;S.elevation&&R.length>0&&(L=Jg.create(S.elevation,this.tileID));const D={};let H;for(let G=0;G<R.length;G++){const Y=R[G];if(Y===H)continue;H=Y;const ae=this.featureIndexArray.get(Y);let ve=null;this.loadMatchingFeature(D,ae,v,m.layers,m.availableImages,a,u,h,(Te,ye,Ce,Ae=0)=>(ve||(ve=el(Te,this.tileID.canonical,n.tileTransform)),ye.queryIntersectsFeature(x,Te,Ce,ve,this.z,n.transform,n.pixelPosMatrix,L,Ae)))}return D}loadMatchingFeature(n,a,u,h,m,v,x,S,C){const{featureIndex:R,bucketIndex:L,sourceLayerIndex:D,layoutVertexArrayOffset:H}=a,G=this.bucketLayerIDs[L];if(h&&!function(Te,ye){for(let Ce=0;Ce<Te.length;Ce++)if(ye.indexOf(Te[Ce])>=0)return!0;return!1}(h,G))return;const Y=this.sourceLayerCoder.decode(D),ae=this.vtLayers[Y].feature(R);if(u.needGeometry){const Te=Xc(ae,!0);if(!u.filter(new O(this.tileID.overscaledZ),Te,this.tileID.canonical))return}else if(!u.filter(new O(this.tileID.overscaledZ),ae))return;const ve=this.getId(ae,Y);for(let Te=0;Te<G.length;Te++){const ye=G[Te];if(h&&h.indexOf(ye)<0)continue;const Ce=v[ye];if(!Ce)continue;let Ae={};ve!==void 0&&S&&(Ae=S.getState(Ce.sourceLayer||"_geojsonTileLayer",ve));const Pe=gt({},x[ye]);Pe.paint=j2(Pe.paint,Ce.paint,ae,Ae,m),Pe.layout=j2(Pe.layout,Ce.layout,ae,Ae,m);const Ye=!C||C(ae,Ce,Ae,H);if(!Ye)continue;const Ze=new T2(ae,this.z,this.x,this.y,ve);Ze.layer=Pe;let at=n[ye];at===void 0&&(at=n[ye]=[]),at.push({featureIndex:R,feature:Ze,intersectionZ:Ye})}}lookupSymbolFeatures(n,a,u,h,m,v,x,S){const C={};this.loadVTLayers();const R=td(m);for(const L of n)this.loadMatchingFeature(C,{bucketIndex:u,sourceLayerIndex:h,featureIndex:L,layoutVertexArrayOffset:0},R,v,x,S,a);return C}loadFeature(n){const{featureIndex:a,sourceLayerIndex:u}=n;this.loadVTLayers();const h=this.sourceLayerCoder.decode(u),m=this.vtFeatures[h];if(m[a])return m[a];const v=this.vtLayers[h].feature(a);return m[a]=v,v}hasLayer(n){for(const a of this.bucketLayerIDs)for(const u of a)if(n===u)return!0;return!1}getId(n,a){let u=n.id;if(this.promoteId){const h=typeof this.promoteId=="string"?this.promoteId:this.promoteId[a];h!=null&&(u=n.properties[h]),typeof u=="boolean"&&(u=Number(u))}return u}}function j2(i,n,a,u,h){return ft(i,(m,v)=>{const x=n instanceof me?n.get(v):null;return x&&x.evaluate?x.evaluate(a,u,h):x})}function b$(i,n){return n-i}Jt(N2,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});class U2{constructor(n,a){this.width=n,this.height=a,this.nextRow=0,this.image=new tl({width:n,height:a}),this.positions={},this.uploaded=!1}getDash(n,a){const u=this.getKey(n,a);return this.positions[u]}trim(){const n=this.width,a=this.height=Ut(this.nextRow);this.image.resize({width:n,height:a})}getKey(n,a){return n.join(",")+a}getDashRanges(n,a,u){const h=[];let m=n.length%2==1?-n[n.length-1]*u:0,v=n[0]*u,x=!0;h.push({left:m,right:v,isDash:x,zeroLength:n[0]===0});let S=n[0];for(let C=1;C<n.length;C++){x=!x;const R=n[C];m=S*u,S+=R,v=S*u,h.push({left:m,right:v,isDash:x,zeroLength:R===0})}return h}addRoundDash(n,a,u){const h=a/2;for(let m=-u;m<=u;m++){const v=this.width*(this.nextRow+u+m);let x=0,S=n[x];for(let C=0;C<this.width;C++){C/S.right>1&&(S=n[++x]);const R=Math.abs(C-S.left),L=Math.abs(C-S.right),D=Math.min(R,L);let H;const G=m/u*(h+1);if(S.isDash){const Y=h-Math.abs(G);H=Math.sqrt(D*D+Y*Y)}else H=h-Math.sqrt(D*D+G*G);this.image.data[v+C]=Math.max(0,Math.min(255,H+128))}}}addRegularDash(n,a){for(let S=n.length-1;S>=0;--S){const C=n[S],R=n[S+1];C.zeroLength?n.splice(S,1):R&&R.isDash===C.isDash&&(R.left=C.left,n.splice(S,1))}const u=n[0],h=n[n.length-1];u.isDash===h.isDash&&(u.left=h.left-this.width,h.right=u.right+this.width);const m=this.width*this.nextRow;let v=0,x=n[v];for(let S=0;S<this.width;S++){S/x.right>1&&(x=n[++v]);const C=Math.abs(S-x.left),R=Math.abs(S-x.right),L=Math.min(C,R);this.image.data[m+S]=Math.max(0,Math.min(255,(x.isDash?L:-L)+a+128))}}addDash(n,a){const u=this.getKey(n,a);if(this.positions[u])return this.positions[u];const h=a==="round",m=h?7:0,v=2*m+1;if(this.nextRow+v>this.height)return Ct("LineAtlas out of space"),null;n.length===0&&n.push(1);let x=0;for(let R=0;R<n.length;R++)n[R]<0&&(Ct("Negative value is found in line dasharray, replacing values with 0"),n[R]=0),x+=n[R];if(x!==0){const R=this.width/x,L=this.getDashRanges(n,this.width,R);h?this.addRoundDash(L,R,m):this.addRegularDash(L,a==="square"?.5*R:0)}const S=this.nextRow+m;this.nextRow+=v;const C={tl:[S,m],br:[x,0]};return this.positions[u]=C,C}}Jt(U2,"LineAtlas");const V2=1*ts;class H2{constructor(n){const a={},u=[];for(const x in n){const S=n[x],C=a[x]={};for(const R in S.glyphs){const L=S.glyphs[+R];if(!L||L.bitmap.width===0||L.bitmap.height===0)continue;const D=L.metrics.localGlyph?V2:1,H={x:0,y:0,w:L.bitmap.width+2*D,h:L.bitmap.height+2*D};u.push(H),C[R]=H}}const{w:h,h:m}=Q_(u),v=new tl({width:h||1,height:m||1});for(const x in n){const S=n[x];for(const C in S.glyphs){const R=S.glyphs[+C];if(!R||R.bitmap.width===0||R.bitmap.height===0)continue;const L=a[x][C],D=R.metrics.localGlyph?V2:1;tl.copy(R.bitmap,v,{x:0,y:0},{x:L.x+D,y:L.y+D},R.bitmap)}}this.image=v,this.positions=a}}Jt(H2,"GlyphAtlas");class w${constructor(n){this.tileID=new uo(n.tileID.overscaledZ,n.tileID.wrap,n.tileID.canonical.z,n.tileID.canonical.x,n.tileID.canonical.y),this.tileZoom=n.tileZoom,this.uid=n.uid,this.zoom=n.zoom,this.canonical=n.tileID.canonical,this.pixelRatio=n.pixelRatio,this.tileSize=n.tileSize,this.source=n.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=n.showCollisionBoxes,this.collectResourceTiming=!!n.collectResourceTiming,this.returnDependencies=!!n.returnDependencies,this.promoteId=n.promoteId,this.enableTerrain=!!n.enableTerrain,this.isSymbolTile=n.isSymbolTile,this.tileTransform=Jc(n.tileID.canonical,n.projection),this.projection=n.projection}parse(n,a,u,h,m){this.status="parsing",this.data=n,this.collisionBoxArray=new br;const v=new C2(Object.keys(n.layers).sort()),x=new N2(this.tileID,this.promoteId);x.bucketLayerIDs=[];const S={},C=new U2(256,256),R={featureIndex:x,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:C,availableImages:u},L=a.familiesBySource[this.source];for(const Ae in L){const Pe=n.layers[Ae];if(!Pe)continue;let Ye=!1,Ze=!1;for(const tt of L[Ae])tt[0].type==="symbol"?Ye=!0:Ze=!0;if(this.isSymbolTile===!0&&!Ye||this.isSymbolTile===!1&&!Ze)continue;Pe.version===1&&Ct(`Vector tile source "${this.source}" layer "${Ae}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const at=v.encode(Ae),Rt=[];for(let tt=0;tt<Pe.length;tt++){const pt=Pe.feature(tt),mt=x.getId(pt,Ae);Rt.push({feature:pt,id:mt,index:tt,sourceLayerIndex:at})}for(const tt of L[Ae]){const pt=tt[0];this.isSymbolTile!==void 0&&pt.type==="symbol"!==this.isSymbolTile||pt.minzoom&&this.zoom<Math.floor(pt.minzoom)||pt.maxzoom&&this.zoom>=pt.maxzoom||pt.visibility!=="none"&&(gx(tt,this.zoom,u),(S[pt.id]=pt.createBucket({index:x.bucketLayerIDs.length,layers:tt,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:at,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.spec,availableImages:u})).populate(Rt,R,this.tileID.canonical,this.tileTransform),x.bucketLayerIDs.push(tt.map(mt=>mt.id)))}}let D,H,G,Y;C.trim();const ae={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},ve=()=>{if(D)return m(D);if(H&&G&&Y){const Ae=new H2(H),Pe=new YC(G,Y);for(const Ye in S){const Ze=S[Ye];Ze instanceof Wl?(gx(Ze.layers,this.zoom,u),Z3(Ze,H,Ae.positions,G,Pe.iconPositions,this.showCollisionBoxes,u,this.tileID.canonical,this.tileZoom,this.projection)):Ze.hasPattern&&(Ze instanceof Dg||Ze instanceof Ag||Ze instanceof Nf)&&(gx(Ze.layers,this.zoom,u),Ze.addFeatures(R,this.tileID.canonical,Pe.patternPositions,u,this.tileTransform))}this.status="done",m(null,{buckets:Qe(S).filter(Ye=>!Ye.isEmpty()),featureIndex:x,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Ae.image,lineAtlas:C,imageAtlas:Pe,glyphMap:this.returnDependencies?H:null,iconMap:this.returnDependencies?G:null,glyphPositions:this.returnDependencies?Ae.positions:null})}},Te=ft(R.glyphDependencies,Ae=>Object.keys(Ae).map(Number));Object.keys(Te).length?h.send("getGlyphs",{uid:this.uid,stacks:Te},(Ae,Pe)=>{D||(D=Ae,H=Pe,ve())},void 0,!1,ae):H={};const ye=Object.keys(R.iconDependencies);ye.length?h.send("getImages",{icons:ye,source:this.source,tileID:this.tileID,type:"icons"},(Ae,Pe)=>{D||(D=Ae,G=Pe,ve())},void 0,!1,ae):G={};const Ce=Object.keys(R.patternDependencies);Ce.length?h.send("getImages",{icons:Ce,source:this.source,tileID:this.tileID,type:"patterns"},(Ae,Pe)=>{D||(D=Ae,Y=Pe,ve())},void 0,!1,ae):Y={},ve()}}function gx(i,n,a){const u=new O(n);for(const h of i)h.recalculate(u,a)}class G2{constructor(n){this.entries={},this.scheduler=n}request(n,a,u,h){const m=this.entries[n]=this.entries[n]||{callbacks:[]};if(m.result){const[v,x]=m.result;return this.scheduler?this.scheduler.add(()=>{h(v,x)},a):h(v,x),()=>{}}return m.callbacks.push(h),m.cancel||(m.cancel=u((v,x)=>{m.result=[v,x];for(const S of m.callbacks)this.scheduler?this.scheduler.add(()=>{S(v,x)},a):S(v,x);setTimeout(()=>delete this.entries[n],3e3)})),()=>{m.result||(m.callbacks=m.callbacks.filter(v=>v!==h),m.callbacks.length||(m.cancel(),delete this.entries[n]))}}}function W2(i,n,a){const u=JSON.stringify(i.request);return i.data&&(this.deduped.entries[u]={result:[null,i.data]}),this.deduped.request(u,{type:"parseTile",isSymbolTile:i.isSymbolTile,zoom:i.tileZoom},h=>{const m=Qn(i.request,(v,x,S,C)=>{v?h(v):x&&h(null,{vectorTile:a?void 0:new X_(new Fg(x)),rawData:x,cacheControl:S,expires:C})});return()=>{m.cancel(),h()}},n)}const q2=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class vx{static from(n){if(!(n instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[a,u]=new Uint8Array(n,0,2);if(a!==219)throw new Error("Data does not appear to be in a KDBush format.");const h=u>>4;if(h!==1)throw new Error(`Got v${h} data when expected v1.`);const m=q2[15&u];if(!m)throw new Error("Unrecognized array type.");const[v]=new Uint16Array(n,2,1),[x]=new Uint32Array(n,4,1);return new vx(x,v,m,n)}constructor(n,a=64,u=Float64Array,h){if(isNaN(n)||n<0)throw new Error(`Unpexpected numItems value: ${n}.`);this.numItems=+n,this.nodeSize=Math.min(Math.max(+a,2),65535),this.ArrayType=u,this.IndexArrayType=n<65536?Uint16Array:Uint32Array;const m=q2.indexOf(this.ArrayType),v=2*n*this.ArrayType.BYTES_PER_ELEMENT,x=n*this.IndexArrayType.BYTES_PER_ELEMENT,S=(8-x%8)%8;if(m<0)throw new Error(`Unexpected typed array class: ${u}.`);h&&h instanceof ArrayBuffer?(this.data=h,this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+x+S,2*n),this._pos=2*n,this._finished=!0):(this.data=new ArrayBuffer(8+v+x+S),this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+x+S,2*n),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+m]),new Uint16Array(this.data,2,1)[0]=a,new Uint32Array(this.data,4,1)[0]=n)}add(n,a){const u=this._pos>>1;return this.ids[u]=u,this.coords[this._pos++]=n,this.coords[this._pos++]=a,u}finish(){const n=this._pos>>1;if(n!==this.numItems)throw new Error(`Added ${n} items when expected ${this.numItems}.`);return yx(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(n,a,u,h){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:m,coords:v,nodeSize:x}=this,S=[0,m.length-1,0],C=[];for(;S.length;){const R=S.pop()||0,L=S.pop()||0,D=S.pop()||0;if(L-D<=x){for(let ae=D;ae<=L;ae++){const ve=v[2*ae],Te=v[2*ae+1];ve>=n&&ve<=u&&Te>=a&&Te<=h&&C.push(m[ae])}continue}const H=D+L>>1,G=v[2*H],Y=v[2*H+1];G>=n&&G<=u&&Y>=a&&Y<=h&&C.push(m[H]),(R===0?n<=G:a<=Y)&&(S.push(D),S.push(H-1),S.push(1-R)),(R===0?u>=G:h>=Y)&&(S.push(H+1),S.push(L),S.push(1-R))}return C}within(n,a,u){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:h,coords:m,nodeSize:v}=this,x=[0,h.length-1,0],S=[],C=u*u;for(;x.length;){const R=x.pop()||0,L=x.pop()||0,D=x.pop()||0;if(L-D<=v){for(let ae=D;ae<=L;ae++)X2(m[2*ae],m[2*ae+1],n,a)<=C&&S.push(h[ae]);continue}const H=D+L>>1,G=m[2*H],Y=m[2*H+1];X2(G,Y,n,a)<=C&&S.push(h[H]),(R===0?n-u<=G:a-u<=Y)&&(x.push(D),x.push(H-1),x.push(1-R)),(R===0?n+u>=G:a+u>=Y)&&(x.push(H+1),x.push(L),x.push(1-R))}return S}}function yx(i,n,a,u,h,m){if(h-u<=a)return;const v=u+h>>1;Z2(i,n,v,u,h,m),yx(i,n,a,u,v-1,1-m),yx(i,n,a,v+1,h,1-m)}function Z2(i,n,a,u,h,m){for(;h>u;){if(h-u>600){const C=h-u+1,R=a-u+1,L=Math.log(C),D=.5*Math.exp(2*L/3),H=.5*Math.sqrt(L*D*(C-D)/C)*(R-C/2<0?-1:1);Z2(i,n,a,Math.max(u,Math.floor(a-R*D/C+H)),Math.min(h,Math.floor(a+(C-R)*D/C+H)),m)}const v=n[2*a+m];let x=u,S=h;for(Qf(i,n,u,a),n[2*h+m]>v&&Qf(i,n,u,h);x<S;){for(Qf(i,n,x,S),x++,S--;n[2*x+m]<v;)x++;for(;n[2*S+m]>v;)S--}n[2*u+m]===v?Qf(i,n,u,S):(S++,Qf(i,n,S,h)),S<=a&&(u=S+1),a<=S&&(h=S-1)}}function Qf(i,n,a,u){_x(i,a,u),_x(n,2*a,2*u),_x(n,2*a+1,2*u+1)}function _x(i,n,a){const u=i[n];i[n]=i[a],i[a]=u}function X2(i,n,a,u){const h=i-a,m=n-u;return h*h+m*m}l.ARRAY_TYPE=ko,l.AUTH_ERR_MSG=Se,l.Aabb=co,l.Actor=class{constructor(i,n,a){this.target=i,this.parent=n,this.mapId=a,this.callbacks={},this.cancelCallbacks={},ut(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=Nt()?i:w,this.scheduler=new m$}send(i,n,a,u,h=!1,m){const v=Math.round(1e18*Math.random()).toString(36).substring(0,10);a&&(a.metadata=m,this.callbacks[v]=a);const x=kt(this.globalScope)?void 0:[];return this.target.postMessage({id:v,type:i,hasCallback:!!a,targetMapId:u,mustQueue:h,sourceMapId:this.mapId,data:Fl(n,x)},x),{cancel:()=>{a&&delete this.callbacks[v],this.target.postMessage({id:v,type:"<cancel>",targetMapId:u,sourceMapId:this.mapId})}}}receive(i){const n=i.data,a=n.id;if(a&&(!n.targetMapId||this.mapId===n.targetMapId))if(n.type==="<cancel>"){const u=this.cancelCallbacks[a];delete this.cancelCallbacks[a],u&&u.cancel()}else if(n.mustQueue||Nt()){const u=this.callbacks[a];this.cancelCallbacks[a]=this.scheduler.add(()=>this.processTask(a,n),u&&u.metadata||{type:"message"})}else this.processTask(a,n)}processTask(i,n){if(n.type==="<response>"){const a=this.callbacks[i];delete this.callbacks[i],a&&(n.error?a(Zs(n.error)):a(null,Zs(n.data)))}else{const a=kt(this.globalScope)?void 0:[],u=n.hasCallback?(m,v)=>{delete this.cancelCallbacks[i],this.target.postMessage({id:i,type:"<response>",sourceMapId:this.mapId,error:m?Fl(m):null,data:Fl(v,a)},a)}:m=>{},h=Zs(n.data);if(this.parent[n.type])this.parent[n.type](n.sourceMapId,h,u);else if(this.parent.getWorkerSource){const m=n.type.split(".");this.parent.getWorkerSource(n.sourceMapId,m[0],h.source)[m[1]](h,u)}else u(new Error(`Could not find function ${n.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},l.CanonicalTileID=Lg,l.Color=Nr,l.ColorMode=Rs,l.CullFaceMode=ns,l.DEMData=Yg,l.DataConstantProperty=K,l.DedupedRequest=G2,l.DepthMode=Td,l.EXTENT=gn,l.Elevation=class{isDataAvailableAtPoint(i){const n=this._source();if(this.isUsingMockSource()||!n||i.y<0||i.y>1)return!1;const a=n.getSource().maxzoom,u=1<<a,h=Math.floor(i.x),m=Math.floor((i.x-h)*u),v=Math.floor(i.y*u),x=this.findDEMTileFor(new uo(a,h,a,m,v));return!(!x||!x.dem)}getAtPointOrZero(i,n=0){return this.getAtPoint(i,n)||0}getAtPoint(i,n,a=!0){if(this.isUsingMockSource())return null;n==null&&(n=null);const u=this._source();if(!u||i.y<0||i.y>1)return n;const h=u.getSource().maxzoom,m=1<<h,v=Math.floor(i.x),x=i.x-v,S=new uo(h,v,h,Math.floor(x*m),Math.floor(i.y*m)),C=this.findDEMTileFor(S);if(!C||!C.dem)return n;const R=C.dem,L=1<<C.tileID.canonical.z,D=(x*L-C.tileID.canonical.x)*R.dim,H=(i.y*L-C.tileID.canonical.y)*R.dim,G=Math.floor(D),Y=Math.floor(H);return(a?this.exaggeration():1)*Jn(Jn(R.get(G,Y),R.get(G,Y+1),H-Y),Jn(R.get(G+1,Y),R.get(G+1,Y+1),H-Y),D-G)}getAtTileOffset(i,n,a){const u=1<<i.canonical.z;return this.getAtPointOrZero(new hd(i.wrap+(i.canonical.x+n/gn)/u,(i.canonical.y+a/gn)/u))}getAtTileOffsetFunc(i,n,a,u){return h=>{const m=this.getAtTileOffset(i,h.x,h.y),v=u.upVector(i.canonical,h.x,h.y);return Qo(v,v,m*u.upVectorScale(i.canonical,n,a).metersToTile),v}}getForTilePoints(i,n,a,u){if(this.isUsingMockSource())return!1;const h=Jg.create(this,i,u);return!!h&&(n.forEach(m=>{m[2]=this.exaggeration()*h.getElevationAt(m[0],m[1],a)}),!0)}getMinMaxForTile(i){if(this.isUsingMockSource())return null;const n=this.findDEMTileFor(i);if(!n||!n.dem)return null;const a=n.dem.tree,u=n.tileID,h=1<<i.canonical.z-u.canonical.z;let m=i.canonical.x/h-u.canonical.x,v=i.canonical.y/h-u.canonical.y,x=0;for(let S=0;S<i.canonical.z-u.canonical.z&&!a.leaves[x];S++){m*=2,v*=2;const C=2*Math.floor(v)+Math.floor(m);x=a.childOffsets[x]+C,m%=1,v%=1}return{min:this.exaggeration()*a.minimums[x],max:this.exaggeration()*a.maximums[x]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(i,n,a){throw new Error("Pure virtual method called.")}pointCoordinate(i){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(i){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},l.ErrorEvent=_i,l.EvaluationParameters=O,l.Event=ao,l.Evented=Oi,l.FillExtrusionBucket=Nf,l.Frustum=T_,l.FrustumCorners=C_,l.GLOBE_RADIUS=Cs,l.GLOBE_SCALE_MATCH_LATITUDE=45,l.GLOBE_ZOOM_THRESHOLD_MAX=ZE,l.GLOBE_ZOOM_THRESHOLD_MIN=I_,l.GlobeSharedBuffers=class{constructor(i){this._createGrid(i),this._createPoles(i)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const i of this._poleSegments)i.destroy();for(const i of this._gridSegments)i.withSkirts.destroy(),i.withoutSkirts.destroy();if(this._wireframeIndexBuffer){this._wireframeIndexBuffer.destroy();for(const i of this._wireframeSegments)i.destroy()}}_fillGridMeshWithLods(i,n){const a=new At,u=new cn,h=[],m=i+1+2,v=n[0]+1,x=n[0]+1+(1+n.length),S=(C,R,L)=>{let D=C===m-1?C-2:C===0?C:C-1;return D+=L?24575:0,[D,R]};for(let C=0;C<m;++C)a.emplaceBack(...S(C,0,!0));for(let C=0;C<v;++C)for(let R=0;R<m;++R)a.emplaceBack(...S(R,C,(R===0||R===m-1)&&!0));for(let C=0;C<n.length;++C){const R=n[C];for(let L=0;L<m;++L)a.emplaceBack(...S(L,R,!0))}for(let C=0;C<n.length;++C){const R=u.length,L=n[C]+1+2,D=new cn;for(let Y=0;Y<L-1;Y++){const ae=Y===L-2,ve=ae?m*(x-n.length+C-Y):m;for(let Te=0;Te<m-1;Te++){const ye=Y*m+Te;Y===0||ae||Te===0||Te===m-2?(D.emplaceBack(ye+1,ye,ye+ve),D.emplaceBack(ye+ve,ye+ve+1,ye+1)):(u.emplaceBack(ye+1,ye,ye+ve),u.emplaceBack(ye+ve,ye+ve+1,ye+1))}}const H=si.simpleSegment(0,R,a.length,u.length-R);for(let Y=0;Y<D.uint16.length;Y+=3)u.emplaceBack(D.uint16[Y],D.uint16[Y+1],D.uint16[Y+2]);const G=si.simpleSegment(0,R,a.length,u.length-R);h.push({withoutSkirts:H,withSkirts:G})}return{vertices:a,indices:u,segments:h}}_createGrid(i){const n=this._fillGridMeshWithLods(qc,Af);this._gridSegments=n.segments,this._gridBuffer=i.createVertexBuffer(n.vertices,Pf.members),this._gridIndexBuffer=i.createIndexBuffer(n.indices,!0)}_createPoles(i){const n=new cn;for(let h=0;h<=qc;h++)n.emplaceBack(0,h+1,h+2);this._poleIndexBuffer=i.createIndexBuffer(n,!0);const a=new xr,u=new xr;this._poleSegments=[];for(let h=0,m=0;h<I_;h++){const v=360/(1<<h);a.emplaceBack(0,-Cs,0,.5,0),u.emplaceBack(0,-Cs,0,.5,1);for(let x=0;x<=qc;x++){const S=x/qc,C=Jn(0,v,S),[R,L,D]=cd(mk,gk,C,Cs);a.emplaceBack(R,L,D,S,0),u.emplaceBack(R,L,D,S,1)}this._poleSegments.push(si.simpleSegment(m,0,66,64)),m+=66}this._poleNorthVertexBuffer=i.createVertexBuffer(a,WE,!1),this._poleSouthVertexBuffer=i.createVertexBuffer(u,WE,!1)}getGridBuffers(i,n){return[this._gridBuffer,this._gridIndexBuffer,n?this._gridSegments[i].withSkirts:this._gridSegments[i].withoutSkirts]}getPoleBuffers(i){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[i]]}getWirefameBuffers(i,n){if(!this._wireframeSegments){const a=new Ti,u=qc,h=u+1+2,m=1;this._wireframeSegments=[];for(let v=0,x=0;v<Af.length;v++){const S=Af[v];for(let R=m;R<S+m;R++)for(let L=m;L<u+m;L++){const D=R*h+L;a.emplaceBack(D,D+1),a.emplaceBack(D,D+h),a.emplaceBack(D,D+h+1)}const C=S*u*3;this._wireframeSegments.push(si.simpleSegment(0,x,(S+1)*h,C)),x+=C}this._wireframeIndexBuffer=i.createIndexBuffer(a)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments[n]]}},l.GlyphManager=bd,l.ImagePosition=ex,l.KDBush=vx,l.LivePerformanceUtils=Tr,l.LngLat=wr,l.LngLatBounds=Ul,l.LocalGlyphMode=rx,l.MAX_MERCATOR_LATITUDE=Wi,l.MercatorCoordinate=hd,l.ONE_EM=Li,l.OverscaledTileID=uo,l.PerformanceMarkers=En,l.Point=te,l.Properties=be,l.RGBAImage=$o,l.Ray=E_,l.RequestManager=class{constructor(i,n,a){this._transformRequestFn=i,this._customAccessToken=n,this._silenceAuthErrors=!!a,this._createSkuToken()}_createSkuToken(){const i=function(){let n="";for(let a=0;a<10;a++)n+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",j,n].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=i.token,this._skuTokenExpiresAt=i.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(i,n){return this._transformRequestFn&&this._transformRequestFn(i,n)||{url:i}}normalizeStyleURL(i,n){if(!Ie(i))return i;const a=Je(i);return a.path=`/styles/v1${a.path}`,this._makeAPIURL(a,this._customAccessToken||n)}normalizeGlyphsURL(i,n){if(!Ie(i))return i;const a=Je(i);return a.path=`/fonts/v1${a.path}`,this._makeAPIURL(a,this._customAccessToken||n)}normalizeSourceURL(i,n,a,u){if(!Ie(i))return i;const h=Je(i);return h.path=`/v4/${h.authority}.json`,h.params.push("secure"),a&&h.params.push(`language=${a}`),u&&h.params.push(`worldview=${u}`),this._makeAPIURL(h,this._customAccessToken||n)}normalizeSpriteURL(i,n,a,u){const h=Je(i);return Ie(i)?(h.path=`/styles/v1${h.path}/sprite${n}${a}`,this._makeAPIURL(h,this._customAccessToken||u)):(h.path+=`${n}${a}`,We(h))}normalizeTileURL(i,n,a){if(this._isSkuTokenExpired()&&this._createSkuToken(),i&&!Ie(i))return i;const u=Je(i);u.path=u.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${n||a&&u.authority!=="raster"&&a===512?"@2x":""}${z.supported?".webp":"$1"}`),u.authority==="raster"?u.path=`/${M.RASTER_URL_PREFIX}${u.path}`:(u.path=u.path.replace(/^.+\/v4\//,"/"),u.path=`/${M.TILE_URL_VERSION}${u.path}`);const h=this._customAccessToken||function(m){for(const v of m){const x=v.match(/^access_token=(.*)$/);if(x)return x[1]}return null}(u.params)||M.ACCESS_TOKEN;return M.REQUIRE_ACCESS_TOKEN&&h&&this._skuToken&&u.params.push(`sku=${this._skuToken}`),this._makeAPIURL(u,h)}canonicalizeTileURL(i,n){const a=Je(i);if(!a.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!a.path.match(/\.[\w]+$/))return i;let u="mapbox://";a.path.match(/^\/raster\/v1\//)?u+=`raster/${a.path.replace(`/${M.RASTER_URL_PREFIX}/`,"")}`:u+=`tiles/${a.path.replace(`/${M.TILE_URL_VERSION}/`,"")}`;let h=a.params;return n&&(h=h.filter(m=>!m.match(/^access_token=/))),h.length&&(u+=`?${h.join("&")}`),u}canonicalizeTileset(i,n){const a=!!n&&Ie(n),u=[];for(const h of i.tiles||[])Me(h)?u.push(this.canonicalizeTileURL(h,a)):u.push(h);return u}_makeAPIURL(i,n){const a="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",u=Je(M.API_URL);if(i.protocol=u.protocol,i.authority=u.authority,i.protocol==="http"){const h=i.params.indexOf("secure");h>=0&&i.params.splice(h,1)}if(u.path!=="/"&&(i.path=`${u.path}${i.path}`),!M.REQUIRE_ACCESS_TOKEN)return We(i);if(n=n||M.ACCESS_TOKEN,!this._silenceAuthErrors){if(!n)throw new Error(`An API access token is required to use Mapbox GL. ${a}`);if(n[0]==="s")throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${a}`)}return i.params=i.params.filter(h=>h.indexOf("access_token")===-1),i.params.push(`access_token=${n||""}`),We(i)}},l.ResourceType=jn,l.SegmentVector=si,l.SourceCache=Qc,l.StencilMode=fx,l.StructArrayLayout1ui2=Do,l.StructArrayLayout2f1f2i16=_n,l.StructArrayLayout2i4=At,l.StructArrayLayout2ui4=Ti,l.StructArrayLayout3f12=Un,l.StructArrayLayout3ui6=cn,l.StructArrayLayout4i8=ht,l.StructArrayLayout5f20=xr,l.Texture=Yf,l.Tile=dx,l.Transitionable=q,l.Uniform1f=vg,l.Uniform1i=class extends Ys{constructor(i){super(i),this.current=0}set(i,n,a){this.fetchUniformLocation(i,n)&&this.current!==a&&(this.current=a,this.gl.uniform1i(this.location,a))}},l.Uniform2f=class extends Ys{constructor(i){super(i),this.current=[0,0]}set(i,n,a){this.fetchUniformLocation(i,n)&&(a[0]===this.current[0]&&a[1]===this.current[1]||(this.current=a,this.gl.uniform2f(this.location,a[0],a[1])))}},l.Uniform3f=class extends Ys{constructor(i){super(i),this.current=[0,0,0]}set(i,n,a){this.fetchUniformLocation(i,n)&&(a[0]===this.current[0]&&a[1]===this.current[1]&&a[2]===this.current[2]||(this.current=a,this.gl.uniform3f(this.location,a[0],a[1],a[2])))}},l.Uniform4f=PE,l.UniformColor=AE,l.UniformMatrix2f=class extends Ys{constructor(i){super(i),this.current=QD}set(i,n,a){if(this.fetchUniformLocation(i,n)){for(let u=0;u<4;u++)if(a[u]!==this.current[u]){this.current=a,this.gl.uniformMatrix2fv(this.location,!1,a);break}}}},l.UniformMatrix3f=class extends Ys{constructor(i){super(i),this.current=JD}set(i,n,a){if(this.fetchUniformLocation(i,n)){for(let u=0;u<9;u++)if(a[u]!==this.current[u]){this.current=a,this.gl.uniformMatrix3fv(this.location,!1,a);break}}}},l.UniformMatrix4f=class extends Ys{constructor(i){super(i),this.current=YD}set(i,n,a){if(this.fetchUniformLocation(i,n)){if(a[12]!==this.current[12]||a[0]!==this.current[0])return this.current=a,void this.gl.uniformMatrix4fv(this.location,!1,a);for(let u=1;u<16;u++)if(a[u]!==this.current[u]){this.current=a,this.gl.uniformMatrix4fv(this.location,!1,a);break}}}},l.UnwrappedTileID=kC,l.ValidationError=Kt,l.VectorTileFeature=Og,l.VectorTileWorkerSource=class extends Oi{constructor(i,n,a,u,h){super(),this.actor=i,this.layerIndex=n,this.availableImages=a,this.loadVectorData=h||W2,this.loading={},this.loaded={},this.deduped=new G2(i.scheduler),this.isSpriteLoaded=u,this.scheduler=i.scheduler}loadTile(i,n){const a=i.uid,u=i&&i.request,h=u&&u.collectResourceTiming,m=this.loading[a]=new w$(i);m.abort=this.loadVectorData(i,(v,x)=>{const S=!this.loading[a];if(delete this.loading[a],S||v||!x)return m.status="done",S||(this.loaded[a]=m),n(v);const C=x.rawData,R={};x.expires&&(R.expires=x.expires),x.cacheControl&&(R.cacheControl=x.cacheControl),m.vectorTile=x.vectorTile||new X_(new Fg(C));const L=()=>{m.parse(m.vectorTile,this.layerIndex,this.availableImages,this.actor,(D,H)=>{if(D||!H)return n(D);const G={};if(h){const Y=Ni(u);Y.length>0&&(G.resourceTiming=JSON.parse(JSON.stringify(Y)))}n(null,gt({rawTileData:C.slice(0)},H,R,G))})};this.isSpriteLoaded?L():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(L,{type:"parseTile",isSymbolTile:i.isSymbolTile,zoom:i.tileZoom}):L()}),this.loaded=this.loaded||{},this.loaded[a]=m})}reloadTile(i,n){const a=this.loaded,u=i.uid,h=this;if(a&&a[u]){const m=a[u];m.showCollisionBoxes=i.showCollisionBoxes,m.enableTerrain=!!i.enableTerrain,m.projection=i.projection,m.tileTransform=Jc(i.tileID.canonical,i.projection);const v=(x,S)=>{const C=m.reloadCallback;C&&(delete m.reloadCallback,m.parse(m.vectorTile,h.layerIndex,this.availableImages,h.actor,C)),n(x,S)};m.status==="parsing"?m.reloadCallback=v:m.status==="done"&&(m.vectorTile?m.parse(m.vectorTile,this.layerIndex,this.availableImages,this.actor,v):v())}}abortTile(i,n){const a=i.uid,u=this.loading[a];u&&(u.abort&&u.abort(),delete this.loading[a]),n()}removeTile(i,n){const a=this.loaded,u=i.uid;a&&a[u]&&delete a[u],n()}},l.WritingMode=ta,l.ZoomDependentExpression=Lc,l.add=Qs,l.addDynamicAttributes=Zg,l.adjoint=function(i,n){var a=n[0],u=n[1],h=n[2],m=n[3],v=n[4],x=n[5],S=n[6],C=n[7],R=n[8];return i[0]=v*R-x*C,i[1]=h*C-u*R,i[2]=u*x-h*v,i[3]=x*S-m*R,i[4]=a*R-h*S,i[5]=h*m-a*x,i[6]=m*C-v*S,i[7]=u*S-a*C,i[8]=a*v-u*m,i},l.asyncAll=Ge,l.bezier=Le,l.bindAll=ut,l.boundsAttributes=M2,l.bufferConvexPolygon=function(i,n){const a=[];for(let u=0;u<i.length;u++){const h=Be(u-1,-1,i.length-1),m=Be(u+1,-1,i.length-1),v=i[u],x=i[m],S=i[h].sub(v).unit(),C=x.sub(v).unit(),R=C.angleWithSep(S.x,S.y),L=S.add(C).unit().mult(-1*n/Math.sin(R/2));a.push(v.add(L))}return a},l.cacheEntryPossiblyAdded=function(i){Wn++,Wn>on&&(i.getActor().send("enforceCacheSizeLimit",Mn),Wn=0)},l.calculateGlobeLabelMatrix=function(i,n){const{x:a,y:u}=i.point,h=QE(a,u,i.worldSize/i._pixelsPerMercatorPixel,0,0);return Hc(h,h,A_(Ts(n)))},l.calculateGlobeMatrix=function(i){const{x:n,y:a}=i.point,{lng:u,lat:h}=i._center;return QE(n,a,i.worldSize,u,h)},l.calculateGlobeMercatorMatrix=function(i){const n=i.pixelsPerMeter,a=n/Qa(1,i.center.lat),u=Ya(new Float64Array(16));return Sf(u,u,[i.point.x,i.point.y,0]),Gc(u,u,[a,a,n]),Float32Array.from(u)},l.circumferenceAtLatitude=O_,l.clamp=pe,l.clearTileCache=function(i){if(!zn())return;const n=w.caches.delete(An);i&&n.catch(i).then(()=>i())},l.clipLine=u2,l.clone=function(i){var n=new ko(16);return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],n[9]=i[9],n[10]=i[10],n[11]=i[11],n[12]=i[12],n[13]=i[13],n[14]=i[14],n[15]=i[15],n},l.clone$1=ct,l.collisionCircleLayout=x3,l.config=M,l.conjugate=function(i,n){return i[0]=-n[0],i[1]=-n[1],i[2]=-n[2],i[3]=n[3],i},l.create=function(){var i=new ko(16);return ko!=Float32Array&&(i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[11]=0,i[12]=0,i[13]=0,i[14]=0),i[0]=1,i[5]=1,i[10]=1,i[15]=1,i},l.create$1=zE,l.createExpression=Dl,l.createLayout=Ue,l.createStyleLayer=function(i){return i.type==="custom"?new d$(i):new f$[i.type](i)},l.cross=S_,l.degToRad=oe,l.distance=function(i,n){return Math.hypot(n[0]-i[0],n[1]-i[1],n[2]-i[2])},l.div=function(i,n,a){return i[0]=n[0]/a[0],i[1]=n[1]/a[1],i[2]=n[2]/a[2],i},l.dot=wa,l.earthRadius=zf,l.ease=Ne,l.easeCubicInOut=ke,l.ecefToLatLng=function([i,n,a]){const u=Math.hypot(i,n,a),h=Math.atan2(i,a),m=.5*Math.PI-Math.acos(-n/u);return new wr(fe(h),fe(m))},l.emitValidationErrors=dg,l.endsWith=It,l.enforceCacheSizeLimit=function(i){yn(),Vn&&Vn.then(n=>{n.keys().then(a=>{for(let u=0;u<a.length-i;u++)n.delete(a[u])})})},l.evaluateSizeForFeature=kg,l.evaluateSizeForZoom=vd,l.evaluateVariableOffset=m2,l.evented=_,l.exactEquals=function(i,n){return i[0]===n[0]&&i[1]===n[1]&&i[2]===n[2]&&i[3]===n[3]},l.exactEquals$1=function(i,n){return i[0]===n[0]&&i[1]===n[1]&&i[2]===n[2]},l.exported=ji,l.exported$1=z,l.extend=gt,l.extend$1=Si,l.fillExtrusionHeightLift=zC,l.filterObject=yt,l.fromMat4=function(i,n){return i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=n[4],i[4]=n[5],i[5]=n[6],i[6]=n[8],i[7]=n[9],i[8]=n[10],i},l.fromQuat=function(i,n){var a=n[0],u=n[1],h=n[2],m=n[3],v=a+a,x=u+u,S=h+h,C=a*v,R=u*v,L=u*x,D=h*v,H=h*x,G=h*S,Y=m*v,ae=m*x,ve=m*S;return i[0]=1-L-G,i[1]=R+ve,i[2]=D-ae,i[3]=0,i[4]=R-ve,i[5]=1-C-G,i[6]=H+Y,i[7]=0,i[8]=D+ae,i[9]=H-Y,i[10]=1-C-L,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i},l.fromRotation=function(i,n){var a=Math.sin(n),u=Math.cos(n);return i[0]=u,i[1]=a,i[2]=0,i[3]=-a,i[4]=u,i[5]=0,i[6]=0,i[7]=0,i[8]=1,i},l.fromScaling=DE,l.furthestTileCorner=function(i){const n=Math.round((i+45+360)%360/90)%4;return Ee[n]},l.getAABBPointSquareDist=function(i,n,a){let u=0;for(let h=0;h<2;++h){const m=a?a[h]:0;i[h]>m&&(u+=(i[h]-m)*(i[h]-m)),n[h]<m&&(u+=(m-n[h])*(m-n[h]))}return u},l.getAnchorAlignment=nx,l.getAnchorJustification=ox,l.getBounds=function(i){let n=1/0,a=1/0,u=-1/0,h=-1/0;for(const m of i)n=Math.min(n,m.x),a=Math.min(a,m.y),u=Math.max(u,m.x),h=Math.max(h,m.y);return{min:new te(n,a),max:new te(u,h)}},l.getColumn=sn,l.getDefaultExportFromCjs=V,l.getGridMatrix=function(i,n,a,u){const h=n.getNorth(),m=n.getSouth(),v=n.getWest(),x=n.getEast(),S=1<<i.z,C=x-v,R=h-m,L=C/qc,D=-R/Af[a],H=[0,L,0,D,0,0,h,v,0];if(i.z>0){const G=180/u;LE(H,H,[G/C+1,0,0,0,G/R+1,0,-.5*G/L,.5*G/D,1])}return H[2]=S,H[5]=i.x,H[8]=i.y,H},l.getImage=de,l.getJSON=function(i,n){return qn(gt(i,{type:"json"}),n)},l.getLatitudinalLod=function(i){const n=Wi-5;i=pe(i,-n,n)/n*90;const a=Math.pow(Math.abs(Math.sin(oe(i))),3);return Math.round(a*(Af.length-1))},l.getMapSessionAPI=an,l.getPerformanceMeasurement=Ni,l.getProjection=S2,l.getRTLTextPluginStatus=b,l.getReferrer=ar,l.getTilePoint=function(i,{x:n,y:a},u=0){return new te(((n-u)*i.scale-i.x)*gn,(a*i.scale-i.y)*gn)},l.getTileVec3=function(i,n,a=0){return ld(((n.x-a)*i.scale-i.x)*gn,(n.y*i.scale-i.y)*gn,rC(n.z,n.y))},l.getVideo=function(i,n){const a=w.document.createElement("video");a.muted=!0,a.onloadstart=function(){n(null,a)};for(let u=0;u<i.length;u++){const h=w.document.createElement("source");Rr(i[u])||(a.crossOrigin="Anonymous"),h.src=i[u],a.appendChild(h)}return{cancel:()=>{}}},l.globeCenterToScreenPoint=function(i){const n=[0,0,0],a=Ya(new Float64Array(16));return Hc(a,i.pixelMatrix,i.globeMatrix),ii(n,n,a),new te(n[0],n[1])},l.globeDenormalizeECEF=A_,l.globeECEFOrigin=function(i,n){const a=[0,0,0];return ii(a,a,Of(Ts(n.canonical))),ii(a,a,i),a},l.globeMetersToEcef=xg,l.globeNormalizeECEF=Of,l.globePixelsToTileUnits=function(i,n){return gn/(512*Math.pow(2,i))*wg(Ts(n))},l.globePoleMatrixForTile=function(i,n,a){const u=Ya(new Float64Array(16)),h=(n/(1<<i)-.5)*Math.PI*2;return _g(u,a.globeMatrix,h),Float32Array.from(u)},l.globeTileBounds=Ts,l.globeTiltAtLngLat=eC,l.globeToMercatorTransition=dd,l.globeUseCustomAntiAliasing=function(i,n,a){const u=dd(a.zoom),h=i.style.map._antialias,m=!!n.extStandardDerivatives,v=n.extStandardDerivativesForceOff||i.terrain&&i.terrain.exaggeration()>0;return u===0&&!h&&!v&&m},l.identity=Ya,l.identity$1=VE,l.invert=__,l.isFullscreen=function(){return!!w.document.fullscreenElement||!!w.document.webkitFullscreenElement},l.isLngLatBehindGlobe=R_,l.isMapAuthenticated=function(i){return nn.has(i)},l.isMapboxURL=Ie,l.isSafariWithAntialiasingBug=function(i){const n=i.navigator?i.navigator.userAgent:null;return!!kt(i)&&n&&(n.match("Version/15.4")||n.match("Version/15.5")||n.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},l.latFromMercatorY=Gi,l.latLngToECEF=ud,l.len=lk,l.length=Ef,l.length$1=function(i){return Math.hypot(i[0],i[1],i[2],i[3])},l.lngFromMercatorX=ea,l.loadVectorTile=W2,l.makeRequest=qn,l.mapValue=function(i,n,a,u,h){return pe((i-n)/(a-n)*(h-u)+u,u,h)},l.mercatorScale=iC,l.mercatorXfromLng=Is,l.mercatorYfromLat=Ms,l.mercatorZfromAltitude=Qa,l.mul=ak,l.mul$1=sk,l.multiply=Hc,l.multiply$1=LE,l.multiply$2=FE,l.nextPowerOfTwo=Ut,l.normalize=lo,l.normalize$1=ck,l.normalize$2=jE,l.number=Jn,l.ortho=function(i,n,a,u,h,m,v){var x=1/(n-a),S=1/(u-h),C=1/(m-v);return i[0]=-2*x,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=-2*S,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=2*C,i[11]=0,i[12]=(n+a)*x,i[13]=(h+u)*S,i[14]=(v+m)*C,i[15]=1,i},l.pbf=VC,l.perspective=function(i,n,a,u,h){var m,v=1/Math.tan(n/2);return i[0]=v/a,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=v,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[11]=-1,i[12]=0,i[13]=0,i[15]=0,h!=null&&h!==1/0?(i[10]=(h+u)*(m=1/(u-h)),i[14]=2*h*u*m):(i[10]=-1,i[14]=-2*u),i},l.pick=function(i,n){const a={};for(let u=0;u<n.length;u++){const h=n[u];h in i&&(a[h]=i[h])}return a},l.plugin=A,l.pointGeometry=Q,l.polesInViewport=function(i){const n=Ya(new Float64Array(16));Hc(n,i.pixelMatrix,i.globeMatrix);const a=[0,Sa,0],u=[0,Ea,0];return ii(a,a,n),ii(u,u,n),[a[0]>0&&a[0]<=i.width&&a[1]>0&&a[1]<=i.height&&!R_(i,new wr(i.center.lat,90)),u[0]>0&&u[0]<=i.width&&u[1]>0&&u[1]<=i.height&&!R_(i,new wr(i.center.lat,-90))]},l.polygonContainsPoint=Kc,l.polygonIntersectsBox=dC,l.polygonIntersectsPolygon=sC,l.polygonizeBounds=function(i,n,a=0,u=!0){const h=new te(a,a),m=i.sub(h),v=n.add(h),x=[m,new te(v.x,m.y),v,new te(m.x,v.y)];return u&&x.push(m.clone()),x},l.posAttributes=Pf,l.postMapLoadEvent=On,l.postPerformanceEvent=Xn,l.postTurnstileEvent=ln,l.potpack=Q_,l.prevPowerOfTwo=function(i){return i<=1?1:Math.pow(2,Math.floor(Math.log(i)/Math.LN2))},l.radToDeg=fe,l.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],l.registerForPluginStateChange=function(i){return i({pluginStatus:p,pluginURL:s}),_.on("pluginStateChange",i),i},l.removeAuthState=function(i){nn.delete(i)},l.renderColorRamp=N_,l.resample=oC,l.rotateX=x_,l.rotateX$1=HE,l.rotateY=_g,l.rotateY$1=GE,l.rotateZ=function(i,n,a){var u=Math.sin(a),h=Math.cos(a),m=n[0],v=n[1],x=n[2],S=n[3],C=n[4],R=n[5],L=n[6],D=n[7];return n!==i&&(i[8]=n[8],i[9]=n[9],i[10]=n[10],i[11]=n[11],i[12]=n[12],i[13]=n[13],i[14]=n[14],i[15]=n[15]),i[0]=m*h+C*u,i[1]=v*h+R*u,i[2]=x*h+L*u,i[3]=S*h+D*u,i[4]=C*h-m*u,i[5]=R*h-v*u,i[6]=L*h-x*u,i[7]=D*h-S*u,i},l.rotateZ$1=function(i,n,a){a*=.5;var u=n[0],h=n[1],m=n[2],v=n[3],x=Math.sin(a),S=Math.cos(a);return i[0]=u*S+h*x,i[1]=h*S-u*x,i[2]=m*S+v*x,i[3]=v*S-m*x,i},l.scale=Gc,l.scale$1=NE,l.scale$2=Qo,l.scaleAndAdd=If,l.set=function(i,n,a,u){return i[0]=n,i[1]=a,i[2]=u,i},l.setCacheLimits=function(i,n){Mn=i,on=n},l.setColumn=function(i,n,a){i[4*n+0]=a[0],i[4*n+1]=a[1],i[4*n+2]=a[2],i[4*n+3]=a[3]},l.setRTLTextPlugin=function(i,n,a=!1){if(p===yf||p===_f||p===xf)throw new Error("setRTLTextPlugin cannot be called multiple times.");s=ji.resolveURL(i),p=yf,Bl=n,g(),a||I()},l.smoothstep=He,l.spec=nt,l.squaredLength=function(i){var n=i[0],a=i[1],u=i[2];return n*n+a*a+u*u},l.storeAuthState=function(i,n){n?nn.add(i):nn.delete(i)},l.sub=Ja,l.subtract=w_,l.symbolSize=b3,l.tileAABB=function(i,n,a,u,h,m,v,x,S){if(S.name==="globe")return pk(i,n,new Lg(a,u,h));const C=Jc({z:a,x:u,y:h},S);return new co([(m+C.x/C.scale)*n,n*(C.y/C.scale),v],[(m+C.x2/C.scale)*n,n*(C.y2/C.scale),x])},l.tileCornersToBounds=bg,l.tileTransform=Jc,l.transformMat3=function(i,n,a){var u=n[0],h=n[1],m=n[2];return i[0]=u*a[0]+h*a[3]+m*a[6],i[1]=u*a[1]+h*a[4]+m*a[7],i[2]=u*a[2]+h*a[5]+m*a[8],i},l.transformMat4=ii,l.transformMat4$1=Wc,l.transformQuat=BE,l.transitionTileAABBinECEF=KE,l.translate=Sf,l.transpose=function(i,n){if(i===n){var a=n[1],u=n[2],h=n[5];i[1]=n[3],i[2]=n[6],i[3]=a,i[5]=n[7],i[6]=u,i[7]=h}else i[0]=n[0],i[1]=n[3],i[2]=n[6],i[3]=n[1],i[4]=n[4],i[5]=n[7],i[6]=n[2],i[7]=n[5],i[8]=n[8];return i},l.triggerPluginCompletionEvent=d,l.uniqueId=xt,l.updateGlobeVertexNormal=function(i,n,a,u,h){const m=5*n+2;i.float32[m+0]=a,i.float32[m+1]=u,i.float32[m+2]=h},l.validateCustomStyleLayer=function(i){const n=[],a=i.id;return a===void 0&&n.push({message:`layers.${a}: missing required property "id"`}),i.render===void 0&&n.push({message:`layers.${a}: missing required method "render"`}),i.renderingMode&&i.renderingMode!=="2d"&&i.renderingMode!=="3d"&&n.push({message:`layers.${a}: property "renderingMode" must be either "2d" or "3d"`}),n},l.validateFilter=i=>Lo(Bc(i)),l.validateFog=i=>Lo(lg(i)),l.validateLayer=i=>Lo(ig(i)),l.validateLight=i=>Lo(sg(i)),l.validateSource=i=>Lo(ag(i)),l.validateStyle=ug,l.validateTerrain=i=>Lo(ff(i)),l.values=Qe,l.vectorTile=Rg,l.version=E,l.warnOnce=Ct,l.window=w,l.wrap=Be}),f(["./shared"],function(l){function w(_e){if(typeof _e=="number"||typeof _e=="boolean"||typeof _e=="string"||_e==null)return JSON.stringify(_e);if(Array.isArray(_e)){let J="[";for(const de of _e)J+=`${w(de)},`;return`${J}]`}let W="{";for(const J of Object.keys(_e).sort())W+=`${J}:${w(_e[J])},`;return`${W}}`}function E(_e){let W="";for(const J of l.refProperties)W+=`/${w(_e[J])}`;return W}class P{constructor(W){this.keyCache={},W&&this.replace(W)}replace(W){this._layerConfigs={},this._layers={},this.update(W,[])}update(W,J){for(const Se of W)this._layerConfigs[Se.id]=Se,(this._layers[Se.id]=l.createStyleLayer(Se)).compileFilter(),this.keyCache[Se.id]&&delete this.keyCache[Se.id];for(const Se of J)delete this.keyCache[Se],delete this._layerConfigs[Se],delete this._layers[Se];this.familiesBySource={};const de=function(Se,Ie){const Me={};for(let we=0;we<Se.length;we++){const $e=Ie&&Ie[Se[we].id]||E(Se[we]);Ie&&(Ie[Se[we].id]=$e);let je=Me[$e];je||(je=Me[$e]=[]),je.push(Se[we])}const De=[];for(const we in Me)De.push(Me[we]);return De}(l.values(this._layerConfigs),this.keyCache);for(const Se of de){const Ie=Se.map(Je=>this._layers[Je.id]),Me=Ie[0];if(Me.visibility==="none")continue;const De=Me.source||"";let we=this.familiesBySource[De];we||(we=this.familiesBySource[De]={});const $e=Me.sourceLayer||"_geojsonTileLayer";let je=we[$e];je||(je=we[$e]=[]),je.push(Ie)}}}class M{loadTile(W,J){const{uid:de,encoding:Se,rawImageData:Ie,padding:Me,buildQuadTree:De}=W,we=l.window.ImageBitmap&&Ie instanceof l.window.ImageBitmap?this.getImageData(Ie,Me):Ie;J(null,new l.DEMData(de,we,Se,Me<1,De))}getImageData(W,J){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(W.width,W.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=W.width,this.offscreenCanvas.height=W.height,this.offscreenCanvasContext.drawImage(W,0,0,W.width,W.height);const de=this.offscreenCanvasContext.getImageData(-J,-J,W.width+2*J,W.height+2*J);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),de}}function z(_e,W){if(_e.length!==0){F(_e[0],W);for(var J=1;J<_e.length;J++)F(_e[J],!W)}}function F(_e,W){for(var J=0,de=0,Se=0,Ie=_e.length,Me=Ie-1;Se<Ie;Me=Se++){var De=(_e[Se][0]-_e[Me][0])*(_e[Me][1]+_e[Se][1]),we=J+De;de+=Math.abs(J)>=Math.abs(De)?J-we+De:De-we+J,J=we}J+de>=0!=!!W&&_e.reverse()}var k=l.getDefaultExportFromCjs(function _e(W,J){var de,Se=W&&W.type;if(Se==="FeatureCollection")for(de=0;de<W.features.length;de++)_e(W.features[de],J);else if(Se==="GeometryCollection")for(de=0;de<W.geometries.length;de++)_e(W.geometries[de],J);else if(Se==="Feature")_e(W.geometry,J);else if(Se==="Polygon")z(W.coordinates,J);else if(Se==="MultiPolygon")for(de=0;de<W.coordinates.length;de++)z(W.coordinates[de],J);return W});const U=l.VectorTileFeature.prototype.toGeoJSON;var X={exports:{}},$=l.pointGeometry,j=l.vectorTile.VectorTileFeature,V=Z;function Z(_e,W){this.options=W||{},this.features=_e,this.length=_e.length}function ee(_e,W){this.id=typeof _e.id=="number"?_e.id:void 0,this.type=_e.type,this.rawGeometry=_e.type===1?[_e.geometry]:_e.geometry,this.properties=_e.tags,this.extent=W||4096}Z.prototype.feature=function(_e){return new ee(this.features[_e],this.options.extent)},ee.prototype.loadGeometry=function(){var _e=this.rawGeometry;this.geometry=[];for(var W=0;W<_e.length;W++){for(var J=_e[W],de=[],Se=0;Se<J.length;Se++)de.push(new $(J[Se][0],J[Se][1]));this.geometry.push(de)}return this.geometry},ee.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var _e=this.geometry,W=1/0,J=-1/0,de=1/0,Se=-1/0,Ie=0;Ie<_e.length;Ie++)for(var Me=_e[Ie],De=0;De<Me.length;De++){var we=Me[De];W=Math.min(W,we.x),J=Math.max(J,we.x),de=Math.min(de,we.y),Se=Math.max(Se,we.y)}return[W,de,J,Se]},ee.prototype.toGeoJSON=j.prototype.toGeoJSON;var ne=l.pbf,Q=V;function ie(_e){var W=new ne;return function(J,de){for(var Se in J.layers)de.writeMessage(3,te,J.layers[Se])}(_e,W),W.finish()}function te(_e,W){var J;W.writeVarintField(15,_e.version||1),W.writeStringField(1,_e.name||""),W.writeVarintField(5,_e.extent||4096);var de={keys:[],values:[],keycache:{},valuecache:{}};for(J=0;J<_e.length;J++)de.feature=_e.feature(J),W.writeMessage(2,ge,de);var Se=de.keys;for(J=0;J<Se.length;J++)W.writeStringField(3,Se[J]);var Ie=de.values;for(J=0;J<Ie.length;J++)W.writeMessage(4,ke,Ie[J])}function ge(_e,W){var J=_e.feature;J.id!==void 0&&W.writeVarintField(1,J.id),W.writeMessage(2,ue,_e),W.writeVarintField(3,J.type),W.writeMessage(4,Ee,J)}function ue(_e,W){var J=_e.feature,de=_e.keys,Se=_e.values,Ie=_e.keycache,Me=_e.valuecache;for(var De in J.properties){var we=J.properties[De],$e=Ie[De];if(we!==null){$e===void 0&&(de.push(De),Ie[De]=$e=de.length-1),W.writeVarint($e);var je=typeof we;je!=="string"&&je!=="boolean"&&je!=="number"&&(we=JSON.stringify(we));var Je=je+":"+we,We=Me[Je];We===void 0&&(Se.push(we),Me[Je]=We=Se.length-1),W.writeVarint(We)}}}function oe(_e,W){return(W<<3)+(7&_e)}function fe(_e){return _e<<1^_e>>31}function Ee(_e,W){for(var J=_e.loadGeometry(),de=_e.type,Se=0,Ie=0,Me=J.length,De=0;De<Me;De++){var we=J[De],$e=1;de===1&&($e=we.length),W.writeVarint(oe(1,$e));for(var je=de===3?we.length-1:we.length,Je=0;Je<je;Je++){Je===1&&de!==1&&W.writeVarint(oe(2,je-1));var We=we[Je].x-Se,wt=we[Je].y-Ie;W.writeVarint(fe(We)),W.writeVarint(fe(wt)),Se+=We,Ie+=wt}de===3&&W.writeVarint(oe(7,1))}}function ke(_e,W){var J=typeof _e;J==="string"?W.writeStringField(1,_e):J==="boolean"?W.writeBooleanField(7,_e):J==="number"&&(_e%1!=0?W.writeDoubleField(3,_e):_e<0?W.writeSVarintField(6,_e):W.writeVarintField(5,_e))}X.exports=ie,X.exports.fromVectorTileJs=ie,X.exports.fromGeojsonVt=function(_e,W){W=W||{};var J={};for(var de in _e)J[de]=new Q(_e[de].features,W),J[de].name=de,J[de].version=W.version,J[de].extent=W.extent;return ie({layers:J})},X.exports.GeoJSONWrapper=Q;var Le=l.getDefaultExportFromCjs(X.exports);const Ne={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:_e=>_e},pe=Math.fround||(He=new Float32Array(1),_e=>(He[0]=+_e,He[0]));var He;const Be=3,Ge=5,Qe=6;class gt{constructor(W){this.options=Object.assign(Object.create(Ne),W),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(W){const{log:J,minZoom:de,maxZoom:Se}=this.options;J&&console.time("total time");const Ie=`prepare ${W.length} points`;J&&console.time(Ie),this.points=W;const Me=[];for(let we=0;we<W.length;we++){const $e=W[we];if(!$e.geometry)continue;const[je,Je]=$e.geometry.coordinates,We=pe(jt(je)),wt=pe(Ut(Je));Me.push(We,wt,1/0,we,-1,1),this.options.reduce&&Me.push(0)}let De=this.trees[Se+1]=this._createTree(Me);J&&console.timeEnd(Ie);for(let we=Se;we>=de;we--){const $e=+Date.now();De=this.trees[we]=this._createTree(this._cluster(De,we)),J&&console.log("z%d: %d clusters in %dms",we,De.numItems,+Date.now()-$e)}return J&&console.timeEnd("total time"),this}getClusters(W,J){let de=((W[0]+180)%360+360)%360-180;const Se=Math.max(-90,Math.min(90,W[1]));let Ie=W[2]===180?180:((W[2]+180)%360+360)%360-180;const Me=Math.max(-90,Math.min(90,W[3]));if(W[2]-W[0]>=360)de=-180,Ie=180;else if(de>Ie){const Je=this.getClusters([de,Se,180,Me],J),We=this.getClusters([-180,Se,Ie,Me],J);return Je.concat(We)}const De=this.trees[this._limitZoom(J)],we=De.range(jt(de),Ut(Me),jt(Ie),Ut(Se)),$e=De.data,je=[];for(const Je of we){const We=this.stride*Je;je.push($e[We+Ge]>1?St($e,We,this.clusterProps):this.points[$e[We+Be]])}return je}getChildren(W){const J=this._getOriginId(W),de=this._getOriginZoom(W),Se="No cluster with the specified id.",Ie=this.trees[de];if(!Ie)throw new Error(Se);const Me=Ie.data;if(J*this.stride>=Me.length)throw new Error(Se);const De=this.options.radius/(this.options.extent*Math.pow(2,de-1)),we=Ie.within(Me[J*this.stride],Me[J*this.stride+1],De),$e=[];for(const je of we){const Je=je*this.stride;Me[Je+4]===W&&$e.push(Me[Je+Ge]>1?St(Me,Je,this.clusterProps):this.points[Me[Je+Be]])}if($e.length===0)throw new Error(Se);return $e}getLeaves(W,J,de){const Se=[];return this._appendLeaves(Se,W,J=J||10,de=de||0,0),Se}getTile(W,J,de){const Se=this.trees[this._limitZoom(W)],Ie=Math.pow(2,W),{extent:Me,radius:De}=this.options,we=De/Me,$e=(de-we)/Ie,je=(de+1+we)/Ie,Je={features:[]};return this._addTileFeatures(Se.range((J-we)/Ie,$e,(J+1+we)/Ie,je),Se.data,J,de,Ie,Je),J===0&&this._addTileFeatures(Se.range(1-we/Ie,$e,1,je),Se.data,Ie,de,Ie,Je),J===Ie-1&&this._addTileFeatures(Se.range(0,$e,we/Ie,je),Se.data,-1,de,Ie,Je),Je.features.length?Je:null}getClusterExpansionZoom(W){let J=this._getOriginZoom(W)-1;for(;J<=this.options.maxZoom;){const de=this.getChildren(W);if(J++,de.length!==1)break;W=de[0].properties.cluster_id}return J}_appendLeaves(W,J,de,Se,Ie){const Me=this.getChildren(J);for(const De of Me){const we=De.properties;if(we&&we.cluster?Ie+we.point_count<=Se?Ie+=we.point_count:Ie=this._appendLeaves(W,we.cluster_id,de,Se,Ie):Ie<Se?Ie++:W.push(De),W.length===de)break}return Ie}_createTree(W){const J=new l.KDBush(W.length/this.stride|0,this.options.nodeSize,Float32Array);for(let de=0;de<W.length;de+=this.stride)J.add(W[de],W[de+1]);return J.finish(),J.data=W,J}_addTileFeatures(W,J,de,Se,Ie,Me){for(const De of W){const we=De*this.stride,$e=J[we+Ge]>1;let je,Je,We;if($e)je=xt(J,we,this.clusterProps),Je=J[we],We=J[we+1];else{const Xt=this.points[J[we+Be]];je=Xt.properties;const[un,ln]=Xt.geometry.coordinates;Je=jt(un),We=Ut(ln)}const wt={type:1,geometry:[[Math.round(this.options.extent*(Je*Ie-de)),Math.round(this.options.extent*(We*Ie-Se))]],tags:je};let Yt;Yt=$e||this.options.generateId?J[we+Be]:this.points[J[we+Be]].id,Yt!==void 0&&(wt.id=Yt),Me.features.push(wt)}}_limitZoom(W){return Math.max(this.options.minZoom,Math.min(Math.floor(+W),this.options.maxZoom+1))}_cluster(W,J){const{radius:de,extent:Se,reduce:Ie,minPoints:Me}=this.options,De=de/(Se*Math.pow(2,J)),we=W.data,$e=[],je=this.stride;for(let Je=0;Je<we.length;Je+=je){if(we[Je+2]<=J)continue;we[Je+2]=J;const We=we[Je],wt=we[Je+1],Yt=W.within(we[Je],we[Je+1],De),Xt=we[Je+Ge];let un=Xt;for(const ln of Yt){const Gn=ln*je;we[Gn+2]>J&&(un+=we[Gn+Ge])}if(un>Xt&&un>=Me){let ln,Gn=We*Xt,On=wt*Xt,er=-1;const Xn=((Je/je|0)<<5)+(J+1)+this.points.length;for(const Zr of Yt){const an=Zr*je;if(we[an+2]<=J)continue;we[an+2]=J;const nn=we[an+Ge];Gn+=we[an]*nn,On+=we[an+1]*nn,we[an+4]=Xn,Ie&&(ln||(ln=this._map(we,Je,!0),er=this.clusterProps.length,this.clusterProps.push(ln)),Ie(ln,this._map(we,an)))}we[Je+4]=Xn,$e.push(Gn/un,On/un,1/0,Xn,-1,un),Ie&&$e.push(er)}else{for(let ln=0;ln<je;ln++)$e.push(we[Je+ln]);if(un>1)for(const ln of Yt){const Gn=ln*je;if(!(we[Gn+2]<=J)){we[Gn+2]=J;for(let On=0;On<je;On++)$e.push(we[Gn+On])}}}}return $e}_getOriginId(W){return W-this.points.length>>5}_getOriginZoom(W){return(W-this.points.length)%32}_map(W,J,de){if(W[J+Ge]>1){const Me=this.clusterProps[W[J+Qe]];return de?Object.assign({},Me):Me}const Se=this.points[W[J+Be]].properties,Ie=this.options.map(Se);return de&&Ie===Se?Object.assign({},Ie):Ie}}function St(_e,W,J){return{type:"Feature",id:_e[W+Be],properties:xt(_e,W,J),geometry:{type:"Point",coordinates:[(de=_e[W],360*(de-.5)),bt(_e[W+1])]}};var de}function xt(_e,W,J){const de=_e[W+Ge],Se=de>=1e4?`${Math.round(de/1e3)}k`:de>=1e3?Math.round(de/100)/10+"k":de,Ie=_e[W+Qe],Me=Ie===-1?{}:Object.assign({},J[Ie]);return Object.assign(Me,{cluster:!0,cluster_id:_e[W+Be],point_count:de,point_count_abbreviated:Se})}function jt(_e){return _e/360+.5}function Ut(_e){const W=Math.sin(_e*Math.PI/180),J=.5-.25*Math.log((1+W)/(1-W))/Math.PI;return J<0?0:J>1?1:J}function bt(_e){const W=(180-360*_e)*Math.PI/180;return 360*Math.atan(Math.exp(W))/Math.PI-90}function ut(_e,W,J,de){for(var Se,Ie=de,Me=J-W>>1,De=J-W,we=_e[W],$e=_e[W+1],je=_e[J],Je=_e[J+1],We=W+3;We<J;We+=3){var wt=It(_e[We],_e[We+1],we,$e,je,Je);if(wt>Ie)Se=We,Ie=wt;else if(wt===Ie){var Yt=Math.abs(We-Me);Yt<De&&(Se=We,De=Yt)}}Ie>de&&(Se-W>3&&ut(_e,W,Se,de),_e[Se+2]=Ie,J-Se>3&&ut(_e,Se,J,de))}function It(_e,W,J,de,Se,Ie){var Me=Se-J,De=Ie-de;if(Me!==0||De!==0){var we=((_e-J)*Me+(W-de)*De)/(Me*Me+De*De);we>1?(J=Se,de=Ie):we>0&&(J+=Me*we,de+=De*we)}return(Me=_e-J)*Me+(De=W-de)*De}function ft(_e,W,J,de){var Se={id:_e===void 0?null:_e,type:W,geometry:J,tags:de,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Ie){var Me=Ie.geometry,De=Ie.type;if(De==="Point"||De==="MultiPoint"||De==="LineString")yt(Ie,Me);else if(De==="Polygon"||De==="MultiLineString")for(var we=0;we<Me.length;we++)yt(Ie,Me[we]);else if(De==="MultiPolygon")for(we=0;we<Me.length;we++)for(var $e=0;$e<Me[we].length;$e++)yt(Ie,Me[we][$e])}(Se),Se}function yt(_e,W){for(var J=0;J<W.length;J+=3)_e.minX=Math.min(_e.minX,W[J]),_e.minY=Math.min(_e.minY,W[J+1]),_e.maxX=Math.max(_e.maxX,W[J]),_e.maxY=Math.max(_e.maxY,W[J+1])}function ct(_e,W,J,de){if(W.geometry){var Se=W.geometry.coordinates,Ie=W.geometry.type,Me=Math.pow(J.tolerance/((1<<J.maxZoom)*J.extent),2),De=[],we=W.id;if(J.promoteId?we=W.properties[J.promoteId]:J.generateId&&(we=de||0),Ie==="Point")Mt(Se,De);else if(Ie==="MultiPoint")for(var $e=0;$e<Se.length;$e++)Mt(Se[$e],De);else if(Ie==="LineString")Ct(Se,De,Me,!1);else if(Ie==="MultiLineString"){if(J.lineMetrics){for($e=0;$e<Se.length;$e++)Ct(Se[$e],De=[],Me,!1),_e.push(ft(we,"LineString",De,W.properties));return}Qt(Se,De,Me,!1)}else if(Ie==="Polygon")Qt(Se,De,Me,!0);else{if(Ie!=="MultiPolygon"){if(Ie==="GeometryCollection"){for($e=0;$e<W.geometry.geometries.length;$e++)ct(_e,{id:we,geometry:W.geometry.geometries[$e],properties:W.properties},J,de);return}throw new Error("Input data is not a valid GeoJSON object.")}for($e=0;$e<Se.length;$e++){var je=[];Qt(Se[$e],je,Me,!0),De.push(je)}}_e.push(ft(we,Ie,De,W.properties))}}function Mt(_e,W){W.push(Vt(_e[0])),W.push(Nt(_e[1])),W.push(0)}function Ct(_e,W,J,de){for(var Se,Ie,Me=0,De=0;De<_e.length;De++){var we=Vt(_e[De][0]),$e=Nt(_e[De][1]);W.push(we),W.push($e),W.push(0),De>0&&(Me+=de?(Se*$e-we*Ie)/2:Math.sqrt(Math.pow(we-Se,2)+Math.pow($e-Ie,2))),Se=we,Ie=$e}var je=W.length-3;W[2]=1,ut(W,0,je,J),W[je+2]=1,W.size=Math.abs(Me),W.start=0,W.end=W.size}function Qt(_e,W,J,de){for(var Se=0;Se<_e.length;Se++){var Ie=[];Ct(_e[Se],Ie,J,de),W.push(Ie)}}function Vt(_e){return _e/360+.5}function Nt(_e){var W=Math.sin(_e*Math.PI/180),J=.5-.25*Math.log((1+W)/(1-W))/Math.PI;return J<0?0:J>1?1:J}function ot(_e,W,J,de,Se,Ie,Me,De){if(de/=W,Ie>=(J/=W)&&Me<de)return _e;if(Me<J||Ie>=de)return null;for(var we=[],$e=0;$e<_e.length;$e++){var je=_e[$e],Je=je.geometry,We=je.type,wt=Se===0?je.minX:je.minY,Yt=Se===0?je.maxX:je.maxY;if(wt>=J&&Yt<de)we.push(je);else if(!(Yt<J||wt>=de)){var Xt=[];if(We==="Point"||We==="MultiPoint")rt(Je,Xt,J,de,Se);else if(We==="LineString")kt(Je,Xt,J,de,Se,!1,De.lineMetrics);else if(We==="MultiLineString")sn(Je,Xt,J,de,Se,!1);else if(We==="Polygon")sn(Je,Xt,J,de,Se,!0);else if(We==="MultiPolygon")for(var un=0;un<Je.length;un++){var ln=[];sn(Je[un],ln,J,de,Se,!0),ln.length&&Xt.push(ln)}if(Xt.length){if(De.lineMetrics&&We==="LineString"){for(un=0;un<Xt.length;un++)we.push(ft(je.id,We,Xt[un],je.tags));continue}We!=="LineString"&&We!=="MultiLineString"||(Xt.length===1?(We="LineString",Xt=Xt[0]):We="MultiLineString"),We!=="Point"&&We!=="MultiPoint"||(We=Xt.length===3?"Point":"MultiPoint"),we.push(ft(je.id,We,Xt,je.tags))}}}return we.length?we:null}function rt(_e,W,J,de,Se){for(var Ie=0;Ie<_e.length;Ie+=3){var Me=_e[Ie+Se];Me>=J&&Me<=de&&(W.push(_e[Ie]),W.push(_e[Ie+1]),W.push(_e[Ie+2]))}}function kt(_e,W,J,de,Se,Ie,Me){for(var De,we,$e=Pt(_e),je=Se===0?Mn:on,Je=_e.start,We=0;We<_e.length-3;We+=3){var wt=_e[We],Yt=_e[We+1],Xt=_e[We+2],un=_e[We+3],ln=_e[We+4],Gn=Se===0?wt:Yt,On=Se===0?un:ln,er=!1;Me&&(De=Math.sqrt(Math.pow(wt-un,2)+Math.pow(Yt-ln,2))),Gn<J?On>J&&(we=je($e,wt,Yt,un,ln,J),Me&&($e.start=Je+De*we)):Gn>de?On<de&&(we=je($e,wt,Yt,un,ln,de),Me&&($e.start=Je+De*we)):An($e,wt,Yt,Xt),On<J&&Gn>=J&&(we=je($e,wt,Yt,un,ln,J),er=!0),On>de&&Gn<=de&&(we=je($e,wt,Yt,un,ln,de),er=!0),!Ie&&er&&(Me&&($e.end=Je+De*we),W.push($e),$e=Pt(_e)),Me&&(Je+=De)}var Xn=_e.length-3;wt=_e[Xn],Yt=_e[Xn+1],Xt=_e[Xn+2],(Gn=Se===0?wt:Yt)>=J&&Gn<=de&&An($e,wt,Yt,Xt),Xn=$e.length-3,Ie&&Xn>=3&&($e[Xn]!==$e[0]||$e[Xn+1]!==$e[1])&&An($e,$e[0],$e[1],$e[2]),$e.length&&W.push($e)}function Pt(_e){var W=[];return W.size=_e.size,W.start=_e.start,W.end=_e.end,W}function sn(_e,W,J,de,Se,Ie){for(var Me=0;Me<_e.length;Me++)kt(_e[Me],W,J,de,Se,Ie,!1)}function An(_e,W,J,de){_e.push(W),_e.push(J),_e.push(de)}function Mn(_e,W,J,de,Se,Ie){var Me=(Ie-W)/(de-W);return _e.push(Ie),_e.push(J+(Se-J)*Me),_e.push(1),Me}function on(_e,W,J,de,Se,Ie){var Me=(Ie-J)/(Se-J);return _e.push(W+(de-W)*Me),_e.push(Ie),_e.push(1),Me}function Vn(_e,W){for(var J=[],de=0;de<_e.length;de++){var Se,Ie=_e[de],Me=Ie.type;if(Me==="Point"||Me==="MultiPoint"||Me==="LineString")Se=Nn(Ie.geometry,W);else if(Me==="MultiLineString"||Me==="Polygon"){Se=[];for(var De=0;De<Ie.geometry.length;De++)Se.push(Nn(Ie.geometry[De],W))}else if(Me==="MultiPolygon")for(Se=[],De=0;De<Ie.geometry.length;De++){for(var we=[],$e=0;$e<Ie.geometry[De].length;$e++)we.push(Nn(Ie.geometry[De][$e],W));Se.push(we)}J.push(ft(Ie.id,Me,Se,Ie.tags))}return J}function Nn(_e,W){var J=[];J.size=_e.size,_e.start!==void 0&&(J.start=_e.start,J.end=_e.end);for(var de=0;de<_e.length;de+=3)J.push(_e[de]+W,_e[de+1],_e[de+2]);return J}function zn(_e,W){if(_e.transformed)return _e;var J,de,Se,Ie=1<<_e.z,Me=_e.x,De=_e.y;for(J=0;J<_e.features.length;J++){var we=_e.features[J],$e=we.geometry,je=we.type;if(we.geometry=[],je===1)for(de=0;de<$e.length;de+=2)we.geometry.push(yn($e[de],$e[de+1],W,Ie,Me,De));else for(de=0;de<$e.length;de++){var Je=[];for(Se=0;Se<$e[de].length;Se+=2)Je.push(yn($e[de][Se],$e[de][Se+1],W,Ie,Me,De));we.geometry.push(Je)}}return _e.transformed=!0,_e}function yn(_e,W,J,de,Se,Ie){return[Math.round(J*(_e*de-Se)),Math.round(J*(W*de-Ie))]}function rn(_e,W,J,de,Se){for(var Ie=W===Se.maxZoom?0:Se.tolerance/((1<<W)*Se.extent),Me={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:J,y:de,z:W,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},De=0;De<_e.length;De++){Me.numFeatures++,Wn(Me,_e[De],Ie,Se);var we=_e[De].minX,$e=_e[De].minY,je=_e[De].maxX,Je=_e[De].maxY;we<Me.minX&&(Me.minX=we),$e<Me.minY&&(Me.minY=$e),je>Me.maxX&&(Me.maxX=je),Je>Me.maxY&&(Me.maxY=Je)}return Me}function Wn(_e,W,J,de){var Se=W.geometry,Ie=W.type,Me=[];if(Ie==="Point"||Ie==="MultiPoint")for(var De=0;De<Se.length;De+=3)Me.push(Se[De]),Me.push(Se[De+1]),_e.numPoints++,_e.numSimplified++;else if(Ie==="LineString")jn(Me,Se,_e,J,!1,!1);else if(Ie==="MultiLineString"||Ie==="Polygon")for(De=0;De<Se.length;De++)jn(Me,Se[De],_e,J,Ie==="Polygon",De===0);else if(Ie==="MultiPolygon")for(var we=0;we<Se.length;we++){var $e=Se[we];for(De=0;De<$e.length;De++)jn(Me,$e[De],_e,J,!0,De===0)}if(Me.length){var je=W.tags||null;if(Ie==="LineString"&&de.lineMetrics){for(var Je in je={},W.tags)je[Je]=W.tags[Je];je.mapbox_clip_start=Se.start/Se.size,je.mapbox_clip_end=Se.end/Se.size}var We={geometry:Me,type:Ie==="Polygon"||Ie==="MultiPolygon"?3:Ie==="LineString"||Ie==="MultiLineString"?2:1,tags:je};W.id!==null&&(We.id=W.id),_e.features.push(We)}}function jn(_e,W,J,de,Se,Ie){var Me=de*de;if(de>0&&W.size<(Se?Me:de))J.numPoints+=W.length/3;else{for(var De=[],we=0;we<W.length;we+=3)(de===0||W[we+2]>Me)&&(J.numSimplified++,De.push(W[we]),De.push(W[we+1])),J.numPoints++;Se&&function($e,je){for(var Je=0,We=0,wt=$e.length,Yt=wt-2;We<wt;Yt=We,We+=2)Je+=($e[We]-$e[Yt])*($e[We+1]+$e[Yt+1]);if(Je>0===je)for(We=0,wt=$e.length;We<wt/2;We+=2){var Xt=$e[We],un=$e[We+1];$e[We]=$e[wt-2-We],$e[We+1]=$e[wt-1-We],$e[wt-2-We]=Xt,$e[wt-1-We]=un}}(De,Ie),_e.push(De)}}function pr(_e,W){var J=(W=this.options=function(Se,Ie){for(var Me in Ie)Se[Me]=Ie[Me];return Se}(Object.create(this.options),W)).debug;if(J&&console.time("preprocess data"),W.maxZoom<0||W.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(W.promoteId&&W.generateId)throw new Error("promoteId and generateId cannot be used together.");var de=function(Se,Ie){var Me=[];if(Se.type==="FeatureCollection")for(var De=0;De<Se.features.length;De++)ct(Me,Se.features[De],Ie,De);else ct(Me,Se.type==="Feature"?Se:{geometry:Se},Ie);return Me}(_e,W);this.tiles={},this.tileCoords=[],J&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",W.indexMaxZoom,W.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),de=function(Se,Ie){var Me=Ie.buffer/Ie.extent,De=Se,we=ot(Se,1,-1-Me,Me,0,-1,2,Ie),$e=ot(Se,1,1-Me,2+Me,0,-1,2,Ie);return(we||$e)&&(De=ot(Se,1,-Me,1+Me,0,-1,2,Ie)||[],we&&(De=Vn(we,1).concat(De)),$e&&(De=De.concat(Vn($e,-1)))),De}(de,W),de.length&&this.splitTile(de,0,0,0),J&&(de.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function ar(_e,W,J){return 32*((1<<_e)*J+W)+_e}function qn(_e,W){const J=_e.tileID.canonical;if(!this._geoJSONIndex)return W(null,null);const de=this._geoJSONIndex.getTile(J.z,J.x,J.y);if(!de)return W(null,null);const Se=new class{constructor(Me){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=l.EXTENT,this.length=Me.length,this._features=Me}feature(Me){return new class{constructor(De){this._feature=De,this.extent=l.EXTENT,this.type=De.type,this.properties=De.tags,"id"in De&&!isNaN(De.id)&&(this.id=parseInt(De.id,10))}loadGeometry(){if(this._feature.type===1){const De=[];for(const we of this._feature.geometry)De.push([new l.Point(we[0],we[1])]);return De}{const De=[];for(const we of this._feature.geometry){const $e=[];for(const je of we)$e.push(new l.Point(je[0],je[1]));De.push($e)}return De}}toGeoJSON(De,we,$e){return U.call(this,De,we,$e)}}(this._features[Me])}}(de.features);let Ie=Le(Se);Ie.byteOffset===0&&Ie.byteLength===Ie.buffer.byteLength||(Ie=new Uint8Array(Ie)),W(null,{vectorTile:Se,rawData:Ie.buffer})}pr.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},pr.prototype.splitTile=function(_e,W,J,de,Se,Ie,Me){for(var De=[_e,W,J,de],we=this.options,$e=we.debug;De.length;){de=De.pop(),J=De.pop(),W=De.pop(),_e=De.pop();var je=1<<W,Je=ar(W,J,de),We=this.tiles[Je];if(!We&&($e>1&&console.time("creation"),We=this.tiles[Je]=rn(_e,W,J,de,we),this.tileCoords.push({z:W,x:J,y:de}),$e)){$e>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",W,J,de,We.numFeatures,We.numPoints,We.numSimplified),console.timeEnd("creation"));var wt="z"+W;this.stats[wt]=(this.stats[wt]||0)+1,this.total++}if(We.source=_e,Se){if(W===we.maxZoom||W===Se)continue;var Yt=1<<Se-W;if(J!==Math.floor(Ie/Yt)||de!==Math.floor(Me/Yt))continue}else if(W===we.indexMaxZoom||We.numPoints<=we.indexMaxPoints)continue;if(We.source=null,_e.length!==0){$e>1&&console.time("clipping");var Xt,un,ln,Gn,On,er,Xn=.5*we.buffer/we.extent,Zr=.5-Xn,an=.5+Xn,nn=1+Xn;Xt=un=ln=Gn=null,On=ot(_e,je,J-Xn,J+an,0,We.minX,We.maxX,we),er=ot(_e,je,J+Zr,J+nn,0,We.minX,We.maxX,we),_e=null,On&&(Xt=ot(On,je,de-Xn,de+an,1,We.minY,We.maxY,we),un=ot(On,je,de+Zr,de+nn,1,We.minY,We.maxY,we),On=null),er&&(ln=ot(er,je,de-Xn,de+an,1,We.minY,We.maxY,we),Gn=ot(er,je,de+Zr,de+nn,1,We.minY,We.maxY,we),er=null),$e>1&&console.timeEnd("clipping"),De.push(Xt||[],W+1,2*J,2*de),De.push(un||[],W+1,2*J,2*de+1),De.push(ln||[],W+1,2*J+1,2*de),De.push(Gn||[],W+1,2*J+1,2*de+1)}}},pr.prototype.getTile=function(_e,W,J){var de=this.options,Se=de.extent,Ie=de.debug;if(_e<0||_e>24)return null;var Me=1<<_e,De=ar(_e,W=(W%Me+Me)%Me,J);if(this.tiles[De])return zn(this.tiles[De],Se);Ie>1&&console.log("drilling down to z%d-%d-%d",_e,W,J);for(var we,$e=_e,je=W,Je=J;!we&&$e>0;)$e--,je=Math.floor(je/2),Je=Math.floor(Je/2),we=this.tiles[ar($e,je,Je)];return we&&we.source?(Ie>1&&console.log("found parent tile z%d-%d-%d",$e,je,Je),Ie>1&&console.time("drilling down"),this.splitTile(we.source,$e,je,Je,_e,W,J),Ie>1&&console.timeEnd("drilling down"),this.tiles[De]?zn(this.tiles[De],Se):null):null};class Qn extends l.VectorTileWorkerSource{constructor(W,J,de,Se,Ie){super(W,J,de,Se,qn),Ie&&(this.loadGeoJSON=Ie)}loadData(W,J){const de=W&&W.request,Se=de&&de.collectResourceTiming;this.loadGeoJSON(W,(Ie,Me)=>{if(Ie||!Me)return J(Ie);if(typeof Me!="object")return J(new Error(`Input data given to '${W.source}' is not a valid GeoJSON object.`));{k(Me,!0);try{if(W.filter){const we=l.createExpression(W.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(we.result==="error")throw new Error(we.value.map(je=>`${je.key}: ${je.message}`).join(", "));Me={type:"FeatureCollection",features:Me.features.filter(je=>we.value.evaluate({zoom:0},je))}}this._geoJSONIndex=W.cluster?new gt(function({superclusterOptions:we,clusterProperties:$e}){if(!$e||!we)return we;const je={},Je={},We={accumulated:null,zoom:0},wt={properties:null},Yt=Object.keys($e);for(const Xt of Yt){const[un,ln]=$e[Xt],Gn=l.createExpression(ln),On=l.createExpression(typeof un=="string"?[un,["accumulated"],["get",Xt]]:un);je[Xt]=Gn.value,Je[Xt]=On.value}return we.map=Xt=>{wt.properties=Xt;const un={};for(const ln of Yt)un[ln]=je[ln].evaluate(We,wt);return un},we.reduce=(Xt,un)=>{wt.properties=un;for(const ln of Yt)We.accumulated=Xt[ln],Xt[ln]=Je[ln].evaluate(We,wt)},we}(W)).load(Me.features):function(we,$e){return new pr(we,$e)}(Me,W.geojsonVtOptions)}catch(we){return J(we)}this.loaded={};const De={};if(Se){const we=l.getPerformanceMeasurement(de);we&&(De.resourceTiming={},De.resourceTiming[W.source]=JSON.parse(JSON.stringify(we)))}J(null,De)}})}reloadTile(W,J){const de=this.loaded;return de&&de[W.uid]?super.reloadTile(W,J):this.loadTile(W,J)}loadGeoJSON(W,J){if(W.request)l.getJSON(W.request,J);else{if(typeof W.data!="string")return J(new Error(`Input data given to '${W.source}' is not a valid GeoJSON object.`));try{return J(null,JSON.parse(W.data))}catch{return J(new Error(`Input data given to '${W.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(W,J){try{J(null,this._geoJSONIndex.getClusterExpansionZoom(W.clusterId))}catch(de){J(de)}}getClusterChildren(W,J){try{J(null,this._geoJSONIndex.getChildren(W.clusterId))}catch(de){J(de)}}getClusterLeaves(W,J){try{J(null,this._geoJSONIndex.getLeaves(W.clusterId,W.limit,W.offset))}catch(de){J(de)}}}class Rr{constructor(W){this.self=W,this.actor=new l.Actor(W,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=l.getProjection({name:"mercator"}),this.workerSourceTypes={vector:l.VectorTileWorkerSource,geojson:Qn},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(J,de)=>{if(this.workerSourceTypes[J])throw new Error(`Worker source with name "${J}" already registered.`);this.workerSourceTypes[J]=de},this.self.registerRTLTextPlugin=J=>{if(l.plugin.isParsed())throw new Error("RTL text plugin already registered.");l.plugin.applyArabicShaping=J.applyArabicShaping,l.plugin.processBidirectionalText=J.processBidirectionalText,l.plugin.processStyledBidirectionalText=J.processStyledBidirectionalText}}clearCaches(W,J,de){delete this.layerIndexes[W],delete this.availableImages[W],delete this.workerSources[W],delete this.demWorkerSources[W],de()}checkIfReady(W,J,de){de()}setReferrer(W,J){this.referrer=J}spriteLoaded(W,J){this.isSpriteLoaded[W]=J;for(const de in this.workerSources[W]){const Se=this.workerSources[W][de];for(const Ie in Se)Se[Ie]instanceof l.VectorTileWorkerSource&&(Se[Ie].isSpriteLoaded=J,Se[Ie].fire(new l.Event("isSpriteLoaded")))}}setImages(W,J,de){this.availableImages[W]=J;for(const Se in this.workerSources[W]){const Ie=this.workerSources[W][Se];for(const Me in Ie)Ie[Me].availableImages=J}de()}enableTerrain(W,J,de){this.terrain=J,de()}setProjection(W,J){this.projections[W]=l.getProjection(J)}setLayers(W,J,de){this.getLayerIndex(W).replace(J),de()}updateLayers(W,J,de){this.getLayerIndex(W).update(J.layers,J.removedIds),de()}loadTile(W,J,de){const Se=this.enableTerrain?l.extend({enableTerrain:this.terrain},J):J;Se.projection=this.projections[W]||this.defaultProjection,this.getWorkerSource(W,J.type,J.source).loadTile(Se,de)}loadDEMTile(W,J,de){const Se=this.enableTerrain?l.extend({buildQuadTree:this.terrain},J):J;this.getDEMWorkerSource(W,J.source).loadTile(Se,de)}reloadTile(W,J,de){const Se=this.enableTerrain?l.extend({enableTerrain:this.terrain},J):J;Se.projection=this.projections[W]||this.defaultProjection,this.getWorkerSource(W,J.type,J.source).reloadTile(Se,de)}abortTile(W,J,de){this.getWorkerSource(W,J.type,J.source).abortTile(J,de)}removeTile(W,J,de){this.getWorkerSource(W,J.type,J.source).removeTile(J,de)}removeSource(W,J,de){if(!this.workerSources[W]||!this.workerSources[W][J.type]||!this.workerSources[W][J.type][J.source])return;const Se=this.workerSources[W][J.type][J.source];delete this.workerSources[W][J.type][J.source],Se.removeSource!==void 0?Se.removeSource(J,de):de()}loadWorkerSource(W,J,de){try{this.self.importScripts(J.url),de()}catch(Se){de(Se.toString())}}syncRTLPluginState(W,J,de){try{l.plugin.setState(J);const Se=l.plugin.getPluginURL();if(l.plugin.isLoaded()&&!l.plugin.isParsed()&&Se!=null){this.self.importScripts(Se);const Ie=l.plugin.isParsed();de(Ie?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Se}`),Ie)}}catch(Se){de(Se.toString())}}getAvailableImages(W){let J=this.availableImages[W];return J||(J=[]),J}getLayerIndex(W){let J=this.layerIndexes[W];return J||(J=this.layerIndexes[W]=new P),J}getWorkerSource(W,J,de){if(this.workerSources[W]||(this.workerSources[W]={}),this.workerSources[W][J]||(this.workerSources[W][J]={}),!this.workerSources[W][J][de]){const Se={send:(Ie,Me,De,we,$e,je)=>{this.actor.send(Ie,Me,De,W,$e,je)},scheduler:this.actor.scheduler};this.workerSources[W][J][de]=new this.workerSourceTypes[J](Se,this.getLayerIndex(W),this.getAvailableImages(W),this.isSpriteLoaded[W])}return this.workerSources[W][J][de]}getDEMWorkerSource(W,J){return this.demWorkerSources[W]||(this.demWorkerSources[W]={}),this.demWorkerSources[W][J]||(this.demWorkerSources[W][J]=new M),this.demWorkerSources[W][J]}enforceCacheSizeLimit(W,J){l.enforceCacheSizeLimit(J)}getWorkerPerformanceMetrics(W,J,de){de(void 0,void 0)}}return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new Rr(self)),Rr}),f(["./shared"],function(l){function w(p,s){if(Array.isArray(p)){if(!Array.isArray(s)||p.length!==s.length)return!1;for(let d=0;d<p.length;d++)if(!w(p[d],s[d]))return!1;return!0}if(typeof p=="object"&&p!==null&&s!==null){if(typeof s!="object"||Object.keys(p).length!==Object.keys(s).length)return!1;for(const d in p)if(!w(p[d],s[d]))return!1;return!0}return p===s}var E=P;function P(p){return!function(s){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var g,_,b=new Blob([""],{type:"text/javascript"}),I=URL.createObjectURL(b);try{_=new Worker(I),g=!0}catch{g=!1}return _&&_.terminate(),URL.revokeObjectURL(I),g}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var g=document.createElement("canvas");g.width=g.height=1;var _=g.getContext("2d");if(!_)return!1;var b=_.getImageData(0,0,1,1);return b&&b.width===g.width}()?(M[d=s&&s.failIfMajorPerformanceCaveat]===void 0&&(M[d]=function(g){var _,b=function(I){var A=document.createElement("canvas"),O=Object.create(P.webGLContextAttributes);return O.failIfMajorPerformanceCaveat=I,A.getContext("webgl",O)||A.getContext("experimental-webgl",O)}(g);if(!b)return!1;try{_=b.createShader(b.VERTEX_SHADER)}catch{return!1}return!(!_||b.isContextLost())&&(b.shaderSource(_,"void main() {}"),b.compileShader(_),b.getShaderParameter(_,b.COMPILE_STATUS)===!0)}(d)),M[d]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var d}(p)}var M={};function z(p,s,d){const g=l.window.document.createElement(p);return s!==void 0&&(g.className=s),d&&d.appendChild(g),g}function F(p,s,d){const g=l.window.document.createElementNS("http://www.w3.org/2000/svg",p);for(const _ of Object.keys(s))g.setAttributeNS(null,_,s[_]);return d&&d.appendChild(g),g}P.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const k=l.window.document&&l.window.document.documentElement.style,U=k&&k.userSelect!==void 0?"userSelect":"WebkitUserSelect";let X;function $(){k&&U&&(X=k[U],k[U]="none")}function j(){k&&U&&(k[U]=X)}function V(p){p.preventDefault(),p.stopPropagation(),l.window.removeEventListener("click",V,!0)}function Z(){l.window.addEventListener("click",V,!0),l.window.setTimeout(()=>{l.window.removeEventListener("click",V,!0)},0)}function ee(p,s){const d=p.getBoundingClientRect();return ie(p,d,s)}function ne(p,s){const d=p.getBoundingClientRect(),g=[];for(let _=0;_<s.length;_++)g.push(ie(p,d,s[_]));return g}function Q(p){return l.window.InstallTrigger!==void 0&&p.button===2&&p.ctrlKey&&l.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:p.button}function ie(p,s,d){const g=p.offsetWidth===s.width?1:p.offsetWidth/s.width;return new l.Point((d.clientX-s.left)*g,(d.clientY-s.top)*g)}function te(p,s){var d=s[0],g=s[1],_=s[2],b=s[3],I=d*b-_*g;return I?(p[0]=b*(I=1/I),p[1]=-g*I,p[2]=-_*I,p[3]=d*I,p):null}function ge(p){const{userImage:s}=p;return!!(s&&s.render&&s.render())&&(p.data.replace(new Uint8Array(s.data.buffer)),!0)}class ue extends l.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new l.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(s){if(this.loaded!==s&&(this.loaded=s,s)){for(const{ids:d,callback:g}of this.requestors)this._notify(d,g);this.requestors=[]}}hasImage(s){return!!this.getImage(s)}getImage(s){return this.images[s]}addImage(s,d){this._validate(s,d)&&(this.images[s]=d)}_validate(s,d){let g=!0;return this._validateStretch(d.stretchX,d.data&&d.data.width)||(this.fire(new l.ErrorEvent(new Error(`Image "${s}" has invalid "stretchX" value`))),g=!1),this._validateStretch(d.stretchY,d.data&&d.data.height)||(this.fire(new l.ErrorEvent(new Error(`Image "${s}" has invalid "stretchY" value`))),g=!1),this._validateContent(d.content,d)||(this.fire(new l.ErrorEvent(new Error(`Image "${s}" has invalid "content" value`))),g=!1),g}_validateStretch(s,d){if(!s)return!0;let g=0;for(const _ of s){if(_[0]<g||_[1]<_[0]||d<_[1])return!1;g=_[1]}return!0}_validateContent(s,d){return!(s&&(s.length!==4||s[0]<0||d.data.width<s[0]||s[1]<0||d.data.height<s[1]||s[2]<0||d.data.width<s[2]||s[3]<0||d.data.height<s[3]||s[2]<s[0]||s[3]<s[1]))}updateImage(s,d){d.version=this.images[s].version+1,this.images[s]=d,this.updatedImages[s]=!0}removeImage(s){const d=this.images[s];delete this.images[s],delete this.patterns[s],d.userImage&&d.userImage.onRemove&&d.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(s,d){let g=!0;if(!this.isLoaded())for(const _ of s)this.images[_]||(g=!1);this.isLoaded()||g?this._notify(s,d):this.requestors.push({ids:s,callback:d})}_notify(s,d){const g={};for(const _ of s){this.images[_]||this.fire(new l.Event("styleimagemissing",{id:_}));const b=this.images[_];b?g[_]={data:b.data.clone(),pixelRatio:b.pixelRatio,sdf:b.sdf,version:b.version,stretchX:b.stretchX,stretchY:b.stretchY,content:b.content,hasRenderCallback:!!(b.userImage&&b.userImage.render)}:l.warnOnce(`Image "${_}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}d(null,g)}getPixelSize(){const{width:s,height:d}=this.atlasImage;return{width:s,height:d}}getPattern(s){const d=this.patterns[s],g=this.getImage(s);if(!g)return null;if(d&&d.position.version===g.version)return d.position;if(d)d.position.version=g.version;else{const _={w:g.data.width+2,h:g.data.height+2,x:0,y:0},b=new l.ImagePosition(_,g);this.patterns[s]={bin:_,position:b}}return this._updatePatternAtlas(),this.patterns[s].position}bind(s){const d=s.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new l.Texture(s,this.atlasImage,d.RGBA),this.atlasTexture&&this.atlasTexture.bind(d.LINEAR,d.CLAMP_TO_EDGE)}_updatePatternAtlas(){const s=[];for(const b in this.patterns)s.push(this.patterns[b].bin);const{w:d,h:g}=l.potpack(s),_=this.atlasImage;_.resize({width:d||1,height:g||1});for(const b in this.patterns){const{bin:I}=this.patterns[b],A=I.x+1,O=I.y+1,N=this.images[b].data,B=N.width,q=N.height;l.RGBAImage.copy(N,_,{x:0,y:0},{x:A,y:O},{width:B,height:q}),l.RGBAImage.copy(N,_,{x:0,y:q-1},{x:A,y:O-1},{width:B,height:1}),l.RGBAImage.copy(N,_,{x:0,y:0},{x:A,y:O+q},{width:B,height:1}),l.RGBAImage.copy(N,_,{x:B-1,y:0},{x:A-1,y:O},{width:1,height:q}),l.RGBAImage.copy(N,_,{x:0,y:0},{x:A+B,y:O},{width:1,height:q})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(s){for(const d of s){if(this.callbackDispatchedThisFrame[d])continue;this.callbackDispatchedThisFrame[d]=!0;const g=this.images[d];ge(g)&&this.updateImage(d,g)}}}const oe=new l.Properties({anchor:new l.DataConstantProperty(l.spec.light.anchor),position:new class{constructor(){this.specification=l.spec.light.position}possiblyEvaluate(p,s){return function([d,g,_]){const b=l.degToRad(g+90),I=l.degToRad(_);return{x:d*Math.cos(b)*Math.sin(I),y:d*Math.sin(b)*Math.sin(I),z:d*Math.cos(I),azimuthal:g,polar:_}}(p.expression.evaluate(s))}interpolate(p,s,d){return{x:l.number(p.x,s.x,d),y:l.number(p.y,s.y,d),z:l.number(p.z,s.z,d),azimuthal:l.number(p.azimuthal,s.azimuthal,d),polar:l.number(p.polar,s.polar,d)}}},color:new l.DataConstantProperty(l.spec.light.color),intensity:new l.DataConstantProperty(l.spec.light.intensity)});class fe extends l.Evented{constructor(s){super(),this._transitionable=new l.Transitionable(oe),this.setLight(s),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(s,d={}){if(!this._validate(l.validateLight,s,d))for(const g in s){const _=s[g];l.endsWith(g,"-transition")?this._transitionable.setTransition(g.slice(0,-11),_):this._transitionable.setValue(g,_)}}updateTransitions(s){this._transitioning=this._transitionable.transitioned(s,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(s){this.properties=this._transitioning.possiblyEvaluate(s)}_validate(s,d,g){return(!g||g.validate!==!1)&&l.emitValidationErrors(this,s.call(l.validateStyle,l.extend({value:d,style:{glyphs:!0,sprite:!0},styleSpec:l.spec})))}}const Ee=new l.Properties({source:new l.DataConstantProperty(l.spec.terrain.source),exaggeration:new l.DataConstantProperty(l.spec.terrain.exaggeration)});let ke=class extends l.Evented{constructor(p,s){super(),this._transitionable=new l.Transitionable(Ee),this.set(p),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=s}get(){return this._transitionable.serialize()}set(p){for(const s in p){const d=p[s];l.endsWith(s,"-transition")?this._transitionable.setTransition(s.slice(0,-11),d):this._transitionable.setValue(s,d)}}updateTransitions(p){this._transitioning=this._transitionable.transitioned(p,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(p){this.properties=this._transitioning.possiblyEvaluate(p)}};function Le(p,s,d,g){const _=l.smoothstep(45,65,d),[b,I]=Ne(p,g),A=l.length(s);let O=1-Math.min(1,Math.exp((A-b)/(I-b)*-6));return O*=O*O,O=Math.min(1,1.00747*O),O*_*p.alpha}function Ne(p,s){const d=.5/Math.tan(.5*s);return[p.range[0]+d,p.range[1]+d]}const pe=new l.Properties({range:new l.DataConstantProperty(l.spec.fog.range),color:new l.DataConstantProperty(l.spec.fog.color),"high-color":new l.DataConstantProperty(l.spec.fog["high-color"]),"space-color":new l.DataConstantProperty(l.spec.fog["space-color"]),"horizon-blend":new l.DataConstantProperty(l.spec.fog["horizon-blend"]),"star-intensity":new l.DataConstantProperty(l.spec.fog["star-intensity"])});class He extends l.Evented{constructor(s,d){super(),this._transitionable=new l.Transitionable(pe),this.set(s),this._transitioning=this._transitionable.untransitioned(),this._transform=d}get state(){const s=this._transform,d=s.projection.name==="globe",g=l.globeToMercatorTransition(s.zoom),_=this.properties.get("range"),b=[.5,3];return{range:d?[l.number(b[0],_[0],g),l.number(b[1],_[1],g)]:_,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(s,d={}){if(!this._validate(l.validateFog,s,d)){for(const g of Object.keys(l.spec.fog))s&&s[g]===void 0&&(s[g]=l.spec.fog[g].default);for(const g in s){const _=s[g];l.endsWith(g,"-transition")?this._transitionable.setTransition(g.slice(0,-11),_):this._transitionable.setValue(g,_)}}}getOpacity(s){if(!this._transform.projection.supportsFog)return 0;const d=this.properties&&this.properties.get("color")||1;return(this._transform.projection.name==="globe"?1:l.smoothstep(45,65,s))*d.a}getOpacityAtLatLng(s,d){return this._transform.projection.supportsFog?function(g,_,b){const I=l.MercatorCoordinate.fromLngLat(_),A=b.elevation?b.elevation.getAtPointOrZero(I):0,O=[I.x,I.y,A];return l.transformMat4(O,O,b.mercatorFogMatrix),Le(g,O,b.pitch,b._fov)}(this.state,s,d):0}getFovAdjustedRange(s){return this._transform.projection.supportsFog?Ne(this.state,s):[0,1]}updateTransitions(s){this._transitioning=this._transitionable.transitioned(s,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(s){this.properties=this._transitioning.possiblyEvaluate(s)}_validate(s,d,g){return(!g||g.validate!==!1)&&l.emitValidationErrors(this,s.call(l.validateStyle,l.extend({value:d,style:{glyphs:!0,sprite:!0},styleSpec:l.spec})))}}class Be{constructor(s,d){this.workerPool=s,this.actors=[],this.currentActor=0,this.id=l.uniqueId();const g=this.workerPool.acquire(this.id);for(let _=0;_<g.length;_++){const b=new Be.Actor(g[_],d,this.id);b.name=`Worker ${_}`,this.actors.push(b)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(s,d,g){l.asyncAll(this.actors,(_,b)=>{_.send(s,d,b)},g=g||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(s=>{s.remove()}),this.actors=[],this.workerPool.release(this.id)}}function Ge(p,s,d){return s*(l.EXTENT/(p.tileSize*Math.pow(2,d-p.tileID.overscaledZ)))}Be.Actor=l.Actor;class Qe{constructor(s,d,g,_){this.screenBounds=s,this.cameraPoint=d,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=g,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,_)}static createFromScreenPoints(s,d){let g,_;if(s instanceof l.Point||typeof s[0]=="number"){const b=l.Point.convert(s);g=[b],_=d.isPointAboveHorizon(b)}else{const b=l.Point.convert(s[0]),I=l.Point.convert(s[1]);g=[b,I],_=l.polygonizeBounds(b,I).every(A=>d.isPointAboveHorizon(A))}return new Qe(g,d.getCameraPoint(),_,d)}isPointQuery(){return this.screenBounds.length===1}bufferedScreenGeometry(s){return l.polygonizeBounds(this.screenBounds[0],this.screenBounds.length===1?this.screenBounds[0]:this.screenBounds[1],s)}bufferedCameraGeometry(s){const d=this.screenBounds[0],g=this.screenBounds.length===1?this.screenBounds[0].add(new l.Point(1,1)):this.screenBounds[1],_=l.polygonizeBounds(d,g,0,!1);return this.cameraPoint.y>g.y&&(this.cameraPoint.x>d.x&&this.cameraPoint.x<g.x?_.splice(3,0,this.cameraPoint):this.cameraPoint.x>=g.x?_[2]=this.cameraPoint:this.cameraPoint.x<=d.x&&(_[3]=this.cameraPoint)),l.bufferConvexPolygon(_,s)}bufferedCameraGeometryGlobe(s){const d=this.screenBounds[0],g=this.screenBounds.length===1?this.screenBounds[0].add(new l.Point(1,1)):this.screenBounds[1],_=l.polygonizeBounds(d,g,s),b=this.cameraPoint.clone();switch(3*((b.y>d.y)+(b.y>g.y))+((b.x>d.x)+(b.x>g.x))){case 0:_[0]=b,_[4]=b.clone();break;case 1:_.splice(1,0,b);break;case 2:_[1]=b;break;case 3:_.splice(4,0,b);break;case 5:_.splice(2,0,b);break;case 6:_[3]=b;break;case 7:_.splice(3,0,b);break;case 8:_[2]=b}return _}containsTile(s,d,g,_=0){const b=s.queryPadding/d._pixelsPerMercatorPixel+1,I=g?this._bufferedCameraMercator(b,d):this._bufferedScreenMercator(b,d);let A=s.tileID.wrap+(I.unwrapped?_:0);const O=I.polygon.map(me=>l.getTilePoint(s.tileTransform,me,A));if(!l.polygonIntersectsBox(O,0,0,l.EXTENT,l.EXTENT))return;A=s.tileID.wrap+(this.screenGeometryMercator.unwrapped?_:0);const N=this.screenGeometryMercator.polygon.map(me=>l.getTileVec3(s.tileTransform,me,A)),B=N.map(me=>new l.Point(me[0],me[1])),q=d.getFreeCameraOptions().position||new l.MercatorCoordinate(0,0,0),re=l.getTileVec3(s.tileTransform,q,A),le=N.map(me=>{const K=l.sub(me,me,re);return l.normalize(K,K),new l.Ray(re,K)}),he=Ge(s,1,d.zoom)*d._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:B,tilespaceRays:le,bufferedTilespaceGeometry:O,bufferedTilespaceBounds:(ce=l.getBounds(O),ce.min.x=l.clamp(ce.min.x,0,l.EXTENT),ce.min.y=l.clamp(ce.min.y,0,l.EXTENT),ce.max.x=l.clamp(ce.max.x,0,l.EXTENT),ce.max.y=l.clamp(ce.max.y,0,l.EXTENT),ce),tile:s,tileID:s.tileID,pixelToTileUnitsFactor:he};var ce}_bufferedScreenMercator(s,d){const g=xt(s);if(this._screenRaycastCache[g])return this._screenRaycastCache[g];{let _;return _=d.projection.name==="globe"?this._projectAndResample(this.bufferedScreenGeometry(s),d):{polygon:this.bufferedScreenGeometry(s).map(b=>d.pointCoordinate3D(b)),unwrapped:!0},this._screenRaycastCache[g]=_,_}}_bufferedCameraMercator(s,d){const g=xt(s);if(this._cameraRaycastCache[g])return this._cameraRaycastCache[g];{let _;return _=d.projection.name==="globe"?this._projectAndResample(this.bufferedCameraGeometryGlobe(s),d):{polygon:this.bufferedCameraGeometry(s).map(b=>d.pointCoordinate3D(b)),unwrapped:!0},this._cameraRaycastCache[g]=_,_}}_projectAndResample(s,d){const g=function(b,I){const A=l.multiply([],I.pixelMatrix,I.globeMatrix),O=[0,-l.GLOBE_RADIUS,0,1],N=[0,l.GLOBE_RADIUS,0,1],B=[0,0,0,1];l.transformMat4$1(O,O,A),l.transformMat4$1(N,N,A),l.transformMat4$1(B,B,A);const q=new l.Point(O[0]/O[3],O[1]/O[3]),re=new l.Point(N[0]/N[3],N[1]/N[3]),le=l.polygonContainsPoint(b,q)&&O[3]<B[3],he=l.polygonContainsPoint(b,re)&&N[3]<B[3];if(!le&&!he)return null;const ce=function(Oe,Ve,Ue){for(let Ke=1;Ke<Oe.length;Ke++){const At=St(Ve.pointCoordinate3D(Oe[Ke-1]).x),qe=St(Ve.pointCoordinate3D(Oe[Ke]).x);if(Ue<0){if(At<qe)return{idx:Ke,t:-At/(qe-1-At)}}else if(qe<At)return{idx:Ke,t:(1-At)/(qe+1-At)}}return null}(b,I,le?-1:1);if(!ce)return null;const{idx:me,t:K}=ce;let se=me>1?gt(b.slice(0,me),I):[],xe=me<b.length?gt(b.slice(me),I):[];se=se.map(Oe=>new l.Point(St(Oe.x),Oe.y)),xe=xe.map(Oe=>new l.Point(St(Oe.x),Oe.y));const be=[...se];be.length===0&&be.push(xe[xe.length-1]);const Re=l.number(be[be.length-1].y,(xe.length===0?se[0]:xe[0]).y,K);let ze;return ze=le?[new l.Point(0,Re),new l.Point(0,0),new l.Point(1,0),new l.Point(1,Re)]:[new l.Point(1,Re),new l.Point(1,1),new l.Point(0,1),new l.Point(0,Re)],be.push(...ze),xe.length===0?be.push(se[0]):be.push(...xe),{polygon:be.map(Oe=>new l.MercatorCoordinate(Oe.x,Oe.y)),unwrapped:!1}}(s,d);if(g)return g;const _=function(b,I){let A=!1,O=-1/0,N=0;for(let q=0;q<b.length-1;q++)b[q].x>O&&(O=b[q].x,N=q);for(let q=0;q<b.length-1;q++){const re=(N+q)%(b.length-1),le=b[re],he=b[re+1];Math.abs(le.x-he.x)>.5&&(le.x<he.x?(le.x+=1,re===0&&(b[b.length-1].x+=1)):(he.x+=1,re+1===b.length-1&&(b[0].x+=1)),A=!0)}const B=l.mercatorXfromLng(I.center.lng);return A&&B<Math.abs(B-1)&&b.forEach(q=>{q.x-=1}),{polygon:b,unwrapped:A}}(gt(s,d).map(b=>new l.Point(St(b.x),b.y)),d);return{polygon:_.polygon.map(b=>new l.MercatorCoordinate(b.x,b.y)),unwrapped:_.unwrapped}}}function gt(p,s){return l.resample(p,d=>{const g=s.pointCoordinate3D(d);d.x=g.x,d.y=g.y},1/256)}function St(p){return p<0?1+p%1:p%1}function xt(p){return 100*p|0}function jt(p,s,d,g,_){const b=function(I,A){if(I)return _(I);if(A){p.url&&A.tiles&&p.tiles&&delete p.tiles;const O=l.pick(l.extend(A,p),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);A.vector_layers&&(O.vectorLayers=A.vector_layers,O.vectorLayerIds=O.vectorLayers.map(N=>N.id)),O.tiles=s.canonicalizeTileset(O,p.url),_(null,O)}};return p.url?l.getJSON(s.transformRequest(s.normalizeSourceURL(p.url,null,d,g),l.ResourceType.Source),b):l.exported.frame(()=>b(null,p))}class Ut{constructor(s,d,g){this.bounds=l.LngLatBounds.convert(this.validateBounds(s)),this.minzoom=d||0,this.maxzoom=g||24}validateBounds(s){return Array.isArray(s)&&s.length===4?[Math.max(-180,s[0]),Math.max(-90,s[1]),Math.min(180,s[2]),Math.min(90,s[3])]:[-180,-90,180,90]}contains(s){const d=Math.pow(2,s.z),g=Math.floor(l.mercatorXfromLng(this.bounds.getWest())*d),_=Math.floor(l.mercatorYfromLat(this.bounds.getNorth())*d),b=Math.ceil(l.mercatorXfromLng(this.bounds.getEast())*d),I=Math.ceil(l.mercatorYfromLat(this.bounds.getSouth())*d);return s.x>=g&&s.x<b&&s.y>=_&&s.y<I}}class bt{constructor(s,d,g){this.context=s;const _=s.gl;this.buffer=_.createBuffer(),this.dynamicDraw=!!g,this.context.unbindVAO(),s.bindElementBuffer.set(this.buffer),_.bufferData(_.ELEMENT_ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?_.DYNAMIC_DRAW:_.STATIC_DRAW),this.dynamicDraw||d.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(s){const d=this.context.gl;this.context.unbindVAO(),this.bind(),d.bufferSubData(d.ELEMENT_ARRAY_BUFFER,0,s.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const ut={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class It{constructor(s,d,g,_){this.length=d.length,this.attributes=g,this.itemSize=d.bytesPerElement,this.dynamicDraw=_,this.context=s;const b=s.gl;this.buffer=b.createBuffer(),s.bindVertexBuffer.set(this.buffer),b.bufferData(b.ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?b.DYNAMIC_DRAW:b.STATIC_DRAW),this.dynamicDraw||d.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(s){const d=this.context.gl;this.bind(),d.bufferSubData(d.ARRAY_BUFFER,0,s.arrayBuffer)}enableAttributes(s,d){for(let g=0;g<this.attributes.length;g++){const _=d.attributes[this.attributes[g].name];_!==void 0&&s.enableVertexAttribArray(_)}}setVertexAttribPointers(s,d,g){for(let _=0;_<this.attributes.length;_++){const b=this.attributes[_],I=d.attributes[b.name];I!==void 0&&s.vertexAttribPointer(I,b.components,s[ut[b.type]],!1,this.itemSize,b.offset+this.itemSize*(g||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class ft{constructor(s){this.gl=s.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(s){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class yt extends ft{getDefault(){return l.Color.transparent}set(s){const d=this.current;(s.r!==d.r||s.g!==d.g||s.b!==d.b||s.a!==d.a||this.dirty)&&(this.gl.clearColor(s.r,s.g,s.b,s.a),this.current=s,this.dirty=!1)}}class ct extends ft{getDefault(){return 1}set(s){(s!==this.current||this.dirty)&&(this.gl.clearDepth(s),this.current=s,this.dirty=!1)}}class Mt extends ft{getDefault(){return 0}set(s){(s!==this.current||this.dirty)&&(this.gl.clearStencil(s),this.current=s,this.dirty=!1)}}class Ct extends ft{getDefault(){return[!0,!0,!0,!0]}set(s){const d=this.current;(s[0]!==d[0]||s[1]!==d[1]||s[2]!==d[2]||s[3]!==d[3]||this.dirty)&&(this.gl.colorMask(s[0],s[1],s[2],s[3]),this.current=s,this.dirty=!1)}}class Qt extends ft{getDefault(){return!0}set(s){(s!==this.current||this.dirty)&&(this.gl.depthMask(s),this.current=s,this.dirty=!1)}}class Vt extends ft{getDefault(){return 255}set(s){(s!==this.current||this.dirty)&&(this.gl.stencilMask(s),this.current=s,this.dirty=!1)}}class Nt extends ft{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(s){const d=this.current;(s.func!==d.func||s.ref!==d.ref||s.mask!==d.mask||this.dirty)&&(this.gl.stencilFunc(s.func,s.ref,s.mask),this.current=s,this.dirty=!1)}}class ot extends ft{getDefault(){const s=this.gl;return[s.KEEP,s.KEEP,s.KEEP]}set(s){const d=this.current;(s[0]!==d[0]||s[1]!==d[1]||s[2]!==d[2]||this.dirty)&&(this.gl.stencilOp(s[0],s[1],s[2]),this.current=s,this.dirty=!1)}}class rt extends ft{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;s?d.enable(d.STENCIL_TEST):d.disable(d.STENCIL_TEST),this.current=s,this.dirty=!1}}class kt extends ft{getDefault(){return[0,1]}set(s){const d=this.current;(s[0]!==d[0]||s[1]!==d[1]||this.dirty)&&(this.gl.depthRange(s[0],s[1]),this.current=s,this.dirty=!1)}}class Pt extends ft{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;s?d.enable(d.DEPTH_TEST):d.disable(d.DEPTH_TEST),this.current=s,this.dirty=!1}}class sn extends ft{getDefault(){return this.gl.LESS}set(s){(s!==this.current||this.dirty)&&(this.gl.depthFunc(s),this.current=s,this.dirty=!1)}}class An extends ft{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;s?d.enable(d.BLEND):d.disable(d.BLEND),this.current=s,this.dirty=!1}}class Mn extends ft{getDefault(){const s=this.gl;return[s.ONE,s.ZERO]}set(s){const d=this.current;(s[0]!==d[0]||s[1]!==d[1]||this.dirty)&&(this.gl.blendFunc(s[0],s[1]),this.current=s,this.dirty=!1)}}class on extends ft{getDefault(){return l.Color.transparent}set(s){const d=this.current;(s.r!==d.r||s.g!==d.g||s.b!==d.b||s.a!==d.a||this.dirty)&&(this.gl.blendColor(s.r,s.g,s.b,s.a),this.current=s,this.dirty=!1)}}class Vn extends ft{getDefault(){return this.gl.FUNC_ADD}set(s){(s!==this.current||this.dirty)&&(this.gl.blendEquation(s),this.current=s,this.dirty=!1)}}class Nn extends ft{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;s?d.enable(d.CULL_FACE):d.disable(d.CULL_FACE),this.current=s,this.dirty=!1}}class zn extends ft{getDefault(){return this.gl.BACK}set(s){(s!==this.current||this.dirty)&&(this.gl.cullFace(s),this.current=s,this.dirty=!1)}}class yn extends ft{getDefault(){return this.gl.CCW}set(s){(s!==this.current||this.dirty)&&(this.gl.frontFace(s),this.current=s,this.dirty=!1)}}let rn,Wn=class extends ft{getDefault(){return null}set(p){(p!==this.current||this.dirty)&&(this.gl.useProgram(p),this.current=p,this.dirty=!1)}};class jn extends ft{getDefault(){return this.gl.TEXTURE0}set(s){(s!==this.current||this.dirty)&&(this.gl.activeTexture(s),this.current=s,this.dirty=!1)}}class pr extends ft{getDefault(){const s=this.gl;return[0,0,s.drawingBufferWidth,s.drawingBufferHeight]}set(s){const d=this.current;(s[0]!==d[0]||s[1]!==d[1]||s[2]!==d[2]||s[3]!==d[3]||this.dirty)&&(this.gl.viewport(s[0],s[1],s[2],s[3]),this.current=s,this.dirty=!1)}}class ar extends ft{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;d.bindFramebuffer(d.FRAMEBUFFER,s),this.current=s,this.dirty=!1}}class qn extends ft{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;d.bindRenderbuffer(d.RENDERBUFFER,s),this.current=s,this.dirty=!1}}class Qn extends ft{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;d.bindTexture(d.TEXTURE_2D,s),this.current=s,this.dirty=!1}}class Rr extends ft{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;d.bindBuffer(d.ARRAY_BUFFER,s),this.current=s,this.dirty=!1}}class _e extends ft{getDefault(){return null}set(s){const d=this.gl;d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,s),this.current=s,this.dirty=!1}}class W extends ft{constructor(s){super(s),this.vao=s.extVertexArrayObject}getDefault(){return null}set(s){this.vao&&(s!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(s),this.current=s,this.dirty=!1)}}class J extends ft{getDefault(){return 4}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_ALIGNMENT,s),this.current=s,this.dirty=!1}}class de extends ft{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s),this.current=s,this.dirty=!1}}class Se extends ft{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,s),this.current=s,this.dirty=!1}}class Ie extends ft{constructor(s,d){super(s),this.context=s,this.parent=d}getDefault(){return null}}class Me extends Ie{setDirty(){this.dirty=!0}set(s){if(s===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,s,0),this.current=s,this.dirty=!1}}class De extends Ie{attachment(){return this.gl.DEPTH_ATTACHMENT}set(s){if(s===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferRenderbuffer(d.FRAMEBUFFER,this.attachment(),d.RENDERBUFFER,s),this.current=s,this.dirty=!1}}class we extends De{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class $e{constructor(s,d,g,_){this.context=s,this.width=d,this.height=g;const b=this.framebuffer=s.gl.createFramebuffer();this.colorAttachment=new Me(s,b),_&&(this.depthAttachment=new De(s,b))}destroy(){const s=this.context.gl,d=this.colorAttachment.get();if(d&&s.deleteTexture(d),this.depthAttachment){const g=this.depthAttachment.get();g&&s.deleteRenderbuffer(g)}s.deleteFramebuffer(this.framebuffer)}}class je{constructor(s,d=!1){if(this.gl=s,this.isWebGL2=d,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),d){const g=s;this.extVertexArrayObject={createVertexArrayOES:g.createVertexArray.bind(s),deleteVertexArrayOES:g.deleteVertexArray.bind(s),bindVertexArrayOES:g.bindVertexArray.bind(s)}}this.clearColor=new yt(this),this.clearDepth=new ct(this),this.clearStencil=new Mt(this),this.colorMask=new Ct(this),this.depthMask=new Qt(this),this.stencilMask=new Vt(this),this.stencilFunc=new Nt(this),this.stencilOp=new ot(this),this.stencilTest=new rt(this),this.depthRange=new kt(this),this.depthTest=new Pt(this),this.depthFunc=new sn(this),this.blend=new An(this),this.blendFunc=new Mn(this),this.blendColor=new on(this),this.blendEquation=new Vn(this),this.cullFace=new Nn(this),this.cullFaceSide=new zn(this),this.frontFace=new yn(this),this.program=new Wn(this),this.activeTexture=new jn(this),this.viewport=new pr(this),this.bindFramebuffer=new ar(this),this.bindRenderbuffer=new qn(this),this.bindTexture=new Qn(this),this.bindVertexBuffer=new Rr(this),this.bindElementBuffer=new _e(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new W(this),this.pixelStoreUnpack=new J(this),this.pixelStoreUnpackPremultiplyAlpha=new de(this),this.pixelStoreUnpackFlipY=new Se(this),this.extTextureFilterAnisotropic=s.getExtension("EXT_texture_filter_anisotropic")||s.getExtension("MOZ_EXT_texture_filter_anisotropic")||s.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=s.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extStandardDerivativesForceOff=!1,this.extDebugRendererInfo=s.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=s.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=s.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),d||(this.extTextureHalfFloat=s.getExtension("OES_texture_half_float")),(d||this.extTextureHalfFloat&&s.getExtension("OES_texture_half_float_linear"))&&(this.extRenderToTextureHalfFloat=s.getExtension("EXT_color_buffer_half_float")),this.extStandardDerivatives=d||s.getExtension("OES_standard_derivatives"),this.extTimerQuery=s.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=s.getParameter(s.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(s,d){return new bt(this,s,d)}createVertexBuffer(s,d,g){return new It(this,s,d,g)}createRenderbuffer(s,d,g){const _=this.gl,b=_.createRenderbuffer();return this.bindRenderbuffer.set(b),_.renderbufferStorage(_.RENDERBUFFER,s,d,g),this.bindRenderbuffer.set(null),b}createFramebuffer(s,d,g){return new $e(this,s,d,g)}clear({color:s,depth:d,stencil:g}){const _=this.gl;let b=0;s&&(b|=_.COLOR_BUFFER_BIT,this.clearColor.set(s),this.colorMask.set([!0,!0,!0,!0])),d!==void 0&&(b|=_.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(d),this.depthMask.set(!0)),g!==void 0&&(b|=_.STENCIL_BUFFER_BIT,this.clearStencil.set(g),this.stencilMask.set(255)),_.clear(b)}setCullFace(s){s.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(s.mode),this.frontFace.set(s.frontFace))}setDepthMode(s){s.func!==this.gl.ALWAYS||s.mask?(this.depthTest.set(!0),this.depthFunc.set(s.func),this.depthMask.set(s.mask),this.depthRange.set(s.range)):this.depthTest.set(!1)}setStencilMode(s){s.test.func!==this.gl.ALWAYS||s.mask?(this.stencilTest.set(!0),this.stencilMask.set(s.mask),this.stencilOp.set([s.fail,s.depthFail,s.pass]),this.stencilFunc.set({func:s.test.func,ref:s.ref,mask:s.test.mask})):this.stencilTest.set(!1)}setColorMode(s){w(s.blendFunction,l.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(s.blendFunction),this.blendColor.set(s.blendColor)),this.colorMask.set(s.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class Je extends l.Evented{constructor(s,d,g,_){if(super(),this.id=s,this.dispatcher=g,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,l.extend(this,l.pick(d,["url","scheme","tileSize","promoteId"])),this._options=l.extend({type:"vector"},d),this._collectResourceTiming=d.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(_),this._tileWorkers={},this._deduped=new l.DedupedRequest}load(s){this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"}));const d=Array.isArray(this.map._language)?this.map._language.join():this.map._language,g=this.map._worldview;this._tileJSONRequest=jt(this._options,this.map._requestManager,d,g,(_,b)=>{this._tileJSONRequest=null,this._loaded=!0,_?(d&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${d}`),g&&g.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${g}`),this.fire(new l.ErrorEvent(_))):b&&(l.extend(this,b),b.bounds&&(this.tileBounds=new Ut(b.bounds,this.minzoom,this.maxzoom)),l.postTurnstileEvent(b.tiles,this.map._requestManager._customAccessToken),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"}))),s&&s(_)})}loaded(){return this._loaded}hasTile(s){return!this.tileBounds||this.tileBounds.contains(s.canonical)}onAdd(s){this.map=s,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(s){return this._options.tiles=s,this.reload(),this}setUrl(s){return this.url=s,this._options.url=s,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return l.extend({},this._options)}loadTile(s,d){const g=this.map._requestManager.normalizeTileURL(s.tileID.canonical.url(this.tiles,this.scheme)),_={request:this.map._requestManager.transformRequest(g,l.ResourceType.Tile),data:void 0,uid:s.uid,tileID:s.tileID,tileZoom:s.tileZoom,zoom:s.tileID.overscaledZ,tileSize:this.tileSize*s.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:l.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:s.isSymbolTile};if(_.request.collectResourceTiming=this._collectResourceTiming,s.actor&&s.state!=="expired")s.state==="loading"?s.reloadCallback=d:s.request=s.actor.send("reloadTile",_,b.bind(this));else if(s.actor=this._tileWorkers[g]=this._tileWorkers[g]||this.dispatcher.getActor(),this.dispatcher.ready)s.request=s.actor.send("loadTile",_,b.bind(this),void 0,!0);else{const I=l.loadVectorTile.call({deduped:this._deduped},_,(A,O)=>{A||!O?b.call(this,A):(_.data={cacheControl:O.cacheControl,expires:O.expires,rawData:O.rawData.slice(0)},s.actor&&s.actor.send("loadTile",_,b.bind(this),void 0,!0))},!0);s.request={cancel:I}}function b(I,A){return delete s.request,s.aborted?d(null):I&&I.status!==404?d(I):(A&&A.resourceTiming&&(s.resourceTiming=A.resourceTiming),this.map._refreshExpiredTiles&&A&&s.setExpiryData(A),s.loadVectorData(A,this.map.painter),l.cacheEntryPossiblyAdded(this.dispatcher),d(null),void(s.reloadCallback&&(this.loadTile(s,s.reloadCallback),s.reloadCallback=null)))}}abortTile(s){s.request&&(s.request.cancel(),delete s.request),s.actor&&s.actor.send("abortTile",{uid:s.uid,type:this.type,source:this.id})}unloadTile(s){s.unloadVectorData(),s.actor&&s.actor.send("removeTile",{uid:s.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class We extends l.Evented{constructor(s,d,g,_){super(),this.id=s,this.dispatcher=g,this.setEventedParent(_),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=l.extend({type:"raster"},d),l.extend(this,l.pick(d,["url","scheme","tileSize"]))}load(s){this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=jt(this._options,this.map._requestManager,null,null,(d,g)=>{this._tileJSONRequest=null,this._loaded=!0,d?this.fire(new l.ErrorEvent(d)):g&&(l.extend(this,g),g.bounds&&(this.tileBounds=new Ut(g.bounds,this.minzoom,this.maxzoom)),l.postTurnstileEvent(g.tiles),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"}))),s&&s(d)})}loaded(){return this._loaded}onAdd(s){this.map=s,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(s){return this._options.tiles=s,this.reload(),this}setUrl(s){return this.url=s,this._options.url=s,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return l.extend({},this._options)}hasTile(s){return!this.tileBounds||this.tileBounds.contains(s.canonical)}loadTile(s,d){const g=l.exported.devicePixelRatio>=2,_=this.map._requestManager.normalizeTileURL(s.tileID.canonical.url(this.tiles,this.scheme),g,this.tileSize);s.request=l.getImage(this.map._requestManager.transformRequest(_,l.ResourceType.Tile),(b,I,A,O)=>(delete s.request,s.aborted?(s.state="unloaded",d(null)):b?(s.state="errored",d(b)):I?(this.map._refreshExpiredTiles&&s.setExpiryData({cacheControl:A,expires:O}),s.setTexture(I,this.map.painter),s.state="loaded",l.cacheEntryPossiblyAdded(this.dispatcher),void d(null)):d(null)))}static loadTileData(s,d,g){s.setTexture(d,g)}static unloadTileData(s,d){s.texture&&d.saveTileTexture(s.texture)}abortTile(s,d){s.request&&(s.request.cancel(),delete s.request),d()}unloadTile(s,d){s.texture&&this.map.painter.saveTileTexture(s.texture),d()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}function wt(p,s,d,g,_,b,I,A){const O=[p,d,_,s,g,b,1,1,1],N=[I,A,1],B=l.adjoint([],O),[q,re,le]=l.transformMat3(N,N,l.transpose(B,B));return l.multiply$1(O,[q,0,0,0,re,0,0,0,le],O)}class Yt extends l.Evented{constructor(s,d,g,_){super(),this.id=s,this.dispatcher=g,this.coordinates=d.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(_),this.options=d,this._dirty=!1}load(s,d){this._loaded=d||!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._imageRequest=l.getImage(this.map._requestManager.transformRequest(this.url,l.ResourceType.Image),(g,_)=>{if(this._imageRequest=null,this._loaded=!0,g)this.fire(new l.ErrorEvent(g));else if(_){const{HTMLImageElement:b}=l.window;this.image=_ instanceof b?l.exported.getImageData(_):_,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,s&&(this.coordinates=s),this._finishLoading()}})}loaded(){return this._loaded}updateImage(s){return this.image&&s.url?(this._imageRequest&&s.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=s.url,this.load(s.coordinates,this._loaded),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(s){this.map=s,this.load()}onRemove(){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),this.texture&&this.texture.destroy()}setCoordinates(s){this.coordinates=s,this._boundsArray=void 0;const d=s.map(l.MercatorCoordinate.fromLngLat);return this.tileID=function(g){let _=1/0,b=1/0,I=-1/0,A=-1/0;for(const q of g)_=Math.min(_,q.x),b=Math.min(b,q.y),I=Math.max(I,q.x),A=Math.max(A,q.y);const O=Math.max(I-_,A-b),N=Math.max(0,Math.floor(-Math.log(O)/Math.LN2)),B=Math.pow(2,N);return new l.CanonicalTileID(N,Math.floor((_+I)/2*B),Math.floor((b+A)/2*B))}(d),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0}_prepareData(s){for(const O in this.tiles){const N=this.tiles[O];N.state!=="loaded"&&(N.state="loaded",N.texture=this.texture)}if(this._boundsArray)return;const d=l.tileTransform(this.tileID,this.map.transform.projection),[g,_,b,I]=this.coordinates.map(O=>{const N=d.projection.project(O[0],O[1]);return l.getTilePoint(d,N)._round()});this.perspectiveTransform=function(O,N,B,q,re,le,he,ce,me,K){const se=wt(0,0,O,0,0,N,O,N),xe=wt(B,q,re,le,he,ce,me,K);return l.multiply$1(xe,l.adjoint(se,se),xe),[xe[6]/xe[8]*O/l.EXTENT,xe[7]/xe[8]*N/l.EXTENT]}(this.width,this.height,g.x,g.y,_.x,_.y,I.x,I.y,b.x,b.y);const A=this._boundsArray=new l.StructArrayLayout4i8;A.emplaceBack(g.x,g.y,0,0),A.emplaceBack(_.x,_.y,l.EXTENT,0),A.emplaceBack(I.x,I.y,0,l.EXTENT),A.emplaceBack(b.x,b.y,l.EXTENT,l.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=s.createVertexBuffer(A,l.boundsAttributes.members),this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const s=this.map.painter.context,d=s.gl;this._dirty&&(this.texture?this.texture.update(this.image):(this.texture=new l.Texture(s,this.image,d.RGBA),this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE)),this._dirty=!1),this._prepareData(s)}loadTile(s,d){this.tileID&&this.tileID.equals(s.tileID.canonical)?(this.tiles[String(s.tileID.wrap)]=s,s.buckets={},d(null)):(s.state="errored",d(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const Xt={vector:Je,raster:We,"raster-dem":class extends We{constructor(p,s,d,g){super(p,s,d,g),this.type="raster-dem",this.maxzoom=22,this._options=l.extend({type:"raster-dem"},s),this.encoding=s.encoding||"mapbox"}loadTile(p,s){const d=this.map._requestManager.normalizeTileURL(p.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function g(_,b){_&&(p.state="errored",s(_)),b&&(p.dem=b,p.dem.onDeserialize(),p.needsHillshadePrepare=!0,p.needsDEMTextureUpload=!0,p.state="loaded",s(null))}p.request=l.getImage(this.map._requestManager.transformRequest(d,l.ResourceType.Tile),(function(_,b,I,A){if(delete p.request,p.aborted)p.state="unloaded",s(null);else if(_)p.state="errored",s(_);else if(b){this.map._refreshExpiredTiles&&p.setExpiryData({cacheControl:I,expires:A});const O=l.window.ImageBitmap&&b instanceof l.window.ImageBitmap&&(rn==null&&(rn=l.window.OffscreenCanvas&&new l.window.OffscreenCanvas(1,1).getContext("2d")&&typeof l.window.createImageBitmap=="function"),rn),N=1-(b.width-l.prevPowerOfTwo(b.width))/2;N<1||p.neighboringTiles||(p.neighboringTiles=this._getNeighboringTiles(p.tileID));const B=O?b:l.exported.getImageData(b,N),q={uid:p.uid,coord:p.tileID,source:this.id,rawImageData:B,encoding:this.encoding,padding:N};p.actor&&p.state!=="expired"||(p.actor=this.dispatcher.getActor(),p.actor.send("loadDEMTile",q,g.bind(this),void 0,!0))}}).bind(this))}_getNeighboringTiles(p){const s=p.canonical,d=Math.pow(2,s.z),g=(s.x-1+d)%d,_=s.x===0?p.wrap-1:p.wrap,b=(s.x+1+d)%d,I=s.x+1===d?p.wrap+1:p.wrap,A={};return A[new l.OverscaledTileID(p.overscaledZ,_,s.z,g,s.y).key]={backfilled:!1},A[new l.OverscaledTileID(p.overscaledZ,I,s.z,b,s.y).key]={backfilled:!1},s.y>0&&(A[new l.OverscaledTileID(p.overscaledZ,_,s.z,g,s.y-1).key]={backfilled:!1},A[new l.OverscaledTileID(p.overscaledZ,p.wrap,s.z,s.x,s.y-1).key]={backfilled:!1},A[new l.OverscaledTileID(p.overscaledZ,I,s.z,b,s.y-1).key]={backfilled:!1}),s.y+1<d&&(A[new l.OverscaledTileID(p.overscaledZ,_,s.z,g,s.y+1).key]={backfilled:!1},A[new l.OverscaledTileID(p.overscaledZ,p.wrap,s.z,s.x,s.y+1).key]={backfilled:!1},A[new l.OverscaledTileID(p.overscaledZ,I,s.z,b,s.y+1).key]={backfilled:!1}),A}unloadTile(p){p.demTexture&&this.map.painter.saveTileTexture(p.demTexture),p.fbo&&(p.fbo.destroy(),delete p.fbo),p.dem&&delete p.dem,delete p.neighboringTiles,p.state="unloaded"}},geojson:class extends l.Evented{constructor(p,s,d,g){super(),this.id=p,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=d.getActor(),this.setEventedParent(g),this._data=s.data,this._options=l.extend({},s),this._collectResourceTiming=s.collectResourceTiming,s.maxzoom!==void 0&&(this.maxzoom=s.maxzoom),s.type&&(this.type=s.type),s.attribution&&(this.attribution=s.attribution),this.promoteId=s.promoteId;const _=l.EXTENT/this.tileSize;this.workerOptions=l.extend({source:this.id,cluster:s.cluster||!1,geojsonVtOptions:{buffer:(s.buffer!==void 0?s.buffer:128)*_,tolerance:(s.tolerance!==void 0?s.tolerance:.375)*_,extent:l.EXTENT,maxZoom:this.maxzoom,lineMetrics:s.lineMetrics||!1,generateId:s.generateId||!1},superclusterOptions:{maxZoom:s.clusterMaxZoom!==void 0?s.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,s.clusterMinPoints||2),extent:l.EXTENT,radius:(s.clusterRadius!==void 0?s.clusterRadius:50)*_,log:!1,generateId:s.generateId||!1},clusterProperties:s.clusterProperties,filter:s.filter},s.workerOptions)}onAdd(p){this.map=p,this.setData(this._data)}setData(p){return this._data=p,this._updateWorkerData(),this}getClusterExpansionZoom(p,s){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:p,source:this.id},s),this}getClusterChildren(p,s){return this.actor.send("geojson.getClusterChildren",{clusterId:p,source:this.id},s),this}getClusterLeaves(p,s,d,g){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:p,limit:s,offset:d},g),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new l.Event("dataloading",{dataType:"source"})),this._loaded=!1;const p=l.extend({},this.workerOptions),s=this._data;typeof s=="string"?(p.request=this.map._requestManager.transformRequest(l.exported.resolveURL(s),l.ResourceType.Source),p.request.collectResourceTiming=this._collectResourceTiming):p.data=JSON.stringify(s),this._pendingLoad=this.actor.send(`${this.type}.loadData`,p,(d,g)=>{if(this._loaded=!0,this._pendingLoad=null,d)this.fire(new l.ErrorEvent(d));else{const _={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&g&&g.resourceTiming&&g.resourceTiming[this.id]&&(_.resourceTiming=g.resourceTiming[this.id]),this.fire(new l.Event("data",_)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(p,s){const d=p.actor?"reloadTile":"loadTile";p.actor=this.actor,p.request=this.actor.send(d,{type:this.type,uid:p.uid,tileID:p.tileID,tileZoom:p.tileZoom,zoom:p.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:l.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(g,_)=>(delete p.request,p.unloadVectorData(),p.aborted?s(null):g?s(g):(p.loadVectorData(_,this.map.painter,d==="reloadTile"),s(null))),void 0,d==="loadTile")}abortTile(p){p.request&&(p.request.cancel(),delete p.request),p.aborted=!0}unloadTile(p){p.unloadVectorData(),this.actor.send("removeTile",{uid:p.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return l.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends Yt{constructor(p,s,d,g){super(p,s,d,g),this.roundZoom=!0,this.type="video",this.options=s}load(){this._loaded=!1;const p=this.options;this.urls=[];for(const s of p.urls)this.urls.push(this.map._requestManager.transformRequest(s,l.ResourceType.Source).url);l.getVideo(this.urls,(s,d)=>{this._loaded=!0,s?this.fire(new l.ErrorEvent(s)):d&&(this.video=d,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(p){if(this.video){const s=this.video.seekable;p<s.start(0)||p>s.end(0)?this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${s.start(0)} and ${s.end(0)}-second mark.`))):this.video.currentTime=p}}getVideo(){return this.video}onAdd(p){this.map||(this.map=p,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const p=this.map.painter.context,s=p.gl;this.texture?this.video.paused||(this.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE),s.texSubImage2D(s.TEXTURE_2D,0,0,0,s.RGBA,s.UNSIGNED_BYTE,this.video)):(this.texture=new l.Texture(p,this.video,s.RGBA),this.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(p)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:Yt,canvas:class extends Yt{constructor(p,s,d,g){super(p,s,d,g),s.coordinates?Array.isArray(s.coordinates)&&s.coordinates.length===4&&!s.coordinates.some(_=>!Array.isArray(_)||_.length!==2||_.some(b=>typeof b!="number"))||this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${p}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${p}`,null,'missing required property "coordinates"'))),s.animate&&typeof s.animate!="boolean"&&this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${p}`,null,'optional "animate" property must be a boolean value'))),s.canvas?typeof s.canvas=="string"||s.canvas instanceof l.window.HTMLCanvasElement||this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${p}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${p}`,null,'missing required property "canvas"'))),this.options=s,this.animate=s.animate===void 0||s.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof l.window.HTMLCanvasElement?this.options.canvas:l.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new l.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(p){this.map=p,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let p=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,p=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,p=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const s=this.map.painter.context;this.texture?(p||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new l.Texture(s,this.canvas,s.gl.RGBA,{premultiply:!0}),this._prepareData(s)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const p of[this.canvas.width,this.canvas.height])if(isNaN(p)||p<=0)return!0;return!1}},custom:class extends l.Evented{constructor(p,s,d,g){super(),this.id=p,this.type="custom",this._dataType="raster",this._dispatcher=d,this._implementation=s,this.setEventedParent(g),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new l.ErrorEvent(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new l.ErrorEvent(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new Ut(this._implementation.bounds,this.minzoom,this.maxzoom)),s.update=this._update.bind(this),s.clearTiles=this._clearTiles.bind(this),s.coveringTiles=this._coveringTiles.bind(this),l.extend(this,l.pick(s,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return l.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(p){this._map=p,this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(p),this.load()}onRemove(p){this._implementation.onRemove&&this._implementation.onRemove(p)}hasTile(p){if(this._implementation.hasTile){const{x:s,y:d,z:g}=p.canonical;return this._implementation.hasTile({x:s,y:d,z:g})}return!this.tileBounds||this.tileBounds.contains(p.canonical)}loadTile(p,s){const{x:d,y:g,z:_}=p.tileID.canonical,b=new l.window.AbortController;p.request=Promise.resolve(this._implementation.loadTile({x:d,y:g,z:_},{signal:b.signal})).then((function(I){return delete p.request,p.aborted?(p.state="unloaded",s(null)):I===void 0?(p.state="errored",s(null)):I===null?(this.loadTileData(p,{width:this.tileSize,height:this.tileSize,data:null}),p.state="loaded",s(null)):function(A){return A instanceof l.window.ImageData||A instanceof l.window.HTMLCanvasElement||A instanceof l.window.ImageBitmap||A instanceof l.window.HTMLImageElement}(I)?(this.loadTileData(p,I),p.state="loaded",void s(null)):(p.state="errored",s(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)))}).bind(this)).catch(I=>{I.code!==20&&(p.state="errored",s(I))}),p.request.cancel=()=>b.abort()}loadTileData(p,s){We.loadTileData(p,s,this._map.painter)}unloadTileData(p){We.unloadTileData(p,this._map.painter)}unloadTile(p,s){if(this.unloadTileData(p),this._implementation.unloadTile){const{x:d,y:g,z:_}=p.tileID.canonical;this._implementation.unloadTile({x:d,y:g,z:_})}s()}abortTile(p,s){p.request&&p.request.cancel&&(p.request.cancel(),delete p.request),s()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(p=>({x:p.canonical.x,y:p.canonical.y,z:p.canonical.z}))}_clearTiles(){this._map.style._clearSource(this.id)}_update(){this.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"}))}}},un=function(p,s,d,g){const _=new Xt[s.type](p,s,d,g);if(_.id!==p)throw new Error(`Expected Source id to be ${p} instead of ${_.id}`);return l.bindAll(["load","abort","unload","serialize","prepare"],_),_};function ln(p,s){const d=l.identity([]);return l.scale(d,d,[.5*p.width,.5*-p.height,1]),l.translate(d,d,[1,-1,0]),l.multiply(d,d,p.calculateProjMatrix(s.toUnwrapped())),Float32Array.from(d)}function Gn(p,s,d,g,_,b,I,A=!1){const O=p.tilesIn(g,I,A);O.sort(er);const N=[];for(const q of O)N.push({wrappedTileID:q.tile.tileID.wrapped().key,queryResults:q.tile.queryRenderedFeatures(s,d,p._state,q,_,b,ln(p.transform,q.tile.tileID),A)});const B=function(q){const re={},le={};for(const he of q){const ce=he.queryResults,me=he.wrappedTileID,K=le[me]=le[me]||{};for(const se in ce){const xe=ce[se],be=K[se]=K[se]||{},Re=re[se]=re[se]||[];for(const ze of xe)be[ze.featureIndex]||(be[ze.featureIndex]=!0,Re.push(ze))}}return re}(N);for(const q in B)B[q].forEach(re=>{const le=re.feature,he=le.layer;he&&he.type!=="background"&&he.type!=="sky"&&(le.source=he.source,he["source-layer"]&&(le.sourceLayer=he["source-layer"]),le.state=le.id!==void 0?p.getFeatureState(he["source-layer"],le.id):{})});return B}function On(p,s){const d=p.getRenderableIds().map(b=>p.getTileByID(b)),g=[],_={};for(let b=0;b<d.length;b++){const I=d[b],A=I.tileID.canonical.key;_[A]||(_[A]=!0,I.querySourceFeatures(g,s))}return g}function er(p,s){const d=p.tileID,g=s.tileID;return d.overscaledZ-g.overscaledZ||d.canonical.y-g.canonical.y||d.wrap-g.wrap||d.canonical.x-g.canonical.x}function Xn(){return Bl.workerClass!=null?new Bl.workerClass:new l.window.Worker(Bl.workerUrl)}const Zr="mapboxgl_preloaded_worker_pool";class an{constructor(){this.active={}}acquire(s){if(!this.workers)for(this.workers=[];this.workers.length<an.workerCount;)this.workers.push(new Xn);return this.active[s]=!0,this.workers.slice()}release(s){delete this.active[s],this.numActive()===0&&(this.workers.forEach(d=>{d.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Zr]}numActive(){return Object.keys(this.active).length}}let nn;function En(){return nn||(nn=new an),nn}function Tr(p,s){const d={};for(const g in p)g!=="ref"&&(d[g]=p[g]);return l.refProperties.forEach(g=>{g in s&&(d[g]=s[g])}),d}function ri(p){p=p.slice();const s=Object.create(null);for(let d=0;d<p.length;d++)s[p[d].id]=p[d];for(let d=0;d<p.length;d++)"ref"in p[d]&&(p[d]=Tr(p[d],s[p[d].ref]));return p}an.workerCount=2;const Cn={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function Ni(p,s,d){d.push({command:Cn.addSource,args:[p,s[p]]})}function xo(p,s,d){s.push({command:Cn.removeSource,args:[p]}),d[p]=!0}function Po(p,s,d,g){xo(p,d,g),Ni(p,s,d)}function io(p,s,d){let g;for(g in p[d])if(p[d].hasOwnProperty(g)&&g!=="data"&&!w(p[d][g],s[d][g]))return!1;for(g in s[d])if(s[d].hasOwnProperty(g)&&g!=="data"&&!w(p[d][g],s[d][g]))return!1;return!0}function Hr(p,s,d,g,_,b){let I;for(I in s=s||{},p=p||{})p.hasOwnProperty(I)&&(w(p[I],s[I])||d.push({command:b,args:[g,I,s[I],_]}));for(I in s)s.hasOwnProperty(I)&&!p.hasOwnProperty(I)&&(w(p[I],s[I])||d.push({command:b,args:[g,I,s[I],_]}))}function ji(p){return p.id}function fa(p,s){return p[s.id]=s,p}class oo{constructor(s,d){this.reset(s,d)}reset(s,d){this.points=s||[],this._distances=[0];for(let g=1;g<this.points.length;g++)this._distances[g]=this._distances[g-1]+this.points[g].dist(this.points[g-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(d||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(s){if(this.points.length===1)return this.points[0];s=l.clamp(s,0,1);let d=1,g=this._distances[d];const _=s*this.paddedLength+this.padding;for(;g<_&&d<this._distances.length;)g=this._distances[++d];const b=d-1,I=this._distances[b],A=g-I,O=A>0?(_-I)/A:0;return this.points[b].mult(1-O).add(this.points[d].mult(O))}}class ao{constructor(s,d,g){const _=this.boxCells=[],b=this.circleCells=[];this.xCellCount=Math.ceil(s/g),this.yCellCount=Math.ceil(d/g);for(let I=0;I<this.xCellCount*this.yCellCount;I++)_.push([]),b.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=s,this.height=d,this.xScale=this.xCellCount/s,this.yScale=this.yCellCount/d,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(s,d,g,_,b){this._forEachCell(d,g,_,b,this._insertBoxCell,this.boxUid++),this.boxKeys.push(s),this.bboxes.push(d),this.bboxes.push(g),this.bboxes.push(_),this.bboxes.push(b)}insertCircle(s,d,g,_){this._forEachCell(d-_,g-_,d+_,g+_,this._insertCircleCell,this.circleUid++),this.circleKeys.push(s),this.circles.push(d),this.circles.push(g),this.circles.push(_)}_insertBoxCell(s,d,g,_,b,I){this.boxCells[b].push(I)}_insertCircleCell(s,d,g,_,b,I){this.circleCells[b].push(I)}_query(s,d,g,_,b,I){if(g<0||s>this.width||_<0||d>this.height)return!b&&[];const A=[];if(s<=0&&d<=0&&this.width<=g&&this.height<=_){if(b)return!0;for(let O=0;O<this.boxKeys.length;O++)A.push({key:this.boxKeys[O],x1:this.bboxes[4*O],y1:this.bboxes[4*O+1],x2:this.bboxes[4*O+2],y2:this.bboxes[4*O+3]});for(let O=0;O<this.circleKeys.length;O++){const N=this.circles[3*O],B=this.circles[3*O+1],q=this.circles[3*O+2];A.push({key:this.circleKeys[O],x1:N-q,y1:B-q,x2:N+q,y2:B+q})}return I?A.filter(I):A}return this._forEachCell(s,d,g,_,this._queryCell,A,{hitTest:b,seenUids:{box:{},circle:{}}},I),b?A.length>0:A}_queryCircle(s,d,g,_,b){const I=s-g,A=s+g,O=d-g,N=d+g;if(A<0||I>this.width||N<0||O>this.height)return!_&&[];const B=[];return this._forEachCell(I,O,A,N,this._queryCellCircle,B,{hitTest:_,circle:{x:s,y:d,radius:g},seenUids:{box:{},circle:{}}},b),_?B.length>0:B}query(s,d,g,_,b){return this._query(s,d,g,_,!1,b)}hitTest(s,d,g,_,b){return this._query(s,d,g,_,!0,b)}hitTestCircle(s,d,g,_){return this._queryCircle(s,d,g,!0,_)}_queryCell(s,d,g,_,b,I,A,O){const N=A.seenUids,B=this.boxCells[b];if(B!==null){const re=this.bboxes;for(const le of B)if(!N.box[le]){N.box[le]=!0;const he=4*le;if(s<=re[he+2]&&d<=re[he+3]&&g>=re[he+0]&&_>=re[he+1]&&(!O||O(this.boxKeys[le]))){if(A.hitTest)return I.push(!0),!0;I.push({key:this.boxKeys[le],x1:re[he],y1:re[he+1],x2:re[he+2],y2:re[he+3]})}}}const q=this.circleCells[b];if(q!==null){const re=this.circles;for(const le of q)if(!N.circle[le]){N.circle[le]=!0;const he=3*le;if(this._circleAndRectCollide(re[he],re[he+1],re[he+2],s,d,g,_)&&(!O||O(this.circleKeys[le]))){if(A.hitTest)return I.push(!0),!0;{const ce=re[he],me=re[he+1],K=re[he+2];I.push({key:this.circleKeys[le],x1:ce-K,y1:me-K,x2:ce+K,y2:me+K})}}}}}_queryCellCircle(s,d,g,_,b,I,A,O){const N=A.circle,B=A.seenUids,q=this.boxCells[b];if(q!==null){const le=this.bboxes;for(const he of q)if(!B.box[he]){B.box[he]=!0;const ce=4*he;if(this._circleAndRectCollide(N.x,N.y,N.radius,le[ce+0],le[ce+1],le[ce+2],le[ce+3])&&(!O||O(this.boxKeys[he])))return I.push(!0),!0}}const re=this.circleCells[b];if(re!==null){const le=this.circles;for(const he of re)if(!B.circle[he]){B.circle[he]=!0;const ce=3*he;if(this._circlesCollide(le[ce],le[ce+1],le[ce+2],N.x,N.y,N.radius)&&(!O||O(this.circleKeys[he])))return I.push(!0),!0}}}_forEachCell(s,d,g,_,b,I,A,O){const N=this._convertToXCellCoord(s),B=this._convertToYCellCoord(d),q=this._convertToXCellCoord(g),re=this._convertToYCellCoord(_);for(let le=N;le<=q;le++)for(let he=B;he<=re;he++)if(b.call(this,s,d,g,_,this.xCellCount*he+le,I,A,O))return}_convertToXCellCoord(s){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(s*this.xScale)))}_convertToYCellCoord(s){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(s*this.yScale)))}_circlesCollide(s,d,g,_,b,I){const A=_-s,O=b-d,N=g+I;return N*N>A*A+O*O}_circleAndRectCollide(s,d,g,_,b,I,A){const O=(I-_)/2,N=Math.abs(s-(_+O));if(N>O+g)return!1;const B=(A-b)/2,q=Math.abs(d-(b+B));if(q>B+g)return!1;if(N<=O||q<=B)return!0;const re=N-O,le=q-B;return re*re+le*le<=g*g}}const _i={unknown:0,flipRequired:1,flipNotRequired:2},Oi=Math.tan(85*Math.PI/180);function nt(p,s,d,g,_,b,I){const A=l.create();if(d)if(b.name==="globe"){const O=l.calculateGlobeLabelMatrix(_,s);l.multiply(A,A,O)}else{const O=te([],I);A[0]=O[0],A[1]=O[1],A[4]=O[2],A[5]=O[3],g||l.rotateZ(A,A,_.angle)}else l.multiply(A,_.labelPlaneMatrix,p);return A}function Si(p,s,d,g,_,b,I){const A=nt(p,s,d,g,_,b,I);return b.name==="globe"&&d||(A[2]=A[6]=A[10]=A[14]=0),A}function vr(p,s,d,g,_,b,I){if(d){if(b.name==="globe"){const A=nt(p,s,d,g,_,b,I);return l.invert(A,A),l.multiply(A,p,A),A}{const A=l.clone(p),O=l.identity([]);return O[0]=I[0],O[1]=I[1],O[4]=I[2],O[5]=I[3],l.multiply(A,A,O),g||l.rotateZ(A,A,-_.angle),A}}return _.glCoordMatrix}function mr(p,s,d,g){const _=[p,s,d,1];d?l.transformMat4$1(_,_,g):In(_,_,g);const b=_[3];return _[0]/=b,_[1]/=b,_[2]/=b,_}function Xo(p,s){return Math.min(.5+p/s*.5,1.5)}function Tn(p,s){const d=p[0]/p[3],g=p[1]/p[3];return d>=-s[0]&&d<=s[0]&&g>=-s[1]&&g<=s[1]}function Pn(p,s,d,g,_,b,I,A,O,N){const B=d.transform,q=g?p.textSizeData:p.iconSizeData,re=l.evaluateSizeForZoom(q,d.transform.zoom),le=B.projection.name==="globe",he=[256/d.width*2+1,256/d.height*2+1],ce=g?p.text.dynamicLayoutVertexArray:p.icon.dynamicLayoutVertexArray;ce.clear();let me=null;le&&(me=g?p.text.globeExtVertexArray:p.icon.globeExtVertexArray);const K=p.lineVertexArray,se=g?p.text.placedSymbolArray:p.icon.placedSymbolArray,xe=d.transform.width/d.transform.height;let be,Re=!1;for(let ze=0;ze<se.length;ze++){const Oe=se.get(ze),{numGlyphs:Ve,writingMode:Ue}=Oe;if(Ue!==l.WritingMode.vertical||Re||be===l.WritingMode.horizontal||(Re=!0),be=Ue,(Oe.hidden||Ue===l.WritingMode.vertical)&&!Re){Kr(Ve,ce);continue}Re=!1;const Ke=new l.Point(Oe.tileAnchorX,Oe.tileAnchorY);let{x:At,y:qe,z:ht}=B.projection.projectTilePoint(Ke.x,Ke.y,N.canonical);if(O){const[Rn,en,_n]=O(Ke);At+=Rn,qe+=en,ht+=_n}const et=[At,qe,ht,1];if(l.transformMat4$1(et,et,s),!Tn(et,he)){Kr(Ve,ce);continue}const Et=Xo(d.transform.cameraToCenterDistance,et[3]),Xe=l.evaluateSizeForFeature(q,re,Oe),dt=I?Xe/Et:Xe*Et,Lt=mr(At,qe,ht,_);if(Lt[3]<=0){Kr(Ve,ce);continue}let vt={};const Dt=I?null:O,dn=zt(Oe,dt,!1,A,s,_,b,p.glyphOffsetArray,K,ce,me,Lt,Ke,vt,xe,Dt,B.projection,N,I);Re=dn.useVertical,Dt&&dn.needsFlipping&&(vt={}),(dn.notEnoughRoom||Re||dn.needsFlipping&&zt(Oe,dt,!0,A,s,_,b,p.glyphOffsetArray,K,ce,me,Lt,Ke,vt,xe,Dt,B.projection,N,I).notEnoughRoom)&&Kr(Ve,ce)}g?(p.text.dynamicLayoutVertexBuffer.updateData(ce),me&&p.text.globeExtVertexBuffer.updateData(me)):(p.icon.dynamicLayoutVertexBuffer.updateData(ce),me&&p.icon.globeExtVertexBuffer.updateData(me))}function Xr(p,s,d,g,_,b,I,A,O,N,B,q,re,le,he,ce){const{lineStartIndex:me,glyphStartIndex:K,segment:se}=A,xe=K+A.numGlyphs,be=me+A.lineLength,Re=s.getoffsetX(K),ze=s.getoffsetX(xe-1),Oe=Qr(p*Re,d,g,_,b,I,se,me,be,O,N,B,q,re,!0,le,he,ce);if(!Oe)return null;const Ve=Qr(p*ze,d,g,_,b,I,se,me,be,O,N,B,q,re,!0,le,he,ce);return Ve?{first:Oe,last:Ve}:null}function Gr(p,s,d,g){return p===l.WritingMode.horizontal&&Math.abs(g)>Math.abs(d)?{useVertical:!0}:p===l.WritingMode.vertical?g>0?{needsFlipping:!0}:null:s!==_i.unknown&&function(_,b){return _===0||Math.abs(b/_)>Oi}(d,g)?s===_i.flipRequired?{needsFlipping:!0}:null:d<0?{needsFlipping:!0}:null}function zt(p,s,d,g,_,b,I,A,O,N,B,q,re,le,he,ce,me,K,se){const xe=s/24,be=p.lineOffsetX*xe,Re=p.lineOffsetY*xe,{lineStartIndex:ze,glyphStartIndex:Oe,numGlyphs:Ve,segment:Ue,writingMode:Ke,flipState:At}=p,qe=ze+p.lineLength,ht=et=>{if(B){const[Lt,vt,Dt]=et.up,dn=N.length;l.updateGlobeVertexNormal(B,dn+0,Lt,vt,Dt),l.updateGlobeVertexNormal(B,dn+1,Lt,vt,Dt),l.updateGlobeVertexNormal(B,dn+2,Lt,vt,Dt),l.updateGlobeVertexNormal(B,dn+3,Lt,vt,Dt)}const[Et,Xe,dt]=et.point;l.addDynamicAttributes(N,Et,Xe,dt,et.angle)};if(Ve>1){const et=Xr(xe,A,be,Re,d,q,re,p,O,b,le,ce,!1,me,K,se);if(!et)return{notEnoughRoom:!0};if(g&&!d){let[Et,Xe,dt]=et.first.point,[Lt,vt,Dt]=et.last.point;[Et,Xe]=mr(Et,Xe,dt,I),[Lt,vt]=mr(Lt,vt,Dt,I);const dn=Gr(Ke,At,(Lt-Et)*he,vt-Xe);if(p.flipState=dn&&dn.needsFlipping?_i.flipRequired:_i.flipNotRequired,dn)return dn}ht(et.first);for(let Et=Oe+1;Et<Oe+Ve-1;Et++){const Xe=Qr(xe*A.getoffsetX(Et),be,Re,d,q,re,Ue,ze,qe,O,b,le,ce,!1,!1,me,K,se);if(!Xe)return N.length-=4*(Et-Oe),{notEnoughRoom:!0};ht(Xe)}ht(et.last)}else{if(g&&!d){const Et=mr(re.x,re.y,0,_),Xe=ze+Ue+1,dt=new l.Point(O.getx(Xe),O.gety(Xe)),Lt=mr(dt.x,dt.y,0,_),vt=Lt[3]>0?Lt:bn(re,dt,Et,1,_,void 0,me,K.canonical),Dt=Gr(Ke,At,(vt[0]-Et[0])*he,vt[1]-Et[1]);if(p.flipState=Dt&&Dt.needsFlipping?_i.flipRequired:_i.flipNotRequired,Dt)return Dt}const et=Qr(xe*A.getoffsetX(Oe),be,Re,d,q,re,Ue,ze,qe,O,b,le,ce,!1,!1,me,K,se);if(!et)return{notEnoughRoom:!0};ht(et)}return{}}function xn(p,s,d,g,_){const{x:b,y:I,z:A}=g.projectTilePoint(p.x,p.y,s);if(!_)return mr(b,I,A,d);const[O,N,B]=_(p);return mr(b+O,I+N,A+B,d)}function bn(p,s,d,g,_,b,I,A){const O=xn(p.sub(s)._unit()._add(p),A,_,I,b);return l.sub(O,d,O),l.normalize(O,O),l.scaleAndAdd(O,d,O,g)}function Qr(p,s,d,g,_,b,I,A,O,N,B,q,re,le,he,ce,me,K){const se=g?p-s:p+s;let xe=se>0?1:-1,be=0;g&&(xe*=-1,be=Math.PI),xe<0&&(be+=Math.PI);let Re=A+I+(xe>0?0:1)|0,ze=_,Oe=_,Ve=0,Ue=0;const Ke=Math.abs(se),At=[],qe=[];let ht=b,et=ht;const Et=()=>bn(et,ht,Oe,Ke-Ve+1,B,re,ce,me.canonical);for(;Ve+Ue<=Ke;){if(Re+=xe,Re<A||Re>=O)return null;if(Oe=ze,et=ht,At.push(Oe),le&&qe.push(et),ht=new l.Point(N.getx(Re),N.gety(Re)),ze=q[Re],!ze){const _n=xn(ht,me.canonical,B,ce,re);ze=_n[3]>0?q[Re]=_n:Et()}Ve+=Ue,Ue=l.distance(Oe,ze)}he&&re&&(q[Re]&&(ze=Et(),Ue=l.distance(Oe,ze)),q[Re]=ze);const Xe=(Ke-Ve)/Ue,dt=ht.sub(et)._mult(Xe)._add(et),Lt=l.sub([],ze,Oe),vt=l.scaleAndAdd([],Oe,Lt,Xe);let Dt=[0,0,1],dn=Lt[0],Rn=Lt[1];if(K&&(Dt=ce.upVector(me.canonical,dt.x,dt.y),Dt[0]!==0||Dt[1]!==0||Dt[2]!==1)){const _n=[Dt[2],0,-Dt[0]],Hn=l.cross([],Dt,_n);l.normalize(_n,_n),l.normalize(Hn,Hn),dn=l.dot(Lt,_n),Rn=l.dot(Lt,Hn)}if(d){const _n=l.cross([],Dt,Lt);l.normalize(_n,_n),l.scaleAndAdd(vt,vt,_n,d*xe)}const en=be+Math.atan2(Rn,dn);return At.push(vt),le&&qe.push(dt),{point:vt,angle:en,path:At,tilePath:qe,up:Dt}}function Kr(p,s){const d=s.length,g=d+4*p;s.resize(g),s.float32.fill(-1/0,4*d,4*g)}function In(p,s,d){const g=s[0],_=s[1];return p[0]=d[0]*g+d[4]*_+d[12],p[1]=d[1]*g+d[5]*_+d[13],p[3]=d[3]*g+d[7]*_+d[15],p}const Br=100;class Ao{constructor(s,d,g=new ao(s.width+200,s.height+200,25),_=new ao(s.width+200,s.height+200,25)){this.transform=s,this.grid=g,this.ignoredGrid=_,this.pitchfactor=Math.cos(s._pitch)*s.cameraToCenterDistance,this.screenRightBoundary=s.width+Br,this.screenBottomBoundary=s.height+Br,this.gridRightBoundary=s.width+200,this.gridBottomBoundary=s.height+200,this.fogState=d}placeCollisionBox(s,d,g,_,b,I,A,O){let N=g.projectedAnchorX,B=g.projectedAnchorY,q=g.projectedAnchorZ;const re=g.elevation,le=g.tileID,he=s.getProjection();if(re&&le){const[ze,Oe,Ve]=he.upVector(le.canonical,g.tileAnchorX,g.tileAnchorY),Ue=he.upVectorScale(le.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;N+=ze*re*Ue,B+=Oe*re*Ue,q+=Ve*re*Ue}const ce=this.projectAndGetPerspectiveRatio(A,N,B,q,g.tileID,he.name==="globe"||!!re||this.transform.pitch>0,he),me=I*ce.perspectiveRatio,K=(g.x1*d+_.x-g.padding)*me+ce.point.x,se=(g.y1*d+_.y-g.padding)*me+ce.point.y,xe=(g.x2*d+_.x+g.padding)*me+ce.point.x,be=(g.y2*d+_.y+g.padding)*me+ce.point.y,Re=ce.perspectiveRatio<=.55||ce.occluded;return!this.isInsideGrid(K,se,xe,be)||!b&&this.grid.hitTest(K,se,xe,be,O)||Re?{box:[],offscreen:!1,occluded:ce.occluded}:{box:[K,se,xe,be],offscreen:this.isOffscreen(K,se,xe,be),occluded:!1}}placeCollisionCircles(s,d,g,_,b,I,A,O,N,B,q,re,le,he,ce){const me=[],K=this.transform.elevation,se=s.getProjection(),xe=K?K.getAtTileOffsetFunc(ce,this.transform.center.lat,this.transform.worldSize,se):null,be=new l.Point(g.tileAnchorX,g.tileAnchorY);let{x:Re,y:ze,z:Oe}=se.projectTilePoint(be.x,be.y,ce.canonical);if(xe){const[dt,Lt,vt]=xe(be);Re+=dt,ze+=Lt,Oe+=vt}const Ve=se.name==="globe",Ue=this.projectAndGetPerspectiveRatio(A,Re,ze,Oe,ce,Ve||!!K||this.transform.pitch>0,se),{perspectiveRatio:Ke}=Ue,At=(q?I/Ke:I*Ke)/l.ONE_EM,qe=mr(Re,ze,Oe,O),ht=Ue.signedDistanceFromCamera>0?Xr(At,b,g.lineOffsetX*At,g.lineOffsetY*At,!1,qe,be,g,_,O,{},K&&!q?xe:null,q&&!!K,se,ce,q):null;let et=!1,Et=!1,Xe=!0;if(ht&&!Ue.occluded){const dt=.5*le*Ke+he,Lt=new l.Point(-100,-100),vt=new l.Point(this.screenRightBoundary,this.screenBottomBoundary),Dt=new oo,{first:dn,last:Rn}=ht,en=dn.path.length;let _n=[];for(let cn=en-1;cn>=1;cn--)_n.push(dn.path[cn]);for(let cn=1;cn<Rn.path.length;cn++)_n.push(Rn.path[cn]);const Hn=2.5*dt;N&&(_n=_n.map(([cn,dr,yr],_r)=>(xe&&!Ve&&(yr=xe(_r<en-1?dn.tilePath[en-1-_r]:Rn.tilePath[_r-en+2])[2]),mr(cn,dr,yr,N))),_n.some(cn=>cn[3]<=0)&&(_n=[]));let Un=[];if(_n.length>0){let cn=1/0,dr=-1/0,yr=1/0,_r=-1/0;for(const xr of _n)cn=Math.min(cn,xr[0]),yr=Math.min(yr,xr[1]),dr=Math.max(dr,xr[0]),_r=Math.max(_r,xr[1]);dr>=Lt.x&&cn<=vt.x&&_r>=Lt.y&&yr<=vt.y&&(Un=[_n.map(xr=>new l.Point(xr[0],xr[1]))],(cn<Lt.x||dr>vt.x||yr<Lt.y||_r>vt.y)&&(Un=l.clipLine(Un,Lt.x,Lt.y,vt.x,vt.y)))}for(const cn of Un){Dt.reset(cn,.25*dt);let dr=0;dr=Dt.length<=.5*dt?1:Math.ceil(Dt.paddedLength/Hn)+1;for(let yr=0;yr<dr;yr++){const _r=yr/Math.max(dr-1,1),xr=Dt.lerp(_r),Hi=xr.x+Br,Ti=xr.y+Br;me.push(Hi,Ti,dt,0);const Do=Hi-dt,ba=Ti-dt,jr=Hi+dt,br=Ti+dt;if(Xe=Xe&&this.isOffscreen(Do,ba,jr,br),Et=Et||this.isInsideGrid(Do,ba,jr,br),!d&&this.grid.hitTestCircle(Hi,Ti,dt,re)&&(et=!0,!B))return{circles:[],offscreen:!1,collisionDetected:et,occluded:!1}}}}return{circles:!B&&et||!Et?[]:me,offscreen:Xe,collisionDetected:et,occluded:Ue.occluded}}queryRenderedSymbols(s){if(s.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const d=[];let g=1/0,_=1/0,b=-1/0,I=-1/0;for(const B of s){const q=new l.Point(B.x+Br,B.y+Br);g=Math.min(g,q.x),_=Math.min(_,q.y),b=Math.max(b,q.x),I=Math.max(I,q.y),d.push(q)}const A=this.grid.query(g,_,b,I).concat(this.ignoredGrid.query(g,_,b,I)),O={},N={};for(const B of A){const q=B.key;if(O[q.bucketInstanceId]===void 0&&(O[q.bucketInstanceId]={}),O[q.bucketInstanceId][q.featureIndex])continue;const re=[new l.Point(B.x1,B.y1),new l.Point(B.x2,B.y1),new l.Point(B.x2,B.y2),new l.Point(B.x1,B.y2)];l.polygonIntersectsPolygon(d,re)&&(O[q.bucketInstanceId][q.featureIndex]=!0,N[q.bucketInstanceId]===void 0&&(N[q.bucketInstanceId]=[]),N[q.bucketInstanceId].push(q.featureIndex))}return N}insertCollisionBox(s,d,g,_,b){(d?this.ignoredGrid:this.grid).insert({bucketInstanceId:g,featureIndex:_,collisionGroupID:b},s[0],s[1],s[2],s[3])}insertCollisionCircles(s,d,g,_,b){const I=d?this.ignoredGrid:this.grid,A={bucketInstanceId:g,featureIndex:_,collisionGroupID:b};for(let O=0;O<s.length;O+=4)I.insertCircle(A,s[O],s[O+1],s[O+2])}projectAndGetPerspectiveRatio(s,d,g,_,b,I,A){const O=[d,g,_,1];let N=!1;_||this.transform.pitch>0?(l.transformMat4$1(O,O,s),this.fogState&&b&&A.name!=="globe"&&(N=function(re,le,he,ce,me,K){const se=K.calculateFogTileMatrix(me),xe=[le,he,ce];return l.transformMat4(xe,xe,se),Le(re,xe,K.pitch,K._fov)}(this.fogState,d,g,_,b.toUnwrapped(),this.transform)>.9)):In(O,O,s);const B=O[3];return{point:new l.Point((O[0]/B+1)/2*this.transform.width+Br,(-O[1]/B+1)/2*this.transform.height+Br),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(A)/B*.5,1.5),signedDistanceFromCamera:B,occluded:I&&O[2]>B||N}}isOffscreen(s,d,g,_){return g<Br||s>=this.screenRightBoundary||_<Br||d>this.screenBottomBoundary}isInsideGrid(s,d,g,_){return g>=0&&s<this.gridRightBoundary&&_>=0&&d<this.gridBottomBoundary}getViewportMatrix(){const s=l.identity([]);return l.translate(s,s,[-100,-100,0]),s}}function Ro(p,s,d){const g=s.createTileMatrix(p,p.worldSize,d.toUnwrapped());return l.multiply(new Float32Array(16),p.projMatrix,g)}function Ui(p,s,d){if(s.projection.name===d.projection.name)return p.projMatrix;const g=d.clone();return g.setProjection(s.projection),Ro(g,s.getProjection(),p)}function Kn(p,s,d){return s.name===d.projection.name?p.projMatrix:Ro(d,s,p)}class js{constructor(s,d,g,_){this.opacity=s?Math.max(0,Math.min(1,s.opacity+(s.placed?d:-d))):_&&g?1:0,this.placed=g}isHidden(){return this.opacity===0&&!this.placed}}class xi{constructor(s,d,g,_,b,I=!1){this.text=new js(s?s.text:null,d,g,b),this.icon=new js(s?s.icon:null,d,_,b),this.clipped=I}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class bo{constructor(s,d,g,_=!1){this.text=s,this.icon=d,this.skipFade=g,this.clipped=_}}class Oo{constructor(){this.invProjMatrix=l.create(),this.viewportMatrix=l.create(),this.circles=[]}}class pa{constructor(s,d,g,_,b){this.bucketInstanceId=s,this.featureIndex=d,this.sourceLayerIndex=g,this.bucketIndex=_,this.tileID=b}}class ys{constructor(s){this.crossSourceCollisions=s,this.maxGroupID=0,this.collisionGroups={}}get(s){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[s]){const d=++this.maxGroupID;this.collisionGroups[s]={ID:d,predicate:g=>g.collisionGroupID===d}}return this.collisionGroups[s]}}function Ko(p,s,d,g,_){const{horizontalAlign:b,verticalAlign:I}=l.getAnchorAlignment(p),A=-(b-.5)*s,O=-(I-.5)*d,N=l.evaluateVariableOffset(p,g);return new l.Point(A+N[0]*_,O+N[1]*_)}function ma(p,s,d,g,_){const b=new l.Point(p,s);return d&&b._rotate(g?_:-_),b}class _s{constructor(s,d,g,_,b){this.transform=s.clone(),this.projection=s.projection.name,this.collisionIndex=new Ao(this.transform,b),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=d,this.retainedQueryData={},this.collisionGroups=new ys(g),this.collisionCircleArrays={},this.prevPlacement=_,_&&(_.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(s,d,g,_){const b=g.getBucket(d),I=g.latestFeatureIndex;if(!b||!I||d.id!==b.layerIds[0])return;const A=b.layers[0].layout,O=g.collisionBoxArray,N=Math.pow(2,this.transform.zoom-g.tileID.overscaledZ),B=g.tileSize/l.EXTENT,q=g.tileID.toUnwrapped();this.transform.setProjection(b.projection);const re=(le=g.tileID,he=b.getProjection(),ce=this.transform,he.name===this.projection?ce.calculateProjMatrix(le.toUnwrapped()):Ro(ce,he,le));var le,he,ce;const me=A.get("text-pitch-alignment")==="map",K=A.get("text-rotation-alignment")==="map";d.compileFilter();const se=d.dynamicFilter(),xe=d.dynamicFilterNeedsFeature(),be=this.transform.calculatePixelsToTileUnitsMatrix(g),Re=Si(re,g.tileID.canonical,me,K,this.transform,b.getProjection(),be);let ze=null;if(me){const Ue=vr(re,g.tileID.canonical,me,K,this.transform,b.getProjection(),be);ze=l.multiply([],this.transform.labelPlaneMatrix,Ue)}let Oe=null;se&&g.latestFeatureIndex&&(Oe={unwrappedTileID:q,dynamicFilter:se,dynamicFilterNeedsFeature:xe,featureIndex:g.latestFeatureIndex}),this.retainedQueryData[b.bucketInstanceId]=new pa(b.bucketInstanceId,I,b.sourceLayerIndex,b.index,g.tileID);const Ve={bucket:b,layout:A,posMatrix:re,textLabelPlaneMatrix:Re,labelToScreenMatrix:ze,clippingData:Oe,scale:N,textPixelRatio:B,holdingForFade:g.holdingForFade(),collisionBoxArray:O,partiallyEvaluatedTextSize:l.evaluateSizeForZoom(b.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:l.evaluateSizeForZoom(b.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(b.sourceID)};if(_)for(const Ue of b.sortKeyRanges){const{sortKey:Ke,symbolInstanceStart:At,symbolInstanceEnd:qe}=Ue;s.push({sortKey:Ke,symbolInstanceStart:At,symbolInstanceEnd:qe,parameters:Ve})}else s.push({symbolInstanceStart:0,symbolInstanceEnd:b.symbolInstances.length,parameters:Ve})}attemptAnchorPlacement(s,d,g,_,b,I,A,O,N,B,q,re,le,he,ce,me,K,se){const{textOffset0:xe,textOffset1:be,crossTileID:Re}=re,ze=[xe,be],Oe=Ko(s,g,_,ze,b),Ve=this.collisionIndex.placeCollisionBox(he,b,d,ma(Oe.x,Oe.y,I,A,this.transform.angle),q,O,N,B.predicate);if(me){const Ue=he.getSymbolInstanceIconSize(se,this.transform.zoom,re.placedIconSymbolIndex);if(this.collisionIndex.placeCollisionBox(he,Ue,me,ma(Oe.x,Oe.y,I,A,this.transform.angle),q,O,N,B.predicate).box.length===0)return}if(Ve.box.length>0){let Ue;return this.prevPlacement&&this.prevPlacement.variableOffsets[Re]&&this.prevPlacement.placements[Re]&&this.prevPlacement.placements[Re].text&&(Ue=this.prevPlacement.variableOffsets[Re].anchor),this.variableOffsets[Re]={textOffset:ze,width:g,height:_,anchor:s,textScale:b,prevAnchor:Ue},this.markUsedJustification(he,s,re,ce),he.allowVerticalPlacement&&(this.markUsedOrientation(he,ce,re),this.placedOrientations[Re]=ce),{shift:Oe,placedGlyphBoxes:Ve}}}placeLayerBucketPart(s,d,g,_){const{bucket:b,layout:I,posMatrix:A,textLabelPlaneMatrix:O,labelToScreenMatrix:N,clippingData:B,textPixelRatio:q,holdingForFade:re,collisionBoxArray:le,partiallyEvaluatedTextSize:he,partiallyEvaluatedIconSize:ce,collisionGroup:me}=s.parameters,K=I.get("text-optional"),se=I.get("icon-optional"),xe=I.get("text-allow-overlap"),be=I.get("icon-allow-overlap"),Re=I.get("text-rotation-alignment")==="map",ze=I.get("text-pitch-alignment")==="map",Oe=I.get("icon-text-fit")!=="none",Ve=I.get("symbol-z-order")==="viewport-y";this.transform.setProjection(b.projection);let Ue=xe&&(be||!b.hasIconData()||se),Ke=be&&(xe||!b.hasTextData()||K);!b.collisionArrays&&le&&b.deserializeCollisionBoxes(le),g&&_&&b.updateCollisionDebugBuffers(this.transform.zoom,le);const At=(qe,ht,et)=>{const{crossTileID:Et,numVerticalGlyphVertices:Xe}=qe;if(B){const jr={zoom:this.transform.zoom,pitch:this.transform.pitch};let br=null;if(B.dynamicFilterNeedsFeature){const rr=this.retainedQueryData[b.bucketInstanceId];br=B.featureIndex.loadFeature({featureIndex:qe.featureIndex,bucketIndex:rr.bucketIndex,sourceLayerIndex:rr.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,B.dynamicFilter)(jr,br,this.retainedQueryData[b.bucketInstanceId].tileID.canonical,new l.Point(qe.tileAnchorX,qe.tileAnchorY),this.transform.calculateDistanceTileData(B.unwrappedTileID)))return this.placements[Et]=new bo(!1,!1,!1,!0),void d.add(Et)}if(d.has(Et))return;if(re)return void(this.placements[Et]=new bo(!1,!1,!1));let dt=!1,Lt=!1,vt=!0,Dt=!1,dn=!1,Rn=null,en={box:null,offscreen:null,occluded:null},_n={box:null,offscreen:null,occluded:null},Hn=null,Un=null,cn=null,dr=0,yr=0,_r=0;et.textFeatureIndex?dr=et.textFeatureIndex:qe.useRuntimeCollisionCircles&&(dr=qe.featureIndex),et.verticalTextFeatureIndex&&(yr=et.verticalTextFeatureIndex);const xr=jr=>{jr.tileID=this.retainedQueryData[b.bucketInstanceId].tileID;const br=this.transform.elevation;(br||jr.elevation)&&(jr.elevation=br?br.getAtTileOffset(jr.tileID,jr.tileAnchorX,jr.tileAnchorY):0)},Hi=et.textBox;if(Hi){xr(Hi);const jr=rr=>{let ai=l.WritingMode.horizontal;if(b.allowVerticalPlacement&&!rr&&this.prevPlacement){const Ki=this.prevPlacement.placedOrientations[Et];Ki&&(this.placedOrientations[Et]=Ki,ai=Ki,this.markUsedOrientation(b,ai,qe))}return ai},br=(rr,ai)=>{if(b.allowVerticalPlacement&&Xe>0&&et.verticalTextBox){for(const Ki of b.writingModes)if(Ki===l.WritingMode.vertical?(en=ai(),_n=en):en=rr(),en&&en.box&&en.box.length)break}else en=rr()};if(I.get("text-variable-anchor")){let rr=I.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[Et]){const kr=this.prevPlacement.variableOffsets[Et];rr.indexOf(kr.anchor)>0&&(rr=rr.filter(so=>so!==kr.anchor),rr.unshift(kr.anchor))}const ai=(kr,so,od)=>{const Xs=b.getSymbolInstanceTextSize(he,qe,this.transform.zoom,ht),jc=(kr.x2-kr.x1)*Xs+2*kr.padding,Za=(kr.y2-kr.y1)*Xs+2*kr.padding,Es=Oe&&!be?so:null;Es&&xr(Es);let Ks={box:[],offscreen:!1,occluded:!1};const ad=xe?2*rr.length:rr.length;for(let Uc=0;Uc<ad;++Uc){const bf=this.attemptAnchorPlacement(rr[Uc%rr.length],kr,jc,Za,Xs,Re,ze,q,A,me,Uc>=rr.length,qe,ht,b,od,Es,he,ce);if(bf&&(Ks=bf.placedGlyphBoxes,Ks&&Ks.box&&Ks.box.length)){dt=!0,Rn=bf.shift;break}}return Ks};br(()=>ai(Hi,et.iconBox,l.WritingMode.horizontal),()=>{const kr=et.verticalTextBox;return kr&&xr(kr),b.allowVerticalPlacement&&!(en&&en.box&&en.box.length)&&Xe>0&&kr?ai(kr,et.verticalIconBox,l.WritingMode.vertical):{box:null,offscreen:null,occluded:null}}),en&&(dt=en.box,vt=en.offscreen,Dt=en.occluded);const Ki=jr(!(!en||!en.box));if(!dt&&this.prevPlacement){const kr=this.prevPlacement.variableOffsets[Et];kr&&(this.variableOffsets[Et]=kr,this.markUsedJustification(b,kr.anchor,qe,Ki))}}else{const rr=(ai,Ki)=>{const kr=b.getSymbolInstanceTextSize(he,qe,this.transform.zoom,ht),so=this.collisionIndex.placeCollisionBox(b,kr,ai,new l.Point(0,0),xe,q,A,me.predicate);return so&&so.box&&so.box.length&&(this.markUsedOrientation(b,Ki,qe),this.placedOrientations[Et]=Ki),so};br(()=>rr(Hi,l.WritingMode.horizontal),()=>{const ai=et.verticalTextBox;return b.allowVerticalPlacement&&Xe>0&&ai?(xr(ai),rr(ai,l.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}}),jr(!!(en&&en.box&&en.box.length))}}if(Hn=en,dt=Hn&&Hn.box&&Hn.box.length>0,vt=Hn&&Hn.offscreen,Dt=Hn&&Hn.occluded,qe.useRuntimeCollisionCircles){const jr=b.text.placedSymbolArray.get(qe.centerJustifiedTextSymbolIndex>=0?qe.centerJustifiedTextSymbolIndex:qe.verticalPlacedTextSymbolIndex),br=l.evaluateSizeForFeature(b.textSizeData,he,jr),rr=I.get("text-padding");Un=this.collisionIndex.placeCollisionCircles(b,xe,jr,b.lineVertexArray,b.glyphOffsetArray,br,A,O,N,g,ze,me.predicate,qe.collisionCircleDiameter*br/l.ONE_EM,rr,this.retainedQueryData[b.bucketInstanceId].tileID),dt=xe||Un.circles.length>0&&!Un.collisionDetected,vt=vt&&Un.offscreen,Dt=Un.occluded}if(et.iconFeatureIndex&&(_r=et.iconFeatureIndex),et.iconBox){const jr=br=>{xr(br);const rr=Oe&&Rn?ma(Rn.x,Rn.y,Re,ze,this.transform.angle):new l.Point(0,0),ai=b.getSymbolInstanceIconSize(ce,this.transform.zoom,qe.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(b,ai,br,rr,be,q,A,me.predicate)};_n&&_n.box&&_n.box.length&&et.verticalIconBox?(cn=jr(et.verticalIconBox),Lt=cn.box.length>0):(cn=jr(et.iconBox),Lt=cn.box.length>0),vt=vt&&cn.offscreen,dn=cn.occluded}const Ti=K||qe.numHorizontalGlyphVertices===0&&Xe===0,Do=se||qe.numIconVertices===0;if(Ti||Do?Do?Ti||(Lt=Lt&&dt):dt=Lt&&dt:Lt=dt=Lt&&dt,dt&&Hn&&Hn.box&&this.collisionIndex.insertCollisionBox(Hn.box,I.get("text-ignore-placement"),b.bucketInstanceId,_n&&_n.box&&yr?yr:dr,me.ID),Lt&&cn&&this.collisionIndex.insertCollisionBox(cn.box,I.get("icon-ignore-placement"),b.bucketInstanceId,_r,me.ID),Un&&(dt&&this.collisionIndex.insertCollisionCircles(Un.circles,I.get("text-ignore-placement"),b.bucketInstanceId,dr,me.ID),g)){const jr=b.bucketInstanceId;let br=this.collisionCircleArrays[jr];br===void 0&&(br=this.collisionCircleArrays[jr]=new Oo);for(let rr=0;rr<Un.circles.length;rr+=4)br.circles.push(Un.circles[rr+0]),br.circles.push(Un.circles[rr+1]),br.circles.push(Un.circles[rr+2]),br.circles.push(Un.collisionDetected?1:0)}const ba=b.projection.name!=="globe";Ue=Ue&&(ba||!Dt),Ke=Ke&&(ba||!dn),this.placements[Et]=new bo(dt||Ue,Lt||Ke,vt||b.justReloaded),d.add(Et)};if(Ve){const qe=b.getSortedSymbolIndexes(this.transform.angle);for(let ht=qe.length-1;ht>=0;--ht){const et=qe[ht];At(b.symbolInstances.get(et),et,b.collisionArrays[et])}}else for(let qe=s.symbolInstanceStart;qe<s.symbolInstanceEnd;qe++)At(b.symbolInstances.get(qe),qe,b.collisionArrays[qe]);if(g&&b.bucketInstanceId in this.collisionCircleArrays){const qe=this.collisionCircleArrays[b.bucketInstanceId];l.invert(qe.invProjMatrix,A),qe.viewportMatrix=this.collisionIndex.getViewportMatrix()}b.justReloaded=!1}markUsedJustification(s,d,g,_){const{leftJustifiedTextSymbolIndex:b,centerJustifiedTextSymbolIndex:I,rightJustifiedTextSymbolIndex:A,verticalPlacedTextSymbolIndex:O,crossTileID:N}=g,B=l.getAnchorJustification(d),q=_===l.WritingMode.vertical?O:B==="left"?b:B==="center"?I:B==="right"?A:-1;b>=0&&(s.text.placedSymbolArray.get(b).crossTileID=q>=0&&b!==q?0:N),I>=0&&(s.text.placedSymbolArray.get(I).crossTileID=q>=0&&I!==q?0:N),A>=0&&(s.text.placedSymbolArray.get(A).crossTileID=q>=0&&A!==q?0:N),O>=0&&(s.text.placedSymbolArray.get(O).crossTileID=q>=0&&O!==q?0:N)}markUsedOrientation(s,d,g){const _=d===l.WritingMode.horizontal||d===l.WritingMode.horizontalOnly?d:0,b=d===l.WritingMode.vertical?d:0,{leftJustifiedTextSymbolIndex:I,centerJustifiedTextSymbolIndex:A,rightJustifiedTextSymbolIndex:O,verticalPlacedTextSymbolIndex:N}=g,B=s.text.placedSymbolArray;I>=0&&(B.get(I).placedOrientation=_),A>=0&&(B.get(A).placedOrientation=_),O>=0&&(B.get(O).placedOrientation=_),N>=0&&(B.get(N).placedOrientation=b)}commit(s){this.commitTime=s,this.zoomAtLastRecencyCheck=this.transform.zoom;const d=this.prevPlacement;let g=!1;this.prevZoomAdjustment=d?d.zoomAdjustment(this.transform.zoom):0;const _=d?d.symbolFadeChange(s):1,b=d?d.opacities:{},I=d?d.variableOffsets:{},A=d?d.placedOrientations:{};for(const O in this.placements){const N=this.placements[O],B=b[O];B?(this.opacities[O]=new xi(B,_,N.text,N.icon,null,N.clipped),g=g||N.text!==B.text.placed||N.icon!==B.icon.placed):(this.opacities[O]=new xi(null,_,N.text,N.icon,N.skipFade,N.clipped),g=g||N.text||N.icon)}for(const O in b){const N=b[O];if(!this.opacities[O]){const B=new xi(N,_,!1,!1);B.isHidden()||(this.opacities[O]=B,g=g||N.text.placed||N.icon.placed)}}for(const O in I)this.variableOffsets[O]||!this.opacities[O]||this.opacities[O].isHidden()||(this.variableOffsets[O]=I[O]);for(const O in A)this.placedOrientations[O]||!this.opacities[O]||this.opacities[O].isHidden()||(this.placedOrientations[O]=A[O]);g?this.lastPlacementChangeTime=s:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=d?d.lastPlacementChangeTime:s)}updateLayerOpacities(s,d){const g=new Set;for(const _ of d){const b=_.getBucket(s);b&&_.latestFeatureIndex&&s.id===b.layerIds[0]&&this.updateBucketOpacities(b,g,_.collisionBoxArray)}}updateBucketOpacities(s,d,g){s.hasTextData()&&s.text.opacityVertexArray.clear(),s.hasIconData()&&s.icon.opacityVertexArray.clear(),s.hasIconCollisionBoxData()&&s.iconCollisionBox.collisionVertexArray.clear(),s.hasTextCollisionBoxData()&&s.textCollisionBox.collisionVertexArray.clear();const _=s.layers[0].layout,b=!!s.layers[0].dynamicFilter(),I=new xi(null,0,!1,!1,!0),A=_.get("text-allow-overlap"),O=_.get("icon-allow-overlap"),N=_.get("text-variable-anchor"),B=_.get("text-rotation-alignment")==="map",q=_.get("text-pitch-alignment")==="map",re=_.get("icon-text-fit")!=="none",le=new xi(null,0,A&&(O||!s.hasIconData()||_.get("icon-optional")),O&&(A||!s.hasTextData()||_.get("text-optional")),!0);!s.collisionArrays&&g&&(s.hasIconCollisionBoxData()||s.hasTextCollisionBoxData())&&s.deserializeCollisionBoxes(g);const he=(me,K,se)=>{for(let xe=0;xe<K/4;xe++)me.opacityVertexArray.emplaceBack(se)};let ce=0;for(let me=0;me<s.symbolInstances.length;me++){const K=s.symbolInstances.get(me),{numHorizontalGlyphVertices:se,numVerticalGlyphVertices:xe,crossTileID:be,numIconVertices:Re}=K,ze=d.has(be);let Oe=this.opacities[be];ze?Oe=I:Oe||(Oe=le,this.opacities[be]=Oe),d.add(be);const Ve=se>0||xe>0,Ue=Re>0,Ke=this.placedOrientations[be],At=Ke===l.WritingMode.vertical,qe=Ke===l.WritingMode.horizontal||Ke===l.WritingMode.horizontalOnly;if(!Ve&&!Ue||Oe.isHidden()||ce++,Ve){const ht=va(Oe.text);he(s.text,se,At?Dr:ht),he(s.text,xe,qe?Dr:ht);const et=Oe.text.isHidden(),{leftJustifiedTextSymbolIndex:Et,centerJustifiedTextSymbolIndex:Xe,rightJustifiedTextSymbolIndex:dt,verticalPlacedTextSymbolIndex:Lt}=K,vt=s.text.placedSymbolArray,Dt=et||At?1:0;Et>=0&&(vt.get(Et).hidden=Dt),Xe>=0&&(vt.get(Xe).hidden=Dt),dt>=0&&(vt.get(dt).hidden=Dt),Lt>=0&&(vt.get(Lt).hidden=et||qe?1:0);const dn=this.variableOffsets[be];dn&&this.markUsedJustification(s,dn.anchor,K,Ke);const Rn=this.placedOrientations[be];Rn&&(this.markUsedJustification(s,"left",K,Rn),this.markUsedOrientation(s,Rn,K))}if(Ue){const ht=va(Oe.icon),{placedIconSymbolIndex:et,verticalPlacedIconSymbolIndex:Et}=K,Xe=s.icon.placedSymbolArray,dt=Oe.icon.isHidden()?1:0;et>=0&&(he(s.icon,Re,At?Dr:ht),Xe.get(et).hidden=dt),Et>=0&&(he(s.icon,K.numVerticalIconVertices,qe?Dr:ht),Xe.get(Et).hidden=dt)}if(s.hasIconCollisionBoxData()||s.hasTextCollisionBoxData()){const ht=s.collisionArrays[me];if(ht){let et=new l.Point(0,0),Et=!0;if(ht.textBox||ht.verticalTextBox){if(N){const dt=this.variableOffsets[be];dt?(et=Ko(dt.anchor,dt.width,dt.height,dt.textOffset,dt.textScale),B&&et._rotate(q?this.transform.angle:-this.transform.angle)):Et=!1}b&&(Et=!Oe.clipped),ht.textBox&&ga(s.textCollisionBox.collisionVertexArray,Oe.text.placed,!Et||At,et.x,et.y),ht.verticalTextBox&&ga(s.textCollisionBox.collisionVertexArray,Oe.text.placed,!Et||qe,et.x,et.y)}const Xe=Et&&!!(!qe&&ht.verticalIconBox);ht.iconBox&&ga(s.iconCollisionBox.collisionVertexArray,Oe.icon.placed,Xe,re?et.x:0,re?et.y:0),ht.verticalIconBox&&ga(s.iconCollisionBox.collisionVertexArray,Oe.icon.placed,!Xe,re?et.x:0,re?et.y:0)}}}if(s.fullyClipped=ce===0,s.sortFeatures(this.transform.angle),this.retainedQueryData[s.bucketInstanceId]&&(this.retainedQueryData[s.bucketInstanceId].featureSortOrder=s.featureSortOrder),s.hasTextData()&&s.text.opacityVertexBuffer&&s.text.opacityVertexBuffer.updateData(s.text.opacityVertexArray),s.hasIconData()&&s.icon.opacityVertexBuffer&&s.icon.opacityVertexBuffer.updateData(s.icon.opacityVertexArray),s.hasIconCollisionBoxData()&&s.iconCollisionBox.collisionVertexBuffer&&s.iconCollisionBox.collisionVertexBuffer.updateData(s.iconCollisionBox.collisionVertexArray),s.hasTextCollisionBoxData()&&s.textCollisionBox.collisionVertexBuffer&&s.textCollisionBox.collisionVertexBuffer.updateData(s.textCollisionBox.collisionVertexArray),s.bucketInstanceId in this.collisionCircleArrays){const me=this.collisionCircleArrays[s.bucketInstanceId];s.placementInvProjMatrix=me.invProjMatrix,s.placementViewportMatrix=me.viewportMatrix,s.collisionCircleArray=me.circles,delete this.collisionCircleArrays[s.bucketInstanceId]}}symbolFadeChange(s){return this.fadeDuration===0?1:(s-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(s){return Math.max(0,(this.transform.zoom-s)/1.5)}hasTransitions(s){return this.stale||s-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(s,d){const g=this.zoomAtLastRecencyCheck===d?1-this.zoomAdjustment(d):1;return this.zoomAtLastRecencyCheck=d,this.commitTime+this.fadeDuration*g>s}setStale(){this.stale=!0}}function ga(p,s,d,g,_){p.emplaceBack(s?1:0,d?1:0,g||0,_||0),p.emplaceBack(s?1:0,d?1:0,g||0,_||0),p.emplaceBack(s?1:0,d?1:0,g||0,_||0),p.emplaceBack(s?1:0,d?1:0,g||0,_||0)}const Ei=Math.pow(2,25),Nr=Math.pow(2,24),hn=Math.pow(2,17),$n=Math.pow(2,16),Yn=Math.pow(2,9),hr=Math.pow(2,8),Wr=Math.pow(2,1);function va(p){if(p.opacity===0&&!p.placed)return 0;if(p.opacity===1&&p.placed)return 4294967295;const s=p.placed?1:0,d=Math.floor(127*p.opacity);return d*Ei+s*Nr+d*hn+s*$n+d*Yn+s*hr+d*Wr+s}const Dr=0;class xs{constructor(s){this._sortAcrossTiles=s.layout.get("symbol-z-order")!=="viewport-y"&&s.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs=new Set,this._bucketParts=[]}continuePlacement(s,d,g,_,b){const I=this._bucketParts;for(;this._currentTileIndex<s.length;)if(d.getBucketParts(I,_,s[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,b())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,I.sort((A,O)=>A.sortKey-O.sortKey));this._currentPartIndex<I.length;){const A=I[this._currentPartIndex];if(d.placeLayerBucketPart(A,this._seenCrossTileIDs,g,A.symbolInstanceStart===0),this._currentPartIndex++,b())return!0}return!1}}class bs{constructor(s,d,g,_,b,I,A,O){this.placement=new _s(s,b,I,A,O),this._currentPlacementIndex=d.length-1,this._forceFullPlacement=g,this._showCollisionBoxes=_,this._done=!1}isDone(){return this._done}continuePlacement(s,d,g){const _=l.exported.now(),b=()=>{const I=l.exported.now()-_;return!this._forceFullPlacement&&I>2};for(;this._currentPlacementIndex>=0;){const I=d[s[this._currentPlacementIndex]],A=this.placement.collisionIndex.transform.zoom;if(I.type==="symbol"&&(!I.minzoom||I.minzoom<=A)&&(!I.maxzoom||I.maxzoom>A)){if(this._inProgressLayer||(this._inProgressLayer=new xs(I)),this._inProgressLayer.continuePlacement(g[I.source],this.placement,this._showCollisionBoxes,I,b))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(s){return this.placement.commit(s),this.placement}}const Us=512/l.EXTENT/2;class zi{constructor(s,d,g){this.tileID=s,this.bucketInstanceId=g,this.index=new l.KDBush(d.length,16,Int32Array),this.keys=[],this.crossTileIDs=[];const _=s.canonical.x*l.EXTENT,b=s.canonical.y*l.EXTENT;for(let I=0;I<d.length;I++){const{key:A,crossTileID:O,tileAnchorX:N,tileAnchorY:B}=d.get(I),q=Math.floor((_+N)*Us),re=Math.floor((b+B)*Us);this.index.add(q,re),this.keys.push(A),this.crossTileIDs.push(O)}this.index.finish()}findMatches(s,d,g){const _=this.tileID.canonical.z<d.canonical.z?1:Math.pow(2,this.tileID.canonical.z-d.canonical.z),b=Us/Math.pow(2,d.canonical.z-this.tileID.canonical.z),I=d.canonical.x*l.EXTENT,A=d.canonical.y*l.EXTENT;for(let O=0;O<s.length;O++){const N=s.get(O);if(N.crossTileID)continue;const{key:B,tileAnchorX:q,tileAnchorY:re}=N,le=Math.floor((I+q)*b),he=Math.floor((A+re)*b),ce=this.index.range(le-_,he-_,le+_,he+_);for(const me of ce){const K=this.crossTileIDs[me];if(this.keys[me]===B&&!g.has(K)){g.add(K),N.crossTileID=K;break}}}}}class Lh{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Dh{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(s){const d=Math.round((s-this.lng)/360);if(d!==0)for(const g in this.indexes){const _=this.indexes[g],b={};for(const I in _){const A=_[I];A.tileID=A.tileID.unwrapTo(A.tileID.wrap+d),b[A.tileID.key]=A}this.indexes[g]=b}this.lng=s}addBucket(s,d,g){if(this.indexes[s.overscaledZ]&&this.indexes[s.overscaledZ][s.key]){if(this.indexes[s.overscaledZ][s.key].bucketInstanceId===d.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(s.overscaledZ,this.indexes[s.overscaledZ][s.key])}for(let b=0;b<d.symbolInstances.length;b++)d.symbolInstances.get(b).crossTileID=0;this.usedCrossTileIDs[s.overscaledZ]||(this.usedCrossTileIDs[s.overscaledZ]=new Set);const _=this.usedCrossTileIDs[s.overscaledZ];for(const b in this.indexes){const I=this.indexes[b];if(Number(b)>s.overscaledZ)for(const A in I){const O=I[A];O.tileID.isChildOf(s)&&O.findMatches(d.symbolInstances,s,_)}else{const A=I[s.scaledTo(Number(b)).key];A&&A.findMatches(d.symbolInstances,s,_)}}for(let b=0;b<d.symbolInstances.length;b++){const I=d.symbolInstances.get(b);I.crossTileID||(I.crossTileID=g.generate(),_.add(I.crossTileID))}return this.indexes[s.overscaledZ]===void 0&&(this.indexes[s.overscaledZ]={}),this.indexes[s.overscaledZ][s.key]=new zi(s,d.symbolInstances,d.bucketInstanceId),!0}removeBucketCrossTileIDs(s,d){for(const g of d.crossTileIDs)this.usedCrossTileIDs[s].delete(g)}removeStaleBuckets(s){let d=!1;for(const g in this.indexes){const _=this.indexes[g];for(const b in _)s[_[b].bucketInstanceId]||(this.removeBucketCrossTileIDs(g,_[b]),delete _[b],d=!0)}return d}}class Ua{constructor(){this.layerIndexes={},this.crossTileIDs=new Lh,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(s,d,g,_){let b=this.layerIndexes[s.id];b===void 0&&(b=this.layerIndexes[s.id]=new Dh);let I=!1;const A={};_.name!=="globe"&&b.handleWrapJump(g);for(const O of d){const N=O.getBucket(s);N&&s.id===N.layerIds[0]&&(N.bucketInstanceId||(N.bucketInstanceId=++this.maxBucketInstanceId),b.addBucket(O.tileID,N,this.crossTileIDs)&&(I=!0),A[N.bucketInstanceId]=!0)}return b.removeStaleBuckets(A)&&(I=!0),I}pruneUnusedLayers(s){const d={};s.forEach(g=>{d[g]=!0});for(const g in this.layerIndexes)d[g]||delete this.layerIndexes[g]}}const ws=(p,s)=>l.emitValidationErrors(p,s&&s.filter(d=>d.identifier!=="source.canvas")),zu=l.pick(Cn,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),Z0=l.pick(Cn,["setCenter","setZoom","setBearing","setPitch"]),kh={version:8,layers:[],sources:{}},El={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class ya extends l.Evented{constructor(s,d={}){super(),this.map=s,this.dispatcher=new Be(En(),this),this.imageManager=new ue,this.imageManager.setEventedParent(this),this.glyphManager=new l.GlyphManager(s._requestManager,d.localFontFamily?l.LocalGlyphMode.all:d.localIdeographFontFamily?l.LocalGlyphMode.ideographs:l.LocalGlyphMode.none,d.localFontFamily||d.localIdeographFontFamily),this.crossTileSymbolIndex=new Ua,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",l.getReferrer());const g=this;this._rtlTextPluginCallback=ya.registerForPluginStateChange(_=>{g.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:_.pluginStatus,pluginURL:_.pluginURL},(b,I)=>{if(l.triggerPluginCompletionEvent(b),I&&I.every(A=>A))for(const A in g._sourceCaches){const O=g._sourceCaches[A],N=O.getSource().type;N!=="vector"&&N!=="geojson"||O.reload()}})}),this.on("data",_=>{if(_.dataType!=="source"||_.sourceDataType!=="metadata")return;const b=this.getSource(_.sourceId);if(b&&b.vectorLayerIds)for(const I in this._layers){const A=this._layers[I];A.source===b.id&&this._validateLayer(A)}})}loadURL(s,d={}){this.fire(new l.Event("dataloading",{dataType:"style"}));const g=typeof d.validate=="boolean"?d.validate:!l.isMapboxURL(s);s=this.map._requestManager.normalizeStyleURL(s,d.accessToken);const _=this.map._requestManager.transformRequest(s,l.ResourceType.Style);this._request=l.getJSON(_,(b,I)=>{this._request=null,b?this.fire(new l.ErrorEvent(b)):I&&this._load(I,g)})}loadJSON(s,d={}){this.fire(new l.Event("dataloading",{dataType:"style"})),this._request=l.exported.frame(()=>{this._request=null,this._load(s,d.validate!==!1)})}loadEmpty(){this.fire(new l.Event("dataloading",{dataType:"style"})),this._load(kh,!1)}_updateLayerCount(s,d){const g=d?1:-1;s.is3D()&&(this._num3DLayers+=g),s.type==="circle"&&(this._numCircleLayers+=g),s.type==="symbol"&&(this._numSymbolLayers+=g)}_load(s,d){if(d&&ws(this,l.validateStyle(s)))return;this._loaded=!0,this.stylesheet=l.clone$1(s),this._updateMapProjection();for(const _ in s.sources)this.addSource(_,s.sources[_],{validate:!1});this._changed=!1,s.sprite?this._loadSprite(s.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(s.glyphs);const g=ri(this.stylesheet.layers);this._order=g.map(_=>_.id),this._layers={},this._serializedLayers={};for(const _ of g){const b=l.createStyleLayer(_);b.setEventedParent(this,{layer:{id:b.id}}),this._layers[b.id]=b,this._serializedLayers[b.id]=b.serialize(),this._updateLayerCount(b,!0)}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new fe(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new l.Event("data",{dataType:"style"})),this.fire(new l.Event("style.load"))}terrainSetForDrapingOnly(){return!!this.terrain&&this.terrain.drapeRenderMode===0}setProjection(s){s?this.stylesheet.projection=s:delete this.stylesheet.projection,this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}_updateMapProjection(){this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.stylesheet.projection)}_loadSprite(s){this._spriteRequest=function(d,g,_){let b,I,A;const O=l.exported.devicePixelRatio>1?"@2x":"";let N=l.getJSON(g.transformRequest(g.normalizeSpriteURL(d,O,".json"),l.ResourceType.SpriteJSON),(re,le)=>{N=null,A||(A=re,b=le,q())}),B=l.getImage(g.transformRequest(g.normalizeSpriteURL(d,O,".png"),l.ResourceType.SpriteImage),(re,le)=>{B=null,A||(A=re,I=le,q())});function q(){if(A)_(A);else if(b&&I){const re=l.exported.getImageData(I),le={};for(const he in b){const{width:ce,height:me,x:K,y:se,sdf:xe,pixelRatio:be,stretchX:Re,stretchY:ze,content:Oe}=b[he],Ve=new l.RGBAImage({width:ce,height:me});l.RGBAImage.copy(re,Ve,{x:K,y:se},{x:0,y:0},{width:ce,height:me}),le[he]={data:Ve,pixelRatio:be,sdf:xe,stretchX:Re,stretchY:ze,content:Oe}}_(null,le)}}return{cancel(){N&&(N.cancel(),N=null),B&&(B.cancel(),B=null)}}}(s,this.map._requestManager,(d,g)=>{if(this._spriteRequest=null,d)this.fire(new l.ErrorEvent(d));else if(g)for(const _ in g)this.imageManager.addImage(_,g[_]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new l.Event("data",{dataType:"style"}))})}_validateLayer(s){const d=this.getSource(s.source);if(!d)return;const g=s.sourceLayer;g&&(d.type==="geojson"||d.vectorLayerIds&&d.vectorLayerIds.indexOf(g)===-1)&&this.fire(new l.ErrorEvent(new Error(`Source layer "${g}" does not exist on source "${d.id}" as specified by style layer "${s.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const s in this._sourceCaches)if(!this._sourceCaches[s].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(s){const d=[];for(const g of s){const _=this._layers[g];_.type!=="custom"&&d.push(_.serialize())}return d}hasTransitions(){if(this.light&&this.light.hasTransition()||this.fog&&this.fog.hasTransition())return!0;for(const s in this._sourceCaches)if(this._sourceCaches[s].hasTransition())return!0;for(const s in this._layers)if(this._layers[s].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(s){return!!this.terrain&&(typeof s.isLayerDraped=="function"?s.isLayerDraped():El[s.type])}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(s){if(!this._loaded)return;const d=this._changed;if(this._changed){const _=Object.keys(this._updatedLayers),b=Object.keys(this._removedLayers);(_.length||b.length)&&this._updateWorkerLayers(_,b);for(const I in this._updatedSources){const A=this._updatedSources[I];A==="reload"?this._reloadSource(I):A==="clear"&&this._clearSource(I)}this._updateTilesForChangedImages();for(const I in this._updatedPaintProps)this._layers[I].updateTransitions(s);this.light.updateTransitions(s),this.fog&&this.fog.updateTransitions(s),this._resetUpdates()}const g={};for(const _ in this._sourceCaches){const b=this._sourceCaches[_];g[_]=b.used,b.used=!1}for(const _ of this._order){const b=this._layers[_];if(b.recalculate(s,this._availableImages),!b.isHidden(s.zoom)){const A=this._getLayerSourceCache(b);A&&(A.used=!0)}const I=this.map.painter;if(I){const A=b.getProgramIds();if(!A)continue;const O=b.getProgramConfiguration(s.zoom);for(const N of A)I.useProgram(N,O)}}for(const _ in g){const b=this._sourceCaches[_];g[_]!==b.used&&b.getSource().fire(new l.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:b.getSource().id}))}this.light.recalculate(s),this.terrain&&this.terrain.recalculate(s),this.fog&&this.fog.recalculate(s),this.z=s.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),d&&this.fire(new l.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const s=Object.keys(this._changedImages);if(s.length){for(const d in this._sourceCaches)this._sourceCaches[d].reloadTilesForDependencies(["icons","patterns"],s);this._changedImages={}}}_updateWorkerLayers(s,d){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(s),removedIds:d})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(s){if(this._checkLoaded(),ws(this,l.validateStyle(s)))return!1;(s=l.clone$1(s)).layers=ri(s.layers);const d=function(_,b){if(!_)return[{command:Cn.setStyle,args:[b]}];let I=[];try{if(!w(_.version,b.version))return[{command:Cn.setStyle,args:[b]}];w(_.center,b.center)||I.push({command:Cn.setCenter,args:[b.center]}),w(_.zoom,b.zoom)||I.push({command:Cn.setZoom,args:[b.zoom]}),w(_.bearing,b.bearing)||I.push({command:Cn.setBearing,args:[b.bearing]}),w(_.pitch,b.pitch)||I.push({command:Cn.setPitch,args:[b.pitch]}),w(_.sprite,b.sprite)||I.push({command:Cn.setSprite,args:[b.sprite]}),w(_.glyphs,b.glyphs)||I.push({command:Cn.setGlyphs,args:[b.glyphs]}),w(_.transition,b.transition)||I.push({command:Cn.setTransition,args:[b.transition]}),w(_.light,b.light)||I.push({command:Cn.setLight,args:[b.light]}),w(_.fog,b.fog)||I.push({command:Cn.setFog,args:[b.fog]}),w(_.projection,b.projection)||I.push({command:Cn.setProjection,args:[b.projection]});const A={},O=[];(function(q,re,le,he){let ce;for(ce in re=re||{},q=q||{})q.hasOwnProperty(ce)&&(re.hasOwnProperty(ce)||xo(ce,le,he));for(ce in re){if(!re.hasOwnProperty(ce))continue;const me=re[ce];q.hasOwnProperty(ce)?w(q[ce],me)||(q[ce].type==="geojson"&&me.type==="geojson"&&io(q,re,ce)?le.push({command:Cn.setGeoJSONSourceData,args:[ce,me.data]}):Po(ce,re,le,he)):Ni(ce,re,le)}})(_.sources,b.sources,O,A);const N=[];_.layers&&_.layers.forEach(q=>{q.source&&A[q.source]?I.push({command:Cn.removeLayer,args:[q.id]}):N.push(q)});let B=_.terrain;B&&A[B.source]&&(I.push({command:Cn.setTerrain,args:[void 0]}),B=void 0),I=I.concat(O),w(B,b.terrain)||I.push({command:Cn.setTerrain,args:[b.terrain]}),function(q,re,le){re=re||[];const he=(q=q||[]).map(ji),ce=re.map(ji),me=q.reduce(fa,{}),K=re.reduce(fa,{}),se=he.slice(),xe=Object.create(null);let be,Re,ze,Oe,Ve,Ue,Ke;for(be=0,Re=0;be<he.length;be++)ze=he[be],K.hasOwnProperty(ze)?Re++:(le.push({command:Cn.removeLayer,args:[ze]}),se.splice(se.indexOf(ze,Re),1));for(be=0,Re=0;be<ce.length;be++)ze=ce[ce.length-1-be],se[se.length-1-be]!==ze&&(me.hasOwnProperty(ze)?(le.push({command:Cn.removeLayer,args:[ze]}),se.splice(se.lastIndexOf(ze,se.length-Re),1)):Re++,Ue=se[se.length-be],le.push({command:Cn.addLayer,args:[K[ze],Ue]}),se.splice(se.length-be,0,ze),xe[ze]=!0);for(be=0;be<ce.length;be++)if(ze=ce[be],Oe=me[ze],Ve=K[ze],!xe[ze]&&!w(Oe,Ve))if(w(Oe.source,Ve.source)&&w(Oe["source-layer"],Ve["source-layer"])&&w(Oe.type,Ve.type)){for(Ke in Hr(Oe.layout,Ve.layout,le,ze,null,Cn.setLayoutProperty),Hr(Oe.paint,Ve.paint,le,ze,null,Cn.setPaintProperty),w(Oe.filter,Ve.filter)||le.push({command:Cn.setFilter,args:[ze,Ve.filter]}),w(Oe.minzoom,Ve.minzoom)&&w(Oe.maxzoom,Ve.maxzoom)||le.push({command:Cn.setLayerZoomRange,args:[ze,Ve.minzoom,Ve.maxzoom]}),Oe)Oe.hasOwnProperty(Ke)&&Ke!=="layout"&&Ke!=="paint"&&Ke!=="filter"&&Ke!=="metadata"&&Ke!=="minzoom"&&Ke!=="maxzoom"&&(Ke.indexOf("paint.")===0?Hr(Oe[Ke],Ve[Ke],le,ze,Ke.slice(6),Cn.setPaintProperty):w(Oe[Ke],Ve[Ke])||le.push({command:Cn.setLayerProperty,args:[ze,Ke,Ve[Ke]]}));for(Ke in Ve)Ve.hasOwnProperty(Ke)&&!Oe.hasOwnProperty(Ke)&&Ke!=="layout"&&Ke!=="paint"&&Ke!=="filter"&&Ke!=="metadata"&&Ke!=="minzoom"&&Ke!=="maxzoom"&&(Ke.indexOf("paint.")===0?Hr(Oe[Ke],Ve[Ke],le,ze,Ke.slice(6),Cn.setPaintProperty):w(Oe[Ke],Ve[Ke])||le.push({command:Cn.setLayerProperty,args:[ze,Ke,Ve[Ke]]}))}else le.push({command:Cn.removeLayer,args:[ze]}),Ue=se[se.lastIndexOf(ze)+1],le.push({command:Cn.addLayer,args:[Ve,Ue]})}(N,b.layers,I)}catch(A){console.warn("Unable to compute style diff:",A),I=[{command:Cn.setStyle,args:[b]}]}return I}(this.serialize(),s).filter(_=>!(_.command in Z0));if(d.length===0)return!1;const g=d.filter(_=>!(_.command in zu));if(g.length>0)throw new Error(`Unimplemented: ${g.map(_=>_.command).join(", ")}.`);return d.forEach(_=>{_.command!=="setTransition"&&_.command!=="setProjection"&&this[_.command].apply(this,_.args)}),this.stylesheet=s,this._updateMapProjection(),!0}addImage(s,d){return this.getImage(s)?this.fire(new l.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(s,d),this._afterImageUpdated(s),this)}updateImage(s,d){this.imageManager.updateImage(s,d)}getImage(s){return this.imageManager.getImage(s)}removeImage(s){return this.getImage(s)?(this.imageManager.removeImage(s),this._afterImageUpdated(s),this):this.fire(new l.ErrorEvent(new Error("No image with this name exists.")))}_afterImageUpdated(s){this._availableImages=this.imageManager.listImages(),this._changedImages[s]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addSource(s,d,g={}){if(this._checkLoaded(),this.getSource(s)!==void 0)throw new Error("There is already a source with this ID");if(!d.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(d).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(d.type)>=0&&this._validate(l.validateSource,`sources.${s}`,d,null,g))return;this.map&&this.map._collectResourceTiming&&(d.collectResourceTiming=!0);const _=un(s,d,this.dispatcher,this);_.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(s),source:_.serialize(),sourceId:s}));const b=I=>{const A=(I?"symbol:":"other:")+s,O=this._sourceCaches[A]=new l.SourceCache(A,_,I);(I?this._symbolSourceCaches:this._otherSourceCaches)[s]=O,O.style=this,O.onAdd(this.map)};b(!1),d.type!=="vector"&&d.type!=="geojson"||b(!0),_.onAdd&&_.onAdd(this.map),this._changed=!0}removeSource(s){this._checkLoaded();const d=this.getSource(s);if(!d)throw new Error("There is no source with this ID");for(const _ in this._layers)if(this._layers[_].source===s)return this.fire(new l.ErrorEvent(new Error(`Source "${s}" cannot be removed while layer "${_}" is using it.`)));if(this.terrain&&this.terrain.get().source===s)return this.fire(new l.ErrorEvent(new Error(`Source "${s}" cannot be removed while terrain is using it.`)));const g=this._getSourceCaches(s);for(const _ of g)delete this._sourceCaches[_.id],delete this._updatedSources[_.id],_.fire(new l.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:_.getSource().id})),_.setEventedParent(null),_.clearTiles();return delete this._otherSourceCaches[s],delete this._symbolSourceCaches[s],d.setEventedParent(null),d.onRemove&&d.onRemove(this.map),this._changed=!0,this}setGeoJSONSourceData(s,d){this._checkLoaded(),this.getSource(s).setData(d),this._changed=!0}getSource(s){const d=this._getSourceCache(s);return d&&d.getSource()}_getSources(){const s=[];for(const d in this._otherSourceCaches){const g=this._getSourceCache(d);g&&s.push(g.getSource())}return s}addLayer(s,d,g={}){this._checkLoaded();const _=s.id;if(this.getLayer(_))return void this.fire(new l.ErrorEvent(new Error(`Layer with id "${_}" already exists on this map`)));let b;if(s.type==="custom"){if(ws(this,l.validateCustomStyleLayer(s)))return;b=l.createStyleLayer(s)}else{if(typeof s.source=="object"&&(this.addSource(_,s.source),s=l.clone$1(s),s=l.extend(s,{source:_})),this._validate(l.validateLayer,`layers.${_}`,s,{arrayIndex:-1},g))return;b=l.createStyleLayer(s),this._validateLayer(b),b.setEventedParent(this,{layer:{id:_}}),this._serializedLayers[b.id]=b.serialize(),this._updateLayerCount(b,!0)}const I=d?this._order.indexOf(d):this._order.length;if(d&&I===-1)return void this.fire(new l.ErrorEvent(new Error(`Layer with id "${d}" does not exist on this map.`)));this._order.splice(I,0,_),this._layerOrderChanged=!0,this._layers[_]=b;const A=this._getLayerSourceCache(b);if(this._removedLayers[_]&&b.source&&A&&b.type!=="custom"){const O=this._removedLayers[_];delete this._removedLayers[_],O.type!==b.type?this._updatedSources[b.source]="clear":(this._updatedSources[b.source]="reload",A.pause())}this._updateLayer(b),b.onAdd&&b.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(s,d){if(this._checkLoaded(),this._changed=!0,!this._layers[s])return void this.fire(new l.ErrorEvent(new Error(`The layer '${s}' does not exist in the map's style and cannot be moved.`)));if(s===d)return;const g=this._order.indexOf(s);this._order.splice(g,1);const _=d?this._order.indexOf(d):this._order.length;d&&_===-1?this.fire(new l.ErrorEvent(new Error(`Layer with id "${d}" does not exist on this map.`))):(this._order.splice(_,0,s),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(s){this._checkLoaded();const d=this._layers[s];if(!d)return void this.fire(new l.ErrorEvent(new Error(`The layer '${s}' does not exist in the map's style and cannot be removed.`)));d.setEventedParent(null),this._updateLayerCount(d,!1);const g=this._order.indexOf(s);this._order.splice(g,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[s]=d,delete this._layers[s],delete this._serializedLayers[s],delete this._updatedLayers[s],delete this._updatedPaintProps[s],d.onRemove&&d.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(s){return this._layers[s]}hasLayer(s){return s in this._layers}hasLayerType(s){for(const d in this._layers)if(this._layers[d].type===s)return!0;return!1}setLayerZoomRange(s,d,g){this._checkLoaded();const _=this.getLayer(s);_?_.minzoom===d&&_.maxzoom===g||(d!=null&&(_.minzoom=d),g!=null&&(_.maxzoom=g),this._updateLayer(_)):this.fire(new l.ErrorEvent(new Error(`The layer '${s}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(s,d,g={}){this._checkLoaded();const _=this.getLayer(s);if(_){if(!w(_.filter,d))return d==null?(_.filter=void 0,void this._updateLayer(_)):void(this._validate(l.validateFilter,`layers.${_.id}.filter`,d,{layerType:_.type},g)||(_.filter=l.clone$1(d),this._updateLayer(_)))}else this.fire(new l.ErrorEvent(new Error(`The layer '${s}' does not exist in the map's style and cannot be filtered.`)))}getFilter(s){const d=this.getLayer(s);return d&&l.clone$1(d.filter)}setLayoutProperty(s,d,g,_={}){this._checkLoaded();const b=this.getLayer(s);b?w(b.getLayoutProperty(d),g)||(b.setLayoutProperty(d,g,_),this._updateLayer(b)):this.fire(new l.ErrorEvent(new Error(`The layer '${s}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(s,d){const g=this.getLayer(s);if(g)return g.getLayoutProperty(d);this.fire(new l.ErrorEvent(new Error(`The layer '${s}' does not exist in the map's style.`)))}setPaintProperty(s,d,g,_={}){this._checkLoaded();const b=this.getLayer(s);b?w(b.getPaintProperty(d),g)||(b.setPaintProperty(d,g,_)&&this._updateLayer(b),this._changed=!0,this._updatedPaintProps[s]=!0):this.fire(new l.ErrorEvent(new Error(`The layer '${s}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(s,d){const g=this.getLayer(s);return g&&g.getPaintProperty(d)}setFeatureState(s,d){this._checkLoaded();const g=s.source,_=s.sourceLayer,b=this.getSource(g);if(!b)return void this.fire(new l.ErrorEvent(new Error(`The source '${g}' does not exist in the map's style.`)));const I=b.type;if(I==="geojson"&&_)return void this.fire(new l.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if(I==="vector"&&!_)return void this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));s.id===void 0&&this.fire(new l.ErrorEvent(new Error("The feature id parameter must be provided.")));const A=this._getSourceCaches(g);for(const O of A)O.setFeatureState(_,s.id,d)}removeFeatureState(s,d){this._checkLoaded();const g=s.source,_=this.getSource(g);if(!_)return void this.fire(new l.ErrorEvent(new Error(`The source '${g}' does not exist in the map's style.`)));const b=_.type,I=b==="vector"?s.sourceLayer:void 0;if(b==="vector"&&!I)return void this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(d&&typeof s.id!="string"&&typeof s.id!="number")return void this.fire(new l.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const A=this._getSourceCaches(g);for(const O of A)O.removeFeatureState(I,s.id,d)}getFeatureState(s){this._checkLoaded();const d=s.source,g=s.sourceLayer,_=this.getSource(d);if(_){if(_.type!=="vector"||g)return s.id===void 0&&this.fire(new l.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(d)[0].getFeatureState(g,s.id);this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new l.ErrorEvent(new Error(`The source '${d}' does not exist in the map's style.`)))}getTransition(){return l.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const s={};for(const d in this._sourceCaches){const g=this._sourceCaches[d].getSource();s[g.id]||(s[g.id]=g.serialize())}return l.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.getTerrain()||void 0,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:s,layers:this._serializeLayers(this._order)},d=>d!==void 0)}_updateLayer(s){this._updatedLayers[s.id]=!0;const d=this._getLayerSourceCache(s);s.source&&!this._updatedSources[s.source]&&d&&d.getSource().type!=="raster"&&(this._updatedSources[s.source]="reload",d.pause()),this._changed=!0,s.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(s){const d=I=>this._layers[I].type==="fill-extrusion",g={},_=[];for(let I=this._order.length-1;I>=0;I--){const A=this._order[I];if(d(A)){g[A]=I;for(const O of s){const N=O[A];if(N)for(const B of N)_.push(B)}}}_.sort((I,A)=>A.intersectionZ-I.intersectionZ);const b=[];for(let I=this._order.length-1;I>=0;I--){const A=this._order[I];if(d(A))for(let O=_.length-1;O>=0;O--){const N=_[O].feature;if(g[N.layer.id]<I)break;b.push(N),_.pop()}else for(const O of s){const N=O[A];if(N)for(const B of N)b.push(B.feature)}}return b}queryRenderedFeatures(s,d,g){d&&d.filter&&this._validate(l.validateFilter,"queryRenderedFeatures.filter",d.filter,null,d);const _={};if(d&&d.layers){if(!Array.isArray(d.layers))return this.fire(new l.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const O of d.layers){const N=this._layers[O];if(!N)return this.fire(new l.ErrorEvent(new Error(`The layer '${O}' does not exist in the map's style and cannot be queried for features.`))),[];_[N.source]=!0}}const b=[];d.availableImages=this._availableImages;const I=d&&d.layers?d.layers.some(O=>{const N=this.getLayer(O);return N&&N.is3D()}):this.has3DLayers(),A=Qe.createFromScreenPoints(s,g);for(const O in this._sourceCaches){const N=this._sourceCaches[O].getSource().id;d.layers&&!_[N]||b.push(Gn(this._sourceCaches[O],this._layers,this._serializedLayers,A,d,g,I,!!this.map._showQueryGeometry))}return this.placement&&b.push(function(O,N,B,q,re,le,he){const ce={},me=le.queryRenderedSymbols(q),K=[];for(const se of Object.keys(me).map(Number))K.push(he[se]);K.sort(er);for(const se of K){const xe=se.featureIndex.lookupSymbolFeatures(me[se.bucketInstanceId],N,se.bucketIndex,se.sourceLayerIndex,re.filter,re.layers,re.availableImages,O);for(const be in xe){const Re=ce[be]=ce[be]||[],ze=xe[be];ze.sort((Oe,Ve)=>{const Ue=se.featureSortOrder;if(Ue){const Ke=Ue.indexOf(Oe.featureIndex);return Ue.indexOf(Ve.featureIndex)-Ke}return Ve.featureIndex-Oe.featureIndex});for(const Oe of ze)Re.push(Oe)}}for(const se in ce)ce[se].forEach(xe=>{const be=xe.feature,Re=B(O[se]);if(!Re)return;const ze=Re.getFeatureState(be.layer["source-layer"],be.id);be.source=be.layer.source,be.layer["source-layer"]&&(be.sourceLayer=be.layer["source-layer"]),be.state=ze});return ce}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),A.screenGeometry,d,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(b)}querySourceFeatures(s,d){d&&d.filter&&this._validate(l.validateFilter,"querySourceFeatures.filter",d.filter,null,d);const g=this._getSourceCaches(s);let _=[];for(const b of g)_=_.concat(On(b,d));return _}addSourceType(s,d,g){return ya.getSourceType(s)?g(new Error(`A source type called "${s}" already exists.`)):(ya.setSourceType(s,d),d.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:s,url:d.workerSourceURL},g):g(null,null))}getLight(){return this.light.getLight()}setLight(s,d={}){this._checkLoaded();const g=this.light.getLight();let _=!1;for(const I in s)if(!w(s[I],g[I])){_=!0;break}if(!_)return;const b=this._setTransitionParameters({duration:300,delay:0});this.light.setLight(s,d),this.light.updateTransitions(b)}getTerrain(){return this.terrain&&this.terrain.drapeRenderMode===1?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(s,d=1){if(this._checkLoaded(),!s)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);let g=s;if(d===1){if(typeof g.source=="object"){const _="terrain-dem-src";this.addSource(_,g.source),g=l.clone$1(g),g=l.extend(g,{source:_})}if(this._validate(l.validateTerrain,"terrain",g))return}if(!this.terrain||this.terrain&&d!==this.terrain.drapeRenderMode){if(!g)return;this._createTerrain(g,d)}else{const _=this.terrain,b=_.get();for(const I of Object.keys(l.spec.terrain))!g.hasOwnProperty(I)&&l.spec.terrain[I].default&&(g[I]=l.spec.terrain[I].default);for(const I in g)if(!w(g[I],b[I])){_.set(g),this.stylesheet.terrain=g;const A=this._setTransitionParameters({duration:0});_.updateTransitions(A);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(s){const d=this.fog=new He(s,this.map.transform);this.stylesheet.fog=s;const g=this._setTransitionParameters({duration:0});d.updateTransitions(g)}_updateMarkersOpacity(){this.map._markers.length!==0&&this.map._requestDomTask(()=>{for(const s of this.map._markers)s._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(s){if(this._checkLoaded(),!s)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const d=this.fog,g=d.get();Object.keys(s).length===0&&d.set(s);for(const _ in s)if(!w(s[_],g[_])){d.set(s),this.stylesheet.fog=s;const b=this._setTransitionParameters({duration:0});d.updateTransitions(b);break}}else this._createFog(s);this._markersNeedUpdate=!0}_setTransitionParameters(s){return{now:l.exported.now(),transition:l.extend(s,this.stylesheet.transition)}}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const s=this._order.filter(g=>this.isLayerDraped(this._layers[g])),d=this._order.filter(g=>!this.isLayerDraped(this._layers[g]));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...s),this._drapedFirstOrder.push(...d)}_createTerrain(s,d){const g=this.terrain=new ke(s,d);this.stylesheet.terrain=s,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();const _=this._setTransitionParameters({duration:0});g.updateTransitions(_)}_force3DLayerUpdate(){for(const s in this._layers){const d=this._layers[s];d.type==="fill-extrusion"&&this._updateLayer(d)}}_forceSymbolLayerUpdate(){for(const s in this._layers){const d=this._layers[s];d.type==="symbol"&&this._updateLayer(d)}}_validate(s,d,g,_,b={}){return(!b||b.validate!==!1)&&ws(this,s.call(l.validateStyle,l.extend({key:d,style:this.serialize(),value:g,styleSpec:l.spec},_)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),l.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const s in this._layers)this._layers[s].setEventedParent(null);for(const s in this._sourceCaches)this._sourceCaches[s].clearTiles(),this._sourceCaches[s].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(s){const d=this._getSourceCaches(s);for(const g of d)g.clearTiles()}_reloadSource(s){const d=this._getSourceCaches(s);for(const g of d)g.resume(),g.reload()}_reloadSources(){for(const s of this._getSources())s.reload&&s.reload()}_updateSources(s){for(const d in this._sourceCaches)this._sourceCaches[d].update(s)}_generateCollisionBoxes(){for(const s in this._sourceCaches){const d=this._sourceCaches[s];d.resume(),d.reload()}}_updatePlacement(s,d,g,_,b=!1){let I=!1,A=!1;const O={};for(const N of this._order){const B=this._layers[N];if(B.type!=="symbol")continue;if(!O[B.source]){const re=this._getLayerSourceCache(B);if(!re)continue;O[B.source]=re.getRenderableIds(!0).map(le=>re.getTileByID(le)).sort((le,he)=>he.tileID.overscaledZ-le.tileID.overscaledZ||(le.tileID.isLessThan(he.tileID)?-1:1))}const q=this.crossTileSymbolIndex.addLayer(B,O[B.source],s.center.lng,s.projection);I=I||q}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),b=b||this._layerOrderChanged||g===0,this._layerOrderChanged&&this.fire(new l.Event("neworder")),(b||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(l.exported.now(),s.zoom))&&(this.pauseablePlacement=new bs(s,this._order,b,d,g,_,this.placement,this.fog&&s.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,O),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(l.exported.now()),A=!0),I&&this.pauseablePlacement.placement.setStale()),A||I)for(const N of this._order){const B=this._layers[N];B.type==="symbol"&&this.placement.updateLayerOpacities(B,O[B.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(l.exported.now())}_releaseSymbolFadeTiles(){for(const s in this._sourceCaches)this._sourceCaches[s].releaseSymbolFadeTiles()}getImages(s,d,g){this.imageManager.getImages(d.icons,g),this._updateTilesForChangedImages();const _=b=>{b&&b.setDependencies(d.tileID.key,d.type,d.icons)};_(this._otherSourceCaches[d.source]),_(this._symbolSourceCaches[d.source])}getGlyphs(s,d,g){this.glyphManager.getGlyphs(d.stacks,g)}getResource(s,d,g){return l.makeRequest(d,g)}_getSourceCache(s){return this._otherSourceCaches[s]}_getLayerSourceCache(s){return s.type==="symbol"?this._symbolSourceCaches[s.source]:this._otherSourceCaches[s.source]}_getSourceCaches(s){const d=[];return this._otherSourceCaches[s]&&d.push(this._otherSourceCaches[s]),this._symbolSourceCaches[s]&&d.push(this._symbolSourceCaches[s]),d}_isSourceCacheLoaded(s){const d=this._getSourceCaches(s);return d.length===0?(this.fire(new l.ErrorEvent(new Error(`There is no source with ID '${s}'`))),!1):d.every(g=>g.loaded())}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}ya.getSourceType=function(p){return Xt[p]},ya.setSourceType=function(p,s){Xt[p]=s},ya.registerForPluginStateChange=l.registerForPluginStateChange;var $h=`
#define EPSILON 0.0000001
#define PI 3.141592653589793
#define EXTENT 8192.0
#define HALF_PI PI/2.0
#define QUARTER_PI PI/4.0
#define RAD_TO_DEG 180.0/PI
#define DEG_TO_RAD PI/180.0
#define GLOBE_RADIUS EXTENT/PI/2.0`,Vs="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",Va=`
#define ELEVATION_SCALE 7.0
#define ELEVATION_OFFSET 450.0
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(
mix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}
#else
vec3 elevationVector(vec2 pos) { return vec3(0,0,1); }
#endif
const float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)
{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}
#ifdef TERRAIN
#ifdef TERRAIN_DEM_FLOAT_FORMAT
uniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;
#else
uniform sampler2D u_dem;uniform sampler2D u_dem_prev;
#endif
uniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));
#ifdef TERRAIN_DEM_NEAREST_FILTER
return u_exaggeration*tl;
#endif
float tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}float prevElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}
#ifdef TERRAIN_VERTEX_MORPHING
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}
#else
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
return currentElevation(apos);}
#endif
highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(
unpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))
);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
float tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;
#else
vec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);
#endif
return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}
#else
float elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }
#endif`,Ec=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}
#endif`,Ha=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump float u_fog_temporal_offset;varying vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}
#endif`;let Lu={},Cl={};const Cc=[];Tl($h,Cc),Tl(Va,Cc),Tl(Ec,Cc),Tl(Ha,Cc),Lu=sr("",Va),Cl=sr(Ha,Ec);const Lm=sr(`
#if __VERSION__ >=300
#define varying in
#define gl_FragColor glFragColor
#define texture2D texture
#define textureCube texture
out vec4 glFragColor;
#endif
highp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}`,`
#if __VERSION__ >=300
#define attribute in
#define varying out
#define texture2D texture
#endif
float wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {
#ifndef PROJECTED_POS_ON_VIEWPORT
float tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;
#else
return vec3(0.0);
#endif
}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(
unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered.`),Du=$h,Fh=`
#ifdef GL_ES
precision mediump float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`;var Bh={background:sr(`uniform vec4 u_color;uniform float u_opacity;
#ifdef LIGHTING_3D_MODE
varying vec4 v_color;
#endif
void main() {vec4 out_color;
#ifdef LIGHTING_3D_MODE
out_color=v_color;
#else
out_color=u_color;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#ifdef LIGHTING_3D_MODE
uniform vec4 u_color;varying vec4 v_color;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting(u_color);
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),backgroundPattern:sr(`uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos;void main() {vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),circle:sr(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(
antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)
);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_apply_premultiplied(out_color,v_fog_pos);
#endif
gl_FragColor=out_color*(v_visibility*opacity_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`#define NUM_VISIBILITY_RINGS 2
#define INV_SQRT2 0.70710678
#define ELEVATION_BIAS 0.0001
#define NUM_SAMPLES_PER_RING 16
uniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
vec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {
#if defined(TERRAIN)
return elevation(pos)+ELEVATION_BIAS;
#else
return 0.0;
#endif
}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);
#ifdef PITCH_WITH_MAP
#ifdef PROJECTION_GLOBE_VIEW
return u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );
#else
return u_matrix*( world_center+vec4(sample_offset,0,0) );
#endif
#else
return projected_center+vec4(sample_offset,0,0);
#endif
}float get_sample_step() {
#ifdef PITCH_WITH_MAP
return 2.0*PI/float(NUM_SAMPLES_PER_RING);
#else
return PI/float(NUM_SAMPLES_PER_RING);
#endif
}void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);
#else 
surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);
#endif
vec4 projected_center=u_matrix*world_center;float view_scale=0.0;
#ifdef PITCH_WITH_MAP
#ifdef SCALE_WITH_MAP
view_scale=1.0;
#else
view_scale=projected_center.w/u_camera_to_center_distance;
#endif
#else
#ifdef SCALE_WITH_MAP
view_scale=u_camera_to_center_distance;
#else
view_scale=projected_center.w;
#endif
#endif
gl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;
#ifdef TERRAIN
float step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;
#ifdef PITCH_WITH_MAP
float cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;
#else
occlusion_world_center=world_center;occlusion_projected_center=projected_center;
#endif
for(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);
#else
visibility=1.0;
#endif
#ifdef PROJECTION_GLOBE_VIEW
visibility=1.0;
#endif
v_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);
#ifdef FOG
v_fog_pos=fog_position(world_center.xyz);
#endif
}`),clippingMask:sr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:sr(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef FOG
if (u_is_globe==0) {gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#else
pos=vec3(tilePos+extrude,elevation(tilePos));
#endif
gl_Position=u_matrix*vec4(pos,1);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),heatmapTexture:sr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:sr("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}",`attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}`),collisionCircle:sr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}",`attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(
mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}`),debug:sr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}",`attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;
#endif
varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
gl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);
#else
gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);
#endif
}`),fill:sr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
vec4 out_color=color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutline:sr(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutlinePattern:sr(`uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;varying vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;varying vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillPattern:sr(`uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillExtrusion:sr(`varying vec4 v_color;
#ifdef RENDER_SHADOWS
varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef ZERO_ROOF_RADIUS
varying vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
varying highp vec3 v_normal;
#endif
void main() {
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
vec3 normal=v_normal;
#endif
float z;vec4 color;
#ifdef ZERO_ROOF_RADIUS
z=float(normal.z > 0.00001);color=mix(v_color,v_roof_color,z);
#else
color=v_color;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;
#ifdef ZERO_ROOF_RADIUS
concave*=(1.0-z);
#endif
float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);color.rgb=color.rgb*shade;
#endif
#ifdef RENDER_SHADOWS
#ifdef ZERO_ROOF_RADIUS
normal=mix(normal,vec3(0.0,0.0,1.0),z);
#endif
color.xyz=shadowed_color_normal(color.xyz,normalize(normal),v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec4 v_color;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;
#endif
#ifdef ZERO_ROOF_RADIUS
varying vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
varying highp vec3 v_normal;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
v_normal=normal;
#endif
base=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=0.0;float c_ele;vec3 pos;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);
#else
h=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);
#ifdef RENDER_SHADOWS
v_pos_light_view_0=u_light_matrix_0*vec4(pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1);v_depth=gl_Position.w;
#endif
float NdotL=0.0;float colorvalue=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}v_color=vec4(0.0,0.0,0.0,1.0);
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting(color,NdotL);
#else
v_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));
#endif
v_color*=u_opacity;
#ifdef ZERO_ROOF_RADIUS
v_roof_color=vec4(0.0,0.0,0.0,1.0);
#ifdef LIGHTING_3D_MODE
v_roof_color=apply_lighting(color,calculate_NdotL(vec3(0.0,0.0,1.0)));
#else
float roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));
#endif
v_roof_color*=u_opacity;
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),fillExtrusionPattern:sr(`uniform vec2 u_texsize;uniform sampler2D u_image;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
varying float v_NdotL;
#endif
varying vec2 v_pos;varying vec4 v_lighting;uniform lowp float u_opacity;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color,v_NdotL)*u_opacity;
#else
out_color=out_color*v_lighting;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec2 v_pos;varying vec4 v_lighting;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
varying float v_NdotL;
#endif
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=z;vec3 p;float c_ele;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);
#else
p=vec3(pos_nx.xy,z);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0
? pos_nx.xy
: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_NdotL=NdotL;
#else
v_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;
#endif 
#ifdef FOG
v_fog_pos=fog_position(p);
#endif
}`),hillshadePrepare:sr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
return texture2D(u_image,coord).a/4.0;
#else
vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;
#endif
}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(
(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)
)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(
deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:sr(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef LIGHTING_3D_MODE
gl_FragColor=apply_lighting(gl_FragColor);
#endif
#ifdef FOG
gl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),line:sr(`uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform sampler2D u_dash_image;varying vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform sampler2D u_gradient_image;
#endif
uniform float u_border_width;uniform vec4 u_border_color;float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
float linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);
#ifdef RENDER_LINE_DASH
float sdfdist=texture2D(u_dash_image,v_tex).a;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;alpha*=linearstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);
#endif
highp vec4 out_color;
#ifdef RENDER_LINE_GRADIENT
out_color=texture2D(u_gradient_image,v_uv.xy);
#else
out_color=color;
#endif
float trimmed=1.0;
#ifdef RENDER_LINE_TRIM_OFFSET
highp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);trimmed=0.0;}}
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
#ifdef RENDER_LINE_ALPHA_DISCARD
if (alpha < u_alpha_discard_threshold) {discard;}
#endif
#ifdef RENDER_LINE_BORDER
float edgeBlur=(u_border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);
#ifdef RENDER_LINE_BORDER_AUTO
float Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}
#else
out_color.rgb=mix(u_border_color.rgb*u_border_color.a*trimmed,out_color.rgb,smoothAlpha);
#endif
}
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define EXTRUDE_SCALE 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
attribute highp vec4 a_packed;
#endif
#ifdef RENDER_LINE_DASH
attribute float a_linesofar;
#endif
uniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;varying vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform float u_image_height;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
float a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];
#ifdef RENDER_LINE_GRADIENT
highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);
#else
v_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);
#endif
#endif
#ifdef RENDER_LINE_DASH
float scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/floorwidth,(-normal.y*height+dash.x+0.5)/u_texsize.y);
#endif
v_width2=vec2(outset,inset);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),linePattern:sr(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;vec2 pattern_size=vec2(display_size.x/u_tile_units_to_pixels,display_size.y);float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x=mod(v_linesofar/pattern_size.x*aspect,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));vec4 color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
color=apply_lighting(color);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),raster:sr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(
dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply(out_color,v_fog_pos));
#endif
gl_FragColor=vec4(out_color*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),symbolIcon:sr(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}`),symbolSDF:sr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}`),symbolTextAndIcon:sr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}`),terrainRaster:sr(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
void main() {vec4 color=texture2D(u_image0,v_pos0);
#ifdef RENDER_SHADOWS
color.xyz=shadowed_color(color.xyz,v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
#ifdef ZERO_EXAGGERATION
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#else
color=fog_dither(fog_apply_from_vert(color,v_fog_opacity));
#endif
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
const float wireframeOffset=0.00015;void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;
#ifdef TERRAIN_WIREFRAME
elevation+=wireframeOffset;
#endif
v_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);
#ifdef FOG
#ifdef ZERO_EXAGGERATION
v_fog_pos=fog_position(decodedPos);
#else
v_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));
#endif
#endif
#ifdef RENDER_SHADOWS
vec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);v_depth=gl_Position.w;
#endif
}`),terrainDepth:sr(`#ifdef GL_ES
precision highp float;
#endif
varying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}`,"uniform mat4 u_matrix;attribute vec2 a_pos;varying float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:sr(`
varying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(
cos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;
#ifdef FOG
sky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);
#endif
sky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Vs),skyboxGradient:sr(`varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));
#ifdef FOG
color.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;
#endif
color*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Vs),skyboxCapture:sr(`
varying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;
#ifdef GL_ES
precision highp float;
#endif
#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)
#define BETA_M                  vec3(21e-6,21e-6,21e-6)
#define MIE_G                   0.76
#define DENSITY_HEIGHT_SCALE_R  8000.0
#define DENSITY_HEIGHT_SCALE_M  1200.0
#define PLANET_RADIUS           6360e3
#define ATMOSPHERE_RADIUS       6420e3
#define SAMPLE_STEPS            10
#define DENSITY_STEPS           4
float ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}`,"attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:sr(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifndef FOG
uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;
#endif
void main() {vec4 color;
#ifdef CUSTOM_ANTIALIASING
vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture2D(u_image0,v_pos0);color=vec4(raster.rgb*antialias,raster.a*antialias);
#else
color=texture2D(u_image0,v_pos0);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;
#ifdef GLOBE_POLES
attribute vec3 a_globe_pos;attribute vec2 a_uv;
#else
attribute vec2 a_pos;
#endif
varying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;vec2 uv=a_uv;
#else
float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);
#endif
v_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;
#ifdef GLOBE_POLES
vec3 up_vector=globe_derived_up_vector;
#else
vec3 up_vector=elevationVector(tile_pos);
#endif
float height=elevation(tile_pos);
#ifdef TERRAIN_WIREFRAME
height+=wireframeOffset;
#endif
globe_pos+=up_vector*height;
#ifndef GLOBE_POLES
globe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;
#endif
#ifdef GLOBE_POLES
vec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);
#else
vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);
#endif
gl_Position=u_proj_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
}`),globeAtmosphere:sr(`uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec3 u_start_color;uniform vec4 u_color;uniform vec4 u_space_color;uniform vec4 u_high_color;uniform float u_star_intensity;uniform float u_star_size;uniform float u_star_density;uniform float u_horizon_angle;uniform mat4 u_rotation_matrix;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;highp float random(highp vec3 p) {p=fract(p*vec3(23.2342,97.1231,91.2342));p+=dot(p.zxy,p.yxz+123.1234);return fract(p.x*p.y);}float stars(vec3 p,float scale,vec2 offset) {vec2 uv_scale=(u_viewport/u_star_size)*scale;vec3 position=vec3(p.xy*uv_scale+offset*u_viewport,p.z);vec3 q=fract(position)-0.5;vec3 id=floor(position);float random_visibility=step(random(id),u_star_density);float circle=smoothstep(0.5+u_star_intensity,0.5,length(q));return circle*random_visibility;}void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;
#ifdef PROJECTION_GLOBE_VIEW
globe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {discard;return;}
#endif
highp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?
0.0 : max(acos(dot(dir,horizon_dir)),0.0);float horizon_angle;
#ifdef PROJECTION_GLOBE_VIEW
highp vec3 closest_point=globe_pos_dot_dir*dir;float closest_point_to_center=length(closest_point-u_globe_pos);float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?
PI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);
#else
horizon_angle=horizon_angle_mercator;
#endif
horizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c =mix(color_stop_2,c2,t);float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);vec2 uv=gl_FragCoord.xy/u_viewport-0.5;float aspect_ratio=u_viewport.x/u_viewport.y;vec4 uv_dir=vec4(normalize(vec3(uv.x*aspect_ratio,uv.y,1.0)),1.0);uv_dir=u_rotation_matrix*uv_dir;vec3 n=abs(uv_dir.xyz);vec2 uv_remap=(n.x > n.y && n.x > n.z) ? uv_dir.yz/uv_dir.x:
(n.y > n.x && n.y > n.z) ? uv_dir.zx/uv_dir.y:
uv_dir.xy/uv_dir.z;uv_remap.x/=aspect_ratio;vec3 D=vec3(uv_remap,1.0);highp float star_field=0.0;if (u_star_intensity > 0.0) {star_field+=stars(D,1.2,vec2(0.0,0.0));star_field+=stars(D,1.0,vec2(1.0,0.0));star_field+=stars(D,0.8,vec2(0.0,1.0));star_field+=stars(D,0.6,vec2(1.0,1.0));star_field*=(1.0-pow(t,0.25+(1.0-u_high_color.a)*0.75));c+=star_field*alpha_2;}c=dither(c,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=vec4(c,a);}`,`attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(
mix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}`)};function Tl(p,s){const d=p.replace(/\s*\/\/[^\n]*\n/g,`
`).split(`
`);for(let g of d)if(g=g.trim(),g[0]==="#"&&g.includes("if")&&!g.includes("endif")){g=g.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const _=g.split(" ");for(const b of _)s.includes(b)||s.push(b)}}function sr(p,s){const d=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,g=s.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),_={},b=[...Cc];return Tl(p,b),Tl(s,b),{fragmentSource:p=p.replace(d,(I,A,O,N,B)=>(_[B]=!0,A==="define"?`
#ifndef HAS_UNIFORM_u_${B}
varying ${O} ${N} ${B};
#else
uniform ${O} ${N} u_${B};
#endif
`:`
#ifdef HAS_UNIFORM_u_${B}
    ${O} ${N} ${B} = u_${B};
#endif
`)),vertexSource:s=s.replace(d,(I,A,O,N,B)=>{const q=N==="float"?"vec2":"vec4",re=B.match(/color/)?"color":q;return _[B]?A==="define"?`
#ifndef HAS_UNIFORM_u_${B}
uniform lowp float u_${B}_t;
attribute ${O} ${q} a_${B};
varying ${O} ${N} ${B};
#else
uniform ${O} ${N} u_${B};
#endif
`:re==="vec4"?`
#ifndef HAS_UNIFORM_u_${B}
    ${B} = a_${B};
#else
    ${O} ${N} ${B} = u_${B};
#endif
`:`
#ifndef HAS_UNIFORM_u_${B}
    ${B} = unpack_mix_${re}(a_${B}, u_${B}_t);
#else
    ${O} ${N} ${B} = u_${B};
#endif
`:A==="define"?`
#ifndef HAS_UNIFORM_u_${B}
uniform lowp float u_${B}_t;
attribute ${O} ${q} a_${B};
#else
uniform ${O} ${N} u_${B};
#endif
`:re==="vec4"?`
#ifndef HAS_UNIFORM_u_${B}
    ${O} ${N} ${B} = a_${B};
#else
    ${O} ${N} ${B} = u_${B};
#endif
`:`
#ifndef HAS_UNIFORM_u_${B}
    ${O} ${N} ${B} = unpack_mix_${re}(a_${B}, u_${B}_t);
#else
    ${O} ${N} ${B} = u_${B};
#endif
`}),staticAttributes:g,usedDefines:b}}class X0{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(s,d,g,_,b,I,A){this.context=s;let O=this.boundPaintVertexBuffers.length!==_.length;for(let B=0;!O&&B<_.length;B++)this.boundPaintVertexBuffers[B]!==_[B]&&(O=!0);let N=this.boundDynamicVertexBuffers.length!==A.length;for(let B=0;!N&&B<A.length;B++)this.boundDynamicVertexBuffers[B]!==A[B]&&(N=!0);if(!s.extVertexArrayObject||!this.vao||this.boundProgram!==d||this.boundLayoutVertexBuffer!==g||O||N||this.boundIndexBuffer!==b||this.boundVertexOffset!==I)this.freshBind(d,g,_,b,I,A);else{s.bindVertexArrayOES.set(this.vao);for(const B of A)B&&B.bind();b&&b.dynamicDraw&&b.bind()}}freshBind(s,d,g,_,b,I){let A;const O=s.numAttributes,N=this.context,B=N.gl;if(N.extVertexArrayObject)this.vao&&this.destroy(),this.vao=N.extVertexArrayObject.createVertexArrayOES(),N.bindVertexArrayOES.set(this.vao),A=0,this.boundProgram=s,this.boundLayoutVertexBuffer=d,this.boundPaintVertexBuffers=g,this.boundIndexBuffer=_,this.boundVertexOffset=b,this.boundDynamicVertexBuffers=I;else{A=N.currentNumAttributes||0;for(let q=O;q<A;q++)B.disableVertexAttribArray(q)}d.enableAttributes(B,s),d.bind(),d.setVertexAttribPointers(B,s,b);for(const q of g)q.enableAttributes(B,s),q.bind(),q.setVertexAttribPointers(B,s,b);for(const q of I)q&&(q.enableAttributes(B,s),q.bind(),q.setVertexAttribPointers(B,s,b));_&&_.bind(),N.currentNumAttributes=O}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function Nh(p,s){const d=Math.pow(2,s.canonical.z),g=s.canonical.y;return[new l.MercatorCoordinate(0,g/d).toLngLat().lat,new l.MercatorCoordinate(0,(g+1)/d).toLngLat().lat]}function Dm(p,s,d,g,_,b,I){const A=p.context,O=A.gl,N=d.fbo;if(!N)return;p.prepareDrawTile();const B=p.useProgram("hillshade");A.activeTexture.set(O.TEXTURE0),O.bindTexture(O.TEXTURE_2D,N.colorAttachment.get());const q=((ce,me,K,se)=>{const xe=K.paint.get("hillshade-shadow-color"),be=K.paint.get("hillshade-highlight-color"),Re=K.paint.get("hillshade-accent-color");let ze=K.paint.get("hillshade-illumination-direction")*(Math.PI/180);K.paint.get("hillshade-illumination-anchor")==="viewport"&&(ze-=ce.transform.angle);const Oe=!ce.options.moving;return{u_matrix:se||ce.transform.calculateProjMatrix(me.tileID.toUnwrapped(),Oe),u_image:0,u_latrange:Nh(0,me.tileID),u_light:[K.paint.get("hillshade-exaggeration"),ze],u_shadow:xe,u_highlight:be,u_accent:Re}})(p,d,g,p.terrain?s.projMatrix:null);p.prepareDrawProgram(A,B,s.toUnwrapped());const{tileBoundsBuffer:re,tileBoundsIndexBuffer:le,tileBoundsSegments:he}=p.getTileBoundsBuffers(d);B.draw(A,O.TRIANGLES,_,b,I,l.CullFaceMode.disabled,q,g.id,re,le,he)}function jh(p,s,d){if(!s.needsDEMTextureUpload)return;const g=p.context,_=g.gl;g.pixelStoreUnpackPremultiplyAlpha.set(!1),s.demTexture=s.demTexture||p.getTileTexture(d.stride);const b=d.getPixels();s.demTexture?s.demTexture.update(b,{premultiply:!1}):s.demTexture=new l.Texture(g,b,_.RGBA,{premultiply:!1}),s.needsDEMTextureUpload=!1}function km(p,s,d,g,_,b){const I=p.context,A=I.gl;if(!s.dem)return;const O=s.dem;if(I.activeTexture.set(A.TEXTURE1),jh(p,s,O),!s.demTexture)return;s.demTexture.bind(A.NEAREST,A.CLAMP_TO_EDGE);const N=O.dim;I.activeTexture.set(A.TEXTURE0);let B=s.fbo;if(!B){const he=new l.Texture(I,{width:N,height:N,data:null},A.RGBA);he.bind(A.LINEAR,A.CLAMP_TO_EDGE),B=s.fbo=I.createFramebuffer(N,N,!0),B.colorAttachment.set(he.texture)}I.bindFramebuffer.set(B.framebuffer),I.viewport.set([0,0,N,N]);const{tileBoundsBuffer:q,tileBoundsIndexBuffer:re,tileBoundsSegments:le}=p.getMercatorTileBoundsBuffers();p.useProgram("hillshadePrepare").draw(I,A.TRIANGLES,g,_,b,l.CullFaceMode.disabled,((he,ce)=>{const me=ce.stride,K=l.create();return l.ortho(K,0,l.EXTENT,-l.EXTENT,0,0,1),l.translate(K,K,[0,-l.EXTENT,0]),{u_matrix:K,u_image:1,u_dimension:[me,me],u_zoom:he.overscaledZ,u_unpack:ce.unpackVector}})(s.tileID,O),d.id,q,re,le),s.needsHillshadePrepare=!1}const Uh=p=>({u_matrix:new l.UniformMatrix4f(p),u_image0:new l.Uniform1i(p),u_skirt_height:new l.Uniform1f(p)}),Il=(p,s)=>({u_matrix:p,u_image0:0,u_skirt_height:s}),ku=(p,s,d,g,_,b,I,A,O,N,B,q,re,le,he)=>({u_proj_matrix:Float32Array.from(p),u_globe_matrix:s,u_normalize_matrix:Float32Array.from(g),u_merc_matrix:d,u_zoom_transition:_,u_merc_center:b,u_image0:0,u_frustum_tl:I,u_frustum_tr:A,u_frustum_br:O,u_frustum_bl:N,u_globe_pos:B,u_globe_radius:q,u_viewport:re,u_grid_matrix:he?Float32Array.from(he):new Float32Array(9),u_skirt_height:le});function Ml(p,s){return p!=null&&s!=null&&!(!p.hasData()||!s.hasData())&&p.demTexture!=null&&s.demTexture!=null&&p.tileID.key!==s.tileID.key}const Ga=new class{constructor(){this.operations={}}newMorphing(p,s,d,g,_){if(p in this.operations){const b=this.operations[p];b.to.tileID.key!==d.tileID.key&&(b.queued=d)}else this.operations[p]={startTime:g,phase:0,duration:_,from:s,to:d,queued:null}}getMorphValuesForProxy(p){if(!(p in this.operations))return null;const s=this.operations[p];return{from:s.from,to:s.to,phase:s.phase}}update(p){for(const s in this.operations){const d=this.operations[s];for(d.phase=(p-d.startTime)/d.duration;d.phase>=1||!this._validOp(d);)if(!this._nextOp(d,p)){delete this.operations[s];break}}}_nextOp(p,s){return!!p.queued&&(p.from=p.to,p.to=p.queued,p.queued=null,p.phase=0,p.startTime=s,!0)}_validOp(p){return p.from.hasData()&&p.to.hasData()}},Hs={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function $u(p){return 6*Math.pow(1.5,22-p)}function $m(p,s){const d=1<<p.z;return!s&&(p.x===0||p.x===d-1)||p.y===0||p.y===d-1}const Tc=p=>({u_matrix:p});function Vh(p,s,d,g,_){if(_>0){const b=l.exported.now(),I=(b-p.timeAdded)/_,A=s?(b-s.timeAdded)/_:-1,O=d.getSource(),N=g.coveringZoomLevel({tileSize:O.tileSize,roundZoom:O.roundZoom}),B=!s||Math.abs(s.tileID.overscaledZ-N)>Math.abs(p.tileID.overscaledZ-N),q=B&&p.refreshedUponExpiration?1:l.clamp(B?I:1-A,0,1);return p.refreshedUponExpiration&&I>=1&&(p.refreshedUponExpiration=!1),s?{opacity:1,mix:1-q}:{opacity:q,mix:0}}return{opacity:1,mix:0}}class Hh extends l.SourceCache{constructor(s){const d={type:"raster-dem",maxzoom:s.transform.maxZoom},g=new Be(En(),null),_=un("mock-dem",d,g,s.style);super("mock-dem",_,!1),_.setEventedParent(this),this._sourceLoaded=!0}_loadTile(s,d){s.state="loaded",d(null)}}class Fu extends l.SourceCache{constructor(s){const d=un("proxy",{type:"geojson",maxzoom:s.transform.maxZoom},new Be(En(),null),s.style);super("proxy",d,!1),d.setEventedParent(this),this.map=this.getSource().map=s,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(s,d,g){if(s.freezeTileCoverage)return;this.transform=s;const _=s.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((b,I)=>{if(b[I.key]="",!this._tiles[I.key]){const A=new l.Tile(I,this._source.tileSize*I.overscaleFactor(),s.tileZoom);A.state="loaded",this._tiles[I.key]=A}return b},{});for(const b in this._tiles)b in _||(this.freeFBO(b),this._tiles[b].unloadVectorData(),delete this._tiles[b])}freeFBO(s){const d=this.proxyCachedFBO[s];if(d!==void 0){const g=Object.values(d);this.renderCachePool.push(...g),delete this.proxyCachedFBO[s]}}deallocRenderCache(){this.renderCache.forEach(s=>s.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class Bu extends l.OverscaledTileID{constructor(s,d,g){super(s.overscaledZ,s.wrap,s.canonical.z,s.canonical.x,s.canonical.y),this.proxyTileKey=d,this.projMatrix=g}}class Gh extends l.Elevation{constructor(s,d){super(),this.painter=s,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[g,_,b]=function(O){const N=new l.StructArrayLayout2i4,B=new l.StructArrayLayout3ui6,q=131;N.reserve(17161),B.reserve(33800);const re=l.EXTENT/128,le=l.EXTENT+re/2,he=le+re;for(let me=-re;me<he;me+=re)for(let K=-re;K<he;K+=re){const se=K<0||K>le||me<0||me>le?24575:0,xe=l.clamp(Math.round(K),0,l.EXTENT),be=l.clamp(Math.round(me),0,l.EXTENT);N.emplaceBack(xe+se,be)}const ce=(me,K)=>{const se=K*q+me;B.emplaceBack(se+1,se,se+q),B.emplaceBack(se+q,se+q+1,se+1)};for(let me=1;me<129;me++)for(let K=1;K<129;K++)ce(K,me);return[0,129].forEach(me=>{for(let K=0;K<130;K++)ce(K,me),ce(me,K)}),[N,B,32768]}(),I=s.context;this.gridBuffer=I.createVertexBuffer(g,l.posAttributes.members),this.gridIndexBuffer=I.createIndexBuffer(_),this.gridSegments=l.SegmentVector.simpleSegment(0,0,g.length,_.length),this.gridNoSkirtSegments=l.SegmentVector.simpleSegment(0,0,g.length,b),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new Fu(d.map),this.orthoMatrix=l.create(),l.ortho(this.orthoMatrix,this.painter.transform.projection.name==="globe"?.015:0,l.EXTENT,0,l.EXTENT,0,1);const A=I.gl;this._overlapStencilMode=new l.StencilMode({func:A.GEQUAL,mask:255},0,255,A.KEEP,A.KEEP,A.REPLACE),this._previousZoom=s.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=d,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new Hh(d.map)}set style(s){s.on("data",this._onStyleDataEvent.bind(this)),s.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=s,this._checkRenderCacheEfficiency(),this._style.map.on("moveend",()=>{this._clearLineLayersFromRenderCache()})}update(s,d,g){if(s&&s.terrain){this._style!==s&&(this.style=s),this.enabled=!0;const _=s.terrain.properties;this.sourceCache=s.terrain.drapeRenderMode===0?this._mockSourceCache:s._getSourceCache(_.get("source")),this._exaggeration=_.get("exaggeration");const b=()=>{this.sourceCache.used&&l.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.
This leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const I=this.getScaledDemTileSize();this.sourceCache.update(d,I,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,b(),this._initializing=!0),b(),d.updateElevation(!0,g),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(d),this._emptyDEMTextureDirty=!0}else this._disable()}resetTileLookupCache(s){this._findCoveringTileCache[s]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_checkRenderCacheEfficiency(){const s=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||s.efficiency!==100&&l.warnOnce(`Terrain render cache efficiency is not optimal (${s.efficiency}%) and performance
                may be affected negatively, consider placing all background, fill and line layers before layer
                with id '${s.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(s){s.coord&&s.dataType==="source"?this._clearRenderCacheForTile(s.sourceCacheId,s.coord):s.dataType==="style"&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const s in this._style._sourceCaches)this._style._sourceCaches[s].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach(s=>s.fb.destroy()),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const s=2*this.proxySourceCache.getSource().tileSize;return[s,s]}set useVertexMorphing(s){this._useVertexMorphing=s}updateTileBinding(s){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const d=this.proxySourceCache,g=this.painter.transform;this._initializing&&(this._initializing=g._centerAltitude===0&&this.getAtPointOrZero(l.MercatorCoordinate.fromLngLat(g.center),-1)===-1,this._emptyDEMTextureDirty=!this._initializing);const _=this.proxyCoords=d.getIds().map(O=>{const N=d.getTileByID(O).tileID;return N.projMatrix=g.calculateProjMatrix(N.toUnwrapped()),N});(function(O,N){const B=N.transform.pointCoordinate(N.transform.getCameraPoint()),q=new l.Point(B.x,B.y);O.sort((re,le)=>{if(le.overscaledZ-re.overscaledZ)return le.overscaledZ-re.overscaledZ;const he=new l.Point(re.canonical.x+(1<<re.canonical.z)*re.wrap,re.canonical.y),ce=new l.Point(le.canonical.x+(1<<le.canonical.z)*le.wrap,le.canonical.y),me=q.mult(1<<re.canonical.z);return me.x-=.5,me.y-=.5,me.distSqr(he)-me.distSqr(ce)})})(_,this.painter),this._previousZoom=g.zoom;const b=this.proxyToSource||{};this.proxyToSource={},_.forEach(O=>{this.proxyToSource[O.key]={}}),this.terrainTileForTile={};const I=this._style._sourceCaches;for(const O in I){const N=I[O];if(!N.used||(N!==this.sourceCache&&this.resetTileLookupCache(N.id),this._setupProxiedCoordsForOrtho(N,s[O],b),N.usedForTerrain))continue;const B=s[O];N.getSource().reparseOverscaled&&this._assignTerrainTiles(B)}this.proxiedCoords[d.id]=_.map(O=>new Bu(O,O.key,this.orthoMatrix)),this._assignTerrainTiles(_),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(b),this.renderingToTexture=!1,this._updateTimestamp=l.exported.now();const A={};this._visibleDemTiles=[];for(const O of this.proxyCoords){const N=this.terrainTileForTile[O.key];if(!N)continue;const B=N.tileID.key;B in A||(this._visibleDemTiles.push(N),A[B]=B)}}_assignTerrainTiles(s){this._initializing||s.forEach(d=>{if(this.terrainTileForTile[d.key])return;const g=this._findTileCoveringTileID(d,this.sourceCache);g&&(this.terrainTileForTile[d.key]=g)})}_prepareDEMTextures(){const s=this.painter.context,d=s.gl;for(const g in this.terrainTileForTile){const _=this.terrainTileForTile[g],b=_.dem;!b||_.demTexture&&!_.needsDEMTextureUpload||(s.activeTexture.set(d.TEXTURE1),jh(this.painter,_,b))}}_prepareDemTileUniforms(s,d,g,_){if(!d||d.demTexture==null)return!1;const b=s.tileID.canonical,I=Math.pow(2,d.tileID.canonical.z-b.z),A=_||"";return g[`u_dem_tl${A}`]=[b.x*I%1,b.y*I%1],g[`u_dem_scale${A}`]=I,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const s=this.painter.context,d=s.gl;if(!this._emptyDepthBufferTexture){const g=new l.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new l.Texture(s,g,d.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let s=0;const d=this._visibleDemTiles.reduce((g,_)=>{if(!_.dem)return g;const b=_.dem.tree.minimums[0];return b>0&&s++,g+b},0);return s?d/s:0}_updateEmptyDEMTexture(){const s=this.painter.context,d=s.gl;s.activeTexture.set(d.TEXTURE2);const g=this._getLoadedAreaMinimum(),_=new l.RGBAImage({width:1,height:1},new Uint8Array(l.DEMData.pack(g,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;let b=this._emptyDEMTexture;return b?b.update(_,{premultiply:!1}):b=this._emptyDEMTexture=new l.Texture(s,_,d.RGBA,{premultiply:!1}),b}setupElevationDraw(s,d,g){const _=this.painter.context,b=_.gl,I=(A=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:l.DEMData.getUnpackVector(A),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});var A;I.u_dem_size=this.sourceCache.getSource().tileSize,I.u_exaggeration=this.exaggeration();let O=null,N=null,B=1;if(g&&g.morphing&&this._useVertexMorphing){const q=g.morphing.srcDemTile,re=g.morphing.dstDemTile;B=g.morphing.phase,q&&re&&(this._prepareDemTileUniforms(s,q,I,"_prev")&&(N=q),this._prepareDemTileUniforms(s,re,I)&&(O=re))}if(N&&O?(_.activeTexture.set(b.TEXTURE2),O.demTexture.bind(b.NEAREST,b.CLAMP_TO_EDGE,b.NEAREST),_.activeTexture.set(b.TEXTURE4),N.demTexture.bind(b.NEAREST,b.CLAMP_TO_EDGE,b.NEAREST),I.u_dem_lerp=B):(O=this.terrainTileForTile[s.tileID.key],_.activeTexture.set(b.TEXTURE2),(this._prepareDemTileUniforms(s,O,I)?O.demTexture:this.emptyDEMTexture).bind(b.NEAREST,b.CLAMP_TO_EDGE)),_.activeTexture.set(b.TEXTURE3),g&&g.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(b.NEAREST,b.CLAMP_TO_EDGE),this._depthFBO&&(I.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(b.NEAREST,b.CLAMP_TO_EDGE),I.u_depth_size_inv=[1,1]),g&&g.useMeterToDem&&O){const q=(1<<O.tileID.canonical.z)*l.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;I.u_meter_to_dem=q}if(g&&g.labelPlaneMatrixInv&&(I.u_label_plane_matrix_inv=g.labelPlaneMatrixInv),d.setTerrainUniformValues(_,I),this.painter.transform.projection.name==="globe"){const q=this.globeUniformValues(this.painter.transform,s.tileID.canonical,g&&g.useDenormalizedUpVectorScale);d.setGlobeUniformValues(_,q)}}globeUniformValues(s,d,g){const _=s.projection;return{u_tile_tl_up:_.upVector(d,0,0),u_tile_tr_up:_.upVector(d,l.EXTENT,0),u_tile_br_up:_.upVector(d,l.EXTENT,l.EXTENT),u_tile_bl_up:_.upVector(d,0,l.EXTENT),u_tile_up_scale:g?l.globeMetersToEcef(1):_.upVectorScale(d,s.center.lat,s.worldSize).metersToTile}}renderToBackBuffer(s){const d=this.painter,g=this.painter.context;s.length!==0&&(g.bindFramebuffer.set(null),g.viewport.set([0,0,d.width,d.height]),d.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(_,b,I,A,O){if(_.transform.projection.name==="globe")(function(N,B,q,re,le){const he=N.context,ce=he.gl;let me,K;const se=N.options.showTerrainWireframe?2:0,xe=N.transform,be=l.globeUseCustomAntiAliasing(N,he,xe),Re=(Et,Xe)=>{if(K===Et)return;const dt=[Hs[Et],"PROJECTION_GLOBE_VIEW"];be&&dt.push("CUSTOM_ANTIALIASING"),Xe&&dt.push(Hs[se]),me=N.useProgram("globeRaster",null,dt),K=Et},ze=N.colorModeForRenderPass(),Oe=new l.DepthMode(ce.LEQUAL,l.DepthMode.ReadWrite,N.depthRangeFor3D);Ga.update(le);const Ve=l.calculateGlobeMercatorMatrix(xe),Ue=[l.mercatorXfromLng(xe.center.lng),l.mercatorYfromLat(xe.center.lat)],Ke=se?[!1,!0]:[!1],At=N.globeSharedBuffers,qe=[xe.width*l.exported.devicePixelRatio,xe.height*l.exported.devicePixelRatio],ht=Float32Array.from(xe.globeMatrix),et={useDenormalizedUpVectorScale:!0};if(Ke.forEach(Et=>{const Xe=N.transform,dt=$u(Xe.zoom)*B.exaggeration();K=-1;const Lt=Et?ce.LINES:ce.TRIANGLES;for(const vt of re){const Dt=q.getTile(vt),dn=l.StencilMode.disabled,Rn=B.prevTerrainTileForTile[vt.key],en=B.terrainTileForTile[vt.key];Ml(Rn,en)&&Ga.newMorphing(vt.key,Rn,en,le,250),he.activeTexture.set(ce.TEXTURE0),Dt.texture.bind(ce.LINEAR,ce.CLAMP_TO_EDGE);const _n=Ga.getMorphValuesForProxy(vt.key),Hn=_n?1:0;_n&&l.extend$1(et,{morphing:{srcDemTile:_n.from,dstDemTile:_n.to,phase:l.easeCubicInOut(_n.phase)}});const Un=l.tileCornersToBounds(vt.canonical),cn=l.getLatitudinalLod(Un.getCenter().lat),dr=l.getGridMatrix(vt.canonical,Un,cn,Xe.worldSize/Xe._pixelsPerMercatorPixel),yr=l.globeNormalizeECEF(l.globeTileBounds(vt.canonical)),_r=ku(Xe.projMatrix,ht,Ve,yr,l.globeToMercatorTransition(Xe.zoom),Ue,Xe.frustumCorners.TL,Xe.frustumCorners.TR,Xe.frustumCorners.BR,Xe.frustumCorners.BL,Xe.globeCenterInViewSpace,Xe.globeRadius,qe,dt,dr);if(Re(Hn,Et),B.setupElevationDraw(Dt,me,et),N.prepareDrawProgram(he,me,vt.toUnwrapped()),At){const[xr,Hi,Ti]=Et?At.getWirefameBuffers(N.context,cn):At.getGridBuffers(cn,dt!==0);me.draw(he,Lt,Oe,dn,ze,l.CullFaceMode.backCCW,_r,"globe_raster",xr,Hi,Ti)}}}),At){const Et=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];be&&Et.push("CUSTOM_ANTIALIASING"),me=N.useProgram("globeRaster",null,Et);for(const Xe of re){const{x:dt,y:Lt,z:vt}=Xe.canonical,Dt=Lt===0,dn=Lt===(1<<vt)-1,[Rn,en,_n,Hn]=At.getPoleBuffers(vt);if(Hn&&(Dt||dn)){const Un=q.getTile(Xe);he.activeTexture.set(ce.TEXTURE0),Un.texture.bind(ce.LINEAR,ce.CLAMP_TO_EDGE);let cn=l.globePoleMatrixForTile(vt,dt,xe);const dr=l.globeNormalizeECEF(l.globeTileBounds(Xe.canonical)),yr=(_r,xr)=>_r.draw(he,ce.TRIANGLES,Oe,l.StencilMode.disabled,ze,l.CullFaceMode.disabled,ku(xe.projMatrix,cn,cn,dr,0,Ue,xe.frustumCorners.TL,xe.frustumCorners.TR,xe.frustumCorners.BR,xe.frustumCorners.BL,xe.globeCenterInViewSpace,xe.globeRadius,qe,0),"globe_pole_raster",xr,_n,Hn);B.setupElevationDraw(Un,me,et),N.prepareDrawProgram(he,me,Xe.toUnwrapped()),Dt&&yr(me,Rn),dn&&(cn=l.scale(l.create(),cn,[1,-1,1]),yr(me,en))}}}})(_,b,I,A,O);else{const N=_.context,B=N.gl;let q,re;const le=_.options.showTerrainWireframe?2:0,he=(xe,be)=>{if(re===xe)return;const Re=[Hs[xe]];be&&Re.push(Hs[le]),q=_.useProgram("terrainRaster",null,Re),re=xe},ce=_.colorModeForRenderPass(),me=new l.DepthMode(B.LEQUAL,l.DepthMode.ReadWrite,_.depthRangeFor3D);Ga.update(O);const K=_.transform,se=$u(K.zoom)*b.exaggeration();(le?[!1,!0]:[!1]).forEach(xe=>{re=-1;const be=xe?B.LINES:B.TRIANGLES,[Re,ze]=xe?b.getWirefameBuffer():[b.gridIndexBuffer,b.gridSegments];for(const Oe of A){const Ve=I.getTile(Oe),Ue=l.StencilMode.disabled,Ke=b.prevTerrainTileForTile[Oe.key],At=b.terrainTileForTile[Oe.key];Ml(Ke,At)&&Ga.newMorphing(Oe.key,Ke,At,O,250),N.activeTexture.set(B.TEXTURE0),Ve.texture.bind(B.LINEAR,B.CLAMP_TO_EDGE,B.LINEAR_MIPMAP_NEAREST);const qe=Ga.getMorphValuesForProxy(Oe.key),ht=qe?1:0;let et;qe&&(et={morphing:{srcDemTile:qe.from,dstDemTile:qe.to,phase:l.easeCubicInOut(qe.phase)}});const Et=Il(Oe.projMatrix,$m(Oe.canonical,K.renderWorldCopies)?se/10:se);he(ht,xe),b.setupElevationDraw(Ve,q,et),_.prepareDrawProgram(N,q,Oe.toUnwrapped()),q.draw(N,be,me,Ue,ce,l.CullFaceMode.backCCW,Et,"terrain_raster",b.gridBuffer,Re,ze)}})}}(d,this,this.proxySourceCache,s,this._updateTimestamp),this.renderingToTexture=!0,d.gpuTimingDeferredRenderEnd(),s.splice(0,s.length))}renderBatch(s){if(this._drapedRenderBatches.length===0)return s+1;this.renderingToTexture=!0;const d=this.painter,g=this.painter.context,_=this.proxySourceCache,b=this.proxiedCoords[_.id],I=this._drapedRenderBatches.shift(),A=[],O=d.style.order;let N=0;for(const B of b){const q=_.getTileByID(B.proxyTileKey),re=_.proxyCachedFBO[B.key]?_.proxyCachedFBO[B.key][s]:void 0,le=re!==void 0?_.renderCache[re]:this.pool[N++],he=re!==void 0;if(q.texture=le.tex,he&&!le.dirty){A.push(q.tileID);continue}let ce;g.bindFramebuffer.set(le.fb.framebuffer),this.renderedToTile=!1,le.dirty&&(g.clear({color:l.Color.transparent,stencil:0}),le.dirty=!1);for(let me=I.start;me<=I.end;++me){const K=d.style._layers[O[me]];if(K.isHidden(d.transform.zoom))continue;const se=d.style._getLayerSourceCache(K),xe=se?this.proxyToSource[B.key][se.id]:[B];if(!xe)continue;const be=xe;g.viewport.set([0,0,le.fb.width,le.fb.height]),ce!==(se?se.id:null)&&(this._setupStencil(le,xe,K,se),ce=se?se.id:null),d.renderLayer(d,se,K,be)}this.renderedToTile?(le.dirty=!0,A.push(q.tileID)):he||--N,N===5&&(N=0,this.renderToBackBuffer(A))}return this.renderToBackBuffer(A),this.renderingToTexture=!1,g.bindFramebuffer.set(null),g.viewport.set([0,0,d.width,d.height]),I.end+1}postRender(){}renderCacheEfficiency(s){const d=s.order.length;if(d===0)return{efficiency:100};let g,_=0,b=0,I=!1;for(let A=0;A<d;++A){const O=s._layers[s.order[A]];this._style.isLayerDraped(O)?(I&&++_,++b):I||(I=!0,g=O.id)}return b===0?{efficiency:100}:{efficiency:100*(1-_/b),firstUndrapedLayer:g}}getMinElevationBelowMSL(){let s=0;return this._visibleDemTiles.filter(d=>d.dem).forEach(d=>{s=Math.min(s,d.dem.tree.minimums[0])}),s===0?s:(s-30)*this._exaggeration}raycast(s,d,g){if(!this._visibleDemTiles)return null;const _=this._visibleDemTiles.filter(b=>b.dem).map(b=>{const I=b.tileID,A=1<<I.overscaledZ,{x:O,y:N}=I.canonical,B=O/A,q=(O+1)/A,re=N/A,le=(N+1)/A;return{minx:B,miny:re,maxx:q,maxy:le,t:b.dem.tree.raycastRoot(B,re,q,le,s,d,g),tile:b}});_.sort((b,I)=>(b.t!==null?b.t:Number.MAX_VALUE)-(I.t!==null?I.t:Number.MAX_VALUE));for(const b of _){if(b.t==null)return null;const I=b.tile.dem.tree.raycast(b.minx,b.miny,b.maxx,b.maxy,s,d,g);if(I!=null)return I}return null}_createFBO(){const s=this.painter.context,d=s.gl,g=this.drapeBufferSize;s.activeTexture.set(d.TEXTURE0);const _=new l.Texture(s,{width:g[0],height:g[1],data:null},d.RGBA);_.bind(d.LINEAR,d.CLAMP_TO_EDGE);const b=s.createFramebuffer(g[0],g[1],!1);return b.colorAttachment.set(_.texture),b.depthAttachment=new we(s,b.framebuffer),this._sharedDepthStencil===void 0?(this._sharedDepthStencil=s.createRenderbuffer(s.gl.DEPTH_STENCIL,g[0],g[1]),this._stencilRef=0,b.depthAttachment.set(this._sharedDepthStencil),s.clear({stencil:0})):b.depthAttachment.set(this._sharedDepthStencil),s.extTextureFilterAnisotropic&&!s.extTextureFilterAnisotropicForceOff&&d.texParameterf(d.TEXTURE_2D,s.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,s.extTextureFilterAnisotropicMax),{fb:b,tex:_,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const s in this._style._sourceCaches)if(this._style._sourceCaches[s].hasTransition())return!0;return this._style.order.some(s=>{const d=this._style._layers[s],g=d.isHidden(this.painter.transform.zoom);return d.type==="custom"?!g&&d.shouldRedrape():!g&&d.hasTransition()})}_clearLineLayersFromRenderCache(){let s=!1;for(const g of this._style._getSources())if(g instanceof Je){s=!0;break}if(!s)return;const d={};for(let g=0;g<this._style.order.length;++g){const _=this._style._layers[this._style.order[g]],b=this._style._getLayerSourceCache(_);if(b&&!d[b.id]&&!_.isHidden(this.painter.transform.zoom)&&_.type==="line"&&_.widthExpression()instanceof l.ZoomDependentExpression){d[b.id]=!0;for(const I of this.proxyCoords){const A=this.proxyToSource[I.key][b.id];if(A)for(const O of A)this._clearRenderCacheForTile(b.id,O)}}}}_clearRasterLayersFromRenderCache(){let s=!1;for(const g in this._style._sourceCaches)if(this._style._sourceCaches[g]._source instanceof We){s=!0;break}if(!s)return;const d={};for(let g=0;g<this._style.order.length;++g){const _=this._style._layers[this._style.order[g]],b=this._style._getLayerSourceCache(_);if(!b||d[b.id]||_.isHidden(this.painter.transform.zoom)||_.type!=="raster")continue;const I=_.paint.get("raster-fade-duration");for(const A of this.proxyCoords){const O=this.proxyToSource[A.key][b.id];if(O)for(const N of O){const B=Vh(b.getTile(N),b.findLoadedParent(N,0),b,this.painter.transform,I);(B.opacity!==1||B.mix!==0)&&this._clearRenderCacheForTile(b.id,N)}}}}_setupDrapedRenderBatches(){const s=this._style.order,d=s.length;if(d===0)return;const g=[];let _,b=0,I=this._style._layers[s[b]];for(;!this._style.isLayerDraped(I)&&I.isHidden(this.painter.transform.zoom)&&++b<d;)I=this._style._layers[s[b]];for(;b<d;++b){const A=this._style._layers[s[b]];A.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(A)?_===void 0&&(_=b):_!==void 0&&(g.push({start:_,end:b-1}),_=void 0))}_!==void 0&&g.push({start:_,end:b-1}),this._drapedRenderBatches=g}_setupRenderCache(s){const d=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,d.renderCache.length>d.renderCachePool.length){const I=Object.values(d.proxyCachedFBO);d.proxyCachedFBO={};for(let A=0;A<I.length;++A){const O=Object.values(I[A]);d.renderCachePool.push(...O)}}return}this._clearRasterLayersFromRenderCache();const g=this.proxyCoords,_=this._tilesDirty;for(let I=g.length-1;I>=0;I--){const A=g[I];if(d.getTileByID(A.key),d.proxyCachedFBO[A.key]!==void 0){const O=s[A.key],N=this.proxyToSource[A.key];let B=0;for(const q in N){const re=N[q],le=O[q];if(!le||le.length!==re.length||re.some((he,ce)=>he!==le[ce]||_[q]&&_[q].hasOwnProperty(he.key))){B=-1;break}++B}for(const q in d.proxyCachedFBO[A.key])d.renderCache[d.proxyCachedFBO[A.key][q]].dirty=B<0||B!==Object.values(O).length}}const b=[...this._drapedRenderBatches];b.sort((I,A)=>A.end-A.start-(I.end-I.start));for(const I of b)for(const A of g){if(d.proxyCachedFBO[A.key])continue;let O=d.renderCachePool.pop();O===void 0&&d.renderCache.length<50&&(O=d.renderCache.length,d.renderCache.push(this._createFBO())),O!==void 0&&(d.proxyCachedFBO[A.key]={},d.proxyCachedFBO[A.key][I.start]=O,d.renderCache[O].dirty=!0)}this._tilesDirty={}}_setupStencil(s,d,g,_){if(!_||!this._sourceTilesOverlap[_.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const b=this.painter.context,I=b.gl;if(d.length<=1)return void(this._overlapStencilType=!1);let A;if(g.isTileClipped())A=d.length,this._overlapStencilMode.test={func:I.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(d[0].overscaledZ>d[d.length-1].overscaledZ))return void(this._overlapStencilType=!1);A=1,this._overlapStencilMode.test={func:I.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+A>255&&(b.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=A,this._overlapStencilMode.ref=this._stencilRef,g.isTileClipped()&&this._renderTileClippingMasks(d,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return this._overlapStencilType==="Clip"||this._overlapStencilType==="Mask"}stencilModeForRTTOverlap(s){return this.renderingToTexture&&this._overlapStencilType?(this._overlapStencilType==="Clip"&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[s.key]),this._overlapStencilMode):l.StencilMode.disabled}_renderTileClippingMasks(s,d){const g=this.painter,_=this.painter.context,b=_.gl;g._tileClippingMaskIDs={},_.setColorMode(l.ColorMode.disabled),_.setDepthMode(l.DepthMode.disabled);const I=g.useProgram("clippingMask");for(const A of s){const O=g._tileClippingMaskIDs[A.key]=--d;I.draw(_,b.TRIANGLES,l.DepthMode.disabled,new l.StencilMode({func:b.ALWAYS,mask:0},O,255,b.KEEP,b.KEEP,b.REPLACE),l.ColorMode.disabled,l.CullFaceMode.disabled,Tc(A.projMatrix),"$clipping",g.tileExtentBuffer,g.quadTriangleIndexBuffer,g.tileExtentSegments)}}pointCoordinate(s){const d=this.painter.transform;if(s.x<0||s.x>d.width||s.y<0||s.y>d.height)return null;const g=[s.x,s.y,1,1];l.transformMat4$1(g,g,d.pixelMatrixInverse),l.scale$1(g,g,1/g[3]),g[0]/=d.worldSize,g[1]/=d.worldSize;const _=d._camera.position,b=l.mercatorZfromAltitude(1,d.center.lat),I=[_[0],_[1],_[2]/b,0],A=l.subtract([],g.slice(0,3),I);l.normalize(A,A);const O=this.raycast(I,A,this._exaggeration);return O!==null&&O?(l.scaleAndAdd(I,I,A,O),I[3]=I[2],I[2]*=b,I):null}drawDepth(){const s=this.painter,d=s.context,g=this.proxySourceCache,_=Math.ceil(s.width),b=Math.ceil(s.height);if(!this._depthFBO||this._depthFBO.width===_&&this._depthFBO.height===b||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const I=d.gl,A=d.createFramebuffer(_,b,!0);d.activeTexture.set(I.TEXTURE0);const O=new l.Texture(d,{width:_,height:b,data:null},I.RGBA);O.bind(I.NEAREST,I.CLAMP_TO_EDGE),A.colorAttachment.set(O.texture);const N=d.createRenderbuffer(d.gl.DEPTH_COMPONENT16,_,b);A.depthAttachment.set(N),this._depthFBO=A,this._depthTexture=O}d.bindFramebuffer.set(this._depthFBO.framebuffer),d.viewport.set([0,0,_,b]),function(I,A,O,N){if(I.transform.projection.name==="globe")return;const B=I.context,q=B.gl;B.clear({depth:1});const re=I.useProgram("terrainDepth"),le=new l.DepthMode(q.LESS,l.DepthMode.ReadWrite,I.depthRangeFor3D);for(const he of N){const ce=O.getTile(he),me=Il(he.projMatrix,0);A.setupElevationDraw(ce,re),re.draw(B,q.TRIANGLES,le,l.StencilMode.disabled,l.ColorMode.unblended,l.CullFaceMode.backCCW,me,"terrain_depth",A.gridBuffer,A.gridIndexBuffer,A.gridNoSkirtSegments)}}(s,this,g,this.proxyCoords)}_setupProxiedCoordsForOrtho(s,d,g){if(s.getSource()instanceof Yt)return this._setupProxiedCoordsForImageSource(s,d,g);this._findCoveringTileCache[s.id]=this._findCoveringTileCache[s.id]||{};const _=this.proxiedCoords[s.id]=[],b=this.proxyCoords;for(let A=0;A<b.length;A++){const O=b[A],N=this._findTileCoveringTileID(O,s);if(N){const B=this._createProxiedId(O,N,g[O.key]&&g[O.key][s.id]);_.push(B),this.proxyToSource[O.key][s.id]=[B]}}let I=!1;for(let A=0;A<d.length;A++){const O=s.getTile(d[A]);if(!O||!O.hasData())continue;const N=this._findTileCoveringTileID(O.tileID,this.proxySourceCache);if(N&&N.tileID.canonical.z!==O.tileID.canonical.z){const B=this.proxyToSource[N.tileID.key][s.id],q=this._createProxiedId(N.tileID,O,g[N.tileID.key]&&g[N.tileID.key][s.id]);B?B.splice(B.length-1,0,q):this.proxyToSource[N.tileID.key][s.id]=[q],_.push(q),I=!0}}this._sourceTilesOverlap[s.id]=I}_setupProxiedCoordsForImageSource(s,d,g){if(!s.getSource().loaded())return;const _=this.proxiedCoords[s.id]=[],b=this.proxyCoords,I=s.getSource(),A=new l.Point(I.tileID.x,I.tileID.y)._div(1<<I.tileID.z),O=I.coordinates.map(l.MercatorCoordinate.fromLngLat).reduce((B,q)=>(B.min.x=Math.min(B.min.x,q.x-A.x),B.min.y=Math.min(B.min.y,q.y-A.y),B.max.x=Math.max(B.max.x,q.x-A.x),B.max.y=Math.max(B.max.y,q.y-A.y),B),{min:new l.Point(Number.MAX_VALUE,Number.MAX_VALUE),max:new l.Point(-Number.MAX_VALUE,-Number.MAX_VALUE)}),N=(B,q)=>{const re=B.wrap+B.canonical.x/(1<<B.canonical.z),le=B.canonical.y/(1<<B.canonical.z),he=l.EXTENT/(1<<B.canonical.z),ce=q.wrap+q.canonical.x/(1<<q.canonical.z),me=q.canonical.y/(1<<q.canonical.z);return re+he<ce+O.min.x||re>ce+O.max.x||le+he<me+O.min.y||le>me+O.max.y};for(let B=0;B<b.length;B++){const q=b[B];for(let re=0;re<d.length;re++){const le=s.getTile(d[re]);if(!le||!le.hasData()||N(q,le.tileID))continue;const he=this._createProxiedId(q,le,g[q.key]&&g[q.key][s.id]),ce=this.proxyToSource[q.key][s.id];ce?ce.push(he):this.proxyToSource[q.key][s.id]=[he],_.push(he)}}}_createProxiedId(s,d,g){let _=this.orthoMatrix;if(g){const b=g.find(I=>I.key===d.tileID.key);if(b)return b}if(d.tileID.key!==s.key){const b=s.canonical.z-d.tileID.canonical.z;let I,A,O;_=l.create();const N=d.tileID.wrap-s.wrap<<s.overscaledZ;b>0?(I=l.EXTENT>>b,A=I*((d.tileID.canonical.x<<b)-s.canonical.x+N),O=I*((d.tileID.canonical.y<<b)-s.canonical.y)):(I=l.EXTENT<<-b,A=l.EXTENT*(d.tileID.canonical.x-(s.canonical.x+N<<-b)),O=l.EXTENT*(d.tileID.canonical.y-(s.canonical.y<<-b))),l.ortho(_,0,I,0,I,0,1),l.translate(_,_,[A,O,0])}return new Bu(d.tileID,s.key,_)}_findTileCoveringTileID(s,d){let g=d.getTile(s);if(g&&g.hasData())return g;const _=this._findCoveringTileCache[d.id],b=_[s.key];if(g=b?d.getTileByID(b):null,g&&g.hasData()||b===null)return g;let I=g?g.tileID:s,A=I.overscaledZ;const O=d.getSource().minzoom,N=[];if(!b){const q=d.getSource().maxzoom;if(s.canonical.z>=q){const re=s.canonical.z-q;d.getSource().reparseOverscaled?(A=Math.max(s.canonical.z+2,d.transform.tileZoom),I=new l.OverscaledTileID(A,s.wrap,q,s.canonical.x>>re,s.canonical.y>>re)):re!==0&&(A=q,I=new l.OverscaledTileID(A,s.wrap,q,s.canonical.x>>re,s.canonical.y>>re))}I.key!==s.key&&(N.push(I.key),g=d.getTile(I))}const B=q=>{N.forEach(re=>{_[re]=q}),N.length=0};for(A-=1;A>=O&&(!g||!g.hasData());A--){g&&B(g.tileID.key);const q=I.calculateScaledKey(A);if(g=d.getTileByID(q),g&&g.hasData())break;const re=_[q];if(re===null)break;re===void 0?N.push(q):g=d.getTileByID(re)}return B(g?g.tileID.key:null),g&&g.hasData()?g:null}findDEMTileFor(s){return this.enabled?this._findTileCoveringTileID(s,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(s,d){let g=this._tilesDirty[s];g||(g=this._tilesDirty[s]={}),g[d.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const s=function(d){let g=0;const _=new l.StructArrayLayout2ui4,b=131;for(let I=1;I<129;I++){for(let A=1;A<129;A++)g=I*b+A,_.emplaceBack(g,g+1),_.emplaceBack(g,g+b),_.emplaceBack(g+1,g+b),I===128&&_.emplaceBack(g+b,g+b+1);_.emplaceBack(g+1,g+1+b)}return _}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(s),this.wireframeSegments=l.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,s.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}class Jn{static cacheKey(s,d,g,_){let b=`${d}${_?_.cacheKey:""}`;for(const I of g)s.usedDefines.includes(I)&&(b+=`/${I}`);return b}constructor(s,d,g,_,b,I){const A=s.gl;this.program=A.createProgram();const O=function(K){const se=[];for(let xe=0;xe<K.length;xe++){if(K[xe]===null)continue;const be=K[xe].split(" ");se.push(be.pop())}return se}(g.staticAttributes),N=_?_.getBinderAttributes():[],B=O.concat(N);let q=_?_.defines():[];q=q.concat(I.map(K=>`#define ${K}`));const re=s.isWebGL2?`#version 300 es
`:"",le=re+q.concat(s.extStandardDerivatives&&re.length===0?`#extension GL_OES_standard_derivatives : enable
`.concat(Fh):Fh,Fh,Du,Lm.fragmentSource,Cl.fragmentSource,g.fragmentSource).join(`
`),he=re+q.concat(`
#ifdef GL_ES
precision highp float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`,Du,Lm.vertexSource,Cl.vertexSource,Lu.vertexSource,g.vertexSource).join(`
`),ce=A.createShader(A.FRAGMENT_SHADER);if(A.isContextLost())return void(this.failedToCreate=!0);A.shaderSource(ce,le),A.compileShader(ce),A.attachShader(this.program,ce);const me=A.createShader(A.VERTEX_SHADER);if(A.isContextLost())this.failedToCreate=!0;else{A.shaderSource(me,he),A.compileShader(me),A.attachShader(this.program,me),this.attributes={},this.numAttributes=B.length;for(let K=0;K<this.numAttributes;K++)B[K]&&(A.bindAttribLocation(this.program,K,B[K]),this.attributes[B[K]]=K);A.linkProgram(this.program),A.deleteShader(me),A.deleteShader(ce),this.fixedUniforms=b(s),this.binderUniforms=_?_.getUniforms(s):[],I.includes("TERRAIN")&&(this.terrainUniforms=(K=>({u_dem:new l.Uniform1i(K),u_dem_prev:new l.Uniform1i(K),u_dem_unpack:new l.Uniform4f(K),u_dem_tl:new l.Uniform2f(K),u_dem_scale:new l.Uniform1f(K),u_dem_tl_prev:new l.Uniform2f(K),u_dem_scale_prev:new l.Uniform1f(K),u_dem_size:new l.Uniform1f(K),u_dem_lerp:new l.Uniform1f(K),u_exaggeration:new l.Uniform1f(K),u_depth:new l.Uniform1i(K),u_depth_size_inv:new l.Uniform2f(K),u_meter_to_dem:new l.Uniform1f(K),u_label_plane_matrix_inv:new l.UniformMatrix4f(K)}))(s)),I.includes("GLOBE")&&(this.globeUniforms=(K=>({u_tile_tl_up:new l.Uniform3f(K),u_tile_tr_up:new l.Uniform3f(K),u_tile_br_up:new l.Uniform3f(K),u_tile_bl_up:new l.Uniform3f(K),u_tile_up_scale:new l.Uniform1f(K)}))(s)),I.includes("FOG")&&(this.fogUniforms=(K=>({u_fog_matrix:new l.UniformMatrix4f(K),u_fog_range:new l.Uniform2f(K),u_fog_color:new l.Uniform4f(K),u_fog_horizon_blend:new l.Uniform1f(K),u_fog_temporal_offset:new l.Uniform1f(K),u_frustum_tl:new l.Uniform3f(K),u_frustum_tr:new l.Uniform3f(K),u_frustum_br:new l.Uniform3f(K),u_frustum_bl:new l.Uniform3f(K),u_globe_pos:new l.Uniform3f(K),u_globe_radius:new l.Uniform1f(K),u_globe_transition:new l.Uniform1f(K),u_is_globe:new l.Uniform1i(K),u_viewport:new l.Uniform2f(K)}))(s))}}setTerrainUniformValues(s,d){if(!this.terrainUniforms)return;const g=this.terrainUniforms;if(!this.failedToCreate){s.program.set(this.program);for(const _ in d)g[_]&&g[_].set(this.program,_,d[_])}}setGlobeUniformValues(s,d){if(!this.globeUniforms)return;const g=this.globeUniforms;if(!this.failedToCreate){s.program.set(this.program);for(const _ in d)g[_]&&g[_].set(this.program,_,d[_])}}setFogUniformValues(s,d){if(!this.fogUniforms)return;const g=this.fogUniforms;if(!this.failedToCreate){s.program.set(this.program);for(const _ in d)g[_].set(this.program,_,d[_])}}draw(s,d,g,_,b,I,A,O,N,B,q,re,le,he,ce){const me=s.gl;if(this.failedToCreate)return;s.program.set(this.program),s.setDepthMode(g),s.setStencilMode(_),s.setColorMode(b),s.setCullFace(I);for(const se of Object.keys(this.fixedUniforms))this.fixedUniforms[se].set(this.program,se,A[se]);he&&he.setUniforms(this.program,s,this.binderUniforms,re,{zoom:le});const K={[me.LINES]:2,[me.TRIANGLES]:3,[me.LINE_STRIP]:1}[d];for(const se of q.get()){const xe=se.vaos||(se.vaos={});(xe[O]||(xe[O]=new X0)).bind(s,this,N,he?he.getPaintVertexBuffers():[],B,se.vertexOffset,ce||[]),me.drawElements(d,se.primitiveLength*K,me.UNSIGNED_SHORT,se.primitiveOffset*K*2)}}}function Ic(p,s){const d=Math.pow(2,s.tileID.overscaledZ),g=s.tileSize*Math.pow(2,p.transform.tileZoom)/d,_=g*(s.tileID.canonical.x+s.tileID.wrap*d),b=g*s.tileID.canonical.y;return{u_image:0,u_texsize:s.imageAtlasTexture.size,u_tile_units_to_pixels:1/Ge(s,1,p.transform.tileZoom),u_pixel_coord_upper:[_>>16,b>>16],u_pixel_coord_lower:[65535&_,65535&b]}}const Fm=l.create(),Wh=(p,s,d,g,_,b,I,A,O,N,B)=>{const q=s.style.light,re=q.properties.get("position"),le=[re.x,re.y,re.z],he=l.create$1();q.properties.get("anchor")==="viewport"&&(l.fromRotation(he,-s.transform.angle),l.transformMat3(le,le,he));const ce=q.properties.get("color"),me=s.transform,K={u_matrix:p,u_lightpos:le,u_lightintensity:q.properties.get("intensity"),u_lightcolor:[ce.r,ce.g,ce.b],u_vertical_gradient:+d,u_opacity:g,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Fm,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:_,u_edge_radius:b};return me.projection.name==="globe"&&(K.u_tile_id=[I.canonical.x,I.canonical.y,1<<I.canonical.z],K.u_zoom_transition=O,K.u_inv_rot_matrix=B,K.u_merc_center=N,K.u_up_dir=me.projection.upVector(new l.CanonicalTileID(0,0,0),N[0]*l.EXTENT,N[1]*l.EXTENT),K.u_height_lift=A),K},Bm=(p,s,d,g,_,b,I,A,O,N,B,q)=>{const re=Wh(p,s,d,g,_,b,I,O,N,B,q),le={u_height_factor:-Math.pow(2,I.overscaledZ)/A.tileSize/8};return l.extend(re,Ic(s,A),le)},Gs=p=>({u_matrix:p}),qh=(p,s,d)=>l.extend(Gs(p),Ic(s,d)),K0=(p,s)=>({u_matrix:p,u_world:s}),Y0=(p,s,d,g)=>l.extend(qh(p,s,d),{u_world:g}),J0=l.create(),Zh=(p,s,d,g,_,b)=>{const I=p.transform,A=I.projection.name==="globe";let O;if(b.paint.get("circle-pitch-alignment")==="map")if(A){const B=l.globePixelsToTileUnits(I.zoom,s.canonical)*I._pixelsPerMercatorPixel;O=Float32Array.from([B,0,0,B])}else O=I.calculatePixelsToTileUnitsMatrix(d);else O=new Float32Array([I.pixelsToGLUnits[0],0,0,I.pixelsToGLUnits[1]]);const N={u_camera_to_center_distance:I.cameraToCenterDistance,u_matrix:p.translatePosMatrix(s.projMatrix,d,b.paint.get("circle-translate"),b.paint.get("circle-translate-anchor")),u_device_pixel_ratio:l.exported.devicePixelRatio,u_extrude_scale:O,u_inv_rot_matrix:J0,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(A){N.u_inv_rot_matrix=g,N.u_merc_center=_,N.u_tile_id=[s.canonical.x,s.canonical.y,1<<s.canonical.z],N.u_zoom_transition=l.globeToMercatorTransition(I.zoom);const B=_[0]*l.EXTENT,q=_[1]*l.EXTENT;N.u_up_dir=I.projection.upVector(new l.CanonicalTileID(0,0,0),B,q)}return N},Xh=p=>{const s=[];return p.paint.get("circle-pitch-alignment")==="map"&&s.push("PITCH_WITH_MAP"),p.paint.get("circle-pitch-scale")==="map"&&s.push("SCALE_WITH_MAP"),s},Kh=(p,s,d,g)=>{const _=l.EXTENT/d.tileSize;return{u_matrix:p,u_camera_to_center_distance:s.getCameraToCenterDistance(g),u_extrude_scale:[s.pixelsToGLUnits[0]/_,s.pixelsToGLUnits[1]/_]}},Nu=(p,s,d=1)=>({u_matrix:p,u_color:s,u_overlay:0,u_overlay_scale:d}),Nm=l.create(),jm=(p,s,d,g,_,b,I)=>{const A=p.transform,O=A.projection.name==="globe",N=O?l.globePixelsToTileUnits(A.zoom,s.canonical)*A._pixelsPerMercatorPixel:Ge(d,1,b),B={u_matrix:s.projMatrix,u_extrude_scale:N,u_intensity:I,u_inv_rot_matrix:Nm,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(O){B.u_inv_rot_matrix=g,B.u_merc_center=_,B.u_tile_id=[s.canonical.x,s.canonical.y,1<<s.canonical.z],B.u_zoom_transition=l.globeToMercatorTransition(A.zoom);const q=_[0]*l.EXTENT,re=_[1]*l.EXTENT;B.u_up_dir=A.projection.upVector(new l.CanonicalTileID(0,0,0),q,re)}return B},Q0=(p,s,d,g,_,b,I)=>{const A=p.transform,O=A.calculatePixelsToTileUnitsMatrix(s);return{u_matrix:Yh(p,s,d,g),u_pixels_to_tile_units:O,u_device_pixel_ratio:b,u_units_to_pixels:[1/A.pixelsToGLUnits[0],1/A.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:_,u_texsize:Pc(d)?s.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:Pl(s,p.transform),u_alpha_discard_threshold:0,u_trim_offset:I}},Mc=(p,s,d,g,_)=>{const b=p.transform;return{u_matrix:Yh(p,s,d,g),u_texsize:s.imageAtlasTexture.size,u_pixels_to_tile_units:b.calculatePixelsToTileUnitsMatrix(s),u_device_pixel_ratio:_,u_image:0,u_tile_units_to_pixels:Pl(s,b),u_units_to_pixels:[1/b.pixelsToGLUnits[0],1/b.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function Pl(p,s){return 1/Ge(p,1,s.tileZoom)}function Yh(p,s,d,g){return p.translatePosMatrix(g||s.tileID.projMatrix,s,d.paint.get("line-translate"),d.paint.get("line-translate-anchor"))}function Pc(p){const s=p.paint.get("line-dasharray").value;return s.value||s.kind!=="constant"}const Jh=(p,s,d,g,_,b)=>{return{u_matrix:p,u_tl_parent:s,u_scale_parent:d,u_fade_t:g.mix,u_opacity:g.opacity*_.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:_.paint.get("raster-brightness-min"),u_brightness_high:_.paint.get("raster-brightness-max"),u_saturation_factor:(A=_.paint.get("raster-saturation"),A>0?1-1/(1.001-A):-A),u_contrast_factor:(I=_.paint.get("raster-contrast"),I>0?1/(1-I):1+I),u_spin_weights:_a(_.paint.get("raster-hue-rotate")),u_perspective_transform:b};var I,A};function _a(p){p*=Math.PI/180;const s=Math.sin(p),d=Math.cos(p);return[(2*d+1)/3,(-Math.sqrt(3)*s-d+1)/3,(Math.sqrt(3)*s-d+1)/3]}const ju=l.create(),Qh=(p,s,d,g,_,b,I,A,O,N,B,q,re,le,he,ce)=>{const me=_.transform,K={u_is_size_zoom_constant:+(p==="constant"||p==="source"),u_is_size_feature_constant:+(p==="constant"||p==="camera"),u_size_t:s?s.uSizeT:0,u_size:s?s.uSize:0,u_camera_to_center_distance:me.cameraToCenterDistance,u_rotate_symbol:+d,u_aspect_ratio:me.width/me.height,u_fade_change:_.options.fadeDuration?_.symbolFadeChange:1,u_matrix:b,u_label_plane_matrix:I,u_coord_matrix:A,u_is_text:+O,u_pitch_with_map:+g,u_texsize:N,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:ju,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:ju,u_up_vector:[0,-1,0]};return ce.name==="globe"&&(K.u_tile_id=[B.canonical.x,B.canonical.y,1<<B.canonical.z],K.u_zoom_transition=q,K.u_inv_rot_matrix=le,K.u_merc_center=re,K.u_camera_forward=me._camera.forward(),K.u_ecef_origin=l.globeECEFOrigin(me.globeMatrix,B.toUnwrapped()),K.u_tile_matrix=Float32Array.from(me.globeMatrix),K.u_up_vector=he),K},Uu=(p,s,d,g,_,b,I,A,O,N,B,q,re,le,he,ce,me)=>l.extend(Qh(p,s,d,g,_,b,I,A,O,N,q,re,le,he,ce,me),{u_gamma_scale:g?_.transform.cameraToCenterDistance*Math.cos(_.terrain?0:_.transform._pitch):1,u_device_pixel_ratio:l.exported.devicePixelRatio,u_is_halo:+B}),Um=(p,s,d,g,_,b,I,A,O,N,B,q,re,le,he,ce)=>l.extend(Uu(p,s,d,g,_,b,I,A,!0,O,!0,B,q,re,le,he,ce),{u_texsize_icon:N,u_texture_icon:1}),ef=(p,s,d)=>({u_matrix:p,u_opacity:s,u_color:d}),e_=(p,s,d,g,_)=>l.extend(function(b,I,A){const O=I.imageManager.getPattern(b.toString()),{width:N,height:B}=I.imageManager.getPixelSize(),q=Math.pow(2,A.tileID.overscaledZ),re=A.tileSize*Math.pow(2,I.transform.tileZoom)/q,le=re*(A.tileID.canonical.x+A.tileID.wrap*q),he=re*A.tileID.canonical.y;return{u_image:0,u_pattern_tl:O.tl,u_pattern_br:O.br,u_texsize:[N,B],u_pattern_size:O.displaySize,u_tile_units_to_pixels:1/Ge(A,1,I.transform.tileZoom),u_pixel_coord_upper:[le>>16,he>>16],u_pixel_coord_lower:[65535&le,65535&he]}}(g,d,_),{u_matrix:p,u_opacity:s}),tf={fillExtrusion:p=>({u_matrix:new l.UniformMatrix4f(p),u_lightpos:new l.Uniform3f(p),u_lightintensity:new l.Uniform1f(p),u_lightcolor:new l.Uniform3f(p),u_vertical_gradient:new l.Uniform1f(p),u_opacity:new l.Uniform1f(p),u_edge_radius:new l.Uniform1f(p),u_ao:new l.Uniform2f(p),u_tile_id:new l.Uniform3f(p),u_zoom_transition:new l.Uniform1f(p),u_inv_rot_matrix:new l.UniformMatrix4f(p),u_merc_center:new l.Uniform2f(p),u_up_dir:new l.Uniform3f(p),u_height_lift:new l.Uniform1f(p)}),fillExtrusionPattern:p=>({u_matrix:new l.UniformMatrix4f(p),u_lightpos:new l.Uniform3f(p),u_lightintensity:new l.Uniform1f(p),u_lightcolor:new l.Uniform3f(p),u_vertical_gradient:new l.Uniform1f(p),u_height_factor:new l.Uniform1f(p),u_edge_radius:new l.Uniform1f(p),u_ao:new l.Uniform2f(p),u_tile_id:new l.Uniform3f(p),u_zoom_transition:new l.Uniform1f(p),u_inv_rot_matrix:new l.UniformMatrix4f(p),u_merc_center:new l.Uniform2f(p),u_up_dir:new l.Uniform3f(p),u_height_lift:new l.Uniform1f(p),u_image:new l.Uniform1i(p),u_texsize:new l.Uniform2f(p),u_pixel_coord_upper:new l.Uniform2f(p),u_pixel_coord_lower:new l.Uniform2f(p),u_tile_units_to_pixels:new l.Uniform1f(p),u_opacity:new l.Uniform1f(p)}),fill:p=>({u_matrix:new l.UniformMatrix4f(p)}),fillPattern:p=>({u_matrix:new l.UniformMatrix4f(p),u_image:new l.Uniform1i(p),u_texsize:new l.Uniform2f(p),u_pixel_coord_upper:new l.Uniform2f(p),u_pixel_coord_lower:new l.Uniform2f(p),u_tile_units_to_pixels:new l.Uniform1f(p)}),fillOutline:p=>({u_matrix:new l.UniformMatrix4f(p),u_world:new l.Uniform2f(p)}),fillOutlinePattern:p=>({u_matrix:new l.UniformMatrix4f(p),u_world:new l.Uniform2f(p),u_image:new l.Uniform1i(p),u_texsize:new l.Uniform2f(p),u_pixel_coord_upper:new l.Uniform2f(p),u_pixel_coord_lower:new l.Uniform2f(p),u_tile_units_to_pixels:new l.Uniform1f(p)}),circle:p=>({u_camera_to_center_distance:new l.Uniform1f(p),u_extrude_scale:new l.UniformMatrix2f(p),u_device_pixel_ratio:new l.Uniform1f(p),u_matrix:new l.UniformMatrix4f(p),u_inv_rot_matrix:new l.UniformMatrix4f(p),u_merc_center:new l.Uniform2f(p),u_tile_id:new l.Uniform3f(p),u_zoom_transition:new l.Uniform1f(p),u_up_dir:new l.Uniform3f(p)}),collisionBox:p=>({u_matrix:new l.UniformMatrix4f(p),u_camera_to_center_distance:new l.Uniform1f(p),u_extrude_scale:new l.Uniform2f(p)}),collisionCircle:p=>({u_matrix:new l.UniformMatrix4f(p),u_inv_matrix:new l.UniformMatrix4f(p),u_camera_to_center_distance:new l.Uniform1f(p),u_viewport_size:new l.Uniform2f(p)}),debug:p=>({u_color:new l.UniformColor(p),u_matrix:new l.UniformMatrix4f(p),u_overlay:new l.Uniform1i(p),u_overlay_scale:new l.Uniform1f(p)}),clippingMask:p=>({u_matrix:new l.UniformMatrix4f(p)}),heatmap:p=>({u_extrude_scale:new l.Uniform1f(p),u_intensity:new l.Uniform1f(p),u_matrix:new l.UniformMatrix4f(p),u_inv_rot_matrix:new l.UniformMatrix4f(p),u_merc_center:new l.Uniform2f(p),u_tile_id:new l.Uniform3f(p),u_zoom_transition:new l.Uniform1f(p),u_up_dir:new l.Uniform3f(p)}),heatmapTexture:p=>({u_image:new l.Uniform1i(p),u_color_ramp:new l.Uniform1i(p),u_opacity:new l.Uniform1f(p)}),hillshade:p=>({u_matrix:new l.UniformMatrix4f(p),u_image:new l.Uniform1i(p),u_latrange:new l.Uniform2f(p),u_light:new l.Uniform2f(p),u_shadow:new l.UniformColor(p),u_highlight:new l.UniformColor(p),u_accent:new l.UniformColor(p)}),hillshadePrepare:p=>({u_matrix:new l.UniformMatrix4f(p),u_image:new l.Uniform1i(p),u_dimension:new l.Uniform2f(p),u_zoom:new l.Uniform1f(p),u_unpack:new l.Uniform4f(p)}),line:p=>({u_matrix:new l.UniformMatrix4f(p),u_pixels_to_tile_units:new l.UniformMatrix2f(p),u_device_pixel_ratio:new l.Uniform1f(p),u_units_to_pixels:new l.Uniform2f(p),u_dash_image:new l.Uniform1i(p),u_gradient_image:new l.Uniform1i(p),u_image_height:new l.Uniform1f(p),u_texsize:new l.Uniform2f(p),u_tile_units_to_pixels:new l.Uniform1f(p),u_alpha_discard_threshold:new l.Uniform1f(p),u_trim_offset:new l.Uniform2f(p)}),linePattern:p=>({u_matrix:new l.UniformMatrix4f(p),u_texsize:new l.Uniform2f(p),u_pixels_to_tile_units:new l.UniformMatrix2f(p),u_device_pixel_ratio:new l.Uniform1f(p),u_image:new l.Uniform1i(p),u_units_to_pixels:new l.Uniform2f(p),u_tile_units_to_pixels:new l.Uniform1f(p),u_alpha_discard_threshold:new l.Uniform1f(p)}),raster:p=>({u_matrix:new l.UniformMatrix4f(p),u_tl_parent:new l.Uniform2f(p),u_scale_parent:new l.Uniform1f(p),u_fade_t:new l.Uniform1f(p),u_opacity:new l.Uniform1f(p),u_image0:new l.Uniform1i(p),u_image1:new l.Uniform1i(p),u_brightness_low:new l.Uniform1f(p),u_brightness_high:new l.Uniform1f(p),u_saturation_factor:new l.Uniform1f(p),u_contrast_factor:new l.Uniform1f(p),u_spin_weights:new l.Uniform3f(p),u_perspective_transform:new l.Uniform2f(p)}),symbolIcon:p=>({u_is_size_zoom_constant:new l.Uniform1i(p),u_is_size_feature_constant:new l.Uniform1i(p),u_size_t:new l.Uniform1f(p),u_size:new l.Uniform1f(p),u_camera_to_center_distance:new l.Uniform1f(p),u_rotate_symbol:new l.Uniform1i(p),u_aspect_ratio:new l.Uniform1f(p),u_fade_change:new l.Uniform1f(p),u_matrix:new l.UniformMatrix4f(p),u_label_plane_matrix:new l.UniformMatrix4f(p),u_coord_matrix:new l.UniformMatrix4f(p),u_is_text:new l.Uniform1i(p),u_pitch_with_map:new l.Uniform1i(p),u_texsize:new l.Uniform2f(p),u_tile_id:new l.Uniform3f(p),u_zoom_transition:new l.Uniform1f(p),u_inv_rot_matrix:new l.UniformMatrix4f(p),u_merc_center:new l.Uniform2f(p),u_camera_forward:new l.Uniform3f(p),u_tile_matrix:new l.UniformMatrix4f(p),u_up_vector:new l.Uniform3f(p),u_ecef_origin:new l.Uniform3f(p),u_texture:new l.Uniform1i(p)}),symbolSDF:p=>({u_is_size_zoom_constant:new l.Uniform1i(p),u_is_size_feature_constant:new l.Uniform1i(p),u_size_t:new l.Uniform1f(p),u_size:new l.Uniform1f(p),u_camera_to_center_distance:new l.Uniform1f(p),u_rotate_symbol:new l.Uniform1i(p),u_aspect_ratio:new l.Uniform1f(p),u_fade_change:new l.Uniform1f(p),u_matrix:new l.UniformMatrix4f(p),u_label_plane_matrix:new l.UniformMatrix4f(p),u_coord_matrix:new l.UniformMatrix4f(p),u_is_text:new l.Uniform1i(p),u_pitch_with_map:new l.Uniform1i(p),u_texsize:new l.Uniform2f(p),u_texture:new l.Uniform1i(p),u_gamma_scale:new l.Uniform1f(p),u_device_pixel_ratio:new l.Uniform1f(p),u_tile_id:new l.Uniform3f(p),u_zoom_transition:new l.Uniform1f(p),u_inv_rot_matrix:new l.UniformMatrix4f(p),u_merc_center:new l.Uniform2f(p),u_camera_forward:new l.Uniform3f(p),u_tile_matrix:new l.UniformMatrix4f(p),u_up_vector:new l.Uniform3f(p),u_ecef_origin:new l.Uniform3f(p),u_is_halo:new l.Uniform1i(p)}),symbolTextAndIcon:p=>({u_is_size_zoom_constant:new l.Uniform1i(p),u_is_size_feature_constant:new l.Uniform1i(p),u_size_t:new l.Uniform1f(p),u_size:new l.Uniform1f(p),u_camera_to_center_distance:new l.Uniform1f(p),u_rotate_symbol:new l.Uniform1i(p),u_aspect_ratio:new l.Uniform1f(p),u_fade_change:new l.Uniform1f(p),u_matrix:new l.UniformMatrix4f(p),u_label_plane_matrix:new l.UniformMatrix4f(p),u_coord_matrix:new l.UniformMatrix4f(p),u_is_text:new l.Uniform1i(p),u_pitch_with_map:new l.Uniform1i(p),u_texsize:new l.Uniform2f(p),u_texsize_icon:new l.Uniform2f(p),u_texture:new l.Uniform1i(p),u_texture_icon:new l.Uniform1i(p),u_gamma_scale:new l.Uniform1f(p),u_device_pixel_ratio:new l.Uniform1f(p),u_is_halo:new l.Uniform1i(p)}),background:p=>({u_matrix:new l.UniformMatrix4f(p),u_opacity:new l.Uniform1f(p),u_color:new l.UniformColor(p)}),backgroundPattern:p=>({u_matrix:new l.UniformMatrix4f(p),u_opacity:new l.Uniform1f(p),u_image:new l.Uniform1i(p),u_pattern_tl:new l.Uniform2f(p),u_pattern_br:new l.Uniform2f(p),u_texsize:new l.Uniform2f(p),u_pattern_size:new l.Uniform2f(p),u_pixel_coord_upper:new l.Uniform2f(p),u_pixel_coord_lower:new l.Uniform2f(p),u_tile_units_to_pixels:new l.Uniform1f(p)}),terrainRaster:Uh,terrainDepth:Uh,skybox:p=>({u_matrix:new l.UniformMatrix4f(p),u_sun_direction:new l.Uniform3f(p),u_cubemap:new l.Uniform1i(p),u_opacity:new l.Uniform1f(p),u_temporal_offset:new l.Uniform1f(p)}),skyboxGradient:p=>({u_matrix:new l.UniformMatrix4f(p),u_color_ramp:new l.Uniform1i(p),u_center_direction:new l.Uniform3f(p),u_radius:new l.Uniform1f(p),u_opacity:new l.Uniform1f(p),u_temporal_offset:new l.Uniform1f(p)}),skyboxCapture:p=>({u_matrix_3f:new l.UniformMatrix3f(p),u_sun_direction:new l.Uniform3f(p),u_sun_intensity:new l.Uniform1f(p),u_color_tint_r:new l.Uniform4f(p),u_color_tint_m:new l.Uniform4f(p),u_luminance:new l.Uniform1f(p)}),globeRaster:p=>({u_proj_matrix:new l.UniformMatrix4f(p),u_globe_matrix:new l.UniformMatrix4f(p),u_normalize_matrix:new l.UniformMatrix4f(p),u_merc_matrix:new l.UniformMatrix4f(p),u_zoom_transition:new l.Uniform1f(p),u_merc_center:new l.Uniform2f(p),u_image0:new l.Uniform1i(p),u_grid_matrix:new l.UniformMatrix3f(p),u_skirt_height:new l.Uniform1f(p),u_frustum_tl:new l.Uniform3f(p),u_frustum_tr:new l.Uniform3f(p),u_frustum_br:new l.Uniform3f(p),u_frustum_bl:new l.Uniform3f(p),u_globe_pos:new l.Uniform3f(p),u_globe_radius:new l.Uniform1f(p),u_viewport:new l.Uniform2f(p)}),globeAtmosphere:p=>({u_frustum_tl:new l.Uniform3f(p),u_frustum_tr:new l.Uniform3f(p),u_frustum_br:new l.Uniform3f(p),u_frustum_bl:new l.Uniform3f(p),u_horizon:new l.Uniform1f(p),u_transition:new l.Uniform1f(p),u_fadeout_range:new l.Uniform1f(p),u_color:new l.Uniform4f(p),u_high_color:new l.Uniform4f(p),u_space_color:new l.Uniform4f(p),u_star_intensity:new l.Uniform1f(p),u_star_density:new l.Uniform1f(p),u_star_size:new l.Uniform1f(p),u_temporal_offset:new l.Uniform1f(p),u_horizon_angle:new l.Uniform1f(p),u_rotation_matrix:new l.UniformMatrix4f(p)})};let Vu;function Ac(p,s,d,g,_,b,I){const A=p.context,O=A.gl,N=p.transform,B=p.useProgram("collisionBox"),q=[];let re=0,le=0;for(let be=0;be<g.length;be++){const Re=g[be],ze=s.getTile(Re),Oe=ze.getBucket(d);if(!Oe)continue;const Ve=Ui(Re,Oe,N);let Ue=Ve;_[0]===0&&_[1]===0||(Ue=p.translatePosMatrix(Ve,ze,_,b));const Ke=I?Oe.textCollisionBox:Oe.iconCollisionBox,At=Oe.collisionCircleArray;if(At.length>0){const qe=l.create(),ht=Ue;l.mul(qe,Oe.placementInvProjMatrix,N.glCoordMatrix),l.mul(qe,qe,Oe.placementViewportMatrix),q.push({circleArray:At,circleOffset:le,transform:ht,invTransform:qe,projection:Oe.getProjection()}),re+=At.length/4,le=re}Ke&&(p.terrain&&p.terrain.setupElevationDraw(ze,B),B.draw(A,O.LINES,l.DepthMode.disabled,l.StencilMode.disabled,p.colorModeForRenderPass(),l.CullFaceMode.disabled,Kh(Ue,N,ze,Oe.getProjection()),d.id,Ke.layoutVertexBuffer,Ke.indexBuffer,Ke.segments,null,N.zoom,null,[Ke.collisionVertexBuffer,Ke.collisionVertexBufferExt]))}if(!I||!q.length)return;const he=p.useProgram("collisionCircle"),ce=new l.StructArrayLayout2f1f2i16;ce.resize(4*re),ce._trim();let me=0;for(const be of q)for(let Re=0;Re<be.circleArray.length/4;Re++){const ze=4*Re,Oe=be.circleArray[ze+0],Ve=be.circleArray[ze+1],Ue=be.circleArray[ze+2],Ke=be.circleArray[ze+3];ce.emplace(me++,Oe,Ve,Ue,Ke,0),ce.emplace(me++,Oe,Ve,Ue,Ke,1),ce.emplace(me++,Oe,Ve,Ue,Ke,2),ce.emplace(me++,Oe,Ve,Ue,Ke,3)}(!Vu||Vu.length<2*re)&&(Vu=function(be){const Re=2*be,ze=new l.StructArrayLayout3ui6;ze.resize(Re),ze._trim();for(let Oe=0;Oe<Re;Oe++){const Ve=6*Oe;ze.uint16[Ve+0]=4*Oe+0,ze.uint16[Ve+1]=4*Oe+1,ze.uint16[Ve+2]=4*Oe+2,ze.uint16[Ve+3]=4*Oe+2,ze.uint16[Ve+4]=4*Oe+3,ze.uint16[Ve+5]=4*Oe+0}return ze}(re));const K=A.createIndexBuffer(Vu,!0),se=A.createVertexBuffer(ce,l.collisionCircleLayout.members,!0);for(const be of q){const Re={u_matrix:be.transform,u_inv_matrix:be.invTransform,u_camera_to_center_distance:(xe=N).getCameraToCenterDistance(be.projection),u_viewport_size:[xe.width,xe.height]};he.draw(A,O.TRIANGLES,l.DepthMode.disabled,l.StencilMode.disabled,p.colorModeForRenderPass(),l.CullFaceMode.disabled,Re,d.id,se,K,l.SegmentVector.simpleSegment(0,2*be.circleOffset,be.circleArray.length,be.circleArray.length/2),null,N.zoom)}var xe;se.destroy(),K.destroy()}const Vm=l.create();function nf({width:p,height:s,anchor:d,textOffset:g,textScale:_},b){const{horizontalAlign:I,verticalAlign:A}=l.getAnchorAlignment(d),O=-(I-.5)*p,N=-(A-.5)*s,B=l.evaluateVariableOffset(d,g);return new l.Point((O/_+B[0])*b,(N/_+B[1])*b)}function t_(p,s,d,g,_,b,I,A,O,N,B){const q=p.text.placedSymbolArray,re=p.text.dynamicLayoutVertexArray,le=p.icon.dynamicLayoutVertexArray,he={},ce=p.getProjection(),me=Kn(A,ce,b),K=b.elevation,se=ce.upVectorScale(A.canonical,b.center.lat,b.worldSize).metersToTile;re.clear();for(let xe=0;xe<q.length;xe++){const be=q.get(xe),{tileAnchorX:Re,tileAnchorY:ze,numGlyphs:Oe}=be,Ve=be.hidden||!be.crossTileID||p.allowVerticalPlacement&&!be.placedOrientation?null:g[be.crossTileID];if(Ve){let Ue=0,Ke=0,At=0;if(K){const Dt=K?K.getAtTileOffset(A,Re,ze):0,[dn,Rn,en]=ce.upVector(A.canonical,Re,ze);Ue=Dt*dn*se,Ke=Dt*Rn*se,At=Dt*en*se}let[qe,ht,et,Et]=mr(be.projectedAnchorX+Ue,be.projectedAnchorY+Ke,be.projectedAnchorZ+At,d?me:I);const Xe=Xo(b.getCameraToCenterDistance(ce),Et);let dt=_.evaluateSizeForFeature(p.textSizeData,N,be)*Xe/l.ONE_EM;d&&(dt*=p.tilePixelRatio/O);const Lt=nf(Ve,dt);d?({x:qe,y:ht,z:et}=ce.projectTilePoint(Re+Lt.x,ze+Lt.y,A.canonical),[qe,ht,et]=mr(qe+Ue,ht+Ke,et+At,I)):(s&&Lt._rotate(-b.angle),qe+=Lt.x,ht+=Lt.y,et=0);const vt=p.allowVerticalPlacement&&be.placedOrientation===l.WritingMode.vertical?Math.PI/2:0;for(let Dt=0;Dt<Oe;Dt++)l.addDynamicAttributes(re,qe,ht,et,vt);B&&be.associatedIconIndex>=0&&(he[be.associatedIconIndex]={x:qe,y:ht,z:et,angle:vt})}else Kr(Oe,re)}if(B){le.clear();const xe=p.icon.placedSymbolArray;for(let be=0;be<xe.length;be++){const Re=xe.get(be),{numGlyphs:ze}=Re,Oe=he[be];if(Re.hidden||!Oe)Kr(ze,le);else{const{x:Ve,y:Ue,z:Ke,angle:At}=Oe;for(let qe=0;qe<ze;qe++)l.addDynamicAttributes(le,Ve,Ue,Ke,At)}}p.icon.dynamicLayoutVertexBuffer.updateData(le)}p.text.dynamicLayoutVertexBuffer.updateData(re)}function rf(p,s,d){return d.iconsInText&&s?"symbolTextAndIcon":p?"symbolSDF":"symbolIcon"}function Hm(p,s,d,g,_,b,I,A,O,N,B,q){const re=p.context,le=re.gl,he=p.transform,ce=A==="map",me=O==="map",K=ce&&d.layout.get("symbol-placement")!=="point",se=ce&&!me&&!K,xe=d.layout.get("symbol-sort-key").constantOr(1)!==void 0;let be=!1;const Re=p.depthModeForSublayer(0,l.DepthMode.ReadOnly),ze=[l.mercatorXfromLng(he.center.lng),l.mercatorYfromLat(he.center.lat)],Oe=d.layout.get("text-variable-anchor"),Ve=he.projection.name==="globe",Ue=[],Ke=[0,-1,0];let At=Ke;!Ve&&!he.mercatorFromTransition||ce||(At=function(qe){const ht=qe._camera.getWorldToCamera(qe.worldSize,1),et=l.multiply([],ht,qe.globeMatrix);l.invert(et,et);const Et=[0,0,0],Xe=[0,1,0,0];return l.transformMat4$1(Xe,Xe,et),Et[0]=Xe[0],Et[1]=Xe[1],Et[2]=Xe[2],l.normalize(Et,Et),Et}(he));for(const qe of g){const ht=s.getTile(qe),et=ht.getBucket(d);if(!et||et.projection.name==="mercator"&&Ve)continue;const Et=_?et.text:et.icon;if(!Et||et.fullyClipped||!Et.segments.get().length)continue;const Xe=Et.programConfigurations.get(d.id),dt=_||et.sdfIcons,Lt=_?et.textSizeData:et.iconSizeData,vt=me||he.pitch!==0,Dt=l.evaluateSizeForZoom(Lt,he.zoom);let dn,Rn,en,_n,Hn=[0,0],Un=null;if(_)Rn=ht.glyphAtlasTexture,en=le.LINEAR,dn=ht.glyphAtlasTexture.size,et.iconsInText&&(Hn=ht.imageAtlasTexture.size,Un=ht.imageAtlasTexture,_n=vt||p.options.rotating||p.options.zooming||Lt.kind==="composite"||Lt.kind==="camera"?le.LINEAR:le.NEAREST);else{const Za=d.layout.get("icon-size").constantOr(0)!==1||et.iconsNeedLinear;Rn=ht.imageAtlasTexture,en=dt||p.options.rotating||p.options.zooming||Za||vt?le.LINEAR:le.NEAREST,dn=ht.imageAtlasTexture.size}const cn=et.projection.name==="globe",dr=cn?At:Ke,yr=cn?l.globeToMercatorTransition(he.zoom):0,_r=Kn(qe,et.getProjection(),he),xr=he.calculatePixelsToTileUnitsMatrix(ht),Hi=nt(_r,ht.tileID.canonical,me,ce,he,et.getProjection(),xr),Ti=p.terrain&&me&&K?l.invert(l.create(),Hi):Vm,Do=vr(_r,ht.tileID.canonical,me,ce,he,et.getProjection(),xr),ba=Oe&&et.hasTextData(),jr=d.layout.get("icon-text-fit")!=="none"&&ba&&et.hasIconData();if(K){const Za=he.elevation,Es=Za?Za.getAtTileOffsetFunc(qe,he.center.lat,he.worldSize,et.getProjection()):null,Ks=Si(_r,ht.tileID.canonical,me,ce,he,et.getProjection(),xr);Pn(et,_r,p,_,Ks,Do,me,N,Es,qe)}const br=K||_&&Oe||jr,rr=p.translatePosMatrix(_r,ht,b,I),ai=br?Vm:Hi,Ki=p.translatePosMatrix(Do,ht,b,I,!0),kr=et.getProjection().createInversionMatrix(he,qe.canonical),so=[];p.terrainRenderModeElevated()&&me&&so.push("PITCH_WITH_MAP_TERRAIN"),cn&&so.push("PROJECTION_GLOBE_VIEW"),br&&so.push("PROJECTED_POS_ON_VIEWPORT");const od=dt&&d.paint.get(_?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Xs;Xs=dt?et.iconsInText?Um(Lt.kind,Dt,se,me,p,rr,ai,Ki,dn,Hn,qe,yr,ze,kr,dr,et.getProjection()):Uu(Lt.kind,Dt,se,me,p,rr,ai,Ki,_,dn,!0,qe,yr,ze,kr,dr,et.getProjection()):Qh(Lt.kind,Dt,se,me,p,rr,ai,Ki,_,dn,qe,yr,ze,kr,dr,et.getProjection());const jc={program:p.useProgram(rf(dt,_,et),Xe,so),buffers:Et,uniformValues:Xs,atlasTexture:Rn,atlasTextureIcon:Un,atlasInterpolation:en,atlasInterpolationIcon:_n,isSDF:dt,hasHalo:od,tile:ht,labelPlaneMatrixInv:Ti};if(xe&&et.canOverlap){be=!0;const Za=Et.segments.get();for(const Es of Za)Ue.push({segments:new l.SegmentVector([Es]),sortKey:Es.sortKey,state:jc})}else Ue.push({segments:Et.segments,sortKey:0,state:jc})}be&&Ue.sort((qe,ht)=>qe.sortKey-ht.sortKey);for(const qe of Ue){const ht=qe.state;if(p.terrain&&p.terrain.setupElevationDraw(ht.tile,ht.program,{useDepthForOcclusion:!Ve,labelPlaneMatrixInv:ht.labelPlaneMatrixInv}),re.activeTexture.set(le.TEXTURE0),ht.atlasTexture.bind(ht.atlasInterpolation,le.CLAMP_TO_EDGE),ht.atlasTextureIcon&&(re.activeTexture.set(le.TEXTURE1),ht.atlasTextureIcon&&ht.atlasTextureIcon.bind(ht.atlasInterpolationIcon,le.CLAMP_TO_EDGE)),ht.isSDF){const et=ht.uniformValues;ht.hasHalo&&(et.u_is_halo=1,Rc(ht.buffers,qe.segments,d,p,ht.program,Re,B,q,et)),et.u_is_halo=0}Rc(ht.buffers,qe.segments,d,p,ht.program,Re,B,q,ht.uniformValues)}}function Rc(p,s,d,g,_,b,I,A,O){const N=g.context,B=[p.dynamicLayoutVertexBuffer,p.opacityVertexBuffer,p.globeExtVertexBuffer];_.draw(N,N.gl.TRIANGLES,b,I,A,l.CullFaceMode.disabled,O,d.id,p.layoutVertexBuffer,p.indexBuffer,s,d.paint,g.transform.zoom,p.programConfigurations.get(d.id),B)}function Gm(p,s,d,g,_,b,I){const A=p.context.gl,O=d.paint.get("fill-pattern"),N=O&&O.constantOr(1);let B,q,re,le,he;I?(q=N&&!d.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",B=A.LINES):(q=N?"fillPattern":"fill",B=A.TRIANGLES);for(const ce of g){const me=s.getTile(ce);if(N&&!me.patternsLoaded())continue;const K=me.getBucket(d);if(!K)continue;p.prepareDrawTile();const se=K.programConfigurations.get(d.id),xe=p.useProgram(q,se);N&&(p.context.activeTexture.set(A.TEXTURE0),me.imageAtlasTexture.bind(A.LINEAR,A.CLAMP_TO_EDGE),se.updatePaintBuffers());const be=O.constantOr(null);if(be&&me.imageAtlas){const ze=me.imageAtlas.patternPositions[be.toString()];ze&&se.setConstantPatternPositions(ze)}const Re=p.translatePosMatrix(ce.projMatrix,me,d.paint.get("fill-translate"),d.paint.get("fill-translate-anchor"));if(I){le=K.indexBuffer2,he=K.segments2;const ze=p.terrain&&p.terrain.renderingToTexture?p.terrain.drapeBufferSize:[A.drawingBufferWidth,A.drawingBufferHeight];re=q==="fillOutlinePattern"&&N?Y0(Re,p,me,ze):K0(Re,ze)}else le=K.indexBuffer,he=K.segments,re=N?qh(Re,p,me):Gs(Re);p.prepareDrawProgram(p.context,xe,ce.toUnwrapped()),xe.draw(p.context,B,_,p.stencilModeForClipping(ce),b,l.CullFaceMode.disabled,re,d.id,K.layoutVertexBuffer,le,he,d.paint,p.transform.zoom,se)}}function Hu(p,s,d,g,_,b,I){const A=p.context,O=A.gl,N=p.transform,B=d.paint.get("fill-extrusion-pattern"),q=B.constantOr(1),re=d.paint.get("fill-extrusion-opacity"),le=[d.paint.get("fill-extrusion-ambient-occlusion-intensity"),d.paint.get("fill-extrusion-ambient-occlusion-radius")],he=d.layout.get("fill-extrusion-edge-radius"),ce=he>0&&!d.paint.get("fill-extrusion-rounded-roof"),me=ce?0:he,K=N.projection.name==="globe"?l.fillExtrusionHeightLift():0,se=N.projection.name==="globe",xe=se?l.globeToMercatorTransition(N.zoom):0,be=[l.mercatorXfromLng(N.center.lng),l.mercatorYfromLat(N.center.lat)],Re=[];se&&Re.push("PROJECTION_GLOBE_VIEW"),le[0]>0&&Re.push("FAUX_AO"),ce&&Re.push("ZERO_ROOF_RADIUS");for(const ze of g){const Oe=s.getTile(ze),Ve=Oe.getBucket(d);if(!Ve||Ve.projection.name!==N.projection.name)continue;const Ue=Ve.programConfigurations.get(d.id),Ke=p.useProgram(q?"fillExtrusionPattern":"fillExtrusion",Ue,Re);if(p.terrain){const dt=p.terrain;if(p.style.terrainSetForDrapingOnly())dt.setupElevationDraw(Oe,Ke,{useMeterToDem:!0});else{if(!Ve.enableTerrain)continue;if(dt.setupElevationDraw(Oe,Ke,{useMeterToDem:!0}),Wm(A,s,ze,Ve,d,dt),!Ve.centroidVertexBuffer){const Lt=Ke.attributes.a_centroid_pos;Lt!==void 0&&O.vertexAttrib2f(Lt,0,0)}}}q&&(p.context.activeTexture.set(O.TEXTURE0),Oe.imageAtlasTexture.bind(O.LINEAR,O.CLAMP_TO_EDGE),Ue.updatePaintBuffers());const At=B.constantOr(null);if(At&&Oe.imageAtlas){const dt=Oe.imageAtlas.patternPositions[At.toString()];dt&&Ue.setConstantPatternPositions(dt)}const qe=p.translatePosMatrix(ze.projMatrix,Oe,d.paint.get("fill-extrusion-translate"),d.paint.get("fill-extrusion-translate-anchor")),ht=N.projection.createInversionMatrix(N,ze.canonical),et=d.paint.get("fill-extrusion-vertical-gradient"),Et=q?Bm(qe,p,et,re,le,me,ze,Oe,K,xe,be,ht):Wh(qe,p,et,re,le,me,ze,K,xe,be,ht);p.prepareDrawProgram(A,Ke,ze.toUnwrapped());const Xe=[];p.terrain&&Xe.push(Ve.centroidVertexBuffer),se&&Xe.push(Ve.layoutVertexExtBuffer),Ke.draw(A,A.gl.TRIANGLES,_,b,I,l.CullFaceMode.backCCW,Et,d.id,Ve.layoutVertexBuffer,Ve.indexBuffer,Ve.segments,d.paint,p.transform.zoom,Ue,Xe)}}function Wm(p,s,d,g,_,b){const I=[K=>{let se=K.canonical.x-1,xe=K.wrap;return se<0&&(se=(1<<K.canonical.z)-1,xe--),new l.OverscaledTileID(K.overscaledZ,xe,K.canonical.z,se,K.canonical.y)},K=>{let se=K.canonical.x+1,xe=K.wrap;return se===1<<K.canonical.z&&(se=0,xe++),new l.OverscaledTileID(K.overscaledZ,xe,K.canonical.z,se,K.canonical.y)},K=>new l.OverscaledTileID(K.overscaledZ,K.wrap,K.canonical.z,K.canonical.x,(K.canonical.y===0?1<<K.canonical.z:K.canonical.y)-1),K=>new l.OverscaledTileID(K.overscaledZ,K.wrap,K.canonical.z,K.canonical.x,K.canonical.y===(1<<K.canonical.z)-1?0:K.canonical.y+1)],A=K=>{const se=s.getSource().minzoom,xe=Re=>{const ze=s.getTileByID(Re);if(ze&&ze.hasData())return ze.getBucket(_)},be=[0,-1,1];for(const Re of be){if(K.overscaledZ+Re<se)continue;const ze=xe(K.calculateScaledKey(K.overscaledZ+Re));if(ze)return ze}},O=[0,0,0],N=(K,se)=>(O[0]=Math.min(K.min.y,se.min.y),O[1]=Math.max(K.max.y,se.max.y),O[2]=l.EXTENT-se.min.x>K.max.x?se.min.x-l.EXTENT:K.max.x,O),B=(K,se)=>(O[0]=Math.min(K.min.x,se.min.x),O[1]=Math.max(K.max.x,se.max.x),O[2]=l.EXTENT-se.min.y>K.max.y?se.min.y-l.EXTENT:K.max.y,O),q=[(K,se)=>N(K,se),(K,se)=>N(se,K),(K,se)=>B(K,se),(K,se)=>B(se,K)],re=new l.Point(0,0);let le,he,ce;const me=(K,se,xe,be,Re)=>{const ze=[[be?xe:K,be?K:xe,0],[be?xe:se,be?se:xe,0]],Oe=Re<0?l.EXTENT+Re:Re,Ve=[be?Oe:(K+se)/2,be?(K+se)/2:Oe,0];return xe===0&&Re<0||xe!==0&&Re>0?b.getForTilePoints(ce,[Ve],!0,he):ze.push(Ve),b.getForTilePoints(d,ze,!0,le),Math.max(ze[0][2],ze[1][2],Ve[2])/b.exaggeration()};for(let K=0;K<4;K++){const se=(K<2?1:5)-K,xe=g.borders[K];if(xe.length===0)continue;const be=ce=I[K](d),Re=A(be);if(!(Re&&Re instanceof l.FillExtrusionBucket&&Re.enableTerrain)||g.borderDoneWithNeighborZ[K]===Re.canonical.z&&Re.borderDoneWithNeighborZ[se]===g.canonical.z||(he=b.findDEMTileFor(be),!he||!he.dem))continue;if(!le){const Ue=b.findDEMTileFor(d);if(!Ue||!Ue.dem)return;le=Ue}const ze=Re.borders[se];let Oe=0;const Ve=Re.borderDoneWithNeighborZ[se]!==g.canonical.z;if(g.canonical.z===Re.canonical.z){for(let Ue=0;Ue<xe.length;Ue++){const Ke=g.featuresOnBorder[xe[Ue]],At=Ke.borders[K];let qe;for(;Oe<ze.length&&(qe=Re.featuresOnBorder[ze[Oe]],!(qe.borders[se][1]>At[0]+3));)Ve&&Re.encodeCentroid(void 0,qe,!1),Oe++;if(qe&&Oe<ze.length){const ht=Oe;let et=0;for(;!(qe.borders[se][0]>At[1]-3)&&(et++,++Oe!==ze.length);)qe=Re.featuresOnBorder[ze[Oe]];if(qe=Re.featuresOnBorder[ze[ht]],Ke.intersectsCount()>1||qe.intersectsCount()>1||et!==1){et!==1&&(Oe=ht),g.encodeCentroid(void 0,Ke,!1),Ve&&Re.encodeCentroid(void 0,qe,!1);continue}const Et=q[K](Ke,qe),Xe=K%2?l.EXTENT-1:0;re.x=me(Et[0],Math.min(l.EXTENT-1,Et[1]),Xe,K<2,Et[2]),re.y=0,g.encodeCentroid(re,Ke,!1),Ve&&Re.encodeCentroid(re,qe,!1)}else g.encodeCentroid(void 0,Ke,!1)}g.borderDoneWithNeighborZ[K]=Re.canonical.z,g.needsCentroidUpdate=!0,Ve&&(Re.borderDoneWithNeighborZ[se]=g.canonical.z,Re.needsCentroidUpdate=!0)}else{for(const Ue of xe)g.encodeCentroid(void 0,g.featuresOnBorder[Ue],!1);if(Ve){for(const Ue of ze)Re.encodeCentroid(void 0,Re.featuresOnBorder[Ue],!1);Re.borderDoneWithNeighborZ[se]=g.canonical.z,Re.needsCentroidUpdate=!0}g.borderDoneWithNeighborZ[K]=Re.canonical.z,g.needsCentroidUpdate=!0}}(g.needsCentroidUpdate||!g.centroidVertexBuffer&&g.centroidVertexArray.length!==0)&&g.uploadCentroid(p)}const Al=new l.Color(1,0,0,1),n_=new l.Color(0,1,0,1),r_=new l.Color(0,0,1,1),i_=new l.Color(1,0,1,1),o_=new l.Color(0,1,1,1);function a_(p,s,d){const g=p.context,_=p.transform,b=g.gl,I=_.projection.name==="globe",A=I?["PROJECTION_GLOBE_VIEW"]:null;let O=d.projMatrix;if(I&&l.globeToMercatorTransition(_.zoom)>0){const Ke=l.transitionTileAABBinECEF(d.canonical,_),At=l.globeDenormalizeECEF(Ke);O=l.multiply(new Float32Array(16),_.globeMatrix,At),l.multiply(O,_.projMatrix,O)}const N=p.useProgram("debug",null,A),B=s.getTileByID(d.key);p.terrain&&p.terrain.setupElevationDraw(B,N);const q=l.DepthMode.disabled,re=l.StencilMode.disabled,le=p.colorModeForRenderPass(),he="$debug";g.activeTexture.set(b.TEXTURE0),p.emptyTexture.bind(b.LINEAR,b.CLAMP_TO_EDGE),I?B._makeGlobeTileDebugBuffers(p.context,_):B._makeDebugTileBoundsBuffers(p.context,_.projection);const ce=B._tileDebugBuffer||p.debugBuffer,me=B._tileDebugIndexBuffer||p.debugIndexBuffer,K=B._tileDebugSegments||p.debugSegments;N.draw(g,b.LINE_STRIP,q,re,le,l.CullFaceMode.disabled,Nu(O,l.Color.red),he,ce,me,K,null,null,null,[B._globeTileDebugBorderBuffer]);const se=B.latestRawTileData,xe=Math.floor((se&&se.byteLength||0)/1024),be=s.getTile(d).tileSize,Re=512/Math.min(be,512)*(d.overscaledZ/_.zoom)*.5;let ze=d.canonical.toString();d.overscaledZ!==d.canonical.z&&(ze+=` => ${d.overscaledZ}`),ze+=` ${xe}kb`,function(Ke,At){Ke.initDebugOverlayCanvas();const qe=Ke.debugOverlayCanvas,ht=Ke.context.gl,et=Ke.debugOverlayCanvas.getContext("2d");et.clearRect(0,0,qe.width,qe.height),et.shadowColor="white",et.shadowBlur=2,et.lineWidth=1.5,et.strokeStyle="white",et.textBaseline="top",et.font="bold 36px Open Sans, sans-serif",et.fillText(At,5,5),et.strokeText(At,5,5),Ke.debugOverlayTexture.update(qe),Ke.debugOverlayTexture.bind(ht.LINEAR,ht.CLAMP_TO_EDGE)}(p,ze);const Oe=B._tileDebugTextBuffer||p.debugBuffer,Ve=B._tileDebugTextIndexBuffer||p.quadTriangleIndexBuffer,Ue=B._tileDebugTextSegments||p.debugSegments;N.draw(g,b.TRIANGLES,q,re,l.ColorMode.alphaBlended,l.CullFaceMode.disabled,Nu(O,l.Color.transparent,Re),he,Oe,Ve,Ue,null,null,null,[B._globeTileDebugTextBuffer])}function qm(p,s,d,g){Rl(p,0,s+d/2,p.transform.width,d,g)}function Gu(p,s,d,g){Rl(p,s-d/2,0,d,p.transform.height,g)}function Rl(p,s,d,g,_,b){const I=p.context,A=I.gl;A.enable(A.SCISSOR_TEST),A.scissor(s*l.exported.devicePixelRatio,d*l.exported.devicePixelRatio,g*l.exported.devicePixelRatio,_*l.exported.devicePixelRatio),I.clear({color:b}),A.disable(A.SCISSOR_TEST)}const Zm=l.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:Xm}=Zm;function Wa(p,s,d,g){p.emplaceBack(s,d,g)}class Wu{constructor(s){this.vertexArray=new l.StructArrayLayout3f12,this.indices=new l.StructArrayLayout3ui6,Wa(this.vertexArray,-1,-1,1),Wa(this.vertexArray,1,-1,1),Wa(this.vertexArray,-1,1,1),Wa(this.vertexArray,1,1,1),Wa(this.vertexArray,-1,-1,-1),Wa(this.vertexArray,1,-1,-1),Wa(this.vertexArray,-1,1,-1),Wa(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=s.createVertexBuffer(this.vertexArray,Xm),this.indexBuffer=s.createIndexBuffer(this.indices),this.segment=l.SegmentVector.simpleSegment(0,0,36,12)}}function zo(p,s,d,g,_,b){const I=p.gl,A=s.paint.get("sky-atmosphere-color"),O=s.paint.get("sky-atmosphere-halo-color"),N=s.paint.get("sky-atmosphere-sun-intensity"),B=((q,re,le,he,ce)=>({u_matrix_3f:q,u_sun_direction:re,u_sun_intensity:le,u_color_tint_r:[he.r,he.g,he.b,he.a],u_color_tint_m:[ce.r,ce.g,ce.b,ce.a],u_luminance:5e-5}))(l.fromMat4(l.create$1(),g),_,N,A,O);I.framebufferTexture2D(I.FRAMEBUFFER,I.COLOR_ATTACHMENT0,I.TEXTURE_CUBE_MAP_POSITIVE_X+b,s.skyboxTexture,0),d.draw(p,I.TRIANGLES,l.DepthMode.disabled,l.StencilMode.disabled,l.ColorMode.unblended,l.CullFaceMode.frontCW,B,"skyboxCapture",s.skyboxGeometry.vertexBuffer,s.skyboxGeometry.indexBuffer,s.skyboxGeometry.segment)}const Oc=l.createLayout([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class Km{constructor(s){const d=new l.StructArrayLayout5f20;d.emplaceBack(-1,1,1,0,0),d.emplaceBack(1,1,1,1,0),d.emplaceBack(1,-1,1,1,1),d.emplaceBack(-1,-1,1,0,1);const g=new l.StructArrayLayout3ui6;g.emplaceBack(0,1,2),g.emplaceBack(2,3,0),this.vertexBuffer=s.createVertexBuffer(d,Oc.members),this.indexBuffer=s.createIndexBuffer(g),this.segments=l.SegmentVector.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const Ws={symbol:function(p,s,d,g,_){if(p.renderPass!=="translucent")return;const b=l.StencilMode.disabled,I=p.colorModeForRenderPass();d.layout.get("text-variable-anchor")&&function(A,O,N,B,q,re,le){const he=O.transform,ce=q==="map",me=re==="map";for(const K of A){const se=B.getTile(K),xe=se.getBucket(N);if(!xe||!xe.text||!xe.text.segments.get().length)continue;const be=l.evaluateSizeForZoom(xe.textSizeData,he.zoom),Re=Kn(K,xe.getProjection(),he),ze=he.calculatePixelsToTileUnitsMatrix(se),Oe=nt(Re,se.tileID.canonical,me,ce,he,xe.getProjection(),ze),Ve=N.layout.get("icon-text-fit")!=="none"&&xe.hasIconData();if(be){const Ue=Math.pow(2,he.zoom-se.tileID.overscaledZ);t_(xe,ce,me,le,l.symbolSize,he,Oe,K,Ue,be,Ve)}}}(g,p,d,s,d.layout.get("text-rotation-alignment"),d.layout.get("text-pitch-alignment"),_),d.paint.get("icon-opacity").constantOr(1)!==0&&Hm(p,s,d,g,!1,d.paint.get("icon-translate"),d.paint.get("icon-translate-anchor"),d.layout.get("icon-rotation-alignment"),d.layout.get("icon-pitch-alignment"),d.layout.get("icon-keep-upright"),b,I),d.paint.get("text-opacity").constantOr(1)!==0&&Hm(p,s,d,g,!0,d.paint.get("text-translate"),d.paint.get("text-translate-anchor"),d.layout.get("text-rotation-alignment"),d.layout.get("text-pitch-alignment"),d.layout.get("text-keep-upright"),b,I),s.map.showCollisionBoxes&&(Ac(p,s,d,g,d.paint.get("text-translate"),d.paint.get("text-translate-anchor"),!0),Ac(p,s,d,g,d.paint.get("icon-translate"),d.paint.get("icon-translate-anchor"),!1))},circle:function(p,s,d,g){if(p.renderPass!=="translucent")return;const _=d.paint.get("circle-opacity"),b=d.paint.get("circle-stroke-width"),I=d.paint.get("circle-stroke-opacity"),A=d.layout.get("circle-sort-key").constantOr(1)!==void 0;if(_.constantOr(1)===0&&(b.constantOr(1)===0||I.constantOr(1)===0))return;const O=p.context,N=O.gl,B=p.transform,q=p.depthModeForSublayer(0,l.DepthMode.ReadOnly),re=l.StencilMode.disabled,le=p.colorModeForRenderPass(),he=B.projection.name==="globe",ce=[l.mercatorXfromLng(B.center.lng),l.mercatorYfromLat(B.center.lat)],me=[];for(let se=0;se<g.length;se++){const xe=g[se],be=s.getTile(xe),Re=be.getBucket(d);if(!Re||Re.projection.name!==B.projection.name)continue;const ze=Re.programConfigurations.get(d.id),Oe=Xh(d);he&&Oe.push("PROJECTION_GLOBE_VIEW");const Ve=p.useProgram("circle",ze,Oe),Ue=Re.layoutVertexBuffer,Ke=Re.globeExtVertexBuffer,At=Re.indexBuffer,qe=B.projection.createInversionMatrix(B,xe.canonical),ht={programConfiguration:ze,program:Ve,layoutVertexBuffer:Ue,globeExtVertexBuffer:Ke,indexBuffer:At,uniformValues:Zh(p,xe,be,qe,ce,d),tile:be};if(A){const et=Re.segments.get();for(const Et of et)me.push({segments:new l.SegmentVector([Et]),sortKey:Et.sortKey,state:ht})}else me.push({segments:Re.segments,sortKey:0,state:ht})}A&&me.sort((se,xe)=>se.sortKey-xe.sortKey);const K={useDepthForOcclusion:!he};for(const se of me){const{programConfiguration:xe,program:be,layoutVertexBuffer:Re,globeExtVertexBuffer:ze,indexBuffer:Oe,uniformValues:Ve,tile:Ue}=se.state,Ke=se.segments;p.terrain&&p.terrain.setupElevationDraw(Ue,be,K),p.prepareDrawProgram(O,be,Ue.tileID.toUnwrapped()),be.draw(O,N.TRIANGLES,q,re,le,l.CullFaceMode.disabled,Ve,d.id,Re,Oe,Ke,d.paint,B.zoom,xe,[ze])}},heatmap:function(p,s,d,g){if(d.paint.get("heatmap-opacity")!==0)if(p.renderPass==="offscreen"){const _=p.context,b=_.gl,I=l.StencilMode.disabled,A=new l.ColorMode([b.ONE,b.ONE],l.Color.transparent,[!0,!0,!0,!0]);(function(le,he,ce,me){const K=le.gl,se=he.width*me,xe=he.height*me;le.activeTexture.set(K.TEXTURE1),le.viewport.set([0,0,se,xe]);let be=ce.heatmapFbo;if(!be||be&&(be.width!==se||be.height!==xe)){be&&be.destroy();const Re=K.createTexture();K.bindTexture(K.TEXTURE_2D,Re),K.texParameteri(K.TEXTURE_2D,K.TEXTURE_WRAP_S,K.CLAMP_TO_EDGE),K.texParameteri(K.TEXTURE_2D,K.TEXTURE_WRAP_T,K.CLAMP_TO_EDGE),K.texParameteri(K.TEXTURE_2D,K.TEXTURE_MIN_FILTER,K.LINEAR),K.texParameteri(K.TEXTURE_2D,K.TEXTURE_MAG_FILTER,K.LINEAR),be=ce.heatmapFbo=le.createFramebuffer(se,xe,!1),function(ze,Oe,Ve,Ue,Ke,At){const qe=ze.gl;qe.texImage2D(qe.TEXTURE_2D,0,ze.isWebGL2&&ze.extRenderToTextureHalfFloat?qe.RGBA16F:qe.RGBA,Ke,At,0,qe.RGBA,ze.extRenderToTextureHalfFloat?ze.isWebGL2?qe.HALF_FLOAT:ze.extTextureHalfFloat.HALF_FLOAT_OES:qe.UNSIGNED_BYTE,null),Ue.colorAttachment.set(Ve)}(le,0,Re,be,se,xe)}else K.bindTexture(K.TEXTURE_2D,be.colorAttachment.get()),le.bindFramebuffer.set(be.framebuffer)})(_,p,d,p.transform.projection.name==="globe"?.5:.25),_.clear({color:l.Color.transparent});const O=p.transform,N=O.projection.name==="globe",B=N?["PROJECTION_GLOBE_VIEW"]:null,q=N?l.CullFaceMode.frontCCW:l.CullFaceMode.disabled,re=[l.mercatorXfromLng(O.center.lng),l.mercatorYfromLat(O.center.lat)];for(let le=0;le<g.length;le++){const he=g[le];if(s.hasRenderableParent(he))continue;const ce=s.getTile(he),me=ce.getBucket(d);if(!me||me.projection.name!==O.projection.name)continue;const K=me.programConfigurations.get(d.id),se=p.useProgram("heatmap",K,B),{zoom:xe}=p.transform;p.terrain&&p.terrain.setupElevationDraw(ce,se),p.prepareDrawProgram(_,se,he.toUnwrapped());const be=O.projection.createInversionMatrix(O,he.canonical);se.draw(_,b.TRIANGLES,l.DepthMode.disabled,I,A,q,jm(p,he,ce,be,re,xe,d.paint.get("heatmap-intensity")),d.id,me.layoutVertexBuffer,me.indexBuffer,me.segments,d.paint,p.transform.zoom,K,N?[me.globeExtVertexBuffer]:null)}_.viewport.set([0,0,p.width,p.height])}else p.renderPass==="translucent"&&(p.context.setColorMode(p.colorModeForRenderPass()),function(_,b){const I=_.context,A=I.gl,O=b.heatmapFbo;if(!O)return;I.activeTexture.set(A.TEXTURE0),A.bindTexture(A.TEXTURE_2D,O.colorAttachment.get()),I.activeTexture.set(A.TEXTURE1);let N=b.colorRampTexture;N||(N=b.colorRampTexture=new l.Texture(I,b.colorRamp,A.RGBA)),N.bind(A.LINEAR,A.CLAMP_TO_EDGE),_.useProgram("heatmapTexture").draw(I,A.TRIANGLES,l.DepthMode.disabled,l.StencilMode.disabled,_.colorModeForRenderPass(),l.CullFaceMode.disabled,((B,q,re,le)=>({u_image:0,u_color_ramp:1,u_opacity:q.paint.get("heatmap-opacity")}))(0,b),b.id,_.viewportBuffer,_.quadTriangleIndexBuffer,_.viewportSegments,b.paint,_.transform.zoom)}(p,d))},line:function(p,s,d,g){if(p.renderPass!=="translucent")return;const _=d.paint.get("line-opacity"),b=d.paint.get("line-width");if(_.constantOr(1)===0||b.constantOr(1)===0)return;const I=p.depthModeForSublayer(0,l.DepthMode.ReadOnly),A=p.colorModeForRenderPass(),O=p.terrain&&p.terrain.renderingToTexture?1:l.exported.devicePixelRatio,N=d.paint.get("line-dasharray"),B=N.constantOr(1),q=d.layout.get("line-cap"),re=d.paint.get("line-pattern"),le=re.constantOr(1),he=d.paint.get("line-gradient"),ce=le?"linePattern":"line",me=p.context,K=me.gl,se=(be=>{const Re=[];Pc(be)&&Re.push("RENDER_LINE_DASH"),be.paint.get("line-gradient")&&Re.push("RENDER_LINE_GRADIENT");const ze=be.paint.get("line-trim-offset");ze[0]===0&&ze[1]===0||Re.push("RENDER_LINE_TRIM_OFFSET");const Oe=be.paint.get("line-pattern").constantOr(1),Ve=be.paint.get("line-opacity").constantOr(1)!==1;return!Oe&&Ve&&Re.push("RENDER_LINE_ALPHA_DISCARD"),Re})(d);let xe=se.includes("RENDER_LINE_ALPHA_DISCARD");p.terrain&&p.terrain.clipOrMaskOverlapStencilType()&&(xe=!1);for(const be of g){const Re=s.getTile(be);if(le&&!Re.patternsLoaded())continue;const ze=Re.getBucket(d);if(!ze)continue;p.prepareDrawTile();const Oe=ze.programConfigurations.get(d.id),Ve=p.useProgram(ce,Oe,se),Ue=re.constantOr(null);if(Ue&&Re.imageAtlas){const dt=Re.imageAtlas.patternPositions[Ue.toString()];dt&&Oe.setConstantPatternPositions(dt)}const Ke=N.constantOr(null),At=q.constantOr(null);if(!le&&Ke&&At&&Re.lineAtlas){const dt=Re.lineAtlas.getDash(Ke,At);dt&&Oe.setConstantPatternPositions(dt)}let[qe,ht]=d.paint.get("line-trim-offset");(At==="round"||At==="square")&&qe!==ht&&(qe===0&&(qe-=1),ht===1&&(ht+=1));const et=p.terrain?be.projMatrix:null,Et=le?Mc(p,Re,d,et,O):Q0(p,Re,d,et,ze.lineClipsArray.length,O,[qe,ht]);if(he){const dt=ze.gradients[d.id];let Lt=dt.texture;if(d.gradientVersion!==dt.version){let vt=256;if(d.stepInterpolant){const Dt=s.getSource().maxzoom,dn=be.canonical.z===Dt?Math.ceil(1<<p.transform.maxZoom-be.canonical.z):1;vt=l.clamp(l.nextPowerOfTwo(ze.maxLineLength/l.EXTENT*1024*dn),256,me.maxTextureSize)}dt.gradient=l.renderColorRamp({expression:d.gradientExpression(),evaluationKey:"lineProgress",resolution:vt,image:dt.gradient||void 0,clips:ze.lineClipsArray}),dt.texture?dt.texture.update(dt.gradient):dt.texture=new l.Texture(me,dt.gradient,K.RGBA),dt.version=d.gradientVersion,Lt=dt.texture}me.activeTexture.set(K.TEXTURE1),Lt.bind(d.stepInterpolant?K.NEAREST:K.LINEAR,K.CLAMP_TO_EDGE)}B&&(me.activeTexture.set(K.TEXTURE0),Re.lineAtlasTexture.bind(K.LINEAR,K.REPEAT),Oe.updatePaintBuffers()),le&&(me.activeTexture.set(K.TEXTURE0),Re.imageAtlasTexture.bind(K.LINEAR,K.CLAMP_TO_EDGE),Oe.updatePaintBuffers()),p.prepareDrawProgram(me,Ve,be.toUnwrapped());const Xe=dt=>{Ve.draw(me,K.TRIANGLES,I,dt,A,l.CullFaceMode.disabled,Et,d.id,ze.layoutVertexBuffer,ze.indexBuffer,ze.segments,d.paint,p.transform.zoom,Oe,[ze.layoutVertexBuffer2])};if(xe){const dt=p.stencilModeForClipping(be).ref;dt===0&&p.terrain&&me.clear({stencil:0});const Lt={func:K.EQUAL,mask:255};Et.u_alpha_discard_threshold=.8,Xe(new l.StencilMode(Lt,dt,255,K.KEEP,K.KEEP,K.INVERT)),Et.u_alpha_discard_threshold=0,Xe(new l.StencilMode(Lt,dt,255,K.KEEP,K.KEEP,K.KEEP))}else Xe(p.stencilModeForClipping(be))}xe&&(p.resetStencilClippingMasks(),p.terrain&&me.clear({stencil:0}))},fill:function(p,s,d,g){const _=d.paint.get("fill-color"),b=d.paint.get("fill-opacity");if(b.constantOr(1)===0)return;const I=p.colorModeForRenderPass(),A=d.paint.get("fill-pattern"),O=p.opaquePassEnabledForLayer()&&!A.constantOr(1)&&_.constantOr(l.Color.transparent).a===1&&b.constantOr(0)===1?"opaque":"translucent";if(p.renderPass===O){const N=p.depthModeForSublayer(1,p.renderPass==="opaque"?l.DepthMode.ReadWrite:l.DepthMode.ReadOnly);Gm(p,s,d,g,N,I,!1)}if(p.renderPass==="translucent"&&d.paint.get("fill-antialias")){const N=p.depthModeForSublayer(d.getPaintProperty("fill-outline-color")?2:0,l.DepthMode.ReadOnly);Gm(p,s,d,g,N,I,!0)}},"fill-extrusion":function(p,s,d,g){const _=d.paint.get("fill-extrusion-opacity");if(_!==0&&p.renderPass==="translucent"){const b=new l.DepthMode(p.context.gl.LEQUAL,l.DepthMode.ReadWrite,p.depthRangeFor3D);if(_!==1||d.paint.get("fill-extrusion-pattern").constantOr(1))Hu(p,s,d,g,b,l.StencilMode.disabled,l.ColorMode.disabled),Hu(p,s,d,g,b,p.stencilModeFor3D(),p.colorModeForRenderPass()),p.resetStencilClippingMasks();else{const I=p.colorModeForRenderPass();Hu(p,s,d,g,b,l.StencilMode.disabled,I)}}},hillshade:function(p,s,d,g){if(p.renderPass!=="offscreen"&&p.renderPass!=="translucent")return;const _=p.context,b=p.depthModeForSublayer(0,l.DepthMode.ReadOnly),I=p.colorModeForRenderPass(),A=p.terrain&&p.terrain.renderingToTexture,[O,N]=p.renderPass!=="translucent"||A?[{},g]:p.stencilConfigForOverlap(g);for(const B of N){const q=s.getTile(B);if(q.needsHillshadePrepare&&p.renderPass==="offscreen")km(p,q,d,b,l.StencilMode.disabled,I);else if(p.renderPass==="translucent"){const re=A&&p.terrain?p.terrain.stencilModeForRTTOverlap(B):O[B.overscaledZ];Dm(p,B,q,d,b,re,I)}}_.viewport.set([0,0,p.width,p.height]),p.resetStencilClippingMasks()},raster:function(p,s,d,g,_,b){if(p.renderPass!=="translucent"||d.paint.get("raster-opacity")===0||!g.length)return;const I=p.context,A=I.gl,O=s.getSource(),N=p.useProgram("raster"),B=p.colorModeForRenderPass(),q=p.terrain&&p.terrain.renderingToTexture,[re,le]=O instanceof Yt||q?[{},g]:p.stencilConfigForOverlap(g),he=le[le.length-1].overscaledZ,ce=!p.options.moving;for(const me of le){const K=q?l.DepthMode.disabled:p.depthModeForSublayer(me.overscaledZ-he,d.paint.get("raster-opacity")===1?l.DepthMode.ReadWrite:l.DepthMode.ReadOnly,A.LESS),se=me.toUnwrapped(),xe=s.getTile(me);if(q&&(!xe||!xe.hasData()))continue;const be=q?me.projMatrix:p.transform.calculateProjMatrix(se,ce),Re=p.terrain&&q?p.terrain.stencilModeForRTTOverlap(me):re[me.overscaledZ],ze=b?0:d.paint.get("raster-fade-duration");xe.registerFadeDuration(ze);const Oe=s.findLoadedParent(me,0),Ve=Vh(xe,Oe,s,p.transform,ze);let Ue,Ke;p.terrain&&p.terrain.prepareDrawTile();const At=d.paint.get("raster-resampling")==="nearest"?A.NEAREST:A.LINEAR;I.activeTexture.set(A.TEXTURE0),xe.texture.bind(At,A.CLAMP_TO_EDGE),I.activeTexture.set(A.TEXTURE1),Oe?(Oe.texture.bind(At,A.CLAMP_TO_EDGE),Ue=Math.pow(2,Oe.tileID.overscaledZ-xe.tileID.overscaledZ),Ke=[xe.tileID.canonical.x*Ue%1,xe.tileID.canonical.y*Ue%1]):xe.texture.bind(At,A.CLAMP_TO_EDGE),xe.texture.useMipmap&&I.extTextureFilterAnisotropic&&p.transform.pitch>20&&A.texParameterf(A.TEXTURE_2D,I.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,I.extTextureFilterAnisotropicMax);const qe=Jh(be,Ke||[0,0],Ue||1,Ve,d,O instanceof Yt?O.perspectiveTransform:[0,0]);if(p.prepareDrawProgram(I,N,se),O instanceof Yt)O.boundsBuffer&&O.boundsSegments&&N.draw(I,A.TRIANGLES,K,l.StencilMode.disabled,B,l.CullFaceMode.disabled,qe,d.id,O.boundsBuffer,p.quadTriangleIndexBuffer,O.boundsSegments);else{const{tileBoundsBuffer:ht,tileBoundsIndexBuffer:et,tileBoundsSegments:Et}=p.getTileBoundsBuffers(xe);N.draw(I,A.TRIANGLES,K,Re,B,l.CullFaceMode.disabled,qe,d.id,ht,et,Et)}}p.resetStencilClippingMasks()},background:function(p,s,d,g){const _=d.paint.get("background-color"),b=d.paint.get("background-opacity");if(b===0)return;const I=p.context,A=I.gl,O=p.transform,N=O.tileSize,B=d.paint.get("background-pattern");if(p.isPatternMissing(B))return;const q=!B&&_.a===1&&b===1&&p.opaquePassEnabledForLayer()?"opaque":"translucent";if(p.renderPass!==q)return;const re=l.StencilMode.disabled,le=p.depthModeForSublayer(0,q==="opaque"?l.DepthMode.ReadWrite:l.DepthMode.ReadOnly),he=p.colorModeForRenderPass(),ce=p.useProgram(B?"backgroundPattern":"background");let me,K=g;K||(me=p.getBackgroundTiles(),K=Object.values(me).map(se=>se.tileID)),B&&(I.activeTexture.set(A.TEXTURE0),p.imageManager.bind(p.context));for(const se of K){const xe=se.toUnwrapped(),be=g?se.projMatrix:p.transform.calculateProjMatrix(xe);p.prepareDrawTile();const Re=s?s.getTile(se):me?me[se.key]:new l.Tile(se,N,O.zoom,p),ze=B?e_(be,b,p,B,{tileID:se,tileSize:N}):ef(be,b,_);p.prepareDrawProgram(I,ce,xe);const{tileBoundsBuffer:Oe,tileBoundsIndexBuffer:Ve,tileBoundsSegments:Ue}=p.getTileBoundsBuffers(Re);ce.draw(I,A.TRIANGLES,le,re,he,l.CullFaceMode.disabled,ze,d.id,Oe,Ve,Ue)}},sky:function(p,s,d){const g=p.transform,_=g.projection.name==="mercator"||g.projection.name==="globe"?1:l.smoothstep(7,8,g.zoom),b=d.paint.get("sky-opacity")*_;if(b===0)return;const I=p.context,A=d.paint.get("sky-type"),O=new l.DepthMode(I.gl.LEQUAL,l.DepthMode.ReadOnly,[0,1]),N=p.frameCounter/1e3%1;A==="atmosphere"?p.renderPass==="offscreen"?d.needsSkyboxCapture(p)&&(function(B,q,re,le){const he=B.context,ce=he.gl;let me=q.skyboxFbo;if(!me){me=q.skyboxFbo=he.createFramebuffer(32,32,!1),q.skyboxGeometry=new Wu(he),q.skyboxTexture=he.gl.createTexture(),ce.bindTexture(ce.TEXTURE_CUBE_MAP,q.skyboxTexture),ce.texParameteri(ce.TEXTURE_CUBE_MAP,ce.TEXTURE_WRAP_S,ce.CLAMP_TO_EDGE),ce.texParameteri(ce.TEXTURE_CUBE_MAP,ce.TEXTURE_WRAP_T,ce.CLAMP_TO_EDGE),ce.texParameteri(ce.TEXTURE_CUBE_MAP,ce.TEXTURE_MIN_FILTER,ce.LINEAR),ce.texParameteri(ce.TEXTURE_CUBE_MAP,ce.TEXTURE_MAG_FILTER,ce.LINEAR);for(let be=0;be<6;++be)ce.texImage2D(ce.TEXTURE_CUBE_MAP_POSITIVE_X+be,0,ce.RGBA,32,32,0,ce.RGBA,ce.UNSIGNED_BYTE,null)}he.bindFramebuffer.set(me.framebuffer),he.viewport.set([0,0,32,32]);const K=q.getCenter(B,!0),se=B.useProgram("skyboxCapture"),xe=new Float64Array(16);l.identity(xe),l.rotateY(xe,xe,.5*-Math.PI),zo(he,q,se,xe,K,0),l.identity(xe),l.rotateY(xe,xe,.5*Math.PI),zo(he,q,se,xe,K,1),l.identity(xe),l.rotateX(xe,xe,.5*-Math.PI),zo(he,q,se,xe,K,2),l.identity(xe),l.rotateX(xe,xe,.5*Math.PI),zo(he,q,se,xe,K,3),l.identity(xe),zo(he,q,se,xe,K,4),l.identity(xe),l.rotateY(xe,xe,Math.PI),zo(he,q,se,xe,K,5),he.viewport.set([0,0,B.width,B.height])}(p,d),d.markSkyboxValid(p)):p.renderPass==="sky"&&function(B,q,re,le,he){const ce=B.context,me=ce.gl,K=B.transform,se=B.useProgram("skybox");ce.activeTexture.set(me.TEXTURE0),me.bindTexture(me.TEXTURE_CUBE_MAP,q.skyboxTexture);const xe=((be,Re,ze,Oe,Ve)=>({u_matrix:be,u_sun_direction:Re,u_cubemap:0,u_opacity:Oe,u_temporal_offset:Ve}))(K.skyboxMatrix,q.getCenter(B,!1),0,le,he);B.prepareDrawProgram(ce,se),se.draw(ce,me.TRIANGLES,re,l.StencilMode.disabled,B.colorModeForRenderPass(),l.CullFaceMode.backCW,xe,"skybox",q.skyboxGeometry.vertexBuffer,q.skyboxGeometry.indexBuffer,q.skyboxGeometry.segment)}(p,d,O,b,N):A==="gradient"&&p.renderPass==="sky"&&function(B,q,re,le,he){const ce=B.context,me=ce.gl,K=B.transform,se=B.useProgram("skyboxGradient");q.skyboxGeometry||(q.skyboxGeometry=new Wu(ce)),ce.activeTexture.set(me.TEXTURE0);let xe=q.colorRampTexture;xe||(xe=q.colorRampTexture=new l.Texture(ce,q.colorRamp,me.RGBA)),xe.bind(me.LINEAR,me.CLAMP_TO_EDGE);const be=((Re,ze,Oe,Ve,Ue)=>({u_matrix:Re,u_color_ramp:0,u_center_direction:ze,u_radius:l.degToRad(Oe),u_opacity:Ve,u_temporal_offset:Ue}))(K.skyboxMatrix,q.getCenter(B,!1),q.paint.get("sky-gradient-radius"),le,he);B.prepareDrawProgram(ce,se),se.draw(ce,me.TRIANGLES,re,l.StencilMode.disabled,B.colorModeForRenderPass(),l.CullFaceMode.backCW,be,"skyboxGradient",q.skyboxGeometry.vertexBuffer,q.skyboxGeometry.indexBuffer,q.skyboxGeometry.segment)}(p,d,O,b,N)},debug:function(p,s,d){for(let g=0;g<d.length;g++)a_(p,s,d[g])},custom:function(p,s,d,g){const _=p.context,b=d.implementation;if(!p.transform.projection.unsupportedLayers||!p.transform.projection.unsupportedLayers.includes("custom")||p.terrain&&(p.terrain.renderingToTexture||p.renderPass==="offscreen")&&d.isLayerDraped()){if(p.renderPass==="offscreen"){const I=b.prerender;if(I){if(p.setCustomLayerDefaults(),_.setColorMode(p.colorModeForRenderPass()),p.transform.projection.name==="globe"){const A=p.transform.pointMerc;I.call(b,_.gl,p.transform.customLayerMatrix(),p.transform.getProjection(),p.transform.globeToMercatorMatrix(),l.globeToMercatorTransition(p.transform.zoom),[A.x,A.y],p.transform.pixelsPerMeterRatio)}else I.call(b,_.gl,p.transform.customLayerMatrix());_.setDirty(),p.setBaseState()}}else if(p.renderPass==="translucent"){if(p.terrain&&p.terrain.renderingToTexture){const A=b.renderToTile;if(A){const O=g[0].canonical,N=new l.MercatorCoordinate(O.x+g[0].wrap*(1<<O.z),O.y,O.z);_.setDepthMode(l.DepthMode.disabled),_.setStencilMode(l.StencilMode.disabled),_.setColorMode(p.colorModeForRenderPass()),p.setCustomLayerDefaults(),A.call(b,_.gl,N),_.setDirty(),p.setBaseState()}return}p.setCustomLayerDefaults(),_.setColorMode(p.colorModeForRenderPass()),_.setStencilMode(l.StencilMode.disabled);const I=b.renderingMode==="3d"?new l.DepthMode(p.context.gl.LEQUAL,l.DepthMode.ReadWrite,p.depthRangeFor3D):p.depthModeForSublayer(0,l.DepthMode.ReadOnly);if(_.setDepthMode(I),p.transform.projection.name==="globe"){const A=p.transform.pointMerc;b.render(_.gl,p.transform.customLayerMatrix(),p.transform.getProjection(),p.transform.globeToMercatorMatrix(),l.globeToMercatorTransition(p.transform.zoom),[A.x,A.y],p.transform.pixelsPerMeterRatio)}else b.render(_.gl,p.transform.customLayerMatrix());_.setDirty(),p.setBaseState(),_.bindFramebuffer.set(null)}}else l.warnOnce("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")}};class Ol{constructor(s,d,g=!1){this.context=new je(s,g),this.transform=d,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=l.SourceCache.maxUnderzooming+l.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}updateTerrain(s,d){const g=!!s&&!!s.terrain&&this.transform.projection.supportsTerrain;if(!(g||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new Gh(this,s));const _=this._terrain;this.transform.elevation=g?_:null,_.update(s,this.transform,d)}_updateFog(s){const d=s.fog;if(!d||this.transform.projection.name==="globe"||d.getOpacity(this.transform.pitch)<1||d.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[g,_]=d.getFovAdjustedRange(this.transform._fov);if(g>_)return void(this.transform.fogCullDistSq=null);const b=g+.78*(_-g);this.transform.fogCullDistSq=b*b}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}resize(s,d){if(this.width=s*l.exported.devicePixelRatio,this.height=d*l.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const g of this.style.order)this.style._layers[g].resize()}setup(){const s=this.context,d=new l.StructArrayLayout2i4;d.emplaceBack(0,0),d.emplaceBack(l.EXTENT,0),d.emplaceBack(0,l.EXTENT),d.emplaceBack(l.EXTENT,l.EXTENT),this.tileExtentBuffer=s.createVertexBuffer(d,l.posAttributes.members),this.tileExtentSegments=l.SegmentVector.simpleSegment(0,0,4,2);const g=new l.StructArrayLayout2i4;g.emplaceBack(0,0),g.emplaceBack(l.EXTENT,0),g.emplaceBack(0,l.EXTENT),g.emplaceBack(l.EXTENT,l.EXTENT),this.debugBuffer=s.createVertexBuffer(g,l.posAttributes.members),this.debugSegments=l.SegmentVector.simpleSegment(0,0,4,5);const _=new l.StructArrayLayout2i4;_.emplaceBack(-1,-1),_.emplaceBack(1,-1),_.emplaceBack(-1,1),_.emplaceBack(1,1),this.viewportBuffer=s.createVertexBuffer(_,l.posAttributes.members),this.viewportSegments=l.SegmentVector.simpleSegment(0,0,4,2);const b=new l.StructArrayLayout4i8;b.emplaceBack(0,0,0,0),b.emplaceBack(l.EXTENT,0,l.EXTENT,0),b.emplaceBack(0,l.EXTENT,0,l.EXTENT),b.emplaceBack(l.EXTENT,l.EXTENT,l.EXTENT,l.EXTENT),this.mercatorBoundsBuffer=s.createVertexBuffer(b,l.boundsAttributes.members),this.mercatorBoundsSegments=l.SegmentVector.simpleSegment(0,0,4,2);const I=new l.StructArrayLayout3ui6;I.emplaceBack(0,1,2),I.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=s.createIndexBuffer(I);const A=new l.StructArrayLayout1ui2;for(const N of[0,1,3,2,0])A.emplaceBack(N);this.debugIndexBuffer=s.createIndexBuffer(A),this.emptyTexture=new l.Texture(s,new l.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),s.gl.RGBA),this.identityMat=l.create();const O=this.context.gl;this.stencilClearMode=new l.StencilMode({func:O.ALWAYS,mask:0},0,255,O.ZERO,O.ZERO,O.ZERO),this.loadTimeStamps.push(l.window.performance.now()),this.atmosphereBuffer=new Km(this.context)}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(s){return s._makeTileBoundsBuffers(this.context,this.transform.projection),s._tileBoundsBuffer?{tileBoundsBuffer:s._tileBoundsBuffer,tileBoundsIndexBuffer:s._tileBoundsIndexBuffer,tileBoundsSegments:s._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const s=this.context,d=s.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(s,d.TRIANGLES,l.DepthMode.disabled,this.stencilClearMode,l.ColorMode.disabled,l.CullFaceMode.disabled,Tc(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(s,d,g){if(!d||this.currentStencilSource===d.id||!s.isTileClipped()||!g||g.length===0)return;if(this._tileClippingMaskIDs&&!this.terrain){let A=!1;for(const O of g)if(this._tileClippingMaskIDs[O.key]===void 0){A=!0;break}if(!A)return}this.currentStencilSource=d.id;const _=this.context,b=_.gl;this.nextStencilID+g.length>256&&this.clearStencil(),_.setColorMode(l.ColorMode.disabled),_.setDepthMode(l.DepthMode.disabled);const I=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const A of g){const O=d.getTile(A),N=this._tileClippingMaskIDs[A.key]=this.nextStencilID++,{tileBoundsBuffer:B,tileBoundsIndexBuffer:q,tileBoundsSegments:re}=this.getTileBoundsBuffers(O);I.draw(_,b.TRIANGLES,l.DepthMode.disabled,new l.StencilMode({func:b.ALWAYS,mask:0},N,255,b.KEEP,b.KEEP,b.REPLACE),l.ColorMode.disabled,l.CullFaceMode.disabled,Tc(A.projMatrix),"$clipping",B,q,re)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const s=this.nextStencilID++,d=this.context.gl;return new l.StencilMode({func:d.NOTEQUAL,mask:255},s,255,d.KEEP,d.KEEP,d.REPLACE)}stencilModeForClipping(s){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(s);const d=this.context.gl;return new l.StencilMode({func:d.EQUAL,mask:255},this._tileClippingMaskIDs[s.key],0,d.KEEP,d.KEEP,d.REPLACE)}stencilConfigForOverlap(s){const d=this.context.gl,g=s.sort((I,A)=>A.overscaledZ-I.overscaledZ),_=g[g.length-1].overscaledZ,b=g[0].overscaledZ-_+1;if(b>1){this.currentStencilSource=void 0,this.nextStencilID+b>256&&this.clearStencil();const I={};for(let A=0;A<b;A++)I[A+_]=new l.StencilMode({func:d.GEQUAL,mask:255},A+this.nextStencilID,255,d.KEEP,d.KEEP,d.REPLACE);return this.nextStencilID+=b,[I,g]}return[{[_]:l.StencilMode.disabled},g]}colorModeForRenderPass(){const s=this.context.gl;return this._showOverdrawInspector?new l.ColorMode([s.CONSTANT_COLOR,s.ONE],new l.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?l.ColorMode.unblended:l.ColorMode.alphaBlended}depthModeForSublayer(s,d,g){if(!this.opaquePassEnabledForLayer())return l.DepthMode.disabled;const _=1-((1+this.currentLayer)*this.numSublayers+s)*this.depthEpsilon;return new l.DepthMode(g||this.context.gl.LEQUAL,d,[_,_])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(s,d){this.style=s,this.options=d,this.imageManager=s.imageManager,this.glyphManager=s.glyphManager,this.symbolFadeChange=s.placement.symbolFadeChange(l.exported.now()),this.imageManager.beginFrame();const g=this.style.order,_=this.style._sourceCaches;for(const N in _){const B=_[N];B.used&&B.prepare(this.context)}const b={},I={},A={};for(const N in _){const B=_[N];b[N]=B.getVisibleCoordinates(),I[N]=b[N].slice().reverse(),A[N]=B.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let N=0;N<g.length;N++)if(this.style._layers[g[N]].is3D()){this.opaquePassCutoff=N;break}if(this.terrain&&(this.terrain.updateTileBinding(A),this.opaquePassCutoff=0),this.transform.projection.name!=="globe"||this.globeSharedBuffers||(this.globeSharedBuffers=new l.GlobeSharedBuffers(this.context)),!l.isMapAuthenticated(this.context.gl))return;this.renderPass="offscreen";for(const N of g){const B=this.style._layers[N],q=s._getLayerSourceCache(B);if(!B.hasOffscreenPass()||B.isHidden(this.transform.zoom))continue;const re=q?I[q.id]:void 0;(B.type==="custom"||B.isSky()||re&&re.length)&&this.renderLayer(this,q,B,re)}this.depthRangeFor3D=[0,1-(s.order.length+2)*this.numSublayers*this.depthEpsilon];const O=this.terrain;if(O&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&O.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:d.showOverdrawInspector?l.Color.black:l.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=d.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=g.length-1;this.currentLayer>=0;this.currentLayer--){const N=this.style._layers[g[this.currentLayer]],B=s._getLayerSourceCache(N);if(N.isSky())continue;const q=B?I[B.id]:void 0;this._renderTileClippingMasks(N,B,q),this.renderLayer(this,B,N,q)}if(this.style.fog&&this.transform.projection.supportsFog&&function(N,B){const q=N.context,re=q.gl,le=N.transform,he=new l.DepthMode(re.LEQUAL,l.DepthMode.ReadOnly,[0,1]),ce=N.useProgram("globeAtmosphere",null,le.projection.name==="globe"?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"]),me=l.globeToMercatorTransition(le.zoom),K=B.properties.get("color").toArray01(),se=B.properties.get("high-color").toArray01(),xe=B.properties.get("space-color").toArray01PremultipliedAlpha(),be=l.identity$1([]);l.rotateY$1(be,be,-l.degToRad(le._center.lng)),l.rotateX$1(be,be,l.degToRad(le._center.lat)),l.rotateZ$1(be,be,le.angle),l.rotateX$1(be,be,-le._pitch);const Re=l.fromQuat(new Float32Array(16),be),ze=l.mapValue(B.properties.get("star-intensity"),0,1,0,.25),Oe=5e-4,Ve=l.mapValue(B.properties.get("horizon-blend"),0,1,Oe,.25),Ue=l.globeUseCustomAntiAliasing(N,q,le)&&Ve===Oe?le.worldSize/(2*Math.PI*1.025)-1:le.globeRadius,Ke=N.frameCounter/1e3%1,At=l.length(le.globeCenterInViewSpace),qe=Math.sqrt(Math.pow(At,2)-Math.pow(Ue,2)),ht=Math.acos(qe/At),et=((Xe,dt,Lt,vt,Dt,dn,Rn,en,_n,Hn,Un,cn,dr,yr)=>({u_frustum_tl:Xe,u_frustum_tr:dt,u_frustum_br:Lt,u_frustum_bl:vt,u_horizon:Dt,u_transition:dn,u_fadeout_range:Rn,u_color:en,u_high_color:_n,u_space_color:Hn,u_star_intensity:Un,u_star_size:5*l.exported.devicePixelRatio,u_star_density:0,u_temporal_offset:cn,u_horizon_angle:dr,u_rotation_matrix:yr}))(le.frustumCorners.TL,le.frustumCorners.TR,le.frustumCorners.BR,le.frustumCorners.BL,le.frustumCorners.horizon,me,Ve,K,se,xe,ze,Ke,ht,Re);N.prepareDrawProgram(q,ce);const Et=N.atmosphereBuffer;Et&&ce.draw(q,re.TRIANGLES,he,l.StencilMode.disabled,l.ColorMode.alphaBlended,l.CullFaceMode.backCW,et,"skybox",Et.vertexBuffer,Et.indexBuffer,Et.segments)}(this,this.style.fog),this.renderPass="sky",(l.globeToMercatorTransition(this.transform.zoom)>0||this.transform.projection.name!=="globe")&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<g.length;this.currentLayer++){const N=this.style._layers[g[this.currentLayer]],B=s._getLayerSourceCache(N);N.isSky()&&this.renderLayer(this,B,N,B?I[B.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<g.length;){const N=this.style._layers[g[this.currentLayer]],B=s._getLayerSourceCache(N);if(N.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(N)){if(N.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const q=B?(N.type==="symbol"?A:I)[B.id]:void 0;this._renderTileClippingMasks(N,B,B?b[B.id]:void 0),this.renderLayer(this,B,N,q),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let N=null;l.values(this.style._layers).forEach(B=>{const q=s._getLayerSourceCache(B);q&&!B.isHidden(this.transform.zoom)&&(!N||N.getSource().maxzoom<q.getSource().maxzoom)&&(N=q)}),N&&this.options.showTileBoundaries&&Ws.debug(this,N,N.getVisibleCoordinates())}this.options.showPadding&&function(N){const B=N.transform.padding;qm(N,N.transform.height-(B.top||0),3,Al),qm(N,B.bottom||0,3,n_),Gu(N,B.left||0,3,r_),Gu(N,N.transform.width-(B.right||0),3,i_);const q=N.transform.centerPoint;(function(re,le,he,ce){Rl(re,le-1,he-10,2,20,ce),Rl(re,le-10,he-1,20,2,ce)})(N,q.x,N.transform.height-q.y,o_)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(l.window.performance.now()),this.saveCanvasCopy())}renderLayer(s,d,g,_){g.isHidden(this.transform.zoom)||(g.type==="background"||g.type==="sky"||g.type==="custom"||_&&_.length)&&(this.id=g.id,this.gpuTimingStart(g),(!s.transform.projection.unsupportedLayers||!s.transform.projection.unsupportedLayers.includes(g.type)||s.terrain&&g.type==="custom")&&Ws[g.type](s,d,g,_,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(s){if(!this.options.gpuTiming)return;const d=this.context.extTimerQuery;let g=this.gpuTimers[s.id];g||(g=this.gpuTimers[s.id]={calls:0,cpuTime:0,query:d.createQueryEXT()}),g.calls++,d.beginQueryEXT(d.TIME_ELAPSED_EXT,g.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const s=this.context.extTimerQuery,d=s.createQueryEXT();this.deferredRenderGpuTimeQueries.push(d),s.beginQueryEXT(s.TIME_ELAPSED_EXT,d)}}gpuTimingDeferredRenderEnd(){if(!this.options.gpuTimingDeferredRender)return;const s=this.context.extTimerQuery;s.endQueryEXT(s.TIME_ELAPSED_EXT)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const s=this.context.extTimerQuery;s.endQueryEXT(s.TIME_ELAPSED_EXT)}collectGpuTimers(){const s=this.gpuTimers;return this.gpuTimers={},s}collectDeferredRenderGpuQueries(){const s=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],s}queryGpuTimers(s){const d={};for(const g in s){const _=s[g],b=this.context.extTimerQuery,I=b.getQueryObjectEXT(_.query,b.QUERY_RESULT_EXT)/1e6;b.deleteQueryEXT(_.query),d[g]=I}return d}queryGpuTimeDeferredRender(s){if(!this.options.gpuTimingDeferredRender)return 0;const d=this.context.extTimerQuery;let g=0;for(const _ of s)g+=d.getQueryObjectEXT(_,d.QUERY_RESULT_EXT)/1e6,d.deleteQueryEXT(_);return g}translatePosMatrix(s,d,g,_,b){if(!g[0]&&!g[1])return s;const I=b?_==="map"?this.transform.angle:0:_==="viewport"?-this.transform.angle:0;if(I){const N=Math.sin(I),B=Math.cos(I);g=[g[0]*B-g[1]*N,g[0]*N+g[1]*B]}const A=[b?g[0]:Ge(d,g[0],this.transform.zoom),b?g[1]:Ge(d,g[1],this.transform.zoom),0],O=new Float32Array(16);return l.translate(O,s,A),O}saveTileTexture(s){const d=this._tileTextures[s.size[0]];d?d.push(s):this._tileTextures[s.size[0]]=[s]}getTileTexture(s){const d=this._tileTextures[s];return d&&d.length>0?d.pop():null}isPatternMissing(s){return s===null||s!==void 0&&!this.imageManager.getPattern(s.toString())}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture}currentGlobalDefines(){const s=this.terrain&&this.terrain.renderingToTexture,d=this.terrain&&this.terrain.exaggeration()===0,g=this.style&&this.style.fog,_=[];return this.terrainRenderModeElevated()&&_.push("TERRAIN"),this.transform.projection.name==="globe"&&_.push("GLOBE"),d&&_.push("ZERO_EXAGGERATION"),g&&!s&&g.getOpacity(this.transform.pitch)!==0&&_.push("FOG"),s&&_.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&_.push("OVERDRAW_INSPECTOR"),_}useProgram(s,d,g){this.cache=this.cache||{};const _=g||[],b=this.currentGlobalDefines().concat(_),I=Jn.cacheKey(Bh[s],s,b,d);return this.cache[I]||(this.cache[I]=new Jn(this.context,s,Bh[s],d,tf[s],b)),this.cache[I]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const s=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(s.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=l.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new l.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.atmosphereBuffer&&this.atmosphereBuffer.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}prepareDrawProgram(s,d,g){if(this.terrain&&this.terrain.renderingToTexture)return;const _=this.style.fog;if(_){const b=_.getOpacity(this.transform.pitch),I=((A,O,N,B,q,re,le,he,ce,me,K)=>{const se=A.transform,xe=O.properties.get("color").toArray01();xe[3]=B;const be=A.frameCounter/1e3%1;return{u_fog_matrix:N?se.calculateFogTileMatrix(N):A.identityMat,u_fog_range:O.getFovAdjustedRange(se._fov),u_fog_color:xe,u_fog_horizon_blend:O.properties.get("horizon-blend"),u_fog_temporal_offset:be,u_frustum_tl:q,u_frustum_tr:re,u_frustum_br:le,u_frustum_bl:he,u_globe_pos:ce,u_globe_radius:me,u_viewport:K,u_globe_transition:l.globeToMercatorTransition(se.zoom),u_is_globe:+(se.projection.name==="globe")}})(this,_,g,b,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*l.exported.devicePixelRatio,this.transform.height*l.exported.devicePixelRatio]);d.setFogUniformValues(s,I)}}setTileLoadedFlag(s){this.tileLoaded=s}saveCanvasCopy(){const s=this.canvasCopy();s&&(this.frameCopies.push(s),this.tileLoaded=!1)}canvasCopy(){const s=this.context.gl,d=s.createTexture();return s.bindTexture(s.TEXTURE_2D,d),s.copyTexImage2D(s.TEXTURE_2D,0,s.RGBA,0,0,s.drawingBufferWidth,s.drawingBufferHeight,0),d}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const s=this.style&&this.style.fog;return!!s&&s.getOpacity(this.transform.pitch)!==0}getBackgroundTiles(){const s=this._backgroundTiles,d=this._backgroundTiles={},g=this.transform.coveringTiles({tileSize:512});for(const _ of g)d[_.key]=s[_.key]||new l.Tile(_,512,this.transform.tileZoom,this);return d}clearBackgroundTiles(){this._backgroundTiles={}}}class qu{constructor(s=0,d=0,g=0,_=0){if(isNaN(s)||s<0||isNaN(d)||d<0||isNaN(g)||g<0||isNaN(_)||_<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=s,this.bottom=d,this.left=g,this.right=_}interpolate(s,d,g){return d.top!=null&&s.top!=null&&(this.top=l.number(s.top,d.top,g)),d.bottom!=null&&s.bottom!=null&&(this.bottom=l.number(s.bottom,d.bottom,g)),d.left!=null&&s.left!=null&&(this.left=l.number(s.left,d.left,g)),d.right!=null&&s.right!=null&&(this.right=l.number(s.right,d.right,g)),this}getCenter(s,d){const g=l.clamp((this.left+s-this.right)/2,0,s),_=l.clamp((this.top+d-this.bottom)/2,0,d);return new l.Point(g,_)}equals(s){return this.top===s.top&&this.bottom===s.bottom&&this.left===s.left&&this.right===s.right}clone(){return new qu(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Zu(p,s){const d=l.getColumn(p,3);l.fromQuat(p,s),l.setColumn(p,3,d)}function tr(p,s){const d=l.identity$1([]);return l.rotateZ$1(d,d,-s),l.rotateX$1(d,d,-p),d}function zc(p,s){const d=[p[0],p[1],0],g=[s[0],s[1],0];if(l.length(d)>=1e-15){const I=l.normalize([],d);l.scale$2(g,I,l.dot(g,I)),s[0]=g[0],s[1]=g[1]}const _=l.cross([],s,p);if(l.len(_)<1e-15)return null;const b=Math.atan2(-_[1],_[0]);return tr(Math.atan2(Math.sqrt(p[0]*p[0]+p[1]*p[1]),-p[2]),b)}class Ym{constructor(s,d){this.position=s,this.orientation=d}get position(){return this._position}set position(s){if(s){const d=s instanceof l.MercatorCoordinate?s:new l.MercatorCoordinate(s[0],s[1],s[2]);this._renderWorldCopies&&(d.x=l.wrap(d.x,0,1)),this._position=d}else this._position=null}lookAtPoint(s,d){if(this.orientation=null,!this.position)return;const g=this.position,_=this._elevation?this._elevation.getAtPointOrZero(l.MercatorCoordinate.fromLngLat(s)):0,b=l.MercatorCoordinate.fromLngLat(s,_),I=[b.x-g.x,b.y-g.y,b.z-g.z];d||(d=[0,0,1]),d[2]=Math.abs(d[2]),this.orientation=zc(I,d)}setPitchBearing(s,d){this.orientation=tr(l.degToRad(s),l.degToRad(-d))}}class Xu{constructor(s,d){this._transform=l.identity([]),this.orientation=d,this.position=s}get mercatorPosition(){const s=this.position;return new l.MercatorCoordinate(s[0],s[1],s[2])}get position(){const s=l.getColumn(this._transform,3);return[s[0],s[1],s[2]]}set position(s){var d;s&&l.setColumn(this._transform,3,[(d=s)[0],d[1],d[2],1])}get orientation(){return this._orientation}set orientation(s){this._orientation=s||l.identity$1([]),s&&Zu(this._transform,this._orientation)}getPitchBearing(){const s=this.forward(),d=this.right();return{bearing:Math.atan2(-d[1],d[0]),pitch:Math.atan2(Math.sqrt(s[0]*s[0]+s[1]*s[1]),-s[2])}}setPitchBearing(s,d){this._orientation=tr(s,d),Zu(this._transform,this._orientation)}forward(){const s=l.getColumn(this._transform,2);return[-s[0],-s[1],-s[2]]}up(){const s=l.getColumn(this._transform,1);return[-s[0],-s[1],-s[2]]}right(){const s=l.getColumn(this._transform,0);return[s[0],s[1],s[2]]}getCameraToWorld(s,d){const g=new Float64Array(16);return l.invert(g,this.getWorldToCamera(s,d)),g}getWorldToCameraPosition(s,d,g){const _=this.position;l.scale$2(_,_,-s);const b=new Float64Array(16);return l.fromScaling(b,[g,g,g]),l.translate(b,b,_),b[10]*=d,b}getWorldToCamera(s,d){const g=new Float64Array(16),_=new Float64Array(4),b=this.position;return l.conjugate(_,this._orientation),l.scale$2(b,b,-s),l.fromQuat(g,_),l.translate(g,g,b),g[1]*=-1,g[5]*=-1,g[9]*=-1,g[13]*=-1,g[8]*=d,g[9]*=d,g[10]*=d,g[11]*=d,g}getCameraToClipPerspective(s,d,g,_){const b=new Float64Array(16);return l.perspective(b,s,d,g,_),b}getDistanceToElevation(s,d=!1){const g=s===0?0:l.mercatorZfromAltitude(s,d?l.latFromMercatorY(this.position[1]):this.position[1]),_=this.forward();return(g-this.position[2])/_[2]}clone(){return new Xu([...this.position],[...this.orientation])}}function zl(p,s){const d=Ku(p.projection,p.zoom,p.width,p.height),g=function(b,I,A,O,N){const B=new l.LngLat(A.lng-180*qa,A.lat),q=new l.LngLat(A.lng+180*qa,A.lat),re=b.project(B.lng,B.lat),le=b.project(q.lng,q.lat),he=-Math.atan2(le.y-re.y,le.x-re.x),ce=l.MercatorCoordinate.fromLngLat(A);ce.y=l.clamp(ce.y,-1+qa,1-qa);const me=ce.toLngLat(),K=b.project(me.lng,me.lat),se=l.MercatorCoordinate.fromLngLat(me);se.x+=qa;const xe=se.toLngLat(),be=b.project(xe.lng,xe.lat),Re=Yu(be.x-K.x,be.y-K.y,he),ze=l.MercatorCoordinate.fromLngLat(me);ze.y+=qa;const Oe=ze.toLngLat(),Ve=b.project(Oe.lng,Oe.lat),Ue=Yu(Ve.x-K.x,Ve.y-K.y,he),Ke=Math.abs(Re.x)/Math.abs(Ue.y),At=l.identity([]);l.rotateZ(At,At,-he*(1-(N?0:O)));const qe=l.identity([]);return l.scale(qe,qe,[1,1-(1-Ke)*O,1]),qe[4]=-Ue.x/Ue.y*O,l.rotateZ(qe,qe,he),l.multiply(qe,At,qe),qe}(p.projection,0,p.center,d,s),_=Jm(p);return l.scale(g,g,[_,_,1]),g}function Jm(p){const s=p.projection,d=Ku(p.projection,p.zoom,p.width,p.height),g=Qm(s,p.center),_=Qm(s,l.LngLat.convert(s.center));return Math.pow(2,g*d+(1-d)*_)}function Ku(p,s,d,g,_=1/0){const b=p.range;if(!b)return 0;const I=Math.min(_,Math.max(d,g)),A=Math.log(I/1024)/Math.LN2;return l.smoothstep(b[0]+A,b[1]+A,s)}const qa=1/4e4;function Qm(p,s){const d=l.clamp(s.lat,-l.MAX_MERCATOR_LATITUDE,l.MAX_MERCATOR_LATITUDE),g=new l.LngLat(s.lng-180*qa,d),_=new l.LngLat(s.lng+180*qa,d),b=p.project(g.lng,d),I=p.project(_.lng,d),A=l.MercatorCoordinate.fromLngLat(g),O=l.MercatorCoordinate.fromLngLat(_),N=I.x-b.x,B=I.y-b.y,q=O.x-A.x,re=O.y-A.y,le=Math.sqrt((q*q+re*re)/(N*N+B*B));return Math.log(le)/Math.LN2}function Yu(p,s,d){const g=Math.cos(d),_=Math.sin(d);return{x:p*g-s*_,y:p*_+s*g}}class Ll{constructor(s,d,g,_,b,I,A){this.tileSize=512,this._renderWorldCopies=b===void 0||b,this._minZoom=s||0,this._maxZoom=d||22,this._minPitch=g??0,this._maxPitch=_??60,this.setProjection(I),this.setMaxBounds(A),this.width=0,this.height=0,this._center=new l.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new qu,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new Xu,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1}clone(){const s=new Ll(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return s._elevation=this._elevation,s._centerAltitude=this._centerAltitude,s._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,s.tileSize=this.tileSize,s.mercatorFromTransition=this.mercatorFromTransition,s.width=this.width,s.height=this.height,s.cameraElevationReference=this.cameraElevationReference,s._center=this._center,s._setZoom(this.zoom),s._seaLevelZoom=this._seaLevelZoom,s.angle=this.angle,s._fov=this._fov,s._pitch=this._pitch,s._nearZ=this._nearZ,s._farZ=this._farZ,s._averageElevation=this._averageElevation,s._unmodified=this._unmodified,s._edgeInsets=this._edgeInsets.clone(),s._camera=this._camera.clone(),s._calcMatrices(),s.freezeTileCoverage=this.freezeTileCoverage,s.frustumCorners=this.frustumCorners,s}get elevation(){return this._elevation}set elevation(s){this._elevation!==s&&(this._elevation=s,this._updateCameraOnTerrain(),this._calcMatrices())}updateElevation(s,d=!1){const g=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(this._seaLevelZoom==null||g)&&this._updateCameraOnTerrain(),(s||g)&&this._constrainCamera(d),this._calcMatrices()}getProjection(){return l.pick(this.projection,["name","center","parallels"])}setProjection(s){this.projectionOptions=s||{name:"mercator"};const d=this.projection?this.getProjection():void 0;this.projection=l.getProjection(this.projectionOptions);const g=!w(d,this.getProjection());return g&&this._calcMatrices(),this.mercatorFromTransition=!1,g}setMercatorFromTransition(){const s=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=l.getProjection({name:"mercator"});const d=s!==this.projection.name;return d&&this._calcMatrices(),d}get minZoom(){return this._minZoom}set minZoom(s){this._minZoom!==s&&(this._minZoom=s,this.zoom=Math.max(this.zoom,s))}get maxZoom(){return this._maxZoom}set maxZoom(s){this._maxZoom!==s&&(this._maxZoom=s,this.zoom=Math.min(this.zoom,s))}get minPitch(){return this._minPitch}set minPitch(s){this._minPitch!==s&&(this._minPitch=s,this.pitch=Math.max(this.pitch,s))}get maxPitch(){return this._maxPitch}set maxPitch(s){this._maxPitch!==s&&(this._maxPitch=s,this.pitch=Math.min(this.pitch,s))}get renderWorldCopies(){return this._renderWorldCopies&&this.projection.supportsWorldCopies===!0}set renderWorldCopies(s){s===void 0?s=!0:s===null&&(s=!1),this._renderWorldCopies=s}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const s=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(s))}get cameraWorldSize(){const s=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(s))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return l.mercatorZfromAltitude(this.center.lat,this.cameraWorldSizeForFog)}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new l.Point(this.width,this.height)}get bearing(){return l.wrap(this.rotation,-180,180)}set bearing(s){this.rotation=s}get rotation(){return-this.angle/Math.PI*180}set rotation(s){const d=-s*Math.PI/180;var g;this.angle!==d&&(this._unmodified=!1,this.angle=d,this._calcMatrices(),this.rotationMatrix=(g=new l.ARRAY_TYPE(4),l.ARRAY_TYPE!=Float32Array&&(g[1]=0,g[2]=0),g[0]=1,g[3]=1,g),function(_,b,I){var A=b[0],O=b[1],N=b[2],B=b[3],q=Math.sin(I),re=Math.cos(I);_[0]=A*re+N*q,_[1]=O*re+B*q,_[2]=A*-q+N*re,_[3]=O*-q+B*re}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(s){const d=l.clamp(s,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==d&&(this._unmodified=!1,this._pitch=d,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}get fovX(){return this._fov}get fovY(){const s=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/s)}set fov(s){s=Math.max(.01,Math.min(60,s)),this._fov!==s&&(this._unmodified=!1,this._fov=l.degToRad(s),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(s){this._averageElevation=s,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(s){const d=Math.min(Math.max(s,this.minZoom),this.maxZoom);this._zoom!==d&&(this._unmodified=!1,this._setZoom(d),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(s){this._zoom=s,this.scale=this.zoomScale(s),this.tileZoom=Math.floor(s),this.zoomFraction=s-this.tileZoom}_updateCameraOnTerrain(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const s=this._elevation;this._centerAltitude=s.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=s.exaggeration(),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){this._centerAltitudeValidForExaggeration!==void 0&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const s=this._elevation,d=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],g=this.horizonLineFromTop();let _=0,b=0;for(let I=0;I<d.length;I++){const A=new l.Point(d[I][0]*this.width,g+d[I][1]*(this.height-g)),O=s.pointCoordinate(A);if(!O)continue;const N=1/Math.hypot(O[0]-this._camera.position[0],O[1]-this._camera.position[1]);_+=O[3]*N,b+=N}return b===0?NaN:_/b}get center(){return this._center}set center(s){s.lat===this._center.lat&&s.lng===this._center.lng||(this._unmodified=!1,this._center=s,this._terrainEnabled()&&(this.cameraElevationReference==="ground"?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(this._seaLevelZoom==null||!this._elevation)return;const s=this._seaLevelZoom,d=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),g=this.pixelsPerMeter/this.worldSize*d,_=this._mercatorZfromZoom(s),b=this._mercatorZfromZoom(this._maxZoom),I=Math.max(_-g,b);this._setZoom(this._zoomFromMercatorZ(I))}get padding(){return this._edgeInsets.toJSON()}set padding(s){this._edgeInsets.equals(s)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,s,1),this._calcMatrices())}computeZoomRelativeTo(s){const d=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,s.toAltitude()));let g;g=s.z<this._camera.position[2]?[d.x,d.y,d.z]:[s.x,s.y,s.z];const _=l.length(l.sub([],this._camera.position,g));return l.clamp(this._zoomFromMercatorZ(_),this._minZoom,this._maxZoom)}setFreeCameraOptions(s){if(!this.height||!s.position&&!s.orientation)return;this._updateCameraState();let d=!1;if(s.orientation&&!l.exactEquals(s.orientation,this._camera.orientation)&&(d=this._setCameraOrientation(s.orientation)),s.position){const g=[s.position.x,s.position.y,s.position.z];l.exactEquals$1(g,this._camera.position)||(this._setCameraPosition(g),d=!0)}d&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const s=this._camera.position,d=new Ym;return d.position=new l.MercatorCoordinate(s[0],s[1],s[2]),d.orientation=this._camera.orientation,d._elevation=this.elevation,d._renderWorldCopies=this.renderWorldCopies,d}_setCameraOrientation(s){if(!l.length$1(s))return!1;l.normalize$1(s,s);const d=l.transformQuat([],[0,0,-1],s),g=l.transformQuat([],[0,-1,0],s);if(g[2]<0)return!1;const _=zc(d,g);return!!_&&(this._camera.orientation=_,!0)}_setCameraPosition(s){const d=this.zoomScale(this.minZoom)*this.tileSize,g=this.zoomScale(this.maxZoom)*this.tileSize,_=this.cameraToCenterDistance;s[2]=l.clamp(s[2],_/g,_/d),this._camera.position=s}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(s){return this._edgeInsets.equals(s)}interpolatePadding(s,d,g){this._unmodified=!1,this._edgeInsets.interpolate(s,d,g),this._constrain(),this._calcMatrices()}coveringZoomLevel(s){const d=(s.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/s.tileSize));return Math.max(0,d)}getVisibleUnwrappedCoordinates(s){const d=[new l.UnwrappedTileID(0,s)];if(this.renderWorldCopies){const g=this.pointCoordinate(new l.Point(0,0)),_=this.pointCoordinate(new l.Point(this.width,0)),b=this.pointCoordinate(new l.Point(this.width,this.height)),I=this.pointCoordinate(new l.Point(0,this.height)),A=Math.floor(Math.min(g.x,_.x,b.x,I.x)),O=Math.floor(Math.max(g.x,_.x,b.x,I.x)),N=1;for(let B=A-N;B<=O+N;B++)B!==0&&d.push(new l.UnwrappedTileID(B,s))}return d}coveringTiles(s){let d=this.coveringZoomLevel(s);const g=d,_=this.elevation&&!s.isTerrainDEM,b=this.projection.name==="mercator";if(s.minzoom!==void 0&&d<s.minzoom)return[];s.maxzoom!==void 0&&d>s.maxzoom&&(d=s.maxzoom);const I=this.locationCoordinate(this.center),A=this.center.lat,O=1<<d,N=[O*I.x,O*I.y,0],B=this.projection.name==="globe",q=!B,re=l.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,d,q),le=B?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),he=O*l.mercatorZfromAltitude(1,this.center.lat),ce=this._camera.position[2]/l.mercatorZfromAltitude(1,this.center.lat),me=[O*le.x,O*le.y,ce*(q?1:he)],K=this.cameraToCenterDistance/s.tileSize*(s.roundZoom?1:.502),se=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?d:0,xe=s.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,be=s.isTerrainDEM?-xe:this._elevation?this._elevation.getMinElevationBelowMSL():0,Re=this.projection.isReprojectedInTileSpace?Jm(this):1,ze=Xe=>{const Lt=new l.MercatorCoordinate(Xe.x+25e-6,Xe.y,Xe.z),vt=new l.MercatorCoordinate(Xe.x,Xe.y+25e-6,Xe.z),Dt=Xe.toLngLat(),dn=Lt.toLngLat(),Rn=vt.toLngLat(),en=this.locationCoordinate(Dt),_n=this.locationCoordinate(dn),Hn=this.locationCoordinate(Rn),Un=Math.hypot(_n.x-en.x,_n.y-en.y),cn=Math.hypot(Hn.x-en.x,Hn.y-en.y);return Math.sqrt(Un*cn)*Re/25e-6},Oe=Xe=>{const dt=xe,Lt=be;return{aabb:l.tileAABB(this,O,0,0,0,Xe,Lt,dt,this.projection),zoom:0,x:0,y:0,minZ:Lt,maxZ:dt,wrap:Xe,fullyVisible:!1}},Ve=[];let Ue=[];const Ke=d,At=s.reparseOverscaled?g:d,qe=Xe=>Xe*Xe,ht=qe((ce-this._centerAltitude)*he),et=Xe=>{if(!this._elevation||!Xe.tileID||!b)return;const dt=this._elevation.getMinMaxForTile(Xe.tileID),Lt=Xe.aabb;dt?(Lt.min[2]=dt.min,Lt.max[2]=dt.max,Lt.center[2]=(Lt.min[2]+Lt.max[2])/2):(Xe.shouldSplit=Et(Xe),Xe.shouldSplit||(Lt.min[2]=Lt.max[2]=Lt.center[2]=this._centerAltitude))},Et=Xe=>{if(Xe.zoom<se)return!0;if(Xe.zoom===Ke)return!1;if(Xe.shouldSplit!=null)return Xe.shouldSplit;const dt=Xe.aabb.distanceX(me),Lt=Xe.aabb.distanceY(me);let vt=ht,Dt=1;if(B){vt=qe(Xe.aabb.distanceZ(me));const en=Math.pow(2,Xe.zoom),_n=l.latFromMercatorY((Xe.y+1)/en),Hn=l.latFromMercatorY(Xe.y/en),Un=Math.min(Math.max(A,_n),Hn),cn=l.circumferenceAtLatitude(Un)/l.circumferenceAtLatitude(A);if(Dt=Un===A?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,cn/this._mercatorScaleRatio),this.zoom<=l.GLOBE_ZOOM_THRESHOLD_MIN&&Xe.zoom===Ke-1&&cn>=.9)return!0}else if(_&&(vt=qe(Xe.aabb.distanceZ(me)*he)),this.projection.isReprojectedInTileSpace&&g<=5){const en=Math.pow(2,Xe.zoom),_n=ze(new l.MercatorCoordinate((Xe.x+.5)/en,(Xe.y+.5)/en));Dt=_n>.85?1:_n}const dn=dt*dt+Lt*Lt+vt,Rn=qe((1<<Ke-Xe.zoom)*K*Dt*((en,_n)=>{if(_n*qe(.707)<en)return 1;const Hn=Math.sqrt(_n/en);return Hn/(1.4144271570014144+(Math.pow(1.1,Hn-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(vt,ht),dn));return dn<Rn};if(this.renderWorldCopies)for(let Xe=1;Xe<=3;Xe++)Ve.push(Oe(-Xe)),Ve.push(Oe(Xe));for(Ve.push(Oe(0));Ve.length>0;){const Xe=Ve.pop(),dt=Xe.x,Lt=Xe.y;let vt=Xe.fullyVisible;if(!vt){const Dt=Xe.aabb.intersects(re);if(Dt===0)continue;vt=Dt===2}if(Xe.zoom!==Ke&&Et(Xe))for(let Dt=0;Dt<4;Dt++){const dn=(dt<<1)+Dt%2,Rn=(Lt<<1)+(Dt>>1),en={aabb:b?Xe.aabb.quadrant(Dt):l.tileAABB(this,O,Xe.zoom+1,dn,Rn,Xe.wrap,Xe.minZ,Xe.maxZ,this.projection),zoom:Xe.zoom+1,x:dn,y:Rn,wrap:Xe.wrap,fullyVisible:vt,tileID:void 0,shouldSplit:void 0,minZ:Xe.minZ,maxZ:Xe.maxZ};_&&!B&&(en.tileID=new l.OverscaledTileID(Xe.zoom+1===Ke?At:Xe.zoom+1,Xe.wrap,Xe.zoom+1,dn,Rn),et(en)),Ve.push(en)}else{const Dt=Xe.zoom===Ke?At:Xe.zoom;if(s.minzoom&&s.minzoom>Dt)continue;const dn=N[0]-(.5+dt+(Xe.wrap<<Xe.zoom))*(1<<d-Xe.zoom),Rn=N[1]-.5-Lt,en=Xe.tileID?Xe.tileID:new l.OverscaledTileID(Dt,Xe.wrap,Xe.zoom,dt,Lt);Ue.push({tileID:en,distanceSq:dn*dn+Rn*Rn})}}if(this.fogCullDistSq){const Xe=this.fogCullDistSq,dt=this.horizonLineFromTop();Ue=Ue.filter(Lt=>{const vt=[0,0,0,1],Dt=[l.EXTENT,l.EXTENT,0,1],dn=this.calculateFogTileMatrix(Lt.tileID.toUnwrapped());l.transformMat4$1(vt,vt,dn),l.transformMat4$1(Dt,Dt,dn);const Rn=l.getAABBPointSquareDist(vt,Dt);if(Rn===0)return!0;let en=!1;const _n=this._elevation;if(_n&&Rn>Xe&&dt!==0){const Hn=this.calculateProjMatrix(Lt.tileID.toUnwrapped());let Un;s.isTerrainDEM||(Un=_n.getMinMaxForTile(Lt.tileID)),Un||(Un={min:be,max:xe});const cn=l.furthestTileCorner(this.rotation),dr=[cn[0]*l.EXTENT,cn[1]*l.EXTENT,Un.max];l.transformMat4(dr,dr,Hn),en=(1-dr[1])*this.height*.5<dt}return Rn<Xe||en})}return Ue.sort((Xe,dt)=>Xe.distanceSq-dt.distanceSq).map(Xe=>Xe.tileID)}resize(s,d){this.width=s,this.height=d,this.pixelsToGLUnits=[2/s,-2/d],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(s){return Math.pow(2,s)}scaleZoom(s){return Math.log(s)/Math.LN2}project(s){const d=l.clamp(s.lat,-l.MAX_MERCATOR_LATITUDE,l.MAX_MERCATOR_LATITUDE),g=this.projection.project(s.lng,d);return new l.Point(g.x*this.worldSize,g.y*this.worldSize)}unproject(s){return this.projection.unproject(s.x/this.worldSize,s.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/l.mercatorZfromAltitude(1,this.center.lat)/this.worldSize}setLocationAtPoint(s,d){let g,_;const b=this.centerPoint;if(this.projection.name==="globe"){const A=this.worldSize;g=(d.x-b.x)/A,_=(d.y-b.y)/A}else{const A=this.pointCoordinate(d),O=this.pointCoordinate(b);g=A.x-O.x,_=A.y-O.y}const I=this.locationCoordinate(s);this.setLocation(new l.MercatorCoordinate(I.x-g,I.y-_))}setLocation(s){this.center=this.coordinateLocation(s),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(s){return this.projection.locationPoint(this,s)}locationPoint3D(s){return this.projection.locationPoint(this,s,!0)}pointLocation(s){return this.coordinateLocation(this.pointCoordinate(s))}pointLocation3D(s){return this.coordinateLocation(this.pointCoordinate3D(s))}locationCoordinate(s,d){const g=d?l.mercatorZfromAltitude(d,s.lat):void 0,_=this.projection.project(s.lng,s.lat);return new l.MercatorCoordinate(_.x,_.y,g)}coordinateLocation(s){return this.projection.unproject(s.x,s.y)}pointRayIntersection(s,d){const g=d??this._centerAltitude,_=[s.x,s.y,0,1],b=[s.x,s.y,1,1];l.transformMat4$1(_,_,this.pixelMatrixInverse),l.transformMat4$1(b,b,this.pixelMatrixInverse);const I=b[3];l.scale$1(_,_,1/_[3]),l.scale$1(b,b,1/I);const A=_[2],O=b[2];return{p0:_,p1:b,t:A===O?0:(g-A)/(O-A)}}screenPointToMercatorRay(s){const d=[s.x,s.y,0,1],g=[s.x,s.y,1,1];return l.transformMat4$1(d,d,this.pixelMatrixInverse),l.transformMat4$1(g,g,this.pixelMatrixInverse),l.scale$1(d,d,1/d[3]),l.scale$1(g,g,1/g[3]),d[2]=l.mercatorZfromAltitude(d[2],this._center.lat)*this.worldSize,g[2]=l.mercatorZfromAltitude(g[2],this._center.lat)*this.worldSize,l.scale$1(d,d,1/this.worldSize),l.scale$1(g,g,1/this.worldSize),new l.Ray([d[0],d[1],d[2]],l.normalize([],l.sub([],g,d)))}rayIntersectionCoordinate(s){const{p0:d,p1:g,t:_}=s,b=l.mercatorZfromAltitude(d[2],this._center.lat),I=l.mercatorZfromAltitude(g[2],this._center.lat);return new l.MercatorCoordinate(l.number(d[0],g[0],_)/this.worldSize,l.number(d[1],g[1],_)/this.worldSize,l.number(b,I,_))}pointCoordinate(s,d=this._centerAltitude){return this.projection.pointCoordinate(this,s.x,s.y,d)}pointCoordinate3D(s){if(!this.elevation)return this.pointCoordinate(s);let d=this.projection.pointCoordinate3D(this,s.x,s.y);if(d)return new l.MercatorCoordinate(d[0],d[1],d[2]);let g=0,_=this.horizonLineFromTop();if(s.y>_)return this.pointCoordinate(s);const b=.02*_,I=s.clone();for(let A=0;A<10&&_-g>b;A++){I.y=l.number(g,_,.66);const O=this.projection.pointCoordinate3D(this,I.x,I.y);O?(_=I.y,d=O):g=I.y}return d?new l.MercatorCoordinate(d[0],d[1],d[2]):this.pointCoordinate(s)}isPointAboveHorizon(s){return this.projection.isPointAboveHorizon(this,s)}isPointOnSurface(s){if(s.y<0||s.y>this.height||s.x<0||s.x>this.width)return!1;if(this.elevation||this.zoom>=l.GLOBE_ZOOM_THRESHOLD_MAX)return!this.isPointAboveHorizon(s);const d=this.pointCoordinate(s);return d.y>=0&&d.y<=1}_coordinatePoint(s,d){const g=d&&this.elevation?this.elevation.getAtPointOrZero(s,this._centerAltitude):this._centerAltitude,_=[s.x*this.worldSize,s.y*this.worldSize,g+s.toAltitude(),1];return l.transformMat4$1(_,_,this.pixelMatrix),_[3]>0?new l.Point(_[0]/_[3],_[1]/_[3]):new l.Point(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:s,left:d}=this._edgeInsets,g=this.height-this._edgeInsets.bottom,_=this.width-this._edgeInsets.right,b=this.pointLocation3D(new l.Point(d,s)),I=this.pointLocation3D(new l.Point(_,s)),A=this.pointLocation3D(new l.Point(_,g)),O=this.pointLocation3D(new l.Point(d,g));let N=Math.min(b.lng,I.lng,A.lng,O.lng),B=Math.max(b.lng,I.lng,A.lng,O.lng),q=Math.min(b.lat,I.lat,A.lat,O.lat),re=Math.max(b.lat,I.lat,A.lat,O.lat);const le=Math.pow(2,-this.zoom)/16*270,he=this.projection.name==="globe"?1:4,ce=(me,K,se,xe,be)=>{const Re=(me+se)/2,ze=(K+xe)/2,Oe=new l.Point(Re,ze),{lng:Ve,lat:Ue}=this.pointLocation3D(Oe),Ke=Math.max(0,N-Ve,q-Ue,Ve-B,Ue-re);N=Math.min(N,Ve),B=Math.max(B,Ve),q=Math.min(q,Ue),re=Math.max(re,Ue),(be<he||Ke>le)&&(ce(me,K,Re,ze,be+1),ce(Re,ze,se,xe,be+1))};if(ce(d,s,_,s,1),ce(_,s,_,g,1),ce(_,g,d,g,1),ce(d,g,d,s,1),this.projection.name==="globe"){const[me,K]=l.polesInViewport(this);me?(re=90,B=180,N=-180):K&&(q=-90,B=180,N=-180)}return new l.LngLatBounds(new l.LngLat(N,q),new l.LngLat(B,re))}_getBoundsRectangular(s,d){const{top:g,left:_}=this._edgeInsets,b=this.height-this._edgeInsets.bottom,I=this.width-this._edgeInsets.right,A=new l.Point(_,g),O=new l.Point(I,g),N=new l.Point(I,b),B=new l.Point(_,b);let q=this.pointCoordinate(A,s),re=this.pointCoordinate(O,s);const le=this.pointCoordinate(N,d),he=this.pointCoordinate(B,d),ce=(me,K)=>(K.y-me.y)/(K.x-me.x);return q.y>1&&re.y>=0?q=new l.MercatorCoordinate((1-he.y)/ce(he,q)+he.x,1):q.y<0&&re.y<=1&&(q=new l.MercatorCoordinate(-he.y/ce(he,q)+he.x,0)),re.y>1&&q.y>=0?re=new l.MercatorCoordinate((1-le.y)/ce(le,re)+le.x,1):re.y<0&&q.y<=1&&(re=new l.MercatorCoordinate(-le.y/ce(le,re)+le.x,0)),new l.LngLatBounds().extend(this.coordinateLocation(q)).extend(this.coordinateLocation(re)).extend(this.coordinateLocation(he)).extend(this.coordinateLocation(le))}_getBoundsRectangularTerrain(){const s=this.elevation;if(!s.visibleDemTiles.length||s.isUsingMockSource())return this._getBoundsRectangular(0,0);const d=s.visibleDemTiles.reduce((g,_)=>{if(_.dem){const b=_.dem.tree;g.min=Math.min(g.min,b.minimums[0]),g.max=Math.max(g.max,b.maximums[0])}return g},{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(d.min*s.exaggeration(),d.max*s.exaggeration())}getBounds(){return this.projection.name==="mercator"||this.projection.name==="equirectangular"?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(s=!0){const d=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,g=this.height/2-d*(1-this._horizonShift);return s?Math.max(0,g):g}getMaxBounds(){return this.maxBounds}setMaxBounds(s){this.maxBounds=s,this.minLat=-l.MAX_MERCATOR_LATITUDE,this.maxLat=l.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,s&&(this.minLat=s.getSouth(),this.maxLat=s.getNorth(),this.minLng=s.getWest(),this.maxLng=s.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=l.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=l.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=l.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=l.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(s,d){return this.projection.createTileMatrix(this,d,s)}calculateDistanceTileData(s){const d=s.key,g=this._distanceTileDataCache;if(g[d])return g[d];const _=s.canonical,b=1/this.height,I=this.cameraWorldSize,A=I/this.zoomScale(_.z),O=(_.x+Math.pow(2,_.z)*s.wrap)*A,N=_.y*A,B=this.point;B.x*=I/this.worldSize,B.y*=I/this.worldSize;const q=this.angle,re=Math.sin(-q),le=-Math.cos(-q);return g[d]={bearing:[re,le],center:[(B.x-O)*b,(B.y-N)*b],scale:A/l.EXTENT*b},g[d]}calculateFogTileMatrix(s){const d=s.key,g=this._fogTileMatrixCache;if(g[d])return g[d];const _=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,s);return l.multiply(_,this.worldToFogMatrix,_),g[d]=new Float32Array(_),g[d]}calculateProjMatrix(s,d=!1){const g=s.key,_=d?this._alignedProjMatrixCache:this._projMatrixCache;if(_[g])return _[g];const b=this.calculatePosMatrix(s,this.worldSize);return l.multiply(b,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:d?this.alignedProjMatrix:this.projMatrix,b),_[g]=new Float32Array(b),_[g]}calculatePixelsToTileUnitsMatrix(s){const d=s.tileID.key,g=this._pixelsToTileUnitsCache;if(g[d])return g[d];const _=function(b,I){const{scale:A}=b.tileTransform,O=A*l.EXTENT/(b.tileSize*Math.pow(2,I.zoom-b.tileID.overscaledZ+b.tileID.canonical.z));return N=new Float32Array(4),re=(B=I.inverseAdjustmentMatrix)[1],le=B[2],he=B[3],me=(q=[O,O])[1],N[0]=B[0]*(ce=q[0]),N[1]=re*ce,N[2]=le*me,N[3]=he*me,N;var N,B,q,re,le,he,ce,me}(s,this);return g[d]=_,g[d]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if(this.projection.name==="globe"){const s=1/this.worldSize,d=l.fromScaling([],[s,s,s]);return l.multiply(d,d,this.globeMatrix),d}}recenterOnTerrain(){if(!this._elevation||this.projection.name==="globe")return;const s=this._elevation;this._updateCameraState();const d=l.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,g=this._computeCameraPosition(d),_=this._camera.forward(),b=l.mercatorZfromAltitude(1,this._center.lat);g[2]/=b,_[2]/=b,l.normalize(_,_);const I=s.raycast(g,_,s.exaggeration());if(I){const A=l.scaleAndAdd([],g,_,I),O=new l.MercatorCoordinate(A[0],A[1],l.mercatorZfromAltitude(A[2],l.latFromMercatorY(A[1]))),N=(O.z+l.length([O.x-g[0],O.y-g[1],O.z-g[2]*b]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(N),this._centerAltitude=O.toAltitude(),this._center=this.coordinateLocation(O),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(s=!1){if(!this._elevation)return;const d=this._elevation,g=l.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,_=this._computeCameraPosition(g),b=d.getAtPointOrZero(new l.MercatorCoordinate(..._)),I=this.pixelsPerMeter/this.worldSize*b,A=this._minimumHeightOverTerrain(),O=_[2]-I;if(O<=A)if(O<0||s){const N=this.locationCoordinate(this._center,this._centerAltitude),B=[_[0],_[1],N.z-_[2]],q=l.length(B);B[2]-=(A-O)/this._pixelsPerMercatorPixel;const re=l.length(B);if(re===0)return;l.scale$2(B,B,q/re*this._pixelsPerMercatorPixel),this._camera.position=[_[0],_[1],N.z*this._pixelsPerMercatorPixel-B[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const s=this.projection.name==="globe"||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||s){const re=this.center;return re.lat=l.clamp(re.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!s)&&(re.lng=l.clamp(re.lng,this.minLng,this.maxLng)),this.center=re,void(this._constraining=!1)}const d=this._unmodified,{x:g,y:_}=this.point;let b=0,I=g,A=_;const O=this.width/2,N=this.height/2,B=this.worldMinY*this.scale,q=this.worldMaxY*this.scale;if(_-N<B&&(A=B+N),_+N>q&&(A=q-N),q-B<this.height&&(b=Math.max(b,this.height/(q-B)),A=(q+B)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const re=this.worldMinX*this.scale,le=this.worldMaxX*this.scale,he=this.worldSize/2-(re+le)/2;I=(g+he+this.worldSize)%this.worldSize-he,I-O<re&&(I=re+O),I+O>le&&(I=le-O),le-re<this.width&&(b=Math.max(b,this.width/(le-re)),I=(le+re)/2)}I===g&&A===_||(this.center=this.unproject(new l.Point(I,A))),b&&(this.zoom+=this.scaleZoom(b)),this._constrainCamera(),this._unmodified=d,this._constraining=!1}_minZoomForBounds(){let s=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(s=Math.max(s,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),s}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const s=this.centerOffset,d=this.pixelsPerMeter;this.projection.name==="globe"&&(this._mercatorScaleRatio=l.mercatorZfromAltitude(1,this.center.lat)/l.mercatorZfromAltitude(1,l.GLOBE_SCALE_MATCH_LATITUDE));const g=Ku(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,g),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const _=this.projection.zAxisUnit==="meters"?d:1,b=this._camera.getWorldToCamera(this.worldSize,_),I=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);I[8]=2*-s.x/this.width,I[9]=2*s.y/this.height;let A=l.mul([],I,b);if(this.projection.isReprojectedInTileSpace){const ze=this.locationCoordinate(this.center),Oe=l.identity([]);l.translate(Oe,Oe,[ze.x*this.worldSize,ze.y*this.worldSize,0]),l.multiply(Oe,Oe,zl(this)),l.translate(Oe,Oe,[-ze.x*this.worldSize,-ze.y*this.worldSize,0]),l.multiply(A,A,Oe),this.inverseAdjustmentMatrix=function(Ve){const Ue=zl(Ve,!0);return te([],[Ue[0],Ue[1],Ue[4],Ue[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=l.scale([],A,[this.worldSize,this.worldSize,this.worldSize/_,1]),this.projMatrix=A,this.invProjMatrix=l.invert(new Float64Array(16),this.projMatrix);const O=l.invert([],I);this.frustumCorners=l.FrustumCorners.fromInvProjectionMatrix(O,this.horizonLineFromTop(),this.height);const N=new Float32Array(16);l.identity(N),l.scale(N,N,[1,-1,1]),l.rotateX(N,N,this._pitch),l.rotateZ(N,N,this.angle);const B=l.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),q=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;B[8]=2*-s.x/this.width,B[9]=2*(s.y+q)/this.height,this.skyboxMatrix=l.multiply(N,B,N);const re=this.point,le=re.x,he=re.y,ce=this.width%2/2,me=this.height%2/2,K=Math.cos(this.angle),se=Math.sin(this.angle),xe=le-Math.round(le)+K*ce+se*me,be=he-Math.round(he)+K*me+se*ce,Re=new Float64Array(A);if(l.translate(Re,Re,[xe>.5?xe-1:xe,be>.5?be-1:be,0]),this.alignedProjMatrix=Re,A=l.create(),l.scale(A,A,[this.width/2,-this.height/2,1]),l.translate(A,A,[1,-1,0]),this.labelPlaneMatrix=A,A=l.create(),l.scale(A,A,[1,-1,1]),l.translate(A,A,[-1,-1,0]),l.scale(A,A,[2/this.width,2/this.height,1]),this.glCoordMatrix=A,this.pixelMatrix=l.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},A=l.invert(new Float64Array(16),this.pixelMatrix),!A)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=A,this.projection.name==="globe"||this.mercatorFromTransition){this.globeMatrix=l.calculateGlobeMatrix(this);const ze=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=l.transformMat4(ze,ze,b),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=A;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const s=this.cameraWorldSizeForFog,d=this.cameraPixelsPerMeter,g=this._camera.position,_=1/this.height/this._pixelsPerMercatorPixel,b=[s,s,d];l.scale$2(b,b,_),l.scale$2(g,g,-1),l.multiply$2(g,g,b);const I=l.create();l.translate(I,I,g),l.scale(I,I,b),this.mercatorFogMatrix=I,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(s,d,_)}_computeCameraPosition(s){const d=(s=s||this.pixelsPerMeter)/this.pixelsPerMeter,g=this._camera.forward(),_=this.point,b=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*d-s/this.worldSize*this._centerAltitude;return[_.x/this.worldSize-g[0]*b,_.y/this.worldSize-g[1]*b,s/this.worldSize*this._centerAltitude-g[2]*b]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(s){const d=this._maxCameraBoundsDistance()*Math.cos(this._pitch),g=this._camera.position[2],_=s[2];let b=1;this.projection.wrap&&(this.center=this.center.wrap()),_>0&&(b=Math.min((d-g)/_,1)),this._camera.position=l.scaleAndAdd([],this._camera.position,s,b),this._updateStateFromCamera()}_updateStateFromCamera(){const s=this._camera.position,d=this._camera.forward(),{pitch:g,bearing:_}=this._camera.getPitchBearing(),b=l.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,I=this._mercatorZfromZoom(this._maxZoom)*Math.cos(l.degToRad(this._maxPitch)),A=Math.max((s[2]-b)/Math.cos(g),I),O=this._zoomFromMercatorZ(A);l.scaleAndAdd(s,s,d,A),this._pitch=l.clamp(g,l.degToRad(this.minPitch),l.degToRad(this.maxPitch)),this.angle=l.wrap(_,-Math.PI,Math.PI),this._setZoom(l.clamp(O,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new l.MercatorCoordinate(s[0],s[1],s[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(s){return Math.pow(2,s)*this.tileSize}_mercatorZfromZoom(s){return this.cameraToCenterDistance/this._worldSizeFromZoom(s)}_minimumHeightOverTerrain(){const s=Math.min((this._seaLevelZoom!=null?this._seaLevelZoom:this._zoom)+4,this._maxZoom);return this._mercatorZfromZoom(s)}_zoomFromMercatorZ(s){return this.scaleZoom(this.cameraToCenterDistance/(s*this.tileSize))}zoomFromMercatorZAdjusted(s){let d=0,g=l.GLOBE_ZOOM_THRESHOLD_MAX,_=0,b=1/0;for(;g-d>1e-6&&g>d;){const I=d+.5*(g-d),A=this.tileSize*Math.pow(2,I),O=this.getCameraToCenterDistance(this.projection,I,A),N=this.scaleZoom(O/(s*this.tileSize)),B=Math.abs(I-N);B<b&&(b=B,_=I),I<N?d=I:g=I}return _}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(l.warnOnce("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(s,d){const g=Math.min(s.x,d.x),_=Math.max(s.x,d.x),b=Math.min(s.y,d.y),I=Math.max(s.y,d.y);if(b<this.horizonLineFromTop(!1))return!0;if(this.projection.name!=="mercator")return!1;const A=[new l.Point(g,b),new l.Point(_,I),new l.Point(g,I),new l.Point(_,b)],O=this.renderWorldCopies?-3:0,N=this.renderWorldCopies?4:1;for(const B of A){const q=this.pointRayIntersection(B);if(q.t<0)return!0;const re=this.rayIntersectionCoordinate(q);if(re.x<O||re.y<0||re.x>N||re.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+l.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new l.Point(0,0),new l.Point(this.width,this.height))}zoomDeltaToMovement(s,d){const g=l.length(l.sub([],this._camera.position,s)),_=this._zoomFromMercatorZ(g)+d;return g-this._mercatorZfromZoom(_)}getCameraPoint(){if(this.projection.name==="globe"){const s=function([d,g,_],b){const I=[d,g,_,1];l.transformMat4$1(I,I,b);const A=I[3]=Math.max(I[3],1e-6);return I[0]/=A,I[1]/=A,I[2]/=A,I}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new l.Point(s[0],s[1])}{const s=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new l.Point(0,s))}}getCameraToCenterDistance(s,d=this.zoom,g=this.worldSize){const _=Ku(s,d,this.width,this.height,1024),b=s.pixelSpaceConversion(this.center.lat,g,_);return .5/Math.tan(.5*this._fov)*this.height*b}getWorldToCameraMatrix(){const s=this._camera.getWorldToCamera(this.worldSize,this.projection.zAxisUnit==="meters"?this.pixelsPerMeter:1);return this.projection.name==="globe"&&l.multiply(s,s,this.globeMatrix),s}}function Dl(p,s){let d=!1,g=null;const _=()=>{g=null,d&&(p(),g=setTimeout(_,s),d=!1)};return()=>(d=!0,g||_(),g)}class of{constructor(s){this._hashName=s&&encodeURIComponent(s),l.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=Dl(this._updateHashUnthrottled.bind(this),300)}addTo(s){return this._map=s,l.window.addEventListener("hashchange",this._onHashChange,!1),s.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),l.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const s=this._map;if(!s)return"";const d=Lc(s);if(this._hashName){const g=this._hashName;let _=!1;const b=l.window.location.hash.slice(1).split("&").map(I=>{const A=I.split("=")[0];return A===g?(_=!0,`${A}=${d}`):I}).filter(I=>I);return _||b.push(`${g}=${d}`),`#${b.join("&")}`}return`#${d}`}_getCurrentHash(){const s=l.window.location.hash.replace("#","");if(this._hashName){let d;return s.split("&").map(g=>g.split("=")).forEach(g=>{g[0]===this._hashName&&(d=g)}),(d&&d[1]||"").split("/")}return s.split("/")}_onHashChange(){const s=this._map;if(!s)return!1;const d=this._getCurrentHash();if(d.length>=3&&!d.some(g=>isNaN(g))){const g=s.dragRotate.isEnabled()&&s.touchZoomRotate.isEnabled()?+(d[3]||0):s.getBearing();return s.jumpTo({center:[+d[2],+d[1]],zoom:+d[0],bearing:g,pitch:+(d[4]||0)}),!0}return!1}_updateHashUnthrottled(){const s=l.window.location.href.replace(/(#.+)?$/,this.getHashString());l.window.history.replaceState(l.window.history.state,null,s)}}function Lc(p,s){const d=p.getCenter(),g=Math.round(100*p.getZoom())/100,_=Math.ceil((g*Math.LN2+Math.log(512/360/.5))/Math.LN10),b=Math.pow(10,_),I=Math.round(d.lng*b)/b,A=Math.round(d.lat*b)/b,O=p.getBearing(),N=p.getPitch();let B=s?`/${I}/${A}/${g}`:`${g}/${A}/${I}`;return(O||N)&&(B+="/"+Math.round(10*O)/10),N&&(B+=`/${Math.round(N)}`),B}const Dc={linearity:.3,easing:l.bezier(0,0,.3,1)},Ju=l.extend({deceleration:2500,maxSpeed:1400},Dc),Qu=l.extend({deceleration:20,maxSpeed:1400},Dc),Kt=l.extend({deceleration:1e3,maxSpeed:360},Dc),Yo=l.extend({deceleration:1e3,maxSpeed:90},Dc);class eg{constructor(s){this._map=s,this.clear()}clear(){this._inertiaBuffer=[]}record(s){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:l.exported.now(),settings:s})}_drainInertiaBuffer(){const s=this._inertiaBuffer,d=l.exported.now();for(;s.length>0&&d-s[0].time>160;)s.shift()}_onMoveEnd(s){if(this._map._prefersReducedMotion()||(this._drainInertiaBuffer(),this._inertiaBuffer.length<2))return;const d={zoom:0,bearing:0,pitch:0,pan:new l.Point(0,0),pinchAround:void 0,around:void 0};for(const{settings:b}of this._inertiaBuffer)d.zoom+=b.zoomDelta||0,d.bearing+=b.bearingDelta||0,d.pitch+=b.pitchDelta||0,b.panDelta&&d.pan._add(b.panDelta),b.around&&(d.around=b.around),b.pinchAround&&(d.pinchAround=b.pinchAround);const g=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,_={};if(d.pan.mag()){const b=$c(d.pan.mag(),g,l.extend({},Ju,s||{}));_.offset=d.pan.mult(b.amount/d.pan.mag()),_.center=this._map.transform.center,kc(_,b)}if(d.zoom){const b=$c(d.zoom,g,Qu);_.zoom=this._map.transform.zoom+b.amount,kc(_,b)}if(d.bearing){const b=$c(d.bearing,g,Kt);_.bearing=this._map.transform.bearing+l.clamp(b.amount,-179,179),kc(_,b)}if(d.pitch){const b=$c(d.pitch,g,Yo);_.pitch=this._map.transform.pitch+b.amount,kc(_,b)}if(_.zoom||_.bearing){const b=d.pinchAround===void 0?d.around:d.pinchAround;_.around=b?this._map.unproject(b):this._map.getCenter()}return this.clear(),_.noMoveStart=!0,_}}function kc(p,s){(!p.duration||p.duration<s.duration)&&(p.duration=s.duration,p.easing=s.easing)}function $c(p,s,d){const{maxSpeed:g,linearity:_,deceleration:b}=d,I=l.clamp(p*_/(s/1e3),-g,g),A=Math.abs(I)/(b*_);return{easing:d.easing,duration:1e3*A,amount:I*(A/2)}}class Ci extends l.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,d,g,_={}){const b=ee(d.getCanvasContainer(),g),I=d.unproject(b);super(s,l.extend({point:b,lngLat:I,originalEvent:g},_)),this._defaultPrevented=!1,this.target=d}}class Fc extends l.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,d,g){const _=s==="touchend"?g.changedTouches:g.touches,b=ne(d.getCanvasContainer(),_),I=b.map(O=>d.unproject(O)),A=b.reduce((O,N,B,q)=>O.add(N.div(q.length)),new l.Point(0,0));super(s,{points:b,point:A,lngLats:I,lngLat:d.unproject(A),originalEvent:g}),this._defaultPrevented=!1}}class ed extends l.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,d,g){super(s,{originalEvent:g}),this._defaultPrevented=!1}}class af{constructor(s,d){this._map=s,this._clickTolerance=d.clickTolerance}reset(){this._mousedownPos=void 0}wheel(s){return this._firePreventable(new ed(s.type,this._map,s))}mousedown(s,d){return this._mousedownPos=d,this._firePreventable(new Ci(s.type,this._map,s))}mouseup(s){this._map.fire(new Ci(s.type,this._map,s))}preclick(s){const d=l.extend({},s);d.type="preclick",this._map.fire(new Ci(d.type,this._map,d))}click(s,d){this._mousedownPos&&this._mousedownPos.dist(d)>=this._clickTolerance||(this.preclick(s),this._map.fire(new Ci(s.type,this._map,s)))}dblclick(s){return this._firePreventable(new Ci(s.type,this._map,s))}mouseover(s){this._map.fire(new Ci(s.type,this._map,s))}mouseout(s){this._map.fire(new Ci(s.type,this._map,s))}touchstart(s){return this._firePreventable(new Fc(s.type,this._map,s))}touchmove(s){this._map.fire(new Fc(s.type,this._map,s))}touchend(s){this._map.fire(new Fc(s.type,this._map,s))}touchcancel(s){this._map.fire(new Fc(s.type,this._map,s))}_firePreventable(s){if(this._map.fire(s),s.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class td{constructor(s){this._map=s}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(s){this._map.fire(new Ci(s.type,this._map,s))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Ci("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(s){this._delayContextMenu?this._contextMenuEvent=s:this._map.fire(new Ci(s.type,this._map,s)),this._map.listens("contextmenu")&&s.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class tg{constructor(s,d){this._map=s,this._el=s.getCanvasContainer(),this._container=s.getContainer(),this._clickTolerance=d.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(s,d){this.isEnabled()&&s.shiftKey&&s.button===0&&($(),this._startPos=this._lastPos=d,this._active=!0)}mousemoveWindow(s,d){if(!this._active)return;const g=d,_=this._startPos,b=this._lastPos;if(!_||!b||b.equals(g)||!this._box&&g.dist(_)<this._clickTolerance)return;this._lastPos=g,this._box||(this._box=z("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",s));const I=Math.min(_.x,g.x),A=Math.max(_.x,g.x),O=Math.min(_.y,g.y),N=Math.max(_.y,g.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${I}px,${O}px)`,this._box.style.width=A-I+"px",this._box.style.height=N-O+"px")})}mouseupWindow(s,d){if(!this._active)return;const g=this._startPos,_=d;if(g&&s.button===0){if(this.reset(),Z(),g.x!==_.x||g.y!==_.y)return this._map.fire(new l.Event("boxzoomend",{originalEvent:s})),{cameraAnimation:b=>b.fitScreenCoordinates(g,_,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",s)}}keydown(s){this._active&&s.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",s))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),j(),delete this._startPos,delete this._lastPos}_fireEvent(s,d){return this._map.fire(new l.Event(s,{originalEvent:d}))}}function nd(p,s){const d={};for(let g=0;g<p.length;g++)d[p[g].identifier]=s[g];return d}class kl{constructor(s){this.reset(),this.numTouches=s.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(s,d,g){(this.centroid||g.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===0&&(this.startTime=s.timeStamp),g.length===this.numTouches&&(this.centroid=function(_){const b=new l.Point(0,0);for(const I of _)b._add(I);return b.div(_.length)}(d),this.touches=nd(g,d)))}touchmove(s,d,g){if(this.aborted||!this.centroid)return;const _=nd(g,d);for(const b in this.touches){const I=_[b];(!I||I.dist(this.touches[b])>30)&&(this.aborted=!0)}}touchend(s,d,g){if((!this.centroid||s.timeStamp-this.startTime>500)&&(this.aborted=!0),g.length===0){const _=!this.aborted&&this.centroid;if(this.reset(),_)return _}}}class sf{constructor(s){this.singleTap=new kl(s),this.numTaps=s.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(s,d,g){this.singleTap.touchstart(s,d,g)}touchmove(s,d,g){this.singleTap.touchmove(s,d,g)}touchend(s,d,g){const _=this.singleTap.touchend(s,d,g);if(_){const b=s.timeStamp-this.lastTime<500,I=!this.lastTap||this.lastTap.dist(_)<30;if(b&&I||this.reset(),this.count++,this.lastTime=s.timeStamp,this.lastTap=_,this.count===this.numTaps)return this.reset(),_}}}class s_{constructor(){this._zoomIn=new sf({numTouches:1,numTaps:2}),this._zoomOut=new sf({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(s,d,g){this._zoomIn.touchstart(s,d,g),this._zoomOut.touchstart(s,d,g)}touchmove(s,d,g){this._zoomIn.touchmove(s,d,g),this._zoomOut.touchmove(s,d,g)}touchend(s,d,g){const _=this._zoomIn.touchend(s,d,g),b=this._zoomOut.touchend(s,d,g);return _?(this._active=!0,s.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:I=>I.easeTo({duration:300,zoom:I.getZoom()+1,around:I.unproject(_)},{originalEvent:s})}):b?(this._active=!0,s.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:I=>I.easeTo({duration:300,zoom:I.getZoom()-1,around:I.unproject(b)},{originalEvent:s})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const ng={0:1,2:2};class $l{constructor(s){this.reset(),this._clickTolerance=s.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(s,d){return!1}_move(s,d){return{}}mousedown(s,d){if(this._lastPoint)return;const g=Q(s);this._correctButton(s,g)&&(this._lastPoint=d,this._eventButton=g)}mousemoveWindow(s,d){const g=this._lastPoint;if(g){if(s.preventDefault(),this._eventButton!=null&&function(_,b){const I=ng[b];return _.buttons===void 0||(_.buttons&I)!==I}(s,this._eventButton))this.reset();else if(this._moved||!(d.dist(g)<this._clickTolerance))return this._moved=!0,this._lastPoint=d,this._move(g,d)}}mouseupWindow(s){this._lastPoint&&Q(s)===this._eventButton&&(this._moved&&Z(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class lf extends $l{mousedown(s,d){super.mousedown(s,d),this._lastPoint&&(this._active=!0)}_correctButton(s,d){return d===0&&!s.ctrlKey}_move(s,d){return{around:d,panDelta:d.sub(s)}}}class cf extends $l{_correctButton(s,d){return d===0&&s.ctrlKey||d===2}_move(s,d){const g=.8*(d.x-s.x);if(g)return this._active=!0,{bearingDelta:g}}contextmenu(s){s.preventDefault()}}class uf extends $l{_correctButton(s,d){return d===0&&s.ctrlKey||d===2}_move(s,d){const g=-.5*(d.y-s.y);if(g)return this._active=!0,{pitchDelta:g}}contextmenu(s){s.preventDefault()}}class rd{constructor(s,d){this._map=s,this._el=s.getCanvasContainer(),this._minTouches=1,this._clickTolerance=d.clickTolerance||1,this.reset(),l.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new l.Point(0,0)}touchstart(s,d,g){return this._calculateTransform(s,d,g)}touchmove(s,d,g){if(this._active&&!(g.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(g.length===1&&!l.isFullscreen())return void this._showTouchPanBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return s.cancelable&&s.preventDefault(),this._calculateTransform(s,d,g)}}touchend(s,d,g){this._calculateTransform(s,d,g),this._active&&g.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(s,d,g){g.length>0&&(this._active=!0);const _=nd(g,d),b=new l.Point(0,0),I=new l.Point(0,0);let A=0;for(const N in _){const B=_[N],q=this._touches[N];q&&(b._add(B),I._add(B.sub(q)),A++,_[N]=B)}if(this._touches=_,A<this._minTouches||!I.mag())return;const O=I.div(A);return this._sum._add(O),this._sum.mag()<this._clickTolerance?void 0:{around:b.div(A),panDelta:O}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=z("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","null")},500)}}class Bc{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(s){}_move(s,d,g){return{}}touchstart(s,d,g){this._firstTwoTouches||g.length<2||(this._firstTwoTouches=[g[0].identifier,g[1].identifier],this._start([d[0],d[1]]))}touchmove(s,d,g){const _=this._firstTwoTouches;if(!_)return;s.preventDefault();const[b,I]=_,A=Nc(g,d,b),O=Nc(g,d,I);if(!A||!O)return;const N=this._aroundCenter?null:A.add(O).div(2);return this._move([A,O],N,s)}touchend(s,d,g){if(!this._firstTwoTouches)return;const[_,b]=this._firstTwoTouches,I=Nc(g,d,_),A=Nc(g,d,b);I&&A||(this._active&&Z(),this.reset())}touchcancel(){this.reset()}enable(s){this._enabled=!0,this._aroundCenter=!!s&&s.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Nc(p,s,d){for(let g=0;g<p.length;g++)if(p[g].identifier===d)return s[g]}function df(p,s){return Math.log(p/s)/Math.LN2}class rg extends Bc{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(s){this._startDistance=this._distance=s[0].dist(s[1])}_move(s,d){const g=this._distance;if(this._distance=s[0].dist(s[1]),this._active||!(Math.abs(df(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:df(this._distance,g),pinchAround:d}}}function hf(p,s){return 180*p.angleWith(s)/Math.PI}class ig extends Bc{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(s){this._startVector=this._vector=s[0].sub(s[1]),this._minDiameter=s[0].dist(s[1])}_move(s,d){const g=this._vector;if(this._vector=s[0].sub(s[1]),g&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:hf(this._vector,g),pinchAround:d}}_isBelowThreshold(s){this._minDiameter=Math.min(this._minDiameter,s.mag());const d=25/(Math.PI*this._minDiameter)*360,g=this._startVector;if(!g)return!1;const _=hf(s,g);return Math.abs(_)<d}}function Ss(p){return Math.abs(p.y)>Math.abs(p.x)}class og extends Bc{constructor(s){super(),this._map=s}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(s){this._lastPoints=s,Ss(s[0].sub(s[1]))&&(this._valid=!1)}_move(s,d,g){const _=this._lastPoints;if(!_)return;const b=s[0].sub(_[0]),I=s[1].sub(_[1]);return this._map._cooperativeGestures&&!l.isFullscreen()&&g.touches.length<3||(this._valid=this.gestureBeginsVertically(b,I,g.timeStamp),!this._valid)?void 0:(this._lastPoints=s,this._active=!0,{pitchDelta:(b.y+I.y)/2*-.5})}gestureBeginsVertically(s,d,g){if(this._valid!==void 0)return this._valid;const _=s.mag()>=2,b=d.mag()>=2;if(!_&&!b)return;if(!_||!b)return this._firstMove==null&&(this._firstMove=g),g-this._firstMove<100&&void 0;const I=s.y>0==d.y>0;return Ss(s)&&Ss(d)&&I}}const ag={panStep:100,bearingStep:15,pitchStep:10};class l_{constructor(){const s=ag;this._panStep=s.panStep,this._bearingStep=s.bearingStep,this._pitchStep=s.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(s){if(s.altKey||s.ctrlKey||s.metaKey)return;let d=0,g=0,_=0,b=0,I=0;switch(s.keyCode){case 61:case 107:case 171:case 187:d=1;break;case 189:case 109:case 173:d=-1;break;case 37:s.shiftKey?g=-1:(s.preventDefault(),b=-1);break;case 39:s.shiftKey?g=1:(s.preventDefault(),b=1);break;case 38:s.shiftKey?_=1:(s.preventDefault(),I=-1);break;case 40:s.shiftKey?_=-1:(s.preventDefault(),I=1);break;default:return}return this._rotationDisabled&&(g=0,_=0),{cameraAnimation:A=>{const O=A.getZoom();A.easeTo({duration:300,easeId:"keyboardHandler",easing:sg,zoom:d?Math.round(O)+d*(s.shiftKey?2:1):O,bearing:A.getBearing()+g*this._bearingStep,pitch:A.getPitch()+_*this._pitchStep,offset:[-b*this._panStep,-I*this._panStep],center:A.getCenter()},{originalEvent:s})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function sg(p){return p*(2-p)}const ff=4.000244140625;class lg{constructor(s,d){this._map=s,this._el=s.getCanvasContainer(),this._handler=d,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,l.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(s){this._defaultZoomRate=s}setWheelZoomRate(s){this._wheelZoomRate=s}isEnabled(){return!!this._enabled}isActive(){return this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(s){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!s&&s.around==="center",this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(s){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(s.ctrlKey||s.metaKey||this.isZooming()||l.isFullscreen()))return void this._showBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let d=s.deltaMode===l.window.WheelEvent.DOM_DELTA_LINE?40*s.deltaY:s.deltaY;const g=l.exported.now(),_=g-(this._lastWheelEventTime||0);this._lastWheelEventTime=g,d!==0&&d%ff==0?this._type="wheel":d!==0&&Math.abs(d)<4?this._type="trackpad":_>400?(this._type=null,this._lastValue=d,this._timeout=setTimeout(this._onTimeout,40,s)):this._type||(this._type=Math.abs(_*d)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,d+=this._lastValue)),s.shiftKey&&d&&(d/=4),this._type&&(this._lastWheelEvent=s,this._delta-=d,this._active||this._start(s)),s.preventDefault()}_onTimeout(s){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(s)}_start(s){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const d=ee(this._el,s);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:d,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const s=this._map.transform;this._type==="wheel"&&s.projection.wrap&&(s._center.lng>=180||s._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const d=()=>s._terrainEnabled()&&this._aroundCoord?s.computeZoomRelativeTo(this._aroundCoord):s.zoom;if(this._delta!==0){const O=this._type==="wheel"&&Math.abs(this._delta)>ff?this._wheelZoomRate:this._defaultZoomRate;let N=2/(1+Math.exp(-Math.abs(this._delta*O)));this._delta<0&&N!==0&&(N=1/N);const B=d(),q=Math.pow(2,B),re=typeof this._targetZoom=="number"?s.zoomScale(this._targetZoom):q;this._targetZoom=Math.min(s.maxZoom,Math.max(s.minZoom,s.scaleZoom(re*N))),this._type==="wheel"&&(this._startZoom=B,this._easing=this._smoothOutEasing(200)),this._delta=0}const g=typeof this._targetZoom=="number"?this._targetZoom:d(),_=this._startZoom,b=this._easing;let I,A=!1;if(this._type==="wheel"&&_&&b){const O=Math.min((l.exported.now()-this._lastWheelEventTime)/200,1),N=b(O);I=l.number(_,g,N),O<1?this._frameId||(this._frameId=!0):A=!0}else I=g,A=!0;return this._active=!0,A&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!A,zoomDelta:I-d(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(s){let d=l.ease;if(this._prevEase){const g=this._prevEase,_=(l.exported.now()-g.start)/g.duration,b=g.easing(_+.01)-g.easing(_),I=.27/Math.sqrt(b*b+1e-4)*.01,A=Math.sqrt(.0729-I*I);d=l.bezier(I,A,.25,1)}return this._prevEase={start:l.exported.now(),duration:s,easing:d},d}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=z("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(l.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","null")},200)}}class cg{constructor(s,d){this._clickZoom=s,this._tapZoom=d}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Vi{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(s,d){return s.preventDefault(),{cameraAnimation:g=>{g.easeTo({duration:300,zoom:g.getZoom()+(s.shiftKey?-1:1),around:g.unproject(d)},{originalEvent:s})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class c_{constructor(){this._tap=new sf({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(s,d,g){this._swipePoint||(this._tapTime&&s.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?g.length>0&&(this._swipePoint=d[0],this._swipeTouch=g[0].identifier):this._tap.touchstart(s,d,g))}touchmove(s,d,g){if(this._tapTime){if(this._swipePoint){if(g[0].identifier!==this._swipeTouch)return;const _=d[0],b=_.y-this._swipePoint.y;return this._swipePoint=_,s.preventDefault(),this._active=!0,{zoomDelta:b/128}}}else this._tap.touchmove(s,d,g)}touchend(s,d,g){this._tapTime?this._swipePoint&&g.length===0&&this.reset():this._tap.touchend(s,d,g)&&(this._tapTime=s.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ug{constructor(s,d,g){this._el=s,this._mousePan=d,this._touchPan=g}enable(s){this._inertiaOptions=s||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class u_{constructor(s,d,g){this._pitchWithRotate=s.pitchWithRotate,this._mouseRotate=d,this._mousePitch=g}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class d_{constructor(s,d,g,_){this._el=s,this._touchZoom=d,this._touchRotate=g,this._tapDragZoom=_,this._rotationDisabled=!1,this._enabled=!0}enable(s){this._touchZoom.enable(s),this._rotationDisabled||this._touchRotate.enable(s),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Lo=p=>p.zoom||p.drag||p.pitch||p.rotate;class dg extends l.Event{}class h_{constructor(){this.constants=[1,1,.01],this.radius=0}setup(s,d){const g=l.sub([],d,s);this.radius=l.length(g[2]<0?l.div([],g,this.constants):[g[0],g[1],0])}projectRay(s){l.div(s,s,this.constants),l.normalize(s,s),l.mul$1(s,s,this.constants);const d=l.scale$2([],s,this.radius);if(d[2]>0){const g=l.scale$2([],[0,0,1],l.dot(d,[0,0,1])),_=l.scale$2([],l.normalize([],[d[0],d[1],0]),this.radius),b=l.add([],d,l.scale$2([],l.sub([],l.add([],_,g),d),2));d[0]=b[0],d[1]=b[1]}return d}}function Jo(p){return p.panDelta&&p.panDelta.mag()||p.zoomDelta||p.bearingDelta||p.pitchDelta}class xa{constructor(s,d){this._map=s,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new eg(s),this._bearingSnap=d.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new h_,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(d),l.bindAll(["handleEvent","handleWindowEvent"],this);const g=this._el;this._listeners=[[g,"touchstart",{passive:!0}],[g,"touchmove",{passive:!1}],[g,"touchend",void 0],[g,"touchcancel",void 0],[g,"mousedown",void 0],[g,"mousemove",void 0],[g,"mouseup",void 0],[l.window.document,"mousemove",{capture:!0}],[l.window.document,"mouseup",void 0],[g,"mouseover",void 0],[g,"mouseout",void 0],[g,"dblclick",void 0],[g,"click",void 0],[g,"keydown",{capture:!1}],[g,"keyup",void 0],[g,"wheel",{passive:!1}],[g,"contextmenu",void 0],[l.window,"blur",void 0]];for(const[_,b,I]of this._listeners)_.addEventListener(b,_===l.window.document?this.handleWindowEvent:this.handleEvent,I)}destroy(){for(const[s,d,g]of this._listeners)s.removeEventListener(d,s===l.window.document?this.handleWindowEvent:this.handleEvent,g)}_addDefaultHandlers(s){const d=this._map,g=d.getCanvasContainer();this._add("mapEvent",new af(d,s));const _=d.boxZoom=new tg(d,s);this._add("boxZoom",_);const b=new s_,I=new Vi;d.doubleClickZoom=new cg(I,b),this._add("tapZoom",b),this._add("clickZoom",I);const A=new c_;this._add("tapDragZoom",A);const O=d.touchPitch=new og(d);this._add("touchPitch",O);const N=new cf(s),B=new uf(s);d.dragRotate=new u_(s,N,B),this._add("mouseRotate",N,["mousePitch"]),this._add("mousePitch",B,["mouseRotate"]);const q=new lf(s),re=new rd(d,s);d.dragPan=new ug(g,q,re),this._add("mousePan",q),this._add("touchPan",re,["touchZoom","touchRotate"]);const le=new ig,he=new rg;d.touchZoomRotate=new d_(g,he,le,A),this._add("touchRotate",le,["touchPan","touchZoom"]),this._add("touchZoom",he,["touchPan","touchRotate"]),this._add("blockableMapEvent",new td(d));const ce=d.scrollZoom=new lg(d,this);this._add("scrollZoom",ce,["mousePan"]);const me=d.keyboard=new l_;this._add("keyboard",me);for(const K of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])s.interactive&&s[K]&&d[K].enable(s[K])}_add(s,d,g){this._handlers.push({handlerName:s,handler:d,allowed:g}),this._handlersById[s]=d}stop(s){if(!this._updatingCamera){for(const{handler:d}of this._handlers)d.reset();this._inertia.clear(),this._fireEvents({},{},s),this._changes=[]}}isActive(){for(const{handler:s}of this._handlers)if(s.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Lo(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(s,d,g){for(const _ in s)if(_!==g&&(!d||d.indexOf(_)<0))return!0;return!1}handleWindowEvent(s){this.handleEvent(s,`${s.type}Window`)}_getMapTouches(s){const d=[];for(const g of s)this._el.contains(g.target)&&d.push(g);return d}handleEvent(s,d){this._updatingCamera=!0;const g=s.type==="renderFrame",_=g?void 0:s,b={needsRenderFrame:!1},I={},A={},O=s.touches?this._getMapTouches(s.touches):void 0,N=O?ne(this._el,O):g?void 0:ee(this._el,s);for(const{handlerName:re,handler:le,allowed:he}of this._handlers){if(!le.isEnabled())continue;let ce;this._blockedByActive(A,he,re)?le.reset():le[d||s.type]&&(ce=le[d||s.type](s,N,O),this.mergeHandlerResult(b,I,ce,re,_),ce&&ce.needsRenderFrame&&this._triggerRenderFrame()),(ce||le.isActive())&&(A[re]=le)}const B={};for(const re in this._previousActiveHandlers)A[re]||(B[re]=_);this._previousActiveHandlers=A,(Object.keys(B).length||Jo(b))&&(this._changes.push([b,I,B]),this._triggerRenderFrame()),(Object.keys(A).length||Jo(b))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:q}=b;q&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],q(this._map))}mergeHandlerResult(s,d,g,_,b){if(!g)return;l.extend(s,g);const I={handlerName:_,originalEvent:g.originalEvent||b};g.zoomDelta!==void 0&&(d.zoom=I),g.panDelta!==void 0&&(d.drag=I),g.pitchDelta!==void 0&&(d.pitch=I),g.bearingDelta!==void 0&&(d.rotate=I)}_applyChanges(){const s={},d={},g={};for(const[_,b,I]of this._changes)_.panDelta&&(s.panDelta=(s.panDelta||new l.Point(0,0))._add(_.panDelta)),_.zoomDelta&&(s.zoomDelta=(s.zoomDelta||0)+_.zoomDelta),_.bearingDelta&&(s.bearingDelta=(s.bearingDelta||0)+_.bearingDelta),_.pitchDelta&&(s.pitchDelta=(s.pitchDelta||0)+_.pitchDelta),_.around!==void 0&&(s.around=_.around),_.aroundCoord!==void 0&&(s.aroundCoord=_.aroundCoord),_.pinchAround!==void 0&&(s.pinchAround=_.pinchAround),_.noInertia&&(s.noInertia=_.noInertia),l.extend(d,b),l.extend(g,I);this._updateMapTransform(s,d,g),this._changes=[]}_updateMapTransform(s,d,g){const _=this._map,b=_.transform,I=se=>[se.x,se.y,se.z];if((se=>{const xe=this._eventsInProgress.drag;return xe&&!this._handlersById[xe.handlerName].isActive()})()&&!Jo(s)){const se=b.zoom;b.cameraElevationReference="sea",b.recenterOnTerrain(),b.cameraElevationReference="ground",se!==b.zoom&&this._map._update(!0)}if(b._isCameraConstrained&&_._stop(!0),!Jo(s))return void this._fireEvents(d,g,!0);let{panDelta:A,zoomDelta:O,bearingDelta:N,pitchDelta:B,around:q,aroundCoord:re,pinchAround:le}=s;b._isCameraConstrained&&(O>0&&(O=0),b._isCameraConstrained=!1),le!==void 0&&(q=le),(O||(se=>d[se]&&!this._eventsInProgress[se])("drag"))&&q&&(this._dragOrigin=I(b.pointCoordinate3D(q)),this._trackingEllipsoid.setup(b._camera.position,this._dragOrigin)),b.cameraElevationReference="sea",_._stop(!0),q=q||_.transform.centerPoint,N&&(b.bearing+=N),B&&(b.pitch+=B),b._updateCameraState();const he=[0,0,0];if(A)if(b.projection.name==="mercator"){const se=this._trackingEllipsoid.projectRay(b.screenPointToMercatorRay(q).dir),xe=this._trackingEllipsoid.projectRay(b.screenPointToMercatorRay(q.sub(A)).dir);he[0]=xe[0]-se[0],he[1]=xe[1]-se[1]}else{const se=b.pointCoordinate(q);if(b.projection.name==="globe"){A=A.rotate(-b.angle);const xe=b._pixelsPerMercatorPixel/b.worldSize;he[0]=-A.x*l.mercatorScale(l.latFromMercatorY(se.y))*xe,he[1]=-A.y*l.mercatorScale(b.center.lat)*xe}else{const xe=b.pointCoordinate(q.sub(A));se&&xe&&(he[0]=xe.x-se.x,he[1]=xe.y-se.y)}}const ce=b.zoom,me=[0,0,0];if(O){const se=I(re||b.pointCoordinate3D(q)),xe={dir:l.normalize([],l.sub([],se,b._camera.position))};if(xe.dir[2]<0){const be=b.zoomDeltaToMovement(se,O);l.scale$2(me,xe.dir,be)}}const K=l.add(he,he,me);b._translateCameraConstrained(K),O&&Math.abs(b.zoom-ce)>1e-4&&b.recenterOnTerrain(),b.cameraElevationReference="ground",this._map._update(),s.noInertia||this._inertia.record(s),this._fireEvents(d,g,!0)}_fireEvents(s,d,g){const _=Lo(this._eventsInProgress),b=Lo(s),I={};for(const B in s){const{originalEvent:q}=s[B];this._eventsInProgress[B]||(I[`${B}start`]=q),this._eventsInProgress[B]=s[B]}!_&&b&&this._fireEvent("movestart",b.originalEvent);for(const B in I)this._fireEvent(B,I[B]);b&&this._fireEvent("move",b.originalEvent);for(const B in s){const{originalEvent:q}=s[B];this._fireEvent(B,q)}const A={};let O;for(const B in this._eventsInProgress){const{handlerName:q,originalEvent:re}=this._eventsInProgress[B];this._handlersById[q].isActive()||(delete this._eventsInProgress[B],O=d[q]||re,A[`${B}end`]=O)}for(const B in A)this._fireEvent(B,A[B]);const N=Lo(this._eventsInProgress);if(g&&(_||b)&&!N){this._updatingCamera=!0;const B=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),q=re=>re!==0&&-this._bearingSnap<re&&re<this._bearingSnap;B?(q(B.bearing||this._map.getBearing())&&(B.bearing=0),this._map.easeTo(B,{originalEvent:O})):(this._map.fire(new l.Event("moveend",{originalEvent:O})),q(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(s,d){this._map.fire(new l.Event(s,d?{originalEvent:d}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(s=>{this._frameId=void 0,this.handleEvent(new dg("renderFrame",{timeStamp:s})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const qs="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class id extends l.Evented{constructor(s,d){super(),this._moving=!1,this._zooming=!1,this.transform=s,this._bearingSnap=d.bearingSnap,this._respectPrefersReducedMotion=d.respectPrefersReducedMotion!==!1,l.bindAll(["_renderFrameCallback"],this)}getCenter(){return new l.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(s,d){return this.jumpTo({center:s},d)}panBy(s,d,g){return s=l.Point.convert(s).mult(-1),this.panTo(this.transform.center,l.extend({offset:s},d),g)}panTo(s,d,g){return this.easeTo(l.extend({center:s},d),g)}getZoom(){return this.transform.zoom}setZoom(s,d){return this.jumpTo({zoom:s},d),this}zoomTo(s,d,g){return this.easeTo(l.extend({zoom:s},d),g)}zoomIn(s,d){return this.zoomTo(this.getZoom()+1,s,d),this}zoomOut(s,d){return this.zoomTo(this.getZoom()-1,s,d),this}getBearing(){return this.transform.bearing}setBearing(s,d){return this.jumpTo({bearing:s},d),this}getPadding(){return this.transform.padding}setPadding(s,d){return this.jumpTo({padding:s},d),this}rotateTo(s,d,g){return this.easeTo(l.extend({bearing:s},d),g)}resetNorth(s,d){return this.rotateTo(0,l.extend({duration:1e3},s),d),this}resetNorthPitch(s,d){return this.easeTo(l.extend({bearing:0,pitch:0,duration:1e3},s),d),this}snapToNorth(s,d){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(s,d):this}getPitch(){return this.transform.pitch}setPitch(s,d){return this.jumpTo({pitch:s},d),this}cameraForBounds(s,d){s=l.LngLatBounds.convert(s);const g=d&&d.bearing||0,_=d&&d.pitch||0,b=s.getNorthWest(),I=s.getSouthEast();return this._cameraForBounds(this.transform,b,I,g,_,d)}_extendCameraOptions(s){const d={top:0,bottom:0,right:0,left:0};if(typeof(s=l.extend({padding:d,offset:[0,0],maxZoom:this.transform.maxZoom},s)).padding=="number"){const g=s.padding;s.padding={top:g,bottom:g,right:g,left:g}}return s.padding=l.extend(d,s.padding),s}_minimumAABBFrustumDistance(s,d){const g=d.max[0]-d.min[0],_=d.max[1]-d.min[1];return g/_>s.aspect?g/(2*Math.tan(.5*s.fovX)*s.aspect):_/(2*Math.tan(.5*s.fovY)*s.aspect)}_cameraForBoundsOnGlobe(s,d,g,_,b,I){const A=s.clone(),O=this._extendCameraOptions(I);A.bearing=_,A.pitch=b;const N=l.LngLat.convert(d),B=l.LngLat.convert(g),q=.5*(N.lat+B.lat),re=.5*(N.lng+B.lng),le=l.latLngToECEF(q,re),he=l.normalize([],le),ce=l.normalize([],l.cross([],he,[0,1,0])),me=l.cross([],ce,he),K=[ce[0],ce[1],ce[2],0,me[0],me[1],me[2],0,he[0],he[1],he[2],0,0,0,0,1],se=[le,l.latLngToECEF(N.lat,N.lng),l.latLngToECEF(B.lat,N.lng),l.latLngToECEF(B.lat,B.lng),l.latLngToECEF(N.lat,B.lng),l.latLngToECEF(q,N.lng),l.latLngToECEF(q,B.lng),l.latLngToECEF(N.lat,re),l.latLngToECEF(B.lat,re)];let xe=l.Aabb.fromPoints(se.map(vt=>[l.dot(ce,vt),l.dot(me,vt),l.dot(he,vt)]));const be=l.transformMat4([],xe.center,K);l.squaredLength(be)===0&&l.set(be,0,0,1),l.normalize(be,be),l.scale$2(be,be,l.GLOBE_RADIUS),A.center=l.ecefToLatLng(be);const Re=A.getWorldToCameraMatrix(),ze=l.invert(new Float64Array(16),Re);xe=l.Aabb.applyTransform(xe,l.multiply([],Re,K)),l.transformMat4(be,be,Re);const Oe=.5*(xe.max[2]-xe.min[2]),Ve=this._minimumAABBFrustumDistance(A,xe),Ue=l.scale$2([],[0,0,1],Oe),Ke=l.add(Ue,be,Ue),At=Ve+(A.pitch===0?0:l.distance(be,Ke)),qe=A.globeCenterInViewSpace,ht=l.sub([],be,[qe[0],qe[1],qe[2]]);l.normalize(ht,ht),l.scale$2(ht,ht,At);const et=l.add([],be,ht);l.transformMat4(et,et,ze);const Et=l.earthRadius/l.GLOBE_RADIUS,Xe=l.length(et),dt=l.mercatorZfromAltitude(Math.max(Xe*Et-l.earthRadius,Number.EPSILON),0),Lt=Math.min(A.zoomFromMercatorZAdjusted(dt),O.maxZoom);return Lt>.5*(l.GLOBE_ZOOM_THRESHOLD_MIN+l.GLOBE_ZOOM_THRESHOLD_MAX)?(A.setProjection({name:"mercator"}),A.zoom=Lt,this._cameraForBounds(A,d,g,_,b,I)):{center:A.center,zoom:Lt,bearing:_,pitch:b}}queryTerrainElevation(s,d){const g=this.transform.elevation;return g?(d=l.extend({},{exaggerated:!0},d),g.getAtPoint(l.MercatorCoordinate.fromLngLat(s),null,d.exaggerated)):null}_cameraForBounds(s,d,g,_,b,I){if(s.projection.name==="globe")return this._cameraForBoundsOnGlobe(s,d,g,_,b,I);const A=s.clone(),O=this._extendCameraOptions(I),N=A.padding;A.bearing=_,A.pitch=b;const B=l.LngLat.convert(d),q=l.LngLat.convert(g),re=new l.LngLat(B.lng,q.lat),le=new l.LngLat(q.lng,B.lat),he=A.project(B),ce=A.project(q),me=this.queryTerrainElevation(B),K=this.queryTerrainElevation(q),se=this.queryTerrainElevation(re),xe=this.queryTerrainElevation(le),be=[[he.x,he.y,Math.min(me||0,K||0,se||0,xe||0)],[ce.x,ce.y,Math.max(me||0,K||0,se||0,xe||0)]];let Re=l.Aabb.fromPoints(be);const ze=A.getWorldToCameraMatrix(),Oe=l.invert(new Float64Array(16),ze);Re=l.Aabb.applyTransform(Re,ze);const Ve=l.sub([],Re.max,Re.min),Ue=N.left||0,Ke=N.right||0,At=N.bottom||0,qe=N.top||0,{left:ht,right:et,top:Et,bottom:Xe}=O.padding,dt=.5*(Ue+Ke),Lt=.5*(qe+At),vt=Math.min(A.scaleZoom(A.scale*Math.min((A.width-(Ue+Ke+ht+et))/Ve[0],(A.height-(At+qe+Xe+Et))/Ve[1])),O.maxZoom),Dt=A.scale/A.zoomScale(vt);Re=new l.Aabb([Re.min[0]-(ht+dt)*Dt,Re.min[1]-(Xe+Lt)*Dt,Re.min[2]],[Re.max[0]+(et+dt)*Dt,Re.max[1]+(Et+Lt)*Dt,Re.max[2]]);const dn=.5*Ve[2],Rn=this._minimumAABBFrustumDistance(A,Re),en=[0,0,1,0];l.transformMat4$1(en,en,ze),l.normalize$2(en,en);const _n=l.scale$2([],en,Rn+dn),Hn=l.add([],Re.center,_n),Un=(typeof O.offset.x=="number"&&typeof O.offset.y=="number"?new l.Point(O.offset.x,O.offset.y):l.Point.convert(O.offset)).rotate(-l.degToRad(_));Re.center[0]-=Un.x*Dt,Re.center[1]+=Un.y*Dt,l.transformMat4(Re.center,Re.center,Oe),l.transformMat4(Hn,Hn,Oe);const cn=[Re.center[0],Re.center[1],Hn[2]*A.pixelsPerMeter];l.scale$2(cn,cn,1/A.worldSize);const dr=l.lngFromMercatorX(cn[0]),yr=l.latFromMercatorY(cn[1]),_r=Math.min(A._zoomFromMercatorZ(cn[2]),O.maxZoom),xr=new l.LngLat(dr,yr);return A.mercatorFromTransition&&_r<.5*(l.GLOBE_ZOOM_THRESHOLD_MIN+l.GLOBE_ZOOM_THRESHOLD_MAX)?(A.setProjection({name:"globe"}),A.zoom=_r,this._cameraForBounds(A,d,g,_,b,I)):{center:xr,zoom:_r,bearing:_,pitch:b}}fitBounds(s,d,g){const _=this.cameraForBounds(s,d);return this._fitInternal(_,d,g)}fitScreenCoordinates(s,d,g,_,b){const I=l.Point.convert(s),A=l.Point.convert(d),O=new l.Point(Math.min(I.x,A.x),Math.min(I.y,A.y)),N=new l.Point(Math.max(I.x,A.x),Math.max(I.y,A.y));if(this.transform.projection.name==="mercator"&&this.transform.anyCornerOffEdge(I,A))return this;const B=this.transform.pointLocation3D(O),q=this.transform.pointLocation3D(N),re=this.transform.pointLocation3D(new l.Point(O.x,N.y)),le=this.transform.pointLocation3D(new l.Point(N.x,O.y)),he=[Math.min(B.lng,q.lng,re.lng,le.lng),Math.min(B.lat,q.lat,re.lat,le.lat)],ce=[Math.max(B.lng,q.lng,re.lng,le.lng),Math.max(B.lat,q.lat,re.lat,le.lat)],me=_&&_.pitch?_.pitch:this.getPitch(),K=this._cameraForBounds(this.transform,he,ce,g,me,_);return this._fitInternal(K,_,b)}_fitInternal(s,d,g){return s?(delete(d=l.extend(s,d)).padding,d.linear?this.easeTo(d,g):this.flyTo(d,g)):this}jumpTo(s,d){this.stop();const g=s.preloadOnly?this.transform.clone():this.transform;let _=!1,b=!1,I=!1;return"zoom"in s&&g.zoom!==+s.zoom&&(_=!0,g.zoom=+s.zoom),s.center!==void 0&&(g.center=l.LngLat.convert(s.center)),"bearing"in s&&g.bearing!==+s.bearing&&(b=!0,g.bearing=+s.bearing),"pitch"in s&&g.pitch!==+s.pitch&&(I=!0,g.pitch=+s.pitch),s.padding==null||g.isPaddingEqual(s.padding)||(g.padding=s.padding),s.preloadOnly?(this._preloadTiles(g),this):(this.fire(new l.Event("movestart",d)).fire(new l.Event("move",d)),_&&this.fire(new l.Event("zoomstart",d)).fire(new l.Event("zoom",d)).fire(new l.Event("zoomend",d)),b&&this.fire(new l.Event("rotatestart",d)).fire(new l.Event("rotate",d)).fire(new l.Event("rotateend",d)),I&&this.fire(new l.Event("pitchstart",d)).fire(new l.Event("pitch",d)).fire(new l.Event("pitchend",d)),this.fire(new l.Event("moveend",d)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||l.warnOnce(qs),this.transform.getFreeCameraOptions()}setFreeCameraOptions(s,d){const g=this.transform;if(!g.projection.supportsFreeCamera)return l.warnOnce(qs),this;this.stop();const _=g.zoom,b=g.pitch,I=g.bearing;g.setFreeCameraOptions(s);const A=_!==g.zoom,O=b!==g.pitch,N=I!==g.bearing;return this.fire(new l.Event("movestart",d)).fire(new l.Event("move",d)),A&&this.fire(new l.Event("zoomstart",d)).fire(new l.Event("zoom",d)).fire(new l.Event("zoomend",d)),N&&this.fire(new l.Event("rotatestart",d)).fire(new l.Event("rotate",d)).fire(new l.Event("rotateend",d)),O&&this.fire(new l.Event("pitchstart",d)).fire(new l.Event("pitch",d)).fire(new l.Event("pitchend",d)),this.fire(new l.Event("moveend",d)),this}easeTo(s,d){this._stop(!1,s.easeId),((s=l.extend({offset:[0,0],duration:500,easing:l.ease},s)).animate===!1||this._prefersReducedMotion(s))&&(s.duration=0);const g=this.transform,_=this.getZoom(),b=this.getBearing(),I=this.getPitch(),A=this.getPadding(),O="zoom"in s?+s.zoom:_,N="bearing"in s?this._normalizeBearing(s.bearing,b):b,B="pitch"in s?+s.pitch:I,q="padding"in s?s.padding:g.padding,re=l.Point.convert(s.offset);let le,he,ce;if(g.projection.name==="globe"){const Ue=l.MercatorCoordinate.fromLngLat(g.center),Ke=re.rotate(-g.angle);Ue.x+=Ke.x/g.worldSize,Ue.y+=Ke.y/g.worldSize;const At=Ue.toLngLat(),qe=l.LngLat.convert(s.center||At);this._normalizeCenter(qe),le=g.centerPoint.add(Ke),he=new l.Point(Ue.x,Ue.y).mult(g.worldSize),ce=new l.Point(l.mercatorXfromLng(qe.lng),l.mercatorYfromLat(qe.lat)).mult(g.worldSize).sub(he)}else{le=g.centerPoint.add(re);const Ue=g.pointLocation(le),Ke=l.LngLat.convert(s.center||Ue);this._normalizeCenter(Ke),he=g.project(Ue),ce=g.project(Ke).sub(he)}const me=g.zoomScale(O-_);let K,se;s.around&&(K=l.LngLat.convert(s.around),se=g.locationPoint(K));const xe=this._zooming||O!==_,be=this._rotating||b!==N,Re=this._pitching||B!==I,ze=!g.isPaddingEqual(q),Oe=Ue=>Ke=>{if(xe&&(Ue.zoom=l.number(_,O,Ke)),be&&(Ue.bearing=l.number(b,N,Ke)),Re&&(Ue.pitch=l.number(I,B,Ke)),ze&&(Ue.interpolatePadding(A,q,Ke),le=Ue.centerPoint.add(re)),K)Ue.setLocationAtPoint(K,se);else{const At=Ue.zoomScale(Ue.zoom-_),qe=O>_?Math.min(2,me):Math.max(.5,me),ht=Math.pow(qe,1-Ke),et=Ue.unproject(he.add(ce.mult(Ke*ht)).mult(At));Ue.setLocationAtPoint(Ue.renderWorldCopies?et.wrap():et,le)}return s.preloadOnly||this._fireMoveEvents(d),Ue};if(s.preloadOnly){const Ue=this._emulate(Oe,s.duration,g);return this._preloadTiles(Ue),this}const Ve={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=xe,this._rotating=be,this._pitching=Re,this._padding=ze,this._easeId=s.easeId,this._prepareEase(d,s.noMoveStart,Ve),this._ease(Oe(g),Ue=>{g.recenterOnTerrain(),this._afterEase(d,Ue)},s),this}_prepareEase(s,d,g={}){this._moving=!0,this.transform.cameraElevationReference="sea",d||g.moving||this.fire(new l.Event("movestart",s)),this._zooming&&!g.zooming&&this.fire(new l.Event("zoomstart",s)),this._rotating&&!g.rotating&&this.fire(new l.Event("rotatestart",s)),this._pitching&&!g.pitching&&this.fire(new l.Event("pitchstart",s))}_fireMoveEvents(s){this.fire(new l.Event("move",s)),this._zooming&&this.fire(new l.Event("zoom",s)),this._rotating&&this.fire(new l.Event("rotate",s)),this._pitching&&this.fire(new l.Event("pitch",s))}_afterEase(s,d){if(this._easeId&&d&&this._easeId===d)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const g=this._zooming,_=this._rotating,b=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,g&&this.fire(new l.Event("zoomend",s)),_&&this.fire(new l.Event("rotateend",s)),b&&this.fire(new l.Event("pitchend",s)),this.fire(new l.Event("moveend",s))}flyTo(s,d){if(this._prefersReducedMotion(s)){const vt=l.pick(s,["center","zoom","bearing","pitch","around"]);return this.jumpTo(vt,d)}this.stop(),s=l.extend({offset:[0,0],speed:1.2,curve:1.42,easing:l.ease},s);const g=this.transform,_=this.getZoom(),b=this.getBearing(),I=this.getPitch(),A=this.getPadding(),O="zoom"in s?l.clamp(+s.zoom,g.minZoom,g.maxZoom):_,N="bearing"in s?this._normalizeBearing(s.bearing,b):b,B="pitch"in s?+s.pitch:I,q="padding"in s?s.padding:g.padding,re=g.zoomScale(O-_),le=l.Point.convert(s.offset);let he=g.centerPoint.add(le);const ce=g.pointLocation(he),me=l.LngLat.convert(s.center||ce);this._normalizeCenter(me);const K=g.project(ce),se=g.project(me).sub(K);let xe=s.curve;const be=Math.max(g.width,g.height),Re=be/re,ze=se.mag();if("minZoom"in s){const vt=l.clamp(Math.min(s.minZoom,_,O),g.minZoom,g.maxZoom),Dt=be/g.zoomScale(vt-_);xe=Math.sqrt(Dt/ze*2)}const Oe=xe*xe;function Ve(vt){const Dt=(Re*Re-be*be+(vt?-1:1)*Oe*Oe*ze*ze)/(2*(vt?Re:be)*Oe*ze);return Math.log(Math.sqrt(Dt*Dt+1)-Dt)}function Ue(vt){return(Math.exp(vt)-Math.exp(-vt))/2}function Ke(vt){return(Math.exp(vt)+Math.exp(-vt))/2}const At=Ve(0);let qe=function(vt){return Ke(At)/Ke(At+xe*vt)},ht=function(vt){return be*((Ke(At)*(Ue(Dt=At+xe*vt)/Ke(Dt))-Ue(At))/Oe)/ze;var Dt},et=(Ve(1)-At)/xe;if(Math.abs(ze)<1e-6||!isFinite(et)){if(Math.abs(be-Re)<1e-6)return this.easeTo(s,d);const vt=Re<be?-1:1;et=Math.abs(Math.log(Re/be))/xe,ht=function(){return 0},qe=function(Dt){return Math.exp(vt*xe*Dt)}}s.duration="duration"in s?+s.duration:1e3*et/("screenSpeed"in s?+s.screenSpeed/xe:+s.speed),s.maxDuration&&s.duration>s.maxDuration&&(s.duration=0);const Et=b!==N,Xe=B!==I,dt=!g.isPaddingEqual(q),Lt=vt=>Dt=>{const dn=Dt*et,Rn=1/qe(dn);vt.zoom=Dt===1?O:_+vt.scaleZoom(Rn),Et&&(vt.bearing=l.number(b,N,Dt)),Xe&&(vt.pitch=l.number(I,B,Dt)),dt&&(vt.interpolatePadding(A,q,Dt),he=vt.centerPoint.add(le));const en=Dt===1?me:vt.unproject(K.add(se.mult(ht(dn))).mult(Rn));return vt.setLocationAtPoint(vt.renderWorldCopies?en.wrap():en,he),vt._updateCameraOnTerrain(),s.preloadOnly||this._fireMoveEvents(d),vt};if(s.preloadOnly){const vt=this._emulate(Lt,s.duration,g);return this._preloadTiles(vt),this}return this._zooming=!0,this._rotating=Et,this._pitching=Xe,this._padding=dt,this._prepareEase(d,!1),this._ease(Lt(g),()=>this._afterEase(d),s),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(s,d){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const g=this._onEaseEnd;this._onEaseEnd=void 0,g.call(this,d)}if(!s){const g=this.handlers;g&&g.stop(!1)}return this}_ease(s,d,g){g.animate===!1||g.duration===0?(s(1),d()):(this._easeStart=l.exported.now(),this._easeOptions=g,this._onEaseFrame=s,this._onEaseEnd=d,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const s=Math.min((l.exported.now()-this._easeStart)/this._easeOptions.duration,1),d=this._onEaseFrame;d&&d(this._easeOptions.easing(s)),s<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(s,d){s=l.wrap(s,-180,180);const g=Math.abs(s-d);return Math.abs(s-360-d)<g&&(s-=360),Math.abs(s+360-d)<g&&(s+=360),s}_normalizeCenter(s){const d=this.transform;if(!d.renderWorldCopies||d.maxBounds)return;const g=s.lng-d.center.lng;s.lng+=g>180?-360:g<-180?360:0}_prefersReducedMotion(s){return this._respectPrefersReducedMotion&&l.exported.prefersReducedMotion&&!(s&&s.essential)}_emulate(s,d,g){const _=Math.ceil(15*d/1e3),b=[],I=s(g.clone());for(let A=0;A<=_;A++){const O=I(A/_);b.push(O.clone())}return b}}class Jt{constructor(s={}){this.options=s,l.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(s){const d=this.options&&this.options.compact;return this._map=s,this._container=z("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=z("button","mapboxgl-ctrl-attrib-button",this._container),z("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=z("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),d&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),d===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(s,d){const g=this._map._getUIString(`AttributionControl.${d}`);s.setAttribute("aria-label",g),s.removeAttribute("title"),s.firstElementChild&&s.firstElementChild.setAttribute("title",g)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let s=this._editLink;s||(s=this._editLink=this._container.querySelector(".mapbox-improve-map"));const d=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||l.config.ACCESS_TOKEN}];if(s){const g=d.reduce((_,b,I)=>(b.value&&(_+=`${b.key}=${b.value}${I<d.length-1?"&":""}`),_),"?");s.href=`${l.config.FEEDBACK_URL}/${g}#${Lc(this._map,!0)}`,s.rel="noopener nofollow",this._setElementTitle(s,"MapFeedback")}}_updateData(s){!s||s.sourceDataType!=="metadata"&&s.sourceDataType!=="visibility"&&s.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let s=[];if(this._map.style.stylesheet){const _=this._map.style.stylesheet;this.styleOwner=_.owner,this.styleId=_.id}const d=this._map.style._sourceCaches;for(const _ in d){const b=d[_];if(b.used){const I=b.getSource();I.attribution&&s.indexOf(I.attribution)<0&&s.push(I.attribution)}}s.sort((_,b)=>_.length-b.length),s=s.filter((_,b)=>{for(let I=b+1;I<s.length;I++)if(s[I].indexOf(_)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?s=[...this.options.customAttribution,...s]:s.unshift(this.options.customAttribution));const g=s.join(" | ");g!==this._attribHTML&&(this._attribHTML=g,s.length?(this._innerContainer.innerHTML=g,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class pf{constructor(){l.bindAll(["_updateLogo","_updateCompact"],this)}onAdd(s){this._map=s,this._container=z("div","mapboxgl-ctrl");const d=z("a","mapboxgl-ctrl-logo");return d.target="_blank",d.rel="noopener nofollow",d.href="https://www.mapbox.com/",d.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),d.setAttribute("rel","noopener nofollow"),this._container.appendChild(d),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(s){s&&s.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const s=this._map.style._sourceCaches;if(Object.entries(s).length===0)return!0;for(const d in s){const g=s[d].getSource();if(g.hasOwnProperty("mapbox_logo")&&!g.mapbox_logo)return!1}return!0}_updateCompact(){const s=this._container.children;if(s.length){const d=s[0];this._map.getCanvasContainer().offsetWidth<250?d.classList.add("mapboxgl-compact"):d.classList.remove("mapboxgl-compact")}}}class mf{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(s){const d=++this._id;return this._queue.push({callback:s,id:d,cancelled:!1}),d}remove(s){const d=this._currentlyRunning,g=d?this._queue.concat(d):this._queue;for(const _ of g)if(_.id===s)return void(_.cancelled=!0)}run(s=0){const d=this._currentlyRunning=this._queue;this._queue=[];for(const g of d)if(!g.cancelled&&(g.callback(s),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function Fl(p,s,d){if(p=new l.LngLat(p.lng,p.lat),s){const g=new l.LngLat(p.lng-360,p.lat),_=new l.LngLat(p.lng+360,p.lat),b=360*Math.ceil(Math.abs(p.lng-d.center.lng)/360),I=d.locationPoint(p).distSqr(s),A=s.x<0||s.y<0||s.x>d.width||s.y>d.height;d.locationPoint(g).distSqr(s)<I&&(A||Math.abs(g.lng-d.center.lng)<b)?p=g:d.locationPoint(_).distSqr(s)<I&&(A||Math.abs(_.lng-d.center.lng)<b)&&(p=_)}for(;Math.abs(p.lng-d.center.lng)>180;){const g=d.locationPoint(p);if(g.x>=0&&g.y>=0&&g.x<=d.width&&g.y<=d.height)break;p.lng>d.center.lng?p.lng-=360:p.lng+=360}return p}const Zs={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class Zt extends l.Evented{constructor(s,d){if(super(),(s instanceof l.window.HTMLElement||d)&&(s=l.extend({element:s},d)),l.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=s&&s.anchor||"center",this._color=s&&s.color||"#3FB1CE",this._scale=s&&s.scale||1,this._draggable=s&&s.draggable||!1,this._clickTolerance=s&&s.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=s&&s.rotation||0,this._rotationAlignment=s&&s.rotationAlignment||"auto",this._pitchAlignment=s&&s.pitchAlignment&&s.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=s&&s.occludedOpacity||.2,s&&s.element)this._element=s.element,this._offset=l.Point.convert(s&&s.offset||[0,0]);else{this._defaultMarker=!0,this._element=z("div");const _=41,b=27,I=F("svg",{display:"block",height:_*this._scale+"px",width:b*this._scale+"px",viewBox:`0 0 ${b} ${_}`},this._element),A=F("radialGradient",{id:"shadowGradient"},F("defs",{},I));F("stop",{offset:"10%","stop-opacity":.4},A),F("stop",{offset:"100%","stop-opacity":.05},A),F("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},I),F("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},I),F("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},I),F("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},I),this._offset=l.Point.convert(s&&s.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",_=>{_.preventDefault()}),this._element.addEventListener("mousedown",_=>{_.preventDefault()});const g=this._element.classList;for(const _ in Zs)g.remove(`mapboxgl-marker-anchor-${_}`);g.add(`mapboxgl-marker-anchor-${this._anchor}`),this._popup=null}addTo(s){return s===this._map||(this.remove(),this._map=s,s.getCanvasContainer().appendChild(this._element),s.on("move",this._updateMoving),s.on("moveend",this._update),s.on("remove",this._clearFadeTimer),s._addMarker(this),this.setDraggable(this._draggable),this._update(),s.on("click",this._onMapClick)),this}remove(){const s=this._map;return s&&(s.off("click",this._onMapClick),s.off("move",this._updateMoving),s.off("moveend",this._update),s.off("mousedown",this._addDragHandler),s.off("touchstart",this._addDragHandler),s.off("mouseup",this._onUp),s.off("touchend",this._onUp),s.off("mousemove",this._onMove),s.off("touchmove",this._onMove),s.off("remove",this._clearFadeTimer),s._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(s){return this._lngLat=l.LngLat.convert(s),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(s){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),s){if(!("offset"in s.options)){const _=Math.sqrt(Math.pow(13.5,2)/2);s.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[_,-1*(38.1-13.5+_)],"bottom-right":[-_,-1*(38.1-13.5+_)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=s,s._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(s){const d=s.code,g=s.charCode||s.keyCode;d!=="Space"&&d!=="Enter"&&g!==32&&g!==13||this.togglePopup()}_onMapClick(s){const d=s.originalEvent.target,g=this._element;this._popup&&(d===g||g.contains(d))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const s=this._popup;return s?(s.isOpen()?(s.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(s.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const s=this._map,d=this._pos;if(!s||!d)return!1;const g=s.unproject(d),_=s.getFreeCameraOptions();if(!_.position)return!1;const b=_.position.toLngLat();return b.distanceTo(g)<.9*b.distanceTo(this._lngLat)}_evaluateOpacity(){const s=this._map;if(!s)return;const d=this._pos;if(!d||d.x<0||d.x>s.transform.width||d.y<0||d.y>s.transform.height)return void this._clearFadeTimer();const g=s.unproject(d);let _;s._showingGlobe()&&l.isLngLatBehindGlobe(s.transform,this._lngLat)?_=0:(_=1-s._queryFogOpacity(g),s.transform._terrainEnabled()&&s.getTerrain()&&this._behindTerrain()&&(_*=this._occludedOpacity)),this._element.style.opacity=`${_}`,this._element.style.pointerEvents=_>0?"auto":"none",this._popup&&this._popup._setOpacity(_),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const s=this._pos;if(!s||!this._map)return;const d=this._offset.mult(this._scale);this._element.style.transform=`
            translate(${s.x}px,${s.y}px)
            ${Zs[this._anchor]}
            ${this._calculateXYTransform()} ${this._calculateZTransform()}
            translate(${d.x}px,${d.y}px)
        `}_calculateXYTransform(){const s=this._pos,d=this._map,g=this.getPitchAlignment();if(!d||!s||g!=="map")return"";if(!d._showingGlobe()){const O=d.getPitch();return O?`rotateX(${O}deg)`:""}const _=l.radToDeg(l.globeTiltAtLngLat(d.transform,this._lngLat)),b=s.sub(l.globeCenterToScreenPoint(d.transform)),I=Math.abs(b.x)+Math.abs(b.y);if(I===0)return"";const A=_/I;return`rotateX(${-b.y*A}deg) rotateY(${b.x*A}deg)`}_calculateZTransform(){const s=this._pos,d=this._map;if(!d||!s)return"";let g=0;const _=this.getRotationAlignment();if(_==="map")if(d._showingGlobe()){const b=d.project(new l.LngLat(this._lngLat.lng,this._lngLat.lat+.001)),I=d.project(new l.LngLat(this._lngLat.lng,this._lngLat.lat-.001)).sub(b);g=l.radToDeg(Math.atan2(I.y,I.x))-90}else g=-d.getBearing();else if(_==="horizon"){const b=l.smoothstep(4,6,d.getZoom()),I=l.globeCenterToScreenPoint(d.transform);I.y+=b*d.transform.height;const A=s.sub(I),O=l.radToDeg(Math.atan2(A.y,A.x));g=(O>90?O-270:O+90)*(1-b)}return g+=this._rotation,g?`rotateZ(${g}deg)`:""}_update(s){l.window.cancelAnimationFrame(this._updateFrameId);const d=this._map;d&&(d.transform.renderWorldCopies&&(this._lngLat=Fl(this._lngLat,this._pos,d.transform)),this._pos=d.project(this._lngLat),s===!0?this._updateFrameId=l.window.requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),d._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(d._showingGlobe()||d.getTerrain()||d.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(s){return this._offset=l.Point.convert(s),this._update(),this}_onMove(s){const d=this._map;if(!d)return;const g=this._pointerdownPos,_=this._positionDelta;if(g&&_){if(!this._isDragging){const b=this._clickTolerance||d._clickTolerance;if(s.point.dist(g)<b)return;this._isDragging=!0}this._pos=s.point.sub(_),this._lngLat=d.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new l.Event("dragstart"))),this.fire(new l.Event("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const s=this._map;s&&(s.off("mousemove",this._onMove),s.off("touchmove",this._onMove)),this._state==="active"&&this.fire(new l.Event("dragend")),this._state="inactive"}_addDragHandler(s){const d=this._map,g=this._pos;d&&g&&this._element.contains(s.originalEvent.target)&&(s.preventDefault(),this._positionDelta=s.point.sub(g),this._pointerdownPos=s.point,this._state="pending",d.on("mousemove",this._onMove),d.on("touchmove",this._onMove),d.once("mouseup",this._onUp),d.once("touchend",this._onUp))}setDraggable(s){this._draggable=!!s;const d=this._map;return d&&(s?(d.on("mousedown",this._addDragHandler),d.on("touchstart",this._addDragHandler)):(d.off("mousedown",this._addDragHandler),d.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(s){return this._rotation=s||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(s){return this._rotationAlignment=s||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment==="auto"||this._rotationAlignment==="horizon"&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(s){return this._pitchAlignment=s||"auto",this._update(),this}getPitchAlignment(){return this._pitchAlignment==="auto"?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(s){return this._occludedOpacity=s||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const gf={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},f_=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function hg(p=new l.Point(0,0),s="bottom"){if(typeof p=="number"){const d=Math.round(Math.sqrt(.5*Math.pow(p,2)));switch(s){case"top":return new l.Point(0,p);case"top-left":return new l.Point(d,d);case"top-right":return new l.Point(-d,d);case"bottom":return new l.Point(0,-p);case"bottom-left":return new l.Point(d,-d);case"bottom-right":return new l.Point(-d,-d);case"left":return new l.Point(p,0);case"right":return new l.Point(-p,0)}return new l.Point(0,0)}return p instanceof l.Point||Array.isArray(p)?l.Point.convert(p):l.Point.convert(p[s]||[0,0])}class vf{constructor(s){this.jumpTo(s)}getValue(s){if(s<=this._startTime)return this._start;if(s>=this._endTime)return this._end;const d=l.easeCubicInOut((s-this._startTime)/(this._endTime-this._startTime));return this._start*(1-d)+this._end*d}isEasing(s){return s>=this._startTime&&s<=this._endTime}jumpTo(s){this._startTime=-1/0,this._endTime=-1/0,this._start=s,this._end=s}easeTo(s,d,g){this._start=this.getValue(d),this._end=s,this._startTime=d,this._endTime=d+g}}const fg={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use  + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},pg={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,respectPrefersReducedMotion:!0,crossSourceCollisions:!0},p_={showCompass:!0,showZoom:!0,visualizePitch:!1};class m_{constructor(s,d,g=!1){this._clickTolerance=10,this.element=d,this.mouseRotate=new cf({clickTolerance:s.dragRotate._mouseRotate._clickTolerance}),this.map=s,g&&(this.mousePitch=new uf({clickTolerance:s.dragRotate._mousePitch._clickTolerance})),l.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),d.addEventListener("mousedown",this.mousedown),d.addEventListener("touchstart",this.touchstart,{passive:!1}),d.addEventListener("touchmove",this.touchmove),d.addEventListener("touchend",this.touchend),d.addEventListener("touchcancel",this.reset)}down(s,d){this.mouseRotate.mousedown(s,d),this.mousePitch&&this.mousePitch.mousedown(s,d),$()}move(s,d){const g=this.map,_=this.mouseRotate.mousemoveWindow(s,d),b=_&&_.bearingDelta;if(b&&g.setBearing(g.getBearing()+b),this.mousePitch){const I=this.mousePitch.mousemoveWindow(s,d),A=I&&I.pitchDelta;A&&g.setPitch(g.getPitch()+A)}}off(){const s=this.element;s.removeEventListener("mousedown",this.mousedown),s.removeEventListener("touchstart",this.touchstart,{passive:!1}),s.removeEventListener("touchmove",this.touchmove),s.removeEventListener("touchend",this.touchend),s.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){j(),l.window.removeEventListener("mousemove",this.mousemove),l.window.removeEventListener("mouseup",this.mouseup)}mousedown(s){this.down(l.extend({},s,{ctrlKey:!0,preventDefault:()=>s.preventDefault()}),ee(this.element,s)),l.window.addEventListener("mousemove",this.mousemove),l.window.addEventListener("mouseup",this.mouseup)}mousemove(s){this.move(s,ee(this.element,s))}mouseup(s){this.mouseRotate.mouseupWindow(s),this.mousePitch&&this.mousePitch.mouseupWindow(s),this.offTemp()}touchstart(s){s.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=ne(this.element,s.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>s.preventDefault()},this._startPos))}touchmove(s){s.targetTouches.length!==1?this.reset():(this._lastPos=ne(this.element,s.targetTouches)[0],this.move({preventDefault:()=>s.preventDefault()},this._lastPos))}touchend(s){s.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const yf={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},_f={maxWidth:100,unit:"metric"},xf={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"},Bl={version:l.version,supported:E,setRTLTextPlugin:l.setRTLTextPlugin,getRTLTextPluginStatus:l.getRTLTextPluginStatus,Map:class extends id{constructor(p){if(l.LivePerformanceUtils.mark(l.PerformanceMarkers.create),(p=l.extend({},pg,p)).minZoom!=null&&p.maxZoom!=null&&p.minZoom>p.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(p.minPitch!=null&&p.maxPitch!=null&&p.minPitch>p.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(p.minPitch!=null&&p.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(p.maxPitch!=null&&p.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(p.antialias&&l.isSafariWithAntialiasingBug(l.window)&&(p.antialias=!1,l.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new Ll(p.minZoom,p.maxZoom,p.minPitch,p.maxPitch,p.renderWorldCopies),p),this._interactive=p.interactive,this._minTileCacheSize=p.minTileCacheSize,this._maxTileCacheSize=p.maxTileCacheSize,this._failIfMajorPerformanceCaveat=p.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=p.preserveDrawingBuffer,this._antialias=p.antialias,this._useWebGL2=p.useWebGL2,this._trackResize=p.trackResize,this._bearingSnap=p.bearingSnap,this._refreshExpiredTiles=p.refreshExpiredTiles,this._fadeDuration=p.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=p.crossSourceCollisions,this._collectResourceTiming=p.collectResourceTiming,this._optimizeForTerrain=p.optimizeForTerrain,this._language=this._parseLanguage(p.language),this._worldview=p.worldview,this._renderTaskQueue=new mf,this._domRenderTaskQueue=new mf,this._controls=[],this._markers=[],this._popups=[],this._mapId=l.uniqueId(),this._locale=l.extend({},fg,p.locale),this._clickTolerance=p.clickTolerance,this._cooperativeGestures=p.cooperativeGestures,this._performanceMetricsCollection=p.performanceMetricsCollection,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new vf(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._requestManager=new l.RequestManager(p.transformRequest,p.accessToken,p.testMode),this._silenceAuthErrors=!!p.testMode,typeof p.container=="string"){if(this._container=l.window.document.getElementById(p.container),!this._container)throw new Error(`Container '${p.container}' not found.`)}else{if(!(p.container instanceof l.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=p.container}if(this._container.childNodes.length>0&&l.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),p.maxBounds&&this.setMaxBounds(p.maxBounds),l.bindAll(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),l.window!==void 0&&(l.window.addEventListener("online",this._onWindowOnline,!1),l.window.addEventListener("resize",this._onWindowResize,!1),l.window.addEventListener("orientationchange",this._onWindowResize,!1),l.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1),l.window.addEventListener("visibilitychange",this._onVisibilityChange,!1)),this.handlers=new xa(this,p),this._localFontFamily=p.localFontFamily,this._localIdeographFontFamily=p.localIdeographFontFamily,p.style&&this.setStyle(p.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),p.projection&&this.setProjection(p.projection),this._hash=p.hash&&new of(typeof p.hash=="string"&&p.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:p.center,zoom:p.zoom,bearing:p.bearing,pitch:p.pitch}),p.bounds&&(this.resize(),this.fitBounds(p.bounds,l.extend({},p.fitBoundsOptions,{duration:0})))),this.resize(),p.attributionControl&&this.addControl(new Jt({customAttribution:p.customAttribution})),this._logoControl=new pf,this.addControl(this._logoControl,p.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",s=>{this._update(s.dataType==="style"),this.fire(new l.Event(`${s.dataType}data`,s))}),this.on("dataloading",s=>{this.fire(new l.Event(`${s.dataType}dataloading`,s))})}_getMapId(){return this._mapId}addControl(p,s){if(s===void 0&&(s=p.getDefaultPosition?p.getDefaultPosition():"top-right"),!p||!p.onAdd)return this.fire(new l.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const d=p.onAdd(this);this._controls.push(p);const g=this._controlPositions[s];return s.indexOf("bottom")!==-1?g.insertBefore(d,g.firstChild):g.appendChild(d),this}removeControl(p){if(!p||!p.onRemove)return this.fire(new l.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const s=this._controls.indexOf(p);return s>-1&&this._controls.splice(s,1),p.onRemove(this),this}hasControl(p){return this._controls.indexOf(p)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(p){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const s=!this._moving;return s&&this.fire(new l.Event("movestart",p)).fire(new l.Event("move",p)),this.fire(new l.Event("resize",p)),s&&this.fire(new l.Event("moveend",p)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(p){return this.transform.setMaxBounds(l.LngLatBounds.convert(p)),this._update()}setMinZoom(p){if((p=p??-2)>=-2&&p<=this.transform.maxZoom)return this.transform.minZoom=p,this._update(),this.getZoom()<p?this.setZoom(p):this.fire(new l.Event("zoomstart")).fire(new l.Event("zoom")).fire(new l.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(p){if((p=p??22)>=this.transform.minZoom)return this.transform.maxZoom=p,this._update(),this.getZoom()>p?this.setZoom(p):this.fire(new l.Event("zoomstart")).fire(new l.Event("zoom")).fire(new l.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(p){if((p=p??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(p>=0&&p<=this.transform.maxPitch)return this.transform.minPitch=p,this._update(),this.getPitch()<p?this.setPitch(p):this.fire(new l.Event("pitchstart")).fire(new l.Event("pitch")).fire(new l.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(p){if((p=p??85)>85)throw new Error("maxPitch must be less than or equal to 85");if(p>=this.transform.minPitch)return this.transform.maxPitch=p,this._update(),this.getPitch()>p?this.setPitch(p):this.fire(new l.Event("pitchstart")).fire(new l.Event("pitch")).fire(new l.Event("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(p){return this.transform.renderWorldCopies=p,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(p){return p==="auto"?l.window.navigator.language:Array.isArray(p)?p.length===0?void 0:p.map(s=>s==="auto"?l.window.navigator.language:s):p}setLanguage(p){const s=this._parseLanguage(p);if(!this.style||s===this._language)return this;this._language=s,this.style._reloadSources();for(const d of this._controls)d._setLanguage&&d._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(p){return this.style&&p!==this._worldview?(this._worldview=p,this.style._reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return this.transform.projection.name==="globe"}setProjection(p){return this._lazyInitEmptyStyle(),p?typeof p=="string"&&(p={name:p}):p=null,this._useExplicitProjection=!!p,this._prioritizeAndUpdateProjection(p,this.style.stylesheet?this.style.stylesheet.projection:null)}_updateProjectionTransition(){if(this.getProjection().name!=="globe")return;const p=this.transform,s=p.projection.name;let d;s==="globe"&&p.zoom>=l.GLOBE_ZOOM_THRESHOLD_MAX?(p.setMercatorFromTransition(),d=!0):s==="mercator"&&p.zoom<l.GLOBE_ZOOM_THRESHOLD_MAX&&(p.setProjection({name:"globe"}),d=!0),d&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(p,s){return this._updateProjection(p||s||{name:"mercator"})}_updateProjection(p){let s;if(s=p.name==="globe"&&this.transform.zoom>=l.GLOBE_ZOOM_THRESHOLD_MAX?this.transform.setMercatorFromTransition():this.transform.setProjection(p),this.style.applyProjectionUpdate(),s){this.painter.clearBackgroundTiles();for(const d in this.style._sourceCaches)this.style._sourceCaches[d].clearTiles();this._update(!0),this._forceMarkerAndPopupUpdate(!0)}return this}project(p){return this.transform.locationPoint3D(l.LngLat.convert(p))}unproject(p){return this.transform.pointLocation3D(l.Point.convert(p))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(p,s,d){if(p==="mouseenter"||p==="mouseover"){let g=!1;const _=I=>{const A=s.filter(N=>this.getLayer(N)),O=A.length?this.queryRenderedFeatures(I.point,{layers:A}):[];O.length?g||(g=!0,d.call(this,new Ci(p,this,I.originalEvent,{features:O}))):g=!1},b=()=>{g=!1};return{layers:new Set(s),listener:d,delegates:{mousemove:_,mouseout:b}}}if(p==="mouseleave"||p==="mouseout"){let g=!1;const _=I=>{const A=s.filter(O=>this.getLayer(O));(A.length?this.queryRenderedFeatures(I.point,{layers:A}):[]).length?g=!0:g&&(g=!1,d.call(this,new Ci(p,this,I.originalEvent)))},b=I=>{g&&(g=!1,d.call(this,new Ci(p,this,I.originalEvent)))};return{layers:new Set(s),listener:d,delegates:{mousemove:_,mouseout:b}}}{const g=_=>{const b=s.filter(A=>this.getLayer(A)),I=b.length?this.queryRenderedFeatures(_.point,{layers:b}):[];I.length&&(_.features=I,d.call(this,_),delete _.features)};return{layers:new Set(s),listener:d,delegates:{[p]:g}}}}on(p,s,d){if(d===void 0)return super.on(p,s);Array.isArray(s)||(s=[s]);const g=this._createDelegatedListener(p,s,d);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[p]=this._delegatedListeners[p]||[],this._delegatedListeners[p].push(g);for(const _ in g.delegates)this.on(_,g.delegates[_]);return this}once(p,s,d){if(d===void 0)return super.once(p,s);Array.isArray(s)||(s=[s]);const g=this._createDelegatedListener(p,s,d);for(const _ in g.delegates)this.once(_,g.delegates[_]);return this}off(p,s,d){if(d===void 0)return super.off(p,s);s=new Set(Array.isArray(s)?s:[s]);const g=(b,I)=>{if(b.size!==I.size)return!1;for(const A of b)if(!I.has(A))return!1;return!0},_=this._delegatedListeners?this._delegatedListeners[p]:void 0;return _&&(b=>{for(let I=0;I<b.length;I++){const A=b[I];if(A.listener===d&&g(A.layers,s)){for(const O in A.delegates)this.off(O,A.delegates[O]);return b.splice(I,1),this}}})(_),this}queryRenderedFeatures(p,s){return this.style?(s!==void 0||p===void 0||p instanceof l.Point||Array.isArray(p)||(s=p,p=void 0),this.style.queryRenderedFeatures(p=p||[[0,0],[this.transform.width,this.transform.height]],s=s||{},this.transform)):[]}querySourceFeatures(p,s){return this.style.querySourceFeatures(p,s)}isPointOnSurface(p){const{name:s}=this.transform.projection;return s!=="globe"&&s!=="mercator"&&l.warnOnce(`${s} projection does not support isPointOnSurface, this API may behave unexpectedly.`),this.transform.isPointOnSurface(l.Point.convert(p))}setStyle(p,s){return(s=l.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},s)).diff!==!1&&s.localIdeographFontFamily===this._localIdeographFontFamily&&s.localFontFamily===this._localFontFamily&&this.style&&p?(this._diffStyle(p,s),this):(this._localIdeographFontFamily=s.localIdeographFontFamily,this._localFontFamily=s.localFontFamily,this._updateStyle(p,s))}_getUIString(p){const s=this._locale[p];if(s==null)throw new Error(`Missing UI string '${p}'`);return s}_updateStyle(p,s){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),p&&(this.style=new ya(this,s||{}),this.style.setEventedParent(this,{style:this.style}),typeof p=="string"?this.style.loadURL(p):this.style.loadJSON(p)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new ya(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(p,s){if(typeof p=="string"){const d=this._requestManager.normalizeStyleURL(p),g=this._requestManager.transformRequest(d,l.ResourceType.Style);l.getJSON(g,(_,b)=>{_?this.fire(new l.ErrorEvent(_)):b&&this._updateDiff(b,s)})}else typeof p=="object"&&this._updateDiff(p,s)}_updateDiff(p,s){try{this.style.setState(p)&&this._update(!0)}catch(d){l.warnOnce(`Unable to perform style diff: ${d.message||d.error||d}.  Rebuilding the style from scratch.`),this._updateStyle(p,s)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(l.warnOnce("There is no style added to the map."),!1)}addSource(p,s){return this._lazyInitEmptyStyle(),this.style.addSource(p,s),this._update(!0)}isSourceLoaded(p){return!!this.style&&this.style._isSourceCacheLoaded(p)}areTilesLoaded(){const p=this.style&&this.style._sourceCaches;for(const s in p){const d=p[s]._tiles;for(const g in d){const _=d[g];if(_.state!=="loaded"&&_.state!=="errored")return!1}}return!0}addSourceType(p,s,d){this._lazyInitEmptyStyle(),this.style.addSourceType(p,s,d)}removeSource(p){return this.style.removeSource(p),this._updateTerrain(),this._update(!0)}getSource(p){return this.style.getSource(p)}addImage(p,s,{pixelRatio:d=1,sdf:g=!1,stretchX:_,stretchY:b,content:I}={}){if(this._lazyInitEmptyStyle(),s instanceof l.window.HTMLImageElement||l.window.ImageBitmap&&s instanceof l.window.ImageBitmap){const{width:A,height:O,data:N}=l.exported.getImageData(s);this.style.addImage(p,{data:new l.RGBAImage({width:A,height:O},N),pixelRatio:d,stretchX:_,stretchY:b,content:I,sdf:g,version:0})}else if(s.width===void 0||s.height===void 0)this.fire(new l.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:A,height:O}=s,N=s;this.style.addImage(p,{data:new l.RGBAImage({width:A,height:O},new Uint8Array(N.data)),pixelRatio:d,stretchX:_,stretchY:b,content:I,sdf:g,version:0,userImage:N}),N.onAdd&&N.onAdd(this,p)}}updateImage(p,s){const d=this.style.getImage(p);if(!d)return void this.fire(new l.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const g=s instanceof l.window.HTMLImageElement||l.window.ImageBitmap&&s instanceof l.window.ImageBitmap?l.exported.getImageData(s):s,{width:_,height:b}=g;_!==void 0&&b!==void 0?_===d.data.width&&b===d.data.height?(d.data.replace(g.data,!(s instanceof l.window.HTMLImageElement||l.window.ImageBitmap&&s instanceof l.window.ImageBitmap)),this.style.updateImage(p,d)):this.fire(new l.ErrorEvent(new Error(`The width and height of the updated image (${_}, ${b})
                must be that same as the previous version of the image
                (${d.data.width}, ${d.data.height})`))):this.fire(new l.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}hasImage(p){return p?!!this.style.getImage(p):(this.fire(new l.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(p){this.style.removeImage(p)}loadImage(p,s){l.getImage(this._requestManager.transformRequest(p,l.ResourceType.Image),(d,g)=>{s(d,g instanceof l.window.HTMLImageElement?l.exported.getImageData(g):g)})}listImages(){return this.style.listImages()}addLayer(p,s){return this._lazyInitEmptyStyle(),this.style.addLayer(p,s),this._update(!0)}moveLayer(p,s){return this.style.moveLayer(p,s),this._update(!0)}removeLayer(p){return this.style.removeLayer(p),this._update(!0)}getLayer(p){return this.style.getLayer(p)}setLayerZoomRange(p,s,d){return this.style.setLayerZoomRange(p,s,d),this._update(!0)}setFilter(p,s,d={}){return this.style.setFilter(p,s,d),this._update(!0)}getFilter(p){return this.style.getFilter(p)}setPaintProperty(p,s,d,g={}){return this.style.setPaintProperty(p,s,d,g),this._update(!0)}getPaintProperty(p,s){return this.style.getPaintProperty(p,s)}setLayoutProperty(p,s,d,g={}){return this.style.setLayoutProperty(p,s,d,g),this._update(!0)}getLayoutProperty(p,s){return this.style.getLayoutProperty(p,s)}setLight(p,s={}){return this._lazyInitEmptyStyle(),this.style.setLight(p,s),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(p){return this._lazyInitEmptyStyle(),!p&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(p),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(p){return this._lazyInitEmptyStyle(),this.style.setFog(p),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(p){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(l.LngLat.convert(p),this.transform):0}setFeatureState(p,s){return this.style.setFeatureState(p,s),this._update()}removeFeatureState(p,s){return this.style.removeFeatureState(p,s),this._update()}getFeatureState(p){return this.style.getFeatureState(p)}_updateContainerDimensions(){if(!this._container)return;const p=this._container.getBoundingClientRect().width||400,s=this._container.getBoundingClientRect().height||300;let d,g,_,b=this._container;for(;b&&(!g||!_);){const I=l.window.getComputedStyle(b).transform;I&&I!=="none"&&(d=I.match(/matrix.*\((.+)\)/)[1].split(", "),d[0]&&d[0]!=="0"&&d[0]!=="1"&&(g=d[0]),d[3]&&d[3]!=="0"&&d[3]!=="1"&&(_=d[3])),b=b.parentElement}this._containerWidth=g?Math.abs(p/g):p,this._containerHeight=_?Math.abs(s/_):s}_detectMissingCSS(){l.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&l.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const p=this._container;p.classList.add("mapboxgl-map"),(this._missingCSSCanary=z("div","mapboxgl-canary",p)).style.visibility="hidden",this._detectMissingCSS();const s=this._canvasContainer=z("div","mapboxgl-canvas-container",p);this._interactive&&s.classList.add("mapboxgl-interactive"),this._canvas=z("canvas","mapboxgl-canvas",s),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const d=this._controlContainer=z("div","mapboxgl-control-container",p),g=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(_=>{g[_]=z("div",`mapboxgl-ctrl-${_}`,d)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(p,s){const d=l.exported.devicePixelRatio||1;this._canvas.width=d*Math.ceil(p),this._canvas.height=d*Math.ceil(s),this._canvas.style.width=`${p}px`,this._canvas.style.height=`${s}px`}_addMarker(p){this._markers.push(p)}_removeMarker(p){const s=this._markers.indexOf(p);s!==-1&&this._markers.splice(s,1)}_addPopup(p){this._popups.push(p)}_removePopup(p){const s=this._popups.indexOf(p);s!==-1&&this._popups.splice(s,1)}_setupPainter(){const p=l.extend({},E.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),s=this._useWebGL2&&this._canvas.getContext("webgl2",p),d=s||this._canvas.getContext("webgl",p)||this._canvas.getContext("experimental-webgl",p);d?(this._useWebGL2&&!s&&l.warnOnce("Failed to create WebGL 2 context. Using WebGL 1."),l.storeAuthState(d,!0),this.painter=new Ol(d,this.transform,!!s),this.on("data",g=>{g.dataType==="source"&&this.painter.setTileLoadedFlag(!0)}),l.exported$1.testSupport(d)):this.fire(new l.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(p){p.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new l.Event("webglcontextlost",{originalEvent:p}))}_contextRestored(p){this._setupPainter(),this.resize(),this._update(),this.fire(new l.Event("webglcontextrestored",{originalEvent:p}))}_onMapScroll(p){if(p.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(p){return this.style?(this._styleDirty=this._styleDirty||p,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(p){return this._update(),this._renderTaskQueue.add(p)}_cancelRenderFrame(p){this._renderTaskQueue.remove(p)}_requestDomTask(p){!this.loaded()||this.loaded()&&!this.isMoving()?p():this._domRenderTaskQueue.add(p)}_render(p){let s;const d=this.painter.context.extTimerQuery,g=l.exported.now();if(this.listens("gpu-timing-frame")&&(s=d.createQueryEXT(),d.beginQueryEXT(d.TIME_ELAPSED_EXT,s)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],l.window.performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],l.window.performance.now())),this._renderTaskQueue.run(p),this._domRenderTaskQueue.run(p),this._removed)return;this._updateProjectionTransition();const _=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const A=this.transform.zoom,O=this.transform.pitch,N=l.exported.now(),B=new l.EvaluationParameters(A,{now:N,fadeDuration:_,pitch:O,transition:this.style.getTransition()});this.style.update(B)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let b=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),b=this._updateAverageElevation(g),this.style._updateSources(this.transform),this._forceMarkerAndPopupUpdate()):b=this._updateAverageElevation(g),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,_,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:_,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new l.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new l.Event("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),s){const A=l.exported.now()-g;d.endQueryEXT(d.TIME_ELAPSED_EXT,s),setTimeout(()=>{const O=d.getQueryObjectEXT(s,d.QUERY_RESULT_EXT)/1e6;d.deleteQueryEXT(s),this.fire(new l.Event("gpu-timing-frame",{cpuTime:A,gpuTime:O})),l.window.performance.mark("frame-gpu",{startTime:g,detail:{gpuTime:O}})},50)}if(this.listens("gpu-timing-layer")){const A=this.painter.collectGpuTimers();setTimeout(()=>{const O=this.painter.queryGpuTimers(A);this.fire(new l.Event("gpu-timing-layer",{layerTimes:O}))},50)}if(this.listens("gpu-timing-deferred-render")){const A=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const O=this.painter.queryGpuTimeDeferredRender(A);this.fire(new l.Event("gpu-timing-deferred-render",{gpuTime:O}))},50)}const I=this._sourcesDirty||this._styleDirty||this._placementDirty||b;if(I||this._repaint)this.triggerRepaint();else{const A=!this.isMoving()&&this.loaded();if(A&&(b=this._updateAverageElevation(g,!0)),b)this.triggerRepaint();else if(this._triggerFrame(!1),A&&(this.fire(new l.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const O=this._calculateSpeedIndex();this.fire(new l.Event("speedindexcompleted",{speedIndex:O})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||I||(this._fullyLoaded=!0,l.LivePerformanceUtils.mark(l.PerformanceMarkers.fullLoad),this._performanceMetricsCollection&&l.postPerformanceEvent(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(p){for(const s of this._markers)p&&!this.getRenderWorldCopies()&&(s._lngLat=s._lngLat.wrap()),s._update();for(const s of this._popups)!p||this.getRenderWorldCopies()||s._trackPointer||(s._lngLat=s._lngLat.wrap()),s._update()}_updateAverageElevation(p,s=!1){const d=g=>(this.transform.averageElevation=g,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return this.transform.averageElevation!==0&&d(0);if((s||p-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(p)){const g=this.transform.averageElevation;let _=this.transform.sampleAverageElevation(),b=!1;this.transform.elevation&&(b=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(_)?_=0:this._averageElevationLastSampledAt=p;const I=Math.abs(g-_);if(I>1){if(this._isInitialLoad||b)return this._averageElevation.jumpTo(_),d(_);this._averageElevation.easeTo(_,p,300)}else if(I>1e-4)return this._averageElevation.jumpTo(_),d(_)}return!!this._averageElevation.isEasing(p)&&d(this._averageElevation.getValue(p))}_authenticate(){l.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,p=>{if(p&&(p.message===l.AUTH_ERR_MSG||p.status===401)){const s=this.painter.context.gl;l.storeAuthState(s,!1),this._logoControl instanceof pf&&this._logoControl._updateLogo(),s&&s.clear(s.DEPTH_BUFFER_BIT|s.COLOR_BUFFER_BIT|s.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new l.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),l.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_updateTerrain(){const p=this._isDragging();this.painter.updateTerrain(this.style,p)}_calculateSpeedIndex(){const p=this.painter.canvasCopy(),s=this.painter.getCanvasCopiesAndTimestamps();s.timeStamps.push(performance.now());const d=this.painter.context.gl,g=d.createFramebuffer();function _(b){d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,b,0);const I=new Uint8Array(d.drawingBufferWidth*d.drawingBufferHeight*4);return d.readPixels(0,0,d.drawingBufferWidth,d.drawingBufferHeight,d.RGBA,d.UNSIGNED_BYTE,I),I}return d.bindFramebuffer(d.FRAMEBUFFER,g),this._canvasPixelComparison(_(p),s.canvasCopies.map(_),s.timeStamps)}_canvasPixelComparison(p,s,d){let g=d[1]-d[0];const _=p.length/4;for(let b=0;b<s.length;b++){const I=s[b];let A=0;for(let O=0;O<I.length;O+=4)I[O]===p[O]&&I[O+1]===p[O+1]&&I[O+2]===p[O+2]&&I[O+3]===p[O+3]&&(A+=1);g+=(d[b+2]-d[b+1])*(1-A/_)}return g}remove(){this._hash&&this._hash.remove();for(const s of this._controls)s.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),l.window!==void 0&&(l.window.removeEventListener("resize",this._onWindowResize,!1),l.window.removeEventListener("orientationchange",this._onWindowResize,!1),l.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),l.window.removeEventListener("online",this._onWindowOnline,!1),l.window.removeEventListener("visibilitychange",this._onVisibilityChange,!1));const p=this.painter.context.gl.getExtension("WEBGL_lose_context");p&&p.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),l.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new l.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(p){this._renderNextFrame=this._renderNextFrame||p,this.style&&!this._frame&&(this._frame=l.exported.frame(s=>{const d=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,d&&this._render(s)}))}_preloadTiles(p){const s=this.style?Object.values(this.style._sourceCaches):[];return l.asyncAll(s,(d,g)=>d._preloadTiles(p,g),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(p){this._trackResize&&this.resize({originalEvent:p})._update()}_onVisibilityChange(){l.window.document.visibilityState==="hidden"&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(p){this._showTileBoundaries!==p&&(this._showTileBoundaries=p,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(p){this._showTerrainWireframe!==p&&(this._showTerrainWireframe=p,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(p){this._speedIndexTiming!==p&&(this._speedIndexTiming=p,this._update())}get showPadding(){return!!this._showPadding}set showPadding(p){this._showPadding!==p&&(this._showPadding=p,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(p){this._showCollisionBoxes!==p&&(this._showCollisionBoxes=p,p?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(p){this._showOverdrawInspector!==p&&(this._showOverdrawInspector=p,this._update())}get repaint(){return!!this._repaint}set repaint(p){this._repaint!==p&&(this._repaint=p,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(p){this._vertices=p,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(p){this._showTileAABBs!==p&&(this._showTileAABBs=p,p&&this._update())}_setCacheLimits(p,s){l.setCacheLimits(p,s)}get version(){return l.version}},NavigationControl:class{constructor(p){this.options=l.extend({},p_,p),this._container=z("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",s=>s.preventDefault()),this.options.showZoom&&(l.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",s=>{this._map&&this._map.zoomIn({},{originalEvent:s})}),z("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",s=>{this._map&&this._map.zoomOut({},{originalEvent:s})}),z("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(l.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",s=>{const d=this._map;d&&(this.options.visualizePitch?d.resetNorthPitch({},{originalEvent:s}):d.resetNorth({},{originalEvent:s}))}),this._compassIcon=z("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const p=this._map;if(!p)return;const s=p.getZoom(),d=s===p.getMaxZoom(),g=s===p.getMinZoom();this._zoomInButton.disabled=d,this._zoomOutButton.disabled=g,this._zoomInButton.setAttribute("aria-disabled",d.toString()),this._zoomOutButton.setAttribute("aria-disabled",g.toString())}_rotateCompassArrow(){const p=this._map;if(!p)return;const s=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(p.transform.pitch*(Math.PI/180)),.5)}) rotateX(${p.transform.pitch}deg) rotateZ(${p.transform.angle*(180/Math.PI)}deg)`:`rotate(${p.transform.angle*(180/Math.PI)}deg)`;p._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=s)})}onAdd(p){return this._map=p,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),p.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&p.on("pitch",this._rotateCompassArrow),p.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new m_(p,this._compass,this.options.visualizePitch)),this._container}onRemove(){const p=this._map;p&&(this._container.remove(),this.options.showZoom&&p.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&p.off("pitch",this._rotateCompassArrow),p.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(p,s){const d=z("button",p,this._container);return d.type="button",d.addEventListener("click",s),d}_setButtonTitle(p,s){if(!this._map)return;const d=this._map._getUIString(`NavigationControl.${s}`);p.setAttribute("aria-label",d),p.firstElementChild&&p.firstElementChild.setAttribute("title",d)}},GeolocateControl:class extends l.Evented{constructor(p){super(),this.options=l.extend({geolocation:l.window.navigator.geolocation},yf,p),l.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=Dl(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(p){return this._map=p,this._container=z("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(p){const s=(d=!!this.options.geolocation)=>{this._supportsGeolocation=d,p(d)};this._supportsGeolocation!==void 0?p(this._supportsGeolocation):l.window.navigator.permissions!==void 0?l.window.navigator.permissions.query({name:"geolocation"}).then(d=>s(d.state!=="denied")).catch(()=>s()):s()}_isOutOfMapMaxBounds(p){const s=this._map.getMaxBounds(),d=p.coords;return!!s&&(d.longitude<s.getWest()||d.longitude>s.getEast()||d.latitude<s.getSouth()||d.latitude>s.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(p){if(this._map){if(this._isOutOfMapMaxBounds(p))return this._setErrorState(),this.fire(new l.Event("outofmaxbounds",p)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=p,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(p),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(p),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new l.Event("geolocate",p)),this._finish()}}_updateCamera(p){const s=new l.LngLat(p.coords.longitude,p.coords.latitude),d=p.coords.accuracy,g=this._map.getBearing(),_=l.extend({bearing:g},this.options.fitBoundsOptions);this._map.fitBounds(s.toBounds(d),_,{geolocateSource:!0})}_updateMarker(p){if(p){const s=new l.LngLat(p.coords.longitude,p.coords.latitude);this._accuracyCircleMarker.setLngLat(s).addTo(this._map),this._userLocationDotMarker.setLngLat(s).addTo(this._map),this._accuracy=p.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const p=this._map.transform,s=l.mercatorZfromAltitude(1,p._center.lat)*p.worldSize,d=Math.ceil(2*this._accuracy*s);this._circleElement.style.width=`${d}px`,this._circleElement.style.height=`${d}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&typeof this._heading=="number"?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(p){if(this._map){if(this.options.trackUserLocation)if(p.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const s=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",s),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",s),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(p.code===3&&this._noTimeout)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new l.Event("error",p)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(p){if(this._map!==void 0){if(this._container.addEventListener("contextmenu",s=>s.preventDefault()),this._geolocateButton=z("button","mapboxgl-ctrl-geolocate",this._container),z("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",p===!1){l.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const s=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",s),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",s)}else{const s=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",s),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",s)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=z("div","mapboxgl-user-location"),this._dotElement.appendChild(z("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(z("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new Zt({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=z("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Zt({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",s=>{s.geolocateSource||this._watchState!=="ACTIVE_LOCK"||s.originalEvent&&s.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new l.Event("trackuserlocationend")))})}}_onDeviceOrientation(p){this._userLocationDotMarker&&(p.webkitCompassHeading?this._heading=p.webkitCompassHeading:p.absolute===!0&&(this._heading=-1*p.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return l.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new l.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new l.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new l.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let p;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(p={maximumAge:6e5,timeout:0},this._noTimeout=!0):(p=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,p),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const p=()=>{l.window.addEventListener("ondeviceorientationabsolute"in l.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientation)};l.window.DeviceMotionEvent!==void 0&&typeof l.window.DeviceMotionEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(s=>{s==="granted"&&p()}).catch(console.error):p()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),l.window.removeEventListener("deviceorientation",this._onDeviceOrientation),l.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:Jt,ScaleControl:class{constructor(p){this.options=l.extend({},_f,p),this._isNumberFormatSupported=function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"short",unit:"meter"}),!0}catch{return!1}}(),l.bindAll(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const p=this.options.maxWidth||100,s=this._map,d=s._containerHeight/2,g=s._containerWidth/2-p/2,_=s.unproject([g,d]),b=s.unproject([g+p,d]),I=_.distanceTo(b);if(this.options.unit==="imperial"){const A=3.2808*I;A>5280?this._setScale(p,A/5280,"mile"):this._setScale(p,A,"foot")}else this.options.unit==="nautical"?this._setScale(p,I/1852,"nautical-mile"):I>=1e3?this._setScale(p,I/1e3,"kilometer"):this._setScale(p,I,"meter")}_setScale(p,s,d){this._map._requestDomTask(()=>{const g=function(b){const I=Math.pow(10,`${Math.floor(b)}`.length-1);let A=b/I;return A=A>=10?10:A>=5?5:A>=3?3:A>=2?2:A>=1?1:function(O){const N=Math.pow(10,Math.ceil(-Math.log(O)/Math.LN10));return Math.round(O*N)/N}(A),I*A}(s),_=g/s;this._container.innerHTML=this._isNumberFormatSupported&&d!=="nautical-mile"?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"short",unit:d}).format(g):`${g}&nbsp;${xf[d]}`,this._container.style.width=p*_+"px"})}onAdd(p){return this._map=p,this._language=p.getLanguage(),this._container=z("div","mapboxgl-ctrl mapboxgl-ctrl-scale",p.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(p){this._language=p,this._update()}setUnit(p){this.options.unit=p,this._update()}},FullscreenControl:class{constructor(p){this._fullscreen=!1,p&&p.container&&(p.container instanceof l.window.HTMLElement?this._container=p.container:l.warnOnce("Full screen control 'container' must be a DOM element.")),l.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in l.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in l.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(p){return this._map=p,this._container||(this._container=this._map.getContainer()),this._controlContainer=z("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",l.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,l.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!l.window.document.fullscreenEnabled&&!l.window.document.webkitFullscreenEnabled)}_setupUI(){const p=this._fullscreenButton=z("button","mapboxgl-ctrl-fullscreen",this._controlContainer);z("span","mapboxgl-ctrl-icon",p).setAttribute("aria-hidden","true"),p.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),l.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const p=this._getTitle();this._fullscreenButton.setAttribute("aria-label",p),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",p)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(l.window.document.fullscreenElement||l.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?l.window.document.exitFullscreen?l.window.document.exitFullscreen():l.window.document.webkitCancelFullScreen&&l.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends l.Evented{constructor(p){super(),this.options=l.extend(Object.create(gf),p),l.bindAll(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(p&&p.className?p.className.trim().split(/\s+/):[])}addTo(p){return this._map&&this.remove(),this._map=p,this.options.closeOnClick&&p.on("preclick",this._onClose),this.options.closeOnMove&&p.on("move",this._onClose),p.on("remove",this.remove),this._update(),p._addPopup(this),this._focusFirstElement(),this._trackPointer?(p.on("mousemove",this._onMouseEvent),p.on("mouseup",this._onMouseEvent),p._canvasContainer.classList.add("mapboxgl-track-pointer")):p.on("move",this._update),this.fire(new l.Event("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const p=this._map;return p&&(p.off("move",this._update),p.off("move",this._onClose),p.off("preclick",this._onClose),p.off("click",this._onClose),p.off("remove",this.remove),p.off("mousemove",this._onMouseEvent),p.off("mouseup",this._onMouseEvent),p.off("drag",this._onMouseEvent),p._canvasContainer&&p._canvasContainer.classList.remove("mapboxgl-track-pointer"),p._removePopup(this),this._map=void 0),this.fire(new l.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(p){this._lngLat=l.LngLat.convert(p),this._pos=null,this._trackPointer=!1,this._update();const s=this._map;return s&&(s.on("move",this._update),s.off("mousemove",this._onMouseEvent),s._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const p=this._map;return p&&(p.off("move",this._update),p.on("mousemove",this._onMouseEvent),p.on("drag",this._onMouseEvent),p._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(p){return this.setDOMContent(l.window.document.createTextNode(p))}setHTML(p){const s=l.window.document.createDocumentFragment(),d=l.window.document.createElement("body");let g;for(d.innerHTML=p;g=d.firstChild,g;)s.appendChild(g);return this.setDOMContent(s)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(p){return this.options.maxWidth=p,this._update(),this}setDOMContent(p){let s=this._content;if(s)for(;s.hasChildNodes();)s.firstChild&&s.removeChild(s.firstChild);else s=this._content=z("div","mapboxgl-popup-content",this._container||void 0);if(s.appendChild(p),this.options.closeButton){const d=this._closeButton=z("button","mapboxgl-popup-close-button",s);d.type="button",d.setAttribute("aria-label","Close popup"),d.setAttribute("aria-hidden","true"),d.innerHTML="&#215;",d.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(p){return this._classList.add(p),this._updateClassList(),this}removeClassName(p){return this._classList.delete(p),this._updateClassList(),this}setOffset(p){return this.options.offset=p,this._update(),this}toggleClassName(p){let s;return this._classList.delete(p)?s=!1:(this._classList.add(p),s=!0),this._updateClassList(),s}_onMouseEvent(p){this._update(p.point)}_getAnchor(p){if(this.options.anchor)return this.options.anchor;const s=this._map,d=this._container,g=this._pos;if(!s||!d||!g)return"bottom";const _=d.offsetWidth,b=d.offsetHeight,I=g.x<_/2,A=g.x>s.transform.width-_/2;if(g.y+p<b)return I?"top-left":A?"top-right":"top";if(g.y>s.transform.height-b){if(I)return"bottom-left";if(A)return"bottom-right"}return I?"left":A?"right":"bottom"}_updateClassList(){const p=this._container;if(!p)return;const s=[...this._classList];s.push("mapboxgl-popup"),this._anchor&&s.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&s.push("mapboxgl-popup-track-pointer"),p.className=s.join(" ")}_update(p){const s=this._map,d=this._content;if(!s||!this._lngLat&&!this._trackPointer||!d)return;let g=this._container;if(g||(g=this._container=z("div","mapboxgl-popup",s.getContainer()),this._tip=z("div","mapboxgl-popup-tip",g),g.appendChild(d)),this.options.maxWidth&&g.style.maxWidth!==this.options.maxWidth&&(g.style.maxWidth=this.options.maxWidth),s.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Fl(this._lngLat,this._pos,s.transform)),!this._trackPointer||p){const _=this._pos=this._trackPointer&&p?p:s.project(this._lngLat),b=hg(this.options.offset),I=this._anchor=this._getAnchor(b.y),A=hg(this.options.offset,I),O=_.add(A).round();s._requestDomTask(()=>{this._container&&I&&(this._container.style.transform=`${Zs[I]} translate(${O.x}px,${O.y}px)`)})}if(!this._marker&&s._showingGlobe()){const _=l.isLngLatBehindGlobe(s.transform,this._lngLat)?0:1;this._setOpacity(_)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const p=this._container.querySelector(f_);p&&p.focus()}_onClose(){this.remove()}_setOpacity(p){this._container&&(this._container.style.opacity=`${p}`),this._content&&(this._content.style.pointerEvents=p?"auto":"none")}},Marker:Zt,Style:ya,LngLat:l.LngLat,LngLatBounds:l.LngLatBounds,Point:l.Point,MercatorCoordinate:l.MercatorCoordinate,FreeCameraOptions:Ym,Evented:l.Evented,config:l.config,prewarm:function(){En().acquire(Zr)},clearPrewarmedResources:function(){const p=nn;p&&(p.isPreloaded()&&p.numActive()===1?(p.release(Zr),nn=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return l.config.ACCESS_TOKEN},set accessToken(p){l.config.ACCESS_TOKEN=p},get baseApiUrl(){return l.config.API_URL},set baseApiUrl(p){l.config.API_URL=p},get workerCount(){return an.workerCount},set workerCount(p){an.workerCount=p},get maxParallelImageRequests(){return l.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(p){l.config.MAX_PARALLEL_IMAGE_REQUESTS=p},clearStorage(p){l.clearTileCache(p)},workerUrl:"",workerClass:null,setNow:l.exported.setNow,restoreNow:l.exported.restoreNow};return Bl});var y=c;return y})})(qD);var iJ=qD.exports;const oJ=xc(iJ);function XD(e,t,r){if(e!==null)for(var o,c,f,y,l,w,E,P=0,M=0,z,F=e.type,k=F==="FeatureCollection",U=F==="Feature",X=k?e.features.length:1,$=0;$<X;$++){E=k?e.features[$].geometry:U?e.geometry:e,z=E?E.type==="GeometryCollection":!1,l=z?E.geometries.length:1;for(var j=0;j<l;j++){var V=0,Z=0;if(y=z?E.geometries[j]:E,y!==null){w=y.coordinates;var ee=y.type;switch(P=r&&(ee==="Polygon"||ee==="MultiPolygon")?1:0,ee){case null:break;case"Point":if(t(w,M,$,V,Z)===!1)return!1;M++,V++;break;case"LineString":case"MultiPoint":for(o=0;o<w.length;o++){if(t(w[o],M,$,V,Z)===!1)return!1;M++,ee==="MultiPoint"&&V++}ee==="LineString"&&V++;break;case"Polygon":case"MultiLineString":for(o=0;o<w.length;o++){for(c=0;c<w[o].length-P;c++){if(t(w[o][c],M,$,V,Z)===!1)return!1;M++}ee==="MultiLineString"&&V++,ee==="Polygon"&&Z++}ee==="Polygon"&&V++;break;case"MultiPolygon":for(o=0;o<w.length;o++){for(Z=0,c=0;c<w[o].length;c++){for(f=0;f<w[o][c].length-P;f++){if(t(w[o][c][f],M,$,V,Z)===!1)return!1;M++}Z++}V++}break;case"GeometryCollection":for(o=0;o<y.geometries.length;o++)if(XD(y.geometries[o],t,r)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function BP(e){var t=[1/0,1/0,-1/0,-1/0];return XD(e,function(r){t[0]>r[0]&&(t[0]=r[0]),t[1]>r[1]&&(t[1]=r[1]),t[2]<r[0]&&(t[2]=r[0]),t[3]<r[1]&&(t[3]=r[1])}),t}BP.default=BP;var aJ=Object.defineProperty,sJ=(e,t,r)=>t in e?aJ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,lJ=(e,t,r)=>(sJ(e,typeof t!="symbol"?t+"":t,r),r);class xJ extends oJ.Map{constructor(t){super(t),lJ(this,"_groupLayers",new Map)}getGroupLayer(t){return this._groupLayers.get(t)}addGroupLayer(t,r){if(this.getGroupLayer(t))throw new Error(`The groupLayer '${t}' has already existed.`);const{sources:o={},layers:c=[],bounds:f,fitBoundsOptions:y={padding:{top:20,bottom:20,left:20,right:20}},flyToOptions:l}=r;for(const w in o)Object.prototype.hasOwnProperty.call(o,w)&&(this.getSource(w)?console.warn(`The source '${w}' has already existed.`):this.addSource(w,o[w]));for(const w of c){if(this.getLayer(w.id))throw new Error(`The layer '${w.id}' has already existed.`);{const E=w.metadata||{},P=E.before?this._getBeforeLayerId(w.id,E.before):void 0;w.metadata={...E,grouplayer:t},this.addLayer(w,P),this._setLayerCursor(w)}}return f?this.fitBounds(f,y):l&&this.flyTo(l),this._groupLayers.set(t,r),this}removeGroupLayer(t,r=!0){const o=this.getGroupLayer(t);if(o){const{sources:c={},layers:f=[]}=o;for(const y of f){const l=y.id;this.getLayer(l)&&this.removeLayer(l),y.source&&typeof y.source=="object"&&r&&this.getSource(l)&&this.removeSource(l)}r&&Object.keys(c).map(y=>{this.getSource(y)&&this.removeSource(y)}),this._groupLayers.delete(t)}return this}removeGroupLayers(t=!0){return this._groupLayers.forEach((r,o)=>{this.removeGroupLayer(o,t)}),this}setBasemapStyle(t,r=!0,o){this.setStyle(t,o);const c=r?new Map(this._groupLayers):void 0;this._groupLayers.clear(),c&&this.once("styledata",()=>{c.forEach((f,y)=>{this.addGroupLayer(y,f)})})}_getBeforeLayerIdByString(t){const r=this.getGroupLayer(t);return r&&r.layers.length>0?r.layers[0].id:this.getLayer(t)?t:void 0}_getBeforeLayerId(t,r){let o;if(typeof r=="string")o=this._getBeforeLayerIdByString(r);else if(Array.isArray(r)){for(const c of r)if(o=this._getBeforeLayerIdByString(c),o)break}return o||console.warn(`Layer with id "${r}" does not exist on this map. The layer with id "${t}" will be appended to the end of the layers array and appear visually above all other layers.`),o}_setLayerCursor(t){const r=t.metadata||{},o=t.id;r&&r.cursor&&(this.on("mouseenter",o,()=>{this.getCanvas().style.cursor=r.cursor}),this.on("mouseleave",o,()=>{this.getCanvas().style.cursor=""}))}}export{US as C,uJ as I,AW as L,dJ as S,mJ as T,gJ as W,yJ as a,BP as b,vJ as c,xZ as d,oJ as e,TZ as f,pJ as g,xJ as h,iJ as i,cJ as j,vP as k,hJ as m,fJ as n,T as r,_J as u};
